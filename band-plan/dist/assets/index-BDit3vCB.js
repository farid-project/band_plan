function VC(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var y3={exports:{}},cg={},w3={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=Symbol.for("react.element"),YC=Symbol.for("react.portal"),KC=Symbol.for("react.fragment"),JC=Symbol.for("react.strict_mode"),XC=Symbol.for("react.profiler"),QC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),eA=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),nA=Symbol.for("react.memo"),rA=Symbol.for("react.lazy"),vx=Symbol.iterator;function iA(e){return e===null||typeof e!="object"?null:(e=vx&&e[vx]||e["@@iterator"],typeof e=="function"?e:null)}var x3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b3=Object.assign,_3={};function Nf(e,t,n){this.props=e,this.context=t,this.refs=_3,this.updater=n||x3}Nf.prototype.isReactComponent={};Nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function S3(){}S3.prototype=Nf.prototype;function Ey(e,t,n){this.props=e,this.context=t,this.refs=_3,this.updater=n||x3}var Cy=Ey.prototype=new S3;Cy.constructor=Ey;b3(Cy,Nf.prototype);Cy.isPureReactComponent=!0;var yx=Array.isArray,N3=Object.prototype.hasOwnProperty,Ay={current:null},j3={key:!0,ref:!0,__self:!0,__source:!0};function k3(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)N3.call(t,r)&&!j3.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vp,type:e,key:s,ref:a,props:i,_owner:Ay.current}}function sA(e,t){return{$$typeof:vp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ly(e){return typeof e=="object"&&e!==null&&e.$$typeof===vp}function aA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wx=/\/+/g;function U1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aA(""+e.key):t.toString(36)}function Vm(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case vp:case YC:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+U1(a,0):r,yx(i)?(n="",e!=null&&(n=e.replace(wx,"$&/")+"/"),Vm(i,t,n,"",function(f){return f})):i!=null&&(Ly(i)&&(i=sA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(wx,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",yx(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+U1(s,l);a+=Vm(s,t,n,c,i)}else if(c=iA(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+U1(s,l++),a+=Vm(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function mm(e,t,n){if(e==null)return e;var r=[],i=0;return Vm(e,r,"","",function(s){return t.call(n,s,i++)}),r}function oA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $i={current:null},Gm={transition:null},lA={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Gm,ReactCurrentOwner:Ay};function E3(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:mm,forEach:function(e,t,n){mm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mm(e,function(){t++}),t},toArray:function(e){return mm(e,function(t){return t})||[]},only:function(e){if(!Ly(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=Nf;Qt.Fragment=KC;Qt.Profiler=XC;Qt.PureComponent=Ey;Qt.StrictMode=JC;Qt.Suspense=tA;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;Qt.act=E3;Qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=b3({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Ay.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N3.call(t,c)&&!j3.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:vp,type:e.type,key:i,ref:s,props:r,_owner:a}};Qt.createContext=function(e){return e={$$typeof:ZC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QC,_context:e},e.Consumer=e};Qt.createElement=k3;Qt.createFactory=function(e){var t=k3.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:eA,render:e}};Qt.isValidElement=Ly;Qt.lazy=function(e){return{$$typeof:rA,_payload:{_status:-1,_result:e},_init:oA}};Qt.memo=function(e,t){return{$$typeof:nA,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=Gm.transition;Gm.transition={};try{e()}finally{Gm.transition=t}};Qt.unstable_act=E3;Qt.useCallback=function(e,t){return $i.current.useCallback(e,t)};Qt.useContext=function(e){return $i.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return $i.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return $i.current.useEffect(e,t)};Qt.useId=function(){return $i.current.useId()};Qt.useImperativeHandle=function(e,t,n){return $i.current.useImperativeHandle(e,t,n)};Qt.useInsertionEffect=function(e,t){return $i.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return $i.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return $i.current.useMemo(e,t)};Qt.useReducer=function(e,t,n){return $i.current.useReducer(e,t,n)};Qt.useRef=function(e){return $i.current.useRef(e)};Qt.useState=function(e){return $i.current.useState(e)};Qt.useSyncExternalStore=function(e,t,n){return $i.current.useSyncExternalStore(e,t,n)};Qt.useTransition=function(){return $i.current.useTransition()};Qt.version="18.3.1";w3.exports=Qt;var C=w3.exports;const pt=v3(C),Hv=VC({__proto__:null,default:pt},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA=C,uA=Symbol.for("react.element"),dA=Symbol.for("react.fragment"),fA=Object.prototype.hasOwnProperty,hA=cA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pA={key:!0,ref:!0,__self:!0,__source:!0};function C3(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)fA.call(t,r)&&!pA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:uA,type:e,key:s,ref:a,props:i,_owner:hA.current}}cg.Fragment=dA;cg.jsx=C3;cg.jsxs=C3;y3.exports=cg;var d=y3.exports,A3={exports:{}},Os={},L3={exports:{}},P3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,z){var ae=$.length;$.push(z);e:for(;0<ae;){var Pe=ae-1>>>1,P=$[Pe];if(0<i(P,z))$[Pe]=z,$[ae]=P,ae=Pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var z=$[0],ae=$.pop();if(ae!==z){$[0]=ae;e:for(var Pe=0,P=$.length,H=P>>>1;Pe<H;){var re=2*(Pe+1)-1,ce=$[re],fe=re+1,Ee=$[fe];if(0>i(ce,ae))fe<P&&0>i(Ee,ce)?($[Pe]=Ee,$[fe]=ae,Pe=fe):($[Pe]=ce,$[re]=ae,Pe=re);else if(fe<P&&0>i(Ee,ae))$[Pe]=Ee,$[fe]=ae,Pe=fe;else break e}}return z}function i($,z){var ae=$.sortIndex-z.sortIndex;return ae!==0?ae:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,m=null,w=3,g=!1,N=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L($){for(var z=n(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=$)r(f),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(f)}}function M($){if(j=!1,L($),!N)if(n(c)!==null)N=!0,ye(K);else{var z=n(f);z!==null&&Q(M,z.startTime-$)}}function K($,z){N=!1,j&&(j=!1,b(R),R=-1),g=!0;var ae=w;try{for(L(z),m=n(c);m!==null&&(!(m.expirationTime>z)||$&&!O());){var Pe=m.callback;if(typeof Pe=="function"){m.callback=null,w=m.priorityLevel;var P=Pe(m.expirationTime<=z);z=e.unstable_now(),typeof P=="function"?m.callback=P:m===n(c)&&r(c),L(z)}else r(c);m=n(c)}if(m!==null)var H=!0;else{var re=n(f);re!==null&&Q(M,re.startTime-z),H=!1}return H}finally{m=null,w=ae,g=!1}}var oe=!1,Z=null,R=-1,ee=5,le=-1;function O(){return!(e.unstable_now()-le<ee)}function U(){if(Z!==null){var $=e.unstable_now();le=$;var z=!0;try{z=Z(!0,$)}finally{z?Y():(oe=!1,Z=null)}}else oe=!1}var Y;if(typeof S=="function")Y=function(){S(U)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,xe=J.port2;J.port1.onmessage=U,Y=function(){xe.postMessage(null)}}else Y=function(){k(U,0)};function ye($){Z=$,oe||(oe=!0,Y())}function Q($,z){R=k(function(){$(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){N||g||(N=!0,ye(K))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(w){case 1:case 2:case 3:var z=3;break;default:z=w}var ae=w;w=z;try{return $()}finally{w=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ae=w;w=$;try{return z()}finally{w=ae}},e.unstable_scheduleCallback=function($,z,ae){var Pe=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Pe+ae:Pe):ae=Pe,$){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ae+P,$={id:p++,callback:z,priorityLevel:$,startTime:ae,expirationTime:P,sortIndex:-1},ae>Pe?($.sortIndex=ae,t(f,$),n(c)===null&&$===n(f)&&(j?(b(R),R=-1):j=!0,Q(M,ae-Pe))):($.sortIndex=P,t(c,$),N||g||(N=!0,ye(K))),$},e.unstable_shouldYield=O,e.unstable_wrapCallback=function($){var z=w;return function(){var ae=w;w=z;try{return $.apply(this,arguments)}finally{w=ae}}}})(P3);L3.exports=P3;var mA=L3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=C,Ds=mA;function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T3=new Set,Hh={};function zu(e,t){mf(e,t),mf(e+"Capture",t)}function mf(e,t){for(Hh[e]=t,e=0;e<t.length;e++)T3.add(t[e])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vv=Object.prototype.hasOwnProperty,vA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xx={},bx={};function yA(e){return Vv.call(bx,e)?!0:Vv.call(xx,e)?!1:vA.test(e)?bx[e]=!0:(xx[e]=!0,!1)}function wA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xA(e,t,n,r){if(t===null||typeof t>"u"||wA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bi(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oi[e]=new Bi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];oi[t]=new Bi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){oi[e]=new Bi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oi[e]=new Bi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oi[e]=new Bi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){oi[e]=new Bi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){oi[e]=new Bi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){oi[e]=new Bi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){oi[e]=new Bi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Py=/[\-:]([a-z])/g;function Ty(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Py,Ty);oi[t]=new Bi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Py,Ty);oi[t]=new Bi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Py,Ty);oi[t]=new Bi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){oi[e]=new Bi(e,1,!1,e.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){oi[e]=new Bi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Iy(e,t,n,r){var i=oi.hasOwnProperty(t)?oi[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xA(t,n,i,r)&&(n=null),r||i===null?yA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ol=gA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gm=Symbol.for("react.element"),Ud=Symbol.for("react.portal"),zd=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Gv=Symbol.for("react.profiler"),I3=Symbol.for("react.provider"),D3=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Yv=Symbol.for("react.suspense"),Kv=Symbol.for("react.suspense_list"),My=Symbol.for("react.memo"),ic=Symbol.for("react.lazy"),O3=Symbol.for("react.offscreen"),_x=Symbol.iterator;function lh(e){return e===null||typeof e!="object"?null:(e=_x&&e[_x]||e["@@iterator"],typeof e=="function"?e:null)}var dr=Object.assign,z1;function _h(e){if(z1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z1=t&&t[1]||""}return`
`+z1+e}var q1=!1;function W1(e,t){if(!e||q1)return"";q1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{q1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_h(e):""}function bA(e){switch(e.tag){case 5:return _h(e.type);case 16:return _h("Lazy");case 13:return _h("Suspense");case 19:return _h("SuspenseList");case 0:case 2:case 15:return e=W1(e.type,!1),e;case 11:return e=W1(e.type.render,!1),e;case 1:return e=W1(e.type,!0),e;default:return""}}function Jv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zd:return"Fragment";case Ud:return"Portal";case Gv:return"Profiler";case Dy:return"StrictMode";case Yv:return"Suspense";case Kv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D3:return(e.displayName||"Context")+".Consumer";case I3:return(e._context.displayName||"Context")+".Provider";case Oy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case My:return t=e.displayName||null,t!==null?t:Jv(e.type)||"Memo";case ic:t=e._payload,e=e._init;try{return Jv(e(t))}catch{}}return null}function _A(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jv(t);case 8:return t===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function M3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SA(e){var t=M3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vm(e){e._valueTracker||(e._valueTracker=SA(e))}function R3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=M3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function m0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xv(e,t){var n=t.checked;return dr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Sx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F3(e,t){t=t.checked,t!=null&&Iy(e,"checked",t,!1)}function Qv(e,t){F3(e,t);var n=Cc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zv(e,t.type,Cc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zv(e,t,n){(t!=="number"||m0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sh=Array.isArray;function tf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function e2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return dr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(rt(92));if(Sh(n)){if(1<n.length)throw Error(rt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cc(n)}}function $3(e,t){var n=Cc(t.value),r=Cc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function kx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ym,U3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ym=ym||document.createElement("div"),ym.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ym.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ch={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NA=["Webkit","ms","Moz","O"];Object.keys(Ch).forEach(function(e){NA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ch[t]=Ch[e]})});function z3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ch.hasOwnProperty(e)&&Ch[e]?(""+t).trim():t+"px"}function q3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=z3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var jA=dr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function n2(e,t){if(t){if(jA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function r2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i2=null;function Ry(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var s2=null,nf=null,rf=null;function Ex(e){if(e=xp(e)){if(typeof s2!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=pg(t),s2(e.stateNode,e.type,t))}}function W3(e){nf?rf?rf.push(e):rf=[e]:nf=e}function H3(){if(nf){var e=nf,t=rf;if(rf=nf=null,Ex(e),t)for(e=0;e<t.length;e++)Ex(t[e])}}function V3(e,t){return e(t)}function G3(){}var H1=!1;function Y3(e,t,n){if(H1)return e(t,n);H1=!0;try{return V3(e,t,n)}finally{H1=!1,(nf!==null||rf!==null)&&(G3(),H3())}}function Gh(e,t){var n=e.stateNode;if(n===null)return null;var r=pg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(rt(231,t,typeof n));return n}var a2=!1;if(el)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){a2=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{a2=!1}function kA(e,t,n,r,i,s,a,l,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Ah=!1,g0=null,v0=!1,o2=null,EA={onError:function(e){Ah=!0,g0=e}};function CA(e,t,n,r,i,s,a,l,c){Ah=!1,g0=null,kA.apply(EA,arguments)}function AA(e,t,n,r,i,s,a,l,c){if(CA.apply(this,arguments),Ah){if(Ah){var f=g0;Ah=!1,g0=null}else throw Error(rt(198));v0||(v0=!0,o2=f)}}function qu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function K3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cx(e){if(qu(e)!==e)throw Error(rt(188))}function LA(e){var t=e.alternate;if(!t){if(t=qu(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cx(i),e;if(s===r)return Cx(i),t;s=s.sibling}throw Error(rt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(rt(189))}}if(n.alternate!==r)throw Error(rt(190))}if(n.tag!==3)throw Error(rt(188));return n.stateNode.current===n?e:t}function J3(e){return e=LA(e),e!==null?X3(e):null}function X3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X3(e);if(t!==null)return t;e=e.sibling}return null}var Q3=Ds.unstable_scheduleCallback,Ax=Ds.unstable_cancelCallback,PA=Ds.unstable_shouldYield,TA=Ds.unstable_requestPaint,Nr=Ds.unstable_now,IA=Ds.unstable_getCurrentPriorityLevel,Fy=Ds.unstable_ImmediatePriority,Z3=Ds.unstable_UserBlockingPriority,y0=Ds.unstable_NormalPriority,DA=Ds.unstable_LowPriority,e4=Ds.unstable_IdlePriority,ug=null,mo=null;function OA(e){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(ug,e,void 0,(e.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:FA,MA=Math.log,RA=Math.LN2;function FA(e){return e>>>=0,e===0?32:31-(MA(e)/RA|0)|0}var wm=64,xm=4194304;function Nh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Nh(l):(s&=a,s!==0&&(r=Nh(s)))}else a=n&~i,a!==0?r=Nh(a):s!==0&&(r=Nh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Pa(t),i=1<<n,r|=e[n],t&=~i;return r}function $A(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Pa(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=$A(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function l2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t4(){var e=wm;return wm<<=1,!(wm&4194240)&&(wm=64),e}function V1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pa(t),e[t]=n}function UA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Pa(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function $y(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Pa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kn=0;function n4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var r4,By,i4,s4,a4,c2=!1,bm=[],yc=null,wc=null,xc=null,Yh=new Map,Kh=new Map,lc=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lx(e,t){switch(e){case"focusin":case"focusout":yc=null;break;case"dragenter":case"dragleave":wc=null;break;case"mouseover":case"mouseout":xc=null;break;case"pointerover":case"pointerout":Yh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(t.pointerId)}}function uh(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=xp(t),t!==null&&By(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qA(e,t,n,r,i){switch(t){case"focusin":return yc=uh(yc,e,t,n,r,i),!0;case"dragenter":return wc=uh(wc,e,t,n,r,i),!0;case"mouseover":return xc=uh(xc,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Yh.set(s,uh(Yh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kh.set(s,uh(Kh.get(s)||null,e,t,n,r,i)),!0}return!1}function o4(e){var t=ku(e.target);if(t!==null){var n=qu(t);if(n!==null){if(t=n.tag,t===13){if(t=K3(n),t!==null){e.blockedOn=t,a4(e.priority,function(){i4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ym(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=u2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);i2=r,n.target.dispatchEvent(r),i2=null}else return t=xp(n),t!==null&&By(t),e.blockedOn=n,!1;t.shift()}return!0}function Px(e,t,n){Ym(e)&&n.delete(t)}function WA(){c2=!1,yc!==null&&Ym(yc)&&(yc=null),wc!==null&&Ym(wc)&&(wc=null),xc!==null&&Ym(xc)&&(xc=null),Yh.forEach(Px),Kh.forEach(Px)}function dh(e,t){e.blockedOn===t&&(e.blockedOn=null,c2||(c2=!0,Ds.unstable_scheduleCallback(Ds.unstable_NormalPriority,WA)))}function Jh(e){function t(i){return dh(i,e)}if(0<bm.length){dh(bm[0],e);for(var n=1;n<bm.length;n++){var r=bm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yc!==null&&dh(yc,e),wc!==null&&dh(wc,e),xc!==null&&dh(xc,e),Yh.forEach(t),Kh.forEach(t),n=0;n<lc.length;n++)r=lc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lc.length&&(n=lc[0],n.blockedOn===null);)o4(n),n.blockedOn===null&&lc.shift()}var sf=ol.ReactCurrentBatchConfig,x0=!0;function HA(e,t,n,r){var i=kn,s=sf.transition;sf.transition=null;try{kn=1,Uy(e,t,n,r)}finally{kn=i,sf.transition=s}}function VA(e,t,n,r){var i=kn,s=sf.transition;sf.transition=null;try{kn=4,Uy(e,t,n,r)}finally{kn=i,sf.transition=s}}function Uy(e,t,n,r){if(x0){var i=u2(e,t,n,r);if(i===null)nv(e,t,r,b0,n),Lx(e,r);else if(qA(i,e,t,n,r))r.stopPropagation();else if(Lx(e,r),t&4&&-1<zA.indexOf(e)){for(;i!==null;){var s=xp(i);if(s!==null&&r4(s),s=u2(e,t,n,r),s===null&&nv(e,t,r,b0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nv(e,t,r,null,n)}}var b0=null;function u2(e,t,n,r){if(b0=null,e=Ry(r),e=ku(e),e!==null)if(t=qu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=K3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return b0=e,null}function l4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IA()){case Fy:return 1;case Z3:return 4;case y0:case DA:return 16;case e4:return 536870912;default:return 16}default:return 16}}var hc=null,zy=null,Km=null;function c4(){if(Km)return Km;var e,t=zy,n=t.length,r,i="value"in hc?hc.value:hc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Km=i.slice(e,1<r?1-r:void 0)}function Jm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _m(){return!0}function Tx(){return!1}function Ms(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_m:Tx,this.isPropagationStopped=Tx,this}return dr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),t}var jf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qy=Ms(jf),wp=dr({},jf,{view:0,detail:0}),GA=Ms(wp),G1,Y1,fh,dg=dr({},wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fh&&(fh&&e.type==="mousemove"?(G1=e.screenX-fh.screenX,Y1=e.screenY-fh.screenY):Y1=G1=0,fh=e),G1)},movementY:function(e){return"movementY"in e?e.movementY:Y1}}),Ix=Ms(dg),YA=dr({},dg,{dataTransfer:0}),KA=Ms(YA),JA=dr({},wp,{relatedTarget:0}),K1=Ms(JA),XA=dr({},jf,{animationName:0,elapsedTime:0,pseudoElement:0}),QA=Ms(XA),ZA=dr({},jf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eL=Ms(ZA),tL=dr({},jf,{data:0}),Dx=Ms(tL),nL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iL[e])?!!t[e]:!1}function Wy(){return sL}var aL=dr({},wp,{key:function(e){if(e.key){var t=nL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wy,charCode:function(e){return e.type==="keypress"?Jm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oL=Ms(aL),lL=dr({},dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ox=Ms(lL),cL=dr({},wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wy}),uL=Ms(cL),dL=dr({},jf,{propertyName:0,elapsedTime:0,pseudoElement:0}),fL=Ms(dL),hL=dr({},dg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pL=Ms(hL),mL=[9,13,27,32],Hy=el&&"CompositionEvent"in window,Lh=null;el&&"documentMode"in document&&(Lh=document.documentMode);var gL=el&&"TextEvent"in window&&!Lh,u4=el&&(!Hy||Lh&&8<Lh&&11>=Lh),Mx=" ",Rx=!1;function d4(e,t){switch(e){case"keyup":return mL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qd=!1;function vL(e,t){switch(e){case"compositionend":return f4(t);case"keypress":return t.which!==32?null:(Rx=!0,Mx);case"textInput":return e=t.data,e===Mx&&Rx?null:e;default:return null}}function yL(e,t){if(qd)return e==="compositionend"||!Hy&&d4(e,t)?(e=c4(),Km=zy=hc=null,qd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u4&&t.locale!=="ko"?null:t.data;default:return null}}var wL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wL[e.type]:t==="textarea"}function h4(e,t,n,r){W3(r),t=_0(t,"onChange"),0<t.length&&(n=new qy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ph=null,Xh=null;function xL(e){N4(e,0)}function fg(e){var t=Vd(e);if(R3(t))return e}function bL(e,t){if(e==="change")return t}var p4=!1;if(el){var J1;if(el){var X1="oninput"in document;if(!X1){var $x=document.createElement("div");$x.setAttribute("oninput","return;"),X1=typeof $x.oninput=="function"}J1=X1}else J1=!1;p4=J1&&(!document.documentMode||9<document.documentMode)}function Bx(){Ph&&(Ph.detachEvent("onpropertychange",m4),Xh=Ph=null)}function m4(e){if(e.propertyName==="value"&&fg(Xh)){var t=[];h4(t,Xh,e,Ry(e)),Y3(xL,t)}}function _L(e,t,n){e==="focusin"?(Bx(),Ph=t,Xh=n,Ph.attachEvent("onpropertychange",m4)):e==="focusout"&&Bx()}function SL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fg(Xh)}function NL(e,t){if(e==="click")return fg(t)}function jL(e,t){if(e==="input"||e==="change")return fg(t)}function kL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Da=typeof Object.is=="function"?Object.is:kL;function Qh(e,t){if(Da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Vv.call(t,i)||!Da(e[i],t[i]))return!1}return!0}function Ux(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zx(e,t){var n=Ux(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ux(n)}}function g4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v4(){for(var e=window,t=m0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=m0(e.document)}return t}function Vy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function EL(e){var t=v4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&g4(n.ownerDocument.documentElement,n)){if(r!==null&&Vy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=zx(n,s);var a=zx(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CL=el&&"documentMode"in document&&11>=document.documentMode,Wd=null,d2=null,Th=null,f2=!1;function qx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;f2||Wd==null||Wd!==m0(r)||(r=Wd,"selectionStart"in r&&Vy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Th&&Qh(Th,r)||(Th=r,r=_0(d2,"onSelect"),0<r.length&&(t=new qy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Wd)))}function Sm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hd={animationend:Sm("Animation","AnimationEnd"),animationiteration:Sm("Animation","AnimationIteration"),animationstart:Sm("Animation","AnimationStart"),transitionend:Sm("Transition","TransitionEnd")},Q1={},y4={};el&&(y4=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function hg(e){if(Q1[e])return Q1[e];if(!Hd[e])return e;var t=Hd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in y4)return Q1[e]=t[n];return e}var w4=hg("animationend"),x4=hg("animationiteration"),b4=hg("animationstart"),_4=hg("transitionend"),S4=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dc(e,t){S4.set(e,t),zu(t,[e])}for(var Z1=0;Z1<Wx.length;Z1++){var ev=Wx[Z1],AL=ev.toLowerCase(),LL=ev[0].toUpperCase()+ev.slice(1);Dc(AL,"on"+LL)}Dc(w4,"onAnimationEnd");Dc(x4,"onAnimationIteration");Dc(b4,"onAnimationStart");Dc("dblclick","onDoubleClick");Dc("focusin","onFocus");Dc("focusout","onBlur");Dc(_4,"onTransitionEnd");mf("onMouseEnter",["mouseout","mouseover"]);mf("onMouseLeave",["mouseout","mouseover"]);mf("onPointerEnter",["pointerout","pointerover"]);mf("onPointerLeave",["pointerout","pointerover"]);zu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zu("onBeforeInput",["compositionend","keypress","textInput","paste"]);zu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PL=new Set("cancel close invalid load scroll toggle".split(" ").concat(jh));function Hx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,AA(r,t,void 0,e),e.currentTarget=null}function N4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Hx(i,l,f),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Hx(i,l,f),s=c}}}if(v0)throw e=o2,v0=!1,o2=null,e}function Wn(e,t){var n=t[v2];n===void 0&&(n=t[v2]=new Set);var r=e+"__bubble";n.has(r)||(j4(t,e,2,!1),n.add(r))}function tv(e,t,n){var r=0;t&&(r|=4),j4(n,e,r,t)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function Zh(e){if(!e[Nm]){e[Nm]=!0,T3.forEach(function(n){n!=="selectionchange"&&(PL.has(n)||tv(n,!1,e),tv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nm]||(t[Nm]=!0,tv("selectionchange",!1,t))}}function j4(e,t,n,r){switch(l4(t)){case 1:var i=HA;break;case 4:i=VA;break;default:i=Uy}n=i.bind(null,t,n,e),i=void 0,!a2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nv(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ku(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Y3(function(){var f=s,p=Ry(n),m=[];e:{var w=S4.get(e);if(w!==void 0){var g=qy,N=e;switch(e){case"keypress":if(Jm(n)===0)break e;case"keydown":case"keyup":g=oL;break;case"focusin":N="focus",g=K1;break;case"focusout":N="blur",g=K1;break;case"beforeblur":case"afterblur":g=K1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=KA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=uL;break;case w4:case x4:case b4:g=QA;break;case _4:g=fL;break;case"scroll":g=GA;break;case"wheel":g=pL;break;case"copy":case"cut":case"paste":g=eL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ox}var j=(t&4)!==0,k=!j&&e==="scroll",b=j?w!==null?w+"Capture":null:w;j=[];for(var S=f,L;S!==null;){L=S;var M=L.stateNode;if(L.tag===5&&M!==null&&(L=M,b!==null&&(M=Gh(S,b),M!=null&&j.push(ep(S,M,L)))),k)break;S=S.return}0<j.length&&(w=new g(w,N,null,n,p),m.push({event:w,listeners:j}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",w&&n!==i2&&(N=n.relatedTarget||n.fromElement)&&(ku(N)||N[tl]))break e;if((g||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,g?(N=n.relatedTarget||n.toElement,g=f,N=N?ku(N):null,N!==null&&(k=qu(N),N!==k||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=f),g!==N)){if(j=Ix,M="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(j=Ox,M="onPointerLeave",b="onPointerEnter",S="pointer"),k=g==null?w:Vd(g),L=N==null?w:Vd(N),w=new j(M,S+"leave",g,n,p),w.target=k,w.relatedTarget=L,M=null,ku(p)===f&&(j=new j(b,S+"enter",N,n,p),j.target=L,j.relatedTarget=k,M=j),k=M,g&&N)t:{for(j=g,b=N,S=0,L=j;L;L=Td(L))S++;for(L=0,M=b;M;M=Td(M))L++;for(;0<S-L;)j=Td(j),S--;for(;0<L-S;)b=Td(b),L--;for(;S--;){if(j===b||b!==null&&j===b.alternate)break t;j=Td(j),b=Td(b)}j=null}else j=null;g!==null&&Vx(m,w,g,j,!1),N!==null&&k!==null&&Vx(m,k,N,j,!0)}}e:{if(w=f?Vd(f):window,g=w.nodeName&&w.nodeName.toLowerCase(),g==="select"||g==="input"&&w.type==="file")var K=bL;else if(Fx(w))if(p4)K=jL;else{K=SL;var oe=_L}else(g=w.nodeName)&&g.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(K=NL);if(K&&(K=K(e,f))){h4(m,K,n,p);break e}oe&&oe(e,w,f),e==="focusout"&&(oe=w._wrapperState)&&oe.controlled&&w.type==="number"&&Zv(w,"number",w.value)}switch(oe=f?Vd(f):window,e){case"focusin":(Fx(oe)||oe.contentEditable==="true")&&(Wd=oe,d2=f,Th=null);break;case"focusout":Th=d2=Wd=null;break;case"mousedown":f2=!0;break;case"contextmenu":case"mouseup":case"dragend":f2=!1,qx(m,n,p);break;case"selectionchange":if(CL)break;case"keydown":case"keyup":qx(m,n,p)}var Z;if(Hy)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else qd?d4(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(u4&&n.locale!=="ko"&&(qd||R!=="onCompositionStart"?R==="onCompositionEnd"&&qd&&(Z=c4()):(hc=p,zy="value"in hc?hc.value:hc.textContent,qd=!0)),oe=_0(f,R),0<oe.length&&(R=new Dx(R,e,null,n,p),m.push({event:R,listeners:oe}),Z?R.data=Z:(Z=f4(n),Z!==null&&(R.data=Z)))),(Z=gL?vL(e,n):yL(e,n))&&(f=_0(f,"onBeforeInput"),0<f.length&&(p=new Dx("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=Z))}N4(m,t)})}function ep(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gh(e,n),s!=null&&r.unshift(ep(e,s,i)),s=Gh(e,t),s!=null&&r.push(ep(e,s,i))),e=e.return}return r}function Td(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vx(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=Gh(n,s),c!=null&&a.unshift(ep(n,c,l))):i||(c=Gh(n,s),c!=null&&a.push(ep(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var TL=/\r\n?/g,IL=/\u0000|\uFFFD/g;function Gx(e){return(typeof e=="string"?e:""+e).replace(TL,`
`).replace(IL,"")}function jm(e,t,n){if(t=Gx(t),Gx(e)!==t&&n)throw Error(rt(425))}function S0(){}var h2=null,p2=null;function m2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var g2=typeof setTimeout=="function"?setTimeout:void 0,DL=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,OL=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(e){return Yx.resolve(null).then(e).catch(ML)}:g2;function ML(e){setTimeout(function(){throw e})}function rv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Jh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jh(t)}function bc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var kf=Math.random().toString(36).slice(2),co="__reactFiber$"+kf,tp="__reactProps$"+kf,tl="__reactContainer$"+kf,v2="__reactEvents$"+kf,RL="__reactListeners$"+kf,FL="__reactHandles$"+kf;function ku(e){var t=e[co];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tl]||n[co]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Kx(e);e!==null;){if(n=e[co])return n;e=Kx(e)}return t}e=n,n=e.parentNode}return null}function xp(e){return e=e[co]||e[tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function pg(e){return e[tp]||null}var y2=[],Gd=-1;function Oc(e){return{current:e}}function Vn(e){0>Gd||(e.current=y2[Gd],y2[Gd]=null,Gd--)}function Un(e,t){Gd++,y2[Gd]=e.current,e.current=t}var Ac={},ji=Oc(Ac),os=Oc(!1),Mu=Ac;function gf(e,t){var n=e.type.contextTypes;if(!n)return Ac;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ls(e){return e=e.childContextTypes,e!=null}function N0(){Vn(os),Vn(ji)}function Jx(e,t,n){if(ji.current!==Ac)throw Error(rt(168));Un(ji,t),Un(os,n)}function k4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(rt(108,_A(e)||"Unknown",i));return dr({},n,r)}function j0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ac,Mu=ji.current,Un(ji,e),Un(os,os.current),!0}function Xx(e,t,n){var r=e.stateNode;if(!r)throw Error(rt(169));n?(e=k4(e,t,Mu),r.__reactInternalMemoizedMergedChildContext=e,Vn(os),Vn(ji),Un(ji,e)):Vn(os),Un(os,n)}var Yo=null,mg=!1,iv=!1;function E4(e){Yo===null?Yo=[e]:Yo.push(e)}function $L(e){mg=!0,E4(e)}function Mc(){if(!iv&&Yo!==null){iv=!0;var e=0,t=kn;try{var n=Yo;for(kn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yo=null,mg=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(e+1)),Q3(Fy,Mc),i}finally{kn=t,iv=!1}}return null}var Yd=[],Kd=0,k0=null,E0=0,Zs=[],ea=0,Ru=null,Jo=1,Xo="";function vu(e,t){Yd[Kd++]=E0,Yd[Kd++]=k0,k0=e,E0=t}function C4(e,t,n){Zs[ea++]=Jo,Zs[ea++]=Xo,Zs[ea++]=Ru,Ru=e;var r=Jo;e=Xo;var i=32-Pa(r)-1;r&=~(1<<i),n+=1;var s=32-Pa(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jo=1<<32-Pa(t)+i|n<<i|r,Xo=s+e}else Jo=1<<s|n<<i|r,Xo=e}function Gy(e){e.return!==null&&(vu(e,1),C4(e,1,0))}function Yy(e){for(;e===k0;)k0=Yd[--Kd],Yd[Kd]=null,E0=Yd[--Kd],Yd[Kd]=null;for(;e===Ru;)Ru=Zs[--ea],Zs[ea]=null,Xo=Zs[--ea],Zs[ea]=null,Jo=Zs[--ea],Zs[ea]=null}var Is=null,Ps=null,nr=!1,Aa=null;function A4(e,t){var n=ta(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Is=e,Ps=bc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Is=e,Ps=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ru!==null?{id:Jo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ta(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Is=e,Ps=null,!0):!1;default:return!1}}function w2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function x2(e){if(nr){var t=Ps;if(t){var n=t;if(!Qx(e,t)){if(w2(e))throw Error(rt(418));t=bc(n.nextSibling);var r=Is;t&&Qx(e,t)?A4(r,n):(e.flags=e.flags&-4097|2,nr=!1,Is=e)}}else{if(w2(e))throw Error(rt(418));e.flags=e.flags&-4097|2,nr=!1,Is=e}}}function Zx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Is=e}function km(e){if(e!==Is)return!1;if(!nr)return Zx(e),nr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!m2(e.type,e.memoizedProps)),t&&(t=Ps)){if(w2(e))throw L4(),Error(rt(418));for(;t;)A4(e,t),t=bc(t.nextSibling)}if(Zx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ps=bc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ps=null}}else Ps=Is?bc(e.stateNode.nextSibling):null;return!0}function L4(){for(var e=Ps;e;)e=bc(e.nextSibling)}function vf(){Ps=Is=null,nr=!1}function Ky(e){Aa===null?Aa=[e]:Aa.push(e)}var BL=ol.ReactCurrentBatchConfig;function hh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(rt(309));var r=n.stateNode}if(!r)throw Error(rt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(rt(284));if(!n._owner)throw Error(rt(290,e))}return e}function Em(e,t){throw e=Object.prototype.toString.call(t),Error(rt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eb(e){var t=e._init;return t(e._payload)}function P4(e){function t(b,S){if(e){var L=b.deletions;L===null?(b.deletions=[S],b.flags|=16):L.push(S)}}function n(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=jc(b,S),b.index=0,b.sibling=null,b}function s(b,S,L){return b.index=L,e?(L=b.alternate,L!==null?(L=L.index,L<S?(b.flags|=2,S):L):(b.flags|=2,S)):(b.flags|=1048576,S)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,S,L,M){return S===null||S.tag!==6?(S=dv(L,b.mode,M),S.return=b,S):(S=i(S,L),S.return=b,S)}function c(b,S,L,M){var K=L.type;return K===zd?p(b,S,L.props.children,M,L.key):S!==null&&(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===ic&&eb(K)===S.type)?(M=i(S,L.props),M.ref=hh(b,S,L),M.return=b,M):(M=r0(L.type,L.key,L.props,null,b.mode,M),M.ref=hh(b,S,L),M.return=b,M)}function f(b,S,L,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==L.containerInfo||S.stateNode.implementation!==L.implementation?(S=fv(L,b.mode,M),S.return=b,S):(S=i(S,L.children||[]),S.return=b,S)}function p(b,S,L,M,K){return S===null||S.tag!==7?(S=Tu(L,b.mode,M,K),S.return=b,S):(S=i(S,L),S.return=b,S)}function m(b,S,L){if(typeof S=="string"&&S!==""||typeof S=="number")return S=dv(""+S,b.mode,L),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gm:return L=r0(S.type,S.key,S.props,null,b.mode,L),L.ref=hh(b,null,S),L.return=b,L;case Ud:return S=fv(S,b.mode,L),S.return=b,S;case ic:var M=S._init;return m(b,M(S._payload),L)}if(Sh(S)||lh(S))return S=Tu(S,b.mode,L,null),S.return=b,S;Em(b,S)}return null}function w(b,S,L,M){var K=S!==null?S.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return K!==null?null:l(b,S,""+L,M);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case gm:return L.key===K?c(b,S,L,M):null;case Ud:return L.key===K?f(b,S,L,M):null;case ic:return K=L._init,w(b,S,K(L._payload),M)}if(Sh(L)||lh(L))return K!==null?null:p(b,S,L,M,null);Em(b,L)}return null}function g(b,S,L,M,K){if(typeof M=="string"&&M!==""||typeof M=="number")return b=b.get(L)||null,l(S,b,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case gm:return b=b.get(M.key===null?L:M.key)||null,c(S,b,M,K);case Ud:return b=b.get(M.key===null?L:M.key)||null,f(S,b,M,K);case ic:var oe=M._init;return g(b,S,L,oe(M._payload),K)}if(Sh(M)||lh(M))return b=b.get(L)||null,p(S,b,M,K,null);Em(S,M)}return null}function N(b,S,L,M){for(var K=null,oe=null,Z=S,R=S=0,ee=null;Z!==null&&R<L.length;R++){Z.index>R?(ee=Z,Z=null):ee=Z.sibling;var le=w(b,Z,L[R],M);if(le===null){Z===null&&(Z=ee);break}e&&Z&&le.alternate===null&&t(b,Z),S=s(le,S,R),oe===null?K=le:oe.sibling=le,oe=le,Z=ee}if(R===L.length)return n(b,Z),nr&&vu(b,R),K;if(Z===null){for(;R<L.length;R++)Z=m(b,L[R],M),Z!==null&&(S=s(Z,S,R),oe===null?K=Z:oe.sibling=Z,oe=Z);return nr&&vu(b,R),K}for(Z=r(b,Z);R<L.length;R++)ee=g(Z,b,R,L[R],M),ee!==null&&(e&&ee.alternate!==null&&Z.delete(ee.key===null?R:ee.key),S=s(ee,S,R),oe===null?K=ee:oe.sibling=ee,oe=ee);return e&&Z.forEach(function(O){return t(b,O)}),nr&&vu(b,R),K}function j(b,S,L,M){var K=lh(L);if(typeof K!="function")throw Error(rt(150));if(L=K.call(L),L==null)throw Error(rt(151));for(var oe=K=null,Z=S,R=S=0,ee=null,le=L.next();Z!==null&&!le.done;R++,le=L.next()){Z.index>R?(ee=Z,Z=null):ee=Z.sibling;var O=w(b,Z,le.value,M);if(O===null){Z===null&&(Z=ee);break}e&&Z&&O.alternate===null&&t(b,Z),S=s(O,S,R),oe===null?K=O:oe.sibling=O,oe=O,Z=ee}if(le.done)return n(b,Z),nr&&vu(b,R),K;if(Z===null){for(;!le.done;R++,le=L.next())le=m(b,le.value,M),le!==null&&(S=s(le,S,R),oe===null?K=le:oe.sibling=le,oe=le);return nr&&vu(b,R),K}for(Z=r(b,Z);!le.done;R++,le=L.next())le=g(Z,b,R,le.value,M),le!==null&&(e&&le.alternate!==null&&Z.delete(le.key===null?R:le.key),S=s(le,S,R),oe===null?K=le:oe.sibling=le,oe=le);return e&&Z.forEach(function(U){return t(b,U)}),nr&&vu(b,R),K}function k(b,S,L,M){if(typeof L=="object"&&L!==null&&L.type===zd&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case gm:e:{for(var K=L.key,oe=S;oe!==null;){if(oe.key===K){if(K=L.type,K===zd){if(oe.tag===7){n(b,oe.sibling),S=i(oe,L.props.children),S.return=b,b=S;break e}}else if(oe.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===ic&&eb(K)===oe.type){n(b,oe.sibling),S=i(oe,L.props),S.ref=hh(b,oe,L),S.return=b,b=S;break e}n(b,oe);break}else t(b,oe);oe=oe.sibling}L.type===zd?(S=Tu(L.props.children,b.mode,M,L.key),S.return=b,b=S):(M=r0(L.type,L.key,L.props,null,b.mode,M),M.ref=hh(b,S,L),M.return=b,b=M)}return a(b);case Ud:e:{for(oe=L.key;S!==null;){if(S.key===oe)if(S.tag===4&&S.stateNode.containerInfo===L.containerInfo&&S.stateNode.implementation===L.implementation){n(b,S.sibling),S=i(S,L.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else t(b,S);S=S.sibling}S=fv(L,b.mode,M),S.return=b,b=S}return a(b);case ic:return oe=L._init,k(b,S,oe(L._payload),M)}if(Sh(L))return N(b,S,L,M);if(lh(L))return j(b,S,L,M);Em(b,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,S!==null&&S.tag===6?(n(b,S.sibling),S=i(S,L),S.return=b,b=S):(n(b,S),S=dv(L,b.mode,M),S.return=b,b=S),a(b)):n(b,S)}return k}var yf=P4(!0),T4=P4(!1),C0=Oc(null),A0=null,Jd=null,Jy=null;function Xy(){Jy=Jd=A0=null}function Qy(e){var t=C0.current;Vn(C0),e._currentValue=t}function b2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function af(e,t){A0=e,Jy=Jd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(as=!0),e.firstContext=null)}function ra(e){var t=e._currentValue;if(Jy!==e)if(e={context:e,memoizedValue:t,next:null},Jd===null){if(A0===null)throw Error(rt(308));Jd=e,A0.dependencies={lanes:0,firstContext:e}}else Jd=Jd.next=e;return t}var Eu=null;function Zy(e){Eu===null?Eu=[e]:Eu.push(e)}function I4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Zy(t)):(n.next=i.next,i.next=n),t.interleaved=n,nl(e,r)}function nl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sc=!1;function e5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _c(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,nl(e,n)}return i=r.interleaved,i===null?(t.next=t,Zy(r)):(t.next=i.next,i.next=t),r.interleaved=t,nl(e,n)}function Xm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$y(e,n)}}function tb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function L0(e,t,n,r){var i=e.updateQueue;sc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,p=f=c=null,l=s;do{var w=l.lane,g=l.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,j=l;switch(w=t,g=n,j.tag){case 1:if(N=j.payload,typeof N=="function"){m=N.call(g,m,w);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,w=typeof N=="function"?N.call(g,m,w):N,w==null)break e;m=dr({},m,w);break e;case 2:sc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,w=i.effects,w===null?i.effects=[l]:w.push(l))}else g={eventTime:g,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=g,c=m):p=p.next=g,a|=w;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;w=l,l=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);$u|=a,e.lanes=a,e.memoizedState=m}}function nb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(rt(191,i));i.call(r)}}}var bp={},go=Oc(bp),np=Oc(bp),rp=Oc(bp);function Cu(e){if(e===bp)throw Error(rt(174));return e}function t5(e,t){switch(Un(rp,t),Un(np,e),Un(go,bp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:t2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=t2(t,e)}Vn(go),Un(go,t)}function wf(){Vn(go),Vn(np),Vn(rp)}function O4(e){Cu(rp.current);var t=Cu(go.current),n=t2(t,e.type);t!==n&&(Un(np,e),Un(go,n))}function n5(e){np.current===e&&(Vn(go),Vn(np))}var lr=Oc(0);function P0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sv=[];function r5(){for(var e=0;e<sv.length;e++)sv[e]._workInProgressVersionPrimary=null;sv.length=0}var Qm=ol.ReactCurrentDispatcher,av=ol.ReactCurrentBatchConfig,Fu=0,ur=null,Fr=null,Gr=null,T0=!1,Ih=!1,ip=0,UL=0;function vi(){throw Error(rt(321))}function i5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Da(e[n],t[n]))return!1;return!0}function s5(e,t,n,r,i,s){if(Fu=s,ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qm.current=e===null||e.memoizedState===null?HL:VL,e=n(r,i),Ih){s=0;do{if(Ih=!1,ip=0,25<=s)throw Error(rt(301));s+=1,Gr=Fr=null,t.updateQueue=null,Qm.current=GL,e=n(r,i)}while(Ih)}if(Qm.current=I0,t=Fr!==null&&Fr.next!==null,Fu=0,Gr=Fr=ur=null,T0=!1,t)throw Error(rt(300));return e}function a5(){var e=ip!==0;return ip=0,e}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?ur.memoizedState=Gr=e:Gr=Gr.next=e,Gr}function ia(){if(Fr===null){var e=ur.alternate;e=e!==null?e.memoizedState:null}else e=Fr.next;var t=Gr===null?ur.memoizedState:Gr.next;if(t!==null)Gr=t,Fr=e;else{if(e===null)throw Error(rt(310));Fr=e,e={memoizedState:Fr.memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},Gr===null?ur.memoizedState=Gr=e:Gr=Gr.next=e}return Gr}function sp(e,t){return typeof t=="function"?t(e):t}function ov(e){var t=ia(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=Fr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,f=s;do{var p=f.lane;if((Fu&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,ur.lanes|=p,$u|=p}f=f.next}while(f!==null&&f!==s);c===null?a=r:c.next=l,Da(r,t.memoizedState)||(as=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ur.lanes|=s,$u|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lv(e){var t=ia(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Da(s,t.memoizedState)||(as=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function M4(){}function R4(e,t){var n=ur,r=ia(),i=t(),s=!Da(r.memoizedState,i);if(s&&(r.memoizedState=i,as=!0),r=r.queue,o5(B4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Gr!==null&&Gr.memoizedState.tag&1){if(n.flags|=2048,ap(9,$4.bind(null,n,r,i,t),void 0,null),Xr===null)throw Error(rt(349));Fu&30||F4(n,t,i)}return i}function F4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $4(e,t,n,r){t.value=n,t.getSnapshot=r,U4(t)&&z4(e)}function B4(e,t,n){return n(function(){U4(t)&&z4(e)})}function U4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Da(e,n)}catch{return!0}}function z4(e){var t=nl(e,1);t!==null&&Ta(t,e,1,-1)}function rb(e){var t=lo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:e},t.queue=e,e=e.dispatch=WL.bind(null,ur,e),[t.memoizedState,e]}function ap(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function q4(){return ia().memoizedState}function Zm(e,t,n,r){var i=lo();ur.flags|=e,i.memoizedState=ap(1|t,n,void 0,r===void 0?null:r)}function gg(e,t,n,r){var i=ia();r=r===void 0?null:r;var s=void 0;if(Fr!==null){var a=Fr.memoizedState;if(s=a.destroy,r!==null&&i5(r,a.deps)){i.memoizedState=ap(t,n,s,r);return}}ur.flags|=e,i.memoizedState=ap(1|t,n,s,r)}function ib(e,t){return Zm(8390656,8,e,t)}function o5(e,t){return gg(2048,8,e,t)}function W4(e,t){return gg(4,2,e,t)}function H4(e,t){return gg(4,4,e,t)}function V4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function G4(e,t,n){return n=n!=null?n.concat([e]):null,gg(4,4,V4.bind(null,t,e),n)}function l5(){}function Y4(e,t){var n=ia();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&i5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function K4(e,t){var n=ia();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&i5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function J4(e,t,n){return Fu&21?(Da(n,t)||(n=t4(),ur.lanes|=n,$u|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,as=!0),e.memoizedState=n)}function zL(e,t){var n=kn;kn=n!==0&&4>n?n:4,e(!0);var r=av.transition;av.transition={};try{e(!1),t()}finally{kn=n,av.transition=r}}function X4(){return ia().memoizedState}function qL(e,t,n){var r=Nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Q4(e))Z4(t,n);else if(n=I4(e,t,n,r),n!==null){var i=Ri();Ta(n,e,r,i),eS(n,t,r)}}function WL(e,t,n){var r=Nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q4(e))Z4(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Da(l,a)){var c=t.interleaved;c===null?(i.next=i,Zy(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=I4(e,t,i,r),n!==null&&(i=Ri(),Ta(n,e,r,i),eS(n,t,r))}}function Q4(e){var t=e.alternate;return e===ur||t!==null&&t===ur}function Z4(e,t){Ih=T0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$y(e,n)}}var I0={readContext:ra,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},HL={readContext:ra,useCallback:function(e,t){return lo().memoizedState=[e,t===void 0?null:t],e},useContext:ra,useEffect:ib,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zm(4194308,4,V4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zm(4,2,e,t)},useMemo:function(e,t){var n=lo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=lo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qL.bind(null,ur,e),[r.memoizedState,e]},useRef:function(e){var t=lo();return e={current:e},t.memoizedState=e},useState:rb,useDebugValue:l5,useDeferredValue:function(e){return lo().memoizedState=e},useTransition:function(){var e=rb(!1),t=e[0];return e=zL.bind(null,e[1]),lo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ur,i=lo();if(nr){if(n===void 0)throw Error(rt(407));n=n()}else{if(n=t(),Xr===null)throw Error(rt(349));Fu&30||F4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ib(B4.bind(null,r,s,e),[e]),r.flags|=2048,ap(9,$4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=lo(),t=Xr.identifierPrefix;if(nr){var n=Xo,r=Jo;n=(r&~(1<<32-Pa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ip++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VL={readContext:ra,useCallback:Y4,useContext:ra,useEffect:o5,useImperativeHandle:G4,useInsertionEffect:W4,useLayoutEffect:H4,useMemo:K4,useReducer:ov,useRef:q4,useState:function(){return ov(sp)},useDebugValue:l5,useDeferredValue:function(e){var t=ia();return J4(t,Fr.memoizedState,e)},useTransition:function(){var e=ov(sp)[0],t=ia().memoizedState;return[e,t]},useMutableSource:M4,useSyncExternalStore:R4,useId:X4,unstable_isNewReconciler:!1},GL={readContext:ra,useCallback:Y4,useContext:ra,useEffect:o5,useImperativeHandle:G4,useInsertionEffect:W4,useLayoutEffect:H4,useMemo:K4,useReducer:lv,useRef:q4,useState:function(){return lv(sp)},useDebugValue:l5,useDeferredValue:function(e){var t=ia();return Fr===null?t.memoizedState=e:J4(t,Fr.memoizedState,e)},useTransition:function(){var e=lv(sp)[0],t=ia().memoizedState;return[e,t]},useMutableSource:M4,useSyncExternalStore:R4,useId:X4,unstable_isNewReconciler:!1};function ja(e,t){if(e&&e.defaultProps){t=dr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:dr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vg={isMounted:function(e){return(e=e._reactInternals)?qu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ri(),i=Nc(e),s=Qo(r,i);s.payload=t,n!=null&&(s.callback=n),t=_c(e,s,i),t!==null&&(Ta(t,e,i,r),Xm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ri(),i=Nc(e),s=Qo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=_c(e,s,i),t!==null&&(Ta(t,e,i,r),Xm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ri(),r=Nc(e),i=Qo(n,r);i.tag=2,t!=null&&(i.callback=t),t=_c(e,i,r),t!==null&&(Ta(t,e,r,n),Xm(t,e,r))}};function sb(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Qh(n,r)||!Qh(i,s):!0}function tS(e,t,n){var r=!1,i=Ac,s=t.contextType;return typeof s=="object"&&s!==null?s=ra(s):(i=ls(t)?Mu:ji.current,r=t.contextTypes,s=(r=r!=null)?gf(e,i):Ac),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ab(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vg.enqueueReplaceState(t,t.state,null)}function S2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},e5(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ra(s):(s=ls(t)?Mu:ji.current,i.context=gf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(_2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vg.enqueueReplaceState(i,i.state,null),L0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function xf(e,t){try{var n="",r=t;do n+=bA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function cv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function N2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YL=typeof WeakMap=="function"?WeakMap:Map;function nS(e,t,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){O0||(O0=!0,D2=r),N2(e,t)},n}function rS(e,t,n){n=Qo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){N2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){N2(e,t),typeof r!="function"&&(Sc===null?Sc=new Set([this]):Sc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ob(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new YL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=lP.bind(null,e,t,n),t.then(e,e))}function lb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qo(-1,1),t.tag=2,_c(n,t,1))),n.lanes|=1),e)}var KL=ol.ReactCurrentOwner,as=!1;function Oi(e,t,n,r){t.child=e===null?T4(t,null,n,r):yf(t,e.child,n,r)}function ub(e,t,n,r,i){n=n.render;var s=t.ref;return af(t,i),r=s5(e,t,n,r,s,i),n=a5(),e!==null&&!as?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(nr&&n&&Gy(t),t.flags|=1,Oi(e,t,r,i),t.child)}function db(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!g5(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,iS(e,t,s,r,i)):(e=r0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qh,n(a,r)&&e.ref===t.ref)return rl(e,t,i)}return t.flags|=1,e=jc(s,r),e.ref=t.ref,e.return=t,t.child=e}function iS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Qh(s,r)&&e.ref===t.ref)if(as=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(as=!0);else return t.lanes=e.lanes,rl(e,t,i)}return j2(e,t,n,r,i)}function sS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Un(Qd,Ls),Ls|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Un(Qd,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Un(Qd,Ls),Ls|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Un(Qd,Ls),Ls|=r;return Oi(e,t,i,n),t.child}function aS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function j2(e,t,n,r,i){var s=ls(n)?Mu:ji.current;return s=gf(t,s),af(t,i),n=s5(e,t,n,r,s,i),r=a5(),e!==null&&!as?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(nr&&r&&Gy(t),t.flags|=1,Oi(e,t,n,i),t.child)}function fb(e,t,n,r,i){if(ls(n)){var s=!0;j0(t)}else s=!1;if(af(t,i),t.stateNode===null)e0(e,t),tS(t,n,r),S2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=ra(f):(f=ls(n)?Mu:ji.current,f=gf(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==f)&&ab(t,a,r,f),sc=!1;var w=t.memoizedState;a.state=w,L0(t,r,a,i),c=t.memoizedState,l!==r||w!==c||os.current||sc?(typeof p=="function"&&(_2(t,n,p,r),c=t.memoizedState),(l=sc||sb(t,n,l,r,w,c,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,D4(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:ja(t.type,l),a.props=f,m=t.pendingProps,w=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ra(c):(c=ls(n)?Mu:ji.current,c=gf(t,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||w!==c)&&ab(t,a,r,c),sc=!1,w=t.memoizedState,a.state=w,L0(t,r,a,i);var N=t.memoizedState;l!==m||w!==N||os.current||sc?(typeof g=="function"&&(_2(t,n,g,r),N=t.memoizedState),(f=sc||sb(t,n,f,r,w,N,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),a.props=r,a.state=N,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return k2(e,t,n,r,s,i)}function k2(e,t,n,r,i,s){aS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Xx(t,n,!1),rl(e,t,s);r=t.stateNode,KL.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=yf(t,e.child,null,s),t.child=yf(t,null,l,s)):Oi(e,t,l,s),t.memoizedState=r.state,i&&Xx(t,n,!0),t.child}function oS(e){var t=e.stateNode;t.pendingContext?Jx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jx(e,t.context,!1),t5(e,t.containerInfo)}function hb(e,t,n,r,i){return vf(),Ky(i),t.flags|=256,Oi(e,t,n,r),t.child}var E2={dehydrated:null,treeContext:null,retryLane:0};function C2(e){return{baseLanes:e,cachePool:null,transitions:null}}function lS(e,t,n){var r=t.pendingProps,i=lr.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Un(lr,i&1),e===null)return x2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=xg(a,r,0,null),e=Tu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=C2(n),t.memoizedState=E2,e):c5(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return JL(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=jc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=jc(l,s):(s=Tu(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?C2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=E2,r}return s=e.child,e=s.sibling,r=jc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function c5(e,t){return t=xg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cm(e,t,n,r){return r!==null&&Ky(r),yf(t,e.child,null,n),e=c5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JL(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=cv(Error(rt(422))),Cm(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=xg({mode:"visible",children:r.children},i,0,null),s=Tu(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&yf(t,e.child,null,a),t.child.memoizedState=C2(a),t.memoizedState=E2,s);if(!(t.mode&1))return Cm(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(rt(419)),r=cv(s,r,void 0),Cm(e,t,a,r)}if(l=(a&e.childLanes)!==0,as||l){if(r=Xr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nl(e,i),Ta(r,e,i,-1))}return m5(),r=cv(Error(rt(421))),Cm(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ps=bc(i.nextSibling),Is=t,nr=!0,Aa=null,e!==null&&(Zs[ea++]=Jo,Zs[ea++]=Xo,Zs[ea++]=Ru,Jo=e.id,Xo=e.overflow,Ru=t),t=c5(t,r.children),t.flags|=4096,t)}function pb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),b2(e.return,t,n)}function uv(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cS(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Oi(e,t,r.children,n),r=lr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pb(e,n,t);else if(e.tag===19)pb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Un(lr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&P0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),uv(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&P0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}uv(t,!0,n,null,s);break;case"together":uv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function e0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$u|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,n=jc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XL(e,t,n){switch(t.tag){case 3:oS(t),vf();break;case 5:O4(t);break;case 1:ls(t.type)&&j0(t);break;case 4:t5(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Un(C0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Un(lr,lr.current&1),t.flags|=128,null):n&t.child.childLanes?lS(e,t,n):(Un(lr,lr.current&1),e=rl(e,t,n),e!==null?e.sibling:null);Un(lr,lr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return cS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Un(lr,lr.current),r)break;return null;case 22:case 23:return t.lanes=0,sS(e,t,n)}return rl(e,t,n)}var uS,A2,dS,fS;uS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};A2=function(){};dS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Cu(go.current);var s=null;switch(n){case"input":i=Xv(e,i),r=Xv(e,r),s=[];break;case"select":i=dr({},i,{value:void 0}),r=dr({},r,{value:void 0}),s=[];break;case"textarea":i=e2(e,i),r=e2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=S0)}n2(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Hh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Hh.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Wn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};fS=function(e,t,n,r){n!==r&&(t.flags|=4)};function ph(e,t){if(!nr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function QL(e,t,n){var r=t.pendingProps;switch(Yy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(t),null;case 1:return ls(t.type)&&N0(),yi(t),null;case 3:return r=t.stateNode,wf(),Vn(os),Vn(ji),r5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(km(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Aa!==null&&(R2(Aa),Aa=null))),A2(e,t),yi(t),null;case 5:n5(t);var i=Cu(rp.current);if(n=t.type,e!==null&&t.stateNode!=null)dS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(rt(166));return yi(t),null}if(e=Cu(go.current),km(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[co]=t,r[tp]=s,e=(t.mode&1)!==0,n){case"dialog":Wn("cancel",r),Wn("close",r);break;case"iframe":case"object":case"embed":Wn("load",r);break;case"video":case"audio":for(i=0;i<jh.length;i++)Wn(jh[i],r);break;case"source":Wn("error",r);break;case"img":case"image":case"link":Wn("error",r),Wn("load",r);break;case"details":Wn("toggle",r);break;case"input":Sx(r,s),Wn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wn("invalid",r);break;case"textarea":jx(r,s),Wn("invalid",r)}n2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&jm(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&jm(r.textContent,l,e),i=["children",""+l]):Hh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Wn("scroll",r)}switch(n){case"input":vm(r),Nx(r,s,!0);break;case"textarea":vm(r),kx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=S0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[co]=t,e[tp]=r,uS(e,t,!1,!1),t.stateNode=e;e:{switch(a=r2(n,r),n){case"dialog":Wn("cancel",e),Wn("close",e),i=r;break;case"iframe":case"object":case"embed":Wn("load",e),i=r;break;case"video":case"audio":for(i=0;i<jh.length;i++)Wn(jh[i],e);i=r;break;case"source":Wn("error",e),i=r;break;case"img":case"image":case"link":Wn("error",e),Wn("load",e),i=r;break;case"details":Wn("toggle",e),i=r;break;case"input":Sx(e,r),i=Xv(e,r),Wn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=dr({},r,{value:void 0}),Wn("invalid",e);break;case"textarea":jx(e,r),i=e2(e,r),Wn("invalid",e);break;default:i=r}n2(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?q3(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&U3(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vh(e,c):typeof c=="number"&&Vh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Wn("scroll",e):c!=null&&Iy(e,s,c,a))}switch(n){case"input":vm(e),Nx(e,r,!1);break;case"textarea":vm(e),kx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?tf(e,!!r.multiple,s,!1):r.defaultValue!=null&&tf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=S0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yi(t),null;case 6:if(e&&t.stateNode!=null)fS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(rt(166));if(n=Cu(rp.current),Cu(go.current),km(t)){if(r=t.stateNode,n=t.memoizedProps,r[co]=t,(s=r.nodeValue!==n)&&(e=Is,e!==null))switch(e.tag){case 3:jm(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jm(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[co]=t,t.stateNode=r}return yi(t),null;case 13:if(Vn(lr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nr&&Ps!==null&&t.mode&1&&!(t.flags&128))L4(),vf(),t.flags|=98560,s=!1;else if(s=km(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(rt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[co]=t}else vf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yi(t),s=!1}else Aa!==null&&(R2(Aa),Aa=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||lr.current&1?Br===0&&(Br=3):m5())),t.updateQueue!==null&&(t.flags|=4),yi(t),null);case 4:return wf(),A2(e,t),e===null&&Zh(t.stateNode.containerInfo),yi(t),null;case 10:return Qy(t.type._context),yi(t),null;case 17:return ls(t.type)&&N0(),yi(t),null;case 19:if(Vn(lr),s=t.memoizedState,s===null)return yi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)ph(s,!1);else{if(Br!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=P0(e),a!==null){for(t.flags|=128,ph(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Un(lr,lr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Nr()>bf&&(t.flags|=128,r=!0,ph(s,!1),t.lanes=4194304)}else{if(!r)if(e=P0(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ph(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!nr)return yi(t),null}else 2*Nr()-s.renderingStartTime>bf&&n!==1073741824&&(t.flags|=128,r=!0,ph(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Nr(),t.sibling=null,n=lr.current,Un(lr,r?n&1|2:n&1),t):(yi(t),null);case 22:case 23:return p5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ls&1073741824&&(yi(t),t.subtreeFlags&6&&(t.flags|=8192)):yi(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function ZL(e,t){switch(Yy(t),t.tag){case 1:return ls(t.type)&&N0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wf(),Vn(os),Vn(ji),r5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return n5(t),null;case 13:if(Vn(lr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));vf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Vn(lr),null;case 4:return wf(),null;case 10:return Qy(t.type._context),null;case 22:case 23:return p5(),null;case 24:return null;default:return null}}var Am=!1,Si=!1,eP=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Xd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yr(e,t,r)}else n.current=null}function L2(e,t,n){try{n()}catch(r){yr(e,t,r)}}var mb=!1;function tP(e,t){if(h2=x0,e=v4(),Vy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,p=0,m=e,w=null;t:for(;;){for(var g;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)w=m,m=g;for(;;){if(m===e)break t;if(w===n&&++f===i&&(l=a),w===s&&++p===r&&(c=a),(g=m.nextSibling)!==null)break;m=w,w=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(p2={focusedElem:e,selectionRange:n},x0=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,k=N.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?j:ja(t.type,j),k);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(M){yr(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return N=mb,mb=!1,N}function Dh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&L2(t,n,s)}i=i.next}while(i!==r)}}function yg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function P2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hS(e){var t=e.alternate;t!==null&&(e.alternate=null,hS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[co],delete t[tp],delete t[v2],delete t[RL],delete t[FL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pS(e){return e.tag===5||e.tag===3||e.tag===4}function gb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function T2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=S0));else if(r!==4&&(e=e.child,e!==null))for(T2(e,t,n),e=e.sibling;e!==null;)T2(e,t,n),e=e.sibling}function I2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(I2(e,t,n),e=e.sibling;e!==null;)I2(e,t,n),e=e.sibling}var ii=null,Ea=!1;function Ql(e,t,n){for(n=n.child;n!==null;)mS(e,t,n),n=n.sibling}function mS(e,t,n){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(ug,n)}catch{}switch(n.tag){case 5:Si||Xd(n,t);case 6:var r=ii,i=Ea;ii=null,Ql(e,t,n),ii=r,Ea=i,ii!==null&&(Ea?(e=ii,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ii.removeChild(n.stateNode));break;case 18:ii!==null&&(Ea?(e=ii,n=n.stateNode,e.nodeType===8?rv(e.parentNode,n):e.nodeType===1&&rv(e,n),Jh(e)):rv(ii,n.stateNode));break;case 4:r=ii,i=Ea,ii=n.stateNode.containerInfo,Ea=!0,Ql(e,t,n),ii=r,Ea=i;break;case 0:case 11:case 14:case 15:if(!Si&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&L2(n,t,a),i=i.next}while(i!==r)}Ql(e,t,n);break;case 1:if(!Si&&(Xd(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yr(n,t,l)}Ql(e,t,n);break;case 21:Ql(e,t,n);break;case 22:n.mode&1?(Si=(r=Si)||n.memoizedState!==null,Ql(e,t,n),Si=r):Ql(e,t,n);break;default:Ql(e,t,n)}}function vb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eP),t.forEach(function(r){var i=uP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:ii=l.stateNode,Ea=!1;break e;case 3:ii=l.stateNode.containerInfo,Ea=!0;break e;case 4:ii=l.stateNode.containerInfo,Ea=!0;break e}l=l.return}if(ii===null)throw Error(rt(160));mS(s,a,i),ii=null,Ea=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){yr(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gS(t,e),t=t.sibling}function gS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xa(t,e),ao(e),r&4){try{Dh(3,e,e.return),yg(3,e)}catch(j){yr(e,e.return,j)}try{Dh(5,e,e.return)}catch(j){yr(e,e.return,j)}}break;case 1:xa(t,e),ao(e),r&512&&n!==null&&Xd(n,n.return);break;case 5:if(xa(t,e),ao(e),r&512&&n!==null&&Xd(n,n.return),e.flags&32){var i=e.stateNode;try{Vh(i,"")}catch(j){yr(e,e.return,j)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&F3(i,s),r2(l,a);var f=r2(l,s);for(a=0;a<c.length;a+=2){var p=c[a],m=c[a+1];p==="style"?q3(i,m):p==="dangerouslySetInnerHTML"?U3(i,m):p==="children"?Vh(i,m):Iy(i,p,m,f)}switch(l){case"input":Qv(i,s);break;case"textarea":$3(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?tf(i,!!s.multiple,g,!1):w!==!!s.multiple&&(s.defaultValue!=null?tf(i,!!s.multiple,s.defaultValue,!0):tf(i,!!s.multiple,s.multiple?[]:"",!1))}i[tp]=s}catch(j){yr(e,e.return,j)}}break;case 6:if(xa(t,e),ao(e),r&4){if(e.stateNode===null)throw Error(rt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(j){yr(e,e.return,j)}}break;case 3:if(xa(t,e),ao(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jh(t.containerInfo)}catch(j){yr(e,e.return,j)}break;case 4:xa(t,e),ao(e);break;case 13:xa(t,e),ao(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(f5=Nr())),r&4&&vb(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Si=(f=Si)||p,xa(t,e),Si=f):xa(t,e),ao(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(mt=e,p=e.child;p!==null;){for(m=mt=p;mt!==null;){switch(w=mt,g=w.child,w.tag){case 0:case 11:case 14:case 15:Dh(4,w,w.return);break;case 1:Xd(w,w.return);var N=w.stateNode;if(typeof N.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(j){yr(r,n,j)}}break;case 5:Xd(w,w.return);break;case 22:if(w.memoizedState!==null){wb(m);continue}}g!==null?(g.return=w,mt=g):wb(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=z3("display",a))}catch(j){yr(e,e.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(j){yr(e,e.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xa(t,e),ao(e),r&4&&vb(e);break;case 21:break;default:xa(t,e),ao(e)}}function ao(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(pS(n)){var r=n;break e}n=n.return}throw Error(rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vh(i,""),r.flags&=-33);var s=gb(e);I2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=gb(e);T2(e,l,a);break;default:throw Error(rt(161))}}catch(c){yr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nP(e,t,n){mt=e,vS(e)}function vS(e,t,n){for(var r=(e.mode&1)!==0;mt!==null;){var i=mt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Am;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Si;l=Am;var f=Si;if(Am=a,(Si=c)&&!f)for(mt=i;mt!==null;)a=mt,c=a.child,a.tag===22&&a.memoizedState!==null?xb(i):c!==null?(c.return=a,mt=c):xb(i);for(;s!==null;)mt=s,vS(s),s=s.sibling;mt=i,Am=l,Si=f}yb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mt=s):yb(e)}}function yb(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Si||yg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Si)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ja(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&nb(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nb(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Jh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}Si||t.flags&512&&P2(t)}catch(w){yr(t,t.return,w)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function wb(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function xb(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yg(4,t)}catch(c){yr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){yr(t,i,c)}}var s=t.return;try{P2(t)}catch(c){yr(t,s,c)}break;case 5:var a=t.return;try{P2(t)}catch(c){yr(t,a,c)}}}catch(c){yr(t,t.return,c)}if(t===e){mt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,mt=l;break}mt=t.return}}var rP=Math.ceil,D0=ol.ReactCurrentDispatcher,u5=ol.ReactCurrentOwner,na=ol.ReactCurrentBatchConfig,dn=0,Xr=null,Ir=null,ai=0,Ls=0,Qd=Oc(0),Br=0,op=null,$u=0,wg=0,d5=0,Oh=null,is=null,f5=0,bf=1/0,Go=null,O0=!1,D2=null,Sc=null,Lm=!1,pc=null,M0=0,Mh=0,O2=null,t0=-1,n0=0;function Ri(){return dn&6?Nr():t0!==-1?t0:t0=Nr()}function Nc(e){return e.mode&1?dn&2&&ai!==0?ai&-ai:BL.transition!==null?(n0===0&&(n0=t4()),n0):(e=kn,e!==0||(e=window.event,e=e===void 0?16:l4(e.type)),e):1}function Ta(e,t,n,r){if(50<Mh)throw Mh=0,O2=null,Error(rt(185));yp(e,n,r),(!(dn&2)||e!==Xr)&&(e===Xr&&(!(dn&2)&&(wg|=n),Br===4&&cc(e,ai)),cs(e,r),n===1&&dn===0&&!(t.mode&1)&&(bf=Nr()+500,mg&&Mc()))}function cs(e,t){var n=e.callbackNode;BA(e,t);var r=w0(e,e===Xr?ai:0);if(r===0)n!==null&&Ax(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ax(n),t===1)e.tag===0?$L(bb.bind(null,e)):E4(bb.bind(null,e)),OL(function(){!(dn&6)&&Mc()}),n=null;else{switch(n4(r)){case 1:n=Fy;break;case 4:n=Z3;break;case 16:n=y0;break;case 536870912:n=e4;break;default:n=y0}n=jS(n,yS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yS(e,t){if(t0=-1,n0=0,dn&6)throw Error(rt(327));var n=e.callbackNode;if(of()&&e.callbackNode!==n)return null;var r=w0(e,e===Xr?ai:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=R0(e,r);else{t=r;var i=dn;dn|=2;var s=xS();(Xr!==e||ai!==t)&&(Go=null,bf=Nr()+500,Pu(e,t));do try{aP();break}catch(l){wS(e,l)}while(!0);Xy(),D0.current=s,dn=i,Ir!==null?t=0:(Xr=null,ai=0,t=Br)}if(t!==0){if(t===2&&(i=l2(e),i!==0&&(r=i,t=M2(e,i))),t===1)throw n=op,Pu(e,0),cc(e,r),cs(e,Nr()),n;if(t===6)cc(e,r);else{if(i=e.current.alternate,!(r&30)&&!iP(i)&&(t=R0(e,r),t===2&&(s=l2(e),s!==0&&(r=s,t=M2(e,s))),t===1))throw n=op,Pu(e,0),cc(e,r),cs(e,Nr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(rt(345));case 2:yu(e,is,Go);break;case 3:if(cc(e,r),(r&130023424)===r&&(t=f5+500-Nr(),10<t)){if(w0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ri(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=g2(yu.bind(null,e,is,Go),t);break}yu(e,is,Go);break;case 4:if(cc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Pa(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Nr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rP(r/1960))-r,10<r){e.timeoutHandle=g2(yu.bind(null,e,is,Go),r);break}yu(e,is,Go);break;case 5:yu(e,is,Go);break;default:throw Error(rt(329))}}}return cs(e,Nr()),e.callbackNode===n?yS.bind(null,e):null}function M2(e,t){var n=Oh;return e.current.memoizedState.isDehydrated&&(Pu(e,t).flags|=256),e=R0(e,t),e!==2&&(t=is,is=n,t!==null&&R2(t)),e}function R2(e){is===null?is=e:is.push.apply(is,e)}function iP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Da(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cc(e,t){for(t&=~d5,t&=~wg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pa(t),r=1<<n;e[n]=-1,t&=~r}}function bb(e){if(dn&6)throw Error(rt(327));of();var t=w0(e,0);if(!(t&1))return cs(e,Nr()),null;var n=R0(e,t);if(e.tag!==0&&n===2){var r=l2(e);r!==0&&(t=r,n=M2(e,r))}if(n===1)throw n=op,Pu(e,0),cc(e,t),cs(e,Nr()),n;if(n===6)throw Error(rt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yu(e,is,Go),cs(e,Nr()),null}function h5(e,t){var n=dn;dn|=1;try{return e(t)}finally{dn=n,dn===0&&(bf=Nr()+500,mg&&Mc())}}function Bu(e){pc!==null&&pc.tag===0&&!(dn&6)&&of();var t=dn;dn|=1;var n=na.transition,r=kn;try{if(na.transition=null,kn=1,e)return e()}finally{kn=r,na.transition=n,dn=t,!(dn&6)&&Mc()}}function p5(){Ls=Qd.current,Vn(Qd)}function Pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DL(n)),Ir!==null)for(n=Ir.return;n!==null;){var r=n;switch(Yy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&N0();break;case 3:wf(),Vn(os),Vn(ji),r5();break;case 5:n5(r);break;case 4:wf();break;case 13:Vn(lr);break;case 19:Vn(lr);break;case 10:Qy(r.type._context);break;case 22:case 23:p5()}n=n.return}if(Xr=e,Ir=e=jc(e.current,null),ai=Ls=t,Br=0,op=null,d5=wg=$u=0,is=Oh=null,Eu!==null){for(t=0;t<Eu.length;t++)if(n=Eu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Eu=null}return e}function wS(e,t){do{var n=Ir;try{if(Xy(),Qm.current=I0,T0){for(var r=ur.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}T0=!1}if(Fu=0,Gr=Fr=ur=null,Ih=!1,ip=0,u5.current=null,n===null||n.return===null){Br=1,op=t,Ir=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=ai,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=lb(a);if(g!==null){g.flags&=-257,cb(g,a,l,s,t),g.mode&1&&ob(s,f,t),t=g,c=f;var N=t.updateQueue;if(N===null){var j=new Set;j.add(c),t.updateQueue=j}else N.add(c);break e}else{if(!(t&1)){ob(s,f,t),m5();break e}c=Error(rt(426))}}else if(nr&&l.mode&1){var k=lb(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),cb(k,a,l,s,t),Ky(xf(c,l));break e}}s=c=xf(c,l),Br!==4&&(Br=2),Oh===null?Oh=[s]:Oh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=nS(s,c,t);tb(s,b);break e;case 1:l=c;var S=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Sc===null||!Sc.has(L)))){s.flags|=65536,t&=-t,s.lanes|=t;var M=rS(s,l,t);tb(s,M);break e}}s=s.return}while(s!==null)}_S(n)}catch(K){t=K,Ir===n&&n!==null&&(Ir=n=n.return);continue}break}while(!0)}function xS(){var e=D0.current;return D0.current=I0,e===null?I0:e}function m5(){(Br===0||Br===3||Br===2)&&(Br=4),Xr===null||!($u&268435455)&&!(wg&268435455)||cc(Xr,ai)}function R0(e,t){var n=dn;dn|=2;var r=xS();(Xr!==e||ai!==t)&&(Go=null,Pu(e,t));do try{sP();break}catch(i){wS(e,i)}while(!0);if(Xy(),dn=n,D0.current=r,Ir!==null)throw Error(rt(261));return Xr=null,ai=0,Br}function sP(){for(;Ir!==null;)bS(Ir)}function aP(){for(;Ir!==null&&!PA();)bS(Ir)}function bS(e){var t=NS(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,t===null?_S(e):Ir=t,u5.current=null}function _S(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZL(n,t),n!==null){n.flags&=32767,Ir=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Br=6,Ir=null;return}}else if(n=QL(n,t,Ls),n!==null){Ir=n;return}if(t=t.sibling,t!==null){Ir=t;return}Ir=t=e}while(t!==null);Br===0&&(Br=5)}function yu(e,t,n){var r=kn,i=na.transition;try{na.transition=null,kn=1,oP(e,t,n,r)}finally{na.transition=i,kn=r}return null}function oP(e,t,n,r){do of();while(pc!==null);if(dn&6)throw Error(rt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(rt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(UA(e,s),e===Xr&&(Ir=Xr=null,ai=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lm||(Lm=!0,jS(y0,function(){return of(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=na.transition,na.transition=null;var a=kn;kn=1;var l=dn;dn|=4,u5.current=null,tP(e,n),gS(n,e),EL(p2),x0=!!h2,p2=h2=null,e.current=n,nP(n),TA(),dn=l,kn=a,na.transition=s}else e.current=n;if(Lm&&(Lm=!1,pc=e,M0=i),s=e.pendingLanes,s===0&&(Sc=null),OA(n.stateNode),cs(e,Nr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(O0)throw O0=!1,e=D2,D2=null,e;return M0&1&&e.tag!==0&&of(),s=e.pendingLanes,s&1?e===O2?Mh++:(Mh=0,O2=e):Mh=0,Mc(),null}function of(){if(pc!==null){var e=n4(M0),t=na.transition,n=kn;try{if(na.transition=null,kn=16>e?16:e,pc===null)var r=!1;else{if(e=pc,pc=null,M0=0,dn&6)throw Error(rt(331));var i=dn;for(dn|=4,mt=e.current;mt!==null;){var s=mt,a=s.child;if(mt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(mt=f;mt!==null;){var p=mt;switch(p.tag){case 0:case 11:case 15:Dh(8,p,s)}var m=p.child;if(m!==null)m.return=p,mt=m;else for(;mt!==null;){p=mt;var w=p.sibling,g=p.return;if(hS(p),p===f){mt=null;break}if(w!==null){w.return=g,mt=w;break}mt=g}}}var N=s.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var k=j.sibling;j.sibling=null,j=k}while(j!==null)}}mt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,mt=a;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Dh(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,mt=b;break e}mt=s.return}}var S=e.current;for(mt=S;mt!==null;){a=mt;var L=a.child;if(a.subtreeFlags&2064&&L!==null)L.return=a,mt=L;else e:for(a=S;mt!==null;){if(l=mt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yg(9,l)}}catch(K){yr(l,l.return,K)}if(l===a){mt=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,mt=M;break e}mt=l.return}}if(dn=i,Mc(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(ug,e)}catch{}r=!0}return r}finally{kn=n,na.transition=t}}return!1}function _b(e,t,n){t=xf(n,t),t=nS(e,t,1),e=_c(e,t,1),t=Ri(),e!==null&&(yp(e,1,t),cs(e,t))}function yr(e,t,n){if(e.tag===3)_b(e,e,n);else for(;t!==null;){if(t.tag===3){_b(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sc===null||!Sc.has(r))){e=xf(n,e),e=rS(t,e,1),t=_c(t,e,1),e=Ri(),t!==null&&(yp(t,1,e),cs(t,e));break}}t=t.return}}function lP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ri(),e.pingedLanes|=e.suspendedLanes&n,Xr===e&&(ai&n)===n&&(Br===4||Br===3&&(ai&130023424)===ai&&500>Nr()-f5?Pu(e,0):d5|=n),cs(e,t)}function SS(e,t){t===0&&(e.mode&1?(t=xm,xm<<=1,!(xm&130023424)&&(xm=4194304)):t=1);var n=Ri();e=nl(e,t),e!==null&&(yp(e,t,n),cs(e,n))}function cP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),SS(e,n)}function uP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(rt(314))}r!==null&&r.delete(t),SS(e,n)}var NS;NS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||os.current)as=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return as=!1,XL(e,t,n);as=!!(e.flags&131072)}else as=!1,nr&&t.flags&1048576&&C4(t,E0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;e0(e,t),e=t.pendingProps;var i=gf(t,ji.current);af(t,n),i=s5(null,t,r,e,i,n);var s=a5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ls(r)?(s=!0,j0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,e5(t),i.updater=vg,t.stateNode=i,i._reactInternals=t,S2(t,r,e,n),t=k2(null,t,r,!0,s,n)):(t.tag=0,nr&&s&&Gy(t),Oi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(e0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=fP(r),e=ja(r,e),i){case 0:t=j2(null,t,r,e,n);break e;case 1:t=fb(null,t,r,e,n);break e;case 11:t=ub(null,t,r,e,n);break e;case 14:t=db(null,t,r,ja(r.type,e),n);break e}throw Error(rt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ja(r,i),j2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ja(r,i),fb(e,t,r,i,n);case 3:e:{if(oS(t),e===null)throw Error(rt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,D4(e,t),L0(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=xf(Error(rt(423)),t),t=hb(e,t,r,n,i);break e}else if(r!==i){i=xf(Error(rt(424)),t),t=hb(e,t,r,n,i);break e}else for(Ps=bc(t.stateNode.containerInfo.firstChild),Is=t,nr=!0,Aa=null,n=T4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vf(),r===i){t=rl(e,t,n);break e}Oi(e,t,r,n)}t=t.child}return t;case 5:return O4(t),e===null&&x2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,m2(r,i)?a=null:s!==null&&m2(r,s)&&(t.flags|=32),aS(e,t),Oi(e,t,a,n),t.child;case 6:return e===null&&x2(t),null;case 13:return lS(e,t,n);case 4:return t5(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yf(t,null,r,n):Oi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ja(r,i),ub(e,t,r,i,n);case 7:return Oi(e,t,t.pendingProps,n),t.child;case 8:return Oi(e,t,t.pendingProps.children,n),t.child;case 12:return Oi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Un(C0,r._currentValue),r._currentValue=a,s!==null)if(Da(s.value,a)){if(s.children===i.children&&!os.current){t=rl(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Qo(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),b2(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(rt(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),b2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Oi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,af(t,n),i=ra(i),r=r(i),t.flags|=1,Oi(e,t,r,n),t.child;case 14:return r=t.type,i=ja(r,t.pendingProps),i=ja(r.type,i),db(e,t,r,i,n);case 15:return iS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ja(r,i),e0(e,t),t.tag=1,ls(r)?(e=!0,j0(t)):e=!1,af(t,n),tS(t,r,i),S2(t,r,i,n),k2(null,t,r,!0,e,n);case 19:return cS(e,t,n);case 22:return sS(e,t,n)}throw Error(rt(156,t.tag))};function jS(e,t){return Q3(e,t)}function dP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(e,t,n,r){return new dP(e,t,n,r)}function g5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fP(e){if(typeof e=="function")return g5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oy)return 11;if(e===My)return 14}return 2}function jc(e,t){var n=e.alternate;return n===null?(n=ta(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function r0(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")g5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case zd:return Tu(n.children,i,s,t);case Dy:a=8,i|=8;break;case Gv:return e=ta(12,n,t,i|2),e.elementType=Gv,e.lanes=s,e;case Yv:return e=ta(13,n,t,i),e.elementType=Yv,e.lanes=s,e;case Kv:return e=ta(19,n,t,i),e.elementType=Kv,e.lanes=s,e;case O3:return xg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I3:a=10;break e;case D3:a=9;break e;case Oy:a=11;break e;case My:a=14;break e;case ic:a=16,r=null;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=ta(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Tu(e,t,n,r){return e=ta(7,e,r,t),e.lanes=n,e}function xg(e,t,n,r){return e=ta(22,e,r,t),e.elementType=O3,e.lanes=n,e.stateNode={isHidden:!1},e}function dv(e,t,n){return e=ta(6,e,null,t),e.lanes=n,e}function fv(e,t,n){return t=ta(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=V1(0),this.expirationTimes=V1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function v5(e,t,n,r,i,s,a,l,c){return e=new hP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ta(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},e5(s),e}function pP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ud,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function kS(e){if(!e)return Ac;e=e._reactInternals;e:{if(qu(e)!==e||e.tag!==1)throw Error(rt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ls(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(rt(171))}if(e.tag===1){var n=e.type;if(ls(n))return k4(e,n,t)}return t}function ES(e,t,n,r,i,s,a,l,c){return e=v5(n,r,!0,e,i,s,a,l,c),e.context=kS(null),n=e.current,r=Ri(),i=Nc(n),s=Qo(r,i),s.callback=t??null,_c(n,s,i),e.current.lanes=i,yp(e,i,r),cs(e,r),e}function bg(e,t,n,r){var i=t.current,s=Ri(),a=Nc(i);return n=kS(n),t.context===null?t.context=n:t.pendingContext=n,t=Qo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_c(i,t,a),e!==null&&(Ta(e,i,a,s),Xm(e,i,a)),a}function F0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function y5(e,t){Sb(e,t),(e=e.alternate)&&Sb(e,t)}function mP(){return null}var CS=typeof reportError=="function"?reportError:function(e){console.error(e)};function w5(e){this._internalRoot=e}_g.prototype.render=w5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(rt(409));bg(e,t,null,null)};_g.prototype.unmount=w5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bu(function(){bg(null,e,null,null)}),t[tl]=null}};function _g(e){this._internalRoot=e}_g.prototype.unstable_scheduleHydration=function(e){if(e){var t=s4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lc.length&&t!==0&&t<lc[n].priority;n++);lc.splice(n,0,e),n===0&&o4(e)}};function x5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nb(){}function gP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=F0(a);s.call(f)}}var a=ES(t,r,e,0,null,!1,!1,"",Nb);return e._reactRootContainer=a,e[tl]=a.current,Zh(e.nodeType===8?e.parentNode:e),Bu(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=F0(c);l.call(f)}}var c=v5(e,0,!1,null,null,!1,!1,"",Nb);return e._reactRootContainer=c,e[tl]=c.current,Zh(e.nodeType===8?e.parentNode:e),Bu(function(){bg(t,c,n,r)}),c}function Ng(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=F0(a);l.call(c)}}bg(t,a,e,i)}else a=gP(n,t,e,i,r);return F0(a)}r4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Nh(t.pendingLanes);n!==0&&($y(t,n|1),cs(t,Nr()),!(dn&6)&&(bf=Nr()+500,Mc()))}break;case 13:Bu(function(){var r=nl(e,1);if(r!==null){var i=Ri();Ta(r,e,1,i)}}),y5(e,1)}};By=function(e){if(e.tag===13){var t=nl(e,134217728);if(t!==null){var n=Ri();Ta(t,e,134217728,n)}y5(e,134217728)}};i4=function(e){if(e.tag===13){var t=Nc(e),n=nl(e,t);if(n!==null){var r=Ri();Ta(n,e,t,r)}y5(e,t)}};s4=function(){return kn};a4=function(e,t){var n=kn;try{return kn=e,t()}finally{kn=n}};s2=function(e,t,n){switch(t){case"input":if(Qv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pg(r);if(!i)throw Error(rt(90));R3(r),Qv(r,i)}}}break;case"textarea":$3(e,n);break;case"select":t=n.value,t!=null&&tf(e,!!n.multiple,t,!1)}};V3=h5;G3=Bu;var vP={usingClientEntryPoint:!1,Events:[xp,Vd,pg,W3,H3,h5]},mh={findFiberByHostInstance:ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yP={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J3(e),e===null?null:e.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||mP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{ug=Pm.inject(yP),mo=Pm}catch{}}Os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vP;Os.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x5(t))throw Error(rt(200));return pP(e,t,null,n)};Os.createRoot=function(e,t){if(!x5(e))throw Error(rt(299));var n=!1,r="",i=CS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=v5(e,1,!1,null,null,n,!1,r,i),e[tl]=t.current,Zh(e.nodeType===8?e.parentNode:e),new w5(t)};Os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):(e=Object.keys(e).join(","),Error(rt(268,e)));return e=J3(t),e=e===null?null:e.stateNode,e};Os.flushSync=function(e){return Bu(e)};Os.hydrate=function(e,t,n){if(!Sg(t))throw Error(rt(200));return Ng(null,e,t,!0,n)};Os.hydrateRoot=function(e,t,n){if(!x5(e))throw Error(rt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=CS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ES(t,null,e,1,n??null,i,!1,s,a),e[tl]=t.current,Zh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new _g(t)};Os.render=function(e,t,n){if(!Sg(t))throw Error(rt(200));return Ng(null,e,t,!1,n)};Os.unmountComponentAtNode=function(e){if(!Sg(e))throw Error(rt(40));return e._reactRootContainer?(Bu(function(){Ng(null,null,e,!1,function(){e._reactRootContainer=null,e[tl]=null})}),!0):!1};Os.unstable_batchedUpdates=h5;Os.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sg(n))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return Ng(e,t,n,!1,r)};Os.version="18.3.1-next-f1338f8080-20240426";function AS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AS)}catch(e){console.error(e)}}AS(),A3.exports=Os;var Au=A3.exports,LS,jb=Au;LS=jb.createRoot,jb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}var mc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mc||(mc={}));const kb="popstate";function wP(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return F2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$0(i)}return bP(t,n,null,e)}function Cr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xP(){return Math.random().toString(36).substr(2,8)}function Eb(e,t){return{usr:e.state,key:e.key,idx:t}}function F2(e,t,n,r){return n===void 0&&(n=null),lp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ef(t):t,{state:n,key:t&&t.key||r||xP()})}function $0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ef(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function bP(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=mc.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(lp({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=mc.Pop;let k=p(),b=k==null?null:k-f;f=k,c&&c({action:l,location:j.location,delta:b})}function w(k,b){l=mc.Push;let S=F2(j.location,k,b);f=p()+1;let L=Eb(S,f),M=j.createHref(S);try{a.pushState(L,"",M)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(M)}s&&c&&c({action:l,location:j.location,delta:1})}function g(k,b){l=mc.Replace;let S=F2(j.location,k,b);f=p();let L=Eb(S,f),M=j.createHref(S);a.replaceState(L,"",M),s&&c&&c({action:l,location:j.location,delta:0})}function N(k){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof k=="string"?k:$0(k);return S=S.replace(/ $/,"%20"),Cr(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let j={get action(){return l},get location(){return e(i,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(kb,m),c=k,()=>{i.removeEventListener(kb,m),c=null}},createHref(k){return t(i,k)},createURL:N,encodeLocation(k){let b=N(k);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:w,replace:g,go(k){return a.go(k)}};return j}var Cb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cb||(Cb={}));function _P(e,t,n){return n===void 0&&(n="/"),SP(e,t,n,!1)}function SP(e,t,n,r){let i=typeof t=="string"?Ef(t):t,s=b5(i.pathname||"/",n);if(s==null)return null;let a=TS(e);NP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=OP(s);l=IP(a[c],f,r)}return l}function TS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Cr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=kc([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Cr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),TS(s.children,t,p,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:PP(f,s.index),routesMeta:p})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of IS(s.path))i(s,a,c)}),t}function IS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=IS(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function NP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:TP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jP=/^:[\w-]+$/,kP=3,EP=2,CP=1,AP=10,LP=-2,Ab=e=>e==="*";function PP(e,t){let n=e.split("/"),r=n.length;return n.some(Ab)&&(r+=LP),t&&(r+=EP),n.filter(i=>!Ab(i)).reduce((i,s)=>i+(jP.test(s)?kP:s===""?CP:AP),r)}function TP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function IP(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),w=c.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:kc([s,m.pathname]),pathnameBase:$P(kc([s,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(s=kc([s,m.pathnameBase]))}return a}function Lb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=DP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:w,isOptional:g}=p;if(w==="*"){let j=l[m]||"";a=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const N=l[m];return g&&!N?f[w]=void 0:f[w]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:e}}function DP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),PS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function OP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function b5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function MP(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ef(e):e;return{pathname:n?n.startsWith("/")?n:RP(n,t):t,search:BP(r),hash:UP(i)}}function RP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _5(e,t){let n=FP(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function S5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ef(e):(i=lp({},e),Cr(!i.pathname||!i.pathname.includes("?"),hv("?","pathname","search",i)),Cr(!i.pathname||!i.pathname.includes("#"),hv("#","pathname","hash",i)),Cr(!i.search||!i.search.includes("#"),hv("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),m-=1;i.pathname=w.join("/")}l=m>=0?t[m]:"/"}let c=MP(i,l),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const kc=e=>e.join("/").replace(/\/\/+/g,"/"),$P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),BP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const DS=["post","put","patch","delete"];new Set(DS);const qP=["get",...DS];new Set(qP);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cp.apply(this,arguments)}const N5=C.createContext(null),WP=C.createContext(null),Rc=C.createContext(null),jg=C.createContext(null),ll=C.createContext({outlet:null,matches:[],isDataRoute:!1}),OS=C.createContext(null);function HP(e,t){let{relative:n}=t===void 0?{}:t;Cf()||Cr(!1);let{basename:r,navigator:i}=C.useContext(Rc),{hash:s,pathname:a,search:l}=FS(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:kc([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Cf(){return C.useContext(jg)!=null}function Fa(){return Cf()||Cr(!1),C.useContext(jg).location}function MS(e){C.useContext(Rc).static||C.useLayoutEffect(e)}function $a(){let{isDataRoute:e}=C.useContext(ll);return e?i7():VP()}function VP(){Cf()||Cr(!1);let e=C.useContext(N5),{basename:t,future:n,navigator:r}=C.useContext(Rc),{matches:i}=C.useContext(ll),{pathname:s}=Fa(),a=JSON.stringify(_5(i,n.v7_relativeSplatPath)),l=C.useRef(!1);return MS(()=>{l.current=!0}),C.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let m=S5(f,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:kc([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,a,s,e])}function RS(){let{matches:e}=C.useContext(ll),t=e[e.length-1];return t?t.params:{}}function FS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(Rc),{matches:i}=C.useContext(ll),{pathname:s}=Fa(),a=JSON.stringify(_5(i,r.v7_relativeSplatPath));return C.useMemo(()=>S5(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function GP(e,t){return YP(e,t)}function YP(e,t,n,r){Cf()||Cr(!1);let{navigator:i}=C.useContext(Rc),{matches:s}=C.useContext(ll),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=Fa(),p;if(t){var m;let k=typeof t=="string"?Ef(t):t;c==="/"||(m=k.pathname)!=null&&m.startsWith(c)||Cr(!1),p=k}else p=f;let w=p.pathname||"/",g=w;if(c!=="/"){let k=c.replace(/^\//,"").split("/");g="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let N=_P(e,{pathname:g}),j=ZP(N&&N.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:kc([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:kc([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return t&&j?C.createElement(jg.Provider,{value:{location:cp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:mc.Pop}},j):j}function KP(){let e=r7(),t=zP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,null)}const JP=C.createElement(KP,null);class XP extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(ll.Provider,{value:this.props.routeContext},C.createElement(OS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QP(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(N5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(ll.Provider,{value:t},r)}function ZP(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Cr(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:w,errors:g}=n,N=m.route.loader&&w[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||N){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,w)=>{let g,N=!1,j=null,k=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||JP,c&&(f<0&&w===0?(N=!0,k=null):f===w&&(N=!0,k=m.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,w+1)),S=()=>{let L;return g?L=j:N?L=k:m.route.Component?L=C.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=p,C.createElement(QP,{match:m,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:L})};return n&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?C.createElement(XP,{location:n.location,revalidation:n.revalidation,component:j,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var $S=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($S||{}),B0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(B0||{});function e7(e){let t=C.useContext(N5);return t||Cr(!1),t}function t7(e){let t=C.useContext(WP);return t||Cr(!1),t}function n7(e){let t=C.useContext(ll);return t||Cr(!1),t}function BS(e){let t=n7(),n=t.matches[t.matches.length-1];return n.route.id||Cr(!1),n.route.id}function r7(){var e;let t=C.useContext(OS),n=t7(B0.UseRouteError),r=BS(B0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function i7(){let{router:e}=e7($S.UseNavigateStable),t=BS(B0.UseNavigateStable),n=C.useRef(!1);return MS(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,cp({fromRouteId:t},s)))},[e,t])}const Pb={};function s7(e,t){Pb[t]||(Pb[t]=!0,console.warn(t))}const Tb=(e,t,n)=>s7(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function a7(e,t){e!=null&&e.v7_startTransition||Tb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Tb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function o7(e){let{to:t,replace:n,state:r,relative:i}=e;Cf()||Cr(!1);let{future:s,static:a}=C.useContext(Rc),{matches:l}=C.useContext(ll),{pathname:c}=Fa(),f=$a(),p=S5(t,_5(l,s.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(p);return C.useEffect(()=>f(JSON.parse(m),{replace:n,state:r,relative:i}),[f,m,i,n,r]),null}function Sa(e){Cr(!1)}function l7(e){let{basename:t="/",children:n=null,location:r,navigationType:i=mc.Pop,navigator:s,static:a=!1,future:l}=e;Cf()&&Cr(!1);let c=t.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:c,navigator:s,static:a,future:cp({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=Ef(r));let{pathname:p="/",search:m="",hash:w="",state:g=null,key:N="default"}=r,j=C.useMemo(()=>{let k=b5(p,c);return k==null?null:{location:{pathname:k,search:m,hash:w,state:g,key:N},navigationType:i}},[c,p,m,w,g,N,i]);return j==null?null:C.createElement(Rc.Provider,{value:f},C.createElement(jg.Provider,{children:n,value:j}))}function c7(e){let{children:t,location:n}=e;return GP($2(t),n)}new Promise(()=>{});function $2(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,$2(r.props.children,s));return}r.type!==Sa&&Cr(!1),!r.props.index||!r.props.children||Cr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=$2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function B2(){return B2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B2.apply(this,arguments)}function u7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function d7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function f7(e,t){return e.button===0&&(!t||t==="_self")&&!d7(e)}function U2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function h7(e,t){let n=U2(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const p7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m7="6";try{window.__reactRouterVersion=m7}catch{}const g7="startTransition",Ib=Hv[g7];function v7(e){let{basename:t,children:n,future:r,window:i}=e,s=C.useRef();s.current==null&&(s.current=wP({window:i,v5Compat:!0}));let a=s.current,[l,c]=C.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=C.useCallback(m=>{f&&Ib?Ib(()=>c(m)):c(m)},[c,f]);return C.useLayoutEffect(()=>a.listen(p),[a,p]),C.useEffect(()=>a7(r),[r]),C.createElement(l7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const y7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ec=C.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:m}=t,w=u7(t,p7),{basename:g}=C.useContext(Rc),N,j=!1;if(typeof f=="string"&&w7.test(f)&&(N=f,y7))try{let L=new URL(window.location.href),M=f.startsWith("//")?new URL(L.protocol+f):new URL(f),K=b5(M.pathname,g);M.origin===L.origin&&K!=null?f=K+M.search+M.hash:j=!0}catch{}let k=HP(f,{relative:i}),b=x7(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:m});function S(L){r&&r(L),L.defaultPrevented||b(L)}return C.createElement("a",B2({},w,{href:N||k,onClick:j||s?r:S,ref:n,target:c}))});var Db;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Db||(Db={}));var Ob;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ob||(Ob={}));function x7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=$a(),f=Fa(),p=FS(e,{relative:a});return C.useCallback(m=>{if(f7(m,n)){m.preventDefault();let w=r!==void 0?r:$0(f)===$0(p);c(e,{replace:w,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[f,c,p,r,i,n,e,s,a,l])}function US(e){let t=C.useRef(U2(e)),n=C.useRef(!1),r=Fa(),i=C.useMemo(()=>h7(r.search,n.current?null:t.current),[r.search]),s=$a(),a=C.useCallback((l,c)=>{const f=U2(typeof l=="function"?l(i):l);n.current=!0,s("?"+f,c)},[s,i]);return[i,a]}let b7={data:""},_7=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||b7,S7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,N7=/\/\*[^]*?\*\/|  +/g,Mb=/\n+/g,uc=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?uc(a,s):s+"{"+uc(a,s[1]=="k"?"":t)+"}":typeof a=="object"?r+=uc(a,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=uc.p?uc.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Wo={},zS=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+zS(e[n]);return t}return e},j7=(e,t,n,r,i)=>{let s=zS(e),a=Wo[s]||(Wo[s]=(c=>{let f=0,p=11;for(;f<c.length;)p=101*p+c.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Wo[a]){let c=s!==e?e:(f=>{let p,m,w=[{}];for(;p=S7.exec(f.replace(N7,""));)p[4]?w.shift():p[3]?(m=p[3].replace(Mb," ").trim(),w.unshift(w[0][m]=w[0][m]||{})):w[0][p[1]]=p[2].replace(Mb," ").trim();return w[0]})(e);Wo[a]=uc(i?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Wo.g?Wo.g:null;return n&&(Wo.g=Wo[a]),((c,f,p,m)=>{m?f.data=f.data.replace(m,c):f.data.indexOf(c)===-1&&(f.data=p?c+f.data:f.data+c)})(Wo[a],t,r,l),a},k7=(e,t,n)=>e.reduce((r,i,s)=>{let a=t[s];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":uc(l,""):l===!1?"":l}return r+i+(a??"")},"");function kg(e){let t=this||{},n=e.call?e(t.p):e;return j7(n.unshift?n.raw?k7(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,_7(t.target),t.g,t.o,t.k)}let qS,z2,q2;kg.bind({g:1});let il=kg.bind({k:1});function E7(e,t,n,r){uc.p=t,qS=e,z2=n,q2=r}function Fc(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:z2&&z2()},l),n.o=/ *go\d+/.test(c),l.className=kg.apply(n,r)+(c?" "+c:"");let f=e;return e[0]&&(f=l.as||e,delete l.as),q2&&f[0]&&q2(l),qS(f,l)}return i}}var C7=e=>typeof e=="function",U0=(e,t)=>C7(e)?e(t):e,A7=(()=>{let e=0;return()=>(++e).toString()})(),WS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),L7=20,i0=new Map,P7=1e3,Rb=e=>{if(i0.has(e))return;let t=setTimeout(()=>{i0.delete(e),Wu({type:4,toastId:e})},P7);i0.set(e,t)},T7=e=>{let t=i0.get(e);t&&clearTimeout(t)},W2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,L7)};case 1:return t.toast.id&&T7(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?W2(e,{type:1,toast:n}):W2(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?Rb(r):e.toasts.forEach(s=>{Rb(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},s0=[],a0={toasts:[],pausedAt:void 0},Wu=e=>{a0=W2(a0,e),s0.forEach(t=>{t(a0)})},I7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D7=(e={})=>{let[t,n]=C.useState(a0);C.useEffect(()=>(s0.push(n),()=>{let i=s0.indexOf(n);i>-1&&s0.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var s,a;return{...e,...e[i.type],...i,duration:i.duration||((s=e[i.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||I7[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:r}},O7=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||A7()}),_p=e=>(t,n)=>{let r=O7(t,e,n);return Wu({type:2,toast:r}),r.id},Le=(e,t)=>_p("blank")(e,t);Le.error=_p("error");Le.success=_p("success");Le.loading=_p("loading");Le.custom=_p("custom");Le.dismiss=e=>{Wu({type:3,toastId:e})};Le.remove=e=>Wu({type:4,toastId:e});Le.promise=(e,t,n)=>{let r=Le.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(Le.success(U0(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Le.error(U0(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var M7=(e,t)=>{Wu({type:1,toast:{id:e,height:t}})},R7=()=>{Wu({type:5,time:Date.now()})},F7=e=>{let{toasts:t,pausedAt:n}=D7(e);C.useEffect(()=>{if(n)return;let s=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Le.dismiss(l.id);return}return setTimeout(()=>Le.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=C.useCallback(()=>{n&&Wu({type:6,time:Date.now()})},[n]),i=C.useCallback((s,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:f}=a||{},p=t.filter(g=>(g.position||f)===(s.position||f)&&g.height),m=p.findIndex(g=>g.id===s.id),w=p.filter((g,N)=>N<m&&g.visible).length;return p.filter(g=>g.visible).slice(...l?[w+1]:[0,w]).reduce((g,N)=>g+(N.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:M7,startPause:R7,endPause:r,calculateOffset:i}}},$7=il`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,B7=il`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,U7=il`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,z7=Fc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${B7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${U7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,q7=il`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,W7=Fc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${q7} 1s linear infinite;
`,H7=il`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,V7=il`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,G7=Fc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${H7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${V7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Y7=Fc("div")`
  position: absolute;
`,K7=Fc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,J7=il`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X7=Fc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${J7} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Q7=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?C.createElement(X7,null,t):t:n==="blank"?null:C.createElement(K7,null,C.createElement(W7,{...r}),n!=="loading"&&C.createElement(Y7,null,n==="error"?C.createElement(z7,{...r}):C.createElement(G7,{...r})))},Z7=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,eT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,tT="0%{opacity:0;} 100%{opacity:1;}",nT="0%{opacity:1;} 100%{opacity:0;}",rT=Fc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,iT=Fc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=WS()?[tT,nT]:[Z7(n),eT(n)];return{animation:t?`${il(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${il(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aT=C.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?sT(e.position||t||"top-center",e.visible):{opacity:0},s=C.createElement(Q7,{toast:e}),a=C.createElement(iT,{...e.ariaProps},U0(e.message,e));return C.createElement(rT,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:a}):C.createElement(C.Fragment,null,s,a))});E7(C.createElement);var oT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=C.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return C.createElement("div",{ref:s,className:t,style:n},i)},lT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:WS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},cT=kg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Tm=16,uT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=F7(n);return C.createElement("div",{style:{position:"fixed",zIndex:9999,top:Tm,left:Tm,right:Tm,bottom:Tm,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(f=>{let p=f.position||t,m=c.calculateOffset(f,{reverseOrder:e,gutter:r,defaultPosition:t}),w=lT(p,m);return C.createElement(oT,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?cT:"",style:w},f.type==="custom"?U0(f.message,f):i?i(f):C.createElement(aT,{toast:f,position:p}))}))};const dT="modulepreload",fT=function(e){return"/"+e},Fb={},sl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=fT(c),c in Fb)return;Fb[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":dT,f||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((w,g)=>{m.addEventListener("load",w),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},hT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class j5 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class pT extends j5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mT extends j5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class gT extends j5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var H2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(H2||(H2={}));var vT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class yT{constructor(t,{headers:n={},customFetch:r,region:i=H2.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=hT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return vT(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f}).catch(N=>{throw new pT(N)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new mT(p);if(!p.ok)throw new gT(p);let w=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return w==="application/json"?g=yield p.json():w==="application/octet-stream"?g=yield p.blob():w==="text/event-stream"?g=p:w==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var ss={},k5={},Eg={},Sp={},Cg={},Ag={},wT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_f=wT();const xT=_f.fetch,HS=_f.fetch.bind(_f),VS=_f.Headers,bT=_f.Request,_T=_f.Response,Af=Object.freeze(Object.defineProperty({__proto__:null,Headers:VS,Request:bT,Response:_T,default:HS,fetch:xT},Symbol.toStringTag,{value:"Module"})),ST=GC(Af);var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});class NT extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Lg.default=NT;var GS=si&&si.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ag,"__esModule",{value:!0});const jT=GS(ST),kT=GS(Lg);let ET=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=jT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,l,c;let f=null,p=null,m=null,w=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=b:p=JSON.parse(b))}const j=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),k=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");j&&k&&k.length>1&&(m=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,w=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const j=await s.text();try{f=JSON.parse(j),Array.isArray(f)&&s.status===404&&(p=[],f=null,w=200,g="OK")}catch{s.status===404&&j===""?(w=204,g="No Content"):f={message:j}}if(f&&this.isMaybeSingle&&(!((c=f==null?void 0:f.details)===null||c===void 0)&&c.includes("0 rows"))&&(f=null,w=200,g="OK"),f&&this.shouldThrowOnError)throw new kT.default(f)}return{error:f,data:p,count:m,status:w,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,l,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};Ag.default=ET;var CT=si&&si.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cg,"__esModule",{value:!0});const AT=CT(Ag);let LT=class extends AT.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${f}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Cg.default=LT;var PT=si&&si.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sp,"__esModule",{value:!0});const TT=PT(Cg);let IT=class extends TT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Sp.default=IT;var DT=si&&si.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eg,"__esModule",{value:!0});const gh=DT(Sp);let OT=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new gh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(c.length>0){const f=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new gh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new gh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new gh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Eg.default=OT;var Pg={},Tg={};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.version=void 0;Tg.version="0.0.0-automated";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.DEFAULT_HEADERS=void 0;const MT=Tg;Pg.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${MT.version}`};var YS=si&&si.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k5,"__esModule",{value:!0});const RT=YS(Eg),FT=YS(Sp),$T=Pg;let BT=class KS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},$T.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new RT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new KS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=Object.assign({},this.headers);return s&&(f.Prefer=`count=${s}`),new FT.default({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};k5.default=BT;var Lf=si&&si.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ss,"__esModule",{value:!0});ss.PostgrestError=ss.PostgrestBuilder=ss.PostgrestTransformBuilder=ss.PostgrestFilterBuilder=ss.PostgrestQueryBuilder=ss.PostgrestClient=void 0;const JS=Lf(k5);ss.PostgrestClient=JS.default;const XS=Lf(Eg);ss.PostgrestQueryBuilder=XS.default;const QS=Lf(Sp);ss.PostgrestFilterBuilder=QS.default;const ZS=Lf(Cg);ss.PostgrestTransformBuilder=ZS.default;const eN=Lf(Ag);ss.PostgrestBuilder=eN.default;const tN=Lf(Lg);ss.PostgrestError=tN.default;var UT=ss.default={PostgrestClient:JS.default,PostgrestQueryBuilder:XS.default,PostgrestFilterBuilder:QS.default,PostgrestTransformBuilder:ZS.default,PostgrestBuilder:eN.default,PostgrestError:tN.default};const{PostgrestClient:zT,PostgrestQueryBuilder:hq,PostgrestFilterBuilder:pq,PostgrestTransformBuilder:mq,PostgrestBuilder:gq}=UT,qT="2.10.7",WT={"X-Client-Info":`realtime-js/${qT}`},HT="1.0.0",nN=1e4,VT=1e3;var lf;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lf||(lf={}));var As;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(As||(As={}));var Ca;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ca||(Ca={}));var V2;(function(e){e.websocket="websocket"})(V2||(V2={}));var Su;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Su||(Su={}));class GT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:f}}}class rN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Fn||(Fn={}));const $b=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=YT(a,e,t,i),s),{})},YT=(e,t,n,r)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?iN(s,a):G2(a)},iN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return QT(t,n)}switch(e){case Fn.bool:return KT(t);case Fn.float4:case Fn.float8:case Fn.int2:case Fn.int4:case Fn.int8:case Fn.numeric:case Fn.oid:return JT(t);case Fn.json:case Fn.jsonb:return XT(t);case Fn.timestamp:return ZT(t);case Fn.abstime:case Fn.date:case Fn.daterange:case Fn.int4range:case Fn.int8range:case Fn.money:case Fn.reltime:case Fn.text:case Fn.time:case Fn.timestamptz:case Fn.timetz:case Fn.tsrange:case Fn.tstzrange:return G2(t);default:return G2(t)}},G2=e=>e,KT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},XT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},QT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>iN(t,l))}return e},ZT=e=>typeof e=="string"?e.replace(" ","T"):e,sN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class pv{constructor(t,n,r={},i=nN){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bb||(Bb={}));class Rh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Rh.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Rh.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(s,(f,p)=>{a[f]||(c[f]=p)}),this.map(a,(f,p)=>{const m=s[f];if(m){const w=p.map(k=>k.presence_ref),g=m.map(k=>k.presence_ref),N=p.filter(k=>g.indexOf(k.presence_ref)<0),j=m.filter(k=>w.indexOf(k.presence_ref)<0);N.length>0&&(l[f]=N),j.length>0&&(c[f]=j)}else l[f]=p}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var f;const p=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(c),p.length>0){const m=t[l].map(g=>g.presence_ref),w=p.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...w)}r(l,p,c)}),this.map(a,(l,c)=>{let f=t[l];if(!f)return;const p=c.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),t[l]=f,i(l,f,c),f.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ub;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ub||(Ub={}));var zb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zb||(zb={}));var qb;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qb||(qb={}));class E5{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=As.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new pv(this,Ca.join,this.params,this.timeout),this.rejoinTimer=new rN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=As.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=As.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=As.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=As.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ca.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Rh(this),this.broadcastEndpointURL=sN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},f={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const w=this.bindings.postgres_changes,g=(m=w==null?void 0:w.length)!==null&&m!==void 0?m:0,N=[];for(let j=0;j<g;j++){const k=w[j],{filter:{event:b,schema:S,table:L,filter:M}}=k,K=p&&p[j];if(K&&K.event===b&&K.schema===S&&K.table===L&&K.filter===M)N.push(Object.assign(Object.assign({},k),{id:K.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=As.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ca.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new pv(this,Ca.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new pv(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:f,join:p}=Ca;if(r&&[l,c,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let w=this._onMessage(a,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var N,j,k;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((k=(j=g.filter)===null||j===void 0?void 0:j.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(g=>g.callback(w,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var N,j,k,b,S,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const M=g.id,K=(N=g.filter)===null||N===void 0?void 0:N.event;return M&&((j=n.ids)===null||j===void 0?void 0:j.includes(M))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const M=(S=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return M==="*"||M===((L=n==null?void 0:n.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof w=="object"&&"ids"in w){const N=w.data,{schema:j,table:k,commit_timestamp:b,type:S,errors:L}=N;w=Object.assign(Object.assign({},{schema:j,table:k,commit_timestamp:b,eventType:S,new:{},old:{},errors:L}),this._getPayloadRecords(N))}g.callback(w,r)})}_isClosed(){return this.state===As.closed}_isJoined(){return this.state===As.joined}_isJoining(){return this.state===As.joining}_isLeaving(){return this.state===As.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&E5.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ca.close,{},t)}_onError(t){this._on(Ca.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=As.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=$b(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=$b(t.columns,t.old_record)),n}}const eI=()=>{},tI=typeof WebSocket<"u",nI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rI{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=WT,this.params={},this.timeout=nN,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=eI,this.conn=null,this.sendBuffer=[],this.serializer=new GT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>sl(async()=>{const{default:c}=await Promise.resolve().then(()=>Af);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${V2.websocket}`,this.httpEndpoint=sN(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(tI){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new iI(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),sl(async()=>{const{default:t}=await import("./browser-B903zJig.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lf.connecting:return Su.Connecting;case lf.open:return Su.Open;case lf.closing:return Su.Closing;default:return Su.Closed}}isConnected(){return this.connectionState()===Su.Open}channel(t,n={config:{}}){const r=new E5(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Ca.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:HT}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ca.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(VT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([nI],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class iI{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=lf.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class C5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class sI extends C5{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Y2 extends C5{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var aI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const aN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},oI=()=>aI(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sl(()=>Promise.resolve().then(()=>Af),void 0)).Response:Response}),K2=e=>{if(Array.isArray(e))return e.map(n=>K2(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=K2(r)}),t};var Hu=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const mv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lI=(e,t,n)=>Hu(void 0,void 0,void 0,function*(){const r=yield oI();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new sI(mv(i),e.status||500))}).catch(i=>{t(new Y2(mv(i),i))}):t(new Y2(mv(e),e))}),cI=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Np(e,t,n,r,i,s){return Hu(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,cI(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>lI(c,l,r))})})}function z0(e,t,n,r){return Hu(this,void 0,void 0,function*(){return Np(e,"GET",t,n,r)})}function ac(e,t,n,r,i){return Hu(this,void 0,void 0,function*(){return Np(e,"POST",t,r,i,n)})}function uI(e,t,n,r,i){return Hu(this,void 0,void 0,function*(){return Np(e,"PUT",t,r,i,n)})}function dI(e,t,n,r){return Hu(this,void 0,void 0,function*(){return Np(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function oN(e,t,n,r,i){return Hu(this,void 0,void 0,function*(){return Np(e,"DELETE",t,r,i,n)})}var rs=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const fI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hI{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=aN(i)}uploadOrUpdate(t,n,r,i){return rs(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Wb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:s,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),w=yield m.json();return m.ok?{data:{path:f,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(s){if(Vr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return rs(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Wb.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:p}),w=yield m.json();return m.ok?{data:{path:s,fullPath:w.Key},error:null}:{data:null,error:w}}catch(c){if(Vr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return rs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield ac(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new C5("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}update(t,n,r){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return rs(this,void 0,void 0,function*(){try{return{data:yield ac(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return rs(this,void 0,void 0,function*(){try{return{data:{path:(yield ac(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return rs(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield ac(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return rs(this,void 0,void 0,function*(){try{const i=yield ac(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}download(t,n){return rs(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield z0(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Vr(l))return{data:null,error:l};throw l}})}info(t){return rs(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield z0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:K2(r),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}exists(t){return rs(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield dI(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Vr(r)&&r instanceof Y2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(t){return rs(this,void 0,void 0,function*(){try{return{data:yield oN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}list(t,n,r){return rs(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},fI),n),{prefix:t||""});return{data:yield ac(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Vr(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const pI="2.7.1",mI={"X-Client-Info":`storage-js/${pI}`};var Id=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class gI{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},mI),n),this.fetch=aN(r)}listBuckets(){return Id(this,void 0,void 0,function*(){try{return{data:yield z0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Vr(t))return{data:null,error:t};throw t}})}getBucket(t){return Id(this,void 0,void 0,function*(){try{return{data:yield z0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Id(this,void 0,void 0,function*(){try{return{data:yield ac(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Id(this,void 0,void 0,function*(){try{return{data:yield uI(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Vr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Id(this,void 0,void 0,function*(){try{return{data:yield ac(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Id(this,void 0,void 0,function*(){try{return{data:yield oN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Vr(n))return{data:null,error:n};throw n}})}}class vI extends gI{constructor(t,n={},r){super(t,n,r)}from(t){return new hI(this.url,this.headers,t,this.fetch)}}const yI="2.46.1";let kh="";typeof Deno<"u"?kh="deno":typeof document<"u"?kh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kh="react-native":kh="node";const wI={"X-Client-Info":`supabase-js-${kh}/${yI}`},xI={headers:wI},bI={schema:"public"},_I={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SI={};var NI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const jI=e=>{let t;return e?t=e:typeof fetch>"u"?t=HS:t=fetch,(...n)=>t(...n)},kI=()=>typeof Headers>"u"?VS:Headers,EI=(e,t,n)=>{const r=jI(n),i=kI();return(s,a)=>NI(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var CI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};function AI(e){return e.replace(/\/$/,"")}function LI(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:l,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},f),s),accessToken:()=>CI(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const lN="2.65.1",PI="http://localhost:9999",TI="supabase.auth.token",II={"X-Client-Info":`gotrue-js/${lN}`},Hb=10,J2="X-Supabase-Api-Version",cN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function DI(e){return Math.round(Date.now()/1e3)+e}function OI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Na=()=>typeof document<"u",pu={tested:!1,writable:!1},Fh=()=>{if(!Na())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pu.tested)return pu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),pu.tested=!0,pu.writable=!0}catch{pu.tested=!0,pu.writable=!1}return pu.writable};function gv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const uN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},MI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",dN=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Im=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dm=async(e,t)=>{await e.removeItem(t)};function RI(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,l,c,f,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)a=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),f=t.indexOf(e.charAt(p++)),r=a<<2|l>>4,i=(l&15)<<4|c>>2,s=(c&3)<<6|f,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),f!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Ig{constructor(){this.promise=new Ig.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ig.promiseConstructor=Promise;function Vb(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(RI(r))}async function FI(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $I(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function BI(e){return("0"+e.toString(16)).substr(-2)}function UI(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,BI).join("")}async function zI(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function qI(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function WI(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await zI(e);return qI(n)}async function Dd(e,t,n=!1){const r=UI();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await dN(e,`${t}-code-verifier`,i);const s=await WI(r);return[s,r===s?"plain":"s256"]}const HI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VI(e){const t=e.headers.get(J2);if(!t||!t.match(HI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class A5 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Gt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class GI extends A5{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function YI(e){return Gt(e)&&e.name==="AuthApiError"}class fN extends A5{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Vu extends A5{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class nc extends Vu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function KI(e){return Gt(e)&&e.name==="AuthSessionMissingError"}class vv extends Vu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Om extends Vu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mm extends Vu{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gb extends Vu{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class X2 extends Vu{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function yv(e){return Gt(e)&&e.name==="AuthRetryableFetchError"}class Yb extends Vu{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var JI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XI=[502,503,504];async function Kb(e){var t;if(!MI(e))throw new X2(wu(e),0);if(XI.includes(e.status))throw new X2(wu(e),e.status);let n;try{n=await e.json()}catch(s){throw new fN(wu(s),s)}let r;const i=VI(e);if(i&&i.getTime()>=cN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yb(wu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new nc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Yb(wu(n),e.status,n.weak_password.reasons);throw new GI(wu(n),e.status||500,r)}const QI=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function rn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[J2]||(s[J2]=cN["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ZI(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ZI(e,t,n,r,i,s){const a=QI(t,r,i,s);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new X2(wu(c),0)}if(l.ok||await Kb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Kb(c)}}function rc(e){var t;let n=null;rD(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=DI(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Jb(e){const t=rc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function dc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function eD(e){return{data:e,error:null}}function tD(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=JI(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function nD(e){return e}function rD(e){return e.access_token&&e.refresh_token&&e.expires_in}var iD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class sD{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=uN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await rn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await rn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:dc})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=iD(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await rn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:tD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Gt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await rn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dc})}catch(n){if(Gt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,l,c;try{const f={nextPage:null,lastPage:0,total:0},p=await rn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:nD});if(p.error)throw p.error;const m=await p.json(),w=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const j=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);f[`${k}Page`]=j}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(Gt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){try{return await rn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dc})}catch(n){if(Gt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await rn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:dc})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await rn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:dc})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await rn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await rn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}}}const aD={getItem:e=>Fh()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Fh()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Fh()&&globalThis.localStorage.removeItem(e)}};function Xb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function oD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Od={debug:!!(globalThis&&Fh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class lD extends hN{}async function cD(e,t,n){Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Od.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Od.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}oD();const uD={url:PI,storageKey:TI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:II,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},vh=30*1e3,Qb=3;async function Zb(e,t,n){return await n()}class up{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=up.nextInstanceID,up.nextInstanceID+=1,this.instanceID>0&&Na()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},uD),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new sD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uN(i.fetch),this.lock=i.lock||Zb,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Na()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cD:this.lock=Zb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Fh()?this.storage=aD:(this.memoryStorage={},this.storage=Xb(this.memoryStorage)):(this.memoryStorage={},this.storage=Xb(this.memoryStorage)),Na()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Na()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Gt(t)?{error:t}:{error:new fN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:rc}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(Gt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:p,password:m,options:w}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await Dd(this.storage,this.storageKey)),s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:p,password:m,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:g,code_challenge_method:N},xform:rc})}else if("phone"in t){const{phone:p,password:m,options:w}=t;s=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(i=w==null?void 0:w.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:rc})}else throw new Om("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(Gt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:l}=t;n=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jb})}else if("phone"in t){const{phone:s,password:a,options:l}=t;n=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jb})}else throw new Om("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Im(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await rn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:rc});if(await Dm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new vv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Gt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,l=await rn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:rc}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vv}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:l,options:c}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Dd(this.storage,this.storageKey));const{error:m}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:f,error:p}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Om("You must provide either an email or phone number.")}catch(l){if(Gt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await rn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:rc});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Gt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Dd(this.storage,this.storageKey)),await rn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:eD})}catch(s){if(Gt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new nc;const{error:i}=await rn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Gt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await rn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:l}=await rn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Om("You must provide either an email or phone number and a type")}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Im(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,p))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dc}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nc}:await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:dc})})}catch(n){if(Gt(n))return KI(n)&&(await this._removeSession(),await Dm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new nc;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Dd(this.storage,this.storageKey));const{data:f,error:p}=await rn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:dc});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Vb(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new nc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Vb(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Gt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new nc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!Na())throw new Mm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Mm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Gb("Not a valid PKCE flow url.");const n=gv(window.location.href);if(t){if(!n.code)throw new Gb("No code detected.");const{data:S,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Mm(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:f}=n;if(!s||!l||!a||!f)throw new Mm("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let w=p+m;c&&(w=parseInt(c));const g=w-p;g*1e3<=vh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const N=w-m;p-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,w,p):p-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,w,p);const{data:j,error:k}=await this._getUser(s);if(k)throw k;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:w,refresh_token:a,token_type:f,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(Gt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=gv(window.location.href);return!!(Na()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=gv(window.location.href),n=await Im(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(YI(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Dm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=OI(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Dd(this.storage,this.storageKey,!0));try{return await rn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Gt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,c,f,p;const{data:m,error:w}=s;if(w)throw w;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await rn(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Na()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Gt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await rn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await $I(async i=>(i>0&&await FI(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await rn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rc})),(i,s)=>{const a=200*Math.pow(2,i);return s&&yv(s)&&Date.now()+a-r<vh})}catch(r){if(this._debug(n,"error",r),Gt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Na()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Im(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+Hb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Hb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),yv(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new nc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ig;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new nc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),Gt(s)){const a={session:null,error:s};return yv(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await dN(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Dm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Na()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/vh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${vh}ms, refresh threshold is ${Qb} ticks`),i<=Qb&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Na()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Dd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await rn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:f}=await rn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:l}=await rn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await rn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}up.nextInstanceID=0;const dD=up;class fD extends dD{constructor(t){super(t)}}var hD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class pD{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=AI(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:bI,realtime:SI,auth:Object.assign(Object.assign({},_I),{storageKey:c}),global:xI},p=LI(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=EI(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new zT(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new yT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vI(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return hD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:l,debug:c},f,p){var m;const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fD({url:this.authUrl,headers:Object.assign(Object.assign({},w),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:l,debug:c,fetch:p,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(t){return new rI(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mD=(e,t,n)=>new pD(e,t,n),gD="https://vrzgwnchqdxwgennshmu.supabase.co",vD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",et=mD(gD,vD,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://nimble-alfajores-99f196.netlify.app"}}),yD={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GENIUS_ACCESS_TOKEN:"your_genius_token_here",VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173"},e_=e=>{let t;const n=new Set,r=(p,m)=>{const w=typeof p=="function"?p(t):p;if(!Object.is(w,t)){const g=t;t=m??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(N=>N(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(yD?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,c);return c},wD=e=>e?e_(e):e_;var pN={exports:{}},mN={},gN={exports:{}},vN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sf=C;function xD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bD=typeof Object.is=="function"?Object.is:xD,_D=Sf.useState,SD=Sf.useEffect,ND=Sf.useLayoutEffect,jD=Sf.useDebugValue;function kD(e,t){var n=t(),r=_D({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return ND(function(){i.value=n,i.getSnapshot=t,wv(i)&&s({inst:i})},[e,n,t]),SD(function(){return wv(i)&&s({inst:i}),e(function(){wv(i)&&s({inst:i})})},[e]),jD(n),n}function wv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bD(e,n)}catch{return!0}}function ED(e,t){return t()}var CD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ED:kD;vN.useSyncExternalStore=Sf.useSyncExternalStore!==void 0?Sf.useSyncExternalStore:CD;gN.exports=vN;var AD=gN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=C,LD=AD;function PD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TD=typeof Object.is=="function"?Object.is:PD,ID=LD.useSyncExternalStore,DD=Dg.useRef,OD=Dg.useEffect,MD=Dg.useMemo,RD=Dg.useDebugValue;mN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=DD(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=MD(function(){function c(g){if(!f){if(f=!0,p=g,g=r(g),i!==void 0&&a.hasValue){var N=a.value;if(i(N,g))return m=N}return m=g}if(N=m,TD(p,g))return N;var j=r(g);return i!==void 0&&i(N,j)?N:(p=g,m=j)}var f=!1,p,m,w=n===void 0?null:n;return[function(){return c(t())},w===null?void 0:function(){return c(w())}]},[t,n,r,i]);var l=ID(e,s[0],s[1]);return OD(function(){a.hasValue=!0,a.value=l},[l]),RD(l),l};pN.exports=mN;var FD=pN.exports;const $D=v3(FD),yN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GENIUS_ACCESS_TOKEN:"your_genius_token_here",VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173"},{useDebugValue:BD}=pt,{useSyncExternalStoreWithSelector:UD}=$D;let t_=!1;const zD=e=>e;function qD(e,t=zD,n){(yN?"production":void 0)!=="production"&&n&&!t_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),t_=!0);const r=UD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return BD(r),r}const n_=e=>{(yN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?wD(e):e,n=(r,i)=>qD(t,r,i);return Object.assign(n,t),n},WD=e=>e?n_(e):n_,Rs=WD(e=>({user:null,session:null,loading:!0,setUser:t=>{console.log("Setting user in store:",t),e({user:t})},setSession:t=>{console.log("Setting session in store:",t),e({session:t})},signOut:async()=>{try{await et.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));class HD{constructor(){this.clientId="2f84f95d5e0943afb6e72b6758adedd3",this.redirectUri="http://127.0.0.1:5173",this.scopes=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-modify-playback-state","user-read-playback-state","streaming"].join(" "),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.loadTokensFromStorage(),console.log("🎵 Spotify Service Config:",{clientId:this.clientId?this.clientId.substring(0,8)+"...":"NOT SET",redirectUri:this.redirectUri||"NOT SET",hasClientId:!!this.clientId,hasRedirectUri:!!this.redirectUri})}async getAuthUrl(){console.log("🎵 getAuthUrl called, generating new auth URL..."),this.isProcessingAuth?console.log("🎵 Auth in progress, keeping existing state"):(localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log("🎵 Cleared previous auth state"));const t=this.generateRandomString(16),n=this.generateRandomString(128);localStorage.setItem("spotify_return_url",window.location.href),localStorage.setItem("spotify_auth_state",t),localStorage.setItem("spotify_code_verifier",n),console.log("🎵 Generated new auth state:",t.substring(0,8)+"..."),console.log("🎵 Using redirect URI:",this.redirectUri);const r=await this.generateCodeChallenge(n);return`https://accounts.spotify.com/authorize?${new URLSearchParams({response_type:"code",client_id:this.clientId,scope:this.scopes,redirect_uri:this.redirectUri,state:t,code_challenge_method:"S256",code_challenge:r}).toString()}`}async handleAuthCallback(t,n){if(this.isProcessingAuth)return console.log("🎵 Already processing auth, skipping..."),!1;console.log("🎵 SpotifyService: Starting handleAuthCallback..."),this.isProcessingAuth=!0;try{const r=localStorage.getItem("spotify_auth_state"),i=localStorage.getItem("spotify_code_verifier");if(console.log("🎵 SpotifyService: Auth callback data:",{receivedState:n?n.substring(0,10)+"...":"NULL",storedState:r?r.substring(0,10)+"...":"NULL",hasCodeVerifier:!!i,codeLength:t==null?void 0:t.length,receivedStateLength:n==null?void 0:n.length,storedStateLength:r==null?void 0:r.length,statesMatch:n===r}),!r)throw console.error("❌ No stored state found"),new Error("No stored state found");if(n!==r)throw console.error("❌ State mismatch:",{received:n,stored:r,receivedLength:n==null?void 0:n.length,storedLength:r==null?void 0:r.length,match:n===r}),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),new Error("State mismatch - auth state was corrupted. Please try connecting to Spotify again.");if(!i)throw console.error("❌ Code verifier not found"),new Error("Code verifier not found");console.log("🎵 SpotifyService: All validations passed, making token request...");const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:this.redirectUri,client_id:this.clientId,code_verifier:i})});if(console.log("🎵 SpotifyService: Token request response status:",s.status),!s.ok){const l=await s.text();throw console.error("❌ SpotifyService: Token request failed:",s.status,l),new Error(`Failed to exchange code for tokens: ${s.status} ${l}`)}console.log("🎵 SpotifyService: Token request successful, parsing response...");const a=await s.json();return console.log("🎵 SpotifyService: Token data received:",{hasAccessToken:!!a.access_token,hasRefreshToken:!!a.refresh_token,expiresIn:a.expires_in}),this.accessToken=a.access_token,this.refreshToken=a.refresh_token,this.tokenExpiry=Date.now()+a.expires_in*1e3,console.log("🎵 SpotifyService: Tokens stored in memory, saving to localStorage..."),this.saveTokensToStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log("🎵 SpotifyService: Auth callback completed successfully!"),!0}catch(r){return console.error("Error in Spotify auth callback:",r),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),!1}finally{this.isProcessingAuth=!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken,client_id:this.clientId})});if(!t.ok)throw new Error("Failed to refresh access token");const n=await t.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,n.refresh_token&&(this.refreshToken=n.refresh_token),this.saveTokensToStorage(),!0}catch(t){return console.error("Error refreshing access token:",t),this.logout(),!1}}async ensureValidToken(){return this.accessToken?this.tokenExpiry&&Date.now()>=this.tokenExpiry-6e4?await this.refreshAccessToken():!0:!1}async apiRequest(t,n={}){if(!await this.ensureValidToken())throw new Error("No valid Spotify token available");const r=await fetch(`https://api.spotify.com/v1${t}`,{...n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",...n.headers}});if(!r.ok){if(r.status===401&&await this.refreshAccessToken())return this.apiRequest(t,n);throw new Error(`Spotify API error: ${r.status} ${r.statusText}`)}return r.headers.get("content-length")==="0"||r.status===204?null:r.json()}async getCurrentUser(){return this.apiRequest("/me")}async searchTracks(t,n=20){const r=new URLSearchParams({q:t,type:"track",limit:n.toString()});return(await this.apiRequest(`/search?${r}`)).tracks.items}async getTrack(t){return this.apiRequest(`/tracks/${t}`)}async getAudioFeatures(t){return this.apiRequest(`/audio-features/${t}`)}async createPlaylist(t,n,r=!1){const i=await this.getCurrentUser();return this.apiRequest(`/users/${i.id}/playlists`,{method:"POST",body:JSON.stringify({name:t,description:n,public:r})})}async addTracksToPlaylist(t,n){await this.apiRequest(`/playlists/${t}/tracks`,{method:"POST",body:JSON.stringify({uris:n})})}async playTrack(t,n){const r={uris:[t]};n&&(r.device_id=n),await this.apiRequest("/me/player/play",{method:"PUT",body:JSON.stringify(r)})}async pausePlayback(){await this.apiRequest("/me/player/pause",{method:"PUT"})}async resumePlayback(){await this.apiRequest("/me/player/play",{method:"PUT"})}async getPlaybackState(){try{return await this.apiRequest("/me/player")}catch{return null}}async getUserPlaylists(t=50){return(await this.apiRequest(`/me/playlists?limit=${t}`)).items}async getPlaylistTracks(t,n=100){return(await this.apiRequest(`/playlists/${t}/tracks?limit=${n}`)).items.map(i=>i.track)}isAuthenticated(){return!!(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}logout(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.clearTokensFromStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}clearAuthState(){console.log("🎵 Clearing Spotify auth state manually"),this.isProcessingAuth=!1,localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}async generateCodeChallenge(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(r)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}generateRandomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((i,s)=>i+n[s%n.length],"")}saveTokensToStorage(){var i;console.log("🎵 SpotifyService: Saving tokens to storage...",{hasAccessToken:!!this.accessToken,hasRefreshToken:!!this.refreshToken,hasTokenExpiry:!!this.tokenExpiry,accessTokenLength:(i=this.accessToken)==null?void 0:i.length,tokenExpiry:this.tokenExpiry}),this.accessToken&&(localStorage.setItem("spotify_access_token",this.accessToken),console.log("✅ Access token saved to localStorage")),this.refreshToken&&(localStorage.setItem("spotify_refresh_token",this.refreshToken),console.log("✅ Refresh token saved to localStorage")),this.tokenExpiry&&(localStorage.setItem("spotify_token_expiry",this.tokenExpiry.toString()),console.log("✅ Token expiry saved to localStorage"));const t=localStorage.getItem("spotify_access_token"),n=localStorage.getItem("spotify_refresh_token"),r=localStorage.getItem("spotify_token_expiry");console.log("🎵 Verification - tokens in localStorage:",{hasAccessToken:!!t,hasRefreshToken:!!n,hasTokenExpiry:!!r,accessTokenMatches:t===this.accessToken,refreshTokenMatches:n===this.refreshToken})}loadTokensFromStorage(){this.accessToken=localStorage.getItem("spotify_access_token"),this.refreshToken=localStorage.getItem("spotify_refresh_token");const t=localStorage.getItem("spotify_token_expiry");this.tokenExpiry=t?parseInt(t):null}clearTokensFromStorage(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry")}}const $n=new HD;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Yn=(e,t)=>{const n=C.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...f},p)=>C.createElement("svg",{ref:p,...VD,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${GD(e)}`,l].join(" "),...f},[...t.map(([m,w])=>C.createElement(m,w)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Yn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Yn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Yn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Yn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Yn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Yn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Yn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Yn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=Yn("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Yn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=Yn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=Yn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Yn("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Yn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Yn("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Yn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Yn("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Yn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Yn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Yn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=Yn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Yn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Yn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Yn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Yn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ZD(){const[e,t]=C.useState([]),[n,r]=C.useState(!1),i=$a(),{user:s}=Rs(),[a,l]=C.useState(null);C.useEffect(()=>{if(s)return console.log("Inicializando NotificationBell para usuario:",s.id),c(),f(),()=>{a&&(console.log("Limpiando suscripción de notificaciones"),a.unsubscribe())}},[s]);const c=async()=>{const{data:m,error:w}=await et.from("notifications").select("*").eq("user_id",s==null?void 0:s.id).eq("read",!1).order("created_at",{ascending:!1});if(w){console.error("Error fetching notifications:",w);return}t(m||[])},f=async()=>{try{a&&await a.unsubscribe(),console.log("Configurando suscripción en tiempo real para:",s==null?void 0:s.id);const m=et.channel(`notifications:${s==null?void 0:s.id}`,{config:{broadcast:{self:!0}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Nueva notificación recibida:",w);const g=w.new;t(N=>[g,...N]),Le.custom(N=>d.jsxs("div",{className:`${N.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[d.jsx(i_,{className:"h-6 w-6 text-indigo-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:g.title}),d.jsx("p",{className:"text-sm text-gray-500",children:g.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Notificación actualizada:",w),t(g=>g.map(N=>N.id===w.new.id?w.new:N))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Notificación eliminada:",w),t(g=>g.filter(N=>N.id!==w.old.id))}),console.log("Iniciando suscripción..."),await m.subscribe(w=>{console.log("Estado de suscripción:",w)}),l(m)}catch(m){console.error("Error al configurar suscripción en tiempo real:",m)}},p=async(m,w)=>{try{const{error:g}=await et.rpc("handle_group_invitation",{p_group_member_id:m.data.group_member_id,p_accept:w});if(g)throw g;await et.from("notifications").update({read:!0}).eq("id",m.id),t(N=>N.filter(j=>j.id!==m.id)),Le.success(w?"Invitación aceptada":"Invitación rechazada"),w&&i(`/group/${m.data.group_id}`)}catch(g){Le.error(g.message)}};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[d.jsx(i_,{className:"w-6 h-6"}),e.length>0&&d.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:d.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?d.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(m=>d.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:m.title}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.message}),m.type==="group_invitation"&&d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>p(m,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),d.jsx("button",{onClick:()=>p(m,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},m.id))})})]})}function eO(){const{user:e,signOut:t}=Rs(),n=$a(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return d.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs(Ec,{to:"/",className:"flex items-center space-x-2 min-w-0",children:[d.jsx(XD,{className:"h-6 w-6 sm:h-8 sm:w-8 flex-shrink-0"}),d.jsx("span",{className:"font-bold text-lg sm:text-xl truncate",children:"Band Manager"})]}),d.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0",children:[e&&d.jsx(ZD,{}),e?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-xs sm:text-sm hidden md:block truncate max-w-32 lg:max-w-none",children:e.email}),d.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[d.jsx(Z2,{className:"h-4 w-4 sm:h-5 sm:w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]}):d.jsxs("div",{className:"flex space-x-2 sm:space-x-4",children:[d.jsx(Ec,{to:"/login",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Login"}),d.jsx(Ec,{to:"/register",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Register"}),!1]})]})]})})})}function Gn({label:e,error:t,className:n="",...r}){return d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),d.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&d.jsx("p",{className:"text-sm text-red-600",children:t})]})}function yt({children:e,loading:t,variant:n="primary",fullWidth:r,size:i="md",className:s="",...a}){const l="flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={sm:"px-2 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},f={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return d.jsxs("button",{className:`${l} ${c[i]} ${f[n]} ${r?"w-full":""} ${s}`,disabled:t,...a,children:[t&&d.jsx(al,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function tO(){var w;const[e,t]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),a=$a(),l=Fa(),c=(w=l.state)==null?void 0:w.returnTo,{user:f,setUser:p}=Rs();console.log("Login component state:",{returnTo:c,location:l}),C.useEffect(()=>{if(f){let g=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){console.log("🎵 Login: Detected Spotify callback in returnTo:",c);const N=new URL(c,window.location.origin),j=N.searchParams.get("code"),k=N.searchParams.get("state"),b=N.searchParams.get("error");j&&k?(console.log("🎵 Login: Extracting Spotify params and redirecting to root"),g=`/?code=${j}&state=${k}`):b?(console.log("🎵 Login: Spotify error detected:",b),g=`/?error=${b}`):g=N.pathname}console.log("User authenticated, redirecting to:",g),a(g,{replace:!0})}},[f,c,a]);const m=async g=>{g.preventDefault(),s(!0);try{const{data:N,error:j}=await et.auth.signInWithPassword({email:e,password:n});if(j)throw j;p(N.user),Le.success("Successfully logged in!");let k=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){console.log("🎵 Login: handleLogin detected Spotify callback in returnTo:",c);const b=new URL(c,window.location.origin),S=b.searchParams.get("code"),L=b.searchParams.get("state"),M=b.searchParams.get("error");S&&L?(console.log("🎵 Login: handleLogin extracting Spotify params and redirecting to root"),k=`/?code=${S}&state=${L}`):M?(console.log("🎵 Login: handleLogin Spotify error detected:",M),k=`/?error=${M}`):k=b.pathname}console.log("Login successful, redirecting to:",k),a(k,{replace:!0})}catch(N){Le.error(N.message||"Failed to login")}finally{s(!1)}};return f?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsx(Gn,{label:"Email",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"your@email.com"}),d.jsx(Gn,{label:"Password",type:"password",value:n,onChange:g=>r(g.target.value),required:!0,placeholder:"••••••••"}),d.jsx(yt,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Ec,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"¿Olvidaste tu contraseña?"})}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",d.jsx(Ec,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function nO(){const[e]=US(),t=e.get("email");e.get("token");const[n,r]=C.useState(t||""),[i,s]=C.useState(""),[a,l]=C.useState(""),[c,f]=C.useState(!1),p=$a(),{user:m}=Rs();C.useEffect(()=>{m&&p("/")},[m,p]);const w=async g=>{g.preventDefault(),f(!0);try{const{data:N,error:j}=await et.auth.signUp({email:n,password:i,options:{data:{name:a,role:"user"}}});if(j)throw j;if(N.user){const{data:k,error:b}=await et.rpc("create_new_user",{user_id:N.user.id,user_email:n,user_name:a,user_role:"user"});if(b)throw b;Le.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(N){console.error("Registration error:",N),N.message.includes("User already registered")?Le.error("This email is already registered. Please try logging in instead."):N.message.includes("rate limit")?Le.error("Too many registration attempts. Please try again in a few minutes."):Le.error("Registration failed. Please try again.")}finally{f(!1)}};return m?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsx(Gn,{label:"Name",type:"text",value:a,onChange:g=>l(g.target.value),required:!0,placeholder:"John Doe"}),d.jsx(Gn,{label:"Email",type:"email",value:n,onChange:g=>r(g.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),d.jsx(Gn,{label:"Password",type:"password",value:i,onChange:g=>s(g.target.value),required:!0,placeholder:"••••••••",minLength:6}),d.jsx(yt,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),d.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",d.jsx(Ec,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var rO=Object.defineProperty,iO=(e,t,n)=>t in e?rO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xv=(e,t,n)=>(iO(e,typeof t!="symbol"?t+"":t,n),n);let sO=class{constructor(){xv(this,"current",this.detect()),xv(this,"handoffState","pending"),xv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Iu=new sO;function Mg(e){return Iu.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Rg(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function $c(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Rg(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=$c();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function P5(){let[e]=C.useState($c);return C.useEffect(()=>()=>e.dispose(),[e]),e}let Fi=(e,t)=>{Iu.isServer?C.useEffect(e,t):C.useLayoutEffect(e,t)};function Gu(e){let t=C.useRef(e);return Fi(()=>{t.current=e},[e]),t}let cr=function(e){let t=Gu(e);return pt.useCallback((...n)=>t.current(...n),[t])},aO=C.createContext(void 0);function oO(){return C.useContext(aO)}function ty(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Lc(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Lc),r}var G0=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(G0||{}),gc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(gc||{});function sa(){let e=cO();return C.useCallback(t=>lO({mergeRefs:e,...t}),[e])}function lO({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??uO;let c=xN(t,e);if(s)return Rm(c,n,r,a,l);let f=i??0;if(f&2){let{static:p=!1,...m}=c;if(p)return Rm(m,n,r,a,l)}if(f&1){let{unmount:p=!0,...m}=c;return Lc(p?0:1,{0(){return null},1(){return Rm({...m,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Rm(c,n,r,a,l)}function Rm(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=bv(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let w=!1,g=[];for(let[N,j]of Object.entries(t))typeof j=="boolean"&&(w=!0),j===!0&&g.push(N.replace(/([A-Z])/g,k=>`-${k.toLowerCase()}`));if(w){m["data-headlessui-state"]=g.join(" ");for(let N of g)m[`data-${N}`]=""}}if(s===C.Fragment&&(Object.keys(xu(c)).length>0||Object.keys(xu(m)).length>0))if(!C.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(xu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(xu(c)).concat(Object.keys(xu(m))).map(w=>`  - ${w}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(w=>`  - ${w}`).join(`
`)].join(`
`))}else{let w=p.props,g=w==null?void 0:w.className,N=typeof g=="function"?(...b)=>ty(g(...b),c.className):ty(g,c.className),j=N?{className:N}:{},k=xN(p.props,xu(bv(c,["ref"])));for(let b in m)b in k&&delete m[b];return C.cloneElement(p,Object.assign({},k,m,f,{ref:i(dO(p),f.ref)},j))}return C.createElement(s,Object.assign({},bv(c,["ref"]),s!==C.Fragment&&f,s!==C.Fragment&&m),p)}function cO(){let e=C.useRef([]),t=C.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function uO(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function xN(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function fs(e){var t;return Object.assign(C.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function xu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function bv(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function dO(e){return pt.version.split(".")[0]>="19"?e.props.ref:e.ref}let fO="span";var Y0=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Y0||{});function hO(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return sa()({ourProps:s,theirProps:i,slot:{},defaultTag:fO,name:"Hidden"})}let ny=fs(hO),bN=Symbol();function pO(e,t=!0){return Object.assign(e,{[bN]:t})}function xo(...e){let t=C.useRef(e);C.useEffect(()=>{t.current=e},[e]);let n=cr(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[bN]))?void 0:n}let T5=C.createContext(null);T5.displayName="DescriptionContext";function _N(){let e=C.useContext(T5);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,_N),t}return e}function mO(){let[e,t]=C.useState([]);return[e.length>0?e.join(" "):void 0,C.useMemo(()=>function(n){let r=cr(s=>(t(a=>[...a,s]),()=>t(a=>{let l=a.slice(),c=l.indexOf(s);return c!==-1&&l.splice(c,1),l}))),i=C.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return pt.createElement(T5.Provider,{value:i},n.children)},[t])]}let gO="p";function vO(e,t){let n=C.useId(),r=oO(),{id:i=`headlessui-description-${n}`,...s}=e,a=_N(),l=xo(t);Fi(()=>a.register(i),[i,a.register]);let c=r||!1,f=C.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),p={ref:l,...a.props,id:i};return sa()({ourProps:p,theirProps:s,slot:f,defaultTag:gO,name:a.name||"Description"})}let yO=fs(vO),wO=Object.assign(yO,{});var SN=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(SN||{});let xO=C.createContext(()=>{});function bO({value:e,children:t}){return pt.createElement(xO.Provider,{value:e},t)}let _O=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function NN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=t[i].call(n,...s);a&&(n=a,r.forEach(l=>l()))}}}function jN(e){return C.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let SO=new _O(()=>NN(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Pf(e,t){let n=SO.get(t),r=C.useId(),i=jN(n);if(Fi(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let ry=new Map,$h=new Map;function c_(e){var t;let n=(t=$h.get(e))!=null?t:0;return $h.set(e,n+1),n!==0?()=>u_(e):(ry.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>u_(e))}function u_(e){var t;let n=(t=$h.get(e))!=null?t:1;if(n===1?$h.delete(e):$h.set(e,n-1),n!==1)return;let r=ry.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,ry.delete(e))}function NO(e,{allowed:t,disallowed:n}={}){let r=Pf(e,"inert-others");Fi(()=>{var i,s;if(!r)return;let a=$c();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(c_(c));let l=(s=t==null?void 0:t())!=null?s:[];for(let c of l){if(!c)continue;let f=Mg(c);if(!f)continue;let p=c.parentElement;for(;p&&p!==f.body;){for(let m of p.children)l.some(w=>m.contains(w))||a.add(c_(m));p=p.parentElement}}return a.dispose},[r,t,n])}function jO(e,t,n){let r=Gu(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});C.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let s=$c();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[t,r,e])}let K0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),kO=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ko=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Ko||{}),iy=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(iy||{}),EO=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(EO||{});function CO(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(K0)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function AO(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(kO)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var kN=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(kN||{});function LO(e,t=0){var n;return e===((n=Mg(e))==null?void 0:n.body)?!1:Lc(t,{0(){return e.matches(K0)},1(){let r=e;for(;r!==null;){if(r.matches(K0))return!0;r=r.parentElement}return!1}})}var PO=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(PO||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zo(e){e==null||e.focus({preventScroll:!0})}let TO=["textarea","input"].join(",");function IO(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,TO))!=null?n:!1}function DO(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Bh(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?DO(e):e:t&64?AO(e):CO(e);i.length>0&&a.length>1&&(a=a.filter(g=>!i.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===g:N===g))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,m=a.length,w;do{if(p>=m||p+m<=0)return 0;let g=c+p;if(t&16)g=(g+m)%m;else{if(g<0)return 3;if(g>=m)return 1}w=a[g],w==null||w.focus(f),p+=l}while(w!==s.activeElement);return t&6&&IO(w)&&w.select(),2}function EN(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function OO(){return/Android/gi.test(window.navigator.userAgent)}function MO(){return EN()||OO()}function yh(e,t,n,r){let i=Gu(n);C.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function CN(e,t,n,r){let i=Gu(n);C.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const d_=30;function RO(e,t,n){let r=Pf(e,"outside-click"),i=Gu(n),s=C.useCallback(function(c,f){if(c.defaultPrevented)return;let p=f(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let m=function w(g){return typeof g=="function"?w(g()):Array.isArray(g)||g instanceof Set?g:[g]}(t);for(let w of m)if(w!==null&&(w.contains(p)||c.composed&&c.composedPath().includes(w)))return;return!LO(p,kN.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),a=C.useRef(null);yh(r,"pointerdown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),yh(r,"mousedown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),yh(r,"click",c=>{MO()||a.current&&(s(c,()=>a.current),a.current=null)},!0);let l=C.useRef({x:0,y:0});yh(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),yh(r,"touchend",c=>{let f={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=d_||Math.abs(f.y-l.current.y)>=d_))return s(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),CN(r,"blur",c=>s(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function jp(...e){return C.useMemo(()=>Mg(...e),[...e])}function AN(e,t,n,r){let i=Gu(n);C.useEffect(()=>{e=e??window;function s(a){i.current(a)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function FO(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function $O(){return EN()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=$c();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),p=e.querySelector(f);p&&!r(p)&&(a=p)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function BO(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function UO(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Lu=NN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:$c(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:UO(n)},i=[$O(),FO(),BO()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Lu.subscribe(()=>{let e=Lu.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Lu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Lu.dispatch("TEARDOWN",n)}});function zO(e,t,n=()=>({containers:[]})){let r=jN(Lu),i=t?r.get(t):void 0,s=i?i.count>0:!1;return Fi(()=>{if(!(!t||!e))return Lu.dispatch("PUSH",t,n),()=>Lu.dispatch("POP",t,n)},[e,t]),s}function qO(e,t,n=()=>[document.body]){let r=Pf(e,"scroll-lock");zO(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function WO(e=0){let[t,n]=C.useState(e),r=C.useCallback(c=>n(c),[t]),i=C.useCallback(c=>n(f=>f|c),[t]),s=C.useCallback(c=>(t&c)===c,[t]),a=C.useCallback(c=>n(f=>f&~c),[n]),l=C.useCallback(c=>n(f=>f^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:l}}var HO={},f_,h_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((f_=process==null?void 0:HO)==null?void 0:f_.NODE_ENV)==="test"&&typeof((h_=Element==null?void 0:Element.prototype)==null?void 0:h_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var VO=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(VO||{});function GO(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function YO(e,t,n,r){let[i,s]=C.useState(n),{hasFlag:a,addFlag:l,removeFlag:c}=WO(e&&i?3:0),f=C.useRef(!1),p=C.useRef(!1),m=P5();return Fi(()=>{var w;if(e){if(n&&s(!0),!t){n&&l(3);return}return(w=r==null?void 0:r.start)==null||w.call(r,n),KO(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){p.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var g;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,c(7),n||s(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,m]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function KO(e,{prepare:t,run:n,done:r,inFlight:i}){let s=$c();return XO(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(JO(e,r))})}),s.dispose}function JO(e,t){var n,r;let i=$c();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{s||t()}),i.dispose)}function XO(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function I5(e,t){let n=C.useRef([]),r=cr(e);C.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}let Fg=C.createContext(null);Fg.displayName="OpenClosedContext";var La=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(La||{});function $g(){return C.useContext(Fg)}function QO({value:e,children:t}){return pt.createElement(Fg.Provider,{value:e},t)}function ZO({children:e}){return pt.createElement(Fg.Provider,{value:null},e)}function eM(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let fc=[];eM(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||fc[0]===t.target)return;let n=t.target;n=n.closest(K0),fc.unshift(n??t.target),fc=fc.filter(r=>r!=null&&r.isConnected),fc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function LN(e){let t=cr(e),n=C.useRef(!1);C.useEffect(()=>(n.current=!1,()=>{n.current=!0,Rg(()=>{n.current&&t()})}),[t])}function tM(){let e=typeof document>"u";return"useSyncExternalStore"in Hv?(t=>t.useSyncExternalStore)(Hv)(()=>()=>{},()=>!1,()=>!e):!1}function kp(){let e=tM(),[t,n]=C.useState(Iu.isHandoffComplete);return t&&Iu.isHandoffComplete===!1&&n(!1),C.useEffect(()=>{t!==!0&&n(!0)},[t]),C.useEffect(()=>Iu.handoff(),[]),e?!1:t}let PN=C.createContext(!1);function nM(){return C.useContext(PN)}function p_(e){return pt.createElement(PN.Provider,{value:e.force},e.children)}function rM(e){let t=nM(),n=C.useContext(IN),r=jp(e),[i,s]=C.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(Iu.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return C.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),C.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),i}let TN=C.Fragment,iM=fs(function(e,t){let n=e,r=C.useRef(null),i=xo(pO(m=>{r.current=m}),t),s=jp(r),a=rM(r),[l]=C.useState(()=>{var m;return Iu.isServer?null:(m=s==null?void 0:s.createElement("div"))!=null?m:null}),c=C.useContext(sy),f=kp();Fi(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Fi(()=>{if(l&&c)return c.register(l)},[c,l]),LN(()=>{var m;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let p=sa();return f?!a||!l?null:Au.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:TN,name:"Portal"}),l):null});function sM(e,t){let n=xo(t),{enabled:r=!0,...i}=e,s=sa();return r?pt.createElement(iM,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:TN,name:"Portal"})}let aM=C.Fragment,IN=C.createContext(null);function oM(e,t){let{target:n,...r}=e,i={ref:xo(t)},s=sa();return pt.createElement(IN.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:aM,name:"Popover.Group"}))}let sy=C.createContext(null);function lM(){let e=C.useContext(sy),t=C.useRef([]),n=cr(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=cr(s=>{let a=t.current.indexOf(s);a!==-1&&t.current.splice(a,1),e&&e.unregister(s)}),i=C.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,C.useMemo(()=>function({children:s}){return pt.createElement(sy.Provider,{value:i},s)},[i])]}let cM=fs(sM),DN=fs(oM),uM=Object.assign(cM,{Group:DN});function dM(e,t=typeof document<"u"?document.defaultView:null,n){let r=Pf(e,"escape");AN(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===SN.Escape&&n(i))})}function fM(){var e;let[t]=C.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=C.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Fi(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function hM({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=jp(n),i=cr(()=>{var s,a;let l=[];for(let c of e)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||l.some(f=>c.contains(f))||l.push(c));return l});return{resolveContainers:i,contains:cr(s=>i().some(a=>a.contains(s)))}}let ON=C.createContext(null);function m_({children:e,node:t}){let[n,r]=C.useState(null),i=MN(t??n);return pt.createElement(ON.Provider,{value:i},e,i===null&&pt.createElement(ny,{features:Y0.Hidden,ref:s=>{var a,l;if(s){for(let c of(l=(a=Mg(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(s)){r(c);break}}}}))}function MN(e=null){var t;return(t=C.useContext(ON))!=null?t:e}function D5(){let e=C.useRef(!1);return Fi(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Eh=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Eh||{});function pM(){let e=C.useRef(0);return CN(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function RN(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let mM="div";var Nu=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Nu||{});function gM(e,t){let n=C.useRef(null),r=xo(n,t),{initialFocus:i,initialFocusFallback:s,containers:a,features:l=15,...c}=e;kp()||(l=0);let f=jp(n);xM(l,{ownerDocument:f});let p=bM(l,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:s});_M(l,{ownerDocument:f,container:n,containers:a,previousActiveElement:p});let m=pM(),w=cr(S=>{let L=n.current;L&&(M=>M())(()=>{Lc(m.current,{[Eh.Forwards]:()=>{Bh(L,Ko.First,{skipElements:[S.relatedTarget,s]})},[Eh.Backwards]:()=>{Bh(L,Ko.Last,{skipElements:[S.relatedTarget,s]})}})})}),g=Pf(!!(l&2),"focus-trap#tab-lock"),N=P5(),j=C.useRef(!1),k={ref:r,onKeyDown(S){S.key=="Tab"&&(j.current=!0,N.requestAnimationFrame(()=>{j.current=!1}))},onBlur(S){if(!(l&4))return;let L=RN(a);n.current instanceof HTMLElement&&L.add(n.current);let M=S.relatedTarget;M instanceof HTMLElement&&M.dataset.headlessuiFocusGuard!=="true"&&(FN(L,M)||(j.current?Bh(n.current,Lc(m.current,{[Eh.Forwards]:()=>Ko.Next,[Eh.Backwards]:()=>Ko.Previous})|Ko.WrapAround,{relativeTo:S.target}):S.target instanceof HTMLElement&&Zo(S.target)))}},b=sa();return pt.createElement(pt.Fragment,null,g&&pt.createElement(ny,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:Y0.Focusable}),b({ourProps:k,theirProps:c,defaultTag:mM,name:"FocusTrap"}),g&&pt.createElement(ny,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:Y0.Focusable}))}let vM=fs(gM),yM=Object.assign(vM,{features:Nu});function wM(e=!0){let t=C.useRef(fc.slice());return I5(([n],[r])=>{r===!0&&n===!1&&Rg(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=fc.slice())},[e,fc,t]),cr(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function xM(e,{ownerDocument:t}){let n=!!(e&8),r=wM(n);I5(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Zo(r())},[n]),LN(()=>{n&&Zo(r())})}function bM(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=C.useRef(null),a=Pf(!!(e&1),"focus-trap#initial-focus"),l=D5();return I5(()=>{if(e===0)return;if(!a){i!=null&&i.current&&Zo(i.current);return}let c=n.current;c&&Rg(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){s.current=f;return}}else if(c.contains(f)){s.current=f;return}if(r!=null&&r.current)Zo(r.current);else{if(e&16){if(Bh(c,Ko.First|Ko.AutoFocus)!==iy.Error)return}else if(Bh(c,Ko.First)!==iy.Error)return;if(i!=null&&i.current&&(Zo(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,a,e]),s}function _M(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=D5(),a=!!(e&4);AN(t==null?void 0:t.defaultView,"focus",l=>{if(!a||!s.current)return;let c=RN(r);n.current instanceof HTMLElement&&c.add(n.current);let f=i.current;if(!f)return;let p=l.target;p&&p instanceof HTMLElement?FN(c,p)?(i.current=p,Zo(p)):(l.preventDefault(),l.stopPropagation(),Zo(f)):Zo(i.current)},!0)}function FN(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function $N(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:UN)!==C.Fragment||pt.Children.count(e.children)===1}let Bg=C.createContext(null);Bg.displayName="TransitionContext";var SM=(e=>(e.Visible="visible",e.Hidden="hidden",e))(SM||{});function NM(){let e=C.useContext(Bg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function jM(){let e=C.useContext(Ug);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Ug=C.createContext(null);Ug.displayName="NestingContext";function zg(e){return"children"in e?zg(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function BN(e,t){let n=Gu(e),r=C.useRef([]),i=D5(),s=P5(),a=cr((g,N=gc.Hidden)=>{let j=r.current.findIndex(({el:k})=>k===g);j!==-1&&(Lc(N,{[gc.Unmount](){r.current.splice(j,1)},[gc.Hidden](){r.current[j].state="hidden"}}),s.microTask(()=>{var k;!zg(r)&&i.current&&((k=n.current)==null||k.call(n))}))}),l=cr(g=>{let N=r.current.find(({el:j})=>j===g);return N?N.state!=="visible"&&(N.state="visible"):r.current.push({el:g,state:"visible"}),()=>a(g,gc.Unmount)}),c=C.useRef([]),f=C.useRef(Promise.resolve()),p=C.useRef({enter:[],leave:[]}),m=cr((g,N,j)=>{c.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([k])=>k!==g)),t==null||t.chains.current[N].push([g,new Promise(k=>{c.current.push(k)})]),t==null||t.chains.current[N].push([g,new Promise(k=>{Promise.all(p.current[N].map(([b,S])=>S)).then(()=>k())})]),N==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>j(N)):j(N)}),w=cr((g,N,j)=>{Promise.all(p.current[N].splice(0).map(([k,b])=>b)).then(()=>{var k;(k=c.current.shift())==null||k()}).then(()=>j(N))});return C.useMemo(()=>({children:r,register:l,unregister:a,onStart:m,onStop:w,wait:f,chains:p}),[l,a,r,m,w,p,f])}let UN=C.Fragment,zN=G0.RenderStrategy;function kM(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:f,enterFrom:p,enterTo:m,entered:w,leave:g,leaveFrom:N,leaveTo:j,...k}=e,[b,S]=C.useState(null),L=C.useRef(null),M=$N(e),K=xo(...M?[L,t,S]:t===null?[]:[t]),oe=(n=k.unmount)==null||n?gc.Unmount:gc.Hidden,{show:Z,appear:R,initial:ee}=NM(),[le,O]=C.useState(Z?"visible":"hidden"),U=jM(),{register:Y,unregister:J}=U;Fi(()=>Y(L),[Y,L]),Fi(()=>{if(oe===gc.Hidden&&L.current){if(Z&&le!=="visible"){O("visible");return}return Lc(le,{hidden:()=>J(L),visible:()=>Y(L)})}},[le,L,Y,J,Z,oe]);let xe=kp();Fi(()=>{if(M&&xe&&le==="visible"&&L.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[L,le,xe,M]);let ye=ee&&!R,Q=R&&Z&&ee,$=C.useRef(!1),z=BN(()=>{$.current||(O("hidden"),J(L))},U),ae=cr(Ee=>{$.current=!0;let Ce=Ee?"enter":"leave";z.onStart(L,Ce,te=>{te==="enter"?s==null||s():te==="leave"&&(l==null||l())})}),Pe=cr(Ee=>{let Ce=Ee?"enter":"leave";$.current=!1,z.onStop(L,Ce,te=>{te==="enter"?a==null||a():te==="leave"&&(c==null||c())}),Ce==="leave"&&!zg(z)&&(O("hidden"),J(L))});C.useEffect(()=>{M&&i||(ae(Z),Pe(Z))},[Z,M,i]);let P=!(!i||!M||!xe||ye),[,H]=YO(P,b,Z,{start:ae,end:Pe}),re=xu({ref:K,className:((r=ty(k.className,Q&&f,Q&&p,H.enter&&f,H.enter&&H.closed&&p,H.enter&&!H.closed&&m,H.leave&&g,H.leave&&!H.closed&&N,H.leave&&H.closed&&j,!H.transition&&Z&&w))==null?void 0:r.trim())||void 0,...GO(H)}),ce=0;le==="visible"&&(ce|=La.Open),le==="hidden"&&(ce|=La.Closed),H.enter&&(ce|=La.Opening),H.leave&&(ce|=La.Closing);let fe=sa();return pt.createElement(Ug.Provider,{value:z},pt.createElement(QO,{value:ce},fe({ourProps:re,theirProps:k,defaultTag:UN,features:zN,visible:le==="visible",name:"Transition.Child"})))}function EM(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,a=C.useRef(null),l=$N(e),c=xo(...l?[a,t]:t===null?[]:[t]);kp();let f=$g();if(n===void 0&&f!==null&&(n=(f&La.Open)===La.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=C.useState(n?"visible":"hidden"),w=BN(()=>{n||m("hidden")}),[g,N]=C.useState(!0),j=C.useRef([n]);Fi(()=>{g!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),N(!1))},[j,n]);let k=C.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);Fi(()=>{n?m("visible"):!zg(w)&&a.current!==null&&m("hidden")},[n,w]);let b={unmount:i},S=cr(()=>{var K;g&&N(!1),(K=e.beforeEnter)==null||K.call(e)}),L=cr(()=>{var K;g&&N(!1),(K=e.beforeLeave)==null||K.call(e)}),M=sa();return pt.createElement(Ug.Provider,{value:w},pt.createElement(Bg.Provider,{value:k},M({ourProps:{...b,as:C.Fragment,children:pt.createElement(qN,{ref:c,...b,...s,beforeEnter:S,beforeLeave:L})},theirProps:{},defaultTag:C.Fragment,features:zN,visible:p==="visible",name:"Transition"})))}function CM(e,t){let n=C.useContext(Bg)!==null,r=$g()!==null;return pt.createElement(pt.Fragment,null,!n&&r?pt.createElement(ay,{ref:t,...e}):pt.createElement(qN,{ref:t,...e}))}let ay=fs(EM),qN=fs(kM),O5=fs(CM),AM=Object.assign(ay,{Child:O5,Root:ay});var LM=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(LM||{}),PM=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(PM||{});let TM={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},M5=C.createContext(null);M5.displayName="DialogContext";function qg(e){let t=C.useContext(M5);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qg),n}return t}function IM(e,t){return Lc(t.type,TM,e,t)}let g_=fs(function(e,t){let n=C.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:p=!1,...m}=e,w=C.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(w.current||(w.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=$g();i===void 0&&g!==null&&(i=(g&La.Open)===La.Open);let N=C.useRef(null),j=xo(N,t),k=jp(N),b=i?0:1,[S,L]=C.useReducer(IM,{titleId:null,descriptionId:null,panelRef:C.createRef()}),M=cr(()=>s(!1)),K=cr(Pe=>L({type:0,id:Pe})),oe=kp()?b===0:!1,[Z,R]=lM(),ee={get current(){var Pe;return(Pe=S.panelRef.current)!=null?Pe:N.current}},le=MN(),{resolveContainers:O}=hM({mainTreeNode:le,portals:Z,defaultContainers:[ee]}),U=g!==null?(g&La.Closing)===La.Closing:!1;NO(f||U?!1:oe,{allowed:cr(()=>{var Pe,P;return[(P=(Pe=N.current)==null?void 0:Pe.closest("[data-headlessui-portal]"))!=null?P:null]}),disallowed:cr(()=>{var Pe;return[(Pe=le==null?void 0:le.closest("body > *:not(#headlessui-portal-root)"))!=null?Pe:null]})}),RO(oe,O,Pe=>{Pe.preventDefault(),M()}),dM(oe,k==null?void 0:k.defaultView,Pe=>{Pe.preventDefault(),Pe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),M()}),qO(f||U?!1:oe,k,O),jO(oe,N,M);let[Y,J]=mO(),xe=C.useMemo(()=>[{dialogState:b,close:M,setTitleId:K,unmount:p},S],[b,S,M,K,p]),ye=C.useMemo(()=>({open:b===0}),[b]),Q={ref:j,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:b===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":Y,unmount:p},$=!fM(),z=Nu.None;oe&&!f&&(z|=Nu.RestoreFocus,z|=Nu.TabLock,c&&(z|=Nu.AutoFocus),$&&(z|=Nu.InitialFocus));let ae=sa();return pt.createElement(ZO,null,pt.createElement(p_,{force:!0},pt.createElement(uM,null,pt.createElement(M5.Provider,{value:xe},pt.createElement(DN,{target:N},pt.createElement(p_,{force:!1},pt.createElement(J,{slot:ye},pt.createElement(R,null,pt.createElement(yM,{initialFocus:a,initialFocusFallback:N,containers:O,features:z},pt.createElement(bO,{value:M},ae({ourProps:Q,theirProps:m,slot:ye,defaultTag:DM,features:OM,visible:b===0,name:"Dialog"})))))))))))}),DM="div",OM=G0.RenderStrategy|G0.Static;function MM(e,t){let{transition:n=!1,open:r,...i}=e,s=$g(),a=e.hasOwnProperty("open")||s!==null,l=e.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?pt.createElement(m_,null,pt.createElement(AM,{show:r,transition:n,unmount:i.unmount},pt.createElement(g_,{ref:t,...i}))):pt.createElement(m_,null,pt.createElement(g_,{ref:t,open:r,...i}))}let RM="div";function FM(e,t){let n=C.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:a,unmount:l},c]=qg("Dialog.Panel"),f=xo(t,c.panelRef),p=C.useMemo(()=>({open:a===0}),[a]),m=cr(k=>{k.stopPropagation()}),w={ref:f,id:r,onClick:m},g=i?O5:C.Fragment,N=i?{unmount:l}:{},j=sa();return pt.createElement(g,{...N},j({ourProps:w,theirProps:s,slot:p,defaultTag:RM,name:"Dialog.Panel"}))}let $M="div";function BM(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=qg("Dialog.Backdrop"),a=C.useMemo(()=>({open:i===0}),[i]),l={ref:t,"aria-hidden":!0},c=n?O5:C.Fragment,f=n?{unmount:s}:{},p=sa();return pt.createElement(c,{...f},p({ourProps:l,theirProps:r,slot:a,defaultTag:$M,name:"Dialog.Backdrop"}))}let UM="h2";function zM(e,t){let n=C.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:a}]=qg("Dialog.Title"),l=xo(t);C.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=C.useMemo(()=>({open:s===0}),[s]),f={ref:l,id:r};return sa()({ourProps:f,theirProps:i,slot:c,defaultTag:UM,name:"Dialog.Title"})}let qM=fs(MM),WM=fs(FM);fs(BM);let HM=fs(zM),Du=Object.assign(qM,{Panel:WM,Title:HM,Description:wO});const VM=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,s]=C.useState(""),[a,l]=C.useState(!1);C.useState([]);const c=async f=>{if(f.preventDefault(),!!i.trim())try{l(!0);const{error:p}=await et.from("groups").insert([{name:i.trim()}]);if(p)throw p;Le.success("Grupo creado exitosamente"),n(),t(),s("")}catch(p){console.error("Error:",p),Le.error("Error al crear el grupo")}finally{l(!1)}};return d.jsx(Du,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-4 sm:p-6 mx-4 max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Ia,{className:"w-6 h-6"})})}),d.jsx(Du.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),d.jsxs("form",{onSubmit:c,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),d.jsx("input",{type:"text",id:"name",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,disabled:a,fullWidth:!0,className:"sm:w-auto",children:"Cancelar"}),d.jsx(yt,{type:"submit",loading:a,fullWidth:!0,className:"sm:w-auto",children:"Crear Grupo"})]})]})]})]})})},GM=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,s]=C.useState(""),[a,l]=C.useState(!1),c=async f=>{if(f.preventDefault(),i!==r.name){Le.error("El nombre del grupo no coincide");return}try{l(!0);const{error:p}=await et.from("groups").delete().eq("id",r.id);if(p)throw p;Le.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),Le.error("Error al eliminar el grupo")}finally{l(!1),s("")}};return d.jsx(Du,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Ia,{className:"w-6 h-6"})})}),d.jsx(Du.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta acción no se puede deshacer. Para confirmar, escribe el nombre del grupo:",d.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),d.jsxs("form",{onSubmit:c,children:[d.jsx("div",{className:"mb-4",children:d.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),d.jsx(yt,{type:"submit",loading:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function wn({className:e="",width:t="100%",height:n="1rem",rounded:r=!1,count:i=1}){const s=Array.from({length:i},(a,l)=>d.jsx("div",{className:`
        animate-pulse bg-gray-200 
        ${r?"rounded-full":"rounded"} 
        ${e}
        ${i>1&&l<i-1?"mb-2":""}
      `,style:{width:t,height:n}},l));return i===1?s[0]:d.jsx("div",{children:s})}function YM({rows:e=5}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"})]}),Array.from({length:e},(t,n)=>d.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 border-b",children:[d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsx(wn,{height:"1rem"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(wn,{width:"3rem",height:"1rem"}),d.jsx(wn,{width:"4rem",height:"1rem"})]})]},n))]})}function WN({count:e=3}){return d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:e},(t,n)=>d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx(wn,{height:"1.5rem",className:"mb-4"}),d.jsx(wn,{height:"1rem",className:"mb-2"}),d.jsx(wn,{height:"1rem",width:"70%",className:"mb-4"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(wn,{width:"4rem",height:"1rem"}),d.jsx(wn,{width:"3rem",height:"1rem"})]})]},n))})}function KM({count:e=3}){return d.jsx("div",{className:"space-y-4",children:Array.from({length:e},(t,n)=>d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx(wn,{height:"1.5rem",width:"60%",className:"mb-2"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(wn,{height:"1rem",width:"8rem"}),d.jsx(wn,{height:"1rem",width:"6rem"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(wn,{width:"3rem",height:"2rem"}),d.jsx(wn,{width:"3rem",height:"2rem"})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(wn,{height:"1rem",width:"10rem"}),d.jsx(wn,{height:"1rem",width:"8rem"})]})]},n))})}function JM({count:e=4}){return d.jsx("div",{className:"space-y-3",children:Array.from({length:e},(t,n)=>d.jsx("div",{className:"p-3 hover:bg-gray-50 border-b",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(wn,{height:"1.25rem",width:"8rem"}),d.jsx(wn,{height:"1rem",width:"4rem"})]}),d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx(wn,{height:"1.5rem",width:"5rem"}),d.jsx(wn,{height:"1.5rem",width:"6rem"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(wn,{width:"3rem",height:"1.5rem"}),d.jsx(wn,{width:"4rem",height:"1.5rem"})]})]})},n))})}function XM(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[i,s]=C.useState(!1),{user:a}=Rs(),l=$a(),[c,f]=C.useState(!1),[p,m]=C.useState(null),[w,g]=C.useState(!1),[N,j]=C.useState("");C.useEffect(()=>{(async()=>{a&&await k()})()},[a]);const k=async()=>{if(a)try{r(!0);const{data:M,error:K}=await et.from("users").select("role").eq("id",a.id).single();if(K)throw K;const oe=(M==null?void 0:M.role)==="admin";if(f(oe),oe){const{data:Y,error:J}=await et.from("groups").select("*").order("created_at",{ascending:!1});if(J)throw J;const{data:xe,error:ye}=await et.from("group_members").select("group_id").eq("user_id",a.id);if(ye)throw ye;const Q=new Set((xe==null?void 0:xe.map(z=>z.group_id))||[]),$=await Promise.all((Y||[]).map(async z=>{const{data:ae}=await et.from("group_members").select("id").eq("group_id",z.id).eq("role_in_group","principal"),{data:Pe}=await et.from("group_members").select("id").eq("group_id",z.id).eq("role_in_group","sustituto");return{...z,userRole:Q.has(z.id)?"member":"none",principal_count:(ae==null?void 0:ae.length)||0,sustituto_count:(Pe==null?void 0:Pe.length)||0}}));t($);return}const{data:Z,error:R}=await et.from("group_members").select("group_id").eq("user_id",a.id);if(R)throw R;const ee=new Set((Z==null?void 0:Z.map(Y=>Y.group_id))||[]),{data:le,error:O}=await et.from("groups").select("*").or(`created_by.eq.${a.id},id.in.(${Array.from(ee).join(",")})`).order("created_at",{ascending:!1});if(O)throw O;const U=await Promise.all((le||[]).map(async Y=>{const{data:J}=await et.from("group_members").select("id").eq("group_id",Y.id).eq("role_in_group","principal"),{data:xe}=await et.from("group_members").select("id").eq("group_id",Y.id).eq("role_in_group","sustituto");return{...Y,userRole:ee.has(Y.id)?"member":"none",principal_count:(J==null?void 0:J.length)||0,sustituto_count:(xe==null?void 0:xe.length)||0}}));t(U)}catch(M){console.error("Error fetching groups:",M),Le.error("Error al cargar los grupos"),t([])}finally{r(!1)}},b=M=>{l(`/group/${M}`)},S=(M,K)=>{M.stopPropagation(),m(K),g(!0)},L=()=>{const M=e.filter(R=>R.name.toLowerCase().includes(N.toLowerCase())),K=M.filter(R=>R.created_by===(a==null?void 0:a.id)),oe=M.filter(R=>R.userRole==="member"&&R.created_by!==(a==null?void 0:a.id)),Z=c?M.filter(R=>R.userRole==="none"&&R.created_by!==(a==null?void 0:a.id)&&!oe.some(ee=>ee.id===R.id)):[];return{created:K,member:oe,other:Z}};return d.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),d.jsxs(yt,{onClick:()=>s(!0),className:"flex items-center space-x-2",children:[d.jsx(Og,{className:"w-5 h-5"}),d.jsx("span",{children:"Crear Grupo"})]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:N,onChange:M=>j(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-7 w-48 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx(WN,{count:6})]}):e.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(V0,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. ¡Crea uno para empezar!"})]}):d.jsxs("div",{className:"space-y-8",children:[L().created.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().created.map(M=>d.jsx(_v,{group:M,user:a,isAdmin:c,onDelete:S,onClick:()=>b(M.id)},M.id))})]}),L().member.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().member.map(M=>d.jsx(_v,{group:M,user:a,isAdmin:c,onDelete:S,onClick:()=>b(M.id)},M.id))})]}),c&&L().other.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().other.map(M=>d.jsx(_v,{group:M,user:a,isAdmin:c,onDelete:S,onClick:()=>b(M.id)},M.id))})]})]}),d.jsx(VM,{isOpen:i,onClose:()=>s(!1),onGroupCreated:k,isAdmin:c}),p&&d.jsx(GM,{isOpen:w,onClose:()=>{g(!1),m(null)},onGroupDeleted:k,group:p})]})}const _v=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>d.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[d.jsx(V0,{className:"w-5 h-5 text-indigo-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.principal_count}),d.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[d.jsx(V0,{className:"w-5 h-5 text-orange-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.sustituto_count}),d.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&d.jsx("button",{onClick:s=>r(s,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:d.jsx(L5,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function QM({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:s,userRole:a}){const[l,c]=C.useState(""),[f,p]=C.useState(""),[m,w]=C.useState("principal"),[g,N]=C.useState([]),[j,k]=C.useState(""),[b,S]=C.useState(!1),[L,M]=C.useState(!1),[K,oe]=C.useState([]),[Z,R]=C.useState(!1),{user:ee}=Rs(),le=()=>{c(""),p(""),w("principal"),N([]),k(""),S(!1),oe([])},O=async()=>{if(ee)try{const{data:Q,error:$}=await et.from("users").select("name, email").eq("id",ee.id).single();if($)throw $;Q&&(c(Q.name||""),p(Q.email||""))}catch(Q){console.error("Error fetching user info:",Q)}},U=async()=>{var Q;if(ee)try{const{data:$,error:z}=await et.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",ee.id);if(z)throw z;R(((Q=$==null?void 0:$[0])==null?void 0:Q.role_in_group)==="principal")}catch($){console.error("Error checking principal status:",$),R(!1)}},Y=async()=>{try{const{data:Q,error:$}=await et.from("roles").select("*").eq("group_id",n).order("name");if($)throw $;oe(Q||[])}catch(Q){console.error("Error loading roles:",Q),Le.error("Error al cargar los roles")}};if(C.useEffect(()=>{e&&Y()},[e]),C.useEffect(()=>{e||le()},[e]),C.useEffect(()=>{ee&&(U(),a==="user"&&!Z?O():(c(""),p("")))},[ee,a,Z]),!e||!ee)return null;const J=()=>{if(!j.trim()){Le.error("Por favor ingresa un nombre para el rol");return}if(K.some(ae=>ae.name.toLowerCase()===j.trim().toLowerCase())){Le.error("Este rol ya existe en el grupo");return}const $=`new-${Date.now()}`,z={id:$,name:j.trim(),isNew:!0,group_id:n};oe([...K,z]),N([...g,$]),k(""),S(!1),Le.success("Rol añadido y seleccionado")},xe=async Q=>{if(Q.preventDefault(),!l.trim()){Le.error("Por favor ingresa un nombre");return}const $=f.trim()?"registered":"local";if(g.length===0){Le.error("Por favor selecciona al menos un rol");return}M(!0);try{const z=g.filter(H=>!H.startsWith("new-")),ae=K.filter(H=>"isNew"in H&&H.isNew&&g.includes(H.id)).map(H=>({name:H.name,group_id:n})),{data:Pe,error:P}=await et.rpc("add_group_member_flexible",{p_group_id:n,p_name:l,p_email:$==="registered"?f.toLowerCase().trim():null,p_role:s?"principal":m,p_user_id:a==="user"&&!Z?ee.id:null,p_instruments:z,p_new_instruments:ae.map(H=>H.name),p_member_type:$});if(P)throw P;if($==="registered"&&Pe.invitation)try{const{invitation:H}=Pe;if(console.log("Datos de invitación:",H),!H||!H.token)throw new Error("No se recibieron los datos de invitación correctamente");const{error:re}=await et.functions.invoke("send-invitation-email",{body:{email:H.email,token:H.token,userExists:H.userExists,groupName:H.groupName,groupMemberId:H.groupMemberId}});if(re)throw console.error("Error sending invitation email:",re),new Error(`Error al enviar la invitación: ${re.message}`);Le.success(`Miembro añadido e invitación enviada a ${f}`)}catch(H){console.error("Error sending invitation:",H),Le.error(`Error al enviar la invitación: ${H.message||"Error desconocido"}`,{icon:"⚠️",duration:5e3})}else Le.success(`${l} añadido al grupo como miembro local`);i(),t(),le()}catch(z){console.error("Error adding member:",z),Le.error(z.message||"Error al añadir miembro")}finally{M(!1)}},ye=a==="user"&&!Z;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:ye?"Unirse al Grupo":"Añadir Miembro"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:xe,className:"p-6 space-y-4",children:[d.jsx(Gn,{label:"Nombre",value:l,onChange:Q=>c(Q.target.value),required:!0,placeholder:"Ingresa el nombre del miembro",disabled:ye}),d.jsxs("div",{children:[d.jsx(Gn,{label:"Email (opcional)",type:"email",value:f,onChange:Q=>p(Q.target.value),required:!1,placeholder:"Ingresa el email para enviar invitación",disabled:ye}),d.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["💡 ",d.jsx("strong",{children:"Con email:"})," Recibirá invitación y podrá acceder a la app",d.jsx("br",{}),"🎭 ",d.jsx("strong",{children:"Sin email:"})," Solo para organización interna del grupo"]})]}),!s&&a==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:m,onChange:Q=>w(Q.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roles/Instrumentos"}),!b&&(a==="admin"||s||Z)&&d.jsxs(yt,{type:"button",variant:"secondary",onClick:()=>S(!0),className:"text-sm py-1",children:[d.jsx(Og,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),b&&d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsx(Gn,{label:"",value:j,onChange:Q=>k(Q.target.value),placeholder:"Enter instrument name",className:"flex-1"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx(yt,{type:"button",onClick:J,className:"whitespace-nowrap",children:"Add"}),d.jsx(yt,{type:"button",variant:"secondary",onClick:()=>{S(!1),k("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:K.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Añade uno arriba."}):K.map(Q=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:g.includes(Q.id),onChange:$=>{$.target.checked?N([...g,Q.id]):N(g.filter(z=>z!==Q.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),d.jsxs("span",{className:"flex items-center capitalize",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1"}),Q.name,"isNew"in Q&&d.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},Q.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(yt,{type:"submit",loading:L,children:ye?"Unirse al Grupo":"Añadir Miembro"})]})]})]})})}function ZM({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:s}){const[a,l]=C.useState(n.name),[c,f]=C.useState(n.role_in_group),[p,m]=C.useState([]),[w,g]=C.useState(!1),{user:N}=Rs();if(C.useEffect(()=>{n&&(l(n.name),f(n.role_in_group),m(n.instruments.map(b=>b.id)))},[n]),!e||!N)return null;const j=s==="admin"||n.user_id===N.id,k=async b=>{if(b.preventDefault(),!j){Le.error("You do not have permission to edit this member");return}if(!a.trim()){Le.error("Please enter a member name");return}if(p.length===0){Le.error("Please select at least one role");return}g(!0);try{const{error:S}=await et.from("group_members").update({name:a.trim(),role_in_group:c}).eq("id",n.id);if(S)throw S;const{error:L}=await et.from("group_member_roles").delete().eq("group_member_id",n.id);if(L)throw L;const{error:M}=await et.from("group_member_roles").insert(p.map(K=>({group_member_id:n.id,role_id:K,created_by:N.id})));if(M)throw M;Le.success("Member updated successfully!"),i(),t()}catch(S){console.error("Error updating member:",S),Le.error(S.message||"Failed to update member")}finally{g(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:w,children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[d.jsx(Gn,{label:"Name",value:a,onChange:b=>l(b.target.value),required:!0,placeholder:"Enter member name",disabled:!j}),s==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:c,onChange:b=>f(b.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!j,children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(b=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:p.includes(b.id),onChange:S=>{S.target.checked?m([...p,b.id]):m(p.filter(L=>L!==b.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:w||!j}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1"}),b.name]})]},b.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),j&&d.jsx(yt,{type:"submit",loading:w,children:"Save Changes"})]})]})]})})}const v_=3,eR=1e3;async function Bn(e,t="An error occurred"){let n=0;for(;n<v_;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===v_)return console.error(t,r),Le.error(t),null;await new Promise(i=>setTimeout(i,eR*n))}return null}function un(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ds(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Mi(e,t){const n=un(e);return isNaN(t)?ds(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Oa(e,t){const n=un(e);if(isNaN(t))return ds(e,NaN);if(!t)return n;const r=n.getDate(),i=ds(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const R5=6048e5,tR=864e5,HN=6e4,VN=36e5;let nR={};function Ep(){return nR}function yo(e,t){var l,c,f,p;const n=Ep(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=un(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Uu(e){return yo(e,{weekStartsOn:1})}function GN(e){const t=un(e),n=t.getFullYear(),r=ds(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Uu(r),s=ds(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Uu(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Pc(e){const t=un(e);return t.setHours(0,0,0,0),t}function J0(e){const t=un(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ho(e,t){const n=Pc(e),r=Pc(t),i=+n-J0(n),s=+r-J0(r);return Math.round((i-s)/tR)}function rR(e){const t=GN(e),n=ds(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Uu(n)}function oy(e,t){const n=t*7;return Mi(e,n)}function iR(e,t){return Oa(e,t*12)}function sR(e){let t;return e.forEach(function(n){const r=un(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function aR(e){let t;return e.forEach(n=>{const r=un(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function oR(e){return ds(e,Date.now())}function wr(e,t){const n=Pc(e),r=Pc(t);return+n==+r}function F5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function lR(e){if(!F5(e)&&typeof e!="number")return!1;const t=un(e);return!isNaN(Number(t))}function dp(e,t){const n=un(e),r=un(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function cR(e,t,n){const r=yo(e,n),i=yo(t,n),s=+r-J0(r),a=+i-J0(i);return Math.round((s-a)/R5)}function $5(e){const t=un(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function us(e){const t=un(e);return t.setDate(1),t.setHours(0,0,0,0),t}function YN(e){const t=un(e),n=ds(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function B5(e,t){var l,c,f,p;const n=Ep(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=un(e),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function KN(e){return B5(e,{weekStartsOn:1})}const uR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dR=(e,t,n)=>{let r;const i=uR[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function cf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const fR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mR={date:cf({formats:fR,defaultWidth:"full"}),time:cf({formats:hR,defaultWidth:"full"}),dateTime:cf({formats:pR,defaultWidth:"full"})},gR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vR=(e,t,n,r)=>gR[e];function uo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const yR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_R={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NR=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jR={ordinalNumber:NR,era:uo({values:yR,defaultWidth:"wide"}),quarter:uo({values:wR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:uo({values:xR,defaultWidth:"wide"}),day:uo({values:bR,defaultWidth:"wide"}),dayPeriod:uo({values:_R,defaultWidth:"wide",formattingValues:SR,defaultFormattingWidth:"wide"})};function fo(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ER(l,m=>m.test(a)):kR(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(a.length);return{value:f,rest:p}}}function kR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ER(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function JN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(i.length);return{value:a,rest:l}}}const CR=/^(\d+)(th|st|nd|rd)?/i,AR=/\d+/i,LR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PR={any:[/^b/i,/^(a|c)/i]},TR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IR={any:[/1/i,/2/i,/3/i,/4/i]},DR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},RR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$R={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BR={ordinalNumber:JN({matchPattern:CR,parsePattern:AR,valueCallback:e=>parseInt(e,10)}),era:fo({matchPatterns:LR,defaultMatchWidth:"wide",parsePatterns:PR,defaultParseWidth:"any"}),quarter:fo({matchPatterns:TR,defaultMatchWidth:"wide",parsePatterns:IR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:fo({matchPatterns:DR,defaultMatchWidth:"wide",parsePatterns:OR,defaultParseWidth:"any"}),day:fo({matchPatterns:MR,defaultMatchWidth:"wide",parsePatterns:RR,defaultParseWidth:"any"}),dayPeriod:fo({matchPatterns:FR,defaultMatchWidth:"any",parsePatterns:$R,defaultParseWidth:"any"})},XN={code:"en-US",formatDistance:dR,formatLong:mR,formatRelative:vR,localize:jR,match:BR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function UR(e){const t=un(e);return ho(t,YN(t))+1}function QN(e){const t=un(e),n=+Uu(t)-+rR(t);return Math.round(n/R5)+1}function ZN(e,t){var p,m,w,g;const n=un(e),r=n.getFullYear(),i=Ep(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(w=i.locale)==null?void 0:w.options)==null?void 0:g.firstWeekContainsDate)??1,a=ds(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=yo(a,t),c=ds(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const f=yo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function zR(e,t){var l,c,f,p;const n=Ep(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,i=ZN(e,t),s=ds(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),yo(s,t)}function e6(e,t){const n=un(e),r=+yo(n,t)-+zR(n,t);return Math.round(r/R5)+1}function Nn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Zl={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Nn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Nn(n+1,2)},d(e,t){return Nn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Nn(e.getHours()%12||12,t.length)},H(e,t){return Nn(e.getHours(),t.length)},m(e,t){return Nn(e.getMinutes(),t.length)},s(e,t){return Nn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Nn(i,t.length)}},Md={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},y_={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Zl.y(e,t)},Y:function(e,t,n,r){const i=ZN(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Nn(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Nn(s,t.length)},R:function(e,t){const n=GN(e);return Nn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Nn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Nn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Nn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Zl.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Nn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=e6(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Nn(i,t.length)},I:function(e,t,n){const r=QN(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Nn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Zl.d(e,t)},D:function(e,t,n){const r=UR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Nn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Nn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Nn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Nn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Md.noon:r===0?i=Md.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Md.evening:r>=12?i=Md.afternoon:r>=4?i=Md.morning:i=Md.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Zl.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Zl.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Nn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Nn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Zl.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Zl.s(e,t)},S:function(e,t){return Zl.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return x_(r);case"XXXX":case"XX":return bu(r);case"XXXXX":case"XXX":default:return bu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return x_(r);case"xxxx":case"xx":return bu(r);case"xxxxx":case"xxx":default:return bu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w_(r,":");case"OOOO":default:return"GMT"+bu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w_(r,":");case"zzzz":default:return"GMT"+bu(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Nn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Nn(r,t.length)}};function w_(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Nn(s,2)}function x_(e,t){return e%60===0?(e>0?"-":"+")+Nn(Math.abs(e)/60,2):bu(e,t)}function bu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Nn(Math.trunc(r/60),2),s=Nn(r%60,2);return n+i+t+s}const b_=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},t6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},qR=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return b_(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",b_(r,t)).replace("{{time}}",t6(i,t))},WR={p:t6,P:qR},HR=/^D+$/,VR=/^Y+$/,GR=["D","DD","YY","YYYY"];function YR(e){return HR.test(e)}function KR(e){return VR.test(e)}function JR(e,t,n){const r=XR(e,t,n);if(console.warn(r),GR.includes(e))throw new RangeError(r)}function XR(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const QR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,e9=/^'([^]*?)'?$/,t9=/''/g,n9=/[a-zA-Z]/;function cn(e,t,n){var p,m,w,g,N,j,k,b;const r=Ep(),i=(n==null?void 0:n.locale)??r.locale??XN,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(w=r.locale)==null?void 0:w.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((j=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:j.weekStartsOn)??r.weekStartsOn??((b=(k=r.locale)==null?void 0:k.options)==null?void 0:b.weekStartsOn)??0,l=un(e);if(!lR(l))throw new RangeError("Invalid time value");let c=t.match(ZR).map(S=>{const L=S[0];if(L==="p"||L==="P"){const M=WR[L];return M(S,i.formatLong)}return S}).join("").match(QR).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const L=S[0];if(L==="'")return{isToken:!1,value:r9(S)};if(y_[L])return{isToken:!0,value:S};if(L.match(n9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const f={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const L=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&KR(L)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&YR(L))&&JR(L,t,String(e));const M=y_[L[0]];return M(l,L,i.localize,f)}).join("")}function r9(e){const t=e.match(e9);return t?t[1].replace(t9,"'"):e}function i9(e){const t=un(e),n=t.getFullYear(),r=t.getMonth(),i=ds(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function s9(e){return Math.trunc(+un(e)/1e3)}function a9(e){const t=un(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function o9(e,t){return cR(a9(e),us(e),t)+1}function ly(e,t){const n=un(e),r=un(t);return n.getTime()>r.getTime()}function n6(e,t){const n=un(e),r=un(t);return+n<+r}function __(e){return+un(e)>Date.now()}function U5(e,t){const n=un(e),r=un(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function l9(e,t){const n=un(e),r=un(t);return n.getFullYear()===r.getFullYear()}function S_(e){return wr(e,oR(e))}function Sv(e,t){return Mi(e,-t)}function mu(e,t){const r=f9(e);let i;if(r.date){const c=h9(r.date,2);i=p9(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=m9(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=g9(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(s+a+l)}const Fm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f9(e){const t={},n=e.split(Fm.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Fm.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Fm.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Fm.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function h9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function p9(e,t){if(t===null)return new Date(NaN);const n=e.match(c9);if(!n)return new Date(NaN);const r=!!n[4],i=wh(n[1]),s=wh(n[2])-1,a=wh(n[3]),l=wh(n[4]),c=wh(n[5])-1;if(r)return b9(t,l,c)?v9(t,l,c):new Date(NaN);{const f=new Date(0);return!w9(t,s,a)||!x9(t,i)?new Date(NaN):(f.setUTCFullYear(t,s,Math.max(i,a)),f)}}function wh(e){return e?parseInt(e):1}function m9(e){const t=e.match(u9);if(!t)return NaN;const n=Nv(t[1]),r=Nv(t[2]),i=Nv(t[3]);return _9(n,r,i)?n*VN+r*HN+i*1e3:NaN}function Nv(e){return e&&parseFloat(e.replace(",","."))||0}function g9(e){if(e==="Z")return 0;const t=e.match(d9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return S9(r,i)?n*(r*VN+i*HN):NaN}function v9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const y9=[31,null,31,30,31,30,31,31,30,31,30,31];function r6(e){return e%400===0||e%4===0&&e%100!==0}function w9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(y9[t]||(r6(e)?29:28))}function x9(e,t){return t>=1&&t<=(r6(e)?366:365)}function b9(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function _9(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function S9(e,t){return t>=0&&t<=59}function jv(e,t){const n=un(e),r=n.getFullYear(),i=n.getDate(),s=ds(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const a=i9(s);return n.setMonth(t,Math.min(i,a)),n}function N_(e,t){const n=un(e);return isNaN(+n)?ds(e,NaN):(n.setFullYear(t),n)}const N9={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},j9=(e,t,n)=>{let r;const i=N9[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},k9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},E9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},C9={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},A9={date:cf({formats:k9,defaultWidth:"full"}),time:cf({formats:E9,defaultWidth:"full"}),dateTime:cf({formats:C9,defaultWidth:"full"})},L9={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},P9={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},T9=(e,t,n,r)=>t.getHours()!==1?P9[e]:L9[e],I9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},D9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},O9={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},M9={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},R9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},F9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},$9=(e,t)=>Number(e)+"º",B9={ordinalNumber:$9,era:uo({values:I9,defaultWidth:"wide"}),quarter:uo({values:D9,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:uo({values:O9,defaultWidth:"wide"}),day:uo({values:M9,defaultWidth:"wide"}),dayPeriod:uo({values:R9,defaultWidth:"wide",formattingValues:F9,defaultFormattingWidth:"wide"})},U9=/^(\d+)(º)?/i,z9=/\d+/i,q9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},W9={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},H9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},V9={any:[/1/i,/2/i,/3/i,/4/i]},G9={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Y9={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},K9={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},J9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},X9={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Q9={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Z9={ordinalNumber:JN({matchPattern:U9,parsePattern:z9,valueCallback:function(e){return parseInt(e,10)}}),era:fo({matchPatterns:q9,defaultMatchWidth:"wide",parsePatterns:W9,defaultParseWidth:"any"}),quarter:fo({matchPatterns:H9,defaultMatchWidth:"wide",parsePatterns:V9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:fo({matchPatterns:G9,defaultMatchWidth:"wide",parsePatterns:Y9,defaultParseWidth:"any"}),day:fo({matchPatterns:K9,defaultMatchWidth:"wide",parsePatterns:J9,defaultParseWidth:"any"}),dayPeriod:fo({matchPatterns:X9,defaultMatchWidth:"any",parsePatterns:Q9,defaultParseWidth:"any"})},Zd={code:"es",formatDistance:j9,formatLong:A9,formatRelative:T9,localize:B9,match:Z9,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Tt=function(){return Tt=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Tt.apply(this,arguments)};function eF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function i6(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Cp(e){return e.mode==="multiple"}function Ap(e){return e.mode==="range"}function Wg(e){return e.mode==="single"}var tF={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function nF(e,t){return cn(e,"LLLL y",t)}function rF(e,t){return cn(e,"d",t)}function iF(e,t){return cn(e,"LLLL",t)}function sF(e){return"".concat(e)}function aF(e,t){return cn(e,"cccccc",t)}function oF(e,t){return cn(e,"yyyy",t)}var lF=Object.freeze({__proto__:null,formatCaption:nF,formatDay:rF,formatMonthCaption:iF,formatWeekNumber:sF,formatWeekdayName:aF,formatYearCaption:oF}),cF=function(e,t,n){return cn(e,"do MMMM (EEEE)",n)},uF=function(){return"Month: "},dF=function(){return"Go to next month"},fF=function(){return"Go to previous month"},hF=function(e,t){return cn(e,"cccc",t)},pF=function(e){return"Week n. ".concat(e)},mF=function(){return"Year: "},gF=Object.freeze({__proto__:null,labelDay:cF,labelMonthDropdown:uF,labelNext:dF,labelPrevious:fF,labelWeekNumber:pF,labelWeekday:hF,labelYearDropdown:mF});function vF(){var e="buttons",t=tF,n=XN,r={},i={},s=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:lF,labels:gF,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:l,mode:"default"}}function yF(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,s=e.fromDate,a=e.toDate;return r?s=us(r):t&&(s=new Date(t,0,1)),i?a=$5(i):n&&(a=new Date(n,11,31)),{fromDate:s?Pc(s):void 0,toDate:a?Pc(a):void 0}}var s6=C.createContext(void 0);function wF(e){var t,n=e.initialProps,r=vF(),i=yF(n),s=i.fromDate,a=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!a)&&(l="buttons");var c;(Wg(n)||Cp(n)||Ap(n))&&(c=n.onSelect);var f=Tt(Tt(Tt({},r),n),{captionLayout:l,classNames:Tt(Tt({},r.classNames),n.classNames),components:Tt({},n.components),formatters:Tt(Tt({},r.formatters),n.formatters),fromDate:s,labels:Tt(Tt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Tt(Tt({},r.modifiers),n.modifiers),modifiersClassNames:Tt(Tt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Tt(Tt({},r.styles),n.styles),toDate:a});return d.jsx(s6.Provider,{value:f,children:e.children})}function zn(){var e=C.useContext(s6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function a6(e){var t=zn(),n=t.locale,r=t.classNames,i=t.styles,s=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function xF(e){return d.jsx("svg",Tt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function o6(e){var t,n,r=e.onChange,i=e.value,s=e.children,a=e.caption,l=e.className,c=e.style,f=zn(),p=(n=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:xF;return d.jsxs("div",{className:l,style:c,children:[d.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:i,onChange:r,children:s}),d.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[a,d.jsx(p,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function bF(e){var t,n=zn(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,f=n.components,p=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});var m=[];if(l9(r,i))for(var w=us(r),g=r.getMonth();g<=i.getMonth();g++)m.push(jv(w,g));else for(var w=us(new Date),g=0;g<=11;g++)m.push(jv(w,g));var N=function(k){var b=Number(k.target.value),S=jv(us(e.displayMonth),b);e.onChange(S)},j=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:o6;return d.jsx(j,{name:"months","aria-label":p(),className:c.dropdown_month,style:s.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(k){return d.jsx("option",{value:k.getMonth(),children:l(k,{locale:a})},k.getMonth())})})}function _F(e){var t,n=e.displayMonth,r=zn(),i=r.fromDate,s=r.toDate,a=r.locale,l=r.styles,c=r.classNames,f=r.components,p=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,w=[];if(!i)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});for(var g=i.getFullYear(),N=s.getFullYear(),j=g;j<=N;j++)w.push(N_(YN(new Date),j));var k=function(S){var L=N_(us(n),Number(S.target.value));e.onChange(L)},b=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:o6;return d.jsx(b,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:k,value:n.getFullYear(),caption:p(n,{locale:a}),children:w.map(function(S){return d.jsx("option",{value:S.getFullYear(),children:p(S,{locale:a})},S.getFullYear())})})}function SF(e,t){var n=C.useState(e),r=n[0],i=n[1],s=t===void 0?r:t;return[s,i]}function NF(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,s=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&dp(s,i)<0){var f=-1*(c-1);i=Oa(s,f)}return a&&dp(i,a)<0&&(i=a),us(i)}function jF(){var e=zn(),t=NF(e),n=SF(t,e.month),r=n[0],i=n[1],s=function(a){var l;if(!e.disableNavigation){var c=us(a);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function kF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=us(e),s=us(Oa(i,r)),a=dp(s,i),l=[],c=0;c<a;c++){var f=Oa(i,c);l.push(f)}return n&&(l=l.reverse()),l}function EF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=us(e);if(!n)return Oa(l,a);var c=dp(n,e);if(!(c<s))return Oa(l,a)}}function CF(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=us(e);if(!n)return Oa(l,-a);var c=dp(l,n);if(!(c<=0))return Oa(l,-a)}}var l6=C.createContext(void 0);function AF(e){var t=zn(),n=jF(),r=n[0],i=n[1],s=kF(r,t),a=EF(r,t),l=CF(r,t),c=function(m){return s.some(function(w){return U5(m,w)})},f=function(m,w){c(m)||(w&&n6(m,w)?i(Oa(m,1+t.numberOfMonths*-1)):i(m))},p={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:f,previousMonth:l,nextMonth:a,isDateDisplayed:c};return d.jsx(l6.Provider,{value:p,children:e.children})}function Lp(){var e=C.useContext(l6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function j_(e){var t,n=zn(),r=n.classNames,i=n.styles,s=n.components,a=Lp().goToMonth,l=function(p){a(Oa(p,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:a6,f=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:f}),d.jsx(bF,{onChange:l,displayMonth:e.displayMonth}),d.jsx(_F,{onChange:l,displayMonth:e.displayMonth})]})}function LF(e){return d.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function PF(e){return d.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var X0=C.forwardRef(function(e,t){var n=zn(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var a=s.join(" "),l=Tt(Tt({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),d.jsx("button",Tt({},e,{ref:t,type:"button",className:a,style:l}))});function TF(e){var t,n,r=zn(),i=r.dir,s=r.locale,a=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,p=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var w=f(e.previousMonth,{locale:s}),g=[a.nav_button,a.nav_button_previous].join(" "),N=p(e.nextMonth,{locale:s}),j=[a.nav_button,a.nav_button_next].join(" "),k=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:PF,b=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:LF;return d.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&d.jsx(X0,{name:"previous-month","aria-label":w,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?d.jsx(k,{className:a.nav_icon,style:l.nav_icon}):d.jsx(b,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&d.jsx(X0,{name:"next-month","aria-label":N,className:j,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?d.jsx(b,{className:a.nav_icon,style:l.nav_icon}):d.jsx(k,{className:a.nav_icon,style:l.nav_icon})})]})}function k_(e){var t=zn().numberOfMonths,n=Lp(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(N){return U5(e.displayMonth,N)}),c=l===0,f=l===a.length-1,p=t>1&&(c||!f),m=t>1&&(f||!c),w=function(){r&&s(r)},g=function(){i&&s(i)};return d.jsx(TF,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:w,onNextClick:g})}function IF(e){var t,n=zn(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:a6,f;return i?f=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?f=d.jsx(j_,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?f=d.jsxs(d.Fragment,{children:[d.jsx(j_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(k_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(k_,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:s.caption,children:f})}function DF(e){var t=zn(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?d.jsx("tfoot",{className:i,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function OF(e,t,n){for(var r=n?Uu(new Date):yo(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var a=Mi(r,s);i.push(a)}return i}function MF(){var e=zn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,f=OF(i,s,a);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),f.map(function(p,m){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:l(p,{locale:i})},m)})]})}function RF(){var e,t=zn(),n=t.classNames,r=t.styles,i=t.components,s=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:MF;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(s,{})})}function FF(e){var t=zn(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var z5=C.createContext(void 0);function $F(e){if(!Cp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx(z5.Provider,{value:t,children:e.children})}return d.jsx(BF,{initialProps:e.initialProps,children:e.children})}function BF(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,s=t.max,a=function(f,p,m){var w,g;(w=t.onDayClick)===null||w===void 0||w.call(t,f,p,m);var N=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var j=!!(!p.selected&&s&&(r==null?void 0:r.length)===s);if(!j){var k=r?i6([],r):[];if(p.selected){var b=k.findIndex(function(S){return wr(f,S)});k.splice(b,1)}else k.push(f);(g=t.onSelect)===null||g===void 0||g.call(t,k,f,p,m)}}},l={disabled:[]};r&&l.disabled.push(function(f){var p=s&&r.length>s-1,m=r.some(function(w){return wr(w,f)});return!!(p&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return d.jsx(z5.Provider,{value:c,children:n})}function q5(){var e=C.useContext(z5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function UF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?wr(i,e)&&wr(r,e)?void 0:wr(i,e)?{from:i,to:void 0}:wr(r,e)?void 0:ly(r,e)?{from:e,to:i}:{from:r,to:e}:i?ly(e,i)?{from:i,to:e}:{from:e,to:i}:r?n6(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var W5=C.createContext(void 0);function zF(e){if(!Ap(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(W5.Provider,{value:t,children:e.children})}return d.jsx(qF,{initialProps:e.initialProps,children:e.children})}function qF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},s=i.from,a=i.to,l=t.min,c=t.max,f=function(g,N,j){var k,b;(k=t.onDayClick)===null||k===void 0||k.call(t,g,N,j);var S=UF(g,r);(b=t.onSelect)===null||b===void 0||b.call(t,S,g,N,j)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(p.range_start=[s],a?(p.range_end=[a],wr(s,a)||(p.range_middle=[{after:s,before:a}])):p.range_end=[s]):a&&(p.range_start=[a],p.range_end=[a]),l&&(s&&!a&&p.disabled.push({after:Sv(s,l-1),before:Mi(s,l-1)}),s&&a&&p.disabled.push({after:s,before:Mi(s,l-1)}),!s&&a&&p.disabled.push({after:Sv(a,l-1),before:Mi(a,l-1)})),c){if(s&&!a&&(p.disabled.push({before:Mi(s,-c+1)}),p.disabled.push({after:Mi(s,c-1)})),s&&a){var m=ho(a,s)+1,w=c-m;p.disabled.push({before:Sv(s,w)}),p.disabled.push({after:Mi(a,w)})}!s&&a&&(p.disabled.push({before:Mi(a,-c+1)}),p.disabled.push({after:Mi(a,c-1)}))}return d.jsx(W5.Provider,{value:{selected:r,onDayClick:f,modifiers:p},children:n})}function H5(){var e=C.useContext(W5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function l0(e){return Array.isArray(e)?i6([],e):e!==void 0?[e]:[]}function WF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=l0(i)}),t}var Ma;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ma||(Ma={}));var HF=Ma.Selected,Ho=Ma.Disabled,VF=Ma.Hidden,GF=Ma.Today,kv=Ma.RangeEnd,Ev=Ma.RangeMiddle,Cv=Ma.RangeStart,YF=Ma.Outside;function KF(e,t,n){var r,i=(r={},r[HF]=l0(e.selected),r[Ho]=l0(e.disabled),r[VF]=l0(e.hidden),r[GF]=[e.today],r[kv]=[],r[Ev]=[],r[Cv]=[],r[YF]=[],r);return e.fromDate&&i[Ho].push({before:e.fromDate}),e.toDate&&i[Ho].push({after:e.toDate}),Cp(e)?i[Ho]=i[Ho].concat(t.modifiers[Ho]):Ap(e)&&(i[Ho]=i[Ho].concat(n.modifiers[Ho]),i[Cv]=n.modifiers[Cv],i[Ev]=n.modifiers[Ev],i[kv]=n.modifiers[kv]),i}var c6=C.createContext(void 0);function JF(e){var t=zn(),n=q5(),r=H5(),i=KF(t,n,r),s=WF(t.modifiers),a=Tt(Tt({},i),s);return d.jsx(c6.Provider,{value:a,children:e.children})}function u6(){var e=C.useContext(c6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function XF(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function QF(e){return!!(e&&typeof e=="object"&&"from"in e)}function ZF(e){return!!(e&&typeof e=="object"&&"after"in e)}function e$(e){return!!(e&&typeof e=="object"&&"before"in e)}function t$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function n$(e,t){var n,r=t.from,i=t.to;if(r&&i){var s=ho(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=ho(e,r)>=0&&ho(i,e)>=0;return a}return i?wr(i,e):r?wr(r,e):!1}function r$(e){return F5(e)}function i$(e){return Array.isArray(e)&&e.every(F5)}function s$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(r$(n))return wr(e,n);if(i$(n))return n.includes(e);if(QF(n))return n$(e,n);if(t$(n))return n.dayOfWeek.includes(e.getDay());if(XF(n)){var r=ho(n.before,e),i=ho(n.after,e),s=r>0,a=i<0,l=ly(n.before,n.after);return l?a&&s:s||a}return ZF(n)?ho(e,n.after)>0:e$(n)?ho(n.before,e)>0:typeof n=="function"?n(e):!1})}function V5(e,t,n){var r=Object.keys(t).reduce(function(s,a){var l=t[a];return s$(e,l)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!U5(e,n)&&(i.outside=!0),i}function a$(e,t){for(var n=us(e[0]),r=$5(e[e.length-1]),i,s,a=n;a<=r;){var l=V5(a,t),c=!l.disabled&&!l.hidden;if(!c){a=Mi(a,1);continue}if(l.selected)return a;l.today&&!s&&(s=a),i||(i=a),a=Mi(a,1)}return s||i}var o$=365;function d6(e,t){var n=t.moveBy,r=t.direction,i=t.context,s=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=i.weekStartsOn,f=i.fromDate,p=i.toDate,m=i.locale,w={day:Mi,week:oy,month:Oa,year:iR,startOfWeek:function(k){return i.ISOWeek?Uu(k):yo(k,{locale:m,weekStartsOn:c})},endOfWeek:function(k){return i.ISOWeek?KN(k):B5(k,{locale:m,weekStartsOn:c})}},g=w[n](e,r==="after"?1:-1);r==="before"&&f?g=sR([f,g]):r==="after"&&p&&(g=aR([p,g]));var N=!0;if(s){var j=V5(g,s);N=!j.disabled&&!j.hidden}return N?g:l.count>o$?l.lastFocused:d6(g,{moveBy:n,direction:r,context:i,modifiers:s,retry:Tt(Tt({},l),{count:l.count+1})})}var f6=C.createContext(void 0);function l$(e){var t=Lp(),n=u6(),r=C.useState(),i=r[0],s=r[1],a=C.useState(),l=a[0],c=a[1],f=a$(t.displayMonths,n),p=i??(l&&t.isDateDisplayed(l))?l:f,m=function(){c(i),s(void 0)},w=function(k){s(k)},g=zn(),N=function(k,b){if(i){var S=d6(i,{moveBy:k,direction:b,context:g,modifiers:n});wr(i,S)||(t.goToDate(S,i),w(S))}},j={focusedDay:i,focusTarget:p,blur:m,focus:w,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return d.jsx(f6.Provider,{value:j,children:e.children})}function G5(){var e=C.useContext(f6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function c$(e,t){var n=u6(),r=V5(e,n,t);return r}var Y5=C.createContext(void 0);function u$(e){if(!Wg(e.initialProps)){var t={selected:void 0};return d.jsx(Y5.Provider,{value:t,children:e.children})}return d.jsx(d$,{initialProps:e.initialProps,children:e.children})}function d$(e){var t=e.initialProps,n=e.children,r=function(s,a,l){var c,f,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,a,l),a.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,s,a,l);return}(p=t.onSelect)===null||p===void 0||p.call(t,s,s,a,l)},i={selected:t.selected,onDayClick:r};return d.jsx(Y5.Provider,{value:i,children:n})}function h6(){var e=C.useContext(Y5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function f$(e,t){var n=zn(),r=h6(),i=q5(),s=H5(),a=G5(),l=a.focusDayAfter,c=a.focusDayBefore,f=a.focusWeekAfter,p=a.focusWeekBefore,m=a.blur,w=a.focus,g=a.focusMonthBefore,N=a.focusMonthAfter,j=a.focusYearBefore,k=a.focusYearAfter,b=a.focusStartOfWeek,S=a.focusEndOfWeek,L=function(Q){var $,z,ae,Pe;Wg(n)?($=r.onDayClick)===null||$===void 0||$.call(r,e,t,Q):Cp(n)?(z=i.onDayClick)===null||z===void 0||z.call(i,e,t,Q):Ap(n)?(ae=s.onDayClick)===null||ae===void 0||ae.call(s,e,t,Q):(Pe=n.onDayClick)===null||Pe===void 0||Pe.call(n,e,t,Q)},M=function(Q){var $;w(e),($=n.onDayFocus)===null||$===void 0||$.call(n,e,t,Q)},K=function(Q){var $;m(),($=n.onDayBlur)===null||$===void 0||$.call(n,e,t,Q)},oe=function(Q){var $;($=n.onDayMouseEnter)===null||$===void 0||$.call(n,e,t,Q)},Z=function(Q){var $;($=n.onDayMouseLeave)===null||$===void 0||$.call(n,e,t,Q)},R=function(Q){var $;($=n.onDayPointerEnter)===null||$===void 0||$.call(n,e,t,Q)},ee=function(Q){var $;($=n.onDayPointerLeave)===null||$===void 0||$.call(n,e,t,Q)},le=function(Q){var $;($=n.onDayTouchCancel)===null||$===void 0||$.call(n,e,t,Q)},O=function(Q){var $;($=n.onDayTouchEnd)===null||$===void 0||$.call(n,e,t,Q)},U=function(Q){var $;($=n.onDayTouchMove)===null||$===void 0||$.call(n,e,t,Q)},Y=function(Q){var $;($=n.onDayTouchStart)===null||$===void 0||$.call(n,e,t,Q)},J=function(Q){var $;($=n.onDayKeyUp)===null||$===void 0||$.call(n,e,t,Q)},xe=function(Q){var $;switch(Q.key){case"ArrowLeft":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":Q.preventDefault(),Q.stopPropagation(),f();break;case"ArrowUp":Q.preventDefault(),Q.stopPropagation(),p();break;case"PageUp":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?j():g();break;case"PageDown":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?k():N();break;case"Home":Q.preventDefault(),Q.stopPropagation(),b();break;case"End":Q.preventDefault(),Q.stopPropagation(),S();break}($=n.onDayKeyDown)===null||$===void 0||$.call(n,e,t,Q)},ye={onClick:L,onFocus:M,onBlur:K,onKeyDown:xe,onKeyUp:J,onMouseEnter:oe,onMouseLeave:Z,onPointerEnter:R,onPointerLeave:ee,onTouchCancel:le,onTouchEnd:O,onTouchMove:U,onTouchStart:Y};return ye}function h$(){var e=zn(),t=h6(),n=q5(),r=H5(),i=Wg(e)?t.selected:Cp(e)?n.selected:Ap(e)?r.selected:void 0;return i}function p$(e){return Object.values(Ma).includes(e)}function m$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(p$(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function g$(e,t){var n=Tt({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Tt(Tt({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function v$(e,t,n){var r,i,s,a=zn(),l=G5(),c=c$(e,t),f=f$(e,c),p=h$(),m=!!(a.onDayClick||a.mode!=="default");C.useEffect(function(){var oe;c.outside||l.focusedDay&&m&&wr(l.focusedDay,e)&&((oe=n.current)===null||oe===void 0||oe.focus())},[l.focusedDay,e,n,m,c.outside]);var w=m$(a,c).join(" "),g=g$(a,c),N=!!(c.outside&&!a.showOutsideDays||c.hidden),j=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:FF,k=d.jsx(j,{date:e,displayMonth:t,activeModifiers:c}),b={style:g,className:w,children:k,role:"gridcell"},S=l.focusTarget&&wr(l.focusTarget,e)&&!c.outside,L=l.focusedDay&&wr(l.focusedDay,e),M=Tt(Tt(Tt({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=L||S?0:-1,r)),f),K={isButton:m,isHidden:N,activeModifiers:c,selectedDays:p,buttonProps:M,divProps:b};return K}function y$(e){var t=C.useRef(null),n=v$(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(X0,Tt({name:"day",ref:t},n.buttonProps)):d.jsx("div",Tt({},n.divProps))}function w$(e){var t=e.number,n=e.dates,r=zn(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,p=f(Number(t),{locale:l});if(!i)return d.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:p});var m=c(Number(t),{locale:l}),w=function(g){i(t,n,g)};return d.jsx(X0,{name:"week-number","aria-label":m,className:a.weeknumber,style:s.weeknumber,onClick:w,children:p})}function x$(e){var t,n,r=zn(),i=r.styles,s=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:y$,f=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:w$,p;return a&&(p=d.jsx("td",{className:s.cell,style:i.cell,children:d.jsx(f,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:s.row,style:i.row,children:[p,e.dates.map(function(m){return d.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:m})},s9(m))})]})}function E_(e,t,n){for(var r=n!=null&&n.ISOWeek?KN(t):B5(t,n),i=n!=null&&n.ISOWeek?Uu(e):yo(e,n),s=ho(r,i),a=[],l=0;l<=s;l++)a.push(Mi(i,l));var c=a.reduce(function(f,p){var m=n!=null&&n.ISOWeek?QN(p):e6(p,n),w=f.find(function(g){return g.weekNumber===m});return w?(w.dates.push(p),f):(f.push({weekNumber:m,dates:[p]}),f)},[]);return c}function b$(e,t){var n=E_(us(e),$5(e),t);if(t!=null&&t.useFixedWeeks){var r=o9(e,t);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=oy(s,6-r),l=E_(oy(s,1),a,t);n.push.apply(n,l)}}return n}function _$(e){var t,n,r,i=zn(),s=i.locale,a=i.classNames,l=i.styles,c=i.hideHead,f=i.fixedWeeks,p=i.components,m=i.weekStartsOn,w=i.firstWeekContainsDate,g=i.ISOWeek,N=b$(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:g,locale:s,weekStartsOn:m,firstWeekContainsDate:w}),j=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:RF,k=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:x$,b=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:DF;return d.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(j,{}),d.jsx("tbody",{className:a.tbody,style:l.tbody,children:N.map(function(S){return d.jsx(k,{displayMonth:e.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),d.jsx(b,{displayMonth:e.displayMonth})]})}function S$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var N$=S$()?C.useLayoutEffect:C.useEffect,Av=!1,j$=0;function C_(){return"react-day-picker-".concat(++j$)}function k$(e){var t,n=e??(Av?C_():null),r=C.useState(n),i=r[0],s=r[1];return N$(function(){i===null&&s(C_())},[]),C.useEffect(function(){Av===!1&&(Av=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function E$(e){var t,n,r=zn(),i=r.dir,s=r.classNames,a=r.styles,l=r.components,c=Lp().displayMonths,f=k$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[s.month],w=a.month,g=e.displayIndex===0,N=e.displayIndex===c.length-1,j=!g&&!N;i==="rtl"&&(t=[g,N],N=t[0],g=t[1]),g&&(m.push(s.caption_start),w=Tt(Tt({},w),a.caption_start)),N&&(m.push(s.caption_end),w=Tt(Tt({},w),a.caption_end)),j&&(m.push(s.caption_between),w=Tt(Tt({},w),a.caption_between));var k=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:IF;return d.jsxs("div",{className:m.join(" "),style:w,children:[d.jsx(k,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(_$,{id:p,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function C$(e){var t=zn(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function A$(e){var t,n,r=e.initialProps,i=zn(),s=G5(),a=Lp(),l=C.useState(!1),c=l[0],f=l[1];C.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),f(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var m=Tt(Tt({},i.styles.root),i.style),w=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,j){var k;return Tt(Tt({},N),(k={},k[j]=r[j],k))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:C$;return d.jsx("div",Tt({className:p.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},w,{children:d.jsx(g,{children:a.displayMonths.map(function(N,j){return d.jsx(E$,{displayIndex:j,displayMonth:N},j)})})}))}function L$(e){var t=e.children,n=eF(e,["children"]);return d.jsx(wF,{initialProps:n,children:d.jsx(AF,{children:d.jsx(u$,{initialProps:n,children:d.jsx($F,{initialProps:n,children:d.jsx(zF,{initialProps:n,children:d.jsx(JF,{children:d.jsx(l$,{children:t})})})})})})})}function P$(e){return d.jsx(L$,Tt({},e,{children:d.jsx(A$,{initialProps:e})}))}function T$({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){var Ne;const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para días seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualización de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para días con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los días seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=RS(),[s,a]=C.useState([]),[l,c]=C.useState(void 0),[f,p]=C.useState(!0),[m,w]=C.useState(!1),[g,N]=C.useState(null),[j,k]=C.useState(!1),[b,S]=C.useState([]),[L,M]=C.useState([]),[K,oe]=C.useState([]),[Z,R]=C.useState([]),{user:ee}=Rs();C.useEffect(()=>{ee&&(xe(),z(),Q(),ye(),$())},[ee,i]);const le=C.useMemo(()=>{console.log("🚀 SIMPLE: Calculando fechas por miembro...");const ie=new Map;return s.forEach(pe=>{const he=new Set;pe.dates.forEach(je=>{he.add(cn(je,"yyyy-MM-dd"))}),ie.set(pe.userId,he),console.log(`${pe.memberName}: ${he.size} fechas marcadas`)}),console.log(`✅ Total miembros procesados: ${ie.size}`),ie},[s]),O=C.useMemo(()=>{console.log("📅 SIMPLE: Procesando eventos...");const ie=new Map,pe=new Map;return L.forEach(he=>{ie.has(he.user_id)||ie.set(he.user_id,new Set),ie.get(he.user_id).add(cn(new Date(he.date),"yyyy-MM-dd"))}),Z.forEach(he=>{pe.has(he.user_id)||pe.set(he.user_id,new Set),pe.get(he.user_id).add(cn(new Date(he.date),"yyyy-MM-dd"))}),console.log(`✅ Eventos procesados - Grupo: ${ie.size} usuarios, Externos: ${pe.size} usuarios`),{groupEvents:ie,externalEvents:pe}},[L,Z]),U=C.useCallback(ie=>{const pe=cn(ie,"yyyy-MM-dd"),he=e.filter(je=>{var ue,G,$e;if(je.user_id){const Fe=((ue=le.get(je.user_id))==null?void 0:ue.has(pe))??!1,De=((G=O.groupEvents.get(je.user_id))==null?void 0:G.has(pe))??!1,Be=(($e=O.externalEvents.get(je.user_id))==null?void 0:$e.has(pe))??!1;return Fe&&!De&&!Be}else{const Fe=s.find(Be=>Be.memberId===je.id),De=(Fe==null?void 0:Fe.dates.some(Be=>cn(Be,"yyyy-MM-dd")===pe))??!1;return console.log(`🎭 Local member ${je.name} for ${pe}: availability=${De}, dates:`,Fe==null?void 0:Fe.dates),De}});return console.log(`📅 Available members for ${pe}:`,he.map(je=>`${je.name} (${je.member_type||"registered"})`)),he},[e,le,O,s]),Y=C.useCallback(ie=>{const pe=U(ie),he=e.filter(G=>G.role_in_group==="principal"),je=pe.filter(G=>G.role_in_group==="sustituto"),ue=new Set;return he.forEach(G=>{G.instruments.forEach($e=>{ue.add($e.id)})}),Array.from(ue).every(G=>pe.some(Fe=>Fe.role_in_group==="principal"&&Fe.instruments.some(De=>De.id===G))?!0:je.some(De=>De.instruments.some(Be=>Be.id===G)))},[e,U]),J=C.useMemo(()=>{if(!t)return[];console.log("🎯 SIMPLE: Calculando fechas disponibles del grupo (con sustitutos)...");const ie=new Set;le.forEach(je=>{je.forEach(ue=>ie.add(ue))});const pe=e.filter(je=>je.role_in_group==="principal");if(pe.length===0)return[];const he=[];return ie.forEach(je=>{const ue=new Date(je);if(Y(ue)){he.push(ue);const G=U(ue),$e=G.filter(De=>De.role_in_group==="principal"),Fe=G.filter(De=>De.role_in_group==="sustituto");console.log(`📅 ${je}: ✅ Disponible - Principales: ${$e.length}/${pe.length}, Sustitutos: ${Fe.length}`)}else{const G=U(ue),$e=G.filter(De=>De.role_in_group==="principal"),Fe=G.filter(De=>De.role_in_group==="sustituto");console.log(`📅 ${je}: ❌ NO disponible - Principales: ${$e.length}/${pe.length}, Sustitutos: ${Fe.length} (instrumentos no cubiertos)`)}}),console.log(`✅ SIMPLE: ${he.length} fechas disponibles para el grupo (considerando sustitutos)`),he},[e,le,U,t,Y]);C.useEffect(()=>{t&&J.length>=0&&(S(J),t(J))},[J,t]),C.useEffect(()=>{t&&t(b)},[b,t]);const xe=C.useCallback(async()=>{const ie=await Bn(async()=>await et.from("users").select("role").eq("id",ee==null?void 0:ee.id).single(),"Error checking admin status");ie&&k(ie.role==="admin")},[ee==null?void 0:ee.id]),ye=async()=>{const ie=await Bn(async()=>await et.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(ie){const pe=[];ie.forEach(he=>{var je;(je=he.event_members)==null||je.forEach(ue=>{pe.push({event_id:he.id,date:he.date,user_id:ue.user_id,name:he.name,group_id:he.group_id})})}),M(pe)}},Q=async()=>{const ie=await Bn(async()=>await et.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(ie){const pe=ie.map(he=>({event_id:he.id,date:he.date,user_id:"",name:he.name,group_id:he.group_id}));oe(pe)}},$=async()=>{console.log("=== INICIO fetchMemberExternalEvents ==="),console.log("GroupId actual:",i);const ie=await et.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(console.log("4. Query completa:",ie.data),ie.error){console.error("Error al obtener eventos externos:",ie.error);return}const pe=ie.data||[],he=[];pe.forEach(je=>{var ue;(ue=je.event_members)==null||ue.forEach(G=>{he.push({user_id:G.user_id,date:je.date})})}),R(he),console.log("Eventos externos formateados:",he),console.log("=== FIN fetchMemberExternalEvents ===")},z=async()=>{if(i){p(!0);try{const ie=e.filter(je=>je.user_id!==null).map(je=>je.user_id),pe=e.filter(je=>je.user_id===null).map(je=>je.id),he=await Bn(async()=>{if(ie.length===0&&pe.length===0)return[];let je=et.from("member_availability").select("user_id, group_member_id, date");const ue=[];return ie.length>0&&ue.push(`user_id.in.(${ie.join(",")})`),pe.length>0&&ue.push(`group_member_id.in.(${pe.join(",")})`),ue.length>0&&(je=je.or(ue.join(","))),je.order("date")},"Error fetching availabilities");if(he){console.log("Raw availability response:",he),console.log("Members being processed:",e);const je=e.map(ue=>{const G=he.filter(Fe=>ue.user_id&&Fe.user_id===ue.user_id||!ue.user_id&&Fe.group_member_id===ue.id),$e={userId:ue.user_id,memberId:ue.id,memberName:ue.name||"Unknown Member",memberType:ue.member_type||"registered",dates:G.map(Fe=>new Date(Fe.date)),instruments:ue.instruments||[],roleInBand:ue.role_in_group||"principal"};return console.log(`Member: ${ue.name} (${ue.member_type||"registered"}), Availability items:`,G,"Formatted:",$e),$e});console.log("Final formatted availabilities:",je),a(je)}}catch(ie){console.error("Error fetching availabilities:",ie),Le.error("Error al obtener las disponibilidades")}finally{p(!1)}}},ae=ie=>K.filter(pe=>wr(new Date(pe.date),ie)),Pe=()=>{const ie=e.find(pe=>pe.user_id===(ee==null?void 0:ee.id));return j||(ie==null?void 0:ie.role_in_group)==="principal"},[P,H]=C.useState(!1),re=C.useRef(null),ce=async(ie=!1)=>{try{const pe=window.scrollY;return ie?H(!0):w(!0),await new Promise(he=>setTimeout(he,50)),await Promise.all([z(),ye(),Q(),$()]),window.scrollTo(0,pe),ie||Le.success("Calendario actualizado correctamente"),!0}catch(pe){return console.error("Error al actualizar datos del calendario:",pe),ie||Le.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{ie||w(!1),H(!1)},500)}},fe=async ie=>{var G,$e;if(console.log(`Fecha seleccionada: ${cn(ie,"dd/MM/yyyy")}`),!ee){Le.error("Debes iniciar sesión para gestionar la disponibilidad");return}if(m)return;w(!0);const pe=g||((G=e.find(Fe=>Fe.user_id===ee.id))==null?void 0:G.id),he=e.find(Fe=>Fe.id===pe);if(!he){Le.error("Miembro no encontrado"),w(!1);return}const je=e.find(Fe=>Fe.user_id===ee.id);if(!(j||(je==null?void 0:je.role_in_group)==="principal"||he.user_id===ee.id)){Le.error("No tienes permisos para gestionar esta disponibilidad"),w(!1);return}if(he.user_id&&L.some(De=>De.user_id===he.user_id&&wr(new Date(De.date),ie))){Le.error("No puedes cambiar la disponibilidad en fechas con eventos programados"),w(!1);return}try{const Fe=($e=s.find(Be=>Be.memberId===he.id))==null?void 0:$e.dates.some(Be=>wr(Be,ie)),De=cn(ie,"yyyy-MM-dd");if(Fe)try{let Be;if(he.user_id?(console.log("Deleting availability for registered member:",he.name,he.user_id,De),Be=await et.from("member_availability").delete().eq("user_id",he.user_id).eq("date",De)):(console.log("Deleting availability for local member:",he.name,he.id,De),Be=await et.from("member_availability").delete().eq("group_member_id",he.id).eq("date",De)),Be.error){console.error("Error al eliminar disponibilidad:",Be.error),Le.error("Hubo un problema al guardar"),w(!1);return}c(ie),Le.success(`Fecha ${cn(ie,"dd/MM/yyyy")} eliminada de la disponibilidad`),console.log("Updating local state - removing date for member:",he.name),a(be=>{console.log("Current availabilities before delete:",be);const Ie=be.map(We=>{if(We.memberId===he.id){const He=We.dates.filter(nt=>!wr(nt,ie));return console.log("Updated dates for",We.memberName,":",He),{...We,dates:He}}return We});return console.log("Updated availabilities after delete:",Ie),Ie})}catch(Be){console.error("Error inesperado al eliminar disponibilidad:",Be),Le.error("Ha ocurrido un error al procesar tu solicitud")}else try{let Be;if(he.user_id?(console.log("Adding availability for registered member:",he.name,he.user_id,De),Be=await et.from("member_availability").insert([{user_id:he.user_id,date:De}])):(console.log("Adding availability for local member:",he.name,he.id,De),Be=await et.from("member_availability").insert([{group_member_id:he.id,date:De}])),Be.error){console.error("Error al insertar disponibilidad:",Be.error),Le.error("Hubo un problema al guardar"),w(!1);return}c(ie),Le.success(`Fecha ${cn(ie,"dd/MM/yyyy")} añadida a la disponibilidad`),console.log("Updating local state - adding date for member:",he.name),a(be=>{console.log("Current availabilities before add:",be);const Ie=be.map(We=>{if(We.memberId===he.id){const He=[...We.dates,ie];return console.log("Updated dates for",We.memberName,":",He),{...We,dates:He}}return We});return console.log("Updated availabilities after add:",Ie),Ie})}catch(Be){console.error("Error inesperado al añadir disponibilidad:",Be),Le.error("Ha ocurrido un error al procesar tu solicitud")}}catch(Fe){console.error("Error en handleDayClick:",Fe),Le.error("Ha ocurrido un error al procesar tu solicitud")}finally{w(!1)}};function Ee(ie){const pe=U(ie),he=cn(ie,"yyyy-MM-dd"),je=e.filter(G=>{var $e;return G.user_id&&(($e=O.groupEvents.get(G.user_id))==null?void 0:$e.has(he))}),ue=[...pe];return je.forEach(G=>{ue.find($e=>$e.id===G.id)||ue.push(G)}),ue}const Ce=ie=>{var ft,Nt;const{date:pe}=ie,he=cn(pe,"yyyy-MM-dd"),je=Ee(pe),ue=U(pe),G=g||((ft=e.find(it=>it.user_id===(ee==null?void 0:ee.id)))==null?void 0:ft.id),$e=e.find(it=>it.id===G),Fe=je.some(it=>it.id===G),De=($e==null?void 0:$e.user_id)&&((Nt=O.externalEvents.get($e.user_id))==null?void 0:Nt.has(he))||!1,Be=je.filter(it=>it.id!==G),be=Be.length,Ie=Be.filter(it=>{var St;return it.user_id&&((St=O.externalEvents.get(it.user_id))==null?void 0:St.has(he))}).length,We=Y(pe),He=ae(pe),nt=He.length>0,dt=De||Ie>0;return d.jsxs("div",{className:`day-content ${We?"group-available":""} ${nt?"has-event":""} ${dt?"has-external-events":""} ${l&&wr(pe,l)?"selected-day":""}`,children:[d.jsx("span",{className:`${l&&wr(pe,l)?"text-indigo-900 font-bold":""}`,children:pe.getDate()}),(Fe||be>0||nt)&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"availability-dots",children:[Fe&&d.jsx("div",{className:`availability-dot you ${De?"border border-orange-500 bg-orange-200":""}`}),Be.slice(0,3).map((it,St)=>{const Ze=Z.some(Zt=>Zt.user_id===it.user_id&&wr(new Date(Zt.date),pe));return d.jsx("div",{className:`availability-dot others ${Ze?"border border-orange-500 bg-orange-200":""}`},St)})]}),d.jsxs("div",{className:"day-tooltip",children:[d.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[cn(pe,"MMMM d, yyyy"),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[We&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),nt&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:He.length>1?`${He[0].name} y ${He.length-1} más`:He[0].name}),dt&&d.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[Ie+(De?1:0)," miembro(s) con eventos externos"]})]})]}),je.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),je.map(it=>{var Zt,Mt,fr;const St=ue.some(Rt=>Rt.id===it.id),Ze=it.user_id&&((Zt=O.externalEvents.get(it.user_id))==null?void 0:Zt.has(he))||!1;return d.jsx("div",{className:`tooltip-member ${it.id===(g||((Mt=e.find(Rt=>Rt.user_id===(ee==null?void 0:ee.id)))==null?void 0:Mt.id))?"you":"other"}`,children:d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsx("span",{className:"font-medium",children:it.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[it.role_in_group==="sustituto"&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),St&&!Ze&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),Ze&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),it.id===(g||((fr=e.find(Rt=>Rt.user_id===(ee==null?void 0:ee.id)))==null?void 0:fr.id))&&d.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"Tú"})]})]}),it.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:it.instruments.map((Rt,sn)=>d.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1"}),Rt.name,sn<it.instruments.length-1&&", "]},`${it.id}-${Rt.id}-${sn}`))})]})},it.id)})]})]})]})]})},te=()=>{const pe=J.filter($e=>ae($e).length===0).sort(($e,Fe)=>$e.getTime()-Fe.getTime()).reduce(($e,Fe)=>{const De=cn(Fe,"MMMM yyyy",{locale:Zd});$e[De]||($e[De]={withPrincipals:[],withSubstitutes:[]});const Be=Ee(Fe);return e.filter(Ie=>Ie.role_in_group==="principal").filter(Ie=>!Be.some(We=>We.user_id===Ie.user_id)).length===0?$e[De].withPrincipals.push(Fe):$e[De].withSubstitutes.push(Fe),$e},{});let he=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(pe).length===0?he+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(pe).forEach(([$e,Fe])=>{he+=`${$e.toUpperCase()}
`,Fe.withPrincipals.length>0&&(he+=`Fechas con miembros principales:
`,he+=Fe.withPrincipals.map(De=>`${cn(De,"d(EEE)",{locale:Zd})}`).join(", "),he+=`

`),Fe.withSubstitutes.length>0&&(he+=`Fechas con sustitutos:
`,he+=Fe.withSubstitutes.map(De=>`${cn(De,"d(EEE)",{locale:Zd})}`).join(", "),he+=`

`),he+=`
`});const je=new Blob([he],{type:"text/plain;charset=utf-8"}),ue=window.URL.createObjectURL(je),G=document.createElement("a");G.href=ue,G.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${cn(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(ue)};return f?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx(al,{className:"w-6 h-6 animate-spin text-indigo-600"})}):d.jsxs("div",{className:"space-y-6",children:[(j||Pe())&&e.length>0&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),d.jsxs("div",{className:"relative w-full max-w-xs",children:[d.jsx("select",{id:"member-select",value:g||((Ne=e.find(ie=>ie.user_id===(ee==null?void 0:ee.id)))==null?void 0:Ne.id)||"",onChange:ie=>{const pe=e.find(he=>he.user_id===(ee==null?void 0:ee.id));N(ie.target.value===(pe==null?void 0:pe.id)?null:ie.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(ie=>d.jsxs("option",{value:ie.id,children:[ie.name," ",ie.user_id===(ee==null?void 0:ee.id)?"(Tú)":""," ",ie.user_id?"":"(Local)"]},ie.id))}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:d.jsx(YD,{className:"h-4 w-4"})})]})]}),d.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),d.jsxs("div",{ref:re,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[d.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${m||P?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/20"}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[d.jsx(al,{className:"w-6 h-6 animate-spin text-indigo-600"}),d.jsx("span",{children:"Actualizando calendario..."})]})]}),d.jsx(P$,{mode:"single",selected:l,onSelect:c,onDayClick:fe,modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:Ce},weekStartsOn:1,locale:Zd})]}),d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),d.jsxs("button",{onClick:ie=>{ie.preventDefault(),ce()},disabled:m,className:`px-3 py-1 text-sm ${m?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[d.jsx("span",{className:"mr-1",children:m?"...":"↻"}),m?"Actualizando...":"Actualizar"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:"✓"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs("button",{onClick:te,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(H0,{className:"w-4 h-4 mr-2"}),"Descargar Fechas Disponibles del Grupo"]})})]})}function I$({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r}){const i=t.filter(l=>{const c=e.find(f=>f.id===l.memberId);return(c==null?void 0:c.role_in_group)==="principal"}),s=t.filter(l=>{const c=e.find(f=>f.id===l.memberId);return(c==null?void 0:c.role_in_group)==="sustituto"}),a=(l,c)=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:c}),l.map(f=>{const p=e.find(m=>m.id===f.memberId);return p?d.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${f.isAvailable?"bg-gray-50 hover:bg-gray-100":"bg-red-50"}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",checked:f.selected,onChange:m=>n(f.memberId,m.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${!f.isAvailable&&!f.selected?"opacity-50":""}`,disabled:!f.isAvailable&&!f.selected}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-gray-900",children:p.name}),!f.isAvailable&&d.jsxs("span",{className:"inline-flex items-center text-xs text-red-700 bg-red-100 px-2 py-0.5 rounded-full",children:[d.jsx(r_,{className:"w-3 h-3 mr-1"}),"No disponible"]})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1"}),p.instruments.map(m=>m.name).join(", ")]})]})]})},f.memberId):null})]});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),d.jsxs("div",{className:"space-y-6",children:[a(i,"Miembros Principales"),s.length>0&&a(s,"Sustitutos")]}),r&&d.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[d.jsx(r_,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),d.jsx("p",{children:"Por favor, asegúrate de que todos los instrumentos estén cubiertos por los miembros seleccionados. Si un miembro principal no está disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var Q0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Q0.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",m=1,w=2,g=4,N=1,j=2,k=1,b=2,S=4,L=8,M=16,K=32,oe=64,Z=128,R=256,ee=512,le=30,O="...",U=800,Y=16,J=1,xe=2,ye=3,Q=1/0,$=9007199254740991,z=17976931348623157e292,ae=NaN,Pe=4294967295,P=Pe-1,H=Pe>>>1,re=[["ary",Z],["bind",k],["bindKey",b],["curry",L],["curryRight",M],["flip",ee],["partial",K],["partialRight",oe],["rearg",R]],ce="[object Arguments]",fe="[object Array]",Ee="[object AsyncFunction]",Ce="[object Boolean]",te="[object Date]",Ne="[object DOMException]",ie="[object Error]",pe="[object Function]",he="[object GeneratorFunction]",je="[object Map]",ue="[object Number]",G="[object Null]",$e="[object Object]",Fe="[object Promise]",De="[object Proxy]",Be="[object RegExp]",be="[object Set]",Ie="[object String]",We="[object Symbol]",He="[object Undefined]",nt="[object WeakMap]",dt="[object WeakSet]",ft="[object ArrayBuffer]",Nt="[object DataView]",it="[object Float32Array]",St="[object Float64Array]",Ze="[object Int8Array]",Zt="[object Int16Array]",Mt="[object Int32Array]",fr="[object Uint8Array]",Rt="[object Uint8ClampedArray]",sn="[object Uint16Array]",li="[object Uint32Array]",en=/\b__p \+= '';/g,aa=/\b(__p \+=) '' \+/g,On=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ci=/&(?:amp|lt|gt|quot|#39);/g,Sn=/[&<>"']/g,Yt=RegExp(ci.source),wt=RegExp(Sn.source),zt=/<%-([\s\S]+?)%>/g,hr=/<%([\s\S]+?)%>/g,an=/<%=([\s\S]+?)%>/g,rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dr=/^\w*$/,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kn=/[\\^$.*+?()[\]{}|]/g,ir=RegExp(Kn.source),En=/^\s+/,Tn=/\s/,Cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Jn=/\{\n\/\* \[wrapped with (.+)\] \*/,Ui=/,? & /,ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ms=/[()=,{}\[\]\/\s]/,gs=/\\(\\)?/g,vs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ys=/\w*$/,zi=/^[-+]0x[0-9a-f]+$/i,Fs=/^0b[01]+$/i,So=/^\[object .+?Constructor\]$/,cl=/^0o[0-7]+$/i,ul=/^(?:0|[1-9]\d*)$/,dl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oa=/($^)/,Ku=/['\n\r\u2028\u2029\\]/g,fl="\\ud800-\\udfff",Of="\\u0300-\\u036f",hl="\\ufe20-\\ufe2f",Ju="\\u20d0-\\u20ff",Xu=Of+hl+Ju,pl="\\u2700-\\u27bf",Qu="a-z\\xdf-\\xf6\\xf8-\\xff",Zu="\\xac\\xb1\\xd7\\xf7",Mf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ml="\\u2000-\\u206f",Rf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xn="A-Z\\xc0-\\xd6\\xd8-\\xde",Bc="\\ufe0e\\ufe0f",Uc=Zu+Mf+ml+Rf,gl="['’]",zc="["+fl+"]",ed="["+Uc+"]",ui="["+Xu+"]",No="\\d+",di="["+pl+"]",vl="["+Qu+"]",qc="[^"+fl+Uc+No+pl+Qu+Xn+"]",Wc="\\ud83c[\\udffb-\\udfff]",td="(?:"+ui+"|"+Wc+")",nd="[^"+fl+"]",yl="(?:\\ud83c[\\udde6-\\uddff]){2}",Hc="[\\ud800-\\udbff][\\udc00-\\udfff]",$s="["+Xn+"]",rd="\\u200d",id="(?:"+vl+"|"+qc+")",Ff="(?:"+$s+"|"+qc+")",Bs="(?:"+gl+"(?:d|ll|m|re|s|t|ve))?",jo="(?:"+gl+"(?:D|LL|M|RE|S|T|VE))?",ko=td+"?",Vc="["+Bc+"]?",Ur="(?:"+rd+"(?:"+[nd,yl,Hc].join("|")+")"+Vc+ko+")*",$f="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lt=Vc+ko+Ur,Bf="(?:"+[di,yl,Hc].join("|")+")"+Lt,Uf="(?:"+[nd+ui+"?",ui,yl,Hc,zc].join("|")+")",Us=RegExp(gl,"g"),ad=RegExp(ui,"g"),wl=RegExp(Wc+"(?="+Wc+")|"+Uf+Lt,"g"),xl=RegExp([$s+"?"+vl+"+"+Bs+"(?="+[ed,$s,"$"].join("|")+")",Ff+"+"+jo+"(?="+[ed,$s+id,"$"].join("|")+")",$s+"?"+id+"+"+Bs,$s+"+"+jo,sd,$f,No,Bf].join("|"),"g"),Gc=RegExp("["+rd+fl+Xu+Bc+"]"),zf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wf=-1,gn={};gn[it]=gn[St]=gn[Ze]=gn[Zt]=gn[Mt]=gn[fr]=gn[Rt]=gn[sn]=gn[li]=!0,gn[ce]=gn[fe]=gn[ft]=gn[Ce]=gn[Nt]=gn[te]=gn[ie]=gn[pe]=gn[je]=gn[ue]=gn[$e]=gn[Be]=gn[be]=gn[Ie]=gn[nt]=!1;var on={};on[ce]=on[fe]=on[ft]=on[Nt]=on[Ce]=on[te]=on[it]=on[St]=on[Ze]=on[Zt]=on[Mt]=on[je]=on[ue]=on[$e]=on[Be]=on[be]=on[Ie]=on[We]=on[fr]=on[Rt]=on[sn]=on[li]=!0,on[ie]=on[pe]=on[nt]=!1;var za={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Hf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Eo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bl=parseFloat,od=parseInt,Kc=typeof si=="object"&&si&&si.Object===Object&&si,ld=typeof self=="object"&&self&&self.Object===Object&&self,pr=Kc||ld||Function("return this")(),qi=t&&!t.nodeType&&t,Qr=qi&&!0&&e&&!e.nodeType&&e,cd=Qr&&Qr.exports===qi,zs=cd&&Kc.process,Qn=function(){try{var Se=Qr&&Qr.require&&Qr.require("util").types;return Se||zs&&zs.binding&&zs.binding("util")}catch{}}(),_l=Qn&&Qn.isArrayBuffer,qa=Qn&&Qn.isDate,ud=Qn&&Qn.isMap,Co=Qn&&Qn.isRegExp,dd=Qn&&Qn.isSet,Sl=Qn&&Qn.isTypedArray;function Or(Se,qe,Oe){switch(Oe.length){case 0:return Se.call(qe);case 1:return Se.call(qe,Oe[0]);case 2:return Se.call(qe,Oe[0],Oe[1]);case 3:return Se.call(qe,Oe[0],Oe[1],Oe[2])}return Se.apply(qe,Oe)}function fd(Se,qe,Oe,ut){for(var xt=-1,Ft=Se==null?0:Se.length;++xt<Ft;){var Rn=Se[xt];qe(ut,Rn,Oe(Rn),Se)}return ut}function Mr(Se,qe){for(var Oe=-1,ut=Se==null?0:Se.length;++Oe<ut&&qe(Se[Oe],Oe,Se)!==!1;);return Se}function Jc(Se,qe){for(var Oe=Se==null?0:Se.length;Oe--&&qe(Se[Oe],Oe,Se)!==!1;);return Se}function Nl(Se,qe){for(var Oe=-1,ut=Se==null?0:Se.length;++Oe<ut;)if(!qe(Se[Oe],Oe,Se))return!1;return!0}function ws(Se,qe){for(var Oe=-1,ut=Se==null?0:Se.length,xt=0,Ft=[];++Oe<ut;){var Rn=Se[Oe];qe(Rn,Oe,Se)&&(Ft[xt++]=Rn)}return Ft}function jl(Se,qe){var Oe=Se==null?0:Se.length;return!!Oe&&Xe(Se,qe,0)>-1}function Wa(Se,qe,Oe){for(var ut=-1,xt=Se==null?0:Se.length;++ut<xt;)if(Oe(qe,Se[ut]))return!0;return!1}function fn(Se,qe){for(var Oe=-1,ut=Se==null?0:Se.length,xt=Array(ut);++Oe<ut;)xt[Oe]=qe(Se[Oe],Oe,Se);return xt}function Wi(Se,qe){for(var Oe=-1,ut=qe.length,xt=Se.length;++Oe<ut;)Se[xt+Oe]=qe[Oe];return Se}function qs(Se,qe,Oe,ut){var xt=-1,Ft=Se==null?0:Se.length;for(ut&&Ft&&(Oe=Se[++xt]);++xt<Ft;)Oe=qe(Oe,Se[xt],xt,Se);return Oe}function Xc(Se,qe,Oe,ut){var xt=Se==null?0:Se.length;for(ut&&xt&&(Oe=Se[--xt]);xt--;)Oe=qe(Oe,Se[xt],xt,Se);return Oe}function x(Se,qe){for(var Oe=-1,ut=Se==null?0:Se.length;++Oe<ut;)if(qe(Se[Oe],Oe,Se))return!0;return!1}var I=Pt("length");function se(Se){return Se.split("")}function me(Se){return Se.match(ki)||[]}function Te(Se,qe,Oe){var ut;return Oe(Se,function(xt,Ft,Rn){if(qe(xt,Ft,Rn))return ut=Ft,!1}),ut}function ze(Se,qe,Oe,ut){for(var xt=Se.length,Ft=Oe+(ut?1:-1);ut?Ft--:++Ft<xt;)if(qe(Se[Ft],Ft,Se))return Ft;return-1}function Xe(Se,qe,Oe){return qe===qe?Gi(Se,qe,Oe):ze(Se,_t,Oe)}function ct(Se,qe,Oe,ut){for(var xt=Oe-1,Ft=Se.length;++xt<Ft;)if(ut(Se[xt],qe))return xt;return-1}function _t(Se){return Se!==Se}function Dt(Se,qe){var Oe=Se==null?0:Se.length;return Oe?er(Se,qe)/Oe:ae}function Pt(Se){return function(qe){return qe==null?n:qe[Se]}}function Kt(Se){return function(qe){return Se==null?n:Se[qe]}}function Mn(Se,qe,Oe,ut,xt){return xt(Se,function(Ft,Rn,hn){Oe=ut?(ut=!1,Ft):qe(Oe,Ft,Rn,hn)}),Oe}function Zn(Se,qe){var Oe=Se.length;for(Se.sort(qe);Oe--;)Se[Oe]=Se[Oe].value;return Se}function er(Se,qe){for(var Oe,ut=-1,xt=Se.length;++ut<xt;){var Ft=qe(Se[ut]);Ft!==n&&(Oe=Oe===n?Ft:Oe+Ft)}return Oe}function Ar(Se,qe){for(var Oe=-1,ut=Array(Se);++Oe<Se;)ut[Oe]=qe(Oe);return ut}function Lr(Se,qe){return fn(qe,function(Oe){return[Oe,Se[Oe]]})}function Hi(Se){return Se&&Se.slice(0,ca(Se)+1).replace(En,"")}function In(Se){return function(qe){return Se(qe)}}function Vi(Se,qe){return fn(qe,function(Oe){return Se[Oe]})}function Ha(Se,qe){return Se.has(qe)}function kl(Se,qe){for(var Oe=-1,ut=Se.length;++Oe<ut&&Xe(qe,Se[Oe],0)>-1;);return Oe}function El(Se,qe){for(var Oe=Se.length;Oe--&&Xe(qe,Se[Oe],0)>-1;);return Oe}function Cl(Se,qe){for(var Oe=Se.length,ut=0;Oe--;)Se[Oe]===qe&&++ut;return ut}var Qc=Kt(za),Zc=Kt(Hf);function Al(Se){return"\\"+Yc[Se]}function Rr(Se,qe){return Se==null?n:Se[qe]}function xs(Se){return Gc.test(Se)}function Ll(Se){return zf.test(Se)}function Pl(Se){for(var qe,Oe=[];!(qe=Se.next()).done;)Oe.push(qe.value);return Oe}function Ao(Se){var qe=-1,Oe=Array(Se.size);return Se.forEach(function(ut,xt){Oe[++qe]=[xt,ut]}),Oe}function Zr(Se,qe){return function(Oe){return Se(qe(Oe))}}function Ws(Se,qe){for(var Oe=-1,ut=Se.length,xt=0,Ft=[];++Oe<ut;){var Rn=Se[Oe];(Rn===qe||Rn===p)&&(Se[Oe]=p,Ft[xt++]=Oe)}return Ft}function Va(Se){var qe=-1,Oe=Array(Se.size);return Se.forEach(function(ut){Oe[++qe]=ut}),Oe}function hd(Se){var qe=-1,Oe=Array(Se.size);return Se.forEach(function(ut){Oe[++qe]=[ut,ut]}),Oe}function Gi(Se,qe,Oe){for(var ut=Oe-1,xt=Se.length;++ut<xt;)if(Se[ut]===qe)return ut;return-1}function Tl(Se,qe,Oe){for(var ut=Oe+1;ut--;)if(Se[ut]===qe)return ut;return ut}function la(Se){return xs(Se)?hi(Se):I(Se)}function fi(Se){return xs(Se)?ei(Se):se(Se)}function ca(Se){for(var qe=Se.length;qe--&&Tn.test(Se.charAt(qe)););return qe}var Lo=Kt(Eo);function hi(Se){for(var qe=wl.lastIndex=0;wl.test(Se);)++qe;return qe}function ei(Se){return Se.match(wl)||[]}function Ga(Se){return Se.match(xl)||[]}var ua=function Se(qe){qe=qe==null?pr:pi.defaults(pr.Object(),qe,pi.pick(pr,qf));var Oe=qe.Array,ut=qe.Date,xt=qe.Error,Ft=qe.Function,Rn=qe.Math,hn=qe.Object,Po=qe.RegExp,To=qe.String,Pr=qe.TypeError,bs=Oe.prototype,Io=Ft.prototype,_s=hn.prototype,Hs=qe["__core-js_shared__"],Ss=Io.toString,tn=_s.hasOwnProperty,Yi=0,Ei=function(){var o=/[^.]+$/.exec(Hs&&Hs.keys&&Hs.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),vn=_s.toString,An=Ss.call(hn),sr=pr._,xr=Po("^"+Ss.call(tn).replace(Kn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ki=cd?qe.Buffer:n,Ji=qe.Symbol,da=qe.Uint8Array,eu=Ki?Ki.allocUnsafe:n,Il=Zr(hn.getPrototypeOf,hn),tu=hn.create,mi=_s.propertyIsEnumerable,ti=bs.splice,nu=Ji?Ji.isConcatSpreadable:n,Ya=Ji?Ji.iterator:n,Ka=Ji?Ji.toStringTag:n,Do=function(){try{var o=du(hn,"defineProperty");return o({},"",{}),o}catch{}}(),pd=qe.clearTimeout!==pr.clearTimeout&&qe.clearTimeout,Vf=ut&&ut.now!==pr.Date.now&&ut.now,Op=qe.setTimeout!==pr.setTimeout&&qe.setTimeout,Dl=Rn.ceil,Ol=Rn.floor,Ml=hn.getOwnPropertySymbols,Gf=Ki?Ki.isBuffer:n,Mp=qe.isFinite,Xg=bs.join,Rp=Zr(hn.keys,hn),br=Rn.max,zr=Rn.min,Qg=ut.now,Zg=qe.parseInt,Fp=Rn.random,Yf=bs.reverse,ru=du(qe,"DataView"),fa=du(qe,"Map"),Kf=du(qe,"Promise"),Rl=du(qe,"Set"),Fl=du(qe,"WeakMap"),iu=du(hn,"create"),md=Fl&&new Fl,$l={},e1=fu(ru),Ja=fu(fa),Ns=fu(Kf),ha=fu(Rl),t1=fu(Fl),su=Ji?Ji.prototype:n,Xi=su?su.valueOf:n,Ci=su?su.toString:n;function W(o){if(gr(o)&&!Bt(o)&&!(o instanceof Ht)){if(o instanceof Ai)return o;if(tn.call(o,"__wrapped__"))return Mw(o)}return new Ai(o)}var Bl=function(){function o(){}return function(u){if(!or(u))return{};if(tu)return tu(u);o.prototype=u;var y=new o;return o.prototype=n,y}}();function au(){}function Ai(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}W.templateSettings={escape:zt,evaluate:hr,interpolate:an,variable:"",imports:{_:W}},W.prototype=au.prototype,W.prototype.constructor=W,Ai.prototype=Bl(au.prototype),Ai.prototype.constructor=Ai;function Ht(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function $p(){var o=new Ht(this.__wrapped__);return o.__actions__=Zi(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Zi(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Zi(this.__views__),o}function n1(){if(this.__filtered__){var o=new Ht(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function gd(){var o=this.__wrapped__.value(),u=this.__dir__,y=Bt(o),E=u<0,D=y?o.length:0,X=wj(0,D,this.__views__),de=X.start,ge=X.end,Ae=ge-de,Ke=E?ge:de-1,Je=this.__iteratees__,tt=Je.length,ot=0,bt=zr(Ae,this.__takeCount__);if(!y||!E&&D==Ae&&bt==Ae)return uu(o,this.__actions__);var kt=[];e:for(;Ae--&&ot<bt;){Ke+=u;for(var Wt=-1,Et=o[Ke];++Wt<tt;){var Xt=Je[Wt],nn=Xt.iteratee,Es=Xt.type,Di=nn(Et);if(Es==xe)Et=Di;else if(!Di){if(Es==J)continue e;break e}}kt[ot++]=Et}return kt}Ht.prototype=Bl(au.prototype),Ht.prototype.constructor=Ht;function Vs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function ou(){this.__data__=iu?iu(null):{},this.size=0}function Jf(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Bp(o){var u=this.__data__;if(iu){var y=u[o];return y===c?n:y}return tn.call(u,o)?u[o]:n}function r1(o){var u=this.__data__;return iu?u[o]!==n:tn.call(u,o)}function Up(o,u){var y=this.__data__;return this.size+=this.has(o)?0:1,y[o]=iu&&u===n?c:u,this}Vs.prototype.clear=ou,Vs.prototype.delete=Jf,Vs.prototype.get=Bp,Vs.prototype.has=r1,Vs.prototype.set=Up;function pa(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function i1(){this.__data__=[],this.size=0}function s1(o){var u=this.__data__,y=ve(u,o);if(y<0)return!1;var E=u.length-1;return y==E?u.pop():ti.call(u,y,1),--this.size,!0}function a1(o){var u=this.__data__,y=ve(u,o);return y<0?n:u[y][1]}function o1(o){return ve(this.__data__,o)>-1}function l1(o,u){var y=this.__data__,E=ve(y,o);return E<0?(++this.size,y.push([o,u])):y[E][1]=u,this}pa.prototype.clear=i1,pa.prototype.delete=s1,pa.prototype.get=a1,pa.prototype.has=o1,pa.prototype.set=l1;function Gs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function vd(){this.size=0,this.__data__={hash:new Vs,map:new(fa||pa),string:new Vs}}function c1(o){var u=sm(this,o).delete(o);return this.size-=u?1:0,u}function u1(o){return sm(this,o).get(o)}function zp(o){return sm(this,o).has(o)}function h(o,u){var y=sm(this,o),E=y.size;return y.set(o,u),this.size+=y.size==E?0:1,this}Gs.prototype.clear=vd,Gs.prototype.delete=c1,Gs.prototype.get=u1,Gs.prototype.has=zp,Gs.prototype.set=h;function v(o){var u=-1,y=o==null?0:o.length;for(this.__data__=new Gs;++u<y;)this.add(o[u])}function _(o){return this.__data__.set(o,c),this}function A(o){return this.__data__.has(o)}v.prototype.add=v.prototype.push=_,v.prototype.has=A;function T(o){var u=this.__data__=new pa(o);this.size=u.size}function F(){this.__data__=new pa,this.size=0}function B(o){var u=this.__data__,y=u.delete(o);return this.size=u.size,y}function q(o){return this.__data__.get(o)}function V(o){return this.__data__.has(o)}function ne(o,u){var y=this.__data__;if(y instanceof pa){var E=y.__data__;if(!fa||E.length<i-1)return E.push([o,u]),this.size=++y.size,this;y=this.__data__=new Gs(E)}return y.set(o,u),this.size=y.size,this}T.prototype.clear=F,T.prototype.delete=B,T.prototype.get=q,T.prototype.has=V,T.prototype.set=ne;function we(o,u){var y=Bt(o),E=!y&&hu(o),D=!y&&!E&&Xl(o),X=!y&&!E&&!D&&Ld(o),de=y||E||D||X,ge=de?Ar(o.length,To):[],Ae=ge.length;for(var Ke in o)(u||tn.call(o,Ke))&&!(de&&(Ke=="length"||D&&(Ke=="offset"||Ke=="parent")||X&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Bo(Ke,Ae)))&&ge.push(Ke);return ge}function Me(o){var u=o.length;return u?o[Vl(0,u-1)]:n}function Re(o,u){return am(Zi(o),st(u,0,o.length))}function ke(o){return am(Zi(o))}function Ye(o,u,y){(y!==n&&!ya(o[u],y)||y===n&&!(u in o))&&Ve(o,u,y)}function Ue(o,u,y){var E=o[u];(!(tn.call(o,u)&&ya(E,y))||y===n&&!(u in o))&&Ve(o,u,y)}function ve(o,u){for(var y=o.length;y--;)if(ya(o[y][0],u))return y;return-1}function _e(o,u,y,E){return Ot(o,function(D,X,de){u(E,D,y(D),de)}),E}function Ge(o,u){return o&&io(u,Hr(u),o)}function Qe(o,u){return o&&io(u,ts(u),o)}function Ve(o,u,y){u=="__proto__"&&Do?Do(o,u,{configurable:!0,enumerable:!0,value:y,writable:!0}):o[u]=y}function lt(o,u){for(var y=-1,E=u.length,D=Oe(E),X=o==null;++y<E;)D[y]=X?n:T1(o,u[y]);return D}function st(o,u,y){return o===o&&(y!==n&&(o=o<=y?o:y),u!==n&&(o=o>=u?o:u)),o}function gt(o,u,y,E,D,X){var de,ge=u&m,Ae=u&w,Ke=u&g;if(y&&(de=D?y(o,E,D,X):y(o)),de!==n)return de;if(!or(o))return o;var Je=Bt(o);if(Je){if(de=bj(o),!ge)return Zi(o,de)}else{var tt=gi(o),ot=tt==pe||tt==he;if(Xl(o))return kd(o,ge);if(tt==$e||tt==ce||ot&&!D){if(de=Ae||ot?{}:Ew(o),!ge)return Ae?uj(o,Qe(de,o)):cj(o,Ge(de,o))}else{if(!on[tt])return D?o:{};de=_j(o,tt,ge)}}X||(X=new T);var bt=X.get(o);if(bt)return bt;X.set(o,de),nx(o)?o.forEach(function(Et){de.add(gt(Et,u,y,Et,o,X))}):ex(o)&&o.forEach(function(Et,Xt){de.set(Xt,gt(Et,u,y,Xt,o,X))});var kt=Ke?Ae?y1:v1:Ae?ts:Hr,Wt=Je?n:kt(o);return Mr(Wt||o,function(Et,Xt){Wt&&(Xt=Et,Et=o[Xt]),Ue(de,Xt,gt(Et,u,y,Xt,o,X))}),de}function at(o){var u=Hr(o);return function(y){return ln(y,o,u)}}function ln(o,u,y){var E=y.length;if(o==null)return!E;for(o=hn(o);E--;){var D=y[E],X=u[D],de=o[D];if(de===n&&!(D in o)||!X(de))return!1}return!0}function pn(o,u,y){if(typeof o!="function")throw new Pr(a);return ah(function(){o.apply(n,y)},u)}function Vt(o,u,y,E){var D=-1,X=jl,de=!0,ge=o.length,Ae=[],Ke=u.length;if(!ge)return Ae;y&&(u=fn(u,In(y))),E?(X=Wa,de=!1):u.length>=i&&(X=Ha,de=!1,u=new v(u));e:for(;++D<ge;){var Je=o[D],tt=y==null?Je:y(Je);if(Je=E||Je!==0?Je:0,de&&tt===tt){for(var ot=Ke;ot--;)if(u[ot]===tt)continue e;Ae.push(Je)}else X(u,tt,E)||Ae.push(Je)}return Ae}var Ot=hw(tr),xn=hw(ri,!0);function bn(o,u){var y=!0;return Ot(o,function(E,D,X){return y=!!u(E,D,X),y}),y}function It(o,u,y){for(var E=-1,D=o.length;++E<D;){var X=o[E],de=u(X);if(de!=null&&(ge===n?de===de&&!ks(de):y(de,ge)))var ge=de,Ae=X}return Ae}function mr(o,u,y,E){var D=o.length;for(y=qt(y),y<0&&(y=-y>D?0:D+y),E=E===n||E>D?D:qt(E),E<0&&(E+=D),E=y>E?0:ix(E);y<E;)o[y++]=u;return o}function ni(o,u){var y=[];return Ot(o,function(E,D,X){u(E,D,X)&&y.push(E)}),y}function Jt(o,u,y,E,D){var X=-1,de=o.length;for(y||(y=Nj),D||(D=[]);++X<de;){var ge=o[X];u>0&&y(ge)?u>1?Jt(ge,u-1,y,E,D):Wi(D,ge):E||(D[D.length]=ge)}return D}var qr=pw(),mn=pw(!0);function tr(o,u){return o&&qr(o,u,Hr)}function ri(o,u){return o&&mn(o,u,Hr)}function ar(o,u){return ws(u,function(y){return Uo(o[y])})}function qn(o,u){u=Ks(u,o);for(var y=0,E=u.length;o!=null&&y<E;)o=o[so(u[y++])];return y&&y==E?o:n}function Wr(o,u,y){var E=u(o);return Bt(o)?E:Wi(E,y(o))}function Ln(o){return o==null?o===n?He:G:Ka&&Ka in hn(o)?yj(o):Pj(o)}function Qi(o,u){return o>u}function Tr(o,u){return o!=null&&tn.call(o,u)}function ma(o,u){return o!=null&&u in hn(o)}function Oo(o,u,y){return o>=zr(u,y)&&o<br(u,y)}function Xa(o,u,y){for(var E=y?Wa:jl,D=o[0].length,X=o.length,de=X,ge=Oe(X),Ae=1/0,Ke=[];de--;){var Je=o[de];de&&u&&(Je=fn(Je,In(u))),Ae=zr(Je.length,Ae),ge[de]=!y&&(u||D>=120&&Je.length>=120)?new v(de&&Je):n}Je=o[0];var tt=-1,ot=ge[0];e:for(;++tt<D&&Ke.length<Ae;){var bt=Je[tt],kt=u?u(bt):bt;if(bt=y||bt!==0?bt:0,!(ot?Ha(ot,kt):E(Ke,kt,y))){for(de=X;--de;){var Wt=ge[de];if(!(Wt?Ha(Wt,kt):E(o[de],kt,y)))continue e}ot&&ot.push(kt),Ke.push(bt)}}return Ke}function Qa(o,u,y,E){return tr(o,function(D,X,de){u(E,y(D),X,de)}),E}function Pn(o,u,y){u=Ks(u,o),o=Pw(o,u);var E=o==null?o:o[so(Js(u))];return E==null?n:Or(E,o,y)}function yd(o){return gr(o)&&Ln(o)==ce}function qp(o){return gr(o)&&Ln(o)==ft}function Wp(o){return gr(o)&&Ln(o)==te}function Za(o,u,y,E,D){return o===u?!0:o==null||u==null||!gr(o)&&!gr(u)?o!==o&&u!==u:lu(o,u,y,E,Za,D)}function lu(o,u,y,E,D,X){var de=Bt(o),ge=Bt(u),Ae=de?fe:gi(o),Ke=ge?fe:gi(u);Ae=Ae==ce?$e:Ae,Ke=Ke==ce?$e:Ke;var Je=Ae==$e,tt=Ke==$e,ot=Ae==Ke;if(ot&&Xl(o)){if(!Xl(u))return!1;de=!0,Je=!1}if(ot&&!Je)return X||(X=new T),de||Ld(o)?Nw(o,u,y,E,D,X):gj(o,u,Ae,y,E,D,X);if(!(y&N)){var bt=Je&&tn.call(o,"__wrapped__"),kt=tt&&tn.call(u,"__wrapped__");if(bt||kt){var Wt=bt?o.value():o,Et=kt?u.value():u;return X||(X=new T),D(Wt,Et,y,E,X)}}return ot?(X||(X=new T),vj(o,u,y,E,D,X)):!1}function wd(o){return gr(o)&&gi(o)==je}function Li(o,u,y,E){var D=y.length,X=D,de=!E;if(o==null)return!X;for(o=hn(o);D--;){var ge=y[D];if(de&&ge[2]?ge[1]!==o[ge[0]]:!(ge[0]in o))return!1}for(;++D<X;){ge=y[D];var Ae=ge[0],Ke=o[Ae],Je=ge[1];if(de&&ge[2]){if(Ke===n&&!(Ae in o))return!1}else{var tt=new T;if(E)var ot=E(Ke,Je,Ae,o,u,tt);if(!(ot===n?Za(Je,Ke,N|j,E,tt):ot))return!1}}return!0}function Mo(o){if(!or(o)||kj(o))return!1;var u=Uo(o)?xr:So;return u.test(fu(o))}function Ul(o){return gr(o)&&Ln(o)==Be}function Hp(o){return gr(o)&&gi(o)==be}function xd(o){return gr(o)&&fm(o.length)&&!!gn[Ln(o)]}function Xf(o){return typeof o=="function"?o:o==null?ns:typeof o=="object"?Bt(o)?Gp(o[0],o[1]):Vp(o):mx(o)}function zl(o){if(!sh(o))return Rp(o);var u=[];for(var y in hn(o))tn.call(o,y)&&y!="constructor"&&u.push(y);return u}function Qf(o){if(!or(o))return Lj(o);var u=sh(o),y=[];for(var E in o)E=="constructor"&&(u||!tn.call(o,E))||y.push(E);return y}function ql(o,u){return o<u}function Wl(o,u){var y=-1,E=es(o)?Oe(o.length):[];return Ot(o,function(D,X,de){E[++y]=u(D,X,de)}),E}function Vp(o){var u=x1(o);return u.length==1&&u[0][2]?Aw(u[0][0],u[0][1]):function(y){return y===o||Li(y,o,u)}}function Gp(o,u){return _1(o)&&Cw(u)?Aw(so(o),u):function(y){var E=T1(y,o);return E===n&&E===u?I1(y,o):Za(u,E,N|j)}}function Hl(o,u,y,E,D){o!==u&&qr(u,function(X,de){if(D||(D=new T),or(X))eo(o,u,de,y,Hl,E,D);else{var ge=E?E(N1(o,de),X,de+"",o,u,D):n;ge===n&&(ge=X),Ye(o,de,ge)}},ts)}function eo(o,u,y,E,D,X,de){var ge=N1(o,y),Ae=N1(u,y),Ke=de.get(Ae);if(Ke){Ye(o,y,Ke);return}var Je=X?X(ge,Ae,y+"",o,u,de):n,tt=Je===n;if(tt){var ot=Bt(Ae),bt=!ot&&Xl(Ae),kt=!ot&&!bt&&Ld(Ae);Je=Ae,ot||bt||kt?Bt(ge)?Je=ge:_r(ge)?Je=Zi(ge):bt?(tt=!1,Je=kd(Ae,!0)):kt?(tt=!1,Je=cw(Ae,!0)):Je=[]:oh(Ae)||hu(Ae)?(Je=ge,hu(ge)?Je=sx(ge):(!or(ge)||Uo(ge))&&(Je=Ew(Ae))):tt=!1}tt&&(de.set(Ae,Je),D(Je,Ae,E,X,de),de.delete(Ae)),Ye(o,y,Je)}function Yp(o,u){var y=o.length;if(y)return u+=u<0?y:0,Bo(u,y)?o[u]:n}function Kp(o,u,y){u.length?u=fn(u,function(X){return Bt(X)?function(de){return qn(de,X.length===1?X[0]:X)}:X}):u=[ns];var E=-1;u=fn(u,In(jt()));var D=Wl(o,function(X,de,ge){var Ae=fn(u,function(Ke){return Ke(X)});return{criteria:Ae,index:++E,value:X}});return Zn(D,function(X,de){return lj(X,de,y)})}function d1(o,u){return Zf(o,u,function(y,E){return I1(o,E)})}function Zf(o,u,y){for(var E=-1,D=u.length,X={};++E<D;){var de=u[E],ge=qn(o,de);y(ge,de)&&Gl(X,Ks(de,o),ge)}return X}function bd(o){return function(u){return qn(u,o)}}function _d(o,u,y,E){var D=E?ct:Xe,X=-1,de=u.length,ge=o;for(o===u&&(u=Zi(u)),y&&(ge=fn(o,In(y)));++X<de;)for(var Ae=0,Ke=u[X],Je=y?y(Ke):Ke;(Ae=D(ge,Je,Ae,E))>-1;)ge!==o&&ti.call(ge,Ae,1),ti.call(o,Ae,1);return o}function eh(o,u){for(var y=o?u.length:0,E=y-1;y--;){var D=u[y];if(y==E||D!==X){var X=D;Bo(D)?ti.call(o,D,1):rh(o,D)}}return o}function Vl(o,u){return o+Ol(Fp()*(u-o+1))}function th(o,u,y,E){for(var D=-1,X=br(Dl((u-o)/(y||1)),0),de=Oe(X);X--;)de[E?X:++D]=o,o+=y;return de}function Ro(o,u){var y="";if(!o||u<1||u>$)return y;do u%2&&(y+=o),u=Ol(u/2),u&&(o+=o);while(u);return y}function Ut(o,u){return j1(Lw(o,u,ns),o+"")}function f1(o){return Me(Pd(o))}function Sd(o,u){var y=Pd(o);return am(y,st(u,0,y.length))}function Gl(o,u,y,E){if(!or(o))return o;u=Ks(u,o);for(var D=-1,X=u.length,de=X-1,ge=o;ge!=null&&++D<X;){var Ae=so(u[D]),Ke=y;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return o;if(D!=de){var Je=ge[Ae];Ke=E?E(Je,Ae,ge):n,Ke===n&&(Ke=or(Je)?Je:Bo(u[D+1])?[]:{})}Ue(ge,Ae,Ke),ge=ge[Ae]}return o}var Nd=md?function(o,u){return md.set(o,u),o}:ns,to=Do?function(o,u){return Do(o,"toString",{configurable:!0,enumerable:!1,value:O1(u),writable:!0})}:ns;function Jp(o){return am(Pd(o))}function Pi(o,u,y){var E=-1,D=o.length;u<0&&(u=-u>D?0:D+u),y=y>D?D:y,y<0&&(y+=D),D=u>y?0:y-u>>>0,u>>>=0;for(var X=Oe(D);++E<D;)X[E]=o[E+u];return X}function h1(o,u){var y;return Ot(o,function(E,D,X){return y=u(E,D,X),!y}),!!y}function cu(o,u,y){var E=0,D=o==null?E:o.length;if(typeof u=="number"&&u===u&&D<=H){for(;E<D;){var X=E+D>>>1,de=o[X];de!==null&&!ks(de)&&(y?de<=u:de<u)?E=X+1:D=X}return D}return no(o,u,ns,y)}function no(o,u,y,E){var D=0,X=o==null?0:o.length;if(X===0)return 0;u=y(u);for(var de=u!==u,ge=u===null,Ae=ks(u),Ke=u===n;D<X;){var Je=Ol((D+X)/2),tt=y(o[Je]),ot=tt!==n,bt=tt===null,kt=tt===tt,Wt=ks(tt);if(de)var Et=E||kt;else Ke?Et=kt&&(E||ot):ge?Et=kt&&ot&&(E||!bt):Ae?Et=kt&&ot&&!bt&&(E||!Wt):bt||Wt?Et=!1:Et=E?tt<=u:tt<u;Et?D=Je+1:X=Je}return zr(X,P)}function Xp(o,u){for(var y=-1,E=o.length,D=0,X=[];++y<E;){var de=o[y],ge=u?u(de):de;if(!y||!ya(ge,Ae)){var Ae=ge;X[D++]=de===0?0:de}}return X}function nh(o){return typeof o=="number"?o:ks(o)?ae:+o}function Ti(o){if(typeof o=="string")return o;if(Bt(o))return fn(o,Ti)+"";if(ks(o))return Ci?Ci.call(o):"";var u=o+"";return u=="0"&&1/o==-Q?"-0":u}function ga(o,u,y){var E=-1,D=jl,X=o.length,de=!0,ge=[],Ae=ge;if(y)de=!1,D=Wa;else if(X>=i){var Ke=u?null:pj(o);if(Ke)return Va(Ke);de=!1,D=Ha,Ae=new v}else Ae=u?[]:ge;e:for(;++E<X;){var Je=o[E],tt=u?u(Je):Je;if(Je=y||Je!==0?Je:0,de&&tt===tt){for(var ot=Ae.length;ot--;)if(Ae[ot]===tt)continue e;u&&Ae.push(tt),ge.push(Je)}else D(Ae,tt,y)||(Ae!==ge&&Ae.push(tt),ge.push(Je))}return ge}function rh(o,u){return u=Ks(u,o),o=Pw(o,u),o==null||delete o[so(Js(u))]}function Yl(o,u,y,E){return Gl(o,u,y(qn(o,u)),E)}function Kl(o,u,y,E){for(var D=o.length,X=E?D:-1;(E?X--:++X<D)&&u(o[X],X,o););return y?Pi(o,E?0:X,E?X+1:D):Pi(o,E?X+1:0,E?D:X)}function uu(o,u){var y=o;return y instanceof Ht&&(y=y.value()),qs(u,function(E,D){return D.func.apply(D.thisArg,Wi([E],D.args))},y)}function js(o,u,y){var E=o.length;if(E<2)return E?ga(o[0]):[];for(var D=-1,X=Oe(E);++D<E;)for(var de=o[D],ge=-1;++ge<E;)ge!=D&&(X[D]=Vt(X[D]||de,o[ge],u,y));return ga(Jt(X,1),u,y)}function va(o,u,y){for(var E=-1,D=o.length,X=u.length,de={};++E<D;){var ge=E<X?u[E]:n;y(de,o[E],ge)}return de}function Ys(o){return _r(o)?o:[]}function Jl(o){return typeof o=="function"?o:ns}function Ks(o,u){return Bt(o)?o:_1(o,u)?[o]:Ow(_n(o))}var Qp=Ut;function ro(o,u,y){var E=o.length;return y=y===n?E:y,!u&&y>=E?o:Pi(o,u,y)}var jd=pd||function(o){return pr.clearTimeout(o)};function kd(o,u){if(u)return o.slice();var y=o.length,E=eu?eu(y):new o.constructor(y);return o.copy(E),E}function p1(o){var u=new o.constructor(o.byteLength);return new da(u).set(new da(o)),u}function sj(o,u){var y=u?p1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.byteLength)}function aj(o){var u=new o.constructor(o.source,ys.exec(o));return u.lastIndex=o.lastIndex,u}function oj(o){return Xi?hn(Xi.call(o)):{}}function cw(o,u){var y=u?p1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.length)}function uw(o,u){if(o!==u){var y=o!==n,E=o===null,D=o===o,X=ks(o),de=u!==n,ge=u===null,Ae=u===u,Ke=ks(u);if(!ge&&!Ke&&!X&&o>u||X&&de&&Ae&&!ge&&!Ke||E&&de&&Ae||!y&&Ae||!D)return 1;if(!E&&!X&&!Ke&&o<u||Ke&&y&&D&&!E&&!X||ge&&y&&D||!de&&D||!Ae)return-1}return 0}function lj(o,u,y){for(var E=-1,D=o.criteria,X=u.criteria,de=D.length,ge=y.length;++E<de;){var Ae=uw(D[E],X[E]);if(Ae){if(E>=ge)return Ae;var Ke=y[E];return Ae*(Ke=="desc"?-1:1)}}return o.index-u.index}function dw(o,u,y,E){for(var D=-1,X=o.length,de=y.length,ge=-1,Ae=u.length,Ke=br(X-de,0),Je=Oe(Ae+Ke),tt=!E;++ge<Ae;)Je[ge]=u[ge];for(;++D<de;)(tt||D<X)&&(Je[y[D]]=o[D]);for(;Ke--;)Je[ge++]=o[D++];return Je}function fw(o,u,y,E){for(var D=-1,X=o.length,de=-1,ge=y.length,Ae=-1,Ke=u.length,Je=br(X-ge,0),tt=Oe(Je+Ke),ot=!E;++D<Je;)tt[D]=o[D];for(var bt=D;++Ae<Ke;)tt[bt+Ae]=u[Ae];for(;++de<ge;)(ot||D<X)&&(tt[bt+y[de]]=o[D++]);return tt}function Zi(o,u){var y=-1,E=o.length;for(u||(u=Oe(E));++y<E;)u[y]=o[y];return u}function io(o,u,y,E){var D=!y;y||(y={});for(var X=-1,de=u.length;++X<de;){var ge=u[X],Ae=E?E(y[ge],o[ge],ge,y,o):n;Ae===n&&(Ae=o[ge]),D?Ve(y,ge,Ae):Ue(y,ge,Ae)}return y}function cj(o,u){return io(o,b1(o),u)}function uj(o,u){return io(o,jw(o),u)}function Zp(o,u){return function(y,E){var D=Bt(y)?fd:_e,X=u?u():{};return D(y,o,jt(E,2),X)}}function Ed(o){return Ut(function(u,y){var E=-1,D=y.length,X=D>1?y[D-1]:n,de=D>2?y[2]:n;for(X=o.length>3&&typeof X=="function"?(D--,X):n,de&&Ii(y[0],y[1],de)&&(X=D<3?n:X,D=1),u=hn(u);++E<D;){var ge=y[E];ge&&o(u,ge,E,X)}return u})}function hw(o,u){return function(y,E){if(y==null)return y;if(!es(y))return o(y,E);for(var D=y.length,X=u?D:-1,de=hn(y);(u?X--:++X<D)&&E(de[X],X,de)!==!1;);return y}}function pw(o){return function(u,y,E){for(var D=-1,X=hn(u),de=E(u),ge=de.length;ge--;){var Ae=de[o?ge:++D];if(y(X[Ae],Ae,X)===!1)break}return u}}function dj(o,u,y){var E=u&k,D=ih(o);function X(){var de=this&&this!==pr&&this instanceof X?D:o;return de.apply(E?y:this,arguments)}return X}function mw(o){return function(u){u=_n(u);var y=xs(u)?fi(u):n,E=y?y[0]:u.charAt(0),D=y?ro(y,1).join(""):u.slice(1);return E[o]()+D}}function Cd(o){return function(u){return qs(hx(fx(u).replace(Us,"")),o,"")}}function ih(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var y=Bl(o.prototype),E=o.apply(y,u);return or(E)?E:y}}function fj(o,u,y){var E=ih(o);function D(){for(var X=arguments.length,de=Oe(X),ge=X,Ae=Ad(D);ge--;)de[ge]=arguments[ge];var Ke=X<3&&de[0]!==Ae&&de[X-1]!==Ae?[]:Ws(de,Ae);if(X-=Ke.length,X<y)return xw(o,u,em,D.placeholder,n,de,Ke,n,n,y-X);var Je=this&&this!==pr&&this instanceof D?E:o;return Or(Je,this,de)}return D}function gw(o){return function(u,y,E){var D=hn(u);if(!es(u)){var X=jt(y,3);u=Hr(u),y=function(ge){return X(D[ge],ge,D)}}var de=o(u,y,E);return de>-1?D[X?u[de]:de]:n}}function vw(o){return $o(function(u){var y=u.length,E=y,D=Ai.prototype.thru;for(o&&u.reverse();E--;){var X=u[E];if(typeof X!="function")throw new Pr(a);if(D&&!de&&im(X)=="wrapper")var de=new Ai([],!0)}for(E=de?E:y;++E<y;){X=u[E];var ge=im(X),Ae=ge=="wrapper"?w1(X):n;Ae&&S1(Ae[0])&&Ae[1]==(Z|L|K|R)&&!Ae[4].length&&Ae[9]==1?de=de[im(Ae[0])].apply(de,Ae[3]):de=X.length==1&&S1(X)?de[ge]():de.thru(X)}return function(){var Ke=arguments,Je=Ke[0];if(de&&Ke.length==1&&Bt(Je))return de.plant(Je).value();for(var tt=0,ot=y?u[tt].apply(this,Ke):Je;++tt<y;)ot=u[tt].call(this,ot);return ot}})}function em(o,u,y,E,D,X,de,ge,Ae,Ke){var Je=u&Z,tt=u&k,ot=u&b,bt=u&(L|M),kt=u&ee,Wt=ot?n:ih(o);function Et(){for(var Xt=arguments.length,nn=Oe(Xt),Es=Xt;Es--;)nn[Es]=arguments[Es];if(bt)var Di=Ad(Et),Cs=Cl(nn,Di);if(E&&(nn=dw(nn,E,D,bt)),X&&(nn=fw(nn,X,de,bt)),Xt-=Cs,bt&&Xt<Ke){var Sr=Ws(nn,Di);return xw(o,u,em,Et.placeholder,y,nn,Sr,ge,Ae,Ke-Xt)}var wa=tt?y:this,qo=ot?wa[o]:o;return Xt=nn.length,ge?nn=Tj(nn,ge):kt&&Xt>1&&nn.reverse(),Je&&Ae<Xt&&(nn.length=Ae),this&&this!==pr&&this instanceof Et&&(qo=Wt||ih(qo)),qo.apply(wa,nn)}return Et}function yw(o,u){return function(y,E){return Qa(y,o,u(E),{})}}function tm(o,u){return function(y,E){var D;if(y===n&&E===n)return u;if(y!==n&&(D=y),E!==n){if(D===n)return E;typeof y=="string"||typeof E=="string"?(y=Ti(y),E=Ti(E)):(y=nh(y),E=nh(E)),D=o(y,E)}return D}}function m1(o){return $o(function(u){return u=fn(u,In(jt())),Ut(function(y){var E=this;return o(u,function(D){return Or(D,E,y)})})})}function nm(o,u){u=u===n?" ":Ti(u);var y=u.length;if(y<2)return y?Ro(u,o):u;var E=Ro(u,Dl(o/la(u)));return xs(u)?ro(fi(E),0,o).join(""):E.slice(0,o)}function hj(o,u,y,E){var D=u&k,X=ih(o);function de(){for(var ge=-1,Ae=arguments.length,Ke=-1,Je=E.length,tt=Oe(Je+Ae),ot=this&&this!==pr&&this instanceof de?X:o;++Ke<Je;)tt[Ke]=E[Ke];for(;Ae--;)tt[Ke++]=arguments[++ge];return Or(ot,D?y:this,tt)}return de}function ww(o){return function(u,y,E){return E&&typeof E!="number"&&Ii(u,y,E)&&(y=E=n),u=zo(u),y===n?(y=u,u=0):y=zo(y),E=E===n?u<y?1:-1:zo(E),th(u,y,E,o)}}function rm(o){return function(u,y){return typeof u=="string"&&typeof y=="string"||(u=Xs(u),y=Xs(y)),o(u,y)}}function xw(o,u,y,E,D,X,de,ge,Ae,Ke){var Je=u&L,tt=Je?de:n,ot=Je?n:de,bt=Je?X:n,kt=Je?n:X;u|=Je?K:oe,u&=~(Je?oe:K),u&S||(u&=~(k|b));var Wt=[o,u,D,bt,tt,kt,ot,ge,Ae,Ke],Et=y.apply(n,Wt);return S1(o)&&Tw(Et,Wt),Et.placeholder=E,Iw(Et,o,u)}function g1(o){var u=Rn[o];return function(y,E){if(y=Xs(y),E=E==null?0:zr(qt(E),292),E&&Mp(y)){var D=(_n(y)+"e").split("e"),X=u(D[0]+"e"+(+D[1]+E));return D=(_n(X)+"e").split("e"),+(D[0]+"e"+(+D[1]-E))}return u(y)}}var pj=Rl&&1/Va(new Rl([,-0]))[1]==Q?function(o){return new Rl(o)}:F1;function bw(o){return function(u){var y=gi(u);return y==je?Ao(u):y==be?hd(u):Lr(u,o(u))}}function Fo(o,u,y,E,D,X,de,ge){var Ae=u&b;if(!Ae&&typeof o!="function")throw new Pr(a);var Ke=E?E.length:0;if(Ke||(u&=~(K|oe),E=D=n),de=de===n?de:br(qt(de),0),ge=ge===n?ge:qt(ge),Ke-=D?D.length:0,u&oe){var Je=E,tt=D;E=D=n}var ot=Ae?n:w1(o),bt=[o,u,y,E,D,Je,tt,X,de,ge];if(ot&&Aj(bt,ot),o=bt[0],u=bt[1],y=bt[2],E=bt[3],D=bt[4],ge=bt[9]=bt[9]===n?Ae?0:o.length:br(bt[9]-Ke,0),!ge&&u&(L|M)&&(u&=~(L|M)),!u||u==k)var kt=dj(o,u,y);else u==L||u==M?kt=fj(o,u,ge):(u==K||u==(k|K))&&!D.length?kt=hj(o,u,y,E):kt=em.apply(n,bt);var Wt=ot?Nd:Tw;return Iw(Wt(kt,bt),o,u)}function _w(o,u,y,E){return o===n||ya(o,_s[y])&&!tn.call(E,y)?u:o}function Sw(o,u,y,E,D,X){return or(o)&&or(u)&&(X.set(u,o),Hl(o,u,n,Sw,X),X.delete(u)),o}function mj(o){return oh(o)?n:o}function Nw(o,u,y,E,D,X){var de=y&N,ge=o.length,Ae=u.length;if(ge!=Ae&&!(de&&Ae>ge))return!1;var Ke=X.get(o),Je=X.get(u);if(Ke&&Je)return Ke==u&&Je==o;var tt=-1,ot=!0,bt=y&j?new v:n;for(X.set(o,u),X.set(u,o);++tt<ge;){var kt=o[tt],Wt=u[tt];if(E)var Et=de?E(Wt,kt,tt,u,o,X):E(kt,Wt,tt,o,u,X);if(Et!==n){if(Et)continue;ot=!1;break}if(bt){if(!x(u,function(Xt,nn){if(!Ha(bt,nn)&&(kt===Xt||D(kt,Xt,y,E,X)))return bt.push(nn)})){ot=!1;break}}else if(!(kt===Wt||D(kt,Wt,y,E,X))){ot=!1;break}}return X.delete(o),X.delete(u),ot}function gj(o,u,y,E,D,X,de){switch(y){case Nt:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case ft:return!(o.byteLength!=u.byteLength||!X(new da(o),new da(u)));case Ce:case te:case ue:return ya(+o,+u);case ie:return o.name==u.name&&o.message==u.message;case Be:case Ie:return o==u+"";case je:var ge=Ao;case be:var Ae=E&N;if(ge||(ge=Va),o.size!=u.size&&!Ae)return!1;var Ke=de.get(o);if(Ke)return Ke==u;E|=j,de.set(o,u);var Je=Nw(ge(o),ge(u),E,D,X,de);return de.delete(o),Je;case We:if(Xi)return Xi.call(o)==Xi.call(u)}return!1}function vj(o,u,y,E,D,X){var de=y&N,ge=v1(o),Ae=ge.length,Ke=v1(u),Je=Ke.length;if(Ae!=Je&&!de)return!1;for(var tt=Ae;tt--;){var ot=ge[tt];if(!(de?ot in u:tn.call(u,ot)))return!1}var bt=X.get(o),kt=X.get(u);if(bt&&kt)return bt==u&&kt==o;var Wt=!0;X.set(o,u),X.set(u,o);for(var Et=de;++tt<Ae;){ot=ge[tt];var Xt=o[ot],nn=u[ot];if(E)var Es=de?E(nn,Xt,ot,u,o,X):E(Xt,nn,ot,o,u,X);if(!(Es===n?Xt===nn||D(Xt,nn,y,E,X):Es)){Wt=!1;break}Et||(Et=ot=="constructor")}if(Wt&&!Et){var Di=o.constructor,Cs=u.constructor;Di!=Cs&&"constructor"in o&&"constructor"in u&&!(typeof Di=="function"&&Di instanceof Di&&typeof Cs=="function"&&Cs instanceof Cs)&&(Wt=!1)}return X.delete(o),X.delete(u),Wt}function $o(o){return j1(Lw(o,n,$w),o+"")}function v1(o){return Wr(o,Hr,b1)}function y1(o){return Wr(o,ts,jw)}var w1=md?function(o){return md.get(o)}:F1;function im(o){for(var u=o.name+"",y=$l[u],E=tn.call($l,u)?y.length:0;E--;){var D=y[E],X=D.func;if(X==null||X==o)return D.name}return u}function Ad(o){var u=tn.call(W,"placeholder")?W:o;return u.placeholder}function jt(){var o=W.iteratee||M1;return o=o===M1?Xf:o,arguments.length?o(arguments[0],arguments[1]):o}function sm(o,u){var y=o.__data__;return jj(u)?y[typeof u=="string"?"string":"hash"]:y.map}function x1(o){for(var u=Hr(o),y=u.length;y--;){var E=u[y],D=o[E];u[y]=[E,D,Cw(D)]}return u}function du(o,u){var y=Rr(o,u);return Mo(y)?y:n}function yj(o){var u=tn.call(o,Ka),y=o[Ka];try{o[Ka]=n;var E=!0}catch{}var D=vn.call(o);return E&&(u?o[Ka]=y:delete o[Ka]),D}var b1=Ml?function(o){return o==null?[]:(o=hn(o),ws(Ml(o),function(u){return mi.call(o,u)}))}:$1,jw=Ml?function(o){for(var u=[];o;)Wi(u,b1(o)),o=Il(o);return u}:$1,gi=Ln;(ru&&gi(new ru(new ArrayBuffer(1)))!=Nt||fa&&gi(new fa)!=je||Kf&&gi(Kf.resolve())!=Fe||Rl&&gi(new Rl)!=be||Fl&&gi(new Fl)!=nt)&&(gi=function(o){var u=Ln(o),y=u==$e?o.constructor:n,E=y?fu(y):"";if(E)switch(E){case e1:return Nt;case Ja:return je;case Ns:return Fe;case ha:return be;case t1:return nt}return u});function wj(o,u,y){for(var E=-1,D=y.length;++E<D;){var X=y[E],de=X.size;switch(X.type){case"drop":o+=de;break;case"dropRight":u-=de;break;case"take":u=zr(u,o+de);break;case"takeRight":o=br(o,u-de);break}}return{start:o,end:u}}function xj(o){var u=o.match(Jn);return u?u[1].split(Ui):[]}function kw(o,u,y){u=Ks(u,o);for(var E=-1,D=u.length,X=!1;++E<D;){var de=so(u[E]);if(!(X=o!=null&&y(o,de)))break;o=o[de]}return X||++E!=D?X:(D=o==null?0:o.length,!!D&&fm(D)&&Bo(de,D)&&(Bt(o)||hu(o)))}function bj(o){var u=o.length,y=new o.constructor(u);return u&&typeof o[0]=="string"&&tn.call(o,"index")&&(y.index=o.index,y.input=o.input),y}function Ew(o){return typeof o.constructor=="function"&&!sh(o)?Bl(Il(o)):{}}function _j(o,u,y){var E=o.constructor;switch(u){case ft:return p1(o);case Ce:case te:return new E(+o);case Nt:return sj(o,y);case it:case St:case Ze:case Zt:case Mt:case fr:case Rt:case sn:case li:return cw(o,y);case je:return new E;case ue:case Ie:return new E(o);case Be:return aj(o);case be:return new E;case We:return oj(o)}}function Sj(o,u){var y=u.length;if(!y)return o;var E=y-1;return u[E]=(y>1?"& ":"")+u[E],u=u.join(y>2?", ":" "),o.replace(Cn,`{
/* [wrapped with `+u+`] */
`)}function Nj(o){return Bt(o)||hu(o)||!!(nu&&o&&o[nu])}function Bo(o,u){var y=typeof o;return u=u??$,!!u&&(y=="number"||y!="symbol"&&ul.test(o))&&o>-1&&o%1==0&&o<u}function Ii(o,u,y){if(!or(y))return!1;var E=typeof u;return(E=="number"?es(y)&&Bo(u,y.length):E=="string"&&u in y)?ya(y[u],o):!1}function _1(o,u){if(Bt(o))return!1;var y=typeof o;return y=="number"||y=="symbol"||y=="boolean"||o==null||ks(o)?!0:Dr.test(o)||!rr.test(o)||u!=null&&o in hn(u)}function jj(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function S1(o){var u=im(o),y=W[u];if(typeof y!="function"||!(u in Ht.prototype))return!1;if(o===y)return!0;var E=w1(y);return!!E&&o===E[0]}function kj(o){return!!Ei&&Ei in o}var Ej=Hs?Uo:B1;function sh(o){var u=o&&o.constructor,y=typeof u=="function"&&u.prototype||_s;return o===y}function Cw(o){return o===o&&!or(o)}function Aw(o,u){return function(y){return y==null?!1:y[o]===u&&(u!==n||o in hn(y))}}function Cj(o){var u=um(o,function(E){return y.size===f&&y.clear(),E}),y=u.cache;return u}function Aj(o,u){var y=o[1],E=u[1],D=y|E,X=D<(k|b|Z),de=E==Z&&y==L||E==Z&&y==R&&o[7].length<=u[8]||E==(Z|R)&&u[7].length<=u[8]&&y==L;if(!(X||de))return o;E&k&&(o[2]=u[2],D|=y&k?0:S);var ge=u[3];if(ge){var Ae=o[3];o[3]=Ae?dw(Ae,ge,u[4]):ge,o[4]=Ae?Ws(o[3],p):u[4]}return ge=u[5],ge&&(Ae=o[5],o[5]=Ae?fw(Ae,ge,u[6]):ge,o[6]=Ae?Ws(o[5],p):u[6]),ge=u[7],ge&&(o[7]=ge),E&Z&&(o[8]=o[8]==null?u[8]:zr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=D,o}function Lj(o){var u=[];if(o!=null)for(var y in hn(o))u.push(y);return u}function Pj(o){return vn.call(o)}function Lw(o,u,y){return u=br(u===n?o.length-1:u,0),function(){for(var E=arguments,D=-1,X=br(E.length-u,0),de=Oe(X);++D<X;)de[D]=E[u+D];D=-1;for(var ge=Oe(u+1);++D<u;)ge[D]=E[D];return ge[u]=y(de),Or(o,this,ge)}}function Pw(o,u){return u.length<2?o:qn(o,Pi(u,0,-1))}function Tj(o,u){for(var y=o.length,E=zr(u.length,y),D=Zi(o);E--;){var X=u[E];o[E]=Bo(X,y)?D[X]:n}return o}function N1(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Tw=Dw(Nd),ah=Op||function(o,u){return pr.setTimeout(o,u)},j1=Dw(to);function Iw(o,u,y){var E=u+"";return j1(o,Sj(E,Ij(xj(E),y)))}function Dw(o){var u=0,y=0;return function(){var E=Qg(),D=Y-(E-y);if(y=E,D>0){if(++u>=U)return arguments[0]}else u=0;return o.apply(n,arguments)}}function am(o,u){var y=-1,E=o.length,D=E-1;for(u=u===n?E:u;++y<u;){var X=Vl(y,D),de=o[X];o[X]=o[y],o[y]=de}return o.length=u,o}var Ow=Cj(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(ht,function(y,E,D,X){u.push(D?X.replace(gs,"$1"):E||y)}),u});function so(o){if(typeof o=="string"||ks(o))return o;var u=o+"";return u=="0"&&1/o==-Q?"-0":u}function fu(o){if(o!=null){try{return Ss.call(o)}catch{}try{return o+""}catch{}}return""}function Ij(o,u){return Mr(re,function(y){var E="_."+y[0];u&y[1]&&!jl(o,E)&&o.push(E)}),o.sort()}function Mw(o){if(o instanceof Ht)return o.clone();var u=new Ai(o.__wrapped__,o.__chain__);return u.__actions__=Zi(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function Dj(o,u,y){(y?Ii(o,u,y):u===n)?u=1:u=br(qt(u),0);var E=o==null?0:o.length;if(!E||u<1)return[];for(var D=0,X=0,de=Oe(Dl(E/u));D<E;)de[X++]=Pi(o,D,D+=u);return de}function Oj(o){for(var u=-1,y=o==null?0:o.length,E=0,D=[];++u<y;){var X=o[u];X&&(D[E++]=X)}return D}function Mj(){var o=arguments.length;if(!o)return[];for(var u=Oe(o-1),y=arguments[0],E=o;E--;)u[E-1]=arguments[E];return Wi(Bt(y)?Zi(y):[y],Jt(u,1))}var Rj=Ut(function(o,u){return _r(o)?Vt(o,Jt(u,1,_r,!0)):[]}),Fj=Ut(function(o,u){var y=Js(u);return _r(y)&&(y=n),_r(o)?Vt(o,Jt(u,1,_r,!0),jt(y,2)):[]}),$j=Ut(function(o,u){var y=Js(u);return _r(y)&&(y=n),_r(o)?Vt(o,Jt(u,1,_r,!0),n,y):[]});function Bj(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:qt(u),Pi(o,u<0?0:u,E)):[]}function Uj(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:qt(u),u=E-u,Pi(o,0,u<0?0:u)):[]}function zj(o,u){return o&&o.length?Kl(o,jt(u,3),!0,!0):[]}function qj(o,u){return o&&o.length?Kl(o,jt(u,3),!0):[]}function Wj(o,u,y,E){var D=o==null?0:o.length;return D?(y&&typeof y!="number"&&Ii(o,u,y)&&(y=0,E=D),mr(o,u,y,E)):[]}function Rw(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=y==null?0:qt(y);return D<0&&(D=br(E+D,0)),ze(o,jt(u,3),D)}function Fw(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=E-1;return y!==n&&(D=qt(y),D=y<0?br(E+D,0):zr(D,E-1)),ze(o,jt(u,3),D,!0)}function $w(o){var u=o==null?0:o.length;return u?Jt(o,1):[]}function Hj(o){var u=o==null?0:o.length;return u?Jt(o,Q):[]}function Vj(o,u){var y=o==null?0:o.length;return y?(u=u===n?1:qt(u),Jt(o,u)):[]}function Gj(o){for(var u=-1,y=o==null?0:o.length,E={};++u<y;){var D=o[u];E[D[0]]=D[1]}return E}function Bw(o){return o&&o.length?o[0]:n}function Yj(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=y==null?0:qt(y);return D<0&&(D=br(E+D,0)),Xe(o,u,D)}function Kj(o){var u=o==null?0:o.length;return u?Pi(o,0,-1):[]}var Jj=Ut(function(o){var u=fn(o,Ys);return u.length&&u[0]===o[0]?Xa(u):[]}),Xj=Ut(function(o){var u=Js(o),y=fn(o,Ys);return u===Js(y)?u=n:y.pop(),y.length&&y[0]===o[0]?Xa(y,jt(u,2)):[]}),Qj=Ut(function(o){var u=Js(o),y=fn(o,Ys);return u=typeof u=="function"?u:n,u&&y.pop(),y.length&&y[0]===o[0]?Xa(y,n,u):[]});function Zj(o,u){return o==null?"":Xg.call(o,u)}function Js(o){var u=o==null?0:o.length;return u?o[u-1]:n}function ek(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=E;return y!==n&&(D=qt(y),D=D<0?br(E+D,0):zr(D,E-1)),u===u?Tl(o,u,D):ze(o,_t,D,!0)}function tk(o,u){return o&&o.length?Yp(o,qt(u)):n}var nk=Ut(Uw);function Uw(o,u){return o&&o.length&&u&&u.length?_d(o,u):o}function rk(o,u,y){return o&&o.length&&u&&u.length?_d(o,u,jt(y,2)):o}function ik(o,u,y){return o&&o.length&&u&&u.length?_d(o,u,n,y):o}var sk=$o(function(o,u){var y=o==null?0:o.length,E=lt(o,u);return eh(o,fn(u,function(D){return Bo(D,y)?+D:D}).sort(uw)),E});function ak(o,u){var y=[];if(!(o&&o.length))return y;var E=-1,D=[],X=o.length;for(u=jt(u,3);++E<X;){var de=o[E];u(de,E,o)&&(y.push(de),D.push(E))}return eh(o,D),y}function k1(o){return o==null?o:Yf.call(o)}function ok(o,u,y){var E=o==null?0:o.length;return E?(y&&typeof y!="number"&&Ii(o,u,y)?(u=0,y=E):(u=u==null?0:qt(u),y=y===n?E:qt(y)),Pi(o,u,y)):[]}function lk(o,u){return cu(o,u)}function ck(o,u,y){return no(o,u,jt(y,2))}function uk(o,u){var y=o==null?0:o.length;if(y){var E=cu(o,u);if(E<y&&ya(o[E],u))return E}return-1}function dk(o,u){return cu(o,u,!0)}function fk(o,u,y){return no(o,u,jt(y,2),!0)}function hk(o,u){var y=o==null?0:o.length;if(y){var E=cu(o,u,!0)-1;if(ya(o[E],u))return E}return-1}function pk(o){return o&&o.length?Xp(o):[]}function mk(o,u){return o&&o.length?Xp(o,jt(u,2)):[]}function gk(o){var u=o==null?0:o.length;return u?Pi(o,1,u):[]}function vk(o,u,y){return o&&o.length?(u=y||u===n?1:qt(u),Pi(o,0,u<0?0:u)):[]}function yk(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:qt(u),u=E-u,Pi(o,u<0?0:u,E)):[]}function wk(o,u){return o&&o.length?Kl(o,jt(u,3),!1,!0):[]}function xk(o,u){return o&&o.length?Kl(o,jt(u,3)):[]}var bk=Ut(function(o){return ga(Jt(o,1,_r,!0))}),_k=Ut(function(o){var u=Js(o);return _r(u)&&(u=n),ga(Jt(o,1,_r,!0),jt(u,2))}),Sk=Ut(function(o){var u=Js(o);return u=typeof u=="function"?u:n,ga(Jt(o,1,_r,!0),n,u)});function Nk(o){return o&&o.length?ga(o):[]}function jk(o,u){return o&&o.length?ga(o,jt(u,2)):[]}function kk(o,u){return u=typeof u=="function"?u:n,o&&o.length?ga(o,n,u):[]}function E1(o){if(!(o&&o.length))return[];var u=0;return o=ws(o,function(y){if(_r(y))return u=br(y.length,u),!0}),Ar(u,function(y){return fn(o,Pt(y))})}function zw(o,u){if(!(o&&o.length))return[];var y=E1(o);return u==null?y:fn(y,function(E){return Or(u,n,E)})}var Ek=Ut(function(o,u){return _r(o)?Vt(o,u):[]}),Ck=Ut(function(o){return js(ws(o,_r))}),Ak=Ut(function(o){var u=Js(o);return _r(u)&&(u=n),js(ws(o,_r),jt(u,2))}),Lk=Ut(function(o){var u=Js(o);return u=typeof u=="function"?u:n,js(ws(o,_r),n,u)}),Pk=Ut(E1);function Tk(o,u){return va(o||[],u||[],Ue)}function Ik(o,u){return va(o||[],u||[],Gl)}var Dk=Ut(function(o){var u=o.length,y=u>1?o[u-1]:n;return y=typeof y=="function"?(o.pop(),y):n,zw(o,y)});function qw(o){var u=W(o);return u.__chain__=!0,u}function Ok(o,u){return u(o),o}function om(o,u){return u(o)}var Mk=$o(function(o){var u=o.length,y=u?o[0]:0,E=this.__wrapped__,D=function(X){return lt(X,o)};return u>1||this.__actions__.length||!(E instanceof Ht)||!Bo(y)?this.thru(D):(E=E.slice(y,+y+(u?1:0)),E.__actions__.push({func:om,args:[D],thisArg:n}),new Ai(E,this.__chain__).thru(function(X){return u&&!X.length&&X.push(n),X}))});function Rk(){return qw(this)}function Fk(){return new Ai(this.value(),this.__chain__)}function $k(){this.__values__===n&&(this.__values__=rx(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function Bk(){return this}function Uk(o){for(var u,y=this;y instanceof au;){var E=Mw(y);E.__index__=0,E.__values__=n,u?D.__wrapped__=E:u=E;var D=E;y=y.__wrapped__}return D.__wrapped__=o,u}function zk(){var o=this.__wrapped__;if(o instanceof Ht){var u=o;return this.__actions__.length&&(u=new Ht(this)),u=u.reverse(),u.__actions__.push({func:om,args:[k1],thisArg:n}),new Ai(u,this.__chain__)}return this.thru(k1)}function qk(){return uu(this.__wrapped__,this.__actions__)}var Wk=Zp(function(o,u,y){tn.call(o,y)?++o[y]:Ve(o,y,1)});function Hk(o,u,y){var E=Bt(o)?Nl:bn;return y&&Ii(o,u,y)&&(u=n),E(o,jt(u,3))}function Vk(o,u){var y=Bt(o)?ws:ni;return y(o,jt(u,3))}var Gk=gw(Rw),Yk=gw(Fw);function Kk(o,u){return Jt(lm(o,u),1)}function Jk(o,u){return Jt(lm(o,u),Q)}function Xk(o,u,y){return y=y===n?1:qt(y),Jt(lm(o,u),y)}function Ww(o,u){var y=Bt(o)?Mr:Ot;return y(o,jt(u,3))}function Hw(o,u){var y=Bt(o)?Jc:xn;return y(o,jt(u,3))}var Qk=Zp(function(o,u,y){tn.call(o,y)?o[y].push(u):Ve(o,y,[u])});function Zk(o,u,y,E){o=es(o)?o:Pd(o),y=y&&!E?qt(y):0;var D=o.length;return y<0&&(y=br(D+y,0)),hm(o)?y<=D&&o.indexOf(u,y)>-1:!!D&&Xe(o,u,y)>-1}var eE=Ut(function(o,u,y){var E=-1,D=typeof u=="function",X=es(o)?Oe(o.length):[];return Ot(o,function(de){X[++E]=D?Or(u,de,y):Pn(de,u,y)}),X}),tE=Zp(function(o,u,y){Ve(o,y,u)});function lm(o,u){var y=Bt(o)?fn:Wl;return y(o,jt(u,3))}function nE(o,u,y,E){return o==null?[]:(Bt(u)||(u=u==null?[]:[u]),y=E?n:y,Bt(y)||(y=y==null?[]:[y]),Kp(o,u,y))}var rE=Zp(function(o,u,y){o[y?0:1].push(u)},function(){return[[],[]]});function iE(o,u,y){var E=Bt(o)?qs:Mn,D=arguments.length<3;return E(o,jt(u,4),y,D,Ot)}function sE(o,u,y){var E=Bt(o)?Xc:Mn,D=arguments.length<3;return E(o,jt(u,4),y,D,xn)}function aE(o,u){var y=Bt(o)?ws:ni;return y(o,dm(jt(u,3)))}function oE(o){var u=Bt(o)?Me:f1;return u(o)}function lE(o,u,y){(y?Ii(o,u,y):u===n)?u=1:u=qt(u);var E=Bt(o)?Re:Sd;return E(o,u)}function cE(o){var u=Bt(o)?ke:Jp;return u(o)}function uE(o){if(o==null)return 0;if(es(o))return hm(o)?la(o):o.length;var u=gi(o);return u==je||u==be?o.size:zl(o).length}function dE(o,u,y){var E=Bt(o)?x:h1;return y&&Ii(o,u,y)&&(u=n),E(o,jt(u,3))}var fE=Ut(function(o,u){if(o==null)return[];var y=u.length;return y>1&&Ii(o,u[0],u[1])?u=[]:y>2&&Ii(u[0],u[1],u[2])&&(u=[u[0]]),Kp(o,Jt(u,1),[])}),cm=Vf||function(){return pr.Date.now()};function hE(o,u){if(typeof u!="function")throw new Pr(a);return o=qt(o),function(){if(--o<1)return u.apply(this,arguments)}}function Vw(o,u,y){return u=y?n:u,u=o&&u==null?o.length:u,Fo(o,Z,n,n,n,n,u)}function Gw(o,u){var y;if(typeof u!="function")throw new Pr(a);return o=qt(o),function(){return--o>0&&(y=u.apply(this,arguments)),o<=1&&(u=n),y}}var C1=Ut(function(o,u,y){var E=k;if(y.length){var D=Ws(y,Ad(C1));E|=K}return Fo(o,E,u,y,D)}),Yw=Ut(function(o,u,y){var E=k|b;if(y.length){var D=Ws(y,Ad(Yw));E|=K}return Fo(u,E,o,y,D)});function Kw(o,u,y){u=y?n:u;var E=Fo(o,L,n,n,n,n,n,u);return E.placeholder=Kw.placeholder,E}function Jw(o,u,y){u=y?n:u;var E=Fo(o,M,n,n,n,n,n,u);return E.placeholder=Jw.placeholder,E}function Xw(o,u,y){var E,D,X,de,ge,Ae,Ke=0,Je=!1,tt=!1,ot=!0;if(typeof o!="function")throw new Pr(a);u=Xs(u)||0,or(y)&&(Je=!!y.leading,tt="maxWait"in y,X=tt?br(Xs(y.maxWait)||0,u):X,ot="trailing"in y?!!y.trailing:ot);function bt(Sr){var wa=E,qo=D;return E=D=n,Ke=Sr,de=o.apply(qo,wa),de}function kt(Sr){return Ke=Sr,ge=ah(Xt,u),Je?bt(Sr):de}function Wt(Sr){var wa=Sr-Ae,qo=Sr-Ke,gx=u-wa;return tt?zr(gx,X-qo):gx}function Et(Sr){var wa=Sr-Ae,qo=Sr-Ke;return Ae===n||wa>=u||wa<0||tt&&qo>=X}function Xt(){var Sr=cm();if(Et(Sr))return nn(Sr);ge=ah(Xt,Wt(Sr))}function nn(Sr){return ge=n,ot&&E?bt(Sr):(E=D=n,de)}function Es(){ge!==n&&jd(ge),Ke=0,E=Ae=D=ge=n}function Di(){return ge===n?de:nn(cm())}function Cs(){var Sr=cm(),wa=Et(Sr);if(E=arguments,D=this,Ae=Sr,wa){if(ge===n)return kt(Ae);if(tt)return jd(ge),ge=ah(Xt,u),bt(Ae)}return ge===n&&(ge=ah(Xt,u)),de}return Cs.cancel=Es,Cs.flush=Di,Cs}var pE=Ut(function(o,u){return pn(o,1,u)}),mE=Ut(function(o,u,y){return pn(o,Xs(u)||0,y)});function gE(o){return Fo(o,ee)}function um(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Pr(a);var y=function(){var E=arguments,D=u?u.apply(this,E):E[0],X=y.cache;if(X.has(D))return X.get(D);var de=o.apply(this,E);return y.cache=X.set(D,de)||X,de};return y.cache=new(um.Cache||Gs),y}um.Cache=Gs;function dm(o){if(typeof o!="function")throw new Pr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function vE(o){return Gw(2,o)}var yE=Qp(function(o,u){u=u.length==1&&Bt(u[0])?fn(u[0],In(jt())):fn(Jt(u,1),In(jt()));var y=u.length;return Ut(function(E){for(var D=-1,X=zr(E.length,y);++D<X;)E[D]=u[D].call(this,E[D]);return Or(o,this,E)})}),A1=Ut(function(o,u){var y=Ws(u,Ad(A1));return Fo(o,K,n,u,y)}),Qw=Ut(function(o,u){var y=Ws(u,Ad(Qw));return Fo(o,oe,n,u,y)}),wE=$o(function(o,u){return Fo(o,R,n,n,n,u)});function xE(o,u){if(typeof o!="function")throw new Pr(a);return u=u===n?u:qt(u),Ut(o,u)}function bE(o,u){if(typeof o!="function")throw new Pr(a);return u=u==null?0:br(qt(u),0),Ut(function(y){var E=y[u],D=ro(y,0,u);return E&&Wi(D,E),Or(o,this,D)})}function _E(o,u,y){var E=!0,D=!0;if(typeof o!="function")throw new Pr(a);return or(y)&&(E="leading"in y?!!y.leading:E,D="trailing"in y?!!y.trailing:D),Xw(o,u,{leading:E,maxWait:u,trailing:D})}function SE(o){return Vw(o,1)}function NE(o,u){return A1(Jl(u),o)}function jE(){if(!arguments.length)return[];var o=arguments[0];return Bt(o)?o:[o]}function kE(o){return gt(o,g)}function EE(o,u){return u=typeof u=="function"?u:n,gt(o,g,u)}function CE(o){return gt(o,m|g)}function AE(o,u){return u=typeof u=="function"?u:n,gt(o,m|g,u)}function LE(o,u){return u==null||ln(o,u,Hr(u))}function ya(o,u){return o===u||o!==o&&u!==u}var PE=rm(Qi),TE=rm(function(o,u){return o>=u}),hu=yd(function(){return arguments}())?yd:function(o){return gr(o)&&tn.call(o,"callee")&&!mi.call(o,"callee")},Bt=Oe.isArray,IE=_l?In(_l):qp;function es(o){return o!=null&&fm(o.length)&&!Uo(o)}function _r(o){return gr(o)&&es(o)}function DE(o){return o===!0||o===!1||gr(o)&&Ln(o)==Ce}var Xl=Gf||B1,OE=qa?In(qa):Wp;function ME(o){return gr(o)&&o.nodeType===1&&!oh(o)}function RE(o){if(o==null)return!0;if(es(o)&&(Bt(o)||typeof o=="string"||typeof o.splice=="function"||Xl(o)||Ld(o)||hu(o)))return!o.length;var u=gi(o);if(u==je||u==be)return!o.size;if(sh(o))return!zl(o).length;for(var y in o)if(tn.call(o,y))return!1;return!0}function FE(o,u){return Za(o,u)}function $E(o,u,y){y=typeof y=="function"?y:n;var E=y?y(o,u):n;return E===n?Za(o,u,n,y):!!E}function L1(o){if(!gr(o))return!1;var u=Ln(o);return u==ie||u==Ne||typeof o.message=="string"&&typeof o.name=="string"&&!oh(o)}function BE(o){return typeof o=="number"&&Mp(o)}function Uo(o){if(!or(o))return!1;var u=Ln(o);return u==pe||u==he||u==Ee||u==De}function Zw(o){return typeof o=="number"&&o==qt(o)}function fm(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=$}function or(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function gr(o){return o!=null&&typeof o=="object"}var ex=ud?In(ud):wd;function UE(o,u){return o===u||Li(o,u,x1(u))}function zE(o,u,y){return y=typeof y=="function"?y:n,Li(o,u,x1(u),y)}function qE(o){return tx(o)&&o!=+o}function WE(o){if(Ej(o))throw new xt(s);return Mo(o)}function HE(o){return o===null}function VE(o){return o==null}function tx(o){return typeof o=="number"||gr(o)&&Ln(o)==ue}function oh(o){if(!gr(o)||Ln(o)!=$e)return!1;var u=Il(o);if(u===null)return!0;var y=tn.call(u,"constructor")&&u.constructor;return typeof y=="function"&&y instanceof y&&Ss.call(y)==An}var P1=Co?In(Co):Ul;function GE(o){return Zw(o)&&o>=-$&&o<=$}var nx=dd?In(dd):Hp;function hm(o){return typeof o=="string"||!Bt(o)&&gr(o)&&Ln(o)==Ie}function ks(o){return typeof o=="symbol"||gr(o)&&Ln(o)==We}var Ld=Sl?In(Sl):xd;function YE(o){return o===n}function KE(o){return gr(o)&&gi(o)==nt}function JE(o){return gr(o)&&Ln(o)==dt}var XE=rm(ql),QE=rm(function(o,u){return o<=u});function rx(o){if(!o)return[];if(es(o))return hm(o)?fi(o):Zi(o);if(Ya&&o[Ya])return Pl(o[Ya]());var u=gi(o),y=u==je?Ao:u==be?Va:Pd;return y(o)}function zo(o){if(!o)return o===0?o:0;if(o=Xs(o),o===Q||o===-Q){var u=o<0?-1:1;return u*z}return o===o?o:0}function qt(o){var u=zo(o),y=u%1;return u===u?y?u-y:u:0}function ix(o){return o?st(qt(o),0,Pe):0}function Xs(o){if(typeof o=="number")return o;if(ks(o))return ae;if(or(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=or(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Hi(o);var y=Fs.test(o);return y||cl.test(o)?od(o.slice(2),y?2:8):zi.test(o)?ae:+o}function sx(o){return io(o,ts(o))}function ZE(o){return o?st(qt(o),-$,$):o===0?o:0}function _n(o){return o==null?"":Ti(o)}var e8=Ed(function(o,u){if(sh(u)||es(u)){io(u,Hr(u),o);return}for(var y in u)tn.call(u,y)&&Ue(o,y,u[y])}),ax=Ed(function(o,u){io(u,ts(u),o)}),pm=Ed(function(o,u,y,E){io(u,ts(u),o,E)}),t8=Ed(function(o,u,y,E){io(u,Hr(u),o,E)}),n8=$o(lt);function r8(o,u){var y=Bl(o);return u==null?y:Ge(y,u)}var i8=Ut(function(o,u){o=hn(o);var y=-1,E=u.length,D=E>2?u[2]:n;for(D&&Ii(u[0],u[1],D)&&(E=1);++y<E;)for(var X=u[y],de=ts(X),ge=-1,Ae=de.length;++ge<Ae;){var Ke=de[ge],Je=o[Ke];(Je===n||ya(Je,_s[Ke])&&!tn.call(o,Ke))&&(o[Ke]=X[Ke])}return o}),s8=Ut(function(o){return o.push(n,Sw),Or(ox,n,o)});function a8(o,u){return Te(o,jt(u,3),tr)}function o8(o,u){return Te(o,jt(u,3),ri)}function l8(o,u){return o==null?o:qr(o,jt(u,3),ts)}function c8(o,u){return o==null?o:mn(o,jt(u,3),ts)}function u8(o,u){return o&&tr(o,jt(u,3))}function d8(o,u){return o&&ri(o,jt(u,3))}function f8(o){return o==null?[]:ar(o,Hr(o))}function h8(o){return o==null?[]:ar(o,ts(o))}function T1(o,u,y){var E=o==null?n:qn(o,u);return E===n?y:E}function p8(o,u){return o!=null&&kw(o,u,Tr)}function I1(o,u){return o!=null&&kw(o,u,ma)}var m8=yw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=vn.call(u)),o[u]=y},O1(ns)),g8=yw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=vn.call(u)),tn.call(o,u)?o[u].push(y):o[u]=[y]},jt),v8=Ut(Pn);function Hr(o){return es(o)?we(o):zl(o)}function ts(o){return es(o)?we(o,!0):Qf(o)}function y8(o,u){var y={};return u=jt(u,3),tr(o,function(E,D,X){Ve(y,u(E,D,X),E)}),y}function w8(o,u){var y={};return u=jt(u,3),tr(o,function(E,D,X){Ve(y,D,u(E,D,X))}),y}var x8=Ed(function(o,u,y){Hl(o,u,y)}),ox=Ed(function(o,u,y,E){Hl(o,u,y,E)}),b8=$o(function(o,u){var y={};if(o==null)return y;var E=!1;u=fn(u,function(X){return X=Ks(X,o),E||(E=X.length>1),X}),io(o,y1(o),y),E&&(y=gt(y,m|w|g,mj));for(var D=u.length;D--;)rh(y,u[D]);return y});function _8(o,u){return lx(o,dm(jt(u)))}var S8=$o(function(o,u){return o==null?{}:d1(o,u)});function lx(o,u){if(o==null)return{};var y=fn(y1(o),function(E){return[E]});return u=jt(u),Zf(o,y,function(E,D){return u(E,D[0])})}function N8(o,u,y){u=Ks(u,o);var E=-1,D=u.length;for(D||(D=1,o=n);++E<D;){var X=o==null?n:o[so(u[E])];X===n&&(E=D,X=y),o=Uo(X)?X.call(o):X}return o}function j8(o,u,y){return o==null?o:Gl(o,u,y)}function k8(o,u,y,E){return E=typeof E=="function"?E:n,o==null?o:Gl(o,u,y,E)}var cx=bw(Hr),ux=bw(ts);function E8(o,u,y){var E=Bt(o),D=E||Xl(o)||Ld(o);if(u=jt(u,4),y==null){var X=o&&o.constructor;D?y=E?new X:[]:or(o)?y=Uo(X)?Bl(Il(o)):{}:y={}}return(D?Mr:tr)(o,function(de,ge,Ae){return u(y,de,ge,Ae)}),y}function C8(o,u){return o==null?!0:rh(o,u)}function A8(o,u,y){return o==null?o:Yl(o,u,Jl(y))}function L8(o,u,y,E){return E=typeof E=="function"?E:n,o==null?o:Yl(o,u,Jl(y),E)}function Pd(o){return o==null?[]:Vi(o,Hr(o))}function P8(o){return o==null?[]:Vi(o,ts(o))}function T8(o,u,y){return y===n&&(y=u,u=n),y!==n&&(y=Xs(y),y=y===y?y:0),u!==n&&(u=Xs(u),u=u===u?u:0),st(Xs(o),u,y)}function I8(o,u,y){return u=zo(u),y===n?(y=u,u=0):y=zo(y),o=Xs(o),Oo(o,u,y)}function D8(o,u,y){if(y&&typeof y!="boolean"&&Ii(o,u,y)&&(u=y=n),y===n&&(typeof u=="boolean"?(y=u,u=n):typeof o=="boolean"&&(y=o,o=n)),o===n&&u===n?(o=0,u=1):(o=zo(o),u===n?(u=o,o=0):u=zo(u)),o>u){var E=o;o=u,u=E}if(y||o%1||u%1){var D=Fp();return zr(o+D*(u-o+bl("1e-"+((D+"").length-1))),u)}return Vl(o,u)}var O8=Cd(function(o,u,y){return u=u.toLowerCase(),o+(y?dx(u):u)});function dx(o){return D1(_n(o).toLowerCase())}function fx(o){return o=_n(o),o&&o.replace(dl,Qc).replace(ad,"")}function M8(o,u,y){o=_n(o),u=Ti(u);var E=o.length;y=y===n?E:st(qt(y),0,E);var D=y;return y-=u.length,y>=0&&o.slice(y,D)==u}function R8(o){return o=_n(o),o&&wt.test(o)?o.replace(Sn,Zc):o}function F8(o){return o=_n(o),o&&ir.test(o)?o.replace(Kn,"\\$&"):o}var $8=Cd(function(o,u,y){return o+(y?"-":"")+u.toLowerCase()}),B8=Cd(function(o,u,y){return o+(y?" ":"")+u.toLowerCase()}),U8=mw("toLowerCase");function z8(o,u,y){o=_n(o),u=qt(u);var E=u?la(o):0;if(!u||E>=u)return o;var D=(u-E)/2;return nm(Ol(D),y)+o+nm(Dl(D),y)}function q8(o,u,y){o=_n(o),u=qt(u);var E=u?la(o):0;return u&&E<u?o+nm(u-E,y):o}function W8(o,u,y){o=_n(o),u=qt(u);var E=u?la(o):0;return u&&E<u?nm(u-E,y)+o:o}function H8(o,u,y){return y||u==null?u=0:u&&(u=+u),Zg(_n(o).replace(En,""),u||0)}function V8(o,u,y){return(y?Ii(o,u,y):u===n)?u=1:u=qt(u),Ro(_n(o),u)}function G8(){var o=arguments,u=_n(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var Y8=Cd(function(o,u,y){return o+(y?"_":"")+u.toLowerCase()});function K8(o,u,y){return y&&typeof y!="number"&&Ii(o,u,y)&&(u=y=n),y=y===n?Pe:y>>>0,y?(o=_n(o),o&&(typeof u=="string"||u!=null&&!P1(u))&&(u=Ti(u),!u&&xs(o))?ro(fi(o),0,y):o.split(u,y)):[]}var J8=Cd(function(o,u,y){return o+(y?" ":"")+D1(u)});function X8(o,u,y){return o=_n(o),y=y==null?0:st(qt(y),0,o.length),u=Ti(u),o.slice(y,y+u.length)==u}function Q8(o,u,y){var E=W.templateSettings;y&&Ii(o,u,y)&&(u=n),o=_n(o),u=pm({},u,E,_w);var D=pm({},u.imports,E.imports,_w),X=Hr(D),de=Vi(D,X),ge,Ae,Ke=0,Je=u.interpolate||oa,tt="__p += '",ot=Po((u.escape||oa).source+"|"+Je.source+"|"+(Je===an?vs:oa).source+"|"+(u.evaluate||oa).source+"|$","g"),bt="//# sourceURL="+(tn.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wf+"]")+`
`;o.replace(ot,function(Et,Xt,nn,Es,Di,Cs){return nn||(nn=Es),tt+=o.slice(Ke,Cs).replace(Ku,Al),Xt&&(ge=!0,tt+=`' +
__e(`+Xt+`) +
'`),Di&&(Ae=!0,tt+=`';
`+Di+`;
__p += '`),nn&&(tt+=`' +
((__t = (`+nn+`)) == null ? '' : __t) +
'`),Ke=Cs+Et.length,Et}),tt+=`';
`;var kt=tn.call(u,"variable")&&u.variable;if(!kt)tt=`with (obj) {
`+tt+`
}
`;else if(ms.test(kt))throw new xt(l);tt=(Ae?tt.replace(en,""):tt).replace(aa,"$1").replace(On,"$1;"),tt="function("+(kt||"obj")+`) {
`+(kt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ge?", __e = _.escape":"")+(Ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+tt+`return __p
}`;var Wt=px(function(){return Ft(X,bt+"return "+tt).apply(n,de)});if(Wt.source=tt,L1(Wt))throw Wt;return Wt}function Z8(o){return _n(o).toLowerCase()}function eC(o){return _n(o).toUpperCase()}function tC(o,u,y){if(o=_n(o),o&&(y||u===n))return Hi(o);if(!o||!(u=Ti(u)))return o;var E=fi(o),D=fi(u),X=kl(E,D),de=El(E,D)+1;return ro(E,X,de).join("")}function nC(o,u,y){if(o=_n(o),o&&(y||u===n))return o.slice(0,ca(o)+1);if(!o||!(u=Ti(u)))return o;var E=fi(o),D=El(E,fi(u))+1;return ro(E,0,D).join("")}function rC(o,u,y){if(o=_n(o),o&&(y||u===n))return o.replace(En,"");if(!o||!(u=Ti(u)))return o;var E=fi(o),D=kl(E,fi(u));return ro(E,D).join("")}function iC(o,u){var y=le,E=O;if(or(u)){var D="separator"in u?u.separator:D;y="length"in u?qt(u.length):y,E="omission"in u?Ti(u.omission):E}o=_n(o);var X=o.length;if(xs(o)){var de=fi(o);X=de.length}if(y>=X)return o;var ge=y-la(E);if(ge<1)return E;var Ae=de?ro(de,0,ge).join(""):o.slice(0,ge);if(D===n)return Ae+E;if(de&&(ge+=Ae.length-ge),P1(D)){if(o.slice(ge).search(D)){var Ke,Je=Ae;for(D.global||(D=Po(D.source,_n(ys.exec(D))+"g")),D.lastIndex=0;Ke=D.exec(Je);)var tt=Ke.index;Ae=Ae.slice(0,tt===n?ge:tt)}}else if(o.indexOf(Ti(D),ge)!=ge){var ot=Ae.lastIndexOf(D);ot>-1&&(Ae=Ae.slice(0,ot))}return Ae+E}function sC(o){return o=_n(o),o&&Yt.test(o)?o.replace(ci,Lo):o}var aC=Cd(function(o,u,y){return o+(y?" ":"")+u.toUpperCase()}),D1=mw("toUpperCase");function hx(o,u,y){return o=_n(o),u=y?n:u,u===n?Ll(o)?Ga(o):me(o):o.match(u)||[]}var px=Ut(function(o,u){try{return Or(o,n,u)}catch(y){return L1(y)?y:new xt(y)}}),oC=$o(function(o,u){return Mr(u,function(y){y=so(y),Ve(o,y,C1(o[y],o))}),o});function lC(o){var u=o==null?0:o.length,y=jt();return o=u?fn(o,function(E){if(typeof E[1]!="function")throw new Pr(a);return[y(E[0]),E[1]]}):[],Ut(function(E){for(var D=-1;++D<u;){var X=o[D];if(Or(X[0],this,E))return Or(X[1],this,E)}})}function cC(o){return at(gt(o,m))}function O1(o){return function(){return o}}function uC(o,u){return o==null||o!==o?u:o}var dC=vw(),fC=vw(!0);function ns(o){return o}function M1(o){return Xf(typeof o=="function"?o:gt(o,m))}function hC(o){return Vp(gt(o,m))}function pC(o,u){return Gp(o,gt(u,m))}var mC=Ut(function(o,u){return function(y){return Pn(y,o,u)}}),gC=Ut(function(o,u){return function(y){return Pn(o,y,u)}});function R1(o,u,y){var E=Hr(u),D=ar(u,E);y==null&&!(or(u)&&(D.length||!E.length))&&(y=u,u=o,o=this,D=ar(u,Hr(u)));var X=!(or(y)&&"chain"in y)||!!y.chain,de=Uo(o);return Mr(D,function(ge){var Ae=u[ge];o[ge]=Ae,de&&(o.prototype[ge]=function(){var Ke=this.__chain__;if(X||Ke){var Je=o(this.__wrapped__),tt=Je.__actions__=Zi(this.__actions__);return tt.push({func:Ae,args:arguments,thisArg:o}),Je.__chain__=Ke,Je}return Ae.apply(o,Wi([this.value()],arguments))})}),o}function vC(){return pr._===this&&(pr._=sr),this}function F1(){}function yC(o){return o=qt(o),Ut(function(u){return Yp(u,o)})}var wC=m1(fn),xC=m1(Nl),bC=m1(x);function mx(o){return _1(o)?Pt(so(o)):bd(o)}function _C(o){return function(u){return o==null?n:qn(o,u)}}var SC=ww(),NC=ww(!0);function $1(){return[]}function B1(){return!1}function jC(){return{}}function kC(){return""}function EC(){return!0}function CC(o,u){if(o=qt(o),o<1||o>$)return[];var y=Pe,E=zr(o,Pe);u=jt(u),o-=Pe;for(var D=Ar(E,u);++y<o;)u(y);return D}function AC(o){return Bt(o)?fn(o,so):ks(o)?[o]:Zi(Ow(_n(o)))}function LC(o){var u=++Yi;return _n(o)+u}var PC=tm(function(o,u){return o+u},0),TC=g1("ceil"),IC=tm(function(o,u){return o/u},1),DC=g1("floor");function OC(o){return o&&o.length?It(o,ns,Qi):n}function MC(o,u){return o&&o.length?It(o,jt(u,2),Qi):n}function RC(o){return Dt(o,ns)}function FC(o,u){return Dt(o,jt(u,2))}function $C(o){return o&&o.length?It(o,ns,ql):n}function BC(o,u){return o&&o.length?It(o,jt(u,2),ql):n}var UC=tm(function(o,u){return o*u},1),zC=g1("round"),qC=tm(function(o,u){return o-u},0);function WC(o){return o&&o.length?er(o,ns):0}function HC(o,u){return o&&o.length?er(o,jt(u,2)):0}return W.after=hE,W.ary=Vw,W.assign=e8,W.assignIn=ax,W.assignInWith=pm,W.assignWith=t8,W.at=n8,W.before=Gw,W.bind=C1,W.bindAll=oC,W.bindKey=Yw,W.castArray=jE,W.chain=qw,W.chunk=Dj,W.compact=Oj,W.concat=Mj,W.cond=lC,W.conforms=cC,W.constant=O1,W.countBy=Wk,W.create=r8,W.curry=Kw,W.curryRight=Jw,W.debounce=Xw,W.defaults=i8,W.defaultsDeep=s8,W.defer=pE,W.delay=mE,W.difference=Rj,W.differenceBy=Fj,W.differenceWith=$j,W.drop=Bj,W.dropRight=Uj,W.dropRightWhile=zj,W.dropWhile=qj,W.fill=Wj,W.filter=Vk,W.flatMap=Kk,W.flatMapDeep=Jk,W.flatMapDepth=Xk,W.flatten=$w,W.flattenDeep=Hj,W.flattenDepth=Vj,W.flip=gE,W.flow=dC,W.flowRight=fC,W.fromPairs=Gj,W.functions=f8,W.functionsIn=h8,W.groupBy=Qk,W.initial=Kj,W.intersection=Jj,W.intersectionBy=Xj,W.intersectionWith=Qj,W.invert=m8,W.invertBy=g8,W.invokeMap=eE,W.iteratee=M1,W.keyBy=tE,W.keys=Hr,W.keysIn=ts,W.map=lm,W.mapKeys=y8,W.mapValues=w8,W.matches=hC,W.matchesProperty=pC,W.memoize=um,W.merge=x8,W.mergeWith=ox,W.method=mC,W.methodOf=gC,W.mixin=R1,W.negate=dm,W.nthArg=yC,W.omit=b8,W.omitBy=_8,W.once=vE,W.orderBy=nE,W.over=wC,W.overArgs=yE,W.overEvery=xC,W.overSome=bC,W.partial=A1,W.partialRight=Qw,W.partition=rE,W.pick=S8,W.pickBy=lx,W.property=mx,W.propertyOf=_C,W.pull=nk,W.pullAll=Uw,W.pullAllBy=rk,W.pullAllWith=ik,W.pullAt=sk,W.range=SC,W.rangeRight=NC,W.rearg=wE,W.reject=aE,W.remove=ak,W.rest=xE,W.reverse=k1,W.sampleSize=lE,W.set=j8,W.setWith=k8,W.shuffle=cE,W.slice=ok,W.sortBy=fE,W.sortedUniq=pk,W.sortedUniqBy=mk,W.split=K8,W.spread=bE,W.tail=gk,W.take=vk,W.takeRight=yk,W.takeRightWhile=wk,W.takeWhile=xk,W.tap=Ok,W.throttle=_E,W.thru=om,W.toArray=rx,W.toPairs=cx,W.toPairsIn=ux,W.toPath=AC,W.toPlainObject=sx,W.transform=E8,W.unary=SE,W.union=bk,W.unionBy=_k,W.unionWith=Sk,W.uniq=Nk,W.uniqBy=jk,W.uniqWith=kk,W.unset=C8,W.unzip=E1,W.unzipWith=zw,W.update=A8,W.updateWith=L8,W.values=Pd,W.valuesIn=P8,W.without=Ek,W.words=hx,W.wrap=NE,W.xor=Ck,W.xorBy=Ak,W.xorWith=Lk,W.zip=Pk,W.zipObject=Tk,W.zipObjectDeep=Ik,W.zipWith=Dk,W.entries=cx,W.entriesIn=ux,W.extend=ax,W.extendWith=pm,R1(W,W),W.add=PC,W.attempt=px,W.camelCase=O8,W.capitalize=dx,W.ceil=TC,W.clamp=T8,W.clone=kE,W.cloneDeep=CE,W.cloneDeepWith=AE,W.cloneWith=EE,W.conformsTo=LE,W.deburr=fx,W.defaultTo=uC,W.divide=IC,W.endsWith=M8,W.eq=ya,W.escape=R8,W.escapeRegExp=F8,W.every=Hk,W.find=Gk,W.findIndex=Rw,W.findKey=a8,W.findLast=Yk,W.findLastIndex=Fw,W.findLastKey=o8,W.floor=DC,W.forEach=Ww,W.forEachRight=Hw,W.forIn=l8,W.forInRight=c8,W.forOwn=u8,W.forOwnRight=d8,W.get=T1,W.gt=PE,W.gte=TE,W.has=p8,W.hasIn=I1,W.head=Bw,W.identity=ns,W.includes=Zk,W.indexOf=Yj,W.inRange=I8,W.invoke=v8,W.isArguments=hu,W.isArray=Bt,W.isArrayBuffer=IE,W.isArrayLike=es,W.isArrayLikeObject=_r,W.isBoolean=DE,W.isBuffer=Xl,W.isDate=OE,W.isElement=ME,W.isEmpty=RE,W.isEqual=FE,W.isEqualWith=$E,W.isError=L1,W.isFinite=BE,W.isFunction=Uo,W.isInteger=Zw,W.isLength=fm,W.isMap=ex,W.isMatch=UE,W.isMatchWith=zE,W.isNaN=qE,W.isNative=WE,W.isNil=VE,W.isNull=HE,W.isNumber=tx,W.isObject=or,W.isObjectLike=gr,W.isPlainObject=oh,W.isRegExp=P1,W.isSafeInteger=GE,W.isSet=nx,W.isString=hm,W.isSymbol=ks,W.isTypedArray=Ld,W.isUndefined=YE,W.isWeakMap=KE,W.isWeakSet=JE,W.join=Zj,W.kebabCase=$8,W.last=Js,W.lastIndexOf=ek,W.lowerCase=B8,W.lowerFirst=U8,W.lt=XE,W.lte=QE,W.max=OC,W.maxBy=MC,W.mean=RC,W.meanBy=FC,W.min=$C,W.minBy=BC,W.stubArray=$1,W.stubFalse=B1,W.stubObject=jC,W.stubString=kC,W.stubTrue=EC,W.multiply=UC,W.nth=tk,W.noConflict=vC,W.noop=F1,W.now=cm,W.pad=z8,W.padEnd=q8,W.padStart=W8,W.parseInt=H8,W.random=D8,W.reduce=iE,W.reduceRight=sE,W.repeat=V8,W.replace=G8,W.result=N8,W.round=zC,W.runInContext=Se,W.sample=oE,W.size=uE,W.snakeCase=Y8,W.some=dE,W.sortedIndex=lk,W.sortedIndexBy=ck,W.sortedIndexOf=uk,W.sortedLastIndex=dk,W.sortedLastIndexBy=fk,W.sortedLastIndexOf=hk,W.startCase=J8,W.startsWith=X8,W.subtract=qC,W.sum=WC,W.sumBy=HC,W.template=Q8,W.times=CC,W.toFinite=zo,W.toInteger=qt,W.toLength=ix,W.toLower=Z8,W.toNumber=Xs,W.toSafeInteger=ZE,W.toString=_n,W.toUpper=eC,W.trim=tC,W.trimEnd=nC,W.trimStart=rC,W.truncate=iC,W.unescape=sC,W.uniqueId=LC,W.upperCase=aC,W.upperFirst=D1,W.each=Ww,W.eachRight=Hw,W.first=Bw,R1(W,function(){var o={};return tr(W,function(u,y){tn.call(W.prototype,y)||(o[y]=u)}),o}(),{chain:!1}),W.VERSION=r,Mr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){W[o].placeholder=W}),Mr(["drop","take"],function(o,u){Ht.prototype[o]=function(y){y=y===n?1:br(qt(y),0);var E=this.__filtered__&&!u?new Ht(this):this.clone();return E.__filtered__?E.__takeCount__=zr(y,E.__takeCount__):E.__views__.push({size:zr(y,Pe),type:o+(E.__dir__<0?"Right":"")}),E},Ht.prototype[o+"Right"]=function(y){return this.reverse()[o](y).reverse()}}),Mr(["filter","map","takeWhile"],function(o,u){var y=u+1,E=y==J||y==ye;Ht.prototype[o]=function(D){var X=this.clone();return X.__iteratees__.push({iteratee:jt(D,3),type:y}),X.__filtered__=X.__filtered__||E,X}}),Mr(["head","last"],function(o,u){var y="take"+(u?"Right":"");Ht.prototype[o]=function(){return this[y](1).value()[0]}}),Mr(["initial","tail"],function(o,u){var y="drop"+(u?"":"Right");Ht.prototype[o]=function(){return this.__filtered__?new Ht(this):this[y](1)}}),Ht.prototype.compact=function(){return this.filter(ns)},Ht.prototype.find=function(o){return this.filter(o).head()},Ht.prototype.findLast=function(o){return this.reverse().find(o)},Ht.prototype.invokeMap=Ut(function(o,u){return typeof o=="function"?new Ht(this):this.map(function(y){return Pn(y,o,u)})}),Ht.prototype.reject=function(o){return this.filter(dm(jt(o)))},Ht.prototype.slice=function(o,u){o=qt(o);var y=this;return y.__filtered__&&(o>0||u<0)?new Ht(y):(o<0?y=y.takeRight(-o):o&&(y=y.drop(o)),u!==n&&(u=qt(u),y=u<0?y.dropRight(-u):y.take(u-o)),y)},Ht.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ht.prototype.toArray=function(){return this.take(Pe)},tr(Ht.prototype,function(o,u){var y=/^(?:filter|find|map|reject)|While$/.test(u),E=/^(?:head|last)$/.test(u),D=W[E?"take"+(u=="last"?"Right":""):u],X=E||/^find/.test(u);D&&(W.prototype[u]=function(){var de=this.__wrapped__,ge=E?[1]:arguments,Ae=de instanceof Ht,Ke=ge[0],Je=Ae||Bt(de),tt=function(Xt){var nn=D.apply(W,Wi([Xt],ge));return E&&ot?nn[0]:nn};Je&&y&&typeof Ke=="function"&&Ke.length!=1&&(Ae=Je=!1);var ot=this.__chain__,bt=!!this.__actions__.length,kt=X&&!ot,Wt=Ae&&!bt;if(!X&&Je){de=Wt?de:new Ht(this);var Et=o.apply(de,ge);return Et.__actions__.push({func:om,args:[tt],thisArg:n}),new Ai(Et,ot)}return kt&&Wt?o.apply(this,ge):(Et=this.thru(tt),kt?E?Et.value()[0]:Et.value():Et)})}),Mr(["pop","push","shift","sort","splice","unshift"],function(o){var u=bs[o],y=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",E=/^(?:pop|shift)$/.test(o);W.prototype[o]=function(){var D=arguments;if(E&&!this.__chain__){var X=this.value();return u.apply(Bt(X)?X:[],D)}return this[y](function(de){return u.apply(Bt(de)?de:[],D)})}}),tr(Ht.prototype,function(o,u){var y=W[u];if(y){var E=y.name+"";tn.call($l,E)||($l[E]=[]),$l[E].push({name:u,func:y})}}),$l[em(n,b).name]=[{name:"wrapper",func:n}],Ht.prototype.clone=$p,Ht.prototype.reverse=n1,Ht.prototype.value=gd,W.prototype.at=Mk,W.prototype.chain=Rk,W.prototype.commit=Fk,W.prototype.next=$k,W.prototype.plant=Uk,W.prototype.reverse=zk,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=qk,W.prototype.first=W.prototype.head,Ya&&(W.prototype[Ya]=Bk),W},pi=ua();Qr?((Qr.exports=pi)._=pi,qi._=pi):pr._=pi}).call(si)})(Q0,Q0.exports);var D$=Q0.exports;async function p6(e,t){try{const{data:n,error:r}=await et.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r){if(console.error("Error en RPC get_group_calendar:",r),r.code==="42501"){console.warn("Error de permisos RLS en calendarios, continuando sin generar calendario");return}throw r}if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,s="calendar.ics",a=new Blob([i],{type:"text/calendar;charset=utf-8"}),l=new File([a],s,{type:"text/calendar;charset=utf-8"}),{error:c}=await et.storage.from("calendars").upload(`${e}/${t}/${s}`,l,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:f}}=et.storage.from("calendars").getPublicUrl(`${e}/${t}/${s}`),p=`${f}?v=${Date.now()}`,{error:m}=await et.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(m)throw m}catch(n){throw console.error("Error updating calendar:",n),n}}async function Z0(e){return Bn(async()=>{const{data:t,error:n}=await et.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function c0(e){const t={...e,type:e.type||"song"};return Bn(async()=>{const{data:n,error:r}=await et.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la canción")}async function O$(e,t,n){const{data:{user:r}}=await et.auth.getUser();if(!r)return Le.error("No se pudo obtener la información del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return Bn(async()=>{const{data:s,error:a}=await et.from("songs").insert(i).select().single();return{data:s,error:a}},"Error al crear el medley")}async function A_(e,t){return Bn(async()=>{const{data:n,error:r}=await et.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la canción")}async function M$(e){try{const{error:t}=await et.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la canción:",t),Le.error("Error al eliminar la canción"),!1):!0}catch(t){return console.error("Error al eliminar la canción:",t),Le.error("Error al eliminar la canción"),!1}}async function cy(e){return Bn(async()=>{const{data:t,error:n}=await et.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function L_(e){return Bn(async()=>{const{data:t,error:n}=await et.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function K5(e){return Bn(async()=>{const{data:t,error:n}=await et.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function R$(e,t){return Bn(async()=>{const{data:n,error:r}=await et.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function F$(e){try{const{error:t}=await et.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),Le.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),Le.error("Error al eliminar el setlist"),!1}}async function eg(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await et.auth.getUser();if(!r)return console.error("No se pudo obtener la información del usuario"),Le.error("No se pudo obtener la información del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:s,error:a}=await et.from("setlist_songs").insert(i).select().single();return a?(console.error("Error de Supabase al añadir la canción al setlist:",a),console.error("Código de error:",a.code),console.error("Mensaje de error:",a.message),console.error("Detalles:",a.details),Le.error(`Error al añadir la canción al setlist: ${a.message}`),null):(console.log("Canción añadida exitosamente:",s),s)}catch(r){return console.error("Error general al añadir la canción al setlist:",r),Le.error("Error al añadir la canción al setlist"),null}}async function $$(e,t){try{const{error:n,count:r}=await et.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la canción del setlist:",n),Le.error("Error al eliminar la canción del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la canción del setlist:",n),Le.error("Error al eliminar la canción del setlist"),!1}}async function B$(e,t){try{const{error:n}=await et.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),Le.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),Le.error("Error al reordenar las canciones del setlist"),!1}}async function P_(e,t){return await Bn(async()=>{const{data:r,error:i}=await et.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function U$(e,t){return Bn(async()=>{const{data:n,error:r}=await et.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function z$(e,t){try{const{data:n,error:r}=await et.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Le.error("Error al obtener el medley"),null;const s=[...n.medley_song_ids||[],t],{data:a,error:l}=await et.from("songs").update({medley_song_ids:s}).eq("id",e).select().single();return l?(console.error("Error al añadir la canción al medley:",l),Le.error("Error al añadir la canción al medley"),null):a}catch(n){return console.error("Error al añadir la canción al medley:",n),Le.error("Error al añadir la canción al medley"),null}}async function q$(e,t){try{const{data:n,error:r}=await et.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Le.error("Error al obtener el medley"),!1;const s=(n.medley_song_ids||[]).filter(l=>l!==t),{error:a}=await et.from("songs").update({medley_song_ids:s}).eq("id",e);return a?(console.error("Error al eliminar la canción del medley:",a),Le.error("Error al eliminar la canción del medley"),!1):!0}catch(n){return console.error("Error al eliminar la canción del medley:",n),Le.error("Error al eliminar la canción del medley"),!1}}async function W$(e){try{const{error:t}=await et.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),Le.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),Le.error("Error al eliminar el medley"),!1}}async function H$(e,t){try{const n=await L_(e);if(!n)return Le.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await et.auth.getUser();if(!r)return Le.error("No se pudo obtener la información del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},s=await K5(i);if(!s)return Le.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const a=n.songs.map(l=>eg(s.id,l.song_id,l.position));await Promise.all(a)}return await L_(s.id)}catch(n){return console.error("Error al duplicar el setlist:",n),Le.error("Error al duplicar el setlist"),null}}let gu=null;function T_({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:s,availableDates:a,members:l}){var Ne;const[c,f]=C.useState(""),[p,m]=C.useState(""),[w,g]=C.useState(""),[N,j]=C.useState(""),[k,b]=C.useState(!1),[S,L]=C.useState([]),[M,K]=C.useState(!1),{user:oe}=Rs(),[Z,R]=C.useState(""),[ee,le]=C.useState([]),[O,U]=C.useState(null),[Y,J]=C.useState(!1),[xe,ye]=C.useState([]),[Q,$]=C.useState([]),[z,ae]=C.useState("");C.useEffect(()=>{if(i)f(i.name),m(i.date),g(i.time),j(i.notes||""),R(i.location||""),ae(i.setlist_id||""),i.location&&U({display_name:i.location,lat:"",lon:"",type:"",class:""}),Pe();else if(r){const ie=cn(r,"yyyy-MM-dd");m(ie),g("20:00"),ae(""),P(ie)}},[i,r]),C.useEffect(()=>{e&&(async()=>{const[pe,he]=await Promise.all([et.from("events").select("*").eq("group_id",n),cy(n)]);ye(pe.data||[]),$(he||[])})()},[e,n]);const Pe=async()=>{if(i)try{const ie=await Bn(()=>et.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),pe=await Bn(()=>et.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),he=await Bn(()=>et.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(ie){const je=new Set((pe==null?void 0:pe.map(Fe=>Fe.user_id))||[]),ue=new Set;he==null||he.forEach(Fe=>{var De;(De=Fe.event_members)==null||De.forEach(Be=>{ue.add(Be.user_id)})});const G=new Set(ie.map(Fe=>Fe.group_member_id)),$e=l.map(Fe=>({memberId:Fe.id,userId:Fe.user_id,selected:G.has(Fe.id),isAvailable:G.has(Fe.id)||(Fe.user_id?je.has(Fe.user_id)&&!ue.has(Fe.user_id):!0),sync_calendar:Fe.sync_calendar||!1}));L($e)}}catch(ie){console.error("Error loading event members:",ie)}},P=async(ie,pe)=>{try{const he=await Bn(()=>et.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",ie),"Error loading external events"),je=new Set;he==null||he.forEach(Fe=>{var De;(De=Fe.event_members)==null||De.forEach(Be=>{je.add(Be.user_id)})});const ue=await Bn(()=>et.from("member_availability").select("user_id").eq("date",ie),"Error loading member availability"),G=new Set((ue==null?void 0:ue.map(Fe=>Fe.user_id))||[]),$e=l.map(Fe=>{const De=Fe.user_id?G.has(Fe.user_id)&&!je.has(Fe.user_id):!0;return{memberId:Fe.id,userId:Fe.user_id,selected:pe?pe.includes(Fe.id):Fe.role_in_group==="principal"&&De,isAvailable:De,sync_calendar:Fe.sync_calendar||!1}});L($e)}catch(he){console.error("Error loading available members:",he)}};C.useEffect(()=>{H()},[S]);const H=()=>{const ie=l.filter(je=>je.role_in_group==="principal"),pe=S.filter(je=>je.selected).map(je=>je.memberId),he=new Set;return ie.forEach(je=>{pe.includes(je.id)||je.instruments.forEach(ue=>{S.filter($e=>$e.selected).some($e=>{const Fe=l.find(De=>De.id===$e.memberId);return Fe==null?void 0:Fe.instruments.some(De=>De.id===ue.id)})||he.add(ue.name)})}),K(he.size>0),he},re=(ie,pe)=>{L(he=>he.map(je=>je.memberId===ie?{...je,selected:pe}:je))},ce=async ie=>{if(!ie.trim()){le([]);return}gu&&gu.abort(),gu=new AbortController,J(!0);try{const je=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(ie)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:gu.signal})).json()).sort((ue,G)=>{const $e=ue.display_name.toLowerCase().includes("madrid")||ue.display_name.toLowerCase().includes("españa"),Fe=G.display_name.toLowerCase().includes("madrid")||G.display_name.toLowerCase().includes("españa");return $e&&!Fe?-1:!$e&&Fe?1:0});le(je)}catch(pe){pe.name!=="AbortError"&&(console.error("Error searching locations:",pe),Le.error("Error al buscar ubicaciones"))}finally{J(!1),gu=null}};C.useEffect(()=>()=>{gu&&gu.abort()},[]);const fe=pt.useCallback(D$.debounce(ie=>{ce(ie)},300),[]),Ee=ie=>{const pe=ie.target.value;if(R(pe),le([]),!pe.trim()){le([]);return}fe(pe)},Ce=async()=>{try{if(!c||!p){Le.error("Por favor completa los campos requeridos");return}b(!0);const ie={group_id:n,name:c.trim(),date:p,time:w,datetime:(()=>{const he=new Date(`${p}T${w}`),je=-he.getTimezoneOffset();return new Date(he.getTime()-je*60*1e3).toISOString().replace("Z",V$(je))})(),notes:N.trim()||null,created_by:oe.id,location:O?O.display_name:Z};let pe;if(i){const{data:he,error:je}=await et.from("events").update(ie).eq("id",i.id).select().single();if(je)throw je;pe=i.id}else{const{data:he,error:je}=await et.from("events").insert([ie]).select().single();if(je)throw je;pe=he.id}if(pe){i&&await et.from("event_members").delete().eq("event_id",pe);const he=S.filter(je=>je.selected).map(je=>({event_id:pe,group_member_id:je.memberId,user_id:je.userId,created_by:oe.id}));if(he.length>0){const{error:je}=await et.from("event_members").insert(he);if(je)throw je}try{await Promise.all(S.filter(je=>je.selected&&je.sync_calendar&&je.userId).map(async je=>{try{return await p6(n,je.memberId)}catch{return null}}))}catch{}z?await P_(pe,z):i!=null&&i.setlist_id&&await P_(pe,null)}b(!1),s&&s(),t(),Le.success(i?"Evento actualizado":"Evento creado")}catch(ie){b(!1),console.error("Error saving event:",ie),Le.error("Error al guardar el evento")}},te=ie=>{const pe=new Date;pe.setHours(0,0,0,0);const he=new Set(a.map(ue=>cn(ue,"yyyy-MM-dd"))),je=new Set(xe.map(ue=>cn(new Date(ue.date),"yyyy-MM-dd")));return ie.filter(ue=>{const G=cn(ue,"yyyy-MM-dd"),$e=ue>=pe;return he.has(G)&&!je.has(G)&&$e}).sort((ue,G)=>ue.getTime()-G.getTime())};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[d.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:Ce,className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(Gn,{label:"Event Name",value:c,onChange:ie=>f(ie.target.value),required:!0,placeholder:"Enter event name"}),d.jsx(Gn,{label:"Time",type:"time",value:w,onChange:ie=>g(ie.target.value),required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),d.jsxs("select",{value:p,onChange:ie=>{m(ie.target.value),P(ie.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",disabled:!0,children:"Select a date"}),te(a).map((ie,pe)=>{const he=cn(ie,"yyyy-MM-dd");return d.jsx("option",{value:he,children:cn(ie,"EEEE, d MMMM yyyy",{locale:Zd})},pe)})]})]}),i&&d.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:d.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",cn(new Date(i.date),"EEEE, d MMMM yyyy",{locale:Zd})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),d.jsxs("select",{value:z,onChange:ie=>ae(ie.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",children:"Sin setlist"}),Q.map(ie=>{var pe;return d.jsxs("option",{value:ie.id,children:[ie.name," (",((pe=ie.songs)==null?void 0:pe.length)||0," canciones)"]},ie.id)})]}),z&&d.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(Ne=Q.find(ie=>ie.id===z))==null?void 0:Ne.name]})})]}),p&&d.jsx(I$,{members:l,selectedMembers:S,onMemberSelectionChange:re,validationError:M}),d.jsxs("div",{className:"relative space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicación"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(o0,{className:"h-5 w-5 text-gray-400"})}),d.jsx(Gn,{value:Z,onChange:Ee,className:"pl-10 pr-10",placeholder:"Buscar ubicación..."}),Z&&d.jsx("button",{type:"button",onClick:()=>{R(""),U(null),le([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d.jsx(Ia,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),Y&&d.jsx("div",{className:"flex items-center justify-center p-4",children:d.jsx(al,{className:"h-6 w-6 animate-spin text-primary"})}),ee.length>0&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:ee.map((ie,pe)=>d.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{U(ie),R(ie.display_name),le([])},children:[d.jsx(o0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:ie.display_name.split(",")[0]}),d.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:ie.display_name.split(",").slice(1).join(",").trim()})]})]},pe))}),O&&d.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(o0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:typeof O.display_name=="string"&&O.display_name.includes(",")?O.display_name.split(",")[0]:O.display_name}),d.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:typeof O.display_name=="string"&&O.display_name.includes(",")?O.display_name.split(",").slice(1).join(",").trim():""})]}),d.jsx("button",{type:"button",onClick:()=>{U(null),R("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:d.jsx(Ia,{className:"h-5 w-5"})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:N,onChange:ie=>j(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(yt,{onClick:Ce,disabled:k,className:"w-full",children:k?d.jsxs(d.Fragment,{children:[d.jsx(al,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function V$(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}function jn(e){"@babel/helpers - typeof";return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(e)}var Ni=Uint8Array,Ts=Uint16Array,J5=Int32Array,Hg=new Ni([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vg=new Ni([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uy=new Ni([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m6=function(e,t){for(var n=new Ts(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new J5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},g6=m6(Hg,2),v6=g6.b,dy=g6.r;v6[28]=258,dy[258]=28;var y6=m6(Vg,0),G$=y6.b,I_=y6.r,fy=new Ts(32768);for(var Hn=0;Hn<32768;++Hn){var ec=(Hn&43690)>>1|(Hn&21845)<<1;ec=(ec&52428)>>2|(ec&13107)<<2,ec=(ec&61680)>>4|(ec&3855)<<4,fy[Hn]=((ec&65280)>>8|(ec&255)<<8)>>1}var vo=function(e,t,n){for(var r=e.length,i=0,s=new Ts(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new Ts(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Ts(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var f=i<<4|e[i],p=t-e[i],m=a[e[i]-1]++<<p,w=m|(1<<p)-1;m<=w;++m)l[fy[m]>>c]=f}else for(l=new Ts(r),i=0;i<r;++i)e[i]&&(l[i]=fy[a[e[i]-1]++]>>15-e[i]);return l},Tc=new Ni(288);for(var Hn=0;Hn<144;++Hn)Tc[Hn]=8;for(var Hn=144;Hn<256;++Hn)Tc[Hn]=9;for(var Hn=256;Hn<280;++Hn)Tc[Hn]=7;for(var Hn=280;Hn<288;++Hn)Tc[Hn]=8;var fp=new Ni(32);for(var Hn=0;Hn<32;++Hn)fp[Hn]=5;var Y$=vo(Tc,9,0),K$=vo(Tc,9,1),J$=vo(fp,5,0),X$=vo(fp,5,1),Lv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ba=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Pv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},X5=function(e){return(e+7)/8|0},w6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ni(e.subarray(t,n))},Q$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ka=function(e,t,n){var r=new Error(t||Q$[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,ka),!n)throw r;return r},Z$=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Ni(0);var a=!n,l=a||t.i!=2,c=t.i;a&&(n=new Ni(i*3));var f=function(ie){var pe=n.length;if(ie>pe){var he=new Ni(Math.max(pe*2,ie));he.set(n),n=he}},p=t.f||0,m=t.p||0,w=t.b||0,g=t.l,N=t.d,j=t.m,k=t.n,b=i*8;do{if(!g){p=ba(e,m,1);var S=ba(e,m+1,3);if(m+=3,S)if(S==1)g=K$,N=X$,j=9,k=5;else if(S==2){var oe=ba(e,m,31)+257,Z=ba(e,m+10,15)+4,R=oe+ba(e,m+5,31)+1;m+=14;for(var ee=new Ni(R),le=new Ni(19),O=0;O<Z;++O)le[uy[O]]=ba(e,m+O*3,7);m+=Z*3;for(var U=Lv(le),Y=(1<<U)-1,J=vo(le,U,1),O=0;O<R;){var xe=J[ba(e,m,Y)];m+=xe&15;var L=xe>>4;if(L<16)ee[O++]=L;else{var ye=0,Q=0;for(L==16?(Q=3+ba(e,m,3),m+=2,ye=ee[O-1]):L==17?(Q=3+ba(e,m,7),m+=3):L==18&&(Q=11+ba(e,m,127),m+=7);Q--;)ee[O++]=ye}}var $=ee.subarray(0,oe),z=ee.subarray(oe);j=Lv($),k=Lv(z),g=vo($,j,1),N=vo(z,k,1)}else ka(1);else{var L=X5(m)+4,M=e[L-4]|e[L-3]<<8,K=L+M;if(K>i){c&&ka(0);break}l&&f(w+M),n.set(e.subarray(L,K),w),t.b=w+=M,t.p=m=K*8,t.f=p;continue}if(m>b){c&&ka(0);break}}l&&f(w+131072);for(var ae=(1<<j)-1,Pe=(1<<k)-1,P=m;;P=m){var ye=g[Pv(e,m)&ae],H=ye>>4;if(m+=ye&15,m>b){c&&ka(0);break}if(ye||ka(2),H<256)n[w++]=H;else if(H==256){P=m,g=null;break}else{var re=H-254;if(H>264){var O=H-257,ce=Hg[O];re=ba(e,m,(1<<ce)-1)+v6[O],m+=ce}var fe=N[Pv(e,m)&Pe],Ee=fe>>4;fe||ka(3),m+=fe&15;var z=G$[Ee];if(Ee>3){var ce=Vg[Ee];z+=Pv(e,m)&(1<<ce)-1,m+=ce}if(m>b){c&&ka(0);break}l&&f(w+131072);var Ce=w+re;if(w<z){var te=s-z,Ne=Math.min(z,Ce);for(te+w<0&&ka(3);w<Ne;++w)n[w]=r[te+w]}for(;w<Ce;++w)n[w]=n[w-z]}}t.l=g,t.p=P,t.b=w,t.f=p,g&&(p=1,t.m=j,t.d=N,t.n=k)}while(!p);return w!=n.length&&a?w6(n,0,w):n.subarray(0,w)},Vo=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},xh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Tv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:b6,l:0};if(i==1){var a=new Ni(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(K,oe){return K.f-oe.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],f=0,p=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=n[n[f].f<n[m].f?f++:m++],c=n[f!=p&&n[f].f<n[m].f?f++:m++],n[p++]={s:-1,f:l.f+c.f,l,r:c};for(var w=s[0].s,r=1;r<i;++r)s[r].s>w&&(w=s[r].s);var g=new Ts(w+1),N=hy(n[p-1],g,0);if(N>t){var r=0,j=0,k=N-t,b=1<<k;for(s.sort(function(oe,Z){return g[Z.s]-g[oe.s]||oe.f-Z.f});r<i;++r){var S=s[r].s;if(g[S]>t)j+=b-(1<<N-g[S]),g[S]=t;else break}for(j>>=k;j>0;){var L=s[r].s;g[L]<t?j-=1<<t-g[L]++-1:++r}for(;r>=0&&j;--r){var M=s[r].s;g[M]==t&&(--g[M],++j)}N=t}return{t:new Ni(g),l:N}},hy=function(e,t,n){return e.s==-1?Math.max(hy(e.l,t,n+1),hy(e.r,t,n+1)):t[e.s]=n},D_=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ts(++t),r=0,i=e[0],s=1,a=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:n.subarray(0,r),n:t}},bh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},x6=function(e,t,n){var r=n.length,i=X5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},O_=function(e,t,n,r,i,s,a,l,c,f,p){Vo(t,p++,n),++i[256];for(var m=Tv(i,15),w=m.t,g=m.l,N=Tv(s,15),j=N.t,k=N.l,b=D_(w),S=b.c,L=b.n,M=D_(j),K=M.c,oe=M.n,Z=new Ts(19),R=0;R<S.length;++R)++Z[S[R]&31];for(var R=0;R<K.length;++R)++Z[K[R]&31];for(var ee=Tv(Z,7),le=ee.t,O=ee.l,U=19;U>4&&!le[uy[U-1]];--U);var Y=f+5<<3,J=bh(i,Tc)+bh(s,fp)+a,xe=bh(i,w)+bh(s,j)+a+14+3*U+bh(Z,le)+2*Z[16]+3*Z[17]+7*Z[18];if(c>=0&&Y<=J&&Y<=xe)return x6(t,p,e.subarray(c,c+f));var ye,Q,$,z;if(Vo(t,p,1+(xe<J)),p+=2,xe<J){ye=vo(w,g,0),Q=w,$=vo(j,k,0),z=j;var ae=vo(le,O,0);Vo(t,p,L-257),Vo(t,p+5,oe-1),Vo(t,p+10,U-4),p+=14;for(var R=0;R<U;++R)Vo(t,p+3*R,le[uy[R]]);p+=3*U;for(var Pe=[S,K],P=0;P<2;++P)for(var H=Pe[P],R=0;R<H.length;++R){var re=H[R]&31;Vo(t,p,ae[re]),p+=le[re],re>15&&(Vo(t,p,H[R]>>5&127),p+=H[R]>>12)}}else ye=Y$,Q=Tc,$=J$,z=fp;for(var R=0;R<l;++R){var ce=r[R];if(ce>255){var re=ce>>18&31;xh(t,p,ye[re+257]),p+=Q[re+257],re>7&&(Vo(t,p,ce>>23&31),p+=Hg[re]);var fe=ce&31;xh(t,p,$[fe]),p+=z[fe],fe>3&&(xh(t,p,ce>>5&8191),p+=Vg[fe])}else xh(t,p,ye[ce]),p+=Q[ce]}return xh(t,p,ye[256]),p+Q[256]},eB=new J5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),b6=new Ni(0),tB=function(e,t,n,r,i,s){var a=s.z||e.length,l=new Ni(r+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(r,l.length-i),f=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=eB[t-1],w=m>>13,g=m&8191,N=(1<<n)-1,j=s.p||new Ts(32768),k=s.h||new Ts(N+1),b=Math.ceil(n/3),S=2*b,L=function(je){return(e[je]^e[je+1]<<b^e[je+2]<<S)&N},M=new J5(25e3),K=new Ts(288),oe=new Ts(32),Z=0,R=0,ee=s.i||0,le=0,O=s.w||0,U=0;ee+2<a;++ee){var Y=L(ee),J=ee&32767,xe=k[Y];if(j[J]=xe,k[Y]=J,O<=ee){var ye=a-ee;if((Z>7e3||le>24576)&&(ye>423||!f)){p=O_(e,c,0,M,K,oe,R,le,U,ee-U,p),le=Z=R=0,U=ee;for(var Q=0;Q<286;++Q)K[Q]=0;for(var Q=0;Q<30;++Q)oe[Q]=0}var $=2,z=0,ae=g,Pe=J-xe&32767;if(ye>2&&Y==L(ee-Pe))for(var P=Math.min(w,ye)-1,H=Math.min(32767,ee),re=Math.min(258,ye);Pe<=H&&--ae&&J!=xe;){if(e[ee+$]==e[ee+$-Pe]){for(var ce=0;ce<re&&e[ee+ce]==e[ee+ce-Pe];++ce);if(ce>$){if($=ce,z=Pe,ce>P)break;for(var fe=Math.min(Pe,ce-2),Ee=0,Q=0;Q<fe;++Q){var Ce=ee-Pe+Q&32767,te=j[Ce],Ne=Ce-te&32767;Ne>Ee&&(Ee=Ne,xe=Ce)}}}J=xe,xe=j[J],Pe+=J-xe&32767}if(z){M[le++]=268435456|dy[$]<<18|I_[z];var ie=dy[$]&31,pe=I_[z]&31;R+=Hg[ie]+Vg[pe],++K[257+ie],++oe[pe],O=ee+$,++Z}else M[le++]=e[ee],++K[e[ee]]}}for(ee=Math.max(ee,O);ee<a;++ee)M[le++]=e[ee],++K[e[ee]];p=O_(e,c,f,M,K,oe,R,le,U,ee-U,p),f||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=k,s.p=j,s.i=ee,s.w=O)}else{for(var ee=s.w||0;ee<a+f;ee+=65535){var he=ee+65535;he>=a&&(c[p/8|0]=f,he=a),p=x6(c,p+1,e.subarray(ee,he))}s.i=a}return w6(l,0,r+X5(p)+i)},_6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},nB=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Ni(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return tB(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},S6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},rB=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=_6();i.p(t.dictionary),S6(e,2,i.d())}},iB=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ka(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&ka(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function py(e,t){t||(t={});var n=_6();n.p(e);var r=nB(e,t,t.dictionary?6:2,4);return rB(r,t),S6(r,r.length-4,n.d()),r}function sB(e,t){return Z$(e.subarray(iB(e,t),-4),{i:2},t,t)}var aB=typeof TextDecoder<"u"&&new TextDecoder,oB=0;try{aB.decode(b6,{stream:!0}),oB=1}catch{}var At=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Iv(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var Dn={log:Iv,warn:function(e){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):Iv.call(null,arguments))},error:function(e){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):Iv(e))}};function Dv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){_u(r.response,t,n)},r.onerror=function(){Dn.error("could not download file")},r.send()}function M_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function $m(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Uh,my,_u=At.saveAs||((typeof window>"u"?"undefined":jn(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=At.URL||At.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?M_(i.href)?Dv(e,t,n):$m(i,i.target="_blank"):$m(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){$m(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(M_(e))Dv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){$m(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:jn(s)!=="object"&&(Dn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Dv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(At.HTMLElement)||At.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":jn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(e)}else{var c=At.URL||At.webkitURL,f=c.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function N6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+l+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ov(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=wi(n,r,i,s,t[0],7,-680876936),s=wi(s,n,r,i,t[1],12,-389564586),i=wi(i,s,n,r,t[2],17,606105819),r=wi(r,i,s,n,t[3],22,-1044525330),n=wi(n,r,i,s,t[4],7,-176418897),s=wi(s,n,r,i,t[5],12,1200080426),i=wi(i,s,n,r,t[6],17,-1473231341),r=wi(r,i,s,n,t[7],22,-45705983),n=wi(n,r,i,s,t[8],7,1770035416),s=wi(s,n,r,i,t[9],12,-1958414417),i=wi(i,s,n,r,t[10],17,-42063),r=wi(r,i,s,n,t[11],22,-1990404162),n=wi(n,r,i,s,t[12],7,1804603682),s=wi(s,n,r,i,t[13],12,-40341101),i=wi(i,s,n,r,t[14],17,-1502002290),n=xi(n,r=wi(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=xi(s,n,r,i,t[6],9,-1069501632),i=xi(i,s,n,r,t[11],14,643717713),r=xi(r,i,s,n,t[0],20,-373897302),n=xi(n,r,i,s,t[5],5,-701558691),s=xi(s,n,r,i,t[10],9,38016083),i=xi(i,s,n,r,t[15],14,-660478335),r=xi(r,i,s,n,t[4],20,-405537848),n=xi(n,r,i,s,t[9],5,568446438),s=xi(s,n,r,i,t[14],9,-1019803690),i=xi(i,s,n,r,t[3],14,-187363961),r=xi(r,i,s,n,t[8],20,1163531501),n=xi(n,r,i,s,t[13],5,-1444681467),s=xi(s,n,r,i,t[2],9,-51403784),i=xi(i,s,n,r,t[7],14,1735328473),n=bi(n,r=xi(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=bi(s,n,r,i,t[8],11,-2022574463),i=bi(i,s,n,r,t[11],16,1839030562),r=bi(r,i,s,n,t[14],23,-35309556),n=bi(n,r,i,s,t[1],4,-1530992060),s=bi(s,n,r,i,t[4],11,1272893353),i=bi(i,s,n,r,t[7],16,-155497632),r=bi(r,i,s,n,t[10],23,-1094730640),n=bi(n,r,i,s,t[13],4,681279174),s=bi(s,n,r,i,t[0],11,-358537222),i=bi(i,s,n,r,t[3],16,-722521979),r=bi(r,i,s,n,t[6],23,76029189),n=bi(n,r,i,s,t[9],4,-640364487),s=bi(s,n,r,i,t[12],11,-421815835),i=bi(i,s,n,r,t[15],16,530742520),n=_i(n,r=bi(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=_i(s,n,r,i,t[7],10,1126891415),i=_i(i,s,n,r,t[14],15,-1416354905),r=_i(r,i,s,n,t[5],21,-57434055),n=_i(n,r,i,s,t[12],6,1700485571),s=_i(s,n,r,i,t[3],10,-1894986606),i=_i(i,s,n,r,t[10],15,-1051523),r=_i(r,i,s,n,t[1],21,-2054922799),n=_i(n,r,i,s,t[8],6,1873313359),s=_i(s,n,r,i,t[15],10,-30611744),i=_i(i,s,n,r,t[6],15,-1560198380),r=_i(r,i,s,n,t[13],21,1309151649),n=_i(n,r,i,s,t[4],6,-145523070),s=_i(s,n,r,i,t[11],10,-1120210379),i=_i(i,s,n,r,t[2],15,718787259),r=_i(r,i,s,n,t[9],21,-343485551),e[0]=vc(n,e[0]),e[1]=vc(r,e[1]),e[2]=vc(i,e[2]),e[3]=vc(s,e[3])}function Gg(e,t,n,r,i,s){return t=vc(vc(t,e),vc(r,s)),vc(t<<i|t>>>32-i,n)}function wi(e,t,n,r,i,s,a){return Gg(t&n|~t&r,e,t,i,s,a)}function xi(e,t,n,r,i,s,a){return Gg(t&r|n&~r,e,t,i,s,a)}function bi(e,t,n,r,i,s,a){return Gg(t^n^r,e,t,i,s,a)}function _i(e,t,n,r,i,s,a){return Gg(n^(t|~r),e,t,i,s,a)}function j6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ov(r,lB(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Ov(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Ov(r,i),r}function lB(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Uh=At.atob.bind(At),my=At.btoa.bind(At);var R_="0123456789abcdef".split("");function cB(e){for(var t="",n=0;n<4;n++)t+=R_[e>>8*n+4&15]+R_[e>>8*n&15];return t}function uB(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function gy(e){return j6(e).map(uB).join("")}var dB=function(e){for(var t=0;t<e.length;t++)e[t]=cB(e[t]);return e.join("")}(j6("hello"))!="5d41402abc4b2a76b9719d911017c592";function vc(e,t){if(dB){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function vy(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var f=0;for(c=0;c<256;c++){var p=l[c];f=(f+p+a.charCodeAt(c))%256,l[c]=l[f],l[f]=p}n=e,r=l}else l=r;var m=t.length,w=0,g=0,N="";for(c=0;c<m;c++)g=(g+(p=l[w=(w+1)%256]))%256,l[w]=l[g],l[g]=p,a=l[(l[w]+l[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F_={print:4,modify:8,copy:16,"annot-forms":32};function $d(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(F_.perm!==void 0)throw new Error("Invalid permission: "+l);i+=F_[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=gy(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=vy(this.encryptionKey,this.padding)}function Bd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function $_(e){if(jn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(l){At.console&&Dn.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function tg(e){if(!(this instanceof tg))return new tg(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function k6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ju(e,t,n,r,i){if(!(this instanceof ju))return new ju(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,k6.call(this,r,i)}function ef(e,t,n,r,i){if(!(this instanceof ef))return new ef(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,k6.call(this,r,i)}function Ct(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,c=16,f="S",p=null;jn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),f=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,w={},g={internal:{},__private__:{}};g.__private__.PubSub=$_;var N="1.3",j=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(x){N=x};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var b=g.__private__.getPageFormat=function(x){return k[x]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},L=S.COMPAT;function M(){this.saveGraphicsState(),G(new ht(Ze,0,0,-Ze,0,qs()*Ze).toString()+" cm"),this.setFontSize(this.getFontSize()/Ze),f="n",L=S.ADVANCED}function K(){this.restoreGraphicsState(),f="S",L=S.COMPAT}var oe=g.__private__.combineFontStyleAndFontWeight=function(x,I){if(x=="bold"&&I=="normal"||x=="bold"&&I==400||x=="normal"&&I=="italic"||x=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(x=I==400||I==="normal"?x==="italic"?"italic":"normal":I!=700&&I!=="bold"||x!=="normal"?(I==700?"bold":I)+""+x:"bold"),x};g.advancedAPI=function(x){var I=L===S.COMPAT;return I&&M.call(this),typeof x!="function"||(x(this),I&&K.call(this)),this},g.compatAPI=function(x){var I=L===S.ADVANCED;return I&&K.call(this),typeof x!="function"||(x(this),I&&M.call(this)),this},g.isAdvancedAPI=function(){return L===S.ADVANCED};var Z,R=function(x){if(L!==S.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=g.roundToPrecision=g.__private__.roundToPrecision=function(x,I){var se=t||I;if(isNaN(x)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(se).replace(/0+$/,"")};Z=g.hpf=g.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,16)};var le=g.f2=g.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return ee(x,2)},O=g.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return ee(x,3)},U=g.scale=g.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return L===S.COMPAT?x*Ze:L===S.ADVANCED?x:void 0},Y=function(x){return L===S.COMPAT?qs()-x:L===S.ADVANCED?x:void 0},J=function(x){return U(Y(x))};g.__private__.setPrecision=g.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var xe,ye="00000000000000000000000000000000",Q=g.__private__.getFileId=function(){return ye},$=g.__private__.setFileId=function(x){return ye=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ye.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ur=new $d(p.userPermissions,p.userPassword,p.ownerPassword,ye)),ye};g.setFileId=function(x){return $(x),this},g.getFileId=function(){return Q()};var z=g.__private__.convertDateToPDFDate=function(x){var I=x.getTimezoneOffset(),se=I<0?"+":"-",me=Math.floor(Math.abs(I/60)),Te=Math.abs(I%60),ze=[se,re(me),"'",re(Te),"'"].join("");return["D:",x.getFullYear(),re(x.getMonth()+1),re(x.getDate()),re(x.getHours()),re(x.getMinutes()),re(x.getSeconds()),ze].join("")},ae=g.__private__.convertPDFDateToDate=function(x){var I=parseInt(x.substr(2,4),10),se=parseInt(x.substr(6,2),10)-1,me=parseInt(x.substr(8,2),10),Te=parseInt(x.substr(10,2),10),ze=parseInt(x.substr(12,2),10),Xe=parseInt(x.substr(14,2),10);return new Date(I,se,me,Te,ze,Xe,0)},Pe=g.__private__.setCreationDate=function(x){var I;if(x===void 0&&(x=new Date),x instanceof Date)I=z(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=x}return xe=I},P=g.__private__.getCreationDate=function(x){var I=xe;return x==="jsDate"&&(I=ae(xe)),I};g.setCreationDate=function(x){return Pe(x),this},g.getCreationDate=function(x){return P(x)};var H,re=g.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},ce=g.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},fe=0,Ee=[],Ce=[],te=0,Ne=[],ie=[],pe=!1,he=Ce,je=function(){fe=0,te=0,Ce=[],Ee=[],Ne=[],ki=Cn(),ms=Cn()};g.__private__.setCustomOutputDestination=function(x){pe=!0,he=x};var ue=function(x){pe||(he=x)};g.__private__.resetCustomOutputDestination=function(){pe=!1,he=Ce};var G=g.__private__.out=function(x){return x=x.toString(),te+=x.length+1,he.push(x),he},$e=g.__private__.write=function(x){return G(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Fe=g.__private__.getArrayBuffer=function(x){for(var I=x.length,se=new ArrayBuffer(I),me=new Uint8Array(se);I--;)me[I]=x.charCodeAt(I);return se},De=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return De};var Be=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(x){return Be=L===S.ADVANCED?x/Ze:x,this};var be,Ie=g.__private__.getFontSize=g.getFontSize=function(){return L===S.COMPAT?Be:Be*Ze},We=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(x){return We=x,this},g.__private__.getR2L=g.getR2L=function(){return We};var He,nt=g.__private__.setZoomMode=function(x){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))be=x;else if(isNaN(x)){if(I.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');be=x}else be=parseInt(x,10)};g.__private__.getZoomMode=function(){return be};var dt,ft=g.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');He=x};g.__private__.getPageMode=function(){return He};var Nt=g.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');dt=x};g.__private__.getLayoutMode=function(){return dt},g.__private__.setDisplayMode=g.setDisplayMode=function(x,I,se){return nt(x),Nt(I),ft(se),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(x){if(Object.keys(it).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[x]},g.__private__.getDocumentProperties=function(){return it},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(x){for(var I in it)it.hasOwnProperty(I)&&x[I]&&(it[I]=x[I]);return this},g.__private__.setDocumentProperty=function(x,I){if(Object.keys(it).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[x]=I};var St,Ze,Zt,Mt,fr,Rt={},sn={},li=[],en={},aa={},On={},ci={},Sn=null,Yt=0,wt=[],zt=new $_(g),hr=e.hotfixes||[],an={},rr={},Dr=[],ht=function x(I,se,me,Te,ze,Xe){if(!(this instanceof x))return new x(I,se,me,Te,ze,Xe);isNaN(I)&&(I=1),isNaN(se)&&(se=0),isNaN(me)&&(me=0),isNaN(Te)&&(Te=1),isNaN(ze)&&(ze=0),isNaN(Xe)&&(Xe=0),this._matrix=[I,se,me,Te,ze,Xe]};Object.defineProperty(ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ht.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Z).join(x)},ht.prototype.multiply=function(x){var I=x.sx*this.sx+x.shy*this.shx,se=x.sx*this.shy+x.shy*this.sy,me=x.shx*this.sx+x.sy*this.shx,Te=x.shx*this.shy+x.sy*this.sy,ze=x.tx*this.sx+x.ty*this.shx+this.tx,Xe=x.tx*this.shy+x.ty*this.sy+this.ty;return new ht(I,se,me,Te,ze,Xe)},ht.prototype.decompose=function(){var x=this.sx,I=this.shy,se=this.shx,me=this.sy,Te=this.tx,ze=this.ty,Xe=Math.sqrt(x*x+I*I),ct=(x/=Xe)*se+(I/=Xe)*me;se-=x*ct,me-=I*ct;var _t=Math.sqrt(se*se+me*me);return ct/=_t,x*(me/=_t)<I*(se/=_t)&&(x=-x,I=-I,ct=-ct,Xe=-Xe),{scale:new ht(Xe,0,0,_t,0,0),translate:new ht(1,0,0,1,Te,ze),rotate:new ht(x,I,-I,x,0,0),skew:new ht(1,0,ct,1,0,0)}},ht.prototype.toString=function(x){return this.join(" ")},ht.prototype.inversed=function(){var x=this.sx,I=this.shy,se=this.shx,me=this.sy,Te=this.tx,ze=this.ty,Xe=1/(x*me-I*se),ct=me*Xe,_t=-I*Xe,Dt=-se*Xe,Pt=x*Xe;return new ht(ct,_t,Dt,Pt,-ct*Te-Dt*ze,-_t*Te-Pt*ze)},ht.prototype.applyToPoint=function(x){var I=x.x*this.sx+x.y*this.shx+this.tx,se=x.x*this.shy+x.y*this.sy+this.ty;return new Mr(I,se)},ht.prototype.applyToRectangle=function(x){var I=this.applyToPoint(x),se=this.applyToPoint(new Mr(x.x+x.w,x.y+x.h));return new Jc(I.x,I.y,se.x-I.x,se.y-I.y)},ht.prototype.clone=function(){var x=this.sx,I=this.shy,se=this.shx,me=this.sy,Te=this.tx,ze=this.ty;return new ht(x,I,se,me,Te,ze)},g.Matrix=ht;var Kn=g.matrixMult=function(x,I){return I.multiply(x)},ir=new ht(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=ir;var En=function(x,I){if(!aa[x]){var se=(I instanceof ju?"Sh":"P")+(Object.keys(en).length+1).toString(10);I.id=se,aa[x]=se,en[se]=I,zt.publish("addPattern",I)}};g.ShadingPattern=ju,g.TilingPattern=ef,g.addShadingPattern=function(x,I){return R("addShadingPattern()"),En(x,I),this},g.beginTilingPattern=function(x){R("beginTilingPattern()"),ws(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},g.endTilingPattern=function(x,I){R("endTilingPattern()"),I.stream=ie[H].join(`
`),En(x,I),zt.publish("endTilingPattern",I),Dr.pop().restore()};var Tn=g.__private__.newObject=function(){var x=Cn();return Jn(x,!0),x},Cn=g.__private__.newObjectDeferred=function(){return fe++,Ee[fe]=function(){return te},fe},Jn=function(x,I){return I=typeof I=="boolean"&&I,Ee[x]=te,I&&G(x+" 0 obj"),x},Ui=g.__private__.newAdditionalObject=function(){var x={objId:Cn(),content:""};return Ne.push(x),x},ki=Cn(),ms=Cn(),gs=g.__private__.decodeColorString=function(x){var I=x.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var se=parseFloat(I[0]);I=[se,se,se,"r"]}for(var me="#",Te=0;Te<3;Te++)me+=("0"+Math.floor(255*parseFloat(I[Te])).toString(16)).slice(-2);return me},vs=g.__private__.encodeColorString=function(x){var I;typeof x=="string"&&(x={ch1:x});var se=x.ch1,me=x.ch2,Te=x.ch3,ze=x.ch4,Xe=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var ct=new N6(se);if(ct.ok)se=ct.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var _t=parseInt(se.substr(1),16);se=_t>>16&255,me=_t>>8&255,Te=255&_t}if(me===void 0||ze===void 0&&se===me&&me===Te)if(typeof se=="string")I=se+" "+Xe[0];else switch(x.precision){case 2:I=le(se/255)+" "+Xe[0];break;case 3:default:I=O(se/255)+" "+Xe[0]}else if(ze===void 0||jn(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return I=["1.","1.","1.",Xe[1]].join(" ");if(typeof se=="string")I=[se,me,Te,Xe[1]].join(" ");else switch(x.precision){case 2:I=[le(se/255),le(me/255),le(Te/255),Xe[1]].join(" ");break;default:case 3:I=[O(se/255),O(me/255),O(Te/255),Xe[1]].join(" ")}}else if(typeof se=="string")I=[se,me,Te,ze,Xe[2]].join(" ");else switch(x.precision){case 2:I=[le(se),le(me),le(Te),le(ze),Xe[2]].join(" ");break;case 3:default:I=[O(se),O(me),O(Te),O(ze),Xe[2]].join(" ")}return I},ys=g.__private__.getFilters=function(){return a},zi=g.__private__.putStream=function(x){var I=(x=x||{}).data||"",se=x.filters||ys(),me=x.alreadyAppliedFilters||[],Te=x.addLength1||!1,ze=I.length,Xe=x.objectId,ct=function(Ar){return Ar};if(p!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ct=Ur.encryptor(Xe,0));var _t={};se===!0&&(se=["FlateEncode"]);var Dt=x.additionalKeyValues||[],Pt=(_t=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(I,se):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(_t.data.length!==0&&(Dt.push({key:"Length",value:_t.data.length}),Te===!0&&Dt.push({key:"Length1",value:ze})),Pt.length!=0)if(Pt.split("/").length-1==1)Dt.push({key:"Filter",value:Pt});else{Dt.push({key:"Filter",value:"["+Pt+"]"});for(var Kt=0;Kt<Dt.length;Kt+=1)if(Dt[Kt].key==="DecodeParms"){for(var Mn=[],Zn=0;Zn<_t.reverseChain.split("/").length-1;Zn+=1)Mn.push("null");Mn.push(Dt[Kt].value),Dt[Kt].value="["+Mn.join(" ")+"]"}}G("<<");for(var er=0;er<Dt.length;er++)G("/"+Dt[er].key+" "+Dt[er].value);G(">>"),_t.data.length!==0&&(G("stream"),G(ct(_t.data)),G("endstream"))},Fs=g.__private__.putPage=function(x){var I=x.number,se=x.data,me=x.objId,Te=x.contentsObjId;Jn(me,!0),G("<</Type /Page"),G("/Parent "+x.rootDictionaryObjId+" 0 R"),G("/Resources "+x.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(Z(x.mediaBox.bottomLeftX))+" "+parseFloat(Z(x.mediaBox.bottomLeftY))+" "+Z(x.mediaBox.topRightX)+" "+Z(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&G("/CropBox ["+Z(x.cropBox.bottomLeftX)+" "+Z(x.cropBox.bottomLeftY)+" "+Z(x.cropBox.topRightX)+" "+Z(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&G("/BleedBox ["+Z(x.bleedBox.bottomLeftX)+" "+Z(x.bleedBox.bottomLeftY)+" "+Z(x.bleedBox.topRightX)+" "+Z(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&G("/TrimBox ["+Z(x.trimBox.bottomLeftX)+" "+Z(x.trimBox.bottomLeftY)+" "+Z(x.trimBox.topRightX)+" "+Z(x.trimBox.topRightY)+"]"),x.artBox!==null&&G("/ArtBox ["+Z(x.artBox.bottomLeftX)+" "+Z(x.artBox.bottomLeftY)+" "+Z(x.artBox.topRightX)+" "+Z(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&G("/UserUnit "+x.userUnit),zt.publish("putPage",{objId:me,pageContext:wt[I],pageNumber:I,page:se}),G("/Contents "+Te+" 0 R"),G(">>"),G("endobj");var ze=se.join(`
`);return L===S.ADVANCED&&(ze+=`
Q`),Jn(Te,!0),zi({data:ze,filters:ys(),objectId:Te}),G("endobj"),me},So=g.__private__.putPages=function(){var x,I,se=[];for(x=1;x<=Yt;x++)wt[x].objId=Cn(),wt[x].contentsObjId=Cn();for(x=1;x<=Yt;x++)se.push(Fs({number:x,data:ie[x],objId:wt[x].objId,contentsObjId:wt[x].contentsObjId,mediaBox:wt[x].mediaBox,cropBox:wt[x].cropBox,bleedBox:wt[x].bleedBox,trimBox:wt[x].trimBox,artBox:wt[x].artBox,userUnit:wt[x].userUnit,rootDictionaryObjId:ki,resourceDictionaryObjId:ms}));Jn(ki,!0),G("<</Type /Pages");var me="/Kids [";for(I=0;I<Yt;I++)me+=se[I]+" 0 R ";G(me+"]"),G("/Count "+Yt),G(">>"),G("endobj"),zt.publish("postPutPages")},cl=function(x){zt.publish("putFont",{font:x,out:G,newObject:Tn,putStream:zi}),x.isAlreadyPutted!==!0&&(x.objectNumber=Tn(),G("<<"),G("/Type /Font"),G("/BaseFont /"+Bd(x.postScriptName)),G("/Subtype /Type1"),typeof x.encoding=="string"&&G("/Encoding /"+x.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},ul=function(){for(var x in Rt)Rt.hasOwnProperty(x)&&(m===!1||m===!0&&w.hasOwnProperty(x))&&cl(Rt[x])},dl=function(x){x.objectNumber=Tn();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[Z(x.x),Z(x.y),Z(x.x+x.width),Z(x.y+x.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var se=x.pages[1].join(`
`);zi({data:se,additionalKeyValues:I,objectId:x.objectNumber}),G("endobj")},oa=function(){for(var x in an)an.hasOwnProperty(x)&&dl(an[x])},Ku=function(x,I){var se,me=[],Te=1/(I-1);for(se=0;se<1;se+=Te)me.push(se);if(me.push(1),x[0].offset!=0){var ze={offset:0,color:x[0].color};x.unshift(ze)}if(x[x.length-1].offset!=1){var Xe={offset:1,color:x[x.length-1].color};x.push(Xe)}for(var ct="",_t=0,Dt=0;Dt<me.length;Dt++){for(se=me[Dt];se>x[_t+1].offset;)_t++;var Pt=x[_t].offset,Kt=(se-Pt)/(x[_t+1].offset-Pt),Mn=x[_t].color,Zn=x[_t+1].color;ct+=ce(Math.round((1-Kt)*Mn[0]+Kt*Zn[0]).toString(16))+ce(Math.round((1-Kt)*Mn[1]+Kt*Zn[1]).toString(16))+ce(Math.round((1-Kt)*Mn[2]+Kt*Zn[2]).toString(16))}return ct.trim()},fl=function(x,I){I||(I=21);var se=Tn(),me=Ku(x.colors,I),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+I+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zi({data:me,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),G("endobj"),x.objectNumber=Tn(),G("<< /ShadingType "+x.type),G("/ColorSpace /DeviceRGB");var ze="/Coords ["+Z(parseFloat(x.coords[0]))+" "+Z(parseFloat(x.coords[1]))+" ";x.type===2?ze+=Z(parseFloat(x.coords[2]))+" "+Z(parseFloat(x.coords[3])):ze+=Z(parseFloat(x.coords[2]))+" "+Z(parseFloat(x.coords[3]))+" "+Z(parseFloat(x.coords[4]))+" "+Z(parseFloat(x.coords[5])),G(ze+="]"),x.matrix&&G("/Matrix ["+x.matrix.toString()+"]"),G("/Function "+se+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Of=function(x,I){var se=Cn(),me=Tn();I.push({resourcesOid:se,objectOid:me}),x.objectNumber=me;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+x.boundingBox.map(Z).join(" ")+"]"}),Te.push({key:"XStep",value:Z(x.xStep)}),Te.push({key:"YStep",value:Z(x.yStep)}),Te.push({key:"Resources",value:se+" 0 R"}),x.matrix&&Te.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),zi({data:x.stream,additionalKeyValues:Te,objectId:x.objectNumber}),G("endobj")},hl=function(x){var I;for(I in en)en.hasOwnProperty(I)&&(en[I]instanceof ju?fl(en[I]):en[I]instanceof ef&&Of(en[I],x))},Ju=function(x){for(var I in x.objectNumber=Tn(),G("<<"),x)switch(I){case"opacity":G("/ca "+le(x[I]));break;case"stroke-opacity":G("/CA "+le(x[I]))}G(">>"),G("endobj")},Xu=function(){var x;for(x in On)On.hasOwnProperty(x)&&Ju(On[x])},pl=function(){for(var x in G("/XObject <<"),an)an.hasOwnProperty(x)&&an[x].objectNumber>=0&&G("/"+x+" "+an[x].objectNumber+" 0 R");zt.publish("putXobjectDict"),G(">>")},Qu=function(){Ur.oid=Tn(),G("<<"),G("/Filter /Standard"),G("/V "+Ur.v),G("/R "+Ur.r),G("/U <"+Ur.toHexString(Ur.U)+">"),G("/O <"+Ur.toHexString(Ur.O)+">"),G("/P "+Ur.P),G(">>"),G("endobj")},Zu=function(){for(var x in G("/Font <<"),Rt)Rt.hasOwnProperty(x)&&(m===!1||m===!0&&w.hasOwnProperty(x))&&G("/"+x+" "+Rt[x].objectNumber+" 0 R");G(">>")},Mf=function(){if(Object.keys(en).length>0){for(var x in G("/Shading <<"),en)en.hasOwnProperty(x)&&en[x]instanceof ju&&en[x].objectNumber>=0&&G("/"+x+" "+en[x].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),G(">>")}},ml=function(x){if(Object.keys(en).length>0){for(var I in G("/Pattern <<"),en)en.hasOwnProperty(I)&&en[I]instanceof g.TilingPattern&&en[I].objectNumber>=0&&en[I].objectNumber<x&&G("/"+I+" "+en[I].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),G(">>")}},Rf=function(){if(Object.keys(On).length>0){var x;for(x in G("/ExtGState <<"),On)On.hasOwnProperty(x)&&On[x].objectNumber>=0&&G("/"+x+" "+On[x].objectNumber+" 0 R");zt.publish("putGStateDict"),G(">>")}},Xn=function(x){Jn(x.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zu(),Mf(),ml(x.objectOid),Rf(),pl(),G(">>"),G("endobj")},Bc=function(){var x=[];ul(),Xu(),oa(),hl(x),zt.publish("putResources"),x.forEach(Xn),Xn({resourcesOid:ms,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Uc=function(){zt.publish("putAdditionalObjects");for(var x=0;x<Ne.length;x++){var I=Ne[x];Jn(I.objId,!0),G(I.content),G("endobj")}zt.publish("postPutAdditionalObjects")},gl=function(x){sn[x.fontName]=sn[x.fontName]||{},sn[x.fontName][x.fontStyle]=x.id},zc=function(x,I,se,me,Te){var ze={id:"F"+(Object.keys(Rt).length+1).toString(10),postScriptName:x,fontName:I,fontStyle:se,encoding:me,isStandardFont:Te||!1,metadata:{}};return zt.publish("addFont",{font:ze,instance:this}),Rt[ze.id]=ze,gl(ze),ze.id},ed=function(x){for(var I=0,se=De.length;I<se;I++){var me=zc.call(this,x[I][0],x[I][1],x[I][2],De[I][3],!0);m===!1&&(w[me]=!0);var Te=x[I][0].split("-");gl({id:me,fontName:Te[0],fontStyle:Te[1]||""})}zt.publish("addFonts",{fonts:Rt,dictionary:sn})},ui=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(me){var I=me.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var se="Error in function "+I.split(`
`)[0].split("<")[0]+": "+me.message;if(!At.console)throw new Error(se);At.console.error(se,me),At.alert&&alert(se)}},x.foo.bar=x,x.foo},No=function(x,I){var se,me,Te,ze,Xe,ct,_t,Dt,Pt;if(Te=(I=I||{}).sourceEncoding||"Unicode",Xe=I.outputEncoding,(I.autoencode||Xe)&&Rt[St].metadata&&Rt[St].metadata[Te]&&Rt[St].metadata[Te].encoding&&(ze=Rt[St].metadata[Te].encoding,!Xe&&Rt[St].encoding&&(Xe=Rt[St].encoding),!Xe&&ze.codePages&&(Xe=ze.codePages[0]),typeof Xe=="string"&&(Xe=ze[Xe]),Xe)){for(_t=!1,ct=[],se=0,me=x.length;se<me;se++)(Dt=Xe[x.charCodeAt(se)])?ct.push(String.fromCharCode(Dt)):ct.push(x[se]),ct[se].charCodeAt(0)>>8&&(_t=!0);x=ct.join("")}for(se=x.length;_t===void 0&&se!==0;)x.charCodeAt(se-1)>>8&&(_t=!0),se--;if(!_t)return x;for(ct=I.noBOM?[]:[254,255],se=0,me=x.length;se<me;se++){if((Pt=(Dt=x.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ct.push(Pt),ct.push(Dt-(Pt<<8))}return String.fromCharCode.apply(void 0,ct)},di=g.__private__.pdfEscape=g.pdfEscape=function(x,I){return No(x,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vl=g.__private__.beginPage=function(x){ie[++Yt]=[],wt[Yt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},td(Yt),ue(ie[H])},qc=function(x,I){var se,me,Te;switch(n=I||n,typeof x=="string"&&(se=b(x.toLowerCase()),Array.isArray(se)&&(me=se[0],Te=se[1])),Array.isArray(x)&&(me=x[0]*Ze,Te=x[1]*Ze),isNaN(me)&&(me=i[0],Te=i[1]),(me>14400||Te>14400)&&(Dn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Te=Math.min(14400,Te)),i=[me,Te],n.substr(0,1)){case"l":Te>me&&(i=[Te,me]);break;case"p":me>Te&&(i=[Te,me])}vl(i),od(Yc),G(Qn),Sl!==0&&G(Sl+" J"),Or!==0&&G(Or+" j"),zt.publish("addPage",{pageNumber:Yt})},Wc=function(x){x>0&&x<=Yt&&(ie.splice(x,1),wt.splice(x,1),Yt--,H>Yt&&(H=Yt),this.setPage(H))},td=function(x){x>0&&x<=Yt&&(H=x)},nd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ie.length-1},yl=function(x,I,se){var me,Te=void 0;return se=se||{},x=x!==void 0?x:Rt[St].fontName,I=I!==void 0?I:Rt[St].fontStyle,me=x.toLowerCase(),sn[me]!==void 0&&sn[me][I]!==void 0?Te=sn[me][I]:sn[x]!==void 0&&sn[x][I]!==void 0?Te=sn[x][I]:se.disableWarning===!1&&Dn.warn("Unable to look up font label for font '"+x+"', '"+I+"'. Refer to getFontList() for available fonts."),Te||se.noFallback||(Te=sn.times[I])==null&&(Te=sn.times.normal),Te},Hc=g.__private__.putInfo=function(){var x=Tn(),I=function(me){return me};for(var se in p!==null&&(I=Ur.encryptor(x,0)),G("<<"),G("/Producer ("+di(I("jsPDF "+Ct.version))+")"),it)it.hasOwnProperty(se)&&it[se]&&G("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+di(I(it[se]))+")");G("/CreationDate ("+di(I(xe))+")"),G(">>"),G("endobj")},$s=g.__private__.putCatalog=function(x){var I=(x=x||{}).rootDictionaryObjId||ki;switch(Tn(),G("<<"),G("/Type /Catalog"),G("/Pages "+I+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+be;se.substr(se.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&G("/OpenAction [3 0 R /XYZ null null "+le(be)+"]")}switch(dt||(dt="continuous"),dt){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}He&&G("/PageMode /"+He),zt.publish("putCatalog"),G(">>"),G("endobj")},rd=g.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(fe+1)),G("/Root "+fe+" 0 R"),G("/Info "+(fe-1)+" 0 R"),p!==null&&G("/Encrypt "+Ur.oid+" 0 R"),G("/ID [ <"+ye+"> <"+ye+"> ]"),G(">>")},id=g.__private__.putHeader=function(){G("%PDF-"+N),G("%ºß¬à")},Ff=g.__private__.putXRef=function(){var x="0000000000";G("xref"),G("0 "+(fe+1)),G("0000000000 65535 f ");for(var I=1;I<=fe;I++)typeof Ee[I]=="function"?G((x+Ee[I]()).slice(-10)+" 00000 n "):Ee[I]!==void 0?G((x+Ee[I]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},Bs=g.__private__.buildDocument=function(){je(),ue(Ce),zt.publish("buildDocument"),id(),So(),Uc(),Bc(),p!==null&&Qu(),Hc(),$s();var x=te;return Ff(),rd(),G("startxref"),G(""+x),G("%%EOF"),ue(ie[H]),Ce.join(`
`)},jo=g.__private__.getBlob=function(x){return new Blob([Fe(x)],{type:"application/pdf"})},ko=g.output=g.__private__.output=ui(function(x,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",x){case void 0:return Bs();case"save":g.save(I.filename);break;case"arraybuffer":return Fe(Bs());case"blob":return jo(Bs());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(jo(Bs()))||void 0;Dn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",me=Bs();try{se=my(me)}catch{se=my(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+I.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(Te=I.pdfObjectUrl,ze="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",ct=At.open();return ct!==null&&ct.document.write(Xe),ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Dt=At.open();if(Dt!==null){Dt.document.write(_t);var Pt=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=I.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Mn=At.open();if(Mn!==null&&(Mn.document.write(Kt),Mn.document.title=I.filename),Mn||typeof safari>"u")return Mn;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",I);default:return null}}),Vc=function(x){return Array.isArray(hr)===!0&&hr.indexOf(x)>-1};switch(r){case"pt":Ze=1;break;case"mm":Ze=72/25.4;break;case"cm":Ze=72/2.54;break;case"in":Ze=72;break;case"px":Ze=Vc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ze=12;break;case"ex":Ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ze=r}var Ur=null;Pe(),$();var $f=function(x){return p!==null?Ur.encryptor(x,0):function(I){return I}},sd=g.__private__.getPageInfo=g.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[x].objId,pageNumber:x,pageContext:wt[x]}},Lt=g.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in wt)if(wt[I].objId===x)break;return sd(I)},Bf=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:wt[H].objId,pageNumber:H,pageContext:wt[H]}};g.addPage=function(){return qc.apply(this,arguments),this},g.setPage=function(){return td.apply(this,arguments),ue.call(this,ie[H]),this},g.insertPage=function(x){return this.addPage(),this.movePage(H,x),this},g.movePage=function(x,I){var se,me;if(x>I){se=ie[x],me=wt[x];for(var Te=x;Te>I;Te--)ie[Te]=ie[Te-1],wt[Te]=wt[Te-1];ie[I]=se,wt[I]=me,this.setPage(I)}else if(x<I){se=ie[x],me=wt[x];for(var ze=x;ze<I;ze++)ie[ze]=ie[ze+1],wt[ze]=wt[ze+1];ie[I]=se,wt[I]=me,this.setPage(I)}return this},g.deletePage=function(){return Wc.apply(this,arguments),this},g.__private__.text=g.text=function(x,I,se,me,Te){var ze,Xe,ct,_t,Dt,Pt,Kt,Mn,Zn,er=(me=me||{}).scope||this;if(typeof x=="number"&&typeof I=="number"&&(typeof se=="string"||Array.isArray(se))){var Ar=se;se=I,I=x,x=Ar}if(arguments[3]instanceof ht?(R("The transform parameter of text() with a Matrix value"),Zn=Te):(ct=arguments[4],_t=arguments[5],jn(Kt=arguments[3])==="object"&&Kt!==null||(typeof ct=="string"&&(_t=ct,ct=null),typeof Kt=="string"&&(_t=Kt,Kt=null),typeof Kt=="number"&&(ct=Kt,Kt=null),me={flags:Kt,angle:ct,align:_t})),isNaN(I)||isNaN(se)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return er;var Lr="",Hi=!1,In=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:Eo,Vi=er.internal.scaleFactor;function Ha(vn){return vn=vn.split("	").join(Array(me.TabLen||9).join(" ")),di(vn,Kt)}function kl(vn){for(var An,sr=vn.concat(),xr=[],Ki=sr.length;Ki--;)typeof(An=sr.shift())=="string"?xr.push(An):Array.isArray(vn)&&(An.length===1||An[1]===void 0&&An[2]===void 0)?xr.push(An[0]):xr.push([An[0],An[1],An[2]]);return xr}function El(vn,An){var sr;if(typeof vn=="string")sr=An(vn)[0];else if(Array.isArray(vn)){for(var xr,Ki,Ji=vn.concat(),da=[],eu=Ji.length;eu--;)typeof(xr=Ji.shift())=="string"?da.push(An(xr)[0]):Array.isArray(xr)&&typeof xr[0]=="string"&&(Ki=An(xr[0],xr[1],xr[2]),da.push([Ki[0],Ki[1],Ki[2]]));sr=da}return sr}var Cl=!1,Qc=!0;if(typeof x=="string")Cl=!0;else if(Array.isArray(x)){var Zc=x.concat();Xe=[];for(var Al,Rr=Zc.length;Rr--;)(typeof(Al=Zc.shift())!="string"||Array.isArray(Al)&&typeof Al[0]!="string")&&(Qc=!1);Cl=Qc}if(Cl===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var xs=Be/er.internal.scaleFactor,Ll=xs*(In-1);switch(me.baseline){case"bottom":se-=Ll;break;case"top":se+=xs-Ll;break;case"hanging":se+=xs-2*Ll;break;case"middle":se+=xs/2-Ll}if((Pt=me.maxWidth||0)>0&&(typeof x=="string"?x=er.splitTextToSize(x,Pt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(vn,An){return vn.concat(er.splitTextToSize(An,Pt))},[]))),ze={text:x,x:I,y:se,options:me,mutex:{pdfEscape:di,activeFontKey:St,fonts:Rt,activeFontSize:Be}},zt.publish("preProcessText",ze),x=ze.text,ct=(me=ze.options).angle,!(Zn instanceof ht)&&ct&&typeof ct=="number"){ct*=Math.PI/180,me.rotationDirection===0&&(ct=-ct),L===S.ADVANCED&&(ct=-ct);var Pl=Math.cos(ct),Ao=Math.sin(ct);Zn=new ht(Pl,Ao,-Ao,Pl,0,0)}else ct&&ct instanceof ht&&(Zn=ct);L!==S.ADVANCED||Zn||(Zn=ir),(Dt=me.charSpace||Co)!==void 0&&(Lr+=Z(U(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mn=me.horizontalScale)!==void 0&&(Lr+=Z(100*Mn)+` Tz
`),me.lang;var Zr=-1,Ws=me.renderingMode!==void 0?me.renderingMode:me.stroke,Va=er.internal.getCurrentPageInfo().pageContext;switch(Ws){case 0:case!1:case"fill":Zr=0;break;case 1:case!0:case"stroke":Zr=1;break;case 2:case"fillThenStroke":Zr=2;break;case 3:case"invisible":Zr=3;break;case 4:case"fillAndAddForClipping":Zr=4;break;case 5:case"strokeAndAddPathForClipping":Zr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Zr=6;break;case 7:case"addToPathForClipping":Zr=7}var hd=Va.usedRenderingMode!==void 0?Va.usedRenderingMode:-1;Zr!==-1?Lr+=Zr+` Tr
`:hd!==-1&&(Lr+=`0 Tr
`),Zr!==-1&&(Va.usedRenderingMode=Zr),_t=me.align||"left";var Gi,Tl=Be*In,la=er.internal.pageSize.getWidth(),fi=Rt[St];Dt=me.charSpace||Co,Pt=me.maxWidth||0,Kt=Object.assign({autoencode:!0,noBOM:!0},me.flags);var ca=[],Lo=function(vn){return er.getStringUnitWidth(vn,{font:fi,charSpace:Dt,fontSize:Be,doKerning:!1})*Be/Vi};if(Object.prototype.toString.call(x)==="[object Array]"){var hi;Xe=kl(x),_t!=="left"&&(Gi=Xe.map(Lo));var ei,Ga=0;if(_t==="right"){I-=Gi[0],x=[],Rr=Xe.length;for(var ua=0;ua<Rr;ua++)ua===0?(ei=qi(I),hi=Qr(se)):(ei=U(Ga-Gi[ua]),hi=-Tl),x.push([Xe[ua],ei,hi]),Ga=Gi[ua]}else if(_t==="center"){I-=Gi[0]/2,x=[],Rr=Xe.length;for(var pi=0;pi<Rr;pi++)pi===0?(ei=qi(I),hi=Qr(se)):(ei=U((Ga-Gi[pi])/2),hi=-Tl),x.push([Xe[pi],ei,hi]),Ga=Gi[pi]}else if(_t==="left"){x=[],Rr=Xe.length;for(var Se=0;Se<Rr;Se++)x.push(Xe[Se])}else if(_t==="justify"&&fi.encoding==="Identity-H"){x=[],Rr=Xe.length,Pt=Pt!==0?Pt:la;for(var qe=0,Oe=0;Oe<Rr;Oe++)if(hi=Oe===0?Qr(se):-Tl,ei=Oe===0?qi(I):qe,Oe<Rr-1){var ut=U((Pt-Gi[Oe])/(Xe[Oe].split(" ").length-1)),xt=Xe[Oe].split(" ");x.push([xt[0]+" ",ei,hi]),qe=0;for(var Ft=1;Ft<xt.length;Ft++){var Rn=(Lo(xt[Ft-1]+" "+xt[Ft])-Lo(xt[Ft]))*Vi+ut;Ft==xt.length-1?x.push([xt[Ft],Rn,0]):x.push([xt[Ft]+" ",Rn,0]),qe-=Rn}}else x.push([Xe[Oe],ei,hi]);x.push(["",qe,0])}else{if(_t!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Rr=Xe.length,Pt=Pt!==0?Pt:la,Oe=0;Oe<Rr;Oe++)hi=Oe===0?Qr(se):-Tl,ei=Oe===0?qi(I):0,Oe<Rr-1?ca.push(Z(U((Pt-Gi[Oe])/(Xe[Oe].split(" ").length-1)))):ca.push(0),x.push([Xe[Oe],ei,hi])}}var hn=typeof me.R2L=="boolean"?me.R2L:We;hn===!0&&(x=El(x,function(vn,An,sr){return[vn.split("").reverse().join(""),An,sr]})),ze={text:x,x:I,y:se,options:me,mutex:{pdfEscape:di,activeFontKey:St,fonts:Rt,activeFontSize:Be}},zt.publish("postProcessText",ze),x=ze.text,Hi=ze.mutex.isHex||!1;var Po=Rt[St].encoding;Po!=="WinAnsiEncoding"&&Po!=="StandardEncoding"||(x=El(x,function(vn,An,sr){return[Ha(vn),An,sr]})),Xe=kl(x),x=[];for(var To,Pr,bs,Io=0,_s=1,Hs=Array.isArray(Xe[0])?_s:Io,Ss="",tn=function(vn,An,sr){var xr="";return sr instanceof ht?(sr=typeof me.angle=="number"?Kn(sr,new ht(1,0,0,1,vn,An)):Kn(new ht(1,0,0,1,vn,An),sr),L===S.ADVANCED&&(sr=Kn(new ht(1,0,0,-1,0,0),sr)),xr=sr.join(" ")+` Tm
`):xr=Z(vn)+" "+Z(An)+` Td
`,xr},Yi=0;Yi<Xe.length;Yi++){switch(Ss="",Hs){case _s:bs=(Hi?"<":"(")+Xe[Yi][0]+(Hi?">":")"),To=parseFloat(Xe[Yi][1]),Pr=parseFloat(Xe[Yi][2]);break;case Io:bs=(Hi?"<":"(")+Xe[Yi]+(Hi?">":")"),To=qi(I),Pr=Qr(se)}ca!==void 0&&ca[Yi]!==void 0&&(Ss=ca[Yi]+` Tw
`),Yi===0?x.push(Ss+tn(To,Pr,Zn)+bs):Hs===Io?x.push(Ss+bs):Hs===_s&&x.push(Ss+tn(To,Pr,Zn)+bs)}x=Hs===Io?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Ei=`BT
/`;return Ei+=St+" "+Be+` Tf
`,Ei+=Z(Be*In)+` TL
`,Ei+=qa+`
`,Ei+=Lr,Ei+=x,G(Ei+="ET"),w[St]=!0,er};var Uf=g.__private__.clip=g.clip=function(x){return G(x==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Uf("evenodd")},g.__private__.discardPath=g.discardPath=function(){return G("n"),this};var Us=g.__private__.isValidStyle=function(x){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(I=!0),I};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(x){return Us(x)&&(f=x),this};var ad=g.__private__.getStyle=g.getStyle=function(x){var I=f;switch(x){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=x}return I},wl=g.close=function(){return G("h"),this};g.stroke=function(){return G("S"),this},g.fill=function(x){return xl("f",x),this},g.fillEvenOdd=function(x){return xl("f*",x),this},g.fillStroke=function(x){return xl("B",x),this},g.fillStrokeEvenOdd=function(x){return xl("B*",x),this};var xl=function(x,I){jn(I)==="object"?qf(I,x):G(x)},Gc=function(x){x===null||L===S.ADVANCED&&x===void 0||(x=ad(x),G(x))};function zf(x,I,se,me,Te){var ze=new ef(I||this.boundingBox,se||this.xStep,me||this.yStep,this.gState,Te||this.matrix);ze.stream=this.stream;var Xe=x+"$$"+this.cloneIndex+++"$$";return En(Xe,ze),ze}var qf=function(x,I){var se=aa[x.key],me=en[se];if(me instanceof ju)G("q"),G(Wf(I)),me.gState&&g.setGState(me.gState),G(x.matrix.toString()+" cm"),G("/"+se+" sh"),G("Q");else if(me instanceof ef){var Te=new ht(1,0,0,-1,0,qs());x.matrix&&(Te=Te.multiply(x.matrix||ir),se=zf.call(me,x.key,x.boundingBox,x.xStep,x.yStep,Te).id),G("q"),G("/Pattern cs"),G("/"+se+" scn"),me.gState&&g.setGState(me.gState),G(I),G("Q")}},Wf=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},gn=g.moveTo=function(x,I){return G(Z(U(x))+" "+Z(J(I))+" m"),this},on=g.lineTo=function(x,I){return G(Z(U(x))+" "+Z(J(I))+" l"),this},za=g.curveTo=function(x,I,se,me,Te,ze){return G([Z(U(x)),Z(J(I)),Z(U(se)),Z(J(me)),Z(U(Te)),Z(J(ze)),"c"].join(" ")),this};g.__private__.line=g.line=function(x,I,se,me,Te){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||!Us(Te))throw new Error("Invalid arguments passed to jsPDF.line");return L===S.COMPAT?this.lines([[se-x,me-I]],x,I,[1,1],Te||"S"):this.lines([[se-x,me-I]],x,I,[1,1]).stroke()},g.__private__.lines=g.lines=function(x,I,se,me,Te,ze){var Xe,ct,_t,Dt,Pt,Kt,Mn,Zn,er,Ar,Lr,Hi;if(typeof x=="number"&&(Hi=se,se=I,I=x,x=Hi),me=me||[1,1],ze=ze||!1,isNaN(I)||isNaN(se)||!Array.isArray(x)||!Array.isArray(me)||!Us(Te)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gn(I,se),Xe=me[0],ct=me[1],Dt=x.length,Ar=I,Lr=se,_t=0;_t<Dt;_t++)(Pt=x[_t]).length===2?(Ar=Pt[0]*Xe+Ar,Lr=Pt[1]*ct+Lr,on(Ar,Lr)):(Kt=Pt[0]*Xe+Ar,Mn=Pt[1]*ct+Lr,Zn=Pt[2]*Xe+Ar,er=Pt[3]*ct+Lr,Ar=Pt[4]*Xe+Ar,Lr=Pt[5]*ct+Lr,za(Kt,Mn,Zn,er,Ar,Lr));return ze&&wl(),Gc(Te),this},g.path=function(x){for(var I=0;I<x.length;I++){var se=x[I],me=se.c;switch(se.op){case"m":gn(me[0],me[1]);break;case"l":on(me[0],me[1]);break;case"c":za.apply(this,me);break;case"h":wl()}}return this},g.__private__.rect=g.rect=function(x,I,se,me,Te){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||!Us(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return L===S.COMPAT&&(me=-me),G([Z(U(x)),Z(J(I)),Z(U(se)),Z(U(me)),"re"].join(" ")),Gc(Te),this},g.__private__.triangle=g.triangle=function(x,I,se,me,Te,ze,Xe){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||isNaN(Te)||isNaN(ze)||!Us(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-x,me-I],[Te-se,ze-me],[x-Te,I-ze]],x,I,[1,1],Xe,!0),this},g.__private__.roundedRect=g.roundedRect=function(x,I,se,me,Te,ze,Xe){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||isNaN(Te)||isNaN(ze)||!Us(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ct=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*se),ze=Math.min(ze,.5*me),this.lines([[se-2*Te,0],[Te*ct,0,Te,ze-ze*ct,Te,ze],[0,me-2*ze],[0,ze*ct,-Te*ct,ze,-Te,ze],[2*Te-se,0],[-Te*ct,0,-Te,-ze*ct,-Te,-ze],[0,2*ze-me],[0,-ze*ct,Te*ct,-ze,Te,-ze]],x+Te,I,[1,1],Xe,!0),this},g.__private__.ellipse=g.ellipse=function(x,I,se,me,Te){if(isNaN(x)||isNaN(I)||isNaN(se)||isNaN(me)||!Us(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*se,Xe=4/3*(Math.SQRT2-1)*me;return gn(x+se,I),za(x+se,I-Xe,x+ze,I-me,x,I-me),za(x-ze,I-me,x-se,I-Xe,x-se,I),za(x-se,I+Xe,x-ze,I+me,x,I+me),za(x+ze,I+me,x+se,I+Xe,x+se,I),Gc(Te),this},g.__private__.circle=g.circle=function(x,I,se,me){if(isNaN(x)||isNaN(I)||isNaN(se)||!Us(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,I,se,se,me)},g.setFont=function(x,I,se){return se&&(I=oe(I,se)),St=yl(x,I,{disableWarning:!1}),this};var Hf=g.__private__.getFont=g.getFont=function(){return Rt[yl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var x,I,se={};for(x in sn)if(sn.hasOwnProperty(x))for(I in se[x]=[],sn[x])sn[x].hasOwnProperty(I)&&se[x].push(I);return se},g.addFont=function(x,I,se,me,Te){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(se=oe(se,me)),Te=Te||"Identity-H",zc.call(this,x,I,se,Te)};var Eo,Yc=e.lineWidth||.200025,bl=g.__private__.getLineWidth=g.getLineWidth=function(){return Yc},od=g.__private__.setLineWidth=g.setLineWidth=function(x){return Yc=x,G(Z(U(x))+" w"),this};g.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(x,I){if(x=x||[],I=I||0,isNaN(I)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(se){return Z(U(se))}).join(" "),I=Z(U(I)),G("["+x+"] "+I+" d"),this};var Kc=g.__private__.getLineHeight=g.getLineHeight=function(){return Be*Eo};g.__private__.getLineHeight=g.getLineHeight=function(){return Be*Eo};var ld=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Eo=x),this},pr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Eo};ld(e.lineHeight);var qi=g.__private__.getHorizontalCoordinate=function(x){return U(x)},Qr=g.__private__.getVerticalCoordinate=function(x){return L===S.ADVANCED?x:wt[H].mediaBox.topRightY-wt[H].mediaBox.bottomLeftY-U(x)},cd=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(x){return Z(qi(x))},zs=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(x){return Z(Qr(x))},Qn=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return gs(Qn)},g.__private__.setStrokeColor=g.setDrawColor=function(x,I,se,me){return Qn=vs({ch1:x,ch2:I,ch3:se,ch4:me,pdfColorType:"draw",precision:2}),G(Qn),this};var _l=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return gs(_l)},g.__private__.setFillColor=g.setFillColor=function(x,I,se,me){return _l=vs({ch1:x,ch2:I,ch3:se,ch4:me,pdfColorType:"fill",precision:2}),G(_l),this};var qa=e.textColor||"0 g",ud=g.__private__.getTextColor=g.getTextColor=function(){return gs(qa)};g.__private__.setTextColor=g.setTextColor=function(x,I,se,me){return qa=vs({ch1:x,ch2:I,ch3:se,ch4:me,pdfColorType:"text",precision:3}),this};var Co=e.charSpace,dd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Co||0)};g.__private__.setCharSpace=g.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Co=x,this};var Sl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sl=I,G(I+" J"),this};var Or=0;g.__private__.setLineJoin=g.setLineJoin=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Or=I,G(I+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(Z(U(x))+" M"),this},g.GState=tg,g.setGState=function(x){(x=typeof x=="string"?On[ci[x]]:fd(null,x)).equals(Sn)||(G("/"+x.id+" gs"),Sn=x)};var fd=function(x,I){if(!x||!ci[x]){var se=!1;for(var me in On)if(On.hasOwnProperty(me)&&On[me].equals(I)){se=!0;break}if(se)I=On[me];else{var Te="GS"+(Object.keys(On).length+1).toString(10);On[Te]=I,I.id=Te}return x&&(ci[x]=I.id),zt.publish("addGState",I),I}};g.addGState=function(x,I){return fd(x,I),this},g.saveGraphicsState=function(){return G("q"),li.push({key:St,size:Be,color:qa}),this},g.restoreGraphicsState=function(){G("Q");var x=li.pop();return St=x.key,Be=x.size,qa=x.color,Sn=null,this},g.setCurrentTransformationMatrix=function(x){return G(x.toString()+" cm"),this},g.comment=function(x){return G("#"+x),this};var Mr=function(x,I){var se=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(ze){isNaN(ze)||(se=parseFloat(ze))}});var me=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(ze){isNaN(ze)||(me=parseFloat(ze))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(ze){Te=ze.toString()}}),this},Jc=function(x,I,se,me){Mr.call(this,x,I),this.type="rect";var Te=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(Xe){isNaN(Xe)||(Te=parseFloat(Xe))}});var ze=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(Xe){isNaN(Xe)||(ze=parseFloat(Xe))}}),this},Nl=function(){this.page=Yt,this.currentPage=H,this.pages=ie.slice(0),this.pagesContext=wt.slice(0),this.x=Zt,this.y=Mt,this.matrix=fr,this.width=fn(H),this.height=qs(H),this.outputDestination=he,this.id="",this.objectNumber=-1};Nl.prototype.restore=function(){Yt=this.page,H=this.currentPage,wt=this.pagesContext,ie=this.pages,Zt=this.x,Mt=this.y,fr=this.matrix,Wi(H,this.width),Xc(H,this.height),he=this.outputDestination};var ws=function(x,I,se,me,Te){Dr.push(new Nl),Yt=H=0,ie=[],Zt=x,Mt=I,fr=Te,vl([se,me])},jl=function(x){if(rr[x])Dr.pop().restore();else{var I=new Nl,se="Xo"+(Object.keys(an).length+1).toString(10);I.id=se,rr[x]=se,an[se]=I,zt.publish("addFormObject",I),Dr.pop().restore()}};for(var Wa in g.beginFormObject=function(x,I,se,me,Te){return ws(x,I,se,me,Te),this},g.endFormObject=function(x){return jl(x),this},g.doFormObject=function(x,I){var se=an[rr[x]];return G("q"),G(I.toString()+" cm"),G("/"+se.id+" Do"),G("Q"),this},g.getFormObject=function(x){var I=an[rr[x]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},g.save=function(x,I){return x=x||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(_u(jo(Bs()),x),typeof _u.unload=="function"&&At.setTimeout&&setTimeout(_u.unload,911),this):new Promise(function(se,me){try{var Te=_u(jo(Bs()),x);typeof _u.unload=="function"&&At.setTimeout&&setTimeout(_u.unload,911),se(Te)}catch(ze){me(ze.message)}})},Ct.API)Ct.API.hasOwnProperty(Wa)&&(Wa==="events"&&Ct.API.events.length?function(x,I){var se,me,Te;for(Te=I.length-1;Te!==-1;Te--)se=I[Te][0],me=I[Te][1],x.subscribe.apply(x,[se].concat(typeof me=="function"?[me]:me))}(zt,Ct.API.events):g[Wa]=Ct.API[Wa]);var fn=g.getPageWidth=function(x){return(wt[x=x||H].mediaBox.topRightX-wt[x].mediaBox.bottomLeftX)/Ze},Wi=g.setPageWidth=function(x,I){wt[x].mediaBox.topRightX=I*Ze+wt[x].mediaBox.bottomLeftX},qs=g.getPageHeight=function(x){return(wt[x=x||H].mediaBox.topRightY-wt[x].mediaBox.bottomLeftY)/Ze},Xc=g.setPageHeight=function(x,I){wt[x].mediaBox.topRightY=I*Ze+wt[x].mediaBox.bottomLeftY};return g.internal={pdfEscape:di,getStyle:ad,getFont:Hf,getFontSize:Ie,getCharSpace:dd,getTextColor:ud,getLineHeight:Kc,getLineHeightFactor:pr,getLineWidth:bl,write:$e,getHorizontalCoordinate:qi,getVerticalCoordinate:Qr,getCoordinateString:cd,getVerticalCoordinateString:zs,collections:{},newObject:Tn,newAdditionalObject:Ui,newObjectDeferred:Cn,newObjectDeferredBegin:Jn,getFilters:ys,putStream:zi,events:zt,scaleFactor:Ze,pageSize:{getWidth:function(){return fn(H)},setWidth:function(x){Wi(H,x)},getHeight:function(){return qs(H)},setHeight:function(x){Xc(H,x)}},encryptionOptions:p,encryption:Ur,getEncryptor:$f,output:ko,getNumberOfPages:nd,pages:ie,out:G,f2:le,f3:O,getPageInfo:sd,getPageInfoByObjId:Lt,getCurrentPageInfo:Bf,getPDFVersion:j,Point:Mr,Rectangle:Jc,Matrix:ht,hasHotfix:Vc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return fn(H)},set:function(x){Wi(H,x)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return qs(H)},set:function(x){Xc(H,x)},enumerable:!0,configurable:!0}),ed.call(g,De),St="F1",qc(i,n),zt.publish("initialized"),g}$d.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},$d.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$d.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},$d.prototype.processOwnerPassword=function(e,t){return vy(gy(t).substr(0,5),e)},$d.prototype.encryptor=function(e,t){var n=gy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return vy(n,r)}},tg.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||jn(e)!==jn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Ct.API={events:[]},Ct.version="3.0.1";var vr=Ct.API,Q5=1,Yu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$t=function(e){return e.toFixed(2)},tc=function(e){return e.toFixed(5)};vr.__acroform__={};var hs=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},B_=function(e){return e*Q5},oo=function(e){var t=new C6,n=vt.internal.getHeight(e)||0,r=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number($t(r)),Number($t(n))],t},fB=vr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},hB=vr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},pB=vr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},jr=vr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pB(e,t-1)},kr=vr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fB(e,t-1)},Er=vr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return hB(e,t-1)},mB=vr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(s)||0,[Number($t(c.lowerLeft_X)),Number($t(c.lowerLeft_Y)),Number($t(c.upperRight_X)),Number($t(c.upperRight_Y))]},gB=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=yy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+$t(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=oo(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},yy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var s=n,a=vt.internal.getHeight(e)||0;a=a<0?-a:a;var l=vt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(O,U,Y){if(O+1<i.length){var J=U+" "+i[O+1][0];return Bm(J,e,Y).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var f,p,m=Bm("3",e,s).height,w=e.multiline?a-s:(a-m)/2,g=w+=2,N=0,j=0,k=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Bm(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",S=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var M=!1;if(i[L].length!==1&&k!==i[L].length-1){if((m+2)*(S+2)+2>a)continue e;b+=i[L][k],M=!0,j=L,L--}else{b=(b+=i[L][k]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var K=parseInt(L),oe=c(K,b,s),Z=L>=i.length-1;if(oe&&!Z){b+=" ",k=0;continue}if(oe||Z){if(Z)j=K;else if(e.multiline&&(m+2)*(S+2)+2>a)continue e}else{if(!e.multiline||(m+2)*(S+2)+2>a)continue e;j=K}}for(var R="",ee=N;ee<=j;ee++){var le=i[ee];if(e.multiline){if(ee===j){R+=le[k]+" ",k=(k+1)%le.length;continue}if(ee===N){R+=le[le.length-1]+" ";continue}}R+=le[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,p=Bm(R,e,s).width,e.textAlign){case"right":f=l-p-2;break;case"center":f=(l-p)/2;break;case"left":default:f=2}t+=$t(f)+" "+$t(g)+` Td
`,t+="("+Yu(R)+`) Tj
`,t+=-$t(f)+` 0 Td
`,g=-(s+2),p=0,N=M?j:j+1,S++,b=""}break}return r.text=t,r.fontSize=s,r},Bm=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},vB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yB=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},wB=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),jn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},xB=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ba.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(vB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Q5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new A6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&yB(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],f=l.Rect;if(l.Rect&&(l.Rect=mB(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=vt.createDefaultAppearanceStream(l),jn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=gB(l);c.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var w in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(w)){var g=l.appearanceStreamContent[w];if(m+="/"+w+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var N=g[a];typeof N=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&wB(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},E6=vr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),jn(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Yu(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Mv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Yu(r(e))+")"},po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};po.prototype.toString=function(){return this.objId+" 0 R"},po.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},po.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:E6(i,this.objId,this.scope)}):i instanceof po?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var C6=function(){po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};hs(C6,po);var A6=function(){po.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Yu(n(e))+")"}},set:function(n){e=n}})};hs(A6,po);var Ba=function e(){po.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!jr(t,3)},set:function(b){b?this.F=kr(t,3):this.F=Er(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ng)return;s="FieldObject"+e.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Yu(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Q5:f},set:function(b){f=b}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(b){p=b}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof ng||this instanceof Ou))return Mv(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=b}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Yr?w:Mv(w,this.objId,this.scope)},set:function(b){b=b.toString(),w=this instanceof Yr?b:b.substr(0,1)==="("?Rd(b.substr(1,b.length-2)):Rd(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr?Rd(w.substr(1,w.length-1)):w},set:function(b){b=b.toString(),w=this instanceof Yr?"/"+b:b}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Yr?g:Mv(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof Yr?b:b.substr(0,1)==="("?Rd(b.substr(1,b.length-2)):Rd(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr?Rd(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof Yr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(b){b=!!b,j=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(b){N=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,1)},set:function(b){b?this.Ff=kr(this.Ff,1):this.Ff=Er(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,2)},set:function(b){b?this.Ff=kr(this.Ff,2):this.Ff=Er(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,3)},set:function(b){b?this.Ff=kr(this.Ff,3):this.Ff=Er(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');k=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(k){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};hs(Ba,po);var uf=function(){Ba.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return E6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var c,f=[];c=a.exec(s);)f.push(c[l]);return f}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,18)},set:function(n){n?this.Ff=kr(this.Ff,18):this.Ff=Er(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=kr(this.Ff,19):this.Ff=Er(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,20)},set:function(n){n?(this.Ff=kr(this.Ff,20),t.sort()):this.Ff=Er(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,22)},set:function(n){n?this.Ff=kr(this.Ff,22):this.Ff=Er(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,23)},set:function(n){n?this.Ff=kr(this.Ff,23):this.Ff=Er(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,27)},set:function(n){n?this.Ff=kr(this.Ff,27):this.Ff=Er(this.Ff,27)}}),this.hasAppearanceStream=!1};hs(uf,Ba);var df=function(){uf.call(this),this.fontName="helvetica",this.combo=!1};hs(df,uf);var ff=function(){df.call(this),this.combo=!0};hs(ff,df);var u0=function(){ff.call(this),this.edit=!0};hs(u0,ff);var Yr=function(){Ba.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,15)},set:function(n){n?this.Ff=kr(this.Ff,15):this.Ff=Er(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,16)},set:function(n){n?this.Ff=kr(this.Ff,16):this.Ff=Er(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,17)},set:function(n){n?this.Ff=kr(this.Ff,17):this.Ff=Er(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,26)},set:function(n){n?this.Ff=kr(this.Ff,26):this.Ff=Er(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Yu(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){jn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};hs(Yr,Ba);var d0=function(){Yr.call(this),this.pushButton=!0};hs(d0,Yr);var hf=function(){Yr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};hs(hf,Yr);var ng=function(){var e,t;Ba.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Yu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){jn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};hs(ng,Ba),hf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},hf.prototype.createOption=function(e){var t=new ng;return t.Parent=this,t.optionName=e,this.Kids.push(t),bB.call(this.scope,t),t};var f0=function(){Yr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};hs(f0,Yr);var Ou=function(){Ba.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,13)},set:function(t){t?this.Ff=kr(this.Ff,13):this.Ff=Er(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,21)},set:function(t){t?this.Ff=kr(this.Ff,21):this.Ff=Er(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,23)},set:function(t){t?this.Ff=kr(this.Ff,23):this.Ff=Er(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,24)},set:function(t){t?this.Ff=kr(this.Ff,24):this.Ff=Er(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,25)},set:function(t){t?this.Ff=kr(this.Ff,25):this.Ff=Er(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,26)},set:function(t){t?this.Ff=kr(this.Ff,26):this.Ff=Er(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};hs(Ou,Ba);var h0=function(){Ou.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!jr(this.Ff,14)},set:function(e){e?this.Ff=kr(this.Ff,14):this.Ff=Er(this.Ff,14)}}),this.password=!0};hs(h0,Ou);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=yy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+$t(vt.internal.getWidth(e))+" "+$t(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+$t(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=vt.internal.getHeight(e),a=vt.internal.getWidth(e),l=yy(e,e.caption);return i.push("1 g"),i.push("0 0 "+$t(a)+" "+$t(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+$t(a-1)+" "+$t(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+$t(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+$t(vt.internal.getWidth(e))+" "+$t(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=vt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+tc(vt.internal.getWidth(e)/2)+" "+tc(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*vt.internal.Bezier_C).toFixed(5)),a=Number((r*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tc(vt.internal.getWidth(e)/2)+" "+tc(vt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+tc(vt.internal.getWidth(e)/2)+" "+tc(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tc(vt.internal.getWidth(e)/2)+" "+tc(vt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=vt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+$t(vt.internal.getWidth(e)-2)+" "+$t(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push($t(r.x1.x)+" "+$t(r.x1.y)+" m"),n.push($t(r.x2.x)+" "+$t(r.x2.y)+" l"),n.push($t(r.x4.x)+" "+$t(r.x4.y)+" m"),n.push($t(r.x3.x)+" "+$t(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=vt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+$t(vt.internal.getWidth(e))+" "+$t(vt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+$t(vt.internal.getWidth(e)-2)+" "+$t(vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push($t(n.x1.x)+" "+$t(n.x1.y)+" m"),r.push($t(n.x2.x)+" "+$t(n.x2.y)+" l"),r.push($t(n.x4.x)+" "+$t(n.x4.y)+" m"),r.push($t(n.x3.x)+" "+$t(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+$t(vt.internal.getWidth(e))+" "+$t(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),n=vt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},vt.internal.getWidth=function(e){var t=0;return jn(e)==="object"&&(t=B_(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return jn(e)==="object"&&(t=B_(e.Rect[3])),t};var bB=vr.addField=function(e){if(xB(this,e),!(e instanceof Ba))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};vr.AcroFormChoiceField=uf,vr.AcroFormListBox=df,vr.AcroFormComboBox=ff,vr.AcroFormEditBox=u0,vr.AcroFormButton=Yr,vr.AcroFormPushButton=d0,vr.AcroFormRadioButton=hf,vr.AcroFormCheckBox=f0,vr.AcroFormTextField=Ou,vr.AcroFormPasswordField=h0,vr.AcroFormAppearance=vt,vr.AcroForm={ChoiceField:uf,ListBox:df,ComboBox:ff,EditBox:u0,Button:Yr,PushButton:d0,RadioButton:hf,CheckBox:f0,TextField:Ou,PasswordField:h0,Appearance:vt},Ct.AcroForm={ChoiceField:uf,ListBox:df,ComboBox:ff,EditBox:u0,Button:Yr,PushButton:d0,RadioButton:hf,CheckBox:f0,TextField:Ou,PasswordField:h0,Appearance:vt};function L6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(O,U){var Y,J,xe,ye,Q,$=t;if((U=U||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(oe(O))for(Q in n)for(xe=n[Q],Y=0;Y<xe.length;Y+=1){for(ye=!0,J=0;J<xe[Y].length;J+=1)if(xe[Y][J]!==void 0&&xe[Y][J]!==O[J]){ye=!1;break}if(ye===!0){$=Q;break}}else for(Q in n)for(xe=n[Q],Y=0;Y<xe.length;Y+=1){for(ye=!0,J=0;J<xe[Y].length;J+=1)if(xe[Y][J]!==void 0&&xe[Y][J]!==O.charCodeAt(J)){ye=!1;break}if(ye===!0){$=Q;break}}return $===t&&U!==t&&($=U),$},i=function O(U){for(var Y=this.internal.write,J=this.internal.putStream,xe=(0,this.internal.getFilters)();xe.indexOf("FlateEncode")!==-1;)xe.splice(xe.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var ye=[];if(ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Image"}),ye.push({key:"Width",value:U.width}),ye.push({key:"Height",value:U.height}),U.colorSpace===k.INDEXED?ye.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(ye.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===k.DEVICE_CMYK&&ye.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ye.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&ye.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var Q="",$=0,z=U.transparency.length;$<z;$++)Q+=U.transparency[$]+" "+U.transparency[$]+" ";ye.push({key:"Mask",value:"["+Q+"]"})}U.sMask!==void 0&&ye.push({key:"SMask",value:U.objectId+1+" 0 R"});var ae=U.filter!==void 0?["/"+U.filter]:void 0;if(J({data:U.data,additionalKeyValues:ye,alreadyAppliedFilters:ae,objectId:U.objectId}),Y("endobj"),"sMask"in U&&U.sMask!==void 0){var Pe="/Predictor "+U.predictor+" /Colors 1 /BitsPerComponent "+U.bitsPerComponent+" /Columns "+U.width,P={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:Pe,data:U.sMask};"filter"in U&&(P.filter=U.filter),O.call(this,P)}if(U.colorSpace===k.INDEXED){var H=this.internal.newObject();J({data:R(new Uint8Array(U.palette)),objectId:H}),Y("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var U in O)i.call(this,O[U])},a=function(){var O,U=this.internal.collections.addImage_images,Y=this.internal.write;for(var J in U)Y("/I"+(O=U[J]).index,O.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var O=this.internal.collections.addImage_images;return l.call(this),O},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(O){return typeof e["process"+O.toUpperCase()]=="function"},m=function(O){return jn(O)==="object"&&O.nodeType===1},w=function(O,U){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var Y=""+O.getAttribute("src");if(Y.indexOf("data:image/")===0)return Uh(unescape(Y).split("base64,").pop());var J=e.loadFile(Y,!0);if(J!==void 0)return J}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var xe;switch(U){case"PNG":xe="image/png";break;case"WEBP":xe="image/webp";break;case"JPEG":case"JPG":default:xe="image/jpeg"}return Uh(O.toDataURL(xe,1).split("base64,").pop())}},g=function(O){var U=this.internal.collections.addImage_images;if(U){for(var Y in U)if(O===U[Y].alias)return U[Y]}},N=function(O,U,Y){return O||U||(O=-96,U=-96),O<0&&(O=-1*Y.width*72/O/this.internal.scaleFactor),U<0&&(U=-1*Y.height*72/U/this.internal.scaleFactor),O===0&&(O=U*Y.width/Y.height),U===0&&(U=O*Y.height/Y.width),[O,U]},j=function(O,U,Y,J,xe,ye){var Q=N.call(this,Y,J,xe),$=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,ae=c.call(this);if(Y=Q[0],J=Q[1],ae[xe.index]=xe,ye){ye*=Math.PI/180;var Pe=Math.cos(ye),P=Math.sin(ye),H=function(ce){return ce.toFixed(4)},re=[H(Pe),H(P),H(-1*P),H(Pe),0,0,"cm"]}this.internal.write("q"),ye?(this.internal.write([1,"0","0",1,$(O),z(U+J),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([$(Y),"0","0",$(J),"0","0","cm"].join(" "))):this.internal.write([$(Y),"0","0",$(J),$(O),z(U+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+xe.index+" Do"),this.internal.write("Q")},k=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(O){var U,Y,J=0;if(typeof O=="string")for(Y=O.length,U=0;U<Y;U++)J=(J<<5)-J+O.charCodeAt(U),J|=0;else if(oe(O))for(Y=O.byteLength/2,U=0;U<Y;U++)J=(J<<5)-J+O[U],J|=0;return J},L=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var U=!0;return O.length===0&&(U=!1),O.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(U=!1),U},M=e.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var U=O.indexOf(",");return U<0?null:O.substring(0,U).trim().endsWith("base64")?O.substring(U+1):null},K=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(O){return K()&&O instanceof ArrayBuffer};var oe=e.__addimage__.isArrayBufferView=function(O){return K()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},Z=e.__addimage__.binaryStringToUint8Array=function(O){for(var U=O.length,Y=new Uint8Array(U),J=0;J<U;J++)Y[J]=O.charCodeAt(J);return Y},R=e.__addimage__.arrayBufferToBinaryString=function(O){for(var U="",Y=oe(O)?O:new Uint8Array(O),J=0;J<Y.length;J+=8192)U+=String.fromCharCode.apply(null,Y.subarray(J,J+8192));return U};e.addImage=function(){var O,U,Y,J,xe,ye,Q,$,z;if(typeof arguments[1]=="number"?(U=t,Y=arguments[1],J=arguments[2],xe=arguments[3],ye=arguments[4],Q=arguments[5],$=arguments[6],z=arguments[7]):(U=arguments[1],Y=arguments[2],J=arguments[3],xe=arguments[4],ye=arguments[5],Q=arguments[6],$=arguments[7],z=arguments[8]),jn(O=arguments[0])==="object"&&!m(O)&&"imageData"in O){var ae=O;O=ae.imageData,U=ae.format||U||t,Y=ae.x||Y||0,J=ae.y||J||0,xe=ae.w||ae.width||xe,ye=ae.h||ae.height||ye,Q=ae.alias||Q,$=ae.compression||$,z=ae.rotation||ae.angle||z}var Pe=this.internal.getFilters();if($===void 0&&Pe.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(Y)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=ee.call(this,O,U,Q,$);return j.call(this,Y,J,xe,ye,P,z),this};var ee=function(O,U,Y,J){var xe,ye,Q;if(typeof O=="string"&&r(O)===t){O=unescape(O);var $=le(O,!1);($!==""||($=e.loadFile(O,!0))!==void 0)&&(O=$)}if(m(O)&&(O=w(O,U)),U=r(O,U),!p(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((Q=Y)==null||Q.length===0)&&(Y=function(z){return typeof z=="string"||oe(z)?S(z):oe(z.data)?S(z.data):null}(O)),(xe=g.call(this,Y))||(K()&&(O instanceof Uint8Array||U==="RGBA"||(ye=O,O=Z(O))),xe=this["process"+U.toUpperCase()](O,f.call(this),Y,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:b.NONE}(J),ye)),!xe)throw new Error("An unknown error occurred whilst processing the image.");return xe},le=e.__addimage__.convertBase64ToBinaryString=function(O,U){U=typeof U!="boolean"||U;var Y,J="";if(typeof O=="string"){var xe;Y=(xe=M(O))!==null&&xe!==void 0?xe:O;try{J=Uh(Y)}catch(ye){if(U)throw L(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ye.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(O){var U,Y,J="";if(m(O)&&(O=w(O)),typeof O=="string"&&r(O)===t&&((J=le(O,!1))===""&&(J=e.loadFile(O)||""),O=J),Y=r(O),!p(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!K()||O instanceof Uint8Array||(O=Z(O)),!(U=this["process"+Y.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=Y,U}})(Ct.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ct.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,p=!1,m=0;m<f.length&&!p;m++)switch((r=f[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<f.length;w++){r=f[w];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(j.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(b(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(b(S))+") >>",j.content=s;var L=j.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(j.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var oe=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+oe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:f(r),w:c(n+i),h:f(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,l,c=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(f*p)}else l=c,a=f;return this.text(n,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,l,a,s),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ct.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},l=e.__arabicParser__.isArabicEndLetter=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(j){return a(j)&&i.indexOf(j.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(j){var k=0,b=n,S="",L=0;for(k=0;k<j.length;k+=1)b[j.charCodeAt(k)]!==void 0?(L++,typeof(b=b[j.charCodeAt(k)])=="number"&&(S+=String.fromCharCode(b),b=n,L=0),k===j.length-1&&(b=n,S+=j.charAt(k-(L-1)),k-=L-1,L=0)):(b=n,S+=j.charAt(k-L),k-=L,L=0);return S};e.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&r[j.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(j,k,b){return a(j)?s(j)===!1?-1:!f(j)||!a(k)&&!a(b)||!a(b)&&l(k)||l(j)&&!a(k)||l(j)&&c(k)||l(j)&&l(k)?0:p(j)&&a(k)&&!l(k)&&a(b)&&f(b)?3:l(j)||!a(b)?1:2:-1},g=function(j){var k=0,b=0,S=0,L="",M="",K="",oe=(j=j||"").split("\\s+"),Z=[];for(k=0;k<oe.length;k+=1){for(Z.push(""),b=0;b<oe[k].length;b+=1)L=oe[k][b],M=oe[k][b-1],K=oe[k][b+1],a(L)?(S=w(L,M,K),Z[k]+=S!==-1?String.fromCharCode(t[L.charCodeAt(0)][S]):L):Z[k]+=L;Z[k]=m(Z[k])}return Z.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var j,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(k)){var S=0;for(b=[],S=0;S<k.length;S+=1)Array.isArray(k[S])?b.push([g(k[S][0]),k[S][1],k[S][2]]):b.push([g(k[S])]);j=b}else j=g(k);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};e.events.push(["preProcessText",N])}(Ct.API),Ct.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ct.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(j){c=j}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(j){w=j}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(j){N=j}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),w=f.scaleFactor||this.internal.scaleFactor,g=0,N=0,j=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=f.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,M){return L.concat(k.splitTextToSize(M,b))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)g<(j=this.getStringUnitWidth(c[S],{font:m})*p)&&(g=j);return g!==0&&(N=c.length),{w:g/=w,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,g&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,f,p,m,w){if(r.call(this),!p)throw new Error("No data for PDF table.");var g,N,j,k,b=[],S=[],L=[],M={},K={},oe=[],Z=[],R=(w=w||{}).autoSize||!1,ee=w.printHeaders!==!1,le=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,O=w.margins||Object.assign({width:this.getPageWidth()},t),U=typeof w.padding=="number"?w.padding:3,Y=w.headerBackgroundColor||"#c8c8c8",J=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=J,this.setFontSize(le),m==null)S=b=Object.keys(p[0]),L=b.map(function(){return"left"});else if(Array.isArray(m)&&jn(m[0])==="object")for(b=m.map(function(ae){return ae.name}),S=m.map(function(ae){return ae.prompt||ae.name||""}),L=m.map(function(ae){return ae.align||"left"}),g=0;g<m.length;g+=1)K[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(S=b=m,L=b.map(function(){return"left"}));if(R||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<b.length;g+=1){for(M[k=b[g]]=p.map(function(ae){return ae[k]}),this.setFont(void 0,"bold"),oe.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=M[k],this.setFont(void 0,"normal"),j=0;j<N.length;j+=1)oe.push(this.getTextDimensions(N[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[k]=Math.max.apply(null,oe)+U+U,oe=[]}if(ee){var xe={};for(g=0;g<b.length;g+=1)xe[b[g]]={},xe[b[g]].text=S[g],xe[b[g]].align=L[g];var ye=l.call(this,xe,K);Z=b.map(function(ae){return new s(c,f,K[ae],ye,xe[ae].text,void 0,xe[ae].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var Q=m.reduce(function(ae,Pe){return ae[Pe.name]=Pe.align,ae},{});for(g=0;g<p.length;g+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:g,data:p[g]},this);var $=l.call(this,p[g],K);for(j=0;j<b.length;j+=1){var z=p[g][b[j]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:g,col:j,data:z},this),a.call(this,new s(c,f,K[b[j]],$,z,g+2,Q[b[j]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var l=function(c,f){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[g]-p-p)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/w+p+p},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){p=this.internal.__cell__.tableHeaderRow[g].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(N)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(Ct.API);var P6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},T6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],wy=L6(T6),I6=[100,200,300,400,500,600,700,800,900],_B=L6(I6);function xy(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return P6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof wy[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function U_(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var SB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},z_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function q_(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function NB(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},SB,n.genericFontFamilies||{}),s=null,a=null,l=0;l<t.length;++l)if(i[(s=xy(t[l])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+q_(s)+"' and default family '"+r+"'.");if(a=function(c,f){if(f[c])return f[c];var p=wy[c],m=p<=wy.normal?-1:1,w=U_(f,T6,p,m);if(!w)throw new Error("Could not find a matching font-stretch value for "+c);return w}(s.stretch,a),a=function(c,f){if(f[c])return f[c];for(var p=P6[c],m=0;m<p.length;++m)if(f[p[m]])return f[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var p=_B[c],m=U_(f,I6,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+q_(s)+"'.");return a}function W_(e){return e.trimLeft()}function jB(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function kB(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Um,H_,V_,Rv=["times"];(function(e){var t,n,r,i,s,a,l,c,f,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,f=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=P;Object.defineProperty(this,"pdf",{get:function(){return H}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ue){re=!!ue}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(ue){ce=!!ue}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(ue){isNaN(ue)||(fe=ue)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(ue){isNaN(ue)||(Ee=ue)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ue){var G;typeof ue=="number"?G=[ue,ue,ue,ue]:((G=new Array(4))[0]=ue[0],G[1]=ue.length>=2?ue[1]:G[0],G[2]=ue.length>=3?ue[2]:G[0],G[3]=ue.length>=4?ue[3]:G[1]),f.margin=G}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(ue){Ce=ue}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(ue){te=ue}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(ue){Ne=ue}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ue){ue instanceof p&&(f=ue)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ue){f.path=ue}});var ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return ie},set:function(ue){ie=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var G;G=w(ue),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var G=w(ue);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var pe=null;function he(ue,G){if(pe===null){var $e=function(Fe){var De=[];return Object.keys(Fe).forEach(function(Be){Fe[Be].forEach(function(be){var Ie=null;switch(be){case"bold":Ie={family:Be,weight:"bold"};break;case"italic":Ie={family:Be,style:"italic"};break;case"bolditalic":Ie={family:Be,weight:"bold",style:"italic"};break;case"":case"normal":Ie={family:Be}}Ie!==null&&(Ie.ref={name:Be,style:be},De.push(Ie))})}),De}(ue.getFontList());pe=function(Fe){for(var De={},Be=0;Be<Fe.length;++Be){var be=xy(Fe[Be]),Ie=be.family,We=be.stretch,He=be.style,nt=be.weight;De[Ie]=De[Ie]||{},De[Ie][We]=De[Ie][We]||{},De[Ie][We][He]=De[Ie][We][He]||{},De[Ie][We][He][nt]=be}return De}($e.concat(G))}return pe}var je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(ue){pe=null,je=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var G;if(this.ctx.font=ue,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var $e=G[1];G[2];var Fe=G[3],De=G[4];G[5];var Be=G[6],be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(De)[2];De=Math.floor(be==="px"?parseFloat(De)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(De)*this.pdf.getFontSize():parseFloat(De)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(De);var Ie=function(it){var St,Ze,Zt=[],Mt=it.trim();if(Mt==="")return Rv;if(Mt in z_)return[z_[Mt]];for(;Mt!=="";){switch(Ze=null,St=(Mt=W_(Mt)).charAt(0)){case'"':case"'":Ze=jB(Mt.substring(1),St);break;default:Ze=kB(Mt)}if(Ze===null||(Zt.push(Ze[0]),(Mt=W_(Ze[1]))!==""&&Mt.charAt(0)!==","))return Rv;Mt=Mt.replace(/^,/,"")}return Zt}(Be);if(this.fontFaces){var We=NB(he(this.pdf,this.fontFaces),Ie.map(function(it){return{family:it,stretch:"normal",weight:Fe,style:$e}}));this.pdf.setFont(We.ref.name,We.ref.style)}else{var He="";(Fe==="bold"||parseInt(Fe,10)>=700||$e==="bold")&&(He="bold"),$e==="italic"&&(He+="italic"),He.length===0&&(He="normal");for(var nt="",dt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<Ie.length;ft++){if(this.pdf.internal.getFont(Ie[ft],He,{noFallback:!0,disableWarning:!0})!==void 0){nt=Ie[ft];break}if(He==="bolditalic"&&this.pdf.internal.getFont(Ie[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=Ie[ft],He="bold";else if(this.pdf.internal.getFont(Ie[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=Ie[ft],He="normal";break}}if(nt===""){for(var Nt=0;Nt<Ie.length;Nt++)if(dt[Ie[Nt]]){nt=dt[Ie[Nt]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,He)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,Pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,Pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){M.call(this,"fill",!1)},m.prototype.stroke=function(){M.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,H){if(isNaN(P)||isNaN(H))throw Dn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new a(P,H));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new a(P,H)},m.prototype.closePath=function(){var P=new a(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&jn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){P=new a(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.lineTo=function(P,H){if(isNaN(P)||isNaN(H))throw Dn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new a(P,H));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new a(re.x,re.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,H,re,ce){if(isNaN(re)||isNaN(ce)||isNaN(P)||isNaN(H))throw Dn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new a(re,ce)),Ee=this.ctx.transform.applyToPoint(new a(P,H));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new a(fe.x,fe.y)},m.prototype.bezierCurveTo=function(P,H,re,ce,fe,Ee){if(isNaN(fe)||isNaN(Ee)||isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Dn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new a(fe,Ee)),te=this.ctx.transform.applyToPoint(new a(P,H)),Ne=this.ctx.transform.applyToPoint(new a(re,ce));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:Ne.x,y2:Ne.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new a(Ce.x,Ce.y)},m.prototype.arc=function(P,H,re,ce,fe,Ee){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce)||isNaN(fe))throw Dn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new a(P,H));P=Ce.x,H=Ce.y;var te=this.ctx.transform.applyToPoint(new a(0,re)),Ne=this.ctx.transform.applyToPoint(new a(0,0));re=Math.sqrt(Math.pow(te.x-Ne.x,2)+Math.pow(te.y-Ne.y,2))}Math.abs(fe-ce)>=2*Math.PI&&(ce=0,fe=2*Math.PI),this.path.push({type:"arc",x:P,y:H,radius:re,startAngle:ce,endAngle:fe,counterclockwise:Ee})},m.prototype.arcTo=function(P,H,re,ce,fe){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Dn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,H),this.lineTo(P+re,H),this.lineTo(P+re,H+ce),this.lineTo(P,H+ce),this.lineTo(P,H),this.lineTo(P+re,H),this.lineTo(P,H)},m.prototype.fillRect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Dn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,H,re,ce),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},m.prototype.strokeRect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Dn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,H,re,ce),this.stroke())},m.prototype.clearRect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Dn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,H,re,ce))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(H),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(P){var H,re,ce,fe;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))H=0,re=0,ce=0,fe=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Ee!==null)H=parseInt(Ee[1]),re=parseInt(Ee[2]),ce=parseInt(Ee[3]),fe=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)H=parseInt(Ee[1]),re=parseInt(Ee[2]),ce=parseInt(Ee[3]),fe=parseFloat(Ee[4]);else{if(fe=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ce=new N6(P);P=Ce.ok?Ce.toHex():"#000000"}P.length===4?(H=P.substring(1,2),H+=H,re=P.substring(2,3),re+=re,ce=P.substring(3,4),ce+=ce):(H=P.substring(1,3),re=P.substring(3,5),ce=P.substring(5,7)),H=parseInt(H,16),re=parseInt(re,16),ce=parseInt(ce,16)}}return{r:H,g:re,b:ce,a:fe,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,H,re,ce){if(isNaN(H)||isNaN(re)||typeof P!="string")throw Dn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!g.call(this)){var fe=$(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;U.call(this,{text:P,x:H,y:re,scale:Ee,angle:fe,align:this.textAlign,maxWidth:ce})}},m.prototype.strokeText=function(P,H,re,ce){if(isNaN(H)||isNaN(re)||typeof P!="string")throw Dn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ce=isNaN(ce)?void 0:ce;var fe=$(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;U.call(this,{text:P,x:H,y:re,scale:Ee,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:ce})}},m.prototype.measureText=function(P){if(typeof P!="string")throw Dn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,re=this.pdf.internal.scaleFactor,ce=H.internal.getFontSize(),fe=H.getStringUnitWidth(P)*ce/H.internal.scaleFactor,Ee=function(Ce){var te=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return te}}),this};return new Ee({width:fe*=Math.round(96*re/72*1e4)/1e4})},m.prototype.scale=function(P,H){if(isNaN(P)||isNaN(H))throw Dn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new c(P,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.rotate=function(P){if(isNaN(P))throw Dn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.translate=function(P,H){if(isNaN(P)||isNaN(H))throw Dn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new c(1,0,0,1,P,H);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.transform=function(P,H,re,ce,fe,Ee){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce)||isNaN(fe)||isNaN(Ee))throw Dn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new c(P,H,re,ce,fe,Ee);this.ctx.transform=this.ctx.transform.multiply(Ce)},m.prototype.setTransform=function(P,H,re,ce,fe,Ee){P=isNaN(P)?1:P,H=isNaN(H)?0:H,re=isNaN(re)?0:re,ce=isNaN(ce)?1:ce,fe=isNaN(fe)?0:fe,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new c(P,H,re,ce,fe,Ee)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,H,re,ce,fe,Ee,Ce,te,Ne){var ie=this.pdf.getImageProperties(P),pe=1,he=1,je=1,ue=1;ce!==void 0&&te!==void 0&&(je=te/ce,ue=Ne/fe,pe=ie.width/ce*te/ce,he=ie.height/fe*Ne/fe),Ee===void 0&&(Ee=H,Ce=re,H=0,re=0),ce!==void 0&&te===void 0&&(te=ce,Ne=fe),ce===void 0&&te===void 0&&(te=ie.width,Ne=ie.height);for(var G,$e=this.ctx.transform.decompose(),Fe=$($e.rotate.shx),De=new c,Be=(De=(De=(De=De.multiply($e.translate)).multiply($e.skew)).multiply($e.scale)).applyToRectangle(new l(Ee-H*je,Ce-re*ue,ce*pe,fe*he)),be=k.call(this,Be),Ie=[],We=0;We<be.length;We+=1)Ie.indexOf(be[We])===-1&&Ie.push(be[We]);if(L(Ie),this.autoPaging)for(var He=Ie[0],nt=Ie[Ie.length-1],dt=He;dt<nt+1;dt++){this.pdf.setPage(dt);var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=dt===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=dt===1?0:it+(dt-2)*St;if(this.ctx.clip_path.length!==0){var Zt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(G,this.posX+this.margin[3],-Ze+Nt+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=Zt}var Mt=JSON.parse(JSON.stringify(Be));Mt=S([Mt],this.posX+this.margin[3],-Ze+Nt+this.ctx.prevPageLastElemOffset)[0];var fr=(dt>He||dt<nt)&&j.call(this);fr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,St,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Mt.x,Mt.y,Mt.w,Mt.h,null,null,Fe),fr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,Fe)};var k=function(P,H,re){var ce=[];H=H||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ce.push(Math.floor((P.y+fe)/re)+1);break;case"arc":ce.push(Math.floor((P.y+fe-P.radius)/re)+1),ce.push(Math.floor((P.y+fe+P.radius)/re)+1);break;case"qct":var Ee=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ce.push(Math.floor((Ee.y+fe)/re)+1),ce.push(Math.floor((Ee.y+Ee.h+fe)/re)+1);break;case"bct":var Ce=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ce.push(Math.floor((Ce.y+fe)/re)+1),ce.push(Math.floor((Ce.y+Ce.h+fe)/re)+1);break;case"rect":ce.push(Math.floor((P.y+fe)/re)+1),ce.push(Math.floor((P.y+P.h+fe)/re)+1)}for(var te=0;te<ce.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<ce[te];)b.call(this);return ce},b=function(){var P=this.fillStyle,H=this.strokeStyle,re=this.font,ce=this.lineCap,fe=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=H,this.font=re,this.lineCap=ce,this.lineWidth=fe,this.lineJoin=Ee},S=function(P,H,re){for(var ce=0;ce<P.length;ce++)switch(P[ce].type){case"bct":P[ce].x2+=H,P[ce].y2+=re;case"qct":P[ce].x1+=H,P[ce].y1+=re;case"mt":case"lt":case"arc":default:P[ce].x+=H,P[ce].y+=re}return P},L=function(P){return P.sort(function(H,re){return H-re})},M=function(P,H){for(var re,ce,fe=this.fillStyle,Ee=this.strokeStyle,Ce=this.lineCap,te=this.lineWidth,Ne=Math.abs(te*this.ctx.transform.scaleX),ie=this.lineJoin,pe=JSON.parse(JSON.stringify(this.path)),he=JSON.parse(JSON.stringify(this.path)),je=[],ue=0;ue<he.length;ue++)if(he[ue].x!==void 0)for(var G=k.call(this,he[ue]),$e=0;$e<G.length;$e+=1)je.indexOf(G[$e])===-1&&je.push(G[$e]);for(var Fe=0;Fe<je.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<je[Fe];)b.call(this);if(L(je),this.autoPaging)for(var De=je[0],Be=je[je.length-1],be=De;be<Be+1;be++){this.pdf.setPage(be),this.fillStyle=fe,this.strokeStyle=Ee,this.lineCap=Ce,this.lineWidth=Ne,this.lineJoin=ie;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=be===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=be===1?0:He+(be-2)*nt;if(this.ctx.clip_path.length!==0){var ft=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(re,this.posX+this.margin[3],-dt+We+this.ctx.prevPageLastElemOffset),K.call(this,P,!0),this.path=ft}if(ce=JSON.parse(JSON.stringify(pe)),this.path=S(ce,this.posX+this.margin[3],-dt+We+this.ctx.prevPageLastElemOffset),H===!1||be===0){var Nt=(be>De||be<Be)&&j.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,nt,null).clip().discardPath()),K.call(this,P,H),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=Ne,K.call(this,P,H),this.lineWidth=te;this.path=pe},K=function(P,H){if((P!=="stroke"||H||!N.call(this))&&(P==="stroke"||H||!g.call(this))){for(var re,ce,fe=[],Ee=this.path,Ce=0;Ce<Ee.length;Ce++){var te=Ee[Ce];switch(te.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:te,deltas:[],abs:[]});break;case"lt":var Ne=fe.length;if(Ee[Ce-1]&&!isNaN(Ee[Ce-1].x)&&(re=[te.x-Ee[Ce-1].x,te.y-Ee[Ce-1].y],Ne>0)){for(;Ne>=0;Ne--)if(fe[Ne-1].close!==!0&&fe[Ne-1].begin!==!0){fe[Ne-1].deltas.push(re),fe[Ne-1].abs.push(te);break}}break;case"bct":re=[te.x1-Ee[Ce-1].x,te.y1-Ee[Ce-1].y,te.x2-Ee[Ce-1].x,te.y2-Ee[Ce-1].y,te.x-Ee[Ce-1].x,te.y-Ee[Ce-1].y],fe[fe.length-1].deltas.push(re);break;case"qct":var ie=Ee[Ce-1].x+2/3*(te.x1-Ee[Ce-1].x),pe=Ee[Ce-1].y+2/3*(te.y1-Ee[Ce-1].y),he=te.x+2/3*(te.x1-te.x),je=te.y+2/3*(te.y1-te.y),ue=te.x,G=te.y;re=[ie-Ee[Ce-1].x,pe-Ee[Ce-1].y,he-Ee[Ce-1].x,je-Ee[Ce-1].y,ue-Ee[Ce-1].x,G-Ee[Ce-1].y],fe[fe.length-1].deltas.push(re);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(te)}}ce=H?null:P==="stroke"?"stroke":"fill";for(var $e=!1,Fe=0;Fe<fe.length;Fe++)if(fe[Fe].arc)for(var De=fe[Fe].abs,Be=0;Be<De.length;Be++){var be=De[Be];be.type==="arc"?R.call(this,be.x,be.y,be.radius,be.startAngle,be.endAngle,be.counterclockwise,void 0,H,!$e):Y.call(this,be.x,be.y),$e=!0}else if(fe[Fe].close===!0)this.pdf.internal.out("h"),$e=!1;else if(fe[Fe].begin!==!0){var Ie=fe[Fe].start.x,We=fe[Fe].start.y;J.call(this,fe[Fe].deltas,Ie,We),$e=!0}ce&&ee.call(this,ce),H&&le.call(this)}},oe=function(P){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-re;case"top":return P+H-re;case"hanging":return P+H-2*re;case"middle":return P+H/2-re;case"ideographic":return P;case"alphabetic":default:return P}},Z=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(H,re){this.colorStops.push([H,re])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(P,H,re,ce,fe,Ee,Ce,te,Ne){for(var ie=ye.call(this,re,ce,fe,Ee),pe=0;pe<ie.length;pe++){var he=ie[pe];pe===0&&(Ne?O.call(this,he.x1+P,he.y1+H):Y.call(this,he.x1+P,he.y1+H)),xe.call(this,P,H,he.x2,he.y2,he.x3,he.y3,he.x4,he.y4)}te?le.call(this):ee.call(this,Ce)},ee=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(P,H){this.pdf.internal.out(n(P)+" "+r(H)+" m")},U=function(P){var H;switch(P.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var re=this.pdf.getTextDimensions(P.text),ce=oe.call(this,P.y),fe=Z.call(this,ce)-re.h,Ee=this.ctx.transform.applyToPoint(new a(P.x,ce)),Ce=this.ctx.transform.decompose(),te=new c;te=(te=(te=te.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var Ne,ie,pe,he=this.ctx.transform.applyToRectangle(new l(P.x,ce,re.w,re.h)),je=te.applyToRectangle(new l(P.x,fe,re.w,re.h)),ue=k.call(this,je),G=[],$e=0;$e<ue.length;$e+=1)G.indexOf(ue[$e])===-1&&G.push(ue[$e]);if(L(G),this.autoPaging)for(var Fe=G[0],De=G[G.length-1],Be=Fe;Be<De+1;Be++){this.pdf.setPage(Be);var be=Be===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[2],He=We-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],dt=nt-this.margin[3],ft=Be===1?0:Ie+(Be-2)*He;if(this.ctx.clip_path.length!==0){var Nt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ne,this.posX+this.margin[3],-1*ft+be),K.call(this,"fill",!0),this.path=Nt}var it=S([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-ft+be+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*P.scale),pe=this.lineWidth,this.lineWidth=pe*P.scale);var St=this.autoPaging!=="text";if(St||it.y+it.h<=We){if(St||it.y>=be&&it.x<=nt){var Ze=St?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||nt-it.x)[0],Zt=S([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-ft+be+this.ctx.prevPageLastElemOffset)[0],Mt=St&&(Be>Fe||Be<De)&&j.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,He,null).clip().discardPath()),this.pdf.text(Ze,Zt.x,Zt.y,{angle:P.angle,align:H,renderingMode:P.renderingMode}),Mt&&this.pdf.restoreGraphicsState()}}else it.y<We&&(this.ctx.prevPageLastElemOffset+=We-it.y);P.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=pe)}else P.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*P.scale),pe=this.lineWidth,this.lineWidth=pe*P.scale),this.pdf.text(P.text,Ee.x+this.posX,Ee.y+this.posY,{angle:P.angle,align:H,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=pe)},Y=function(P,H,re,ce){re=re||0,ce=ce||0,this.pdf.internal.out(n(P+re)+" "+r(H+ce)+" l")},J=function(P,H,re){return this.pdf.lines(P,H,re,null,null)},xe=function(P,H,re,ce,fe,Ee,Ce,te){this.pdf.internal.out([t(i(re+P)),t(s(ce+H)),t(i(fe+P)),t(s(Ee+H)),t(i(Ce+P)),t(s(te+H)),"c"].join(" "))},ye=function(P,H,re,ce){for(var fe=2*Math.PI,Ee=Math.PI/2;H>re;)H-=fe;var Ce=Math.abs(re-H);Ce<fe&&ce&&(Ce=fe-Ce);for(var te=[],Ne=ce?-1:1,ie=H;Ce>1e-5;){var pe=ie+Ne*Math.min(Ce,Ee);te.push(Q.call(this,P,ie,pe)),Ce-=Math.abs(pe-ie),ie=pe}return te},Q=function(P,H,re){var ce=(re-H)/2,fe=P*Math.cos(ce),Ee=P*Math.sin(ce),Ce=fe,te=-Ee,Ne=Ce*Ce+te*te,ie=Ne+Ce*fe+te*Ee,pe=4/3*(Math.sqrt(2*Ne*ie)-ie)/(Ce*Ee-te*fe),he=Ce-pe*te,je=te+pe*Ce,ue=he,G=-je,$e=ce+H,Fe=Math.cos($e),De=Math.sin($e);return{x1:P*Math.cos(H),y1:P*Math.sin(H),x2:he*Fe-je*De,y2:he*De+je*Fe,x3:ue*Fe-G*De,y3:ue*De+G*Fe,x4:P*Math.cos(re),y4:P*Math.sin(re)}},$=function(P){return 180*P/Math.PI},z=function(P,H,re,ce,fe,Ee){var Ce=P+.5*(re-P),te=H+.5*(ce-H),Ne=fe+.5*(re-fe),ie=Ee+.5*(ce-Ee),pe=Math.min(P,fe,Ce,Ne),he=Math.max(P,fe,Ce,Ne),je=Math.min(H,Ee,te,ie),ue=Math.max(H,Ee,te,ie);return new l(pe,je,he-pe,ue-je)},ae=function(P,H,re,ce,fe,Ee,Ce,te){var Ne,ie,pe,he,je,ue,G,$e,Fe,De,Be,be,Ie,We,He=re-P,nt=ce-H,dt=fe-re,ft=Ee-ce,Nt=Ce-fe,it=te-Ee;for(ie=0;ie<41;ie++)Fe=(G=(pe=P+(Ne=ie/40)*He)+Ne*((je=re+Ne*dt)-pe))+Ne*(je+Ne*(fe+Ne*Nt-je)-G),De=($e=(he=H+Ne*nt)+Ne*((ue=ce+Ne*ft)-he))+Ne*(ue+Ne*(Ee+Ne*it-ue)-$e),ie==0?(Be=Fe,be=De,Ie=Fe,We=De):(Be=Math.min(Be,Fe),be=Math.min(be,De),Ie=Math.max(Ie,Fe),We=Math.max(We,De));return new l(Math.round(Be),Math.round(be),Math.round(Ie-Be),Math.round(We-be))},Pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,H,re=(P=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:H}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Ct.API),function(e){var t=function(s){var a,l,c,f,p,m,w,g,N,j;for(l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(j=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)-(w=p%85))/85)%85,l.push(m+33,w+33,g+33,N+33,j+33)):l.push(122);return function(k,b){for(var S=b;S>0;S--)k.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,f,p,m=String,w="length",g=255,N="charCodeAt",j="slice",k="replace";for(s[j](-2),s=s[j](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],f=0,p=(s+=a="uuuuu"[j](s[w]%5||5))[w];p>f;f+=5)l=52200625*(s[N](f)-33)+614125*(s[N](f+1)-33)+7225*(s[N](f+2)-33)+85*(s[N](f+3)-33)+(s[N](f+4)-33),c.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(b,S){for(var L=S;L>0;L--)b.pop()}(c,a[w]),m.fromCharCode.apply(m,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=py(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Ct.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,f,p){var m=new XMLHttpRequest,w=0,g=function(N){var j=N.length,k=[],b=String.fromCharCode;for(w=0;w<j;w+=1)k.push(b(255&N.charCodeAt(w)));return k.join("")};if(m.open("GET",c,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?p(g(this.responseText)):p(void 0)}),m.send(null),f&&m.status===200)return g(m.responseText)}(i,s,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Ct.API),function(e){function t(){return(At.html2canvas?Promise.resolve(At.html2canvas):sl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):sl(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=jn(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||m.appendChild(c(w,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var w=0;w<f.length;++w){var g=f[w],N=g.src.find(function(j){return j.format==="truetype"});N&&c.addFont(N.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,p){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,f),m}).then(f,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(f,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ct.getPageSize=function(a,l,c){if(jn(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var g,N=0,j=0;if(w.hasOwnProperty(m))N=w[m][1]/p,j=w[m][0]/p;else try{N=c[1],j=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",j>N&&(g=j,j=N,N=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>j&&(g=j,j=N,N=g)}return{width:j,height:N,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(xy):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(Ct.API),Ct.API.addJS=function(e){return V_=e,this.internal.events.subscribe("postPutResources",function(){Um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Um+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),H_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+V_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Um!==void 0&&H_!==void 0&&this.internal.out("/Names <</JavaScript "+Um+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var m=n.internal.newObject();p.push(m);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ct.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,l){var c,f=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(m){for(var w,g=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,j={width:0,height:0,numcomponents:1},k=4;k<N;k+=2){if(k+=g,t.indexOf(m.charCodeAt(k+1))!==-1){w=256*m.charCodeAt(k+5)+m.charCodeAt(k+6),j={width:256*m.charCodeAt(k+7)+m.charCodeAt(k+8),height:w,numcomponents:m.charCodeAt(k+9)};break}g=256*m.charCodeAt(k+2)+m.charCodeAt(k+3)}return j}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}}(Ct.API);var Fd,zm,G_,Y_,K_,EB=function(){var e,t,n;function r(s){var a,l,c,f,p,m,w,g,N,j,k,b,S,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),N=(function(){var M,K;for(K=[],M=0;M<4;++M)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*p/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,b=0;0<=a?b<a:b>a;0<=a?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((j=c-this.transparency.indexed.length)>0)for(S=0;0<=j?S<j:S>j;0<=j?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":w=(k=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,k.slice(0,w)),this.text[g]=String.fromCharCode.apply(String,k.slice(w+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,w,g,N){var j,k,b,S,L,M,K,oe,Z,R,ee,le,O,U,Y,J,xe,ye,Q,$,z,ae=Math.ceil((f.width-m)/g),Pe=Math.ceil((f.height-w)/N),P=f.width==ae&&f.height==Pe;for(U=a*ae,le=P?l:new Uint8Array(U*Pe),M=s.length,O=0,k=0;O<Pe&&c<M;){switch(s[c++]){case 0:for(S=xe=0;xe<U;S=xe+=1)le[k++]=s[c++];break;case 1:for(S=ye=0;ye<U;S=ye+=1)j=s[c++],L=S<a?0:le[k-a],le[k++]=(j+L)%256;break;case 2:for(S=Q=0;Q<U;S=Q+=1)j=s[c++],b=(S-S%a)/a,Y=O&&le[(O-1)*U+b*a+S%a],le[k++]=(Y+j)%256;break;case 3:for(S=$=0;$<U;S=$+=1)j=s[c++],b=(S-S%a)/a,L=S<a?0:le[k-a],Y=O&&le[(O-1)*U+b*a+S%a],le[k++]=(j+Math.floor((L+Y)/2))%256;break;case 4:for(S=z=0;z<U;S=z+=1)j=s[c++],b=(S-S%a)/a,L=S<a?0:le[k-a],O===0?Y=J=0:(Y=le[(O-1)*U+b*a+S%a],J=b&&le[(O-1)*U+(b-1)*a+S%a]),K=L+Y-J,oe=Math.abs(K-L),R=Math.abs(K-Y),ee=Math.abs(K-J),Z=oe<=R&&oe<=ee?L:R<=ee?Y:J,le[k++]=(j+Z)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var H=((w+O*N)*f.width+m)*a,re=O*U;for(S=0;S<ae;S+=1){for(var ce=0;ce<a;ce+=1)l[H++]=le[re++];H+=(g-1)*a}}O++}}return s=sB(s),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,c,f,p,m,w,g;for(l=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+l.length),c=0,s=0,a=m=0,w=l.length;m<w;a=m+=3)f[c++]=l[a],f[c++]=l[a+1],f[c++]=l[a+2],f[c++]=(g=p[s++])!=null?g:255;return f},r.prototype.copyToImageData=function(s,a){var l,c,f,p,m,w,g,N,j,k,b;if(c=this.colors,j=null,l=this.hasAlphaChannel,this.palette.length&&(j=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(f=s.data||s).length,m=j||a,p=w=0,c===1)for(;p<N;)g=j?4*a[p/4]:w,k=m[g++],f[p++]=k,f[p++]=k,f[p++]=k,f[p++]=l?m[g++]:255,w=g;else for(;p<N;)g=j?4*a[p/4]:w,f[p++]=m[g++],f[p++]=m[g++],f[p++]=m[g++],f[p++]=l?m[g++]:255,w=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(At)==="[object Window]"){try{t=At.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,c,f,p,m,w,g;if(this.animation){for(g=[],l=p=0,m=(w=this.animation.frames).length;p<m;l=++p)a=w[l],c=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,f),a.imageData=c,g.push(a.image=e(c));return g}},r.prototype.renderFrame=function(s,a){var l,c,f;return l=(c=this.animation.frames)[a],f=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,c,f,p,m,w=this;return l=0,m=this.animation,f=m.numFrames,c=m.frames,p=m.numPlays,(a=function(){var g,N;if(g=l++%f,N=c[g],w.renderFrame(s,g),f>1&&l/f<p)return w.animation._timeout=setTimeout(a,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function CB(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=a,t+=3*a);var f=!0,p=[],m=0,w=null,g=0,N=null;for(this.width=n,this.height=r;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=e[t++];m=e[t++]|e[t++]<<8,w=e[t++],!(1&j)&&(w=null),g=j>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,M=e[t++],K=M>>6&1,oe=1<<(7&M)+1,Z=l,R=c,ee=!1;M>>7&&(ee=!0,Z=t,R=oe,t+=3*oe);var le=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}p.push({x:k,y:b,width:S,height:L,has_local_palette:ee,palette_offset:Z,palette_size:R,data_offset:le,data_length:t-le,transparent_index:w,interlaced:!!K,delay:m,disposal:g});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(U){if(U<0||U>=p.length)throw new Error("Frame index out of range.");return p[U]},this.decodeAndBlitFrameBGRA=function(U,Y){var J=this.frameInfo(U),xe=J.width*J.height,ye=new Uint8Array(xe);J_(e,J.data_offset,ye,xe);var Q=J.palette_offset,$=J.transparent_index;$===null&&($=256);var z=J.width,ae=n-z,Pe=z,P=4*(J.y*n+J.x),H=4*((J.y+J.height)*n+J.x),re=P,ce=4*ae;J.interlaced===!0&&(ce+=4*n*7);for(var fe=8,Ee=0,Ce=ye.length;Ee<Ce;++Ee){var te=ye[Ee];if(Pe===0&&(Pe=z,(re+=ce)>=H&&(ce=4*ae+4*n*(fe-1),re=P+(z+ae)*(fe<<1),fe>>=1)),te===$)re+=4;else{var Ne=e[Q+3*te],ie=e[Q+3*te+1],pe=e[Q+3*te+2];Y[re++]=pe,Y[re++]=ie,Y[re++]=Ne,Y[re++]=255}--Pe}},this.decodeAndBlitFrameRGBA=function(U,Y){var J=this.frameInfo(U),xe=J.width*J.height,ye=new Uint8Array(xe);J_(e,J.data_offset,ye,xe);var Q=J.palette_offset,$=J.transparent_index;$===null&&($=256);var z=J.width,ae=n-z,Pe=z,P=4*(J.y*n+J.x),H=4*((J.y+J.height)*n+J.x),re=P,ce=4*ae;J.interlaced===!0&&(ce+=4*n*7);for(var fe=8,Ee=0,Ce=ye.length;Ee<Ce;++Ee){var te=ye[Ee];if(Pe===0&&(Pe=z,(re+=ce)>=H&&(ce=4*ae+4*n*(fe-1),re=P+(z+ae)*(fe<<1),fe>>=1)),te===$)re+=4;else{var Ne=e[Q+3*te],ie=e[Q+3*te+1],pe=e[Q+3*te+2];Y[re++]=Ne,Y[re++]=ie,Y[re++]=pe,Y[re++]=255}--Pe}}}function J_(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,l=a+1,c=i+1,f=(1<<c)-1,p=0,m=0,w=0,g=e[t++],N=new Int32Array(4096),j=null;;){for(;p<16&&g!==0;)m|=e[t++]<<p,p+=8,g===1?g=e[t++]:--g;if(p<c)break;var k=m&f;if(m>>=c,p-=c,k!==s){if(k===a)break;for(var b=k<l?k:j,S=0,L=b;L>s;)L=N[L]>>8,++S;var M=L;if(w+S+(b!==k?1:0)>r)return void Dn.log("Warning, gif stream longer than expected.");n[w++]=M;var K=w+=S;for(b!==k&&(n[w++]=M),L=b;S--;)L=N[L],n[--K]=255&L,L>>=8;j!==null&&l<4096&&(N[l++]=j<<8|M,l>=f+1&&c<12&&(++c,f=f<<1|1)),j=k}else l=a+1,f=(1<<(c=i+1))-1,j=null}return w!==r&&Dn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fv(e){var t,n,r,i,s,a=Math.floor,l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(65535),w=new Array(65535),g=new Array(64),N=new Array(64),j=[],k=0,b=7,S=new Array(64),L=new Array(64),M=new Array(64),K=new Array(256),oe=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],xe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ye(P,H){for(var re=0,ce=0,fe=new Array,Ee=1;Ee<=16;Ee++){for(var Ce=1;Ce<=P[Ee];Ce++)fe[H[ce]]=[],fe[H[ce]][0]=re,fe[H[ce]][1]=Ee,ce++,re++;re*=2}return fe}function Q(P){for(var H=P[0],re=P[1]-1;re>=0;)H&1<<re&&(k|=1<<b),re--,--b<0&&(k==255?($(255),$(0)):$(k),b=7,k=0)}function $(P){j.push(P)}function z(P){$(P>>8&255),$(255&P)}function ae(P,H,re,ce,fe){for(var Ee,Ce=fe[0],te=fe[240],Ne=function(De,Be){var be,Ie,We,He,nt,dt,ft,Nt,it,St,Ze=0;for(it=0;it<8;++it){be=De[Ze],Ie=De[Ze+1],We=De[Ze+2],He=De[Ze+3],nt=De[Ze+4],dt=De[Ze+5],ft=De[Ze+6];var Zt=be+(Nt=De[Ze+7]),Mt=be-Nt,fr=Ie+ft,Rt=Ie-ft,sn=We+dt,li=We-dt,en=He+nt,aa=He-nt,On=Zt+en,ci=Zt-en,Sn=fr+sn,Yt=fr-sn;De[Ze]=On+Sn,De[Ze+4]=On-Sn;var wt=.707106781*(Yt+ci);De[Ze+2]=ci+wt,De[Ze+6]=ci-wt;var zt=.382683433*((On=aa+li)-(Yt=Rt+Mt)),hr=.5411961*On+zt,an=1.306562965*Yt+zt,rr=.707106781*(Sn=li+Rt),Dr=Mt+rr,ht=Mt-rr;De[Ze+5]=ht+hr,De[Ze+3]=ht-hr,De[Ze+1]=Dr+an,De[Ze+7]=Dr-an,Ze+=8}for(Ze=0,it=0;it<8;++it){be=De[Ze],Ie=De[Ze+8],We=De[Ze+16],He=De[Ze+24],nt=De[Ze+32],dt=De[Ze+40],ft=De[Ze+48];var Kn=be+(Nt=De[Ze+56]),ir=be-Nt,En=Ie+ft,Tn=Ie-ft,Cn=We+dt,Jn=We-dt,Ui=He+nt,ki=He-nt,ms=Kn+Ui,gs=Kn-Ui,vs=En+Cn,ys=En-Cn;De[Ze]=ms+vs,De[Ze+32]=ms-vs;var zi=.707106781*(ys+gs);De[Ze+16]=gs+zi,De[Ze+48]=gs-zi;var Fs=.382683433*((ms=ki+Jn)-(ys=Tn+ir)),So=.5411961*ms+Fs,cl=1.306562965*ys+Fs,ul=.707106781*(vs=Jn+Tn),dl=ir+ul,oa=ir-ul;De[Ze+40]=oa+So,De[Ze+24]=oa-So,De[Ze+8]=dl+cl,De[Ze+56]=dl-cl,Ze++}for(it=0;it<64;++it)St=De[it]*Be[it],g[it]=St>0?St+.5|0:St-.5|0;return g}(P,H),ie=0;ie<64;++ie)N[Z[ie]]=Ne[ie];var pe=N[0]-re;re=N[0],pe==0?Q(ce[0]):(Q(ce[w[Ee=32767+pe]]),Q(m[Ee]));for(var he=63;he>0&&N[he]==0;)he--;if(he==0)return Q(Ce),re;for(var je,ue=1;ue<=he;){for(var G=ue;N[ue]==0&&ue<=he;)++ue;var $e=ue-G;if($e>=16){je=$e>>4;for(var Fe=1;Fe<=je;++Fe)Q(te);$e&=15}Ee=32767+N[ue],Q(fe[($e<<4)+w[Ee]]),Q(m[Ee]),ue++}return he!=63&&Q(Ce),re}function Pe(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(H){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var fe=a((re[ce]*H+50)/100);fe=Math.min(Math.max(fe,1),255),l[Z[ce]]=fe}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var te=a((Ee[Ce]*H+50)/100);te=Math.min(Math.max(te,1),255),c[Z[Ce]]=te}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ie=0,pe=0;pe<8;pe++)for(var he=0;he<8;he++)f[ie]=1/(l[Z[ie]]*Ne[pe]*Ne[he]*8),p[ie]=1/(c[Z[ie]]*Ne[pe]*Ne[he]*8),ie++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,H){H&&Pe(H),j=new Array,k=0,b=7,z(65496),z(65504),z(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),z(1),z(1),$(0),$(0),function(){z(65499),z(132),$(0);for(var Ie=0;Ie<64;Ie++)$(l[Ie]);$(1);for(var We=0;We<64;We++)$(c[We])}(),function(Ie,We){z(65472),z(17),$(8),z(We),z(Ie),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(P.width,P.height),function(){z(65476),z(418),$(0);for(var Ie=0;Ie<16;Ie++)$(R[Ie+1]);for(var We=0;We<=11;We++)$(ee[We]);$(16);for(var He=0;He<16;He++)$(le[He+1]);for(var nt=0;nt<=161;nt++)$(O[nt]);$(1);for(var dt=0;dt<16;dt++)$(U[dt+1]);for(var ft=0;ft<=11;ft++)$(Y[ft]);$(17);for(var Nt=0;Nt<16;Nt++)$(J[Nt+1]);for(var it=0;it<=161;it++)$(xe[it])}(),z(65498),z(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var re=0,ce=0,fe=0;k=0,b=7,this.encode.displayName="_encode_";for(var Ee,Ce,te,Ne,ie,pe,he,je,ue,G=P.data,$e=P.width,Fe=P.height,De=4*$e,Be=0;Be<Fe;){for(Ee=0;Ee<De;){for(ie=De*Be+Ee,he=-1,je=0,ue=0;ue<64;ue++)pe=ie+(je=ue>>3)*De+(he=4*(7&ue)),Be+je>=Fe&&(pe-=De*(Be+1+je-Fe)),Ee+he>=De&&(pe-=Ee+he-De+4),Ce=G[pe++],te=G[pe++],Ne=G[pe++],S[ue]=(oe[Ce]+oe[te+256>>0]+oe[Ne+512>>0]>>16)-128,L[ue]=(oe[Ce+768>>0]+oe[te+1024>>0]+oe[Ne+1280>>0]>>16)-128,M[ue]=(oe[Ce+1280>>0]+oe[te+1536>>0]+oe[Ne+1792>>0]>>16)-128;re=ae(S,f,re,t,r),ce=ae(L,p,ce,n,i),fe=ae(M,p,fe,n,i),Ee+=32}Be+=8}if(b>=0){var be=[];be[1]=b+1,be[0]=(1<<b+1)-1,Q(be)}return z(65497),new Uint8Array(j)},e=e||50,function(){for(var P=String.fromCharCode,H=0;H<256;H++)K[H]=P(H)}(),t=ye(R,ee),n=ye(U,Y),r=ye(le,O),i=ye(J,xe),function(){for(var P=1,H=2,re=1;re<=15;re++){for(var ce=P;ce<H;ce++)w[32767+ce]=re,m[32767+ce]=[],m[32767+ce][1]=re,m[32767+ce][0]=ce;for(var fe=-(H-1);fe<=-P;fe++)w[32767+fe]=re,m[32767+fe]=[],m[32767+fe][1]=re,m[32767+fe][0]=H-1+fe;P<<=1,H<<=1}}(),function(){for(var P=0;P<256;P++)oe[P]=19595*P,oe[P+256>>0]=38470*P,oe[P+512>>0]=7471*P+32768,oe[P+768>>0]=-11059*P,oe[P+1024>>0]=-21709*P,oe[P+1280>>0]=32768*P+8421375,oe[P+1536>>0]=-27439*P,oe[P+1792>>0]=-5329*P}(),Pe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _a(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function X_(e){function t(R){if(!R)throw Error("assert :P")}function n(R,ee,le){for(var O=0;4>O;O++)if(R[ee+O]!=le.charCodeAt(O))return!0;return!1}function r(R,ee,le,O,U){for(var Y=0;Y<U;Y++)R[ee+Y]=le[O+Y]}function i(R,ee,le,O){for(var U=0;U<O;U++)R[ee+U]=le}function s(R){return new Int32Array(R)}function a(R,ee){for(var le=[],O=0;O<R;O++)le.push(new ee);return le}function l(R,ee){var le=[];return function O(U,Y,J){for(var xe=J[Y],ye=0;ye<xe&&(U.push(J.length>Y+1?[]:new ee),!(J.length<Y+1));ye++)O(U[ye],Y+1,J)}(le,0,R),le}var c=function(){var R=this;function ee(h,v){for(var _=1<<v-1>>>0;h&_;)_>>>=1;return _?(h&_-1)+_:h}function le(h,v,_,A,T){t(!(A%_));do h[v+(A-=_)]=T;while(0<A)}function O(h,v,_,A,T){if(t(2328>=T),512>=T)var F=s(512);else if((F=s(T))==null)return 0;return function(B,q,V,ne,we,Me){var Re,ke,Ye=q,Ue=1<<V,ve=s(16),_e=s(16);for(t(we!=0),t(ne!=null),t(B!=null),t(0<V),ke=0;ke<we;++ke){if(15<ne[ke])return 0;++ve[ne[ke]]}if(ve[0]==we)return 0;for(_e[1]=0,Re=1;15>Re;++Re){if(ve[Re]>1<<Re)return 0;_e[Re+1]=_e[Re]+ve[Re]}for(ke=0;ke<we;++ke)Re=ne[ke],0<ne[ke]&&(Me[_e[Re]++]=ke);if(_e[15]==1)return(ne=new U).g=0,ne.value=Me[0],le(B,Ye,1,Ue,ne),Ue;var Ge,Qe=-1,Ve=Ue-1,lt=0,st=1,gt=1,at=1<<V;for(ke=0,Re=1,we=2;Re<=V;++Re,we<<=1){if(st+=gt<<=1,0>(gt-=ve[Re]))return 0;for(;0<ve[Re];--ve[Re])(ne=new U).g=Re,ne.value=Me[ke++],le(B,Ye+lt,we,at,ne),lt=ee(lt,Re)}for(Re=V+1,we=2;15>=Re;++Re,we<<=1){if(st+=gt<<=1,0>(gt-=ve[Re]))return 0;for(;0<ve[Re];--ve[Re]){if(ne=new U,(lt&Ve)!=Qe){for(Ye+=at,Ge=1<<(Qe=Re)-V;15>Qe&&!(0>=(Ge-=ve[Qe]));)++Qe,Ge<<=1;Ue+=at=1<<(Ge=Qe-V),B[q+(Qe=lt&Ve)].g=Ge+V,B[q+Qe].value=Ye-q-Qe}ne.g=Re-V,ne.value=Me[ke++],le(B,Ye+(lt>>V),we,at,ne),lt=ee(lt,Re)}}return st!=2*_e[15]-1?0:Ue}(h,v,_,A,T,F)}function U(){this.value=this.g=0}function Y(){this.value=this.g=0}function J(){this.G=a(5,U),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Rr,Y)}function xe(h,v,_,A){t(h!=null),t(v!=null),t(2147483648>A),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=_,h.Jd=v,h.Yc=_+A,h.Zc=4<=A?_+A-4+1:_,Ee(h)}function ye(h,v){for(var _=0;0<v--;)_|=te(h,128)<<v;return _}function Q(h,v){var _=ye(h,v);return Ce(h)?-_:_}function $(h,v,_,A){var T,F=0;for(t(h!=null),t(v!=null),t(4294967288>A),h.Sb=A,h.Ra=0,h.u=0,h.h=0,4<A&&(A=4),T=0;T<A;++T)F+=v[_+T]<<8*T;h.Ra=F,h.bb=A,h.oa=v,h.pa=_}function z(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Pl-8>>>0,++h.bb,h.u-=8;re(h)&&(h.h=1,h.u=0)}function ae(h,v){if(t(0<=v),!h.h&&v<=Ll){var _=H(h)&xs[v];return h.u+=v,z(h),_}return h.h=1,h.u=0}function Pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(h){return h.Ra>>>(h.u&Pl-1)>>>0}function re(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Pl}function ce(h,v){h.u=v,h.h=re(h)}function fe(h){h.u>=Ao&&(t(h.u>=Ao),z(h))}function Ee(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ce(h){return ye(h,1)}function te(h,v){var _=h.Ca;0>h.b&&Ee(h);var A=h.b,T=_*v>>>8,F=(h.I>>>A>T)+0;for(F?(_-=T,h.I-=T+1<<A>>>0):_=T+1,A=_,T=0;256<=A;)T+=8,A>>=8;return A=7^T+Zr[A],h.b-=A,h.Ca=(_<<A)-1,F}function Ne(h,v,_){h[v+0]=_>>24&255,h[v+1]=_>>16&255,h[v+2]=_>>8&255,h[v+3]=_>>0&255}function ie(h,v){return h[v+0]<<0|h[v+1]<<8}function pe(h,v){return ie(h,v)|h[v+2]<<16}function he(h,v){return ie(h,v)|ie(h,v+2)<<16}function je(h,v){var _=1<<v;return t(h!=null),t(0<v),h.X=s(_),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function ue(h,v){t(h!=null),t(v!=null),t(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function $e(h,v,_,A){t(_!=null),t(A!=null);var T=_[0],F=A[0];return T==0&&(T=(h*F+v/2)/v),F==0&&(F=(v*T+h/2)/h),0>=T||0>=F?0:(_[0]=T,A[0]=F,1)}function Fe(h,v){return h+(1<<v)-1>>>v}function De(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Be(h,v){R[v]=function(_,A,T,F,B,q,V){var ne;for(ne=0;ne<B;++ne){var we=R[h](q[V+ne-1],T,F+ne);q[V+ne]=De(_[A+ne],we)}}}function be(){this.ud=this.hd=this.jd=0}function Ie(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function We(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function He(h,v){return We(h+(h-v+.5>>1))}function nt(h,v,_){return Math.abs(v-_)-Math.abs(h-_)}function dt(h,v,_,A,T,F,B){for(A=F[B-1],_=0;_<T;++_)F[B+_]=A=De(h[v+_],A)}function ft(h,v,_,A,T){var F;for(F=0;F<_;++F){var B=h[v+F],q=B>>8&255,V=16711935&(V=(V=16711935&B)+((q<<16)+q));A[T+F]=(4278255360&B)+V>>>0}}function Nt(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function it(h,v,_,A,T,F){var B;for(B=0;B<A;++B){var q=v[_+B],V=q>>>8,ne=q,we=255&(we=(we=q>>>16)+((h.jd<<24>>24)*(V<<24>>24)>>>5));ne=255&(ne=(ne=ne+((h.hd<<24>>24)*(V<<24>>24)>>>5))+((h.ud<<24>>24)*(we<<24>>24)>>>5)),T[F+B]=(4278255360&q)+(we<<16)+ne}}function St(h,v,_,A,T){R[v]=function(F,B,q,V,ne,we,Me,Re,ke){for(V=Me;V<Re;++V)for(Me=0;Me<ke;++Me)ne[we++]=T(q[A(F[B++])])},R[h]=function(F,B,q,V,ne,we,Me){var Re=8>>F.b,ke=F.Ea,Ye=F.K[0],Ue=F.w;if(8>Re)for(F=(1<<F.b)-1,Ue=(1<<Re)-1;B<q;++B){var ve,_e=0;for(ve=0;ve<ke;++ve)ve&F||(_e=A(V[ne++])),we[Me++]=T(Ye[_e&Ue]),_e>>=Re}else R["VP8LMapColor"+_](V,ne,Ye,Ue,we,Me,B,q,ke)}}function Ze(h,v,_,A,T){for(_=v+_;v<_;){var F=h[v++];A[T++]=F>>16&255,A[T++]=F>>8&255,A[T++]=F>>0&255}}function Zt(h,v,_,A,T){for(_=v+_;v<_;){var F=h[v++];A[T++]=F>>16&255,A[T++]=F>>8&255,A[T++]=F>>0&255,A[T++]=F>>24&255}}function Mt(h,v,_,A,T){for(_=v+_;v<_;){var F=(B=h[v++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;A[T++]=F,A[T++]=B}}function fr(h,v,_,A,T){for(_=v+_;v<_;){var F=(B=h[v++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;A[T++]=F,A[T++]=B}}function Rt(h,v,_,A,T){for(_=v+_;v<_;){var F=h[v++];A[T++]=F>>0&255,A[T++]=F>>8&255,A[T++]=F>>16&255}}function sn(h,v,_,A,T,F){if(F==0)for(_=v+_;v<_;)Ne(A,((F=h[v++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),T+=32;else r(A,T,h,v,_)}function li(h,v){R[v][0]=R[h+"0"],R[v][1]=R[h+"1"],R[v][2]=R[h+"2"],R[v][3]=R[h+"3"],R[v][4]=R[h+"4"],R[v][5]=R[h+"5"],R[v][6]=R[h+"6"],R[v][7]=R[h+"7"],R[v][8]=R[h+"8"],R[v][9]=R[h+"9"],R[v][10]=R[h+"10"],R[v][11]=R[h+"11"],R[v][12]=R[h+"12"],R[v][13]=R[h+"13"],R[v][14]=R[h+"0"],R[v][15]=R[h+"0"]}function en(h){return h==Dl||h==Ol||h==Ml||h==Gf}function aa(){this.eb=[],this.size=this.A=this.fb=0}function On(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ci(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new aa,this.f.kb=new On,this.sd=null}function Sn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function zt(h,v){var _=h.T,A=v.ba.f.RGBA,T=A.eb,F=A.fb+h.ka*A.A,B=Ci[v.ba.S],q=h.y,V=h.O,ne=h.f,we=h.N,Me=h.ea,Re=h.W,ke=v.cc,Ye=v.dc,Ue=v.Mc,ve=v.Nc,_e=h.ka,Ge=h.ka+h.T,Qe=h.U,Ve=Qe+1>>1;for(_e==0?B(q,V,null,null,ne,we,Me,Re,ne,we,Me,Re,T,F,null,null,Qe):(B(v.ec,v.fc,q,V,ke,Ye,Ue,ve,ne,we,Me,Re,T,F-A.A,T,F,Qe),++_);_e+2<Ge;_e+=2)ke=ne,Ye=we,Ue=Me,ve=Re,we+=h.Rc,Re+=h.Rc,F+=2*A.A,B(q,(V+=2*h.fa)-h.fa,q,V,ke,Ye,Ue,ve,ne,we,Me,Re,T,F-A.A,T,F,Qe);return V+=h.fa,h.j+Ge<h.o?(r(v.ec,v.fc,q,V,Qe),r(v.cc,v.dc,ne,we,Ve),r(v.Mc,v.Nc,Me,Re,Ve),_--):1&Ge||B(q,V,null,null,ne,we,Me,Re,ne,we,Me,Re,T,F+A.A,null,null,Qe),_}function hr(h,v,_){var A=h.F,T=[h.J];if(A!=null){var F=h.U,B=v.ba.S,q=B==pd||B==Ml;v=v.ba.f.RGBA;var V=[0],ne=h.ka;V[0]=h.T,h.Kb&&(ne==0?--V[0]:(--ne,T[0]-=h.width),h.j+h.ka+h.T==h.o&&(V[0]=h.o-h.j-ne));var we=v.eb;ne=v.fb+ne*v.A,h=An(A,T[0],h.width,F,V,we,ne+(q?0:3),v.A),t(_==V),h&&en(B)&&Ei(we,ne,q,F,V,v.A)}return 0}function an(h){var v=h.ma,_=v.ba.S,A=11>_,T=_==Ya||_==Do||_==pd||_==Vf||_==12||en(_);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Qc(v.Oa,h,T?11:12))return 0;if(T&&en(_)&&Xe(),h.da)alert("todo:use_scaling");else{if(A){if(v.Ib=wt,h.Kb){if(_=h.U+1>>1,v.memory=s(h.U+2*_),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+_,v.Ib=zt,Xe()}}else alert("todo:EmitYUV");T&&(v.Jb=hr,A&&Te())}if(A&&!Up){for(h=0;256>h;++h)pa[h]=89858*(h-128)+Vs>>gd,a1[h]=-22014*(h-128)+Vs,s1[h]=-45773*(h-128),i1[h]=113618*(h-128)+Vs>>gd;for(h=ou;h<Jf;++h)v=76283*(h-16)+Vs>>gd,o1[h-ou]=In(v,255),l1[h-ou]=In(v+8>>4,15);Up=1}return 1}function rr(h){var v=h.ma,_=h.U,A=h.T;return t(!(1&h.ka)),0>=_||0>=A?0:(_=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,_),v.Dc+=_,1)}function Dr(h){h.ma.memory=null}function ht(h,v,_,A){return ae(h,8)!=47?0:(v[0]=ae(h,14)+1,_[0]=ae(h,14)+1,A[0]=ae(h,1),ae(h,3)!=0?0:!h.h)}function Kn(h,v){if(4>h)return h+1;var _=h-2>>1;return(2+(1&h)<<_)+ae(v,_)+1}function ir(h,v){return 120<v?v-120:1<=(_=((_=Qg[v-1])>>4)*h+(8-(15&_)))?_:1;var _}function En(h,v,_){var A=H(_),T=h[v+=255&A].g-8;return 0<T&&(ce(_,_.u+8),A=H(_),v+=h[v].value,v+=A&(1<<T)-1),ce(_,_.u+h[v].g),h[v].value}function Tn(h,v,_){return _.g+=h.g,_.value+=h.value<<v>>>0,t(8>=_.g),h.g}function Cn(h,v,_){var A=h.xc;return t((v=A==0?0:h.vc[h.md*(_>>A)+(v>>A)])<h.Wb),h.Ya[v]}function Jn(h,v,_,A){var T=h.ab,F=h.c*v,B=h.C;v=B+v;var q=_,V=A;for(A=h.Ta,_=h.Ua;0<T--;){var ne=h.gc[T],we=B,Me=v,Re=q,ke=V,Ye=(V=A,q=_,ne.Ea);switch(t(we<Me),t(Me<=ne.nc),ne.hc){case 2:hd(Re,ke,(Me-we)*Ye,V,q);break;case 0:var Ue=we,ve=Me,_e=V,Ge=q,Qe=(at=ne).Ea;Ue==0&&(Ws(Re,ke,null,null,1,_e,Ge),dt(Re,ke+1,0,0,Qe-1,_e,Ge+1),ke+=Qe,Ge+=Qe,++Ue);for(var Ve=1<<at.b,lt=Ve-1,st=Fe(Qe,at.b),gt=at.K,at=at.w+(Ue>>at.b)*st;Ue<ve;){var ln=gt,pn=at,Vt=1;for(Va(Re,ke,_e,Ge-Qe,1,_e,Ge);Vt<Qe;){var Ot=(Vt&~lt)+Ve;Ot>Qe&&(Ot=Qe),(0,ca[ln[pn++]>>8&15])(Re,ke+ +Vt,_e,Ge+Vt-Qe,Ot-Vt,_e,Ge+Vt),Vt=Ot}ke+=Qe,Ge+=Qe,++Ue&lt||(at+=st)}Me!=ne.nc&&r(V,q-Ye,V,q+(Me-we-1)*Ye,Ye);break;case 1:for(Ye=Re,ve=ke,Qe=(Re=ne.Ea)-(Ge=Re&~(_e=(ke=1<<ne.b)-1)),Ue=Fe(Re,ne.b),Ve=ne.K,ne=ne.w+(we>>ne.b)*Ue;we<Me;){for(lt=Ve,st=ne,gt=new be,at=ve+Ge,ln=ve+Re;ve<at;)Nt(lt[st++],gt),Lo(gt,Ye,ve,ke,V,q),ve+=ke,q+=ke;ve<ln&&(Nt(lt[st++],gt),Lo(gt,Ye,ve,Qe,V,q),ve+=Qe,q+=Qe),++we&_e||(ne+=Ue)}break;case 3:if(Re==V&&ke==q&&0<ne.b){for(ve=V,Re=Ye=q+(Me-we)*Ye-(Ge=(Me-we)*Fe(ne.Ea,ne.b)),ke=V,_e=q,Ue=[],Ge=(Qe=Ge)-1;0<=Ge;--Ge)Ue[Ge]=ke[_e+Ge];for(Ge=Qe-1;0<=Ge;--Ge)ve[Re+Ge]=Ue[Ge];Gi(ne,we,Me,V,Ye,V,q)}else Gi(ne,we,Me,Re,ke,V,q)}q=A,V=_}V!=_&&r(A,_,q,V,F)}function Ui(h,v){var _=h.V,A=h.Ba+h.c*h.C,T=v-h.C;if(t(v<=h.l.o),t(16>=T),0<T){var F=h.l,B=h.Ta,q=h.Ua,V=F.width;if(Jn(h,T,_,A),T=q=[q],t((_=h.C)<(A=v)),t(F.v<F.va),A>F.o&&(A=F.o),_<F.j){var ne=F.j-_;_=F.j,T[0]+=ne*V}if(_>=A?_=0:(T[0]+=4*F.v,F.ka=_-F.j,F.U=F.va-F.v,F.T=A-_,_=1),_){if(q=q[0],11>(_=h.ca).S){var we=_.f.RGBA,Me=(A=_.S,T=F.U,F=F.T,ne=we.eb,we.A),Re=F;for(we=we.fb+h.Ma*we.A;0<Re--;){var ke=B,Ye=q,Ue=T,ve=ne,_e=we;switch(A){case nu:hi(ke,Ye,Ue,ve,_e);break;case Ya:ei(ke,Ye,Ue,ve,_e);break;case Dl:ei(ke,Ye,Ue,ve,_e),Ei(ve,_e,0,Ue,1,0);break;case Ka:pi(ke,Ye,Ue,ve,_e);break;case Do:sn(ke,Ye,Ue,ve,_e,1);break;case Ol:sn(ke,Ye,Ue,ve,_e,1),Ei(ve,_e,0,Ue,1,0);break;case pd:sn(ke,Ye,Ue,ve,_e,0);break;case Ml:sn(ke,Ye,Ue,ve,_e,0),Ei(ve,_e,1,Ue,1,0);break;case Vf:Ga(ke,Ye,Ue,ve,_e);break;case Gf:Ga(ke,Ye,Ue,ve,_e),vn(ve,_e,Ue,1,0);break;case Op:ua(ke,Ye,Ue,ve,_e);break;default:t(0)}q+=V,we+=Me}h.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=_.height)}}h.C=v,t(h.C<=h.i)}function ki(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var _=h.Ya[v].G,A=h.Ya[v].H;if(0<_[1][A[1]+0].g||0<_[2][A[2]+0].g||0<_[3][A[3]+0].g)return 0}return 1}function ms(h,v,_,A,T,F){if(h.Z!=0){var B=h.qd,q=h.rd;for(t(Xi[h.Z]!=null);v<_;++v)Xi[h.Z](B,q,A,T,A,T,F),B=A,q=T,T+=F;h.qd=B,h.rd=q}}function gs(h,v){var _=h.l.ma,A=_.Z==0||_.Z==1?h.l.j:h.C;if(A=h.C<A?A:h.C,t(v<=h.l.o),v>A){var T=h.l.width,F=_.ca,B=_.tb+T*A,q=h.V,V=h.Ba+h.c*A,ne=h.gc;t(h.ab==1),t(ne[0].hc==3),la(ne[0],A,v,q,V,F,B),ms(_,A,v,F,B,T)}h.C=h.Ma=v}function vs(h,v,_,A,T,F,B){var q=h.$/A,V=h.$%A,ne=h.m,we=h.s,Me=_+h.$,Re=Me;T=_+A*T;var ke=_+A*F,Ye=280+we.ua,Ue=h.Pb?q:16777216,ve=0<we.ua?we.Wa:null,_e=we.wc,Ge=Me<ke?Cn(we,V,q):null;t(h.C<F),t(ke<=T);var Qe=!1;e:for(;;){for(;Qe||Me<ke;){var Ve=0;if(q>=Ue){var lt=Me-_;t((Ue=h).Pb),Ue.wd=Ue.m,Ue.xd=lt,0<Ue.s.ua&&ue(Ue.s.Wa,Ue.s.vb),Ue=q+Fp}if(V&_e||(Ge=Cn(we,V,q)),t(Ge!=null),Ge.Qb&&(v[Me]=Ge.qb,Qe=!0),!Qe)if(fe(ne),Ge.jc){Ve=ne,lt=v;var st=Me,gt=Ge.pd[H(Ve)&Rr-1];t(Ge.jc),256>gt.g?(ce(Ve,Ve.u+gt.g),lt[st]=gt.value,Ve=0):(ce(Ve,Ve.u+gt.g-256),t(256<=gt.value),Ve=gt.value),Ve==0&&(Qe=!0)}else Ve=En(Ge.G[0],Ge.H[0],ne);if(ne.h)break;if(Qe||256>Ve){if(!Qe)if(Ge.nd)v[Me]=(Ge.qb|Ve<<8)>>>0;else{if(fe(ne),Qe=En(Ge.G[1],Ge.H[1],ne),fe(ne),lt=En(Ge.G[2],Ge.H[2],ne),st=En(Ge.G[3],Ge.H[3],ne),ne.h)break;v[Me]=(st<<24|Qe<<16|Ve<<8|lt)>>>0}if(Qe=!1,++Me,++V>=A&&(V=0,++q,B!=null&&q<=F&&!(q%16)&&B(h,q),ve!=null))for(;Re<Me;)Ve=v[Re++],ve.X[(506832829*Ve&4294967295)>>>ve.Mb]=Ve}else if(280>Ve){if(Ve=Kn(Ve-256,ne),lt=En(Ge.G[4],Ge.H[4],ne),fe(ne),lt=ir(A,lt=Kn(lt,ne)),ne.h)break;if(Me-_<lt||T-Me<Ve)break e;for(st=0;st<Ve;++st)v[Me+st]=v[Me+st-lt];for(Me+=Ve,V+=Ve;V>=A;)V-=A,++q,B!=null&&q<=F&&!(q%16)&&B(h,q);if(t(Me<=T),V&_e&&(Ge=Cn(we,V,q)),ve!=null)for(;Re<Me;)Ve=v[Re++],ve.X[(506832829*Ve&4294967295)>>>ve.Mb]=Ve}else{if(!(Ve<Ye))break e;for(Qe=Ve-280,t(ve!=null);Re<Me;)Ve=v[Re++],ve.X[(506832829*Ve&4294967295)>>>ve.Mb]=Ve;Ve=Me,t(!(Qe>>>(lt=ve).Xa)),v[Ve]=lt.X[Qe],Qe=!0}Qe||t(ne.h==re(ne))}if(h.Pb&&ne.h&&Me<T)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&ue(h.s.vb,h.s.Wa);else{if(ne.h)break e;B!=null&&B(h,q>F?F:q),h.a=0,h.$=Me-_}return 1}return h.a=3,0}function ys(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,t(h!=null)}function zi(){var h=new jl;return h==null?null:(h.a=0,h.xb=su,li("Predictor","VP8LPredictors"),li("Predictor","VP8LPredictors_C"),li("PredictorAdd","VP8LPredictorsAdd"),li("PredictorAdd","VP8LPredictorsAdd_C"),hd=ft,Lo=it,hi=Ze,ei=Zt,Ga=Mt,ua=fr,pi=Rt,R.VP8LMapColor32b=Tl,R.VP8LMapColor8b=fi,h)}function Fs(h,v,_,A,T){var F=1,B=[h],q=[v],V=A.m,ne=A.s,we=null,Me=0;e:for(;;){if(_)for(;F&&ae(V,1);){var Re=B,ke=q,Ye=A,Ue=1,ve=Ye.m,_e=Ye.gc[Ye.ab],Ge=ae(ve,2);if(Ye.Oc&1<<Ge)F=0;else{switch(Ye.Oc|=1<<Ge,_e.hc=Ge,_e.Ea=Re[0],_e.nc=ke[0],_e.K=[null],++Ye.ab,t(4>=Ye.ab),Ge){case 0:case 1:_e.b=ae(ve,3)+2,Ue=Fs(Fe(_e.Ea,_e.b),Fe(_e.nc,_e.b),0,Ye,_e.K),_e.K=_e.K[0];break;case 3:var Qe,Ve=ae(ve,8)+1,lt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(Re[0]=Fe(_e.Ea,lt),_e.b=lt,Qe=Ue=Fs(Ve,1,0,Ye,_e.K)){var st,gt=Ve,at=_e,ln=1<<(8>>at.b),pn=s(ln);if(pn==null)Qe=0;else{var Vt=at.K[0],Ot=at.w;for(pn[0]=at.K[0][0],st=1;st<1*gt;++st)pn[st]=De(Vt[Ot+st],pn[st-1]);for(;st<4*ln;++st)pn[st]=0;at.K[0]=null,at.K[0]=pn,Qe=1}}Ue=Qe;break;case 2:break;default:t(0)}F=Ue}}if(B=B[0],q=q[0],F&&ae(V,1)&&!(F=1<=(Me=ae(V,4))&&11>=Me)){A.a=3;break e}var xn;if(xn=F)t:{var bn,It,mr,ni=A,Jt=B,qr=q,mn=Me,tr=_,ri=ni.m,ar=ni.s,qn=[null],Wr=1,Ln=0,Qi=Zg[mn];n:for(;;){if(tr&&ae(ri,1)){var Tr=ae(ri,3)+2,ma=Fe(Jt,Tr),Oo=Fe(qr,Tr),Xa=ma*Oo;if(!Fs(ma,Oo,0,ni,qn))break n;for(qn=qn[0],ar.xc=Tr,bn=0;bn<Xa;++bn){var Qa=qn[bn]>>8&65535;qn[bn]=Qa,Qa>=Wr&&(Wr=Qa+1)}}if(ri.h)break n;for(It=0;5>It;++It){var Pn=Rp[It];!It&&0<mn&&(Pn+=1<<mn),Ln<Pn&&(Ln=Pn)}var yd=a(Wr*Qi,U),qp=Wr,Wp=a(qp,J);if(Wp==null)var Za=null;else t(65536>=qp),Za=Wp;var lu=s(Ln);if(Za==null||lu==null||yd==null){ni.a=1;break n}var wd=yd;for(bn=mr=0;bn<Wr;++bn){var Li=Za[bn],Mo=Li.G,Ul=Li.H,Hp=0,xd=1,Xf=0;for(It=0;5>It;++It){Pn=Rp[It],Mo[It]=wd,Ul[It]=mr,!It&&0<mn&&(Pn+=1<<mn);i:{var zl,Qf=Pn,ql=ni,Wl=lu,Vp=wd,Gp=mr,Hl=0,eo=ql.m,Yp=ae(eo,1);if(i(Wl,0,0,Qf),Yp){var Kp=ae(eo,1)+1,d1=ae(eo,1),Zf=ae(eo,d1==0?1:8);Wl[Zf]=1,Kp==2&&(Wl[Zf=ae(eo,8)]=1);var bd=1}else{var _d=s(19),eh=ae(eo,4)+4;if(19<eh){ql.a=3;var Vl=0;break i}for(zl=0;zl<eh;++zl)_d[zr[zl]]=ae(eo,3);var th=void 0,Ro=void 0,Ut=ql,f1=_d,Sd=Qf,Gl=Wl,Nd=0,to=Ut.m,Jp=8,Pi=a(128,U);r:for(;O(Pi,0,7,f1,19);){if(ae(to,1)){var h1=2+2*ae(to,3);if((th=2+ae(to,h1))>Sd)break r}else th=Sd;for(Ro=0;Ro<Sd&&th--;){fe(to);var cu=Pi[0+(127&H(to))];ce(to,to.u+cu.g);var no=cu.value;if(16>no)Gl[Ro++]=no,no!=0&&(Jp=no);else{var Xp=no==16,nh=no-16,Ti=Xg[nh],ga=ae(to,Mp[nh])+Ti;if(Ro+ga>Sd)break r;for(var rh=Xp?Jp:0;0<ga--;)Gl[Ro++]=rh}}Nd=1;break r}Nd||(Ut.a=3),bd=Nd}(bd=bd&&!eo.h)&&(Hl=O(Vp,Gp,8,Wl,Qf)),bd&&Hl!=0?Vl=Hl:(ql.a=3,Vl=0)}if(Vl==0)break n;if(xd&&br[It]==1&&(xd=wd[mr].g==0),Hp+=wd[mr].g,mr+=Vl,3>=It){var Yl,Kl=lu[0];for(Yl=1;Yl<Pn;++Yl)lu[Yl]>Kl&&(Kl=lu[Yl]);Xf+=Kl}}if(Li.nd=xd,Li.Qb=0,xd&&(Li.qb=(Mo[3][Ul[3]+0].value<<24|Mo[1][Ul[1]+0].value<<16|Mo[2][Ul[2]+0].value)>>>0,Hp==0&&256>Mo[0][Ul[0]+0].value&&(Li.Qb=1,Li.qb+=Mo[0][Ul[0]+0].value<<8)),Li.jc=!Li.Qb&&6>Xf,Li.jc){var uu,js=Li;for(uu=0;uu<Rr;++uu){var va=uu,Ys=js.pd[va],Jl=js.G[0][js.H[0]+va];256<=Jl.value?(Ys.g=Jl.g+256,Ys.value=Jl.value):(Ys.g=0,Ys.value=0,va>>=Tn(Jl,8,Ys),va>>=Tn(js.G[1][js.H[1]+va],16,Ys),va>>=Tn(js.G[2][js.H[2]+va],0,Ys),Tn(js.G[3][js.H[3]+va],24,Ys))}}}ar.vc=qn,ar.Wb=Wr,ar.Ya=Za,ar.yc=yd,xn=1;break t}xn=0}if(!(F=xn)){A.a=3;break e}if(0<Me){if(ne.ua=1<<Me,!je(ne.Wa,Me)){A.a=1,F=0;break e}}else ne.ua=0;var Ks=A,Qp=B,ro=q,jd=Ks.s,kd=jd.xc;if(Ks.c=Qp,Ks.i=ro,jd.md=Fe(Qp,kd),jd.wc=kd==0?-1:(1<<kd)-1,_){A.xb=t1;break e}if((we=s(B*q))==null){A.a=1,F=0;break e}F=(F=vs(A,we,0,B,q,q,null))&&!V.h;break e}return F?(T!=null?T[0]=we:(t(we==null),t(_)),A.$=0,_||ys(ne)):ys(ne),F}function So(h,v){var _=h.c*h.i,A=_+v+16*v;return t(h.c<=v),h.V=s(A),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+_+v,1)}function cl(h,v){var _=h.C,A=v-_,T=h.V,F=h.Ba+h.c*_;for(t(v<=h.l.o);0<A;){var B=16<A?16:A,q=h.l.ma,V=h.l.width,ne=V*B,we=q.ca,Me=q.tb+V*_,Re=h.Ta,ke=h.Ua;Jn(h,B,T,F),sr(Re,ke,we,Me,ne),ms(q,_,_+B,we,Me,V),A-=B,T+=B*h.c,_+=B}t(_==v),h.C=h.Ma=v}function ul(){this.ub=this.yd=this.td=this.Rb=0}function dl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oa(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ku(){this.Yb=function(){var h=[];return function v(_,A,T){for(var F=T[A],B=0;B<F&&(_.push(T.length>A+1?[]:0),!(T.length<A+1));B++)v(_[B],A+1,T)}(h,0,[3,11]),h}()}function fl(){this.jb=s(3),this.Wc=l([4,8],Ku),this.Xc=l([4,17],Ku)}function Of(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hl(){this.ld=this.La=this.dd=this.tc=0}function Ju(){this.Na=this.la=0}function Xu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qu(){this.uc=this.M=this.Nb=0,this.wa=Array(new hl),this.Y=0,this.ya=Array(new pl),this.aa=0,this.l=new ml}function Zu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Mf(){this.cb=this.a=0,this.sc="",this.m=new Pe,this.Od=new ul,this.Kc=new dl,this.ed=new Of,this.Qa=new oa,this.Ic=this.$c=this.Aa=0,this.D=new Qu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Pe),this.ia=0,this.pb=a(4,Xu),this.Pa=new fl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zu),this.Hd=0,this.rb=Array(new Ju),this.sb=0,this.wa=Array(new hl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pl),this.L=this.aa=0,this.gd=l([4,2],hl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ml(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rf(){var h=new Mf;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,fa||(fa=gl)),h}function Xn(h,v,_){return h.a==0&&(h.a=v,h.sc=_,h.cb=0),0}function Bc(h,v,_){return 3<=_&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function Uc(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return Xn(h,2,"null VP8Io passed to VP8GetHeaders()");var _=v.data,A=v.w,T=v.ha;if(4>T)return Xn(h,7,"Truncated header.");var F=_[A+0]|_[A+1]<<8|_[A+2]<<16,B=h.Od;if(B.Rb=!(1&F),B.td=F>>1&7,B.yd=F>>4&1,B.ub=F>>5,3<B.td)return Xn(h,3,"Incorrect keyframe parameters.");if(!B.yd)return Xn(h,4,"Frame not displayable.");A+=3,T-=3;var q=h.Kc;if(B.Rb){if(7>T)return Xn(h,7,"cannot parse picture header");if(!Bc(_,A,T))return Xn(h,3,"Bad code word");q.c=16383&(_[A+4]<<8|_[A+3]),q.Td=_[A+4]>>6,q.i=16383&(_[A+6]<<8|_[A+5]),q.Ud=_[A+6]>>6,A+=7,T-=7,h.za=q.c+15>>4,h.Ub=q.i+15>>4,v.width=q.c,v.height=q.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((F=h.Pa).jb,0,255,F.jb.length),t((F=h.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(B.ub>T)return Xn(h,7,"bad partition length");xe(F=h.m,_,A,B.ub),A+=B.ub,T-=B.ub,B.Rb&&(q.Ld=Ce(F),q.Kd=Ce(F)),q=h.Qa;var V,ne=h.Pa;if(t(F!=null),t(q!=null),q.Cb=Ce(F),q.Cb){if(q.Bb=Ce(F),Ce(F)){for(q.Fb=Ce(F),V=0;4>V;++V)q.Zb[V]=Ce(F)?Q(F,7):0;for(V=0;4>V;++V)q.Lb[V]=Ce(F)?Q(F,6):0}if(q.Bb)for(V=0;3>V;++V)ne.jb[V]=Ce(F)?ye(F,8):255}else q.Bb=0;if(F.Ka)return Xn(h,3,"cannot parse segment header");if((q=h.ed).zd=Ce(F),q.Tb=ye(F,6),q.wb=ye(F,3),q.Pc=Ce(F),q.Pc&&Ce(F)){for(ne=0;4>ne;++ne)Ce(F)&&(q.vd[ne]=Q(F,6));for(ne=0;4>ne;++ne)Ce(F)&&(q.od[ne]=Q(F,6))}if(h.L=q.Tb==0?0:q.zd?1:2,F.Ka)return Xn(h,3,"cannot parse filter header");var we=T;if(T=V=A,A=V+we,q=we,h.Xb=(1<<ye(h.m,2))-1,we<3*(ne=h.Xb))_=7;else{for(V+=3*ne,q-=3*ne,we=0;we<ne;++we){var Me=_[T+0]|_[T+1]<<8|_[T+2]<<16;Me>q&&(Me=q),xe(h.Jc[+we],_,V,Me),V+=Me,q-=Me,T+=3}xe(h.Jc[+ne],_,V,q),_=V<A?0:5}if(_!=0)return Xn(h,_,"cannot parse partitions");for(_=ye(V=h.m,7),T=Ce(V)?Q(V,4):0,A=Ce(V)?Q(V,4):0,q=Ce(V)?Q(V,4):0,ne=Ce(V)?Q(V,4):0,V=Ce(V)?Q(V,4):0,we=h.Qa,Me=0;4>Me;++Me){if(we.Cb){var Re=we.Zb[Me];we.Fb||(Re+=_)}else{if(0<Me){h.pb[Me]=h.pb[0];continue}Re=_}var ke=h.pb[Me];ke.Sc[0]=Yf[In(Re+T,127)],ke.Sc[1]=ru[In(Re+0,127)],ke.Eb[0]=2*Yf[In(Re+A,127)],ke.Eb[1]=101581*ru[In(Re+q,127)]>>16,8>ke.Eb[1]&&(ke.Eb[1]=8),ke.Qc[0]=Yf[In(Re+ne,117)],ke.Qc[1]=ru[In(Re+V,127)],ke.lc=Re+V}if(!B.Rb)return Xn(h,4,"Not a key frame.");for(Ce(F),B=h.Pa,_=0;4>_;++_){for(T=0;8>T;++T)for(A=0;3>A;++A)for(q=0;11>q;++q)ne=te(F,$l[_][T][A][q])?ye(F,8):iu[_][T][A][q],B.Wc[_][T].Yb[A][q]=ne;for(T=0;17>T;++T)B.Xc[_][T]=B.Wc[_][e1[T]]}return h.kc=Ce(F),h.kc&&(h.Bd=ye(F,8)),h.cb=1}function gl(h,v,_,A,T,F,B){var q=v[T].Yb[_];for(_=0;16>T;++T){if(!te(h,q[_+0]))return T;for(;!te(h,q[_+1]);)if(q=v[++T].Yb[0],_=0,T==16)return 16;var V=v[T+1].Yb;if(te(h,q[_+2])){var ne=h,we=0;if(te(ne,(Re=q)[(Me=_)+3]))if(te(ne,Re[Me+6])){for(q=0,Me=2*(we=te(ne,Re[Me+8]))+(Re=te(ne,Re[Me+9+we])),we=0,Re=Kf[Me];Re[q];++q)we+=we+te(ne,Re[q]);we+=3+(8<<Me)}else te(ne,Re[Me+7])?(we=7+2*te(ne,165),we+=te(ne,145)):we=5+te(ne,159);else we=te(ne,Re[Me+4])?3+te(ne,Re[Me+5]):2;q=V[2]}else we=1,q=V[1];V=B+Rl[T],0>(ne=h).b&&Ee(ne);var Me,Re=ne.b,ke=(Me=ne.Ca>>1)-(ne.I>>Re)>>31;--ne.b,ne.Ca+=ke,ne.Ca|=1,ne.I-=(Me+1&ke)<<Re,F[V]=((we^ke)-ke)*A[(0<T)+0]}return 16}function zc(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function ed(h,v){if(h==null)return 0;if(v==null)return Xn(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Uc(h,v))return 0;if(t(h.cb),v.ac==null||v.ac(v)){v.ob&&(h.L=0);var _=vd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=v.v-_>>4,h.zb=v.j-_>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+_>>4,h.Hb=v.va+15+_>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var A=h.ed;for(_=0;4>_;++_){var T;if(h.Qa.Cb){var F=h.Qa.Lb[_];h.Qa.Fb||(F+=A.Tb)}else F=A.Tb;for(T=0;1>=T;++T){var B=h.gd[_][T],q=F;if(A.Pc&&(q+=A.vd[0],T&&(q+=A.od[0])),0<(q=0>q?0:63<q?63:q)){var V=q;0<A.wb&&(V=4<A.wb?V>>2:V>>1)>9-A.wb&&(V=9-A.wb),1>V&&(V=1),B.dd=V,B.tc=2*q+V,B.ld=40<=q?2:15<=q?1:0}else B.tc=0;B.La=T}}}_=0}else Xn(h,6,"Frame setup failed"),_=h.a;if(_=_==0){if(_){h.$c=0,0<h.Aa||(h.Ic=u1);e:{_=h.Ic,A=4*(V=h.za);var ne=32*V,we=V+1,Me=0<h.L?V*(0<h.Aa?2:1):0,Re=(h.Aa==2?2:1)*V;if((B=A+832+(T=3*(16*_+vd[h.L])/2*ne)+(F=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=B)_=0;else{if(B>h.Vb){if(h.Vb=0,h.Ec=s(B),h.Fc=0,h.Ec==null){_=Xn(h,1,"no memory during frame initialization.");break e}h.Vb=B}B=h.Ec,q=h.Fc,h.Ac=B,h.Bc=q,q+=A,h.Gd=a(ne,Zu),h.Hd=0,h.rb=a(we+1,Ju),h.sb=1,h.wa=Me?a(Me,hl):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=V),t(!0),h.oc=B,h.pc=q,q+=832,h.ya=a(Re,pl),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=V),h.R=16*V,h.B=8*V,V=(ne=vd[h.L])*h.R,ne=ne/2*h.B,h.sa=B,h.ta=q+V,h.qa=h.sa,h.ra=h.ta+16*_*h.R+ne,h.Ha=h.qa,h.Ia=h.ra+8*_*h.B+ne,h.$c=0,q+=T,h.mb=F?B:null,h.nb=F?q:null,t(q+F<=h.Fc+h.Vb),zc(h),i(h.Ac,h.Bc,0,A),_=1}}if(_){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!eu){for(_=-255;255>=_;++_)xr[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Ki[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)Ji[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)da[255+_]=0>_?0:255<_?255:_;eu=1}Se=Hc,qe=Wc,ut=td,xt=nd,Ft=yl,Oe=qc,Rn=_l,hn=qa,Po=dd,To=Sl,Pr=ud,bs=Co,Io=Or,_s=fd,Hs=pr,Ss=qi,tn=Qr,Yi=cd,Ns[0]=Us,Ns[1]=rd,Ns[2]=Bf,Ns[3]=Uf,Ns[4]=ad,Ns[5]=xl,Ns[6]=wl,Ns[7]=Gc,Ns[8]=qf,Ns[9]=zf,Ja[0]=Vc,Ja[1]=Ff,Ja[2]=Bs,Ja[3]=jo,Ja[4]=Ur,Ja[5]=$f,Ja[6]=sd,ha[0]=za,ha[1]=id,ha[2]=Wf,ha[3]=gn,ha[4]=Eo,ha[5]=Hf,ha[6]=Yc,_=1}else _=0}_&&(_=function(ke,Ye){for(ke.M=0;ke.M<ke.Va;++ke.M){var Ue,ve=ke.Jc[ke.M&ke.Xb],_e=ke.m,Ge=ke;for(Ue=0;Ue<Ge.za;++Ue){var Qe=_e,Ve=Ge,lt=Ve.Ac,st=Ve.Bc+4*Ue,gt=Ve.zc,at=Ve.ya[Ve.aa+Ue];if(Ve.Qa.Bb?at.$b=te(Qe,Ve.Pa.jb[0])?2+te(Qe,Ve.Pa.jb[2]):te(Qe,Ve.Pa.jb[1]):at.$b=0,Ve.kc&&(at.Ad=te(Qe,Ve.Bd)),at.Za=!te(Qe,145)+0,at.Za){var ln=at.Ob,pn=0;for(Ve=0;4>Ve;++Ve){var Vt,Ot=gt[0+Ve];for(Vt=0;4>Vt;++Vt){Ot=md[lt[st+Vt]][Ot];for(var xn=Fl[te(Qe,Ot[0])];0<xn;)xn=Fl[2*xn+te(Qe,Ot[xn])];Ot=-xn,lt[st+Vt]=Ot}r(ln,pn,lt,st,4),pn+=4,gt[0+Ve]=Ot}}else Ot=te(Qe,156)?te(Qe,128)?1:3:te(Qe,163)?2:0,at.Ob[0]=Ot,i(lt,st,Ot,4),i(gt,0,Ot,4);at.Dd=te(Qe,142)?te(Qe,114)?te(Qe,183)?1:3:2:0}if(Ge.m.Ka)return Xn(ke,7,"Premature end-of-partition0 encountered.");for(;ke.ja<ke.za;++ke.ja){if(Ge=ve,Qe=(_e=ke).rb[_e.sb-1],lt=_e.rb[_e.sb+_e.ja],Ue=_e.ya[_e.aa+_e.ja],st=_e.kc?Ue.Ad:0)Qe.la=lt.la=0,Ue.Za||(Qe.Na=lt.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var bn,It;if(Qe=lt,lt=Ge,st=_e.Pa.Xc,gt=_e.ya[_e.aa+_e.ja],at=_e.pb[gt.$b],Ve=gt.ad,ln=0,pn=_e.rb[_e.sb-1],Ot=Vt=0,i(Ve,ln,0,384),gt.Za)var mr=0,ni=st[3];else{xn=s(16);var Jt=Qe.Na+pn.Na;if(Jt=fa(lt,st[1],Jt,at.Eb,0,xn,0),Qe.Na=pn.Na=(0<Jt)+0,1<Jt)Se(xn,0,Ve,ln);else{var qr=xn[0]+3>>3;for(xn=0;256>xn;xn+=16)Ve[ln+xn]=qr}mr=1,ni=st[0]}var mn=15&Qe.la,tr=15&pn.la;for(xn=0;4>xn;++xn){var ri=1&tr;for(qr=It=0;4>qr;++qr)mn=mn>>1|(ri=(Jt=fa(lt,ni,Jt=ri+(1&mn),at.Sc,mr,Ve,ln))>mr)<<7,It=It<<2|(3<Jt?3:1<Jt?2:Ve[ln+0]!=0),ln+=16;mn>>=4,tr=tr>>1|ri<<7,Vt=(Vt<<8|It)>>>0}for(ni=mn,mr=tr>>4,bn=0;4>bn;bn+=2){for(It=0,mn=Qe.la>>4+bn,tr=pn.la>>4+bn,xn=0;2>xn;++xn){for(ri=1&tr,qr=0;2>qr;++qr)Jt=ri+(1&mn),mn=mn>>1|(ri=0<(Jt=fa(lt,st[2],Jt,at.Qc,0,Ve,ln)))<<3,It=It<<2|(3<Jt?3:1<Jt?2:Ve[ln+0]!=0),ln+=16;mn>>=2,tr=tr>>1|ri<<5}Ot|=It<<4*bn,ni|=mn<<4<<bn,mr|=(240&tr)<<bn}Qe.la=ni,pn.la=mr,gt.Hc=Vt,gt.Gc=Ot,gt.ia=43690&Ot?0:at.ia,st=!(Vt|Ot)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[Ue.$b][Ue.Za],_e.wa[_e.Y+_e.ja].La|=!st),Ge.Ka)return Xn(ke,7,"Premature end-of-file encountered.")}if(zc(ke),_e=Ye,Ge=1,Ue=(ve=ke).D,Qe=0<ve.L&&ve.M>=ve.zb&&ve.M<=ve.Va,ve.Aa==0)e:{if(Ue.M=ve.M,Ue.uc=Qe,El(ve,Ue),Ge=1,Ue=(It=ve.D).Nb,Qe=(Ot=vd[ve.L])*ve.R,lt=Ot/2*ve.B,xn=16*Ue*ve.R,qr=8*Ue*ve.B,st=ve.sa,gt=ve.ta-Qe+xn,at=ve.qa,Ve=ve.ra-lt+qr,ln=ve.Ha,pn=ve.Ia-lt+qr,tr=(mn=It.M)==0,Vt=mn>=ve.Va-1,ve.Aa==2&&El(ve,It),It.uc)for(ri=(Jt=ve).D.M,t(Jt.D.uc),It=Jt.yb;It<Jt.Hb;++It){mr=It,ni=ri;var ar=(qn=(Pn=Jt).D).Nb;bn=Pn.R;var qn=qn.wa[qn.Y+mr],Wr=Pn.sa,Ln=Pn.ta+16*ar*bn+16*mr,Qi=qn.dd,Tr=qn.tc;if(Tr!=0)if(t(3<=Tr),Pn.L==1)0<mr&&Ss(Wr,Ln,bn,Tr+4),qn.La&&Yi(Wr,Ln,bn,Tr),0<ni&&Hs(Wr,Ln,bn,Tr+4),qn.La&&tn(Wr,Ln,bn,Tr);else{var ma=Pn.B,Oo=Pn.qa,Xa=Pn.ra+8*ar*ma+8*mr,Qa=Pn.Ha,Pn=Pn.Ia+8*ar*ma+8*mr;ar=qn.ld,0<mr&&(hn(Wr,Ln,bn,Tr+4,Qi,ar),To(Oo,Xa,Qa,Pn,ma,Tr+4,Qi,ar)),qn.La&&(bs(Wr,Ln,bn,Tr,Qi,ar),_s(Oo,Xa,Qa,Pn,ma,Tr,Qi,ar)),0<ni&&(Rn(Wr,Ln,bn,Tr+4,Qi,ar),Po(Oo,Xa,Qa,Pn,ma,Tr+4,Qi,ar)),qn.La&&(Pr(Wr,Ln,bn,Tr,Qi,ar),Io(Oo,Xa,Qa,Pn,ma,Tr,Qi,ar))}}if(ve.ia&&alert("todo:DitherRow"),_e.put!=null){if(It=16*mn,mn=16*(mn+1),tr?(_e.y=ve.sa,_e.O=ve.ta+xn,_e.f=ve.qa,_e.N=ve.ra+qr,_e.ea=ve.Ha,_e.W=ve.Ia+qr):(It-=Ot,_e.y=st,_e.O=gt,_e.f=at,_e.N=Ve,_e.ea=ln,_e.W=pn),Vt||(mn-=Ot),mn>_e.o&&(mn=_e.o),_e.F=null,_e.J=null,ve.Fa!=null&&0<ve.Fa.length&&It<mn&&(_e.J=Xc(ve,_e,It,mn-It),_e.F=ve.mb,_e.F==null&&_e.F.length==0)){Ge=Xn(ve,3,"Could not decode alpha data.");break e}It<_e.j&&(Ot=_e.j-It,It=_e.j,t(!(1&Ot)),_e.O+=ve.R*Ot,_e.N+=ve.B*(Ot>>1),_e.W+=ve.B*(Ot>>1),_e.F!=null&&(_e.J+=_e.width*Ot)),It<mn&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=It-_e.j,_e.U=_e.va-_e.v,_e.T=mn-It,Ge=_e.put(_e))}Ue+1!=ve.Ic||Vt||(r(ve.sa,ve.ta-Qe,st,gt+16*ve.R,Qe),r(ve.qa,ve.ra-lt,at,Ve+8*ve.B,lt),r(ve.Ha,ve.Ia-lt,ln,pn+8*ve.B,lt))}if(!Ge)return Xn(ke,6,"Output aborted.")}return 1}(h,v)),v.bc!=null&&v.bc(v),_&=1}return _?(h.cb=0,_):0}function ui(h,v,_,A,T){T=h[v+_+32*A]+(T>>3),h[v+_+32*A]=-256&T?0>T?0:255:T}function No(h,v,_,A,T,F){ui(h,v,0,_,A+T),ui(h,v,1,_,A+F),ui(h,v,2,_,A-F),ui(h,v,3,_,A-T)}function di(h){return(20091*h>>16)+h}function vl(h,v,_,A){var T,F=0,B=s(16);for(T=0;4>T;++T){var q=h[v+0]+h[v+8],V=h[v+0]-h[v+8],ne=(35468*h[v+4]>>16)-di(h[v+12]),we=di(h[v+4])+(35468*h[v+12]>>16);B[F+0]=q+we,B[F+1]=V+ne,B[F+2]=V-ne,B[F+3]=q-we,F+=4,v++}for(T=F=0;4>T;++T)q=(h=B[F+0]+4)+B[F+8],V=h-B[F+8],ne=(35468*B[F+4]>>16)-di(B[F+12]),ui(_,A,0,0,q+(we=di(B[F+4])+(35468*B[F+12]>>16))),ui(_,A,1,0,V+ne),ui(_,A,2,0,V-ne),ui(_,A,3,0,q-we),F++,A+=32}function qc(h,v,_,A){var T=h[v+0]+4,F=35468*h[v+4]>>16,B=di(h[v+4]),q=35468*h[v+1]>>16;No(_,A,0,T+B,h=di(h[v+1]),q),No(_,A,1,T+F,h,q),No(_,A,2,T-F,h,q),No(_,A,3,T-B,h,q)}function Wc(h,v,_,A,T){vl(h,v,_,A),T&&vl(h,v+16,_,A+4)}function td(h,v,_,A){qe(h,v+0,_,A,1),qe(h,v+32,_,A+128,1)}function nd(h,v,_,A){var T;for(h=h[v+0]+4,T=0;4>T;++T)for(v=0;4>v;++v)ui(_,A,v,T,h)}function yl(h,v,_,A){h[v+0]&&xt(h,v+0,_,A),h[v+16]&&xt(h,v+16,_,A+4),h[v+32]&&xt(h,v+32,_,A+128),h[v+48]&&xt(h,v+48,_,A+128+4)}function Hc(h,v,_,A){var T,F=s(16);for(T=0;4>T;++T){var B=h[v+0+T]+h[v+12+T],q=h[v+4+T]+h[v+8+T],V=h[v+4+T]-h[v+8+T],ne=h[v+0+T]-h[v+12+T];F[0+T]=B+q,F[8+T]=B-q,F[4+T]=ne+V,F[12+T]=ne-V}for(T=0;4>T;++T)B=(h=F[0+4*T]+3)+F[3+4*T],q=F[1+4*T]+F[2+4*T],V=F[1+4*T]-F[2+4*T],ne=h-F[3+4*T],_[A+0]=B+q>>3,_[A+16]=ne+V>>3,_[A+32]=B-q>>3,_[A+48]=ne-V>>3,A+=64}function $s(h,v,_){var A,T=v-32,F=mi,B=255-h[T-1];for(A=0;A<_;++A){var q,V=F,ne=B+h[v-1];for(q=0;q<_;++q)h[v+q]=V[ne+h[T+q]];v+=32}}function rd(h,v){$s(h,v,4)}function id(h,v){$s(h,v,8)}function Ff(h,v){$s(h,v,16)}function Bs(h,v){var _;for(_=0;16>_;++_)r(h,v+32*_,h,v-32,16)}function jo(h,v){var _;for(_=16;0<_;--_)i(h,v,h[v-1],16),v+=32}function ko(h,v,_){var A;for(A=0;16>A;++A)i(v,_+32*A,h,16)}function Vc(h,v){var _,A=16;for(_=0;16>_;++_)A+=h[v-1+32*_]+h[v+_-32];ko(A>>5,h,v)}function Ur(h,v){var _,A=8;for(_=0;16>_;++_)A+=h[v-1+32*_];ko(A>>4,h,v)}function $f(h,v){var _,A=8;for(_=0;16>_;++_)A+=h[v+_-32];ko(A>>4,h,v)}function sd(h,v){ko(128,h,v)}function Lt(h,v,_){return h+2*v+_+2>>2}function Bf(h,v){var _,A=v-32;for(A=new Uint8Array([Lt(h[A-1],h[A+0],h[A+1]),Lt(h[A+0],h[A+1],h[A+2]),Lt(h[A+1],h[A+2],h[A+3]),Lt(h[A+2],h[A+3],h[A+4])]),_=0;4>_;++_)r(h,v+32*_,A,0,A.length)}function Uf(h,v){var _=h[v-1],A=h[v-1+32],T=h[v-1+64],F=h[v-1+96];Ne(h,v+0,16843009*Lt(h[v-1-32],_,A)),Ne(h,v+32,16843009*Lt(_,A,T)),Ne(h,v+64,16843009*Lt(A,T,F)),Ne(h,v+96,16843009*Lt(T,F,F))}function Us(h,v){var _,A=4;for(_=0;4>_;++_)A+=h[v+_-32]+h[v-1+32*_];for(A>>=3,_=0;4>_;++_)i(h,v+32*_,A,4)}function ad(h,v){var _=h[v-1+0],A=h[v-1+32],T=h[v-1+64],F=h[v-1-32],B=h[v+0-32],q=h[v+1-32],V=h[v+2-32],ne=h[v+3-32];h[v+0+96]=Lt(A,T,h[v-1+96]),h[v+1+96]=h[v+0+64]=Lt(_,A,T),h[v+2+96]=h[v+1+64]=h[v+0+32]=Lt(F,_,A),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=Lt(B,F,_),h[v+3+64]=h[v+2+32]=h[v+1+0]=Lt(q,B,F),h[v+3+32]=h[v+2+0]=Lt(V,q,B),h[v+3+0]=Lt(ne,V,q)}function wl(h,v){var _=h[v+1-32],A=h[v+2-32],T=h[v+3-32],F=h[v+4-32],B=h[v+5-32],q=h[v+6-32],V=h[v+7-32];h[v+0+0]=Lt(h[v+0-32],_,A),h[v+1+0]=h[v+0+32]=Lt(_,A,T),h[v+2+0]=h[v+1+32]=h[v+0+64]=Lt(A,T,F),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=Lt(T,F,B),h[v+3+32]=h[v+2+64]=h[v+1+96]=Lt(F,B,q),h[v+3+64]=h[v+2+96]=Lt(B,q,V),h[v+3+96]=Lt(q,V,V)}function xl(h,v){var _=h[v-1+0],A=h[v-1+32],T=h[v-1+64],F=h[v-1-32],B=h[v+0-32],q=h[v+1-32],V=h[v+2-32],ne=h[v+3-32];h[v+0+0]=h[v+1+64]=F+B+1>>1,h[v+1+0]=h[v+2+64]=B+q+1>>1,h[v+2+0]=h[v+3+64]=q+V+1>>1,h[v+3+0]=V+ne+1>>1,h[v+0+96]=Lt(T,A,_),h[v+0+64]=Lt(A,_,F),h[v+0+32]=h[v+1+96]=Lt(_,F,B),h[v+1+32]=h[v+2+96]=Lt(F,B,q),h[v+2+32]=h[v+3+96]=Lt(B,q,V),h[v+3+32]=Lt(q,V,ne)}function Gc(h,v){var _=h[v+0-32],A=h[v+1-32],T=h[v+2-32],F=h[v+3-32],B=h[v+4-32],q=h[v+5-32],V=h[v+6-32],ne=h[v+7-32];h[v+0+0]=_+A+1>>1,h[v+1+0]=h[v+0+64]=A+T+1>>1,h[v+2+0]=h[v+1+64]=T+F+1>>1,h[v+3+0]=h[v+2+64]=F+B+1>>1,h[v+0+32]=Lt(_,A,T),h[v+1+32]=h[v+0+96]=Lt(A,T,F),h[v+2+32]=h[v+1+96]=Lt(T,F,B),h[v+3+32]=h[v+2+96]=Lt(F,B,q),h[v+3+64]=Lt(B,q,V),h[v+3+96]=Lt(q,V,ne)}function zf(h,v){var _=h[v-1+0],A=h[v-1+32],T=h[v-1+64],F=h[v-1+96];h[v+0+0]=_+A+1>>1,h[v+2+0]=h[v+0+32]=A+T+1>>1,h[v+2+32]=h[v+0+64]=T+F+1>>1,h[v+1+0]=Lt(_,A,T),h[v+3+0]=h[v+1+32]=Lt(A,T,F),h[v+3+32]=h[v+1+64]=Lt(T,F,F),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=F}function qf(h,v){var _=h[v-1+0],A=h[v-1+32],T=h[v-1+64],F=h[v-1+96],B=h[v-1-32],q=h[v+0-32],V=h[v+1-32],ne=h[v+2-32];h[v+0+0]=h[v+2+32]=_+B+1>>1,h[v+0+32]=h[v+2+64]=A+_+1>>1,h[v+0+64]=h[v+2+96]=T+A+1>>1,h[v+0+96]=F+T+1>>1,h[v+3+0]=Lt(q,V,ne),h[v+2+0]=Lt(B,q,V),h[v+1+0]=h[v+3+32]=Lt(_,B,q),h[v+1+32]=h[v+3+64]=Lt(A,_,B),h[v+1+64]=h[v+3+96]=Lt(T,A,_),h[v+1+96]=Lt(F,T,A)}function Wf(h,v){var _;for(_=0;8>_;++_)r(h,v+32*_,h,v-32,8)}function gn(h,v){var _;for(_=0;8>_;++_)i(h,v,h[v-1],8),v+=32}function on(h,v,_){var A;for(A=0;8>A;++A)i(v,_+32*A,h,8)}function za(h,v){var _,A=8;for(_=0;8>_;++_)A+=h[v+_-32]+h[v-1+32*_];on(A>>4,h,v)}function Hf(h,v){var _,A=4;for(_=0;8>_;++_)A+=h[v+_-32];on(A>>3,h,v)}function Eo(h,v){var _,A=4;for(_=0;8>_;++_)A+=h[v-1+32*_];on(A>>3,h,v)}function Yc(h,v){on(128,h,v)}function bl(h,v,_){var A=h[v-_],T=h[v+0],F=3*(T-A)+Il[1020+h[v-2*_]-h[v+_]],B=tu[112+(F+4>>3)];h[v-_]=mi[255+A+tu[112+(F+3>>3)]],h[v+0]=mi[255+T-B]}function od(h,v,_,A){var T=h[v+0],F=h[v+_];return ti[255+h[v-2*_]-h[v-_]]>A||ti[255+F-T]>A}function Kc(h,v,_,A){return 4*ti[255+h[v-_]-h[v+0]]+ti[255+h[v-2*_]-h[v+_]]<=A}function ld(h,v,_,A,T){var F=h[v-3*_],B=h[v-2*_],q=h[v-_],V=h[v+0],ne=h[v+_],we=h[v+2*_],Me=h[v+3*_];return 4*ti[255+q-V]+ti[255+B-ne]>A?0:ti[255+h[v-4*_]-F]<=T&&ti[255+F-B]<=T&&ti[255+B-q]<=T&&ti[255+Me-we]<=T&&ti[255+we-ne]<=T&&ti[255+ne-V]<=T}function pr(h,v,_,A){var T=2*A+1;for(A=0;16>A;++A)Kc(h,v+A,_,T)&&bl(h,v+A,_)}function qi(h,v,_,A){var T=2*A+1;for(A=0;16>A;++A)Kc(h,v+A*_,1,T)&&bl(h,v+A*_,1)}function Qr(h,v,_,A){var T;for(T=3;0<T;--T)pr(h,v+=4*_,_,A)}function cd(h,v,_,A){var T;for(T=3;0<T;--T)qi(h,v+=4,_,A)}function zs(h,v,_,A,T,F,B,q){for(F=2*F+1;0<T--;){if(ld(h,v,_,F,B))if(od(h,v,_,q))bl(h,v,_);else{var V=h,ne=v,we=_,Me=V[ne-2*we],Re=V[ne-we],ke=V[ne+0],Ye=V[ne+we],Ue=V[ne+2*we],ve=27*(Ge=Il[1020+3*(ke-Re)+Il[1020+Me-Ye]])+63>>7,_e=18*Ge+63>>7,Ge=9*Ge+63>>7;V[ne-3*we]=mi[255+V[ne-3*we]+Ge],V[ne-2*we]=mi[255+Me+_e],V[ne-we]=mi[255+Re+ve],V[ne+0]=mi[255+ke-ve],V[ne+we]=mi[255+Ye-_e],V[ne+2*we]=mi[255+Ue-Ge]}v+=A}}function Qn(h,v,_,A,T,F,B,q){for(F=2*F+1;0<T--;){if(ld(h,v,_,F,B))if(od(h,v,_,q))bl(h,v,_);else{var V=h,ne=v,we=_,Me=V[ne-we],Re=V[ne+0],ke=V[ne+we],Ye=tu[112+((Ue=3*(Re-Me))+4>>3)],Ue=tu[112+(Ue+3>>3)],ve=Ye+1>>1;V[ne-2*we]=mi[255+V[ne-2*we]+ve],V[ne-we]=mi[255+Me+Ue],V[ne+0]=mi[255+Re-Ye],V[ne+we]=mi[255+ke-ve]}v+=A}}function _l(h,v,_,A,T,F){zs(h,v,_,1,16,A,T,F)}function qa(h,v,_,A,T,F){zs(h,v,1,_,16,A,T,F)}function ud(h,v,_,A,T,F){var B;for(B=3;0<B;--B)Qn(h,v+=4*_,_,1,16,A,T,F)}function Co(h,v,_,A,T,F){var B;for(B=3;0<B;--B)Qn(h,v+=4,1,_,16,A,T,F)}function dd(h,v,_,A,T,F,B,q){zs(h,v,T,1,8,F,B,q),zs(_,A,T,1,8,F,B,q)}function Sl(h,v,_,A,T,F,B,q){zs(h,v,1,T,8,F,B,q),zs(_,A,1,T,8,F,B,q)}function Or(h,v,_,A,T,F,B,q){Qn(h,v+4*T,T,1,8,F,B,q),Qn(_,A+4*T,T,1,8,F,B,q)}function fd(h,v,_,A,T,F,B,q){Qn(h,v+4,1,T,8,F,B,q),Qn(_,A+4,1,T,8,F,B,q)}function Mr(){this.ba=new ci,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ws(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new U}function jl(){this.xb=this.a=0,this.l=new ml,this.ca=new ci,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ws,this.ab=0,this.gc=a(4,Nl),this.Oc=0}function Wa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ml,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fn(h,v,_,A,T,F,B){for(h=h==null?0:h[v+0],v=0;v<B;++v)T[F+v]=h+_[A+v]&255,h=T[F+v]}function Wi(h,v,_,A,T,F,B){var q;if(h==null)fn(null,null,_,A,T,F,B);else for(q=0;q<B;++q)T[F+q]=h[v+q]+_[A+q]&255}function qs(h,v,_,A,T,F,B){if(h==null)fn(null,null,_,A,T,F,B);else{var q,V=h[v+0],ne=V,we=V;for(q=0;q<B;++q)ne=we+(V=h[v+q])-ne,we=_[A+q]+(-256&ne?0>ne?0:255:ne)&255,ne=V,T[F+q]=we}}function Xc(h,v,_,A){var T=v.width,F=v.o;if(t(h!=null&&v!=null),0>_||0>=A||_+A>F)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new Wa,(B=h.ga==null)||(B=v.width*v.o,t(h.Gb.length==0),h.Gb=s(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var q=h.Fa,V=h.P,ne=h.qc,we=h.mb,Me=h.nb,Re=V+1,ke=ne-1,Ye=B.l;if(t(q!=null&&we!=null&&v!=null),Xi[0]=null,Xi[1]=fn,Xi[2]=Wi,Xi[3]=qs,B.ca=we,B.tb=Me,B.c=v.width,B.i=v.height,t(0<B.c&&0<B.i),1>=ne)v=0;else if(B.$a=q[V+0]>>0&3,B.Z=q[V+0]>>2&3,B.Lc=q[V+0]>>4&3,V=q[V+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||V)v=0;else if(Ye.put=rr,Ye.ac=an,Ye.bc=Dr,Ye.ma=B,Ye.width=v.width,Ye.height=v.height,Ye.Da=v.Da,Ye.v=v.v,Ye.va=v.va,Ye.j=v.j,Ye.o=v.o,B.$a)e:{t(B.$a==1),v=zi();t:for(;;){if(v==null){v=0;break e}if(t(B!=null),B.mc=v,v.c=B.c,v.i=B.i,v.l=B.l,v.l.ma=B,v.l.width=B.c,v.l.height=B.i,v.a=0,$(v.m,q,Re,ke),!Fs(B.c,B.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&ki(v.s)?(B.ic=1,q=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(q),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(B.ic=0,v=So(v,B.c)),!v))break t;v=1;break e}B.mc=null,v=0}else v=ke>=B.c*B.i;B=!v}if(B)return null;h.ga.Lc!=1?h.Ga=0:A=F-_}t(h.ga!=null),t(_+A<=F);e:{if(v=(q=h.ga).c,F=q.l.o,q.$a==0){if(Re=h.rc,ke=h.Vc,Ye=h.Fa,V=h.P+1+_*v,ne=h.mb,we=h.nb+_*v,t(V<=h.P+h.qc),q.Z!=0)for(t(Xi[q.Z]!=null),B=0;B<A;++B)Xi[q.Z](Re,ke,Ye,V,ne,we,v),Re=ne,ke=we,we+=v,V+=v;else for(B=0;B<A;++B)r(ne,we,Ye,V,v),Re=ne,ke=we,we+=v,V+=v;h.rc=Re,h.Vc=ke}else{if(t(q.mc!=null),v=_+A,t((B=q.mc)!=null),t(v<=B.i),B.C>=v)v=1;else if(q.ic||Te(),q.ic){q=B.V,Re=B.Ba,ke=B.c;var Ue=B.i,ve=(Ye=1,V=B.$/ke,ne=B.$%ke,we=B.m,Me=B.s,B.$),_e=ke*Ue,Ge=ke*v,Qe=Me.wc,Ve=ve<Ge?Cn(Me,ne,V):null;t(ve<=_e),t(v<=Ue),t(ki(Me));t:for(;;){for(;!we.h&&ve<Ge;){if(ne&Qe||(Ve=Cn(Me,ne,V)),t(Ve!=null),fe(we),256>(Ue=En(Ve.G[0],Ve.H[0],we)))q[Re+ve]=Ue,++ve,++ne>=ke&&(ne=0,++V<=v&&!(V%16)&&gs(B,V));else{if(!(280>Ue)){Ye=0;break t}Ue=Kn(Ue-256,we);var lt,st=En(Ve.G[4],Ve.H[4],we);if(fe(we),!(ve>=(st=ir(ke,st=Kn(st,we)))&&_e-ve>=Ue)){Ye=0;break t}for(lt=0;lt<Ue;++lt)q[Re+ve+lt]=q[Re+ve+lt-st];for(ve+=Ue,ne+=Ue;ne>=ke;)ne-=ke,++V<=v&&!(V%16)&&gs(B,V);ve<Ge&&ne&Qe&&(Ve=Cn(Me,ne,V))}t(we.h==re(we))}gs(B,V>v?v:V);break t}!Ye||we.h&&ve<_e?(Ye=0,B.a=we.h?5:3):B.$=ve,v=Ye}else v=vs(B,B.V,B.Ba,B.c,B.i,v,cl);if(!v){A=0;break e}}_+A>=F&&(h.Cc=1),A=1}if(!A)return null;if(h.Cc&&((A=h.ga)!=null&&(A.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+_*T}function x(h,v,_,A,T,F){for(;0<T--;){var B,q=h,V=v+(_?1:0),ne=h,we=v+(_?0:3);for(B=0;B<A;++B){var Me=ne[we+4*B];Me!=255&&(Me*=32897,q[V+4*B+0]=q[V+4*B+0]*Me>>23,q[V+4*B+1]=q[V+4*B+1]*Me>>23,q[V+4*B+2]=q[V+4*B+2]*Me>>23)}v+=F}}function I(h,v,_,A,T){for(;0<A--;){var F;for(F=0;F<_;++F){var B=h[v+2*F+0],q=15&(ne=h[v+2*F+1]),V=4369*q,ne=(240&ne|ne>>4)*V>>16;h[v+2*F+0]=(240&B|B>>4)*V>>16&240|(15&B|B<<4)*V>>16>>4&15,h[v+2*F+1]=240&ne|q}v+=T}}function se(h,v,_,A,T,F,B,q){var V,ne,we=255;for(ne=0;ne<T;++ne){for(V=0;V<A;++V){var Me=h[v+V];F[B+4*V]=Me,we&=Me}v+=_,B+=q}return we!=255}function me(h,v,_,A,T){var F;for(F=0;F<T;++F)_[A+F]=h[v+F]>>8}function Te(){Ei=x,vn=I,An=se,sr=me}function ze(h,v,_){R[h]=function(A,T,F,B,q,V,ne,we,Me,Re,ke,Ye,Ue,ve,_e,Ge,Qe){var Ve,lt=Qe-1>>1,st=q[V+0]|ne[we+0]<<16,gt=Me[Re+0]|ke[Ye+0]<<16;t(A!=null);var at=3*st+gt+131074>>2;for(v(A[T+0],255&at,at>>16,Ue,ve),F!=null&&(at=3*gt+st+131074>>2,v(F[B+0],255&at,at>>16,_e,Ge)),Ve=1;Ve<=lt;++Ve){var ln=q[V+Ve]|ne[we+Ve]<<16,pn=Me[Re+Ve]|ke[Ye+Ve]<<16,Vt=st+ln+gt+pn+524296,Ot=Vt+2*(ln+gt)>>3;at=Ot+st>>1,st=(Vt=Vt+2*(st+pn)>>3)+ln>>1,v(A[T+2*Ve-1],255&at,at>>16,Ue,ve+(2*Ve-1)*_),v(A[T+2*Ve-0],255&st,st>>16,Ue,ve+(2*Ve-0)*_),F!=null&&(at=Vt+gt>>1,st=Ot+pn>>1,v(F[B+2*Ve-1],255&at,at>>16,_e,Ge+(2*Ve-1)*_),v(F[B+2*Ve+0],255&st,st>>16,_e,Ge+(2*Ve+0)*_)),st=ln,gt=pn}1&Qe||(at=3*st+gt+131074>>2,v(A[T+Qe-1],255&at,at>>16,Ue,ve+(Qe-1)*_),F!=null&&(at=3*gt+st+131074>>2,v(F[B+Qe-1],255&at,at>>16,_e,Ge+(Qe-1)*_)))}}function Xe(){Ci[nu]=W,Ci[Ya]=au,Ci[Ka]=Bl,Ci[Do]=Ai,Ci[pd]=Ht,Ci[Vf]=$p,Ci[Op]=n1,Ci[Dl]=au,Ci[Ol]=Ai,Ci[Ml]=Ht,Ci[Gf]=$p}function ct(h){return h&~r1?0>h?0:255:h>>Bp}function _t(h,v){return ct((19077*h>>8)+(26149*v>>8)-14234)}function Dt(h,v,_){return ct((19077*h>>8)-(6419*v>>8)-(13320*_>>8)+8708)}function Pt(h,v){return ct((19077*h>>8)+(33050*v>>8)-17685)}function Kt(h,v,_,A,T){A[T+0]=_t(h,_),A[T+1]=Dt(h,v,_),A[T+2]=Pt(h,v)}function Mn(h,v,_,A,T){A[T+0]=Pt(h,v),A[T+1]=Dt(h,v,_),A[T+2]=_t(h,_)}function Zn(h,v,_,A,T){var F=Dt(h,v,_);v=F<<3&224|Pt(h,v)>>3,A[T+0]=248&_t(h,_)|F>>5,A[T+1]=v}function er(h,v,_,A,T){var F=240&Pt(h,v)|15;A[T+0]=240&_t(h,_)|Dt(h,v,_)>>4,A[T+1]=F}function Ar(h,v,_,A,T){A[T+0]=255,Kt(h,v,_,A,T+1)}function Lr(h,v,_,A,T){Mn(h,v,_,A,T),A[T+3]=255}function Hi(h,v,_,A,T){Kt(h,v,_,A,T),A[T+3]=255}function In(h,v){return 0>h?0:h>v?v:h}function Vi(h,v,_){R[h]=function(A,T,F,B,q,V,ne,we,Me){for(var Re=we+(-2&Me)*_;we!=Re;)v(A[T+0],F[B+0],q[V+0],ne,we),v(A[T+1],F[B+0],q[V+0],ne,we+_),T+=2,++B,++V,we+=2*_;1&Me&&v(A[T+0],F[B+0],q[V+0],ne,we)}}function Ha(h,v,_){return _==0?h==0?v==0?6:5:v==0?4:0:_}function kl(h,v,_,A,T){switch(h>>>30){case 3:qe(v,_,A,T,0);break;case 2:Oe(v,_,A,T);break;case 1:xt(v,_,A,T)}}function El(h,v){var _,A,T=v.M,F=v.Nb,B=h.oc,q=h.pc+40,V=h.oc,ne=h.pc+584,we=h.oc,Me=h.pc+600;for(_=0;16>_;++_)B[q+32*_-1]=129;for(_=0;8>_;++_)V[ne+32*_-1]=129,we[Me+32*_-1]=129;for(0<T?B[q-1-32]=V[ne-1-32]=we[Me-1-32]=129:(i(B,q-32-1,127,21),i(V,ne-32-1,127,9),i(we,Me-32-1,127,9)),A=0;A<h.za;++A){var Re=v.ya[v.aa+A];if(0<A){for(_=-1;16>_;++_)r(B,q+32*_-4,B,q+32*_+12,4);for(_=-1;8>_;++_)r(V,ne+32*_-4,V,ne+32*_+4,4),r(we,Me+32*_-4,we,Me+32*_+4,4)}var ke=h.Gd,Ye=h.Hd+A,Ue=Re.ad,ve=Re.Hc;if(0<T&&(r(B,q-32,ke[Ye].y,0,16),r(V,ne-32,ke[Ye].f,0,8),r(we,Me-32,ke[Ye].ea,0,8)),Re.Za){var _e=B,Ge=q-32+16;for(0<T&&(A>=h.za-1?i(_e,Ge,ke[Ye].y[15],4):r(_e,Ge,ke[Ye+1].y,0,4)),_=0;4>_;_++)_e[Ge+128+_]=_e[Ge+256+_]=_e[Ge+384+_]=_e[Ge+0+_];for(_=0;16>_;++_,ve<<=2)_e=B,Ge=q+Gs[_],Ns[Re.Ob[_]](_e,Ge),kl(ve,Ue,16*+_,_e,Ge)}else if(_e=Ha(A,T,Re.Ob[0]),Ja[_e](B,q),ve!=0)for(_=0;16>_;++_,ve<<=2)kl(ve,Ue,16*+_,B,q+Gs[_]);for(_=Re.Gc,_e=Ha(A,T,Re.Dd),ha[_e](V,ne),ha[_e](we,Me),ve=Ue,_e=V,Ge=ne,255&(Re=_>>0)&&(170&Re?ut(ve,256,_e,Ge):Ft(ve,256,_e,Ge)),Re=we,ve=Me,255&(_>>=8)&&(170&_?ut(Ue,320,Re,ve):Ft(Ue,320,Re,ve)),T<h.Ub-1&&(r(ke[Ye].y,0,B,q+480,16),r(ke[Ye].f,0,V,ne+224,8),r(ke[Ye].ea,0,we,Me+224,8)),_=8*F*h.B,ke=h.sa,Ye=h.ta+16*A+16*F*h.R,Ue=h.qa,Re=h.ra+8*A+_,ve=h.Ha,_e=h.Ia+8*A+_,_=0;16>_;++_)r(ke,Ye+_*h.R,B,q+32*_,16);for(_=0;8>_;++_)r(Ue,Re+_*h.B,V,ne+32*_,8),r(ve,_e+_*h.B,we,Me+32*_,8)}}function Cl(h,v,_,A,T,F,B,q,V){var ne=[0],we=[0],Me=0,Re=V!=null?V.kd:0,ke=V??new Jc;if(h==null||12>_)return 7;ke.data=h,ke.w=v,ke.ha=_,v=[v],_=[_],ke.gb=[ke.gb];e:{var Ye=v,Ue=_,ve=ke.gb;if(t(h!=null),t(Ue!=null),t(ve!=null),ve[0]=0,12<=Ue[0]&&!n(h,Ye[0],"RIFF")){if(n(h,Ye[0]+8,"WEBP")){ve=3;break e}var _e=he(h,Ye[0]+4);if(12>_e||4294967286<_e){ve=3;break e}if(Re&&_e>Ue[0]-8){ve=7;break e}ve[0]=_e,Ye[0]+=12,Ue[0]-=12}ve=0}if(ve!=0)return ve;for(_e=0<ke.gb[0],_=_[0];;){e:{var Ge=h;Ue=v,ve=_;var Qe=ne,Ve=we,lt=Ye=[0];if((at=Me=[Me])[0]=0,8>ve[0])ve=7;else{if(!n(Ge,Ue[0],"VP8X")){if(he(Ge,Ue[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var st=he(Ge,Ue[0]+8),gt=1+pe(Ge,Ue[0]+12);if(2147483648<=gt*(Ge=1+pe(Ge,Ue[0]+15))){ve=3;break e}lt!=null&&(lt[0]=st),Qe!=null&&(Qe[0]=gt),Ve!=null&&(Ve[0]=Ge),Ue[0]+=18,ve[0]-=18,at[0]=1}ve=0}}if(Me=Me[0],Ye=Ye[0],ve!=0)return ve;if(Ue=!!(2&Ye),!_e&&Me)return 3;if(F!=null&&(F[0]=!!(16&Ye)),B!=null&&(B[0]=Ue),q!=null&&(q[0]=0),B=ne[0],Ye=we[0],Me&&Ue&&V==null){ve=0;break}if(4>_){ve=7;break}if(_e&&Me||!_e&&!Me&&!n(h,v[0],"ALPH")){_=[_],ke.na=[ke.na],ke.P=[ke.P],ke.Sa=[ke.Sa];e:{st=h,ve=v,_e=_;var at=ke.gb;Qe=ke.na,Ve=ke.P,lt=ke.Sa,gt=22,t(st!=null),t(_e!=null),Ge=ve[0];var ln=_e[0];for(t(Qe!=null),t(lt!=null),Qe[0]=null,Ve[0]=null,lt[0]=0;;){if(ve[0]=Ge,_e[0]=ln,8>ln){ve=7;break e}var pn=he(st,Ge+4);if(4294967286<pn){ve=3;break e}var Vt=8+pn+1&-2;if(gt+=Vt,0<at&&gt>at){ve=3;break e}if(!n(st,Ge,"VP8 ")||!n(st,Ge,"VP8L")){ve=0;break e}if(ln[0]<Vt){ve=7;break e}n(st,Ge,"ALPH")||(Qe[0]=st,Ve[0]=Ge+8,lt[0]=pn),Ge+=Vt,ln-=Vt}}if(_=_[0],ke.na=ke.na[0],ke.P=ke.P[0],ke.Sa=ke.Sa[0],ve!=0)break}_=[_],ke.Ja=[ke.Ja],ke.xa=[ke.xa];e:if(at=h,ve=v,_e=_,Qe=ke.gb[0],Ve=ke.Ja,lt=ke.xa,st=ve[0],Ge=!n(at,st,"VP8 "),gt=!n(at,st,"VP8L"),t(at!=null),t(_e!=null),t(Ve!=null),t(lt!=null),8>_e[0])ve=7;else{if(Ge||gt){if(at=he(at,st+4),12<=Qe&&at>Qe-12){ve=3;break e}if(Re&&at>_e[0]-8){ve=7;break e}Ve[0]=at,ve[0]+=8,_e[0]-=8,lt[0]=gt}else lt[0]=5<=_e[0]&&at[st+0]==47&&!(at[st+4]>>5),Ve[0]=_e[0];ve=0}if(_=_[0],ke.Ja=ke.Ja[0],ke.xa=ke.xa[0],v=v[0],ve!=0)break;if(4294967286<ke.Ja)return 3;if(q==null||Ue||(q[0]=ke.xa?2:1),B=[B],Ye=[Ye],ke.xa){if(5>_){ve=7;break}q=B,Re=Ye,Ue=F,h==null||5>_?h=0:5<=_&&h[v+0]==47&&!(h[v+4]>>5)?(_e=[0],at=[0],Qe=[0],$(Ve=new P,h,v,_),ht(Ve,_e,at,Qe)?(q!=null&&(q[0]=_e[0]),Re!=null&&(Re[0]=at[0]),Ue!=null&&(Ue[0]=Qe[0]),h=1):h=0):h=0}else{if(10>_){ve=7;break}q=Ye,h==null||10>_||!Bc(h,v+3,_-3)?h=0:(Re=h[v+0]|h[v+1]<<8|h[v+2]<<16,Ue=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=ke.Ja||!Ue||!h?h=0:(B&&(B[0]=Ue),q&&(q[0]=h),h=1))}if(!h||(B=B[0],Ye=Ye[0],Me&&(ne[0]!=B||we[0]!=Ye)))return 3;V!=null&&(V[0]=ke,V.offset=v-V.w,t(4294967286>v-V.w),t(V.offset==V.ha-_));break}return ve==0||ve==7&&Me&&V==null?(F!=null&&(F[0]|=ke.na!=null&&0<ke.na.length),A!=null&&(A[0]=B),T!=null&&(T[0]=Ye),0):ve}function Qc(h,v,_){var A=v.width,T=v.height,F=0,B=0,q=A,V=T;if(v.Da=h!=null&&0<h.Da,v.Da&&(q=h.cd,V=h.bd,F=h.v,B=h.j,11>_||(F&=-2,B&=-2),0>F||0>B||0>=q||0>=V||F+q>A||B+V>T))return 0;if(v.v=F,v.j=B,v.va=F+q,v.o=B+V,v.U=q,v.T=V,v.da=h!=null&&0<h.da,v.da){if(!$e(q,V,_=[h.ib],F=[h.hb]))return 0;v.ib=_[0],v.hb=F[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*A/4&&v.hb<3*T/4,v.Kb=0),1}function Zc(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function Al(h,v,_,A){if(A==null||0>=h||0>=v)return 2;if(_!=null){if(_.Da){var T=_.cd,F=_.bd,B=-2&_.v,q=-2&_.j;if(0>B||0>q||0>=T||0>=F||B+T>h||q+F>v)return 2;h=T,v=F}if(_.da){if(!$e(h,v,T=[_.ib],F=[_.hb]))return 2;h=T[0],v=F[0]}}A.width=h,A.height=v;e:{var V=A.width,ne=A.height;if(h=A.S,0>=V||0>=ne||!(h>=nu&&13>h))h=2;else{if(0>=A.Rd&&A.sd==null){B=F=T=v=0;var we=(q=V*zp[h])*ne;if(11>h||(F=(ne+1)/2*(v=(V+1)/2),h==12&&(B=(T=V)*ne)),(ne=s(we+2*F+B))==null){h=1;break e}A.sd=ne,11>h?((V=A.f.RGBA).eb=ne,V.fb=0,V.A=q,V.size=we):((V=A.f.kb).y=ne,V.O=0,V.fa=q,V.Fd=we,V.f=ne,V.N=0+we,V.Ab=v,V.Cd=F,V.ea=ne,V.W=0+we+F,V.Db=v,V.Ed=F,h==12&&(V.F=ne,V.J=0+we+2*F),V.Tc=B,V.lb=T)}if(v=1,T=A.S,F=A.width,B=A.height,T>=nu&&13>T)if(11>T)h=A.f.RGBA,v&=(q=Math.abs(h.A))*(B-1)+F<=h.size,v&=q>=F*zp[T],v&=h.eb!=null;else{h=A.f.kb,q=(F+1)/2,we=(B+1)/2,V=Math.abs(h.fa),ne=Math.abs(h.Ab);var Me=Math.abs(h.Db),Re=Math.abs(h.lb),ke=Re*(B-1)+F;v&=V*(B-1)+F<=h.Fd,v&=ne*(we-1)+q<=h.Cd,v=(v&=Me*(we-1)+q<=h.Ed)&V>=F&ne>=q&Me>=q,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,T==12&&(v&=Re>=F,v&=ke<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||_!=null&&_.fd&&(h=Zc(A)),h}var Rr=64,xs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ll=24,Pl=32,Ao=8,Zr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(h){return h},R.Predictor2=function(h,v,_){return v[_+0]},R.Predictor3=function(h,v,_){return v[_+1]},R.Predictor4=function(h,v,_){return v[_-1]},R.Predictor5=function(h,v,_){return Ie(Ie(h,v[_+1]),v[_+0])},R.Predictor6=function(h,v,_){return Ie(h,v[_-1])},R.Predictor7=function(h,v,_){return Ie(h,v[_+0])},R.Predictor8=function(h,v,_){return Ie(v[_-1],v[_+0])},R.Predictor9=function(h,v,_){return Ie(v[_+0],v[_+1])},R.Predictor10=function(h,v,_){return Ie(Ie(h,v[_-1]),Ie(v[_+0],v[_+1]))},R.Predictor11=function(h,v,_){var A=v[_+0];return 0>=nt(A>>24&255,h>>24&255,(v=v[_-1])>>24&255)+nt(A>>16&255,h>>16&255,v>>16&255)+nt(A>>8&255,h>>8&255,v>>8&255)+nt(255&A,255&h,255&v)?A:h},R.Predictor12=function(h,v,_){var A=v[_+0];return(We((h>>24&255)+(A>>24&255)-((v=v[_-1])>>24&255))<<24|We((h>>16&255)+(A>>16&255)-(v>>16&255))<<16|We((h>>8&255)+(A>>8&255)-(v>>8&255))<<8|We((255&h)+(255&A)-(255&v)))>>>0},R.Predictor13=function(h,v,_){var A=v[_-1];return(He((h=Ie(h,v[_+0]))>>24&255,A>>24&255)<<24|He(h>>16&255,A>>16&255)<<16|He(h>>8&255,A>>8&255)<<8|He(h>>0&255,A>>0&255))>>>0};var Ws=R.PredictorAdd0;R.PredictorAdd1=dt,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var Va=R.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var hd,Gi=R.ColorIndexInverseTransform,Tl=R.MapARGB,la=R.VP8LColorIndexInverseTransformAlpha,fi=R.MapAlpha,ca=R.VP8LPredictorsAdd=[];ca.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Lo,hi,ei,Ga,ua,pi,Se,qe,Oe,ut,xt,Ft,Rn,hn,Po,To,Pr,bs,Io,_s,Hs,Ss,tn,Yi,Ei,vn,An,sr,xr=s(511),Ki=s(2041),Ji=s(225),da=s(767),eu=0,Il=Ki,tu=Ji,mi=da,ti=xr,nu=0,Ya=1,Ka=2,Do=3,pd=4,Vf=5,Op=6,Dl=7,Ol=8,Ml=9,Gf=10,Mp=[2,3,7],Xg=[3,3,11],Rp=[280,256,256,256,40],br=[0,1,1,1,0],zr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Fp=8,Yf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ru=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fa=null,Kf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Rl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Fl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],md=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$l=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],e1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ja=[],Ns=[],ha=[],t1=1,su=2,Xi=[],Ci=[];ze("UpsampleRgbLinePair",Kt,3),ze("UpsampleBgrLinePair",Mn,3),ze("UpsampleRgbaLinePair",Hi,4),ze("UpsampleBgraLinePair",Lr,4),ze("UpsampleArgbLinePair",Ar,4),ze("UpsampleRgba4444LinePair",er,2),ze("UpsampleRgb565LinePair",Zn,2);var W=R.UpsampleRgbLinePair,Bl=R.UpsampleBgrLinePair,au=R.UpsampleRgbaLinePair,Ai=R.UpsampleBgraLinePair,Ht=R.UpsampleArgbLinePair,$p=R.UpsampleRgba4444LinePair,n1=R.UpsampleRgb565LinePair,gd=16,Vs=1<<gd-1,ou=-227,Jf=482,Bp=6,r1=(256<<Bp)-1,Up=0,pa=s(256),i1=s(256),s1=s(256),a1=s(256),o1=s(Jf-ou),l1=s(Jf-ou);Vi("YuvToRgbRow",Kt,3),Vi("YuvToBgrRow",Mn,3),Vi("YuvToRgbaRow",Hi,4),Vi("YuvToBgraRow",Lr,4),Vi("YuvToArgbRow",Ar,4),Vi("YuvToRgba4444Row",er,2),Vi("YuvToRgb565Row",Zn,2);var Gs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vd=[0,2,8],c1=[8,7,6,4,4,2,2,2,1,1,1,1],u1=1;this.WebPDecodeRGBA=function(h,v,_,A,T){var F=Ya,B=new Mr,q=new ci;B.ba=q,q.S=F,q.width=[q.width],q.height=[q.height];var V=q.width,ne=q.height,we=new Sn;if(we==null||h==null)var Me=2;else t(we!=null),Me=Cl(h,v,_,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Me!=0?V=0:(V!=null&&(V[0]=we.width[0]),ne!=null&&(ne[0]=we.height[0]),V=1),V){q.width=q.width[0],q.height=q.height[0],A!=null&&(A[0]=q.width),T!=null&&(T[0]=q.height);e:{if(A=new ml,(T=new Jc).data=h,T.w=v,T.ha=_,T.kd=1,v=[0],t(T!=null),((h=Cl(T.data,T.w,T.ha,null,null,null,v,null,T))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(t(B!=null),A.data=T.data,A.w=T.w+T.offset,A.ha=T.ha-T.offset,A.put=rr,A.ac=an,A.bc=Dr,A.ma=B,T.xa){if((h=zi())==null){B=1;break e}if(function(Re,ke){var Ye=[0],Ue=[0],ve=[0];t:for(;;){if(Re==null)return 0;if(ke==null)return Re.a=2,0;if(Re.l=ke,Re.a=0,$(Re.m,ke.data,ke.w,ke.ha),!ht(Re.m,Ye,Ue,ve)){Re.a=3;break t}if(Re.xb=su,ke.width=Ye[0],ke.height=Ue[0],!Fs(Ye[0],Ue[0],1,Re,null))break t;return 1}return t(Re.a!=0),0}(h,A)){if(A=(v=Al(A.width,A.height,B.Oa,B.ba))==0){t:{A=h;n:for(;;){if(A==null){A=0;break t}if(t(A.s.yc!=null),t(A.s.Ya!=null),t(0<A.s.Wb),t((_=A.l)!=null),t((T=_.ma)!=null),A.xb!=0){if(A.ca=T.ba,A.tb=T.tb,t(A.ca!=null),!Qc(T.Oa,_,Do)){A.a=2;break n}if(!So(A,_.width)||_.da)break n;if((_.da||en(A.ca.S))&&Te(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&Te()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!je(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!vs(A,A.V,A.Ba,A.c,A.i,_.o,Ui))break n;T.Dc=A.Ma,A=1;break t}t(A.a!=0),A=0}A=!A}A&&(v=h.a)}else v=h.a}else{if((h=new Rf)==null){B=1;break e}if(h.Fa=T.na,h.P=T.P,h.qc=T.Sa,Uc(h,A)){if((v=Al(A.width,A.height,B.Oa,B.ba))==0){if(h.Aa=0,_=B.Oa,t((T=h)!=null),_!=null){if(0<(V=0>(V=_.Md)?0:100<V?255:255*V/100)){for(ne=we=0;4>ne;++ne)12>(Me=T.pb[ne]).lc&&(Me.ia=V*c1[0>Me.lc?0:Me.lc]>>3),we|=Me.ia;we&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=_.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}ed(h,A)||(v=h.a)}}else v=h.a}v==0&&B.Oa!=null&&B.Oa.fd&&(v=Zc(B.ba))}B=v}F=B!=0?null:11>F?q.f.RGBA.eb:q.f.kb.y}else F=null;return F};var zp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(R,ee){for(var le="",O=0;O<4;O++)le+=String.fromCharCode(R[ee++]);return le}function p(R,ee){return(R[ee+0]<<0|R[ee+1]<<8|R[ee+2]<<16)>>>0}function m(R,ee){return(R[ee+0]<<0|R[ee+1]<<8|R[ee+2]<<16|R[ee+3]<<24)>>>0}new c;var w=[0],g=[0],N=[],j=new c,k=e,b=function(R,ee){var le={},O=0,U=!1,Y=0,J=0;if(le.frames=[],!function(H,re,ce,fe){for(var Ee=0;Ee<fe;Ee++)if(H[re+Ee]!=ce.charCodeAt(Ee))return!0;return!1}(R,ee,"RIFF",4)){for(m(R,ee+=4),ee+=8;ee<R.length;){var xe=f(R,ee),ye=m(R,ee+=4);ee+=4;var Q=ye+(1&ye);switch(xe){case"VP8 ":case"VP8L":le.frames[O]===void 0&&(le.frames[O]={}),(ae=le.frames[O]).src_off=U?J:ee-8,ae.src_size=Y+ye+8,O++,U&&(U=!1,Y=0,J=0);break;case"VP8X":(ae=le.header={}).feature_flags=R[ee];var $=ee+4;ae.canvas_width=1+p(R,$),$+=3,ae.canvas_height=1+p(R,$),$+=3;break;case"ALPH":U=!0,Y=Q+8,J=ee-8;break;case"ANIM":(ae=le.header).bgcolor=m(R,ee),$=ee+4,ae.loop_count=(Pe=R)[(P=$)+0]<<0|Pe[P+1]<<8,$+=2;break;case"ANMF":var z,ae;(ae=le.frames[O]={}).offset_x=2*p(R,ee),ee+=3,ae.offset_y=2*p(R,ee),ee+=3,ae.width=1+p(R,ee),ee+=3,ae.height=1+p(R,ee),ee+=3,ae.duration=p(R,ee),ee+=3,z=R[ee++],ae.dispose=1&z,ae.blend=z>>1&1}xe!="ANMF"&&(ee+=Q)}var Pe,P;return le}}(k,0);b.response=k,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,L=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,w=[S.canvas_height],g=[S.canvas_width];for(var M=0;M<L.length&&L[M].blend!=0;M++);}var K=L[0],oe=j.WebPDecodeRGBA(k,K.src_off,K.src_size,g,w);K.rgba=oe,K.imgwidth=g[0],K.imgheight=w[0];for(var Z=0;Z<g[0]*w[0]*4;Z++)N[Z]=oe[Z];return this.width=g,this.height=w,this.data=N,this}(function(e){var t=function(){return typeof py=="function"},n=function(w,g,N,j){var k=4,b=a;switch(j){case e.image_compression.FAST:k=1,b=s;break;case e.image_compression.MEDIUM:k=6,b=l;break;case e.image_compression.SLOW:k=9,b=c}w=r(w,g,N,b);var S=py(w,{level:k});return e.__addimage__.arrayBufferToBinaryString(S)},r=function(w,g,N,j){for(var k,b,S,L=w.length/g,M=new Uint8Array(w.length+L),K=p(),oe=0;oe<L;oe+=1){if(S=oe*g,k=w.subarray(S,S+g),j)M.set(j(k,N,b),S+oe);else{for(var Z,R=K.length,ee=[];Z<R;Z+=1)ee[Z]=K[Z](k,N,b);var le=m(ee.concat());M.set(ee[le],S+oe)}b=k}return M},i=function(w){var g=Array.apply([],w);return g.unshift(0),g},s=function(w,g){var N,j=[],k=w.length;j[0]=1;for(var b=0;b<k;b+=1)N=w[b-g]||0,j[b+1]=w[b]-N+256&255;return j},a=function(w,g,N){var j,k=[],b=w.length;k[0]=2;for(var S=0;S<b;S+=1)j=N&&N[S]||0,k[S+1]=w[S]-j+256&255;return k},l=function(w,g,N){var j,k,b=[],S=w.length;b[0]=3;for(var L=0;L<S;L+=1)j=w[L-g]||0,k=N&&N[L]||0,b[L+1]=w[L]+256-(j+k>>>1)&255;return b},c=function(w,g,N){var j,k,b,S,L=[],M=w.length;L[0]=4;for(var K=0;K<M;K+=1)j=w[K-g]||0,k=N&&N[K]||0,b=N&&N[K-g]||0,S=f(j,k,b),L[K+1]=w[K]-S+256&255;return L},f=function(w,g,N){if(w===g&&g===N)return w;var j=Math.abs(g-N),k=Math.abs(w-N),b=Math.abs(w+g-N-N);return j<=k&&j<=b?w:k<=b?g:N},p=function(){return[i,s,a,l,c]},m=function(w){var g=w.map(function(N){return N.reduce(function(j,k){return j+Math.abs(k)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(w,g,N,j){var k,b,S,L,M,K,oe,Z,R,ee,le,O,U,Y,J,xe=this.decode.FLATE_DECODE,ye="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(S=new EB(w)).imgData,b=S.bits,k=S.colorSpace,M=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){R=(Z=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,le=new Uint8Array(R*S.colors),ee=new Uint8Array(R);var Q,$=S.pixelBitlength-S.bits;for(Y=0,J=0;Y<R;Y++){for(U=Z[Y],Q=0;Q<$;)le[J++]=U>>>Q&255,Q+=S.bits;ee[Y]=U>>>Q&255}}if(S.bits===16){R=(Z=new Uint32Array(S.decodePixels().buffer)).length,le=new Uint8Array(R*(32/S.pixelBitlength)*S.colors),ee=new Uint8Array(R*(32/S.pixelBitlength)),O=S.colors>1,Y=0,J=0;for(var z=0;Y<R;)U=Z[Y++],le[J++]=U>>>0&255,O&&(le[J++]=U>>>16&255,U=Z[Y++],le[J++]=U>>>0&255),ee[z++]=U>>>16&255;b=8}j!==e.image_compression.NONE&&t()?(w=n(le,S.width*S.colors,S.colors,j),oe=n(ee,S.width,1,j)):(w=le,oe=ee,xe=void 0)}if(S.colorType===3&&(k=this.color_spaces.INDEXED,K=S.palette,S.transparency.indexed)){var ae=S.transparency.indexed,Pe=0;for(Y=0,R=ae.length;Y<R;++Y)Pe+=ae[Y];if((Pe/=255)===R-1&&ae.indexOf(0)!==-1)L=[ae.indexOf(0)];else if(Pe!==R){for(Z=S.decodePixels(),ee=new Uint8Array(Z.length),Y=0,R=Z.length;Y<R;Y++)ee[Y]=ae[Z[Y]];oe=n(ee,S.width,1)}}var P=function(H){var re;switch(H){case e.image_compression.FAST:re=11;break;case e.image_compression.MEDIUM:re=13;break;case e.image_compression.SLOW:re=14;break;default:re=12}return re}(j);return xe===this.decode.FLATE_DECODE&&(ye="/Predictor "+P+" "),ye+="/Colors "+M+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(oe&&this.__addimage__.isArrayBuffer(oe)||this.__addimage__.isArrayBufferView(oe))&&(oe=this.__addimage__.arrayBufferToBinaryString(oe)),{alias:N,data:w,index:g,filter:xe,decodeParameters:ye,transparency:L,palette:K,sMask:oe,predictor:P,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:k}}}})(Ct.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new CB(t),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:a,height:l},p=new Fv(100).encode(f,100);return e.processJPEG.call(this,p,n,r,i)},e.processGIF87A=e.processGIF89A}(Ct.API),_a.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_a.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Dn.log("bit decode error:"+n)}},_a.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},_a.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,c=15&s,f=this.palette[l];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},_a.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},_a.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,f=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=f}this.pos+=e}},_a.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,f=(a>>11)/t*255|0,p=i*this.width*4+4*s;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},_a.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},_a.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},_a.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new _a(t,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Fv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Ct.API),X_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new X_(t),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Fv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Ct.API),Ct.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,c=0,f=0;f<i;f+=4){var p=r[f],m=r[f+1],w=r[f+2],g=r[f+3];s[l++]=p,s[l++]=m,s[l++]=w,a[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ct.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fd=Ct.API,zm=Fd.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,m=t.doKerning!==!1,w=0,g=e.length,N=0,j=l[0]||c,k=[];for(n=0;n<g;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(w=m&&jn(f[r])==="object"&&!isNaN(parseInt(f[r][N],10))?f[r][N]/p:0,k.push((l[r]||j)/c+w)),N=r;return k},G_=Fd.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Fd.processArabic&&(e=Fd.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:zm.apply(this,arguments).reduce(function(s,a){return s+a},0)},Y_=function(e,t,n,r){for(var i=[],s=0,a=e.length,l=0;s!==a&&l+t[s]<n;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+t[s]>r&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},K_=function(e,t,n){n||(n={});var r,i,s,a,l,c,f,p=[],m=[p],w=n.textIndent||0,g=0,N=0,j=e.split(" "),k=zm.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?j[0].length+2:n.lineIndent||0){var b=Array(c).join(" "),S=[];j.map(function(M){(M=M.split(/\s*\n/)).length>1?S=S.concat(M.map(function(K,oe){return(oe&&K.length?`
`:"")+K})):S.push(M[0])}),j=S,c=G_.apply(this,[b,n])}for(s=0,a=j.length;s<a;s++){var L=0;if(r=j[s],c&&r[0]==`
`&&(r=r.substr(1),L=1),w+g+(N=(i=zm.apply(this,[r,n])).reduce(function(M,K){return M+K},0))>t||L){if(N>t){for(l=Y_.apply(this,[r,i,t-(w+g),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(M,K){return M+K},0)}else p=[r];m.push(p),w=N+c,g=k}else p.push(r),w+=g+N,g=k}return f=c?function(M,K){return(K?b:"")+M.join(" ")}:function(M){return M.join(" ")},m.map(f)},Fd.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,f=[];for(l=0,c=r.length;l<c;l++)f=f.concat(K_.apply(this,[r[l],a,s]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=e.__fontmetrics__.compress=function(m){var w,g,N,j,k=["{"];for(var b in m){if(w=m[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof w=="number")w<0?(N=s(w).slice(3),j="-"):(N=s(w).slice(2),j=""),N=j+N.slice(0,-1)+r[N.slice(-1)];else{if(jn(w)!=="object")throw new Error("Don't know what to do with value type "+jn(w)+".");N=a(w)}k.push(g+N)}return k.push("}"),k.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,g,N,j,k={},b=1,S=k,L=[],M="",K="",oe=m.length-1,Z=1;Z<oe;Z+=1)(j=m[Z])=="'"?w?(N=w.join(""),w=void 0):w=[]:w?w.push(j):j=="{"?(L.push([S,N]),S={},N=void 0):j=="}"?((g=L.pop())[0][g[1]]=S,N=void 0,S=g[0]):j=="-"?b=-1:N===void 0?n.hasOwnProperty(j)?(M+=n[j],N=parseInt(M,16)*b,b=1,M=""):M+=j:n.hasOwnProperty(j)?(K+=n[j],S[N]=parseInt(K,16)*b,b=1,N=void 0,K=""):K+=j;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var w=m.font,g=p.Unicode[w.postScriptName];g&&(w.metadata.Unicode={},w.metadata.Unicode.widths=g.widths,w.metadata.Unicode.kerning=g.kerning);var N=f.Unicode[w.postScriptName];N&&(w.metadata.Unicode.encoding=N,w.encoding=N.codePages[0])}])}(Ct.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Uh(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ct),function(e){function t(){return(At.canvg?Promise.resolve(At.canvg):sl(()=>import("./index.es-CxCelCLH.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ct.API.addSvgAsImage=function(n,r,i,s,a,l,c,f){if(isNaN(r)||isNaN(i))throw Dn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Dn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(m,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(w)}).then(function(){g.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,c,f)})}}(),Ct.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Ct.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],f=0,p=0,m=0;function w(N,j){var k,b=!1;for(k=0;k<N.length;k+=1)N[k]===j&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(m=0;m<g;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(jn(e)==="object"){for(i in e)if(s=e[i],w(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&w(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,j=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?j.push("/"+N+" /"+n[N].value):j.push("/"+N+" "+n[N].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ct.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],m=0,w=s.length;m<w;++m){if(l=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(f[4-l.length],l)}return p.join("")},r=function(s){var a,l,c,f,p,m,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,w=(l=Object.keys(s).sort(function(g,N){return g-N})).length;m<w;m++)a=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+f+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,w=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",N=0;N<w.length;N++)g+=String.fromCharCode(w[N]);var j=f();p({data:g,addLength1:!0,objectId:j}),c("endobj");var k=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var b=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Bd(l.fontName)),c("/FontFile2 "+j+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+Bd(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+Bd(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,w="",g=0;g<m.length;g++)w+=String.fromCharCode(m[g]);var N=f();p({data:w,addLength1:!0,objectId:N}),c("endobj");var j=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var k=f();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Bd(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=f();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+Bd(l.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",c=s.x,f=s.y,p=s.options||{},m=s.mutex||{},w=m.pdfEscape,g=m.activeFontKey,N=m.fonts,j=g,k="",b=0,S="",L=N[j].encoding;if(N[j].encoding!=="Identity-H")return{text:l,x:c,y:f,options:p,mutex:m};for(S=l,j=g,Array.isArray(l)&&(S=l[0]),b=0;b<S.length;b+=1)N[j].metadata.hasOwnProperty("cmap")&&(a=N[j].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),a||S[b].charCodeAt(0)<256&&N[j].metadata.hasOwnProperty("Unicode")?k+=S[b]:k+="";var M="";return parseInt(j.slice(1))<14||L==="WinAnsiEncoding"?M=w(k,j).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(M=n(k,N[j])),m.isHex=!0,{text:M,x:c,y:f,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?l.push([i(Object.assign({},c,{text:a[f][0]})).text,a[f][1],a[f][2]]):l.push(i(Object.assign({},c,{text:a[f]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:a})).text}])}(Ct),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ct.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,l,c,f,p,m=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,L=0;this.__bidiEngine__={};var M=function(O){var U=O.charCodeAt(),Y=U>>8,J=j[Y];return J!==void 0?m[256*J+(255&U)]:Y===252||Y===253?"AL":b.test(Y)?"L":Y===8?"R":"N"},K=function(O){for(var U,Y=0;Y<O.length;Y++){if((U=M(O.charAt(Y)))==="L")return!1;if(U==="R")return!0}return!1},oe=function(O,U,Y,J){var xe,ye,Q,$,z=U[J];switch(z){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(z="AN");break;case"AL":S=!0,z="R";break;case"WS":z="N";break;case"CS":J<1||J+1>=U.length||(xe=Y[J-1])!=="EN"&&xe!=="AN"||(ye=U[J+1])!=="EN"&&ye!=="AN"?z="N":S&&(ye="AN"),z=ye===xe?ye:"N";break;case"ES":z=(xe=J>0?Y[J-1]:"B")==="EN"&&J+1<U.length&&U[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&Y[J-1]==="EN"){z="EN";break}if(S){z="N";break}for(Q=J+1,$=U.length;Q<$&&U[Q]==="ET";)Q++;z=Q<$&&U[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for($=U.length,Q=J+1;Q<$&&U[Q]==="NSM";)Q++;if(Q<$){var ae=O[J],Pe=ae>=1425&&ae<=2303||ae===64286;if(xe=U[Q],Pe&&(xe==="R"||xe==="AL")){z="R";break}}}z=J<1||(xe=U[J-1])==="B"?"N":Y[J-1];break;case"B":S=!1,i=!0,z=L;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":z="N"}return z},Z=function(O,U,Y){var J=O.split("");return Y&&R(J,Y,{hiLevel:L}),J.reverse(),U&&U.reverse(),J.join("")},R=function(O,U,Y){var J,xe,ye,Q,$,z=-1,ae=O.length,Pe=0,P=[],H=L?g:w,re=[];for(S=!1,i=!1,s=!1,xe=0;xe<ae;xe++)re[xe]=M(O[xe]);for(ye=0;ye<ae;ye++){if($=Pe,P[ye]=oe(O,re,P,ye),J=240&(Pe=H[$][N[P[ye]]]),Pe&=15,U[ye]=Q=H[Pe][5],J>0)if(J===16){for(xe=z;xe<ye;xe++)U[xe]=1;z=-1}else z=-1;if(H[Pe][6])z===-1&&(z=ye);else if(z>-1){for(xe=z;xe<ye;xe++)U[xe]=Q;z=-1}re[ye]==="B"&&(U[ye]=0),Y.hiLevel|=Q}s&&function(ce,fe,Ee){for(var Ce=0;Ce<Ee;Ce++)if(ce[Ce]==="S"){fe[Ce]=L;for(var te=Ce-1;te>=0&&ce[te]==="WS";te--)fe[te]=L}}(re,U,ae)},ee=function(O,U,Y,J,xe){if(!(xe.hiLevel<O)){if(O===1&&L===1&&!i)return U.reverse(),void(Y&&Y.reverse());for(var ye,Q,$,z,ae=U.length,Pe=0;Pe<ae;){if(J[Pe]>=O){for($=Pe+1;$<ae&&J[$]>=O;)$++;for(z=Pe,Q=$-1;z<Q;z++,Q--)ye=U[z],U[z]=U[Q],U[Q]=ye,Y&&(ye=Y[z],Y[z]=Y[Q],Y[Q]=ye);Pe=$}Pe++}}},le=function(O,U,Y){var J=O.split(""),xe={hiLevel:L};return Y||(Y=[]),R(J,Y,xe),function(ye,Q,$){if($.hiLevel!==0&&p)for(var z,ae=0;ae<ye.length;ae++)Q[ae]===1&&(z=k.indexOf(ye[ae]))>=0&&(ye[ae]=k[z+1])}(J,Y,xe),ee(2,J,U,Y,xe),ee(1,J,U,Y,xe),J.join("")};return this.__bidiEngine__.doBidiReorder=function(O,U,Y){if(function(xe,ye){if(ye)for(var Q=0;Q<xe.length;Q++)ye[Q]=Q;l===void 0&&(l=K(xe)),f===void 0&&(f=K(xe))}(O,U),a||!c||f)if(a&&c&&l^f)L=l?1:0,O=Z(O,U,Y);else if(!a&&c&&f)L=l?1:0,O=le(O,U,Y),O=Z(O,U);else if(!a||l||c||f){if(a&&!c&&l^f)O=Z(O,U),l?(L=0,O=le(O,U,Y)):(L=1,O=le(O,U,Y),O=Z(O,U));else if(a&&l&&!c&&f)L=1,O=le(O,U,Y),O=Z(O,U);else if(!a&&!c&&l^f){var J=p;l?(L=1,O=le(O,U,Y),L=0,p=!1,O=le(O,U,Y),p=J):(L=0,O=le(O,U,Y),O=Z(O,U),L=1,p=!1,O=le(O,U,Y),p=J,O=Z(O,U))}}else L=0,O=le(O,U,Y);else L=l?1:0,O=le(O,U,Y);return O},this.__bidiEngine__.setOptions=function(O){O&&(a=O.isInputVisual,c=O.isOutputVisual,l=O.isInputRtl,f=O.isOutputRtl,p=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Ct),Ct.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ic(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new qB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new AB(this.contents),this.head=new PB(this),this.name=new MB(this),this.cmap=new D6(this),this.toUnicode={},this.hhea=new TB(this),this.maxp=new RB(this),this.hmtx=new FB(this),this.post=new DB(this),this.os2=new IB(this),this.loca=new zB(this),this.glyf=new $B(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,f;for(f=[],a=0,l=(c=this.bbox).length;a<l;a++)t=c[a],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,l;for(a=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ua,Ic=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),AB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,l,c,f,p,m,w,g,N,j;for(j in g=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(g)/c),a=Math.floor(m/c),p=16*g-m,(i=new Ic).writeInt(this.scalarType),i.writeShort(g),i.writeShort(m),i.writeShort(a),i.writeShort(p),s=16*g,f=i.pos+s,l=null,N=[],n)for(w=n[j],i.writeString(j),i.writeInt(e(w)),i.writeInt(f),i.writeInt(w.length),N=N.concat(w),j==="head"&&(l=f),f+=w.length;f%4;)N.push(0),f++;return i.write(N),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=O6.call(n);n.length%4;)n.push(0);for(s=new Ic(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),LB={}.hasOwnProperty,bo=function(e,t){for(var n in t)LB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ua=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var PB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Ic).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),Q_=function(){function e(t,n){var r,i,s,a,l,c,f,p,m,w,g,N,j,k,b,S,L;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),w=g/2,t.pos+=6,s=function(){var M,K;for(K=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)K.push(t.readUInt16());return K}(),t.pos+=2,j=function(){var M,K;for(K=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)K.push(t.readUInt16());return K}(),f=function(){var M,K;for(K=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)K.push(t.readUInt16());return K}(),p=function(){var M,K;for(K=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)K.push(t.readUInt16());return K}(),i=(this.length-t.pos+this.offset)/2,l=function(){var M,K;for(K=[],c=M=0;0<=i?M<i:M>i;c=0<=i?++M:--M)K.push(t.readUInt16());return K}(),c=b=0,L=s.length;b<L;c=++b)for(k=s[c],r=S=N=j[c];N<=k?S<=k:S>=k;r=N<=k?++S:--S)p[c]===0?a=r+f[c]:(a=l[p[c]/2+(r-N)-(w-c)]||0)!==0&&(a+=f[c]),this.codeMap[r]=65535&a}t.pos=m}return e.encode=function(t,n){var r,i,s,a,l,c,f,p,m,w,g,N,j,k,b,S,L,M,K,oe,Z,R,ee,le,O,U,Y,J,xe,ye,Q,$,z,ae,Pe,P,H,re,ce,fe,Ee,Ce,te,Ne,ie,pe;switch(J=new Ic,a=Object.keys(t).sort(function(he,je){return he-je}),n){case"macroman":for(j=0,k=function(){var he=[];for(N=0;N<256;++N)he.push(0);return he}(),S={0:0},s={},xe=0,z=a.length;xe<z;xe++)S[te=t[i=a[xe]]]==null&&(S[te]=++j),s[i]={old:t[i],new:S[t[i]]},k[i]=S[t[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(k),{charMap:s,subtable:J.data,maxGlyphID:j+1};case"unicode":for(U=[],m=[],L=0,S={},r={},b=f=null,ye=0,ae=a.length;ye<ae;ye++)S[K=t[i=a[ye]]]==null&&(S[K]=++L),r[i]={old:K,new:S[K]},l=S[K]-i,b!=null&&l===f||(b&&m.push(b),U.push(i),f=l),b=i;for(b&&m.push(b),m.push(65535),U.push(65535),le=2*(ee=U.length),R=2*Math.pow(Math.log(ee)/Math.LN2,2),w=Math.log(R/2)/Math.LN2,Z=2*ee-R,c=[],oe=[],g=[],N=Q=0,Pe=U.length;Q<Pe;N=++Q){if(O=U[N],p=m[N],O===65535){c.push(0),oe.push(0);break}if(O-(Y=r[O].new)>=32768)for(c.push(0),oe.push(2*(g.length+ee-N)),i=$=O;O<=p?$<=p:$>=p;i=O<=p?++$:--$)g.push(r[i].new);else c.push(Y-O),oe.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*ee+2*g.length),J.writeUInt16(0),J.writeUInt16(le),J.writeUInt16(R),J.writeUInt16(w),J.writeUInt16(Z),Ee=0,P=m.length;Ee<P;Ee++)i=m[Ee],J.writeUInt16(i);for(J.writeUInt16(0),Ce=0,H=U.length;Ce<H;Ce++)i=U[Ce],J.writeUInt16(i);for(Ne=0,re=c.length;Ne<re;Ne++)l=c[Ne],J.writeUInt16(l);for(ie=0,ce=oe.length;ie<ce;ie++)M=oe[ie],J.writeUInt16(M);for(pe=0,fe=g.length;pe<fe;pe++)j=g[pe],J.writeUInt16(j);return{charMap:r,subtable:J.data,maxGlyphID:L+1}}},e}(),D6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Q_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Q_.encode(n,r),(s=new Ic).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),TB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),IB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),DB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,f;for(f=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)f.push(n.readUInt32());return f}).call(this)}},t}(),OB=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},MB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,a,l,c,f,p,m,w,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(f={},a=m=0,w=i.length;m<w;a=++m)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new OB(p,s),f[g=s.nameID]==null&&(f[g]=[]),f[s.nameID].push(l);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t}(),RB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),FB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,a,l,c,f;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)m.push(n.readInt16());return m}(),this.widths=(function(){var p,m,w,g;for(g=[],p=0,m=(w=this.metrics).length;p<m;p++)a=w[p],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],f=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)f.push(this.widths.push(i));return f},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),O6=[].slice,$B=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,a,l,c,f,p,m,w;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Ic(r.read(s))).readShort(),p=c.readShort(),w=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[n]=l===-1?new UB(c,p,w,f,m):new BB(c,l,p,w,f,m),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,a,l,c,f;for(l=[],a=[],c=0,f=r.length;c<f;c++)s=n[r[c]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),BB=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),UB=function(){function e(t,n,r,i,s){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Ic(O6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),zB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,Ua),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var c=this.offsets[l],f=this.offsets[l+1]-c;f>0&&(s+=f)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},t}(),qB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,l,c;for(i={},a=0,l=t.length;a<l;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,l,c,f,p,m,w,g,N,j,k,b;for(i in r=D6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),g={0:0},b=r.charMap)g[(c=b[i]).old]=c.new;for(N in w=r.maxGlyphID,a)N in g||(g[N]=w++);return p=function(S){var L,M;for(L in M={},S)M[S[L]]=L;return M}(g),m=Object.keys(p).sort(function(S,L){return S-L}),j=function(){var S,L,M;for(M=[],S=0,L=m.length;S<L;S++)l=m[S],M.push(p[l]);return M}(),s=this.font.glyf.encode(a,j,g),f=this.font.loca.encode(s.offsets,j),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e}();Ct.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,c,f;for(f=[],l=0,c=n.length;l<c;l++)r=n[l],f.push(t.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();const WB=(e,t,n,r=!1)=>{var Z,R;const i=new Ct("p","mm","a4"),s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),l=r?"#FFFFFF":"#1E2A47",c=r?"#000000":"#F95738",f="helvetica";r||(i.setFillColor(l),i.rect(0,0,s,a,"F"));const p=[...((Z=e.songs)==null?void 0:Z.map(ee=>({...ee,type:"song"})))||[],...((R=e.medleys)==null?void 0:R.map(ee=>({...ee,type:"medley"})))||[]].sort((ee,le)=>ee.position-le.position),m=30,w=10,g=s-60,N=p.length>20,j=N?(g-20)/2:g,k=20,b=k+j+20;let S=18,L=w;p.length>30?(S=14,L=8):p.length>25&&(S=16,L=9),i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c);let M=m;if(N){const ee=Math.ceil(p.length/2),le=p.slice(0,ee),O=p.slice(ee);let U=M;le.forEach((J,xe)=>{let ye="";if(J.type==="song"){const ae=J;ae.song&&(ye=ae.song.title)}else J.type==="medley"&&(ye=J.name||"Medley");const $=`${String(xe+1).padStart(2,"0")}. ${ye}`,z=i.splitTextToSize($.toUpperCase(),j);i.text(z,k,U),U+=z.length*L});let Y=M;O.forEach((J,xe)=>{let ye="";if(J.type==="song"){const ae=J;ae.song&&(ye=ae.song.title)}else J.type==="medley"&&(ye=J.name||"Medley");const $=`${String(ee+xe+1).padStart(2,"0")}. ${ye}`,z=i.splitTextToSize($.toUpperCase(),j);i.text(z,b,Y),Y+=z.length*L})}else p.forEach((ee,le)=>{M>a-50&&(i.addPage(),r||(i.setFillColor(l),i.rect(0,0,s,a,"F")),M=m,i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c));let O="";if(ee.type==="song"){const xe=ee;xe.song&&(O=xe.song.title)}else ee.type==="medley"&&(O=ee.name||"Medley");const Y=`${String(le+1).padStart(2,"0")}. ${O}`,J=i.splitTextToSize(Y.toUpperCase(),j);i.text(J,k,M),M+=J.length*L});const K=i.getNumberOfPages();for(let ee=1;ee<=K;ee++){i.setPage(ee),i.setFont(f,"bold"),i.setFontSize(48),i.setTextColor(c);const le=(n||"YOUR BAND").toUpperCase();i.text(le,s-20,m,{angle:-90,align:"left"})}const oe=ee=>new Date(ee).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});if(t){i.setFont(f,"normal"),i.setFontSize(10),i.setTextColor(c);const ee=[t.name||"The Arena",t.location||"Town, Country",oe(t.date)];i.text(ee,s-20,a-30,{align:"right"})}return i},HB=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:s})=>{const[a,l]=C.useState(!0),c=(f=!1)=>{if(!n)return;const m=WB(n,r&&i?{name:r,date:i}:void 0,s,f),g=`${s||"Setlist"} - ${r||"Event"}${f?" (Print)":" (Digital)"}.pdf`;if(f){const N=m.output("blob"),j=URL.createObjectURL(N);window.open(j,"_blank")}else m.save(g)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:d.jsx("div",{className:`bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:f=>f.stopPropagation(),children:n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 border-b border-gray-200 gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg flex-shrink-0",children:d.jsx(Jr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),d.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:n.name})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 print:hidden flex-wrap",children:[d.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-2 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-xs",title:"Descargar PDF Digital",children:[d.jsx(H0,{className:"w-3 h-3"}),"Digital"]}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-2 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs",title:"Descargar PDF para Imprimir",children:[d.jsx(H0,{className:"w-3 h-3"}),"Impresión"]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),d.jsx("button",{onClick:()=>l(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-indigo-600":"bg-gray-200"}`,children:d.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(Ia,{className:"w-6 h-6"})})]})]}),d.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&d.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const f=C.useMemo(()=>n!=null&&n.songs?n.songs.map(g=>{var N;return{...g,type:((N=g.song)==null?void 0:N.type)==="medley"?"medley":"song"}}).sort((g,N)=>g.position-N.position):[],[n==null?void 0:n.songs]),p=f.length,m=p>10,w=m?Math.ceil(p/2):p;return p===0?d.jsx("div",{className:"text-center py-10",children:d.jsx("p",{className:"text-gray-500",children:"Este setlist está vacío."})}):d.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${w}, auto)`,gridAutoFlow:"column",gridTemplateColumns:m?"1fr 1fr":"1fr"},children:f.map((g,N)=>{var j,k,b,S,L,M,K;return g.type==="medley"?d.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:d.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[N+1,"."]}),d.jsxs("div",{className:"flex-grow",children:[d.jsx("p",{className:"text-indigo-600 font-bold",children:(j=g.song)==null?void 0:j.title}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((b=(k=g.song)==null?void 0:k.medley_song_ids)==null?void 0:b.length)||0," canciones)"]})]})]})},`medley-${g.id}`):d.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[N+1,"."]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((S=g.song)==null?void 0:S.title)||"N/A"}),d.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${a&&((L=g.song)!=null&&L.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(M=g.song)==null?void 0:M.artist})]})]},`song-${((K=g.song)==null?void 0:K.id)||N}`)})})})()]})]})})})})};function hp({table:e,filter:t,event:n="*",onInsert:r,onUpdate:i,onDelete:s,onChange:a,enabled:l=!0}){const c=C.useRef(null);return C.useEffect(()=>{if(!l)return;const f=`realtime-${e}-${t||"all"}`;return c.current=et.channel(f).on("postgres_changes",{event:n,schema:"public",table:e,...t&&{filter:t}},p=>{p.eventType==="INSERT"&&r?r(p):p.eventType==="UPDATE"&&i?i(p):p.eventType==="DELETE"&&s&&s(p),a&&a(p)}).subscribe(),()=>{c.current&&(c.current.unsubscribe(),c.current=null)}},[e,t,n,r,i,s,a,l]),{unsubscribe:()=>{c.current&&(c.current.unsubscribe(),c.current=null)}}}function VB({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,s]=C.useState([]),[a,l]=C.useState(!0),[c,f]=C.useState(null),[p,m]=C.useState(!1),[w,g]=C.useState(!1),[N,j]=C.useState("upcoming"),[k,b]=C.useState(null),[S,L]=C.useState(null),[M,K]=C.useState("");C.useEffect(()=>{oe()},[e]),hp({table:"events",filter:`group_id=eq.${e}`,onInsert:()=>{oe(),Le.success("Nuevo evento añadido en tiempo real")},onUpdate:()=>{oe()},onDelete:Q=>{s($=>$.filter(z=>z.id!==Q.old.id)),Le.success("Evento eliminado en tiempo real")},enabled:!!e});const oe=async()=>{try{l(!0);const{data:Q,error:$}=await et.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if($)throw $;if(Q){const z=await Promise.all(Q.map(async ae=>{const{data:Pe,error:P}=await et.from("event_members").select("group_member_id, user_id").eq("event_id",ae.id);if(P)return console.error("Error loading event members:",P),{...ae,members:[]};const H=(Pe==null?void 0:Pe.map(re=>{const ce=r.find(fe=>fe.id===re.group_member_id);return{group_member_id:re.group_member_id,user_id:re.user_id,member_name:(ce==null?void 0:ce.name)||"Unknown Member",role_in_group:(ce==null?void 0:ce.role_in_group)||"principal"}}))||[];return{...ae,members:H}}));s(z)}}catch(Q){console.error("Error fetching events:",Q),Le.error("Error loading events")}finally{l(!1)}},Z=async Q=>{if(window.confirm("¿Estás seguro de que quieres eliminar este evento?"))try{const{data:$,error:z}=await et.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",Q);if(z)throw z;const{error:ae}=await et.from("events").delete().eq("id",Q);if(ae)throw ae;$&&$.length>0&&await Promise.all($.filter(Pe=>Pe.group_members.sync_calendar).map(async Pe=>{try{await p6(e,Pe.group_member_id)}catch{}})),Le.success("Evento eliminado correctamente"),oe()}catch($){console.error("Error deleting event:",$),Le.error("Error al eliminar el evento")}},R=Q=>{f(Q),g(!0)},ee=async Q=>{try{const{data:z,error:ae}=await et.from("groups").select("name").eq("id",Q.group_id).single();if(ae)throw ae;K((z==null?void 0:z.name)||"")}catch{K("")}const $=Q.setlist;if($&&(L({name:Q.name,date:Q.date}),!!$))try{const{data:z,error:ae}=await et.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",$.id).single();if(ae)throw ae;z&&b(z)}catch(z){console.error("Error al cargar el setlist completo:",z),Le.error("Error al cargar el setlist")}};if(a)return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-8 w-32 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-36 bg-gray-200 animate-pulse rounded"})]}),d.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[d.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"})]}),d.jsx(KM,{count:4})]});const le=Q=>{const $=Q.reduce((z,ae)=>{const Pe=cn(mu(ae.date),"MMMM yyyy");return z[Pe]||(z[Pe]=[]),z[Pe].push(ae),z},{});return Object.entries($)},O=Q=>{if(!Q)return"";if(typeof Q=="object"&&Q!==null)return Q.name||String(Q);if(typeof Q!="string")return String(Q);if(Q.startsWith("{")||Q.startsWith("["))try{const $=JSON.parse(Q);return $.name||$.formatted_address||$.description||String($)}catch{return Q}return Q},U=Q=>{if(!Q)return;const $=O(Q);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent($)}`,"_blank")},Y=Q=>{const $=Q.members.filter(ae=>ae.role_in_group==="principal"),z=Q.members.filter(ae=>ae.role_in_group==="sustituto");return d.jsxs("div",{className:"mt-1.5 space-y-1",children:[d.jsx("div",{className:"flex flex-wrap gap-1",children:$.map(ae=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:ae.member_name},ae.group_member_id))}),z.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),z.map(ae=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:ae.member_name},ae.group_member_id))]}),Q.location&&d.jsx("div",{className:"flex items-center gap-1 mt-1",children:d.jsxs("button",{onClick:()=>U(Q.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[d.jsx(o0,{className:"w-3 h-3 mr-1"}),d.jsx("span",{className:"underline",children:J(O(Q.location))})]})})]})},J=(Q,$=40)=>{if(!Q)return"";if(Q.includes(",")){const z=Q.split(",")[0];return z.length<=$?z:`${z.slice(0,$)}...`}return Q.length>$?`${Q.slice(0,$)}...`:Q},xe=i.filter(Q=>{const $=mu(Q.date);return __(Pc($))||S_($)}),ye=i.filter(Q=>{const $=mu(Q.date);return!__(Pc($))&&!S_($)});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:d.jsxs("div",{className:"p-3 sm:p-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Eventos"}),t&&d.jsx(yt,{onClick:()=>m(!0),size:"sm",className:"w-full sm:w-auto",children:"Añadir Evento"})]}),i.length===0?d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(q0,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay eventos programados"})]}):d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:d.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[d.jsxs("button",{onClick:()=>j("upcoming"),className:`${N==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{className:"hidden sm:inline",children:"Próximos eventos"}),d.jsx("span",{className:"sm:hidden",children:"Próximos"}),xe.length>0&&d.jsx("span",{className:`${N==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:xe.length})]}),d.jsxs("button",{onClick:()=>j("past"),className:`${N==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{className:"hidden sm:inline",children:"Eventos pasados"}),d.jsx("span",{className:"sm:hidden",children:"Pasados"}),ye.length>0&&d.jsx("span",{className:`${N==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:ye.length})]})]})}),d.jsx("div",{className:"mt-4 space-y-6",children:le(N==="upcoming"?xe:ye).map(([Q,$])=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:Q}),d.jsx("div",{className:"space-y-1",children:$.map(z=>d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:d.jsx("div",{className:"p-3",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[d.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[d.jsx("div",{className:"text-lg font-bold text-gray-900",children:cn(mu(z.date),"d")}),d.jsx("div",{className:"text-xs text-gray-500 uppercase",children:cn(mu(z.date),"EEE")})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:z.name}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs text-gray-500 mt-0.5",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(W0,{className:"w-3 h-3 mr-1"}),cn(mu(`2000-01-01T${z.time}`),"h:mm a")]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(V0,{className:"w-3 h-3 mr-1"}),z.members.length]}),z.setlist?d.jsxs("div",{className:"flex items-center",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1 text-blue-500"}),d.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>z.setlist&&ee(z),children:z.setlist.name}),d.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var P,H;const ae=((P=z.setlist.songs)==null?void 0:P.filter(re=>{var ce,fe;return((ce=re.song)==null?void 0:ce.type)==="song"||!((fe=re.song)!=null&&fe.type)}))||[],Pe=((H=z.setlist.songs)==null?void 0:H.filter(re=>{var ce;return((ce=re.song)==null?void 0:ce.type)==="medley"}))||[];return`(${ae.length} canciones${Pe.length>0?`, ${Pe.length} medleys`:""})`})()})]}):d.jsxs("div",{className:"flex items-center",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1 text-gray-300"}),d.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),Y(z),z.notes&&d.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:z.notes})]}),t&&d.jsxs("div",{className:"flex items-center gap-1 mt-2 sm:mt-0",children:[d.jsx("button",{onClick:()=>R(z),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:d.jsx(wN,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),d.jsx("button",{onClick:()=>Z(z.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:d.jsx(L5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})})},z.id))})]},Q))})]})]})}),d.jsx(T_,{isOpen:p,onClose:()=>m(!1),groupId:e,onEventSaved:()=>{oe(),m(!1)},availableDates:n,members:r}),c&&d.jsx(T_,{isOpen:w,onClose:()=>{g(!1),f(null)},groupId:e,event:c,onEventSaved:()=>{oe(),g(!1),f(null)},availableDates:[...n,mu(c.date)],members:r}),k&&d.jsx(HB,{isOpen:!!k,onClose:()=>{b(null),L(null),K("")},setlist:k,eventName:S==null?void 0:S.name,eventDate:S==null?void 0:S.date,bandName:M})]})}function GB({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-700 mb-6",children:i}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(yt,{variant:"secondary",onClick:t,children:"Cancelar"}),d.jsx(yt,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function YB({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),Le.success("URL copiada al portapapeles")};return d.jsxs(Du,{open:e,onClose:t,className:"relative z-50",children:[d.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:d.jsxs(Du.Panel,{className:"mx-auto max-w-md w-full sm:max-w-lg rounded-lg bg-white p-4 sm:p-6 max-h-[90vh] overflow-y-auto",children:[d.jsxs(Du.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[d.jsx(q0,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Google Calendar"}),d.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),d.jsx("li",{children:'Selecciona "Desde URL"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Añadir calendario"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre la aplicación Calendario"}),d.jsx("li",{children:"Ve a Archivo → Nueva suscripción a calendario"}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Outlook Calendar"}),d.jsx("li",{children:'Ve a "Añadir calendario" → "Desde Internet"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),d.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[d.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2 min-w-0"}),d.jsxs(yt,{onClick:r,variant:"secondary",size:"sm",className:"flex items-center justify-center gap-1 w-full sm:w-auto",children:[d.jsx(KD,{className:"w-4 h-4"}),d.jsx("span",{className:"sm:hidden",children:"Copiar URL"}),d.jsx("span",{className:"hidden sm:inline",children:"Copiar"})]})]})]})]}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx(yt,{onClick:t,children:"Cerrar"})})]})})]})}const Pp=()=>{const[e,t]=C.useState(!1),[n,r]=C.useState(null),[i,s]=C.useState(!0),[a,l]=C.useState(!1);C.useEffect(()=>{if(a)return;(async()=>{try{console.log("🎵 Checking Spotify auth status...");const b=localStorage.getItem("spotify_access_token"),S=localStorage.getItem("spotify_refresh_token"),L=localStorage.getItem("spotify_token_expiry");if(console.log("🎵 LocalStorage tokens:",{hasAccessToken:!!b,hasRefreshToken:!!S,tokenExpiry:L,isExpired:L?Date.now()>=parseInt(L):"no expiry",accessTokenLength:b==null?void 0:b.length,currentTime:Date.now()}),console.log("🎵 Is authenticated:",$n.isAuthenticated()),$n.isAuthenticated()){console.log("🎵 Getting user data...");const M=await $n.getCurrentUser();console.log("🎵 User data:",M),r(M),t(!0)}}catch(b){console.error("❌ Error checking Spotify auth status:",b),$n.logout(),t(!1),r(null)}finally{s(!1),l(!0)}})()},[a]),C.useEffect(()=>{const k=async()=>{console.log("🎵 useSpotify: Received Spotify auth event, refreshing status...");try{if(console.log("🎵 useSpotify: Checking if authenticated:",$n.isAuthenticated()),$n.isAuthenticated()){console.log("🎵 useSpotify: Getting current user...");const b=await $n.getCurrentUser();console.log("🎵 useSpotify: User data received:",b==null?void 0:b.display_name),r(b),t(!0),console.log("🎵 useSpotify: Auth state updated - authenticated")}else console.log("🎵 useSpotify: Not authenticated, clearing state"),t(!1),r(null)}catch(b){console.error("❌ useSpotify: Error refreshing Spotify auth status:",b),$n.logout(),t(!1),r(null)}};return console.log("🎵 useSpotify: Adding event listener for spotifyAuthCompleted"),window.addEventListener("spotifyAuthCompleted",k),()=>{console.log("🎵 useSpotify: Removing event listener for spotifyAuthCompleted"),window.removeEventListener("spotifyAuthCompleted",k)}},[]);const c=C.useCallback(async()=>{try{console.log("🎵 Starting Spotify login...");const k=await $n.getAuthUrl();console.log("🎵 Got auth URL, redirecting..."),window.location.href=k}catch(k){console.error("❌ Error getting Spotify auth URL:",k),Le.error(`Error al conectar con Spotify: ${k.message}`)}},[]),f=C.useCallback(()=>{$n.logout(),t(!1),r(null),Le.success("Desconectado de Spotify")},[]),p=C.useCallback(async k=>{if(!e)throw new Error("No authenticated with Spotify");try{return await $n.searchTracks(k)}catch(b){throw console.error("Error searching tracks:",b),Le.error("Error al buscar canciones en Spotify"),b}},[e]),m=C.useCallback(async(k,b)=>{if(!e)return Le.error("Debes conectar con Spotify primero"),null;try{const S=await $n.createPlaylist(`Band Plan - ${k}`,"Setlist generado automáticamente desde Band Plan",!1),L=b.filter(M=>M.id).map(M=>`spotify:track:${M.id}`);return L.length>0&&await $n.addTracksToPlaylist(S.id,L),Le.success(`Playlist "${S.name}" creada en Spotify`),S.external_urls.spotify}catch(S){return console.error("Error creating playlist:",S),Le.error("Error al crear playlist en Spotify"),null}},[e]),w=C.useCallback(async k=>{if(!e){Le.error("Debes conectar con Spotify primero");return}try{await $n.playTrack(k)}catch(b){console.error("Error playing track:",b),Le.error("Error al reproducir canción. Asegúrate de tener Spotify abierto.")}},[e]),g=C.useCallback(async()=>{if(e)try{await $n.pausePlayback()}catch(k){console.error("Error pausing playback:",k),Le.error("Error al pausar reproducción")}},[e]),N=C.useCallback(async()=>{if(e)try{await $n.resumePlayback()}catch(k){console.error("Error resuming playback:",k),Le.error("Error al reanudar reproducción")}},[e]),j=C.useCallback(async()=>{try{if($n.isAuthenticated()){const k=await $n.getCurrentUser();r(k),t(!0)}else t(!1),r(null)}catch(k){console.error("❌ Error refreshing Spotify auth status:",k),$n.logout(),t(!1),r(null)}},[]);return{isAuthenticated:e,user:n,loading:i,login:c,logout:f,searchTracks:p,createPlaylistFromSetlist:m,playTrack:w,pausePlayback:g,resumePlayback:N,refreshAuthStatus:j}},KB=({className:e="",compact:t=!1})=>{var p,m;const{isAuthenticated:n,user:r,loading:i,login:s,logout:a,refreshAuthStatus:l}=Pp(),c=()=>{console.log("🎵 Resetting Spotify authentication state..."),$n.clearAuthState(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const w=new URL(window.location.href);(w.searchParams.has("code")||w.searchParams.has("state"))&&(w.searchParams.delete("code"),w.searchParams.delete("state"),w.searchParams.delete("error"),window.history.replaceState({},document.title,w.toString())),Le.success("Estado de Spotify limpiado. Puedes intentar conectar de nuevo.")},f=()=>{console.log("🎵 Manual refresh requested"),l()};return i?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[d.jsx(al,{className:"w-4 h-4 animate-spin text-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Conectando con Spotify..."})]}):n?t?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[((p=r==null?void 0:r.images)==null?void 0:p[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),d.jsx("span",{className:"text-sm text-gray-700",children:r==null?void 0:r.display_name}),d.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Desconectar Spotify",children:d.jsx(Z2,{className:"w-4 h-4"})})]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-3 sm:p-4 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-green-500 p-2 rounded-full flex-shrink-0",children:d.jsx(Jr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[((m=r==null?void 0:r.images)==null?void 0:m[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full flex-shrink-0"}),d.jsxs("span",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:["Conectado como ",r==null?void 0:r.display_name]})]}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Spotify conectado correctamente"})]})]}),d.jsxs(yt,{onClick:a,variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:[d.jsx(Z2,{className:"w-4 h-4 mr-2"}),"Desconectar"]})]})}):t?d.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm ${e}`,children:[d.jsx(Jr,{className:"w-4 h-4"}),"Conectar Spotify"]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[d.jsx("div",{className:"bg-green-500 p-2 sm:p-3 rounded-full flex-shrink-0",children:d.jsx(Jr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"Conecta con Spotify"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Conecta tu cuenta de Spotify para acceder a funciones avanzadas como búsqueda de canciones, creación automática de playlists, y reproducción de previews."}),d.jsxs("ul",{className:"text-xs sm:text-sm text-gray-600 mb-4 space-y-1",children:[d.jsx("li",{children:"• Búsqueda automática de canciones con datos completos"}),d.jsx("li",{children:"• Crear playlists automáticamente desde tus setlists"}),d.jsx("li",{children:"• Reproducir previews de canciones"}),d.jsx("li",{children:"• Control de reproducción desde la app"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[d.jsxs(yt,{onClick:s,variant:"primary",className:"bg-green-500 hover:bg-green-600 text-white w-full sm:w-auto",size:"sm",children:[d.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Conectar con Spotify"]}),d.jsxs(yt,{onClick:f,variant:"secondary",className:"text-blue-600 hover:text-blue-800 w-full sm:w-auto",title:"Actualizar estado de autenticación",size:"sm",children:[d.jsx(o_,{className:"w-4 h-4 mr-2"}),"Refrescar"]}),d.jsxs(yt,{onClick:c,variant:"secondary",className:"text-gray-600 hover:text-gray-800 w-full sm:w-auto",title:"Limpiar estado de Spotify si hay problemas",size:"sm",children:[d.jsx(o_,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})})},JB=({onSpotifyTrackSelect:e,onDeezerTrackSelect:t,onManualAdd:n,placeholder:r="Buscar canciones o añadir manualmente...",className:i=""})=>{const{isAuthenticated:s,searchTracks:a,loading:l}=Pp(),[c,f]=C.useState(""),[p,m]=C.useState([]),[w,g]=C.useState([]),[N,j]=C.useState(!1),[k,b]=C.useState(!1),[S,L]=C.useState(null),M=C.useRef(null),K=C.useRef(null),oe=C.useRef(),Z=c||"";C.useEffect(()=>{const z=ae=>{M.current&&!M.current.contains(ae.target)&&b(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]),C.useEffect(()=>{if(Z.length<2){m([]),g([]);return}return oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{R(Z)},300),()=>{oe.current&&clearTimeout(oe.current)}},[Z,s]);const R=async z=>{if(j(!0),s)try{const ae=await a(z);m(ae),b(!0)}catch(ae){console.error("Error searching tracks:",ae),m([]),b(!0)}else try{const Pe=await(await fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(z)}`)).json();g(Pe.data||[]),b(!0)}catch(ae){console.error("Error searching Deezer:",ae),g([]),b(!0)}j(!1)},ee=z=>{e(z),f(""),m([]),g([]),b(!1),Y()},le=z=>{t&&t(z),f(""),m([]),g([]),b(!1),Y()},O=()=>{n(Z),f(""),m([]),g([]),b(!1),Y()},U=z=>{if(S===z.id){Y();return}if(!z.preview_url){Le.error("Preview no disponible para esta canción");return}Y(),K.current&&(K.current.src=z.preview_url,K.current.play(),L(z.id),K.current.onended=()=>{L(null)})},Y=()=>{K.current&&(K.current.pause(),K.current.currentTime=0),L(null)},J=z=>{window.open(z.external_urls.spotify,"_blank"),Le.success("Abriendo en Spotify")},xe=z=>{const ae=Math.floor(z/6e4),Pe=Math.floor(z%6e4/1e3);return`${ae}:${Pe.toString().padStart(2,"0")}`},ye=z=>{const ae=Math.floor(z/60),Pe=z%60;return`${ae}:${Pe.toString().padStart(2,"0")}`},Q=z=>{if(S===z.id.toString()){Y();return}if(!z.preview){Le.error("Preview no disponible para esta canción");return}Y(),K.current&&(K.current.src=z.preview,K.current.play(),L(z.id.toString()),K.current.onended=()=>{L(null)})},$=z=>{window.open(z.link,"_blank"),Le.success("Abriendo en Deezer")};return l?d.jsx("div",{className:`relative ${i}`,children:d.jsxs("div",{className:"relative",children:[d.jsx(ey,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Cargando...",disabled:!0,value:"",readOnly:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-lg"})]})}):d.jsxs("div",{ref:M,className:`relative ${i}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx(ey,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",value:Z,onChange:z=>f(z.target.value||""),placeholder:r,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg shadow-sm",onFocus:()=>b(!0)}),N&&d.jsx(al,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),k&&d.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[d.jsxs("div",{onClick:O,className:"p-4 hover:bg-blue-50 cursor-pointer border-b border-gray-100 flex items-center gap-3 bg-blue-25",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:d.jsx(Og,{className:"w-6 h-6 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-blue-900",children:"Añadir manualmente"}),d.jsx("p",{className:"text-sm text-blue-600",children:Z?`Crear "${Z}" con formulario`:"Usar formulario manual"})]})]}),s&&p.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100",children:d.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-2",children:[d.jsx(Jr,{className:"w-4 h-4"}),"Resultados de Spotify"]})}),p.map(z=>{var ae,Pe;return d.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:((ae=z.album.images[2])==null?void 0:ae.url)||((Pe=z.album.images[0])==null?void 0:Pe.url),alt:z.album.name,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>ee(z),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:z.name}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:z.artists.map(P=>P.name).join(", ")}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:z.album.name})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(W0,{className:"w-3 h-3"}),xe(z.duration_ms)]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(QD,{className:"w-3 h-3"}),z.popularity,"%"]})]})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[z.preview_url&&d.jsx("button",{onClick:P=>{P.stopPropagation(),U(z)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Preview (30s)",children:S===z.id?d.jsx(s_,{className:"w-4 h-4"}):d.jsx(a_,{className:"w-4 h-4"})}),d.jsx("button",{onClick:P=>{P.stopPropagation(),J(z)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Abrir en Spotify",children:d.jsx(Q2,{className:"w-4 h-4"})})]})]})},z.id)})]}),!s&&w.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-orange-50 border-b border-orange-100",children:d.jsxs("p",{className:"text-sm text-orange-700 font-medium flex items-center gap-2",children:[d.jsx(Jr,{className:"w-4 h-4"}),"Resultados de Deezer"]})}),w.map(z=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:z.album.cover_small||z.album.cover,alt:z.album.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>le(z),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:z.title}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:z.artist.name}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:z.album.title})]}),d.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(W0,{className:"w-3 h-3"}),ye(z.duration)]})})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[z.preview&&d.jsx("button",{onClick:ae=>{ae.stopPropagation(),Q(z)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Preview (30s)",children:S===z.id.toString()?d.jsx(s_,{className:"w-4 h-4"}):d.jsx(a_,{className:"w-4 h-4"})}),d.jsx("button",{onClick:ae=>{ae.stopPropagation(),$(z)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Abrir en Deezer",children:d.jsx(Q2,{className:"w-4 h-4"})})]})]})},z.id))]}),s&&p.length===0&&!N&&Z.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(Jr,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Spotify para "',Z,'"']})]}),!s&&w.length===0&&!N&&Z.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(Jr,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Deezer para "',Z,'"']})]})]}),d.jsx("audio",{ref:K})]})},Z_={title:"",artist:"",duration_minutes:"",key:"",notes:""},e3=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function XB({groupId:e,canManageSongs:t=!0}){const[n,r]=C.useState([]),[i,s]=C.useState(!0),[a,l]=C.useState(!1),[c,f]=C.useState(null),[p,m]=C.useState(Z_),[w,g]=C.useState(!1),[N,j]=C.useState(null),[k,b]=C.useState(null),[S,L]=C.useState(""),[M,K]=C.useState(!1),[oe,Z]=C.useState(null),[R,ee]=C.useState(""),[le,O]=C.useState(""),[U,Y]=C.useState("");Pp();const J=n.filter(te=>{var he;const Ne=!R||te.title.toLowerCase().includes(R.toLowerCase())||((he=te.artist)==null?void 0:he.toLowerCase().includes(R.toLowerCase())),ie=!le||te.key===le,pe=!U||te.type===U;return Ne&&ie&&pe}),xe=[...new Set(n.map(te=>te.key).filter(Boolean))].sort();C.useEffect(()=>{ye()},[e]),hp({table:"songs",filter:`group_id=eq.${e}`,onInsert:te=>{r(Ne=>[...Ne,te.new]),Le.success("Nueva canción añadida en tiempo real")},onUpdate:te=>{r(Ne=>Ne.map(ie=>ie.id===te.new.id?te.new:ie))},onDelete:te=>{r(Ne=>Ne.filter(ie=>ie.id!==te.old.id)),Le.success("Canción eliminada en tiempo real")},enabled:!!e});const ye=async()=>{s(!0);const te=await Z0(e);te&&r(te),s(!1)},Q=async te=>{const{data:{user:Ne}}=await et.auth.getUser();if(!Ne){Le.error("No se pudo obtener la información del usuario");return}const ie=Math.round(te.duration_ms/6e4),pe=`Popularidad: ${te.popularity}% | Álbum: ${te.album.name} (${te.album.release_date.split("-")[0]})`,he={title:te.name,artist:te.artists.map(je=>je.name).join(", "),duration_minutes:ie.toString(),key:"",notes:pe,group_id:e,created_by:Ne.id};try{await c0(he),await ye(),Le.success(`"${te.name}" añadida desde Spotify`)}catch(je){console.error("Error creating song from Spotify:",je),Le.error("Error al añadir la canción")}},$=async te=>{const{data:{user:Ne}}=await et.auth.getUser();if(!Ne){Le.error("No se pudo obtener la información del usuario");return}const ie=Math.round(te.duration/60),pe=`Álbum: ${te.album.title} | Fuente: Deezer`,he={title:te.title,artist:te.artist.name,duration_minutes:ie.toString(),key:"",notes:pe,group_id:e,created_by:Ne.id};try{await c0(he),await ye(),Le.success(`"${te.title}" añadida desde Deezer`)}catch(je){console.error("Error creating song from Deezer:",je),Le.error("Error al añadir la canción")}},z=async te=>{if(te.preventDefault(),!p.title.trim()){Le.error("El título es obligatorio");return}const{data:{user:Ne}}=await et.auth.getUser();if(!Ne){Le.error("No se pudo obtener la información del usuario");return}const ie={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:Ne.id};if(c){const pe=await A_(c.id,ie);pe&&(Le.success("Canción actualizada correctamente"),r(he=>he.map(je=>je.id===c.id?pe:je)))}else{const pe=await c0(ie);pe&&(Le.success("Canción creada correctamente"),r(he=>[...he,pe]))}H()},ae=te=>{var Ne;f(te),m({title:te.title,artist:te.artist||"",duration_minutes:((Ne=te.duration_minutes)==null?void 0:Ne.toString())||"",key:te.key||"",notes:te.notes||""}),l(!0)},Pe=te=>{j(te),g(!0)},P=async()=>{if(!N)return;console.log("Eliminando canción:",N.id);const te=await M$(N.id);console.log("Resultado de eliminación:",te),te?(Le.success("Canción eliminada correctamente"),r(Ne=>Ne.filter(ie=>ie.id!==N.id))):Le.error("No se pudo eliminar la canción"),g(!1),j(null)},H=()=>{m(Z_),f(null),l(!1)},re=te=>{if(!te)return"-";const Ne=Math.floor(te/60),ie=te%60;return Ne>0?`${Ne}h ${ie}m`:`${ie}m`},ce=te=>{if(!te)return"-";const Ne=te.match(/Tempo:\s*(\d+)\s*BPM/i);return Ne?`${Ne[1]}`:"-"},fe=(te,Ne,ie)=>{b({songId:te,field:Ne}),L(String(ie||"")),Z(null)},Ee=async(te,Ne)=>{if(S===(te[Ne]||"")){b(null);return}K(!0),Z(null);const ie=await A_(te.id,{[Ne]:Ne==="duration_minutes"?parseInt(S)||null:S||null});K(!1),ie?(r(pe=>pe.map(he=>he.id===te.id?{...he,...ie}:he)),b(null)):Z("Error al guardar")},Ce=(te,Ne,ie)=>{te.key==="Enter"?(te.preventDefault(),Ee(Ne,ie)):te.key==="Escape"&&b(null)};return i?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:d.jsx(YM,{rows:8})})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),d.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:d.jsx(KB,{compact:!0})})]})}),t&&d.jsx("div",{className:"mb-6",children:d.jsx(JB,{onSpotifyTrackSelect:Q,onDeezerTrackSelect:$,onManualAdd:te=>{te&&m(Ne=>({...Ne,title:te})),l(!0)},className:"w-full"})}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),a&&t&&d.jsxs("form",{onSubmit:z,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Canción":"Nueva Canción"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Gn,{label:"Título *",value:p.title,onChange:te=>m({...p,title:te.target.value}),required:!0}),d.jsx(Gn,{label:"Artista",value:p.artist,onChange:te=>m({...p,artist:te.target.value})}),d.jsx(Gn,{label:"Duración (minutos)",type:"number",value:p.duration_minutes,onChange:te=>m({...p,duration_minutes:te.target.value}),min:"1"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),d.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:te=>m({...p,key:te.target.value}),children:e3.map(te=>d.jsx("option",{value:te,children:te||"Sin especificar"},te))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),d.jsx("textarea",{value:p.notes,onChange:te=>m({...p,notes:te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la canción..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(yt,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),d.jsx(yt,{type:"button",variant:"secondary",onClick:H,children:"Cancelar"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Añade la primera canción para empezar."}):J.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No se encontraron canciones que coincidan con los filtros aplicados.",d.jsx("button",{onClick:()=>{ee(""),O(""),Y("")},className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar filtros"})]}):d.jsxs("div",{className:"overflow-x-auto",children:[d.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",J.length," de ",n.length," canciones"]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(ey,{className:"w-3 h-3 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Buscar...",value:R,onChange:te=>ee(te.target.value),className:"w-20 sm:w-24 px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400 focus:w-28 sm:focus:w-32 transition-all"})]}),d.jsxs("select",{value:le,onChange:te=>O(te.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Clave"}),xe.map(te=>d.jsx("option",{value:te,children:te},te))]}),d.jsxs("select",{value:U,onChange:te=>Y(te.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Tipo"}),d.jsx("option",{value:"song",children:"Canciones"}),d.jsx("option",{value:"medley",children:"Medleys"})]})]})]})}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duración"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BPM"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(te=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(k==null?void 0:k.songId)===te.id&&k.field==="title"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:Ne=>L(Ne.target.value),onBlur:()=>Ee(te,"title"),onKeyDown:Ne=>Ce(Ne,te,"title"),disabled:M}):d.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&fe(te.id,"title",te.title),title:"Haz clic para editar",children:te.title}),(k==null?void 0:k.songId)===te.id&&oe&&d.jsx("div",{className:"text-xs text-red-500 mt-1",children:oe})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(k==null?void 0:k.songId)===te.id&&k.field==="artist"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:Ne=>L(Ne.target.value),onBlur:()=>Ee(te,"artist"),onKeyDown:Ne=>Ce(Ne,te,"artist"),disabled:M}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&fe(te.id,"artist",te.artist||""),title:"Haz clic para editar",children:te.artist||d.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(k==null?void 0:k.songId)===te.id&&k.field==="duration_minutes"?d.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:S,autoFocus:!0,onChange:Ne=>L(Ne.target.value),onBlur:()=>Ee(te,"duration_minutes"),onKeyDown:Ne=>Ce(Ne,te,"duration_minutes"),disabled:M}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var Ne;return t&&fe(te.id,"duration_minutes",((Ne=te.duration_minutes)==null?void 0:Ne.toString())||"")},title:"Haz clic para editar",children:re(te.duration_minutes)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(k==null?void 0:k.songId)===te.id&&k.field==="key"?d.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:Ne=>L(Ne.target.value),onBlur:()=>Ee(te,"key"),onKeyDown:Ne=>Ce(Ne,te,"key"),disabled:M,children:e3.map(Ne=>d.jsx("option",{value:Ne,children:Ne||"Sin especificar"},Ne))}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&fe(te.id,"key",te.key||""),title:"Haz clic para editar",children:te.key||d.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:d.jsx("div",{className:"cursor-default",children:ce(te.notes)==="-"?d.jsx("span",{className:"text-gray-400",children:"-"}):d.jsx("span",{className:"font-medium",children:ce(te.notes)})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>ae(te),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),d.jsx("button",{onClick:()=>Pe(te),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},te.id))})]})]})}),w&&N&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar la canción "',N.title,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>{g(!1),j(null)},children:"Cancelar"}),d.jsx(yt,{variant:"danger",onClick:P,children:"Eliminar"})]})]})})]})}var M6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t3=pt.createContext&&pt.createContext(M6),QB=["attr","size","title"];function ZB(e,t){if(e==null)return{};var n=eU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rg.apply(this,arguments)}function n3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ig(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n3(Object(n),!0).forEach(function(r){tU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tU(e,t,n){return t=nU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nU(e){var t=rU(e,"string");return typeof t=="symbol"?t:t+""}function rU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R6(e){return e&&e.map((t,n)=>pt.createElement(t.tag,ig({key:n},t.attr),R6(t.child)))}function _o(e){return t=>pt.createElement(iU,rg({attr:ig({},e.attr)},t),R6(e.child))}function iU(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=ZB(e,QB),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),pt.createElement("svg",rg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:ig(ig({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&pt.createElement("title",null,s),e.children)};return t3!==void 0?pt.createElement(t3.Consumer,null,n=>t(n)):t(M6)}function sU(e){return _o({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function aU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function oU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function lU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function F6(e){return _o({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function cU(e){return _o({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function uU(e){return _o({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function by(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function r3(e){return _o({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function dU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function fU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Z5(e){return"nodeType"in e}function ps(e){var t,n;return e?Tf(e)?e:Z5(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ew(e){const{Document:t}=ps(e);return e instanceof t}function Tp(e){return Tf(e)?!1:e instanceof ps(e).HTMLElement}function $6(e){return e instanceof ps(e).SVGElement}function If(e){return e?Tf(e)?e.document:Z5(e)?ew(e)?e:Tp(e)||$6(e)?e.ownerDocument:document:document:document}const wo=Yg?C.useLayoutEffect:C.useEffect;function tw(e){const t=C.useRef(e);return wo(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function hU(){const e=C.useRef(null),t=C.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=C.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function pp(e,t){t===void 0&&(t=[e]);const n=C.useRef(e);return wo(()=>{n.current!==e&&(n.current=e)},t),n}function Ip(e,t){const n=C.useRef();return C.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function sg(e){const t=tw(e),n=C.useRef(null),r=C.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function _y(e){const t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}let $v={};function Dp(e,t){return C.useMemo(()=>{if(t)return t;const n=$v[e]==null?0:$v[e]+1;return $v[e]=n,e+"-"+n},[e,t])}function B6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[c,f]of l){const p=s[c];p!=null&&(s[c]=p+e*f)}return s},{...t})}}const pf=B6(1),ag=B6(-1);function pU(e){return"clientX"in e&&"clientY"in e}function nw(e){if(!e)return!1;const{KeyboardEvent:t}=ps(e.target);return t&&e instanceof t}function mU(e){if(!e)return!1;const{TouchEvent:t}=ps(e.target);return t&&e instanceof t}function Sy(e){if(mU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pU(e)?{x:e.clientX,y:e.clientY}:null}const mp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[mp.Translate.toString(e),mp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),i3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gU(e){return e.matches(i3)?e:e.querySelector(i3)}const vU={display:"none"};function yU(e){let{id:t,value:n}=e;return pt.createElement("div",{id:t,style:vU},n)}function wU(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function xU(){const[e,t]=C.useState("");return{announce:C.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const U6=C.createContext(null);function bU(e){const t=C.useContext(U6);C.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function _U(){const[e]=C.useState(()=>new Set),t=C.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[C.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const SU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},NU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function jU(e){let{announcements:t=NU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=SU}=e;const{announce:s,announcement:a}=xU(),l=Dp("DndLiveRegion"),[c,f]=C.useState(!1);if(C.useEffect(()=>{f(!0)},[]),bU(C.useMemo(()=>({onDragStart(m){let{active:w}=m;s(t.onDragStart({active:w}))},onDragMove(m){let{active:w,over:g}=m;t.onDragMove&&s(t.onDragMove({active:w,over:g}))},onDragOver(m){let{active:w,over:g}=m;s(t.onDragOver({active:w,over:g}))},onDragEnd(m){let{active:w,over:g}=m;s(t.onDragEnd({active:w,over:g}))},onDragCancel(m){let{active:w,over:g}=m;s(t.onDragCancel({active:w,over:g}))}}),[s,t])),!c)return null;const p=pt.createElement(pt.Fragment,null,pt.createElement(yU,{id:r,value:i.draggable}),pt.createElement(wU,{id:l,announcement:a}));return n?Au.createPortal(p,n):p}var $r;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})($r||($r={}));function og(){}function Bv(e,t){return C.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function kU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ra=Object.freeze({x:0,y:0});function EU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function CU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function AU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function LU(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function s3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const PU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=s3(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const f=EU(s3(c),i);s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(CU)};function TU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const c=t.width*t.height,f=e.width*e.height,p=a*l,m=p/(c+f-p);return Number(m.toFixed(4))}return 0}const IU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=TU(l,t);c>0&&i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(AU)};function DU(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function z6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ra}function OU(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const MU=OU(1);function RU(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function FU(e,t,n){const r=RU(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,m=s?e.height/s:e.height;return{width:p,height:m,top:f,right:c+p,bottom:f+m,left:c}}const $U={ignoreTransform:!1};function Df(e,t){t===void 0&&(t=$U);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=ps(e).getComputedStyle(e);f&&(n=FU(n,f,p))}const{top:r,left:i,width:s,height:a,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:c}}function a3(e){return Df(e,{ignoreTransform:!0})}function BU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function UU(e,t){return t===void 0&&(t=ps(e).getComputedStyle(e)),t.position==="fixed"}function zU(e,t){t===void 0&&(t=ps(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function rw(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(ew(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Tp(i)||$6(i)||n.includes(i))return n;const s=ps(e).getComputedStyle(i);return i!==e&&zU(i,s)&&n.push(i),UU(i,s)?n:r(i.parentNode)}return e?r(e):n}function q6(e){const[t]=rw(e,1);return t??null}function Uv(e){return!Yg||!e?null:Tf(e)?e:Z5(e)?ew(e)||e===If(e).scrollingElement?window:Tp(e)?e:null:null}function W6(e){return Tf(e)?e.scrollX:e.scrollLeft}function H6(e){return Tf(e)?e.scrollY:e.scrollTop}function Ny(e){return{x:W6(e),y:H6(e)}}var Kr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Kr||(Kr={}));function V6(e){return!Yg||!e?!1:e===document.scrollingElement}function G6(e){const t={x:0,y:0},n=V6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const qU={x:.2,y:.2};function WU(e,t,n,r,i){let{top:s,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=qU);const{isTop:f,isBottom:p,isLeft:m,isRight:w}=G6(e),g={x:0,y:0},N={x:0,y:0},j={height:t.height*i.y,width:t.width*i.x};return!f&&s<=t.top+j.height?(g.y=Kr.Backward,N.y=r*Math.abs((t.top+j.height-s)/j.height)):!p&&c>=t.bottom-j.height&&(g.y=Kr.Forward,N.y=r*Math.abs((t.bottom-j.height-c)/j.height)),!w&&l>=t.right-j.width?(g.x=Kr.Forward,N.x=r*Math.abs((t.right-j.width-l)/j.width)):!m&&a<=t.left+j.width&&(g.x=Kr.Backward,N.x=r*Math.abs((t.left+j.width-a)/j.width)),{direction:g,speed:N}}function HU(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Y6(e){return e.reduce((t,n)=>pf(t,Ny(n)),Ra)}function VU(e){return e.reduce((t,n)=>t+W6(n),0)}function GU(e){return e.reduce((t,n)=>t+H6(n),0)}function YU(e,t){if(t===void 0&&(t=Df),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);q6(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const KU=[["x",["left","right"],VU],["y",["top","bottom"],GU]];class iw{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rw(n),i=Y6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of KU)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=l(r),p=i[s]-f;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class zh{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function JU(e){const{EventTarget:t}=ps(e);return e instanceof t?e:If(e)}function zv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Qs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Qs||(Qs={}));function o3(e){e.preventDefault()}function XU(e){e.stopPropagation()}var yn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(yn||(yn={}));const K6={start:[yn.Space,yn.Enter],cancel:[yn.Esc],end:[yn.Space,yn.Enter,yn.Tab]},QU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case yn.Right:return{...n,x:n.x+25};case yn.Left:return{...n,x:n.x-25};case yn.Down:return{...n,y:n.y+25};case yn.Up:return{...n,y:n.y-25}}};class sw{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new zh(If(n)),this.windowListeners=new zh(ps(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Qs.Resize,this.handleCancel),this.windowListeners.add(Qs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Qs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&YU(r),n(Ra)}handleKeyDown(t){if(nw(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=K6,coordinateGetter:a=QU,scrollBehavior:l="smooth"}=i,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,p=f?{x:f.left,y:f.top}:Ra;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(t,{active:n,context:r.current,currentCoordinates:p});if(m){const w=ag(m,p),g={x:0,y:0},{scrollableAncestors:N}=r.current;for(const j of N){const k=t.code,{isTop:b,isRight:S,isLeft:L,isBottom:M,maxScroll:K,minScroll:oe}=G6(j),Z=HU(j),R={x:Math.min(k===yn.Right?Z.right-Z.width/2:Z.right,Math.max(k===yn.Right?Z.left:Z.left+Z.width/2,m.x)),y:Math.min(k===yn.Down?Z.bottom-Z.height/2:Z.bottom,Math.max(k===yn.Down?Z.top:Z.top+Z.height/2,m.y))},ee=k===yn.Right&&!S||k===yn.Left&&!L,le=k===yn.Down&&!M||k===yn.Up&&!b;if(ee&&R.x!==m.x){const O=j.scrollLeft+w.x,U=k===yn.Right&&O<=K.x||k===yn.Left&&O>=oe.x;if(U&&!w.y){j.scrollTo({left:O,behavior:l});return}U?g.x=j.scrollLeft-O:g.x=k===yn.Right?j.scrollLeft-K.x:j.scrollLeft-oe.x,g.x&&j.scrollBy({left:-g.x,behavior:l});break}else if(le&&R.y!==m.y){const O=j.scrollTop+w.y,U=k===yn.Down&&O<=K.y||k===yn.Up&&O>=oe.y;if(U&&!w.x){j.scrollTo({top:O,behavior:l});return}U?g.y=j.scrollTop-O:g.y=k===yn.Down?j.scrollTop-K.y:j.scrollTop-oe.y,g.y&&j.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,pf(ag(m,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sw.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=K6,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function l3(e){return!!(e&&"distance"in e)}function c3(e){return!!(e&&"delay"in e)}class aw{constructor(t,n,r){var i;r===void 0&&(r=JU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=If(a),this.documentListeners=new zh(this.document),this.listeners=new zh(r),this.windowListeners=new zh(ps(a)),this.initialCoordinates=(i=Sy(s))!=null?i:Ra,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Qs.Resize,this.handleCancel),this.windowListeners.add(Qs.DragStart,o3),this.windowListeners.add(Qs.VisibilityChange,this.handleCancel),this.windowListeners.add(Qs.ContextMenu,o3),this.documentListeners.add(Qs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(c3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(l3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Qs.Click,XU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Qs.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=Sy(t))!=null?n:Ra,f=ag(i,c);if(!r&&l){if(l3(l)){if(l.tolerance!=null&&zv(f,l.tolerance))return this.handleCancel();if(zv(f,l.distance))return this.handleStart()}if(c3(l)&&zv(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===yn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ZU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ow extends aw{constructor(t){const{event:n}=t,r=If(n.target);super(t,ZU,r)}}ow.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const ez={move:{name:"mousemove"},end:{name:"mouseup"}};var jy;(function(e){e[e.RightClick=2]="RightClick"})(jy||(jy={}));class tz extends aw{constructor(t){super(t,ez,If(t.event.target))}}tz.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===jy.RightClick?!1:(r==null||r({event:n}),!0)}}];const qv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class J6 extends aw{constructor(t){super(t,qv)}static setup(){return window.addEventListener(qv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(qv.move.name,t)};function t(){}}}J6.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var qh;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(qh||(qh={}));var lg;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(lg||(lg={}));function nz(e){let{acceleration:t,activator:n=qh.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=lg.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:p,delta:m,threshold:w}=e;const g=iz({delta:m,disabled:!s}),[N,j]=hU(),k=C.useRef({x:0,y:0}),b=C.useRef({x:0,y:0}),S=C.useMemo(()=>{switch(n){case qh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case qh.DraggableRect:return i}},[n,i,c]),L=C.useRef(null),M=C.useCallback(()=>{const oe=L.current;if(!oe)return;const Z=k.current.x*b.current.x,R=k.current.y*b.current.y;oe.scrollBy(Z,R)},[]),K=C.useMemo(()=>l===lg.TreeOrder?[...f].reverse():f,[l,f]);C.useEffect(()=>{if(!s||!f.length||!S){j();return}for(const oe of K){if((r==null?void 0:r(oe))===!1)continue;const Z=f.indexOf(oe),R=p[Z];if(!R)continue;const{direction:ee,speed:le}=WU(oe,R,S,t,w);for(const O of["x","y"])g[O][ee[O]]||(le[O]=0,ee[O]=0);if(le.x>0||le.y>0){j(),L.current=oe,N(M,a),k.current=le,b.current=ee;return}}k.current={x:0,y:0},b.current={x:0,y:0},j()},[t,M,r,j,s,a,JSON.stringify(S),JSON.stringify(g),N,f,K,p,JSON.stringify(w)])}const rz={x:{[Kr.Backward]:!1,[Kr.Forward]:!1},y:{[Kr.Backward]:!1,[Kr.Forward]:!1}};function iz(e){let{delta:t,disabled:n}=e;const r=_y(t);return Ip(i=>{if(n||!r||!i)return rz;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Kr.Backward]:i.x[Kr.Backward]||s.x===-1,[Kr.Forward]:i.x[Kr.Forward]||s.x===1},y:{[Kr.Backward]:i.y[Kr.Backward]||s.y===-1,[Kr.Forward]:i.y[Kr.Forward]||s.y===1}}},[n,t,r])}function sz(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ip(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function az(e,t){return C.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var gp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(gp||(gp={}));var ky;(function(e){e.Optimized="optimized"})(ky||(ky={}));const u3=new Map;function oz(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=C.useState(null),{frequency:l,measure:c,strategy:f}=i,p=C.useRef(e),m=k(),w=pp(m),g=C.useCallback(function(b){b===void 0&&(b=[]),!w.current&&a(S=>S===null?b:S.concat(b.filter(L=>!S.includes(L))))},[w]),N=C.useRef(null),j=Ip(b=>{if(m&&!n)return u3;if(!b||b===u3||p.current!==e||s!=null){const S=new Map;for(let L of e){if(!L)continue;if(s&&s.length>0&&!s.includes(L.id)&&L.rect.current){S.set(L.id,L.rect.current);continue}const M=L.node.current,K=M?new iw(c(M),M):null;L.rect.current=K,K&&S.set(L.id,K)}return S}return b},[e,s,n,m,c]);return C.useEffect(()=>{p.current=e},[e]),C.useEffect(()=>{m||g()},[n,m]),C.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),C.useEffect(()=>{m||typeof l!="number"||N.current!==null||(N.current=setTimeout(()=>{g(),N.current=null},l))},[l,m,g,...r]),{droppableRects:j,measureDroppableContainers:g,measuringScheduled:s!=null};function k(){switch(f){case gp.Always:return!1;case gp.BeforeDragging:return n;default:return!n}}}function X6(e,t){return Ip(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function lz(e,t){return X6(e,t)}function cz(e){let{callback:t,disabled:n}=e;const r=tw(t),i=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return C.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Kg(e){let{callback:t,disabled:n}=e;const r=tw(t),i=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return C.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function uz(e){return new iw(Df(e),e)}function d3(e,t,n){t===void 0&&(t=uz);const[r,i]=C.useState(null);function s(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=cz({callback(c){if(e)for(const f of c){const{type:p,target:m}=f;if(p==="childList"&&m instanceof HTMLElement&&m.contains(e)){s();break}}}}),l=Kg({callback:s});return wo(()=>{s(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function dz(e){const t=X6(e);return z6(e,t)}const f3=[];function fz(e){const t=C.useRef(e),n=Ip(r=>e?r&&r!==f3&&e&&t.current&&e.parentNode===t.current.parentNode?r:rw(e):f3,[e]);return C.useEffect(()=>{t.current=e},[e]),n}function hz(e){const[t,n]=C.useState(null),r=C.useRef(e),i=C.useCallback(s=>{const a=Uv(s.target);a&&n(l=>l?(l.set(a,Ny(a)),new Map(l)):null)},[]);return C.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(c=>{const f=Uv(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Ny(f)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(c=>{const f=Uv(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),C.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>pf(s,a),Ra):Y6(e):Ra,[e,t])}function h3(e,t){t===void 0&&(t=[]);const n=C.useRef(null);return C.useEffect(()=>{n.current=null},t),C.useEffect(()=>{const r=e!==Ra;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ag(e,n.current):Ra}function pz(e){C.useEffect(()=>{if(!Yg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function mz(e,t){return C.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function Q6(e){return C.useMemo(()=>e?BU(e):null,[e])}const p3=[];function gz(e,t){t===void 0&&(t=Df);const[n]=e,r=Q6(n?ps(n):null),[i,s]=C.useState(p3);function a(){s(()=>e.length?e.map(c=>V6(c)?r:new iw(t(c),c)):p3)}const l=Kg({callback:a});return wo(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),i}function vz(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Tp(t)?t:e}function yz(e){let{measure:t}=e;const[n,r]=C.useState(null),i=C.useCallback(f=>{for(const{target:p}of f)if(Tp(p)){r(m=>{const w=t(p);return m?{...m,width:w.width,height:w.height}:w});break}},[t]),s=Kg({callback:i}),a=C.useCallback(f=>{const p=vz(f);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[l,c]=sg(a);return C.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const wz=[{sensor:ow,options:{}},{sensor:sw,options:{}}],xz={current:{}},p0={draggable:{measure:a3},droppable:{measure:a3,strategy:gp.WhileDragging,frequency:ky.Optimized},dragOverlay:{measure:Df}};class Wh extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const bz={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:og},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:p0,measureDroppableContainers:og,windowRect:null,measuringScheduled:!1},_z={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:og,draggableNodes:new Map,over:null,measureDroppableContainers:og},Jg=C.createContext(_z),Z6=C.createContext(bz);function Sz(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wh}}}function Nz(e,t){switch(t.type){case $r.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case $r.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case $r.DragEnd:case $r.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $r.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Wh(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case $r.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Wh(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case $r.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Wh(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function jz(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=C.useContext(Jg),s=_y(r),a=_y(n==null?void 0:n.id);return C.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!nw(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:c,node:f}=l;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[c.current,f.current]){if(!p)continue;const m=gU(p);if(m){m.focus();break}}})}},[r,t,i,a,s]),null}function kz(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function Ez(e){return C.useMemo(()=>({draggable:{...p0.draggable,...e==null?void 0:e.draggable},droppable:{...p0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...p0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Cz(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=C.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;wo(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const p=n(f),m=z6(p,r);if(a||(m.x=0),l||(m.y=0),s.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const w=q6(f);w&&w.scrollBy({top:m.y,left:m.x})}},[t,a,l,r,n])}const ej=C.createContext({...Ra,scaleX:1,scaleY:1});var oc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(oc||(oc={}));const Az=C.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:c=!0,children:f,sensors:p=wz,collisionDetection:m=IU,measuring:w,modifiers:g,...N}=t;const j=C.useReducer(Nz,void 0,Sz),[k,b]=j,[S,L]=_U(),[M,K]=C.useState(oc.Uninitialized),oe=M===oc.Initialized,{draggable:{active:Z,nodes:R,translate:ee},droppable:{containers:le}}=k,O=Z!=null?R.get(Z):null,U=C.useRef({initial:null,translated:null}),Y=C.useMemo(()=>{var Sn;return Z!=null?{id:Z,data:(Sn=O==null?void 0:O.data)!=null?Sn:xz,rect:U}:null},[Z,O]),J=C.useRef(null),[xe,ye]=C.useState(null),[Q,$]=C.useState(null),z=pp(N,Object.values(N)),ae=Dp("DndDescribedBy",a),Pe=C.useMemo(()=>le.getEnabled(),[le]),P=Ez(w),{droppableRects:H,measureDroppableContainers:re,measuringScheduled:ce}=oz(Pe,{dragging:oe,dependencies:[ee.x,ee.y],config:P.droppable}),fe=sz(R,Z),Ee=C.useMemo(()=>Q?Sy(Q):null,[Q]),Ce=ci(),te=lz(fe,P.draggable.measure);Cz({activeNode:Z!=null?R.get(Z):null,config:Ce.layoutShiftCompensation,initialRect:te,measure:P.draggable.measure});const Ne=d3(fe,P.draggable.measure,te),ie=d3(fe?fe.parentElement:null),pe=C.useRef({activatorEvent:null,active:null,activeNode:fe,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:le,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),he=le.getNodeFor((n=pe.current.over)==null?void 0:n.id),je=yz({measure:P.dragOverlay.measure}),ue=(r=je.nodeRef.current)!=null?r:fe,G=oe?(i=je.rect)!=null?i:Ne:null,$e=!!(je.nodeRef.current&&je.rect),Fe=dz($e?null:Ne),De=Q6(ue?ps(ue):null),Be=fz(oe?he??fe:null),be=gz(Be),Ie=kz(g,{transform:{x:ee.x-Fe.x,y:ee.y-Fe.y,scaleX:1,scaleY:1},activatorEvent:Q,active:Y,activeNodeRect:Ne,containerNodeRect:ie,draggingNodeRect:G,over:pe.current.over,overlayNodeRect:je.rect,scrollableAncestors:Be,scrollableAncestorRects:be,windowRect:De}),We=Ee?pf(Ee,ee):null,He=hz(Be),nt=h3(He),dt=h3(He,[Ne]),ft=pf(Ie,nt),Nt=G?MU(G,Ie):null,it=Y&&Nt?m({active:Y,collisionRect:Nt,droppableRects:H,droppableContainers:Pe,pointerCoordinates:We}):null,St=LU(it,"id"),[Ze,Zt]=C.useState(null),Mt=$e?Ie:pf(Ie,dt),fr=DU(Mt,(s=Ze==null?void 0:Ze.rect)!=null?s:null,Ne),Rt=C.useRef(null),sn=C.useCallback((Sn,Yt)=>{let{sensor:wt,options:zt}=Yt;if(J.current==null)return;const hr=R.get(J.current);if(!hr)return;const an=Sn.nativeEvent,rr=new wt({active:J.current,activeNode:hr,event:an,options:zt,context:pe,onAbort(ht){if(!R.get(ht))return;const{onDragAbort:ir}=z.current,En={id:ht};ir==null||ir(En),S({type:"onDragAbort",event:En})},onPending(ht,Kn,ir,En){if(!R.get(ht))return;const{onDragPending:Cn}=z.current,Jn={id:ht,constraint:Kn,initialCoordinates:ir,offset:En};Cn==null||Cn(Jn),S({type:"onDragPending",event:Jn})},onStart(ht){const Kn=J.current;if(Kn==null)return;const ir=R.get(Kn);if(!ir)return;const{onDragStart:En}=z.current,Tn={activatorEvent:an,active:{id:Kn,data:ir.data,rect:U}};Au.unstable_batchedUpdates(()=>{En==null||En(Tn),K(oc.Initializing),b({type:$r.DragStart,initialCoordinates:ht,active:Kn}),S({type:"onDragStart",event:Tn}),ye(Rt.current),$(an)})},onMove(ht){b({type:$r.DragMove,coordinates:ht})},onEnd:Dr($r.DragEnd),onCancel:Dr($r.DragCancel)});Rt.current=rr;function Dr(ht){return async function(){const{active:ir,collisions:En,over:Tn,scrollAdjustedTranslate:Cn}=pe.current;let Jn=null;if(ir&&Cn){const{cancelDrop:Ui}=z.current;Jn={activatorEvent:an,active:ir,collisions:En,delta:Cn,over:Tn},ht===$r.DragEnd&&typeof Ui=="function"&&await Promise.resolve(Ui(Jn))&&(ht=$r.DragCancel)}J.current=null,Au.unstable_batchedUpdates(()=>{b({type:ht}),K(oc.Uninitialized),Zt(null),ye(null),$(null),Rt.current=null;const Ui=ht===$r.DragEnd?"onDragEnd":"onDragCancel";if(Jn){const ki=z.current[Ui];ki==null||ki(Jn),S({type:Ui,event:Jn})}})}}},[R]),li=C.useCallback((Sn,Yt)=>(wt,zt)=>{const hr=wt.nativeEvent,an=R.get(zt);if(J.current!==null||!an||hr.dndKit||hr.defaultPrevented)return;const rr={active:an};Sn(wt,Yt.options,rr)===!0&&(hr.dndKit={capturedBy:Yt.sensor},J.current=zt,sn(wt,Yt))},[R,sn]),en=az(p,li);pz(p),wo(()=>{Ne&&M===oc.Initializing&&K(oc.Initialized)},[Ne,M]),C.useEffect(()=>{const{onDragMove:Sn}=z.current,{active:Yt,activatorEvent:wt,collisions:zt,over:hr}=pe.current;if(!Yt||!wt)return;const an={active:Yt,activatorEvent:wt,collisions:zt,delta:{x:ft.x,y:ft.y},over:hr};Au.unstable_batchedUpdates(()=>{Sn==null||Sn(an),S({type:"onDragMove",event:an})})},[ft.x,ft.y]),C.useEffect(()=>{const{active:Sn,activatorEvent:Yt,collisions:wt,droppableContainers:zt,scrollAdjustedTranslate:hr}=pe.current;if(!Sn||J.current==null||!Yt||!hr)return;const{onDragOver:an}=z.current,rr=zt.get(St),Dr=rr&&rr.rect.current?{id:rr.id,rect:rr.rect.current,data:rr.data,disabled:rr.disabled}:null,ht={active:Sn,activatorEvent:Yt,collisions:wt,delta:{x:hr.x,y:hr.y},over:Dr};Au.unstable_batchedUpdates(()=>{Zt(Dr),an==null||an(ht),S({type:"onDragOver",event:ht})})},[St]),wo(()=>{pe.current={activatorEvent:Q,active:Y,activeNode:fe,collisionRect:Nt,collisions:it,droppableRects:H,draggableNodes:R,draggingNode:ue,draggingNodeRect:G,droppableContainers:le,over:Ze,scrollableAncestors:Be,scrollAdjustedTranslate:ft},U.current={initial:G,translated:Nt}},[Y,fe,it,Nt,R,ue,G,H,le,Ze,Be,ft]),nz({...Ce,delta:ee,draggingRect:Nt,pointerCoordinates:We,scrollableAncestors:Be,scrollableAncestorRects:be});const aa=C.useMemo(()=>({active:Y,activeNode:fe,activeNodeRect:Ne,activatorEvent:Q,collisions:it,containerNodeRect:ie,dragOverlay:je,draggableNodes:R,droppableContainers:le,droppableRects:H,over:Ze,measureDroppableContainers:re,scrollableAncestors:Be,scrollableAncestorRects:be,measuringConfiguration:P,measuringScheduled:ce,windowRect:De}),[Y,fe,Ne,Q,it,ie,je,R,le,H,Ze,re,Be,be,P,ce,De]),On=C.useMemo(()=>({activatorEvent:Q,activators:en,active:Y,activeNodeRect:Ne,ariaDescribedById:{draggable:ae},dispatch:b,draggableNodes:R,over:Ze,measureDroppableContainers:re}),[Q,en,Y,Ne,b,ae,R,Ze,re]);return pt.createElement(U6.Provider,{value:L},pt.createElement(Jg.Provider,{value:On},pt.createElement(Z6.Provider,{value:aa},pt.createElement(ej.Provider,{value:fr},f)),pt.createElement(jz,{disabled:(l==null?void 0:l.restoreFocus)===!1})),pt.createElement(jU,{...l,hiddenTextDescribedById:ae}));function ci(){const Sn=(xe==null?void 0:xe.autoScrollEnabled)===!1,Yt=typeof c=="object"?c.enabled===!1:c===!1,wt=oe&&!Sn&&!Yt;return typeof c=="object"?{...c,enabled:wt}:{enabled:wt}}}),Lz=C.createContext(null),m3="button",Pz="Draggable";function Tz(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Dp(Pz),{activators:a,activatorEvent:l,active:c,activeNodeRect:f,ariaDescribedById:p,draggableNodes:m,over:w}=C.useContext(Jg),{role:g=m3,roleDescription:N="draggable",tabIndex:j=0}=i??{},k=(c==null?void 0:c.id)===t,b=C.useContext(k?ej:Lz),[S,L]=sg(),[M,K]=sg(),oe=mz(a,t),Z=pp(n);wo(()=>(m.set(t,{id:t,key:s,node:S,activatorNode:M,data:Z}),()=>{const ee=m.get(t);ee&&ee.key===s&&m.delete(t)}),[m,t]);const R=C.useMemo(()=>({role:g,tabIndex:j,"aria-disabled":r,"aria-pressed":k&&g===m3?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[r,g,j,k,N,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:f,attributes:R,isDragging:k,listeners:r?void 0:oe,node:S,over:w,setNodeRef:L,setActivatorNodeRef:K,transform:b}}function Iz(){return C.useContext(Z6)}const Dz="Droppable",Oz={timeout:25};function Mz(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Dp(Dz),{active:a,dispatch:l,over:c,measureDroppableContainers:f}=C.useContext(Jg),p=C.useRef({disabled:n}),m=C.useRef(!1),w=C.useRef(null),g=C.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:k}={...Oz,...i},b=pp(j??r),S=C.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(b.current)?b.current:[b.current]),g.current=null},k)},[k]),L=Kg({callback:S,disabled:N||!a}),M=C.useCallback((R,ee)=>{L&&(ee&&(L.unobserve(ee),m.current=!1),R&&L.observe(R))},[L]),[K,oe]=sg(M),Z=pp(t);return C.useEffect(()=>{!L||!K.current||(L.disconnect(),m.current=!1,L.observe(K.current))},[K,L]),C.useEffect(()=>(l({type:$r.RegisterDroppable,element:{id:r,key:s,disabled:n,node:K,rect:w,data:Z}}),()=>l({type:$r.UnregisterDroppable,key:s,id:r})),[r]),C.useEffect(()=>{n!==p.current.disabled&&(l({type:$r.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:a,rect:w,isOver:(c==null?void 0:c.id)===r,node:K,over:c,setNodeRef:oe}}function lw(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Rz(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function qm(e){return e!==null&&e>=0}function Fz(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $z(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const tj=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=lw(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Wm={scaleX:1,scaleY:1},Bz=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const f=s[a];return f?{x:0,y:n<a?f.top+f.height-(l.top+l.height):f.top-l.top,...Wm}:null}const c=Uz(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-c,...Wm}:i<n&&i>=a?{x:0,y:l.height+c,...Wm}:{x:0,y:0,...Wm}};function Uz(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const nj="Sortable",rj=pt.createContext({activeIndex:-1,containerId:nj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tj,disabled:{draggable:!1,droppable:!1}});function zz(e){let{children:t,id:n,items:r,strategy:i=tj,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:f,measureDroppableContainers:p}=Iz(),m=Dp(nj,n),w=l.rect!==null,g=C.useMemo(()=>r.map(oe=>typeof oe=="object"&&"id"in oe?oe.id:oe),[r]),N=a!=null,j=a?g.indexOf(a.id):-1,k=f?g.indexOf(f.id):-1,b=C.useRef(g),S=!Fz(g,b.current),L=k!==-1&&j===-1||S,M=$z(s);wo(()=>{S&&N&&p(g)},[S,g,N,p]),C.useEffect(()=>{b.current=g},[g]);const K=C.useMemo(()=>({activeIndex:j,containerId:m,disabled:M,disableTransforms:L,items:g,overIndex:k,useDragOverlay:w,sortedRects:Rz(g,c),strategy:i}),[j,m,M.draggable,M.droppable,L,g,k,c,w,i]);return pt.createElement(rj.Provider,{value:K},t)}const qz=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return lw(n,r,i).indexOf(t)},Wz=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:f}=e;return!f||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===c},Hz={duration:200,easing:"ease"},ij="transform",Vz=mp.Transition.toString({property:ij,duration:0,easing:"linear"}),Gz={roleDescription:"sortable"};function Yz(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=C.useState(null),l=C.useRef(n);return wo(()=>{if(!t&&n!==l.current&&r.current){const c=i.current;if(c){const f=Df(r.current,{ignoreTransform:!0}),p={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(p.x||p.y)&&a(p)}}n!==l.current&&(l.current=n)},[t,n,r,i]),C.useEffect(()=>{s&&a(null)},[s]),s}function Kz(e){let{animateLayoutChanges:t=Wz,attributes:n,disabled:r,data:i,getNewIndex:s=qz,id:a,strategy:l,resizeObserverConfig:c,transition:f=Hz}=e;const{items:p,containerId:m,activeIndex:w,disabled:g,disableTransforms:N,sortedRects:j,overIndex:k,useDragOverlay:b,strategy:S}=C.useContext(rj),L=Jz(r,g),M=p.indexOf(a),K=C.useMemo(()=>({sortable:{containerId:m,index:M,items:p},...i}),[m,i,M,p]),oe=C.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:Z,node:R,isOver:ee,setNodeRef:le}=Mz({id:a,data:K,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:oe,...c}}),{active:O,activatorEvent:U,activeNodeRect:Y,attributes:J,setNodeRef:xe,listeners:ye,isDragging:Q,over:$,setActivatorNodeRef:z,transform:ae}=Tz({id:a,data:K,attributes:{...Gz,...n},disabled:L.draggable}),Pe=fU(le,xe),P=!!O,H=P&&!N&&qm(w)&&qm(k),re=!b&&Q,ce=re&&H?ae:null,Ee=H?ce??(l??S)({rects:j,activeNodeRect:Y,activeIndex:w,overIndex:k,index:M}):null,Ce=qm(w)&&qm(k)?s({id:a,items:p,activeIndex:w,overIndex:k}):M,te=O==null?void 0:O.id,Ne=C.useRef({activeId:te,items:p,newIndex:Ce,containerId:m}),ie=p!==Ne.current.items,pe=t({active:O,containerId:m,isDragging:Q,isSorting:P,id:a,index:M,items:p,newIndex:Ne.current.newIndex,previousItems:Ne.current.items,previousContainerId:Ne.current.containerId,transition:f,wasDragging:Ne.current.activeId!=null}),he=Yz({disabled:!pe,index:M,node:R,rect:Z});return C.useEffect(()=>{P&&Ne.current.newIndex!==Ce&&(Ne.current.newIndex=Ce),m!==Ne.current.containerId&&(Ne.current.containerId=m),p!==Ne.current.items&&(Ne.current.items=p)},[P,Ce,m,p]),C.useEffect(()=>{if(te===Ne.current.activeId)return;if(te!=null&&Ne.current.activeId==null){Ne.current.activeId=te;return}const ue=setTimeout(()=>{Ne.current.activeId=te},50);return()=>clearTimeout(ue)},[te]),{active:O,activeIndex:w,attributes:J,data:K,rect:Z,index:M,newIndex:Ce,items:p,isOver:ee,isSorting:P,isDragging:Q,listeners:ye,node:R,overIndex:k,over:$,setNodeRef:Pe,setActivatorNodeRef:z,setDroppableNodeRef:le,setDraggableNodeRef:xe,transform:he??Ee,transition:je()};function je(){if(he||ie&&Ne.current.newIndex===M)return Vz;if(!(re&&!nw(U)||!f)&&(P||pe))return mp.Transition.toString({...f,property:ij})}}function Jz(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}yn.Down,yn.Right,yn.Up,yn.Left;function Xz({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[s,a]=C.useState(""),[l,c]=C.useState([]),[f,p]=C.useState(!1),[m,w]=C.useState(""),g=k=>{c(b=>b.includes(k)?b.filter(S=>S!==k):[...b,k])},N=async()=>{if(l.length<2){Le.error("Selecciona al menos dos canciones para el medley");return}let k=s.trim();if(k||(k=l.map(S=>r.find(L=>L.id===S)).filter(S=>!!S).map(S=>S.title).join(" | ")),!k){Le.error("No se pudo generar el nombre del medley.");return}p(!0);try{const b=await O$(n,k,l);b&&(Le.success("Medley creado con éxito"),i(b),j())}catch(b){console.error("Error creating medley:",b),Le.error("Error al crear el medley")}finally{p(!1)}},j=()=>{a(""),c([]),w(""),t()};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Gn,{label:"Nombre del Medley",value:s,onChange:k=>a(k.target.value),placeholder:"Ej: Medley de Rock Clásico",autoFocus:!0}),d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),d.jsxs("div",{className:"border rounded-md p-2",children:[d.jsx(Gn,{placeholder:"Buscar canción para añadir...",value:m,onChange:k=>w(k.target.value),className:"mb-2"}),d.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(k=>k.type==="song").filter(k=>{var b;return k.title.toLowerCase().includes(m.toLowerCase())||((b=k.artist)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))}).map(k=>d.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:d.jsx("div",{children:d.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[d.jsx("input",{type:"checkbox",checked:l.includes(k.id),onChange:()=>g(k.id),className:"rounded"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm truncate",children:k.title}),k.artist&&d.jsx("div",{className:"text-xs text-gray-500 truncate",children:k.artist})]})]})})},k.id))})]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:j,disabled:f,children:"Cancelar"}),d.jsx(yt,{variant:"primary",onClick:N,loading:f,disabled:l.length<2,children:"Crear Medley"})]})]})}):null}function Qz({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:s,onMedleyDeleted:a}){const[l,c]=C.useState(!1),[f,p]=C.useState(!1),[m,w]=C.useState(e.title),[g,N]=C.useState(!1),[j,k]=C.useState(!1),[b,S]=C.useState(!1),[L,M]=C.useState(""),[K,oe]=C.useState([]);C.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const J=await Z0(e.group_id);if(J){const xe=J.filter(ye=>{var Q;return((Q=e.medley_song_ids)==null?void 0:Q.includes(ye.id))&&ye.type==="song"});oe(xe)}}})()},[e.medley_song_ids,e.group_id]);const Z=async()=>{if(!m.trim()){Le.error("El nombre del medley es obligatorio");return}k(!0);try{await U$(e.id,{title:m})&&(Le.success("Medley actualizado"),s(e.id,m),p(!1))}catch(Y){console.error("Error al actualizar el medley:",Y),Le.error("Error al actualizar el medley")}finally{k(!1)}},R=async()=>{k(!0);try{await W$(e.id)&&(Le.success("Medley eliminado"),a(e.id))}catch(Y){console.error("Error al eliminar el medley:",Y),Le.error("Error al eliminar el medley")}finally{k(!1),S(!1)}},ee=async Y=>{k(!0);try{await q$(e.id,Y)&&(Le.success("Canción eliminada del medley"),i(e.id,Y),oe(xe=>xe.filter(ye=>ye.id!==Y)))}catch(J){console.error("Error al eliminar la canción del medley:",J),Le.error("Error al eliminar la canción del medley")}finally{k(!1)}},le=async Y=>{if(!t.find(xe=>xe.id===Y)){Le.error("No se pudo encontrar la canción seleccionada");return}k(!0);try{const xe=await z$(e.id,Y);if(xe){Le.success("Canción añadida al medley"),r(e.id,Y),N(!1),M("");const ye=await Z0(e.group_id);if(ye&&xe.medley_song_ids){const Q=ye.filter($=>{var z;return((z=xe.medley_song_ids)==null?void 0:z.includes($.id))&&$.type==="song"});oe(Q)}}}catch(xe){console.error("Error al añadir la canción al medley:",xe),Le.error("Error al añadir la canción al medley")}finally{k(!1)}},O=e.medley_song_ids?e.medley_song_ids.map(Y=>K.find(J=>J.id===Y)).filter(Boolean):[],U=Array.from(new Map(O.map(Y=>[Y.id,Y])).values());return d.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!l),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(uU,{className:"text-blue-600"}),d.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[d.jsxs("span",{children:[U.length," canciones"]}),l?d.jsx(oU,{}):d.jsx(aU,{})]})]}),l&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:Y=>Y.stopPropagation(),children:[n&&d.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[d.jsxs(yt,{variant:"secondary",onClick:()=>{p(!f),f&&w(e.title)},children:[d.jsx(F6,{className:"mr-1"}),f?"Cancelar":"Renombrar"]}),!f&&d.jsxs(yt,{variant:"danger",onClick:()=>S(!0),loading:j,children:[d.jsx(dU,{className:"mr-1"}),"Eliminar"]})]}),f&&d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[d.jsx(Gn,{value:m,onChange:Y=>w(Y.target.value),placeholder:"Nuevo nombre del medley"}),d.jsx(yt,{onClick:Z,loading:j,children:"Guardar"})]}),!f&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),U.length===0?d.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):d.jsx("ul",{className:"space-y-1",children:U.map(Y=>d.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-sm",children:Y.title}),Y.artist&&d.jsx("span",{className:"text-xs text-gray-500 ml-2",children:Y.artist})]}),n&&d.jsx(yt,{variant:"danger",onClick:()=>ee(Y.id),loading:j,children:d.jsx(r3,{})})]},Y.id))})]}),n&&d.jsx("div",{className:"mt-3",children:g?d.jsxs("div",{className:"border rounded p-2 bg-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"Añadir canción:"}),d.jsx(yt,{variant:"secondary",onClick:()=>{N(!1),M("")},children:d.jsx(r3,{})})]}),d.jsx(Gn,{placeholder:"Buscar canción...",value:L,onChange:Y=>M(Y.target.value),className:"mb-2"}),d.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(Y=>Y.type==="song").filter(Y=>!U.some(J=>J.id===Y.id)).filter(Y=>{var J;return Y.title.toLowerCase().includes(L.toLowerCase())||((J=Y.artist)==null?void 0:J.toLowerCase().includes(L.toLowerCase()))}).map(Y=>d.jsxs("button",{onClick:()=>le(Y.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:j,children:[d.jsx("div",{className:"font-medium",children:Y.title}),Y.artist&&d.jsx("div",{className:"text-xs text-gray-500",children:Y.artist})]},Y.id)),t.filter(Y=>Y.type==="song"&&!U.some(J=>J.id===Y.id)).length===0&&d.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay más canciones para añadir."})]})]}):d.jsxs(yt,{variant:"primary",onClick:()=>N(!0),children:[d.jsx(by,{className:"mr-1"}),"Añadir Canción"]})})]})]}),b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>S(!1),children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:Y=>Y.stopPropagation(),children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el medley "',e.title,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>S(!1),disabled:j,children:"Cancelar"}),d.jsx(yt,{variant:"danger",onClick:R,loading:j,children:j?"Eliminando...":"Eliminar"})]})]})})]})}function Zz({isOpen:e,onClose:t,groupId:n,onSetlistCreated:r}){const{isAuthenticated:i}=Pp(),[s,a]=C.useState([]),[l,c]=C.useState(null),[f,p]=C.useState([]),[m,w]=C.useState(!1),[g,N]=C.useState(!1),[j,k]=C.useState(0),[b,S]=C.useState("");C.useEffect(()=>{e&&i&&L()},[e,i]),C.useEffect(()=>{l&&(S(l.name),M(l.id))},[l]);const L=async()=>{w(!0);try{const R=await $n.getUserPlaylists(50);a(R)}catch(R){console.error("Error loading playlists:",R),Le.error("Error al cargar las playlists")}finally{w(!1)}},M=async R=>{w(!0);try{const ee=await $n.getPlaylistTracks(R,100);p(ee.filter(le=>le&&le.id))}catch(ee){console.error("Error loading playlist tracks:",ee),Le.error("Error al cargar las canciones de la playlist")}finally{w(!1)}},K=async()=>{if(!(!l||!f.length)){N(!0),k(0);try{const{data:{user:R}}=await et.auth.getUser();if(!R){Le.error("No se pudo obtener la información del usuario");return}const ee={name:b||l.name,description:`Importado desde Spotify: ${l.name}`,group_id:n,created_by:R.id},le=await K5(ee);if(!le){Le.error("Error al crear el setlist");return}const O=f.length;let U=0;for(let Y=0;Y<O;Y++){const J=f[Y];k(Math.round((Y+1)/O*100));try{const xe=Math.round(J.duration_ms/6e4),ye={title:J.name,artist:J.artists.map($=>$.name).join(", "),duration_minutes:xe,key:"",notes:`Popularidad: ${J.popularity}% | Álbum: ${J.album.name}`,group_id:n,created_by:R.id},Q=await c0(ye);Q&&(await eg(le.id,Q.id,Y+1),U++)}catch(xe){console.error(`Error importing track ${J.name}:`,xe)}}k(100),Le.success(`Setlist "${b}" creado con ${U}/${O} canciones`),r(),t()}catch(R){console.error("Error importing playlist:",R),Le.error("Error al importar la playlist")}finally{N(!1),k(0)}}},oe=R=>{const ee=Math.floor(R/6e4),le=Math.floor(R%6e4/1e3);return`${ee}:${le.toString().padStart(2,"0")}`},Z=()=>{const R=f.reduce((U,Y)=>U+Y.duration_ms,0),ee=Math.floor(R/6e4),le=Math.floor(ee/60),O=ee%60;return le>0?`${le}h ${O}m`:`${O}m`};return e?i?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",disabled:g,children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-3 sm:p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:l?d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 mb-4 sm:mb-6",children:[d.jsx("button",{onClick:()=>{c(null),p([]),S("")},className:"text-blue-600 hover:text-blue-800 text-sm sm:text-base self-start",disabled:g,children:"← Volver a playlists"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold truncate",children:l.name}),l.description&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2",children:l.description})]}),d.jsx("a",{href:l.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 p-1",title:"Abrir en Spotify",children:d.jsx(Q2,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),d.jsxs("div",{className:"mb-4 sm:mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del setlist"}),d.jsx("input",{type:"text",value:b,onChange:R=>S(R.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nombre para el nuevo setlist",disabled:g})]}),m?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(al,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),d.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando canciones..."})]}):d.jsxs("div",{children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4",children:d.jsx("div",{className:"bg-gray-50 rounded-lg px-3 py-2",children:d.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:[f.length," canciones • ",Z()]})})}),d.jsx("div",{className:"max-h-64 sm:max-h-96 overflow-y-auto border border-gray-200 rounded-lg bg-gray-50",children:f.map((R,ee)=>{var le,O;return d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-white border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",children:[d.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-6 sm:w-8 text-center",children:ee+1}),d.jsx("img",{src:((le=R.album.images[2])==null?void 0:le.url)||((O=R.album.images[0])==null?void 0:O.url),alt:R.album.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-xs sm:text-sm text-gray-900 truncate",children:R.name}),d.jsx("p",{className:"text-xs text-gray-600 truncate",children:R.artists.map(U=>U.name).join(", ")})]}),d.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 flex-shrink-0",children:[d.jsx(W0,{className:"w-3 h-3 mr-1"}),oe(R.duration_ms)]})]},R.id)})})]})]}):d.jsxs("div",{children:[d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Selecciona una playlist de Spotify para importar como setlist:"}),m?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(al,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),d.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando playlists..."})]}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(R=>d.jsx("div",{onClick:()=>c(R),className:"border border-gray-200 rounded-lg p-3 sm:p-4 cursor-pointer hover:border-green-400 hover:bg-green-50 hover:shadow-md transition-all duration-200",children:d.jsxs("div",{className:"flex items-start gap-3",children:[R.images&&R.images.length>0?d.jsx("img",{src:R.images[0].url,alt:R.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded object-cover flex-shrink-0"}):d.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:d.jsx(Jr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:R.name}),R.description&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2",children:R.description}),d.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[R.tracks.total," canciones"]})]})]})},R.id))})]})}),d.jsx("div",{className:"border-t p-3 sm:p-6",children:g?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Importando canciones... ",j,"%"]}),d.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:[Math.round(j/100*f.length),"/",f.length]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]}):d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[d.jsx(yt,{variant:"secondary",onClick:t,size:"sm",className:"w-full sm:w-auto",children:"Cancelar"}),l&&f.length>0&&d.jsxs(yt,{variant:"primary",onClick:K,disabled:!b.trim(),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(H0,{className:"w-4 h-4 mr-2"}),d.jsxs("span",{className:"hidden sm:inline",children:["Importar ",f.length," canciones"]}),d.jsxs("span",{className:"sm:hidden",children:["Importar (",f.length,")"]})]})]})})]})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"text-center py-6 sm:py-8",children:[d.jsx(Jr,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Necesitas conectar con Spotify para importar playlists"}),d.jsx(yt,{onClick:t,variant:"primary",size:"sm",className:"w-full sm:w-auto",children:"Entendido"})]})]})}):null}const g3={name:"",description:"",estimated_duration_minutes:""};function eq({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:s,onMedleyRenamed:a,onMedleyDeleted:l}){var N,j,k,b;const{attributes:c,listeners:f,setNodeRef:p,transform:m,transition:w}=Kz({id:e.id}),g={transform:mp.Transform.toString(m),transition:w};return d.jsxs("div",{ref:p,style:g,...c,className:"flex items-center gap-2 mb-2",children:[t&&d.jsx("div",{...f,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 py-2 px-2 sm:py-3 sm:px-3 touch-none select-none min-w-[40px] min-h-[40px] sm:min-w-[48px] sm:min-h-[48px] flex items-center justify-center rounded-md hover:bg-gray-100 active:bg-gray-200 transition-colors",role:"button","aria-label":"Arrastrar para reordenar",tabIndex:0,children:d.jsx(cU,{className:"text-lg"})}),d.jsx("div",{className:"flex-grow",children:e.type==="song"?d.jsxs("div",{className:"bg-white p-2 sm:p-3 rounded-md shadow-sm border border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(N=e.data.song)==null?void 0:N.title}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:[(j=e.data.song)==null?void 0:j.artist," - ",(k=e.data.song)==null?void 0:k.duration_minutes,"m - Tono: ",(b=e.data.song)==null?void 0:b.key]})]}),t&&d.jsx(yt,{variant:"danger",size:"sm",onClick:()=>r(e.data.setlist_id,e.data.song_id),className:"w-full sm:w-auto",children:"Eliminar"})]}):d.jsx(Qz,{medley:e.data,availableSongs:n.filter(S=>S.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:s,onMedleyRenamed:a,onMedleyDeleted:l})})]})}function tq({groupId:e,canManageSetlists:t=!0}){const[n,r]=C.useState([]),[i,s]=C.useState([]),[a,l]=C.useState(!0),[c,f]=C.useState(!1),[p,m]=C.useState(null),[w,g]=C.useState(null),[N,j]=C.useState(g3),[k,b]=C.useState(!1),[S,L]=C.useState(null),[M,K]=C.useState(!1),[oe,Z]=C.useState(null),[R,ee]=C.useState(""),[le,O]=C.useState(""),[U,Y]=C.useState(!1),[J,xe]=C.useState(!1),{isAuthenticated:ye,createPlaylistFromSetlist:Q,searchTracks:$}=Pp();C.useState(null),C.useState("");const[z,ae]=C.useState([]),Pe=kU(Bv(ow,{activationConstraint:{distance:8}}),Bv(J6,{activationConstraint:{delay:200,tolerance:5}}),Bv(sw,{coordinateGetter:(be,{context:{active:Ie,droppableRects:We,droppableContainers:He,collisionRect:nt}})=>null}));C.useEffect(()=>{P()},[e]),hp({table:"setlists",filter:`group_id=eq.${e}`,onInsert:be=>{r(Ie=>[...Ie,{...be.new,songs:[]}]),Le.success("Nuevo setlist añadido en tiempo real")},onUpdate:be=>{const Ie=be.new;r(We=>We.map(He=>He.id===Ie.id?{...He,...Ie}:He)),(w==null?void 0:w.id)===Ie.id&&g(We=>We?{...We,...Ie}:null)},onDelete:be=>{r(Ie=>Ie.filter(We=>We.id!==be.old.id)),(w==null?void 0:w.id)===be.old.id&&g(null),Le.success("Setlist eliminado en tiempo real")},enabled:!!e}),hp({table:"setlist_songs",onInsert:be=>{const Ie=be.new;(w==null?void 0:w.id)===Ie.setlist_id&&H()},onUpdate:be=>{const Ie=be.new;(w==null?void 0:w.id)===Ie.setlist_id&&H()},onDelete:be=>{const Ie=be.old;(w==null?void 0:w.id)===Ie.setlist_id&&H()},enabled:!!w}),C.useEffect(()=>{if(w){const be=[];w.songs&&w.songs.forEach(He=>{var dt,ft,Nt,it;const nt=((dt=He.song)==null?void 0:dt.type)==="medley";nt&&console.log("Processing medley item:",{songId:He.id,songSongId:(ft=He.song)==null?void 0:ft.id,songTitle:(Nt=He.song)==null?void 0:Nt.title,songType:(it=He.song)==null?void 0:it.type,position:He.position}),He.id?be.push({id:He.id,type:nt?"medley":"song",position:He.position,data:nt?He.song:He}):console.error("Song with undefined ID found:",He)}),w.medleys&&w.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",w.medleys),console.warn('All medleys should be in the songs table with type="medley"')),be.sort((He,nt)=>He.position-nt.position);const Ie=be.map(He=>He.id),We=Ie.filter((He,nt)=>Ie.indexOf(He)!==nt);We.length>0&&(console.error("Duplicate IDs found in setlistItems:",We),console.error("All items:",be),console.error("selectedSetlist.songs:",w.songs),console.error("selectedSetlist.medleys:",w.medleys)),console.log("All setlistItems:",be.map(He=>({id:He.id,type:He.type,position:He.position}))),ae(be)}else ae([])},[w]);const P=async()=>{l(!0);const[be,Ie]=await Promise.all([cy(e),Z0(e)]);return be&&r(be),Ie&&s(Ie),l(!1),be},H=async()=>{const be=await P();if(be&&w){const Ie=be.find(We=>We.id===w.id);if(Ie){const We={...Ie,songs:(Ie.songs||[]).sort((He,nt)=>He.position-nt.position),medleys:(Ie.medleys||[]).sort((He,nt)=>He.position-nt.position)};g(We)}else g(null)}},re=async be=>{if(be.preventDefault(),!N.name.trim()){Le.error("El nombre es obligatorio");return}const{data:{user:Ie}}=await et.auth.getUser();if(!Ie){Le.error("No se pudo obtener la información del usuario");return}const We={group_id:e,name:N.name.trim(),description:N.description.trim()||void 0,estimated_duration_minutes:N.estimated_duration_minutes?parseInt(N.estimated_duration_minutes):void 0,created_by:Ie.id};if(p){const He=await R$(p.id,We);He&&(Le.success("Setlist actualizado correctamente"),r(nt=>nt.map(dt=>dt.id===p.id?{...dt,...He}:dt)),(w==null?void 0:w.id)===p.id&&g(nt=>nt?{...nt,...He}:null))}else{const He=await K5({...We,name:We.name});He&&(Le.success("Setlist creado correctamente"),r(nt=>[...nt,{...He,songs:[]}]))}ie()},ce=be=>{var Ie;m(be),j({name:be.name,description:be.description||"",estimated_duration_minutes:((Ie=be.estimated_duration_minutes)==null?void 0:Ie.toString())||""}),f(!0)},fe=be=>{L(be),b(!0)},Ee=async()=>{if(!S)return;await F$(S.id)?(Le.success("Setlist eliminado correctamente"),r(Ie=>Ie.filter(We=>We.id!==S.id)),(w==null?void 0:w.id)===S.id&&g(null)):Le.error("No se pudo eliminar el setlist"),b(!1),L(null)},Ce=async(be,Ie)=>{if(!w)return;const He=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(dt=>dt.position)):0)+1,nt=await eg(be,Ie,He);if(nt){Le.success("Canción añadida al setlist");const dt=i.find(ft=>ft.id===Ie);if(dt){const ft={...nt,position:He,song:dt},Nt={...w,songs:[...w.songs||[],ft]};g(Nt),r(it=>it.map(St=>St.id===be?Nt:St))}}else console.error("No se pudo añadir la canción al setlist")},te=async(be,Ie)=>{var He;if(await $$(be,Ie)){Le.success("Canción eliminada del setlist");const nt=w?{...w,songs:(He=w.songs)==null?void 0:He.filter(dt=>dt.song_id!==Ie)}:null;nt&&(g(nt),r(dt=>dt.map(ft=>ft.id===nt.id?nt:ft)))}else Le.error("No se pudo eliminar la canción del setlist")},Ne=be=>{const{active:Ie,over:We}=be;if(!We||Ie.id===We.id||!w)return;const He=z.findIndex(Ze=>Ze.id===Ie.id),nt=z.findIndex(Ze=>Ze.id===We.id),ft=lw(z,He,nt).map((Ze,Zt)=>({id:Ze.id,type:Ze.type,position:Zt+1})),Nt=ft.map(Ze=>{var Mt;return{...(Mt=w.songs)==null?void 0:Mt.find(fr=>fr.id===Ze.id),position:Ze.position}}),it={...w,songs:Nt};g(it),r(Ze=>Ze.map(Zt=>Zt.id===it.id?it:Zt)),console.log("Reordering items:",ft);const St=ft.map(Ze=>({songId:Ze.id,position:Ze.position}));B$(w.id,St).then(Ze=>{Ze?console.log("Reorder successful"):(Le.error("No se pudo guardar el orden. Se revertirán los cambios."),P())})},ie=()=>{j(g3),m(null),f(!1)},pe=be=>{if(!i)return[];const Ie=new Set((be.songs||[]).map(We=>We.song_id));return i.filter(We=>!Ie.has(We.id))},he=be=>{const Ie=n.find(We=>We.id===be.id);g(Ie||null)},je=(be,Ie,We)=>{if(!w)return;const He={...We,song:Ie},nt={...w,medleys:(w.medleys||[]).map(dt=>dt.id===be?{...dt,songs:[...dt.songs||[],He].sort((ft,Nt)=>ft.position-Nt.position)}:dt)};g(nt),r(dt=>dt.map(ft=>ft.id===nt.id?nt:ft))},ue=(be,Ie)=>{if(!w)return;const We={...w,medleys:(w.medleys||[]).map(He=>He.id===be?{...He,songs:(He.songs||[]).filter(nt=>nt.song_id!==Ie)}:He)};g(We),r(He=>He.map(nt=>nt.id===We.id?We:nt))},G=(be,Ie)=>{if(!w)return;const We={...w,medleys:(w.medleys||[]).map(He=>He.id===be?{...He,name:Ie}:He)};g(We),r(He=>He.map(nt=>nt.id===We.id?We:nt))},$e=be=>{if(!w)return;const Ie={...w,medleys:(w.medleys||[]).filter(We=>We.id!==be)};g(Ie),r(We=>We.map(He=>He.id===Ie.id?Ie:He))},Fe=async be=>{if(!w)return;const We=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(nt=>nt.position)):0)+1;if(await eg(w.id,be.id,We)){Le.success("Medley creado y añadido al setlist"),await P();const nt=await cy(e);if(nt){const dt=nt.find(ft=>ft.id===w.id);dt&&g(dt)}}else Le.error("Medley creado pero no se pudo añadir al setlist")},De=be=>{Z(be),ee(`${be.name} (copia)`),K(!0)},Be=async()=>{if(!oe||!R.trim())return;l(!0),K(!1),await H$(oe.id,R.trim())?(Le.success("Setlist duplicado correctamente"),await P()):Le.error("No se pudo duplicar el setlist"),Z(null),ee(""),l(!1)};return a?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-8 w-40 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx(WN,{count:4})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx(yt,{onClick:()=>f(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"}),d.jsxs(yt,{onClick:()=>xe(!0),variant:"secondary",className:`${ye?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,title:ye?"Importar playlist desde Spotify":"Conecta con Spotify para importar playlists",children:[d.jsx(sU,{className:"mr-2"}),"Importar de Spotify",!ye&&d.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Conectar)"})]})]})]}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&d.jsxs("form",{onSubmit:re,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Gn,{label:"Nombre *",value:N.name,onChange:be=>j({...N,name:be.target.value}),required:!0}),d.jsx(Gn,{label:"Duración estimada (minutos)",type:"number",value:N.estimated_duration_minutes,onChange:be=>j({...N,estimated_duration_minutes:be.target.value}),min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),d.jsx("textarea",{value:N.description,onChange:be=>j({...N,description:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripción breve del setlist..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(yt,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),d.jsx(yt,{type:"button",variant:"secondary",onClick:ie,children:"Cancelar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 lg:hidden",children:"Setlists"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-3",children:n.map(be=>{var Ie,We;return d.jsxs("div",{className:`p-3 sm:p-4 rounded-lg cursor-pointer transition-all ${(w==null?void 0:w.id)===be.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>he(be),children:[d.jsx("h4",{className:`font-bold text-sm sm:text-base truncate ${(w==null?void 0:w.id)===be.id?"text-white":"text-gray-800"}`,children:be.name}),d.jsxs("p",{className:`text-xs sm:text-sm ${(w==null?void 0:w.id)===be.id?"text-blue-100":"text-gray-500"}`,children:[(((Ie=be.songs)==null?void 0:Ie.length)||0)+(((We=be.medleys)==null?void 0:We.length)||0)," items"]})]},be.id)})}),n.length===0&&!a&&d.jsx("p",{className:"text-center text-gray-500 py-4 text-sm",children:"No hay setlists. ¡Crea el primero!"})]}),d.jsx("div",{className:"lg:col-span-2",children:w?d.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4 gap-3 sm:gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 truncate",children:w.name}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:w.description})]}),t&&d.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 w-full sm:w-auto lg:flex-nowrap",children:[d.jsxs(yt,{variant:"primary",onClick:()=>Y(!0),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(by,{className:"mr-1"}),d.jsx("span",{className:"hidden sm:inline",children:"Crear Medley"}),d.jsx("span",{className:"sm:hidden",children:"Medley"})]}),d.jsxs(yt,{variant:"secondary",onClick:()=>ce(w),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(F6,{className:"mr-2"})," Editar"]}),d.jsxs(yt,{variant:"secondary",onClick:()=>De(w),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(lU,{className:"mr-2"})," Duplicar"]}),d.jsx(yt,{variant:"danger",onClick:()=>fe(w),size:"sm",className:"w-full sm:w-auto",children:"Eliminar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6 xl:gap-8",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Canciones en el Setlist"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Az,{sensors:Pe,collisionDetection:PU,onDragEnd:Ne,children:d.jsx(zz,{items:z.map(be=>be.id),strategy:Bz,children:z.map((be,Ie)=>d.jsx(eq,{item:be,canManageSetlists:t,songs:i,onRemoveSong:te,onSongAddedToMedley:je,onSongRemovedFromMedley:ue,onMedleyRenamed:G,onMedleyDeleted:$e},`${be.type}-${be.id}-${Ie}`))})}),z.length===0&&d.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist está vacío."})]})]}),t&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Añadir Canción al Setlist"}),d.jsx(Gn,{placeholder:"Buscar canción...",value:le,onChange:be=>O(be.target.value),className:"mb-2"}),d.jsxs("div",{className:"space-y-2 max-h-48 sm:max-h-60 lg:max-h-80 overflow-y-auto pr-1 sm:pr-2",children:[pe(w).filter(be=>{var Ie;return be.title.toLowerCase().includes(le.toLowerCase())||((Ie=be.artist)==null?void 0:Ie.toLowerCase().includes(le.toLowerCase()))}).map(be=>d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded-md gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("p",{className:"font-medium text-xs sm:text-sm truncate",children:[be.type==="medley"&&d.jsx("span",{className:"text-blue-600 mr-1",children:"🎵"}),be.title]}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:be.type==="medley"?"Medley":be.artist})]}),d.jsx(yt,{onClick:()=>Ce(w.id,be.id),size:"sm",className:"w-full sm:w-auto",children:d.jsx(by,{})})]},be.id)),pe(w).length===0&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya están en este setlist."})]})]})]})]}):d.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 bg-white rounded-lg",children:d.jsx("p",{className:"text-sm sm:text-base",children:"Selecciona un setlist para ver los detalles"})})})]}),k&&S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el setlist "',S.name,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>{b(!1),L(null)},fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Cancelar"}),d.jsx(yt,{variant:"danger",onClick:Ee,fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Eliminar"})]})]})}),M&&oe&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),d.jsx(Gn,{value:R,onChange:be=>ee(be.target.value),className:"mb-6",autoFocus:!0}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>{K(!1),Z(null),ee("")},children:"Cancelar"}),d.jsx(yt,{variant:"primary",onClick:Be,disabled:!R.trim(),children:"Duplicar"})]})]})}),U&&w&&d.jsx(Xz,{isOpen:U,onClose:()=>Y(!1),groupId:e,availableSongs:pe(w),onMedleyCreated:be=>{Fe(be),Y(!1)}}),J&&d.jsx(Zz,{isOpen:J,onClose:()=>xe(!1),groupId:e,onSetlistCreated:()=>{P(),xe(!1)}})]})}function nq({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0,defaultTab:r="songs"}){const[i,s]=C.useState(r);return C.useEffect(()=>{s(r)},[r]),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[d.jsx("button",{onClick:()=>s("songs"),className:`${i==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),d.jsx("button",{onClick:()=>s("setlists"),className:`${i==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),d.jsxs("div",{className:"p-6",children:[i==="songs"&&d.jsx(XB,{groupId:e,canManageSongs:t}),i==="setlists"&&d.jsx(tq,{groupId:e,canManageSetlists:n})]})]})})}function Wv({defaultTab:e}){const{id:t}=RS(),n=$a(),r=Fa(),[i,s]=C.useState(null),[a,l]=C.useState([]),[c,f]=C.useState([]),[p,m]=C.useState(!1),[w,g]=C.useState(!1),[N,j]=C.useState(!1),[k,b]=C.useState(null),[S,L]=C.useState(null),[M,K]=C.useState(!0),[oe,Z]=C.useState(!1),[R,ee]=C.useState(null),[le,O]=C.useState(!1),[U,Y]=C.useState([]),{user:J}=Rs(),[xe,ye]=C.useState(!1),[Q,$]=C.useState(!1),[z,ae]=C.useState(""),Pe=()=>e||(r.pathname.endsWith("/songs")?"songs":r.pathname.endsWith("/setlists")?"setlists":"overview"),[P,H]=C.useState(Pe()),re=ue=>{switch(H(ue),ue){case"songs":n(`/group/${t}/songs`);break;case"setlists":n(`/group/${t}/setlists`);break;case"overview":default:n(`/group/${t}`);break}};C.useEffect(()=>{H(Pe())},[r.pathname,r.search,e]),C.useEffect(()=>{t&&fe()},[t,J]),C.useEffect(()=>{t&&J&&ce()},[t,J,a]),hp({table:"group_members",filter:`group_id=eq.${t}`,onInsert:()=>{fe(),Le.success("Nuevo miembro añadido en tiempo real")},onUpdate:()=>{fe()},onDelete:()=>{fe(),Le.success("Miembro eliminado en tiempo real")},enabled:!!t});const ce=async()=>{if(J)try{const ue=await Bn(()=>et.from("users").select("role").eq("id",J.id).single(),"Error checking permissions");ue&&(ee(ue.role),Z(ue.role==="admin"));const G=a.find($e=>$e.user_id===J.id);ye(!!G),O((G==null?void 0:G.role_in_group)==="principal"||!1),(G==null?void 0:G.role_in_group)==="principal"&&Z(!0)}catch(ue){console.error("Error checking permissions:",ue)}},fe=async()=>{try{const ue=await Bn(()=>et.from("groups").select("*").eq("id",t).single(),"Error loading group");ue&&s(ue);const G=await Bn(()=>et.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",t).order("member_type",{ascending:!0}).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(G){const Fe=G.map(De=>({...De,instruments:(De.group_member_roles||[]).filter(Be=>Be==null?void 0:Be.role).map(Be=>({id:Be.role.id,name:Be.role.name}))}));l(Fe)}const $e=await Bn(()=>et.from("roles").select("*").eq("group_id",t).order("name"),"Error loading roles");$e&&f($e)}catch(ue){console.error("Error fetching group data:",ue)}finally{K(!1)}},Ee=async ue=>{if(!(!J||!t))try{await Bn(()=>et.rpc("link_group_member",{p_member_id:ue,p_user_id:J.id,p_group_id:t}),"Error linking member"),Le.success("¡Te has vinculado correctamente!"),await fe(),await ce()}catch(G){console.error("Error linking member:",G)}},Ce=ue=>{b(ue),g(!0)},te=ue=>{L(ue),j(!0)},Ne=async()=>{if(S)try{await Bn(()=>et.from("group_members").delete().eq("id",S.id),"Error deleting member"),Le.success("Miembro eliminado correctamente"),j(!1),L(null),fe()}catch(ue){console.error("Error deleting member:",ue)}},ie=a.filter(ue=>ue.role_in_group==="principal"),pe=a.filter(ue=>ue.role_in_group==="sustituto"),he=(ue,G)=>d.jsxs("div",{children:[d.jsx("div",{className:"bg-gray-50 px-3 py-2",children:d.jsx("h3",{className:"text-sm font-medium text-gray-700",children:G})}),d.jsx("div",{className:"divide-y",children:ue.map($e=>d.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base",children:$e.name}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${$e.member_type==="local"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:$e.member_type==="local"?"🎭 Local":$e.member_type==="registered"?"👤 Registrado":"👤 Miembro"}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${$e.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:$e.role_in_group==="principal"?"Principal":"Sustituto"}),(!$e.member_type||$e.member_type==="registered")&&!$e.user_id&&d.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),(!$e.member_type||$e.member_type==="registered")&&$e.email&&d.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["📧 ",$e.email]}),$e.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:$e.instruments.map((Fe,De)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[d.jsx(Jr,{className:"w-3 h-3 mr-1"}),Fe.name]},`${$e.id}-${Fe.id}-${De}`))}),$e.user_id===(J==null?void 0:J.id)&&d.jsx("div",{className:"mt-2 flex items-center",children:d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:$e.sync_calendar,onChange:async()=>{try{await Bn(()=>et.from("group_members").update({sync_calendar:!$e.sync_calendar}).eq("id",$e.id),"Error actualizando preferencias de calendario"),Le.success("Preferencias de calendario actualizadas"),fe()}catch(Fe){console.error("Error updating calendar preferences:",Fe)}},className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),$e.user_id===(J==null?void 0:J.id)&&$e.sync_calendar&&d.jsxs("button",{onClick:()=>je($e.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[d.jsx(q0,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripción al calendario"]})]}),d.jsxs("div",{className:"flex items-center gap-2 ml-2 sm:ml-4",children:[(R==="admin"||$e.user_id===(J==null?void 0:J.id))&&d.jsx("button",{onClick:()=>Ce($e),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:d.jsx(wN,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(R==="admin"||le)&&d.jsx("button",{onClick:()=>te($e),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:d.jsx(L5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),!$e.user_id&&!xe&&d.jsxs(yt,{onClick:()=>Ee($e.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[d.jsx(l_,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},$e.id))})]}),je=async ue=>{try{const{data:G,error:$e}=await et.rpc("get_group_calendar",{p_group_id:i==null?void 0:i.id,p_member_id:ue});if($e)throw $e;if(!G)throw new Error("No se pudo generar el calendario");const Fe=new Blob([G],{type:"text/calendar"}),De=new File([Fe],"calendar.ics",{type:"text/calendar"}),{error:Be}=await et.storage.from("calendars").upload(`${i==null?void 0:i.id}/${ue}/calendar.ics`,De,{cacheControl:"0",upsert:!0});if(Be)throw Be;const{data:{publicUrl:be}}=await et.storage.from("calendars").getPublicUrl(`${i==null?void 0:i.id}/${ue}/calendar.ics`);if(be)ae(be),$(!0);else throw new Error("No se pudo generar el enlace público")}catch(G){console.error("Error generating calendar subscription URL:",G),G.message==="new row violates row-level security policy"?Le.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):Le.error("Error al generar el enlace del calendario")}};return M?d.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded mb-2"}),d.jsx("div",{className:"h-4 w-64 bg-gray-200 animate-pulse rounded"})]}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded"})}),d.jsx(JM,{count:6})]})}),d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded"})}),d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-full bg-gray-200 animate-pulse rounded"})]})})]})]})]}):i?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:i.name}),d.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Gestiona miembros y disponibilidad"})]}),(oe||le)&&(!xe||R==="admin"||le)&&d.jsxs(yt,{onClick:()=>m(!0),className:"flex items-center justify-center space-x-2 w-full sm:w-auto",size:"sm",children:[d.jsx(Og,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"hidden sm:inline",children:R==="admin"||le?"Añadir Miembro":"Unirse al Grupo"}),d.jsx("span",{className:"sm:hidden",children:"Añadir"})]})]}),d.jsx("div",{className:"border-b border-gray-200 mb-6 overflow-x-auto",children:d.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[d.jsxs("button",{onClick:()=>re("overview"),className:`${P==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(q0,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Vista General"}),d.jsx("span",{className:"sm:hidden",children:"Vista"})]}),d.jsxs("button",{onClick:()=>re("songs"),className:`${P==="songs"||P==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(JD,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Canciones y Setlists"}),d.jsx("span",{className:"sm:hidden",children:"Música"})]})]})}),P==="overview"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-3 sm:p-4 border-b",children:d.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Miembros del Grupo"})}),a.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(l_,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsxs("p",{className:"text-gray-500",children:["No hay miembros aún. ",oe?'¡Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):d.jsxs("div",{className:"divide-y divide-gray-200",children:[ie.length>0&&he(ie,"Miembros Principales"),pe.length>0&&he(pe,"Miembros Sustitutos")]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-3 sm:p-4 border-b",children:d.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Disponibilidad"})}),d.jsx("div",{className:"p-2 sm:p-4",children:d.jsx(T$,{members:a,onAvailableDatesChange:Y,groupName:i.name})})]})]}),i&&t&&d.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:d.jsx(VB,{groupId:t,canManageEvents:R==="admin"||le,availableDates:U,members:a})})]}),(P==="songs"||P==="setlists")&&i&&t&&d.jsx(nq,{groupId:t,canManageSongs:R==="admin"||le,canManageSetlists:R==="admin"||le,defaultTab:P==="setlists"?"setlists":"songs"}),i&&(oe||le)&&(!xe||R==="admin"||le)&&d.jsx(QM,{isOpen:p,onClose:()=>m(!1),groupId:i.id,instruments:c,onMemberAdded:fe,isEmptyGroup:a.length===0,userRole:R}),k&&d.jsx(ZM,{isOpen:w,onClose:()=>{g(!1),b(null)},member:k,instruments:c,onMemberUpdated:fe,userRole:R}),d.jsx(GB,{isOpen:N,onClose:()=>{j(!1),L(null)},onConfirm:Ne,title:"Eliminar Miembro",message:`¿Estás seguro de que quieres eliminar a ${S==null?void 0:S.name}? Esta acción no se puede deshacer.`}),d.jsx(YB,{isOpen:Q,onClose:()=>$(!1),calendarUrl:z})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a él."})]})}function Hm({children:e}){console.log("ProtectedRoute mounted");const{user:t}=Rs(),n=Fa();return console.log("ProtectedRoute check:",{user:t,currentPath:n.pathname}),t?d.jsx(d.Fragment,{children:e}):(console.log("No user in ProtectedRoute, redirecting to login"),d.jsx(o7,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0}))}function rq(){return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Política de Privacidad"}),d.jsxs("div",{className:"prose prose-indigo",children:[d.jsxs("p",{className:"mb-4",children:["Última actualización: ",new Date().toLocaleDateString()]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Información que Recopilamos"}),d.jsx("p",{children:"Band Manager recopila la siguiente información personal:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Dirección de correo electrónico"}),d.jsx("li",{children:"Nombre"}),d.jsx("li",{children:"Información de perfil de usuario"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),d.jsx("p",{children:"Nuestra aplicación requiere ciertos permisos para funcionar correctamente:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la información de tu banda y permitir la colaboración entre miembros."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicación) mejorando así el rendimiento y permitiendo el uso sin conexión."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Cámara (opcional):"})," Solo si decides subir fotos directamente desde la aplicación para tu perfil o contenido de la banda."]})]}),d.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicación. No compartimos ninguna información recopilada a través de estos permisos con terceros."}),d.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a través de la configuración de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicación."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cómo Utilizamos su Información"}),d.jsx("p",{children:"Utilizamos la información recopilada para:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),d.jsx("li",{children:"Gestionar su cuenta y membresía"}),d.jsx("li",{children:"Permitir la participación en funciones interactivas"}),d.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),d.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticación, que implementa estándares de seguridad de la industria para proteger su información personal."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),d.jsx("p",{children:"Usted tiene derecho a:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Acceder a sus datos personales"}),d.jsx("li",{children:"Corregir datos inexactos"}),d.jsx("li",{children:"Solicitar la eliminación de sus datos"}),d.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),d.jsxs("p",{children:["Si tiene preguntas sobre esta Política de Privacidad, puede contactarnos en:",d.jsx("br",{}),d.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function iq(){console.log("AcceptInvitation component mounted");const[e]=US(),t=e.get("token"),n=$a(),{user:r}=Rs(),[i,s]=C.useState(!0),[a,l]=C.useState(null);C.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),Le.error("Token de invitación no válido"),n("/");return}(async()=>{try{if(!r){const g=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",g),n("/login",{state:{returnTo:g}});return}const{data:p,error:m}=await et.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:m}),m)throw m;if(!p||p.length===0){Le.error("Invitación no encontrada o ya procesada"),n("/");return}const w=p[0];if(console.log("Invitation data:",w),r.email!==w.email){Le.error("Esta invitación es para otro correo electrónico"),n("/");return}if(!e.get("group_member_id")){const g=new URLSearchParams(e);g.set("group_member_id",w.group_member_id),n(`${location.pathname}?${g.toString()}`,{replace:!0})}l({groupName:w.group_name,role:w.role_in_group}),s(!1)}catch(p){console.error("Error checking invitation:",p),Le.error(p.message||"Error al verificar la invitación"),n("/")}})()},[t,r,n,e]);const c=async f=>{try{s(!0);const{data:p,error:m}=await et.rpc("get_invitation_details",{p_token:t});if(m)throw m;if(!p||p.length===0)throw new Error("Invitación no encontrada");const{group_member_id:w}=p[0],{error:g}=await et.rpc("handle_group_invitation",{p_group_member_id:w,p_accept:f});if(g)throw g;Le.success(f?"Invitación aceptada":"Invitación rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),Le.error(p.message)}finally{s(!1)}};return i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),d.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitación..."})]})}):a?d.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitación a Grupo"}),d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",d.jsx("strong",{children:a.groupName})]}),d.jsxs("p",{className:"text-gray-600",children:["Rol: ",d.jsx("span",{className:"capitalize",children:a.role})]})]}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsx(yt,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),d.jsx(yt,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function sq(){const[e,t]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),a=async l=>{l.preventDefault(),s(!0),r("");const{error:c}=await et.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});s(!1),r(c?"Error: "+c.message:"¡Revisa tu correo para continuar el proceso!")};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"¿Olvidaste tu contraseña?"}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsx(Gn,{label:"Email",type:"email",value:e,onChange:l=>t(l.target.value),required:!0,placeholder:"tu@email.com"}),d.jsx(yt,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Ec,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function aq(){const[e,t]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),[a,l]=C.useState(!1),[c,f]=C.useState(!1),p=$a(),m=Fa();C.useEffect(()=>{(async()=>{var N;try{const{data:j}=await et.auth.getSession(),k=new URLSearchParams(m.search),b=k.get("token"),S=k.get("type"),L=(N=m.state)==null?void 0:N.resetCode,M=localStorage.getItem("recovery_token");if(b&&S==="recovery")f(!0);else if(L){f(!0);try{await et.auth.verifyOtp({token_hash:L,type:"recovery"})}catch{}}else if(M){f(!0),localStorage.removeItem("recovery_token");try{await et.auth.verifyOtp({token_hash:M,type:"recovery"})}catch{}}else j.session?f(!0):a||p("/login")}catch(j){console.error("Error al verificar autenticación:",j),p("/login")}})()},[m,p,a]);const w=async g=>{g.preventDefault(),s(!0),r("");try{const{error:N}=await et.auth.updateUser({password:e});if(N)throw N;l(!0),r("¡Contraseña actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(N){r("Error: "+N.message)}finally{s(!1)}};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contraseña"}),c?d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsx(Gn,{label:"Nueva contraseña",type:"password",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"••••••••"}),d.jsx(yt,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contraseña"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):d.jsxs("div",{className:"py-6 text-center",children:[d.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:d.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperación..."}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automáticamente, solicita un",d.jsx(Ec,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}function oq(){const{setUser:e,setSession:t}=Rs(),[n,r]=C.useState(new Set),[i,s]=C.useState(!1),a=Fa();C.useEffect(()=>{const c=new URLSearchParams(a.search),f=c.get("token"),p=c.get("type"),m=a.hash,w=c.get("code"),g=c.get("state"),N=c.get("error");if(console.log("App: Verificando parámetros en URL:",{token:f?f.substring(0,10)+"...":null,type:p,hash:m.length>0?m.substring(0,20)+"...":null,spotifyCode:w?w.substring(0,10)+"...":null,spotifyState:g?g.substring(0,10)+"...":null,spotifyError:N,fullURL:window.location.href,searchParams:a.search,hasSpotifyParams:!!(w&&g),pathname:a.pathname}),N){console.log("❌ Spotify auth error:",N),Le.error(`Error de autenticación de Spotify: ${N}`);const j=new URL(window.location.href);j.searchParams.delete("error"),window.history.replaceState({},document.title,j.toString())}else if(w&&g&&!i){const j=`${w.substring(0,10)}-${g.substring(0,10)}`;n.has(j)?console.log("🎵 Callback already processed, skipping:",j):(console.log("✅ Procesando autenticación de Spotify...",j),console.log("🎵 Spotify Code:",w.substring(0,10)+"..."),console.log("🎵 Spotify State:",g.substring(0,10)+"..."),console.log("🎵 Full URL:",window.location.href),r(k=>new Set([...k,j])),s(!0),console.log("🎵 About to call handleSpotifyAuth..."),l(w,g))}else w||g?console.log("⚠️ Spotify params parciales:",{spotifyCode:!!w,spotifyState:!!g}):f&&p==="recovery"&&a.pathname!=="/reset-password"?(console.log("App: Token PKCE de recuperación detectado, redirigiendo a /reset-password"),window.location.replace(`/reset-password?token=${f}&type=${p}`)):m.includes("access_token=")&&m.includes("type=recovery")&&a.pathname!=="/reset-password"&&(console.log("App: Token hash de recuperación detectado, redirigiendo a /reset-password"),window.location.replace("/reset-password"+m))},[a.search,a.pathname]);const l=async(c,f)=>{try{console.log("🎵 App: Iniciando autenticación de Spotify..."),console.log("🎵 App: Code length:",c==null?void 0:c.length),console.log("🎵 App: State length:",f==null?void 0:f.length);const p=new URL(window.location.href);p.searchParams.delete("code"),p.searchParams.delete("state"),window.history.replaceState({},document.title,p.toString()),console.log("🎵 App: URL cleared, calling spotifyService.handleAuthCallback...");const m=await $n.handleAuthCallback(c,f);if(console.log("🎵 App: handleAuthCallback returned:",m,typeof m),m===!0){console.log("🎵 App: Autenticación exitosa");const w=await $n.getCurrentUser();console.log("🎵 App: UserData received:",w==null?void 0:w.display_name),Le.success(`¡Conectado a Spotify como ${w.display_name}!`),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted")),console.log("🎵 App: Custom event dispatched");const g=localStorage.getItem("spotify_return_url");if(console.log("🎵 Return URL saved:",g),g){const N=new URL(g),j=new URL(window.location.href);if(N.pathname!==j.pathname){console.log("🎵 Redirecting back to:",g),localStorage.removeItem("spotify_return_url"),window.location.href=g;return}else localStorage.removeItem("spotify_return_url")}}else console.log("❌ App: handleAuthCallback returned false or falsy value:",m),console.log("🎵 Debug - processingSpotifyAuth:",i,"success:",m),m!==!1?($n.clearAuthState(),Le.error("Error al conectar con Spotify. Inténtalo de nuevo.")):console.log("🎵 Skipping error message - duplicate call detected (success === false)")}catch(p){if(console.error("❌ App: Error en callback de Spotify:",p),$n.clearAuthState(),p.message.includes("State mismatch")){console.log("🎵 State mismatch detected, clearing all and refreshing..."),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const m=new URL(window.location.href);m.searchParams.delete("code"),m.searchParams.delete("state"),m.searchParams.delete("error"),window.history.replaceState({},document.title,m.toString()),r(new Set),Le.error("Error de autenticación de Spotify. Los parámetros han sido limpiados. Puedes intentar conectar de nuevo.")}else Le.error(`Error al autenticar con Spotify: ${p.message}`)}finally{s(!1)}};return C.useEffect(()=>{console.log("AppContent mounted"),et.auth.getSession().then(({data:{session:f}})=>{console.log("Initial session:",f),t(f),e((f==null?void 0:f.user)??null)});const{data:{subscription:c}}=et.auth.onAuthStateChange((f,p)=>{console.log("Auth state changed:",p),t(p),e((p==null?void 0:p.user)??null)});return()=>c.unsubscribe()},[e,t]),d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(eO,{}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsxs(c7,{children:[d.jsx(Sa,{path:"/login",element:d.jsx(tO,{})}),d.jsx(Sa,{path:"/register",element:d.jsx(nO,{})}),d.jsx(Sa,{path:"/forgot-password",element:d.jsx(sq,{})}),d.jsx(Sa,{path:"/reset-password",element:d.jsx(aq,{})}),d.jsx(Sa,{path:"/accept-invitation",element:d.jsx(iq,{})}),d.jsx(Sa,{path:"/",element:d.jsx(Hm,{children:d.jsx(XM,{})})}),d.jsx(Sa,{path:"/group/:id",element:d.jsx(Hm,{children:d.jsx(Wv,{})})}),d.jsx(Sa,{path:"/group/:id/songs",element:d.jsx(Hm,{children:d.jsx(Wv,{defaultTab:"songs"})})}),d.jsx(Sa,{path:"/group/:id/setlists",element:d.jsx(Hm,{children:d.jsx(Wv,{defaultTab:"setlists"})})}),d.jsx(Sa,{path:"/privacy-policy",element:d.jsx(rq,{})})]})}),d.jsx(uT,{position:"top-right"})]})}function lq(){return d.jsx(v7,{children:d.jsx(oq,{})})}LS(document.getElementById("root")).render(d.jsx(C.StrictMode,{children:d.jsx(lq,{})}));export{jn as _,si as c,v3 as g};
