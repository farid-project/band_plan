function VC(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var y_={exports:{}},cg={},w_={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=Symbol.for("react.element"),YC=Symbol.for("react.portal"),KC=Symbol.for("react.fragment"),JC=Symbol.for("react.strict_mode"),XC=Symbol.for("react.profiler"),QC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),eA=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),nA=Symbol.for("react.memo"),rA=Symbol.for("react.lazy"),vx=Symbol.iterator;function iA(e){return e===null||typeof e!="object"?null:(e=vx&&e[vx]||e["@@iterator"],typeof e=="function"?e:null)}var x_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b_=Object.assign,__={};function Nf(e,t,n){this.props=e,this.context=t,this.refs=__,this.updater=n||x_}Nf.prototype.isReactComponent={};Nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function S_(){}S_.prototype=Nf.prototype;function Cy(e,t,n){this.props=e,this.context=t,this.refs=__,this.updater=n||x_}var Ay=Cy.prototype=new S_;Ay.constructor=Cy;b_(Ay,Nf.prototype);Ay.isPureReactComponent=!0;var yx=Array.isArray,N_=Object.prototype.hasOwnProperty,Ly={current:null},k_={key:!0,ref:!0,__self:!0,__source:!0};function j_(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)N_.call(t,r)&&!k_.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vp,type:e,key:s,ref:a,props:i,_owner:Ly.current}}function sA(e,t){return{$$typeof:vp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Py(e){return typeof e=="object"&&e!==null&&e.$$typeof===vp}function aA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wx=/\/+/g;function z1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aA(""+e.key):t.toString(36)}function Vm(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case vp:case YC:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+z1(a,0):r,yx(i)?(n="",e!=null&&(n=e.replace(wx,"$&/")+"/"),Vm(i,t,n,"",function(h){return h})):i!=null&&(Py(i)&&(i=sA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(wx,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",yx(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+z1(s,l);a+=Vm(s,t,n,c,i)}else if(c=iA(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+z1(s,l++),a+=Vm(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function mm(e,t,n){if(e==null)return e;var r=[],i=0;return Vm(e,r,"","",function(s){return t.call(n,s,i++)}),r}function oA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zi={current:null},Gm={transition:null},lA={ReactCurrentDispatcher:zi,ReactCurrentBatchConfig:Gm,ReactCurrentOwner:Ly};function E_(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:mm,forEach:function(e,t,n){mm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mm(e,function(){t++}),t},toArray:function(e){return mm(e,function(t){return t})||[]},only:function(e){if(!Py(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};an.Component=Nf;an.Fragment=KC;an.Profiler=XC;an.PureComponent=Cy;an.StrictMode=JC;an.Suspense=tA;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;an.act=E_;an.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=b_({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Ly.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N_.call(t,c)&&!k_.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:vp,type:e.type,key:i,ref:s,props:r,_owner:a}};an.createContext=function(e){return e={$$typeof:ZC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QC,_context:e},e.Consumer=e};an.createElement=j_;an.createFactory=function(e){var t=j_.bind(null,e);return t.type=e,t};an.createRef=function(){return{current:null}};an.forwardRef=function(e){return{$$typeof:eA,render:e}};an.isValidElement=Py;an.lazy=function(e){return{$$typeof:rA,_payload:{_status:-1,_result:e},_init:oA}};an.memo=function(e,t){return{$$typeof:nA,type:e,compare:t===void 0?null:t}};an.startTransition=function(e){var t=Gm.transition;Gm.transition={};try{e()}finally{Gm.transition=t}};an.unstable_act=E_;an.useCallback=function(e,t){return zi.current.useCallback(e,t)};an.useContext=function(e){return zi.current.useContext(e)};an.useDebugValue=function(){};an.useDeferredValue=function(e){return zi.current.useDeferredValue(e)};an.useEffect=function(e,t){return zi.current.useEffect(e,t)};an.useId=function(){return zi.current.useId()};an.useImperativeHandle=function(e,t,n){return zi.current.useImperativeHandle(e,t,n)};an.useInsertionEffect=function(e,t){return zi.current.useInsertionEffect(e,t)};an.useLayoutEffect=function(e,t){return zi.current.useLayoutEffect(e,t)};an.useMemo=function(e,t){return zi.current.useMemo(e,t)};an.useReducer=function(e,t,n){return zi.current.useReducer(e,t,n)};an.useRef=function(e){return zi.current.useRef(e)};an.useState=function(e){return zi.current.useState(e)};an.useSyncExternalStore=function(e,t,n){return zi.current.useSyncExternalStore(e,t,n)};an.useTransition=function(){return zi.current.useTransition()};an.version="18.3.1";w_.exports=an;var j=w_.exports;const vt=v_(j),Vv=VC({__proto__:null,default:vt},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA=j,uA=Symbol.for("react.element"),dA=Symbol.for("react.fragment"),fA=Object.prototype.hasOwnProperty,hA=cA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pA={key:!0,ref:!0,__self:!0,__source:!0};function C_(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)fA.call(t,r)&&!pA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:uA,type:e,key:s,ref:a,props:i,_owner:hA.current}}cg.Fragment=dA;cg.jsx=C_;cg.jsxs=C_;y_.exports=cg;var d=y_.exports,A_={exports:{}},Rs={},L_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,U){var ae=F.length;F.push(U);e:for(;0<ae;){var Le=ae-1>>>1,P=F[Le];if(0<i(P,U))F[Le]=U,F[ae]=P,ae=Le;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var U=F[0],ae=F.pop();if(ae!==U){F[0]=ae;e:for(var Le=0,P=F.length,V=P>>>1;Le<V;){var ne=2*(Le+1)-1,le=F[ne],de=ne+1,Ae=F[de];if(0>i(le,ae))de<P&&0>i(Ae,le)?(F[Le]=Ae,F[de]=ae,Le=de):(F[Le]=le,F[ne]=ae,Le=ne);else if(de<P&&0>i(Ae,ae))F[Le]=Ae,F[de]=ae,Le=de;else break e}}return U}function i(F,U){var ae=F.sortIndex-U.sortIndex;return ae!==0?ae:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],h=[],p=1,m=null,w=3,g=!1,N=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(F){for(var U=n(h);U!==null;){if(U.callback===null)r(h);else if(U.startTime<=F)r(h),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(h)}}function O(F){if(k=!1,L(F),!N)if(n(c)!==null)N=!0,pe(Y);else{var U=n(h);U!==null&&X(O,U.startTime-F)}}function Y(F,U){N=!1,k&&(k=!1,_(I),I=-1),g=!0;var ae=w;try{for(L(U),m=n(c);m!==null&&(!(m.expirationTime>U)||F&&!R());){var Le=m.callback;if(typeof Le=="function"){m.callback=null,w=m.priorityLevel;var P=Le(m.expirationTime<=U);U=e.unstable_now(),typeof P=="function"?m.callback=P:m===n(c)&&r(c),L(U)}else r(c);m=n(c)}if(m!==null)var V=!0;else{var ne=n(h);ne!==null&&X(O,ne.startTime-U),V=!1}return V}finally{m=null,w=ae,g=!1}}var se=!1,W=null,I=-1,re=5,oe=-1;function R(){return!(e.unstable_now()-oe<re)}function z(){if(W!==null){var F=e.unstable_now();oe=F;var U=!0;try{U=W(!0,F)}finally{U?K():(se=!1,W=null)}}else se=!1}var K;if(typeof S=="function")K=function(){S(z)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ye=J.port2;J.port1.onmessage=z,K=function(){ye.postMessage(null)}}else K=function(){C(z,0)};function pe(F){W=F,se||(se=!0,K())}function X(F,U){I=C(function(){F(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){N||g||(N=!0,pe(Y))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(w){case 1:case 2:case 3:var U=3;break;default:U=w}var ae=w;w=U;try{return F()}finally{w=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ae=w;w=F;try{return U()}finally{w=ae}},e.unstable_scheduleCallback=function(F,U,ae){var Le=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Le+ae:Le):ae=Le,F){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ae+P,F={id:p++,callback:U,priorityLevel:F,startTime:ae,expirationTime:P,sortIndex:-1},ae>Le?(F.sortIndex=ae,t(h,F),n(c)===null&&F===n(h)&&(k?(_(I),I=-1):k=!0,X(O,ae-Le))):(F.sortIndex=P,t(c,F),N||g||(N=!0,pe(Y))),F},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(F){var U=w;return function(){var ae=w;w=U;try{return F.apply(this,arguments)}finally{w=ae}}}})(P_);L_.exports=P_;var mA=L_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=j,Os=mA;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T_=new Set,Hh={};function qu(e,t){mf(e,t),mf(e+"Capture",t)}function mf(e,t){for(Hh[e]=t,e=0;e<t.length;e++)T_.add(t[e])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gv=Object.prototype.hasOwnProperty,vA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xx={},bx={};function yA(e){return Gv.call(bx,e)?!0:Gv.call(xx,e)?!1:vA.test(e)?bx[e]=!0:(xx[e]=!0,!1)}function wA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xA(e,t,n,r){if(t===null||typeof t>"u"||wA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qi(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var di={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){di[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];di[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){di[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){di[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){di[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){di[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){di[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){di[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){di[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ty=/[\-:]([a-z])/g;function My(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ty,My);di[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ty,My);di[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ty,My);di[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){di[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});di.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){di[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dy(e,t,n,r){var i=di.hasOwnProperty(t)?di[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xA(t,n,i,r)&&(n=null),r||i===null?yA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ll=gA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gm=Symbol.for("react.element"),zd=Symbol.for("react.portal"),qd=Symbol.for("react.fragment"),Iy=Symbol.for("react.strict_mode"),Yv=Symbol.for("react.profiler"),M_=Symbol.for("react.provider"),D_=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Kv=Symbol.for("react.suspense"),Jv=Symbol.for("react.suspense_list"),Ry=Symbol.for("react.memo"),sc=Symbol.for("react.lazy"),I_=Symbol.for("react.offscreen"),_x=Symbol.iterator;function lh(e){return e===null||typeof e!="object"?null:(e=_x&&e[_x]||e["@@iterator"],typeof e=="function"?e:null)}var gr=Object.assign,q1;function _h(e){if(q1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q1=t&&t[1]||""}return`
`+q1+e}var W1=!1;function H1(e,t){if(!e||W1)return"";W1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{W1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_h(e):""}function bA(e){switch(e.tag){case 5:return _h(e.type);case 16:return _h("Lazy");case 13:return _h("Suspense");case 19:return _h("SuspenseList");case 0:case 2:case 15:return e=H1(e.type,!1),e;case 11:return e=H1(e.type.render,!1),e;case 1:return e=H1(e.type,!0),e;default:return""}}function Xv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qd:return"Fragment";case zd:return"Portal";case Yv:return"Profiler";case Iy:return"StrictMode";case Kv:return"Suspense";case Jv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D_:return(e.displayName||"Context")+".Consumer";case M_:return(e._context.displayName||"Context")+".Provider";case Oy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ry:return t=e.displayName||null,t!==null?t:Xv(e.type)||"Memo";case sc:t=e._payload,e=e._init;try{return Xv(e(t))}catch{}}return null}function _A(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xv(t);case 8:return t===Iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ac(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function O_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SA(e){var t=O_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vm(e){e._valueTracker||(e._valueTracker=SA(e))}function R_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=O_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function m0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qv(e,t){var n=t.checked;return gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Sx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ac(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F_(e,t){t=t.checked,t!=null&&Dy(e,"checked",t,!1)}function Zv(e,t){F_(e,t);var n=Ac(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?e2(e,t.type,n):t.hasOwnProperty("defaultValue")&&e2(e,t.type,Ac(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function e2(e,t,n){(t!=="number"||m0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sh=Array.isArray;function tf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ac(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function t2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(lt(92));if(Sh(n)){if(1<n.length)throw Error(lt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ac(n)}}function $_(e,t){var n=Ac(t.value),r=Ac(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function jx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function n2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ym,U_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ym=ym||document.createElement("div"),ym.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ym.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ch={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NA=["Webkit","ms","Moz","O"];Object.keys(Ch).forEach(function(e){NA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ch[t]=Ch[e]})});function z_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ch.hasOwnProperty(e)&&Ch[e]?(""+t).trim():t+"px"}function q_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=z_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var kA=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r2(e,t){if(t){if(kA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function i2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s2=null;function Fy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var a2=null,nf=null,rf=null;function Ex(e){if(e=xp(e)){if(typeof a2!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=pg(t),a2(e.stateNode,e.type,t))}}function W_(e){nf?rf?rf.push(e):rf=[e]:nf=e}function H_(){if(nf){var e=nf,t=rf;if(rf=nf=null,Ex(e),t)for(e=0;e<t.length;e++)Ex(t[e])}}function V_(e,t){return e(t)}function G_(){}var V1=!1;function Y_(e,t,n){if(V1)return e(t,n);V1=!0;try{return V_(e,t,n)}finally{V1=!1,(nf!==null||rf!==null)&&(G_(),H_())}}function Gh(e,t){var n=e.stateNode;if(n===null)return null;var r=pg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(lt(231,t,typeof n));return n}var o2=!1;if(tl)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){o2=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{o2=!1}function jA(e,t,n,r,i,s,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(p){this.onError(p)}}var Ah=!1,g0=null,v0=!1,l2=null,EA={onError:function(e){Ah=!0,g0=e}};function CA(e,t,n,r,i,s,a,l,c){Ah=!1,g0=null,jA.apply(EA,arguments)}function AA(e,t,n,r,i,s,a,l,c){if(CA.apply(this,arguments),Ah){if(Ah){var h=g0;Ah=!1,g0=null}else throw Error(lt(198));v0||(v0=!0,l2=h)}}function Wu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function K_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cx(e){if(Wu(e)!==e)throw Error(lt(188))}function LA(e){var t=e.alternate;if(!t){if(t=Wu(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cx(i),e;if(s===r)return Cx(i),t;s=s.sibling}throw Error(lt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(lt(189))}}if(n.alternate!==r)throw Error(lt(190))}if(n.tag!==3)throw Error(lt(188));return n.stateNode.current===n?e:t}function J_(e){return e=LA(e),e!==null?X_(e):null}function X_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X_(e);if(t!==null)return t;e=e.sibling}return null}var Q_=Os.unstable_scheduleCallback,Ax=Os.unstable_cancelCallback,PA=Os.unstable_shouldYield,TA=Os.unstable_requestPaint,Er=Os.unstable_now,MA=Os.unstable_getCurrentPriorityLevel,$y=Os.unstable_ImmediatePriority,Z_=Os.unstable_UserBlockingPriority,y0=Os.unstable_NormalPriority,DA=Os.unstable_LowPriority,e4=Os.unstable_IdlePriority,ug=null,go=null;function IA(e){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(ug,e,void 0,(e.current.flags&128)===128)}catch{}}var Ma=Math.clz32?Math.clz32:FA,OA=Math.log,RA=Math.LN2;function FA(e){return e>>>=0,e===0?32:31-(OA(e)/RA|0)|0}var wm=64,xm=4194304;function Nh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Nh(l):(s&=a,s!==0&&(r=Nh(s)))}else a=n&~i,a!==0?r=Nh(a):s!==0&&(r=Nh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ma(t),i=1<<n,r|=e[n],t&=~i;return r}function $A(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Ma(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=$A(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function c2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t4(){var e=wm;return wm<<=1,!(wm&4194240)&&(wm=64),e}function G1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ma(t),e[t]=n}function UA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ma(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function By(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ma(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ln=0;function n4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var r4,Uy,i4,s4,a4,u2=!1,bm=[],wc=null,xc=null,bc=null,Yh=new Map,Kh=new Map,cc=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lx(e,t){switch(e){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":xc=null;break;case"mouseover":case"mouseout":bc=null;break;case"pointerover":case"pointerout":Yh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(t.pointerId)}}function uh(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=xp(t),t!==null&&Uy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qA(e,t,n,r,i){switch(t){case"focusin":return wc=uh(wc,e,t,n,r,i),!0;case"dragenter":return xc=uh(xc,e,t,n,r,i),!0;case"mouseover":return bc=uh(bc,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Yh.set(s,uh(Yh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Kh.set(s,uh(Kh.get(s)||null,e,t,n,r,i)),!0}return!1}function o4(e){var t=Eu(e.target);if(t!==null){var n=Wu(t);if(n!==null){if(t=n.tag,t===13){if(t=K_(n),t!==null){e.blockedOn=t,a4(e.priority,function(){i4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ym(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=d2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);s2=r,n.target.dispatchEvent(r),s2=null}else return t=xp(n),t!==null&&Uy(t),e.blockedOn=n,!1;t.shift()}return!0}function Px(e,t,n){Ym(e)&&n.delete(t)}function WA(){u2=!1,wc!==null&&Ym(wc)&&(wc=null),xc!==null&&Ym(xc)&&(xc=null),bc!==null&&Ym(bc)&&(bc=null),Yh.forEach(Px),Kh.forEach(Px)}function dh(e,t){e.blockedOn===t&&(e.blockedOn=null,u2||(u2=!0,Os.unstable_scheduleCallback(Os.unstable_NormalPriority,WA)))}function Jh(e){function t(i){return dh(i,e)}if(0<bm.length){dh(bm[0],e);for(var n=1;n<bm.length;n++){var r=bm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wc!==null&&dh(wc,e),xc!==null&&dh(xc,e),bc!==null&&dh(bc,e),Yh.forEach(t),Kh.forEach(t),n=0;n<cc.length;n++)r=cc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cc.length&&(n=cc[0],n.blockedOn===null);)o4(n),n.blockedOn===null&&cc.shift()}var sf=ll.ReactCurrentBatchConfig,x0=!0;function HA(e,t,n,r){var i=Ln,s=sf.transition;sf.transition=null;try{Ln=1,zy(e,t,n,r)}finally{Ln=i,sf.transition=s}}function VA(e,t,n,r){var i=Ln,s=sf.transition;sf.transition=null;try{Ln=4,zy(e,t,n,r)}finally{Ln=i,sf.transition=s}}function zy(e,t,n,r){if(x0){var i=d2(e,t,n,r);if(i===null)rv(e,t,r,b0,n),Lx(e,r);else if(qA(i,e,t,n,r))r.stopPropagation();else if(Lx(e,r),t&4&&-1<zA.indexOf(e)){for(;i!==null;){var s=xp(i);if(s!==null&&r4(s),s=d2(e,t,n,r),s===null&&rv(e,t,r,b0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rv(e,t,r,null,n)}}var b0=null;function d2(e,t,n,r){if(b0=null,e=Fy(r),e=Eu(e),e!==null)if(t=Wu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=K_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return b0=e,null}function l4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MA()){case $y:return 1;case Z_:return 4;case y0:case DA:return 16;case e4:return 536870912;default:return 16}default:return 16}}var pc=null,qy=null,Km=null;function c4(){if(Km)return Km;var e,t=qy,n=t.length,r,i="value"in pc?pc.value:pc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Km=i.slice(e,1<r?1-r:void 0)}function Jm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _m(){return!0}function Tx(){return!1}function Fs(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_m:Tx,this.isPropagationStopped=Tx,this}return gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),t}var kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Fs(kf),wp=gr({},kf,{view:0,detail:0}),GA=Fs(wp),Y1,K1,fh,dg=gr({},wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fh&&(fh&&e.type==="mousemove"?(Y1=e.screenX-fh.screenX,K1=e.screenY-fh.screenY):K1=Y1=0,fh=e),Y1)},movementY:function(e){return"movementY"in e?e.movementY:K1}}),Mx=Fs(dg),YA=gr({},dg,{dataTransfer:0}),KA=Fs(YA),JA=gr({},wp,{relatedTarget:0}),J1=Fs(JA),XA=gr({},kf,{animationName:0,elapsedTime:0,pseudoElement:0}),QA=Fs(XA),ZA=gr({},kf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eL=Fs(ZA),tL=gr({},kf,{data:0}),Dx=Fs(tL),nL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iL[e])?!!t[e]:!1}function Hy(){return sL}var aL=gr({},wp,{key:function(e){if(e.key){var t=nL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(e){return e.type==="keypress"?Jm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oL=Fs(aL),lL=gr({},dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ix=Fs(lL),cL=gr({},wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),uL=Fs(cL),dL=gr({},kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),fL=Fs(dL),hL=gr({},dg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pL=Fs(hL),mL=[9,13,27,32],Vy=tl&&"CompositionEvent"in window,Lh=null;tl&&"documentMode"in document&&(Lh=document.documentMode);var gL=tl&&"TextEvent"in window&&!Lh,u4=tl&&(!Vy||Lh&&8<Lh&&11>=Lh),Ox=" ",Rx=!1;function d4(e,t){switch(e){case"keyup":return mL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wd=!1;function vL(e,t){switch(e){case"compositionend":return f4(t);case"keypress":return t.which!==32?null:(Rx=!0,Ox);case"textInput":return e=t.data,e===Ox&&Rx?null:e;default:return null}}function yL(e,t){if(Wd)return e==="compositionend"||!Vy&&d4(e,t)?(e=c4(),Km=qy=pc=null,Wd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u4&&t.locale!=="ko"?null:t.data;default:return null}}var wL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wL[e.type]:t==="textarea"}function h4(e,t,n,r){W_(r),t=_0(t,"onChange"),0<t.length&&(n=new Wy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ph=null,Xh=null;function xL(e){N4(e,0)}function fg(e){var t=Gd(e);if(R_(t))return e}function bL(e,t){if(e==="change")return t}var p4=!1;if(tl){var X1;if(tl){var Q1="oninput"in document;if(!Q1){var $x=document.createElement("div");$x.setAttribute("oninput","return;"),Q1=typeof $x.oninput=="function"}X1=Q1}else X1=!1;p4=X1&&(!document.documentMode||9<document.documentMode)}function Bx(){Ph&&(Ph.detachEvent("onpropertychange",m4),Xh=Ph=null)}function m4(e){if(e.propertyName==="value"&&fg(Xh)){var t=[];h4(t,Xh,e,Fy(e)),Y_(xL,t)}}function _L(e,t,n){e==="focusin"?(Bx(),Ph=t,Xh=n,Ph.attachEvent("onpropertychange",m4)):e==="focusout"&&Bx()}function SL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fg(Xh)}function NL(e,t){if(e==="click")return fg(t)}function kL(e,t){if(e==="input"||e==="change")return fg(t)}function jL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oa=typeof Object.is=="function"?Object.is:jL;function Qh(e,t){if(Oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gv.call(t,i)||!Oa(e[i],t[i]))return!1}return!0}function Ux(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zx(e,t){var n=Ux(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ux(n)}}function g4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v4(){for(var e=window,t=m0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=m0(e.document)}return t}function Gy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function EL(e){var t=v4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&g4(n.ownerDocument.documentElement,n)){if(r!==null&&Gy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=zx(n,s);var a=zx(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CL=tl&&"documentMode"in document&&11>=document.documentMode,Hd=null,f2=null,Th=null,h2=!1;function qx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;h2||Hd==null||Hd!==m0(r)||(r=Hd,"selectionStart"in r&&Gy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Th&&Qh(Th,r)||(Th=r,r=_0(f2,"onSelect"),0<r.length&&(t=new Wy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hd)))}function Sm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vd={animationend:Sm("Animation","AnimationEnd"),animationiteration:Sm("Animation","AnimationIteration"),animationstart:Sm("Animation","AnimationStart"),transitionend:Sm("Transition","TransitionEnd")},Z1={},y4={};tl&&(y4=document.createElement("div").style,"AnimationEvent"in window||(delete Vd.animationend.animation,delete Vd.animationiteration.animation,delete Vd.animationstart.animation),"TransitionEvent"in window||delete Vd.transitionend.transition);function hg(e){if(Z1[e])return Z1[e];if(!Vd[e])return e;var t=Vd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in y4)return Z1[e]=t[n];return e}var w4=hg("animationend"),x4=hg("animationiteration"),b4=hg("animationstart"),_4=hg("transitionend"),S4=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(e,t){S4.set(e,t),qu(t,[e])}for(var ev=0;ev<Wx.length;ev++){var tv=Wx[ev],AL=tv.toLowerCase(),LL=tv[0].toUpperCase()+tv.slice(1);Ic(AL,"on"+LL)}Ic(w4,"onAnimationEnd");Ic(x4,"onAnimationIteration");Ic(b4,"onAnimationStart");Ic("dblclick","onDoubleClick");Ic("focusin","onFocus");Ic("focusout","onBlur");Ic(_4,"onTransitionEnd");mf("onMouseEnter",["mouseout","mouseover"]);mf("onMouseLeave",["mouseout","mouseover"]);mf("onPointerEnter",["pointerout","pointerover"]);mf("onPointerLeave",["pointerout","pointerover"]);qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PL=new Set("cancel close invalid load scroll toggle".split(" ").concat(kh));function Hx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,AA(r,t,void 0,e),e.currentTarget=null}function N4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Hx(i,l,h),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Hx(i,l,h),s=c}}}if(v0)throw e=l2,v0=!1,l2=null,e}function Yn(e,t){var n=t[y2];n===void 0&&(n=t[y2]=new Set);var r=e+"__bubble";n.has(r)||(k4(t,e,2,!1),n.add(r))}function nv(e,t,n){var r=0;t&&(r|=4),k4(n,e,r,t)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function Zh(e){if(!e[Nm]){e[Nm]=!0,T_.forEach(function(n){n!=="selectionchange"&&(PL.has(n)||nv(n,!1,e),nv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nm]||(t[Nm]=!0,nv("selectionchange",!1,t))}}function k4(e,t,n,r){switch(l4(t)){case 1:var i=HA;break;case 4:i=VA;break;default:i=zy}n=i.bind(null,t,n,e),i=void 0,!o2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function rv(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Eu(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Y_(function(){var h=s,p=Fy(n),m=[];e:{var w=S4.get(e);if(w!==void 0){var g=Wy,N=e;switch(e){case"keypress":if(Jm(n)===0)break e;case"keydown":case"keyup":g=oL;break;case"focusin":N="focus",g=J1;break;case"focusout":N="blur",g=J1;break;case"beforeblur":case"afterblur":g=J1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Mx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=KA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=uL;break;case w4:case x4:case b4:g=QA;break;case _4:g=fL;break;case"scroll":g=GA;break;case"wheel":g=pL;break;case"copy":case"cut":case"paste":g=eL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ix}var k=(t&4)!==0,C=!k&&e==="scroll",_=k?w!==null?w+"Capture":null:w;k=[];for(var S=h,L;S!==null;){L=S;var O=L.stateNode;if(L.tag===5&&O!==null&&(L=O,_!==null&&(O=Gh(S,_),O!=null&&k.push(ep(S,O,L)))),C)break;S=S.return}0<k.length&&(w=new g(w,N,null,n,p),m.push({event:w,listeners:k}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",w&&n!==s2&&(N=n.relatedTarget||n.fromElement)&&(Eu(N)||N[nl]))break e;if((g||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,g?(N=n.relatedTarget||n.toElement,g=h,N=N?Eu(N):null,N!==null&&(C=Wu(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=h),g!==N)){if(k=Mx,O="onMouseLeave",_="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(k=Ix,O="onPointerLeave",_="onPointerEnter",S="pointer"),C=g==null?w:Gd(g),L=N==null?w:Gd(N),w=new k(O,S+"leave",g,n,p),w.target=C,w.relatedTarget=L,O=null,Eu(p)===h&&(k=new k(_,S+"enter",N,n,p),k.target=L,k.relatedTarget=C,O=k),C=O,g&&N)t:{for(k=g,_=N,S=0,L=k;L;L=Md(L))S++;for(L=0,O=_;O;O=Md(O))L++;for(;0<S-L;)k=Md(k),S--;for(;0<L-S;)_=Md(_),L--;for(;S--;){if(k===_||_!==null&&k===_.alternate)break t;k=Md(k),_=Md(_)}k=null}else k=null;g!==null&&Vx(m,w,g,k,!1),N!==null&&C!==null&&Vx(m,C,N,k,!0)}}e:{if(w=h?Gd(h):window,g=w.nodeName&&w.nodeName.toLowerCase(),g==="select"||g==="input"&&w.type==="file")var Y=bL;else if(Fx(w))if(p4)Y=kL;else{Y=SL;var se=_L}else(g=w.nodeName)&&g.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(Y=NL);if(Y&&(Y=Y(e,h))){h4(m,Y,n,p);break e}se&&se(e,w,h),e==="focusout"&&(se=w._wrapperState)&&se.controlled&&w.type==="number"&&e2(w,"number",w.value)}switch(se=h?Gd(h):window,e){case"focusin":(Fx(se)||se.contentEditable==="true")&&(Hd=se,f2=h,Th=null);break;case"focusout":Th=f2=Hd=null;break;case"mousedown":h2=!0;break;case"contextmenu":case"mouseup":case"dragend":h2=!1,qx(m,n,p);break;case"selectionchange":if(CL)break;case"keydown":case"keyup":qx(m,n,p)}var W;if(Vy)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Wd?d4(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(u4&&n.locale!=="ko"&&(Wd||I!=="onCompositionStart"?I==="onCompositionEnd"&&Wd&&(W=c4()):(pc=p,qy="value"in pc?pc.value:pc.textContent,Wd=!0)),se=_0(h,I),0<se.length&&(I=new Dx(I,e,null,n,p),m.push({event:I,listeners:se}),W?I.data=W:(W=f4(n),W!==null&&(I.data=W)))),(W=gL?vL(e,n):yL(e,n))&&(h=_0(h,"onBeforeInput"),0<h.length&&(p=new Dx("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=W))}N4(m,t)})}function ep(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gh(e,n),s!=null&&r.unshift(ep(e,s,i)),s=Gh(e,t),s!=null&&r.push(ep(e,s,i))),e=e.return}return r}function Md(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vx(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=Gh(n,s),c!=null&&a.unshift(ep(n,c,l))):i||(c=Gh(n,s),c!=null&&a.push(ep(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var TL=/\r\n?/g,ML=/\u0000|\uFFFD/g;function Gx(e){return(typeof e=="string"?e:""+e).replace(TL,`
`).replace(ML,"")}function km(e,t,n){if(t=Gx(t),Gx(e)!==t&&n)throw Error(lt(425))}function S0(){}var p2=null,m2=null;function g2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var v2=typeof setTimeout=="function"?setTimeout:void 0,DL=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,IL=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(e){return Yx.resolve(null).then(e).catch(OL)}:v2;function OL(e){setTimeout(function(){throw e})}function iv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Jh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jh(t)}function _c(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jf=Math.random().toString(36).slice(2),uo="__reactFiber$"+jf,tp="__reactProps$"+jf,nl="__reactContainer$"+jf,y2="__reactEvents$"+jf,RL="__reactListeners$"+jf,FL="__reactHandles$"+jf;function Eu(e){var t=e[uo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nl]||n[uo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Kx(e);e!==null;){if(n=e[uo])return n;e=Kx(e)}return t}e=n,n=e.parentNode}return null}function xp(e){return e=e[uo]||e[nl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function pg(e){return e[tp]||null}var w2=[],Yd=-1;function Oc(e){return{current:e}}function Jn(e){0>Yd||(e.current=w2[Yd],w2[Yd]=null,Yd--)}function Wn(e,t){Yd++,w2[Yd]=e.current,e.current=t}var Lc={},Ei=Oc(Lc),us=Oc(!1),Ru=Lc;function gf(e,t){var n=e.type.contextTypes;if(!n)return Lc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ds(e){return e=e.childContextTypes,e!=null}function N0(){Jn(us),Jn(Ei)}function Jx(e,t,n){if(Ei.current!==Lc)throw Error(lt(168));Wn(Ei,t),Wn(us,n)}function j4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(lt(108,_A(e)||"Unknown",i));return gr({},n,r)}function k0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lc,Ru=Ei.current,Wn(Ei,e),Wn(us,us.current),!0}function Xx(e,t,n){var r=e.stateNode;if(!r)throw Error(lt(169));n?(e=j4(e,t,Ru),r.__reactInternalMemoizedMergedChildContext=e,Jn(us),Jn(Ei),Wn(Ei,e)):Jn(us),Wn(us,n)}var Ko=null,mg=!1,sv=!1;function E4(e){Ko===null?Ko=[e]:Ko.push(e)}function $L(e){mg=!0,E4(e)}function Rc(){if(!sv&&Ko!==null){sv=!0;var e=0,t=Ln;try{var n=Ko;for(Ln=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ko=null,mg=!1}catch(i){throw Ko!==null&&(Ko=Ko.slice(e+1)),Q_($y,Rc),i}finally{Ln=t,sv=!1}}return null}var Kd=[],Jd=0,j0=null,E0=0,ta=[],na=0,Fu=null,Xo=1,Qo="";function yu(e,t){Kd[Jd++]=E0,Kd[Jd++]=j0,j0=e,E0=t}function C4(e,t,n){ta[na++]=Xo,ta[na++]=Qo,ta[na++]=Fu,Fu=e;var r=Xo;e=Qo;var i=32-Ma(r)-1;r&=~(1<<i),n+=1;var s=32-Ma(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xo=1<<32-Ma(t)+i|n<<i|r,Qo=s+e}else Xo=1<<s|n<<i|r,Qo=e}function Yy(e){e.return!==null&&(yu(e,1),C4(e,1,0))}function Ky(e){for(;e===j0;)j0=Kd[--Jd],Kd[Jd]=null,E0=Kd[--Jd],Kd[Jd]=null;for(;e===Fu;)Fu=ta[--na],ta[na]=null,Qo=ta[--na],ta[na]=null,Xo=ta[--na],ta[na]=null}var Is=null,Ms=null,ar=!1,Pa=null;function A4(e,t){var n=ra(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Is=e,Ms=_c(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Is=e,Ms=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fu!==null?{id:Xo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ra(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Is=e,Ms=null,!0):!1;default:return!1}}function x2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function b2(e){if(ar){var t=Ms;if(t){var n=t;if(!Qx(e,t)){if(x2(e))throw Error(lt(418));t=_c(n.nextSibling);var r=Is;t&&Qx(e,t)?A4(r,n):(e.flags=e.flags&-4097|2,ar=!1,Is=e)}}else{if(x2(e))throw Error(lt(418));e.flags=e.flags&-4097|2,ar=!1,Is=e}}}function Zx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Is=e}function jm(e){if(e!==Is)return!1;if(!ar)return Zx(e),ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!g2(e.type,e.memoizedProps)),t&&(t=Ms)){if(x2(e))throw L4(),Error(lt(418));for(;t;)A4(e,t),t=_c(t.nextSibling)}if(Zx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ms=_c(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ms=null}}else Ms=Is?_c(e.stateNode.nextSibling):null;return!0}function L4(){for(var e=Ms;e;)e=_c(e.nextSibling)}function vf(){Ms=Is=null,ar=!1}function Jy(e){Pa===null?Pa=[e]:Pa.push(e)}var BL=ll.ReactCurrentBatchConfig;function hh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(lt(309));var r=n.stateNode}if(!r)throw Error(lt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(lt(284));if(!n._owner)throw Error(lt(290,e))}return e}function Em(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eb(e){var t=e._init;return t(e._payload)}function P4(e){function t(_,S){if(e){var L=_.deletions;L===null?(_.deletions=[S],_.flags|=16):L.push(S)}}function n(_,S){if(!e)return null;for(;S!==null;)t(_,S),S=S.sibling;return null}function r(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function i(_,S){return _=jc(_,S),_.index=0,_.sibling=null,_}function s(_,S,L){return _.index=L,e?(L=_.alternate,L!==null?(L=L.index,L<S?(_.flags|=2,S):L):(_.flags|=2,S)):(_.flags|=1048576,S)}function a(_){return e&&_.alternate===null&&(_.flags|=2),_}function l(_,S,L,O){return S===null||S.tag!==6?(S=fv(L,_.mode,O),S.return=_,S):(S=i(S,L),S.return=_,S)}function c(_,S,L,O){var Y=L.type;return Y===qd?p(_,S,L.props.children,O,L.key):S!==null&&(S.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===sc&&eb(Y)===S.type)?(O=i(S,L.props),O.ref=hh(_,S,L),O.return=_,O):(O=r0(L.type,L.key,L.props,null,_.mode,O),O.ref=hh(_,S,L),O.return=_,O)}function h(_,S,L,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==L.containerInfo||S.stateNode.implementation!==L.implementation?(S=hv(L,_.mode,O),S.return=_,S):(S=i(S,L.children||[]),S.return=_,S)}function p(_,S,L,O,Y){return S===null||S.tag!==7?(S=Mu(L,_.mode,O,Y),S.return=_,S):(S=i(S,L),S.return=_,S)}function m(_,S,L){if(typeof S=="string"&&S!==""||typeof S=="number")return S=fv(""+S,_.mode,L),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gm:return L=r0(S.type,S.key,S.props,null,_.mode,L),L.ref=hh(_,null,S),L.return=_,L;case zd:return S=hv(S,_.mode,L),S.return=_,S;case sc:var O=S._init;return m(_,O(S._payload),L)}if(Sh(S)||lh(S))return S=Mu(S,_.mode,L,null),S.return=_,S;Em(_,S)}return null}function w(_,S,L,O){var Y=S!==null?S.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return Y!==null?null:l(_,S,""+L,O);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case gm:return L.key===Y?c(_,S,L,O):null;case zd:return L.key===Y?h(_,S,L,O):null;case sc:return Y=L._init,w(_,S,Y(L._payload),O)}if(Sh(L)||lh(L))return Y!==null?null:p(_,S,L,O,null);Em(_,L)}return null}function g(_,S,L,O,Y){if(typeof O=="string"&&O!==""||typeof O=="number")return _=_.get(L)||null,l(S,_,""+O,Y);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case gm:return _=_.get(O.key===null?L:O.key)||null,c(S,_,O,Y);case zd:return _=_.get(O.key===null?L:O.key)||null,h(S,_,O,Y);case sc:var se=O._init;return g(_,S,L,se(O._payload),Y)}if(Sh(O)||lh(O))return _=_.get(L)||null,p(S,_,O,Y,null);Em(S,O)}return null}function N(_,S,L,O){for(var Y=null,se=null,W=S,I=S=0,re=null;W!==null&&I<L.length;I++){W.index>I?(re=W,W=null):re=W.sibling;var oe=w(_,W,L[I],O);if(oe===null){W===null&&(W=re);break}e&&W&&oe.alternate===null&&t(_,W),S=s(oe,S,I),se===null?Y=oe:se.sibling=oe,se=oe,W=re}if(I===L.length)return n(_,W),ar&&yu(_,I),Y;if(W===null){for(;I<L.length;I++)W=m(_,L[I],O),W!==null&&(S=s(W,S,I),se===null?Y=W:se.sibling=W,se=W);return ar&&yu(_,I),Y}for(W=r(_,W);I<L.length;I++)re=g(W,_,I,L[I],O),re!==null&&(e&&re.alternate!==null&&W.delete(re.key===null?I:re.key),S=s(re,S,I),se===null?Y=re:se.sibling=re,se=re);return e&&W.forEach(function(R){return t(_,R)}),ar&&yu(_,I),Y}function k(_,S,L,O){var Y=lh(L);if(typeof Y!="function")throw Error(lt(150));if(L=Y.call(L),L==null)throw Error(lt(151));for(var se=Y=null,W=S,I=S=0,re=null,oe=L.next();W!==null&&!oe.done;I++,oe=L.next()){W.index>I?(re=W,W=null):re=W.sibling;var R=w(_,W,oe.value,O);if(R===null){W===null&&(W=re);break}e&&W&&R.alternate===null&&t(_,W),S=s(R,S,I),se===null?Y=R:se.sibling=R,se=R,W=re}if(oe.done)return n(_,W),ar&&yu(_,I),Y;if(W===null){for(;!oe.done;I++,oe=L.next())oe=m(_,oe.value,O),oe!==null&&(S=s(oe,S,I),se===null?Y=oe:se.sibling=oe,se=oe);return ar&&yu(_,I),Y}for(W=r(_,W);!oe.done;I++,oe=L.next())oe=g(W,_,I,oe.value,O),oe!==null&&(e&&oe.alternate!==null&&W.delete(oe.key===null?I:oe.key),S=s(oe,S,I),se===null?Y=oe:se.sibling=oe,se=oe);return e&&W.forEach(function(z){return t(_,z)}),ar&&yu(_,I),Y}function C(_,S,L,O){if(typeof L=="object"&&L!==null&&L.type===qd&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case gm:e:{for(var Y=L.key,se=S;se!==null;){if(se.key===Y){if(Y=L.type,Y===qd){if(se.tag===7){n(_,se.sibling),S=i(se,L.props.children),S.return=_,_=S;break e}}else if(se.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===sc&&eb(Y)===se.type){n(_,se.sibling),S=i(se,L.props),S.ref=hh(_,se,L),S.return=_,_=S;break e}n(_,se);break}else t(_,se);se=se.sibling}L.type===qd?(S=Mu(L.props.children,_.mode,O,L.key),S.return=_,_=S):(O=r0(L.type,L.key,L.props,null,_.mode,O),O.ref=hh(_,S,L),O.return=_,_=O)}return a(_);case zd:e:{for(se=L.key;S!==null;){if(S.key===se)if(S.tag===4&&S.stateNode.containerInfo===L.containerInfo&&S.stateNode.implementation===L.implementation){n(_,S.sibling),S=i(S,L.children||[]),S.return=_,_=S;break e}else{n(_,S);break}else t(_,S);S=S.sibling}S=hv(L,_.mode,O),S.return=_,_=S}return a(_);case sc:return se=L._init,C(_,S,se(L._payload),O)}if(Sh(L))return N(_,S,L,O);if(lh(L))return k(_,S,L,O);Em(_,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,S!==null&&S.tag===6?(n(_,S.sibling),S=i(S,L),S.return=_,_=S):(n(_,S),S=fv(L,_.mode,O),S.return=_,_=S),a(_)):n(_,S)}return C}var yf=P4(!0),T4=P4(!1),C0=Oc(null),A0=null,Xd=null,Xy=null;function Qy(){Xy=Xd=A0=null}function Zy(e){var t=C0.current;Jn(C0),e._currentValue=t}function _2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function af(e,t){A0=e,Xy=Xd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cs=!0),e.firstContext=null)}function sa(e){var t=e._currentValue;if(Xy!==e)if(e={context:e,memoizedValue:t,next:null},Xd===null){if(A0===null)throw Error(lt(308));Xd=e,A0.dependencies={lanes:0,firstContext:e}}else Xd=Xd.next=e;return t}var Cu=null;function e5(e){Cu===null?Cu=[e]:Cu.push(e)}function M4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,e5(t)):(n.next=i.next,i.next=n),t.interleaved=n,rl(e,r)}function rl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ac=!1;function t5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,rl(e,n)}return i=r.interleaved,i===null?(t.next=t,e5(r)):(t.next=i.next,i.next=t),r.interleaved=t,rl(e,n)}function Xm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,By(e,n)}}function tb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function L0(e,t,n,r){var i=e.updateQueue;ac=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?s=h:a.next=h,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,p=h=c=null,l=s;do{var w=l.lane,g=l.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,k=l;switch(w=t,g=n,k.tag){case 1:if(N=k.payload,typeof N=="function"){m=N.call(g,m,w);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,w=typeof N=="function"?N.call(g,m,w):N,w==null)break e;m=gr({},m,w);break e;case 2:ac=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,w=i.effects,w===null?i.effects=[l]:w.push(l))}else g={eventTime:g,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=g,c=m):p=p.next=g,a|=w;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;w=l,l=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Bu|=a,e.lanes=a,e.memoizedState=m}}function nb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(lt(191,i));i.call(r)}}}var bp={},vo=Oc(bp),np=Oc(bp),rp=Oc(bp);function Au(e){if(e===bp)throw Error(lt(174));return e}function n5(e,t){switch(Wn(rp,t),Wn(np,e),Wn(vo,bp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:n2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=n2(t,e)}Jn(vo),Wn(vo,t)}function wf(){Jn(vo),Jn(np),Jn(rp)}function I4(e){Au(rp.current);var t=Au(vo.current),n=n2(t,e.type);t!==n&&(Wn(np,e),Wn(vo,n))}function r5(e){np.current===e&&(Jn(vo),Jn(np))}var hr=Oc(0);function P0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var av=[];function i5(){for(var e=0;e<av.length;e++)av[e]._workInProgressVersionPrimary=null;av.length=0}var Qm=ll.ReactCurrentDispatcher,ov=ll.ReactCurrentBatchConfig,$u=0,mr=null,Ur=null,Jr=null,T0=!1,Mh=!1,ip=0,UL=0;function wi(){throw Error(lt(321))}function s5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oa(e[n],t[n]))return!1;return!0}function a5(e,t,n,r,i,s){if($u=s,mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qm.current=e===null||e.memoizedState===null?HL:VL,e=n(r,i),Mh){s=0;do{if(Mh=!1,ip=0,25<=s)throw Error(lt(301));s+=1,Jr=Ur=null,t.updateQueue=null,Qm.current=GL,e=n(r,i)}while(Mh)}if(Qm.current=M0,t=Ur!==null&&Ur.next!==null,$u=0,Jr=Ur=mr=null,T0=!1,t)throw Error(lt(300));return e}function o5(){var e=ip!==0;return ip=0,e}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?mr.memoizedState=Jr=e:Jr=Jr.next=e,Jr}function aa(){if(Ur===null){var e=mr.alternate;e=e!==null?e.memoizedState:null}else e=Ur.next;var t=Jr===null?mr.memoizedState:Jr.next;if(t!==null)Jr=t,Ur=e;else{if(e===null)throw Error(lt(310));Ur=e,e={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Jr===null?mr.memoizedState=Jr=e:Jr=Jr.next=e}return Jr}function sp(e,t){return typeof t=="function"?t(e):t}function lv(e){var t=aa(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=Ur,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,h=s;do{var p=h.lane;if(($u&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,mr.lanes|=p,Bu|=p}h=h.next}while(h!==null&&h!==s);c===null?a=r:c.next=l,Oa(r,t.memoizedState)||(cs=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,mr.lanes|=s,Bu|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cv(e){var t=aa(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Oa(s,t.memoizedState)||(cs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function O4(){}function R4(e,t){var n=mr,r=aa(),i=t(),s=!Oa(r.memoizedState,i);if(s&&(r.memoizedState=i,cs=!0),r=r.queue,l5(B4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Jr!==null&&Jr.memoizedState.tag&1){if(n.flags|=2048,ap(9,$4.bind(null,n,r,i,t),void 0,null),ti===null)throw Error(lt(349));$u&30||F4(n,t,i)}return i}function F4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $4(e,t,n,r){t.value=n,t.getSnapshot=r,U4(t)&&z4(e)}function B4(e,t,n){return n(function(){U4(t)&&z4(e)})}function U4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oa(e,n)}catch{return!0}}function z4(e){var t=rl(e,1);t!==null&&Da(t,e,1,-1)}function rb(e){var t=lo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:e},t.queue=e,e=e.dispatch=WL.bind(null,mr,e),[t.memoizedState,e]}function ap(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function q4(){return aa().memoizedState}function Zm(e,t,n,r){var i=lo();mr.flags|=e,i.memoizedState=ap(1|t,n,void 0,r===void 0?null:r)}function gg(e,t,n,r){var i=aa();r=r===void 0?null:r;var s=void 0;if(Ur!==null){var a=Ur.memoizedState;if(s=a.destroy,r!==null&&s5(r,a.deps)){i.memoizedState=ap(t,n,s,r);return}}mr.flags|=e,i.memoizedState=ap(1|t,n,s,r)}function ib(e,t){return Zm(8390656,8,e,t)}function l5(e,t){return gg(2048,8,e,t)}function W4(e,t){return gg(4,2,e,t)}function H4(e,t){return gg(4,4,e,t)}function V4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function G4(e,t,n){return n=n!=null?n.concat([e]):null,gg(4,4,V4.bind(null,t,e),n)}function c5(){}function Y4(e,t){var n=aa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&s5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function K4(e,t){var n=aa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&s5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function J4(e,t,n){return $u&21?(Oa(n,t)||(n=t4(),mr.lanes|=n,Bu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cs=!0),e.memoizedState=n)}function zL(e,t){var n=Ln;Ln=n!==0&&4>n?n:4,e(!0);var r=ov.transition;ov.transition={};try{e(!1),t()}finally{Ln=n,ov.transition=r}}function X4(){return aa().memoizedState}function qL(e,t,n){var r=kc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Q4(e))Z4(t,n);else if(n=M4(e,t,n,r),n!==null){var i=$i();Da(n,e,r,i),eS(n,t,r)}}function WL(e,t,n){var r=kc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q4(e))Z4(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Oa(l,a)){var c=t.interleaved;c===null?(i.next=i,e5(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=M4(e,t,i,r),n!==null&&(i=$i(),Da(n,e,r,i),eS(n,t,r))}}function Q4(e){var t=e.alternate;return e===mr||t!==null&&t===mr}function Z4(e,t){Mh=T0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,By(e,n)}}var M0={readContext:sa,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},HL={readContext:sa,useCallback:function(e,t){return lo().memoizedState=[e,t===void 0?null:t],e},useContext:sa,useEffect:ib,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zm(4194308,4,V4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zm(4,2,e,t)},useMemo:function(e,t){var n=lo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=lo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qL.bind(null,mr,e),[r.memoizedState,e]},useRef:function(e){var t=lo();return e={current:e},t.memoizedState=e},useState:rb,useDebugValue:c5,useDeferredValue:function(e){return lo().memoizedState=e},useTransition:function(){var e=rb(!1),t=e[0];return e=zL.bind(null,e[1]),lo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mr,i=lo();if(ar){if(n===void 0)throw Error(lt(407));n=n()}else{if(n=t(),ti===null)throw Error(lt(349));$u&30||F4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ib(B4.bind(null,r,s,e),[e]),r.flags|=2048,ap(9,$4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=lo(),t=ti.identifierPrefix;if(ar){var n=Qo,r=Xo;n=(r&~(1<<32-Ma(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ip++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=UL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VL={readContext:sa,useCallback:Y4,useContext:sa,useEffect:l5,useImperativeHandle:G4,useInsertionEffect:W4,useLayoutEffect:H4,useMemo:K4,useReducer:lv,useRef:q4,useState:function(){return lv(sp)},useDebugValue:c5,useDeferredValue:function(e){var t=aa();return J4(t,Ur.memoizedState,e)},useTransition:function(){var e=lv(sp)[0],t=aa().memoizedState;return[e,t]},useMutableSource:O4,useSyncExternalStore:R4,useId:X4,unstable_isNewReconciler:!1},GL={readContext:sa,useCallback:Y4,useContext:sa,useEffect:l5,useImperativeHandle:G4,useInsertionEffect:W4,useLayoutEffect:H4,useMemo:K4,useReducer:cv,useRef:q4,useState:function(){return cv(sp)},useDebugValue:c5,useDeferredValue:function(e){var t=aa();return Ur===null?t.memoizedState=e:J4(t,Ur.memoizedState,e)},useTransition:function(){var e=cv(sp)[0],t=aa().memoizedState;return[e,t]},useMutableSource:O4,useSyncExternalStore:R4,useId:X4,unstable_isNewReconciler:!1};function Ea(e,t){if(e&&e.defaultProps){t=gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function S2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vg={isMounted:function(e){return(e=e._reactInternals)?Wu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$i(),i=kc(e),s=Zo(r,i);s.payload=t,n!=null&&(s.callback=n),t=Sc(e,s,i),t!==null&&(Da(t,e,i,r),Xm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$i(),i=kc(e),s=Zo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Sc(e,s,i),t!==null&&(Da(t,e,i,r),Xm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$i(),r=kc(e),i=Zo(n,r);i.tag=2,t!=null&&(i.callback=t),t=Sc(e,i,r),t!==null&&(Da(t,e,r,n),Xm(t,e,r))}};function sb(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Qh(n,r)||!Qh(i,s):!0}function tS(e,t,n){var r=!1,i=Lc,s=t.contextType;return typeof s=="object"&&s!==null?s=sa(s):(i=ds(t)?Ru:Ei.current,r=t.contextTypes,s=(r=r!=null)?gf(e,i):Lc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ab(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vg.enqueueReplaceState(t,t.state,null)}function N2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},t5(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=sa(s):(s=ds(t)?Ru:Ei.current,i.context=gf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(S2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vg.enqueueReplaceState(i,i.state,null),L0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function xf(e,t){try{var n="",r=t;do n+=bA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function uv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function k2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YL=typeof WeakMap=="function"?WeakMap:Map;function nS(e,t,n){n=Zo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){I0||(I0=!0,I2=r),k2(e,t)},n}function rS(e,t,n){n=Zo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){k2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){k2(e,t),typeof r!="function"&&(Nc===null?Nc=new Set([this]):Nc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ob(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new YL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=lP.bind(null,e,t,n),t.then(e,e))}function lb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zo(-1,1),t.tag=2,Sc(n,t,1))),n.lanes|=1),e)}var KL=ll.ReactCurrentOwner,cs=!1;function Ri(e,t,n,r){t.child=e===null?T4(t,null,n,r):yf(t,e.child,n,r)}function ub(e,t,n,r,i){n=n.render;var s=t.ref;return af(t,i),r=a5(e,t,n,r,s,i),n=o5(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,il(e,t,i)):(ar&&n&&Yy(t),t.flags|=1,Ri(e,t,r,i),t.child)}function db(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!v5(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,iS(e,t,s,r,i)):(e=r0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qh,n(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,e=jc(s,r),e.ref=t.ref,e.return=t,t.child=e}function iS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Qh(s,r)&&e.ref===t.ref)if(cs=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(cs=!0);else return t.lanes=e.lanes,il(e,t,i)}return j2(e,t,n,r,i)}function sS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wn(Zd,Ts),Ts|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Wn(Zd,Ts),Ts|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Wn(Zd,Ts),Ts|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Wn(Zd,Ts),Ts|=r;return Ri(e,t,i,n),t.child}function aS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function j2(e,t,n,r,i){var s=ds(n)?Ru:Ei.current;return s=gf(t,s),af(t,i),n=a5(e,t,n,r,s,i),r=o5(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,il(e,t,i)):(ar&&r&&Yy(t),t.flags|=1,Ri(e,t,n,i),t.child)}function fb(e,t,n,r,i){if(ds(n)){var s=!0;k0(t)}else s=!1;if(af(t,i),t.stateNode===null)e0(e,t),tS(t,n,r),N2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=sa(h):(h=ds(n)?Ru:Ei.current,h=gf(t,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&ab(t,a,r,h),ac=!1;var w=t.memoizedState;a.state=w,L0(t,r,a,i),c=t.memoizedState,l!==r||w!==c||us.current||ac?(typeof p=="function"&&(S2(t,n,p,r),c=t.memoizedState),(l=ac||sb(t,n,l,r,w,c,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,D4(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:Ea(t.type,l),a.props=h,m=t.pendingProps,w=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=sa(c):(c=ds(n)?Ru:Ei.current,c=gf(t,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||w!==c)&&ab(t,a,r,c),ac=!1,w=t.memoizedState,a.state=w,L0(t,r,a,i);var N=t.memoizedState;l!==m||w!==N||us.current||ac?(typeof g=="function"&&(S2(t,n,g,r),N=t.memoizedState),(h=ac||sb(t,n,h,r,w,N,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),a.props=r,a.state=N,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return E2(e,t,n,r,s,i)}function E2(e,t,n,r,i,s){aS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Xx(t,n,!1),il(e,t,s);r=t.stateNode,KL.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=yf(t,e.child,null,s),t.child=yf(t,null,l,s)):Ri(e,t,l,s),t.memoizedState=r.state,i&&Xx(t,n,!0),t.child}function oS(e){var t=e.stateNode;t.pendingContext?Jx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jx(e,t.context,!1),n5(e,t.containerInfo)}function hb(e,t,n,r,i){return vf(),Jy(i),t.flags|=256,Ri(e,t,n,r),t.child}var C2={dehydrated:null,treeContext:null,retryLane:0};function A2(e){return{baseLanes:e,cachePool:null,transitions:null}}function lS(e,t,n){var r=t.pendingProps,i=hr.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Wn(hr,i&1),e===null)return b2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=xg(a,r,0,null),e=Mu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=A2(n),t.memoizedState=C2,e):u5(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return JL(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=jc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=jc(l,s):(s=Mu(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?A2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=C2,r}return s=e.child,e=s.sibling,r=jc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function u5(e,t){return t=xg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cm(e,t,n,r){return r!==null&&Jy(r),yf(t,e.child,null,n),e=u5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JL(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=uv(Error(lt(422))),Cm(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=xg({mode:"visible",children:r.children},i,0,null),s=Mu(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&yf(t,e.child,null,a),t.child.memoizedState=A2(a),t.memoizedState=C2,s);if(!(t.mode&1))return Cm(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(lt(419)),r=uv(s,r,void 0),Cm(e,t,a,r)}if(l=(a&e.childLanes)!==0,cs||l){if(r=ti,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rl(e,i),Da(r,e,i,-1))}return g5(),r=uv(Error(lt(421))),Cm(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ms=_c(i.nextSibling),Is=t,ar=!0,Pa=null,e!==null&&(ta[na++]=Xo,ta[na++]=Qo,ta[na++]=Fu,Xo=e.id,Qo=e.overflow,Fu=t),t=u5(t,r.children),t.flags|=4096,t)}function pb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_2(e.return,t,n)}function dv(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cS(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ri(e,t,r.children,n),r=hr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pb(e,n,t);else if(e.tag===19)pb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Wn(hr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&P0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),dv(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&P0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}dv(t,!0,n,null,s);break;case"together":dv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function e0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function il(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,n=jc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XL(e,t,n){switch(t.tag){case 3:oS(t),vf();break;case 5:I4(t);break;case 1:ds(t.type)&&k0(t);break;case 4:n5(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Wn(C0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Wn(hr,hr.current&1),t.flags|=128,null):n&t.child.childLanes?lS(e,t,n):(Wn(hr,hr.current&1),e=il(e,t,n),e!==null?e.sibling:null);Wn(hr,hr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return cS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Wn(hr,hr.current),r)break;return null;case 22:case 23:return t.lanes=0,sS(e,t,n)}return il(e,t,n)}var uS,L2,dS,fS;uS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};L2=function(){};dS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Au(vo.current);var s=null;switch(n){case"input":i=Qv(e,i),r=Qv(e,r),s=[];break;case"select":i=gr({},i,{value:void 0}),r=gr({},r,{value:void 0}),s=[];break;case"textarea":i=t2(e,i),r=t2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=S0)}r2(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hh.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hh.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Yn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};fS=function(e,t,n,r){n!==r&&(t.flags|=4)};function ph(e,t){if(!ar)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function QL(e,t,n){var r=t.pendingProps;switch(Ky(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(t),null;case 1:return ds(t.type)&&N0(),xi(t),null;case 3:return r=t.stateNode,wf(),Jn(us),Jn(Ei),i5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pa!==null&&(F2(Pa),Pa=null))),L2(e,t),xi(t),null;case 5:r5(t);var i=Au(rp.current);if(n=t.type,e!==null&&t.stateNode!=null)dS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(lt(166));return xi(t),null}if(e=Au(vo.current),jm(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[uo]=t,r[tp]=s,e=(t.mode&1)!==0,n){case"dialog":Yn("cancel",r),Yn("close",r);break;case"iframe":case"object":case"embed":Yn("load",r);break;case"video":case"audio":for(i=0;i<kh.length;i++)Yn(kh[i],r);break;case"source":Yn("error",r);break;case"img":case"image":case"link":Yn("error",r),Yn("load",r);break;case"details":Yn("toggle",r);break;case"input":Sx(r,s),Yn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yn("invalid",r);break;case"textarea":kx(r,s),Yn("invalid",r)}r2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&km(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&km(r.textContent,l,e),i=["children",""+l]):Hh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Yn("scroll",r)}switch(n){case"input":vm(r),Nx(r,s,!0);break;case"textarea":vm(r),jx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=S0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[uo]=t,e[tp]=r,uS(e,t,!1,!1),t.stateNode=e;e:{switch(a=i2(n,r),n){case"dialog":Yn("cancel",e),Yn("close",e),i=r;break;case"iframe":case"object":case"embed":Yn("load",e),i=r;break;case"video":case"audio":for(i=0;i<kh.length;i++)Yn(kh[i],e);i=r;break;case"source":Yn("error",e),i=r;break;case"img":case"image":case"link":Yn("error",e),Yn("load",e),i=r;break;case"details":Yn("toggle",e),i=r;break;case"input":Sx(e,r),i=Qv(e,r),Yn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=gr({},r,{value:void 0}),Yn("invalid",e);break;case"textarea":kx(e,r),i=t2(e,r),Yn("invalid",e);break;default:i=r}r2(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?q_(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&U_(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vh(e,c):typeof c=="number"&&Vh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Yn("scroll",e):c!=null&&Dy(e,s,c,a))}switch(n){case"input":vm(e),Nx(e,r,!1);break;case"textarea":vm(e),jx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ac(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?tf(e,!!r.multiple,s,!1):r.defaultValue!=null&&tf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=S0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xi(t),null;case 6:if(e&&t.stateNode!=null)fS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(lt(166));if(n=Au(rp.current),Au(vo.current),jm(t)){if(r=t.stateNode,n=t.memoizedProps,r[uo]=t,(s=r.nodeValue!==n)&&(e=Is,e!==null))switch(e.tag){case 3:km(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&km(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[uo]=t,t.stateNode=r}return xi(t),null;case 13:if(Jn(hr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ar&&Ms!==null&&t.mode&1&&!(t.flags&128))L4(),vf(),t.flags|=98560,s=!1;else if(s=jm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(lt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(lt(317));s[uo]=t}else vf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xi(t),s=!1}else Pa!==null&&(F2(Pa),Pa=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||hr.current&1?qr===0&&(qr=3):g5())),t.updateQueue!==null&&(t.flags|=4),xi(t),null);case 4:return wf(),L2(e,t),e===null&&Zh(t.stateNode.containerInfo),xi(t),null;case 10:return Zy(t.type._context),xi(t),null;case 17:return ds(t.type)&&N0(),xi(t),null;case 19:if(Jn(hr),s=t.memoizedState,s===null)return xi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)ph(s,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=P0(e),a!==null){for(t.flags|=128,ph(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Wn(hr,hr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Er()>bf&&(t.flags|=128,r=!0,ph(s,!1),t.lanes=4194304)}else{if(!r)if(e=P0(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ph(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ar)return xi(t),null}else 2*Er()-s.renderingStartTime>bf&&n!==1073741824&&(t.flags|=128,r=!0,ph(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Er(),t.sibling=null,n=hr.current,Wn(hr,r?n&1|2:n&1),t):(xi(t),null);case 22:case 23:return m5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ts&1073741824&&(xi(t),t.subtreeFlags&6&&(t.flags|=8192)):xi(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function ZL(e,t){switch(Ky(t),t.tag){case 1:return ds(t.type)&&N0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wf(),Jn(us),Jn(Ei),i5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return r5(t),null;case 13:if(Jn(hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));vf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jn(hr),null;case 4:return wf(),null;case 10:return Zy(t.type._context),null;case 22:case 23:return m5(),null;case 24:return null;default:return null}}var Am=!1,ki=!1,eP=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Qd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){br(e,t,r)}else n.current=null}function P2(e,t,n){try{n()}catch(r){br(e,t,r)}}var mb=!1;function tP(e,t){if(p2=x0,e=v4(),Gy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,p=0,m=e,w=null;t:for(;;){for(var g;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)w=m,m=g;for(;;){if(m===e)break t;if(w===n&&++h===i&&(l=a),w===s&&++p===r&&(c=a),(g=m.nextSibling)!==null)break;m=w,w=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(m2={focusedElem:e,selectionRange:n},x0=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){t=yt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,C=N.memoizedState,_=t.stateNode,S=_.getSnapshotBeforeUpdate(t.elementType===t.type?k:Ea(t.type,k),C);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(O){br(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return N=mb,mb=!1,N}function Dh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&P2(t,n,s)}i=i.next}while(i!==r)}}function yg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function T2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hS(e){var t=e.alternate;t!==null&&(e.alternate=null,hS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[uo],delete t[tp],delete t[y2],delete t[RL],delete t[FL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pS(e){return e.tag===5||e.tag===3||e.tag===4}function gb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function M2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=S0));else if(r!==4&&(e=e.child,e!==null))for(M2(e,t,n),e=e.sibling;e!==null;)M2(e,t,n),e=e.sibling}function D2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(D2(e,t,n),e=e.sibling;e!==null;)D2(e,t,n),e=e.sibling}var li=null,Aa=!1;function Zl(e,t,n){for(n=n.child;n!==null;)mS(e,t,n),n=n.sibling}function mS(e,t,n){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(ug,n)}catch{}switch(n.tag){case 5:ki||Qd(n,t);case 6:var r=li,i=Aa;li=null,Zl(e,t,n),li=r,Aa=i,li!==null&&(Aa?(e=li,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):li.removeChild(n.stateNode));break;case 18:li!==null&&(Aa?(e=li,n=n.stateNode,e.nodeType===8?iv(e.parentNode,n):e.nodeType===1&&iv(e,n),Jh(e)):iv(li,n.stateNode));break;case 4:r=li,i=Aa,li=n.stateNode.containerInfo,Aa=!0,Zl(e,t,n),li=r,Aa=i;break;case 0:case 11:case 14:case 15:if(!ki&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&P2(n,t,a),i=i.next}while(i!==r)}Zl(e,t,n);break;case 1:if(!ki&&(Qd(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){br(n,t,l)}Zl(e,t,n);break;case 21:Zl(e,t,n);break;case 22:n.mode&1?(ki=(r=ki)||n.memoizedState!==null,Zl(e,t,n),ki=r):Zl(e,t,n);break;default:Zl(e,t,n)}}function vb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eP),t.forEach(function(r){var i=uP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:li=l.stateNode,Aa=!1;break e;case 3:li=l.stateNode.containerInfo,Aa=!0;break e;case 4:li=l.stateNode.containerInfo,Aa=!0;break e}l=l.return}if(li===null)throw Error(lt(160));mS(s,a,i),li=null,Aa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){br(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gS(t,e),t=t.sibling}function gS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sa(t,e),ao(e),r&4){try{Dh(3,e,e.return),yg(3,e)}catch(k){br(e,e.return,k)}try{Dh(5,e,e.return)}catch(k){br(e,e.return,k)}}break;case 1:Sa(t,e),ao(e),r&512&&n!==null&&Qd(n,n.return);break;case 5:if(Sa(t,e),ao(e),r&512&&n!==null&&Qd(n,n.return),e.flags&32){var i=e.stateNode;try{Vh(i,"")}catch(k){br(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&F_(i,s),i2(l,a);var h=i2(l,s);for(a=0;a<c.length;a+=2){var p=c[a],m=c[a+1];p==="style"?q_(i,m):p==="dangerouslySetInnerHTML"?U_(i,m):p==="children"?Vh(i,m):Dy(i,p,m,h)}switch(l){case"input":Zv(i,s);break;case"textarea":$_(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?tf(i,!!s.multiple,g,!1):w!==!!s.multiple&&(s.defaultValue!=null?tf(i,!!s.multiple,s.defaultValue,!0):tf(i,!!s.multiple,s.multiple?[]:"",!1))}i[tp]=s}catch(k){br(e,e.return,k)}}break;case 6:if(Sa(t,e),ao(e),r&4){if(e.stateNode===null)throw Error(lt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){br(e,e.return,k)}}break;case 3:if(Sa(t,e),ao(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jh(t.containerInfo)}catch(k){br(e,e.return,k)}break;case 4:Sa(t,e),ao(e);break;case 13:Sa(t,e),ao(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(h5=Er())),r&4&&vb(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ki=(h=ki)||p,Sa(t,e),ki=h):Sa(t,e),ao(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(yt=e,p=e.child;p!==null;){for(m=yt=p;yt!==null;){switch(w=yt,g=w.child,w.tag){case 0:case 11:case 14:case 15:Dh(4,w,w.return);break;case 1:Qd(w,w.return);var N=w.stateNode;if(typeof N.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(k){br(r,n,k)}}break;case 5:Qd(w,w.return);break;case 22:if(w.memoizedState!==null){wb(m);continue}}g!==null?(g.return=w,yt=g):wb(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=z_("display",a))}catch(k){br(e,e.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(k){br(e,e.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Sa(t,e),ao(e),r&4&&vb(e);break;case 21:break;default:Sa(t,e),ao(e)}}function ao(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(pS(n)){var r=n;break e}n=n.return}throw Error(lt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vh(i,""),r.flags&=-33);var s=gb(e);D2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=gb(e);M2(e,l,a);break;default:throw Error(lt(161))}}catch(c){br(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nP(e,t,n){yt=e,vS(e)}function vS(e,t,n){for(var r=(e.mode&1)!==0;yt!==null;){var i=yt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Am;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||ki;l=Am;var h=ki;if(Am=a,(ki=c)&&!h)for(yt=i;yt!==null;)a=yt,c=a.child,a.tag===22&&a.memoizedState!==null?xb(i):c!==null?(c.return=a,yt=c):xb(i);for(;s!==null;)yt=s,vS(s),s=s.sibling;yt=i,Am=l,ki=h}yb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,yt=s):yb(e)}}function yb(e){for(;yt!==null;){var t=yt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ki||yg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ki)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ea(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&nb(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nb(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Jh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}ki||t.flags&512&&T2(t)}catch(w){br(t,t.return,w)}}if(t===e){yt=null;break}if(n=t.sibling,n!==null){n.return=t.return,yt=n;break}yt=t.return}}function wb(e){for(;yt!==null;){var t=yt;if(t===e){yt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,yt=n;break}yt=t.return}}function xb(e){for(;yt!==null;){var t=yt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yg(4,t)}catch(c){br(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){br(t,i,c)}}var s=t.return;try{T2(t)}catch(c){br(t,s,c)}break;case 5:var a=t.return;try{T2(t)}catch(c){br(t,a,c)}}}catch(c){br(t,t.return,c)}if(t===e){yt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,yt=l;break}yt=t.return}}var rP=Math.ceil,D0=ll.ReactCurrentDispatcher,d5=ll.ReactCurrentOwner,ia=ll.ReactCurrentBatchConfig,pn=0,ti=null,Or=null,ui=0,Ts=0,Zd=Oc(0),qr=0,op=null,Bu=0,wg=0,f5=0,Ih=null,os=null,h5=0,bf=1/0,Yo=null,I0=!1,I2=null,Nc=null,Lm=!1,mc=null,O0=0,Oh=0,O2=null,t0=-1,n0=0;function $i(){return pn&6?Er():t0!==-1?t0:t0=Er()}function kc(e){return e.mode&1?pn&2&&ui!==0?ui&-ui:BL.transition!==null?(n0===0&&(n0=t4()),n0):(e=Ln,e!==0||(e=window.event,e=e===void 0?16:l4(e.type)),e):1}function Da(e,t,n,r){if(50<Oh)throw Oh=0,O2=null,Error(lt(185));yp(e,n,r),(!(pn&2)||e!==ti)&&(e===ti&&(!(pn&2)&&(wg|=n),qr===4&&uc(e,ui)),fs(e,r),n===1&&pn===0&&!(t.mode&1)&&(bf=Er()+500,mg&&Rc()))}function fs(e,t){var n=e.callbackNode;BA(e,t);var r=w0(e,e===ti?ui:0);if(r===0)n!==null&&Ax(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ax(n),t===1)e.tag===0?$L(bb.bind(null,e)):E4(bb.bind(null,e)),IL(function(){!(pn&6)&&Rc()}),n=null;else{switch(n4(r)){case 1:n=$y;break;case 4:n=Z_;break;case 16:n=y0;break;case 536870912:n=e4;break;default:n=y0}n=kS(n,yS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yS(e,t){if(t0=-1,n0=0,pn&6)throw Error(lt(327));var n=e.callbackNode;if(of()&&e.callbackNode!==n)return null;var r=w0(e,e===ti?ui:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=R0(e,r);else{t=r;var i=pn;pn|=2;var s=xS();(ti!==e||ui!==t)&&(Yo=null,bf=Er()+500,Tu(e,t));do try{aP();break}catch(l){wS(e,l)}while(!0);Qy(),D0.current=s,pn=i,Or!==null?t=0:(ti=null,ui=0,t=qr)}if(t!==0){if(t===2&&(i=c2(e),i!==0&&(r=i,t=R2(e,i))),t===1)throw n=op,Tu(e,0),uc(e,r),fs(e,Er()),n;if(t===6)uc(e,r);else{if(i=e.current.alternate,!(r&30)&&!iP(i)&&(t=R0(e,r),t===2&&(s=c2(e),s!==0&&(r=s,t=R2(e,s))),t===1))throw n=op,Tu(e,0),uc(e,r),fs(e,Er()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(lt(345));case 2:wu(e,os,Yo);break;case 3:if(uc(e,r),(r&130023424)===r&&(t=h5+500-Er(),10<t)){if(w0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){$i(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=v2(wu.bind(null,e,os,Yo),t);break}wu(e,os,Yo);break;case 4:if(uc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Ma(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rP(r/1960))-r,10<r){e.timeoutHandle=v2(wu.bind(null,e,os,Yo),r);break}wu(e,os,Yo);break;case 5:wu(e,os,Yo);break;default:throw Error(lt(329))}}}return fs(e,Er()),e.callbackNode===n?yS.bind(null,e):null}function R2(e,t){var n=Ih;return e.current.memoizedState.isDehydrated&&(Tu(e,t).flags|=256),e=R0(e,t),e!==2&&(t=os,os=n,t!==null&&F2(t)),e}function F2(e){os===null?os=e:os.push.apply(os,e)}function iP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Oa(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function uc(e,t){for(t&=~f5,t&=~wg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ma(t),r=1<<n;e[n]=-1,t&=~r}}function bb(e){if(pn&6)throw Error(lt(327));of();var t=w0(e,0);if(!(t&1))return fs(e,Er()),null;var n=R0(e,t);if(e.tag!==0&&n===2){var r=c2(e);r!==0&&(t=r,n=R2(e,r))}if(n===1)throw n=op,Tu(e,0),uc(e,t),fs(e,Er()),n;if(n===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,os,Yo),fs(e,Er()),null}function p5(e,t){var n=pn;pn|=1;try{return e(t)}finally{pn=n,pn===0&&(bf=Er()+500,mg&&Rc())}}function Uu(e){mc!==null&&mc.tag===0&&!(pn&6)&&of();var t=pn;pn|=1;var n=ia.transition,r=Ln;try{if(ia.transition=null,Ln=1,e)return e()}finally{Ln=r,ia.transition=n,pn=t,!(pn&6)&&Rc()}}function m5(){Ts=Zd.current,Jn(Zd)}function Tu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DL(n)),Or!==null)for(n=Or.return;n!==null;){var r=n;switch(Ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&N0();break;case 3:wf(),Jn(us),Jn(Ei),i5();break;case 5:r5(r);break;case 4:wf();break;case 13:Jn(hr);break;case 19:Jn(hr);break;case 10:Zy(r.type._context);break;case 22:case 23:m5()}n=n.return}if(ti=e,Or=e=jc(e.current,null),ui=Ts=t,qr=0,op=null,f5=wg=Bu=0,os=Ih=null,Cu!==null){for(t=0;t<Cu.length;t++)if(n=Cu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Cu=null}return e}function wS(e,t){do{var n=Or;try{if(Qy(),Qm.current=M0,T0){for(var r=mr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}T0=!1}if($u=0,Jr=Ur=mr=null,Mh=!1,ip=0,d5.current=null,n===null||n.return===null){qr=1,op=t,Or=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=ui,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=lb(a);if(g!==null){g.flags&=-257,cb(g,a,l,s,t),g.mode&1&&ob(s,h,t),t=g,c=h;var N=t.updateQueue;if(N===null){var k=new Set;k.add(c),t.updateQueue=k}else N.add(c);break e}else{if(!(t&1)){ob(s,h,t),g5();break e}c=Error(lt(426))}}else if(ar&&l.mode&1){var C=lb(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),cb(C,a,l,s,t),Jy(xf(c,l));break e}}s=c=xf(c,l),qr!==4&&(qr=2),Ih===null?Ih=[s]:Ih.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var _=nS(s,c,t);tb(s,_);break e;case 1:l=c;var S=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Nc===null||!Nc.has(L)))){s.flags|=65536,t&=-t,s.lanes|=t;var O=rS(s,l,t);tb(s,O);break e}}s=s.return}while(s!==null)}_S(n)}catch(Y){t=Y,Or===n&&n!==null&&(Or=n=n.return);continue}break}while(!0)}function xS(){var e=D0.current;return D0.current=M0,e===null?M0:e}function g5(){(qr===0||qr===3||qr===2)&&(qr=4),ti===null||!(Bu&268435455)&&!(wg&268435455)||uc(ti,ui)}function R0(e,t){var n=pn;pn|=2;var r=xS();(ti!==e||ui!==t)&&(Yo=null,Tu(e,t));do try{sP();break}catch(i){wS(e,i)}while(!0);if(Qy(),pn=n,D0.current=r,Or!==null)throw Error(lt(261));return ti=null,ui=0,qr}function sP(){for(;Or!==null;)bS(Or)}function aP(){for(;Or!==null&&!PA();)bS(Or)}function bS(e){var t=NS(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,t===null?_S(e):Or=t,d5.current=null}function _S(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZL(n,t),n!==null){n.flags&=32767,Or=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Or=null;return}}else if(n=QL(n,t,Ts),n!==null){Or=n;return}if(t=t.sibling,t!==null){Or=t;return}Or=t=e}while(t!==null);qr===0&&(qr=5)}function wu(e,t,n){var r=Ln,i=ia.transition;try{ia.transition=null,Ln=1,oP(e,t,n,r)}finally{ia.transition=i,Ln=r}return null}function oP(e,t,n,r){do of();while(mc!==null);if(pn&6)throw Error(lt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(UA(e,s),e===ti&&(Or=ti=null,ui=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lm||(Lm=!0,kS(y0,function(){return of(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ia.transition,ia.transition=null;var a=Ln;Ln=1;var l=pn;pn|=4,d5.current=null,tP(e,n),gS(n,e),EL(m2),x0=!!p2,m2=p2=null,e.current=n,nP(n),TA(),pn=l,Ln=a,ia.transition=s}else e.current=n;if(Lm&&(Lm=!1,mc=e,O0=i),s=e.pendingLanes,s===0&&(Nc=null),IA(n.stateNode),fs(e,Er()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(I0)throw I0=!1,e=I2,I2=null,e;return O0&1&&e.tag!==0&&of(),s=e.pendingLanes,s&1?e===O2?Oh++:(Oh=0,O2=e):Oh=0,Rc(),null}function of(){if(mc!==null){var e=n4(O0),t=ia.transition,n=Ln;try{if(ia.transition=null,Ln=16>e?16:e,mc===null)var r=!1;else{if(e=mc,mc=null,O0=0,pn&6)throw Error(lt(331));var i=pn;for(pn|=4,yt=e.current;yt!==null;){var s=yt,a=s.child;if(yt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(yt=h;yt!==null;){var p=yt;switch(p.tag){case 0:case 11:case 15:Dh(8,p,s)}var m=p.child;if(m!==null)m.return=p,yt=m;else for(;yt!==null;){p=yt;var w=p.sibling,g=p.return;if(hS(p),p===h){yt=null;break}if(w!==null){w.return=g,yt=w;break}yt=g}}}var N=s.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}yt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,yt=a;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Dh(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,yt=_;break e}yt=s.return}}var S=e.current;for(yt=S;yt!==null;){a=yt;var L=a.child;if(a.subtreeFlags&2064&&L!==null)L.return=a,yt=L;else e:for(a=S;yt!==null;){if(l=yt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yg(9,l)}}catch(Y){br(l,l.return,Y)}if(l===a){yt=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,yt=O;break e}yt=l.return}}if(pn=i,Rc(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(ug,e)}catch{}r=!0}return r}finally{Ln=n,ia.transition=t}}return!1}function _b(e,t,n){t=xf(n,t),t=nS(e,t,1),e=Sc(e,t,1),t=$i(),e!==null&&(yp(e,1,t),fs(e,t))}function br(e,t,n){if(e.tag===3)_b(e,e,n);else for(;t!==null;){if(t.tag===3){_b(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nc===null||!Nc.has(r))){e=xf(n,e),e=rS(t,e,1),t=Sc(t,e,1),e=$i(),t!==null&&(yp(t,1,e),fs(t,e));break}}t=t.return}}function lP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$i(),e.pingedLanes|=e.suspendedLanes&n,ti===e&&(ui&n)===n&&(qr===4||qr===3&&(ui&130023424)===ui&&500>Er()-h5?Tu(e,0):f5|=n),fs(e,t)}function SS(e,t){t===0&&(e.mode&1?(t=xm,xm<<=1,!(xm&130023424)&&(xm=4194304)):t=1);var n=$i();e=rl(e,t),e!==null&&(yp(e,t,n),fs(e,n))}function cP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),SS(e,n)}function uP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(lt(314))}r!==null&&r.delete(t),SS(e,n)}var NS;NS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||us.current)cs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return cs=!1,XL(e,t,n);cs=!!(e.flags&131072)}else cs=!1,ar&&t.flags&1048576&&C4(t,E0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;e0(e,t),e=t.pendingProps;var i=gf(t,Ei.current);af(t,n),i=a5(null,t,r,e,i,n);var s=o5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ds(r)?(s=!0,k0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,t5(t),i.updater=vg,t.stateNode=i,i._reactInternals=t,N2(t,r,e,n),t=E2(null,t,r,!0,s,n)):(t.tag=0,ar&&s&&Yy(t),Ri(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(e0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=fP(r),e=Ea(r,e),i){case 0:t=j2(null,t,r,e,n);break e;case 1:t=fb(null,t,r,e,n);break e;case 11:t=ub(null,t,r,e,n);break e;case 14:t=db(null,t,r,Ea(r.type,e),n);break e}throw Error(lt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ea(r,i),j2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ea(r,i),fb(e,t,r,i,n);case 3:e:{if(oS(t),e===null)throw Error(lt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,D4(e,t),L0(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=xf(Error(lt(423)),t),t=hb(e,t,r,n,i);break e}else if(r!==i){i=xf(Error(lt(424)),t),t=hb(e,t,r,n,i);break e}else for(Ms=_c(t.stateNode.containerInfo.firstChild),Is=t,ar=!0,Pa=null,n=T4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vf(),r===i){t=il(e,t,n);break e}Ri(e,t,r,n)}t=t.child}return t;case 5:return I4(t),e===null&&b2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,g2(r,i)?a=null:s!==null&&g2(r,s)&&(t.flags|=32),aS(e,t),Ri(e,t,a,n),t.child;case 6:return e===null&&b2(t),null;case 13:return lS(e,t,n);case 4:return n5(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yf(t,null,r,n):Ri(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ea(r,i),ub(e,t,r,i,n);case 7:return Ri(e,t,t.pendingProps,n),t.child;case 8:return Ri(e,t,t.pendingProps.children,n),t.child;case 12:return Ri(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Wn(C0,r._currentValue),r._currentValue=a,s!==null)if(Oa(s.value,a)){if(s.children===i.children&&!us.current){t=il(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Zo(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),_2(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(lt(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),_2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ri(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,af(t,n),i=sa(i),r=r(i),t.flags|=1,Ri(e,t,r,n),t.child;case 14:return r=t.type,i=Ea(r,t.pendingProps),i=Ea(r.type,i),db(e,t,r,i,n);case 15:return iS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ea(r,i),e0(e,t),t.tag=1,ds(r)?(e=!0,k0(t)):e=!1,af(t,n),tS(t,r,i),N2(t,r,i,n),E2(null,t,r,!0,e,n);case 19:return cS(e,t,n);case 22:return sS(e,t,n)}throw Error(lt(156,t.tag))};function kS(e,t){return Q_(e,t)}function dP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,t,n,r){return new dP(e,t,n,r)}function v5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fP(e){if(typeof e=="function")return v5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oy)return 11;if(e===Ry)return 14}return 2}function jc(e,t){var n=e.alternate;return n===null?(n=ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function r0(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")v5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case qd:return Mu(n.children,i,s,t);case Iy:a=8,i|=8;break;case Yv:return e=ra(12,n,t,i|2),e.elementType=Yv,e.lanes=s,e;case Kv:return e=ra(13,n,t,i),e.elementType=Kv,e.lanes=s,e;case Jv:return e=ra(19,n,t,i),e.elementType=Jv,e.lanes=s,e;case I_:return xg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M_:a=10;break e;case D_:a=9;break e;case Oy:a=11;break e;case Ry:a=14;break e;case sc:a=16,r=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=ra(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Mu(e,t,n,r){return e=ra(7,e,r,t),e.lanes=n,e}function xg(e,t,n,r){return e=ra(22,e,r,t),e.elementType=I_,e.lanes=n,e.stateNode={isHidden:!1},e}function fv(e,t,n){return e=ra(6,e,null,t),e.lanes=n,e}function hv(e,t,n){return t=ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=G1(0),this.expirationTimes=G1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function y5(e,t,n,r,i,s,a,l,c){return e=new hP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ra(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t5(s),e}function pP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jS(e){if(!e)return Lc;e=e._reactInternals;e:{if(Wu(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var n=e.type;if(ds(n))return j4(e,n,t)}return t}function ES(e,t,n,r,i,s,a,l,c){return e=y5(n,r,!0,e,i,s,a,l,c),e.context=jS(null),n=e.current,r=$i(),i=kc(n),s=Zo(r,i),s.callback=t??null,Sc(n,s,i),e.current.lanes=i,yp(e,i,r),fs(e,r),e}function bg(e,t,n,r){var i=t.current,s=$i(),a=kc(i);return n=jS(n),t.context===null?t.context=n:t.pendingContext=n,t=Zo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sc(i,t,a),e!==null&&(Da(e,i,a,s),Xm(e,i,a)),a}function F0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function w5(e,t){Sb(e,t),(e=e.alternate)&&Sb(e,t)}function mP(){return null}var CS=typeof reportError=="function"?reportError:function(e){console.error(e)};function x5(e){this._internalRoot=e}_g.prototype.render=x5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));bg(e,t,null,null)};_g.prototype.unmount=x5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Uu(function(){bg(null,e,null,null)}),t[nl]=null}};function _g(e){this._internalRoot=e}_g.prototype.unstable_scheduleHydration=function(e){if(e){var t=s4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cc.length&&t!==0&&t<cc[n].priority;n++);cc.splice(n,0,e),n===0&&o4(e)}};function b5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nb(){}function gP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=F0(a);s.call(h)}}var a=ES(t,r,e,0,null,!1,!1,"",Nb);return e._reactRootContainer=a,e[nl]=a.current,Zh(e.nodeType===8?e.parentNode:e),Uu(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=F0(c);l.call(h)}}var c=y5(e,0,!1,null,null,!1,!1,"",Nb);return e._reactRootContainer=c,e[nl]=c.current,Zh(e.nodeType===8?e.parentNode:e),Uu(function(){bg(t,c,n,r)}),c}function Ng(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=F0(a);l.call(c)}}bg(t,a,e,i)}else a=gP(n,t,e,i,r);return F0(a)}r4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Nh(t.pendingLanes);n!==0&&(By(t,n|1),fs(t,Er()),!(pn&6)&&(bf=Er()+500,Rc()))}break;case 13:Uu(function(){var r=rl(e,1);if(r!==null){var i=$i();Da(r,e,1,i)}}),w5(e,1)}};Uy=function(e){if(e.tag===13){var t=rl(e,134217728);if(t!==null){var n=$i();Da(t,e,134217728,n)}w5(e,134217728)}};i4=function(e){if(e.tag===13){var t=kc(e),n=rl(e,t);if(n!==null){var r=$i();Da(n,e,t,r)}w5(e,t)}};s4=function(){return Ln};a4=function(e,t){var n=Ln;try{return Ln=e,t()}finally{Ln=n}};a2=function(e,t,n){switch(t){case"input":if(Zv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pg(r);if(!i)throw Error(lt(90));R_(r),Zv(r,i)}}}break;case"textarea":$_(e,n);break;case"select":t=n.value,t!=null&&tf(e,!!n.multiple,t,!1)}};V_=p5;G_=Uu;var vP={usingClientEntryPoint:!1,Events:[xp,Gd,pg,W_,H_,p5]},mh={findFiberByHostInstance:Eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yP={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J_(e),e===null?null:e.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||mP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{ug=Pm.inject(yP),go=Pm}catch{}}Rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vP;Rs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b5(t))throw Error(lt(200));return pP(e,t,null,n)};Rs.createRoot=function(e,t){if(!b5(e))throw Error(lt(299));var n=!1,r="",i=CS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=y5(e,1,!1,null,null,n,!1,r,i),e[nl]=t.current,Zh(e.nodeType===8?e.parentNode:e),new x5(t)};Rs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=J_(t),e=e===null?null:e.stateNode,e};Rs.flushSync=function(e){return Uu(e)};Rs.hydrate=function(e,t,n){if(!Sg(t))throw Error(lt(200));return Ng(null,e,t,!0,n)};Rs.hydrateRoot=function(e,t,n){if(!b5(e))throw Error(lt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=CS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ES(t,null,e,1,n??null,i,!1,s,a),e[nl]=t.current,Zh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new _g(t)};Rs.render=function(e,t,n){if(!Sg(t))throw Error(lt(200));return Ng(null,e,t,!1,n)};Rs.unmountComponentAtNode=function(e){if(!Sg(e))throw Error(lt(40));return e._reactRootContainer?(Uu(function(){Ng(null,null,e,!1,function(){e._reactRootContainer=null,e[nl]=null})}),!0):!1};Rs.unstable_batchedUpdates=p5;Rs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sg(n))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return Ng(e,t,n,!1,r)};Rs.version="18.3.1-next-f1338f8080-20240426";function AS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AS)}catch(e){console.error(e)}}AS(),A_.exports=Rs;var Lu=A_.exports,LS,kb=Lu;LS=kb.createRoot,kb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}var gc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gc||(gc={}));const jb="popstate";function wP(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return $2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$0(i)}return bP(t,n,null,e)}function Pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xP(){return Math.random().toString(36).substr(2,8)}function Eb(e,t){return{usr:e.state,key:e.key,idx:t}}function $2(e,t,n,r){return n===void 0&&(n=null),lp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ef(t):t,{state:n,key:t&&t.key||r||xP()})}function $0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ef(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function bP(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=gc.Pop,c=null,h=p();h==null&&(h=0,a.replaceState(lp({},a.state,{idx:h}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=gc.Pop;let C=p(),_=C==null?null:C-h;h=C,c&&c({action:l,location:k.location,delta:_})}function w(C,_){l=gc.Push;let S=$2(k.location,C,_);h=p()+1;let L=Eb(S,h),O=k.createHref(S);try{a.pushState(L,"",O)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(O)}s&&c&&c({action:l,location:k.location,delta:1})}function g(C,_){l=gc.Replace;let S=$2(k.location,C,_);h=p();let L=Eb(S,h),O=k.createHref(S);a.replaceState(L,"",O),s&&c&&c({action:l,location:k.location,delta:0})}function N(C){let _=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof C=="string"?C:$0(C);return S=S.replace(/ $/,"%20"),Pr(_,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,_)}let k={get action(){return l},get location(){return e(i,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(jb,m),c=C,()=>{i.removeEventListener(jb,m),c=null}},createHref(C){return t(i,C)},createURL:N,encodeLocation(C){let _=N(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:g,go(C){return a.go(C)}};return k}var Cb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cb||(Cb={}));function _P(e,t,n){return n===void 0&&(n="/"),SP(e,t,n,!1)}function SP(e,t,n,r){let i=typeof t=="string"?Ef(t):t,s=_5(i.pathname||"/",n);if(s==null)return null;let a=TS(e);NP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=IP(s);l=MP(a[c],h,r)}return l}function TS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Pr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=Ec([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Pr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),TS(s.children,t,p,h)),!(s.path==null&&!s.index)&&t.push({path:h,score:PP(h,s.index),routesMeta:p})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of MS(s.path))i(s,a,c)}),t}function MS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=MS(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function NP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:TP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kP=/^:[\w-]+$/,jP=3,EP=2,CP=1,AP=10,LP=-2,Ab=e=>e==="*";function PP(e,t){let n=e.split("/"),r=n.length;return n.some(Ab)&&(r+=LP),t&&(r+=EP),n.filter(i=>!Ab(i)).reduce((i,s)=>i+(kP.test(s)?jP:s===""?CP:AP),r)}function TP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function MP(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),w=c.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Ec([s,m.pathname]),pathnameBase:$P(Ec([s,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(s=Ec([s,m.pathnameBase]))}return a}function Lb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=DP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:w,isOptional:g}=p;if(w==="*"){let k=l[m]||"";a=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const N=l[m];return g&&!N?h[w]=void 0:h[w]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:e}}function DP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),PS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function IP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function OP(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ef(e):e;return{pathname:n?n.startsWith("/")?n:RP(n,t):t,search:BP(r),hash:UP(i)}}function RP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function pv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function S5(e,t){let n=FP(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ef(e):(i=lp({},e),Pr(!i.pathname||!i.pathname.includes("?"),pv("?","pathname","search",i)),Pr(!i.pathname||!i.pathname.includes("#"),pv("#","pathname","hash",i)),Pr(!i.search||!i.search.includes("#"),pv("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),m-=1;i.pathname=w.join("/")}l=m>=0?t[m]:"/"}let c=OP(i,l),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const Ec=e=>e.join("/").replace(/\/\/+/g,"/"),$P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),BP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const DS=["post","put","patch","delete"];new Set(DS);const qP=["get",...DS];new Set(qP);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cp.apply(this,arguments)}const k5=j.createContext(null),WP=j.createContext(null),Fc=j.createContext(null),kg=j.createContext(null),cl=j.createContext({outlet:null,matches:[],isDataRoute:!1}),IS=j.createContext(null);function HP(e,t){let{relative:n}=t===void 0?{}:t;Cf()||Pr(!1);let{basename:r,navigator:i}=j.useContext(Fc),{hash:s,pathname:a,search:l}=FS(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Ec([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Cf(){return j.useContext(kg)!=null}function oa(){return Cf()||Pr(!1),j.useContext(kg).location}function OS(e){j.useContext(Fc).static||j.useLayoutEffect(e)}function la(){let{isDataRoute:e}=j.useContext(cl);return e?i7():VP()}function VP(){Cf()||Pr(!1);let e=j.useContext(k5),{basename:t,future:n,navigator:r}=j.useContext(Fc),{matches:i}=j.useContext(cl),{pathname:s}=oa(),a=JSON.stringify(S5(i,n.v7_relativeSplatPath)),l=j.useRef(!1);return OS(()=>{l.current=!0}),j.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=N5(h,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ec([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,a,s,e])}function RS(){let{matches:e}=j.useContext(cl),t=e[e.length-1];return t?t.params:{}}function FS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=j.useContext(Fc),{matches:i}=j.useContext(cl),{pathname:s}=oa(),a=JSON.stringify(S5(i,r.v7_relativeSplatPath));return j.useMemo(()=>N5(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function GP(e,t){return YP(e,t)}function YP(e,t,n,r){Cf()||Pr(!1);let{navigator:i}=j.useContext(Fc),{matches:s}=j.useContext(cl),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=oa(),p;if(t){var m;let C=typeof t=="string"?Ef(t):t;c==="/"||(m=C.pathname)!=null&&m.startsWith(c)||Pr(!1),p=C}else p=h;let w=p.pathname||"/",g=w;if(c!=="/"){let C=c.replace(/^\//,"").split("/");g="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=_P(e,{pathname:g}),k=ZP(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Ec([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Ec([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return t&&k?j.createElement(kg.Provider,{value:{location:cp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:gc.Pop}},k):k}function KP(){let e=r7(),t=zP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,null)}const JP=j.createElement(KP,null);class XP extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(cl.Provider,{value:this.props.routeContext},j.createElement(IS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QP(e){let{routeContext:t,match:n,children:r}=e,i=j.useContext(k5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(cl.Provider,{value:t},r)}function ZP(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Pr(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:w,errors:g}=n,N=m.route.loader&&w[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||N){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,m,w)=>{let g,N=!1,k=null,C=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||JP,c&&(h<0&&w===0?(N=!0,C=null):h===w&&(N=!0,C=m.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,w+1)),S=()=>{let L;return g?L=k:N?L=C:m.route.Component?L=j.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=p,j.createElement(QP,{match:m,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:L})};return n&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?j.createElement(XP,{location:n.location,revalidation:n.revalidation,component:k,error:g,children:S(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):S()},null)}var $S=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($S||{}),B0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(B0||{});function e7(e){let t=j.useContext(k5);return t||Pr(!1),t}function t7(e){let t=j.useContext(WP);return t||Pr(!1),t}function n7(e){let t=j.useContext(cl);return t||Pr(!1),t}function BS(e){let t=n7(),n=t.matches[t.matches.length-1];return n.route.id||Pr(!1),n.route.id}function r7(){var e;let t=j.useContext(IS),n=t7(B0.UseRouteError),r=BS(B0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function i7(){let{router:e}=e7($S.UseNavigateStable),t=BS(B0.UseNavigateStable),n=j.useRef(!1);return OS(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,cp({fromRouteId:t},s)))},[e,t])}const Pb={};function s7(e,t){Pb[t]||(Pb[t]=!0,console.warn(t))}const Tb=(e,t,n)=>s7(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function a7(e,t){e!=null&&e.v7_startTransition||Tb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Tb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function o7(e){let{to:t,replace:n,state:r,relative:i}=e;Cf()||Pr(!1);let{future:s,static:a}=j.useContext(Fc),{matches:l}=j.useContext(cl),{pathname:c}=oa(),h=la(),p=N5(t,S5(l,s.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(p);return j.useEffect(()=>h(JSON.parse(m),{replace:n,state:r,relative:i}),[h,m,i,n,r]),null}function Zs(e){Pr(!1)}function l7(e){let{basename:t="/",children:n=null,location:r,navigationType:i=gc.Pop,navigator:s,static:a=!1,future:l}=e;Cf()&&Pr(!1);let c=t.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:c,navigator:s,static:a,future:cp({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=Ef(r));let{pathname:p="/",search:m="",hash:w="",state:g=null,key:N="default"}=r,k=j.useMemo(()=>{let C=_5(p,c);return C==null?null:{location:{pathname:C,search:m,hash:w,state:g,key:N},navigationType:i}},[c,p,m,w,g,N,i]);return k==null?null:j.createElement(Fc.Provider,{value:h},j.createElement(kg.Provider,{children:n,value:k}))}function c7(e){let{children:t,location:n}=e;return GP(B2(t),n)}new Promise(()=>{});function B2(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let s=[...t,i];if(r.type===j.Fragment){n.push.apply(n,B2(r.props.children,s));return}r.type!==Zs&&Pr(!1),!r.props.index||!r.props.children||Pr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=B2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U2.apply(this,arguments)}function u7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function d7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function f7(e,t){return e.button===0&&(!t||t==="_self")&&!d7(e)}function z2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function h7(e,t){let n=z2(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const p7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m7="6";try{window.__reactRouterVersion=m7}catch{}const g7="startTransition",Mb=Vv[g7];function v7(e){let{basename:t,children:n,future:r,window:i}=e,s=j.useRef();s.current==null&&(s.current=wP({window:i,v5Compat:!0}));let a=s.current,[l,c]=j.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},p=j.useCallback(m=>{h&&Mb?Mb(()=>c(m)):c(m)},[c,h]);return j.useLayoutEffect(()=>a.listen(p),[a,p]),j.useEffect(()=>a7(r),[r]),j.createElement(l7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const y7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cc=j.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:h,preventScrollReset:p,viewTransition:m}=t,w=u7(t,p7),{basename:g}=j.useContext(Fc),N,k=!1;if(typeof h=="string"&&w7.test(h)&&(N=h,y7))try{let L=new URL(window.location.href),O=h.startsWith("//")?new URL(L.protocol+h):new URL(h),Y=_5(O.pathname,g);O.origin===L.origin&&Y!=null?h=Y+O.search+O.hash:k=!0}catch{}let C=HP(h,{relative:i}),_=x7(h,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:m});function S(L){r&&r(L),L.defaultPrevented||_(L)}return j.createElement("a",U2({},w,{href:N||C,onClick:k||s?r:S,ref:n,target:c}))});var Db;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Db||(Db={}));var Ib;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ib||(Ib={}));function x7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=la(),h=oa(),p=FS(e,{relative:a});return j.useCallback(m=>{if(f7(m,n)){m.preventDefault();let w=r!==void 0?r:$0(h)===$0(p);c(e,{replace:w,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[h,c,p,r,i,n,e,s,a,l])}function US(e){let t=j.useRef(z2(e)),n=j.useRef(!1),r=oa(),i=j.useMemo(()=>h7(r.search,n.current?null:t.current),[r.search]),s=la(),a=j.useCallback((l,c)=>{const h=z2(typeof l=="function"?l(i):l);n.current=!0,s("?"+h,c)},[s,i]);return[i,a]}let b7={data:""},_7=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||b7,S7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,N7=/\/\*[^]*?\*\/|  +/g,Ob=/\n+/g,dc=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?dc(a,s):s+"{"+dc(a,s[1]=="k"?"":t)+"}":typeof a=="object"?r+=dc(a,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=dc.p?dc.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Ho={},zS=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+zS(e[n]);return t}return e},k7=(e,t,n,r,i)=>{let s=zS(e),a=Ho[s]||(Ho[s]=(c=>{let h=0,p=11;for(;h<c.length;)p=101*p+c.charCodeAt(h++)>>>0;return"go"+p})(s));if(!Ho[a]){let c=s!==e?e:(h=>{let p,m,w=[{}];for(;p=S7.exec(h.replace(N7,""));)p[4]?w.shift():p[3]?(m=p[3].replace(Ob," ").trim(),w.unshift(w[0][m]=w[0][m]||{})):w[0][p[1]]=p[2].replace(Ob," ").trim();return w[0]})(e);Ho[a]=dc(i?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Ho.g?Ho.g:null;return n&&(Ho.g=Ho[a]),((c,h,p,m)=>{m?h.data=h.data.replace(m,c):h.data.indexOf(c)===-1&&(h.data=p?c+h.data:h.data+c)})(Ho[a],t,r,l),a},j7=(e,t,n)=>e.reduce((r,i,s)=>{let a=t[s];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":dc(l,""):l===!1?"":l}return r+i+(a??"")},"");function jg(e){let t=this||{},n=e.call?e(t.p):e;return k7(n.unshift?n.raw?j7(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,_7(t.target),t.g,t.o,t.k)}let qS,q2,W2;jg.bind({g:1});let sl=jg.bind({k:1});function E7(e,t,n,r){dc.p=t,qS=e,q2=n,W2=r}function $c(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:q2&&q2()},l),n.o=/ *go\d+/.test(c),l.className=jg.apply(n,r)+(c?" "+c:"");let h=e;return e[0]&&(h=l.as||e,delete l.as),W2&&h[0]&&W2(l),qS(h,l)}return i}}var C7=e=>typeof e=="function",U0=(e,t)=>C7(e)?e(t):e,A7=(()=>{let e=0;return()=>(++e).toString()})(),WS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),L7=20,i0=new Map,P7=1e3,Rb=e=>{if(i0.has(e))return;let t=setTimeout(()=>{i0.delete(e),Hu({type:4,toastId:e})},P7);i0.set(e,t)},T7=e=>{let t=i0.get(e);t&&clearTimeout(t)},H2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,L7)};case 1:return t.toast.id&&T7(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?H2(e,{type:1,toast:n}):H2(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?Rb(r):e.toasts.forEach(s=>{Rb(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},s0=[],a0={toasts:[],pausedAt:void 0},Hu=e=>{a0=H2(a0,e),s0.forEach(t=>{t(a0)})},M7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D7=(e={})=>{let[t,n]=j.useState(a0);j.useEffect(()=>(s0.push(n),()=>{let i=s0.indexOf(n);i>-1&&s0.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var s,a;return{...e,...e[i.type],...i,duration:i.duration||((s=e[i.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||M7[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:r}},I7=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||A7()}),_p=e=>(t,n)=>{let r=I7(t,e,n);return Hu({type:2,toast:r}),r.id},Te=(e,t)=>_p("blank")(e,t);Te.error=_p("error");Te.success=_p("success");Te.loading=_p("loading");Te.custom=_p("custom");Te.dismiss=e=>{Hu({type:3,toastId:e})};Te.remove=e=>Hu({type:4,toastId:e});Te.promise=(e,t,n)=>{let r=Te.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(Te.success(U0(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Te.error(U0(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var O7=(e,t)=>{Hu({type:1,toast:{id:e,height:t}})},R7=()=>{Hu({type:5,time:Date.now()})},F7=e=>{let{toasts:t,pausedAt:n}=D7(e);j.useEffect(()=>{if(n)return;let s=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Te.dismiss(l.id);return}return setTimeout(()=>Te.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=j.useCallback(()=>{n&&Hu({type:6,time:Date.now()})},[n]),i=j.useCallback((s,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:h}=a||{},p=t.filter(g=>(g.position||h)===(s.position||h)&&g.height),m=p.findIndex(g=>g.id===s.id),w=p.filter((g,N)=>N<m&&g.visible).length;return p.filter(g=>g.visible).slice(...l?[w+1]:[0,w]).reduce((g,N)=>g+(N.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:O7,startPause:R7,endPause:r,calculateOffset:i}}},$7=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,B7=sl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,U7=sl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,z7=$c("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${B7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${U7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,q7=sl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,W7=$c("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${q7} 1s linear infinite;
`,H7=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,V7=sl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,G7=$c("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${H7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${V7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Y7=$c("div")`
  position: absolute;
`,K7=$c("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,J7=sl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X7=$c("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${J7} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Q7=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?j.createElement(X7,null,t):t:n==="blank"?null:j.createElement(K7,null,j.createElement(W7,{...r}),n!=="loading"&&j.createElement(Y7,null,n==="error"?j.createElement(z7,{...r}):j.createElement(G7,{...r})))},Z7=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,eT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,tT="0%{opacity:0;} 100%{opacity:1;}",nT="0%{opacity:1;} 100%{opacity:0;}",rT=$c("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,iT=$c("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,sT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=WS()?[tT,nT]:[Z7(n),eT(n)];return{animation:t?`${sl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sl(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aT=j.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?sT(e.position||t||"top-center",e.visible):{opacity:0},s=j.createElement(Q7,{toast:e}),a=j.createElement(iT,{...e.ariaProps},U0(e.message,e));return j.createElement(rT,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:a}):j.createElement(j.Fragment,null,s,a))});E7(j.createElement);var oT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=j.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return j.createElement("div",{ref:s,className:t,style:n},i)},lT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:WS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},cT=jg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Tm=16,uT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=F7(n);return j.createElement("div",{style:{position:"fixed",zIndex:9999,top:Tm,left:Tm,right:Tm,bottom:Tm,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(h=>{let p=h.position||t,m=c.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),w=lT(p,m);return j.createElement(oT,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?cT:"",style:w},h.type==="custom"?U0(h.message,h):i?i(h):j.createElement(aT,{toast:h,position:p}))}))};const dT="modulepreload",fT=function(e){return"/"+e},Fb={},al=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=fT(c),c in Fb)return;Fb[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":dT,h||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((w,g)=>{m.addEventListener("load",w),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},hT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class j5 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class pT extends j5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mT extends j5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class gT extends j5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var V2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(V2||(V2={}));var vT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class yT{constructor(t,{headers:n={},customFetch:r,region:i=V2.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=hT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return vT(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let h;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:h}).catch(N=>{throw new pT(N)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new mT(p);if(!p.ok)throw new gT(p);let w=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return w==="application/json"?g=yield p.json():w==="application/octet-stream"?g=yield p.blob():w==="text/event-stream"?g=p:w==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var ls={},E5={},Eg={},Sp={},Cg={},Ag={},wT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_f=wT();const xT=_f.fetch,HS=_f.fetch.bind(_f),VS=_f.Headers,bT=_f.Request,_T=_f.Response,Af=Object.freeze(Object.defineProperty({__proto__:null,Headers:VS,Request:bT,Response:_T,default:HS,fetch:xT},Symbol.toStringTag,{value:"Module"})),ST=GC(Af);var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});class NT extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Lg.default=NT;var GS=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ag,"__esModule",{value:!0});const kT=GS(ST),jT=GS(Lg);let ET=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=kT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,l,c;let h=null,p=null,m=null,w=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const _=await s.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const k=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),C=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");k&&C&&C.length>1&&(m=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,w=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const k=await s.text();try{h=JSON.parse(k),Array.isArray(h)&&s.status===404&&(p=[],h=null,w=200,g="OK")}catch{s.status===404&&k===""?(w=204,g="No Content"):h={message:k}}if(h&&this.isMaybeSingle&&(!((c=h==null?void 0:h.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,w=200,g="OK"),h&&this.shouldThrowOnError)throw new jT.default(h)}return{error:h,data:p,count:m,status:w,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,l,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};Ag.default=ET;var CT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cg,"__esModule",{value:!0});const AT=CT(Ag);let LT=class extends AT.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${h}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Cg.default=LT;var PT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sp,"__esModule",{value:!0});const TT=PT(Cg);let MT=class extends TT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Sp.default=MT;var DT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eg,"__esModule",{value:!0});const gh=DT(Sp);let IT=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new gh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new gh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new gh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new gh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Eg.default=IT;var Pg={},Tg={};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.version=void 0;Tg.version="0.0.0-automated";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.DEFAULT_HEADERS=void 0;const OT=Tg;Pg.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${OT.version}`};var YS=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E5,"__esModule",{value:!0});const RT=YS(Eg),FT=YS(Sp),$T=Pg;let BT=class KS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},$T.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new RT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new KS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const h=Object.assign({},this.headers);return s&&(h.Prefer=`count=${s}`),new FT.default({method:a,url:l,headers:h,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};E5.default=BT;var Lf=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});ls.PostgrestError=ls.PostgrestBuilder=ls.PostgrestTransformBuilder=ls.PostgrestFilterBuilder=ls.PostgrestQueryBuilder=ls.PostgrestClient=void 0;const JS=Lf(E5);ls.PostgrestClient=JS.default;const XS=Lf(Eg);ls.PostgrestQueryBuilder=XS.default;const QS=Lf(Sp);ls.PostgrestFilterBuilder=QS.default;const ZS=Lf(Cg);ls.PostgrestTransformBuilder=ZS.default;const eN=Lf(Ag);ls.PostgrestBuilder=eN.default;const tN=Lf(Lg);ls.PostgrestError=tN.default;var UT=ls.default={PostgrestClient:JS.default,PostgrestQueryBuilder:XS.default,PostgrestFilterBuilder:QS.default,PostgrestTransformBuilder:ZS.default,PostgrestBuilder:eN.default,PostgrestError:tN.default};const{PostgrestClient:zT,PostgrestQueryBuilder:mq,PostgrestFilterBuilder:gq,PostgrestTransformBuilder:vq,PostgrestBuilder:yq}=UT,qT="2.10.7",WT={"X-Client-Info":`realtime-js/${qT}`},HT="1.0.0",nN=1e4,VT=1e3;var lf;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lf||(lf={}));var Ps;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ps||(Ps={}));var La;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(La||(La={}));var G2;(function(e){e.websocket="websocket"})(G2||(G2={}));var Nu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Nu||(Nu={}));class GT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const h=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class rN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Un;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Un||(Un={}));const $b=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=YT(a,e,t,i),s),{})},YT=(e,t,n,r)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?iN(s,a):Y2(a)},iN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return QT(t,n)}switch(e){case Un.bool:return KT(t);case Un.float4:case Un.float8:case Un.int2:case Un.int4:case Un.int8:case Un.numeric:case Un.oid:return JT(t);case Un.json:case Un.jsonb:return XT(t);case Un.timestamp:return ZT(t);case Un.abstime:case Un.date:case Un.daterange:case Un.int4range:case Un.int8range:case Un.money:case Un.reltime:case Un.text:case Un.time:case Un.timestamptz:case Un.timetz:case Un.tsrange:case Un.tstzrange:return Y2(t);default:return Y2(t)}},Y2=e=>e,KT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},XT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},QT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>iN(t,l))}return e},ZT=e=>typeof e=="string"?e.replace(" ","T"):e,sN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class mv{constructor(t,n,r={},i=nN){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bb||(Bb={}));class Rh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Rh.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Rh.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(s,(h,p)=>{a[h]||(c[h]=p)}),this.map(a,(h,p)=>{const m=s[h];if(m){const w=p.map(C=>C.presence_ref),g=m.map(C=>C.presence_ref),N=p.filter(C=>g.indexOf(C.presence_ref)<0),k=m.filter(C=>w.indexOf(C.presence_ref)<0);N.length>0&&(l[h]=N),k.length>0&&(c[h]=k)}else l[h]=p}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var h;const p=(h=t[l])!==null&&h!==void 0?h:[];if(t[l]=this.cloneDeep(c),p.length>0){const m=t[l].map(g=>g.presence_ref),w=p.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...w)}r(l,p,c)}),this.map(a,(l,c)=>{let h=t[l];if(!h)return;const p=c.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),t[l]=h,i(l,h,c),h.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ub;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ub||(Ub={}));var zb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zb||(zb={}));var qb;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qb||(qb={}));class C5{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ps.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mv(this,La.join,this.params,this.timeout),this.rejoinTimer=new rN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ps.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ps.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ps.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ps.errored,this.rejoinTimer.scheduleTimeout())}),this._on(La.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Rh(this),this.broadcastEndpointURL=sN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},h={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const w=this.bindings.postgres_changes,g=(m=w==null?void 0:w.length)!==null&&m!==void 0?m:0,N=[];for(let k=0;k<g;k++){const C=w[k],{filter:{event:_,schema:S,table:L,filter:O}}=C,Y=p&&p[k];if(Y&&Y.event===_&&Y.schema===S&&Y.table===L&&Y.filter===O)N.push(Object.assign(Object.assign({},C),{id:Y.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ps.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(La.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new mv(this,La.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new mv(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:h,join:p}=La;if(r&&[l,c,h,p].indexOf(a)>=0&&r!==this._joinRef())return;let w=this._onMessage(a,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var N,k,C;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((C=(k=g.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(g=>g.callback(w,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var N,k,C,_,S,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const O=g.id,Y=(N=g.filter)===null||N===void 0?void 0:N.event;return O&&((k=n.ids)===null||k===void 0?void 0:k.includes(O))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const O=(S=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return O==="*"||O===((L=n==null?void 0:n.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof w=="object"&&"ids"in w){const N=w.data,{schema:k,table:C,commit_timestamp:_,type:S,errors:L}=N;w=Object.assign(Object.assign({},{schema:k,table:C,commit_timestamp:_,eventType:S,new:{},old:{},errors:L}),this._getPayloadRecords(N))}g.callback(w,r)})}_isClosed(){return this.state===Ps.closed}_isJoined(){return this.state===Ps.joined}_isJoining(){return this.state===Ps.joining}_isLeaving(){return this.state===Ps.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&C5.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(La.close,{},t)}_onError(t){this._on(La.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ps.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=$b(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=$b(t.columns,t.old_record)),n}}const eM=()=>{},tM=typeof WebSocket<"u",nM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rM{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=WT,this.params={},this.timeout=nN,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=eM,this.conn=null,this.sendBuffer=[],this.serializer=new GT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>al(async()=>{const{default:c}=await Promise.resolve().then(()=>Af);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${G2.websocket}`,this.httpEndpoint=sN(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(tM){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new iM(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),al(async()=>{const{default:t}=await import("./browser-CxplmeXb.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lf.connecting:return Nu.Connecting;case lf.open:return Nu.Open;case lf.closing:return Nu.Closing;default:return Nu.Closed}}isConnected(){return this.connectionState()===Nu.Open}channel(t,n={config:{}}){const r=new C5(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(La.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:HT}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(La.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(VT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([nM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class iM{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=lf.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class A5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class sM extends A5{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class K2 extends A5{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var aM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const aN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},oM=()=>aM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield al(()=>Promise.resolve().then(()=>Af),void 0)).Response:Response}),J2=e=>{if(Array.isArray(e))return e.map(n=>J2(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=J2(r)}),t};var Vu=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const gv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lM=(e,t,n)=>Vu(void 0,void 0,void 0,function*(){const r=yield oM();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new sM(gv(i),e.status||500))}).catch(i=>{t(new K2(gv(i),i))}):t(new K2(gv(e),e))}),cM=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Np(e,t,n,r,i,s){return Vu(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,cM(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>lM(c,l,r))})})}function z0(e,t,n,r){return Vu(this,void 0,void 0,function*(){return Np(e,"GET",t,n,r)})}function oc(e,t,n,r,i){return Vu(this,void 0,void 0,function*(){return Np(e,"POST",t,r,i,n)})}function uM(e,t,n,r,i){return Vu(this,void 0,void 0,function*(){return Np(e,"PUT",t,r,i,n)})}function dM(e,t,n,r){return Vu(this,void 0,void 0,function*(){return Np(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function oN(e,t,n,r,i){return Vu(this,void 0,void 0,function*(){return Np(e,"DELETE",t,r,i,n)})}var as=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const fM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hM{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=aN(i)}uploadOrUpdate(t,n,r,i){return as(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Wb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const h=this._removeEmptyFolders(n),p=this._getFinalPath(h),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:s,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),w=yield m.json();return m.ok?{data:{path:h,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(s){if(Kr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return as(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:Wb.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:p}),w=yield m.json();return m.ok?{data:{path:s,fullPath:w.Key},error:null}:{data:null,error:w}}catch(c){if(Kr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return as(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield oc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new A5("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}update(t,n,r){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return as(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return as(this,void 0,void 0,function*(){try{return{data:{path:(yield oc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return as(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield oc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return as(this,void 0,void 0,function*(){try{const i=yield oc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}download(t,n){return as(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield z0(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Kr(l))return{data:null,error:l};throw l}})}info(t){return as(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield z0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:J2(r),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}exists(t){return as(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield dM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kr(r)&&r instanceof K2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(t){return as(this,void 0,void 0,function*(){try{return{data:yield oN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}list(t,n,r){return as(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},fM),n),{prefix:t||""});return{data:yield oc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const pM="2.7.1",mM={"X-Client-Info":`storage-js/${pM}`};var Dd=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class gM{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},mM),n),this.fetch=aN(r)}listBuckets(){return Dd(this,void 0,void 0,function*(){try{return{data:yield z0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Kr(t))return{data:null,error:t};throw t}})}getBucket(t){return Dd(this,void 0,void 0,function*(){try{return{data:yield z0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Dd(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Dd(this,void 0,void 0,function*(){try{return{data:yield uM(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Dd(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Dd(this,void 0,void 0,function*(){try{return{data:yield oN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}}class vM extends gM{constructor(t,n={},r){super(t,n,r)}from(t){return new hM(this.url,this.headers,t,this.fetch)}}const yM="2.46.1";let jh="";typeof Deno<"u"?jh="deno":typeof document<"u"?jh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jh="react-native":jh="node";const wM={"X-Client-Info":`supabase-js-${jh}/${yM}`},xM={headers:wM},bM={schema:"public"},_M={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SM={};var NM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const kM=e=>{let t;return e?t=e:typeof fetch>"u"?t=HS:t=fetch,(...n)=>t(...n)},jM=()=>typeof Headers>"u"?VS:Headers,EM=(e,t,n)=>{const r=kM(n),i=jM();return(s,a)=>NM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let h=new i(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:h}))})};var CM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};function AM(e){return e.replace(/\/$/,"")}function LM(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:l,realtime:c,global:h}=t,p={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},h),s),accessToken:()=>CM(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const lN="2.65.1",PM="http://localhost:9999",TM="supabase.auth.token",MM={"X-Client-Info":`gotrue-js/${lN}`},Hb=10,X2="X-Supabase-Api-Version",cN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function DM(e){return Math.round(Date.now()/1e3)+e}function IM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ja=()=>typeof document<"u",mu={tested:!1,writable:!1},Fh=()=>{if(!ja())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mu.tested)return mu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),mu.tested=!0,mu.writable=!0}catch{mu.tested=!0,mu.writable=!1}return mu.writable};function vv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const uN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},OM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",dN=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Mm=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dm=async(e,t)=>{await e.removeItem(t)};function RM(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,l,c,h,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)a=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),h=t.indexOf(e.charAt(p++)),r=a<<2|l>>4,i=(l&15)<<4|c>>2,s=(c&3)<<6|h,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),h!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Mg{constructor(){this.promise=new Mg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Mg.promiseConstructor=Promise;function Vb(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(RM(r))}async function FM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $M(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function BM(e){return("0"+e.toString(16)).substr(-2)}function UM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,BM).join("")}async function zM(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function qM(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function WM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await zM(e);return qM(n)}async function Id(e,t,n=!1){const r=UM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await dN(e,`${t}-code-verifier`,i);const s=await WM(r);return[s,r===s?"plain":"s256"]}const HM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VM(e){const t=e.headers.get(X2);if(!t||!t.match(HM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class L5 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function en(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class GM extends L5{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function YM(e){return en(e)&&e.name==="AuthApiError"}class fN extends L5{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Gu extends L5{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class rc extends Gu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function KM(e){return en(e)&&e.name==="AuthSessionMissingError"}class yv extends Gu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Im extends Gu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Om extends Gu{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gb extends Gu{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q2 extends Gu{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function wv(e){return en(e)&&e.name==="AuthRetryableFetchError"}class Yb extends Gu{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var JM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XM=[502,503,504];async function Kb(e){var t;if(!OM(e))throw new Q2(xu(e),0);if(XM.includes(e.status))throw new Q2(xu(e),e.status);let n;try{n=await e.json()}catch(s){throw new fN(xu(s),s)}let r;const i=VM(e);if(i&&i.getTime()>=cN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yb(xu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new rc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Yb(xu(n),e.status,n.weak_password.reasons);throw new GM(xu(n),e.status||500,r)}const QM=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function cn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[X2]||(s[X2]=cN["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ZM(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function ZM(e,t,n,r,i,s){const a=QM(t,r,i,s);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Q2(xu(c),0)}if(l.ok||await Kb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Kb(c)}}function ic(e){var t;let n=null;rD(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=DM(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Jb(e){const t=ic(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function eD(e){return{data:e,error:null}}function tD(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=JM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function nD(e){return e}function rD(e){return e.access_token&&e.refresh_token&&e.expires_in}var iD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class sD{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=uN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await cn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await cn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=iD(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await cn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:tD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(en(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fc})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},p=await cn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:nD});if(p.error)throw p.error;const m=await p.json(),w=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const k=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);h[`${C}Page`]=k}),h.total=parseInt(w)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(en(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){try{return await cn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fc})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await cn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await cn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(en(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}}}const aD={getItem:e=>Fh()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Fh()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Fh()&&globalThis.localStorage.removeItem(e)}};function Xb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function oD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Od={debug:!!(globalThis&&Fh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class lD extends hN{}async function cD(e,t,n){Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Od.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Od.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Od.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}oD();const uD={url:PM,storageKey:TM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},vh=30*1e3,Qb=3;async function Zb(e,t,n){return await n()}class up{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=up.nextInstanceID,up.nextInstanceID+=1,this.instanceID>0&&ja()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},uD),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new sD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uN(i.fetch),this.lock=i.lock||Zb,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ja()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cD:this.lock=Zb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Fh()?this.storage=aD:(this.memoryStorage={},this.storage=Xb(this.memoryStorage)):(this.memoryStorage={},this.storage=Xb(this.memoryStorage)),ja()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=ja()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return en(t)?{error:t}:{error:new fN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ic}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:p,password:m,options:w}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await Id(this.storage,this.storageKey)),s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:p,password:m,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:g,code_challenge_method:N},xform:ic})}else if("phone"in t){const{phone:p,password:m,options:w}=t;s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(i=w==null?void 0:w.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:ic})}else throw new Im("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:l}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jb})}else if("phone"in t){const{phone:s,password:a,options:l}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jb})}else throw new Im("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new yv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Mm(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ic});if(await Dm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new yv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(en(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,l=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ic}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new yv}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:l,options:c}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Id(this.storage,this.storageKey));const{error:m}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:h,error:p}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new Im("You must provide either an email or phone number.")}catch(l){if(en(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await cn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ic});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(en(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Id(this.storage,this.storageKey)),await cn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:eD})}catch(s){if(en(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new rc;const{error:i}=await cn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:l}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Im("You must provide either an email or phone number and a type")}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Mm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,p)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,p))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fc}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rc}:await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:fc})})}catch(n){if(en(n))return KM(n)&&(await this._removeSession(),await Dm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new rc;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Id(this.storage,this.storageKey));const{data:h,error:p}=await cn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:fc});if(p)throw p;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Vb(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Vb(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(en(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new rc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!ja())throw new Om("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Om("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Gb("Not a valid PKCE flow url.");const n=vv(window.location.href);if(t){if(!n.code)throw new Gb("No code detected.");const{data:S,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Om(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:h}=n;if(!s||!l||!a||!h)throw new Om("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let w=p+m;c&&(w=parseInt(c));const g=w-p;g*1e3<=vh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const N=w-m;p-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,w,p):p-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,w,p);const{data:k,error:C}=await this._getUser(s);if(C)throw C;const _={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:w,refresh_token:a,token_type:h,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:n.type},error:null}}catch(n){if(en(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=vv(window.location.href);return!!(ja()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=vv(window.location.href),n=await Mm(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(YM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Dm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=IM(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Id(this.storage,this.storageKey,!0));try{return await cn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(en(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,c,h,p;const{data:m,error:w}=s;if(w)throw w;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await cn(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return ja()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(en(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await cn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await $M(async i=>(i>0&&await FM(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await cn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ic})),(i,s)=>{const a=200*Math.pow(2,i);return s&&wv(s)&&Date.now()+a-r<vh})}catch(r){if(this._debug(n,"error",r),en(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ja()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Mm(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+Hb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Hb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),wv(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new rc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Mg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new rc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),en(s)){const a={session:null,error:s};return wv(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await dN(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Dm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ja()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/vh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${vh}ms, refresh threshold is ${Qb} ticks`),i<=Qb&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ja()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Id(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await cn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:h}=await cn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:l}=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(en(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(en(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}up.nextInstanceID=0;const dD=up;class fD extends dD{constructor(t){super(t)}}var hD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{h(r.next(p))}catch(m){a(m)}}function c(p){try{h(r.throw(p))}catch(m){a(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class pD{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=AM(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:bM,realtime:SM,auth:Object.assign(Object.assign({},_M),{storageKey:c}),global:xM},p=LM(r??{},h);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=EM(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new zT(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new yT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return hD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:l,debug:c},h,p){var m;const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fD({url:this.authUrl,headers:Object.assign(Object.assign({},w),h),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:l,debug:c,fetch:p,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(t){return new rM(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mD=(e,t,n)=>new pD(e,t,n),gD="https://vrzgwnchqdxwgennshmu.supabase.co",vD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",et=mD(gD,vD,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:window.location.origin}}),yD={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173/spotify/callback",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",VITE_SUPABASE_URL:"https://vrzgwnchqdxwgennshmu.supabase.co"},e3=e=>{let t;const n=new Set,r=(p,m)=>{const w=typeof p=="function"?p(t):p;if(!Object.is(w,t)){const g=t;t=m??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(N=>N(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(yD?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=t=e(r,i,c);return c},wD=e=>e?e3(e):e3;var pN={exports:{}},mN={},gN={exports:{}},vN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sf=j;function xD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bD=typeof Object.is=="function"?Object.is:xD,_D=Sf.useState,SD=Sf.useEffect,ND=Sf.useLayoutEffect,kD=Sf.useDebugValue;function jD(e,t){var n=t(),r=_D({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return ND(function(){i.value=n,i.getSnapshot=t,xv(i)&&s({inst:i})},[e,n,t]),SD(function(){return xv(i)&&s({inst:i}),e(function(){xv(i)&&s({inst:i})})},[e]),kD(n),n}function xv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bD(e,n)}catch{return!0}}function ED(e,t){return t()}var CD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ED:jD;vN.useSyncExternalStore=Sf.useSyncExternalStore!==void 0?Sf.useSyncExternalStore:CD;gN.exports=vN;var AD=gN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=j,LD=AD;function PD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TD=typeof Object.is=="function"?Object.is:PD,MD=LD.useSyncExternalStore,DD=Dg.useRef,ID=Dg.useEffect,OD=Dg.useMemo,RD=Dg.useDebugValue;mN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=DD(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=OD(function(){function c(g){if(!h){if(h=!0,p=g,g=r(g),i!==void 0&&a.hasValue){var N=a.value;if(i(N,g))return m=N}return m=g}if(N=m,TD(p,g))return N;var k=r(g);return i!==void 0&&i(N,k)?N:(p=g,m=k)}var h=!1,p,m,w=n===void 0?null:n;return[function(){return c(t())},w===null?void 0:function(){return c(w())}]},[t,n,r,i]);var l=MD(e,s[0],s[1]);return ID(function(){a.hasValue=!0,a.value=l},[l]),RD(l),l};pN.exports=mN;var FD=pN.exports;const $D=v_(FD),yN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173/spotify/callback",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",VITE_SUPABASE_URL:"https://vrzgwnchqdxwgennshmu.supabase.co"},{useDebugValue:BD}=vt,{useSyncExternalStoreWithSelector:UD}=$D;let t3=!1;const zD=e=>e;function qD(e,t=zD,n){(yN?"production":void 0)!=="production"&&n&&!t3&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),t3=!0);const r=UD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return BD(r),r}const n3=e=>{(yN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?wD(e):e,n=(r,i)=>qD(t,r,i);return Object.assign(n,t),n},WD=e=>e?n3(e):n3,Zr=WD(e=>({user:null,session:null,loading:!0,setUser:t=>{e({user:t})},setSession:t=>{e({session:t})},signOut:async()=>{try{await et.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Hn=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...h},p)=>j.createElement("svg",{ref:p,...HD,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${VD(e)}`,l].join(" "),...h},[...t.map(([m,w])=>j.createElement(m,w)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Hn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Hn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Hn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=Hn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Hn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Hn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Hn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=Hn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Hn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=Hn("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=Hn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Hn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=Hn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Hn("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Hn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=Hn("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Hn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=Hn("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Hn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=Hn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Hn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=Hn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Hn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=Hn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Hn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Hn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ZD(){const[e,t]=j.useState([]),[n,r]=j.useState(!1),i=la(),{user:s}=Zr(),[a,l]=j.useState(null);j.useEffect(()=>{if(s)return c(),h(),()=>{a&&a.unsubscribe()}},[s]);const c=async()=>{const{data:m,error:w}=await et.from("notifications").select("*").eq("user_id",s==null?void 0:s.id).eq("read",!1).order("created_at",{ascending:!1});if(w){console.error("Error fetching notifications:",w);return}t(m||[])},h=async()=>{try{a&&await a.unsubscribe();const m=et.channel(`notifications:${s==null?void 0:s.id}`,{config:{broadcast:{self:!0}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{const g=w.new;t(N=>[g,...N]),Te.custom(N=>d.jsxs("div",{className:`${N.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[d.jsx(i3,{className:"h-6 w-6 text-indigo-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:g.title}),d.jsx("p",{className:"text-sm text-gray-500",children:g.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{t(g=>g.map(N=>N.id===w.new.id?w.new:N))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{t(g=>g.filter(N=>N.id!==w.old.id))}),await m.subscribe(),l(m)}catch(m){console.error("Error al configurar suscripción en tiempo real:",m)}},p=async(m,w)=>{try{const{error:g}=await et.rpc("handle_group_invitation",{p_group_member_id:m.data.group_member_id,p_accept:w});if(g)throw g;await et.from("notifications").update({read:!0}).eq("id",m.id),t(N=>N.filter(k=>k.id!==m.id)),Te.success(w?"Invitación aceptada":"Invitación rechazada"),w&&i(`/group/${m.data.group_id}`)}catch(g){Te.error(g.message)}};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[d.jsx(i3,{className:"w-6 h-6"}),e.length>0&&d.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:d.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?d.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(m=>d.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:m.title}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.message}),m.type==="group_invitation"&&d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>p(m,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),d.jsx("button",{onClick:()=>p(m,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},m.id))})})]})}function eI(){const{user:e,signOut:t}=Zr(),n=la(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return d.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs(Cc,{to:"/",className:"flex items-center space-x-2 min-w-0",children:[d.jsx(XD,{className:"h-6 w-6 sm:h-8 sm:w-8 flex-shrink-0"}),d.jsx("span",{className:"font-bold text-lg sm:text-xl truncate",children:"Band Manager"})]}),d.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0",children:[e&&d.jsx(ZD,{}),e?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-xs sm:text-sm hidden md:block truncate max-w-32 lg:max-w-none",children:e.email}),d.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[d.jsx(ey,{className:"h-4 w-4 sm:h-5 sm:w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]}):d.jsxs("div",{className:"flex space-x-2 sm:space-x-4",children:[d.jsx(Cc,{to:"/login",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Login"}),d.jsx(Cc,{to:"/register",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Register"}),!1]})]})]})})})}function Xn({label:e,error:t,className:n="",...r}){return d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),d.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&d.jsx("p",{className:"text-sm text-red-600",children:t})]})}function _t({children:e,loading:t,variant:n="primary",fullWidth:r,size:i="md",className:s="",...a}){const l="flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={sm:"px-2 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},h={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return d.jsxs("button",{className:`${l} ${c[i]} ${h[n]} ${r?"w-full":""} ${s}`,disabled:t,...a,children:[t&&d.jsx(ol,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function tI(){var w;const[e,t]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(!1),a=la(),c=(w=oa().state)==null?void 0:w.returnTo,{user:h,setUser:p}=Zr();j.useEffect(()=>{if(h){let g=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){const N=new URL(c,window.location.origin),k=N.searchParams.get("code"),C=N.searchParams.get("state"),_=N.searchParams.get("error");k&&C?g=`/?code=${k}&state=${C}`:_?g=`/?error=${_}`:g=N.pathname}a(g,{replace:!0})}},[h,c,a]);const m=async g=>{g.preventDefault(),s(!0);try{const{data:N,error:k}=await et.auth.signInWithPassword({email:e,password:n});if(k)throw k;p(N.user),Te.success("Successfully logged in!");let C=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){const _=new URL(c,window.location.origin),S=_.searchParams.get("code"),L=_.searchParams.get("state"),O=_.searchParams.get("error");S&&L?C=`/?code=${S}&state=${L}`:O?C=`/?error=${O}`:C=_.pathname}a(C,{replace:!0})}catch(N){Te.error(N.message||"Failed to login")}finally{s(!1)}};return h?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsx(Xn,{label:"Email",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"your@email.com"}),d.jsx(Xn,{label:"Password",type:"password",value:n,onChange:g=>r(g.target.value),required:!0,placeholder:"••••••••"}),d.jsx(_t,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Cc,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"¿Olvidaste tu contraseña?"})}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",d.jsx(Cc,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function nI(){const[e]=US(),t=e.get("email");e.get("token");const[n,r]=j.useState(t||""),[i,s]=j.useState(""),[a,l]=j.useState(""),[c,h]=j.useState(!1),p=la(),{user:m}=Zr();j.useEffect(()=>{m&&p("/")},[m,p]);const w=async g=>{g.preventDefault(),h(!0);try{const{data:N,error:k}=await et.auth.signUp({email:n,password:i,options:{data:{name:a,role:"user"}}});if(k)throw k;if(N.user){const{data:C,error:_}=await et.rpc("create_new_user",{user_id:N.user.id,user_email:n,user_name:a,user_role:"user"});if(_)throw _;Te.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(N){console.error("Registration error:",N),N.message.includes("User already registered")?Te.error("This email is already registered. Please try logging in instead."):N.message.includes("rate limit")?Te.error("Too many registration attempts. Please try again in a few minutes."):Te.error("Registration failed. Please try again.")}finally{h(!1)}};return m?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsx(Xn,{label:"Name",type:"text",value:a,onChange:g=>l(g.target.value),required:!0,placeholder:"John Doe"}),d.jsx(Xn,{label:"Email",type:"email",value:n,onChange:g=>r(g.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),d.jsx(Xn,{label:"Password",type:"password",value:i,onChange:g=>s(g.target.value),required:!0,placeholder:"••••••••",minLength:6}),d.jsx(_t,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),d.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",d.jsx(Cc,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var rI=Object.defineProperty,iI=(e,t,n)=>t in e?rI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bv=(e,t,n)=>(iI(e,typeof t!="symbol"?t+"":t,n),n);let sI=class{constructor(){bv(this,"current",this.detect()),bv(this,"handoffState","pending"),bv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Du=new sI;function Og(e){return Du.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Rg(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Bc(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Rg(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Bc();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function T5(){let[e]=j.useState(Bc);return j.useEffect(()=>()=>e.dispose(),[e]),e}let Bi=(e,t)=>{Du.isServer?j.useEffect(e,t):j.useLayoutEffect(e,t)};function Yu(e){let t=j.useRef(e);return Bi(()=>{t.current=e},[e]),t}let pr=function(e){let t=Yu(e);return vt.useCallback((...n)=>t.current(...n),[t])},aI=j.createContext(void 0);function oI(){return j.useContext(aI)}function ny(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Pc(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Pc),r}var G0=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(G0||{}),vc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(vc||{});function ca(){let e=cI();return j.useCallback(t=>lI({mergeRefs:e,...t}),[e])}function lI({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??uI;let c=xN(t,e);if(s)return Rm(c,n,r,a,l);let h=i??0;if(h&2){let{static:p=!1,...m}=c;if(p)return Rm(m,n,r,a,l)}if(h&1){let{unmount:p=!0,...m}=c;return Pc(p?0:1,{0(){return null},1(){return Rm({...m,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Rm(c,n,r,a,l)}function Rm(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=_v(e,["unmount","static"]),h=e.ref!==void 0?{[l]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let w=!1,g=[];for(let[N,k]of Object.entries(t))typeof k=="boolean"&&(w=!0),k===!0&&g.push(N.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(w){m["data-headlessui-state"]=g.join(" ");for(let N of g)m[`data-${N}`]=""}}if(s===j.Fragment&&(Object.keys(bu(c)).length>0||Object.keys(bu(m)).length>0))if(!j.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(bu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(bu(c)).concat(Object.keys(bu(m))).map(w=>`  - ${w}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(w=>`  - ${w}`).join(`
`)].join(`
`))}else{let w=p.props,g=w==null?void 0:w.className,N=typeof g=="function"?(..._)=>ny(g(..._),c.className):ny(g,c.className),k=N?{className:N}:{},C=xN(p.props,bu(_v(c,["ref"])));for(let _ in m)_ in C&&delete m[_];return j.cloneElement(p,Object.assign({},C,m,h,{ref:i(dI(p),h.ref)},k))}return j.createElement(s,Object.assign({},_v(c,["ref"]),s!==j.Fragment&&h,s!==j.Fragment&&m),p)}function cI(){let e=j.useRef([]),t=j.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function uI(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function xN(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function ps(e){var t;return Object.assign(j.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function bu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function _v(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function dI(e){return vt.version.split(".")[0]>="19"?e.props.ref:e.ref}let fI="span";var Y0=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Y0||{});function hI(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return ca()({ourProps:s,theirProps:i,slot:{},defaultTag:fI,name:"Hidden"})}let ry=ps(hI),bN=Symbol();function pI(e,t=!0){return Object.assign(e,{[bN]:t})}function bo(...e){let t=j.useRef(e);j.useEffect(()=>{t.current=e},[e]);let n=pr(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[bN]))?void 0:n}let M5=j.createContext(null);M5.displayName="DescriptionContext";function _N(){let e=j.useContext(M5);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,_N),t}return e}function mI(){let[e,t]=j.useState([]);return[e.length>0?e.join(" "):void 0,j.useMemo(()=>function(n){let r=pr(s=>(t(a=>[...a,s]),()=>t(a=>{let l=a.slice(),c=l.indexOf(s);return c!==-1&&l.splice(c,1),l}))),i=j.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return vt.createElement(M5.Provider,{value:i},n.children)},[t])]}let gI="p";function vI(e,t){let n=j.useId(),r=oI(),{id:i=`headlessui-description-${n}`,...s}=e,a=_N(),l=bo(t);Bi(()=>a.register(i),[i,a.register]);let c=r||!1,h=j.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),p={ref:l,...a.props,id:i};return ca()({ourProps:p,theirProps:s,slot:h,defaultTag:gI,name:a.name||"Description"})}let yI=ps(vI),wI=Object.assign(yI,{});var SN=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(SN||{});let xI=j.createContext(()=>{});function bI({value:e,children:t}){return vt.createElement(xI.Provider,{value:e},t)}let _I=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function NN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=t[i].call(n,...s);a&&(n=a,r.forEach(l=>l()))}}}function kN(e){return j.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let SI=new _I(()=>NN(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Pf(e,t){let n=SI.get(t),r=j.useId(),i=kN(n);if(Bi(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let iy=new Map,$h=new Map;function c3(e){var t;let n=(t=$h.get(e))!=null?t:0;return $h.set(e,n+1),n!==0?()=>u3(e):(iy.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>u3(e))}function u3(e){var t;let n=(t=$h.get(e))!=null?t:1;if(n===1?$h.delete(e):$h.set(e,n-1),n!==1)return;let r=iy.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,iy.delete(e))}function NI(e,{allowed:t,disallowed:n}={}){let r=Pf(e,"inert-others");Bi(()=>{var i,s;if(!r)return;let a=Bc();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(c3(c));let l=(s=t==null?void 0:t())!=null?s:[];for(let c of l){if(!c)continue;let h=Og(c);if(!h)continue;let p=c.parentElement;for(;p&&p!==h.body;){for(let m of p.children)l.some(w=>m.contains(w))||a.add(c3(m));p=p.parentElement}}return a.dispose},[r,t,n])}function kI(e,t,n){let r=Yu(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});j.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let s=Bc();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[t,r,e])}let K0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),jI=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Jo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Jo||{}),sy=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(sy||{}),EI=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(EI||{});function CI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(K0)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function AI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(jI)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var jN=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(jN||{});function LI(e,t=0){var n;return e===((n=Og(e))==null?void 0:n.body)?!1:Pc(t,{0(){return e.matches(K0)},1(){let r=e;for(;r!==null;){if(r.matches(K0))return!0;r=r.parentElement}return!1}})}var PI=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(PI||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function el(e){e==null||e.focus({preventScroll:!0})}let TI=["textarea","input"].join(",");function MI(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,TI))!=null?n:!1}function DI(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Bh(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?DI(e):e:t&64?AI(e):CI(e);i.length>0&&a.length>1&&(a=a.filter(g=>!i.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===g:N===g))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=t&32?{preventScroll:!0}:{},p=0,m=a.length,w;do{if(p>=m||p+m<=0)return 0;let g=c+p;if(t&16)g=(g+m)%m;else{if(g<0)return 3;if(g>=m)return 1}w=a[g],w==null||w.focus(h),p+=l}while(w!==s.activeElement);return t&6&&MI(w)&&w.select(),2}function EN(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function II(){return/Android/gi.test(window.navigator.userAgent)}function OI(){return EN()||II()}function yh(e,t,n,r){let i=Yu(n);j.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function CN(e,t,n,r){let i=Yu(n);j.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const d3=30;function RI(e,t,n){let r=Pf(e,"outside-click"),i=Yu(n),s=j.useCallback(function(c,h){if(c.defaultPrevented)return;let p=h(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let m=function w(g){return typeof g=="function"?w(g()):Array.isArray(g)||g instanceof Set?g:[g]}(t);for(let w of m)if(w!==null&&(w.contains(p)||c.composed&&c.composedPath().includes(w)))return;return!LI(p,jN.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),a=j.useRef(null);yh(r,"pointerdown",c=>{var h,p;a.current=((p=(h=c.composedPath)==null?void 0:h.call(c))==null?void 0:p[0])||c.target},!0),yh(r,"mousedown",c=>{var h,p;a.current=((p=(h=c.composedPath)==null?void 0:h.call(c))==null?void 0:p[0])||c.target},!0),yh(r,"click",c=>{OI()||a.current&&(s(c,()=>a.current),a.current=null)},!0);let l=j.useRef({x:0,y:0});yh(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),yh(r,"touchend",c=>{let h={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(h.x-l.current.x)>=d3||Math.abs(h.y-l.current.y)>=d3))return s(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),CN(r,"blur",c=>s(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function kp(...e){return j.useMemo(()=>Og(...e),[...e])}function AN(e,t,n,r){let i=Yu(n);j.useEffect(()=>{e=e??window;function s(a){i.current(a)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function FI(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function $I(){return EN()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Bc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:h}=new URL(c.href),p=e.querySelector(h);p&&!r(p)&&(a=p)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function BI(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function UI(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Pu=NN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Bc(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:UI(n)},i=[$I(),FI(),BI()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Pu.subscribe(()=>{let e=Pu.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Pu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Pu.dispatch("TEARDOWN",n)}});function zI(e,t,n=()=>({containers:[]})){let r=kN(Pu),i=t?r.get(t):void 0,s=i?i.count>0:!1;return Bi(()=>{if(!(!t||!e))return Pu.dispatch("PUSH",t,n),()=>Pu.dispatch("POP",t,n)},[e,t]),s}function qI(e,t,n=()=>[document.body]){let r=Pf(e,"scroll-lock");zI(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function WI(e=0){let[t,n]=j.useState(e),r=j.useCallback(c=>n(c),[t]),i=j.useCallback(c=>n(h=>h|c),[t]),s=j.useCallback(c=>(t&c)===c,[t]),a=j.useCallback(c=>n(h=>h&~c),[n]),l=j.useCallback(c=>n(h=>h^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:l}}var HI={},f3,h3;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((f3=process==null?void 0:HI)==null?void 0:f3.NODE_ENV)==="test"&&typeof((h3=Element==null?void 0:Element.prototype)==null?void 0:h3.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var VI=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(VI||{});function GI(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function YI(e,t,n,r){let[i,s]=j.useState(n),{hasFlag:a,addFlag:l,removeFlag:c}=WI(e&&i?3:0),h=j.useRef(!1),p=j.useRef(!1),m=T5();return Bi(()=>{var w;if(e){if(n&&s(!0),!t){n&&l(3);return}return(w=r==null?void 0:r.start)==null||w.call(r,n),KI(t,{inFlight:h,prepare(){p.current?p.current=!1:p.current=h.current,h.current=!0,!p.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){p.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var g;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(h.current=!1,c(7),n||s(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,m]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function KI(e,{prepare:t,run:n,done:r,inFlight:i}){let s=Bc();return XI(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(JI(e,r))})}),s.dispose}function JI(e,t){var n,r;let i=Bc();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{s||t()}),i.dispose)}function XI(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function D5(e,t){let n=j.useRef([]),r=pr(e);j.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}let Fg=j.createContext(null);Fg.displayName="OpenClosedContext";var Ta=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ta||{});function $g(){return j.useContext(Fg)}function QI({value:e,children:t}){return vt.createElement(Fg.Provider,{value:e},t)}function ZI({children:e}){return vt.createElement(Fg.Provider,{value:null},e)}function eO(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let hc=[];eO(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||hc[0]===t.target)return;let n=t.target;n=n.closest(K0),hc.unshift(n??t.target),hc=hc.filter(r=>r!=null&&r.isConnected),hc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function LN(e){let t=pr(e),n=j.useRef(!1);j.useEffect(()=>(n.current=!1,()=>{n.current=!0,Rg(()=>{n.current&&t()})}),[t])}function tO(){let e=typeof document>"u";return"useSyncExternalStore"in Vv?(t=>t.useSyncExternalStore)(Vv)(()=>()=>{},()=>!1,()=>!e):!1}function jp(){let e=tO(),[t,n]=j.useState(Du.isHandoffComplete);return t&&Du.isHandoffComplete===!1&&n(!1),j.useEffect(()=>{t!==!0&&n(!0)},[t]),j.useEffect(()=>Du.handoff(),[]),e?!1:t}let PN=j.createContext(!1);function nO(){return j.useContext(PN)}function p3(e){return vt.createElement(PN.Provider,{value:e.force},e.children)}function rO(e){let t=nO(),n=j.useContext(MN),r=kp(e),[i,s]=j.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(Du.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return j.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),j.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),i}let TN=j.Fragment,iO=ps(function(e,t){let n=e,r=j.useRef(null),i=bo(pI(m=>{r.current=m}),t),s=kp(r),a=rO(r),[l]=j.useState(()=>{var m;return Du.isServer?null:(m=s==null?void 0:s.createElement("div"))!=null?m:null}),c=j.useContext(ay),h=jp();Bi(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Bi(()=>{if(l&&c)return c.register(l)},[c,l]),LN(()=>{var m;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let p=ca();return h?!a||!l?null:Lu.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:TN,name:"Portal"}),l):null});function sO(e,t){let n=bo(t),{enabled:r=!0,...i}=e,s=ca();return r?vt.createElement(iO,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:TN,name:"Portal"})}let aO=j.Fragment,MN=j.createContext(null);function oO(e,t){let{target:n,...r}=e,i={ref:bo(t)},s=ca();return vt.createElement(MN.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:aO,name:"Popover.Group"}))}let ay=j.createContext(null);function lO(){let e=j.useContext(ay),t=j.useRef([]),n=pr(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=pr(s=>{let a=t.current.indexOf(s);a!==-1&&t.current.splice(a,1),e&&e.unregister(s)}),i=j.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,j.useMemo(()=>function({children:s}){return vt.createElement(ay.Provider,{value:i},s)},[i])]}let cO=ps(sO),DN=ps(oO),uO=Object.assign(cO,{Group:DN});function dO(e,t=typeof document<"u"?document.defaultView:null,n){let r=Pf(e,"escape");AN(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===SN.Escape&&n(i))})}function fO(){var e;let[t]=j.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=j.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Bi(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function hO({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=kp(n),i=pr(()=>{var s,a;let l=[];for(let c of e)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||l.some(h=>c.contains(h))||l.push(c));return l});return{resolveContainers:i,contains:pr(s=>i().some(a=>a.contains(s)))}}let IN=j.createContext(null);function m3({children:e,node:t}){let[n,r]=j.useState(null),i=ON(t??n);return vt.createElement(IN.Provider,{value:i},e,i===null&&vt.createElement(ry,{features:Y0.Hidden,ref:s=>{var a,l;if(s){for(let c of(l=(a=Og(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(s)){r(c);break}}}}))}function ON(e=null){var t;return(t=j.useContext(IN))!=null?t:e}function I5(){let e=j.useRef(!1);return Bi(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Eh=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Eh||{});function pO(){let e=j.useRef(0);return CN(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function RN(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let mO="div";var ku=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ku||{});function gO(e,t){let n=j.useRef(null),r=bo(n,t),{initialFocus:i,initialFocusFallback:s,containers:a,features:l=15,...c}=e;jp()||(l=0);let h=kp(n);xO(l,{ownerDocument:h});let p=bO(l,{ownerDocument:h,container:n,initialFocus:i,initialFocusFallback:s});_O(l,{ownerDocument:h,container:n,containers:a,previousActiveElement:p});let m=pO(),w=pr(S=>{let L=n.current;L&&(O=>O())(()=>{Pc(m.current,{[Eh.Forwards]:()=>{Bh(L,Jo.First,{skipElements:[S.relatedTarget,s]})},[Eh.Backwards]:()=>{Bh(L,Jo.Last,{skipElements:[S.relatedTarget,s]})}})})}),g=Pf(!!(l&2),"focus-trap#tab-lock"),N=T5(),k=j.useRef(!1),C={ref:r,onKeyDown(S){S.key=="Tab"&&(k.current=!0,N.requestAnimationFrame(()=>{k.current=!1}))},onBlur(S){if(!(l&4))return;let L=RN(a);n.current instanceof HTMLElement&&L.add(n.current);let O=S.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(FN(L,O)||(k.current?Bh(n.current,Pc(m.current,{[Eh.Forwards]:()=>Jo.Next,[Eh.Backwards]:()=>Jo.Previous})|Jo.WrapAround,{relativeTo:S.target}):S.target instanceof HTMLElement&&el(S.target)))}},_=ca();return vt.createElement(vt.Fragment,null,g&&vt.createElement(ry,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:Y0.Focusable}),_({ourProps:C,theirProps:c,defaultTag:mO,name:"FocusTrap"}),g&&vt.createElement(ry,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:Y0.Focusable}))}let vO=ps(gO),yO=Object.assign(vO,{features:ku});function wO(e=!0){let t=j.useRef(hc.slice());return D5(([n],[r])=>{r===!0&&n===!1&&Rg(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=hc.slice())},[e,hc,t]),pr(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function xO(e,{ownerDocument:t}){let n=!!(e&8),r=wO(n);D5(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&el(r())},[n]),LN(()=>{n&&el(r())})}function bO(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=j.useRef(null),a=Pf(!!(e&1),"focus-trap#initial-focus"),l=I5();return D5(()=>{if(e===0)return;if(!a){i!=null&&i.current&&el(i.current);return}let c=n.current;c&&Rg(()=>{if(!l.current)return;let h=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===h){s.current=h;return}}else if(c.contains(h)){s.current=h;return}if(r!=null&&r.current)el(r.current);else{if(e&16){if(Bh(c,Jo.First|Jo.AutoFocus)!==sy.Error)return}else if(Bh(c,Jo.First)!==sy.Error)return;if(i!=null&&i.current&&(el(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,a,e]),s}function _O(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=I5(),a=!!(e&4);AN(t==null?void 0:t.defaultView,"focus",l=>{if(!a||!s.current)return;let c=RN(r);n.current instanceof HTMLElement&&c.add(n.current);let h=i.current;if(!h)return;let p=l.target;p&&p instanceof HTMLElement?FN(c,p)?(i.current=p,el(p)):(l.preventDefault(),l.stopPropagation(),el(h)):el(i.current)},!0)}function FN(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function $N(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:UN)!==j.Fragment||vt.Children.count(e.children)===1}let Bg=j.createContext(null);Bg.displayName="TransitionContext";var SO=(e=>(e.Visible="visible",e.Hidden="hidden",e))(SO||{});function NO(){let e=j.useContext(Bg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function kO(){let e=j.useContext(Ug);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Ug=j.createContext(null);Ug.displayName="NestingContext";function zg(e){return"children"in e?zg(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function BN(e,t){let n=Yu(e),r=j.useRef([]),i=I5(),s=T5(),a=pr((g,N=vc.Hidden)=>{let k=r.current.findIndex(({el:C})=>C===g);k!==-1&&(Pc(N,{[vc.Unmount](){r.current.splice(k,1)},[vc.Hidden](){r.current[k].state="hidden"}}),s.microTask(()=>{var C;!zg(r)&&i.current&&((C=n.current)==null||C.call(n))}))}),l=pr(g=>{let N=r.current.find(({el:k})=>k===g);return N?N.state!=="visible"&&(N.state="visible"):r.current.push({el:g,state:"visible"}),()=>a(g,vc.Unmount)}),c=j.useRef([]),h=j.useRef(Promise.resolve()),p=j.useRef({enter:[],leave:[]}),m=pr((g,N,k)=>{c.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([C])=>C!==g)),t==null||t.chains.current[N].push([g,new Promise(C=>{c.current.push(C)})]),t==null||t.chains.current[N].push([g,new Promise(C=>{Promise.all(p.current[N].map(([_,S])=>S)).then(()=>C())})]),N==="enter"?h.current=h.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(N)):k(N)}),w=pr((g,N,k)=>{Promise.all(p.current[N].splice(0).map(([C,_])=>_)).then(()=>{var C;(C=c.current.shift())==null||C()}).then(()=>k(N))});return j.useMemo(()=>({children:r,register:l,unregister:a,onStart:m,onStop:w,wait:h,chains:p}),[l,a,r,m,w,p,h])}let UN=j.Fragment,zN=G0.RenderStrategy;function jO(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:h,enterFrom:p,enterTo:m,entered:w,leave:g,leaveFrom:N,leaveTo:k,...C}=e,[_,S]=j.useState(null),L=j.useRef(null),O=$N(e),Y=bo(...O?[L,t,S]:t===null?[]:[t]),se=(n=C.unmount)==null||n?vc.Unmount:vc.Hidden,{show:W,appear:I,initial:re}=NO(),[oe,R]=j.useState(W?"visible":"hidden"),z=kO(),{register:K,unregister:J}=z;Bi(()=>K(L),[K,L]),Bi(()=>{if(se===vc.Hidden&&L.current){if(W&&oe!=="visible"){R("visible");return}return Pc(oe,{hidden:()=>J(L),visible:()=>K(L)})}},[oe,L,K,J,W,se]);let ye=jp();Bi(()=>{if(O&&ye&&oe==="visible"&&L.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[L,oe,ye,O]);let pe=re&&!I,X=I&&W&&re,F=j.useRef(!1),U=BN(()=>{F.current||(R("hidden"),J(L))},z),ae=pr(Ae=>{F.current=!0;let Ee=Ae?"enter":"leave";U.onStart(L,Ee,Z=>{Z==="enter"?s==null||s():Z==="leave"&&(l==null||l())})}),Le=pr(Ae=>{let Ee=Ae?"enter":"leave";F.current=!1,U.onStop(L,Ee,Z=>{Z==="enter"?a==null||a():Z==="leave"&&(c==null||c())}),Ee==="leave"&&!zg(U)&&(R("hidden"),J(L))});j.useEffect(()=>{O&&i||(ae(W),Le(W))},[W,O,i]);let P=!(!i||!O||!ye||pe),[,V]=YI(P,_,W,{start:ae,end:Le}),ne=bu({ref:Y,className:((r=ny(C.className,X&&h,X&&p,V.enter&&h,V.enter&&V.closed&&p,V.enter&&!V.closed&&m,V.leave&&g,V.leave&&!V.closed&&N,V.leave&&V.closed&&k,!V.transition&&W&&w))==null?void 0:r.trim())||void 0,...GI(V)}),le=0;oe==="visible"&&(le|=Ta.Open),oe==="hidden"&&(le|=Ta.Closed),V.enter&&(le|=Ta.Opening),V.leave&&(le|=Ta.Closing);let de=ca();return vt.createElement(Ug.Provider,{value:U},vt.createElement(QI,{value:le},de({ourProps:ne,theirProps:C,defaultTag:UN,features:zN,visible:oe==="visible",name:"Transition.Child"})))}function EO(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,a=j.useRef(null),l=$N(e),c=bo(...l?[a,t]:t===null?[]:[t]);jp();let h=$g();if(n===void 0&&h!==null&&(n=(h&Ta.Open)===Ta.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=j.useState(n?"visible":"hidden"),w=BN(()=>{n||m("hidden")}),[g,N]=j.useState(!0),k=j.useRef([n]);Bi(()=>{g!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),N(!1))},[k,n]);let C=j.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);Bi(()=>{n?m("visible"):!zg(w)&&a.current!==null&&m("hidden")},[n,w]);let _={unmount:i},S=pr(()=>{var Y;g&&N(!1),(Y=e.beforeEnter)==null||Y.call(e)}),L=pr(()=>{var Y;g&&N(!1),(Y=e.beforeLeave)==null||Y.call(e)}),O=ca();return vt.createElement(Ug.Provider,{value:w},vt.createElement(Bg.Provider,{value:C},O({ourProps:{..._,as:j.Fragment,children:vt.createElement(qN,{ref:c,..._,...s,beforeEnter:S,beforeLeave:L})},theirProps:{},defaultTag:j.Fragment,features:zN,visible:p==="visible",name:"Transition"})))}function CO(e,t){let n=j.useContext(Bg)!==null,r=$g()!==null;return vt.createElement(vt.Fragment,null,!n&&r?vt.createElement(oy,{ref:t,...e}):vt.createElement(qN,{ref:t,...e}))}let oy=ps(EO),qN=ps(jO),O5=ps(CO),AO=Object.assign(oy,{Child:O5,Root:oy});var LO=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(LO||{}),PO=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(PO||{});let TO={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},R5=j.createContext(null);R5.displayName="DialogContext";function qg(e){let t=j.useContext(R5);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,qg),n}return t}function MO(e,t){return Pc(t.type,TO,e,t)}let g3=ps(function(e,t){let n=j.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:h=!1,unmount:p=!1,...m}=e,w=j.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(w.current||(w.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=$g();i===void 0&&g!==null&&(i=(g&Ta.Open)===Ta.Open);let N=j.useRef(null),k=bo(N,t),C=kp(N),_=i?0:1,[S,L]=j.useReducer(MO,{titleId:null,descriptionId:null,panelRef:j.createRef()}),O=pr(()=>s(!1)),Y=pr(Le=>L({type:0,id:Le})),se=jp()?_===0:!1,[W,I]=lO(),re={get current(){var Le;return(Le=S.panelRef.current)!=null?Le:N.current}},oe=ON(),{resolveContainers:R}=hO({mainTreeNode:oe,portals:W,defaultContainers:[re]}),z=g!==null?(g&Ta.Closing)===Ta.Closing:!1;NI(h||z?!1:se,{allowed:pr(()=>{var Le,P;return[(P=(Le=N.current)==null?void 0:Le.closest("[data-headlessui-portal]"))!=null?P:null]}),disallowed:pr(()=>{var Le;return[(Le=oe==null?void 0:oe.closest("body > *:not(#headlessui-portal-root)"))!=null?Le:null]})}),RI(se,R,Le=>{Le.preventDefault(),O()}),dO(se,C==null?void 0:C.defaultView,Le=>{Le.preventDefault(),Le.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),O()}),qI(h||z?!1:se,C,R),kI(se,N,O);let[K,J]=mI(),ye=j.useMemo(()=>[{dialogState:_,close:O,setTitleId:Y,unmount:p},S],[_,S,O,Y,p]),pe=j.useMemo(()=>({open:_===0}),[_]),X={ref:k,id:r,role:l,tabIndex:-1,"aria-modal":h?void 0:_===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":K,unmount:p},F=!fO(),U=ku.None;se&&!h&&(U|=ku.RestoreFocus,U|=ku.TabLock,c&&(U|=ku.AutoFocus),F&&(U|=ku.InitialFocus));let ae=ca();return vt.createElement(ZI,null,vt.createElement(p3,{force:!0},vt.createElement(uO,null,vt.createElement(R5.Provider,{value:ye},vt.createElement(DN,{target:N},vt.createElement(p3,{force:!1},vt.createElement(J,{slot:pe},vt.createElement(I,null,vt.createElement(yO,{initialFocus:a,initialFocusFallback:N,containers:R,features:U},vt.createElement(bI,{value:O},ae({ourProps:X,theirProps:m,slot:pe,defaultTag:DO,features:IO,visible:_===0,name:"Dialog"})))))))))))}),DO="div",IO=G0.RenderStrategy|G0.Static;function OO(e,t){let{transition:n=!1,open:r,...i}=e,s=$g(),a=e.hasOwnProperty("open")||s!==null,l=e.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?vt.createElement(m3,null,vt.createElement(AO,{show:r,transition:n,unmount:i.unmount},vt.createElement(g3,{ref:t,...i}))):vt.createElement(m3,null,vt.createElement(g3,{ref:t,open:r,...i}))}let RO="div";function FO(e,t){let n=j.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:a,unmount:l},c]=qg("Dialog.Panel"),h=bo(t,c.panelRef),p=j.useMemo(()=>({open:a===0}),[a]),m=pr(C=>{C.stopPropagation()}),w={ref:h,id:r,onClick:m},g=i?O5:j.Fragment,N=i?{unmount:l}:{},k=ca();return vt.createElement(g,{...N},k({ourProps:w,theirProps:s,slot:p,defaultTag:RO,name:"Dialog.Panel"}))}let $O="div";function BO(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=qg("Dialog.Backdrop"),a=j.useMemo(()=>({open:i===0}),[i]),l={ref:t,"aria-hidden":!0},c=n?O5:j.Fragment,h=n?{unmount:s}:{},p=ca();return vt.createElement(c,{...h},p({ourProps:l,theirProps:r,slot:a,defaultTag:$O,name:"Dialog.Backdrop"}))}let UO="h2";function zO(e,t){let n=j.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:a}]=qg("Dialog.Title"),l=bo(t);j.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=j.useMemo(()=>({open:s===0}),[s]),h={ref:l,id:r};return ca()({ourProps:h,theirProps:i,slot:c,defaultTag:UO,name:"Dialog.Title"})}let qO=ps(OO),WO=ps(FO);ps(BO);let HO=ps(zO),Iu=Object.assign(qO,{Panel:WO,Title:HO,Description:wI});const VO=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,s]=j.useState(""),[a,l]=j.useState(!1);j.useState([]);const c=async h=>{if(h.preventDefault(),!!i.trim())try{l(!0);const{error:p}=await et.from("groups").insert([{name:i.trim()}]);if(p)throw p;Te.success("Grupo creado exitosamente"),n(),t(),s("")}catch(p){console.error("Error:",p),Te.error("Error al crear el grupo")}finally{l(!1)}};return d.jsx(Iu,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-4 sm:p-6 mx-4 max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Ia,{className:"w-6 h-6"})})}),d.jsx(Iu.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),d.jsxs("form",{onSubmit:c,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),d.jsx("input",{type:"text",id:"name",value:i,onChange:h=>s(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,disabled:a,fullWidth:!0,className:"sm:w-auto",children:"Cancelar"}),d.jsx(_t,{type:"submit",loading:a,fullWidth:!0,className:"sm:w-auto",children:"Crear Grupo"})]})]})]})]})})},GO=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,s]=j.useState(""),[a,l]=j.useState(!1),c=async h=>{if(h.preventDefault(),i!==r.name){Te.error("El nombre del grupo no coincide");return}try{l(!0);const{error:p}=await et.from("groups").delete().eq("id",r.id);if(p)throw p;Te.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),Te.error("Error al eliminar el grupo")}finally{l(!1),s("")}};return d.jsx(Iu,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Ia,{className:"w-6 h-6"})})}),d.jsx(Iu.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta acción no se puede deshacer. Para confirmar, escribe el nombre del grupo:",d.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),d.jsxs("form",{onSubmit:c,children:[d.jsx("div",{className:"mb-4",children:d.jsx("input",{type:"text",value:i,onChange:h=>s(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),d.jsx(_t,{type:"submit",loading:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function Nn({className:e="",width:t="100%",height:n="1rem",rounded:r=!1,count:i=1}){const s=Array.from({length:i},(a,l)=>d.jsx("div",{className:`
        animate-pulse bg-gray-200 
        ${r?"rounded-full":"rounded"} 
        ${e}
        ${i>1&&l<i-1?"mb-2":""}
      `,style:{width:t,height:n}},l));return i===1?s[0]:d.jsx("div",{children:s})}function YO({rows:e=5}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"})]}),Array.from({length:e},(t,n)=>d.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 border-b",children:[d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Nn,{width:"3rem",height:"1rem"}),d.jsx(Nn,{width:"4rem",height:"1rem"})]})]},n))]})}function WN({count:e=3}){return d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:e},(t,n)=>d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx(Nn,{height:"1.5rem",className:"mb-4"}),d.jsx(Nn,{height:"1rem",className:"mb-2"}),d.jsx(Nn,{height:"1rem",width:"70%",className:"mb-4"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Nn,{width:"4rem",height:"1rem"}),d.jsx(Nn,{width:"3rem",height:"1rem"})]})]},n))})}function KO({count:e=3}){return d.jsx("div",{className:"space-y-4",children:Array.from({length:e},(t,n)=>d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx(Nn,{height:"1.5rem",width:"60%",className:"mb-2"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(Nn,{height:"1rem",width:"8rem"}),d.jsx(Nn,{height:"1rem",width:"6rem"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Nn,{width:"3rem",height:"2rem"}),d.jsx(Nn,{width:"3rem",height:"2rem"})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(Nn,{height:"1rem",width:"10rem"}),d.jsx(Nn,{height:"1rem",width:"8rem"})]})]},n))})}function JO({count:e=4}){return d.jsx("div",{className:"space-y-3",children:Array.from({length:e},(t,n)=>d.jsx("div",{className:"p-3 hover:bg-gray-50 border-b",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Nn,{height:"1.25rem",width:"8rem"}),d.jsx(Nn,{height:"1rem",width:"4rem"})]}),d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx(Nn,{height:"1.5rem",width:"5rem"}),d.jsx(Nn,{height:"1.5rem",width:"6rem"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Nn,{width:"3rem",height:"1.5rem"}),d.jsx(Nn,{width:"4rem",height:"1.5rem"})]})]})},n))})}function XO(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(!1),{user:a}=Zr(),l=la(),[c,h]=j.useState(!1),[p,m]=j.useState(null),[w,g]=j.useState(!1),[N,k]=j.useState("");j.useEffect(()=>{(async()=>{a&&await C()})()},[a]);const C=async()=>{if(a)try{r(!0);const{data:O,error:Y}=await et.from("users").select("role").eq("id",a.id).single();if(Y)throw Y;const se=(O==null?void 0:O.role)==="admin";if(h(se),se){const{data:K,error:J}=await et.from("groups").select("*").order("created_at",{ascending:!1});if(J)throw J;const{data:ye,error:pe}=await et.from("group_members").select("group_id").eq("user_id",a.id);if(pe)throw pe;const X=new Set((ye==null?void 0:ye.map(U=>U.group_id))||[]),F=await Promise.all((K||[]).map(async U=>{const{data:ae}=await et.from("group_members").select("id").eq("group_id",U.id).eq("role_in_group","principal"),{data:Le}=await et.from("group_members").select("id").eq("group_id",U.id).eq("role_in_group","sustituto");return{...U,userRole:X.has(U.id)?"member":"none",principal_count:(ae==null?void 0:ae.length)||0,sustituto_count:(Le==null?void 0:Le.length)||0}}));t(F);return}const{data:W,error:I}=await et.from("group_members").select("group_id").eq("user_id",a.id);if(I)throw I;const re=new Set((W==null?void 0:W.map(K=>K.group_id))||[]),{data:oe,error:R}=await et.from("groups").select("*").or(`created_by.eq.${a.id},id.in.(${Array.from(re).join(",")})`).order("created_at",{ascending:!1});if(R)throw R;const z=await Promise.all((oe||[]).map(async K=>{const{data:J}=await et.from("group_members").select("id").eq("group_id",K.id).eq("role_in_group","principal"),{data:ye}=await et.from("group_members").select("id").eq("group_id",K.id).eq("role_in_group","sustituto");return{...K,userRole:re.has(K.id)?"member":"none",principal_count:(J==null?void 0:J.length)||0,sustituto_count:(ye==null?void 0:ye.length)||0}}));t(z)}catch(O){console.error("Error fetching groups:",O),Te.error("Error al cargar los grupos"),t([])}finally{r(!1)}},_=O=>{l(`/group/${O}`)},S=(O,Y)=>{O.stopPropagation(),m(Y),g(!0)},L=()=>{const O=e.filter(I=>I.name.toLowerCase().includes(N.toLowerCase())),Y=O.filter(I=>I.created_by===(a==null?void 0:a.id)),se=O.filter(I=>I.userRole==="member"&&I.created_by!==(a==null?void 0:a.id)),W=c?O.filter(I=>I.userRole==="none"&&I.created_by!==(a==null?void 0:a.id)&&!se.some(re=>re.id===I.id)):[];return{created:Y,member:se,other:W}};return d.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),d.jsxs(_t,{onClick:()=>s(!0),className:"flex items-center space-x-2",children:[d.jsx(Ig,{className:"w-5 h-5"}),d.jsx("span",{children:"Crear Grupo"})]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:N,onChange:O=>k(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-7 w-48 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx(WN,{count:6})]}):e.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(V0,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. ¡Crea uno para empezar!"})]}):d.jsxs("div",{className:"space-y-8",children:[L().created.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().created.map(O=>d.jsx(Sv,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>_(O.id)},O.id))})]}),L().member.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().member.map(O=>d.jsx(Sv,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>_(O.id)},O.id))})]}),c&&L().other.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().other.map(O=>d.jsx(Sv,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>_(O.id)},O.id))})]})]}),d.jsx(VO,{isOpen:i,onClose:()=>s(!1),onGroupCreated:C,isAdmin:c}),p&&d.jsx(GO,{isOpen:w,onClose:()=>{g(!1),m(null)},onGroupDeleted:C,group:p})]})}const Sv=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>d.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[d.jsx(V0,{className:"w-5 h-5 text-indigo-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.principal_count}),d.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[d.jsx(V0,{className:"w-5 h-5 text-orange-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.sustituto_count}),d.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&d.jsx("button",{onClick:s=>r(s,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:d.jsx(P5,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function QO({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:s,userRole:a}){const[l,c]=j.useState(""),[h,p]=j.useState(""),[m,w]=j.useState("principal"),[g,N]=j.useState([]),[k,C]=j.useState(""),[_,S]=j.useState(!1),[L,O]=j.useState(!1),[Y,se]=j.useState([]),[W,I]=j.useState(!1),{user:re}=Zr(),oe=()=>{c(""),p(""),w("principal"),N([]),C(""),S(!1),se([])},R=async()=>{if(re)try{const{data:X,error:F}=await et.from("users").select("name, email").eq("id",re.id).single();if(F)throw F;X&&(c(X.name||""),p(X.email||""))}catch(X){console.error("Error fetching user info:",X)}},z=async()=>{var X;if(re)try{const{data:F,error:U}=await et.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",re.id);if(U)throw U;I(((X=F==null?void 0:F[0])==null?void 0:X.role_in_group)==="principal")}catch(F){console.error("Error checking principal status:",F),I(!1)}},K=async()=>{try{const{data:X,error:F}=await et.from("roles").select("*").eq("group_id",n).order("name");if(F)throw F;se(X||[])}catch(X){console.error("Error loading roles:",X),Te.error("Error al cargar los roles")}};if(j.useEffect(()=>{e&&K()},[e]),j.useEffect(()=>{e||oe()},[e]),j.useEffect(()=>{re&&(z(),a==="user"&&!W?R():(c(""),p("")))},[re,a,W]),!e||!re)return null;const J=()=>{if(!k.trim()){Te.error("Por favor ingresa un nombre para el rol");return}if(Y.some(ae=>ae.name.toLowerCase()===k.trim().toLowerCase())){Te.error("Este rol ya existe en el grupo");return}const F=`new-${Date.now()}`,U={id:F,name:k.trim(),isNew:!0,group_id:n};se([...Y,U]),N([...g,F]),C(""),S(!1),Te.success("Rol añadido y seleccionado")},ye=async X=>{if(X.preventDefault(),!l.trim()){Te.error("Por favor ingresa un nombre");return}const F=h.trim()?"registered":"local";if(g.length===0){Te.error("Por favor selecciona al menos un rol");return}O(!0);try{const U=g.filter(V=>!V.startsWith("new-")),ae=Y.filter(V=>"isNew"in V&&V.isNew&&g.includes(V.id)).map(V=>({name:V.name,group_id:n})),{data:Le,error:P}=await et.rpc("add_group_member_flexible",{p_group_id:n,p_name:l,p_email:F==="registered"?h.toLowerCase().trim():null,p_role:s?"principal":m,p_user_id:a==="user"&&!W?re.id:null,p_instruments:U,p_new_instruments:ae.map(V=>V.name),p_member_type:F});if(P)throw P;if(F==="registered"&&Le.invitation)try{const{invitation:V}=Le;if(console.log("Datos de invitación:",V),!V||!V.token)throw new Error("No se recibieron los datos de invitación correctamente");const{error:ne}=await et.functions.invoke("send-invitation-email",{body:{email:V.email,token:V.token,userExists:V.userExists,groupName:V.groupName,groupMemberId:V.groupMemberId}});if(ne)throw console.error("Error sending invitation email:",ne),new Error(`Error al enviar la invitación: ${ne.message}`);Te.success(`Miembro añadido e invitación enviada a ${h}`)}catch(V){console.error("Error sending invitation:",V),Te.error(`Error al enviar la invitación: ${V.message||"Error desconocido"}`,{icon:"⚠️",duration:5e3})}else Te.success(`${l} añadido al grupo como miembro local`);i(),t(),oe()}catch(U){console.error("Error adding member:",U),Te.error(U.message||"Error al añadir miembro")}finally{O(!1)}},pe=a==="user"&&!W;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:pe?"Unirse al Grupo":"Añadir Miembro"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:ye,className:"p-6 space-y-4",children:[d.jsx(Xn,{label:"Nombre",value:l,onChange:X=>c(X.target.value),required:!0,placeholder:"Ingresa el nombre del miembro",disabled:pe}),d.jsxs("div",{children:[d.jsx(Xn,{label:"Email (opcional)",type:"email",value:h,onChange:X=>p(X.target.value),required:!1,placeholder:"Ingresa el email para enviar invitación",disabled:pe}),d.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["💡 ",d.jsx("strong",{children:"Con email:"})," Recibirá invitación y podrá acceder a la app",d.jsx("br",{}),"🎭 ",d.jsx("strong",{children:"Sin email:"})," Solo para organización interna del grupo"]})]}),!s&&a==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:m,onChange:X=>w(X.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roles/Instrumentos"}),!_&&(a==="admin"||s||W)&&d.jsxs(_t,{type:"button",variant:"secondary",onClick:()=>S(!0),className:"text-sm py-1",children:[d.jsx(Ig,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),_&&d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsx(Xn,{label:"",value:k,onChange:X=>C(X.target.value),placeholder:"Enter instrument name",className:"flex-1"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx(_t,{type:"button",onClick:J,className:"whitespace-nowrap",children:"Add"}),d.jsx(_t,{type:"button",variant:"secondary",onClick:()=>{S(!1),C("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:Y.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Añade uno arriba."}):Y.map(X=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:g.includes(X.id),onChange:F=>{F.target.checked?N([...g,X.id]):N(g.filter(U=>U!==X.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),d.jsxs("span",{className:"flex items-center capitalize",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),X.name,"isNew"in X&&d.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},X.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(_t,{type:"submit",loading:L,children:pe?"Unirse al Grupo":"Añadir Miembro"})]})]})]})})}function ZO({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:s}){const[a,l]=j.useState(n.name),[c,h]=j.useState(n.role_in_group),[p,m]=j.useState([]),[w,g]=j.useState(!1),{user:N}=Zr();if(j.useEffect(()=>{n&&(l(n.name),h(n.role_in_group),m(n.instruments.map(_=>_.id)))},[n]),!e||!N)return null;const k=s==="admin"||n.user_id===N.id,C=async _=>{if(_.preventDefault(),!k){Te.error("You do not have permission to edit this member");return}if(!a.trim()){Te.error("Please enter a member name");return}if(p.length===0){Te.error("Please select at least one role");return}g(!0);try{const{error:S}=await et.from("group_members").update({name:a.trim(),role_in_group:c}).eq("id",n.id);if(S)throw S;const{error:L}=await et.from("group_member_roles").delete().eq("group_member_id",n.id);if(L)throw L;const{error:O}=await et.from("group_member_roles").insert(p.map(Y=>({group_member_id:n.id,role_id:Y,created_by:N.id})));if(O)throw O;Te.success("Member updated successfully!"),i(),t()}catch(S){console.error("Error updating member:",S),Te.error(S.message||"Failed to update member")}finally{g(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:w,children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[d.jsx(Xn,{label:"Name",value:a,onChange:_=>l(_.target.value),required:!0,placeholder:"Enter member name",disabled:!k}),s==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:c,onChange:_=>h(_.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!k,children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(_=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:p.includes(_.id),onChange:S=>{S.target.checked?m([...p,_.id]):m(p.filter(L=>L!==_.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:w||!k}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),_.name]})]},_.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),k&&d.jsx(_t,{type:"submit",loading:w,children:"Save Changes"})]})]})]})})}const v3=3,eR=1e3;async function qn(e,t="An error occurred"){let n=0;for(;n<v3;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===v3)return console.error(t,r),Te.error(t),null;await new Promise(i=>setTimeout(i,eR*n))}return null}function hn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function hs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Fi(e,t){const n=hn(e);return isNaN(t)?hs(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Ra(e,t){const n=hn(e);if(isNaN(t))return hs(e,NaN);if(!t)return n;const r=n.getDate(),i=hs(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const F5=6048e5,tR=864e5,HN=6e4,VN=36e5;let nR={};function Ep(){return nR}function wo(e,t){var l,c,h,p;const n=Ep(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,i=hn(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function zu(e){return wo(e,{weekStartsOn:1})}function GN(e){const t=hn(e),n=t.getFullYear(),r=hs(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=zu(r),s=hs(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=zu(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Tc(e){const t=hn(e);return t.setHours(0,0,0,0),t}function J0(e){const t=hn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function po(e,t){const n=Tc(e),r=Tc(t),i=+n-J0(n),s=+r-J0(r);return Math.round((i-s)/tR)}function rR(e){const t=GN(e),n=hs(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),zu(n)}function ly(e,t){const n=t*7;return Fi(e,n)}function iR(e,t){return Ra(e,t*12)}function sR(e){let t;return e.forEach(function(n){const r=hn(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function aR(e){let t;return e.forEach(n=>{const r=hn(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function oR(e){return hs(e,Date.now())}function _r(e,t){const n=Tc(e),r=Tc(t);return+n==+r}function $5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function lR(e){if(!$5(e)&&typeof e!="number")return!1;const t=hn(e);return!isNaN(Number(t))}function dp(e,t){const n=hn(e),r=hn(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function cR(e,t,n){const r=wo(e,n),i=wo(t,n),s=+r-J0(r),a=+i-J0(i);return Math.round((s-a)/F5)}function Wg(e){const t=hn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Ui(e){const t=hn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function YN(e){const t=hn(e),n=hs(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function B5(e,t){var l,c,h,p;const n=Ep(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,i=hn(e),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function KN(e){return B5(e,{weekStartsOn:1})}const uR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dR=(e,t,n)=>{let r;const i=uR[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function cf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const fR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mR={date:cf({formats:fR,defaultWidth:"full"}),time:cf({formats:hR,defaultWidth:"full"}),dateTime:cf({formats:pR,defaultWidth:"full"})},gR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vR=(e,t,n,r)=>gR[e];function fo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const yR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_R={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NR=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},kR={ordinalNumber:NR,era:fo({values:yR,defaultWidth:"wide"}),quarter:fo({values:wR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fo({values:xR,defaultWidth:"wide"}),day:fo({values:bR,defaultWidth:"wide"}),dayPeriod:fo({values:_R,defaultWidth:"wide",formattingValues:SR,defaultFormattingWidth:"wide"})};function ho(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ER(l,m=>m.test(a)):jR(l,m=>m.test(a));let h;h=e.valueCallback?e.valueCallback(c):c,h=n.valueCallback?n.valueCallback(h):h;const p=t.slice(a.length);return{value:h,rest:p}}}function jR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ER(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function JN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(i.length);return{value:a,rest:l}}}const CR=/^(\d+)(th|st|nd|rd)?/i,AR=/\d+/i,LR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PR={any:[/^b/i,/^(a|c)/i]},TR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},MR={any:[/1/i,/2/i,/3/i,/4/i]},DR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},RR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$R={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BR={ordinalNumber:JN({matchPattern:CR,parsePattern:AR,valueCallback:e=>parseInt(e,10)}),era:ho({matchPatterns:LR,defaultMatchWidth:"wide",parsePatterns:PR,defaultParseWidth:"any"}),quarter:ho({matchPatterns:TR,defaultMatchWidth:"wide",parsePatterns:MR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:DR,defaultMatchWidth:"wide",parsePatterns:IR,defaultParseWidth:"any"}),day:ho({matchPatterns:OR,defaultMatchWidth:"wide",parsePatterns:RR,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:FR,defaultMatchWidth:"any",parsePatterns:$R,defaultParseWidth:"any"})},XN={code:"en-US",formatDistance:dR,formatLong:mR,formatRelative:vR,localize:kR,match:BR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function UR(e){const t=hn(e);return po(t,YN(t))+1}function QN(e){const t=hn(e),n=+zu(t)-+rR(t);return Math.round(n/F5)+1}function ZN(e,t){var p,m,w,g;const n=hn(e),r=n.getFullYear(),i=Ep(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(w=i.locale)==null?void 0:w.options)==null?void 0:g.firstWeekContainsDate)??1,a=hs(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=wo(a,t),c=hs(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const h=wo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function zR(e,t){var l,c,h,p;const n=Ep(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=ZN(e,t),s=hs(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),wo(s,t)}function e6(e,t){const n=hn(e),r=+wo(n,t)-+zR(n,t);return Math.round(r/F5)+1}function Cn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ec={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Cn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Cn(n+1,2)},d(e,t){return Cn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Cn(e.getHours()%12||12,t.length)},H(e,t){return Cn(e.getHours(),t.length)},m(e,t){return Cn(e.getMinutes(),t.length)},s(e,t){return Cn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Cn(i,t.length)}},Rd={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},y3={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ec.y(e,t)},Y:function(e,t,n,r){const i=ZN(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Cn(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Cn(s,t.length)},R:function(e,t){const n=GN(e);return Cn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Cn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Cn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Cn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ec.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Cn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=e6(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Cn(i,t.length)},I:function(e,t,n){const r=QN(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Cn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ec.d(e,t)},D:function(e,t,n){const r=UR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Cn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Cn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Cn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Cn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Rd.noon:r===0?i=Rd.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Rd.evening:r>=12?i=Rd.afternoon:r>=4?i=Rd.morning:i=Rd.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ec.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ec.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ec.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ec.s(e,t)},S:function(e,t){return ec.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return x3(r);case"XXXX":case"XX":return _u(r);case"XXXXX":case"XXX":default:return _u(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return x3(r);case"xxxx":case"xx":return _u(r);case"xxxxx":case"xxx":default:return _u(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w3(r,":");case"OOOO":default:return"GMT"+_u(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w3(r,":");case"zzzz":default:return"GMT"+_u(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Cn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Cn(r,t.length)}};function w3(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Cn(s,2)}function x3(e,t){return e%60===0?(e>0?"-":"+")+Cn(Math.abs(e)/60,2):_u(e,t)}function _u(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Cn(Math.trunc(r/60),2),s=Cn(r%60,2);return n+i+t+s}const b3=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},t6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},qR=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return b3(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",b3(r,t)).replace("{{time}}",t6(i,t))},WR={p:t6,P:qR},HR=/^D+$/,VR=/^Y+$/,GR=["D","DD","YY","YYYY"];function YR(e){return HR.test(e)}function KR(e){return VR.test(e)}function JR(e,t,n){const r=XR(e,t,n);if(console.warn(r),GR.includes(e))throw new RangeError(r)}function XR(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const QR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,e9=/^'([^]*?)'?$/,t9=/''/g,n9=/[a-zA-Z]/;function Jt(e,t,n){var p,m,w,g,N,k,C,_;const r=Ep(),i=(n==null?void 0:n.locale)??r.locale??XN,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(w=r.locale)==null?void 0:w.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((k=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:k.weekStartsOn)??r.weekStartsOn??((_=(C=r.locale)==null?void 0:C.options)==null?void 0:_.weekStartsOn)??0,l=hn(e);if(!lR(l))throw new RangeError("Invalid time value");let c=t.match(ZR).map(S=>{const L=S[0];if(L==="p"||L==="P"){const O=WR[L];return O(S,i.formatLong)}return S}).join("").match(QR).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const L=S[0];if(L==="'")return{isToken:!1,value:r9(S)};if(y3[L])return{isToken:!0,value:S};if(L.match(n9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const L=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&KR(L)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&YR(L))&&JR(L,t,String(e));const O=y3[L[0]];return O(l,L,i.localize,h)}).join("")}function r9(e){const t=e.match(e9);return t?t[1].replace(t9,"'"):e}function i9(e){const t=hn(e),n=t.getFullYear(),r=t.getMonth(),i=hs(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function s9(e){return Math.trunc(+hn(e)/1e3)}function a9(e){const t=hn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function o9(e,t){return cR(a9(e),Ui(e),t)+1}function cy(e,t){const n=hn(e),r=hn(t);return n.getTime()>r.getTime()}function n6(e,t){const n=hn(e),r=hn(t);return+n<+r}function _3(e){return+hn(e)>Date.now()}function U5(e,t){const n=hn(e),r=hn(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function l9(e,t){const n=hn(e),r=hn(t);return n.getFullYear()===r.getFullYear()}function S3(e){return _r(e,oR(e))}function Nv(e,t){return Fi(e,-t)}function gu(e,t){const r=f9(e);let i;if(r.date){const c=h9(r.date,2);i=p9(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=m9(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=g9(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+a),h=new Date(0);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return new Date(s+a+l)}const Fm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f9(e){const t={},n=e.split(Fm.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Fm.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Fm.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Fm.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function h9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function p9(e,t){if(t===null)return new Date(NaN);const n=e.match(c9);if(!n)return new Date(NaN);const r=!!n[4],i=wh(n[1]),s=wh(n[2])-1,a=wh(n[3]),l=wh(n[4]),c=wh(n[5])-1;if(r)return b9(t,l,c)?v9(t,l,c):new Date(NaN);{const h=new Date(0);return!w9(t,s,a)||!x9(t,i)?new Date(NaN):(h.setUTCFullYear(t,s,Math.max(i,a)),h)}}function wh(e){return e?parseInt(e):1}function m9(e){const t=e.match(u9);if(!t)return NaN;const n=kv(t[1]),r=kv(t[2]),i=kv(t[3]);return _9(n,r,i)?n*VN+r*HN+i*1e3:NaN}function kv(e){return e&&parseFloat(e.replace(",","."))||0}function g9(e){if(e==="Z")return 0;const t=e.match(d9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return S9(r,i)?n*(r*VN+i*HN):NaN}function v9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const y9=[31,null,31,30,31,30,31,31,30,31,30,31];function r6(e){return e%400===0||e%4===0&&e%100!==0}function w9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(y9[t]||(r6(e)?29:28))}function x9(e,t){return t>=1&&t<=(r6(e)?366:365)}function b9(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function _9(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function S9(e,t){return t>=0&&t<=59}function jv(e,t){const n=hn(e),r=n.getFullYear(),i=n.getDate(),s=hs(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const a=i9(s);return n.setMonth(t,Math.min(i,a)),n}function N3(e,t){const n=hn(e);return isNaN(+n)?hs(e,NaN):(n.setFullYear(t),n)}const N9={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},k9=(e,t,n)=>{let r;const i=N9[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},j9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},E9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},C9={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},A9={date:cf({formats:j9,defaultWidth:"full"}),time:cf({formats:E9,defaultWidth:"full"}),dateTime:cf({formats:C9,defaultWidth:"full"})},L9={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},P9={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},T9=(e,t,n,r)=>t.getHours()!==1?P9[e]:L9[e],M9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},D9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},I9={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},O9={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},R9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},F9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},$9=(e,t)=>Number(e)+"º",B9={ordinalNumber:$9,era:fo({values:M9,defaultWidth:"wide"}),quarter:fo({values:D9,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:fo({values:I9,defaultWidth:"wide"}),day:fo({values:O9,defaultWidth:"wide"}),dayPeriod:fo({values:R9,defaultWidth:"wide",formattingValues:F9,defaultFormattingWidth:"wide"})},U9=/^(\d+)(º)?/i,z9=/\d+/i,q9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},W9={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},H9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},V9={any:[/1/i,/2/i,/3/i,/4/i]},G9={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Y9={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},K9={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},J9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},X9={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Q9={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Z9={ordinalNumber:JN({matchPattern:U9,parsePattern:z9,valueCallback:function(e){return parseInt(e,10)}}),era:ho({matchPatterns:q9,defaultMatchWidth:"wide",parsePatterns:W9,defaultParseWidth:"any"}),quarter:ho({matchPatterns:H9,defaultMatchWidth:"wide",parsePatterns:V9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:G9,defaultMatchWidth:"wide",parsePatterns:Y9,defaultParseWidth:"any"}),day:ho({matchPatterns:K9,defaultMatchWidth:"wide",parsePatterns:J9,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:X9,defaultMatchWidth:"any",parsePatterns:Q9,defaultParseWidth:"any"})},co={code:"es",formatDistance:k9,formatLong:A9,formatRelative:T9,localize:B9,match:Z9,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Ft=function(){return Ft=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ft.apply(this,arguments)};function eF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function i6(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Cp(e){return e.mode==="multiple"}function Ap(e){return e.mode==="range"}function Hg(e){return e.mode==="single"}var tF={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function nF(e,t){return Jt(e,"LLLL y",t)}function rF(e,t){return Jt(e,"d",t)}function iF(e,t){return Jt(e,"LLLL",t)}function sF(e){return"".concat(e)}function aF(e,t){return Jt(e,"cccccc",t)}function oF(e,t){return Jt(e,"yyyy",t)}var lF=Object.freeze({__proto__:null,formatCaption:nF,formatDay:rF,formatMonthCaption:iF,formatWeekNumber:sF,formatWeekdayName:aF,formatYearCaption:oF}),cF=function(e,t,n){return Jt(e,"do MMMM (EEEE)",n)},uF=function(){return"Month: "},dF=function(){return"Go to next month"},fF=function(){return"Go to previous month"},hF=function(e,t){return Jt(e,"cccc",t)},pF=function(e){return"Week n. ".concat(e)},mF=function(){return"Year: "},gF=Object.freeze({__proto__:null,labelDay:cF,labelMonthDropdown:uF,labelNext:dF,labelPrevious:fF,labelWeekNumber:pF,labelWeekday:hF,labelYearDropdown:mF});function vF(){var e="buttons",t=tF,n=XN,r={},i={},s=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:lF,labels:gF,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:l,mode:"default"}}function yF(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,s=e.fromDate,a=e.toDate;return r?s=Ui(r):t&&(s=new Date(t,0,1)),i?a=Wg(i):n&&(a=new Date(n,11,31)),{fromDate:s?Tc(s):void 0,toDate:a?Tc(a):void 0}}var s6=j.createContext(void 0);function wF(e){var t,n=e.initialProps,r=vF(),i=yF(n),s=i.fromDate,a=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!a)&&(l="buttons");var c;(Hg(n)||Cp(n)||Ap(n))&&(c=n.onSelect);var h=Ft(Ft(Ft({},r),n),{captionLayout:l,classNames:Ft(Ft({},r.classNames),n.classNames),components:Ft({},n.components),formatters:Ft(Ft({},r.formatters),n.formatters),fromDate:s,labels:Ft(Ft({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ft(Ft({},r.modifiers),n.modifiers),modifiersClassNames:Ft(Ft({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Ft(Ft({},r.styles),n.styles),toDate:a});return d.jsx(s6.Provider,{value:h,children:e.children})}function Vn(){var e=j.useContext(s6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function a6(e){var t=Vn(),n=t.locale,r=t.classNames,i=t.styles,s=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function xF(e){return d.jsx("svg",Ft({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function o6(e){var t,n,r=e.onChange,i=e.value,s=e.children,a=e.caption,l=e.className,c=e.style,h=Vn(),p=(n=(t=h.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:xF;return d.jsxs("div",{className:l,style:c,children:[d.jsx("span",{className:h.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:i,onChange:r,children:s}),d.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[a,d.jsx(p,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function bF(e){var t,n=Vn(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,h=n.components,p=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});var m=[];if(l9(r,i))for(var w=Ui(r),g=r.getMonth();g<=i.getMonth();g++)m.push(jv(w,g));else for(var w=Ui(new Date),g=0;g<=11;g++)m.push(jv(w,g));var N=function(C){var _=Number(C.target.value),S=jv(Ui(e.displayMonth),_);e.onChange(S)},k=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:o6;return d.jsx(k,{name:"months","aria-label":p(),className:c.dropdown_month,style:s.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(C){return d.jsx("option",{value:C.getMonth(),children:l(C,{locale:a})},C.getMonth())})})}function _F(e){var t,n=e.displayMonth,r=Vn(),i=r.fromDate,s=r.toDate,a=r.locale,l=r.styles,c=r.classNames,h=r.components,p=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,w=[];if(!i)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});for(var g=i.getFullYear(),N=s.getFullYear(),k=g;k<=N;k++)w.push(N3(YN(new Date),k));var C=function(S){var L=N3(Ui(n),Number(S.target.value));e.onChange(L)},_=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:o6;return d.jsx(_,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:C,value:n.getFullYear(),caption:p(n,{locale:a}),children:w.map(function(S){return d.jsx("option",{value:S.getFullYear(),children:p(S,{locale:a})},S.getFullYear())})})}function SF(e,t){var n=j.useState(e),r=n[0],i=n[1],s=t===void 0?r:t;return[s,i]}function NF(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,s=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&dp(s,i)<0){var h=-1*(c-1);i=Ra(s,h)}return a&&dp(i,a)<0&&(i=a),Ui(i)}function kF(){var e=Vn(),t=NF(e),n=SF(t,e.month),r=n[0],i=n[1],s=function(a){var l;if(!e.disableNavigation){var c=Ui(a);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function jF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=Ui(e),s=Ui(Ra(i,r)),a=dp(s,i),l=[],c=0;c<a;c++){var h=Ra(i,c);l.push(h)}return n&&(l=l.reverse()),l}function EF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=Ui(e);if(!n)return Ra(l,a);var c=dp(n,e);if(!(c<s))return Ra(l,a)}}function CF(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=Ui(e);if(!n)return Ra(l,-a);var c=dp(l,n);if(!(c<=0))return Ra(l,-a)}}var l6=j.createContext(void 0);function AF(e){var t=Vn(),n=kF(),r=n[0],i=n[1],s=jF(r,t),a=EF(r,t),l=CF(r,t),c=function(m){return s.some(function(w){return U5(m,w)})},h=function(m,w){c(m)||(w&&n6(m,w)?i(Ra(m,1+t.numberOfMonths*-1)):i(m))},p={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:h,previousMonth:l,nextMonth:a,isDateDisplayed:c};return d.jsx(l6.Provider,{value:p,children:e.children})}function Lp(){var e=j.useContext(l6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function k3(e){var t,n=Vn(),r=n.classNames,i=n.styles,s=n.components,a=Lp().goToMonth,l=function(p){a(Ra(p,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:a6,h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:h}),d.jsx(bF,{onChange:l,displayMonth:e.displayMonth}),d.jsx(_F,{onChange:l,displayMonth:e.displayMonth})]})}function LF(e){return d.jsx("svg",Ft({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function PF(e){return d.jsx("svg",Ft({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var X0=j.forwardRef(function(e,t){var n=Vn(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var a=s.join(" "),l=Ft(Ft({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),d.jsx("button",Ft({},e,{ref:t,type:"button",className:a,style:l}))});function TF(e){var t,n,r=Vn(),i=r.dir,s=r.locale,a=r.classNames,l=r.styles,c=r.labels,h=c.labelPrevious,p=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var w=h(e.previousMonth,{locale:s}),g=[a.nav_button,a.nav_button_previous].join(" "),N=p(e.nextMonth,{locale:s}),k=[a.nav_button,a.nav_button_next].join(" "),C=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:PF,_=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:LF;return d.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&d.jsx(X0,{name:"previous-month","aria-label":w,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?d.jsx(C,{className:a.nav_icon,style:l.nav_icon}):d.jsx(_,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&d.jsx(X0,{name:"next-month","aria-label":N,className:k,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?d.jsx(_,{className:a.nav_icon,style:l.nav_icon}):d.jsx(C,{className:a.nav_icon,style:l.nav_icon})})]})}function j3(e){var t=Vn().numberOfMonths,n=Lp(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(N){return U5(e.displayMonth,N)}),c=l===0,h=l===a.length-1,p=t>1&&(c||!h),m=t>1&&(h||!c),w=function(){r&&s(r)},g=function(){i&&s(i)};return d.jsx(TF,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:w,onNextClick:g})}function MF(e){var t,n=Vn(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:a6,h;return i?h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?h=d.jsx(k3,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?h=d.jsxs(d.Fragment,{children:[d.jsx(k3,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(j3,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):h=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(j3,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:s.caption,children:h})}function DF(e){var t=Vn(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?d.jsx("tfoot",{className:i,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function IF(e,t,n){for(var r=n?zu(new Date):wo(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var a=Fi(r,s);i.push(a)}return i}function OF(){var e=Vn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,h=IF(i,s,a);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),h.map(function(p,m){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:l(p,{locale:i})},m)})]})}function RF(){var e,t=Vn(),n=t.classNames,r=t.styles,i=t.components,s=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:OF;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(s,{})})}function FF(e){var t=Vn(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var z5=j.createContext(void 0);function $F(e){if(!Cp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx(z5.Provider,{value:t,children:e.children})}return d.jsx(BF,{initialProps:e.initialProps,children:e.children})}function BF(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,s=t.max,a=function(h,p,m){var w,g;(w=t.onDayClick)===null||w===void 0||w.call(t,h,p,m);var N=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var k=!!(!p.selected&&s&&(r==null?void 0:r.length)===s);if(!k){var C=r?i6([],r):[];if(p.selected){var _=C.findIndex(function(S){return _r(h,S)});C.splice(_,1)}else C.push(h);(g=t.onSelect)===null||g===void 0||g.call(t,C,h,p,m)}}},l={disabled:[]};r&&l.disabled.push(function(h){var p=s&&r.length>s-1,m=r.some(function(w){return _r(w,h)});return!!(p&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return d.jsx(z5.Provider,{value:c,children:n})}function q5(){var e=j.useContext(z5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function UF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?_r(i,e)&&_r(r,e)?void 0:_r(i,e)?{from:i,to:void 0}:_r(r,e)?void 0:cy(r,e)?{from:e,to:i}:{from:r,to:e}:i?cy(e,i)?{from:i,to:e}:{from:e,to:i}:r?n6(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var W5=j.createContext(void 0);function zF(e){if(!Ap(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(W5.Provider,{value:t,children:e.children})}return d.jsx(qF,{initialProps:e.initialProps,children:e.children})}function qF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},s=i.from,a=i.to,l=t.min,c=t.max,h=function(g,N,k){var C,_;(C=t.onDayClick)===null||C===void 0||C.call(t,g,N,k);var S=UF(g,r);(_=t.onSelect)===null||_===void 0||_.call(t,S,g,N,k)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(p.range_start=[s],a?(p.range_end=[a],_r(s,a)||(p.range_middle=[{after:s,before:a}])):p.range_end=[s]):a&&(p.range_start=[a],p.range_end=[a]),l&&(s&&!a&&p.disabled.push({after:Nv(s,l-1),before:Fi(s,l-1)}),s&&a&&p.disabled.push({after:s,before:Fi(s,l-1)}),!s&&a&&p.disabled.push({after:Nv(a,l-1),before:Fi(a,l-1)})),c){if(s&&!a&&(p.disabled.push({before:Fi(s,-c+1)}),p.disabled.push({after:Fi(s,c-1)})),s&&a){var m=po(a,s)+1,w=c-m;p.disabled.push({before:Nv(s,w)}),p.disabled.push({after:Fi(a,w)})}!s&&a&&(p.disabled.push({before:Fi(a,-c+1)}),p.disabled.push({after:Fi(a,c-1)}))}return d.jsx(W5.Provider,{value:{selected:r,onDayClick:h,modifiers:p},children:n})}function H5(){var e=j.useContext(W5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function l0(e){return Array.isArray(e)?i6([],e):e!==void 0?[e]:[]}function WF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=l0(i)}),t}var Fa;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Fa||(Fa={}));var HF=Fa.Selected,Vo=Fa.Disabled,VF=Fa.Hidden,GF=Fa.Today,Ev=Fa.RangeEnd,Cv=Fa.RangeMiddle,Av=Fa.RangeStart,YF=Fa.Outside;function KF(e,t,n){var r,i=(r={},r[HF]=l0(e.selected),r[Vo]=l0(e.disabled),r[VF]=l0(e.hidden),r[GF]=[e.today],r[Ev]=[],r[Cv]=[],r[Av]=[],r[YF]=[],r);return e.fromDate&&i[Vo].push({before:e.fromDate}),e.toDate&&i[Vo].push({after:e.toDate}),Cp(e)?i[Vo]=i[Vo].concat(t.modifiers[Vo]):Ap(e)&&(i[Vo]=i[Vo].concat(n.modifiers[Vo]),i[Av]=n.modifiers[Av],i[Cv]=n.modifiers[Cv],i[Ev]=n.modifiers[Ev]),i}var c6=j.createContext(void 0);function JF(e){var t=Vn(),n=q5(),r=H5(),i=KF(t,n,r),s=WF(t.modifiers),a=Ft(Ft({},i),s);return d.jsx(c6.Provider,{value:a,children:e.children})}function u6(){var e=j.useContext(c6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function XF(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function QF(e){return!!(e&&typeof e=="object"&&"from"in e)}function ZF(e){return!!(e&&typeof e=="object"&&"after"in e)}function e$(e){return!!(e&&typeof e=="object"&&"before"in e)}function t$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function n$(e,t){var n,r=t.from,i=t.to;if(r&&i){var s=po(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=po(e,r)>=0&&po(i,e)>=0;return a}return i?_r(i,e):r?_r(r,e):!1}function r$(e){return $5(e)}function i$(e){return Array.isArray(e)&&e.every($5)}function s$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(r$(n))return _r(e,n);if(i$(n))return n.includes(e);if(QF(n))return n$(e,n);if(t$(n))return n.dayOfWeek.includes(e.getDay());if(XF(n)){var r=po(n.before,e),i=po(n.after,e),s=r>0,a=i<0,l=cy(n.before,n.after);return l?a&&s:s||a}return ZF(n)?po(e,n.after)>0:e$(n)?po(n.before,e)>0:typeof n=="function"?n(e):!1})}function V5(e,t,n){var r=Object.keys(t).reduce(function(s,a){var l=t[a];return s$(e,l)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!U5(e,n)&&(i.outside=!0),i}function a$(e,t){for(var n=Ui(e[0]),r=Wg(e[e.length-1]),i,s,a=n;a<=r;){var l=V5(a,t),c=!l.disabled&&!l.hidden;if(!c){a=Fi(a,1);continue}if(l.selected)return a;l.today&&!s&&(s=a),i||(i=a),a=Fi(a,1)}return s||i}var o$=365;function d6(e,t){var n=t.moveBy,r=t.direction,i=t.context,s=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=i.weekStartsOn,h=i.fromDate,p=i.toDate,m=i.locale,w={day:Fi,week:ly,month:Ra,year:iR,startOfWeek:function(C){return i.ISOWeek?zu(C):wo(C,{locale:m,weekStartsOn:c})},endOfWeek:function(C){return i.ISOWeek?KN(C):B5(C,{locale:m,weekStartsOn:c})}},g=w[n](e,r==="after"?1:-1);r==="before"&&h?g=sR([h,g]):r==="after"&&p&&(g=aR([p,g]));var N=!0;if(s){var k=V5(g,s);N=!k.disabled&&!k.hidden}return N?g:l.count>o$?l.lastFocused:d6(g,{moveBy:n,direction:r,context:i,modifiers:s,retry:Ft(Ft({},l),{count:l.count+1})})}var f6=j.createContext(void 0);function l$(e){var t=Lp(),n=u6(),r=j.useState(),i=r[0],s=r[1],a=j.useState(),l=a[0],c=a[1],h=a$(t.displayMonths,n),p=i??(l&&t.isDateDisplayed(l))?l:h,m=function(){c(i),s(void 0)},w=function(C){s(C)},g=Vn(),N=function(C,_){if(i){var S=d6(i,{moveBy:C,direction:_,context:g,modifiers:n});_r(i,S)||(t.goToDate(S,i),w(S))}},k={focusedDay:i,focusTarget:p,blur:m,focus:w,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return d.jsx(f6.Provider,{value:k,children:e.children})}function G5(){var e=j.useContext(f6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function c$(e,t){var n=u6(),r=V5(e,n,t);return r}var Y5=j.createContext(void 0);function u$(e){if(!Hg(e.initialProps)){var t={selected:void 0};return d.jsx(Y5.Provider,{value:t,children:e.children})}return d.jsx(d$,{initialProps:e.initialProps,children:e.children})}function d$(e){var t=e.initialProps,n=e.children,r=function(s,a,l){var c,h,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,a,l),a.selected&&!t.required){(h=t.onSelect)===null||h===void 0||h.call(t,void 0,s,a,l);return}(p=t.onSelect)===null||p===void 0||p.call(t,s,s,a,l)},i={selected:t.selected,onDayClick:r};return d.jsx(Y5.Provider,{value:i,children:n})}function h6(){var e=j.useContext(Y5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function f$(e,t){var n=Vn(),r=h6(),i=q5(),s=H5(),a=G5(),l=a.focusDayAfter,c=a.focusDayBefore,h=a.focusWeekAfter,p=a.focusWeekBefore,m=a.blur,w=a.focus,g=a.focusMonthBefore,N=a.focusMonthAfter,k=a.focusYearBefore,C=a.focusYearAfter,_=a.focusStartOfWeek,S=a.focusEndOfWeek,L=function(X){var F,U,ae,Le;Hg(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,X):Cp(n)?(U=i.onDayClick)===null||U===void 0||U.call(i,e,t,X):Ap(n)?(ae=s.onDayClick)===null||ae===void 0||ae.call(s,e,t,X):(Le=n.onDayClick)===null||Le===void 0||Le.call(n,e,t,X)},O=function(X){var F;w(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,X)},Y=function(X){var F;m(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,X)},se=function(X){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,X)},W=function(X){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,X)},I=function(X){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,X)},re=function(X){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,X)},oe=function(X){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,X)},R=function(X){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,X)},z=function(X){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,X)},K=function(X){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,X)},J=function(X){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,X)},ye=function(X){var F;switch(X.key){case"ArrowLeft":X.preventDefault(),X.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":X.preventDefault(),X.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":X.preventDefault(),X.stopPropagation(),h();break;case"ArrowUp":X.preventDefault(),X.stopPropagation(),p();break;case"PageUp":X.preventDefault(),X.stopPropagation(),X.shiftKey?k():g();break;case"PageDown":X.preventDefault(),X.stopPropagation(),X.shiftKey?C():N();break;case"Home":X.preventDefault(),X.stopPropagation(),_();break;case"End":X.preventDefault(),X.stopPropagation(),S();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,X)},pe={onClick:L,onFocus:O,onBlur:Y,onKeyDown:ye,onKeyUp:J,onMouseEnter:se,onMouseLeave:W,onPointerEnter:I,onPointerLeave:re,onTouchCancel:oe,onTouchEnd:R,onTouchMove:z,onTouchStart:K};return pe}function h$(){var e=Vn(),t=h6(),n=q5(),r=H5(),i=Hg(e)?t.selected:Cp(e)?n.selected:Ap(e)?r.selected:void 0;return i}function p$(e){return Object.values(Fa).includes(e)}function m$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(p$(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function g$(e,t){var n=Ft({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Ft(Ft({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function v$(e,t,n){var r,i,s,a=Vn(),l=G5(),c=c$(e,t),h=f$(e,c),p=h$(),m=!!(a.onDayClick||a.mode!=="default");j.useEffect(function(){var se;c.outside||l.focusedDay&&m&&_r(l.focusedDay,e)&&((se=n.current)===null||se===void 0||se.focus())},[l.focusedDay,e,n,m,c.outside]);var w=m$(a,c).join(" "),g=g$(a,c),N=!!(c.outside&&!a.showOutsideDays||c.hidden),k=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:FF,C=d.jsx(k,{date:e,displayMonth:t,activeModifiers:c}),_={style:g,className:w,children:C,role:"gridcell"},S=l.focusTarget&&_r(l.focusTarget,e)&&!c.outside,L=l.focusedDay&&_r(l.focusedDay,e),O=Ft(Ft(Ft({},_),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=L||S?0:-1,r)),h),Y={isButton:m,isHidden:N,activeModifiers:c,selectedDays:p,buttonProps:O,divProps:_};return Y}function y$(e){var t=j.useRef(null),n=v$(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(X0,Ft({name:"day",ref:t},n.buttonProps)):d.jsx("div",Ft({},n.divProps))}function w$(e){var t=e.number,n=e.dates,r=Vn(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,p=h(Number(t),{locale:l});if(!i)return d.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:p});var m=c(Number(t),{locale:l}),w=function(g){i(t,n,g)};return d.jsx(X0,{name:"week-number","aria-label":m,className:a.weeknumber,style:s.weeknumber,onClick:w,children:p})}function x$(e){var t,n,r=Vn(),i=r.styles,s=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:y$,h=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:w$,p;return a&&(p=d.jsx("td",{className:s.cell,style:i.cell,children:d.jsx(h,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:s.row,style:i.row,children:[p,e.dates.map(function(m){return d.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:m})},s9(m))})]})}function E3(e,t,n){for(var r=n!=null&&n.ISOWeek?KN(t):B5(t,n),i=n!=null&&n.ISOWeek?zu(e):wo(e,n),s=po(r,i),a=[],l=0;l<=s;l++)a.push(Fi(i,l));var c=a.reduce(function(h,p){var m=n!=null&&n.ISOWeek?QN(p):e6(p,n),w=h.find(function(g){return g.weekNumber===m});return w?(w.dates.push(p),h):(h.push({weekNumber:m,dates:[p]}),h)},[]);return c}function b$(e,t){var n=E3(Ui(e),Wg(e),t);if(t!=null&&t.useFixedWeeks){var r=o9(e,t);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=ly(s,6-r),l=E3(ly(s,1),a,t);n.push.apply(n,l)}}return n}function _$(e){var t,n,r,i=Vn(),s=i.locale,a=i.classNames,l=i.styles,c=i.hideHead,h=i.fixedWeeks,p=i.components,m=i.weekStartsOn,w=i.firstWeekContainsDate,g=i.ISOWeek,N=b$(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:g,locale:s,weekStartsOn:m,firstWeekContainsDate:w}),k=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:RF,C=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:x$,_=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:DF;return d.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(k,{}),d.jsx("tbody",{className:a.tbody,style:l.tbody,children:N.map(function(S){return d.jsx(C,{displayMonth:e.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),d.jsx(_,{displayMonth:e.displayMonth})]})}function S$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var N$=S$()?j.useLayoutEffect:j.useEffect,Lv=!1,k$=0;function C3(){return"react-day-picker-".concat(++k$)}function j$(e){var t,n=e??(Lv?C3():null),r=j.useState(n),i=r[0],s=r[1];return N$(function(){i===null&&s(C3())},[]),j.useEffect(function(){Lv===!1&&(Lv=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function E$(e){var t,n,r=Vn(),i=r.dir,s=r.classNames,a=r.styles,l=r.components,c=Lp().displayMonths,h=j$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[s.month],w=a.month,g=e.displayIndex===0,N=e.displayIndex===c.length-1,k=!g&&!N;i==="rtl"&&(t=[g,N],N=t[0],g=t[1]),g&&(m.push(s.caption_start),w=Ft(Ft({},w),a.caption_start)),N&&(m.push(s.caption_end),w=Ft(Ft({},w),a.caption_end)),k&&(m.push(s.caption_between),w=Ft(Ft({},w),a.caption_between));var C=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:MF;return d.jsxs("div",{className:m.join(" "),style:w,children:[d.jsx(C,{id:h,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(_$,{id:p,"aria-labelledby":h,displayMonth:e.displayMonth})]},e.displayIndex)}function C$(e){var t=Vn(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function A$(e){var t,n,r=e.initialProps,i=Vn(),s=G5(),a=Lp(),l=j.useState(!1),c=l[0],h=l[1];j.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),h(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var m=Ft(Ft({},i.styles.root),i.style),w=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,k){var C;return Ft(Ft({},N),(C={},C[k]=r[k],C))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:C$;return d.jsx("div",Ft({className:p.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},w,{children:d.jsx(g,{children:a.displayMonths.map(function(N,k){return d.jsx(E$,{displayIndex:k,displayMonth:N},k)})})}))}function L$(e){var t=e.children,n=eF(e,["children"]);return d.jsx(wF,{initialProps:n,children:d.jsx(AF,{children:d.jsx(u$,{initialProps:n,children:d.jsx($F,{initialProps:n,children:d.jsx(zF,{initialProps:n,children:d.jsx(JF,{children:d.jsx(l$,{children:t})})})})})})})}function P$(e){return d.jsx(L$,Ft({},e,{children:d.jsx(A$,{initialProps:e})}))}function An(e){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}var ji=Uint8Array,Ds=Uint16Array,K5=Int32Array,Vg=new ji([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gg=new ji([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uy=new ji([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p6=function(e,t){for(var n=new Ds(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new K5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},m6=p6(Vg,2),g6=m6.b,dy=m6.r;g6[28]=258,dy[258]=28;var v6=p6(Gg,0),T$=v6.b,A3=v6.r,fy=new Ds(32768);for(var Kn=0;Kn<32768;++Kn){var tc=(Kn&43690)>>1|(Kn&21845)<<1;tc=(tc&52428)>>2|(tc&13107)<<2,tc=(tc&61680)>>4|(tc&3855)<<4,fy[Kn]=((tc&65280)>>8|(tc&255)<<8)>>1}var yo=function(e,t,n){for(var r=e.length,i=0,s=new Ds(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new Ds(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Ds(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var h=i<<4|e[i],p=t-e[i],m=a[e[i]-1]++<<p,w=m|(1<<p)-1;m<=w;++m)l[fy[m]>>c]=h}else for(l=new Ds(r),i=0;i<r;++i)e[i]&&(l[i]=fy[a[e[i]-1]++]>>15-e[i]);return l},Mc=new ji(288);for(var Kn=0;Kn<144;++Kn)Mc[Kn]=8;for(var Kn=144;Kn<256;++Kn)Mc[Kn]=9;for(var Kn=256;Kn<280;++Kn)Mc[Kn]=7;for(var Kn=280;Kn<288;++Kn)Mc[Kn]=8;var fp=new ji(32);for(var Kn=0;Kn<32;++Kn)fp[Kn]=5;var M$=yo(Mc,9,0),D$=yo(Mc,9,1),I$=yo(fp,5,0),O$=yo(fp,5,1),Pv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Na=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Tv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},J5=function(e){return(e+7)/8|0},y6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new ji(e.subarray(t,n))},R$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ca=function(e,t,n){var r=new Error(t||R$[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ca),!n)throw r;return r},F$=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new ji(0);var a=!n,l=a||t.i!=2,c=t.i;a&&(n=new ji(i*3));var h=function(_e){var Re=n.length;if(_e>Re){var Be=new ji(Math.max(Re*2,_e));Be.set(n),n=Be}},p=t.f||0,m=t.p||0,w=t.b||0,g=t.l,N=t.d,k=t.m,C=t.n,_=i*8;do{if(!g){p=Na(e,m,1);var S=Na(e,m+1,3);if(m+=3,S)if(S==1)g=D$,N=O$,k=9,C=5;else if(S==2){var se=Na(e,m,31)+257,W=Na(e,m+10,15)+4,I=se+Na(e,m+5,31)+1;m+=14;for(var re=new ji(I),oe=new ji(19),R=0;R<W;++R)oe[uy[R]]=Na(e,m+R*3,7);m+=W*3;for(var z=Pv(oe),K=(1<<z)-1,J=yo(oe,z,1),R=0;R<I;){var ye=J[Na(e,m,K)];m+=ye&15;var L=ye>>4;if(L<16)re[R++]=L;else{var pe=0,X=0;for(L==16?(X=3+Na(e,m,3),m+=2,pe=re[R-1]):L==17?(X=3+Na(e,m,7),m+=3):L==18&&(X=11+Na(e,m,127),m+=7);X--;)re[R++]=pe}}var F=re.subarray(0,se),U=re.subarray(se);k=Pv(F),C=Pv(U),g=yo(F,k,1),N=yo(U,C,1)}else Ca(1);else{var L=J5(m)+4,O=e[L-4]|e[L-3]<<8,Y=L+O;if(Y>i){c&&Ca(0);break}l&&h(w+O),n.set(e.subarray(L,Y),w),t.b=w+=O,t.p=m=Y*8,t.f=p;continue}if(m>_){c&&Ca(0);break}}l&&h(w+131072);for(var ae=(1<<k)-1,Le=(1<<C)-1,P=m;;P=m){var pe=g[Tv(e,m)&ae],V=pe>>4;if(m+=pe&15,m>_){c&&Ca(0);break}if(pe||Ca(2),V<256)n[w++]=V;else if(V==256){P=m,g=null;break}else{var ne=V-254;if(V>264){var R=V-257,le=Vg[R];ne=Na(e,m,(1<<le)-1)+g6[R],m+=le}var de=N[Tv(e,m)&Le],Ae=de>>4;de||Ca(3),m+=de&15;var U=T$[Ae];if(Ae>3){var le=Gg[Ae];U+=Tv(e,m)&(1<<le)-1,m+=le}if(m>_){c&&Ca(0);break}l&&h(w+131072);var Ee=w+ne;if(w<U){var Z=s-U,je=Math.min(U,Ee);for(Z+w<0&&Ca(3);w<je;++w)n[w]=r[Z+w]}for(;w<Ee;++w)n[w]=n[w-U]}}t.l=g,t.p=P,t.b=w,t.f=p,g&&(p=1,t.m=k,t.d=N,t.n=C)}while(!p);return w!=n.length&&a?y6(n,0,w):n.subarray(0,w)},Go=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},xh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Mv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:x6,l:0};if(i==1){var a=new ji(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(Y,se){return Y.f-se.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],h=0,p=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=n[n[h].f<n[m].f?h++:m++],c=n[h!=p&&n[h].f<n[m].f?h++:m++],n[p++]={s:-1,f:l.f+c.f,l,r:c};for(var w=s[0].s,r=1;r<i;++r)s[r].s>w&&(w=s[r].s);var g=new Ds(w+1),N=hy(n[p-1],g,0);if(N>t){var r=0,k=0,C=N-t,_=1<<C;for(s.sort(function(se,W){return g[W.s]-g[se.s]||se.f-W.f});r<i;++r){var S=s[r].s;if(g[S]>t)k+=_-(1<<N-g[S]),g[S]=t;else break}for(k>>=C;k>0;){var L=s[r].s;g[L]<t?k-=1<<t-g[L]++-1:++r}for(;r>=0&&k;--r){var O=s[r].s;g[O]==t&&(--g[O],++k)}N=t}return{t:new ji(g),l:N}},hy=function(e,t,n){return e.s==-1?Math.max(hy(e.l,t,n+1),hy(e.r,t,n+1)):t[e.s]=n},L3=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ds(++t),r=0,i=e[0],s=1,a=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:n.subarray(0,r),n:t}},bh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},w6=function(e,t,n){var r=n.length,i=J5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},P3=function(e,t,n,r,i,s,a,l,c,h,p){Go(t,p++,n),++i[256];for(var m=Mv(i,15),w=m.t,g=m.l,N=Mv(s,15),k=N.t,C=N.l,_=L3(w),S=_.c,L=_.n,O=L3(k),Y=O.c,se=O.n,W=new Ds(19),I=0;I<S.length;++I)++W[S[I]&31];for(var I=0;I<Y.length;++I)++W[Y[I]&31];for(var re=Mv(W,7),oe=re.t,R=re.l,z=19;z>4&&!oe[uy[z-1]];--z);var K=h+5<<3,J=bh(i,Mc)+bh(s,fp)+a,ye=bh(i,w)+bh(s,k)+a+14+3*z+bh(W,oe)+2*W[16]+3*W[17]+7*W[18];if(c>=0&&K<=J&&K<=ye)return w6(t,p,e.subarray(c,c+h));var pe,X,F,U;if(Go(t,p,1+(ye<J)),p+=2,ye<J){pe=yo(w,g,0),X=w,F=yo(k,C,0),U=k;var ae=yo(oe,R,0);Go(t,p,L-257),Go(t,p+5,se-1),Go(t,p+10,z-4),p+=14;for(var I=0;I<z;++I)Go(t,p+3*I,oe[uy[I]]);p+=3*z;for(var Le=[S,Y],P=0;P<2;++P)for(var V=Le[P],I=0;I<V.length;++I){var ne=V[I]&31;Go(t,p,ae[ne]),p+=oe[ne],ne>15&&(Go(t,p,V[I]>>5&127),p+=V[I]>>12)}}else pe=M$,X=Mc,F=I$,U=fp;for(var I=0;I<l;++I){var le=r[I];if(le>255){var ne=le>>18&31;xh(t,p,pe[ne+257]),p+=X[ne+257],ne>7&&(Go(t,p,le>>23&31),p+=Vg[ne]);var de=le&31;xh(t,p,F[de]),p+=U[de],de>3&&(xh(t,p,le>>5&8191),p+=Gg[de])}else xh(t,p,pe[le]),p+=X[le]}return xh(t,p,pe[256]),p+X[256]},$$=new K5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x6=new ji(0),B$=function(e,t,n,r,i,s){var a=s.z||e.length,l=new ji(r+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(r,l.length-i),h=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=$$[t-1],w=m>>13,g=m&8191,N=(1<<n)-1,k=s.p||new Ds(32768),C=s.h||new Ds(N+1),_=Math.ceil(n/3),S=2*_,L=function(We){return(e[We]^e[We+1]<<_^e[We+2]<<S)&N},O=new K5(25e3),Y=new Ds(288),se=new Ds(32),W=0,I=0,re=s.i||0,oe=0,R=s.w||0,z=0;re+2<a;++re){var K=L(re),J=re&32767,ye=C[K];if(k[J]=ye,C[K]=J,R<=re){var pe=a-re;if((W>7e3||oe>24576)&&(pe>423||!h)){p=P3(e,c,0,O,Y,se,I,oe,z,re-z,p),oe=W=I=0,z=re;for(var X=0;X<286;++X)Y[X]=0;for(var X=0;X<30;++X)se[X]=0}var F=2,U=0,ae=g,Le=J-ye&32767;if(pe>2&&K==L(re-Le))for(var P=Math.min(w,pe)-1,V=Math.min(32767,re),ne=Math.min(258,pe);Le<=V&&--ae&&J!=ye;){if(e[re+F]==e[re+F-Le]){for(var le=0;le<ne&&e[re+le]==e[re+le-Le];++le);if(le>F){if(F=le,U=Le,le>P)break;for(var de=Math.min(Le,le-2),Ae=0,X=0;X<de;++X){var Ee=re-Le+X&32767,Z=k[Ee],je=Ee-Z&32767;je>Ae&&(Ae=je,ye=Ee)}}}J=ye,ye=k[J],Le+=J-ye&32767}if(U){O[oe++]=268435456|dy[F]<<18|A3[U];var _e=dy[F]&31,Re=A3[U]&31;I+=Vg[_e]+Gg[Re],++Y[257+_e],++se[Re],R=re+F,++W}else O[oe++]=e[re],++Y[e[re]]}}for(re=Math.max(re,R);re<a;++re)O[oe++]=e[re],++Y[e[re]];p=P3(e,c,h,O,Y,se,I,oe,z,re-z,p),h||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=C,s.p=k,s.i=re,s.w=R)}else{for(var re=s.w||0;re<a+h;re+=65535){var Be=re+65535;Be>=a&&(c[p/8|0]=h,Be=a),p=w6(c,p+1,e.subarray(re,Be))}s.i=a}return y6(l,0,r+J5(p)+i)},b6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},U$=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new ji(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return B$(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},_6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},z$=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=b6();i.p(t.dictionary),_6(e,2,i.d())}},q$=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ca(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Ca(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function py(e,t){t||(t={});var n=b6();n.p(e);var r=U$(e,t,t.dictionary?6:2,4);return z$(r,t),_6(r,r.length-4,n.d()),r}function W$(e,t){return F$(e.subarray(q$(e,t),-4),{i:2},t,t)}var H$=typeof TextDecoder<"u"&&new TextDecoder,V$=0;try{H$.decode(x6,{stream:!0}),V$=1}catch{}var It=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Dv(){It.console&&typeof It.console.log=="function"&&It.console.log.apply(It.console,arguments)}var Fn={log:Dv,warn:function(e){It.console&&(typeof It.console.warn=="function"?It.console.warn.apply(It.console,arguments):Dv.call(null,arguments))},error:function(e){It.console&&(typeof It.console.error=="function"?It.console.error.apply(It.console,arguments):Dv(e))}};function Iv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Su(r.response,t,n)},r.onerror=function(){Fn.error("could not download file")},r.send()}function T3(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function $m(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Uh,my,Su=It.saveAs||((typeof window>"u"?"undefined":An(window))!=="object"||window!==It?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=It.URL||It.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?T3(i.href)?Iv(e,t,n):$m(i,i.target="_blank"):$m(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){$m(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(T3(e))Iv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){$m(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:An(s)!=="object"&&(Fn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Iv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(It.HTMLElement)||It.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":An(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(e)}else{var c=It.URL||It.webkitURL,h=c.createObjectURL(e);r?r.location=h:location.href=h,r=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function S6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+l+c+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ov(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=bi(n,r,i,s,t[0],7,-680876936),s=bi(s,n,r,i,t[1],12,-389564586),i=bi(i,s,n,r,t[2],17,606105819),r=bi(r,i,s,n,t[3],22,-1044525330),n=bi(n,r,i,s,t[4],7,-176418897),s=bi(s,n,r,i,t[5],12,1200080426),i=bi(i,s,n,r,t[6],17,-1473231341),r=bi(r,i,s,n,t[7],22,-45705983),n=bi(n,r,i,s,t[8],7,1770035416),s=bi(s,n,r,i,t[9],12,-1958414417),i=bi(i,s,n,r,t[10],17,-42063),r=bi(r,i,s,n,t[11],22,-1990404162),n=bi(n,r,i,s,t[12],7,1804603682),s=bi(s,n,r,i,t[13],12,-40341101),i=bi(i,s,n,r,t[14],17,-1502002290),n=_i(n,r=bi(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=_i(s,n,r,i,t[6],9,-1069501632),i=_i(i,s,n,r,t[11],14,643717713),r=_i(r,i,s,n,t[0],20,-373897302),n=_i(n,r,i,s,t[5],5,-701558691),s=_i(s,n,r,i,t[10],9,38016083),i=_i(i,s,n,r,t[15],14,-660478335),r=_i(r,i,s,n,t[4],20,-405537848),n=_i(n,r,i,s,t[9],5,568446438),s=_i(s,n,r,i,t[14],9,-1019803690),i=_i(i,s,n,r,t[3],14,-187363961),r=_i(r,i,s,n,t[8],20,1163531501),n=_i(n,r,i,s,t[13],5,-1444681467),s=_i(s,n,r,i,t[2],9,-51403784),i=_i(i,s,n,r,t[7],14,1735328473),n=Si(n,r=_i(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Si(s,n,r,i,t[8],11,-2022574463),i=Si(i,s,n,r,t[11],16,1839030562),r=Si(r,i,s,n,t[14],23,-35309556),n=Si(n,r,i,s,t[1],4,-1530992060),s=Si(s,n,r,i,t[4],11,1272893353),i=Si(i,s,n,r,t[7],16,-155497632),r=Si(r,i,s,n,t[10],23,-1094730640),n=Si(n,r,i,s,t[13],4,681279174),s=Si(s,n,r,i,t[0],11,-358537222),i=Si(i,s,n,r,t[3],16,-722521979),r=Si(r,i,s,n,t[6],23,76029189),n=Si(n,r,i,s,t[9],4,-640364487),s=Si(s,n,r,i,t[12],11,-421815835),i=Si(i,s,n,r,t[15],16,530742520),n=Ni(n,r=Si(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=Ni(s,n,r,i,t[7],10,1126891415),i=Ni(i,s,n,r,t[14],15,-1416354905),r=Ni(r,i,s,n,t[5],21,-57434055),n=Ni(n,r,i,s,t[12],6,1700485571),s=Ni(s,n,r,i,t[3],10,-1894986606),i=Ni(i,s,n,r,t[10],15,-1051523),r=Ni(r,i,s,n,t[1],21,-2054922799),n=Ni(n,r,i,s,t[8],6,1873313359),s=Ni(s,n,r,i,t[15],10,-30611744),i=Ni(i,s,n,r,t[6],15,-1560198380),r=Ni(r,i,s,n,t[13],21,1309151649),n=Ni(n,r,i,s,t[4],6,-145523070),s=Ni(s,n,r,i,t[11],10,-1120210379),i=Ni(i,s,n,r,t[2],15,718787259),r=Ni(r,i,s,n,t[9],21,-343485551),e[0]=yc(n,e[0]),e[1]=yc(r,e[1]),e[2]=yc(i,e[2]),e[3]=yc(s,e[3])}function Yg(e,t,n,r,i,s){return t=yc(yc(t,e),yc(r,s)),yc(t<<i|t>>>32-i,n)}function bi(e,t,n,r,i,s,a){return Yg(t&n|~t&r,e,t,i,s,a)}function _i(e,t,n,r,i,s,a){return Yg(t&r|n&~r,e,t,i,s,a)}function Si(e,t,n,r,i,s,a){return Yg(t^n^r,e,t,i,s,a)}function Ni(e,t,n,r,i,s,a){return Yg(n^(t|~r),e,t,i,s,a)}function N6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ov(r,G$(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Ov(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Ov(r,i),r}function G$(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Uh=It.atob.bind(It),my=It.btoa.bind(It);var M3="0123456789abcdef".split("");function Y$(e){for(var t="",n=0;n<4;n++)t+=M3[e>>8*n+4&15]+M3[e>>8*n&15];return t}function K$(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function gy(e){return N6(e).map(K$).join("")}var J$=function(e){for(var t=0;t<e.length;t++)e[t]=Y$(e[t]);return e.join("")}(N6("hello"))!="5d41402abc4b2a76b9719d911017c592";function yc(e,t){if(J$){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function vy(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var h=0;for(c=0;c<256;c++){var p=l[c];h=(h+p+a.charCodeAt(c))%256,l[c]=l[h],l[h]=p}n=e,r=l}else l=r;var m=t.length,w=0,g=0,N="";for(c=0;c<m;c++)g=(g+(p=l[w=(w+1)%256]))%256,l[w]=l[g],l[g]=p,a=l[(l[w]+l[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var D3={print:4,modify:8,copy:16,"annot-forms":32};function Bd(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(D3.perm!==void 0)throw new Error("Invalid permission: "+l);i+=D3[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=gy(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=vy(this.encryptionKey,this.padding)}function Ud(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function I3(e){if(An(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(l){It.console&&Fn.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Q0(e){if(!(this instanceof Q0))return new Q0(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function k6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ju(e,t,n,r,i){if(!(this instanceof ju))return new ju(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,k6.call(this,r,i)}function ef(e,t,n,r,i){if(!(this instanceof ef))return new ef(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,k6.call(this,r,i)}function Dt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,c=16,h="S",p=null;An(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),h=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,w={},g={internal:{},__private__:{}};g.__private__.PubSub=I3;var N="1.3",k=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(x){N=x};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return C};var _=g.__private__.getPageFormat=function(x){return C[x]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},L=S.COMPAT;function O(){this.saveGraphicsState(),ee(new gt(Ue,0,0,-Ue,0,Ws()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),h="n",L=S.ADVANCED}function Y(){this.restoreGraphicsState(),h="S",L=S.COMPAT}var se=g.__private__.combineFontStyleAndFontWeight=function(x,M){if(x=="bold"&&M=="normal"||x=="bold"&&M==400||x=="normal"&&M=="italic"||x=="bold"&&M=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return M&&(x=M==400||M==="normal"?x==="italic"?"italic":"normal":M!=700&&M!=="bold"||x!=="normal"?(M==700?"bold":M)+""+x:"bold"),x};g.advancedAPI=function(x){var M=L===S.COMPAT;return M&&O.call(this),typeof x!="function"||(x(this),M&&Y.call(this)),this},g.compatAPI=function(x){var M=L===S.ADVANCED;return M&&Y.call(this),typeof x!="function"||(x(this),M&&O.call(this)),this},g.isAdvancedAPI=function(){return L===S.ADVANCED};var W,I=function(x){if(L!==S.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},re=g.roundToPrecision=g.__private__.roundToPrecision=function(x,M){var ie=t||M;if(isNaN(x)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ie).replace(/0+$/,"")};W=g.hpf=g.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return re(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return re(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return re(x,16)};var oe=g.f2=g.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return re(x,2)},R=g.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return re(x,3)},z=g.scale=g.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return L===S.COMPAT?x*Ue:L===S.ADVANCED?x:void 0},K=function(x){return L===S.COMPAT?Ws()-x:L===S.ADVANCED?x:void 0},J=function(x){return z(K(x))};g.__private__.setPrecision=g.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var ye,pe="00000000000000000000000000000000",X=g.__private__.getFileId=function(){return pe},F=g.__private__.setFileId=function(x){return pe=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Wr=new Bd(p.userPermissions,p.userPassword,p.ownerPassword,pe)),pe};g.setFileId=function(x){return F(x),this},g.getFileId=function(){return X()};var U=g.__private__.convertDateToPDFDate=function(x){var M=x.getTimezoneOffset(),ie=M<0?"+":"-",he=Math.floor(Math.abs(M/60)),Me=Math.abs(M%60),ze=[ie,ne(he),"'",ne(Me),"'"].join("");return["D:",x.getFullYear(),ne(x.getMonth()+1),ne(x.getDate()),ne(x.getHours()),ne(x.getMinutes()),ne(x.getSeconds()),ze].join("")},ae=g.__private__.convertPDFDateToDate=function(x){var M=parseInt(x.substr(2,4),10),ie=parseInt(x.substr(6,2),10)-1,he=parseInt(x.substr(8,2),10),Me=parseInt(x.substr(10,2),10),ze=parseInt(x.substr(12,2),10),tt=parseInt(x.substr(14,2),10);return new Date(M,ie,he,Me,ze,tt,0)},Le=g.__private__.setCreationDate=function(x){var M;if(x===void 0&&(x=new Date),x instanceof Date)M=U(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");M=x}return ye=M},P=g.__private__.getCreationDate=function(x){var M=ye;return x==="jsDate"&&(M=ae(ye)),M};g.setCreationDate=function(x){return Le(x),this},g.getCreationDate=function(x){return P(x)};var V,ne=g.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},le=g.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},de=0,Ae=[],Ee=[],Z=0,je=[],_e=[],Re=!1,Be=Ee,We=function(){de=0,Z=0,Ee=[],Ae=[],je=[],Ci=Tn(),vs=Tn()};g.__private__.setCustomOutputDestination=function(x){Re=!0,Be=x};var xe=function(x){Re||(Be=x)};g.__private__.resetCustomOutputDestination=function(){Re=!1,Be=Ee};var ee=g.__private__.out=function(x){return x=x.toString(),Z+=x.length+1,Be.push(x),Be},Qe=g.__private__.write=function(x){return ee(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Je=g.__private__.getArrayBuffer=function(x){for(var M=x.length,ie=new ArrayBuffer(M),he=new Uint8Array(ie);M--;)he[M]=x.charCodeAt(M);return ie},Ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ve};var Ze=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(x){return Ze=L===S.ADVANCED?x/Ue:x,this};var be,ce=g.__private__.getFontSize=g.getFontSize=function(){return L===S.COMPAT?Ze:Ze*Ue},Ne=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(x){return Ne=x,this},g.__private__.getR2L=g.getR2L=function(){return Ne};var fe,ge=g.__private__.setZoomMode=function(x){var M=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))be=x;else if(isNaN(x)){if(M.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');be=x}else be=parseInt(x,10)};g.__private__.getZoomMode=function(){return be};var rt,ot=g.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');fe=x};g.__private__.getPageMode=function(){return fe};var it=g.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');rt=x};g.__private__.getLayoutMode=function(){return rt},g.__private__.setDisplayMode=g.setDisplayMode=function(x,M,ie){return ge(x),it(M),ot(ie),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(x){if(Object.keys(Fe).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[x]},g.__private__.getDocumentProperties=function(){return Fe},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(x){for(var M in Fe)Fe.hasOwnProperty(M)&&x[M]&&(Fe[M]=x[M]);return this},g.__private__.setDocumentProperty=function(x,M){if(Object.keys(Fe).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[x]=M};var st,Ue,Ct,ut,Gt,kt={},At={},mn=[],Pt={},Qn={},Et={},or={},un=null,zt=0,bt=[],qt=new I3(g),xn=e.hotfixes||[],rn={},lr={},Rr=[],gt=function x(M,ie,he,Me,ze,tt){if(!(this instanceof x))return new x(M,ie,he,Me,ze,tt);isNaN(M)&&(M=1),isNaN(ie)&&(ie=0),isNaN(he)&&(he=0),isNaN(Me)&&(Me=1),isNaN(ze)&&(ze=0),isNaN(tt)&&(tt=0),this._matrix=[M,ie,he,Me,ze,tt]};Object.defineProperty(gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(x)},gt.prototype.multiply=function(x){var M=x.sx*this.sx+x.shy*this.shx,ie=x.sx*this.shy+x.shy*this.sy,he=x.shx*this.sx+x.sy*this.shx,Me=x.shx*this.shy+x.sy*this.sy,ze=x.tx*this.sx+x.ty*this.shx+this.tx,tt=x.tx*this.shy+x.ty*this.sy+this.ty;return new gt(M,ie,he,Me,ze,tt)},gt.prototype.decompose=function(){var x=this.sx,M=this.shy,ie=this.shx,he=this.sy,Me=this.tx,ze=this.ty,tt=Math.sqrt(x*x+M*M),pt=(x/=tt)*ie+(M/=tt)*he;ie-=x*pt,he-=M*pt;var jt=Math.sqrt(ie*ie+he*he);return pt/=jt,x*(he/=jt)<M*(ie/=jt)&&(x=-x,M=-M,pt=-pt,tt=-tt),{scale:new gt(tt,0,0,jt,0,0),translate:new gt(1,0,0,1,Me,ze),rotate:new gt(x,M,-M,x,0,0),skew:new gt(1,0,pt,1,0,0)}},gt.prototype.toString=function(x){return this.join(" ")},gt.prototype.inversed=function(){var x=this.sx,M=this.shy,ie=this.shx,he=this.sy,Me=this.tx,ze=this.ty,tt=1/(x*he-M*ie),pt=he*tt,jt=-M*tt,Bt=-ie*tt,Rt=x*tt;return new gt(pt,jt,Bt,Rt,-pt*Me-Bt*ze,-jt*Me-Rt*ze)},gt.prototype.applyToPoint=function(x){var M=x.x*this.sx+x.y*this.shx+this.tx,ie=x.x*this.shy+x.y*this.sy+this.ty;return new $r(M,ie)},gt.prototype.applyToRectangle=function(x){var M=this.applyToPoint(x),ie=this.applyToPoint(new $r(x.x+x.w,x.y+x.h));return new Xc(M.x,M.y,ie.x-M.x,ie.y-M.y)},gt.prototype.clone=function(){var x=this.sx,M=this.shy,ie=this.shx,he=this.sy,Me=this.tx,ze=this.ty;return new gt(x,M,ie,he,Me,ze)},g.Matrix=gt;var Zn=g.matrixMult=function(x,M){return M.multiply(x)},cr=new gt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=cr;var Pn=function(x,M){if(!Qn[x]){var ie=(M instanceof ju?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);M.id=ie,Qn[x]=ie,Pt[ie]=M,qt.publish("addPattern",M)}};g.ShadingPattern=ju,g.TilingPattern=ef,g.addShadingPattern=function(x,M){return I("addShadingPattern()"),Pn(x,M),this},g.beginTilingPattern=function(x){I("beginTilingPattern()"),bs(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},g.endTilingPattern=function(x,M){I("endTilingPattern()"),M.stream=_e[V].join(`
`),Pn(x,M),qt.publish("endTilingPattern",M),Rr.pop().restore()};var On=g.__private__.newObject=function(){var x=Tn();return er(x,!0),x},Tn=g.__private__.newObjectDeferred=function(){return de++,Ae[de]=function(){return Z},de},er=function(x,M){return M=typeof M=="boolean"&&M,Ae[x]=Z,M&&ee(x+" 0 obj"),x},Wi=g.__private__.newAdditionalObject=function(){var x={objId:Tn(),content:""};return je.push(x),x},Ci=Tn(),vs=Tn(),ys=g.__private__.decodeColorString=function(x){var M=x.split(" ");if(M.length!==2||M[1]!=="g"&&M[1]!=="G")M.length===5&&(M[4]==="k"||M[4]==="K")&&(M=[(1-M[0])*(1-M[3]),(1-M[1])*(1-M[3]),(1-M[2])*(1-M[3]),"r"]);else{var ie=parseFloat(M[0]);M=[ie,ie,ie,"r"]}for(var he="#",Me=0;Me<3;Me++)he+=("0"+Math.floor(255*parseFloat(M[Me])).toString(16)).slice(-2);return he},ws=g.__private__.encodeColorString=function(x){var M;typeof x=="string"&&(x={ch1:x});var ie=x.ch1,he=x.ch2,Me=x.ch3,ze=x.ch4,tt=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var pt=new S6(ie);if(pt.ok)ie=pt.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var jt=parseInt(ie.substr(1),16);ie=jt>>16&255,he=jt>>8&255,Me=255&jt}if(he===void 0||ze===void 0&&ie===he&&he===Me)if(typeof ie=="string")M=ie+" "+tt[0];else switch(x.precision){case 2:M=oe(ie/255)+" "+tt[0];break;case 3:default:M=R(ie/255)+" "+tt[0]}else if(ze===void 0||An(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return M=["1.","1.","1.",tt[1]].join(" ");if(typeof ie=="string")M=[ie,he,Me,tt[1]].join(" ");else switch(x.precision){case 2:M=[oe(ie/255),oe(he/255),oe(Me/255),tt[1]].join(" ");break;default:case 3:M=[R(ie/255),R(he/255),R(Me/255),tt[1]].join(" ")}}else if(typeof ie=="string")M=[ie,he,Me,ze,tt[2]].join(" ");else switch(x.precision){case 2:M=[oe(ie),oe(he),oe(Me),oe(ze),tt[2]].join(" ");break;case 3:default:M=[R(ie),R(he),R(Me),R(ze),tt[2]].join(" ")}return M},xs=g.__private__.getFilters=function(){return a},Hi=g.__private__.putStream=function(x){var M=(x=x||{}).data||"",ie=x.filters||xs(),he=x.alreadyAppliedFilters||[],Me=x.addLength1||!1,ze=M.length,tt=x.objectId,pt=function(Tr){return Tr};if(p!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(pt=Wr.encryptor(tt,0));var jt={};ie===!0&&(ie=["FlateEncode"]);var Bt=x.additionalKeyValues||[],Rt=(jt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(M,ie):{data:M,reverseChain:[]}).reverseChain+(Array.isArray(he)?he.join(" "):he.toString());if(jt.data.length!==0&&(Bt.push({key:"Length",value:jt.data.length}),Me===!0&&Bt.push({key:"Length1",value:ze})),Rt.length!=0)if(Rt.split("/").length-1==1)Bt.push({key:"Filter",value:Rt});else{Bt.push({key:"Filter",value:"["+Rt+"]"});for(var tn=0;tn<Bt.length;tn+=1)if(Bt[tn].key==="DecodeParms"){for(var $n=[],rr=0;rr<jt.reverseChain.split("/").length-1;rr+=1)$n.push("null");$n.push(Bt[tn].value),Bt[tn].value="["+$n.join(" ")+"]"}}ee("<<");for(var ir=0;ir<Bt.length;ir++)ee("/"+Bt[ir].key+" "+Bt[ir].value);ee(">>"),jt.data.length!==0&&(ee("stream"),ee(pt(jt.data)),ee("endstream"))},$s=g.__private__.putPage=function(x){var M=x.number,ie=x.data,he=x.objId,Me=x.contentsObjId;er(he,!0),ee("<</Type /Page"),ee("/Parent "+x.rootDictionaryObjId+" 0 R"),ee("/Resources "+x.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(W(x.mediaBox.bottomLeftX))+" "+parseFloat(W(x.mediaBox.bottomLeftY))+" "+W(x.mediaBox.topRightX)+" "+W(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&ee("/CropBox ["+W(x.cropBox.bottomLeftX)+" "+W(x.cropBox.bottomLeftY)+" "+W(x.cropBox.topRightX)+" "+W(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&ee("/BleedBox ["+W(x.bleedBox.bottomLeftX)+" "+W(x.bleedBox.bottomLeftY)+" "+W(x.bleedBox.topRightX)+" "+W(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&ee("/TrimBox ["+W(x.trimBox.bottomLeftX)+" "+W(x.trimBox.bottomLeftY)+" "+W(x.trimBox.topRightX)+" "+W(x.trimBox.topRightY)+"]"),x.artBox!==null&&ee("/ArtBox ["+W(x.artBox.bottomLeftX)+" "+W(x.artBox.bottomLeftY)+" "+W(x.artBox.topRightX)+" "+W(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&ee("/UserUnit "+x.userUnit),qt.publish("putPage",{objId:he,pageContext:bt[M],pageNumber:M,page:ie}),ee("/Contents "+Me+" 0 R"),ee(">>"),ee("endobj");var ze=ie.join(`
`);return L===S.ADVANCED&&(ze+=`
Q`),er(Me,!0),Hi({data:ze,filters:xs(),objectId:Me}),ee("endobj"),he},No=g.__private__.putPages=function(){var x,M,ie=[];for(x=1;x<=zt;x++)bt[x].objId=Tn(),bt[x].contentsObjId=Tn();for(x=1;x<=zt;x++)ie.push($s({number:x,data:_e[x],objId:bt[x].objId,contentsObjId:bt[x].contentsObjId,mediaBox:bt[x].mediaBox,cropBox:bt[x].cropBox,bleedBox:bt[x].bleedBox,trimBox:bt[x].trimBox,artBox:bt[x].artBox,userUnit:bt[x].userUnit,rootDictionaryObjId:Ci,resourceDictionaryObjId:vs}));er(Ci,!0),ee("<</Type /Pages");var he="/Kids [";for(M=0;M<zt;M++)he+=ie[M]+" 0 R ";ee(he+"]"),ee("/Count "+zt),ee(">>"),ee("endobj"),qt.publish("postPutPages")},ul=function(x){qt.publish("putFont",{font:x,out:ee,newObject:On,putStream:Hi}),x.isAlreadyPutted!==!0&&(x.objectNumber=On(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Ud(x.postScriptName)),ee("/Subtype /Type1"),typeof x.encoding=="string"&&ee("/Encoding /"+x.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},dl=function(){for(var x in kt)kt.hasOwnProperty(x)&&(m===!1||m===!0&&w.hasOwnProperty(x))&&ul(kt[x])},fl=function(x){x.objectNumber=On();var M=[];M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Form"}),M.push({key:"BBox",value:"["+[W(x.x),W(x.y),W(x.x+x.width),W(x.y+x.height)].join(" ")+"]"}),M.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ie=x.pages[1].join(`
`);Hi({data:ie,additionalKeyValues:M,objectId:x.objectNumber}),ee("endobj")},ua=function(){for(var x in rn)rn.hasOwnProperty(x)&&fl(rn[x])},Ju=function(x,M){var ie,he=[],Me=1/(M-1);for(ie=0;ie<1;ie+=Me)he.push(ie);if(he.push(1),x[0].offset!=0){var ze={offset:0,color:x[0].color};x.unshift(ze)}if(x[x.length-1].offset!=1){var tt={offset:1,color:x[x.length-1].color};x.push(tt)}for(var pt="",jt=0,Bt=0;Bt<he.length;Bt++){for(ie=he[Bt];ie>x[jt+1].offset;)jt++;var Rt=x[jt].offset,tn=(ie-Rt)/(x[jt+1].offset-Rt),$n=x[jt].color,rr=x[jt+1].color;pt+=le(Math.round((1-tn)*$n[0]+tn*rr[0]).toString(16))+le(Math.round((1-tn)*$n[1]+tn*rr[1]).toString(16))+le(Math.round((1-tn)*$n[2]+tn*rr[2]).toString(16))}return pt.trim()},hl=function(x,M){M||(M=21);var ie=On(),he=Ju(x.colors,M),Me=[];Me.push({key:"FunctionType",value:"0"}),Me.push({key:"Domain",value:"[0.0 1.0]"}),Me.push({key:"Size",value:"["+M+"]"}),Me.push({key:"BitsPerSample",value:"8"}),Me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hi({data:he,additionalKeyValues:Me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),ee("endobj"),x.objectNumber=On(),ee("<< /ShadingType "+x.type),ee("/ColorSpace /DeviceRGB");var ze="/Coords ["+W(parseFloat(x.coords[0]))+" "+W(parseFloat(x.coords[1]))+" ";x.type===2?ze+=W(parseFloat(x.coords[2]))+" "+W(parseFloat(x.coords[3])):ze+=W(parseFloat(x.coords[2]))+" "+W(parseFloat(x.coords[3]))+" "+W(parseFloat(x.coords[4]))+" "+W(parseFloat(x.coords[5])),ee(ze+="]"),x.matrix&&ee("/Matrix ["+x.matrix.toString()+"]"),ee("/Function "+ie+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},If=function(x,M){var ie=Tn(),he=On();M.push({resourcesOid:ie,objectOid:he}),x.objectNumber=he;var Me=[];Me.push({key:"Type",value:"/Pattern"}),Me.push({key:"PatternType",value:"1"}),Me.push({key:"PaintType",value:"1"}),Me.push({key:"TilingType",value:"1"}),Me.push({key:"BBox",value:"["+x.boundingBox.map(W).join(" ")+"]"}),Me.push({key:"XStep",value:W(x.xStep)}),Me.push({key:"YStep",value:W(x.yStep)}),Me.push({key:"Resources",value:ie+" 0 R"}),x.matrix&&Me.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),Hi({data:x.stream,additionalKeyValues:Me,objectId:x.objectNumber}),ee("endobj")},pl=function(x){var M;for(M in Pt)Pt.hasOwnProperty(M)&&(Pt[M]instanceof ju?hl(Pt[M]):Pt[M]instanceof ef&&If(Pt[M],x))},Xu=function(x){for(var M in x.objectNumber=On(),ee("<<"),x)switch(M){case"opacity":ee("/ca "+oe(x[M]));break;case"stroke-opacity":ee("/CA "+oe(x[M]))}ee(">>"),ee("endobj")},Qu=function(){var x;for(x in Et)Et.hasOwnProperty(x)&&Xu(Et[x])},ml=function(){for(var x in ee("/XObject <<"),rn)rn.hasOwnProperty(x)&&rn[x].objectNumber>=0&&ee("/"+x+" "+rn[x].objectNumber+" 0 R");qt.publish("putXobjectDict"),ee(">>")},Zu=function(){Wr.oid=On(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Wr.v),ee("/R "+Wr.r),ee("/U <"+Wr.toHexString(Wr.U)+">"),ee("/O <"+Wr.toHexString(Wr.O)+">"),ee("/P "+Wr.P),ee(">>"),ee("endobj")},ed=function(){for(var x in ee("/Font <<"),kt)kt.hasOwnProperty(x)&&(m===!1||m===!0&&w.hasOwnProperty(x))&&ee("/"+x+" "+kt[x].objectNumber+" 0 R");ee(">>")},Of=function(){if(Object.keys(Pt).length>0){for(var x in ee("/Shading <<"),Pt)Pt.hasOwnProperty(x)&&Pt[x]instanceof ju&&Pt[x].objectNumber>=0&&ee("/"+x+" "+Pt[x].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),ee(">>")}},gl=function(x){if(Object.keys(Pt).length>0){for(var M in ee("/Pattern <<"),Pt)Pt.hasOwnProperty(M)&&Pt[M]instanceof g.TilingPattern&&Pt[M].objectNumber>=0&&Pt[M].objectNumber<x&&ee("/"+M+" "+Pt[M].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),ee(">>")}},Rf=function(){if(Object.keys(Et).length>0){var x;for(x in ee("/ExtGState <<"),Et)Et.hasOwnProperty(x)&&Et[x].objectNumber>=0&&ee("/"+x+" "+Et[x].objectNumber+" 0 R");qt.publish("putGStateDict"),ee(">>")}},tr=function(x){er(x.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ed(),Of(),gl(x.objectOid),Rf(),ml(),ee(">>"),ee("endobj")},Uc=function(){var x=[];dl(),Qu(),ua(),pl(x),qt.publish("putResources"),x.forEach(tr),tr({resourcesOid:vs,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources")},zc=function(){qt.publish("putAdditionalObjects");for(var x=0;x<je.length;x++){var M=je[x];er(M.objId,!0),ee(M.content),ee("endobj")}qt.publish("postPutAdditionalObjects")},vl=function(x){At[x.fontName]=At[x.fontName]||{},At[x.fontName][x.fontStyle]=x.id},qc=function(x,M,ie,he,Me){var ze={id:"F"+(Object.keys(kt).length+1).toString(10),postScriptName:x,fontName:M,fontStyle:ie,encoding:he,isStandardFont:Me||!1,metadata:{}};return qt.publish("addFont",{font:ze,instance:this}),kt[ze.id]=ze,vl(ze),ze.id},td=function(x){for(var M=0,ie=Ve.length;M<ie;M++){var he=qc.call(this,x[M][0],x[M][1],x[M][2],Ve[M][3],!0);m===!1&&(w[he]=!0);var Me=x[M][0].split("-");vl({id:he,fontName:Me[0],fontStyle:Me[1]||""})}qt.publish("addFonts",{fonts:kt,dictionary:At})},fi=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(he){var M=he.stack||"";~M.indexOf(" at ")&&(M=M.split(" at ")[1]);var ie="Error in function "+M.split(`
`)[0].split("<")[0]+": "+he.message;if(!It.console)throw new Error(ie);It.console.error(ie,he),It.alert&&alert(ie)}},x.foo.bar=x,x.foo},ko=function(x,M){var ie,he,Me,ze,tt,pt,jt,Bt,Rt;if(Me=(M=M||{}).sourceEncoding||"Unicode",tt=M.outputEncoding,(M.autoencode||tt)&&kt[st].metadata&&kt[st].metadata[Me]&&kt[st].metadata[Me].encoding&&(ze=kt[st].metadata[Me].encoding,!tt&&kt[st].encoding&&(tt=kt[st].encoding),!tt&&ze.codePages&&(tt=ze.codePages[0]),typeof tt=="string"&&(tt=ze[tt]),tt)){for(jt=!1,pt=[],ie=0,he=x.length;ie<he;ie++)(Bt=tt[x.charCodeAt(ie)])?pt.push(String.fromCharCode(Bt)):pt.push(x[ie]),pt[ie].charCodeAt(0)>>8&&(jt=!0);x=pt.join("")}for(ie=x.length;jt===void 0&&ie!==0;)x.charCodeAt(ie-1)>>8&&(jt=!0),ie--;if(!jt)return x;for(pt=M.noBOM?[]:[254,255],ie=0,he=x.length;ie<he;ie++){if((Rt=(Bt=x.charCodeAt(ie))>>8)>>8)throw new Error("Character at position "+ie+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Rt),pt.push(Bt-(Rt<<8))}return String.fromCharCode.apply(void 0,pt)},hi=g.__private__.pdfEscape=g.pdfEscape=function(x,M){return ko(x,M).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yl=g.__private__.beginPage=function(x){_e[++zt]=[],bt[zt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},nd(zt),xe(_e[V])},Wc=function(x,M){var ie,he,Me;switch(n=M||n,typeof x=="string"&&(ie=_(x.toLowerCase()),Array.isArray(ie)&&(he=ie[0],Me=ie[1])),Array.isArray(x)&&(he=x[0]*Ue,Me=x[1]*Ue),isNaN(he)&&(he=i[0],Me=i[1]),(he>14400||Me>14400)&&(Fn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),he=Math.min(14400,he),Me=Math.min(14400,Me)),i=[he,Me],n.substr(0,1)){case"l":Me>he&&(i=[Me,he]);break;case"p":he>Me&&(i=[Me,he])}yl(i),ld(Kc),ee(nr),Nl!==0&&ee(Nl+" J"),Fr!==0&&ee(Fr+" j"),qt.publish("addPage",{pageNumber:zt})},Hc=function(x){x>0&&x<=zt&&(_e.splice(x,1),bt.splice(x,1),zt--,V>zt&&(V=zt),this.setPage(V))},nd=function(x){x>0&&x<=zt&&(V=x)},rd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return _e.length-1},wl=function(x,M,ie){var he,Me=void 0;return ie=ie||{},x=x!==void 0?x:kt[st].fontName,M=M!==void 0?M:kt[st].fontStyle,he=x.toLowerCase(),At[he]!==void 0&&At[he][M]!==void 0?Me=At[he][M]:At[x]!==void 0&&At[x][M]!==void 0?Me=At[x][M]:ie.disableWarning===!1&&Fn.warn("Unable to look up font label for font '"+x+"', '"+M+"'. Refer to getFontList() for available fonts."),Me||ie.noFallback||(Me=At.times[M])==null&&(Me=At.times.normal),Me},Vc=g.__private__.putInfo=function(){var x=On(),M=function(he){return he};for(var ie in p!==null&&(M=Wr.encryptor(x,0)),ee("<<"),ee("/Producer ("+hi(M("jsPDF "+Dt.version))+")"),Fe)Fe.hasOwnProperty(ie)&&Fe[ie]&&ee("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+hi(M(Fe[ie]))+")");ee("/CreationDate ("+hi(M(ye))+")"),ee(">>"),ee("endobj")},Bs=g.__private__.putCatalog=function(x){var M=(x=x||{}).rootDictionaryObjId||Ci;switch(On(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+M+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+be;ie.substr(ie.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+oe(be)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}fe&&ee("/PageMode /"+fe),qt.publish("putCatalog"),ee(">>"),ee("endobj")},id=g.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(de+1)),ee("/Root "+de+" 0 R"),ee("/Info "+(de-1)+" 0 R"),p!==null&&ee("/Encrypt "+Wr.oid+" 0 R"),ee("/ID [ <"+pe+"> <"+pe+"> ]"),ee(">>")},sd=g.__private__.putHeader=function(){ee("%PDF-"+N),ee("%ºß¬à")},Ff=g.__private__.putXRef=function(){var x="0000000000";ee("xref"),ee("0 "+(de+1)),ee("0000000000 65535 f ");for(var M=1;M<=de;M++)typeof Ae[M]=="function"?ee((x+Ae[M]()).slice(-10)+" 00000 n "):Ae[M]!==void 0?ee((x+Ae[M]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Us=g.__private__.buildDocument=function(){We(),xe(Ee),qt.publish("buildDocument"),sd(),No(),zc(),Uc(),p!==null&&Zu(),Vc(),Bs();var x=Z;return Ff(),id(),ee("startxref"),ee(""+x),ee("%%EOF"),xe(_e[V]),Ee.join(`
`)},jo=g.__private__.getBlob=function(x){return new Blob([Je(x)],{type:"application/pdf"})},Eo=g.output=g.__private__.output=fi(function(x,M){switch(typeof(M=M||{})=="string"?M={filename:M}:M.filename=M.filename||"generated.pdf",x){case void 0:return Us();case"save":g.save(M.filename);break;case"arraybuffer":return Je(Us());case"blob":return jo(Us());case"bloburi":case"bloburl":if(It.URL!==void 0&&typeof It.URL.createObjectURL=="function")return It.URL&&It.URL.createObjectURL(jo(Us()))||void 0;Fn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",he=Us();try{ie=my(he)}catch{ie=my(unescape(encodeURIComponent(he)))}return"data:application/pdf;filename="+M.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var Me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';M.pdfObjectUrl&&(Me=M.pdfObjectUrl,ze="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Me+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(M)+");<\/script></body></html>",pt=It.open();return pt!==null&&pt.document.write(tt),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(M.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+M.filename+'" width="500px" height="400px" /></body></html>',Bt=It.open();if(Bt!==null){Bt.document.write(jt);var Rt=this;Bt.document.documentElement.querySelector("#pdfViewer").onload=function(){Bt.document.title=M.filename,Bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rt.output("bloburl"))}}return Bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(It)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",M)+'"></iframe></body></html>',$n=It.open();if($n!==null&&($n.document.write(tn),$n.document.title=M.filename),$n||typeof safari>"u")return $n;break;case"datauri":case"dataurl":return It.document.location.href=this.output("datauristring",M);default:return null}}),Gc=function(x){return Array.isArray(xn)===!0&&xn.indexOf(x)>-1};switch(r){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=Gc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ue=r}var Wr=null;Le(),F();var $f=function(x){return p!==null?Wr.encryptor(x,0):function(M){return M}},ad=g.__private__.getPageInfo=g.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:bt[x].objId,pageNumber:x,pageContext:bt[x]}},Ot=g.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var M in bt)if(bt[M].objId===x)break;return ad(M)},Bf=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:bt[V].objId,pageNumber:V,pageContext:bt[V]}};g.addPage=function(){return Wc.apply(this,arguments),this},g.setPage=function(){return nd.apply(this,arguments),xe.call(this,_e[V]),this},g.insertPage=function(x){return this.addPage(),this.movePage(V,x),this},g.movePage=function(x,M){var ie,he;if(x>M){ie=_e[x],he=bt[x];for(var Me=x;Me>M;Me--)_e[Me]=_e[Me-1],bt[Me]=bt[Me-1];_e[M]=ie,bt[M]=he,this.setPage(M)}else if(x<M){ie=_e[x],he=bt[x];for(var ze=x;ze<M;ze++)_e[ze]=_e[ze+1],bt[ze]=bt[ze+1];_e[M]=ie,bt[M]=he,this.setPage(M)}return this},g.deletePage=function(){return Hc.apply(this,arguments),this},g.__private__.text=g.text=function(x,M,ie,he,Me){var ze,tt,pt,jt,Bt,Rt,tn,$n,rr,ir=(he=he||{}).scope||this;if(typeof x=="number"&&typeof M=="number"&&(typeof ie=="string"||Array.isArray(ie))){var Tr=ie;ie=M,M=x,x=Tr}if(arguments[3]instanceof gt?(I("The transform parameter of text() with a Matrix value"),rr=Me):(pt=arguments[4],jt=arguments[5],An(tn=arguments[3])==="object"&&tn!==null||(typeof pt=="string"&&(jt=pt,pt=null),typeof tn=="string"&&(jt=tn,tn=null),typeof tn=="number"&&(pt=tn,tn=null),he={flags:tn,angle:pt,align:jt})),isNaN(M)||isNaN(ie)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return ir;var Mr="",Yi=!1,Rn=typeof he.lineHeightFactor=="number"?he.lineHeightFactor:Co,Ki=ir.internal.scaleFactor;function Ha(_n){return _n=_n.split("	").join(Array(he.TabLen||9).join(" ")),hi(_n,tn)}function El(_n){for(var Mn,ur=_n.concat(),Sr=[],Qi=ur.length;Qi--;)typeof(Mn=ur.shift())=="string"?Sr.push(Mn):Array.isArray(_n)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?Sr.push(Mn[0]):Sr.push([Mn[0],Mn[1],Mn[2]]);return Sr}function Cl(_n,Mn){var ur;if(typeof _n=="string")ur=Mn(_n)[0];else if(Array.isArray(_n)){for(var Sr,Qi,Zi=_n.concat(),pa=[],tu=Zi.length;tu--;)typeof(Sr=Zi.shift())=="string"?pa.push(Mn(Sr)[0]):Array.isArray(Sr)&&typeof Sr[0]=="string"&&(Qi=Mn(Sr[0],Sr[1],Sr[2]),pa.push([Qi[0],Qi[1],Qi[2]]));ur=pa}return ur}var Al=!1,Zc=!0;if(typeof x=="string")Al=!0;else if(Array.isArray(x)){var eu=x.concat();tt=[];for(var Ll,Br=eu.length;Br--;)(typeof(Ll=eu.shift())!="string"||Array.isArray(Ll)&&typeof Ll[0]!="string")&&(Zc=!1);Al=Zc}if(Al===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var _s=Ze/ir.internal.scaleFactor,Pl=_s*(Rn-1);switch(he.baseline){case"bottom":ie-=Pl;break;case"top":ie+=_s-Pl;break;case"hanging":ie+=_s-2*Pl;break;case"middle":ie+=_s/2-Pl}if((Rt=he.maxWidth||0)>0&&(typeof x=="string"?x=ir.splitTextToSize(x,Rt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(_n,Mn){return _n.concat(ir.splitTextToSize(Mn,Rt))},[]))),ze={text:x,x:M,y:ie,options:he,mutex:{pdfEscape:hi,activeFontKey:st,fonts:kt,activeFontSize:Ze}},qt.publish("preProcessText",ze),x=ze.text,pt=(he=ze.options).angle,!(rr instanceof gt)&&pt&&typeof pt=="number"){pt*=Math.PI/180,he.rotationDirection===0&&(pt=-pt),L===S.ADVANCED&&(pt=-pt);var Tl=Math.cos(pt),Lo=Math.sin(pt);rr=new gt(Tl,Lo,-Lo,Tl,0,0)}else pt&&pt instanceof gt&&(rr=pt);L!==S.ADVANCED||rr||(rr=cr),(Bt=he.charSpace||Ao)!==void 0&&(Mr+=W(z(Bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),($n=he.horizontalScale)!==void 0&&(Mr+=W(100*$n)+` Tz
`),he.lang;var ri=-1,Hs=he.renderingMode!==void 0?he.renderingMode:he.stroke,Va=ir.internal.getCurrentPageInfo().pageContext;switch(Hs){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var pd=Va.usedRenderingMode!==void 0?Va.usedRenderingMode:-1;ri!==-1?Mr+=ri+` Tr
`:pd!==-1&&(Mr+=`0 Tr
`),ri!==-1&&(Va.usedRenderingMode=ri),jt=he.align||"left";var Ji,Ml=Ze*Rn,da=ir.internal.pageSize.getWidth(),pi=kt[st];Bt=he.charSpace||Ao,Rt=he.maxWidth||0,tn=Object.assign({autoencode:!0,noBOM:!0},he.flags);var fa=[],Po=function(_n){return ir.getStringUnitWidth(_n,{font:pi,charSpace:Bt,fontSize:Ze,doKerning:!1})*Ze/Ki};if(Object.prototype.toString.call(x)==="[object Array]"){var mi;tt=El(x),jt!=="left"&&(Ji=tt.map(Po));var ii,Ga=0;if(jt==="right"){M-=Ji[0],x=[],Br=tt.length;for(var ha=0;ha<Br;ha++)ha===0?(ii=Vi(M),mi=ni(ie)):(ii=z(Ga-Ji[ha]),mi=-Ml),x.push([tt[ha],ii,mi]),Ga=Ji[ha]}else if(jt==="center"){M-=Ji[0]/2,x=[],Br=tt.length;for(var gi=0;gi<Br;gi++)gi===0?(ii=Vi(M),mi=ni(ie)):(ii=z((Ga-Ji[gi])/2),mi=-Ml),x.push([tt[gi],ii,mi]),Ga=Ji[gi]}else if(jt==="left"){x=[],Br=tt.length;for(var ke=0;ke<Br;ke++)x.push(tt[ke])}else if(jt==="justify"&&pi.encoding==="Identity-H"){x=[],Br=tt.length,Rt=Rt!==0?Rt:da;for(var qe=0,De=0;De<Br;De++)if(mi=De===0?ni(ie):-Ml,ii=De===0?Vi(M):qe,De<Br-1){var mt=z((Rt-Ji[De])/(tt[De].split(" ").length-1)),St=tt[De].split(" ");x.push([St[0]+" ",ii,mi]),qe=0;for(var Wt=1;Wt<St.length;Wt++){var Bn=(Po(St[Wt-1]+" "+St[Wt])-Po(St[Wt]))*Ki+mt;Wt==St.length-1?x.push([St[Wt],Bn,0]):x.push([St[Wt]+" ",Bn,0]),qe-=Bn}}else x.push([tt[De],ii,mi]);x.push(["",qe,0])}else{if(jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Br=tt.length,Rt=Rt!==0?Rt:da,De=0;De<Br;De++)mi=De===0?ni(ie):-Ml,ii=De===0?Vi(M):0,De<Br-1?fa.push(W(z((Rt-Ji[De])/(tt[De].split(" ").length-1)))):fa.push(0),x.push([tt[De],ii,mi])}}var vn=typeof he.R2L=="boolean"?he.R2L:Ne;vn===!0&&(x=Cl(x,function(_n,Mn,ur){return[_n.split("").reverse().join(""),Mn,ur]})),ze={text:x,x:M,y:ie,options:he,mutex:{pdfEscape:hi,activeFontKey:st,fonts:kt,activeFontSize:Ze}},qt.publish("postProcessText",ze),x=ze.text,Yi=ze.mutex.isHex||!1;var To=kt[st].encoding;To!=="WinAnsiEncoding"&&To!=="StandardEncoding"||(x=Cl(x,function(_n,Mn,ur){return[Ha(_n),Mn,ur]})),tt=El(x),x=[];for(var Mo,Dr,Ss,Do=0,Ns=1,Vs=Array.isArray(tt[0])?Ns:Do,ks="",on=function(_n,Mn,ur){var Sr="";return ur instanceof gt?(ur=typeof he.angle=="number"?Zn(ur,new gt(1,0,0,1,_n,Mn)):Zn(new gt(1,0,0,1,_n,Mn),ur),L===S.ADVANCED&&(ur=Zn(new gt(1,0,0,-1,0,0),ur)),Sr=ur.join(" ")+` Tm
`):Sr=W(_n)+" "+W(Mn)+` Td
`,Sr},Xi=0;Xi<tt.length;Xi++){switch(ks="",Vs){case Ns:Ss=(Yi?"<":"(")+tt[Xi][0]+(Yi?">":")"),Mo=parseFloat(tt[Xi][1]),Dr=parseFloat(tt[Xi][2]);break;case Do:Ss=(Yi?"<":"(")+tt[Xi]+(Yi?">":")"),Mo=Vi(M),Dr=ni(ie)}fa!==void 0&&fa[Xi]!==void 0&&(ks=fa[Xi]+` Tw
`),Xi===0?x.push(ks+on(Mo,Dr,rr)+Ss):Vs===Do?x.push(ks+Ss):Vs===Ns&&x.push(ks+on(Mo,Dr,rr)+Ss)}x=Vs===Do?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Ai=`BT
/`;return Ai+=st+" "+Ze+` Tf
`,Ai+=W(Ze*Rn)+` TL
`,Ai+=qa+`
`,Ai+=Mr,Ai+=x,ee(Ai+="ET"),w[st]=!0,ir};var Uf=g.__private__.clip=g.clip=function(x){return ee(x==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Uf("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ee("n"),this};var zs=g.__private__.isValidStyle=function(x){var M=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(M=!0),M};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(x){return zs(x)&&(h=x),this};var od=g.__private__.getStyle=g.getStyle=function(x){var M=h;switch(x){case"D":case"S":M="S";break;case"F":M="f";break;case"FD":case"DF":M="B";break;case"f":case"f*":case"B":case"B*":M=x}return M},xl=g.close=function(){return ee("h"),this};g.stroke=function(){return ee("S"),this},g.fill=function(x){return bl("f",x),this},g.fillEvenOdd=function(x){return bl("f*",x),this},g.fillStroke=function(x){return bl("B",x),this},g.fillStrokeEvenOdd=function(x){return bl("B*",x),this};var bl=function(x,M){An(M)==="object"?qf(M,x):ee(x)},Yc=function(x){x===null||L===S.ADVANCED&&x===void 0||(x=od(x),ee(x))};function zf(x,M,ie,he,Me){var ze=new ef(M||this.boundingBox,ie||this.xStep,he||this.yStep,this.gState,Me||this.matrix);ze.stream=this.stream;var tt=x+"$$"+this.cloneIndex+++"$$";return Pn(tt,ze),ze}var qf=function(x,M){var ie=Qn[x.key],he=Pt[ie];if(he instanceof ju)ee("q"),ee(Wf(M)),he.gState&&g.setGState(he.gState),ee(x.matrix.toString()+" cm"),ee("/"+ie+" sh"),ee("Q");else if(he instanceof ef){var Me=new gt(1,0,0,-1,0,Ws());x.matrix&&(Me=Me.multiply(x.matrix||cr),ie=zf.call(he,x.key,x.boundingBox,x.xStep,x.yStep,Me).id),ee("q"),ee("/Pattern cs"),ee("/"+ie+" scn"),he.gState&&g.setGState(he.gState),ee(M),ee("Q")}},Wf=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},bn=g.moveTo=function(x,M){return ee(W(z(x))+" "+W(J(M))+" m"),this},dn=g.lineTo=function(x,M){return ee(W(z(x))+" "+W(J(M))+" l"),this},za=g.curveTo=function(x,M,ie,he,Me,ze){return ee([W(z(x)),W(J(M)),W(z(ie)),W(J(he)),W(z(Me)),W(J(ze)),"c"].join(" ")),this};g.__private__.line=g.line=function(x,M,ie,he,Me){if(isNaN(x)||isNaN(M)||isNaN(ie)||isNaN(he)||!zs(Me))throw new Error("Invalid arguments passed to jsPDF.line");return L===S.COMPAT?this.lines([[ie-x,he-M]],x,M,[1,1],Me||"S"):this.lines([[ie-x,he-M]],x,M,[1,1]).stroke()},g.__private__.lines=g.lines=function(x,M,ie,he,Me,ze){var tt,pt,jt,Bt,Rt,tn,$n,rr,ir,Tr,Mr,Yi;if(typeof x=="number"&&(Yi=ie,ie=M,M=x,x=Yi),he=he||[1,1],ze=ze||!1,isNaN(M)||isNaN(ie)||!Array.isArray(x)||!Array.isArray(he)||!zs(Me)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(bn(M,ie),tt=he[0],pt=he[1],Bt=x.length,Tr=M,Mr=ie,jt=0;jt<Bt;jt++)(Rt=x[jt]).length===2?(Tr=Rt[0]*tt+Tr,Mr=Rt[1]*pt+Mr,dn(Tr,Mr)):(tn=Rt[0]*tt+Tr,$n=Rt[1]*pt+Mr,rr=Rt[2]*tt+Tr,ir=Rt[3]*pt+Mr,Tr=Rt[4]*tt+Tr,Mr=Rt[5]*pt+Mr,za(tn,$n,rr,ir,Tr,Mr));return ze&&xl(),Yc(Me),this},g.path=function(x){for(var M=0;M<x.length;M++){var ie=x[M],he=ie.c;switch(ie.op){case"m":bn(he[0],he[1]);break;case"l":dn(he[0],he[1]);break;case"c":za.apply(this,he);break;case"h":xl()}}return this},g.__private__.rect=g.rect=function(x,M,ie,he,Me){if(isNaN(x)||isNaN(M)||isNaN(ie)||isNaN(he)||!zs(Me))throw new Error("Invalid arguments passed to jsPDF.rect");return L===S.COMPAT&&(he=-he),ee([W(z(x)),W(J(M)),W(z(ie)),W(z(he)),"re"].join(" ")),Yc(Me),this},g.__private__.triangle=g.triangle=function(x,M,ie,he,Me,ze,tt){if(isNaN(x)||isNaN(M)||isNaN(ie)||isNaN(he)||isNaN(Me)||isNaN(ze)||!zs(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-x,he-M],[Me-ie,ze-he],[x-Me,M-ze]],x,M,[1,1],tt,!0),this},g.__private__.roundedRect=g.roundedRect=function(x,M,ie,he,Me,ze,tt){if(isNaN(x)||isNaN(M)||isNaN(ie)||isNaN(he)||isNaN(Me)||isNaN(ze)||!zs(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Me=Math.min(Me,.5*ie),ze=Math.min(ze,.5*he),this.lines([[ie-2*Me,0],[Me*pt,0,Me,ze-ze*pt,Me,ze],[0,he-2*ze],[0,ze*pt,-Me*pt,ze,-Me,ze],[2*Me-ie,0],[-Me*pt,0,-Me,-ze*pt,-Me,-ze],[0,2*ze-he],[0,-ze*pt,Me*pt,-ze,Me,-ze]],x+Me,M,[1,1],tt,!0),this},g.__private__.ellipse=g.ellipse=function(x,M,ie,he,Me){if(isNaN(x)||isNaN(M)||isNaN(ie)||isNaN(he)||!zs(Me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*ie,tt=4/3*(Math.SQRT2-1)*he;return bn(x+ie,M),za(x+ie,M-tt,x+ze,M-he,x,M-he),za(x-ze,M-he,x-ie,M-tt,x-ie,M),za(x-ie,M+tt,x-ze,M+he,x,M+he),za(x+ze,M+he,x+ie,M+tt,x+ie,M),Yc(Me),this},g.__private__.circle=g.circle=function(x,M,ie,he){if(isNaN(x)||isNaN(M)||isNaN(ie)||!zs(he))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,M,ie,ie,he)},g.setFont=function(x,M,ie){return ie&&(M=se(M,ie)),st=wl(x,M,{disableWarning:!1}),this};var Hf=g.__private__.getFont=g.getFont=function(){return kt[wl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var x,M,ie={};for(x in At)if(At.hasOwnProperty(x))for(M in ie[x]=[],At[x])At[x].hasOwnProperty(M)&&ie[x].push(M);return ie},g.addFont=function(x,M,ie,he,Me){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Me=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(ie=se(ie,he)),Me=Me||"Identity-H",qc.call(this,x,M,ie,Me)};var Co,Kc=e.lineWidth||.200025,_l=g.__private__.getLineWidth=g.getLineWidth=function(){return Kc},ld=g.__private__.setLineWidth=g.setLineWidth=function(x){return Kc=x,ee(W(z(x))+" w"),this};g.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(x,M){if(x=x||[],M=M||0,isNaN(M)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(ie){return W(z(ie))}).join(" "),M=W(z(M)),ee("["+x+"] "+M+" d"),this};var Jc=g.__private__.getLineHeight=g.getLineHeight=function(){return Ze*Co};g.__private__.getLineHeight=g.getLineHeight=function(){return Ze*Co};var cd=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Co=x),this},vr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Co};cd(e.lineHeight);var Vi=g.__private__.getHorizontalCoordinate=function(x){return z(x)},ni=g.__private__.getVerticalCoordinate=function(x){return L===S.ADVANCED?x:bt[V].mediaBox.topRightY-bt[V].mediaBox.bottomLeftY-z(x)},ud=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(x){return W(Vi(x))},qs=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(x){return W(ni(x))},nr=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ys(nr)},g.__private__.setStrokeColor=g.setDrawColor=function(x,M,ie,he){return nr=ws({ch1:x,ch2:M,ch3:ie,ch4:he,pdfColorType:"draw",precision:2}),ee(nr),this};var Sl=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ys(Sl)},g.__private__.setFillColor=g.setFillColor=function(x,M,ie,he){return Sl=ws({ch1:x,ch2:M,ch3:ie,ch4:he,pdfColorType:"fill",precision:2}),ee(Sl),this};var qa=e.textColor||"0 g",dd=g.__private__.getTextColor=g.getTextColor=function(){return ys(qa)};g.__private__.setTextColor=g.setTextColor=function(x,M,ie,he){return qa=ws({ch1:x,ch2:M,ch3:ie,ch4:he,pdfColorType:"text",precision:3}),this};var Ao=e.charSpace,fd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ao||0)};g.__private__.setCharSpace=g.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ao=x,this};var Nl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(x){var M=g.CapJoinStyles[x];if(M===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=M,ee(M+" J"),this};var Fr=0;g.__private__.setLineJoin=g.setLineJoin=function(x){var M=g.CapJoinStyles[x];if(M===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fr=M,ee(M+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(W(z(x))+" M"),this},g.GState=Q0,g.setGState=function(x){(x=typeof x=="string"?Et[or[x]]:hd(null,x)).equals(un)||(ee("/"+x.id+" gs"),un=x)};var hd=function(x,M){if(!x||!or[x]){var ie=!1;for(var he in Et)if(Et.hasOwnProperty(he)&&Et[he].equals(M)){ie=!0;break}if(ie)M=Et[he];else{var Me="GS"+(Object.keys(Et).length+1).toString(10);Et[Me]=M,M.id=Me}return x&&(or[x]=M.id),qt.publish("addGState",M),M}};g.addGState=function(x,M){return hd(x,M),this},g.saveGraphicsState=function(){return ee("q"),mn.push({key:st,size:Ze,color:qa}),this},g.restoreGraphicsState=function(){ee("Q");var x=mn.pop();return st=x.key,Ze=x.size,qa=x.color,un=null,this},g.setCurrentTransformationMatrix=function(x){return ee(x.toString()+" cm"),this},g.comment=function(x){return ee("#"+x),this};var $r=function(x,M){var ie=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(ze){isNaN(ze)||(ie=parseFloat(ze))}});var he=M||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return he},set:function(ze){isNaN(ze)||(he=parseFloat(ze))}});var Me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Me},set:function(ze){Me=ze.toString()}}),this},Xc=function(x,M,ie,he){$r.call(this,x,M),this.type="rect";var Me=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Me},set:function(tt){isNaN(tt)||(Me=parseFloat(tt))}});var ze=he||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(tt){isNaN(tt)||(ze=parseFloat(tt))}}),this},kl=function(){this.page=zt,this.currentPage=V,this.pages=_e.slice(0),this.pagesContext=bt.slice(0),this.x=Ct,this.y=ut,this.matrix=Gt,this.width=gn(V),this.height=Ws(V),this.outputDestination=Be,this.id="",this.objectNumber=-1};kl.prototype.restore=function(){zt=this.page,V=this.currentPage,bt=this.pagesContext,_e=this.pages,Ct=this.x,ut=this.y,Gt=this.matrix,Gi(V,this.width),Qc(V,this.height),Be=this.outputDestination};var bs=function(x,M,ie,he,Me){Rr.push(new kl),zt=V=0,_e=[],Ct=x,ut=M,Gt=Me,yl([ie,he])},jl=function(x){if(lr[x])Rr.pop().restore();else{var M=new kl,ie="Xo"+(Object.keys(rn).length+1).toString(10);M.id=ie,lr[x]=ie,rn[ie]=M,qt.publish("addFormObject",M),Rr.pop().restore()}};for(var Wa in g.beginFormObject=function(x,M,ie,he,Me){return bs(x,M,ie,he,Me),this},g.endFormObject=function(x){return jl(x),this},g.doFormObject=function(x,M){var ie=rn[lr[x]];return ee("q"),ee(M.toString()+" cm"),ee("/"+ie.id+" Do"),ee("Q"),this},g.getFormObject=function(x){var M=rn[lr[x]];return{x:M.x,y:M.y,width:M.width,height:M.height,matrix:M.matrix}},g.save=function(x,M){return x=x||"generated.pdf",(M=M||{}).returnPromise=M.returnPromise||!1,M.returnPromise===!1?(Su(jo(Us()),x),typeof Su.unload=="function"&&It.setTimeout&&setTimeout(Su.unload,911),this):new Promise(function(ie,he){try{var Me=Su(jo(Us()),x);typeof Su.unload=="function"&&It.setTimeout&&setTimeout(Su.unload,911),ie(Me)}catch(ze){he(ze.message)}})},Dt.API)Dt.API.hasOwnProperty(Wa)&&(Wa==="events"&&Dt.API.events.length?function(x,M){var ie,he,Me;for(Me=M.length-1;Me!==-1;Me--)ie=M[Me][0],he=M[Me][1],x.subscribe.apply(x,[ie].concat(typeof he=="function"?[he]:he))}(qt,Dt.API.events):g[Wa]=Dt.API[Wa]);var gn=g.getPageWidth=function(x){return(bt[x=x||V].mediaBox.topRightX-bt[x].mediaBox.bottomLeftX)/Ue},Gi=g.setPageWidth=function(x,M){bt[x].mediaBox.topRightX=M*Ue+bt[x].mediaBox.bottomLeftX},Ws=g.getPageHeight=function(x){return(bt[x=x||V].mediaBox.topRightY-bt[x].mediaBox.bottomLeftY)/Ue},Qc=g.setPageHeight=function(x,M){bt[x].mediaBox.topRightY=M*Ue+bt[x].mediaBox.bottomLeftY};return g.internal={pdfEscape:hi,getStyle:od,getFont:Hf,getFontSize:ce,getCharSpace:fd,getTextColor:dd,getLineHeight:Jc,getLineHeightFactor:vr,getLineWidth:_l,write:Qe,getHorizontalCoordinate:Vi,getVerticalCoordinate:ni,getCoordinateString:ud,getVerticalCoordinateString:qs,collections:{},newObject:On,newAdditionalObject:Wi,newObjectDeferred:Tn,newObjectDeferredBegin:er,getFilters:xs,putStream:Hi,events:qt,scaleFactor:Ue,pageSize:{getWidth:function(){return gn(V)},setWidth:function(x){Gi(V,x)},getHeight:function(){return Ws(V)},setHeight:function(x){Qc(V,x)}},encryptionOptions:p,encryption:Wr,getEncryptor:$f,output:Eo,getNumberOfPages:rd,pages:_e,out:ee,f2:oe,f3:R,getPageInfo:ad,getPageInfoByObjId:Ot,getCurrentPageInfo:Bf,getPDFVersion:k,Point:$r,Rectangle:Xc,Matrix:gt,hasHotfix:Gc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return gn(V)},set:function(x){Gi(V,x)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ws(V)},set:function(x){Qc(V,x)},enumerable:!0,configurable:!0}),td.call(g,Ve),st="F1",Wc(i,n),qt.publish("initialized"),g}Bd.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Bd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bd.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Bd.prototype.processOwnerPassword=function(e,t){return vy(gy(t).substr(0,5),e)},Bd.prototype.encryptor=function(e,t){var n=gy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return vy(n,r)}},Q0.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||An(e)!==An(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Dt.API={events:[]},Dt.version="3.0.1";var xr=Dt.API,X5=1,Ku=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ht=function(e){return e.toFixed(2)},nc=function(e){return e.toFixed(5)};xr.__acroform__={};var ms=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},O3=function(e){return e*X5},oo=function(e){var t=new E6,n=xt.internal.getHeight(e)||0,r=xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ht(r)),Number(Ht(n))],t},X$=xr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Q$=xr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Z$=xr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Cr=xr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Z$(e,t-1)},Ar=xr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return X$(e,t-1)},Lr=xr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Q$(e,t-1)},eB=xr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Ht(c.lowerLeft_X)),Number(Ht(c.lowerLeft_Y)),Number(Ht(c.upperRight_X)),Number(Ht(c.upperRight_Y))]},tB=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=yy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Ht(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=oo(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},yy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,a=xt.internal.getHeight(e)||0;a=a<0?-a:a;var l=xt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(R,z,K){if(R+1<i.length){var J=z+" "+i[R+1][0];return Bm(J,e,K).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var h,p,m=Bm("3",e,s).height,w=e.multiline?a-s:(a-m)/2,g=w+=2,N=0,k=0,C=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Bm(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var _="",S=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var O=!1;if(i[L].length!==1&&C!==i[L].length-1){if((m+2)*(S+2)+2>a)continue e;_+=i[L][C],O=!0,k=L,L--}else{_=(_+=i[L][C]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var Y=parseInt(L),se=c(Y,_,s),W=L>=i.length-1;if(se&&!W){_+=" ",C=0;continue}if(se||W){if(W)k=Y;else if(e.multiline&&(m+2)*(S+2)+2>a)continue e}else{if(!e.multiline||(m+2)*(S+2)+2>a)continue e;k=Y}}for(var I="",re=N;re<=k;re++){var oe=i[re];if(e.multiline){if(re===k){I+=oe[C]+" ",C=(C+1)%oe.length;continue}if(re===N){I+=oe[oe.length-1]+" ";continue}}I+=oe[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,p=Bm(I,e,s).width,e.textAlign){case"right":h=l-p-2;break;case"center":h=(l-p)/2;break;case"left":default:h=2}t+=Ht(h)+" "+Ht(g)+` Td
`,t+="("+Ku(I)+`) Tj
`,t+=-Ht(h)+` 0 Td
`,g=-(s+2),p=0,N=O?k:k+1,S++,_=""}break}return r.text=t,r.fontSize=s,r},Bm=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},nB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},rB=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},iB=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),An(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},sB=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ba.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(nB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new C6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&rB(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],h=l.Rect;if(l.Rect&&(l.Rect=eB(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=xt.createDefaultAppearanceStream(l),An(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=h,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=tB(l);c.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var w in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(w)){var g=l.appearanceStreamContent[w];if(m+="/"+w+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var N=g[a];typeof N=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&iB(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},j6=xr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),An(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Ku(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Ku(r(e))+")"},mo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mo.prototype.toString=function(){return this.objId+" 0 R"},mo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},mo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:j6(i,this.objId,this.scope)}):i instanceof mo?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var E6=function(){mo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ms(E6,mo);var C6=function(){mo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ku(n(e))+")"}},set:function(n){e=n}})};ms(C6,mo);var Ba=function e(){mo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Cr(t,3)},set:function(_){_?this.F=Ar(t,3):this.F=Lr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Z0)return;s="FieldObject"+e.FieldNum++}var _=function(S){return S};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Ku(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/X5:h},set:function(_){h=_}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof Z0||this instanceof Ou))return Rv(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=_}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Xr?w:Rv(w,this.objId,this.scope)},set:function(_){_=_.toString(),w=this instanceof Xr?_:_.substr(0,1)==="("?Fd(_.substr(1,_.length-2)):Fd(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Fd(w.substr(1,w.length-1)):w},set:function(_){_=_.toString(),w=this instanceof Xr?"/"+_:_}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Xr?g:Rv(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=this instanceof Xr?_:_.substr(0,1)==="("?Fd(_.substr(1,_.length-2)):Fd(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Fd(g.substr(1,g.length-1)):g},set:function(_){_=_.toString(),g=this instanceof Xr?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(_){_=!!_,k=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(_){N=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,1)},set:function(_){_?this.Ff=Ar(this.Ff,1):this.Ff=Lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,2)},set:function(_){_?this.Ff=Ar(this.Ff,2):this.Ff=Lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,3)},set:function(_){_?this.Ff=Ar(this.Ff,3):this.Ff=Lr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');C=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(C){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};ms(Ba,mo);var uf=function(){Ba.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return j6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var c,h=[];c=a.exec(s);)h.push(c[l]);return h}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,18)},set:function(n){n?this.Ff=Ar(this.Ff,18):this.Ff=Lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ar(this.Ff,19):this.Ff=Lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,20)},set:function(n){n?(this.Ff=Ar(this.Ff,20),t.sort()):this.Ff=Lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,22)},set:function(n){n?this.Ff=Ar(this.Ff,22):this.Ff=Lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,23)},set:function(n){n?this.Ff=Ar(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,27)},set:function(n){n?this.Ff=Ar(this.Ff,27):this.Ff=Lr(this.Ff,27)}}),this.hasAppearanceStream=!1};ms(uf,Ba);var df=function(){uf.call(this),this.fontName="helvetica",this.combo=!1};ms(df,uf);var ff=function(){df.call(this),this.combo=!0};ms(ff,df);var c0=function(){ff.call(this),this.edit=!0};ms(c0,ff);var Xr=function(){Ba.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,15)},set:function(n){n?this.Ff=Ar(this.Ff,15):this.Ff=Lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,16)},set:function(n){n?this.Ff=Ar(this.Ff,16):this.Ff=Lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,17)},set:function(n){n?this.Ff=Ar(this.Ff,17):this.Ff=Lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,26)},set:function(n){n?this.Ff=Ar(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Ku(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){An(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ms(Xr,Ba);var u0=function(){Xr.call(this),this.pushButton=!0};ms(u0,Xr);var hf=function(){Xr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ms(hf,Xr);var Z0=function(){var e,t;Ba.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Ku(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){An(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ms(Z0,Ba),hf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},hf.prototype.createOption=function(e){var t=new Z0;return t.Parent=this,t.optionName=e,this.Kids.push(t),aB.call(this.scope,t),t};var d0=function(){Xr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};ms(d0,Xr);var Ou=function(){Ba.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,13)},set:function(t){t?this.Ff=Ar(this.Ff,13):this.Ff=Lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,21)},set:function(t){t?this.Ff=Ar(this.Ff,21):this.Ff=Lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,23)},set:function(t){t?this.Ff=Ar(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,24)},set:function(t){t?this.Ff=Ar(this.Ff,24):this.Ff=Lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,25)},set:function(t){t?this.Ff=Ar(this.Ff,25):this.Ff=Lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,26)},set:function(t){t?this.Ff=Ar(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ms(Ou,Ba);var f0=function(){Ou.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,14)},set:function(e){e?this.Ff=Ar(this.Ff,14):this.Ff=Lr(this.Ff,14)}}),this.password=!0};ms(f0,Ou);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=yy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ht(xt.internal.getWidth(e))+" "+Ht(xt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ht(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=xt.internal.getHeight(e),a=xt.internal.getWidth(e),l=yy(e,e.caption);return i.push("1 g"),i.push("0 0 "+Ht(a)+" "+Ht(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ht(a-1)+" "+Ht(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Ht(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ht(xt.internal.getWidth(e))+" "+Ht(xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Circle.YesNormal,t.D[e]=xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=xt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+nc(xt.internal.getWidth(e)/2)+" "+nc(xt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*xt.internal.Bezier_C).toFixed(5)),a=Number((r*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nc(xt.internal.getWidth(e)/2)+" "+nc(xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+nc(xt.internal.getWidth(e)/2)+" "+nc(xt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nc(xt.internal.getWidth(e)/2)+" "+nc(xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Cross.YesNormal,t.D[e]=xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=xt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ht(xt.internal.getWidth(e)-2)+" "+Ht(xt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ht(r.x1.x)+" "+Ht(r.x1.y)+" m"),n.push(Ht(r.x2.x)+" "+Ht(r.x2.y)+" l"),n.push(Ht(r.x4.x)+" "+Ht(r.x4.y)+" m"),n.push(Ht(r.x3.x)+" "+Ht(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=xt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ht(xt.internal.getWidth(e))+" "+Ht(xt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ht(xt.internal.getWidth(e)-2)+" "+Ht(xt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ht(n.x1.x)+" "+Ht(n.x1.y)+" m"),r.push(Ht(n.x2.x)+" "+Ht(n.x2.y)+" l"),r.push(Ht(n.x4.x)+" "+Ht(n.x4.y)+" m"),r.push(Ht(n.x3.x)+" "+Ht(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ht(xt.internal.getWidth(e))+" "+Ht(xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=xt.internal.getWidth(e),n=xt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},xt.internal.getWidth=function(e){var t=0;return An(e)==="object"&&(t=O3(e.Rect[2])),t},xt.internal.getHeight=function(e){var t=0;return An(e)==="object"&&(t=O3(e.Rect[3])),t};var aB=xr.addField=function(e){if(sB(this,e),!(e instanceof Ba))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};xr.AcroFormChoiceField=uf,xr.AcroFormListBox=df,xr.AcroFormComboBox=ff,xr.AcroFormEditBox=c0,xr.AcroFormButton=Xr,xr.AcroFormPushButton=u0,xr.AcroFormRadioButton=hf,xr.AcroFormCheckBox=d0,xr.AcroFormTextField=Ou,xr.AcroFormPasswordField=f0,xr.AcroFormAppearance=xt,xr.AcroForm={ChoiceField:uf,ListBox:df,ComboBox:ff,EditBox:c0,Button:Xr,PushButton:u0,RadioButton:hf,CheckBox:d0,TextField:Ou,PasswordField:f0,Appearance:xt},Dt.AcroForm={ChoiceField:uf,ListBox:df,ComboBox:ff,EditBox:c0,Button:Xr,PushButton:u0,RadioButton:hf,CheckBox:d0,TextField:Ou,PasswordField:f0,Appearance:xt};function A6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(R,z){var K,J,ye,pe,X,F=t;if((z=z||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(se(R))for(X in n)for(ye=n[X],K=0;K<ye.length;K+=1){for(pe=!0,J=0;J<ye[K].length;J+=1)if(ye[K][J]!==void 0&&ye[K][J]!==R[J]){pe=!1;break}if(pe===!0){F=X;break}}else for(X in n)for(ye=n[X],K=0;K<ye.length;K+=1){for(pe=!0,J=0;J<ye[K].length;J+=1)if(ye[K][J]!==void 0&&ye[K][J]!==R.charCodeAt(J)){pe=!1;break}if(pe===!0){F=X;break}}return F===t&&z!==t&&(F=z),F},i=function R(z){for(var K=this.internal.write,J=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:z.width}),pe.push({key:"Height",value:z.height}),z.colorSpace===C.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===C.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var X="",F=0,U=z.transparency.length;F<U;F++)X+=z.transparency[F]+" "+z.transparency[F]+" ";pe.push({key:"Mask",value:"["+X+"]"})}z.sMask!==void 0&&pe.push({key:"SMask",value:z.objectId+1+" 0 R"});var ae=z.filter!==void 0?["/"+z.filter]:void 0;if(J({data:z.data,additionalKeyValues:pe,alreadyAppliedFilters:ae,objectId:z.objectId}),K("endobj"),"sMask"in z&&z.sMask!==void 0){var Le="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,P={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:Le,data:z.sMask};"filter"in z&&(P.filter=z.filter),R.call(this,P)}if(z.colorSpace===C.INDEXED){var V=this.internal.newObject();J({data:I(new Uint8Array(z.palette)),objectId:V}),K("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var z in R)i.call(this,R[z])},a=function(){var R,z=this.internal.collections.addImage_images,K=this.internal.write;for(var J in z)K("/I"+(R=z[J]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},h=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(R){return typeof e["process"+R.toUpperCase()]=="function"},m=function(R){return An(R)==="object"&&R.nodeType===1},w=function(R,z){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var K=""+R.getAttribute("src");if(K.indexOf("data:image/")===0)return Uh(unescape(K).split("base64,").pop());var J=e.loadFile(K,!0);if(J!==void 0)return J}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ye;switch(z){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;case"JPEG":case"JPG":default:ye="image/jpeg"}return Uh(R.toDataURL(ye,1).split("base64,").pop())}},g=function(R){var z=this.internal.collections.addImage_images;if(z){for(var K in z)if(R===z[K].alias)return z[K]}},N=function(R,z,K){return R||z||(R=-96,z=-96),R<0&&(R=-1*K.width*72/R/this.internal.scaleFactor),z<0&&(z=-1*K.height*72/z/this.internal.scaleFactor),R===0&&(R=z*K.width/K.height),z===0&&(z=R*K.height/K.width),[R,z]},k=function(R,z,K,J,ye,pe){var X=N.call(this,K,J,ye),F=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,ae=c.call(this);if(K=X[0],J=X[1],ae[ye.index]=ye,pe){pe*=Math.PI/180;var Le=Math.cos(pe),P=Math.sin(pe),V=function(le){return le.toFixed(4)},ne=[V(Le),V(P),V(-1*P),V(Le),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,F(R),U(z+J),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([F(K),"0","0",F(J),"0","0","cm"].join(" "))):this.internal.write([F(K),"0","0",F(J),F(R),U(z+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},C=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(R){var z,K,J=0;if(typeof R=="string")for(K=R.length,z=0;z<K;z++)J=(J<<5)-J+R.charCodeAt(z),J|=0;else if(se(R))for(K=R.byteLength/2,z=0;z<K;z++)J=(J<<5)-J+R[z],J|=0;return J},L=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var z=!0;return R.length===0&&(z=!1),R.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(z=!1),z},O=e.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var z=R.indexOf(",");return z<0?null:R.substring(0,z).trim().endsWith("base64")?R.substring(z+1):null},Y=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return Y()&&R instanceof ArrayBuffer};var se=e.__addimage__.isArrayBufferView=function(R){return Y()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},W=e.__addimage__.binaryStringToUint8Array=function(R){for(var z=R.length,K=new Uint8Array(z),J=0;J<z;J++)K[J]=R.charCodeAt(J);return K},I=e.__addimage__.arrayBufferToBinaryString=function(R){for(var z="",K=se(R)?R:new Uint8Array(R),J=0;J<K.length;J+=8192)z+=String.fromCharCode.apply(null,K.subarray(J,J+8192));return z};e.addImage=function(){var R,z,K,J,ye,pe,X,F,U;if(typeof arguments[1]=="number"?(z=t,K=arguments[1],J=arguments[2],ye=arguments[3],pe=arguments[4],X=arguments[5],F=arguments[6],U=arguments[7]):(z=arguments[1],K=arguments[2],J=arguments[3],ye=arguments[4],pe=arguments[5],X=arguments[6],F=arguments[7],U=arguments[8]),An(R=arguments[0])==="object"&&!m(R)&&"imageData"in R){var ae=R;R=ae.imageData,z=ae.format||z||t,K=ae.x||K||0,J=ae.y||J||0,ye=ae.w||ae.width||ye,pe=ae.h||ae.height||pe,X=ae.alias||X,F=ae.compression||F,U=ae.rotation||ae.angle||U}var Le=this.internal.getFilters();if(F===void 0&&Le.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(K)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=re.call(this,R,z,X,F);return k.call(this,K,J,ye,pe,P,U),this};var re=function(R,z,K,J){var ye,pe,X;if(typeof R=="string"&&r(R)===t){R=unescape(R);var F=oe(R,!1);(F!==""||(F=e.loadFile(R,!0))!==void 0)&&(R=F)}if(m(R)&&(R=w(R,z)),z=r(R,z),!p(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((X=K)==null||X.length===0)&&(K=function(U){return typeof U=="string"||se(U)?S(U):se(U.data)?S(U.data):null}(R)),(ye=g.call(this,K))||(Y()&&(R instanceof Uint8Array||z==="RGBA"||(pe=R,R=W(R))),ye=this["process"+z.toUpperCase()](R,h.call(this),K,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:_.NONE}(J),pe)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},oe=e.__addimage__.convertBase64ToBinaryString=function(R,z){z=typeof z!="boolean"||z;var K,J="";if(typeof R=="string"){var ye;K=(ye=O(R))!==null&&ye!==void 0?ye:R;try{J=Uh(K)}catch(pe){if(z)throw L(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(R){var z,K,J="";if(m(R)&&(R=w(R)),typeof R=="string"&&r(R)===t&&((J=oe(R,!1))===""&&(J=e.loadFile(R)||""),R=J),K=r(R),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(!Y()||R instanceof Uint8Array||(R=W(R)),!(z=this["process"+K.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=K,z}})(Dt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Dt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,p=!1,m=0;m<h.length&&!p;m++)switch((r=h[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){r=h[w];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(k.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(_(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(_(S))+") >>",k.content=s;var L=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(k.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var se=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+se+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:h(r),w:c(n+i),h:h(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,l,c=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(h*p)}else l=c,a=h;return this.text(n,r,i,s),i+=.2*h,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-h,l,a,s),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Dt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},l=e.__arabicParser__.isArabicEndLetter=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(k){return a(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=1};var h=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(k){var C=0,_=n,S="",L=0;for(C=0;C<k.length;C+=1)_[k.charCodeAt(C)]!==void 0?(L++,typeof(_=_[k.charCodeAt(C)])=="number"&&(S+=String.fromCharCode(_),_=n,L=0),C===k.length-1&&(_=n,S+=k.charAt(C-(L-1)),C-=L-1,L=0)):(_=n,S+=k.charAt(C-L),C-=L,L=0);return S};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(k,C,_){return a(k)?s(k)===!1?-1:!h(k)||!a(C)&&!a(_)||!a(_)&&l(C)||l(k)&&!a(C)||l(k)&&c(C)||l(k)&&l(C)?0:p(k)&&a(C)&&!l(C)&&a(_)&&h(_)?3:l(k)||!a(_)?1:2:-1},g=function(k){var C=0,_=0,S=0,L="",O="",Y="",se=(k=k||"").split("\\s+"),W=[];for(C=0;C<se.length;C+=1){for(W.push(""),_=0;_<se[C].length;_+=1)L=se[C][_],O=se[C][_-1],Y=se[C][_+1],a(L)?(S=w(L,O,Y),W[C]+=S!==-1?String.fromCharCode(t[L.charCodeAt(0)][S]):L):W[C]+=L;W[C]=m(W[C])}return W.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var k,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(C)){var S=0;for(_=[],S=0;S<C.length;S+=1)Array.isArray(C[S])?_.push([g(C[S][0]),C[S][1],C[S][2]]):_.push([g(C[S])]);k=_}else k=g(C);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",N])}(Dt.API),Dt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Dt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(k){c=k}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(k){h=k}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(k){N=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,h){r.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),m=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,g=0,N=0,k=0,C=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var _=h.maxWidth;_>0?typeof c=="string"?c=this.splitTextToSize(c,_):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,O){return L.concat(C.splitTextToSize(O,_))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)g<(k=this.getStringUnitWidth(c[S],{font:m})*p)&&(g=k);return g!==0&&(N=c.length),{w:g/=w,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,g&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,h,p,m,w){if(r.call(this),!p)throw new Error("No data for PDF table.");var g,N,k,C,_=[],S=[],L=[],O={},Y={},se=[],W=[],I=(w=w||{}).autoSize||!1,re=w.printHeaders!==!1,oe=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,R=w.margins||Object.assign({width:this.getPageWidth()},t),z=typeof w.padding=="number"?w.padding:3,K=w.headerBackgroundColor||"#c8c8c8",J=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=re,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=oe,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=J,this.setFontSize(oe),m==null)S=_=Object.keys(p[0]),L=_.map(function(){return"left"});else if(Array.isArray(m)&&An(m[0])==="object")for(_=m.map(function(ae){return ae.name}),S=m.map(function(ae){return ae.prompt||ae.name||""}),L=m.map(function(ae){return ae.align||"left"}),g=0;g<m.length;g+=1)Y[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(S=_=m,L=_.map(function(){return"left"}));if(I||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<_.length;g+=1){for(O[C=_[g]]=p.map(function(ae){return ae[C]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=O[C],this.setFont(void 0,"normal"),k=0;k<N.length;k+=1)se.push(this.getTextDimensions(N[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[C]=Math.max.apply(null,se)+z+z,se=[]}if(re){var ye={};for(g=0;g<_.length;g+=1)ye[_[g]]={},ye[_[g]].text=S[g],ye[_[g]].align=L[g];var pe=l.call(this,ye,Y);W=_.map(function(ae){return new s(c,h,Y[ae],pe,ye[ae].text,void 0,ye[ae].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var X=m.reduce(function(ae,Le){return ae[Le.name]=Le.align,ae},{});for(g=0;g<p.length;g+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:g,data:p[g]},this);var F=l.call(this,p[g],Y);for(k=0;k<_.length;k+=1){var U=p[g][_[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:g,col:k,data:U},this),a.call(this,new s(c,h,Y[_[k]],F,U,g+2,X[_[k]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var l=function(c,h){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,h[g]-p-p)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/w+p+p},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){p=this.internal.__cell__.tableHeaderRow[g].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(N)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(Dt.API);var L6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},P6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],wy=A6(P6),T6=[100,200,300,400,500,600,700,800,900],oB=A6(T6);function xy(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return L6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof wy[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function R3(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var lB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},F3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $3(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function cB(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},lB,n.genericFontFamilies||{}),s=null,a=null,l=0;l<t.length;++l)if(i[(s=xy(t[l])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+$3(s)+"' and default family '"+r+"'.");if(a=function(c,h){if(h[c])return h[c];var p=wy[c],m=p<=wy.normal?-1:1,w=R3(h,P6,p,m);if(!w)throw new Error("Could not find a matching font-stretch value for "+c);return w}(s.stretch,a),a=function(c,h){if(h[c])return h[c];for(var p=L6[c],m=0;m<p.length;++m)if(h[p[m]])return h[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,h){if(h[c])return h[c];if(c===400&&h[500])return h[500];if(c===500&&h[400])return h[400];var p=oB[c],m=R3(h,T6,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+$3(s)+"'.");return a}function B3(e){return e.trimLeft()}function uB(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function dB(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Um,U3,z3,Fv=["times"];(function(e){var t,n,r,i,s,a,l,c,h,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,h=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=P;Object.defineProperty(this,"pdf",{get:function(){return V}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(xe){ne=!!xe}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(xe){le=!!xe}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(xe){isNaN(xe)||(de=xe)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(xe){isNaN(xe)||(Ae=xe)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(xe){var ee;typeof xe=="number"?ee=[xe,xe,xe,xe]:((ee=new Array(4))[0]=xe[0],ee[1]=xe.length>=2?xe[1]:ee[0],ee[2]=xe.length>=3?xe[2]:ee[0],ee[3]=xe.length>=4?xe[3]:ee[1]),h.margin=ee}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(xe){Ee=xe}});var Z=0;Object.defineProperty(this,"lastBreak",{get:function(){return Z},set:function(xe){Z=xe}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(xe){je=xe}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(xe){xe instanceof p&&(h=xe)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(xe){h.path=xe}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(xe){_e=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var ee;ee=w(xe),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var ee=w(xe);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Re=null;function Be(xe,ee){if(Re===null){var Qe=function(Je){var Ve=[];return Object.keys(Je).forEach(function(Ze){Je[Ze].forEach(function(be){var ce=null;switch(be){case"bold":ce={family:Ze,weight:"bold"};break;case"italic":ce={family:Ze,style:"italic"};break;case"bolditalic":ce={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":ce={family:Ze}}ce!==null&&(ce.ref={name:Ze,style:be},Ve.push(ce))})}),Ve}(xe.getFontList());Re=function(Je){for(var Ve={},Ze=0;Ze<Je.length;++Ze){var be=xy(Je[Ze]),ce=be.family,Ne=be.stretch,fe=be.style,ge=be.weight;Ve[ce]=Ve[ce]||{},Ve[ce][Ne]=Ve[ce][Ne]||{},Ve[ce][Ne][fe]=Ve[ce][Ne][fe]||{},Ve[ce][Ne][fe][ge]=be}return Ve}(Qe.concat(ee))}return Re}var We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(xe){Re=null,We=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var ee;if(this.ctx.font=xe,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var Qe=ee[1];ee[2];var Je=ee[3],Ve=ee[4];ee[5];var Ze=ee[6],be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ve)[2];Ve=Math.floor(be==="px"?parseFloat(Ve)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(Ve)*this.pdf.getFontSize():parseFloat(Ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ve);var ce=function(Fe){var st,Ue,Ct=[],ut=Fe.trim();if(ut==="")return Fv;if(ut in F3)return[F3[ut]];for(;ut!=="";){switch(Ue=null,st=(ut=B3(ut)).charAt(0)){case'"':case"'":Ue=uB(ut.substring(1),st);break;default:Ue=dB(ut)}if(Ue===null||(Ct.push(Ue[0]),(ut=B3(Ue[1]))!==""&&ut.charAt(0)!==","))return Fv;ut=ut.replace(/^,/,"")}return Ct}(Ze);if(this.fontFaces){var Ne=cB(Be(this.pdf,this.fontFaces),ce.map(function(Fe){return{family:Fe,stretch:"normal",weight:Je,style:Qe}}));this.pdf.setFont(Ne.ref.name,Ne.ref.style)}else{var fe="";(Je==="bold"||parseInt(Je,10)>=700||Qe==="bold")&&(fe="bold"),Qe==="italic"&&(fe+="italic"),fe.length===0&&(fe="normal");for(var ge="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<ce.length;ot++){if(this.pdf.internal.getFont(ce[ot],fe,{noFallback:!0,disableWarning:!0})!==void 0){ge=ce[ot];break}if(fe==="bolditalic"&&this.pdf.internal.getFont(ce[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ge=ce[ot],fe="bold";else if(this.pdf.internal.getFont(ce[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ge=ce[ot],fe="normal";break}}if(ge===""){for(var it=0;it<ce.length;it++)if(rt[ce[it]]){ge=rt[ce[it]];break}}ge=ge===""?"Times":ge,this.pdf.setFont(ge,fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){O.call(this,"fill",!1)},m.prototype.stroke=function(){O.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new a(P,V));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(P,V)},m.prototype.closePath=function(){var P=new a(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&An(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){P=new a(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.lineTo=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new a(P,V));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(ne.x,ne.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,V,ne,le){if(isNaN(ne)||isNaN(le)||isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new a(ne,le)),Ae=this.ctx.transform.applyToPoint(new a(P,V));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:de.x,y:de.y}),this.ctx.lastPoint=new a(de.x,de.y)},m.prototype.bezierCurveTo=function(P,V,ne,le,de,Ae){if(isNaN(de)||isNaN(Ae)||isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new a(de,Ae)),Z=this.ctx.transform.applyToPoint(new a(P,V)),je=this.ctx.transform.applyToPoint(new a(ne,le));this.path.push({type:"bct",x1:Z.x,y1:Z.y,x2:je.x,y2:je.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new a(Ee.x,Ee.y)},m.prototype.arc=function(P,V,ne,le,de,Ae){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le)||isNaN(de))throw Fn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new a(P,V));P=Ee.x,V=Ee.y;var Z=this.ctx.transform.applyToPoint(new a(0,ne)),je=this.ctx.transform.applyToPoint(new a(0,0));ne=Math.sqrt(Math.pow(Z.x-je.x,2)+Math.pow(Z.y-je.y,2))}Math.abs(de-le)>=2*Math.PI&&(le=0,de=2*Math.PI),this.path.push({type:"arc",x:P,y:V,radius:ne,startAngle:le,endAngle:de,counterclockwise:Ae})},m.prototype.arcTo=function(P,V,ne,le,de){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,V),this.lineTo(P+ne,V),this.lineTo(P+ne,V+le),this.lineTo(P,V+le),this.lineTo(P,V),this.lineTo(P+ne,V),this.lineTo(P,V)},m.prototype.fillRect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,V,ne,le),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},m.prototype.strokeRect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,V,ne,le),this.stroke())},m.prototype.clearRect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,V,ne,le))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(V),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(P){var V,ne,le,de;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))V=0,ne=0,le=0,de=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Ae!==null)V=parseInt(Ae[1]),ne=parseInt(Ae[2]),le=parseInt(Ae[3]),de=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)V=parseInt(Ae[1]),ne=parseInt(Ae[2]),le=parseInt(Ae[3]),de=parseFloat(Ae[4]);else{if(de=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ee=new S6(P);P=Ee.ok?Ee.toHex():"#000000"}P.length===4?(V=P.substring(1,2),V+=V,ne=P.substring(2,3),ne+=ne,le=P.substring(3,4),le+=le):(V=P.substring(1,3),ne=P.substring(3,5),le=P.substring(5,7)),V=parseInt(V,16),ne=parseInt(ne,16),le=parseInt(le,16)}}return{r:V,g:ne,b:le,a:de,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,V,ne,le){if(isNaN(V)||isNaN(ne)||typeof P!="string")throw Fn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!g.call(this)){var de=F(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;z.call(this,{text:P,x:V,y:ne,scale:Ae,angle:de,align:this.textAlign,maxWidth:le})}},m.prototype.strokeText=function(P,V,ne,le){if(isNaN(V)||isNaN(ne)||typeof P!="string")throw Fn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){le=isNaN(le)?void 0:le;var de=F(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;z.call(this,{text:P,x:V,y:ne,scale:Ae,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:le})}},m.prototype.measureText=function(P){if(typeof P!="string")throw Fn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,ne=this.pdf.internal.scaleFactor,le=V.internal.getFontSize(),de=V.getStringUnitWidth(P)*le/V.internal.scaleFactor,Ae=function(Ee){var Z=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Z}}),this};return new Ae({width:de*=Math.round(96*ne/72*1e4)/1e4})},m.prototype.scale=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new c(P,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},m.prototype.rotate=function(P){if(isNaN(P))throw Fn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.translate=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new c(1,0,0,1,P,V);this.ctx.transform=this.ctx.transform.multiply(ne)},m.prototype.transform=function(P,V,ne,le,de,Ae){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le)||isNaN(de)||isNaN(Ae))throw Fn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new c(P,V,ne,le,de,Ae);this.ctx.transform=this.ctx.transform.multiply(Ee)},m.prototype.setTransform=function(P,V,ne,le,de,Ae){P=isNaN(P)?1:P,V=isNaN(V)?0:V,ne=isNaN(ne)?0:ne,le=isNaN(le)?1:le,de=isNaN(de)?0:de,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new c(P,V,ne,le,de,Ae)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,V,ne,le,de,Ae,Ee,Z,je){var _e=this.pdf.getImageProperties(P),Re=1,Be=1,We=1,xe=1;le!==void 0&&Z!==void 0&&(We=Z/le,xe=je/de,Re=_e.width/le*Z/le,Be=_e.height/de*je/de),Ae===void 0&&(Ae=V,Ee=ne,V=0,ne=0),le!==void 0&&Z===void 0&&(Z=le,je=de),le===void 0&&Z===void 0&&(Z=_e.width,je=_e.height);for(var ee,Qe=this.ctx.transform.decompose(),Je=F(Qe.rotate.shx),Ve=new c,Ze=(Ve=(Ve=(Ve=Ve.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale)).applyToRectangle(new l(Ae-V*We,Ee-ne*xe,le*Re,de*Be)),be=C.call(this,Ze),ce=[],Ne=0;Ne<be.length;Ne+=1)ce.indexOf(be[Ne])===-1&&ce.push(be[Ne]);if(L(ce),this.autoPaging)for(var fe=ce[0],ge=ce[ce.length-1],rt=fe;rt<ge+1;rt++){this.pdf.setPage(rt);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=rt===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=rt===1?0:Fe+(rt-2)*st;if(this.ctx.clip_path.length!==0){var Ct=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ee,this.posX+this.margin[3],-Ue+it+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=Ct}var ut=JSON.parse(JSON.stringify(Ze));ut=S([ut],this.posX+this.margin[3],-Ue+it+this.ctx.prevPageLastElemOffset)[0];var Gt=(rt>fe||rt<ge)&&k.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,st,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ut.x,ut.y,ut.w,ut.h,null,null,Je),Gt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,Je)};var C=function(P,V,ne){var le=[];V=V||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":le.push(Math.floor((P.y+de)/ne)+1);break;case"arc":le.push(Math.floor((P.y+de-P.radius)/ne)+1),le.push(Math.floor((P.y+de+P.radius)/ne)+1);break;case"qct":var Ae=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);le.push(Math.floor((Ae.y+de)/ne)+1),le.push(Math.floor((Ae.y+Ae.h+de)/ne)+1);break;case"bct":var Ee=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);le.push(Math.floor((Ee.y+de)/ne)+1),le.push(Math.floor((Ee.y+Ee.h+de)/ne)+1);break;case"rect":le.push(Math.floor((P.y+de)/ne)+1),le.push(Math.floor((P.y+P.h+de)/ne)+1)}for(var Z=0;Z<le.length;Z+=1)for(;this.pdf.internal.getNumberOfPages()<le[Z];)_.call(this);return le},_=function(){var P=this.fillStyle,V=this.strokeStyle,ne=this.font,le=this.lineCap,de=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=V,this.font=ne,this.lineCap=le,this.lineWidth=de,this.lineJoin=Ae},S=function(P,V,ne){for(var le=0;le<P.length;le++)switch(P[le].type){case"bct":P[le].x2+=V,P[le].y2+=ne;case"qct":P[le].x1+=V,P[le].y1+=ne;case"mt":case"lt":case"arc":default:P[le].x+=V,P[le].y+=ne}return P},L=function(P){return P.sort(function(V,ne){return V-ne})},O=function(P,V){for(var ne,le,de=this.fillStyle,Ae=this.strokeStyle,Ee=this.lineCap,Z=this.lineWidth,je=Math.abs(Z*this.ctx.transform.scaleX),_e=this.lineJoin,Re=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),We=[],xe=0;xe<Be.length;xe++)if(Be[xe].x!==void 0)for(var ee=C.call(this,Be[xe]),Qe=0;Qe<ee.length;Qe+=1)We.indexOf(ee[Qe])===-1&&We.push(ee[Qe]);for(var Je=0;Je<We.length;Je++)for(;this.pdf.internal.getNumberOfPages()<We[Je];)_.call(this);if(L(We),this.autoPaging)for(var Ve=We[0],Ze=We[We.length-1],be=Ve;be<Ze+1;be++){this.pdf.setPage(be),this.fillStyle=de,this.strokeStyle=Ae,this.lineCap=Ee,this.lineWidth=je,this.lineJoin=_e;var ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=be===1?this.posY+this.margin[0]:this.margin[0],fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=be===1?0:fe+(be-2)*ge;if(this.ctx.clip_path.length!==0){var ot=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ne,this.posX+this.margin[3],-rt+Ne+this.ctx.prevPageLastElemOffset),Y.call(this,P,!0),this.path=ot}if(le=JSON.parse(JSON.stringify(Re)),this.path=S(le,this.posX+this.margin[3],-rt+Ne+this.ctx.prevPageLastElemOffset),V===!1||be===0){var it=(be>Ve||be<Ze)&&k.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,ge,null).clip().discardPath()),Y.call(this,P,V),it&&this.pdf.restoreGraphicsState()}this.lineWidth=Z}else this.lineWidth=je,Y.call(this,P,V),this.lineWidth=Z;this.path=Re},Y=function(P,V){if((P!=="stroke"||V||!N.call(this))&&(P==="stroke"||V||!g.call(this))){for(var ne,le,de=[],Ae=this.path,Ee=0;Ee<Ae.length;Ee++){var Z=Ae[Ee];switch(Z.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Z,deltas:[],abs:[]});break;case"lt":var je=de.length;if(Ae[Ee-1]&&!isNaN(Ae[Ee-1].x)&&(ne=[Z.x-Ae[Ee-1].x,Z.y-Ae[Ee-1].y],je>0)){for(;je>=0;je--)if(de[je-1].close!==!0&&de[je-1].begin!==!0){de[je-1].deltas.push(ne),de[je-1].abs.push(Z);break}}break;case"bct":ne=[Z.x1-Ae[Ee-1].x,Z.y1-Ae[Ee-1].y,Z.x2-Ae[Ee-1].x,Z.y2-Ae[Ee-1].y,Z.x-Ae[Ee-1].x,Z.y-Ae[Ee-1].y],de[de.length-1].deltas.push(ne);break;case"qct":var _e=Ae[Ee-1].x+2/3*(Z.x1-Ae[Ee-1].x),Re=Ae[Ee-1].y+2/3*(Z.y1-Ae[Ee-1].y),Be=Z.x+2/3*(Z.x1-Z.x),We=Z.y+2/3*(Z.y1-Z.y),xe=Z.x,ee=Z.y;ne=[_e-Ae[Ee-1].x,Re-Ae[Ee-1].y,Be-Ae[Ee-1].x,We-Ae[Ee-1].y,xe-Ae[Ee-1].x,ee-Ae[Ee-1].y],de[de.length-1].deltas.push(ne);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Z)}}le=V?null:P==="stroke"?"stroke":"fill";for(var Qe=!1,Je=0;Je<de.length;Je++)if(de[Je].arc)for(var Ve=de[Je].abs,Ze=0;Ze<Ve.length;Ze++){var be=Ve[Ze];be.type==="arc"?I.call(this,be.x,be.y,be.radius,be.startAngle,be.endAngle,be.counterclockwise,void 0,V,!Qe):K.call(this,be.x,be.y),Qe=!0}else if(de[Je].close===!0)this.pdf.internal.out("h"),Qe=!1;else if(de[Je].begin!==!0){var ce=de[Je].start.x,Ne=de[Je].start.y;J.call(this,de[Je].deltas,ce,Ne),Qe=!0}le&&re.call(this,le),V&&oe.call(this)}},se=function(P){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-ne;case"top":return P+V-ne;case"hanging":return P+V-2*ne;case"middle":return P+V/2-ne;case"ideographic":return P;case"alphabetic":default:return P}},W=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(V,ne){this.colorStops.push([V,ne])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(P,V,ne,le,de,Ae,Ee,Z,je){for(var _e=pe.call(this,ne,le,de,Ae),Re=0;Re<_e.length;Re++){var Be=_e[Re];Re===0&&(je?R.call(this,Be.x1+P,Be.y1+V):K.call(this,Be.x1+P,Be.y1+V)),ye.call(this,P,V,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}Z?oe.call(this):re.call(this,Ee)},re=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},oe=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(P,V){this.pdf.internal.out(n(P)+" "+r(V)+" m")},z=function(P){var V;switch(P.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var ne=this.pdf.getTextDimensions(P.text),le=se.call(this,P.y),de=W.call(this,le)-ne.h,Ae=this.ctx.transform.applyToPoint(new a(P.x,le)),Ee=this.ctx.transform.decompose(),Z=new c;Z=(Z=(Z=Z.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var je,_e,Re,Be=this.ctx.transform.applyToRectangle(new l(P.x,le,ne.w,ne.h)),We=Z.applyToRectangle(new l(P.x,de,ne.w,ne.h)),xe=C.call(this,We),ee=[],Qe=0;Qe<xe.length;Qe+=1)ee.indexOf(xe[Qe])===-1&&ee.push(xe[Qe]);if(L(ee),this.autoPaging)for(var Je=ee[0],Ve=ee[ee.length-1],Ze=Je;Ze<Ve+1;Ze++){this.pdf.setPage(Ze);var be=Ze===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[2],fe=Ne-this.margin[0],ge=this.pdf.internal.pageSize.width-this.margin[1],rt=ge-this.margin[3],ot=Ze===1?0:ce+(Ze-2)*fe;if(this.ctx.clip_path.length!==0){var it=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(je,this.posX+this.margin[3],-1*ot+be),Y.call(this,"fill",!0),this.path=it}var Fe=S([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-ot+be+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*P.scale),Re=this.lineWidth,this.lineWidth=Re*P.scale);var st=this.autoPaging!=="text";if(st||Fe.y+Fe.h<=Ne){if(st||Fe.y>=be&&Fe.x<=ge){var Ue=st?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ge-Fe.x)[0],Ct=S([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-ot+be+this.ctx.prevPageLastElemOffset)[0],ut=st&&(Ze>Je||Ze<Ve)&&k.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,fe,null).clip().discardPath()),this.pdf.text(Ue,Ct.x,Ct.y,{angle:P.angle,align:V,renderingMode:P.renderingMode}),ut&&this.pdf.restoreGraphicsState()}}else Fe.y<Ne&&(this.ctx.prevPageLastElemOffset+=Ne-Fe.y);P.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)}else P.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*P.scale),Re=this.lineWidth,this.lineWidth=Re*P.scale),this.pdf.text(P.text,Ae.x+this.posX,Ae.y+this.posY,{angle:P.angle,align:V,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)},K=function(P,V,ne,le){ne=ne||0,le=le||0,this.pdf.internal.out(n(P+ne)+" "+r(V+le)+" l")},J=function(P,V,ne){return this.pdf.lines(P,V,ne,null,null)},ye=function(P,V,ne,le,de,Ae,Ee,Z){this.pdf.internal.out([t(i(ne+P)),t(s(le+V)),t(i(de+P)),t(s(Ae+V)),t(i(Ee+P)),t(s(Z+V)),"c"].join(" "))},pe=function(P,V,ne,le){for(var de=2*Math.PI,Ae=Math.PI/2;V>ne;)V-=de;var Ee=Math.abs(ne-V);Ee<de&&le&&(Ee=de-Ee);for(var Z=[],je=le?-1:1,_e=V;Ee>1e-5;){var Re=_e+je*Math.min(Ee,Ae);Z.push(X.call(this,P,_e,Re)),Ee-=Math.abs(Re-_e),_e=Re}return Z},X=function(P,V,ne){var le=(ne-V)/2,de=P*Math.cos(le),Ae=P*Math.sin(le),Ee=de,Z=-Ae,je=Ee*Ee+Z*Z,_e=je+Ee*de+Z*Ae,Re=4/3*(Math.sqrt(2*je*_e)-_e)/(Ee*Ae-Z*de),Be=Ee-Re*Z,We=Z+Re*Ee,xe=Be,ee=-We,Qe=le+V,Je=Math.cos(Qe),Ve=Math.sin(Qe);return{x1:P*Math.cos(V),y1:P*Math.sin(V),x2:Be*Je-We*Ve,y2:Be*Ve+We*Je,x3:xe*Je-ee*Ve,y3:xe*Ve+ee*Je,x4:P*Math.cos(ne),y4:P*Math.sin(ne)}},F=function(P){return 180*P/Math.PI},U=function(P,V,ne,le,de,Ae){var Ee=P+.5*(ne-P),Z=V+.5*(le-V),je=de+.5*(ne-de),_e=Ae+.5*(le-Ae),Re=Math.min(P,de,Ee,je),Be=Math.max(P,de,Ee,je),We=Math.min(V,Ae,Z,_e),xe=Math.max(V,Ae,Z,_e);return new l(Re,We,Be-Re,xe-We)},ae=function(P,V,ne,le,de,Ae,Ee,Z){var je,_e,Re,Be,We,xe,ee,Qe,Je,Ve,Ze,be,ce,Ne,fe=ne-P,ge=le-V,rt=de-ne,ot=Ae-le,it=Ee-de,Fe=Z-Ae;for(_e=0;_e<41;_e++)Je=(ee=(Re=P+(je=_e/40)*fe)+je*((We=ne+je*rt)-Re))+je*(We+je*(de+je*it-We)-ee),Ve=(Qe=(Be=V+je*ge)+je*((xe=le+je*ot)-Be))+je*(xe+je*(Ae+je*Fe-xe)-Qe),_e==0?(Ze=Je,be=Ve,ce=Je,Ne=Ve):(Ze=Math.min(Ze,Je),be=Math.min(be,Ve),ce=Math.max(ce,Je),Ne=Math.max(Ne,Ve));return new l(Math.round(Ze),Math.round(be),Math.round(ce-Ze),Math.round(Ne-be))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,V,ne=(P=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:V}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Dt.API),function(e){var t=function(s){var a,l,c,h,p,m,w,g,N,k;for(l=[],c=0,h=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;h>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(k=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)-(w=p%85))/85)%85,l.push(m+33,w+33,g+33,N+33,k+33)):l.push(122);return function(C,_){for(var S=_;S>0;S--)C.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,h,p,m=String,w="length",g=255,N="charCodeAt",k="slice",C="replace";for(s[k](-2),s=s[k](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),c=[],h=0,p=(s+=a="uuuuu"[k](s[w]%5||5))[w];p>h;h+=5)l=52200625*(s[N](h)-33)+614125*(s[N](h+1)-33)+7225*(s[N](h+2)-33)+85*(s[N](h+3)-33)+(s[N](h+4)-33),c.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(_,S){for(var L=S;L>0;L--)_.pop()}(c,a[w]),m.fromCharCode.apply(m,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=py(a)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(Dt.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,h,p){var m=new XMLHttpRequest,w=0,g=function(N){var k=N.length,C=[],_=String.fromCharCode;for(w=0;w<k;w+=1)C.push(_(255&N.charCodeAt(w)));return C.join("")};if(m.open("GET",c,!h),m.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(m.onload=function(){m.status===200?p(g(this.responseText)):p(void 0)}),m.send(null),h&&m.status===200)return g(m.responseText)}(i,s,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Dt.API),function(e){function t(){return(It.html2canvas?Promise.resolve(It.html2canvas):al(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(It.DOMPurify?Promise.resolve(It.DOMPurify):al(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=An(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var h in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[h]=l.style[h];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),c);return h=(h=h.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(h,p){for(var m=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),w=h.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||m.appendChild(c(w,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(m.width=h.width,m.height=h.height,m.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(m.value=h.value),m.addEventListener("load",function(){m.scrollTop=h.scrollTop,m.scrollLeft=h.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var w=0;w<h.length;++w){var g=h[w],N=g.src.find(function(k){return k.format==="truetype"});N&&c.addFont(N.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,h){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,h){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(h,p){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,h),m}).then(h,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(h,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,l,c){if(An(a)==="object"){var h=a;a=h.orientation,l=h.unit||l,c=h.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var g,N=0,k=0;if(w.hasOwnProperty(m))N=w[m][1]/p,k=w[m][0]/p;else try{N=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",k>N&&(g=k,k=N,N=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>k&&(g=k,k=N,N=g)}return{width:k,height:N,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(xy):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(e){return z3=e,this.internal.events.subscribe("postPutResources",function(){Um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Um+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),U3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+z3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Um!==void 0&&U3!==void 0&&this.internal.out("/Names <</JavaScript "+Um+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(s=0;s<h;s++){var m=n.internal.newObject();p.push(m);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Dt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,l){var c,h=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(m){for(var w,g=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,k={width:0,height:0,numcomponents:1},C=4;C<N;C+=2){if(C+=g,t.indexOf(m.charCodeAt(C+1))!==-1){w=256*m.charCodeAt(C+5)+m.charCodeAt(C+6),k={width:256*m.charCodeAt(C+7)+m.charCodeAt(C+8),height:w,numcomponents:m.charCodeAt(C+9)};break}g=256*m.charCodeAt(C+2)+m.charCodeAt(C+3)}return k}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:h,index:r,alias:i}}return p}}(Dt.API);var $d,zm,q3,W3,H3,fB=function(){var e,t,n;function r(s){var a,l,c,h,p,m,w,g,N,k,C,_,S,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),N=(function(){var O,Y;for(Y=[],O=0;O<4;++O)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),h=this.readUInt16()||100,m.delay=1e3*p/h,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,_=0;0<=a?_<a:_>a;0<=a?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((k=c-this.transparency.indexed.length)>0)for(S=0;0<=k?S<k:S>k;0<=k?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":w=(C=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,C.slice(0,w)),this.text[g]=String.fromCharCode.apply(String,C.slice(w+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,w,g,N){var k,C,_,S,L,O,Y,se,W,I,re,oe,R,z,K,J,ye,pe,X,F,U,ae=Math.ceil((h.width-m)/g),Le=Math.ceil((h.height-w)/N),P=h.width==ae&&h.height==Le;for(z=a*ae,oe=P?l:new Uint8Array(z*Le),O=s.length,R=0,C=0;R<Le&&c<O;){switch(s[c++]){case 0:for(S=ye=0;ye<z;S=ye+=1)oe[C++]=s[c++];break;case 1:for(S=pe=0;pe<z;S=pe+=1)k=s[c++],L=S<a?0:oe[C-a],oe[C++]=(k+L)%256;break;case 2:for(S=X=0;X<z;S=X+=1)k=s[c++],_=(S-S%a)/a,K=R&&oe[(R-1)*z+_*a+S%a],oe[C++]=(K+k)%256;break;case 3:for(S=F=0;F<z;S=F+=1)k=s[c++],_=(S-S%a)/a,L=S<a?0:oe[C-a],K=R&&oe[(R-1)*z+_*a+S%a],oe[C++]=(k+Math.floor((L+K)/2))%256;break;case 4:for(S=U=0;U<z;S=U+=1)k=s[c++],_=(S-S%a)/a,L=S<a?0:oe[C-a],R===0?K=J=0:(K=oe[(R-1)*z+_*a+S%a],J=_&&oe[(R-1)*z+(_-1)*a+S%a]),Y=L+K-J,se=Math.abs(Y-L),I=Math.abs(Y-K),re=Math.abs(Y-J),W=se<=I&&se<=re?L:I<=re?K:J,oe[C++]=(k+W)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var V=((w+R*N)*h.width+m)*a,ne=R*z;for(S=0;S<ae;S+=1){for(var le=0;le<a;le+=1)l[V++]=oe[ne++];V+=(g-1)*a}}R++}}return s=W$(s),h.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,c,h,p,m,w,g;for(l=this.palette,p=this.transparency.indexed||[],h=new Uint8Array((p.length||0)+l.length),c=0,s=0,a=m=0,w=l.length;m<w;a=m+=3)h[c++]=l[a],h[c++]=l[a+1],h[c++]=l[a+2],h[c++]=(g=p[s++])!=null?g:255;return h},r.prototype.copyToImageData=function(s,a){var l,c,h,p,m,w,g,N,k,C,_;if(c=this.colors,k=null,l=this.hasAlphaChannel,this.palette.length&&(k=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(h=s.data||s).length,m=k||a,p=w=0,c===1)for(;p<N;)g=k?4*a[p/4]:w,C=m[g++],h[p++]=C,h[p++]=C,h[p++]=C,h[p++]=l?m[g++]:255,w=g;else for(;p<N;)g=k?4*a[p/4]:w,h[p++]=m[g++],h[p++]=m[g++],h[p++]=m[g++],h[p++]=l?m[g++]:255,w=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(It)==="[object Window]"){try{t=It.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,c,h,p,m,w,g;if(this.animation){for(g=[],l=p=0,m=(w=this.animation.frames).length;p<m;l=++p)a=w[l],c=s.createImageData(a.width,a.height),h=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,h),a.imageData=c,g.push(a.image=e(c));return g}},r.prototype.renderFrame=function(s,a){var l,c,h;return l=(c=this.animation.frames)[a],h=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,c,h,p,m,w=this;return l=0,m=this.animation,h=m.numFrames,c=m.frames,p=m.numPlays,(a=function(){var g,N;if(g=l++%h,N=c[g],w.renderFrame(s,g),h>1&&l/h<p)return w.animation._timeout=setTimeout(a,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hB(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=a,t+=3*a);var h=!0,p=[],m=0,w=null,g=0,N=null;for(this.width=n,this.height=r;h&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];m=e[t++]|e[t++]<<8,w=e[t++],!(1&k)&&(w=null),g=k>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var C=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,O=e[t++],Y=O>>6&1,se=1<<(7&O)+1,W=l,I=c,re=!1;O>>7&&(re=!0,W=t,I=se,t+=3*se);var oe=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}p.push({x:C,y:_,width:S,height:L,has_local_palette:re,palette_offset:W,palette_size:I,data_offset:oe,data_length:t-oe,transparent_index:w,interlaced:!!Y,delay:m,disposal:g});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(z){if(z<0||z>=p.length)throw new Error("Frame index out of range.");return p[z]},this.decodeAndBlitFrameBGRA=function(z,K){var J=this.frameInfo(z),ye=J.width*J.height,pe=new Uint8Array(ye);V3(e,J.data_offset,pe,ye);var X=J.palette_offset,F=J.transparent_index;F===null&&(F=256);var U=J.width,ae=n-U,Le=U,P=4*(J.y*n+J.x),V=4*((J.y+J.height)*n+J.x),ne=P,le=4*ae;J.interlaced===!0&&(le+=4*n*7);for(var de=8,Ae=0,Ee=pe.length;Ae<Ee;++Ae){var Z=pe[Ae];if(Le===0&&(Le=U,(ne+=le)>=V&&(le=4*ae+4*n*(de-1),ne=P+(U+ae)*(de<<1),de>>=1)),Z===F)ne+=4;else{var je=e[X+3*Z],_e=e[X+3*Z+1],Re=e[X+3*Z+2];K[ne++]=Re,K[ne++]=_e,K[ne++]=je,K[ne++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(z,K){var J=this.frameInfo(z),ye=J.width*J.height,pe=new Uint8Array(ye);V3(e,J.data_offset,pe,ye);var X=J.palette_offset,F=J.transparent_index;F===null&&(F=256);var U=J.width,ae=n-U,Le=U,P=4*(J.y*n+J.x),V=4*((J.y+J.height)*n+J.x),ne=P,le=4*ae;J.interlaced===!0&&(le+=4*n*7);for(var de=8,Ae=0,Ee=pe.length;Ae<Ee;++Ae){var Z=pe[Ae];if(Le===0&&(Le=U,(ne+=le)>=V&&(le=4*ae+4*n*(de-1),ne=P+(U+ae)*(de<<1),de>>=1)),Z===F)ne+=4;else{var je=e[X+3*Z],_e=e[X+3*Z+1],Re=e[X+3*Z+2];K[ne++]=je,K[ne++]=_e,K[ne++]=Re,K[ne++]=255}--Le}}}function V3(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,l=a+1,c=i+1,h=(1<<c)-1,p=0,m=0,w=0,g=e[t++],N=new Int32Array(4096),k=null;;){for(;p<16&&g!==0;)m|=e[t++]<<p,p+=8,g===1?g=e[t++]:--g;if(p<c)break;var C=m&h;if(m>>=c,p-=c,C!==s){if(C===a)break;for(var _=C<l?C:k,S=0,L=_;L>s;)L=N[L]>>8,++S;var O=L;if(w+S+(_!==C?1:0)>r)return void Fn.log("Warning, gif stream longer than expected.");n[w++]=O;var Y=w+=S;for(_!==C&&(n[w++]=O),L=_;S--;)L=N[L],n[--Y]=255&L,L>>=8;k!==null&&l<4096&&(N[l++]=k<<8|O,l>=h+1&&c<12&&(++c,h=h<<1|1)),k=C}else l=a+1,h=(1<<(c=i+1))-1,k=null}return w!==r&&Fn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $v(e){var t,n,r,i,s,a=Math.floor,l=new Array(64),c=new Array(64),h=new Array(64),p=new Array(64),m=new Array(65535),w=new Array(65535),g=new Array(64),N=new Array(64),k=[],C=0,_=7,S=new Array(64),L=new Array(64),O=new Array(64),Y=new Array(256),se=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(P,V){for(var ne=0,le=0,de=new Array,Ae=1;Ae<=16;Ae++){for(var Ee=1;Ee<=P[Ae];Ee++)de[V[le]]=[],de[V[le]][0]=ne,de[V[le]][1]=Ae,le++,ne++;ne*=2}return de}function X(P){for(var V=P[0],ne=P[1]-1;ne>=0;)V&1<<ne&&(C|=1<<_),ne--,--_<0&&(C==255?(F(255),F(0)):F(C),_=7,C=0)}function F(P){k.push(P)}function U(P){F(P>>8&255),F(255&P)}function ae(P,V,ne,le,de){for(var Ae,Ee=de[0],Z=de[240],je=function(Ve,Ze){var be,ce,Ne,fe,ge,rt,ot,it,Fe,st,Ue=0;for(Fe=0;Fe<8;++Fe){be=Ve[Ue],ce=Ve[Ue+1],Ne=Ve[Ue+2],fe=Ve[Ue+3],ge=Ve[Ue+4],rt=Ve[Ue+5],ot=Ve[Ue+6];var Ct=be+(it=Ve[Ue+7]),ut=be-it,Gt=ce+ot,kt=ce-ot,At=Ne+rt,mn=Ne-rt,Pt=fe+ge,Qn=fe-ge,Et=Ct+Pt,or=Ct-Pt,un=Gt+At,zt=Gt-At;Ve[Ue]=Et+un,Ve[Ue+4]=Et-un;var bt=.707106781*(zt+or);Ve[Ue+2]=or+bt,Ve[Ue+6]=or-bt;var qt=.382683433*((Et=Qn+mn)-(zt=kt+ut)),xn=.5411961*Et+qt,rn=1.306562965*zt+qt,lr=.707106781*(un=mn+kt),Rr=ut+lr,gt=ut-lr;Ve[Ue+5]=gt+xn,Ve[Ue+3]=gt-xn,Ve[Ue+1]=Rr+rn,Ve[Ue+7]=Rr-rn,Ue+=8}for(Ue=0,Fe=0;Fe<8;++Fe){be=Ve[Ue],ce=Ve[Ue+8],Ne=Ve[Ue+16],fe=Ve[Ue+24],ge=Ve[Ue+32],rt=Ve[Ue+40],ot=Ve[Ue+48];var Zn=be+(it=Ve[Ue+56]),cr=be-it,Pn=ce+ot,On=ce-ot,Tn=Ne+rt,er=Ne-rt,Wi=fe+ge,Ci=fe-ge,vs=Zn+Wi,ys=Zn-Wi,ws=Pn+Tn,xs=Pn-Tn;Ve[Ue]=vs+ws,Ve[Ue+32]=vs-ws;var Hi=.707106781*(xs+ys);Ve[Ue+16]=ys+Hi,Ve[Ue+48]=ys-Hi;var $s=.382683433*((vs=Ci+er)-(xs=On+cr)),No=.5411961*vs+$s,ul=1.306562965*xs+$s,dl=.707106781*(ws=er+On),fl=cr+dl,ua=cr-dl;Ve[Ue+40]=ua+No,Ve[Ue+24]=ua-No,Ve[Ue+8]=fl+ul,Ve[Ue+56]=fl-ul,Ue++}for(Fe=0;Fe<64;++Fe)st=Ve[Fe]*Ze[Fe],g[Fe]=st>0?st+.5|0:st-.5|0;return g}(P,V),_e=0;_e<64;++_e)N[W[_e]]=je[_e];var Re=N[0]-ne;ne=N[0],Re==0?X(le[0]):(X(le[w[Ae=32767+Re]]),X(m[Ae]));for(var Be=63;Be>0&&N[Be]==0;)Be--;if(Be==0)return X(Ee),ne;for(var We,xe=1;xe<=Be;){for(var ee=xe;N[xe]==0&&xe<=Be;)++xe;var Qe=xe-ee;if(Qe>=16){We=Qe>>4;for(var Je=1;Je<=We;++Je)X(Z);Qe&=15}Ae=32767+N[xe],X(de[(Qe<<4)+w[Ae]]),X(m[Ae]),xe++}return Be!=63&&X(Ee),ne}function Le(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(V){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var de=a((ne[le]*V+50)/100);de=Math.min(Math.max(de,1),255),l[W[le]]=de}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var Z=a((Ae[Ee]*V+50)/100);Z=Math.min(Math.max(Z,1),255),c[W[Ee]]=Z}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Re=0;Re<8;Re++)for(var Be=0;Be<8;Be++)h[_e]=1/(l[W[_e]]*je[Re]*je[Be]*8),p[_e]=1/(c[W[_e]]*je[Re]*je[Be]*8),_e++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,V){V&&Le(V),k=new Array,C=0,_=7,U(65496),U(65504),U(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),U(1),U(1),F(0),F(0),function(){U(65499),U(132),F(0);for(var ce=0;ce<64;ce++)F(l[ce]);F(1);for(var Ne=0;Ne<64;Ne++)F(c[Ne])}(),function(ce,Ne){U(65472),U(17),F(8),U(Ne),U(ce),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(P.width,P.height),function(){U(65476),U(418),F(0);for(var ce=0;ce<16;ce++)F(I[ce+1]);for(var Ne=0;Ne<=11;Ne++)F(re[Ne]);F(16);for(var fe=0;fe<16;fe++)F(oe[fe+1]);for(var ge=0;ge<=161;ge++)F(R[ge]);F(1);for(var rt=0;rt<16;rt++)F(z[rt+1]);for(var ot=0;ot<=11;ot++)F(K[ot]);F(17);for(var it=0;it<16;it++)F(J[it+1]);for(var Fe=0;Fe<=161;Fe++)F(ye[Fe])}(),U(65498),U(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var ne=0,le=0,de=0;C=0,_=7,this.encode.displayName="_encode_";for(var Ae,Ee,Z,je,_e,Re,Be,We,xe,ee=P.data,Qe=P.width,Je=P.height,Ve=4*Qe,Ze=0;Ze<Je;){for(Ae=0;Ae<Ve;){for(_e=Ve*Ze+Ae,Be=-1,We=0,xe=0;xe<64;xe++)Re=_e+(We=xe>>3)*Ve+(Be=4*(7&xe)),Ze+We>=Je&&(Re-=Ve*(Ze+1+We-Je)),Ae+Be>=Ve&&(Re-=Ae+Be-Ve+4),Ee=ee[Re++],Z=ee[Re++],je=ee[Re++],S[xe]=(se[Ee]+se[Z+256>>0]+se[je+512>>0]>>16)-128,L[xe]=(se[Ee+768>>0]+se[Z+1024>>0]+se[je+1280>>0]>>16)-128,O[xe]=(se[Ee+1280>>0]+se[Z+1536>>0]+se[je+1792>>0]>>16)-128;ne=ae(S,h,ne,t,r),le=ae(L,p,le,n,i),de=ae(O,p,de,n,i),Ae+=32}Ze+=8}if(_>=0){var be=[];be[1]=_+1,be[0]=(1<<_+1)-1,X(be)}return U(65497),new Uint8Array(k)},e=e||50,function(){for(var P=String.fromCharCode,V=0;V<256;V++)Y[V]=P(V)}(),t=pe(I,re),n=pe(z,K),r=pe(oe,R),i=pe(J,ye),function(){for(var P=1,V=2,ne=1;ne<=15;ne++){for(var le=P;le<V;le++)w[32767+le]=ne,m[32767+le]=[],m[32767+le][1]=ne,m[32767+le][0]=le;for(var de=-(V-1);de<=-P;de++)w[32767+de]=ne,m[32767+de]=[],m[32767+de][1]=ne,m[32767+de][0]=V-1+de;P<<=1,V<<=1}}(),function(){for(var P=0;P<256;P++)se[P]=19595*P,se[P+256>>0]=38470*P,se[P+512>>0]=7471*P+32768,se[P+768>>0]=-11059*P,se[P+1024>>0]=-21709*P,se[P+1280>>0]=32768*P+8421375,se[P+1536>>0]=-27439*P,se[P+1792>>0]=-5329*P}(),Le(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ka(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G3(e){function t(I){if(!I)throw Error("assert :P")}function n(I,re,oe){for(var R=0;4>R;R++)if(I[re+R]!=oe.charCodeAt(R))return!0;return!1}function r(I,re,oe,R,z){for(var K=0;K<z;K++)I[re+K]=oe[R+K]}function i(I,re,oe,R){for(var z=0;z<R;z++)I[re+z]=oe}function s(I){return new Int32Array(I)}function a(I,re){for(var oe=[],R=0;R<I;R++)oe.push(new re);return oe}function l(I,re){var oe=[];return function R(z,K,J){for(var ye=J[K],pe=0;pe<ye&&(z.push(J.length>K+1?[]:new re),!(J.length<K+1));pe++)R(z[pe],K+1,J)}(oe,0,I),oe}var c=function(){var I=this;function re(f,v){for(var b=1<<v-1>>>0;f&b;)b>>>=1;return b?(f&b-1)+b:f}function oe(f,v,b,A,T){t(!(A%b));do f[v+(A-=b)]=T;while(0<A)}function R(f,v,b,A,T){if(t(2328>=T),512>=T)var $=s(512);else if(($=s(T))==null)return 0;return function(B,q,G,te,we,Ie){var Oe,Ce,Ye=q,$e=1<<G,ve=s(16),Se=s(16);for(t(we!=0),t(te!=null),t(B!=null),t(0<G),Ce=0;Ce<we;++Ce){if(15<te[Ce])return 0;++ve[te[Ce]]}if(ve[0]==we)return 0;for(Se[1]=0,Oe=1;15>Oe;++Oe){if(ve[Oe]>1<<Oe)return 0;Se[Oe+1]=Se[Oe]+ve[Oe]}for(Ce=0;Ce<we;++Ce)Oe=te[Ce],0<te[Ce]&&(Ie[Se[Oe]++]=Ce);if(Se[15]==1)return(te=new z).g=0,te.value=Ie[0],oe(B,Ye,1,$e,te),$e;var Ge,nt=-1,He=$e-1,ht=0,ct=1,wt=1,dt=1<<G;for(Ce=0,Oe=1,we=2;Oe<=G;++Oe,we<<=1){if(ct+=wt<<=1,0>(wt-=ve[Oe]))return 0;for(;0<ve[Oe];--ve[Oe])(te=new z).g=Oe,te.value=Ie[Ce++],oe(B,Ye+ht,we,dt,te),ht=re(ht,Oe)}for(Oe=G+1,we=2;15>=Oe;++Oe,we<<=1){if(ct+=wt<<=1,0>(wt-=ve[Oe]))return 0;for(;0<ve[Oe];--ve[Oe]){if(te=new z,(ht&He)!=nt){for(Ye+=dt,Ge=1<<(nt=Oe)-G;15>nt&&!(0>=(Ge-=ve[nt]));)++nt,Ge<<=1;$e+=dt=1<<(Ge=nt-G),B[q+(nt=ht&He)].g=Ge+G,B[q+nt].value=Ye-q-nt}te.g=Oe-G,te.value=Ie[Ce++],oe(B,Ye+(ht>>G),we,dt,te),ht=re(ht,Oe)}}return ct!=2*Se[15]-1?0:$e}(f,v,b,A,T,$)}function z(){this.value=this.g=0}function K(){this.value=this.g=0}function J(){this.G=a(5,z),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Br,K)}function ye(f,v,b,A){t(f!=null),t(v!=null),t(2147483648>A),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=v,f.pa=b,f.Jd=v,f.Yc=b+A,f.Zc=4<=A?b+A-4+1:b,Ae(f)}function pe(f,v){for(var b=0;0<v--;)b|=Z(f,128)<<v;return b}function X(f,v){var b=pe(f,v);return Ee(f)?-b:b}function F(f,v,b,A){var T,$=0;for(t(f!=null),t(v!=null),t(4294967288>A),f.Sb=A,f.Ra=0,f.u=0,f.h=0,4<A&&(A=4),T=0;T<A;++T)$+=v[b+T]<<8*T;f.Ra=$,f.bb=A,f.oa=v,f.pa=b}function U(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<Tl-8>>>0,++f.bb,f.u-=8;ne(f)&&(f.h=1,f.u=0)}function ae(f,v){if(t(0<=v),!f.h&&v<=Pl){var b=V(f)&_s[v];return f.u+=v,U(f),b}return f.h=1,f.u=0}function Le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(f){return f.Ra>>>(f.u&Tl-1)>>>0}function ne(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>Tl}function le(f,v){f.u=v,f.h=ne(f)}function de(f){f.u>=Lo&&(t(f.u>=Lo),U(f))}function Ae(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function Ee(f){return pe(f,1)}function Z(f,v){var b=f.Ca;0>f.b&&Ae(f);var A=f.b,T=b*v>>>8,$=(f.I>>>A>T)+0;for($?(b-=T,f.I-=T+1<<A>>>0):b=T+1,A=b,T=0;256<=A;)T+=8,A>>=8;return A=7^T+ri[A],f.b-=A,f.Ca=(b<<A)-1,$}function je(f,v,b){f[v+0]=b>>24&255,f[v+1]=b>>16&255,f[v+2]=b>>8&255,f[v+3]=b>>0&255}function _e(f,v){return f[v+0]<<0|f[v+1]<<8}function Re(f,v){return _e(f,v)|f[v+2]<<16}function Be(f,v){return _e(f,v)|_e(f,v+2)<<16}function We(f,v){var b=1<<v;return t(f!=null),t(0<v),f.X=s(b),f.X==null?0:(f.Mb=32-v,f.Xa=v,1)}function xe(f,v){t(f!=null),t(v!=null),t(f.Xa==v.Xa),r(v.X,0,f.X,0,1<<v.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function Qe(f,v,b,A){t(b!=null),t(A!=null);var T=b[0],$=A[0];return T==0&&(T=(f*$+v/2)/v),$==0&&($=(v*T+f/2)/f),0>=T||0>=$?0:(b[0]=T,A[0]=$,1)}function Je(f,v){return f+(1<<v)-1>>>v}function Ve(f,v){return((4278255360&f)+(4278255360&v)>>>0&4278255360)+((16711935&f)+(16711935&v)>>>0&16711935)>>>0}function Ze(f,v){I[v]=function(b,A,T,$,B,q,G){var te;for(te=0;te<B;++te){var we=I[f](q[G+te-1],T,$+te);q[G+te]=Ve(b[A+te],we)}}}function be(){this.ud=this.hd=this.jd=0}function ce(f,v){return((4278124286&(f^v))>>>1)+(f&v)>>>0}function Ne(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function fe(f,v){return Ne(f+(f-v+.5>>1))}function ge(f,v,b){return Math.abs(v-b)-Math.abs(f-b)}function rt(f,v,b,A,T,$,B){for(A=$[B-1],b=0;b<T;++b)$[B+b]=A=Ve(f[v+b],A)}function ot(f,v,b,A,T){var $;for($=0;$<b;++$){var B=f[v+$],q=B>>8&255,G=16711935&(G=(G=16711935&B)+((q<<16)+q));A[T+$]=(4278255360&B)+G>>>0}}function it(f,v){v.jd=f>>0&255,v.hd=f>>8&255,v.ud=f>>16&255}function Fe(f,v,b,A,T,$){var B;for(B=0;B<A;++B){var q=v[b+B],G=q>>>8,te=q,we=255&(we=(we=q>>>16)+((f.jd<<24>>24)*(G<<24>>24)>>>5));te=255&(te=(te=te+((f.hd<<24>>24)*(G<<24>>24)>>>5))+((f.ud<<24>>24)*(we<<24>>24)>>>5)),T[$+B]=(4278255360&q)+(we<<16)+te}}function st(f,v,b,A,T){I[v]=function($,B,q,G,te,we,Ie,Oe,Ce){for(G=Ie;G<Oe;++G)for(Ie=0;Ie<Ce;++Ie)te[we++]=T(q[A($[B++])])},I[f]=function($,B,q,G,te,we,Ie){var Oe=8>>$.b,Ce=$.Ea,Ye=$.K[0],$e=$.w;if(8>Oe)for($=(1<<$.b)-1,$e=(1<<Oe)-1;B<q;++B){var ve,Se=0;for(ve=0;ve<Ce;++ve)ve&$||(Se=A(G[te++])),we[Ie++]=T(Ye[Se&$e]),Se>>=Oe}else I["VP8LMapColor"+b](G,te,Ye,$e,we,Ie,B,q,Ce)}}function Ue(f,v,b,A,T){for(b=v+b;v<b;){var $=f[v++];A[T++]=$>>16&255,A[T++]=$>>8&255,A[T++]=$>>0&255}}function Ct(f,v,b,A,T){for(b=v+b;v<b;){var $=f[v++];A[T++]=$>>16&255,A[T++]=$>>8&255,A[T++]=$>>0&255,A[T++]=$>>24&255}}function ut(f,v,b,A,T){for(b=v+b;v<b;){var $=(B=f[v++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;A[T++]=$,A[T++]=B}}function Gt(f,v,b,A,T){for(b=v+b;v<b;){var $=(B=f[v++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;A[T++]=$,A[T++]=B}}function kt(f,v,b,A,T){for(b=v+b;v<b;){var $=f[v++];A[T++]=$>>0&255,A[T++]=$>>8&255,A[T++]=$>>16&255}}function At(f,v,b,A,T,$){if($==0)for(b=v+b;v<b;)je(A,(($=f[v++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),T+=32;else r(A,T,f,v,b)}function mn(f,v){I[v][0]=I[f+"0"],I[v][1]=I[f+"1"],I[v][2]=I[f+"2"],I[v][3]=I[f+"3"],I[v][4]=I[f+"4"],I[v][5]=I[f+"5"],I[v][6]=I[f+"6"],I[v][7]=I[f+"7"],I[v][8]=I[f+"8"],I[v][9]=I[f+"9"],I[v][10]=I[f+"10"],I[v][11]=I[f+"11"],I[v][12]=I[f+"12"],I[v][13]=I[f+"13"],I[v][14]=I[f+"0"],I[v][15]=I[f+"0"]}function Pt(f){return f==Il||f==Ol||f==Rl||f==Gf}function Qn(){this.eb=[],this.size=this.A=this.fb=0}function Et(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function or(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qn,this.f.kb=new Et,this.sd=null}function un(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bt(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function qt(f,v){var b=f.T,A=v.ba.f.RGBA,T=A.eb,$=A.fb+f.ka*A.A,B=Li[v.ba.S],q=f.y,G=f.O,te=f.f,we=f.N,Ie=f.ea,Oe=f.W,Ce=v.cc,Ye=v.dc,$e=v.Mc,ve=v.Nc,Se=f.ka,Ge=f.ka+f.T,nt=f.U,He=nt+1>>1;for(Se==0?B(q,G,null,null,te,we,Ie,Oe,te,we,Ie,Oe,T,$,null,null,nt):(B(v.ec,v.fc,q,G,Ce,Ye,$e,ve,te,we,Ie,Oe,T,$-A.A,T,$,nt),++b);Se+2<Ge;Se+=2)Ce=te,Ye=we,$e=Ie,ve=Oe,we+=f.Rc,Oe+=f.Rc,$+=2*A.A,B(q,(G+=2*f.fa)-f.fa,q,G,Ce,Ye,$e,ve,te,we,Ie,Oe,T,$-A.A,T,$,nt);return G+=f.fa,f.j+Ge<f.o?(r(v.ec,v.fc,q,G,nt),r(v.cc,v.dc,te,we,He),r(v.Mc,v.Nc,Ie,Oe,He),b--):1&Ge||B(q,G,null,null,te,we,Ie,Oe,te,we,Ie,Oe,T,$+A.A,null,null,nt),b}function xn(f,v,b){var A=f.F,T=[f.J];if(A!=null){var $=f.U,B=v.ba.S,q=B==md||B==Rl;v=v.ba.f.RGBA;var G=[0],te=f.ka;G[0]=f.T,f.Kb&&(te==0?--G[0]:(--te,T[0]-=f.width),f.j+f.ka+f.T==f.o&&(G[0]=f.o-f.j-te));var we=v.eb;te=v.fb+te*v.A,f=Mn(A,T[0],f.width,$,G,we,te+(q?0:3),v.A),t(b==G),f&&Pt(B)&&Ai(we,te,q,$,G,v.A)}return 0}function rn(f){var v=f.ma,b=v.ba.S,A=11>b,T=b==Ya||b==Io||b==md||b==Vf||b==12||Pt(b);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Zc(v.Oa,f,T?11:12))return 0;if(T&&Pt(b)&&tt(),f.da)alert("todo:use_scaling");else{if(A){if(v.Ib=bt,f.Kb){if(b=f.U+1>>1,v.memory=s(f.U+2*b),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+f.U,v.Mc=v.cc,v.Nc=v.dc+b,v.Ib=qt,tt()}}else alert("todo:EmitYUV");T&&(v.Jb=xn,A&&Me())}if(A&&!Up){for(f=0;256>f;++f)va[f]=89858*(f-128)+Gs>>vd,o1[f]=-22014*(f-128)+Gs,a1[f]=-45773*(f-128),s1[f]=113618*(f-128)+Gs>>vd;for(f=lu;f<Jf;++f)v=76283*(f-16)+Gs>>vd,l1[f-lu]=Rn(v,255),c1[f-lu]=Rn(v+8>>4,15);Up=1}return 1}function lr(f){var v=f.ma,b=f.U,A=f.T;return t(!(1&f.ka)),0>=b||0>=A?0:(b=v.Ib(f,v),v.Jb!=null&&v.Jb(f,v,b),v.Dc+=b,1)}function Rr(f){f.ma.memory=null}function gt(f,v,b,A){return ae(f,8)!=47?0:(v[0]=ae(f,14)+1,b[0]=ae(f,14)+1,A[0]=ae(f,1),ae(f,3)!=0?0:!f.h)}function Zn(f,v){if(4>f)return f+1;var b=f-2>>1;return(2+(1&f)<<b)+ae(v,b)+1}function cr(f,v){return 120<v?v-120:1<=(b=((b=Zg[v-1])>>4)*f+(8-(15&b)))?b:1;var b}function Pn(f,v,b){var A=V(b),T=f[v+=255&A].g-8;return 0<T&&(le(b,b.u+8),A=V(b),v+=f[v].value,v+=A&(1<<T)-1),le(b,b.u+f[v].g),f[v].value}function On(f,v,b){return b.g+=f.g,b.value+=f.value<<v>>>0,t(8>=b.g),f.g}function Tn(f,v,b){var A=f.xc;return t((v=A==0?0:f.vc[f.md*(b>>A)+(v>>A)])<f.Wb),f.Ya[v]}function er(f,v,b,A){var T=f.ab,$=f.c*v,B=f.C;v=B+v;var q=b,G=A;for(A=f.Ta,b=f.Ua;0<T--;){var te=f.gc[T],we=B,Ie=v,Oe=q,Ce=G,Ye=(G=A,q=b,te.Ea);switch(t(we<Ie),t(Ie<=te.nc),te.hc){case 2:pd(Oe,Ce,(Ie-we)*Ye,G,q);break;case 0:var $e=we,ve=Ie,Se=G,Ge=q,nt=(dt=te).Ea;$e==0&&(Hs(Oe,Ce,null,null,1,Se,Ge),rt(Oe,Ce+1,0,0,nt-1,Se,Ge+1),Ce+=nt,Ge+=nt,++$e);for(var He=1<<dt.b,ht=He-1,ct=Je(nt,dt.b),wt=dt.K,dt=dt.w+($e>>dt.b)*ct;$e<ve;){var fn=wt,yn=dt,Zt=1;for(Va(Oe,Ce,Se,Ge-nt,1,Se,Ge);Zt<nt;){var Ut=(Zt&~ht)+He;Ut>nt&&(Ut=nt),(0,fa[fn[yn++]>>8&15])(Oe,Ce+ +Zt,Se,Ge+Zt-nt,Ut-Zt,Se,Ge+Zt),Zt=Ut}Ce+=nt,Ge+=nt,++$e&ht||(dt+=ct)}Ie!=te.nc&&r(G,q-Ye,G,q+(Ie-we-1)*Ye,Ye);break;case 1:for(Ye=Oe,ve=Ce,nt=(Oe=te.Ea)-(Ge=Oe&~(Se=(Ce=1<<te.b)-1)),$e=Je(Oe,te.b),He=te.K,te=te.w+(we>>te.b)*$e;we<Ie;){for(ht=He,ct=te,wt=new be,dt=ve+Ge,fn=ve+Oe;ve<dt;)it(ht[ct++],wt),Po(wt,Ye,ve,Ce,G,q),ve+=Ce,q+=Ce;ve<fn&&(it(ht[ct++],wt),Po(wt,Ye,ve,nt,G,q),ve+=nt,q+=nt),++we&Se||(te+=$e)}break;case 3:if(Oe==G&&Ce==q&&0<te.b){for(ve=G,Oe=Ye=q+(Ie-we)*Ye-(Ge=(Ie-we)*Je(te.Ea,te.b)),Ce=G,Se=q,$e=[],Ge=(nt=Ge)-1;0<=Ge;--Ge)$e[Ge]=Ce[Se+Ge];for(Ge=nt-1;0<=Ge;--Ge)ve[Oe+Ge]=$e[Ge];Ji(te,we,Ie,G,Ye,G,q)}else Ji(te,we,Ie,Oe,Ce,G,q)}q=A,G=b}G!=b&&r(A,b,q,G,$)}function Wi(f,v){var b=f.V,A=f.Ba+f.c*f.C,T=v-f.C;if(t(v<=f.l.o),t(16>=T),0<T){var $=f.l,B=f.Ta,q=f.Ua,G=$.width;if(er(f,T,b,A),T=q=[q],t((b=f.C)<(A=v)),t($.v<$.va),A>$.o&&(A=$.o),b<$.j){var te=$.j-b;b=$.j,T[0]+=te*G}if(b>=A?b=0:(T[0]+=4*$.v,$.ka=b-$.j,$.U=$.va-$.v,$.T=A-b,b=1),b){if(q=q[0],11>(b=f.ca).S){var we=b.f.RGBA,Ie=(A=b.S,T=$.U,$=$.T,te=we.eb,we.A),Oe=$;for(we=we.fb+f.Ma*we.A;0<Oe--;){var Ce=B,Ye=q,$e=T,ve=te,Se=we;switch(A){case ru:mi(Ce,Ye,$e,ve,Se);break;case Ya:ii(Ce,Ye,$e,ve,Se);break;case Il:ii(Ce,Ye,$e,ve,Se),Ai(ve,Se,0,$e,1,0);break;case Ka:gi(Ce,Ye,$e,ve,Se);break;case Io:At(Ce,Ye,$e,ve,Se,1);break;case Ol:At(Ce,Ye,$e,ve,Se,1),Ai(ve,Se,0,$e,1,0);break;case md:At(Ce,Ye,$e,ve,Se,0);break;case Rl:At(Ce,Ye,$e,ve,Se,0),Ai(ve,Se,1,$e,1,0);break;case Vf:Ga(Ce,Ye,$e,ve,Se);break;case Gf:Ga(Ce,Ye,$e,ve,Se),_n(ve,Se,$e,1,0);break;case Ip:ha(Ce,Ye,$e,ve,Se);break;default:t(0)}q+=G,we+=Ie}f.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=b.height)}}f.C=v,t(f.C<=f.i)}function Ci(f){var v;if(0<f.ua)return 0;for(v=0;v<f.Wb;++v){var b=f.Ya[v].G,A=f.Ya[v].H;if(0<b[1][A[1]+0].g||0<b[2][A[2]+0].g||0<b[3][A[3]+0].g)return 0}return 1}function vs(f,v,b,A,T,$){if(f.Z!=0){var B=f.qd,q=f.rd;for(t(es[f.Z]!=null);v<b;++v)es[f.Z](B,q,A,T,A,T,$),B=A,q=T,T+=$;f.qd=B,f.rd=q}}function ys(f,v){var b=f.l.ma,A=b.Z==0||b.Z==1?f.l.j:f.C;if(A=f.C<A?A:f.C,t(v<=f.l.o),v>A){var T=f.l.width,$=b.ca,B=b.tb+T*A,q=f.V,G=f.Ba+f.c*A,te=f.gc;t(f.ab==1),t(te[0].hc==3),da(te[0],A,v,q,G,$,B),vs(b,A,v,$,B,T)}f.C=f.Ma=v}function ws(f,v,b,A,T,$,B){var q=f.$/A,G=f.$%A,te=f.m,we=f.s,Ie=b+f.$,Oe=Ie;T=b+A*T;var Ce=b+A*$,Ye=280+we.ua,$e=f.Pb?q:16777216,ve=0<we.ua?we.Wa:null,Se=we.wc,Ge=Ie<Ce?Tn(we,G,q):null;t(f.C<$),t(Ce<=T);var nt=!1;e:for(;;){for(;nt||Ie<Ce;){var He=0;if(q>=$e){var ht=Ie-b;t(($e=f).Pb),$e.wd=$e.m,$e.xd=ht,0<$e.s.ua&&xe($e.s.Wa,$e.s.vb),$e=q+Fp}if(G&Se||(Ge=Tn(we,G,q)),t(Ge!=null),Ge.Qb&&(v[Ie]=Ge.qb,nt=!0),!nt)if(de(te),Ge.jc){He=te,ht=v;var ct=Ie,wt=Ge.pd[V(He)&Br-1];t(Ge.jc),256>wt.g?(le(He,He.u+wt.g),ht[ct]=wt.value,He=0):(le(He,He.u+wt.g-256),t(256<=wt.value),He=wt.value),He==0&&(nt=!0)}else He=Pn(Ge.G[0],Ge.H[0],te);if(te.h)break;if(nt||256>He){if(!nt)if(Ge.nd)v[Ie]=(Ge.qb|He<<8)>>>0;else{if(de(te),nt=Pn(Ge.G[1],Ge.H[1],te),de(te),ht=Pn(Ge.G[2],Ge.H[2],te),ct=Pn(Ge.G[3],Ge.H[3],te),te.h)break;v[Ie]=(ct<<24|nt<<16|He<<8|ht)>>>0}if(nt=!1,++Ie,++G>=A&&(G=0,++q,B!=null&&q<=$&&!(q%16)&&B(f,q),ve!=null))for(;Oe<Ie;)He=v[Oe++],ve.X[(506832829*He&4294967295)>>>ve.Mb]=He}else if(280>He){if(He=Zn(He-256,te),ht=Pn(Ge.G[4],Ge.H[4],te),de(te),ht=cr(A,ht=Zn(ht,te)),te.h)break;if(Ie-b<ht||T-Ie<He)break e;for(ct=0;ct<He;++ct)v[Ie+ct]=v[Ie+ct-ht];for(Ie+=He,G+=He;G>=A;)G-=A,++q,B!=null&&q<=$&&!(q%16)&&B(f,q);if(t(Ie<=T),G&Se&&(Ge=Tn(we,G,q)),ve!=null)for(;Oe<Ie;)He=v[Oe++],ve.X[(506832829*He&4294967295)>>>ve.Mb]=He}else{if(!(He<Ye))break e;for(nt=He-280,t(ve!=null);Oe<Ie;)He=v[Oe++],ve.X[(506832829*He&4294967295)>>>ve.Mb]=He;He=Ie,t(!(nt>>>(ht=ve).Xa)),v[He]=ht.X[nt],nt=!0}nt||t(te.h==ne(te))}if(f.Pb&&te.h&&Ie<T)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&xe(f.s.vb,f.s.Wa);else{if(te.h)break e;B!=null&&B(f,q>$?$:q),f.a=0,f.$=Ie-b}return 1}return f.a=3,0}function xs(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var v=f.Wa;v!=null&&(v.X=null),f.vb=null,t(f!=null)}function Hi(){var f=new jl;return f==null?null:(f.a=0,f.xb=au,mn("Predictor","VP8LPredictors"),mn("Predictor","VP8LPredictors_C"),mn("PredictorAdd","VP8LPredictorsAdd"),mn("PredictorAdd","VP8LPredictorsAdd_C"),pd=ot,Po=Fe,mi=Ue,ii=Ct,Ga=ut,ha=Gt,gi=kt,I.VP8LMapColor32b=Ml,I.VP8LMapColor8b=pi,f)}function $s(f,v,b,A,T){var $=1,B=[f],q=[v],G=A.m,te=A.s,we=null,Ie=0;e:for(;;){if(b)for(;$&&ae(G,1);){var Oe=B,Ce=q,Ye=A,$e=1,ve=Ye.m,Se=Ye.gc[Ye.ab],Ge=ae(ve,2);if(Ye.Oc&1<<Ge)$=0;else{switch(Ye.Oc|=1<<Ge,Se.hc=Ge,Se.Ea=Oe[0],Se.nc=Ce[0],Se.K=[null],++Ye.ab,t(4>=Ye.ab),Ge){case 0:case 1:Se.b=ae(ve,3)+2,$e=$s(Je(Se.Ea,Se.b),Je(Se.nc,Se.b),0,Ye,Se.K),Se.K=Se.K[0];break;case 3:var nt,He=ae(ve,8)+1,ht=16<He?0:4<He?1:2<He?2:3;if(Oe[0]=Je(Se.Ea,ht),Se.b=ht,nt=$e=$s(He,1,0,Ye,Se.K)){var ct,wt=He,dt=Se,fn=1<<(8>>dt.b),yn=s(fn);if(yn==null)nt=0;else{var Zt=dt.K[0],Ut=dt.w;for(yn[0]=dt.K[0][0],ct=1;ct<1*wt;++ct)yn[ct]=Ve(Zt[Ut+ct],yn[ct-1]);for(;ct<4*fn;++ct)yn[ct]=0;dt.K[0]=null,dt.K[0]=yn,nt=1}}$e=nt;break;case 2:break;default:t(0)}$=$e}}if(B=B[0],q=q[0],$&&ae(G,1)&&!($=1<=(Ie=ae(G,4))&&11>=Ie)){A.a=3;break e}var kn;if(kn=$)t:{var jn,$t,yr,ai=A,nn=B,Vr=q,wn=Ie,sr=b,oi=ai.m,dr=ai.s,Gn=[null],Gr=1,Dn=0,ts=e1[wn];n:for(;;){if(sr&&ae(oi,1)){var Ir=ae(oi,3)+2,ya=Je(nn,Ir),Oo=Je(Vr,Ir),Xa=ya*Oo;if(!$s(ya,Oo,0,ai,Gn))break n;for(Gn=Gn[0],dr.xc=Ir,jn=0;jn<Xa;++jn){var Qa=Gn[jn]>>8&65535;Gn[jn]=Qa,Qa>=Gr&&(Gr=Qa+1)}}if(oi.h)break n;for($t=0;5>$t;++$t){var In=Rp[$t];!$t&&0<wn&&(In+=1<<wn),Dn<In&&(Dn=In)}var wd=a(Gr*ts,z),qp=Gr,Wp=a(qp,J);if(Wp==null)var Za=null;else t(65536>=qp),Za=Wp;var cu=s(Dn);if(Za==null||cu==null||wd==null){ai.a=1;break n}var xd=wd;for(jn=yr=0;jn<Gr;++jn){var Ti=Za[jn],Ro=Ti.G,zl=Ti.H,Hp=0,bd=1,Xf=0;for($t=0;5>$t;++$t){In=Rp[$t],Ro[$t]=xd,zl[$t]=yr,!$t&&0<wn&&(In+=1<<wn);i:{var ql,Qf=In,Wl=ai,Hl=cu,Vp=xd,Gp=yr,Vl=0,eo=Wl.m,Yp=ae(eo,1);if(i(Hl,0,0,Qf),Yp){var Kp=ae(eo,1)+1,f1=ae(eo,1),Zf=ae(eo,f1==0?1:8);Hl[Zf]=1,Kp==2&&(Hl[Zf=ae(eo,8)]=1);var _d=1}else{var Sd=s(19),eh=ae(eo,4)+4;if(19<eh){Wl.a=3;var Gl=0;break i}for(ql=0;ql<eh;++ql)Sd[Hr[ql]]=ae(eo,3);var th=void 0,Fo=void 0,Yt=Wl,h1=Sd,Nd=Qf,Yl=Hl,kd=0,to=Yt.m,Jp=8,Mi=a(128,z);r:for(;R(Mi,0,7,h1,19);){if(ae(to,1)){var p1=2+2*ae(to,3);if((th=2+ae(to,p1))>Nd)break r}else th=Nd;for(Fo=0;Fo<Nd&&th--;){de(to);var uu=Mi[0+(127&V(to))];le(to,to.u+uu.g);var no=uu.value;if(16>no)Yl[Fo++]=no,no!=0&&(Jp=no);else{var Xp=no==16,nh=no-16,Di=Qg[nh],wa=ae(to,Op[nh])+Di;if(Fo+wa>Nd)break r;for(var rh=Xp?Jp:0;0<wa--;)Yl[Fo++]=rh}}kd=1;break r}kd||(Yt.a=3),_d=kd}(_d=_d&&!eo.h)&&(Vl=R(Vp,Gp,8,Hl,Qf)),_d&&Vl!=0?Gl=Vl:(Wl.a=3,Gl=0)}if(Gl==0)break n;if(bd&&Nr[$t]==1&&(bd=xd[yr].g==0),Hp+=xd[yr].g,yr+=Gl,3>=$t){var Kl,Jl=cu[0];for(Kl=1;Kl<In;++Kl)cu[Kl]>Jl&&(Jl=cu[Kl]);Xf+=Jl}}if(Ti.nd=bd,Ti.Qb=0,bd&&(Ti.qb=(Ro[3][zl[3]+0].value<<24|Ro[1][zl[1]+0].value<<16|Ro[2][zl[2]+0].value)>>>0,Hp==0&&256>Ro[0][zl[0]+0].value&&(Ti.Qb=1,Ti.qb+=Ro[0][zl[0]+0].value<<8)),Ti.jc=!Ti.Qb&&6>Xf,Ti.jc){var du,Es=Ti;for(du=0;du<Br;++du){var xa=du,Ks=Es.pd[xa],Xl=Es.G[0][Es.H[0]+xa];256<=Xl.value?(Ks.g=Xl.g+256,Ks.value=Xl.value):(Ks.g=0,Ks.value=0,xa>>=On(Xl,8,Ks),xa>>=On(Es.G[1][Es.H[1]+xa],16,Ks),xa>>=On(Es.G[2][Es.H[2]+xa],0,Ks),On(Es.G[3][Es.H[3]+xa],24,Ks))}}}dr.vc=Gn,dr.Wb=Gr,dr.Ya=Za,dr.yc=wd,kn=1;break t}kn=0}if(!($=kn)){A.a=3;break e}if(0<Ie){if(te.ua=1<<Ie,!We(te.Wa,Ie)){A.a=1,$=0;break e}}else te.ua=0;var Js=A,Qp=B,ro=q,jd=Js.s,Ed=jd.xc;if(Js.c=Qp,Js.i=ro,jd.md=Je(Qp,Ed),jd.wc=Ed==0?-1:(1<<Ed)-1,b){A.xb=n1;break e}if((we=s(B*q))==null){A.a=1,$=0;break e}$=($=ws(A,we,0,B,q,q,null))&&!G.h;break e}return $?(T!=null?T[0]=we:(t(we==null),t(b)),A.$=0,b||xs(te)):xs(te),$}function No(f,v){var b=f.c*f.i,A=b+v+16*v;return t(f.c<=v),f.V=s(A),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+b+v,1)}function ul(f,v){var b=f.C,A=v-b,T=f.V,$=f.Ba+f.c*b;for(t(v<=f.l.o);0<A;){var B=16<A?16:A,q=f.l.ma,G=f.l.width,te=G*B,we=q.ca,Ie=q.tb+G*b,Oe=f.Ta,Ce=f.Ua;er(f,B,T,$),ur(Oe,Ce,we,Ie,te),vs(q,b,b+B,we,Ie,G),A-=B,T+=B*f.c,b+=B}t(b==v),f.C=f.Ma=v}function dl(){this.ub=this.yd=this.td=this.Rb=0}function fl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ua(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ju(){this.Yb=function(){var f=[];return function v(b,A,T){for(var $=T[A],B=0;B<$&&(b.push(T.length>A+1?[]:0),!(T.length<A+1));B++)v(b[B],A+1,T)}(f,0,[3,11]),f}()}function hl(){this.jb=s(3),this.Wc=l([4,8],Ju),this.Xc=l([4,17],Ju)}function If(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function pl(){this.ld=this.La=this.dd=this.tc=0}function Xu(){this.Na=this.la=0}function Qu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ml(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zu(){this.uc=this.M=this.Nb=0,this.wa=Array(new pl),this.Y=0,this.ya=Array(new ml),this.aa=0,this.l=new gl}function ed(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Of(){this.cb=this.a=0,this.sc="",this.m=new Le,this.Od=new dl,this.Kc=new fl,this.ed=new If,this.Qa=new ua,this.Ic=this.$c=this.Aa=0,this.D=new Zu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Le),this.ia=0,this.pb=a(4,Qu),this.Pa=new hl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ed),this.Hd=0,this.rb=Array(new Xu),this.sb=0,this.wa=Array(new pl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ml),this.L=this.aa=0,this.gd=l([4,2],pl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rf(){var f=new Of;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,ma||(ma=vl)),f}function tr(f,v,b){return f.a==0&&(f.a=v,f.sc=b,f.cb=0),0}function Uc(f,v,b){return 3<=b&&f[v+0]==157&&f[v+1]==1&&f[v+2]==42}function zc(f,v){if(f==null)return 0;if(f.a=0,f.sc="OK",v==null)return tr(f,2,"null VP8Io passed to VP8GetHeaders()");var b=v.data,A=v.w,T=v.ha;if(4>T)return tr(f,7,"Truncated header.");var $=b[A+0]|b[A+1]<<8|b[A+2]<<16,B=f.Od;if(B.Rb=!(1&$),B.td=$>>1&7,B.yd=$>>4&1,B.ub=$>>5,3<B.td)return tr(f,3,"Incorrect keyframe parameters.");if(!B.yd)return tr(f,4,"Frame not displayable.");A+=3,T-=3;var q=f.Kc;if(B.Rb){if(7>T)return tr(f,7,"cannot parse picture header");if(!Uc(b,A,T))return tr(f,3,"Bad code word");q.c=16383&(b[A+4]<<8|b[A+3]),q.Td=b[A+4]>>6,q.i=16383&(b[A+6]<<8|b[A+5]),q.Ud=b[A+6]>>6,A+=7,T-=7,f.za=q.c+15>>4,f.Ub=q.i+15>>4,v.width=q.c,v.height=q.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i(($=f.Pa).jb,0,255,$.jb.length),t(($=f.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(B.ub>T)return tr(f,7,"bad partition length");ye($=f.m,b,A,B.ub),A+=B.ub,T-=B.ub,B.Rb&&(q.Ld=Ee($),q.Kd=Ee($)),q=f.Qa;var G,te=f.Pa;if(t($!=null),t(q!=null),q.Cb=Ee($),q.Cb){if(q.Bb=Ee($),Ee($)){for(q.Fb=Ee($),G=0;4>G;++G)q.Zb[G]=Ee($)?X($,7):0;for(G=0;4>G;++G)q.Lb[G]=Ee($)?X($,6):0}if(q.Bb)for(G=0;3>G;++G)te.jb[G]=Ee($)?pe($,8):255}else q.Bb=0;if($.Ka)return tr(f,3,"cannot parse segment header");if((q=f.ed).zd=Ee($),q.Tb=pe($,6),q.wb=pe($,3),q.Pc=Ee($),q.Pc&&Ee($)){for(te=0;4>te;++te)Ee($)&&(q.vd[te]=X($,6));for(te=0;4>te;++te)Ee($)&&(q.od[te]=X($,6))}if(f.L=q.Tb==0?0:q.zd?1:2,$.Ka)return tr(f,3,"cannot parse filter header");var we=T;if(T=G=A,A=G+we,q=we,f.Xb=(1<<pe(f.m,2))-1,we<3*(te=f.Xb))b=7;else{for(G+=3*te,q-=3*te,we=0;we<te;++we){var Ie=b[T+0]|b[T+1]<<8|b[T+2]<<16;Ie>q&&(Ie=q),ye(f.Jc[+we],b,G,Ie),G+=Ie,q-=Ie,T+=3}ye(f.Jc[+te],b,G,q),b=G<A?0:5}if(b!=0)return tr(f,b,"cannot parse partitions");for(b=pe(G=f.m,7),T=Ee(G)?X(G,4):0,A=Ee(G)?X(G,4):0,q=Ee(G)?X(G,4):0,te=Ee(G)?X(G,4):0,G=Ee(G)?X(G,4):0,we=f.Qa,Ie=0;4>Ie;++Ie){if(we.Cb){var Oe=we.Zb[Ie];we.Fb||(Oe+=b)}else{if(0<Ie){f.pb[Ie]=f.pb[0];continue}Oe=b}var Ce=f.pb[Ie];Ce.Sc[0]=Yf[Rn(Oe+T,127)],Ce.Sc[1]=iu[Rn(Oe+0,127)],Ce.Eb[0]=2*Yf[Rn(Oe+A,127)],Ce.Eb[1]=101581*iu[Rn(Oe+q,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Yf[Rn(Oe+te,117)],Ce.Qc[1]=iu[Rn(Oe+G,127)],Ce.lc=Oe+G}if(!B.Rb)return tr(f,4,"Not a key frame.");for(Ee($),B=f.Pa,b=0;4>b;++b){for(T=0;8>T;++T)for(A=0;3>A;++A)for(q=0;11>q;++q)te=Z($,Bl[b][T][A][q])?pe($,8):su[b][T][A][q],B.Wc[b][T].Yb[A][q]=te;for(T=0;17>T;++T)B.Xc[b][T]=B.Wc[b][t1[T]]}return f.kc=Ee($),f.kc&&(f.Bd=pe($,8)),f.cb=1}function vl(f,v,b,A,T,$,B){var q=v[T].Yb[b];for(b=0;16>T;++T){if(!Z(f,q[b+0]))return T;for(;!Z(f,q[b+1]);)if(q=v[++T].Yb[0],b=0,T==16)return 16;var G=v[T+1].Yb;if(Z(f,q[b+2])){var te=f,we=0;if(Z(te,(Oe=q)[(Ie=b)+3]))if(Z(te,Oe[Ie+6])){for(q=0,Ie=2*(we=Z(te,Oe[Ie+8]))+(Oe=Z(te,Oe[Ie+9+we])),we=0,Oe=Kf[Ie];Oe[q];++q)we+=we+Z(te,Oe[q]);we+=3+(8<<Ie)}else Z(te,Oe[Ie+7])?(we=7+2*Z(te,165),we+=Z(te,145)):we=5+Z(te,159);else we=Z(te,Oe[Ie+4])?3+Z(te,Oe[Ie+5]):2;q=G[2]}else we=1,q=G[1];G=B+Fl[T],0>(te=f).b&&Ae(te);var Ie,Oe=te.b,Ce=(Ie=te.Ca>>1)-(te.I>>Oe)>>31;--te.b,te.Ca+=Ce,te.Ca|=1,te.I-=(Ie+1&Ce)<<Oe,$[G]=((we^Ce)-Ce)*A[(0<T)+0]}return 16}function qc(f){var v=f.rb[f.sb-1];v.la=0,v.Na=0,i(f.zc,0,0,f.zc.length),f.ja=0}function td(f,v){if(f==null)return 0;if(v==null)return tr(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!zc(f,v))return 0;if(t(f.cb),v.ac==null||v.ac(v)){v.ob&&(f.L=0);var b=yd[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=v.v-b>>4,f.zb=v.j-b>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=v.o+15+b>>4,f.Hb=v.va+15+b>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var A=f.ed;for(b=0;4>b;++b){var T;if(f.Qa.Cb){var $=f.Qa.Lb[b];f.Qa.Fb||($+=A.Tb)}else $=A.Tb;for(T=0;1>=T;++T){var B=f.gd[b][T],q=$;if(A.Pc&&(q+=A.vd[0],T&&(q+=A.od[0])),0<(q=0>q?0:63<q?63:q)){var G=q;0<A.wb&&(G=4<A.wb?G>>2:G>>1)>9-A.wb&&(G=9-A.wb),1>G&&(G=1),B.dd=G,B.tc=2*q+G,B.ld=40<=q?2:15<=q?1:0}else B.tc=0;B.La=T}}}b=0}else tr(f,6,"Frame setup failed"),b=f.a;if(b=b==0){if(b){f.$c=0,0<f.Aa||(f.Ic=d1);e:{b=f.Ic,A=4*(G=f.za);var te=32*G,we=G+1,Ie=0<f.L?G*(0<f.Aa?2:1):0,Oe=(f.Aa==2?2:1)*G;if((B=A+832+(T=3*(16*b+yd[f.L])/2*te)+($=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=B)b=0;else{if(B>f.Vb){if(f.Vb=0,f.Ec=s(B),f.Fc=0,f.Ec==null){b=tr(f,1,"no memory during frame initialization.");break e}f.Vb=B}B=f.Ec,q=f.Fc,f.Ac=B,f.Bc=q,q+=A,f.Gd=a(te,ed),f.Hd=0,f.rb=a(we+1,Xu),f.sb=1,f.wa=Ie?a(Ie,pl):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=G),t(!0),f.oc=B,f.pc=q,q+=832,f.ya=a(Oe,ml),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=G),f.R=16*G,f.B=8*G,G=(te=yd[f.L])*f.R,te=te/2*f.B,f.sa=B,f.ta=q+G,f.qa=f.sa,f.ra=f.ta+16*b*f.R+te,f.Ha=f.qa,f.Ia=f.ra+8*b*f.B+te,f.$c=0,q+=T,f.mb=$?B:null,f.nb=$?q:null,t(q+$<=f.Fc+f.Vb),qc(f),i(f.Ac,f.Bc,0,A),b=1}}if(b){if(v.ka=0,v.y=f.sa,v.O=f.ta,v.f=f.qa,v.N=f.ra,v.ea=f.Ha,v.Vd=f.Ia,v.fa=f.R,v.Rc=f.B,v.F=null,v.J=0,!tu){for(b=-255;255>=b;++b)Sr[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Qi[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Zi[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)pa[255+b]=0>b?0:255<b?255:b;tu=1}ke=Vc,qe=Hc,mt=nd,St=rd,Wt=wl,De=Wc,Bn=Sl,vn=qa,To=fd,Mo=Nl,Dr=dd,Ss=Ao,Do=Fr,Ns=hd,Vs=vr,ks=Vi,on=ni,Xi=ud,js[0]=zs,js[1]=id,js[2]=Bf,js[3]=Uf,js[4]=od,js[5]=bl,js[6]=xl,js[7]=Yc,js[8]=qf,js[9]=zf,Ja[0]=Gc,Ja[1]=Ff,Ja[2]=Us,Ja[3]=jo,Ja[4]=Wr,Ja[5]=$f,Ja[6]=ad,ga[0]=za,ga[1]=sd,ga[2]=Wf,ga[3]=bn,ga[4]=Co,ga[5]=Hf,ga[6]=Kc,b=1}else b=0}b&&(b=function(Ce,Ye){for(Ce.M=0;Ce.M<Ce.Va;++Ce.M){var $e,ve=Ce.Jc[Ce.M&Ce.Xb],Se=Ce.m,Ge=Ce;for($e=0;$e<Ge.za;++$e){var nt=Se,He=Ge,ht=He.Ac,ct=He.Bc+4*$e,wt=He.zc,dt=He.ya[He.aa+$e];if(He.Qa.Bb?dt.$b=Z(nt,He.Pa.jb[0])?2+Z(nt,He.Pa.jb[2]):Z(nt,He.Pa.jb[1]):dt.$b=0,He.kc&&(dt.Ad=Z(nt,He.Bd)),dt.Za=!Z(nt,145)+0,dt.Za){var fn=dt.Ob,yn=0;for(He=0;4>He;++He){var Zt,Ut=wt[0+He];for(Zt=0;4>Zt;++Zt){Ut=gd[ht[ct+Zt]][Ut];for(var kn=$l[Z(nt,Ut[0])];0<kn;)kn=$l[2*kn+Z(nt,Ut[kn])];Ut=-kn,ht[ct+Zt]=Ut}r(fn,yn,ht,ct,4),yn+=4,wt[0+He]=Ut}}else Ut=Z(nt,156)?Z(nt,128)?1:3:Z(nt,163)?2:0,dt.Ob[0]=Ut,i(ht,ct,Ut,4),i(wt,0,Ut,4);dt.Dd=Z(nt,142)?Z(nt,114)?Z(nt,183)?1:3:2:0}if(Ge.m.Ka)return tr(Ce,7,"Premature end-of-partition0 encountered.");for(;Ce.ja<Ce.za;++Ce.ja){if(Ge=ve,nt=(Se=Ce).rb[Se.sb-1],ht=Se.rb[Se.sb+Se.ja],$e=Se.ya[Se.aa+Se.ja],ct=Se.kc?$e.Ad:0)nt.la=ht.la=0,$e.Za||(nt.Na=ht.Na=0),$e.Hc=0,$e.Gc=0,$e.ia=0;else{var jn,$t;if(nt=ht,ht=Ge,ct=Se.Pa.Xc,wt=Se.ya[Se.aa+Se.ja],dt=Se.pb[wt.$b],He=wt.ad,fn=0,yn=Se.rb[Se.sb-1],Ut=Zt=0,i(He,fn,0,384),wt.Za)var yr=0,ai=ct[3];else{kn=s(16);var nn=nt.Na+yn.Na;if(nn=ma(ht,ct[1],nn,dt.Eb,0,kn,0),nt.Na=yn.Na=(0<nn)+0,1<nn)ke(kn,0,He,fn);else{var Vr=kn[0]+3>>3;for(kn=0;256>kn;kn+=16)He[fn+kn]=Vr}yr=1,ai=ct[0]}var wn=15&nt.la,sr=15&yn.la;for(kn=0;4>kn;++kn){var oi=1&sr;for(Vr=$t=0;4>Vr;++Vr)wn=wn>>1|(oi=(nn=ma(ht,ai,nn=oi+(1&wn),dt.Sc,yr,He,fn))>yr)<<7,$t=$t<<2|(3<nn?3:1<nn?2:He[fn+0]!=0),fn+=16;wn>>=4,sr=sr>>1|oi<<7,Zt=(Zt<<8|$t)>>>0}for(ai=wn,yr=sr>>4,jn=0;4>jn;jn+=2){for($t=0,wn=nt.la>>4+jn,sr=yn.la>>4+jn,kn=0;2>kn;++kn){for(oi=1&sr,Vr=0;2>Vr;++Vr)nn=oi+(1&wn),wn=wn>>1|(oi=0<(nn=ma(ht,ct[2],nn,dt.Qc,0,He,fn)))<<3,$t=$t<<2|(3<nn?3:1<nn?2:He[fn+0]!=0),fn+=16;wn>>=2,sr=sr>>1|oi<<5}Ut|=$t<<4*jn,ai|=wn<<4<<jn,yr|=(240&sr)<<jn}nt.la=ai,yn.la=yr,wt.Hc=Zt,wt.Gc=Ut,wt.ia=43690&Ut?0:dt.ia,ct=!(Zt|Ut)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[$e.$b][$e.Za],Se.wa[Se.Y+Se.ja].La|=!ct),Ge.Ka)return tr(Ce,7,"Premature end-of-file encountered.")}if(qc(Ce),Se=Ye,Ge=1,$e=(ve=Ce).D,nt=0<ve.L&&ve.M>=ve.zb&&ve.M<=ve.Va,ve.Aa==0)e:{if($e.M=ve.M,$e.uc=nt,Cl(ve,$e),Ge=1,$e=($t=ve.D).Nb,nt=(Ut=yd[ve.L])*ve.R,ht=Ut/2*ve.B,kn=16*$e*ve.R,Vr=8*$e*ve.B,ct=ve.sa,wt=ve.ta-nt+kn,dt=ve.qa,He=ve.ra-ht+Vr,fn=ve.Ha,yn=ve.Ia-ht+Vr,sr=(wn=$t.M)==0,Zt=wn>=ve.Va-1,ve.Aa==2&&Cl(ve,$t),$t.uc)for(oi=(nn=ve).D.M,t(nn.D.uc),$t=nn.yb;$t<nn.Hb;++$t){yr=$t,ai=oi;var dr=(Gn=(In=nn).D).Nb;jn=In.R;var Gn=Gn.wa[Gn.Y+yr],Gr=In.sa,Dn=In.ta+16*dr*jn+16*yr,ts=Gn.dd,Ir=Gn.tc;if(Ir!=0)if(t(3<=Ir),In.L==1)0<yr&&ks(Gr,Dn,jn,Ir+4),Gn.La&&Xi(Gr,Dn,jn,Ir),0<ai&&Vs(Gr,Dn,jn,Ir+4),Gn.La&&on(Gr,Dn,jn,Ir);else{var ya=In.B,Oo=In.qa,Xa=In.ra+8*dr*ya+8*yr,Qa=In.Ha,In=In.Ia+8*dr*ya+8*yr;dr=Gn.ld,0<yr&&(vn(Gr,Dn,jn,Ir+4,ts,dr),Mo(Oo,Xa,Qa,In,ya,Ir+4,ts,dr)),Gn.La&&(Ss(Gr,Dn,jn,Ir,ts,dr),Ns(Oo,Xa,Qa,In,ya,Ir,ts,dr)),0<ai&&(Bn(Gr,Dn,jn,Ir+4,ts,dr),To(Oo,Xa,Qa,In,ya,Ir+4,ts,dr)),Gn.La&&(Dr(Gr,Dn,jn,Ir,ts,dr),Do(Oo,Xa,Qa,In,ya,Ir,ts,dr))}}if(ve.ia&&alert("todo:DitherRow"),Se.put!=null){if($t=16*wn,wn=16*(wn+1),sr?(Se.y=ve.sa,Se.O=ve.ta+kn,Se.f=ve.qa,Se.N=ve.ra+Vr,Se.ea=ve.Ha,Se.W=ve.Ia+Vr):($t-=Ut,Se.y=ct,Se.O=wt,Se.f=dt,Se.N=He,Se.ea=fn,Se.W=yn),Zt||(wn-=Ut),wn>Se.o&&(wn=Se.o),Se.F=null,Se.J=null,ve.Fa!=null&&0<ve.Fa.length&&$t<wn&&(Se.J=Qc(ve,Se,$t,wn-$t),Se.F=ve.mb,Se.F==null&&Se.F.length==0)){Ge=tr(ve,3,"Could not decode alpha data.");break e}$t<Se.j&&(Ut=Se.j-$t,$t=Se.j,t(!(1&Ut)),Se.O+=ve.R*Ut,Se.N+=ve.B*(Ut>>1),Se.W+=ve.B*(Ut>>1),Se.F!=null&&(Se.J+=Se.width*Ut)),$t<wn&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=$t-Se.j,Se.U=Se.va-Se.v,Se.T=wn-$t,Ge=Se.put(Se))}$e+1!=ve.Ic||Zt||(r(ve.sa,ve.ta-nt,ct,wt+16*ve.R,nt),r(ve.qa,ve.ra-ht,dt,He+8*ve.B,ht),r(ve.Ha,ve.Ia-ht,fn,yn+8*ve.B,ht))}if(!Ge)return tr(Ce,6,"Output aborted.")}return 1}(f,v)),v.bc!=null&&v.bc(v),b&=1}return b?(f.cb=0,b):0}function fi(f,v,b,A,T){T=f[v+b+32*A]+(T>>3),f[v+b+32*A]=-256&T?0>T?0:255:T}function ko(f,v,b,A,T,$){fi(f,v,0,b,A+T),fi(f,v,1,b,A+$),fi(f,v,2,b,A-$),fi(f,v,3,b,A-T)}function hi(f){return(20091*f>>16)+f}function yl(f,v,b,A){var T,$=0,B=s(16);for(T=0;4>T;++T){var q=f[v+0]+f[v+8],G=f[v+0]-f[v+8],te=(35468*f[v+4]>>16)-hi(f[v+12]),we=hi(f[v+4])+(35468*f[v+12]>>16);B[$+0]=q+we,B[$+1]=G+te,B[$+2]=G-te,B[$+3]=q-we,$+=4,v++}for(T=$=0;4>T;++T)q=(f=B[$+0]+4)+B[$+8],G=f-B[$+8],te=(35468*B[$+4]>>16)-hi(B[$+12]),fi(b,A,0,0,q+(we=hi(B[$+4])+(35468*B[$+12]>>16))),fi(b,A,1,0,G+te),fi(b,A,2,0,G-te),fi(b,A,3,0,q-we),$++,A+=32}function Wc(f,v,b,A){var T=f[v+0]+4,$=35468*f[v+4]>>16,B=hi(f[v+4]),q=35468*f[v+1]>>16;ko(b,A,0,T+B,f=hi(f[v+1]),q),ko(b,A,1,T+$,f,q),ko(b,A,2,T-$,f,q),ko(b,A,3,T-B,f,q)}function Hc(f,v,b,A,T){yl(f,v,b,A),T&&yl(f,v+16,b,A+4)}function nd(f,v,b,A){qe(f,v+0,b,A,1),qe(f,v+32,b,A+128,1)}function rd(f,v,b,A){var T;for(f=f[v+0]+4,T=0;4>T;++T)for(v=0;4>v;++v)fi(b,A,v,T,f)}function wl(f,v,b,A){f[v+0]&&St(f,v+0,b,A),f[v+16]&&St(f,v+16,b,A+4),f[v+32]&&St(f,v+32,b,A+128),f[v+48]&&St(f,v+48,b,A+128+4)}function Vc(f,v,b,A){var T,$=s(16);for(T=0;4>T;++T){var B=f[v+0+T]+f[v+12+T],q=f[v+4+T]+f[v+8+T],G=f[v+4+T]-f[v+8+T],te=f[v+0+T]-f[v+12+T];$[0+T]=B+q,$[8+T]=B-q,$[4+T]=te+G,$[12+T]=te-G}for(T=0;4>T;++T)B=(f=$[0+4*T]+3)+$[3+4*T],q=$[1+4*T]+$[2+4*T],G=$[1+4*T]-$[2+4*T],te=f-$[3+4*T],b[A+0]=B+q>>3,b[A+16]=te+G>>3,b[A+32]=B-q>>3,b[A+48]=te-G>>3,A+=64}function Bs(f,v,b){var A,T=v-32,$=vi,B=255-f[T-1];for(A=0;A<b;++A){var q,G=$,te=B+f[v-1];for(q=0;q<b;++q)f[v+q]=G[te+f[T+q]];v+=32}}function id(f,v){Bs(f,v,4)}function sd(f,v){Bs(f,v,8)}function Ff(f,v){Bs(f,v,16)}function Us(f,v){var b;for(b=0;16>b;++b)r(f,v+32*b,f,v-32,16)}function jo(f,v){var b;for(b=16;0<b;--b)i(f,v,f[v-1],16),v+=32}function Eo(f,v,b){var A;for(A=0;16>A;++A)i(v,b+32*A,f,16)}function Gc(f,v){var b,A=16;for(b=0;16>b;++b)A+=f[v-1+32*b]+f[v+b-32];Eo(A>>5,f,v)}function Wr(f,v){var b,A=8;for(b=0;16>b;++b)A+=f[v-1+32*b];Eo(A>>4,f,v)}function $f(f,v){var b,A=8;for(b=0;16>b;++b)A+=f[v+b-32];Eo(A>>4,f,v)}function ad(f,v){Eo(128,f,v)}function Ot(f,v,b){return f+2*v+b+2>>2}function Bf(f,v){var b,A=v-32;for(A=new Uint8Array([Ot(f[A-1],f[A+0],f[A+1]),Ot(f[A+0],f[A+1],f[A+2]),Ot(f[A+1],f[A+2],f[A+3]),Ot(f[A+2],f[A+3],f[A+4])]),b=0;4>b;++b)r(f,v+32*b,A,0,A.length)}function Uf(f,v){var b=f[v-1],A=f[v-1+32],T=f[v-1+64],$=f[v-1+96];je(f,v+0,16843009*Ot(f[v-1-32],b,A)),je(f,v+32,16843009*Ot(b,A,T)),je(f,v+64,16843009*Ot(A,T,$)),je(f,v+96,16843009*Ot(T,$,$))}function zs(f,v){var b,A=4;for(b=0;4>b;++b)A+=f[v+b-32]+f[v-1+32*b];for(A>>=3,b=0;4>b;++b)i(f,v+32*b,A,4)}function od(f,v){var b=f[v-1+0],A=f[v-1+32],T=f[v-1+64],$=f[v-1-32],B=f[v+0-32],q=f[v+1-32],G=f[v+2-32],te=f[v+3-32];f[v+0+96]=Ot(A,T,f[v-1+96]),f[v+1+96]=f[v+0+64]=Ot(b,A,T),f[v+2+96]=f[v+1+64]=f[v+0+32]=Ot($,b,A),f[v+3+96]=f[v+2+64]=f[v+1+32]=f[v+0+0]=Ot(B,$,b),f[v+3+64]=f[v+2+32]=f[v+1+0]=Ot(q,B,$),f[v+3+32]=f[v+2+0]=Ot(G,q,B),f[v+3+0]=Ot(te,G,q)}function xl(f,v){var b=f[v+1-32],A=f[v+2-32],T=f[v+3-32],$=f[v+4-32],B=f[v+5-32],q=f[v+6-32],G=f[v+7-32];f[v+0+0]=Ot(f[v+0-32],b,A),f[v+1+0]=f[v+0+32]=Ot(b,A,T),f[v+2+0]=f[v+1+32]=f[v+0+64]=Ot(A,T,$),f[v+3+0]=f[v+2+32]=f[v+1+64]=f[v+0+96]=Ot(T,$,B),f[v+3+32]=f[v+2+64]=f[v+1+96]=Ot($,B,q),f[v+3+64]=f[v+2+96]=Ot(B,q,G),f[v+3+96]=Ot(q,G,G)}function bl(f,v){var b=f[v-1+0],A=f[v-1+32],T=f[v-1+64],$=f[v-1-32],B=f[v+0-32],q=f[v+1-32],G=f[v+2-32],te=f[v+3-32];f[v+0+0]=f[v+1+64]=$+B+1>>1,f[v+1+0]=f[v+2+64]=B+q+1>>1,f[v+2+0]=f[v+3+64]=q+G+1>>1,f[v+3+0]=G+te+1>>1,f[v+0+96]=Ot(T,A,b),f[v+0+64]=Ot(A,b,$),f[v+0+32]=f[v+1+96]=Ot(b,$,B),f[v+1+32]=f[v+2+96]=Ot($,B,q),f[v+2+32]=f[v+3+96]=Ot(B,q,G),f[v+3+32]=Ot(q,G,te)}function Yc(f,v){var b=f[v+0-32],A=f[v+1-32],T=f[v+2-32],$=f[v+3-32],B=f[v+4-32],q=f[v+5-32],G=f[v+6-32],te=f[v+7-32];f[v+0+0]=b+A+1>>1,f[v+1+0]=f[v+0+64]=A+T+1>>1,f[v+2+0]=f[v+1+64]=T+$+1>>1,f[v+3+0]=f[v+2+64]=$+B+1>>1,f[v+0+32]=Ot(b,A,T),f[v+1+32]=f[v+0+96]=Ot(A,T,$),f[v+2+32]=f[v+1+96]=Ot(T,$,B),f[v+3+32]=f[v+2+96]=Ot($,B,q),f[v+3+64]=Ot(B,q,G),f[v+3+96]=Ot(q,G,te)}function zf(f,v){var b=f[v-1+0],A=f[v-1+32],T=f[v-1+64],$=f[v-1+96];f[v+0+0]=b+A+1>>1,f[v+2+0]=f[v+0+32]=A+T+1>>1,f[v+2+32]=f[v+0+64]=T+$+1>>1,f[v+1+0]=Ot(b,A,T),f[v+3+0]=f[v+1+32]=Ot(A,T,$),f[v+3+32]=f[v+1+64]=Ot(T,$,$),f[v+3+64]=f[v+2+64]=f[v+0+96]=f[v+1+96]=f[v+2+96]=f[v+3+96]=$}function qf(f,v){var b=f[v-1+0],A=f[v-1+32],T=f[v-1+64],$=f[v-1+96],B=f[v-1-32],q=f[v+0-32],G=f[v+1-32],te=f[v+2-32];f[v+0+0]=f[v+2+32]=b+B+1>>1,f[v+0+32]=f[v+2+64]=A+b+1>>1,f[v+0+64]=f[v+2+96]=T+A+1>>1,f[v+0+96]=$+T+1>>1,f[v+3+0]=Ot(q,G,te),f[v+2+0]=Ot(B,q,G),f[v+1+0]=f[v+3+32]=Ot(b,B,q),f[v+1+32]=f[v+3+64]=Ot(A,b,B),f[v+1+64]=f[v+3+96]=Ot(T,A,b),f[v+1+96]=Ot($,T,A)}function Wf(f,v){var b;for(b=0;8>b;++b)r(f,v+32*b,f,v-32,8)}function bn(f,v){var b;for(b=0;8>b;++b)i(f,v,f[v-1],8),v+=32}function dn(f,v,b){var A;for(A=0;8>A;++A)i(v,b+32*A,f,8)}function za(f,v){var b,A=8;for(b=0;8>b;++b)A+=f[v+b-32]+f[v-1+32*b];dn(A>>4,f,v)}function Hf(f,v){var b,A=4;for(b=0;8>b;++b)A+=f[v+b-32];dn(A>>3,f,v)}function Co(f,v){var b,A=4;for(b=0;8>b;++b)A+=f[v-1+32*b];dn(A>>3,f,v)}function Kc(f,v){dn(128,f,v)}function _l(f,v,b){var A=f[v-b],T=f[v+0],$=3*(T-A)+Dl[1020+f[v-2*b]-f[v+b]],B=nu[112+($+4>>3)];f[v-b]=vi[255+A+nu[112+($+3>>3)]],f[v+0]=vi[255+T-B]}function ld(f,v,b,A){var T=f[v+0],$=f[v+b];return si[255+f[v-2*b]-f[v-b]]>A||si[255+$-T]>A}function Jc(f,v,b,A){return 4*si[255+f[v-b]-f[v+0]]+si[255+f[v-2*b]-f[v+b]]<=A}function cd(f,v,b,A,T){var $=f[v-3*b],B=f[v-2*b],q=f[v-b],G=f[v+0],te=f[v+b],we=f[v+2*b],Ie=f[v+3*b];return 4*si[255+q-G]+si[255+B-te]>A?0:si[255+f[v-4*b]-$]<=T&&si[255+$-B]<=T&&si[255+B-q]<=T&&si[255+Ie-we]<=T&&si[255+we-te]<=T&&si[255+te-G]<=T}function vr(f,v,b,A){var T=2*A+1;for(A=0;16>A;++A)Jc(f,v+A,b,T)&&_l(f,v+A,b)}function Vi(f,v,b,A){var T=2*A+1;for(A=0;16>A;++A)Jc(f,v+A*b,1,T)&&_l(f,v+A*b,1)}function ni(f,v,b,A){var T;for(T=3;0<T;--T)vr(f,v+=4*b,b,A)}function ud(f,v,b,A){var T;for(T=3;0<T;--T)Vi(f,v+=4,b,A)}function qs(f,v,b,A,T,$,B,q){for($=2*$+1;0<T--;){if(cd(f,v,b,$,B))if(ld(f,v,b,q))_l(f,v,b);else{var G=f,te=v,we=b,Ie=G[te-2*we],Oe=G[te-we],Ce=G[te+0],Ye=G[te+we],$e=G[te+2*we],ve=27*(Ge=Dl[1020+3*(Ce-Oe)+Dl[1020+Ie-Ye]])+63>>7,Se=18*Ge+63>>7,Ge=9*Ge+63>>7;G[te-3*we]=vi[255+G[te-3*we]+Ge],G[te-2*we]=vi[255+Ie+Se],G[te-we]=vi[255+Oe+ve],G[te+0]=vi[255+Ce-ve],G[te+we]=vi[255+Ye-Se],G[te+2*we]=vi[255+$e-Ge]}v+=A}}function nr(f,v,b,A,T,$,B,q){for($=2*$+1;0<T--;){if(cd(f,v,b,$,B))if(ld(f,v,b,q))_l(f,v,b);else{var G=f,te=v,we=b,Ie=G[te-we],Oe=G[te+0],Ce=G[te+we],Ye=nu[112+(($e=3*(Oe-Ie))+4>>3)],$e=nu[112+($e+3>>3)],ve=Ye+1>>1;G[te-2*we]=vi[255+G[te-2*we]+ve],G[te-we]=vi[255+Ie+$e],G[te+0]=vi[255+Oe-Ye],G[te+we]=vi[255+Ce-ve]}v+=A}}function Sl(f,v,b,A,T,$){qs(f,v,b,1,16,A,T,$)}function qa(f,v,b,A,T,$){qs(f,v,1,b,16,A,T,$)}function dd(f,v,b,A,T,$){var B;for(B=3;0<B;--B)nr(f,v+=4*b,b,1,16,A,T,$)}function Ao(f,v,b,A,T,$){var B;for(B=3;0<B;--B)nr(f,v+=4,1,b,16,A,T,$)}function fd(f,v,b,A,T,$,B,q){qs(f,v,T,1,8,$,B,q),qs(b,A,T,1,8,$,B,q)}function Nl(f,v,b,A,T,$,B,q){qs(f,v,1,T,8,$,B,q),qs(b,A,1,T,8,$,B,q)}function Fr(f,v,b,A,T,$,B,q){nr(f,v+4*T,T,1,8,$,B,q),nr(b,A+4*T,T,1,8,$,B,q)}function hd(f,v,b,A,T,$,B,q){nr(f,v+4,1,T,8,$,B,q),nr(b,A+4,1,T,8,$,B,q)}function $r(){this.ba=new or,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function kl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bs(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new z}function jl(){this.xb=this.a=0,this.l=new gl,this.ca=new or,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bs,this.ab=0,this.gc=a(4,kl),this.Oc=0}function Wa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new gl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gn(f,v,b,A,T,$,B){for(f=f==null?0:f[v+0],v=0;v<B;++v)T[$+v]=f+b[A+v]&255,f=T[$+v]}function Gi(f,v,b,A,T,$,B){var q;if(f==null)gn(null,null,b,A,T,$,B);else for(q=0;q<B;++q)T[$+q]=f[v+q]+b[A+q]&255}function Ws(f,v,b,A,T,$,B){if(f==null)gn(null,null,b,A,T,$,B);else{var q,G=f[v+0],te=G,we=G;for(q=0;q<B;++q)te=we+(G=f[v+q])-te,we=b[A+q]+(-256&te?0>te?0:255:te)&255,te=G,T[$+q]=we}}function Qc(f,v,b,A){var T=v.width,$=v.o;if(t(f!=null&&v!=null),0>b||0>=A||b+A>$)return null;if(!f.Cc){if(f.ga==null){var B;if(f.ga=new Wa,(B=f.ga==null)||(B=v.width*v.o,t(f.Gb.length==0),f.Gb=s(B),f.Uc=0,f.Gb==null?B=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,B=1),B=!B),!B){B=f.ga;var q=f.Fa,G=f.P,te=f.qc,we=f.mb,Ie=f.nb,Oe=G+1,Ce=te-1,Ye=B.l;if(t(q!=null&&we!=null&&v!=null),es[0]=null,es[1]=gn,es[2]=Gi,es[3]=Ws,B.ca=we,B.tb=Ie,B.c=v.width,B.i=v.height,t(0<B.c&&0<B.i),1>=te)v=0;else if(B.$a=q[G+0]>>0&3,B.Z=q[G+0]>>2&3,B.Lc=q[G+0]>>4&3,G=q[G+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||G)v=0;else if(Ye.put=lr,Ye.ac=rn,Ye.bc=Rr,Ye.ma=B,Ye.width=v.width,Ye.height=v.height,Ye.Da=v.Da,Ye.v=v.v,Ye.va=v.va,Ye.j=v.j,Ye.o=v.o,B.$a)e:{t(B.$a==1),v=Hi();t:for(;;){if(v==null){v=0;break e}if(t(B!=null),B.mc=v,v.c=B.c,v.i=B.i,v.l=B.l,v.l.ma=B,v.l.width=B.c,v.l.height=B.i,v.a=0,F(v.m,q,Oe,Ce),!$s(B.c,B.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Ci(v.s)?(B.ic=1,q=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(q),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(B.ic=0,v=No(v,B.c)),!v))break t;v=1;break e}B.mc=null,v=0}else v=Ce>=B.c*B.i;B=!v}if(B)return null;f.ga.Lc!=1?f.Ga=0:A=$-b}t(f.ga!=null),t(b+A<=$);e:{if(v=(q=f.ga).c,$=q.l.o,q.$a==0){if(Oe=f.rc,Ce=f.Vc,Ye=f.Fa,G=f.P+1+b*v,te=f.mb,we=f.nb+b*v,t(G<=f.P+f.qc),q.Z!=0)for(t(es[q.Z]!=null),B=0;B<A;++B)es[q.Z](Oe,Ce,Ye,G,te,we,v),Oe=te,Ce=we,we+=v,G+=v;else for(B=0;B<A;++B)r(te,we,Ye,G,v),Oe=te,Ce=we,we+=v,G+=v;f.rc=Oe,f.Vc=Ce}else{if(t(q.mc!=null),v=b+A,t((B=q.mc)!=null),t(v<=B.i),B.C>=v)v=1;else if(q.ic||Me(),q.ic){q=B.V,Oe=B.Ba,Ce=B.c;var $e=B.i,ve=(Ye=1,G=B.$/Ce,te=B.$%Ce,we=B.m,Ie=B.s,B.$),Se=Ce*$e,Ge=Ce*v,nt=Ie.wc,He=ve<Ge?Tn(Ie,te,G):null;t(ve<=Se),t(v<=$e),t(Ci(Ie));t:for(;;){for(;!we.h&&ve<Ge;){if(te&nt||(He=Tn(Ie,te,G)),t(He!=null),de(we),256>($e=Pn(He.G[0],He.H[0],we)))q[Oe+ve]=$e,++ve,++te>=Ce&&(te=0,++G<=v&&!(G%16)&&ys(B,G));else{if(!(280>$e)){Ye=0;break t}$e=Zn($e-256,we);var ht,ct=Pn(He.G[4],He.H[4],we);if(de(we),!(ve>=(ct=cr(Ce,ct=Zn(ct,we)))&&Se-ve>=$e)){Ye=0;break t}for(ht=0;ht<$e;++ht)q[Oe+ve+ht]=q[Oe+ve+ht-ct];for(ve+=$e,te+=$e;te>=Ce;)te-=Ce,++G<=v&&!(G%16)&&ys(B,G);ve<Ge&&te&nt&&(He=Tn(Ie,te,G))}t(we.h==ne(we))}ys(B,G>v?v:G);break t}!Ye||we.h&&ve<Se?(Ye=0,B.a=we.h?5:3):B.$=ve,v=Ye}else v=ws(B,B.V,B.Ba,B.c,B.i,v,ul);if(!v){A=0;break e}}b+A>=$&&(f.Cc=1),A=1}if(!A)return null;if(f.Cc&&((A=f.ga)!=null&&(A.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+b*T}function x(f,v,b,A,T,$){for(;0<T--;){var B,q=f,G=v+(b?1:0),te=f,we=v+(b?0:3);for(B=0;B<A;++B){var Ie=te[we+4*B];Ie!=255&&(Ie*=32897,q[G+4*B+0]=q[G+4*B+0]*Ie>>23,q[G+4*B+1]=q[G+4*B+1]*Ie>>23,q[G+4*B+2]=q[G+4*B+2]*Ie>>23)}v+=$}}function M(f,v,b,A,T){for(;0<A--;){var $;for($=0;$<b;++$){var B=f[v+2*$+0],q=15&(te=f[v+2*$+1]),G=4369*q,te=(240&te|te>>4)*G>>16;f[v+2*$+0]=(240&B|B>>4)*G>>16&240|(15&B|B<<4)*G>>16>>4&15,f[v+2*$+1]=240&te|q}v+=T}}function ie(f,v,b,A,T,$,B,q){var G,te,we=255;for(te=0;te<T;++te){for(G=0;G<A;++G){var Ie=f[v+G];$[B+4*G]=Ie,we&=Ie}v+=b,B+=q}return we!=255}function he(f,v,b,A,T){var $;for($=0;$<T;++$)b[A+$]=f[v+$]>>8}function Me(){Ai=x,_n=M,Mn=ie,ur=he}function ze(f,v,b){I[f]=function(A,T,$,B,q,G,te,we,Ie,Oe,Ce,Ye,$e,ve,Se,Ge,nt){var He,ht=nt-1>>1,ct=q[G+0]|te[we+0]<<16,wt=Ie[Oe+0]|Ce[Ye+0]<<16;t(A!=null);var dt=3*ct+wt+131074>>2;for(v(A[T+0],255&dt,dt>>16,$e,ve),$!=null&&(dt=3*wt+ct+131074>>2,v($[B+0],255&dt,dt>>16,Se,Ge)),He=1;He<=ht;++He){var fn=q[G+He]|te[we+He]<<16,yn=Ie[Oe+He]|Ce[Ye+He]<<16,Zt=ct+fn+wt+yn+524296,Ut=Zt+2*(fn+wt)>>3;dt=Ut+ct>>1,ct=(Zt=Zt+2*(ct+yn)>>3)+fn>>1,v(A[T+2*He-1],255&dt,dt>>16,$e,ve+(2*He-1)*b),v(A[T+2*He-0],255&ct,ct>>16,$e,ve+(2*He-0)*b),$!=null&&(dt=Zt+wt>>1,ct=Ut+yn>>1,v($[B+2*He-1],255&dt,dt>>16,Se,Ge+(2*He-1)*b),v($[B+2*He+0],255&ct,ct>>16,Se,Ge+(2*He+0)*b)),ct=fn,wt=yn}1&nt||(dt=3*ct+wt+131074>>2,v(A[T+nt-1],255&dt,dt>>16,$e,ve+(nt-1)*b),$!=null&&(dt=3*wt+ct+131074>>2,v($[B+nt-1],255&dt,dt>>16,Se,Ge+(nt-1)*b)))}}function tt(){Li[ru]=H,Li[Ya]=ou,Li[Ka]=Ul,Li[Io]=Pi,Li[md]=Qt,Li[Vf]=$p,Li[Ip]=r1,Li[Il]=ou,Li[Ol]=Pi,Li[Rl]=Qt,Li[Gf]=$p}function pt(f){return f&~i1?0>f?0:255:f>>Bp}function jt(f,v){return pt((19077*f>>8)+(26149*v>>8)-14234)}function Bt(f,v,b){return pt((19077*f>>8)-(6419*v>>8)-(13320*b>>8)+8708)}function Rt(f,v){return pt((19077*f>>8)+(33050*v>>8)-17685)}function tn(f,v,b,A,T){A[T+0]=jt(f,b),A[T+1]=Bt(f,v,b),A[T+2]=Rt(f,v)}function $n(f,v,b,A,T){A[T+0]=Rt(f,v),A[T+1]=Bt(f,v,b),A[T+2]=jt(f,b)}function rr(f,v,b,A,T){var $=Bt(f,v,b);v=$<<3&224|Rt(f,v)>>3,A[T+0]=248&jt(f,b)|$>>5,A[T+1]=v}function ir(f,v,b,A,T){var $=240&Rt(f,v)|15;A[T+0]=240&jt(f,b)|Bt(f,v,b)>>4,A[T+1]=$}function Tr(f,v,b,A,T){A[T+0]=255,tn(f,v,b,A,T+1)}function Mr(f,v,b,A,T){$n(f,v,b,A,T),A[T+3]=255}function Yi(f,v,b,A,T){tn(f,v,b,A,T),A[T+3]=255}function Rn(f,v){return 0>f?0:f>v?v:f}function Ki(f,v,b){I[f]=function(A,T,$,B,q,G,te,we,Ie){for(var Oe=we+(-2&Ie)*b;we!=Oe;)v(A[T+0],$[B+0],q[G+0],te,we),v(A[T+1],$[B+0],q[G+0],te,we+b),T+=2,++B,++G,we+=2*b;1&Ie&&v(A[T+0],$[B+0],q[G+0],te,we)}}function Ha(f,v,b){return b==0?f==0?v==0?6:5:v==0?4:0:b}function El(f,v,b,A,T){switch(f>>>30){case 3:qe(v,b,A,T,0);break;case 2:De(v,b,A,T);break;case 1:St(v,b,A,T)}}function Cl(f,v){var b,A,T=v.M,$=v.Nb,B=f.oc,q=f.pc+40,G=f.oc,te=f.pc+584,we=f.oc,Ie=f.pc+600;for(b=0;16>b;++b)B[q+32*b-1]=129;for(b=0;8>b;++b)G[te+32*b-1]=129,we[Ie+32*b-1]=129;for(0<T?B[q-1-32]=G[te-1-32]=we[Ie-1-32]=129:(i(B,q-32-1,127,21),i(G,te-32-1,127,9),i(we,Ie-32-1,127,9)),A=0;A<f.za;++A){var Oe=v.ya[v.aa+A];if(0<A){for(b=-1;16>b;++b)r(B,q+32*b-4,B,q+32*b+12,4);for(b=-1;8>b;++b)r(G,te+32*b-4,G,te+32*b+4,4),r(we,Ie+32*b-4,we,Ie+32*b+4,4)}var Ce=f.Gd,Ye=f.Hd+A,$e=Oe.ad,ve=Oe.Hc;if(0<T&&(r(B,q-32,Ce[Ye].y,0,16),r(G,te-32,Ce[Ye].f,0,8),r(we,Ie-32,Ce[Ye].ea,0,8)),Oe.Za){var Se=B,Ge=q-32+16;for(0<T&&(A>=f.za-1?i(Se,Ge,Ce[Ye].y[15],4):r(Se,Ge,Ce[Ye+1].y,0,4)),b=0;4>b;b++)Se[Ge+128+b]=Se[Ge+256+b]=Se[Ge+384+b]=Se[Ge+0+b];for(b=0;16>b;++b,ve<<=2)Se=B,Ge=q+Ys[b],js[Oe.Ob[b]](Se,Ge),El(ve,$e,16*+b,Se,Ge)}else if(Se=Ha(A,T,Oe.Ob[0]),Ja[Se](B,q),ve!=0)for(b=0;16>b;++b,ve<<=2)El(ve,$e,16*+b,B,q+Ys[b]);for(b=Oe.Gc,Se=Ha(A,T,Oe.Dd),ga[Se](G,te),ga[Se](we,Ie),ve=$e,Se=G,Ge=te,255&(Oe=b>>0)&&(170&Oe?mt(ve,256,Se,Ge):Wt(ve,256,Se,Ge)),Oe=we,ve=Ie,255&(b>>=8)&&(170&b?mt($e,320,Oe,ve):Wt($e,320,Oe,ve)),T<f.Ub-1&&(r(Ce[Ye].y,0,B,q+480,16),r(Ce[Ye].f,0,G,te+224,8),r(Ce[Ye].ea,0,we,Ie+224,8)),b=8*$*f.B,Ce=f.sa,Ye=f.ta+16*A+16*$*f.R,$e=f.qa,Oe=f.ra+8*A+b,ve=f.Ha,Se=f.Ia+8*A+b,b=0;16>b;++b)r(Ce,Ye+b*f.R,B,q+32*b,16);for(b=0;8>b;++b)r($e,Oe+b*f.B,G,te+32*b,8),r(ve,Se+b*f.B,we,Ie+32*b,8)}}function Al(f,v,b,A,T,$,B,q,G){var te=[0],we=[0],Ie=0,Oe=G!=null?G.kd:0,Ce=G??new Xc;if(f==null||12>b)return 7;Ce.data=f,Ce.w=v,Ce.ha=b,v=[v],b=[b],Ce.gb=[Ce.gb];e:{var Ye=v,$e=b,ve=Ce.gb;if(t(f!=null),t($e!=null),t(ve!=null),ve[0]=0,12<=$e[0]&&!n(f,Ye[0],"RIFF")){if(n(f,Ye[0]+8,"WEBP")){ve=3;break e}var Se=Be(f,Ye[0]+4);if(12>Se||4294967286<Se){ve=3;break e}if(Oe&&Se>$e[0]-8){ve=7;break e}ve[0]=Se,Ye[0]+=12,$e[0]-=12}ve=0}if(ve!=0)return ve;for(Se=0<Ce.gb[0],b=b[0];;){e:{var Ge=f;$e=v,ve=b;var nt=te,He=we,ht=Ye=[0];if((dt=Ie=[Ie])[0]=0,8>ve[0])ve=7;else{if(!n(Ge,$e[0],"VP8X")){if(Be(Ge,$e[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var ct=Be(Ge,$e[0]+8),wt=1+Re(Ge,$e[0]+12);if(2147483648<=wt*(Ge=1+Re(Ge,$e[0]+15))){ve=3;break e}ht!=null&&(ht[0]=ct),nt!=null&&(nt[0]=wt),He!=null&&(He[0]=Ge),$e[0]+=18,ve[0]-=18,dt[0]=1}ve=0}}if(Ie=Ie[0],Ye=Ye[0],ve!=0)return ve;if($e=!!(2&Ye),!Se&&Ie)return 3;if($!=null&&($[0]=!!(16&Ye)),B!=null&&(B[0]=$e),q!=null&&(q[0]=0),B=te[0],Ye=we[0],Ie&&$e&&G==null){ve=0;break}if(4>b){ve=7;break}if(Se&&Ie||!Se&&!Ie&&!n(f,v[0],"ALPH")){b=[b],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{ct=f,ve=v,Se=b;var dt=Ce.gb;nt=Ce.na,He=Ce.P,ht=Ce.Sa,wt=22,t(ct!=null),t(Se!=null),Ge=ve[0];var fn=Se[0];for(t(nt!=null),t(ht!=null),nt[0]=null,He[0]=null,ht[0]=0;;){if(ve[0]=Ge,Se[0]=fn,8>fn){ve=7;break e}var yn=Be(ct,Ge+4);if(4294967286<yn){ve=3;break e}var Zt=8+yn+1&-2;if(wt+=Zt,0<dt&&wt>dt){ve=3;break e}if(!n(ct,Ge,"VP8 ")||!n(ct,Ge,"VP8L")){ve=0;break e}if(fn[0]<Zt){ve=7;break e}n(ct,Ge,"ALPH")||(nt[0]=ct,He[0]=Ge+8,ht[0]=yn),Ge+=Zt,fn-=Zt}}if(b=b[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],ve!=0)break}b=[b],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(dt=f,ve=v,Se=b,nt=Ce.gb[0],He=Ce.Ja,ht=Ce.xa,ct=ve[0],Ge=!n(dt,ct,"VP8 "),wt=!n(dt,ct,"VP8L"),t(dt!=null),t(Se!=null),t(He!=null),t(ht!=null),8>Se[0])ve=7;else{if(Ge||wt){if(dt=Be(dt,ct+4),12<=nt&&dt>nt-12){ve=3;break e}if(Oe&&dt>Se[0]-8){ve=7;break e}He[0]=dt,ve[0]+=8,Se[0]-=8,ht[0]=wt}else ht[0]=5<=Se[0]&&dt[ct+0]==47&&!(dt[ct+4]>>5),He[0]=Se[0];ve=0}if(b=b[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],v=v[0],ve!=0)break;if(4294967286<Ce.Ja)return 3;if(q==null||$e||(q[0]=Ce.xa?2:1),B=[B],Ye=[Ye],Ce.xa){if(5>b){ve=7;break}q=B,Oe=Ye,$e=$,f==null||5>b?f=0:5<=b&&f[v+0]==47&&!(f[v+4]>>5)?(Se=[0],dt=[0],nt=[0],F(He=new P,f,v,b),gt(He,Se,dt,nt)?(q!=null&&(q[0]=Se[0]),Oe!=null&&(Oe[0]=dt[0]),$e!=null&&($e[0]=nt[0]),f=1):f=0):f=0}else{if(10>b){ve=7;break}q=Ye,f==null||10>b||!Uc(f,v+3,b-3)?f=0:(Oe=f[v+0]|f[v+1]<<8|f[v+2]<<16,$e=16383&(f[v+7]<<8|f[v+6]),f=16383&(f[v+9]<<8|f[v+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ce.Ja||!$e||!f?f=0:(B&&(B[0]=$e),q&&(q[0]=f),f=1))}if(!f||(B=B[0],Ye=Ye[0],Ie&&(te[0]!=B||we[0]!=Ye)))return 3;G!=null&&(G[0]=Ce,G.offset=v-G.w,t(4294967286>v-G.w),t(G.offset==G.ha-b));break}return ve==0||ve==7&&Ie&&G==null?($!=null&&($[0]|=Ce.na!=null&&0<Ce.na.length),A!=null&&(A[0]=B),T!=null&&(T[0]=Ye),0):ve}function Zc(f,v,b){var A=v.width,T=v.height,$=0,B=0,q=A,G=T;if(v.Da=f!=null&&0<f.Da,v.Da&&(q=f.cd,G=f.bd,$=f.v,B=f.j,11>b||($&=-2,B&=-2),0>$||0>B||0>=q||0>=G||$+q>A||B+G>T))return 0;if(v.v=$,v.j=B,v.va=$+q,v.o=B+G,v.U=q,v.T=G,v.da=f!=null&&0<f.da,v.da){if(!Qe(q,G,b=[f.ib],$=[f.hb]))return 0;v.ib=b[0],v.hb=$[0]}return v.ob=f!=null&&f.ob,v.Kb=f==null||!f.Sd,v.da&&(v.ob=v.ib<3*A/4&&v.hb<3*T/4,v.Kb=0),1}function eu(f){if(f==null)return 2;if(11>f.S){var v=f.f.RGBA;v.fb+=(f.height-1)*v.A,v.A=-v.A}else v=f.f.kb,f=f.height,v.O+=(f-1)*v.fa,v.fa=-v.fa,v.N+=(f-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(f-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(f-1)*v.lb,v.lb=-v.lb);return 0}function Ll(f,v,b,A){if(A==null||0>=f||0>=v)return 2;if(b!=null){if(b.Da){var T=b.cd,$=b.bd,B=-2&b.v,q=-2&b.j;if(0>B||0>q||0>=T||0>=$||B+T>f||q+$>v)return 2;f=T,v=$}if(b.da){if(!Qe(f,v,T=[b.ib],$=[b.hb]))return 2;f=T[0],v=$[0]}}A.width=f,A.height=v;e:{var G=A.width,te=A.height;if(f=A.S,0>=G||0>=te||!(f>=ru&&13>f))f=2;else{if(0>=A.Rd&&A.sd==null){B=$=T=v=0;var we=(q=G*zp[f])*te;if(11>f||($=(te+1)/2*(v=(G+1)/2),f==12&&(B=(T=G)*te)),(te=s(we+2*$+B))==null){f=1;break e}A.sd=te,11>f?((G=A.f.RGBA).eb=te,G.fb=0,G.A=q,G.size=we):((G=A.f.kb).y=te,G.O=0,G.fa=q,G.Fd=we,G.f=te,G.N=0+we,G.Ab=v,G.Cd=$,G.ea=te,G.W=0+we+$,G.Db=v,G.Ed=$,f==12&&(G.F=te,G.J=0+we+2*$),G.Tc=B,G.lb=T)}if(v=1,T=A.S,$=A.width,B=A.height,T>=ru&&13>T)if(11>T)f=A.f.RGBA,v&=(q=Math.abs(f.A))*(B-1)+$<=f.size,v&=q>=$*zp[T],v&=f.eb!=null;else{f=A.f.kb,q=($+1)/2,we=(B+1)/2,G=Math.abs(f.fa),te=Math.abs(f.Ab);var Ie=Math.abs(f.Db),Oe=Math.abs(f.lb),Ce=Oe*(B-1)+$;v&=G*(B-1)+$<=f.Fd,v&=te*(we-1)+q<=f.Cd,v=(v&=Ie*(we-1)+q<=f.Ed)&G>=$&te>=q&Ie>=q,v&=f.y!=null,v&=f.f!=null,v&=f.ea!=null,T==12&&(v&=Oe>=$,v&=Ce<=f.Tc,v&=f.F!=null)}else v=0;f=v?0:2}}return f!=0||b!=null&&b.fd&&(f=eu(A)),f}var Br=64,_s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pl=24,Tl=32,Lo=8,ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(f){return f},I.Predictor2=function(f,v,b){return v[b+0]},I.Predictor3=function(f,v,b){return v[b+1]},I.Predictor4=function(f,v,b){return v[b-1]},I.Predictor5=function(f,v,b){return ce(ce(f,v[b+1]),v[b+0])},I.Predictor6=function(f,v,b){return ce(f,v[b-1])},I.Predictor7=function(f,v,b){return ce(f,v[b+0])},I.Predictor8=function(f,v,b){return ce(v[b-1],v[b+0])},I.Predictor9=function(f,v,b){return ce(v[b+0],v[b+1])},I.Predictor10=function(f,v,b){return ce(ce(f,v[b-1]),ce(v[b+0],v[b+1]))},I.Predictor11=function(f,v,b){var A=v[b+0];return 0>=ge(A>>24&255,f>>24&255,(v=v[b-1])>>24&255)+ge(A>>16&255,f>>16&255,v>>16&255)+ge(A>>8&255,f>>8&255,v>>8&255)+ge(255&A,255&f,255&v)?A:f},I.Predictor12=function(f,v,b){var A=v[b+0];return(Ne((f>>24&255)+(A>>24&255)-((v=v[b-1])>>24&255))<<24|Ne((f>>16&255)+(A>>16&255)-(v>>16&255))<<16|Ne((f>>8&255)+(A>>8&255)-(v>>8&255))<<8|Ne((255&f)+(255&A)-(255&v)))>>>0},I.Predictor13=function(f,v,b){var A=v[b-1];return(fe((f=ce(f,v[b+0]))>>24&255,A>>24&255)<<24|fe(f>>16&255,A>>16&255)<<16|fe(f>>8&255,A>>8&255)<<8|fe(f>>0&255,A>>0&255))>>>0};var Hs=I.PredictorAdd0;I.PredictorAdd1=rt,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var Va=I.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var pd,Ji=I.ColorIndexInverseTransform,Ml=I.MapARGB,da=I.VP8LColorIndexInverseTransformAlpha,pi=I.MapAlpha,fa=I.VP8LPredictorsAdd=[];fa.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Po,mi,ii,Ga,ha,gi,ke,qe,De,mt,St,Wt,Bn,vn,To,Mo,Dr,Ss,Do,Ns,Vs,ks,on,Xi,Ai,_n,Mn,ur,Sr=s(511),Qi=s(2041),Zi=s(225),pa=s(767),tu=0,Dl=Qi,nu=Zi,vi=pa,si=Sr,ru=0,Ya=1,Ka=2,Io=3,md=4,Vf=5,Ip=6,Il=7,Ol=8,Rl=9,Gf=10,Op=[2,3,7],Qg=[3,3,11],Rp=[280,256,256,256,40],Nr=[0,1,1,1,0],Hr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],e1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Fp=8,Yf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],iu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ma=null,Kf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$l=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],su=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],t1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ja=[],js=[],ga=[],n1=1,au=2,es=[],Li=[];ze("UpsampleRgbLinePair",tn,3),ze("UpsampleBgrLinePair",$n,3),ze("UpsampleRgbaLinePair",Yi,4),ze("UpsampleBgraLinePair",Mr,4),ze("UpsampleArgbLinePair",Tr,4),ze("UpsampleRgba4444LinePair",ir,2),ze("UpsampleRgb565LinePair",rr,2);var H=I.UpsampleRgbLinePair,Ul=I.UpsampleBgrLinePair,ou=I.UpsampleRgbaLinePair,Pi=I.UpsampleBgraLinePair,Qt=I.UpsampleArgbLinePair,$p=I.UpsampleRgba4444LinePair,r1=I.UpsampleRgb565LinePair,vd=16,Gs=1<<vd-1,lu=-227,Jf=482,Bp=6,i1=(256<<Bp)-1,Up=0,va=s(256),s1=s(256),a1=s(256),o1=s(256),l1=s(Jf-lu),c1=s(Jf-lu);Ki("YuvToRgbRow",tn,3),Ki("YuvToBgrRow",$n,3),Ki("YuvToRgbaRow",Yi,4),Ki("YuvToBgraRow",Mr,4),Ki("YuvToArgbRow",Tr,4),Ki("YuvToRgba4444Row",ir,2),Ki("YuvToRgb565Row",rr,2);var Ys=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yd=[0,2,8],u1=[8,7,6,4,4,2,2,2,1,1,1,1],d1=1;this.WebPDecodeRGBA=function(f,v,b,A,T){var $=Ya,B=new $r,q=new or;B.ba=q,q.S=$,q.width=[q.width],q.height=[q.height];var G=q.width,te=q.height,we=new un;if(we==null||f==null)var Ie=2;else t(we!=null),Ie=Al(f,v,b,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ie!=0?G=0:(G!=null&&(G[0]=we.width[0]),te!=null&&(te[0]=we.height[0]),G=1),G){q.width=q.width[0],q.height=q.height[0],A!=null&&(A[0]=q.width),T!=null&&(T[0]=q.height);e:{if(A=new gl,(T=new Xc).data=f,T.w=v,T.ha=b,T.kd=1,v=[0],t(T!=null),((f=Al(T.data,T.w,T.ha,null,null,null,v,null,T))==0||f==7)&&v[0]&&(f=4),(v=f)==0){if(t(B!=null),A.data=T.data,A.w=T.w+T.offset,A.ha=T.ha-T.offset,A.put=lr,A.ac=rn,A.bc=Rr,A.ma=B,T.xa){if((f=Hi())==null){B=1;break e}if(function(Oe,Ce){var Ye=[0],$e=[0],ve=[0];t:for(;;){if(Oe==null)return 0;if(Ce==null)return Oe.a=2,0;if(Oe.l=Ce,Oe.a=0,F(Oe.m,Ce.data,Ce.w,Ce.ha),!gt(Oe.m,Ye,$e,ve)){Oe.a=3;break t}if(Oe.xb=au,Ce.width=Ye[0],Ce.height=$e[0],!$s(Ye[0],$e[0],1,Oe,null))break t;return 1}return t(Oe.a!=0),0}(f,A)){if(A=(v=Ll(A.width,A.height,B.Oa,B.ba))==0){t:{A=f;n:for(;;){if(A==null){A=0;break t}if(t(A.s.yc!=null),t(A.s.Ya!=null),t(0<A.s.Wb),t((b=A.l)!=null),t((T=b.ma)!=null),A.xb!=0){if(A.ca=T.ba,A.tb=T.tb,t(A.ca!=null),!Zc(T.Oa,b,Io)){A.a=2;break n}if(!No(A,b.width)||b.da)break n;if((b.da||Pt(A.ca.S))&&Me(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&Me()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!We(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!ws(A,A.V,A.Ba,A.c,A.i,b.o,Wi))break n;T.Dc=A.Ma,A=1;break t}t(A.a!=0),A=0}A=!A}A&&(v=f.a)}else v=f.a}else{if((f=new Rf)==null){B=1;break e}if(f.Fa=T.na,f.P=T.P,f.qc=T.Sa,zc(f,A)){if((v=Ll(A.width,A.height,B.Oa,B.ba))==0){if(f.Aa=0,b=B.Oa,t((T=f)!=null),b!=null){if(0<(G=0>(G=b.Md)?0:100<G?255:255*G/100)){for(te=we=0;4>te;++te)12>(Ie=T.pb[te]).lc&&(Ie.ia=G*u1[0>Ie.lc?0:Ie.lc]>>3),we|=Ie.ia;we&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=b.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}td(f,A)||(v=f.a)}}else v=f.a}v==0&&B.Oa!=null&&B.Oa.fd&&(v=eu(B.ba))}B=v}$=B!=0?null:11>$?q.f.RGBA.eb:q.f.kb.y}else $=null;return $};var zp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(I,re){for(var oe="",R=0;R<4;R++)oe+=String.fromCharCode(I[re++]);return oe}function p(I,re){return(I[re+0]<<0|I[re+1]<<8|I[re+2]<<16)>>>0}function m(I,re){return(I[re+0]<<0|I[re+1]<<8|I[re+2]<<16|I[re+3]<<24)>>>0}new c;var w=[0],g=[0],N=[],k=new c,C=e,_=function(I,re){var oe={},R=0,z=!1,K=0,J=0;if(oe.frames=[],!function(V,ne,le,de){for(var Ae=0;Ae<de;Ae++)if(V[ne+Ae]!=le.charCodeAt(Ae))return!0;return!1}(I,re,"RIFF",4)){for(m(I,re+=4),re+=8;re<I.length;){var ye=h(I,re),pe=m(I,re+=4);re+=4;var X=pe+(1&pe);switch(ye){case"VP8 ":case"VP8L":oe.frames[R]===void 0&&(oe.frames[R]={}),(ae=oe.frames[R]).src_off=z?J:re-8,ae.src_size=K+pe+8,R++,z&&(z=!1,K=0,J=0);break;case"VP8X":(ae=oe.header={}).feature_flags=I[re];var F=re+4;ae.canvas_width=1+p(I,F),F+=3,ae.canvas_height=1+p(I,F),F+=3;break;case"ALPH":z=!0,K=X+8,J=re-8;break;case"ANIM":(ae=oe.header).bgcolor=m(I,re),F=re+4,ae.loop_count=(Le=I)[(P=F)+0]<<0|Le[P+1]<<8,F+=2;break;case"ANMF":var U,ae;(ae=oe.frames[R]={}).offset_x=2*p(I,re),re+=3,ae.offset_y=2*p(I,re),re+=3,ae.width=1+p(I,re),re+=3,ae.height=1+p(I,re),re+=3,ae.duration=p(I,re),re+=3,U=I[re++],ae.dispose=1&U,ae.blend=U>>1&1}ye!="ANMF"&&(re+=X)}var Le,P;return oe}}(C,0);_.response=C,_.rgbaoutput=!0,_.dataurl=!1;var S=_.header?_.header:null,L=_.frames?_.frames:null;if(S){S.loop_counter=S.loop_count,w=[S.canvas_height],g=[S.canvas_width];for(var O=0;O<L.length&&L[O].blend!=0;O++);}var Y=L[0],se=k.WebPDecodeRGBA(C,Y.src_off,Y.src_size,g,w);Y.rgba=se,Y.imgwidth=g[0],Y.imgheight=w[0];for(var W=0;W<g[0]*w[0]*4;W++)N[W]=se[W];return this.width=g,this.height=w,this.data=N,this}(function(e){var t=function(){return typeof py=="function"},n=function(w,g,N,k){var C=4,_=a;switch(k){case e.image_compression.FAST:C=1,_=s;break;case e.image_compression.MEDIUM:C=6,_=l;break;case e.image_compression.SLOW:C=9,_=c}w=r(w,g,N,_);var S=py(w,{level:C});return e.__addimage__.arrayBufferToBinaryString(S)},r=function(w,g,N,k){for(var C,_,S,L=w.length/g,O=new Uint8Array(w.length+L),Y=p(),se=0;se<L;se+=1){if(S=se*g,C=w.subarray(S,S+g),k)O.set(k(C,N,_),S+se);else{for(var W,I=Y.length,re=[];W<I;W+=1)re[W]=Y[W](C,N,_);var oe=m(re.concat());O.set(re[oe],S+se)}_=C}return O},i=function(w){var g=Array.apply([],w);return g.unshift(0),g},s=function(w,g){var N,k=[],C=w.length;k[0]=1;for(var _=0;_<C;_+=1)N=w[_-g]||0,k[_+1]=w[_]-N+256&255;return k},a=function(w,g,N){var k,C=[],_=w.length;C[0]=2;for(var S=0;S<_;S+=1)k=N&&N[S]||0,C[S+1]=w[S]-k+256&255;return C},l=function(w,g,N){var k,C,_=[],S=w.length;_[0]=3;for(var L=0;L<S;L+=1)k=w[L-g]||0,C=N&&N[L]||0,_[L+1]=w[L]+256-(k+C>>>1)&255;return _},c=function(w,g,N){var k,C,_,S,L=[],O=w.length;L[0]=4;for(var Y=0;Y<O;Y+=1)k=w[Y-g]||0,C=N&&N[Y]||0,_=N&&N[Y-g]||0,S=h(k,C,_),L[Y+1]=w[Y]-S+256&255;return L},h=function(w,g,N){if(w===g&&g===N)return w;var k=Math.abs(g-N),C=Math.abs(w-N),_=Math.abs(w+g-N-N);return k<=C&&k<=_?w:C<=_?g:N},p=function(){return[i,s,a,l,c]},m=function(w){var g=w.map(function(N){return N.reduce(function(k,C){return k+Math.abs(C)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(w,g,N,k){var C,_,S,L,O,Y,se,W,I,re,oe,R,z,K,J,ye=this.decode.FLATE_DECODE,pe="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(S=new fB(w)).imgData,_=S.bits,C=S.colorSpace,O=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){I=(W=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,oe=new Uint8Array(I*S.colors),re=new Uint8Array(I);var X,F=S.pixelBitlength-S.bits;for(K=0,J=0;K<I;K++){for(z=W[K],X=0;X<F;)oe[J++]=z>>>X&255,X+=S.bits;re[K]=z>>>X&255}}if(S.bits===16){I=(W=new Uint32Array(S.decodePixels().buffer)).length,oe=new Uint8Array(I*(32/S.pixelBitlength)*S.colors),re=new Uint8Array(I*(32/S.pixelBitlength)),R=S.colors>1,K=0,J=0;for(var U=0;K<I;)z=W[K++],oe[J++]=z>>>0&255,R&&(oe[J++]=z>>>16&255,z=W[K++],oe[J++]=z>>>0&255),re[U++]=z>>>16&255;_=8}k!==e.image_compression.NONE&&t()?(w=n(oe,S.width*S.colors,S.colors,k),se=n(re,S.width,1,k)):(w=oe,se=re,ye=void 0)}if(S.colorType===3&&(C=this.color_spaces.INDEXED,Y=S.palette,S.transparency.indexed)){var ae=S.transparency.indexed,Le=0;for(K=0,I=ae.length;K<I;++K)Le+=ae[K];if((Le/=255)===I-1&&ae.indexOf(0)!==-1)L=[ae.indexOf(0)];else if(Le!==I){for(W=S.decodePixels(),re=new Uint8Array(W.length),K=0,I=W.length;K<I;K++)re[K]=ae[W[K]];se=n(re,S.width,1)}}var P=function(V){var ne;switch(V){case e.image_compression.FAST:ne=11;break;case e.image_compression.MEDIUM:ne=13;break;case e.image_compression.SLOW:ne=14;break;default:ne=12}return ne}(k);return ye===this.decode.FLATE_DECODE&&(pe="/Predictor "+P+" "),pe+="/Colors "+O+" /BitsPerComponent "+_+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(se&&this.__addimage__.isArrayBuffer(se)||this.__addimage__.isArrayBufferView(se))&&(se=this.__addimage__.arrayBufferToBinaryString(se)),{alias:N,data:w,index:g,filter:ye,decodeParameters:pe,transparency:L,palette:Y,sMask:se,predictor:P,width:S.width,height:S.height,bitsPerComponent:_,colorSpace:C}}}})(Dt.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new hB(t),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:a,height:l},p=new $v(100).encode(h,100);return e.processJPEG.call(this,p,n,r,i)},e.processGIF87A=e.processGIF89A}(Dt.API),ka.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ka.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Fn.log("bit decode error:"+n)}},ka.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},ka.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,c=15&s,h=this.palette[l];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*i+1>=this.width)break;h=this.palette[c],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},ka.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ka.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,h=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=h}this.pos+=e}},ka.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,h=(a>>11)/t*255|0,p=i*this.width*4+4*s;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},ka.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},ka.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},ka.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new ka(t,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},h=new $v(100).encode(c,100);return e.processJPEG.call(this,h,n,r,i)}}(Dt.API),G3.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new G3(t),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},h=new $v(100).encode(c,100);return e.processJPEG.call(this,h,n,r,i)}}(Dt.API),Dt.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,c=0,h=0;h<i;h+=4){var p=r[h],m=r[h+1],w=r[h+2],g=r[h+3];s[l++]=p,s[l++]=m,s[l++]=w,a[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Dt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$d=Dt.API,zm=$d.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,h=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=h.fof?h.fof:1,m=t.doKerning!==!1,w=0,g=e.length,N=0,k=l[0]||c,C=[];for(n=0;n<g;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(w=m&&An(h[r])==="object"&&!isNaN(parseInt(h[r][N],10))?h[r][N]/p:0,C.push((l[r]||k)/c+w)),N=r;return C},q3=$d.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return $d.processArabic&&(e=$d.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:zm.apply(this,arguments).reduce(function(s,a){return s+a},0)},W3=function(e,t,n,r){for(var i=[],s=0,a=e.length,l=0;s!==a&&l+t[s]<n;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+t[s]>r&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},H3=function(e,t,n){n||(n={});var r,i,s,a,l,c,h,p=[],m=[p],w=n.textIndent||0,g=0,N=0,k=e.split(" "),C=zm.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var _=Array(c).join(" "),S=[];k.map(function(O){(O=O.split(/\s*\n/)).length>1?S=S.concat(O.map(function(Y,se){return(se&&Y.length?`
`:"")+Y})):S.push(O[0])}),k=S,c=q3.apply(this,[_,n])}for(s=0,a=k.length;s<a;s++){var L=0;if(r=k[s],c&&r[0]==`
`&&(r=r.substr(1),L=1),w+g+(N=(i=zm.apply(this,[r,n])).reduce(function(O,Y){return O+Y},0))>t||L){if(N>t){for(l=W3.apply(this,[r,i,t-(w+g),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(O,Y){return O+Y},0)}else p=[r];m.push(p),w=N+c,g=C}else p.push(r),w+=g+N,g=C}return h=c?function(O,Y){return(Y?_:"")+O.join(" ")}:function(O){return O.join(" ")},m.map(h)},$d.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,h=[];for(l=0,c=r.length;l<c;l++)h=h.concat(H3.apply(this,[r[l],a,s]));return h},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=e.__fontmetrics__.compress=function(m){var w,g,N,k,C=["{"];for(var _ in m){if(w=m[_],isNaN(parseInt(_,10))?g="'"+_+"'":(_=parseInt(_,10),g=(g=s(_).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof w=="number")w<0?(N=s(w).slice(3),k="-"):(N=s(w).slice(2),k=""),N=k+N.slice(0,-1)+r[N.slice(-1)];else{if(An(w)!=="object")throw new Error("Don't know what to do with value type "+An(w)+".");N=a(w)}C.push(g+N)}return C.push("}"),C.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,g,N,k,C={},_=1,S=C,L=[],O="",Y="",se=m.length-1,W=1;W<se;W+=1)(k=m[W])=="'"?w?(N=w.join(""),w=void 0):w=[]:w?w.push(k):k=="{"?(L.push([S,N]),S={},N=void 0):k=="}"?((g=L.pop())[0][g[1]]=S,N=void 0,S=g[0]):k=="-"?_=-1:N===void 0?n.hasOwnProperty(k)?(O+=n[k],N=parseInt(O,16)*_,_=1,O=""):O+=k:n.hasOwnProperty(k)?(Y+=n[k],S[N]=parseInt(Y,16)*_,_=1,N=void 0,Y=""):Y+=k;return C},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var w=m.font,g=p.Unicode[w.postScriptName];g&&(w.metadata.Unicode={},w.metadata.Unicode.widths=g.widths,w.metadata.Unicode.kerning=g.kerning);var N=h.Unicode[w.postScriptName];N&&(w.metadata.Unicode.encoding=N,w.encoding=N.codePages[0])}])}(Dt.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Uh(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Dt),function(e){function t(){return(It.canvg?Promise.resolve(It.canvg):al(()=>import("./index.es-k_vHmn_L.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Dt.API.addSvgAsImage=function(n,r,i,s,a,l,c,h){if(isNaN(r)||isNaN(i))throw Fn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Fn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(m,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(w)}).then(function(){g.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,c,h)})}}(),Dt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Dt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],h=0,p=0,m=0;function w(N,k){var C,_=!1;for(C=0;C<N.length;C+=1)N[C]===k&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(m=0;m<g;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(An(e)==="object"){for(i in e)if(s=e[i],w(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&w(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(h=0;h<s.length;h+=1)if(r=!0,s[h].length===1&&typeof s[h][0]=="number")c.push(String(s[h]-1));else if(s[h].length>1){for(p=0;p<s[h].length;p+=1)typeof s[h][p]!="number"&&(r=!1);r===!0&&c.push([s[h][0]-1,s[h][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,k=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?k.push("/"+N+" /"+n[N].value):k.push("/"+N+" "+n[N].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+a.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Dt.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],m=0,w=s.length;m<w;++m){if(l=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(h[4-l.length],l)}return p.join("")},r=function(s){var a,l,c,h,p,m,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,w=(l=Object.keys(s).sort(function(g,N){return g-N})).length;m<w;m++)a=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(h=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+h+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,h=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,w=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",N=0;N<w.length;N++)g+=String.fromCharCode(w[N]);var k=h();p({data:g,addLength1:!0,objectId:k}),c("endobj");var C=h();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var _=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ud(l.fontName)),c("/FontFile2 "+k+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ud(l.fontName)),c("/FontDescriptor "+_+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+C+" 0 R"),c("/BaseFont /"+Ud(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,h=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,w="",g=0;g<m.length;g++)w+=String.fromCharCode(m[g]);var N=h();p({data:w,addLength1:!0,objectId:N}),c("endobj");var k=h();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var C=h();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Ud(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=h();for(var _=0;_<l.metadata.hmtx.widths.length;_++)l.metadata.hmtx.widths[_]=parseInt(l.metadata.hmtx.widths[_]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Ud(l.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",c=s.x,h=s.y,p=s.options||{},m=s.mutex||{},w=m.pdfEscape,g=m.activeFontKey,N=m.fonts,k=g,C="",_=0,S="",L=N[k].encoding;if(N[k].encoding!=="Identity-H")return{text:l,x:c,y:h,options:p,mutex:m};for(S=l,k=g,Array.isArray(l)&&(S=l[0]),_=0;_<S.length;_+=1)N[k].metadata.hasOwnProperty("cmap")&&(a=N[k].metadata.cmap.unicode.codeMap[S[_].charCodeAt(0)]),a||S[_].charCodeAt(0)<256&&N[k].metadata.hasOwnProperty("Unicode")?C+=S[_]:C+="";var O="";return parseInt(k.slice(1))<14||L==="WinAnsiEncoding"?O=w(C,k).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(O=n(C,N[k])),m.isHex=!0,{text:O,x:c,y:h,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?l.push([i(Object.assign({},c,{text:a[h][0]})).text,a[h][1],a[h][2]]):l.push(i(Object.assign({},c,{text:a[h]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Dt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,l,c,h,p,m=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,L=0;this.__bidiEngine__={};var O=function(R){var z=R.charCodeAt(),K=z>>8,J=k[K];return J!==void 0?m[256*J+(255&z)]:K===252||K===253?"AL":_.test(K)?"L":K===8?"R":"N"},Y=function(R){for(var z,K=0;K<R.length;K++){if((z=O(R.charAt(K)))==="L")return!1;if(z==="R")return!0}return!1},se=function(R,z,K,J){var ye,pe,X,F,U=z[J];switch(U){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(U="AN");break;case"AL":S=!0,U="R";break;case"WS":U="N";break;case"CS":J<1||J+1>=z.length||(ye=K[J-1])!=="EN"&&ye!=="AN"||(pe=z[J+1])!=="EN"&&pe!=="AN"?U="N":S&&(pe="AN"),U=pe===ye?pe:"N";break;case"ES":U=(ye=J>0?K[J-1]:"B")==="EN"&&J+1<z.length&&z[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&K[J-1]==="EN"){U="EN";break}if(S){U="N";break}for(X=J+1,F=z.length;X<F&&z[X]==="ET";)X++;U=X<F&&z[X]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(F=z.length,X=J+1;X<F&&z[X]==="NSM";)X++;if(X<F){var ae=R[J],Le=ae>=1425&&ae<=2303||ae===64286;if(ye=z[X],Le&&(ye==="R"||ye==="AL")){U="R";break}}}U=J<1||(ye=z[J-1])==="B"?"N":K[J-1];break;case"B":S=!1,i=!0,U=L;break;case"S":s=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":U="N"}return U},W=function(R,z,K){var J=R.split("");return K&&I(J,K,{hiLevel:L}),J.reverse(),z&&z.reverse(),J.join("")},I=function(R,z,K){var J,ye,pe,X,F,U=-1,ae=R.length,Le=0,P=[],V=L?g:w,ne=[];for(S=!1,i=!1,s=!1,ye=0;ye<ae;ye++)ne[ye]=O(R[ye]);for(pe=0;pe<ae;pe++){if(F=Le,P[pe]=se(R,ne,P,pe),J=240&(Le=V[F][N[P[pe]]]),Le&=15,z[pe]=X=V[Le][5],J>0)if(J===16){for(ye=U;ye<pe;ye++)z[ye]=1;U=-1}else U=-1;if(V[Le][6])U===-1&&(U=pe);else if(U>-1){for(ye=U;ye<pe;ye++)z[ye]=X;U=-1}ne[pe]==="B"&&(z[pe]=0),K.hiLevel|=X}s&&function(le,de,Ae){for(var Ee=0;Ee<Ae;Ee++)if(le[Ee]==="S"){de[Ee]=L;for(var Z=Ee-1;Z>=0&&le[Z]==="WS";Z--)de[Z]=L}}(ne,z,ae)},re=function(R,z,K,J,ye){if(!(ye.hiLevel<R)){if(R===1&&L===1&&!i)return z.reverse(),void(K&&K.reverse());for(var pe,X,F,U,ae=z.length,Le=0;Le<ae;){if(J[Le]>=R){for(F=Le+1;F<ae&&J[F]>=R;)F++;for(U=Le,X=F-1;U<X;U++,X--)pe=z[U],z[U]=z[X],z[X]=pe,K&&(pe=K[U],K[U]=K[X],K[X]=pe);Le=F}Le++}}},oe=function(R,z,K){var J=R.split(""),ye={hiLevel:L};return K||(K=[]),I(J,K,ye),function(pe,X,F){if(F.hiLevel!==0&&p)for(var U,ae=0;ae<pe.length;ae++)X[ae]===1&&(U=C.indexOf(pe[ae]))>=0&&(pe[ae]=C[U+1])}(J,K,ye),re(2,J,z,K,ye),re(1,J,z,K,ye),J.join("")};return this.__bidiEngine__.doBidiReorder=function(R,z,K){if(function(ye,pe){if(pe)for(var X=0;X<ye.length;X++)pe[X]=X;l===void 0&&(l=Y(ye)),h===void 0&&(h=Y(ye))}(R,z),a||!c||h)if(a&&c&&l^h)L=l?1:0,R=W(R,z,K);else if(!a&&c&&h)L=l?1:0,R=oe(R,z,K),R=W(R,z);else if(!a||l||c||h){if(a&&!c&&l^h)R=W(R,z),l?(L=0,R=oe(R,z,K)):(L=1,R=oe(R,z,K),R=W(R,z));else if(a&&l&&!c&&h)L=1,R=oe(R,z,K),R=W(R,z);else if(!a&&!c&&l^h){var J=p;l?(L=1,R=oe(R,z,K),L=0,p=!1,R=oe(R,z,K),p=J):(L=0,R=oe(R,z,K),R=W(R,z),L=1,p=!1,R=oe(R,z,K),p=J,R=W(R,z))}}else L=0,R=oe(R,z,K);else L=l?1:0,R=oe(R,z,K);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,h=R.isOutputRtl,p=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Dc(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new CB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new pB(this.contents),this.head=new gB(this),this.name=new bB(this),this.cmap=new M6(this),this.toUnicode={},this.hhea=new vB(this),this.maxp=new _B(this),this.hmtx=new SB(this),this.post=new wB(this),this.os2=new yB(this),this.loca=new EB(this),this.glyf=new NB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,h;for(h=[],a=0,l=(c=this.bbox).length;a<l;a++)t=c[a],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,l;for(a=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ua,Dc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),pB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,l,c,h,p,m,w,g,N,k;for(k in g=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(g)/c),a=Math.floor(m/c),p=16*g-m,(i=new Dc).writeInt(this.scalarType),i.writeShort(g),i.writeShort(m),i.writeShort(a),i.writeShort(p),s=16*g,h=i.pos+s,l=null,N=[],n)for(w=n[k],i.writeString(k),i.writeInt(e(w)),i.writeInt(h),i.writeInt(w.length),N=N.concat(w),k==="head"&&(l=h),h+=w.length;h%4;)N.push(0),h++;return i.write(N),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=D6.call(n);n.length%4;)n.push(0);for(s=new Dc(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),mB={}.hasOwnProperty,_o=function(e,t){for(var n in t)mB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ua=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var gB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Dc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),Y3=function(){function e(t,n){var r,i,s,a,l,c,h,p,m,w,g,N,k,C,_,S,L;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),w=g/2,t.pos+=6,s=function(){var O,Y;for(Y=[],c=O=0;0<=w?O<w:O>w;c=0<=w?++O:--O)Y.push(t.readUInt16());return Y}(),t.pos+=2,k=function(){var O,Y;for(Y=[],c=O=0;0<=w?O<w:O>w;c=0<=w?++O:--O)Y.push(t.readUInt16());return Y}(),h=function(){var O,Y;for(Y=[],c=O=0;0<=w?O<w:O>w;c=0<=w?++O:--O)Y.push(t.readUInt16());return Y}(),p=function(){var O,Y;for(Y=[],c=O=0;0<=w?O<w:O>w;c=0<=w?++O:--O)Y.push(t.readUInt16());return Y}(),i=(this.length-t.pos+this.offset)/2,l=function(){var O,Y;for(Y=[],c=O=0;0<=i?O<i:O>i;c=0<=i?++O:--O)Y.push(t.readUInt16());return Y}(),c=_=0,L=s.length;_<L;c=++_)for(C=s[c],r=S=N=k[c];N<=C?S<=C:S>=C;r=N<=C?++S:--S)p[c]===0?a=r+h[c]:(a=l[p[c]/2+(r-N)-(w-c)]||0)!==0&&(a+=h[c]),this.codeMap[r]=65535&a}t.pos=m}return e.encode=function(t,n){var r,i,s,a,l,c,h,p,m,w,g,N,k,C,_,S,L,O,Y,se,W,I,re,oe,R,z,K,J,ye,pe,X,F,U,ae,Le,P,V,ne,le,de,Ae,Ee,Z,je,_e,Re;switch(J=new Dc,a=Object.keys(t).sort(function(Be,We){return Be-We}),n){case"macroman":for(k=0,C=function(){var Be=[];for(N=0;N<256;++N)Be.push(0);return Be}(),S={0:0},s={},ye=0,U=a.length;ye<U;ye++)S[Z=t[i=a[ye]]]==null&&(S[Z]=++k),s[i]={old:t[i],new:S[t[i]]},C[i]=S[t[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(C),{charMap:s,subtable:J.data,maxGlyphID:k+1};case"unicode":for(z=[],m=[],L=0,S={},r={},_=h=null,pe=0,ae=a.length;pe<ae;pe++)S[Y=t[i=a[pe]]]==null&&(S[Y]=++L),r[i]={old:Y,new:S[Y]},l=S[Y]-i,_!=null&&l===h||(_&&m.push(_),z.push(i),h=l),_=i;for(_&&m.push(_),m.push(65535),z.push(65535),oe=2*(re=z.length),I=2*Math.pow(Math.log(re)/Math.LN2,2),w=Math.log(I/2)/Math.LN2,W=2*re-I,c=[],se=[],g=[],N=X=0,Le=z.length;X<Le;N=++X){if(R=z[N],p=m[N],R===65535){c.push(0),se.push(0);break}if(R-(K=r[R].new)>=32768)for(c.push(0),se.push(2*(g.length+re-N)),i=F=R;R<=p?F<=p:F>=p;i=R<=p?++F:--F)g.push(r[i].new);else c.push(K-R),se.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*re+2*g.length),J.writeUInt16(0),J.writeUInt16(oe),J.writeUInt16(I),J.writeUInt16(w),J.writeUInt16(W),Ae=0,P=m.length;Ae<P;Ae++)i=m[Ae],J.writeUInt16(i);for(J.writeUInt16(0),Ee=0,V=z.length;Ee<V;Ee++)i=z[Ee],J.writeUInt16(i);for(je=0,ne=c.length;je<ne;je++)l=c[je],J.writeUInt16(l);for(_e=0,le=se.length;_e<le;_e++)O=se[_e],J.writeUInt16(O);for(Re=0,de=g.length;Re<de;Re++)k=g[Re],J.writeUInt16(k);return{charMap:r,subtable:J.data,maxGlyphID:L+1}}},e}(),M6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Y3(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Y3.encode(n,r),(s=new Dc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),vB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),yB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),wB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,h;for(h=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)h.push(n.readUInt32());return h}).call(this)}},t}(),xB=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},bB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,a,l,c,h,p,m,w,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(h={},a=m=0,w=i.length;m<w;a=++m)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new xB(p,s),h[g=s.nameID]==null&&(h[g]=[]),h[s.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t}(),_B=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),SB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,a,l,c,h;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)m.push(n.readInt16());return m}(),this.widths=(function(){var p,m,w,g;for(g=[],p=0,m=(w=this.metrics).length;p<m;p++)a=w[p],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],h=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)h.push(this.widths.push(i));return h},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),D6=[].slice,NB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,a,l,c,h,p,m,w;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Dc(r.read(s))).readShort(),p=c.readShort(),w=c.readShort(),h=c.readShort(),m=c.readShort(),this.cache[n]=l===-1?new jB(c,p,w,h,m):new kB(c,l,p,w,h,m),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,a,l,c,h;for(l=[],a=[],c=0,h=r.length;c<h;c++)s=n[r[c]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),kB=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),jB=function(){function e(t,n,r,i,s){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Dc(D6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),EB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var c=this.offsets[l],h=this.offsets[l+1]-c;h>0&&(s+=h)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},t}(),CB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,l,c;for(i={},a=0,l=t.length;a<l;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,l,c,h,p,m,w,g,N,k,C,_;for(i in r=M6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),g={0:0},_=r.charMap)g[(c=_[i]).old]=c.new;for(N in w=r.maxGlyphID,a)N in g||(g[N]=w++);return p=function(S){var L,O;for(L in O={},S)O[S[L]]=L;return O}(g),m=Object.keys(p).sort(function(S,L){return S-L}),k=function(){var S,L,O;for(O=[],S=0,L=m.length;S<L;S++)l=m[S],O.push(p[l]);return O}(),s=this.font.glyf.encode(a,k,g),h=this.font.loca.encode(s.offsets,k),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},e}();Dt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,c,h;for(h=[],l=0,c=n.length;l<c;l++)r=n[l],h.push(t.convert(r));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();function AB({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){var be;const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para días seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualización de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para días con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los días seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=RS(),[s,a]=j.useState(void 0),[l,c]=j.useState(!0),[h,p]=j.useState(!1),[m,w]=j.useState(null),[g,N]=j.useState(!1),[k,C]=j.useState([]),[_,S]=j.useState([]),[L,O]=j.useState([]),[Y,se]=j.useState([]),{user:W}=Zr(),[I,re]=j.useState(new Date),[oe,R]=j.useState(new Set),[z,K]=j.useState(new Map),J=ce=>Jt(ce,"yyyy-MM"),ye=j.useDeferredValue(z),pe=j.useMemo(()=>{const ce=[],Ne=new Set;return ye.forEach(fe=>{fe.forEach(ge=>{const rt=ge.memberId;Ne.has(rt)||(Ne.add(rt),ce.push({...ge,dates:[]}))})}),ce.forEach(fe=>{const ge=[];ye.forEach(rt=>{const ot=rt.find(it=>it.memberId===fe.memberId);ot&&ge.push(...ot.dates)}),fe.dates=ge}),ce},[ye]);j.useEffect(()=>{W&&(ne(),Ee(I),de(),le(),Ae())},[W,i]),j.useEffect(()=>{if(!W)return;const ce=J(I);oe.has(ce)||Ee(I);const Ne=new Date(I.getFullYear(),I.getMonth()-1,1),fe=new Date(I.getFullYear(),I.getMonth()+1,1),ge=J(Ne),rt=J(fe),ot=setTimeout(()=>{oe.has(ge)||Ee(Ne),oe.has(rt)||Ee(fe)},500);return()=>clearTimeout(ot)},[I,W,oe.size]);const X=j.useMemo(()=>{const ce=new Map;return pe.forEach(Ne=>{const fe=new Set;Ne.dates.forEach(ge=>{fe.add(Jt(ge,"yyyy-MM-dd"))}),ce.set(Ne.userId,fe)}),ce},[pe]),F=j.useMemo(()=>{const ce=new Map,Ne=new Map;return _.forEach(fe=>{ce.has(fe.user_id)||ce.set(fe.user_id,new Set),ce.get(fe.user_id).add(Jt(new Date(fe.date),"yyyy-MM-dd"))}),Y.forEach(fe=>{Ne.has(fe.user_id)||Ne.set(fe.user_id,new Set),Ne.get(fe.user_id).add(Jt(new Date(fe.date),"yyyy-MM-dd"))}),{groupEvents:ce,externalEvents:Ne}},[_,Y]),U=j.useMemo(()=>{const ce=new Map,Ne=new Set;return X.forEach(fe=>{fe.forEach(ge=>Ne.add(ge))}),Ne.forEach(fe=>{const ge=e.filter(rt=>{var ot,it,Fe;if(rt.user_id){const st=((ot=X.get(rt.user_id))==null?void 0:ot.has(fe))??!1,Ue=((it=F.groupEvents.get(rt.user_id))==null?void 0:it.has(fe))??!1,Ct=((Fe=F.externalEvents.get(rt.user_id))==null?void 0:Fe.has(fe))??!1;return st&&!Ue&&!Ct}else{const st=pe.find(Ct=>Ct.memberId===rt.id);return(st==null?void 0:st.dates.some(Ct=>Jt(Ct,"yyyy-MM-dd")===fe))??!1}});ce.set(fe,ge)}),ce},[e,X,F,pe]),ae=j.useCallback(ce=>{const Ne=Jt(ce,"yyyy-MM-dd");return U.get(Ne)||[]},[U]),Le=j.useMemo(()=>{const ce=new Map,Ne=e.filter(ge=>ge.role_in_group==="principal"),fe=new Set;return Ne.forEach(ge=>{ge.instruments.forEach(rt=>{fe.add(rt.id)})}),U.forEach((ge,rt)=>{const ot=ge.filter(Fe=>Fe.role_in_group==="sustituto"),it=Array.from(fe).every(Fe=>ge.some(Ue=>Ue.role_in_group==="principal"&&Ue.instruments.some(Ct=>Ct.id===Fe))?!0:ot.some(Ct=>Ct.instruments.some(ut=>ut.id===Fe)));ce.set(rt,it)}),ce},[e,U]),P=j.useCallback(ce=>{const Ne=Jt(ce,"yyyy-MM-dd");return Le.get(Ne)??!1},[Le]),V=j.useMemo(()=>{if(!t)return[];if(e.filter(fe=>fe.role_in_group==="principal").length===0)return[];const Ne=[];return Le.forEach((fe,ge)=>{fe&&Ne.push(new Date(ge))}),Ne.sort((fe,ge)=>fe.getTime()-ge.getTime())},[e,Le,t]);j.useEffect(()=>{t&&V.length>=0&&(C(V),t(V))},[V,t]),j.useEffect(()=>{t&&t(k)},[k,t]);const ne=j.useCallback(async()=>{const ce=await qn(async()=>await et.from("users").select("role").eq("id",W==null?void 0:W.id).single(),"Error checking admin status");ce&&N(ce.role==="admin")},[W==null?void 0:W.id]),le=async()=>{const ce=await qn(async()=>await et.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(ce){const Ne=[];ce.forEach(fe=>{var ge;(ge=fe.event_members)==null||ge.forEach(rt=>{Ne.push({event_id:fe.id,date:fe.date,user_id:rt.user_id,name:fe.name,group_id:fe.group_id})})}),S(Ne)}},de=async()=>{const ce=await qn(async()=>await et.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(ce){const Ne=ce.map(fe=>({event_id:fe.id,date:fe.date,user_id:"",name:fe.name,group_id:fe.group_id}));O(Ne)}},Ae=async()=>{const ce=await et.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(ce.error){console.error("Error al obtener eventos externos:",ce.error);return}const Ne=ce.data||[],fe=[];Ne.forEach(ge=>{var rt;(rt=ge.event_members)==null||rt.forEach(ot=>{fe.push({user_id:ot.user_id,date:ge.date})})}),se(fe)},Ee=async ce=>{if(!i)return;const Ne=J(ce);if(!oe.has(Ne)){oe.size===0&&c(!0);try{const fe=e.filter(Fe=>Fe.user_id!==null).map(Fe=>Fe.user_id),ge=e.filter(Fe=>Fe.user_id===null).map(Fe=>Fe.id),rt=Jt(Ui(ce),"yyyy-MM-dd"),ot=Jt(Wg(ce),"yyyy-MM-dd"),it=await qn(async()=>{if(fe.length===0&&ge.length===0)return[];let Fe=et.from("member_availability").select("user_id, group_member_id, date").gte("date",rt).lte("date",ot);const st=[];return fe.length>0&&st.push(`user_id.in.(${fe.join(",")})`),ge.length>0&&st.push(`group_member_id.in.(${ge.join(",")})`),st.length>0&&(Fe=Fe.or(st.join(","))),Fe.order("date")},`Error fetching availabilities for ${Ne}`);if(it){const Fe=e.map(st=>{const Ue=it.filter(ut=>st.user_id&&ut.user_id===st.user_id||!st.user_id&&ut.group_member_id===st.id);return{userId:st.user_id,memberId:st.id,memberName:st.name||"Unknown Member",memberType:st.member_type||"registered",dates:Ue.map(ut=>new Date(ut.date)),instruments:st.instruments||[],roleInBand:st.role_in_group||"principal"}});K(st=>new Map(st.set(Ne,Fe))),R(st=>new Set(st.add(Ne)))}}catch(fe){console.error(`Error fetching availabilities for ${Ne}:`,fe),Te.error(`Error al obtener las disponibilidades de ${Ne}`)}finally{c(!1)}}},Z=ce=>L.filter(Ne=>_r(new Date(Ne.date),ce)),je=()=>{const ce=e.find(Ne=>Ne.user_id===(W==null?void 0:W.id));return g||(ce==null?void 0:ce.role_in_group)==="principal"},[_e,Re]=j.useState(!1),Be=j.useRef(null),We=async(ce=!1)=>{try{const Ne=window.scrollY;return ce?Re(!0):p(!0),await new Promise(fe=>setTimeout(fe,50)),await Promise.all([Ee(I),le(),de(),Ae()]),window.scrollTo(0,Ne),ce||Te.success("Calendario actualizado correctamente"),!0}catch(Ne){return console.error("Error al actualizar datos del calendario:",Ne),ce||Te.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{ce||p(!1),Re(!1)},500)}},xe=async ce=>{var ot,it;if(!W){Te.error("Debes iniciar sesión para gestionar la disponibilidad");return}if(h)return;p(!0);const Ne=m||((ot=e.find(Fe=>Fe.user_id===W.id))==null?void 0:ot.id),fe=e.find(Fe=>Fe.id===Ne);if(!fe){Te.error("Miembro no encontrado"),p(!1);return}const ge=e.find(Fe=>Fe.user_id===W.id);if(!(g||(ge==null?void 0:ge.role_in_group)==="principal"||fe.user_id===W.id)){Te.error("No tienes permisos para gestionar esta disponibilidad"),p(!1);return}if(fe.user_id&&_.some(st=>st.user_id===fe.user_id&&_r(new Date(st.date),ce))){Te.error("No puedes cambiar la disponibilidad en fechas con eventos programados"),p(!1);return}try{const Fe=(it=pe.find(Ue=>Ue.memberId===fe.id))==null?void 0:it.dates.some(Ue=>_r(Ue,ce)),st=Jt(ce,"yyyy-MM-dd");if(Fe)try{let Ue;if(fe.user_id?Ue=await et.from("member_availability").delete().eq("user_id",fe.user_id).eq("date",st):Ue=await et.from("member_availability").delete().eq("group_member_id",fe.id).eq("date",st),Ue.error){console.error("Error al eliminar disponibilidad:",Ue.error),Te.error("Hubo un problema al guardar"),p(!1);return}a(ce),Te.success(`Fecha ${Jt(ce,"dd/MM/yyyy")} eliminada de la disponibilidad`);const Ct=J(ce);K(ut=>{const Gt=new Map(ut);let kt=Gt.get(Ct);if(!kt)return Ee(ce),ut;const At=kt.map(mn=>{if(mn.memberId===fe.id){const Pt=mn.dates.filter(Qn=>!_r(Qn,ce));return{...mn,dates:Pt}}return mn});return Gt.set(Ct,At),Gt})}catch(Ue){console.error("Error inesperado al eliminar disponibilidad:",Ue),Te.error("Ha ocurrido un error al procesar tu solicitud")}else try{let Ue;if(fe.user_id?Ue=await et.from("member_availability").insert([{user_id:fe.user_id,date:st}]):Ue=await et.from("member_availability").insert([{group_member_id:fe.id,date:st}]),Ue.error){console.error("Error al insertar disponibilidad:",Ue.error),Te.error("Hubo un problema al guardar"),p(!1);return}a(ce),Te.success(`Fecha ${Jt(ce,"dd/MM/yyyy")} añadida a la disponibilidad`);const Ct=J(ce);K(ut=>{const Gt=new Map(ut);let kt=Gt.get(Ct);if(!kt)return Ee(ce),ut;const At=kt.map(mn=>{if(mn.memberId===fe.id){const Pt=[...mn.dates,ce];return{...mn,dates:Pt}}return mn});return Gt.set(Ct,At),Gt})}catch(Ue){console.error("Error inesperado al añadir disponibilidad:",Ue),Te.error("Ha ocurrido un error al procesar tu solicitud")}}catch(Fe){console.error("Error en handleDayClick:",Fe),Te.error("Ha ocurrido un error al procesar tu solicitud")}finally{p(!1)}},ee=j.useMemo(()=>{const ce=new Map,Ne=new Set;return X.forEach(fe=>{fe.forEach(ge=>Ne.add(ge))}),F.groupEvents.forEach(fe=>{fe.forEach(ge=>Ne.add(ge))}),Ne.forEach(fe=>{const ge=U.get(fe)||[],rt=e.filter(Fe=>{var st;return Fe.user_id&&((st=F.groupEvents.get(Fe.user_id))==null?void 0:st.has(fe))}),ot=new Set(ge.map(Fe=>Fe.id)),it=[...ge];rt.forEach(Fe=>{ot.has(Fe.id)||(it.push(Fe),ot.add(Fe.id))}),ce.set(fe,it)}),ce},[e,U,F]),Qe=j.useCallback(ce=>{const Ne=Jt(ce,"yyyy-MM-dd");return ee.get(Ne)||[]},[ee]),Je=ce=>{var Pt,Qn;const{date:Ne}=ce,fe=Jt(Ne,"yyyy-MM-dd"),ge=Qe(Ne),rt=ae(Ne),ot=m||((Pt=e.find(Et=>Et.user_id===(W==null?void 0:W.id)))==null?void 0:Pt.id),it=e.find(Et=>Et.id===ot),Fe=ge.some(Et=>Et.id===ot),st=(it==null?void 0:it.user_id)&&((Qn=F.externalEvents.get(it.user_id))==null?void 0:Qn.has(fe))||!1,Ue=ge.filter(Et=>Et.id!==ot),Ct=Ue.length,ut=Ue.filter(Et=>{var or;return Et.user_id&&((or=F.externalEvents.get(Et.user_id))==null?void 0:or.has(fe))}).length,Gt=P(Ne),kt=Z(Ne),At=kt.length>0,mn=st||ut>0;return d.jsxs("div",{className:`day-content ${Gt?"group-available":""} ${At?"has-event":""} ${mn?"has-external-events":""} ${s&&_r(Ne,s)?"selected-day":""}`,children:[d.jsx("span",{className:`${s&&_r(Ne,s)?"text-indigo-900 font-bold":""}`,children:Ne.getDate()}),(Fe||Ct>0||At)&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"availability-dots",children:[Fe&&d.jsx("div",{className:`availability-dot you ${st?"border border-orange-500 bg-orange-200":""}`}),Ue.slice(0,3).map((Et,or)=>{const un=Y.some(zt=>zt.user_id===Et.user_id&&_r(new Date(zt.date),Ne));return d.jsx("div",{className:`availability-dot others ${un?"border border-orange-500 bg-orange-200":""}`},or)})]}),d.jsxs("div",{className:"day-tooltip",children:[d.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[Jt(Ne,"MMMM d, yyyy"),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[Gt&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),At&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:kt.length>1?`${kt[0].name} y ${kt.length-1} más`:kt[0].name}),mn&&d.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[ut+(st?1:0)," miembro(s) con eventos externos"]})]})]}),ge.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),ge.map(Et=>{var zt,bt,qt;const or=rt.some(xn=>xn.id===Et.id),un=Et.user_id&&((zt=F.externalEvents.get(Et.user_id))==null?void 0:zt.has(fe))||!1;return d.jsx("div",{className:`tooltip-member ${Et.id===(m||((bt=e.find(xn=>xn.user_id===(W==null?void 0:W.id)))==null?void 0:bt.id))?"you":"other"}`,children:d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsx("span",{className:"font-medium",children:Et.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[Et.role_in_group==="sustituto"&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),or&&!un&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),un&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),Et.id===(m||((qt=e.find(xn=>xn.user_id===(W==null?void 0:W.id)))==null?void 0:qt.id))&&d.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"Tú"})]})]}),Et.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Et.instruments.map((xn,rn)=>d.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),xn.name,rn<Et.instruments.length-1&&", "]},`${Et.id}-${xn.id}-${rn}`))})]})},Et.id)})]})]})]})]})},Ve=()=>{const Ne=V.filter(it=>Z(it).length===0).sort((it,Fe)=>it.getTime()-Fe.getTime()).reduce((it,Fe)=>{const st=Jt(Fe,"MMMM yyyy",{locale:co});it[st]||(it[st]={withPrincipals:[],withSubstitutes:[]});const Ue=Qe(Fe);return e.filter(ut=>ut.role_in_group==="principal").filter(ut=>!Ue.some(Gt=>Gt.user_id===ut.user_id)).length===0?it[st].withPrincipals.push(Fe):it[st].withSubstitutes.push(Fe),it},{});let fe=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(Ne).length===0?fe+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(Ne).forEach(([it,Fe])=>{fe+=`${it.toUpperCase()}
`,Fe.withPrincipals.length>0&&(fe+=`Fechas con miembros principales:
`,fe+=Fe.withPrincipals.map(st=>`${Jt(st,"d(EEE)",{locale:co})}`).join(", "),fe+=`

`),Fe.withSubstitutes.length>0&&(fe+=`Fechas con sustitutos:
`,fe+=Fe.withSubstitutes.map(st=>`${Jt(st,"d(EEE)",{locale:co})}`).join(", "),fe+=`

`),fe+=`
`});const ge=new Blob([fe],{type:"text/plain;charset=utf-8"}),rt=window.URL.createObjectURL(ge),ot=document.createElement("a");ot.href=rt,ot.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${Jt(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),window.URL.revokeObjectURL(rt)},Ze=()=>{const ce=new Date;ce.setHours(0,0,0,0);const fe=V.filter(ut=>ut>=ce).filter(ut=>Z(ut).length===0).sort((ut,Gt)=>ut.getTime()-Gt.getTime()).reduce((ut,Gt)=>{const kt=Jt(Gt,"MMMM yyyy",{locale:co});ut[kt]||(ut[kt]={withPrincipals:[],withSubstitutes:[]});const At=Qe(Gt);return e.filter(Pt=>Pt.role_in_group==="principal").filter(Pt=>!At.some(Qn=>Qn.user_id===Pt.user_id)).length===0?ut[kt].withPrincipals.push(Gt):ut[kt].withSubstitutes.push(Gt),ut},{}),ge=new Dt("p","mm","a4"),rt=ge.internal.pageSize.getWidth(),ot=ge.internal.pageSize.getHeight(),it=25;let Fe=it;if(ge.setFontSize(24),ge.setFont("helvetica","light"),ge.setTextColor(40,40,40),ge.text(n,it,Fe),Fe+=12,ge.setFontSize(11),ge.setFont("helvetica","normal"),ge.setTextColor(120,120,120),ge.text("FECHAS DISPONIBLES",it,Fe),Fe+=6,ge.setFontSize(9),ge.setTextColor(160,160,160),ge.text(Jt(new Date,"dd MMMM yyyy",{locale:co}),it,Fe),Fe+=8,ge.setDrawColor(230,230,230),ge.setLineWidth(.3),ge.line(it,Fe,rt-it,Fe),Fe+=20,Object.keys(fe).length===0)ge.setFontSize(12),ge.setFont("helvetica","normal"),ge.setTextColor(120,120,120),ge.text("No hay fechas disponibles próximas.",it,Fe);else{Object.entries(fe).forEach(([kt,At],mn)=>{if(Fe>ot-80&&(ge.addPage(),Fe=it+40),ge.setFontSize(14),ge.setFont("helvetica","normal"),ge.setTextColor(60,60,60),ge.text(kt.charAt(0).toUpperCase()+kt.slice(1),it,Fe),Fe+=12,At.withPrincipals.length>0){const Pt=At.withPrincipals.map(Et=>Jt(Et,"d (EEE)",{locale:co})).join(" • ");ge.setFontSize(18),ge.setFont("helvetica","light"),ge.setTextColor(40,40,40);const Qn=ge.splitTextToSize(Pt,rt-2*it);ge.text(Qn,it,Fe),Fe+=Qn.length*8+2,ge.setFontSize(8),ge.setFont("helvetica","normal"),ge.setTextColor(100,180,100),ge.text("FORMACIÓN COMPLETA",it,Fe),Fe+=8}if(At.withSubstitutes.length>0){At.withPrincipals.length>0&&(Fe+=4);const Pt=At.withSubstitutes.map(Et=>Jt(Et,"d (EEE)",{locale:co})).join(" • ");ge.setFontSize(14),ge.setFont("helvetica","light"),ge.setTextColor(120,120,120);const Qn=ge.splitTextToSize(Pt,rt-2*it);ge.text(Qn,it,Fe),Fe+=Qn.length*6+2,ge.setFontSize(8),ge.setFont("helvetica","normal"),ge.setTextColor(180,140,100),ge.text("CON SUSTITUTOS",it,Fe),Fe+=8}mn<Object.keys(fe).length-1?(Fe+=8,ge.setDrawColor(245,245,245),ge.setLineWidth(.2),ge.line(it,Fe,rt-it,Fe),Fe+=16):Fe+=12}),Fe+=15,ge.setFontSize(9),ge.setFont("helvetica","normal"),ge.setTextColor(160,160,160);const ut=Object.values(fe).reduce((kt,At)=>kt+At.withPrincipals.length,0),Gt=Object.values(fe).reduce((kt,At)=>kt+At.withSubstitutes.length,0);(ut>0||Gt>0)&&ge.text(`${ut+Gt} fechas disponibles`,it,ot-25)}const st=ge.internal.pages.length-1;for(let ut=1;ut<=st;ut++)ge.setPage(ut),ge.setFontSize(8),ge.setFont("helvetica","normal"),ge.setTextColor(200,200,200),st>1&&ge.text(`${ut}`,rt-it,ot-15);const Ue=ge.output("blob"),Ct=URL.createObjectURL(Ue);window.open(Ct,"_blank"),setTimeout(()=>{URL.revokeObjectURL(Ct)},1e3)};return l?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx(ol,{className:"w-6 h-6 animate-spin text-indigo-600"})}):d.jsxs("div",{className:"space-y-6",children:[(g||je())&&e.length>0&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),d.jsxs("div",{className:"relative w-full max-w-xs",children:[d.jsx("select",{id:"member-select",value:m||((be=e.find(ce=>ce.user_id===(W==null?void 0:W.id)))==null?void 0:be.id)||"",onChange:ce=>{const Ne=e.find(fe=>fe.user_id===(W==null?void 0:W.id));w(ce.target.value===(Ne==null?void 0:Ne.id)?null:ce.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(ce=>d.jsxs("option",{value:ce.id,children:[ce.name," ",ce.user_id===(W==null?void 0:W.id)?"(Tú)":""," ",ce.user_id?"":"(Local)"]},ce.id))}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:d.jsx(GD,{className:"h-4 w-4"})})]})]}),d.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),d.jsxs("div",{ref:Be,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[d.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${h||_e?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/20"}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[d.jsx(ol,{className:"w-6 h-6 animate-spin text-indigo-600"}),d.jsx("span",{children:"Actualizando calendario..."})]})]}),d.jsx(P$,{mode:"single",selected:s,month:I,onSelect:a,onDayClick:xe,onMonthChange:ce=>{re(ce)},modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:Je},weekStartsOn:1,locale:co})]}),d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),d.jsxs("button",{onClick:ce=>{ce.preventDefault(),We()},disabled:h,className:`px-3 py-1 text-sm ${h?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[d.jsx("span",{className:"mr-1",children:h?"...":"↻"}),h?"Actualizando...":"Actualizar"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:"✓"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("button",{onClick:Ze,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(KD,{className:"w-4 h-4 mr-2"}),"Ver PDF"]}),d.jsxs("button",{onClick:Ve,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(H0,{className:"w-4 h-4 mr-2"}),"Descargar TXT"]})]})})]})}function LB({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r}){const i=t.filter(l=>{const c=e.find(h=>h.id===l.memberId);return(c==null?void 0:c.role_in_group)==="principal"}),s=t.filter(l=>{const c=e.find(h=>h.id===l.memberId);return(c==null?void 0:c.role_in_group)==="sustituto"}),a=(l,c)=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:c}),l.map(h=>{const p=e.find(m=>m.id===h.memberId);return p?d.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${h.isAvailable?"bg-gray-50 hover:bg-gray-100":"bg-red-50"}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",checked:h.selected,onChange:m=>n(h.memberId,m.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${!h.isAvailable&&!h.selected?"opacity-50":""}`,disabled:!h.isAvailable&&!h.selected}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-gray-900",children:p.name}),!h.isAvailable&&d.jsxs("span",{className:"inline-flex items-center text-xs text-red-700 bg-red-100 px-2 py-0.5 rounded-full",children:[d.jsx(r3,{className:"w-3 h-3 mr-1"}),"No disponible"]})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),p.instruments.map(m=>m.name).join(", ")]})]})]})},h.memberId):null})]});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),d.jsxs("div",{className:"space-y-6",children:[a(i,"Miembros Principales"),s.length>0&&a(s,"Sustitutos")]}),r&&d.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[d.jsx(r3,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),d.jsx("p",{children:"Por favor, asegúrate de que todos los instrumentos estén cubiertos por los miembros seleccionados. Si un miembro principal no está disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var eg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */eg.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",m=1,w=2,g=4,N=1,k=2,C=1,_=2,S=4,L=8,O=16,Y=32,se=64,W=128,I=256,re=512,oe=30,R="...",z=800,K=16,J=1,ye=2,pe=3,X=1/0,F=9007199254740991,U=17976931348623157e292,ae=NaN,Le=4294967295,P=Le-1,V=Le>>>1,ne=[["ary",W],["bind",C],["bindKey",_],["curry",L],["curryRight",O],["flip",re],["partial",Y],["partialRight",se],["rearg",I]],le="[object Arguments]",de="[object Array]",Ae="[object AsyncFunction]",Ee="[object Boolean]",Z="[object Date]",je="[object DOMException]",_e="[object Error]",Re="[object Function]",Be="[object GeneratorFunction]",We="[object Map]",xe="[object Number]",ee="[object Null]",Qe="[object Object]",Je="[object Promise]",Ve="[object Proxy]",Ze="[object RegExp]",be="[object Set]",ce="[object String]",Ne="[object Symbol]",fe="[object Undefined]",ge="[object WeakMap]",rt="[object WeakSet]",ot="[object ArrayBuffer]",it="[object DataView]",Fe="[object Float32Array]",st="[object Float64Array]",Ue="[object Int8Array]",Ct="[object Int16Array]",ut="[object Int32Array]",Gt="[object Uint8Array]",kt="[object Uint8ClampedArray]",At="[object Uint16Array]",mn="[object Uint32Array]",Pt=/\b__p \+= '';/g,Qn=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,or=/&(?:amp|lt|gt|quot|#39);/g,un=/[&<>"']/g,zt=RegExp(or.source),bt=RegExp(un.source),qt=/<%-([\s\S]+?)%>/g,xn=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rr=/^\w*$/,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/[\\^$.*+?()[\]{}|]/g,cr=RegExp(Zn.source),Pn=/^\s+/,On=/\s/,Tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,Wi=/,? & /,Ci=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vs=/[()=,{}\[\]\/\s]/,ys=/\\(\\)?/g,ws=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xs=/\w*$/,Hi=/^[-+]0x[0-9a-f]+$/i,$s=/^0b[01]+$/i,No=/^\[object .+?Constructor\]$/,ul=/^0o[0-7]+$/i,dl=/^(?:0|[1-9]\d*)$/,fl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ua=/($^)/,Ju=/['\n\r\u2028\u2029\\]/g,hl="\\ud800-\\udfff",If="\\u0300-\\u036f",pl="\\ufe20-\\ufe2f",Xu="\\u20d0-\\u20ff",Qu=If+pl+Xu,ml="\\u2700-\\u27bf",Zu="a-z\\xdf-\\xf6\\xf8-\\xff",ed="\\xac\\xb1\\xd7\\xf7",Of="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gl="\\u2000-\\u206f",Rf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tr="A-Z\\xc0-\\xd6\\xd8-\\xde",Uc="\\ufe0e\\ufe0f",zc=ed+Of+gl+Rf,vl="['’]",qc="["+hl+"]",td="["+zc+"]",fi="["+Qu+"]",ko="\\d+",hi="["+ml+"]",yl="["+Zu+"]",Wc="[^"+hl+zc+ko+ml+Zu+tr+"]",Hc="\\ud83c[\\udffb-\\udfff]",nd="(?:"+fi+"|"+Hc+")",rd="[^"+hl+"]",wl="(?:\\ud83c[\\udde6-\\uddff]){2}",Vc="[\\ud800-\\udbff][\\udc00-\\udfff]",Bs="["+tr+"]",id="\\u200d",sd="(?:"+yl+"|"+Wc+")",Ff="(?:"+Bs+"|"+Wc+")",Us="(?:"+vl+"(?:d|ll|m|re|s|t|ve))?",jo="(?:"+vl+"(?:D|LL|M|RE|S|T|VE))?",Eo=nd+"?",Gc="["+Uc+"]?",Wr="(?:"+id+"(?:"+[rd,wl,Vc].join("|")+")"+Gc+Eo+")*",$f="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ad="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ot=Gc+Eo+Wr,Bf="(?:"+[hi,wl,Vc].join("|")+")"+Ot,Uf="(?:"+[rd+fi+"?",fi,wl,Vc,qc].join("|")+")",zs=RegExp(vl,"g"),od=RegExp(fi,"g"),xl=RegExp(Hc+"(?="+Hc+")|"+Uf+Ot,"g"),bl=RegExp([Bs+"?"+yl+"+"+Us+"(?="+[td,Bs,"$"].join("|")+")",Ff+"+"+jo+"(?="+[td,Bs+sd,"$"].join("|")+")",Bs+"?"+sd+"+"+Us,Bs+"+"+jo,ad,$f,ko,Bf].join("|"),"g"),Yc=RegExp("["+id+hl+Qu+Uc+"]"),zf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wf=-1,bn={};bn[Fe]=bn[st]=bn[Ue]=bn[Ct]=bn[ut]=bn[Gt]=bn[kt]=bn[At]=bn[mn]=!0,bn[le]=bn[de]=bn[ot]=bn[Ee]=bn[it]=bn[Z]=bn[_e]=bn[Re]=bn[We]=bn[xe]=bn[Qe]=bn[Ze]=bn[be]=bn[ce]=bn[ge]=!1;var dn={};dn[le]=dn[de]=dn[ot]=dn[it]=dn[Ee]=dn[Z]=dn[Fe]=dn[st]=dn[Ue]=dn[Ct]=dn[ut]=dn[We]=dn[xe]=dn[Qe]=dn[Ze]=dn[be]=dn[ce]=dn[Ne]=dn[Gt]=dn[kt]=dn[At]=dn[mn]=!0,dn[_e]=dn[Re]=dn[ge]=!1;var za={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Hf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Co={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_l=parseFloat,ld=parseInt,Jc=typeof ci=="object"&&ci&&ci.Object===Object&&ci,cd=typeof self=="object"&&self&&self.Object===Object&&self,vr=Jc||cd||Function("return this")(),Vi=t&&!t.nodeType&&t,ni=Vi&&!0&&e&&!e.nodeType&&e,ud=ni&&ni.exports===Vi,qs=ud&&Jc.process,nr=function(){try{var ke=ni&&ni.require&&ni.require("util").types;return ke||qs&&qs.binding&&qs.binding("util")}catch{}}(),Sl=nr&&nr.isArrayBuffer,qa=nr&&nr.isDate,dd=nr&&nr.isMap,Ao=nr&&nr.isRegExp,fd=nr&&nr.isSet,Nl=nr&&nr.isTypedArray;function Fr(ke,qe,De){switch(De.length){case 0:return ke.call(qe);case 1:return ke.call(qe,De[0]);case 2:return ke.call(qe,De[0],De[1]);case 3:return ke.call(qe,De[0],De[1],De[2])}return ke.apply(qe,De)}function hd(ke,qe,De,mt){for(var St=-1,Wt=ke==null?0:ke.length;++St<Wt;){var Bn=ke[St];qe(mt,Bn,De(Bn),ke)}return mt}function $r(ke,qe){for(var De=-1,mt=ke==null?0:ke.length;++De<mt&&qe(ke[De],De,ke)!==!1;);return ke}function Xc(ke,qe){for(var De=ke==null?0:ke.length;De--&&qe(ke[De],De,ke)!==!1;);return ke}function kl(ke,qe){for(var De=-1,mt=ke==null?0:ke.length;++De<mt;)if(!qe(ke[De],De,ke))return!1;return!0}function bs(ke,qe){for(var De=-1,mt=ke==null?0:ke.length,St=0,Wt=[];++De<mt;){var Bn=ke[De];qe(Bn,De,ke)&&(Wt[St++]=Bn)}return Wt}function jl(ke,qe){var De=ke==null?0:ke.length;return!!De&&tt(ke,qe,0)>-1}function Wa(ke,qe,De){for(var mt=-1,St=ke==null?0:ke.length;++mt<St;)if(De(qe,ke[mt]))return!0;return!1}function gn(ke,qe){for(var De=-1,mt=ke==null?0:ke.length,St=Array(mt);++De<mt;)St[De]=qe(ke[De],De,ke);return St}function Gi(ke,qe){for(var De=-1,mt=qe.length,St=ke.length;++De<mt;)ke[St+De]=qe[De];return ke}function Ws(ke,qe,De,mt){var St=-1,Wt=ke==null?0:ke.length;for(mt&&Wt&&(De=ke[++St]);++St<Wt;)De=qe(De,ke[St],St,ke);return De}function Qc(ke,qe,De,mt){var St=ke==null?0:ke.length;for(mt&&St&&(De=ke[--St]);St--;)De=qe(De,ke[St],St,ke);return De}function x(ke,qe){for(var De=-1,mt=ke==null?0:ke.length;++De<mt;)if(qe(ke[De],De,ke))return!0;return!1}var M=Rt("length");function ie(ke){return ke.split("")}function he(ke){return ke.match(Ci)||[]}function Me(ke,qe,De){var mt;return De(ke,function(St,Wt,Bn){if(qe(St,Wt,Bn))return mt=Wt,!1}),mt}function ze(ke,qe,De,mt){for(var St=ke.length,Wt=De+(mt?1:-1);mt?Wt--:++Wt<St;)if(qe(ke[Wt],Wt,ke))return Wt;return-1}function tt(ke,qe,De){return qe===qe?Ji(ke,qe,De):ze(ke,jt,De)}function pt(ke,qe,De,mt){for(var St=De-1,Wt=ke.length;++St<Wt;)if(mt(ke[St],qe))return St;return-1}function jt(ke){return ke!==ke}function Bt(ke,qe){var De=ke==null?0:ke.length;return De?ir(ke,qe)/De:ae}function Rt(ke){return function(qe){return qe==null?n:qe[ke]}}function tn(ke){return function(qe){return ke==null?n:ke[qe]}}function $n(ke,qe,De,mt,St){return St(ke,function(Wt,Bn,vn){De=mt?(mt=!1,Wt):qe(De,Wt,Bn,vn)}),De}function rr(ke,qe){var De=ke.length;for(ke.sort(qe);De--;)ke[De]=ke[De].value;return ke}function ir(ke,qe){for(var De,mt=-1,St=ke.length;++mt<St;){var Wt=qe(ke[mt]);Wt!==n&&(De=De===n?Wt:De+Wt)}return De}function Tr(ke,qe){for(var De=-1,mt=Array(ke);++De<ke;)mt[De]=qe(De);return mt}function Mr(ke,qe){return gn(qe,function(De){return[De,ke[De]]})}function Yi(ke){return ke&&ke.slice(0,fa(ke)+1).replace(Pn,"")}function Rn(ke){return function(qe){return ke(qe)}}function Ki(ke,qe){return gn(qe,function(De){return ke[De]})}function Ha(ke,qe){return ke.has(qe)}function El(ke,qe){for(var De=-1,mt=ke.length;++De<mt&&tt(qe,ke[De],0)>-1;);return De}function Cl(ke,qe){for(var De=ke.length;De--&&tt(qe,ke[De],0)>-1;);return De}function Al(ke,qe){for(var De=ke.length,mt=0;De--;)ke[De]===qe&&++mt;return mt}var Zc=tn(za),eu=tn(Hf);function Ll(ke){return"\\"+Kc[ke]}function Br(ke,qe){return ke==null?n:ke[qe]}function _s(ke){return Yc.test(ke)}function Pl(ke){return zf.test(ke)}function Tl(ke){for(var qe,De=[];!(qe=ke.next()).done;)De.push(qe.value);return De}function Lo(ke){var qe=-1,De=Array(ke.size);return ke.forEach(function(mt,St){De[++qe]=[St,mt]}),De}function ri(ke,qe){return function(De){return ke(qe(De))}}function Hs(ke,qe){for(var De=-1,mt=ke.length,St=0,Wt=[];++De<mt;){var Bn=ke[De];(Bn===qe||Bn===p)&&(ke[De]=p,Wt[St++]=De)}return Wt}function Va(ke){var qe=-1,De=Array(ke.size);return ke.forEach(function(mt){De[++qe]=mt}),De}function pd(ke){var qe=-1,De=Array(ke.size);return ke.forEach(function(mt){De[++qe]=[mt,mt]}),De}function Ji(ke,qe,De){for(var mt=De-1,St=ke.length;++mt<St;)if(ke[mt]===qe)return mt;return-1}function Ml(ke,qe,De){for(var mt=De+1;mt--;)if(ke[mt]===qe)return mt;return mt}function da(ke){return _s(ke)?mi(ke):M(ke)}function pi(ke){return _s(ke)?ii(ke):ie(ke)}function fa(ke){for(var qe=ke.length;qe--&&On.test(ke.charAt(qe)););return qe}var Po=tn(Co);function mi(ke){for(var qe=xl.lastIndex=0;xl.test(ke);)++qe;return qe}function ii(ke){return ke.match(xl)||[]}function Ga(ke){return ke.match(bl)||[]}var ha=function ke(qe){qe=qe==null?vr:gi.defaults(vr.Object(),qe,gi.pick(vr,qf));var De=qe.Array,mt=qe.Date,St=qe.Error,Wt=qe.Function,Bn=qe.Math,vn=qe.Object,To=qe.RegExp,Mo=qe.String,Dr=qe.TypeError,Ss=De.prototype,Do=Wt.prototype,Ns=vn.prototype,Vs=qe["__core-js_shared__"],ks=Do.toString,on=Ns.hasOwnProperty,Xi=0,Ai=function(){var o=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),_n=Ns.toString,Mn=ks.call(vn),ur=vr._,Sr=To("^"+ks.call(on).replace(Zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=ud?qe.Buffer:n,Zi=qe.Symbol,pa=qe.Uint8Array,tu=Qi?Qi.allocUnsafe:n,Dl=ri(vn.getPrototypeOf,vn),nu=vn.create,vi=Ns.propertyIsEnumerable,si=Ss.splice,ru=Zi?Zi.isConcatSpreadable:n,Ya=Zi?Zi.iterator:n,Ka=Zi?Zi.toStringTag:n,Io=function(){try{var o=fu(vn,"defineProperty");return o({},"",{}),o}catch{}}(),md=qe.clearTimeout!==vr.clearTimeout&&qe.clearTimeout,Vf=mt&&mt.now!==vr.Date.now&&mt.now,Ip=qe.setTimeout!==vr.setTimeout&&qe.setTimeout,Il=Bn.ceil,Ol=Bn.floor,Rl=vn.getOwnPropertySymbols,Gf=Qi?Qi.isBuffer:n,Op=qe.isFinite,Qg=Ss.join,Rp=ri(vn.keys,vn),Nr=Bn.max,Hr=Bn.min,Zg=mt.now,e1=qe.parseInt,Fp=Bn.random,Yf=Ss.reverse,iu=fu(qe,"DataView"),ma=fu(qe,"Map"),Kf=fu(qe,"Promise"),Fl=fu(qe,"Set"),$l=fu(qe,"WeakMap"),su=fu(vn,"create"),gd=$l&&new $l,Bl={},t1=hu(iu),Ja=hu(ma),js=hu(Kf),ga=hu(Fl),n1=hu($l),au=Zi?Zi.prototype:n,es=au?au.valueOf:n,Li=au?au.toString:n;function H(o){if(wr(o)&&!Vt(o)&&!(o instanceof Qt)){if(o instanceof Pi)return o;if(on.call(o,"__wrapped__"))return Ow(o)}return new Pi(o)}var Ul=function(){function o(){}return function(u){if(!fr(u))return{};if(nu)return nu(u);o.prototype=u;var y=new o;return o.prototype=n,y}}();function ou(){}function Pi(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}H.templateSettings={escape:qt,evaluate:xn,interpolate:rn,variable:"",imports:{_:H}},H.prototype=ou.prototype,H.prototype.constructor=H,Pi.prototype=Ul(ou.prototype),Pi.prototype.constructor=Pi;function Qt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function $p(){var o=new Qt(this.__wrapped__);return o.__actions__=ns(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=ns(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=ns(this.__views__),o}function r1(){if(this.__filtered__){var o=new Qt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function vd(){var o=this.__wrapped__.value(),u=this.__dir__,y=Vt(o),E=u<0,D=y?o.length:0,Q=wk(0,D,this.__views__),ue=Q.start,me=Q.end,Pe=me-ue,Ke=E?me:ue-1,Xe=this.__iteratees__,at=Xe.length,ft=0,Nt=Hr(Pe,this.__takeCount__);if(!y||!E&&D==Pe&&Nt==Pe)return du(o,this.__actions__);var Tt=[];e:for(;Pe--&&ft<Nt;){Ke+=u;for(var Xt=-1,Mt=o[Ke];++Xt<at;){var sn=Xe[Xt],ln=sn.iteratee,As=sn.type,Oi=ln(Mt);if(As==ye)Mt=Oi;else if(!Oi){if(As==J)continue e;break e}}Tt[ft++]=Mt}return Tt}Qt.prototype=Ul(ou.prototype),Qt.prototype.constructor=Qt;function Gs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function lu(){this.__data__=su?su(null):{},this.size=0}function Jf(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Bp(o){var u=this.__data__;if(su){var y=u[o];return y===c?n:y}return on.call(u,o)?u[o]:n}function i1(o){var u=this.__data__;return su?u[o]!==n:on.call(u,o)}function Up(o,u){var y=this.__data__;return this.size+=this.has(o)?0:1,y[o]=su&&u===n?c:u,this}Gs.prototype.clear=lu,Gs.prototype.delete=Jf,Gs.prototype.get=Bp,Gs.prototype.has=i1,Gs.prototype.set=Up;function va(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function s1(){this.__data__=[],this.size=0}function a1(o){var u=this.__data__,y=ve(u,o);if(y<0)return!1;var E=u.length-1;return y==E?u.pop():si.call(u,y,1),--this.size,!0}function o1(o){var u=this.__data__,y=ve(u,o);return y<0?n:u[y][1]}function l1(o){return ve(this.__data__,o)>-1}function c1(o,u){var y=this.__data__,E=ve(y,o);return E<0?(++this.size,y.push([o,u])):y[E][1]=u,this}va.prototype.clear=s1,va.prototype.delete=a1,va.prototype.get=o1,va.prototype.has=l1,va.prototype.set=c1;function Ys(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function yd(){this.size=0,this.__data__={hash:new Gs,map:new(ma||va),string:new Gs}}function u1(o){var u=sm(this,o).delete(o);return this.size-=u?1:0,u}function d1(o){return sm(this,o).get(o)}function zp(o){return sm(this,o).has(o)}function f(o,u){var y=sm(this,o),E=y.size;return y.set(o,u),this.size+=y.size==E?0:1,this}Ys.prototype.clear=yd,Ys.prototype.delete=u1,Ys.prototype.get=d1,Ys.prototype.has=zp,Ys.prototype.set=f;function v(o){var u=-1,y=o==null?0:o.length;for(this.__data__=new Ys;++u<y;)this.add(o[u])}function b(o){return this.__data__.set(o,c),this}function A(o){return this.__data__.has(o)}v.prototype.add=v.prototype.push=b,v.prototype.has=A;function T(o){var u=this.__data__=new va(o);this.size=u.size}function $(){this.__data__=new va,this.size=0}function B(o){var u=this.__data__,y=u.delete(o);return this.size=u.size,y}function q(o){return this.__data__.get(o)}function G(o){return this.__data__.has(o)}function te(o,u){var y=this.__data__;if(y instanceof va){var E=y.__data__;if(!ma||E.length<i-1)return E.push([o,u]),this.size=++y.size,this;y=this.__data__=new Ys(E)}return y.set(o,u),this.size=y.size,this}T.prototype.clear=$,T.prototype.delete=B,T.prototype.get=q,T.prototype.has=G,T.prototype.set=te;function we(o,u){var y=Vt(o),E=!y&&pu(o),D=!y&&!E&&Ql(o),Q=!y&&!E&&!D&&Pd(o),ue=y||E||D||Q,me=ue?Tr(o.length,Mo):[],Pe=me.length;for(var Ke in o)(u||on.call(o,Ke))&&!(ue&&(Ke=="length"||D&&(Ke=="offset"||Ke=="parent")||Q&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Uo(Ke,Pe)))&&me.push(Ke);return me}function Ie(o){var u=o.length;return u?o[Gl(0,u-1)]:n}function Oe(o,u){return am(ns(o),ct(u,0,o.length))}function Ce(o){return am(ns(o))}function Ye(o,u,y){(y!==n&&!ba(o[u],y)||y===n&&!(u in o))&&He(o,u,y)}function $e(o,u,y){var E=o[u];(!(on.call(o,u)&&ba(E,y))||y===n&&!(u in o))&&He(o,u,y)}function ve(o,u){for(var y=o.length;y--;)if(ba(o[y][0],u))return y;return-1}function Se(o,u,y,E){return Ut(o,function(D,Q,ue){u(E,D,y(D),ue)}),E}function Ge(o,u){return o&&io(u,Yr(u),o)}function nt(o,u){return o&&io(u,is(u),o)}function He(o,u,y){u=="__proto__"&&Io?Io(o,u,{configurable:!0,enumerable:!0,value:y,writable:!0}):o[u]=y}function ht(o,u){for(var y=-1,E=u.length,D=De(E),Q=o==null;++y<E;)D[y]=Q?n:M1(o,u[y]);return D}function ct(o,u,y){return o===o&&(y!==n&&(o=o<=y?o:y),u!==n&&(o=o>=u?o:u)),o}function wt(o,u,y,E,D,Q){var ue,me=u&m,Pe=u&w,Ke=u&g;if(y&&(ue=D?y(o,E,D,Q):y(o)),ue!==n)return ue;if(!fr(o))return o;var Xe=Vt(o);if(Xe){if(ue=bk(o),!me)return ns(o,ue)}else{var at=yi(o),ft=at==Re||at==Be;if(Ql(o))return Ed(o,me);if(at==Qe||at==le||ft&&!D){if(ue=Pe||ft?{}:Ew(o),!me)return Pe?uk(o,nt(ue,o)):ck(o,Ge(ue,o))}else{if(!dn[at])return D?o:{};ue=_k(o,at,me)}}Q||(Q=new T);var Nt=Q.get(o);if(Nt)return Nt;Q.set(o,ue),nx(o)?o.forEach(function(Mt){ue.add(wt(Mt,u,y,Mt,o,Q))}):ex(o)&&o.forEach(function(Mt,sn){ue.set(sn,wt(Mt,u,y,sn,o,Q))});var Tt=Ke?Pe?w1:y1:Pe?is:Yr,Xt=Xe?n:Tt(o);return $r(Xt||o,function(Mt,sn){Xt&&(sn=Mt,Mt=o[sn]),$e(ue,sn,wt(Mt,u,y,sn,o,Q))}),ue}function dt(o){var u=Yr(o);return function(y){return fn(y,o,u)}}function fn(o,u,y){var E=y.length;if(o==null)return!E;for(o=vn(o);E--;){var D=y[E],Q=u[D],ue=o[D];if(ue===n&&!(D in o)||!Q(ue))return!1}return!0}function yn(o,u,y){if(typeof o!="function")throw new Dr(a);return ah(function(){o.apply(n,y)},u)}function Zt(o,u,y,E){var D=-1,Q=jl,ue=!0,me=o.length,Pe=[],Ke=u.length;if(!me)return Pe;y&&(u=gn(u,Rn(y))),E?(Q=Wa,ue=!1):u.length>=i&&(Q=Ha,ue=!1,u=new v(u));e:for(;++D<me;){var Xe=o[D],at=y==null?Xe:y(Xe);if(Xe=E||Xe!==0?Xe:0,ue&&at===at){for(var ft=Ke;ft--;)if(u[ft]===at)continue e;Pe.push(Xe)}else Q(u,at,E)||Pe.push(Xe)}return Pe}var Ut=hw(sr),kn=hw(oi,!0);function jn(o,u){var y=!0;return Ut(o,function(E,D,Q){return y=!!u(E,D,Q),y}),y}function $t(o,u,y){for(var E=-1,D=o.length;++E<D;){var Q=o[E],ue=u(Q);if(ue!=null&&(me===n?ue===ue&&!Cs(ue):y(ue,me)))var me=ue,Pe=Q}return Pe}function yr(o,u,y,E){var D=o.length;for(y=Kt(y),y<0&&(y=-y>D?0:D+y),E=E===n||E>D?D:Kt(E),E<0&&(E+=D),E=y>E?0:ix(E);y<E;)o[y++]=u;return o}function ai(o,u){var y=[];return Ut(o,function(E,D,Q){u(E,D,Q)&&y.push(E)}),y}function nn(o,u,y,E,D){var Q=-1,ue=o.length;for(y||(y=Nk),D||(D=[]);++Q<ue;){var me=o[Q];u>0&&y(me)?u>1?nn(me,u-1,y,E,D):Gi(D,me):E||(D[D.length]=me)}return D}var Vr=pw(),wn=pw(!0);function sr(o,u){return o&&Vr(o,u,Yr)}function oi(o,u){return o&&wn(o,u,Yr)}function dr(o,u){return bs(u,function(y){return zo(o[y])})}function Gn(o,u){u=Js(u,o);for(var y=0,E=u.length;o!=null&&y<E;)o=o[so(u[y++])];return y&&y==E?o:n}function Gr(o,u,y){var E=u(o);return Vt(o)?E:Gi(E,y(o))}function Dn(o){return o==null?o===n?fe:ee:Ka&&Ka in vn(o)?yk(o):Pk(o)}function ts(o,u){return o>u}function Ir(o,u){return o!=null&&on.call(o,u)}function ya(o,u){return o!=null&&u in vn(o)}function Oo(o,u,y){return o>=Hr(u,y)&&o<Nr(u,y)}function Xa(o,u,y){for(var E=y?Wa:jl,D=o[0].length,Q=o.length,ue=Q,me=De(Q),Pe=1/0,Ke=[];ue--;){var Xe=o[ue];ue&&u&&(Xe=gn(Xe,Rn(u))),Pe=Hr(Xe.length,Pe),me[ue]=!y&&(u||D>=120&&Xe.length>=120)?new v(ue&&Xe):n}Xe=o[0];var at=-1,ft=me[0];e:for(;++at<D&&Ke.length<Pe;){var Nt=Xe[at],Tt=u?u(Nt):Nt;if(Nt=y||Nt!==0?Nt:0,!(ft?Ha(ft,Tt):E(Ke,Tt,y))){for(ue=Q;--ue;){var Xt=me[ue];if(!(Xt?Ha(Xt,Tt):E(o[ue],Tt,y)))continue e}ft&&ft.push(Tt),Ke.push(Nt)}}return Ke}function Qa(o,u,y,E){return sr(o,function(D,Q,ue){u(E,y(D),Q,ue)}),E}function In(o,u,y){u=Js(u,o),o=Pw(o,u);var E=o==null?o:o[so(Xs(u))];return E==null?n:Fr(E,o,y)}function wd(o){return wr(o)&&Dn(o)==le}function qp(o){return wr(o)&&Dn(o)==ot}function Wp(o){return wr(o)&&Dn(o)==Z}function Za(o,u,y,E,D){return o===u?!0:o==null||u==null||!wr(o)&&!wr(u)?o!==o&&u!==u:cu(o,u,y,E,Za,D)}function cu(o,u,y,E,D,Q){var ue=Vt(o),me=Vt(u),Pe=ue?de:yi(o),Ke=me?de:yi(u);Pe=Pe==le?Qe:Pe,Ke=Ke==le?Qe:Ke;var Xe=Pe==Qe,at=Ke==Qe,ft=Pe==Ke;if(ft&&Ql(o)){if(!Ql(u))return!1;ue=!0,Xe=!1}if(ft&&!Xe)return Q||(Q=new T),ue||Pd(o)?Nw(o,u,y,E,D,Q):gk(o,u,Pe,y,E,D,Q);if(!(y&N)){var Nt=Xe&&on.call(o,"__wrapped__"),Tt=at&&on.call(u,"__wrapped__");if(Nt||Tt){var Xt=Nt?o.value():o,Mt=Tt?u.value():u;return Q||(Q=new T),D(Xt,Mt,y,E,Q)}}return ft?(Q||(Q=new T),vk(o,u,y,E,D,Q)):!1}function xd(o){return wr(o)&&yi(o)==We}function Ti(o,u,y,E){var D=y.length,Q=D,ue=!E;if(o==null)return!Q;for(o=vn(o);D--;){var me=y[D];if(ue&&me[2]?me[1]!==o[me[0]]:!(me[0]in o))return!1}for(;++D<Q;){me=y[D];var Pe=me[0],Ke=o[Pe],Xe=me[1];if(ue&&me[2]){if(Ke===n&&!(Pe in o))return!1}else{var at=new T;if(E)var ft=E(Ke,Xe,Pe,o,u,at);if(!(ft===n?Za(Xe,Ke,N|k,E,at):ft))return!1}}return!0}function Ro(o){if(!fr(o)||jk(o))return!1;var u=zo(o)?Sr:No;return u.test(hu(o))}function zl(o){return wr(o)&&Dn(o)==Ze}function Hp(o){return wr(o)&&yi(o)==be}function bd(o){return wr(o)&&fm(o.length)&&!!bn[Dn(o)]}function Xf(o){return typeof o=="function"?o:o==null?ss:typeof o=="object"?Vt(o)?Gp(o[0],o[1]):Vp(o):mx(o)}function ql(o){if(!sh(o))return Rp(o);var u=[];for(var y in vn(o))on.call(o,y)&&y!="constructor"&&u.push(y);return u}function Qf(o){if(!fr(o))return Lk(o);var u=sh(o),y=[];for(var E in o)E=="constructor"&&(u||!on.call(o,E))||y.push(E);return y}function Wl(o,u){return o<u}function Hl(o,u){var y=-1,E=rs(o)?De(o.length):[];return Ut(o,function(D,Q,ue){E[++y]=u(D,Q,ue)}),E}function Vp(o){var u=b1(o);return u.length==1&&u[0][2]?Aw(u[0][0],u[0][1]):function(y){return y===o||Ti(y,o,u)}}function Gp(o,u){return S1(o)&&Cw(u)?Aw(so(o),u):function(y){var E=M1(y,o);return E===n&&E===u?D1(y,o):Za(u,E,N|k)}}function Vl(o,u,y,E,D){o!==u&&Vr(u,function(Q,ue){if(D||(D=new T),fr(Q))eo(o,u,ue,y,Vl,E,D);else{var me=E?E(k1(o,ue),Q,ue+"",o,u,D):n;me===n&&(me=Q),Ye(o,ue,me)}},is)}function eo(o,u,y,E,D,Q,ue){var me=k1(o,y),Pe=k1(u,y),Ke=ue.get(Pe);if(Ke){Ye(o,y,Ke);return}var Xe=Q?Q(me,Pe,y+"",o,u,ue):n,at=Xe===n;if(at){var ft=Vt(Pe),Nt=!ft&&Ql(Pe),Tt=!ft&&!Nt&&Pd(Pe);Xe=Pe,ft||Nt||Tt?Vt(me)?Xe=me:kr(me)?Xe=ns(me):Nt?(at=!1,Xe=Ed(Pe,!0)):Tt?(at=!1,Xe=cw(Pe,!0)):Xe=[]:oh(Pe)||pu(Pe)?(Xe=me,pu(me)?Xe=sx(me):(!fr(me)||zo(me))&&(Xe=Ew(Pe))):at=!1}at&&(ue.set(Pe,Xe),D(Xe,Pe,E,Q,ue),ue.delete(Pe)),Ye(o,y,Xe)}function Yp(o,u){var y=o.length;if(y)return u+=u<0?y:0,Uo(u,y)?o[u]:n}function Kp(o,u,y){u.length?u=gn(u,function(Q){return Vt(Q)?function(ue){return Gn(ue,Q.length===1?Q[0]:Q)}:Q}):u=[ss];var E=-1;u=gn(u,Rn(Lt()));var D=Hl(o,function(Q,ue,me){var Pe=gn(u,function(Ke){return Ke(Q)});return{criteria:Pe,index:++E,value:Q}});return rr(D,function(Q,ue){return lk(Q,ue,y)})}function f1(o,u){return Zf(o,u,function(y,E){return D1(o,E)})}function Zf(o,u,y){for(var E=-1,D=u.length,Q={};++E<D;){var ue=u[E],me=Gn(o,ue);y(me,ue)&&Yl(Q,Js(ue,o),me)}return Q}function _d(o){return function(u){return Gn(u,o)}}function Sd(o,u,y,E){var D=E?pt:tt,Q=-1,ue=u.length,me=o;for(o===u&&(u=ns(u)),y&&(me=gn(o,Rn(y)));++Q<ue;)for(var Pe=0,Ke=u[Q],Xe=y?y(Ke):Ke;(Pe=D(me,Xe,Pe,E))>-1;)me!==o&&si.call(me,Pe,1),si.call(o,Pe,1);return o}function eh(o,u){for(var y=o?u.length:0,E=y-1;y--;){var D=u[y];if(y==E||D!==Q){var Q=D;Uo(D)?si.call(o,D,1):rh(o,D)}}return o}function Gl(o,u){return o+Ol(Fp()*(u-o+1))}function th(o,u,y,E){for(var D=-1,Q=Nr(Il((u-o)/(y||1)),0),ue=De(Q);Q--;)ue[E?Q:++D]=o,o+=y;return ue}function Fo(o,u){var y="";if(!o||u<1||u>F)return y;do u%2&&(y+=o),u=Ol(u/2),u&&(o+=o);while(u);return y}function Yt(o,u){return j1(Lw(o,u,ss),o+"")}function h1(o){return Ie(Td(o))}function Nd(o,u){var y=Td(o);return am(y,ct(u,0,y.length))}function Yl(o,u,y,E){if(!fr(o))return o;u=Js(u,o);for(var D=-1,Q=u.length,ue=Q-1,me=o;me!=null&&++D<Q;){var Pe=so(u[D]),Ke=y;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return o;if(D!=ue){var Xe=me[Pe];Ke=E?E(Xe,Pe,me):n,Ke===n&&(Ke=fr(Xe)?Xe:Uo(u[D+1])?[]:{})}$e(me,Pe,Ke),me=me[Pe]}return o}var kd=gd?function(o,u){return gd.set(o,u),o}:ss,to=Io?function(o,u){return Io(o,"toString",{configurable:!0,enumerable:!1,value:O1(u),writable:!0})}:ss;function Jp(o){return am(Td(o))}function Mi(o,u,y){var E=-1,D=o.length;u<0&&(u=-u>D?0:D+u),y=y>D?D:y,y<0&&(y+=D),D=u>y?0:y-u>>>0,u>>>=0;for(var Q=De(D);++E<D;)Q[E]=o[E+u];return Q}function p1(o,u){var y;return Ut(o,function(E,D,Q){return y=u(E,D,Q),!y}),!!y}function uu(o,u,y){var E=0,D=o==null?E:o.length;if(typeof u=="number"&&u===u&&D<=V){for(;E<D;){var Q=E+D>>>1,ue=o[Q];ue!==null&&!Cs(ue)&&(y?ue<=u:ue<u)?E=Q+1:D=Q}return D}return no(o,u,ss,y)}function no(o,u,y,E){var D=0,Q=o==null?0:o.length;if(Q===0)return 0;u=y(u);for(var ue=u!==u,me=u===null,Pe=Cs(u),Ke=u===n;D<Q;){var Xe=Ol((D+Q)/2),at=y(o[Xe]),ft=at!==n,Nt=at===null,Tt=at===at,Xt=Cs(at);if(ue)var Mt=E||Tt;else Ke?Mt=Tt&&(E||ft):me?Mt=Tt&&ft&&(E||!Nt):Pe?Mt=Tt&&ft&&!Nt&&(E||!Xt):Nt||Xt?Mt=!1:Mt=E?at<=u:at<u;Mt?D=Xe+1:Q=Xe}return Hr(Q,P)}function Xp(o,u){for(var y=-1,E=o.length,D=0,Q=[];++y<E;){var ue=o[y],me=u?u(ue):ue;if(!y||!ba(me,Pe)){var Pe=me;Q[D++]=ue===0?0:ue}}return Q}function nh(o){return typeof o=="number"?o:Cs(o)?ae:+o}function Di(o){if(typeof o=="string")return o;if(Vt(o))return gn(o,Di)+"";if(Cs(o))return Li?Li.call(o):"";var u=o+"";return u=="0"&&1/o==-X?"-0":u}function wa(o,u,y){var E=-1,D=jl,Q=o.length,ue=!0,me=[],Pe=me;if(y)ue=!1,D=Wa;else if(Q>=i){var Ke=u?null:pk(o);if(Ke)return Va(Ke);ue=!1,D=Ha,Pe=new v}else Pe=u?[]:me;e:for(;++E<Q;){var Xe=o[E],at=u?u(Xe):Xe;if(Xe=y||Xe!==0?Xe:0,ue&&at===at){for(var ft=Pe.length;ft--;)if(Pe[ft]===at)continue e;u&&Pe.push(at),me.push(Xe)}else D(Pe,at,y)||(Pe!==me&&Pe.push(at),me.push(Xe))}return me}function rh(o,u){return u=Js(u,o),o=Pw(o,u),o==null||delete o[so(Xs(u))]}function Kl(o,u,y,E){return Yl(o,u,y(Gn(o,u)),E)}function Jl(o,u,y,E){for(var D=o.length,Q=E?D:-1;(E?Q--:++Q<D)&&u(o[Q],Q,o););return y?Mi(o,E?0:Q,E?Q+1:D):Mi(o,E?Q+1:0,E?D:Q)}function du(o,u){var y=o;return y instanceof Qt&&(y=y.value()),Ws(u,function(E,D){return D.func.apply(D.thisArg,Gi([E],D.args))},y)}function Es(o,u,y){var E=o.length;if(E<2)return E?wa(o[0]):[];for(var D=-1,Q=De(E);++D<E;)for(var ue=o[D],me=-1;++me<E;)me!=D&&(Q[D]=Zt(Q[D]||ue,o[me],u,y));return wa(nn(Q,1),u,y)}function xa(o,u,y){for(var E=-1,D=o.length,Q=u.length,ue={};++E<D;){var me=E<Q?u[E]:n;y(ue,o[E],me)}return ue}function Ks(o){return kr(o)?o:[]}function Xl(o){return typeof o=="function"?o:ss}function Js(o,u){return Vt(o)?o:S1(o,u)?[o]:Iw(En(o))}var Qp=Yt;function ro(o,u,y){var E=o.length;return y=y===n?E:y,!u&&y>=E?o:Mi(o,u,y)}var jd=md||function(o){return vr.clearTimeout(o)};function Ed(o,u){if(u)return o.slice();var y=o.length,E=tu?tu(y):new o.constructor(y);return o.copy(E),E}function m1(o){var u=new o.constructor(o.byteLength);return new pa(u).set(new pa(o)),u}function sk(o,u){var y=u?m1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.byteLength)}function ak(o){var u=new o.constructor(o.source,xs.exec(o));return u.lastIndex=o.lastIndex,u}function ok(o){return es?vn(es.call(o)):{}}function cw(o,u){var y=u?m1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.length)}function uw(o,u){if(o!==u){var y=o!==n,E=o===null,D=o===o,Q=Cs(o),ue=u!==n,me=u===null,Pe=u===u,Ke=Cs(u);if(!me&&!Ke&&!Q&&o>u||Q&&ue&&Pe&&!me&&!Ke||E&&ue&&Pe||!y&&Pe||!D)return 1;if(!E&&!Q&&!Ke&&o<u||Ke&&y&&D&&!E&&!Q||me&&y&&D||!ue&&D||!Pe)return-1}return 0}function lk(o,u,y){for(var E=-1,D=o.criteria,Q=u.criteria,ue=D.length,me=y.length;++E<ue;){var Pe=uw(D[E],Q[E]);if(Pe){if(E>=me)return Pe;var Ke=y[E];return Pe*(Ke=="desc"?-1:1)}}return o.index-u.index}function dw(o,u,y,E){for(var D=-1,Q=o.length,ue=y.length,me=-1,Pe=u.length,Ke=Nr(Q-ue,0),Xe=De(Pe+Ke),at=!E;++me<Pe;)Xe[me]=u[me];for(;++D<ue;)(at||D<Q)&&(Xe[y[D]]=o[D]);for(;Ke--;)Xe[me++]=o[D++];return Xe}function fw(o,u,y,E){for(var D=-1,Q=o.length,ue=-1,me=y.length,Pe=-1,Ke=u.length,Xe=Nr(Q-me,0),at=De(Xe+Ke),ft=!E;++D<Xe;)at[D]=o[D];for(var Nt=D;++Pe<Ke;)at[Nt+Pe]=u[Pe];for(;++ue<me;)(ft||D<Q)&&(at[Nt+y[ue]]=o[D++]);return at}function ns(o,u){var y=-1,E=o.length;for(u||(u=De(E));++y<E;)u[y]=o[y];return u}function io(o,u,y,E){var D=!y;y||(y={});for(var Q=-1,ue=u.length;++Q<ue;){var me=u[Q],Pe=E?E(y[me],o[me],me,y,o):n;Pe===n&&(Pe=o[me]),D?He(y,me,Pe):$e(y,me,Pe)}return y}function ck(o,u){return io(o,_1(o),u)}function uk(o,u){return io(o,kw(o),u)}function Zp(o,u){return function(y,E){var D=Vt(y)?hd:Se,Q=u?u():{};return D(y,o,Lt(E,2),Q)}}function Cd(o){return Yt(function(u,y){var E=-1,D=y.length,Q=D>1?y[D-1]:n,ue=D>2?y[2]:n;for(Q=o.length>3&&typeof Q=="function"?(D--,Q):n,ue&&Ii(y[0],y[1],ue)&&(Q=D<3?n:Q,D=1),u=vn(u);++E<D;){var me=y[E];me&&o(u,me,E,Q)}return u})}function hw(o,u){return function(y,E){if(y==null)return y;if(!rs(y))return o(y,E);for(var D=y.length,Q=u?D:-1,ue=vn(y);(u?Q--:++Q<D)&&E(ue[Q],Q,ue)!==!1;);return y}}function pw(o){return function(u,y,E){for(var D=-1,Q=vn(u),ue=E(u),me=ue.length;me--;){var Pe=ue[o?me:++D];if(y(Q[Pe],Pe,Q)===!1)break}return u}}function dk(o,u,y){var E=u&C,D=ih(o);function Q(){var ue=this&&this!==vr&&this instanceof Q?D:o;return ue.apply(E?y:this,arguments)}return Q}function mw(o){return function(u){u=En(u);var y=_s(u)?pi(u):n,E=y?y[0]:u.charAt(0),D=y?ro(y,1).join(""):u.slice(1);return E[o]()+D}}function Ad(o){return function(u){return Ws(hx(fx(u).replace(zs,"")),o,"")}}function ih(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var y=Ul(o.prototype),E=o.apply(y,u);return fr(E)?E:y}}function fk(o,u,y){var E=ih(o);function D(){for(var Q=arguments.length,ue=De(Q),me=Q,Pe=Ld(D);me--;)ue[me]=arguments[me];var Ke=Q<3&&ue[0]!==Pe&&ue[Q-1]!==Pe?[]:Hs(ue,Pe);if(Q-=Ke.length,Q<y)return xw(o,u,em,D.placeholder,n,ue,Ke,n,n,y-Q);var Xe=this&&this!==vr&&this instanceof D?E:o;return Fr(Xe,this,ue)}return D}function gw(o){return function(u,y,E){var D=vn(u);if(!rs(u)){var Q=Lt(y,3);u=Yr(u),y=function(me){return Q(D[me],me,D)}}var ue=o(u,y,E);return ue>-1?D[Q?u[ue]:ue]:n}}function vw(o){return Bo(function(u){var y=u.length,E=y,D=Pi.prototype.thru;for(o&&u.reverse();E--;){var Q=u[E];if(typeof Q!="function")throw new Dr(a);if(D&&!ue&&im(Q)=="wrapper")var ue=new Pi([],!0)}for(E=ue?E:y;++E<y;){Q=u[E];var me=im(Q),Pe=me=="wrapper"?x1(Q):n;Pe&&N1(Pe[0])&&Pe[1]==(W|L|Y|I)&&!Pe[4].length&&Pe[9]==1?ue=ue[im(Pe[0])].apply(ue,Pe[3]):ue=Q.length==1&&N1(Q)?ue[me]():ue.thru(Q)}return function(){var Ke=arguments,Xe=Ke[0];if(ue&&Ke.length==1&&Vt(Xe))return ue.plant(Xe).value();for(var at=0,ft=y?u[at].apply(this,Ke):Xe;++at<y;)ft=u[at].call(this,ft);return ft}})}function em(o,u,y,E,D,Q,ue,me,Pe,Ke){var Xe=u&W,at=u&C,ft=u&_,Nt=u&(L|O),Tt=u&re,Xt=ft?n:ih(o);function Mt(){for(var sn=arguments.length,ln=De(sn),As=sn;As--;)ln[As]=arguments[As];if(Nt)var Oi=Ld(Mt),Ls=Al(ln,Oi);if(E&&(ln=dw(ln,E,D,Nt)),Q&&(ln=fw(ln,Q,ue,Nt)),sn-=Ls,Nt&&sn<Ke){var jr=Hs(ln,Oi);return xw(o,u,em,Mt.placeholder,y,ln,jr,me,Pe,Ke-sn)}var _a=at?y:this,Wo=ft?_a[o]:o;return sn=ln.length,me?ln=Tk(ln,me):Tt&&sn>1&&ln.reverse(),Xe&&Pe<sn&&(ln.length=Pe),this&&this!==vr&&this instanceof Mt&&(Wo=Xt||ih(Wo)),Wo.apply(_a,ln)}return Mt}function yw(o,u){return function(y,E){return Qa(y,o,u(E),{})}}function tm(o,u){return function(y,E){var D;if(y===n&&E===n)return u;if(y!==n&&(D=y),E!==n){if(D===n)return E;typeof y=="string"||typeof E=="string"?(y=Di(y),E=Di(E)):(y=nh(y),E=nh(E)),D=o(y,E)}return D}}function g1(o){return Bo(function(u){return u=gn(u,Rn(Lt())),Yt(function(y){var E=this;return o(u,function(D){return Fr(D,E,y)})})})}function nm(o,u){u=u===n?" ":Di(u);var y=u.length;if(y<2)return y?Fo(u,o):u;var E=Fo(u,Il(o/da(u)));return _s(u)?ro(pi(E),0,o).join(""):E.slice(0,o)}function hk(o,u,y,E){var D=u&C,Q=ih(o);function ue(){for(var me=-1,Pe=arguments.length,Ke=-1,Xe=E.length,at=De(Xe+Pe),ft=this&&this!==vr&&this instanceof ue?Q:o;++Ke<Xe;)at[Ke]=E[Ke];for(;Pe--;)at[Ke++]=arguments[++me];return Fr(ft,D?y:this,at)}return ue}function ww(o){return function(u,y,E){return E&&typeof E!="number"&&Ii(u,y,E)&&(y=E=n),u=qo(u),y===n?(y=u,u=0):y=qo(y),E=E===n?u<y?1:-1:qo(E),th(u,y,E,o)}}function rm(o){return function(u,y){return typeof u=="string"&&typeof y=="string"||(u=Qs(u),y=Qs(y)),o(u,y)}}function xw(o,u,y,E,D,Q,ue,me,Pe,Ke){var Xe=u&L,at=Xe?ue:n,ft=Xe?n:ue,Nt=Xe?Q:n,Tt=Xe?n:Q;u|=Xe?Y:se,u&=~(Xe?se:Y),u&S||(u&=~(C|_));var Xt=[o,u,D,Nt,at,Tt,ft,me,Pe,Ke],Mt=y.apply(n,Xt);return N1(o)&&Tw(Mt,Xt),Mt.placeholder=E,Mw(Mt,o,u)}function v1(o){var u=Bn[o];return function(y,E){if(y=Qs(y),E=E==null?0:Hr(Kt(E),292),E&&Op(y)){var D=(En(y)+"e").split("e"),Q=u(D[0]+"e"+(+D[1]+E));return D=(En(Q)+"e").split("e"),+(D[0]+"e"+(+D[1]-E))}return u(y)}}var pk=Fl&&1/Va(new Fl([,-0]))[1]==X?function(o){return new Fl(o)}:$1;function bw(o){return function(u){var y=yi(u);return y==We?Lo(u):y==be?pd(u):Mr(u,o(u))}}function $o(o,u,y,E,D,Q,ue,me){var Pe=u&_;if(!Pe&&typeof o!="function")throw new Dr(a);var Ke=E?E.length:0;if(Ke||(u&=~(Y|se),E=D=n),ue=ue===n?ue:Nr(Kt(ue),0),me=me===n?me:Kt(me),Ke-=D?D.length:0,u&se){var Xe=E,at=D;E=D=n}var ft=Pe?n:x1(o),Nt=[o,u,y,E,D,Xe,at,Q,ue,me];if(ft&&Ak(Nt,ft),o=Nt[0],u=Nt[1],y=Nt[2],E=Nt[3],D=Nt[4],me=Nt[9]=Nt[9]===n?Pe?0:o.length:Nr(Nt[9]-Ke,0),!me&&u&(L|O)&&(u&=~(L|O)),!u||u==C)var Tt=dk(o,u,y);else u==L||u==O?Tt=fk(o,u,me):(u==Y||u==(C|Y))&&!D.length?Tt=hk(o,u,y,E):Tt=em.apply(n,Nt);var Xt=ft?kd:Tw;return Mw(Xt(Tt,Nt),o,u)}function _w(o,u,y,E){return o===n||ba(o,Ns[y])&&!on.call(E,y)?u:o}function Sw(o,u,y,E,D,Q){return fr(o)&&fr(u)&&(Q.set(u,o),Vl(o,u,n,Sw,Q),Q.delete(u)),o}function mk(o){return oh(o)?n:o}function Nw(o,u,y,E,D,Q){var ue=y&N,me=o.length,Pe=u.length;if(me!=Pe&&!(ue&&Pe>me))return!1;var Ke=Q.get(o),Xe=Q.get(u);if(Ke&&Xe)return Ke==u&&Xe==o;var at=-1,ft=!0,Nt=y&k?new v:n;for(Q.set(o,u),Q.set(u,o);++at<me;){var Tt=o[at],Xt=u[at];if(E)var Mt=ue?E(Xt,Tt,at,u,o,Q):E(Tt,Xt,at,o,u,Q);if(Mt!==n){if(Mt)continue;ft=!1;break}if(Nt){if(!x(u,function(sn,ln){if(!Ha(Nt,ln)&&(Tt===sn||D(Tt,sn,y,E,Q)))return Nt.push(ln)})){ft=!1;break}}else if(!(Tt===Xt||D(Tt,Xt,y,E,Q))){ft=!1;break}}return Q.delete(o),Q.delete(u),ft}function gk(o,u,y,E,D,Q,ue){switch(y){case it:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case ot:return!(o.byteLength!=u.byteLength||!Q(new pa(o),new pa(u)));case Ee:case Z:case xe:return ba(+o,+u);case _e:return o.name==u.name&&o.message==u.message;case Ze:case ce:return o==u+"";case We:var me=Lo;case be:var Pe=E&N;if(me||(me=Va),o.size!=u.size&&!Pe)return!1;var Ke=ue.get(o);if(Ke)return Ke==u;E|=k,ue.set(o,u);var Xe=Nw(me(o),me(u),E,D,Q,ue);return ue.delete(o),Xe;case Ne:if(es)return es.call(o)==es.call(u)}return!1}function vk(o,u,y,E,D,Q){var ue=y&N,me=y1(o),Pe=me.length,Ke=y1(u),Xe=Ke.length;if(Pe!=Xe&&!ue)return!1;for(var at=Pe;at--;){var ft=me[at];if(!(ue?ft in u:on.call(u,ft)))return!1}var Nt=Q.get(o),Tt=Q.get(u);if(Nt&&Tt)return Nt==u&&Tt==o;var Xt=!0;Q.set(o,u),Q.set(u,o);for(var Mt=ue;++at<Pe;){ft=me[at];var sn=o[ft],ln=u[ft];if(E)var As=ue?E(ln,sn,ft,u,o,Q):E(sn,ln,ft,o,u,Q);if(!(As===n?sn===ln||D(sn,ln,y,E,Q):As)){Xt=!1;break}Mt||(Mt=ft=="constructor")}if(Xt&&!Mt){var Oi=o.constructor,Ls=u.constructor;Oi!=Ls&&"constructor"in o&&"constructor"in u&&!(typeof Oi=="function"&&Oi instanceof Oi&&typeof Ls=="function"&&Ls instanceof Ls)&&(Xt=!1)}return Q.delete(o),Q.delete(u),Xt}function Bo(o){return j1(Lw(o,n,$w),o+"")}function y1(o){return Gr(o,Yr,_1)}function w1(o){return Gr(o,is,kw)}var x1=gd?function(o){return gd.get(o)}:$1;function im(o){for(var u=o.name+"",y=Bl[u],E=on.call(Bl,u)?y.length:0;E--;){var D=y[E],Q=D.func;if(Q==null||Q==o)return D.name}return u}function Ld(o){var u=on.call(H,"placeholder")?H:o;return u.placeholder}function Lt(){var o=H.iteratee||R1;return o=o===R1?Xf:o,arguments.length?o(arguments[0],arguments[1]):o}function sm(o,u){var y=o.__data__;return kk(u)?y[typeof u=="string"?"string":"hash"]:y.map}function b1(o){for(var u=Yr(o),y=u.length;y--;){var E=u[y],D=o[E];u[y]=[E,D,Cw(D)]}return u}function fu(o,u){var y=Br(o,u);return Ro(y)?y:n}function yk(o){var u=on.call(o,Ka),y=o[Ka];try{o[Ka]=n;var E=!0}catch{}var D=_n.call(o);return E&&(u?o[Ka]=y:delete o[Ka]),D}var _1=Rl?function(o){return o==null?[]:(o=vn(o),bs(Rl(o),function(u){return vi.call(o,u)}))}:B1,kw=Rl?function(o){for(var u=[];o;)Gi(u,_1(o)),o=Dl(o);return u}:B1,yi=Dn;(iu&&yi(new iu(new ArrayBuffer(1)))!=it||ma&&yi(new ma)!=We||Kf&&yi(Kf.resolve())!=Je||Fl&&yi(new Fl)!=be||$l&&yi(new $l)!=ge)&&(yi=function(o){var u=Dn(o),y=u==Qe?o.constructor:n,E=y?hu(y):"";if(E)switch(E){case t1:return it;case Ja:return We;case js:return Je;case ga:return be;case n1:return ge}return u});function wk(o,u,y){for(var E=-1,D=y.length;++E<D;){var Q=y[E],ue=Q.size;switch(Q.type){case"drop":o+=ue;break;case"dropRight":u-=ue;break;case"take":u=Hr(u,o+ue);break;case"takeRight":o=Nr(o,u-ue);break}}return{start:o,end:u}}function xk(o){var u=o.match(er);return u?u[1].split(Wi):[]}function jw(o,u,y){u=Js(u,o);for(var E=-1,D=u.length,Q=!1;++E<D;){var ue=so(u[E]);if(!(Q=o!=null&&y(o,ue)))break;o=o[ue]}return Q||++E!=D?Q:(D=o==null?0:o.length,!!D&&fm(D)&&Uo(ue,D)&&(Vt(o)||pu(o)))}function bk(o){var u=o.length,y=new o.constructor(u);return u&&typeof o[0]=="string"&&on.call(o,"index")&&(y.index=o.index,y.input=o.input),y}function Ew(o){return typeof o.constructor=="function"&&!sh(o)?Ul(Dl(o)):{}}function _k(o,u,y){var E=o.constructor;switch(u){case ot:return m1(o);case Ee:case Z:return new E(+o);case it:return sk(o,y);case Fe:case st:case Ue:case Ct:case ut:case Gt:case kt:case At:case mn:return cw(o,y);case We:return new E;case xe:case ce:return new E(o);case Ze:return ak(o);case be:return new E;case Ne:return ok(o)}}function Sk(o,u){var y=u.length;if(!y)return o;var E=y-1;return u[E]=(y>1?"& ":"")+u[E],u=u.join(y>2?", ":" "),o.replace(Tn,`{
/* [wrapped with `+u+`] */
`)}function Nk(o){return Vt(o)||pu(o)||!!(ru&&o&&o[ru])}function Uo(o,u){var y=typeof o;return u=u??F,!!u&&(y=="number"||y!="symbol"&&dl.test(o))&&o>-1&&o%1==0&&o<u}function Ii(o,u,y){if(!fr(y))return!1;var E=typeof u;return(E=="number"?rs(y)&&Uo(u,y.length):E=="string"&&u in y)?ba(y[u],o):!1}function S1(o,u){if(Vt(o))return!1;var y=typeof o;return y=="number"||y=="symbol"||y=="boolean"||o==null||Cs(o)?!0:Rr.test(o)||!lr.test(o)||u!=null&&o in vn(u)}function kk(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function N1(o){var u=im(o),y=H[u];if(typeof y!="function"||!(u in Qt.prototype))return!1;if(o===y)return!0;var E=x1(y);return!!E&&o===E[0]}function jk(o){return!!Ai&&Ai in o}var Ek=Vs?zo:U1;function sh(o){var u=o&&o.constructor,y=typeof u=="function"&&u.prototype||Ns;return o===y}function Cw(o){return o===o&&!fr(o)}function Aw(o,u){return function(y){return y==null?!1:y[o]===u&&(u!==n||o in vn(y))}}function Ck(o){var u=um(o,function(E){return y.size===h&&y.clear(),E}),y=u.cache;return u}function Ak(o,u){var y=o[1],E=u[1],D=y|E,Q=D<(C|_|W),ue=E==W&&y==L||E==W&&y==I&&o[7].length<=u[8]||E==(W|I)&&u[7].length<=u[8]&&y==L;if(!(Q||ue))return o;E&C&&(o[2]=u[2],D|=y&C?0:S);var me=u[3];if(me){var Pe=o[3];o[3]=Pe?dw(Pe,me,u[4]):me,o[4]=Pe?Hs(o[3],p):u[4]}return me=u[5],me&&(Pe=o[5],o[5]=Pe?fw(Pe,me,u[6]):me,o[6]=Pe?Hs(o[5],p):u[6]),me=u[7],me&&(o[7]=me),E&W&&(o[8]=o[8]==null?u[8]:Hr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=D,o}function Lk(o){var u=[];if(o!=null)for(var y in vn(o))u.push(y);return u}function Pk(o){return _n.call(o)}function Lw(o,u,y){return u=Nr(u===n?o.length-1:u,0),function(){for(var E=arguments,D=-1,Q=Nr(E.length-u,0),ue=De(Q);++D<Q;)ue[D]=E[u+D];D=-1;for(var me=De(u+1);++D<u;)me[D]=E[D];return me[u]=y(ue),Fr(o,this,me)}}function Pw(o,u){return u.length<2?o:Gn(o,Mi(u,0,-1))}function Tk(o,u){for(var y=o.length,E=Hr(u.length,y),D=ns(o);E--;){var Q=u[E];o[E]=Uo(Q,y)?D[Q]:n}return o}function k1(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Tw=Dw(kd),ah=Ip||function(o,u){return vr.setTimeout(o,u)},j1=Dw(to);function Mw(o,u,y){var E=u+"";return j1(o,Sk(E,Mk(xk(E),y)))}function Dw(o){var u=0,y=0;return function(){var E=Zg(),D=K-(E-y);if(y=E,D>0){if(++u>=z)return arguments[0]}else u=0;return o.apply(n,arguments)}}function am(o,u){var y=-1,E=o.length,D=E-1;for(u=u===n?E:u;++y<u;){var Q=Gl(y,D),ue=o[Q];o[Q]=o[y],o[y]=ue}return o.length=u,o}var Iw=Ck(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(gt,function(y,E,D,Q){u.push(D?Q.replace(ys,"$1"):E||y)}),u});function so(o){if(typeof o=="string"||Cs(o))return o;var u=o+"";return u=="0"&&1/o==-X?"-0":u}function hu(o){if(o!=null){try{return ks.call(o)}catch{}try{return o+""}catch{}}return""}function Mk(o,u){return $r(ne,function(y){var E="_."+y[0];u&y[1]&&!jl(o,E)&&o.push(E)}),o.sort()}function Ow(o){if(o instanceof Qt)return o.clone();var u=new Pi(o.__wrapped__,o.__chain__);return u.__actions__=ns(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function Dk(o,u,y){(y?Ii(o,u,y):u===n)?u=1:u=Nr(Kt(u),0);var E=o==null?0:o.length;if(!E||u<1)return[];for(var D=0,Q=0,ue=De(Il(E/u));D<E;)ue[Q++]=Mi(o,D,D+=u);return ue}function Ik(o){for(var u=-1,y=o==null?0:o.length,E=0,D=[];++u<y;){var Q=o[u];Q&&(D[E++]=Q)}return D}function Ok(){var o=arguments.length;if(!o)return[];for(var u=De(o-1),y=arguments[0],E=o;E--;)u[E-1]=arguments[E];return Gi(Vt(y)?ns(y):[y],nn(u,1))}var Rk=Yt(function(o,u){return kr(o)?Zt(o,nn(u,1,kr,!0)):[]}),Fk=Yt(function(o,u){var y=Xs(u);return kr(y)&&(y=n),kr(o)?Zt(o,nn(u,1,kr,!0),Lt(y,2)):[]}),$k=Yt(function(o,u){var y=Xs(u);return kr(y)&&(y=n),kr(o)?Zt(o,nn(u,1,kr,!0),n,y):[]});function Bk(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:Kt(u),Mi(o,u<0?0:u,E)):[]}function Uk(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:Kt(u),u=E-u,Mi(o,0,u<0?0:u)):[]}function zk(o,u){return o&&o.length?Jl(o,Lt(u,3),!0,!0):[]}function qk(o,u){return o&&o.length?Jl(o,Lt(u,3),!0):[]}function Wk(o,u,y,E){var D=o==null?0:o.length;return D?(y&&typeof y!="number"&&Ii(o,u,y)&&(y=0,E=D),yr(o,u,y,E)):[]}function Rw(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=y==null?0:Kt(y);return D<0&&(D=Nr(E+D,0)),ze(o,Lt(u,3),D)}function Fw(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=E-1;return y!==n&&(D=Kt(y),D=y<0?Nr(E+D,0):Hr(D,E-1)),ze(o,Lt(u,3),D,!0)}function $w(o){var u=o==null?0:o.length;return u?nn(o,1):[]}function Hk(o){var u=o==null?0:o.length;return u?nn(o,X):[]}function Vk(o,u){var y=o==null?0:o.length;return y?(u=u===n?1:Kt(u),nn(o,u)):[]}function Gk(o){for(var u=-1,y=o==null?0:o.length,E={};++u<y;){var D=o[u];E[D[0]]=D[1]}return E}function Bw(o){return o&&o.length?o[0]:n}function Yk(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=y==null?0:Kt(y);return D<0&&(D=Nr(E+D,0)),tt(o,u,D)}function Kk(o){var u=o==null?0:o.length;return u?Mi(o,0,-1):[]}var Jk=Yt(function(o){var u=gn(o,Ks);return u.length&&u[0]===o[0]?Xa(u):[]}),Xk=Yt(function(o){var u=Xs(o),y=gn(o,Ks);return u===Xs(y)?u=n:y.pop(),y.length&&y[0]===o[0]?Xa(y,Lt(u,2)):[]}),Qk=Yt(function(o){var u=Xs(o),y=gn(o,Ks);return u=typeof u=="function"?u:n,u&&y.pop(),y.length&&y[0]===o[0]?Xa(y,n,u):[]});function Zk(o,u){return o==null?"":Qg.call(o,u)}function Xs(o){var u=o==null?0:o.length;return u?o[u-1]:n}function ej(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var D=E;return y!==n&&(D=Kt(y),D=D<0?Nr(E+D,0):Hr(D,E-1)),u===u?Ml(o,u,D):ze(o,jt,D,!0)}function tj(o,u){return o&&o.length?Yp(o,Kt(u)):n}var nj=Yt(Uw);function Uw(o,u){return o&&o.length&&u&&u.length?Sd(o,u):o}function rj(o,u,y){return o&&o.length&&u&&u.length?Sd(o,u,Lt(y,2)):o}function ij(o,u,y){return o&&o.length&&u&&u.length?Sd(o,u,n,y):o}var sj=Bo(function(o,u){var y=o==null?0:o.length,E=ht(o,u);return eh(o,gn(u,function(D){return Uo(D,y)?+D:D}).sort(uw)),E});function aj(o,u){var y=[];if(!(o&&o.length))return y;var E=-1,D=[],Q=o.length;for(u=Lt(u,3);++E<Q;){var ue=o[E];u(ue,E,o)&&(y.push(ue),D.push(E))}return eh(o,D),y}function E1(o){return o==null?o:Yf.call(o)}function oj(o,u,y){var E=o==null?0:o.length;return E?(y&&typeof y!="number"&&Ii(o,u,y)?(u=0,y=E):(u=u==null?0:Kt(u),y=y===n?E:Kt(y)),Mi(o,u,y)):[]}function lj(o,u){return uu(o,u)}function cj(o,u,y){return no(o,u,Lt(y,2))}function uj(o,u){var y=o==null?0:o.length;if(y){var E=uu(o,u);if(E<y&&ba(o[E],u))return E}return-1}function dj(o,u){return uu(o,u,!0)}function fj(o,u,y){return no(o,u,Lt(y,2),!0)}function hj(o,u){var y=o==null?0:o.length;if(y){var E=uu(o,u,!0)-1;if(ba(o[E],u))return E}return-1}function pj(o){return o&&o.length?Xp(o):[]}function mj(o,u){return o&&o.length?Xp(o,Lt(u,2)):[]}function gj(o){var u=o==null?0:o.length;return u?Mi(o,1,u):[]}function vj(o,u,y){return o&&o.length?(u=y||u===n?1:Kt(u),Mi(o,0,u<0?0:u)):[]}function yj(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:Kt(u),u=E-u,Mi(o,u<0?0:u,E)):[]}function wj(o,u){return o&&o.length?Jl(o,Lt(u,3),!1,!0):[]}function xj(o,u){return o&&o.length?Jl(o,Lt(u,3)):[]}var bj=Yt(function(o){return wa(nn(o,1,kr,!0))}),_j=Yt(function(o){var u=Xs(o);return kr(u)&&(u=n),wa(nn(o,1,kr,!0),Lt(u,2))}),Sj=Yt(function(o){var u=Xs(o);return u=typeof u=="function"?u:n,wa(nn(o,1,kr,!0),n,u)});function Nj(o){return o&&o.length?wa(o):[]}function kj(o,u){return o&&o.length?wa(o,Lt(u,2)):[]}function jj(o,u){return u=typeof u=="function"?u:n,o&&o.length?wa(o,n,u):[]}function C1(o){if(!(o&&o.length))return[];var u=0;return o=bs(o,function(y){if(kr(y))return u=Nr(y.length,u),!0}),Tr(u,function(y){return gn(o,Rt(y))})}function zw(o,u){if(!(o&&o.length))return[];var y=C1(o);return u==null?y:gn(y,function(E){return Fr(u,n,E)})}var Ej=Yt(function(o,u){return kr(o)?Zt(o,u):[]}),Cj=Yt(function(o){return Es(bs(o,kr))}),Aj=Yt(function(o){var u=Xs(o);return kr(u)&&(u=n),Es(bs(o,kr),Lt(u,2))}),Lj=Yt(function(o){var u=Xs(o);return u=typeof u=="function"?u:n,Es(bs(o,kr),n,u)}),Pj=Yt(C1);function Tj(o,u){return xa(o||[],u||[],$e)}function Mj(o,u){return xa(o||[],u||[],Yl)}var Dj=Yt(function(o){var u=o.length,y=u>1?o[u-1]:n;return y=typeof y=="function"?(o.pop(),y):n,zw(o,y)});function qw(o){var u=H(o);return u.__chain__=!0,u}function Ij(o,u){return u(o),o}function om(o,u){return u(o)}var Oj=Bo(function(o){var u=o.length,y=u?o[0]:0,E=this.__wrapped__,D=function(Q){return ht(Q,o)};return u>1||this.__actions__.length||!(E instanceof Qt)||!Uo(y)?this.thru(D):(E=E.slice(y,+y+(u?1:0)),E.__actions__.push({func:om,args:[D],thisArg:n}),new Pi(E,this.__chain__).thru(function(Q){return u&&!Q.length&&Q.push(n),Q}))});function Rj(){return qw(this)}function Fj(){return new Pi(this.value(),this.__chain__)}function $j(){this.__values__===n&&(this.__values__=rx(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function Bj(){return this}function Uj(o){for(var u,y=this;y instanceof ou;){var E=Ow(y);E.__index__=0,E.__values__=n,u?D.__wrapped__=E:u=E;var D=E;y=y.__wrapped__}return D.__wrapped__=o,u}function zj(){var o=this.__wrapped__;if(o instanceof Qt){var u=o;return this.__actions__.length&&(u=new Qt(this)),u=u.reverse(),u.__actions__.push({func:om,args:[E1],thisArg:n}),new Pi(u,this.__chain__)}return this.thru(E1)}function qj(){return du(this.__wrapped__,this.__actions__)}var Wj=Zp(function(o,u,y){on.call(o,y)?++o[y]:He(o,y,1)});function Hj(o,u,y){var E=Vt(o)?kl:jn;return y&&Ii(o,u,y)&&(u=n),E(o,Lt(u,3))}function Vj(o,u){var y=Vt(o)?bs:ai;return y(o,Lt(u,3))}var Gj=gw(Rw),Yj=gw(Fw);function Kj(o,u){return nn(lm(o,u),1)}function Jj(o,u){return nn(lm(o,u),X)}function Xj(o,u,y){return y=y===n?1:Kt(y),nn(lm(o,u),y)}function Ww(o,u){var y=Vt(o)?$r:Ut;return y(o,Lt(u,3))}function Hw(o,u){var y=Vt(o)?Xc:kn;return y(o,Lt(u,3))}var Qj=Zp(function(o,u,y){on.call(o,y)?o[y].push(u):He(o,y,[u])});function Zj(o,u,y,E){o=rs(o)?o:Td(o),y=y&&!E?Kt(y):0;var D=o.length;return y<0&&(y=Nr(D+y,0)),hm(o)?y<=D&&o.indexOf(u,y)>-1:!!D&&tt(o,u,y)>-1}var eE=Yt(function(o,u,y){var E=-1,D=typeof u=="function",Q=rs(o)?De(o.length):[];return Ut(o,function(ue){Q[++E]=D?Fr(u,ue,y):In(ue,u,y)}),Q}),tE=Zp(function(o,u,y){He(o,y,u)});function lm(o,u){var y=Vt(o)?gn:Hl;return y(o,Lt(u,3))}function nE(o,u,y,E){return o==null?[]:(Vt(u)||(u=u==null?[]:[u]),y=E?n:y,Vt(y)||(y=y==null?[]:[y]),Kp(o,u,y))}var rE=Zp(function(o,u,y){o[y?0:1].push(u)},function(){return[[],[]]});function iE(o,u,y){var E=Vt(o)?Ws:$n,D=arguments.length<3;return E(o,Lt(u,4),y,D,Ut)}function sE(o,u,y){var E=Vt(o)?Qc:$n,D=arguments.length<3;return E(o,Lt(u,4),y,D,kn)}function aE(o,u){var y=Vt(o)?bs:ai;return y(o,dm(Lt(u,3)))}function oE(o){var u=Vt(o)?Ie:h1;return u(o)}function lE(o,u,y){(y?Ii(o,u,y):u===n)?u=1:u=Kt(u);var E=Vt(o)?Oe:Nd;return E(o,u)}function cE(o){var u=Vt(o)?Ce:Jp;return u(o)}function uE(o){if(o==null)return 0;if(rs(o))return hm(o)?da(o):o.length;var u=yi(o);return u==We||u==be?o.size:ql(o).length}function dE(o,u,y){var E=Vt(o)?x:p1;return y&&Ii(o,u,y)&&(u=n),E(o,Lt(u,3))}var fE=Yt(function(o,u){if(o==null)return[];var y=u.length;return y>1&&Ii(o,u[0],u[1])?u=[]:y>2&&Ii(u[0],u[1],u[2])&&(u=[u[0]]),Kp(o,nn(u,1),[])}),cm=Vf||function(){return vr.Date.now()};function hE(o,u){if(typeof u!="function")throw new Dr(a);return o=Kt(o),function(){if(--o<1)return u.apply(this,arguments)}}function Vw(o,u,y){return u=y?n:u,u=o&&u==null?o.length:u,$o(o,W,n,n,n,n,u)}function Gw(o,u){var y;if(typeof u!="function")throw new Dr(a);return o=Kt(o),function(){return--o>0&&(y=u.apply(this,arguments)),o<=1&&(u=n),y}}var A1=Yt(function(o,u,y){var E=C;if(y.length){var D=Hs(y,Ld(A1));E|=Y}return $o(o,E,u,y,D)}),Yw=Yt(function(o,u,y){var E=C|_;if(y.length){var D=Hs(y,Ld(Yw));E|=Y}return $o(u,E,o,y,D)});function Kw(o,u,y){u=y?n:u;var E=$o(o,L,n,n,n,n,n,u);return E.placeholder=Kw.placeholder,E}function Jw(o,u,y){u=y?n:u;var E=$o(o,O,n,n,n,n,n,u);return E.placeholder=Jw.placeholder,E}function Xw(o,u,y){var E,D,Q,ue,me,Pe,Ke=0,Xe=!1,at=!1,ft=!0;if(typeof o!="function")throw new Dr(a);u=Qs(u)||0,fr(y)&&(Xe=!!y.leading,at="maxWait"in y,Q=at?Nr(Qs(y.maxWait)||0,u):Q,ft="trailing"in y?!!y.trailing:ft);function Nt(jr){var _a=E,Wo=D;return E=D=n,Ke=jr,ue=o.apply(Wo,_a),ue}function Tt(jr){return Ke=jr,me=ah(sn,u),Xe?Nt(jr):ue}function Xt(jr){var _a=jr-Pe,Wo=jr-Ke,gx=u-_a;return at?Hr(gx,Q-Wo):gx}function Mt(jr){var _a=jr-Pe,Wo=jr-Ke;return Pe===n||_a>=u||_a<0||at&&Wo>=Q}function sn(){var jr=cm();if(Mt(jr))return ln(jr);me=ah(sn,Xt(jr))}function ln(jr){return me=n,ft&&E?Nt(jr):(E=D=n,ue)}function As(){me!==n&&jd(me),Ke=0,E=Pe=D=me=n}function Oi(){return me===n?ue:ln(cm())}function Ls(){var jr=cm(),_a=Mt(jr);if(E=arguments,D=this,Pe=jr,_a){if(me===n)return Tt(Pe);if(at)return jd(me),me=ah(sn,u),Nt(Pe)}return me===n&&(me=ah(sn,u)),ue}return Ls.cancel=As,Ls.flush=Oi,Ls}var pE=Yt(function(o,u){return yn(o,1,u)}),mE=Yt(function(o,u,y){return yn(o,Qs(u)||0,y)});function gE(o){return $o(o,re)}function um(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Dr(a);var y=function(){var E=arguments,D=u?u.apply(this,E):E[0],Q=y.cache;if(Q.has(D))return Q.get(D);var ue=o.apply(this,E);return y.cache=Q.set(D,ue)||Q,ue};return y.cache=new(um.Cache||Ys),y}um.Cache=Ys;function dm(o){if(typeof o!="function")throw new Dr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function vE(o){return Gw(2,o)}var yE=Qp(function(o,u){u=u.length==1&&Vt(u[0])?gn(u[0],Rn(Lt())):gn(nn(u,1),Rn(Lt()));var y=u.length;return Yt(function(E){for(var D=-1,Q=Hr(E.length,y);++D<Q;)E[D]=u[D].call(this,E[D]);return Fr(o,this,E)})}),L1=Yt(function(o,u){var y=Hs(u,Ld(L1));return $o(o,Y,n,u,y)}),Qw=Yt(function(o,u){var y=Hs(u,Ld(Qw));return $o(o,se,n,u,y)}),wE=Bo(function(o,u){return $o(o,I,n,n,n,u)});function xE(o,u){if(typeof o!="function")throw new Dr(a);return u=u===n?u:Kt(u),Yt(o,u)}function bE(o,u){if(typeof o!="function")throw new Dr(a);return u=u==null?0:Nr(Kt(u),0),Yt(function(y){var E=y[u],D=ro(y,0,u);return E&&Gi(D,E),Fr(o,this,D)})}function _E(o,u,y){var E=!0,D=!0;if(typeof o!="function")throw new Dr(a);return fr(y)&&(E="leading"in y?!!y.leading:E,D="trailing"in y?!!y.trailing:D),Xw(o,u,{leading:E,maxWait:u,trailing:D})}function SE(o){return Vw(o,1)}function NE(o,u){return L1(Xl(u),o)}function kE(){if(!arguments.length)return[];var o=arguments[0];return Vt(o)?o:[o]}function jE(o){return wt(o,g)}function EE(o,u){return u=typeof u=="function"?u:n,wt(o,g,u)}function CE(o){return wt(o,m|g)}function AE(o,u){return u=typeof u=="function"?u:n,wt(o,m|g,u)}function LE(o,u){return u==null||fn(o,u,Yr(u))}function ba(o,u){return o===u||o!==o&&u!==u}var PE=rm(ts),TE=rm(function(o,u){return o>=u}),pu=wd(function(){return arguments}())?wd:function(o){return wr(o)&&on.call(o,"callee")&&!vi.call(o,"callee")},Vt=De.isArray,ME=Sl?Rn(Sl):qp;function rs(o){return o!=null&&fm(o.length)&&!zo(o)}function kr(o){return wr(o)&&rs(o)}function DE(o){return o===!0||o===!1||wr(o)&&Dn(o)==Ee}var Ql=Gf||U1,IE=qa?Rn(qa):Wp;function OE(o){return wr(o)&&o.nodeType===1&&!oh(o)}function RE(o){if(o==null)return!0;if(rs(o)&&(Vt(o)||typeof o=="string"||typeof o.splice=="function"||Ql(o)||Pd(o)||pu(o)))return!o.length;var u=yi(o);if(u==We||u==be)return!o.size;if(sh(o))return!ql(o).length;for(var y in o)if(on.call(o,y))return!1;return!0}function FE(o,u){return Za(o,u)}function $E(o,u,y){y=typeof y=="function"?y:n;var E=y?y(o,u):n;return E===n?Za(o,u,n,y):!!E}function P1(o){if(!wr(o))return!1;var u=Dn(o);return u==_e||u==je||typeof o.message=="string"&&typeof o.name=="string"&&!oh(o)}function BE(o){return typeof o=="number"&&Op(o)}function zo(o){if(!fr(o))return!1;var u=Dn(o);return u==Re||u==Be||u==Ae||u==Ve}function Zw(o){return typeof o=="number"&&o==Kt(o)}function fm(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=F}function fr(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function wr(o){return o!=null&&typeof o=="object"}var ex=dd?Rn(dd):xd;function UE(o,u){return o===u||Ti(o,u,b1(u))}function zE(o,u,y){return y=typeof y=="function"?y:n,Ti(o,u,b1(u),y)}function qE(o){return tx(o)&&o!=+o}function WE(o){if(Ek(o))throw new St(s);return Ro(o)}function HE(o){return o===null}function VE(o){return o==null}function tx(o){return typeof o=="number"||wr(o)&&Dn(o)==xe}function oh(o){if(!wr(o)||Dn(o)!=Qe)return!1;var u=Dl(o);if(u===null)return!0;var y=on.call(u,"constructor")&&u.constructor;return typeof y=="function"&&y instanceof y&&ks.call(y)==Mn}var T1=Ao?Rn(Ao):zl;function GE(o){return Zw(o)&&o>=-F&&o<=F}var nx=fd?Rn(fd):Hp;function hm(o){return typeof o=="string"||!Vt(o)&&wr(o)&&Dn(o)==ce}function Cs(o){return typeof o=="symbol"||wr(o)&&Dn(o)==Ne}var Pd=Nl?Rn(Nl):bd;function YE(o){return o===n}function KE(o){return wr(o)&&yi(o)==ge}function JE(o){return wr(o)&&Dn(o)==rt}var XE=rm(Wl),QE=rm(function(o,u){return o<=u});function rx(o){if(!o)return[];if(rs(o))return hm(o)?pi(o):ns(o);if(Ya&&o[Ya])return Tl(o[Ya]());var u=yi(o),y=u==We?Lo:u==be?Va:Td;return y(o)}function qo(o){if(!o)return o===0?o:0;if(o=Qs(o),o===X||o===-X){var u=o<0?-1:1;return u*U}return o===o?o:0}function Kt(o){var u=qo(o),y=u%1;return u===u?y?u-y:u:0}function ix(o){return o?ct(Kt(o),0,Le):0}function Qs(o){if(typeof o=="number")return o;if(Cs(o))return ae;if(fr(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=fr(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Yi(o);var y=$s.test(o);return y||ul.test(o)?ld(o.slice(2),y?2:8):Hi.test(o)?ae:+o}function sx(o){return io(o,is(o))}function ZE(o){return o?ct(Kt(o),-F,F):o===0?o:0}function En(o){return o==null?"":Di(o)}var e8=Cd(function(o,u){if(sh(u)||rs(u)){io(u,Yr(u),o);return}for(var y in u)on.call(u,y)&&$e(o,y,u[y])}),ax=Cd(function(o,u){io(u,is(u),o)}),pm=Cd(function(o,u,y,E){io(u,is(u),o,E)}),t8=Cd(function(o,u,y,E){io(u,Yr(u),o,E)}),n8=Bo(ht);function r8(o,u){var y=Ul(o);return u==null?y:Ge(y,u)}var i8=Yt(function(o,u){o=vn(o);var y=-1,E=u.length,D=E>2?u[2]:n;for(D&&Ii(u[0],u[1],D)&&(E=1);++y<E;)for(var Q=u[y],ue=is(Q),me=-1,Pe=ue.length;++me<Pe;){var Ke=ue[me],Xe=o[Ke];(Xe===n||ba(Xe,Ns[Ke])&&!on.call(o,Ke))&&(o[Ke]=Q[Ke])}return o}),s8=Yt(function(o){return o.push(n,Sw),Fr(ox,n,o)});function a8(o,u){return Me(o,Lt(u,3),sr)}function o8(o,u){return Me(o,Lt(u,3),oi)}function l8(o,u){return o==null?o:Vr(o,Lt(u,3),is)}function c8(o,u){return o==null?o:wn(o,Lt(u,3),is)}function u8(o,u){return o&&sr(o,Lt(u,3))}function d8(o,u){return o&&oi(o,Lt(u,3))}function f8(o){return o==null?[]:dr(o,Yr(o))}function h8(o){return o==null?[]:dr(o,is(o))}function M1(o,u,y){var E=o==null?n:Gn(o,u);return E===n?y:E}function p8(o,u){return o!=null&&jw(o,u,Ir)}function D1(o,u){return o!=null&&jw(o,u,ya)}var m8=yw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=_n.call(u)),o[u]=y},O1(ss)),g8=yw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=_n.call(u)),on.call(o,u)?o[u].push(y):o[u]=[y]},Lt),v8=Yt(In);function Yr(o){return rs(o)?we(o):ql(o)}function is(o){return rs(o)?we(o,!0):Qf(o)}function y8(o,u){var y={};return u=Lt(u,3),sr(o,function(E,D,Q){He(y,u(E,D,Q),E)}),y}function w8(o,u){var y={};return u=Lt(u,3),sr(o,function(E,D,Q){He(y,D,u(E,D,Q))}),y}var x8=Cd(function(o,u,y){Vl(o,u,y)}),ox=Cd(function(o,u,y,E){Vl(o,u,y,E)}),b8=Bo(function(o,u){var y={};if(o==null)return y;var E=!1;u=gn(u,function(Q){return Q=Js(Q,o),E||(E=Q.length>1),Q}),io(o,w1(o),y),E&&(y=wt(y,m|w|g,mk));for(var D=u.length;D--;)rh(y,u[D]);return y});function _8(o,u){return lx(o,dm(Lt(u)))}var S8=Bo(function(o,u){return o==null?{}:f1(o,u)});function lx(o,u){if(o==null)return{};var y=gn(w1(o),function(E){return[E]});return u=Lt(u),Zf(o,y,function(E,D){return u(E,D[0])})}function N8(o,u,y){u=Js(u,o);var E=-1,D=u.length;for(D||(D=1,o=n);++E<D;){var Q=o==null?n:o[so(u[E])];Q===n&&(E=D,Q=y),o=zo(Q)?Q.call(o):Q}return o}function k8(o,u,y){return o==null?o:Yl(o,u,y)}function j8(o,u,y,E){return E=typeof E=="function"?E:n,o==null?o:Yl(o,u,y,E)}var cx=bw(Yr),ux=bw(is);function E8(o,u,y){var E=Vt(o),D=E||Ql(o)||Pd(o);if(u=Lt(u,4),y==null){var Q=o&&o.constructor;D?y=E?new Q:[]:fr(o)?y=zo(Q)?Ul(Dl(o)):{}:y={}}return(D?$r:sr)(o,function(ue,me,Pe){return u(y,ue,me,Pe)}),y}function C8(o,u){return o==null?!0:rh(o,u)}function A8(o,u,y){return o==null?o:Kl(o,u,Xl(y))}function L8(o,u,y,E){return E=typeof E=="function"?E:n,o==null?o:Kl(o,u,Xl(y),E)}function Td(o){return o==null?[]:Ki(o,Yr(o))}function P8(o){return o==null?[]:Ki(o,is(o))}function T8(o,u,y){return y===n&&(y=u,u=n),y!==n&&(y=Qs(y),y=y===y?y:0),u!==n&&(u=Qs(u),u=u===u?u:0),ct(Qs(o),u,y)}function M8(o,u,y){return u=qo(u),y===n?(y=u,u=0):y=qo(y),o=Qs(o),Oo(o,u,y)}function D8(o,u,y){if(y&&typeof y!="boolean"&&Ii(o,u,y)&&(u=y=n),y===n&&(typeof u=="boolean"?(y=u,u=n):typeof o=="boolean"&&(y=o,o=n)),o===n&&u===n?(o=0,u=1):(o=qo(o),u===n?(u=o,o=0):u=qo(u)),o>u){var E=o;o=u,u=E}if(y||o%1||u%1){var D=Fp();return Hr(o+D*(u-o+_l("1e-"+((D+"").length-1))),u)}return Gl(o,u)}var I8=Ad(function(o,u,y){return u=u.toLowerCase(),o+(y?dx(u):u)});function dx(o){return I1(En(o).toLowerCase())}function fx(o){return o=En(o),o&&o.replace(fl,Zc).replace(od,"")}function O8(o,u,y){o=En(o),u=Di(u);var E=o.length;y=y===n?E:ct(Kt(y),0,E);var D=y;return y-=u.length,y>=0&&o.slice(y,D)==u}function R8(o){return o=En(o),o&&bt.test(o)?o.replace(un,eu):o}function F8(o){return o=En(o),o&&cr.test(o)?o.replace(Zn,"\\$&"):o}var $8=Ad(function(o,u,y){return o+(y?"-":"")+u.toLowerCase()}),B8=Ad(function(o,u,y){return o+(y?" ":"")+u.toLowerCase()}),U8=mw("toLowerCase");function z8(o,u,y){o=En(o),u=Kt(u);var E=u?da(o):0;if(!u||E>=u)return o;var D=(u-E)/2;return nm(Ol(D),y)+o+nm(Il(D),y)}function q8(o,u,y){o=En(o),u=Kt(u);var E=u?da(o):0;return u&&E<u?o+nm(u-E,y):o}function W8(o,u,y){o=En(o),u=Kt(u);var E=u?da(o):0;return u&&E<u?nm(u-E,y)+o:o}function H8(o,u,y){return y||u==null?u=0:u&&(u=+u),e1(En(o).replace(Pn,""),u||0)}function V8(o,u,y){return(y?Ii(o,u,y):u===n)?u=1:u=Kt(u),Fo(En(o),u)}function G8(){var o=arguments,u=En(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var Y8=Ad(function(o,u,y){return o+(y?"_":"")+u.toLowerCase()});function K8(o,u,y){return y&&typeof y!="number"&&Ii(o,u,y)&&(u=y=n),y=y===n?Le:y>>>0,y?(o=En(o),o&&(typeof u=="string"||u!=null&&!T1(u))&&(u=Di(u),!u&&_s(o))?ro(pi(o),0,y):o.split(u,y)):[]}var J8=Ad(function(o,u,y){return o+(y?" ":"")+I1(u)});function X8(o,u,y){return o=En(o),y=y==null?0:ct(Kt(y),0,o.length),u=Di(u),o.slice(y,y+u.length)==u}function Q8(o,u,y){var E=H.templateSettings;y&&Ii(o,u,y)&&(u=n),o=En(o),u=pm({},u,E,_w);var D=pm({},u.imports,E.imports,_w),Q=Yr(D),ue=Ki(D,Q),me,Pe,Ke=0,Xe=u.interpolate||ua,at="__p += '",ft=To((u.escape||ua).source+"|"+Xe.source+"|"+(Xe===rn?ws:ua).source+"|"+(u.evaluate||ua).source+"|$","g"),Nt="//# sourceURL="+(on.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wf+"]")+`
`;o.replace(ft,function(Mt,sn,ln,As,Oi,Ls){return ln||(ln=As),at+=o.slice(Ke,Ls).replace(Ju,Ll),sn&&(me=!0,at+=`' +
__e(`+sn+`) +
'`),Oi&&(Pe=!0,at+=`';
`+Oi+`;
__p += '`),ln&&(at+=`' +
((__t = (`+ln+`)) == null ? '' : __t) +
'`),Ke=Ls+Mt.length,Mt}),at+=`';
`;var Tt=on.call(u,"variable")&&u.variable;if(!Tt)at=`with (obj) {
`+at+`
}
`;else if(vs.test(Tt))throw new St(l);at=(Pe?at.replace(Pt,""):at).replace(Qn,"$1").replace(Et,"$1;"),at="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(me?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+at+`return __p
}`;var Xt=px(function(){return Wt(Q,Nt+"return "+at).apply(n,ue)});if(Xt.source=at,P1(Xt))throw Xt;return Xt}function Z8(o){return En(o).toLowerCase()}function eC(o){return En(o).toUpperCase()}function tC(o,u,y){if(o=En(o),o&&(y||u===n))return Yi(o);if(!o||!(u=Di(u)))return o;var E=pi(o),D=pi(u),Q=El(E,D),ue=Cl(E,D)+1;return ro(E,Q,ue).join("")}function nC(o,u,y){if(o=En(o),o&&(y||u===n))return o.slice(0,fa(o)+1);if(!o||!(u=Di(u)))return o;var E=pi(o),D=Cl(E,pi(u))+1;return ro(E,0,D).join("")}function rC(o,u,y){if(o=En(o),o&&(y||u===n))return o.replace(Pn,"");if(!o||!(u=Di(u)))return o;var E=pi(o),D=El(E,pi(u));return ro(E,D).join("")}function iC(o,u){var y=oe,E=R;if(fr(u)){var D="separator"in u?u.separator:D;y="length"in u?Kt(u.length):y,E="omission"in u?Di(u.omission):E}o=En(o);var Q=o.length;if(_s(o)){var ue=pi(o);Q=ue.length}if(y>=Q)return o;var me=y-da(E);if(me<1)return E;var Pe=ue?ro(ue,0,me).join(""):o.slice(0,me);if(D===n)return Pe+E;if(ue&&(me+=Pe.length-me),T1(D)){if(o.slice(me).search(D)){var Ke,Xe=Pe;for(D.global||(D=To(D.source,En(xs.exec(D))+"g")),D.lastIndex=0;Ke=D.exec(Xe);)var at=Ke.index;Pe=Pe.slice(0,at===n?me:at)}}else if(o.indexOf(Di(D),me)!=me){var ft=Pe.lastIndexOf(D);ft>-1&&(Pe=Pe.slice(0,ft))}return Pe+E}function sC(o){return o=En(o),o&&zt.test(o)?o.replace(or,Po):o}var aC=Ad(function(o,u,y){return o+(y?" ":"")+u.toUpperCase()}),I1=mw("toUpperCase");function hx(o,u,y){return o=En(o),u=y?n:u,u===n?Pl(o)?Ga(o):he(o):o.match(u)||[]}var px=Yt(function(o,u){try{return Fr(o,n,u)}catch(y){return P1(y)?y:new St(y)}}),oC=Bo(function(o,u){return $r(u,function(y){y=so(y),He(o,y,A1(o[y],o))}),o});function lC(o){var u=o==null?0:o.length,y=Lt();return o=u?gn(o,function(E){if(typeof E[1]!="function")throw new Dr(a);return[y(E[0]),E[1]]}):[],Yt(function(E){for(var D=-1;++D<u;){var Q=o[D];if(Fr(Q[0],this,E))return Fr(Q[1],this,E)}})}function cC(o){return dt(wt(o,m))}function O1(o){return function(){return o}}function uC(o,u){return o==null||o!==o?u:o}var dC=vw(),fC=vw(!0);function ss(o){return o}function R1(o){return Xf(typeof o=="function"?o:wt(o,m))}function hC(o){return Vp(wt(o,m))}function pC(o,u){return Gp(o,wt(u,m))}var mC=Yt(function(o,u){return function(y){return In(y,o,u)}}),gC=Yt(function(o,u){return function(y){return In(o,y,u)}});function F1(o,u,y){var E=Yr(u),D=dr(u,E);y==null&&!(fr(u)&&(D.length||!E.length))&&(y=u,u=o,o=this,D=dr(u,Yr(u)));var Q=!(fr(y)&&"chain"in y)||!!y.chain,ue=zo(o);return $r(D,function(me){var Pe=u[me];o[me]=Pe,ue&&(o.prototype[me]=function(){var Ke=this.__chain__;if(Q||Ke){var Xe=o(this.__wrapped__),at=Xe.__actions__=ns(this.__actions__);return at.push({func:Pe,args:arguments,thisArg:o}),Xe.__chain__=Ke,Xe}return Pe.apply(o,Gi([this.value()],arguments))})}),o}function vC(){return vr._===this&&(vr._=ur),this}function $1(){}function yC(o){return o=Kt(o),Yt(function(u){return Yp(u,o)})}var wC=g1(gn),xC=g1(kl),bC=g1(x);function mx(o){return S1(o)?Rt(so(o)):_d(o)}function _C(o){return function(u){return o==null?n:Gn(o,u)}}var SC=ww(),NC=ww(!0);function B1(){return[]}function U1(){return!1}function kC(){return{}}function jC(){return""}function EC(){return!0}function CC(o,u){if(o=Kt(o),o<1||o>F)return[];var y=Le,E=Hr(o,Le);u=Lt(u),o-=Le;for(var D=Tr(E,u);++y<o;)u(y);return D}function AC(o){return Vt(o)?gn(o,so):Cs(o)?[o]:ns(Iw(En(o)))}function LC(o){var u=++Xi;return En(o)+u}var PC=tm(function(o,u){return o+u},0),TC=v1("ceil"),MC=tm(function(o,u){return o/u},1),DC=v1("floor");function IC(o){return o&&o.length?$t(o,ss,ts):n}function OC(o,u){return o&&o.length?$t(o,Lt(u,2),ts):n}function RC(o){return Bt(o,ss)}function FC(o,u){return Bt(o,Lt(u,2))}function $C(o){return o&&o.length?$t(o,ss,Wl):n}function BC(o,u){return o&&o.length?$t(o,Lt(u,2),Wl):n}var UC=tm(function(o,u){return o*u},1),zC=v1("round"),qC=tm(function(o,u){return o-u},0);function WC(o){return o&&o.length?ir(o,ss):0}function HC(o,u){return o&&o.length?ir(o,Lt(u,2)):0}return H.after=hE,H.ary=Vw,H.assign=e8,H.assignIn=ax,H.assignInWith=pm,H.assignWith=t8,H.at=n8,H.before=Gw,H.bind=A1,H.bindAll=oC,H.bindKey=Yw,H.castArray=kE,H.chain=qw,H.chunk=Dk,H.compact=Ik,H.concat=Ok,H.cond=lC,H.conforms=cC,H.constant=O1,H.countBy=Wj,H.create=r8,H.curry=Kw,H.curryRight=Jw,H.debounce=Xw,H.defaults=i8,H.defaultsDeep=s8,H.defer=pE,H.delay=mE,H.difference=Rk,H.differenceBy=Fk,H.differenceWith=$k,H.drop=Bk,H.dropRight=Uk,H.dropRightWhile=zk,H.dropWhile=qk,H.fill=Wk,H.filter=Vj,H.flatMap=Kj,H.flatMapDeep=Jj,H.flatMapDepth=Xj,H.flatten=$w,H.flattenDeep=Hk,H.flattenDepth=Vk,H.flip=gE,H.flow=dC,H.flowRight=fC,H.fromPairs=Gk,H.functions=f8,H.functionsIn=h8,H.groupBy=Qj,H.initial=Kk,H.intersection=Jk,H.intersectionBy=Xk,H.intersectionWith=Qk,H.invert=m8,H.invertBy=g8,H.invokeMap=eE,H.iteratee=R1,H.keyBy=tE,H.keys=Yr,H.keysIn=is,H.map=lm,H.mapKeys=y8,H.mapValues=w8,H.matches=hC,H.matchesProperty=pC,H.memoize=um,H.merge=x8,H.mergeWith=ox,H.method=mC,H.methodOf=gC,H.mixin=F1,H.negate=dm,H.nthArg=yC,H.omit=b8,H.omitBy=_8,H.once=vE,H.orderBy=nE,H.over=wC,H.overArgs=yE,H.overEvery=xC,H.overSome=bC,H.partial=L1,H.partialRight=Qw,H.partition=rE,H.pick=S8,H.pickBy=lx,H.property=mx,H.propertyOf=_C,H.pull=nj,H.pullAll=Uw,H.pullAllBy=rj,H.pullAllWith=ij,H.pullAt=sj,H.range=SC,H.rangeRight=NC,H.rearg=wE,H.reject=aE,H.remove=aj,H.rest=xE,H.reverse=E1,H.sampleSize=lE,H.set=k8,H.setWith=j8,H.shuffle=cE,H.slice=oj,H.sortBy=fE,H.sortedUniq=pj,H.sortedUniqBy=mj,H.split=K8,H.spread=bE,H.tail=gj,H.take=vj,H.takeRight=yj,H.takeRightWhile=wj,H.takeWhile=xj,H.tap=Ij,H.throttle=_E,H.thru=om,H.toArray=rx,H.toPairs=cx,H.toPairsIn=ux,H.toPath=AC,H.toPlainObject=sx,H.transform=E8,H.unary=SE,H.union=bj,H.unionBy=_j,H.unionWith=Sj,H.uniq=Nj,H.uniqBy=kj,H.uniqWith=jj,H.unset=C8,H.unzip=C1,H.unzipWith=zw,H.update=A8,H.updateWith=L8,H.values=Td,H.valuesIn=P8,H.without=Ej,H.words=hx,H.wrap=NE,H.xor=Cj,H.xorBy=Aj,H.xorWith=Lj,H.zip=Pj,H.zipObject=Tj,H.zipObjectDeep=Mj,H.zipWith=Dj,H.entries=cx,H.entriesIn=ux,H.extend=ax,H.extendWith=pm,F1(H,H),H.add=PC,H.attempt=px,H.camelCase=I8,H.capitalize=dx,H.ceil=TC,H.clamp=T8,H.clone=jE,H.cloneDeep=CE,H.cloneDeepWith=AE,H.cloneWith=EE,H.conformsTo=LE,H.deburr=fx,H.defaultTo=uC,H.divide=MC,H.endsWith=O8,H.eq=ba,H.escape=R8,H.escapeRegExp=F8,H.every=Hj,H.find=Gj,H.findIndex=Rw,H.findKey=a8,H.findLast=Yj,H.findLastIndex=Fw,H.findLastKey=o8,H.floor=DC,H.forEach=Ww,H.forEachRight=Hw,H.forIn=l8,H.forInRight=c8,H.forOwn=u8,H.forOwnRight=d8,H.get=M1,H.gt=PE,H.gte=TE,H.has=p8,H.hasIn=D1,H.head=Bw,H.identity=ss,H.includes=Zj,H.indexOf=Yk,H.inRange=M8,H.invoke=v8,H.isArguments=pu,H.isArray=Vt,H.isArrayBuffer=ME,H.isArrayLike=rs,H.isArrayLikeObject=kr,H.isBoolean=DE,H.isBuffer=Ql,H.isDate=IE,H.isElement=OE,H.isEmpty=RE,H.isEqual=FE,H.isEqualWith=$E,H.isError=P1,H.isFinite=BE,H.isFunction=zo,H.isInteger=Zw,H.isLength=fm,H.isMap=ex,H.isMatch=UE,H.isMatchWith=zE,H.isNaN=qE,H.isNative=WE,H.isNil=VE,H.isNull=HE,H.isNumber=tx,H.isObject=fr,H.isObjectLike=wr,H.isPlainObject=oh,H.isRegExp=T1,H.isSafeInteger=GE,H.isSet=nx,H.isString=hm,H.isSymbol=Cs,H.isTypedArray=Pd,H.isUndefined=YE,H.isWeakMap=KE,H.isWeakSet=JE,H.join=Zk,H.kebabCase=$8,H.last=Xs,H.lastIndexOf=ej,H.lowerCase=B8,H.lowerFirst=U8,H.lt=XE,H.lte=QE,H.max=IC,H.maxBy=OC,H.mean=RC,H.meanBy=FC,H.min=$C,H.minBy=BC,H.stubArray=B1,H.stubFalse=U1,H.stubObject=kC,H.stubString=jC,H.stubTrue=EC,H.multiply=UC,H.nth=tj,H.noConflict=vC,H.noop=$1,H.now=cm,H.pad=z8,H.padEnd=q8,H.padStart=W8,H.parseInt=H8,H.random=D8,H.reduce=iE,H.reduceRight=sE,H.repeat=V8,H.replace=G8,H.result=N8,H.round=zC,H.runInContext=ke,H.sample=oE,H.size=uE,H.snakeCase=Y8,H.some=dE,H.sortedIndex=lj,H.sortedIndexBy=cj,H.sortedIndexOf=uj,H.sortedLastIndex=dj,H.sortedLastIndexBy=fj,H.sortedLastIndexOf=hj,H.startCase=J8,H.startsWith=X8,H.subtract=qC,H.sum=WC,H.sumBy=HC,H.template=Q8,H.times=CC,H.toFinite=qo,H.toInteger=Kt,H.toLength=ix,H.toLower=Z8,H.toNumber=Qs,H.toSafeInteger=ZE,H.toString=En,H.toUpper=eC,H.trim=tC,H.trimEnd=nC,H.trimStart=rC,H.truncate=iC,H.unescape=sC,H.uniqueId=LC,H.upperCase=aC,H.upperFirst=I1,H.each=Ww,H.eachRight=Hw,H.first=Bw,F1(H,function(){var o={};return sr(H,function(u,y){on.call(H.prototype,y)||(o[y]=u)}),o}(),{chain:!1}),H.VERSION=r,$r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){H[o].placeholder=H}),$r(["drop","take"],function(o,u){Qt.prototype[o]=function(y){y=y===n?1:Nr(Kt(y),0);var E=this.__filtered__&&!u?new Qt(this):this.clone();return E.__filtered__?E.__takeCount__=Hr(y,E.__takeCount__):E.__views__.push({size:Hr(y,Le),type:o+(E.__dir__<0?"Right":"")}),E},Qt.prototype[o+"Right"]=function(y){return this.reverse()[o](y).reverse()}}),$r(["filter","map","takeWhile"],function(o,u){var y=u+1,E=y==J||y==pe;Qt.prototype[o]=function(D){var Q=this.clone();return Q.__iteratees__.push({iteratee:Lt(D,3),type:y}),Q.__filtered__=Q.__filtered__||E,Q}}),$r(["head","last"],function(o,u){var y="take"+(u?"Right":"");Qt.prototype[o]=function(){return this[y](1).value()[0]}}),$r(["initial","tail"],function(o,u){var y="drop"+(u?"":"Right");Qt.prototype[o]=function(){return this.__filtered__?new Qt(this):this[y](1)}}),Qt.prototype.compact=function(){return this.filter(ss)},Qt.prototype.find=function(o){return this.filter(o).head()},Qt.prototype.findLast=function(o){return this.reverse().find(o)},Qt.prototype.invokeMap=Yt(function(o,u){return typeof o=="function"?new Qt(this):this.map(function(y){return In(y,o,u)})}),Qt.prototype.reject=function(o){return this.filter(dm(Lt(o)))},Qt.prototype.slice=function(o,u){o=Kt(o);var y=this;return y.__filtered__&&(o>0||u<0)?new Qt(y):(o<0?y=y.takeRight(-o):o&&(y=y.drop(o)),u!==n&&(u=Kt(u),y=u<0?y.dropRight(-u):y.take(u-o)),y)},Qt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Qt.prototype.toArray=function(){return this.take(Le)},sr(Qt.prototype,function(o,u){var y=/^(?:filter|find|map|reject)|While$/.test(u),E=/^(?:head|last)$/.test(u),D=H[E?"take"+(u=="last"?"Right":""):u],Q=E||/^find/.test(u);D&&(H.prototype[u]=function(){var ue=this.__wrapped__,me=E?[1]:arguments,Pe=ue instanceof Qt,Ke=me[0],Xe=Pe||Vt(ue),at=function(sn){var ln=D.apply(H,Gi([sn],me));return E&&ft?ln[0]:ln};Xe&&y&&typeof Ke=="function"&&Ke.length!=1&&(Pe=Xe=!1);var ft=this.__chain__,Nt=!!this.__actions__.length,Tt=Q&&!ft,Xt=Pe&&!Nt;if(!Q&&Xe){ue=Xt?ue:new Qt(this);var Mt=o.apply(ue,me);return Mt.__actions__.push({func:om,args:[at],thisArg:n}),new Pi(Mt,ft)}return Tt&&Xt?o.apply(this,me):(Mt=this.thru(at),Tt?E?Mt.value()[0]:Mt.value():Mt)})}),$r(["pop","push","shift","sort","splice","unshift"],function(o){var u=Ss[o],y=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",E=/^(?:pop|shift)$/.test(o);H.prototype[o]=function(){var D=arguments;if(E&&!this.__chain__){var Q=this.value();return u.apply(Vt(Q)?Q:[],D)}return this[y](function(ue){return u.apply(Vt(ue)?ue:[],D)})}}),sr(Qt.prototype,function(o,u){var y=H[u];if(y){var E=y.name+"";on.call(Bl,E)||(Bl[E]=[]),Bl[E].push({name:u,func:y})}}),Bl[em(n,_).name]=[{name:"wrapper",func:n}],Qt.prototype.clone=$p,Qt.prototype.reverse=r1,Qt.prototype.value=vd,H.prototype.at=Oj,H.prototype.chain=Rj,H.prototype.commit=Fj,H.prototype.next=$j,H.prototype.plant=Uj,H.prototype.reverse=zj,H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=qj,H.prototype.first=H.prototype.head,Ya&&(H.prototype[Ya]=Bj),H},gi=ha();ni?((ni.exports=gi)._=gi,Vi._=gi):vr._=gi}).call(ci)})(eg,eg.exports);var PB=eg.exports;async function I6(e,t){try{const{data:n,error:r}=await et.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r){if(console.error("Error en RPC get_group_calendar:",r),r.code==="42501"){console.warn("Error de permisos RLS en calendarios, continuando sin generar calendario");return}throw r}if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,s="calendar.ics",a=new Blob([i],{type:"text/calendar;charset=utf-8"}),l=new File([a],s,{type:"text/calendar;charset=utf-8"}),{error:c}=await et.storage.from("calendars").upload(`${e}/${t}/${s}`,l,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:h}}=et.storage.from("calendars").getPublicUrl(`${e}/${t}/${s}`),p=`${h}?v=${Date.now()}`,{error:m}=await et.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(m)throw m}catch(n){throw console.error("Error updating calendar:",n),n}}async function tg(e){return qn(async()=>{const{data:t,error:n}=await et.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function h0(e){const t={...e,type:e.type||"song"};return qn(async()=>{const{data:n,error:r}=await et.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la canción")}async function TB(e,t,n){const{data:{user:r}}=await et.auth.getUser();if(!r)return Te.error("No se pudo obtener la información del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return qn(async()=>{const{data:s,error:a}=await et.from("songs").insert(i).select().single();return{data:s,error:a}},"Error al crear el medley")}async function K3(e,t){return qn(async()=>{const{data:n,error:r}=await et.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la canción")}async function MB(e){try{const{error:t}=await et.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la canción:",t),Te.error("Error al eliminar la canción"),!1):!0}catch(t){return console.error("Error al eliminar la canción:",t),Te.error("Error al eliminar la canción"),!1}}async function by(e){return qn(async()=>{const{data:t,error:n}=await et.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function J3(e){return qn(async()=>{const{data:t,error:n}=await et.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function Q5(e){return qn(async()=>{const{data:t,error:n}=await et.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function DB(e,t){return qn(async()=>{const{data:n,error:r}=await et.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function IB(e){try{const{error:t}=await et.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),Te.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),Te.error("Error al eliminar el setlist"),!1}}async function ng(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await et.auth.getUser();if(!r)return console.error("No se pudo obtener la información del usuario"),Te.error("No se pudo obtener la información del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:s,error:a}=await et.from("setlist_songs").insert(i).select().single();return a?(console.error("Error de Supabase al añadir la canción al setlist:",a),console.error("Código de error:",a.code),console.error("Mensaje de error:",a.message),console.error("Detalles:",a.details),Te.error(`Error al añadir la canción al setlist: ${a.message}`),null):(console.log("Canción añadida exitosamente:",s),s)}catch(r){return console.error("Error general al añadir la canción al setlist:",r),Te.error("Error al añadir la canción al setlist"),null}}async function OB(e,t){try{const{error:n,count:r}=await et.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la canción del setlist:",n),Te.error("Error al eliminar la canción del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la canción del setlist:",n),Te.error("Error al eliminar la canción del setlist"),!1}}async function RB(e,t){try{const{error:n}=await et.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),Te.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),Te.error("Error al reordenar las canciones del setlist"),!1}}async function X3(e,t){return await qn(async()=>{const{data:r,error:i}=await et.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function FB(e,t){return qn(async()=>{const{data:n,error:r}=await et.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function $B(e,t){try{const{data:n,error:r}=await et.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Te.error("Error al obtener el medley"),null;const s=[...n.medley_song_ids||[],t],{data:a,error:l}=await et.from("songs").update({medley_song_ids:s}).eq("id",e).select().single();return l?(console.error("Error al añadir la canción al medley:",l),Te.error("Error al añadir la canción al medley"),null):a}catch(n){return console.error("Error al añadir la canción al medley:",n),Te.error("Error al añadir la canción al medley"),null}}async function BB(e,t){try{const{data:n,error:r}=await et.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Te.error("Error al obtener el medley"),!1;const s=(n.medley_song_ids||[]).filter(l=>l!==t),{error:a}=await et.from("songs").update({medley_song_ids:s}).eq("id",e);return a?(console.error("Error al eliminar la canción del medley:",a),Te.error("Error al eliminar la canción del medley"),!1):!0}catch(n){return console.error("Error al eliminar la canción del medley:",n),Te.error("Error al eliminar la canción del medley"),!1}}async function UB(e){try{const{error:t}=await et.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),Te.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),Te.error("Error al eliminar el medley"),!1}}async function zB(e,t){try{const n=await J3(e);if(!n)return Te.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await et.auth.getUser();if(!r)return Te.error("No se pudo obtener la información del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},s=await Q5(i);if(!s)return Te.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const a=n.songs.map(l=>ng(s.id,l.song_id,l.position));await Promise.all(a)}return await J3(s.id)}catch(n){return console.error("Error al duplicar el setlist:",n),Te.error("Error al duplicar el setlist"),null}}let vu=null;function Q3({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:s,availableDates:a,members:l}){var je;const[c,h]=j.useState(""),[p,m]=j.useState(""),[w,g]=j.useState(""),[N,k]=j.useState(""),[C,_]=j.useState(!1),[S,L]=j.useState([]),[O,Y]=j.useState(!1),{user:se}=Zr(),[W,I]=j.useState(""),[re,oe]=j.useState([]),[R,z]=j.useState(null),[K,J]=j.useState(!1),[ye,pe]=j.useState([]),[X,F]=j.useState([]),[U,ae]=j.useState("");j.useEffect(()=>{if(i)h(i.name),m(i.date),g(i.time),k(i.notes||""),I(i.location||""),ae(i.setlist_id||""),i.location&&z({display_name:i.location,lat:"",lon:"",type:"",class:""}),Le();else if(r){const _e=Jt(r,"yyyy-MM-dd");m(_e),g("20:00"),ae(""),P(_e)}},[i,r]),j.useEffect(()=>{e&&(async()=>{const[Re,Be]=await Promise.all([et.from("events").select("*").eq("group_id",n),by(n)]);pe(Re.data||[]),F(Be||[])})()},[e,n]);const Le=async()=>{if(i)try{const _e=await qn(()=>et.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),Re=await qn(()=>et.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),Be=await qn(()=>et.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(_e){const We=new Set((Re==null?void 0:Re.map(Je=>Je.user_id))||[]),xe=new Set;Be==null||Be.forEach(Je=>{var Ve;(Ve=Je.event_members)==null||Ve.forEach(Ze=>{xe.add(Ze.user_id)})});const ee=new Set(_e.map(Je=>Je.group_member_id)),Qe=l.map(Je=>({memberId:Je.id,userId:Je.user_id,selected:ee.has(Je.id),isAvailable:ee.has(Je.id)||(Je.user_id?We.has(Je.user_id)&&!xe.has(Je.user_id):!0),sync_calendar:Je.sync_calendar||!1}));L(Qe)}}catch(_e){console.error("Error loading event members:",_e)}},P=async(_e,Re)=>{try{const Be=await qn(()=>et.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",_e),"Error loading external events"),We=new Set;Be==null||Be.forEach(Je=>{var Ve;(Ve=Je.event_members)==null||Ve.forEach(Ze=>{We.add(Ze.user_id)})});const xe=await qn(()=>et.from("member_availability").select("user_id").eq("date",_e),"Error loading member availability"),ee=new Set((xe==null?void 0:xe.map(Je=>Je.user_id))||[]),Qe=l.map(Je=>{const Ve=Je.user_id?ee.has(Je.user_id)&&!We.has(Je.user_id):!0;return{memberId:Je.id,userId:Je.user_id,selected:Re?Re.includes(Je.id):Je.role_in_group==="principal"&&Ve,isAvailable:Ve,sync_calendar:Je.sync_calendar||!1}});L(Qe)}catch(Be){console.error("Error loading available members:",Be)}};j.useEffect(()=>{V()},[S]);const V=()=>{const _e=l.filter(We=>We.role_in_group==="principal"),Re=S.filter(We=>We.selected).map(We=>We.memberId),Be=new Set;return _e.forEach(We=>{Re.includes(We.id)||We.instruments.forEach(xe=>{S.filter(Qe=>Qe.selected).some(Qe=>{const Je=l.find(Ve=>Ve.id===Qe.memberId);return Je==null?void 0:Je.instruments.some(Ve=>Ve.id===xe.id)})||Be.add(xe.name)})}),Y(Be.size>0),Be},ne=(_e,Re)=>{L(Be=>Be.map(We=>We.memberId===_e?{...We,selected:Re}:We))},le=async _e=>{if(!_e.trim()){oe([]);return}vu&&vu.abort(),vu=new AbortController,J(!0);try{const We=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(_e)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:vu.signal})).json()).sort((xe,ee)=>{const Qe=xe.display_name.toLowerCase().includes("madrid")||xe.display_name.toLowerCase().includes("españa"),Je=ee.display_name.toLowerCase().includes("madrid")||ee.display_name.toLowerCase().includes("españa");return Qe&&!Je?-1:!Qe&&Je?1:0});oe(We)}catch(Re){Re.name!=="AbortError"&&(console.error("Error searching locations:",Re),Te.error("Error al buscar ubicaciones"))}finally{J(!1),vu=null}};j.useEffect(()=>()=>{vu&&vu.abort()},[]);const de=vt.useCallback(PB.debounce(_e=>{le(_e)},300),[]),Ae=_e=>{const Re=_e.target.value;if(I(Re),oe([]),!Re.trim()){oe([]);return}de(Re)},Ee=async()=>{try{if(!c||!p){Te.error("Por favor completa los campos requeridos");return}_(!0);const _e={group_id:n,name:c.trim(),date:p,time:w,datetime:(()=>{const Be=new Date(`${p}T${w}`),We=-Be.getTimezoneOffset();return new Date(Be.getTime()-We*60*1e3).toISOString().replace("Z",qB(We))})(),notes:N.trim()||null,created_by:se.id,location:R?R.display_name:W};let Re;if(i){const{data:Be,error:We}=await et.from("events").update(_e).eq("id",i.id).select().single();if(We)throw We;Re=i.id}else{const{data:Be,error:We}=await et.from("events").insert([_e]).select().single();if(We)throw We;Re=Be.id}if(Re){i&&await et.from("event_members").delete().eq("event_id",Re);const Be=S.filter(We=>We.selected).map(We=>({event_id:Re,group_member_id:We.memberId,user_id:We.userId,created_by:se.id}));if(Be.length>0){const{error:We}=await et.from("event_members").insert(Be);if(We)throw We}try{await Promise.all(S.filter(We=>We.selected&&We.sync_calendar&&We.userId).map(async We=>{try{return await I6(n,We.memberId)}catch{return null}}))}catch{}U?await X3(Re,U):i!=null&&i.setlist_id&&await X3(Re,null)}_(!1),s&&s(),t(),Te.success(i?"Evento actualizado":"Evento creado")}catch(_e){_(!1),console.error("Error saving event:",_e),Te.error("Error al guardar el evento")}},Z=_e=>{const Re=new Date;Re.setHours(0,0,0,0);const Be=new Set(a.map(xe=>Jt(xe,"yyyy-MM-dd"))),We=new Set(ye.map(xe=>Jt(new Date(xe.date),"yyyy-MM-dd")));return _e.filter(xe=>{const ee=Jt(xe,"yyyy-MM-dd"),Qe=xe>=Re;return Be.has(ee)&&!We.has(ee)&&Qe}).sort((xe,ee)=>xe.getTime()-ee.getTime())};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[d.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:Ee,className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(Xn,{label:"Event Name",value:c,onChange:_e=>h(_e.target.value),required:!0,placeholder:"Enter event name"}),d.jsx(Xn,{label:"Time",type:"time",value:w,onChange:_e=>g(_e.target.value),required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),d.jsxs("select",{value:p,onChange:_e=>{m(_e.target.value),P(_e.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",disabled:!0,children:"Select a date"}),Z(a).map((_e,Re)=>{const Be=Jt(_e,"yyyy-MM-dd");return d.jsx("option",{value:Be,children:Jt(_e,"EEEE, d MMMM yyyy",{locale:co})},Re)})]})]}),i&&d.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:d.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",Jt(new Date(i.date),"EEEE, d MMMM yyyy",{locale:co})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),d.jsxs("select",{value:U,onChange:_e=>ae(_e.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",children:"Sin setlist"}),X.map(_e=>{var Re;return d.jsxs("option",{value:_e.id,children:[_e.name," (",((Re=_e.songs)==null?void 0:Re.length)||0," canciones)"]},_e.id)})]}),U&&d.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(je=X.find(_e=>_e.id===U))==null?void 0:je.name]})})]}),p&&d.jsx(LB,{members:l,selectedMembers:S,onMemberSelectionChange:ne,validationError:O}),d.jsxs("div",{className:"relative space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicación"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(o0,{className:"h-5 w-5 text-gray-400"})}),d.jsx(Xn,{value:W,onChange:Ae,className:"pl-10 pr-10",placeholder:"Buscar ubicación..."}),W&&d.jsx("button",{type:"button",onClick:()=>{I(""),z(null),oe([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d.jsx(Ia,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),K&&d.jsx("div",{className:"flex items-center justify-center p-4",children:d.jsx(ol,{className:"h-6 w-6 animate-spin text-primary"})}),re.length>0&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:re.map((_e,Re)=>d.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{z(_e),I(_e.display_name),oe([])},children:[d.jsx(o0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:_e.display_name.split(",")[0]}),d.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:_e.display_name.split(",").slice(1).join(",").trim()})]})]},Re))}),R&&d.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(o0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:typeof R.display_name=="string"&&R.display_name.includes(",")?R.display_name.split(",")[0]:R.display_name}),d.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:typeof R.display_name=="string"&&R.display_name.includes(",")?R.display_name.split(",").slice(1).join(",").trim():""})]}),d.jsx("button",{type:"button",onClick:()=>{z(null),I("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:d.jsx(Ia,{className:"h-5 w-5"})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:N,onChange:_e=>k(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(_t,{onClick:Ee,disabled:C,className:"w-full",children:C?d.jsxs(d.Fragment,{children:[d.jsx(ol,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function qB(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}const WB=(e,t,n,r=!1)=>{var W,I;const i=new Dt("p","mm","a4"),s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),l=r?"#FFFFFF":"#1E2A47",c=r?"#000000":"#F95738",h="helvetica";r||(i.setFillColor(l),i.rect(0,0,s,a,"F"));const p=[...((W=e.songs)==null?void 0:W.map(re=>({...re,type:"song"})))||[],...((I=e.medleys)==null?void 0:I.map(re=>({...re,type:"medley"})))||[]].sort((re,oe)=>re.position-oe.position),m=30,w=10,g=s-60,N=p.length>20,k=N?(g-20)/2:g,C=20,_=C+k+20;let S=18,L=w;p.length>30?(S=14,L=8):p.length>25&&(S=16,L=9),i.setFont(h,"bold"),i.setFontSize(S),i.setTextColor(c);let O=m;if(N){const re=Math.ceil(p.length/2),oe=p.slice(0,re),R=p.slice(re);let z=O;oe.forEach((J,ye)=>{let pe="";if(J.type==="song"){const ae=J;ae.song&&(pe=ae.song.title)}else J.type==="medley"&&(pe=J.name||"Medley");const F=`${String(ye+1).padStart(2,"0")}. ${pe}`,U=i.splitTextToSize(F.toUpperCase(),k);i.text(U,C,z),z+=U.length*L});let K=O;R.forEach((J,ye)=>{let pe="";if(J.type==="song"){const ae=J;ae.song&&(pe=ae.song.title)}else J.type==="medley"&&(pe=J.name||"Medley");const F=`${String(re+ye+1).padStart(2,"0")}. ${pe}`,U=i.splitTextToSize(F.toUpperCase(),k);i.text(U,_,K),K+=U.length*L})}else p.forEach((re,oe)=>{O>a-50&&(i.addPage(),r||(i.setFillColor(l),i.rect(0,0,s,a,"F")),O=m,i.setFont(h,"bold"),i.setFontSize(S),i.setTextColor(c));let R="";if(re.type==="song"){const ye=re;ye.song&&(R=ye.song.title)}else re.type==="medley"&&(R=re.name||"Medley");const K=`${String(oe+1).padStart(2,"0")}. ${R}`,J=i.splitTextToSize(K.toUpperCase(),k);i.text(J,C,O),O+=J.length*L});const Y=i.getNumberOfPages();for(let re=1;re<=Y;re++){i.setPage(re),i.setFont(h,"bold"),i.setFontSize(48),i.setTextColor(c);const oe=(n||"YOUR BAND").toUpperCase();i.text(oe,s-20,m,{angle:-90,align:"left"})}const se=re=>new Date(re).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});if(t){i.setFont(h,"normal"),i.setFontSize(10),i.setTextColor(c);const re=[t.name||"The Arena",t.location||"Town, Country",se(t.date)];i.text(re,s-20,a-30,{align:"right"})}return i},HB=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:s})=>{const[a,l]=j.useState(!0),c=(h=!1)=>{if(!n)return;const m=WB(n,r&&i?{name:r,date:i}:void 0,s,h),g=`${s||"Setlist"} - ${r||"Event"}${h?" (Print)":" (Digital)"}.pdf`;if(h){const N=m.output("blob"),k=URL.createObjectURL(N);window.open(k,"_blank")}else m.save(g)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:d.jsx("div",{className:`bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:h=>h.stopPropagation(),children:n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 border-b border-gray-200 gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg flex-shrink-0",children:d.jsx(ei,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),d.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:n.name})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 print:hidden flex-wrap",children:[d.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-2 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-xs",title:"Descargar PDF Digital",children:[d.jsx(H0,{className:"w-3 h-3"}),"Digital"]}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-2 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs",title:"Descargar PDF para Imprimir",children:[d.jsx(H0,{className:"w-3 h-3"}),"Impresión"]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),d.jsx("button",{onClick:()=>l(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-indigo-600":"bg-gray-200"}`,children:d.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(Ia,{className:"w-6 h-6"})})]})]}),d.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&d.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const h=j.useMemo(()=>n!=null&&n.songs?n.songs.map(g=>{var N;return{...g,type:((N=g.song)==null?void 0:N.type)==="medley"?"medley":"song"}}).sort((g,N)=>g.position-N.position):[],[n==null?void 0:n.songs]),p=h.length,m=p>10,w=m?Math.ceil(p/2):p;return p===0?d.jsx("div",{className:"text-center py-10",children:d.jsx("p",{className:"text-gray-500",children:"Este setlist está vacío."})}):d.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${w}, auto)`,gridAutoFlow:"column",gridTemplateColumns:m?"1fr 1fr":"1fr"},children:h.map((g,N)=>{var k,C,_,S,L,O,Y;return g.type==="medley"?d.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:d.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[N+1,"."]}),d.jsxs("div",{className:"flex-grow",children:[d.jsx("p",{className:"text-indigo-600 font-bold",children:(k=g.song)==null?void 0:k.title}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((_=(C=g.song)==null?void 0:C.medley_song_ids)==null?void 0:_.length)||0," canciones)"]})]})]})},`medley-${g.id}`):d.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[N+1,"."]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((S=g.song)==null?void 0:S.title)||"N/A"}),d.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${a&&((L=g.song)!=null&&L.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(O=g.song)==null?void 0:O.artist})]})]},`song-${((Y=g.song)==null?void 0:Y.id)||N}`)})})})()]})]})})})})};function hp({table:e,filter:t,event:n="*",onInsert:r,onUpdate:i,onDelete:s,onChange:a,enabled:l=!0}){const c=j.useRef(null);return j.useEffect(()=>{if(!l)return;const h=`realtime-${e}-${t||"all"}`;return c.current=et.channel(h).on("postgres_changes",{event:n,schema:"public",table:e,...t&&{filter:t}},p=>{p.eventType==="INSERT"&&r?r(p):p.eventType==="UPDATE"&&i?i(p):p.eventType==="DELETE"&&s&&s(p),a&&a(p)}).subscribe(),()=>{c.current&&(c.current.unsubscribe(),c.current=null)}},[e,t,n,r,i,s,a,l]),{unsubscribe:()=>{c.current&&(c.current.unsubscribe(),c.current=null)}}}function VB({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,s]=j.useState([]),[a,l]=j.useState(!0),[c,h]=j.useState(null),[p,m]=j.useState(!1),[w,g]=j.useState(!1),[N,k]=j.useState("upcoming"),[C,_]=j.useState(null),[S,L]=j.useState(null),[O,Y]=j.useState("");j.useEffect(()=>{se()},[e]),hp({table:"events",filter:`group_id=eq.${e}`,onInsert:()=>{se(),Te.success("Nuevo evento añadido en tiempo real")},onUpdate:()=>{se()},onDelete:X=>{s(F=>F.filter(U=>U.id!==X.old.id)),Te.success("Evento eliminado en tiempo real")},enabled:!!e});const se=async()=>{try{l(!0);const{data:X,error:F}=await et.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if(F)throw F;if(X){const U=await Promise.all(X.map(async ae=>{const{data:Le,error:P}=await et.from("event_members").select("group_member_id, user_id").eq("event_id",ae.id);if(P)return console.error("Error loading event members:",P),{...ae,members:[]};const V=(Le==null?void 0:Le.map(ne=>{const le=r.find(de=>de.id===ne.group_member_id);return{group_member_id:ne.group_member_id,user_id:ne.user_id,member_name:(le==null?void 0:le.name)||"Unknown Member",role_in_group:(le==null?void 0:le.role_in_group)||"principal"}}))||[];return{...ae,members:V}}));s(U)}}catch(X){console.error("Error fetching events:",X),Te.error("Error loading events")}finally{l(!1)}},W=async X=>{if(window.confirm("¿Estás seguro de que quieres eliminar este evento?"))try{const{data:F,error:U}=await et.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",X);if(U)throw U;const{error:ae}=await et.from("events").delete().eq("id",X);if(ae)throw ae;F&&F.length>0&&await Promise.all(F.filter(Le=>Le.group_members.sync_calendar).map(async Le=>{try{await I6(e,Le.group_member_id)}catch{}})),Te.success("Evento eliminado correctamente"),se()}catch(F){console.error("Error deleting event:",F),Te.error("Error al eliminar el evento")}},I=X=>{h(X),g(!0)},re=async X=>{try{const{data:U,error:ae}=await et.from("groups").select("name").eq("id",X.group_id).single();if(ae)throw ae;Y((U==null?void 0:U.name)||"")}catch{Y("")}const F=X.setlist;if(F&&(L({name:X.name,date:X.date}),!!F))try{const{data:U,error:ae}=await et.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",F.id).single();if(ae)throw ae;U&&_(U)}catch(U){console.error("Error al cargar el setlist completo:",U),Te.error("Error al cargar el setlist")}};if(a)return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-8 w-32 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-36 bg-gray-200 animate-pulse rounded"})]}),d.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[d.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"})]}),d.jsx(KO,{count:4})]});const oe=X=>{const F=X.reduce((U,ae)=>{const Le=Jt(gu(ae.date),"MMMM yyyy");return U[Le]||(U[Le]=[]),U[Le].push(ae),U},{});return Object.entries(F)},R=X=>{if(!X)return"";if(typeof X=="object"&&X!==null)return X.name||String(X);if(typeof X!="string")return String(X);if(X.startsWith("{")||X.startsWith("["))try{const F=JSON.parse(X);return F.name||F.formatted_address||F.description||String(F)}catch{return X}return X},z=X=>{if(!X)return;const F=R(X);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F)}`,"_blank")},K=X=>{const F=X.members.filter(ae=>ae.role_in_group==="principal"),U=X.members.filter(ae=>ae.role_in_group==="sustituto");return d.jsxs("div",{className:"mt-1.5 space-y-1",children:[d.jsx("div",{className:"flex flex-wrap gap-1",children:F.map(ae=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:ae.member_name},ae.group_member_id))}),U.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),U.map(ae=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:ae.member_name},ae.group_member_id))]}),X.location&&d.jsx("div",{className:"flex items-center gap-1 mt-1",children:d.jsxs("button",{onClick:()=>z(X.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[d.jsx(o0,{className:"w-3 h-3 mr-1"}),d.jsx("span",{className:"underline",children:J(R(X.location))})]})})]})},J=(X,F=40)=>{if(!X)return"";if(X.includes(",")){const U=X.split(",")[0];return U.length<=F?U:`${U.slice(0,F)}...`}return X.length>F?`${X.slice(0,F)}...`:X},ye=i.filter(X=>{const F=gu(X.date);return _3(Tc(F))||S3(F)}),pe=i.filter(X=>{const F=gu(X.date);return!_3(Tc(F))&&!S3(F)});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:d.jsxs("div",{className:"p-3 sm:p-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Eventos"}),t&&d.jsx(_t,{onClick:()=>m(!0),size:"sm",className:"w-full sm:w-auto",children:"Añadir Evento"})]}),i.length===0?d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(q0,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay eventos programados"})]}):d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:d.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[d.jsxs("button",{onClick:()=>k("upcoming"),className:`${N==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{className:"hidden sm:inline",children:"Próximos eventos"}),d.jsx("span",{className:"sm:hidden",children:"Próximos"}),ye.length>0&&d.jsx("span",{className:`${N==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:ye.length})]}),d.jsxs("button",{onClick:()=>k("past"),className:`${N==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{className:"hidden sm:inline",children:"Eventos pasados"}),d.jsx("span",{className:"sm:hidden",children:"Pasados"}),pe.length>0&&d.jsx("span",{className:`${N==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:pe.length})]})]})}),d.jsx("div",{className:"mt-4 space-y-6",children:oe(N==="upcoming"?ye:pe).map(([X,F])=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:X}),d.jsx("div",{className:"space-y-1",children:F.map(U=>d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:d.jsx("div",{className:"p-3",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[d.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[d.jsx("div",{className:"text-lg font-bold text-gray-900",children:Jt(gu(U.date),"d")}),d.jsx("div",{className:"text-xs text-gray-500 uppercase",children:Jt(gu(U.date),"EEE")})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:U.name}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs text-gray-500 mt-0.5",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(W0,{className:"w-3 h-3 mr-1"}),Jt(gu(`2000-01-01T${U.time}`),"h:mm a")]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(V0,{className:"w-3 h-3 mr-1"}),U.members.length]}),U.setlist?d.jsxs("div",{className:"flex items-center",children:[d.jsx(ei,{className:"w-3 h-3 mr-1 text-blue-500"}),d.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>U.setlist&&re(U),children:U.setlist.name}),d.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var P,V;const ae=((P=U.setlist.songs)==null?void 0:P.filter(ne=>{var le,de;return((le=ne.song)==null?void 0:le.type)==="song"||!((de=ne.song)!=null&&de.type)}))||[],Le=((V=U.setlist.songs)==null?void 0:V.filter(ne=>{var le;return((le=ne.song)==null?void 0:le.type)==="medley"}))||[];return`(${ae.length} canciones${Le.length>0?`, ${Le.length} medleys`:""})`})()})]}):d.jsxs("div",{className:"flex items-center",children:[d.jsx(ei,{className:"w-3 h-3 mr-1 text-gray-300"}),d.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),K(U),U.notes&&d.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:U.notes})]}),t&&d.jsxs("div",{className:"flex items-center gap-1 mt-2 sm:mt-0",children:[d.jsx("button",{onClick:()=>I(U),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:d.jsx(wN,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),d.jsx("button",{onClick:()=>W(U.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:d.jsx(P5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})})},U.id))})]},X))})]})]})}),d.jsx(Q3,{isOpen:p,onClose:()=>m(!1),groupId:e,onEventSaved:()=>{se(),m(!1)},availableDates:n,members:r}),c&&d.jsx(Q3,{isOpen:w,onClose:()=>{g(!1),h(null)},groupId:e,event:c,onEventSaved:()=>{se(),g(!1),h(null)},availableDates:[...n,gu(c.date)],members:r}),C&&d.jsx(HB,{isOpen:!!C,onClose:()=>{_(null),L(null),Y("")},setlist:C,eventName:S==null?void 0:S.name,eventDate:S==null?void 0:S.date,bandName:O})]})}function GB({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-700 mb-6",children:i}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(_t,{variant:"secondary",onClick:t,children:"Cancelar"}),d.jsx(_t,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function YB({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),Te.success("URL copiada al portapapeles")};return d.jsxs(Iu,{open:e,onClose:t,className:"relative z-50",children:[d.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:d.jsxs(Iu.Panel,{className:"mx-auto max-w-md w-full sm:max-w-lg rounded-lg bg-white p-4 sm:p-6 max-h-[90vh] overflow-y-auto",children:[d.jsxs(Iu.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[d.jsx(q0,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Google Calendar"}),d.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),d.jsx("li",{children:'Selecciona "Desde URL"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Añadir calendario"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre la aplicación Calendario"}),d.jsx("li",{children:"Ve a Archivo → Nueva suscripción a calendario"}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Outlook Calendar"}),d.jsx("li",{children:'Ve a "Añadir calendario" → "Desde Internet"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),d.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[d.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2 min-w-0"}),d.jsxs(_t,{onClick:r,variant:"secondary",size:"sm",className:"flex items-center justify-center gap-1 w-full sm:w-auto",children:[d.jsx(YD,{className:"w-4 h-4"}),d.jsx("span",{className:"sm:hidden",children:"Copiar URL"}),d.jsx("span",{className:"hidden sm:inline",children:"Copiar"})]})]})]})]}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx(_t,{onClick:t,children:"Cerrar"})})]})})]})}class KB{constructor(){this.clientId="2f84f95d5e0943afb6e72b6758adedd3",this.redirectUri="http://127.0.0.1:5173/spotify/callback",this.scopes=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-modify-playback-state","user-read-playback-state","streaming"].join(" "),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.loadTokensFromStorage(),this.subscribeToAuthChanges()}async getAuthUrl(){this.isProcessingAuth||(localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"));const t=this.generateRandomString(16),n=this.generateRandomString(128);localStorage.setItem("spotify_return_url",window.location.href),localStorage.setItem("spotify_auth_state",t),localStorage.setItem("spotify_code_verifier",n);const r=await this.generateCodeChallenge(n);return`https://accounts.spotify.com/authorize?${new URLSearchParams({response_type:"code",client_id:this.clientId,scope:this.scopes,redirect_uri:this.redirectUri,state:t,code_challenge_method:"S256",code_challenge:r}).toString()}`}async handleAuthCallback(t,n){if(this.isProcessingAuth)return console.log("🎵 Already processing auth, skipping..."),!1;console.log("🎵 SpotifyService: Starting handleAuthCallback..."),this.isProcessingAuth=!0;try{const r=localStorage.getItem("spotify_auth_state"),i=localStorage.getItem("spotify_code_verifier");if(console.log("🎵 SpotifyService: Auth callback data:",{receivedState:n?n.substring(0,10)+"...":"NULL",storedState:r?r.substring(0,10)+"...":"NULL",hasCodeVerifier:!!i,codeLength:t==null?void 0:t.length,receivedStateLength:n==null?void 0:n.length,storedStateLength:r==null?void 0:r.length,statesMatch:n===r}),!r)throw console.error("❌ No stored state found"),new Error("No stored state found");if(n!==r)throw console.error("❌ State mismatch:",{received:n,stored:r,receivedLength:n==null?void 0:n.length,storedLength:r==null?void 0:r.length,match:n===r}),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),new Error("State mismatch - auth state was corrupted. Please try connecting to Spotify again.");if(!i)throw console.error("❌ Code verifier not found"),new Error("Code verifier not found");console.log("🎵 SpotifyService: All validations passed, making token request...");const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:this.redirectUri,client_id:this.clientId,code_verifier:i})});if(console.log("🎵 SpotifyService: Token request response status:",s.status),!s.ok){const l=await s.text();throw console.error("❌ SpotifyService: Token request failed:",s.status,l),new Error(`Failed to exchange code for tokens: ${s.status} ${l}`)}console.log("🎵 SpotifyService: Token request successful, parsing response...");const a=await s.json();return console.log("🎵 SpotifyService: Token data received:",{hasAccessToken:!!a.access_token,hasRefreshToken:!!a.refresh_token,expiresIn:a.expires_in}),this.accessToken=a.access_token,this.refreshToken=a.refresh_token,this.tokenExpiry=Date.now()+a.expires_in*1e3,console.log("🎵 SpotifyService: Tokens stored in memory, saving to localStorage..."),this.saveTokensToStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log("🎵 SpotifyService: Auth callback completed successfully!"),!0}catch(r){return console.error("Error in Spotify auth callback:",r),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),!1}finally{this.isProcessingAuth=!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken,client_id:this.clientId})});if(!t.ok)throw new Error("Failed to refresh access token");const n=await t.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,n.refresh_token&&(this.refreshToken=n.refresh_token),this.saveTokensToStorage(),!0}catch(t){return console.error("Error refreshing access token:",t),this.logout(),!1}}async ensureValidToken(){return this.accessToken?this.tokenExpiry&&Date.now()>=this.tokenExpiry-6e4?await this.refreshAccessToken():!0:!1}async apiRequest(t,n={}){if(!await this.ensureValidToken())throw new Error("No valid Spotify token available");const r=await fetch(`https://api.spotify.com/v1${t}`,{...n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",...n.headers}});if(!r.ok){if(r.status===401&&await this.refreshAccessToken())return this.apiRequest(t,n);throw new Error(`Spotify API error: ${r.status} ${r.statusText}`)}return r.headers.get("content-length")==="0"||r.status===204?null:r.json()}async getCurrentUser(){return this.apiRequest("/me")}async searchTracks(t,n=20){const r=new URLSearchParams({q:t,type:"track",limit:n.toString()});return(await this.apiRequest(`/search?${r}`)).tracks.items}async getTrack(t){return this.apiRequest(`/tracks/${t}`)}async getAudioFeatures(t){return this.apiRequest(`/audio-features/${t}`)}async createPlaylist(t,n,r=!1){const i=await this.getCurrentUser();return this.apiRequest(`/users/${i.id}/playlists`,{method:"POST",body:JSON.stringify({name:t,description:n,public:r})})}async addTracksToPlaylist(t,n){await this.apiRequest(`/playlists/${t}/tracks`,{method:"POST",body:JSON.stringify({uris:n})})}async playTrack(t,n){const r={uris:[t]};n&&(r.device_id=n),await this.apiRequest("/me/player/play",{method:"PUT",body:JSON.stringify(r)})}async pausePlayback(){await this.apiRequest("/me/player/pause",{method:"PUT"})}async resumePlayback(){await this.apiRequest("/me/player/play",{method:"PUT"})}async getPlaybackState(){try{return await this.apiRequest("/me/player")}catch{return null}}async getUserPlaylists(t=50){return(await this.apiRequest(`/me/playlists?limit=${t}`)).items}async getPlaylistTracks(t,n=100){return(await this.apiRequest(`/playlists/${t}/tracks?limit=${n}`)).items.map(i=>i.track)}isAuthenticated(){return!!(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}async logout(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,await this.clearTokensFromStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),console.log("✅ Spotify logout completed - tokens cleared from all sources")}clearAuthState(){console.log("🎵 Clearing Spotify auth state manually"),this.isProcessingAuth=!1,localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}async generateCodeChallenge(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(r)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}generateRandomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((i,s)=>i+n[s%n.length],"")}async saveTokensToStorage(){const{user:t}=Zr.getState();if(!t){this.saveTokensToLocalStorage();return}try{const{error:n}=await et.from("spotify_tokens").upsert({user_id:t.id,access_token:this.accessToken,refresh_token:this.refreshToken,expires_at:new Date(this.tokenExpiry).toISOString()});if(n)throw n;console.log("✅ Spotify tokens saved to database")}catch(n){console.error("Error saving tokens to database:",n),this.saveTokensToLocalStorage()}}async loadTokensFromStorage(){const{user:t}=Zr.getState();if(!t){this.loadTokensFromLocalStorage();return}try{const{data:n,error:r}=await et.from("spotify_tokens").select("*").eq("user_id",t.id).single();if(r||!n){this.loadTokensFromLocalStorage();return}this.accessToken=n.access_token,this.refreshToken=n.refresh_token,this.tokenExpiry=new Date(n.expires_at).getTime(),this.saveTokensToLocalStorage(),console.log("✅ Spotify tokens loaded from database")}catch(n){console.error("Error loading tokens from database:",n),this.loadTokensFromLocalStorage()}}saveTokensToLocalStorage(){var i;console.log("🎵 SpotifyService: Saving tokens to storage...",{hasAccessToken:!!this.accessToken,hasRefreshToken:!!this.refreshToken,hasTokenExpiry:!!this.tokenExpiry,accessTokenLength:(i=this.accessToken)==null?void 0:i.length,tokenExpiry:this.tokenExpiry}),this.accessToken&&(localStorage.setItem("spotify_access_token",this.accessToken),console.log("✅ Access token saved to localStorage")),this.refreshToken&&(localStorage.setItem("spotify_refresh_token",this.refreshToken),console.log("✅ Refresh token saved to localStorage")),this.tokenExpiry&&(localStorage.setItem("spotify_token_expiry",this.tokenExpiry.toString()),console.log("✅ Token expiry saved to localStorage"));const t=localStorage.getItem("spotify_access_token"),n=localStorage.getItem("spotify_refresh_token"),r=localStorage.getItem("spotify_token_expiry");console.log("🎵 Verification - tokens in localStorage:",{hasAccessToken:!!t,hasRefreshToken:!!n,hasTokenExpiry:!!r,accessTokenMatches:t===this.accessToken,refreshTokenMatches:n===this.refreshToken})}loadTokensFromLocalStorage(){this.accessToken=localStorage.getItem("spotify_access_token"),this.refreshToken=localStorage.getItem("spotify_refresh_token");const t=localStorage.getItem("spotify_token_expiry");this.tokenExpiry=t?parseInt(t):null}async clearTokensFromStorage(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry");const{user:t}=Zr.getState();if(t)try{const{error:n}=await et.from("spotify_tokens").delete().eq("user_id",t.id);n?console.error("Error deleting Spotify tokens from database:",n):console.log("✅ Spotify tokens deleted from database")}catch(n){console.error("Error clearing Spotify tokens from database:",n)}}subscribeToAuthChanges(){Zr.subscribe(t=>{t.user&&!this.accessToken?this.loadTokensFromStorage():!t.user&&this.accessToken&&this.logout()})}async refreshTokensFromDatabase(){const{user:t}=Zr.getState();if(!t)return!1;if(!this.accessToken&&!localStorage.getItem("spotify_access_token"))return console.log("🎵 User appears to have logged out, skipping database refresh"),!1;try{const{data:n,error:r}=await et.from("spotify_tokens").select("*").eq("user_id",t.id).single();if(r||!n)return!1;const i=new Date(n.expires_at).getTime();if(!this.accessToken||n.access_token!==this.accessToken||i!==this.tokenExpiry){const s=this.isAuthenticated();return this.accessToken=n.access_token,this.refreshToken=n.refresh_token,this.tokenExpiry=i,this.saveTokensToLocalStorage(),console.log("✅ Spotify tokens refreshed from database"),!s&&this.isAuthenticated()?(console.log("🎵 Authentication state changed, dispatching event"),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"))):console.log("🎵 Tokens updated but auth state unchanged, no event dispatched"),!0}return!1}catch(n){return console.error("Error refreshing tokens from database:",n),!1}}}const zn=new KB,Pp=()=>{const[e,t]=j.useState(!1),[n,r]=j.useState(null),[i,s]=j.useState(!0),[a,l]=j.useState(!1),[c,h]=j.useState(!1);j.useEffect(()=>{if(a)return;(async()=>{if(c){console.log("🎵 Already checking auth, skipping...");return}h(!0);try{if(console.log("🎵 Checking Spotify auth status..."),await zn.refreshTokensFromDatabase(),console.log("🎵 Is authenticated:",zn.isAuthenticated()),zn.isAuthenticated()){console.log("🎵 Getting user data...");const L=await zn.getCurrentUser();console.log("🎵 User data:",L),r(L),t(!0)}else r(null),t(!1)}catch(L){console.error("❌ Error checking Spotify auth status:",L),await zn.logout(),t(!1),r(null)}finally{s(!1),l(!0),h(!1)}})()},[a]),j.useEffect(()=>{const S=async()=>{if(c){console.log("🎵 Already checking auth, ignoring event...");return}console.log("🎵 useSpotify: Received Spotify auth event, refreshing status..."),h(!0);try{if(console.log("🎵 useSpotify: Checking if authenticated:",zn.isAuthenticated()),zn.isAuthenticated())if(!n||!e){console.log("🎵 useSpotify: Getting current user...");const L=await zn.getCurrentUser();console.log("🎵 useSpotify: User data received:",L==null?void 0:L.display_name),r(L),t(!0)}else console.log("🎵 useSpotify: User already set, skipping fetch");else console.log("🎵 useSpotify: Not authenticated, clearing state"),t(!1),r(null)}catch(L){console.error("❌ useSpotify: Error refreshing Spotify auth status:",L),await zn.logout(),t(!1),r(null)}finally{h(!1)}};return console.log("🎵 useSpotify: Adding event listener for spotifyAuthCompleted"),window.addEventListener("spotifyAuthCompleted",S),()=>{console.log("🎵 useSpotify: Removing event listener for spotifyAuthCompleted"),window.removeEventListener("spotifyAuthCompleted",S)}},[]);const p=j.useCallback(async()=>{try{console.log("🎵 Starting Spotify login...");const S=await zn.getAuthUrl();console.log("🎵 Got auth URL, redirecting..."),window.location.href=S}catch(S){console.error("❌ Error getting Spotify auth URL:",S),Te.error(`Error al conectar con Spotify: ${S.message}`)}},[]),m=j.useCallback(async()=>{await zn.logout(),t(!1),r(null),Te.success("Desconectado de Spotify")},[]),w=j.useCallback(async S=>{if(!e)throw new Error("No authenticated with Spotify");try{return await zn.searchTracks(S)}catch(L){throw console.error("Error searching tracks:",L),Te.error("Error al buscar canciones en Spotify"),L}},[e]),g=j.useCallback(async(S,L)=>{if(!e)return Te.error("Debes conectar con Spotify primero"),null;try{const O=await zn.createPlaylist(`Band Plan - ${S}`,"Setlist generado automáticamente desde Band Plan",!1),Y=L.filter(se=>se.id).map(se=>`spotify:track:${se.id}`);return Y.length>0&&await zn.addTracksToPlaylist(O.id,Y),Te.success(`Playlist "${O.name}" creada en Spotify`),O.external_urls.spotify}catch(O){return console.error("Error creating playlist:",O),Te.error("Error al crear playlist en Spotify"),null}},[e]),N=j.useCallback(async S=>{if(!e){Te.error("Debes conectar con Spotify primero");return}try{await zn.playTrack(S)}catch(L){console.error("Error playing track:",L),Te.error("Error al reproducir canción. Asegúrate de tener Spotify abierto.")}},[e]),k=j.useCallback(async()=>{if(e)try{await zn.pausePlayback()}catch(S){console.error("Error pausing playback:",S),Te.error("Error al pausar reproducción")}},[e]),C=j.useCallback(async()=>{if(e)try{await zn.resumePlayback()}catch(S){console.error("Error resuming playback:",S),Te.error("Error al reanudar reproducción")}},[e]),_=j.useCallback(async()=>{try{if(zn.isAuthenticated()){const S=await zn.getCurrentUser();r(S),t(!0)}else t(!1),r(null)}catch(S){console.error("❌ Error refreshing Spotify auth status:",S),zn.logout(),t(!1),r(null)}},[]);return{isAuthenticated:e,user:n,loading:i,login:p,logout:m,searchTracks:w,createPlaylistFromSetlist:g,playTrack:N,pausePlayback:k,resumePlayback:C,refreshAuthStatus:_}},JB=({className:e="",compact:t=!1})=>{var p,m;const{isAuthenticated:n,user:r,loading:i,login:s,logout:a,refreshAuthStatus:l}=Pp(),c=()=>{console.log("🎵 Resetting Spotify authentication state..."),zn.clearAuthState(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const w=new URL(window.location.href);(w.searchParams.has("code")||w.searchParams.has("state"))&&(w.searchParams.delete("code"),w.searchParams.delete("state"),w.searchParams.delete("error"),window.history.replaceState({},document.title,w.toString())),Te.success("Estado de Spotify limpiado. Puedes intentar conectar de nuevo.")},h=()=>{console.log("🎵 Manual refresh requested"),l()};return i?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[d.jsx(ol,{className:"w-4 h-4 animate-spin text-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Conectando con Spotify..."})]}):n?t?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[((p=r==null?void 0:r.images)==null?void 0:p[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),d.jsx("span",{className:"text-sm text-gray-700",children:r==null?void 0:r.display_name}),d.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Desconectar Spotify",children:d.jsx(ey,{className:"w-4 h-4"})})]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-3 sm:p-4 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-green-500 p-2 rounded-full flex-shrink-0",children:d.jsx(ei,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[((m=r==null?void 0:r.images)==null?void 0:m[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full flex-shrink-0"}),d.jsxs("span",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:["Conectado como ",r==null?void 0:r.display_name]})]}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Spotify conectado correctamente"})]})]}),d.jsxs(_t,{onClick:a,variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:[d.jsx(ey,{className:"w-4 h-4 mr-2"}),"Desconectar"]})]})}):t?d.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm ${e}`,children:[d.jsx(ei,{className:"w-4 h-4"}),"Conectar Spotify"]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[d.jsx("div",{className:"bg-green-500 p-2 sm:p-3 rounded-full flex-shrink-0",children:d.jsx(ei,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"Conecta con Spotify"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Conecta tu cuenta de Spotify para acceder a funciones avanzadas como búsqueda de canciones, creación automática de playlists, y reproducción de previews."}),d.jsxs("ul",{className:"text-xs sm:text-sm text-gray-600 mb-4 space-y-1",children:[d.jsx("li",{children:"• Búsqueda automática de canciones con datos completos"}),d.jsx("li",{children:"• Crear playlists automáticamente desde tus setlists"}),d.jsx("li",{children:"• Reproducir previews de canciones"}),d.jsx("li",{children:"• Control de reproducción desde la app"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[d.jsxs(_t,{onClick:s,variant:"primary",className:"bg-green-500 hover:bg-green-600 text-white w-full sm:w-auto",size:"sm",children:[d.jsx(ei,{className:"w-4 h-4 mr-2"}),"Conectar con Spotify"]}),d.jsxs(_t,{onClick:h,variant:"secondary",className:"text-blue-600 hover:text-blue-800 w-full sm:w-auto",title:"Actualizar estado de autenticación",size:"sm",children:[d.jsx(o3,{className:"w-4 h-4 mr-2"}),"Refrescar"]}),d.jsxs(_t,{onClick:c,variant:"secondary",className:"text-gray-600 hover:text-gray-800 w-full sm:w-auto",title:"Limpiar estado de Spotify si hay problemas",size:"sm",children:[d.jsx(o3,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})})},XB=({onSpotifyTrackSelect:e,onDeezerTrackSelect:t,onManualAdd:n,placeholder:r="Buscar canciones o añadir manualmente...",className:i=""})=>{const{isAuthenticated:s,searchTracks:a,loading:l}=Pp(),[c,h]=j.useState(""),[p,m]=j.useState([]),[w,g]=j.useState([]),[N,k]=j.useState(!1),[C,_]=j.useState(!1),[S,L]=j.useState(null),O=j.useRef(null),Y=j.useRef(null),se=j.useRef(),W=c||"";j.useEffect(()=>{const U=ae=>{O.current&&!O.current.contains(ae.target)&&_(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),j.useEffect(()=>{if(W.length<2){m([]),g([]);return}return se.current&&clearTimeout(se.current),se.current=setTimeout(()=>{I(W)},300),()=>{se.current&&clearTimeout(se.current)}},[W,s]);const I=async U=>{if(k(!0),s)try{const ae=await a(U);m(ae),_(!0)}catch(ae){console.error("Error searching tracks:",ae),m([]),_(!0)}else try{const Le=await(await fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(U)}`)).json();g(Le.data||[]),_(!0)}catch(ae){console.error("Error searching Deezer:",ae),g([]),_(!0)}k(!1)},re=U=>{e(U),h(""),m([]),g([]),_(!1),K()},oe=U=>{t&&t(U),h(""),m([]),g([]),_(!1),K()},R=()=>{n(W),h(""),m([]),g([]),_(!1),K()},z=U=>{if(S===U.id){K();return}if(!U.preview_url){Te.error("Preview no disponible para esta canción");return}K(),Y.current&&(Y.current.src=U.preview_url,Y.current.play(),L(U.id),Y.current.onended=()=>{L(null)})},K=()=>{Y.current&&(Y.current.pause(),Y.current.currentTime=0),L(null)},J=U=>{window.open(U.external_urls.spotify,"_blank"),Te.success("Abriendo en Spotify")},ye=U=>{const ae=Math.floor(U/6e4),Le=Math.floor(U%6e4/1e3);return`${ae}:${Le.toString().padStart(2,"0")}`},pe=U=>{const ae=Math.floor(U/60),Le=U%60;return`${ae}:${Le.toString().padStart(2,"0")}`},X=U=>{if(S===U.id.toString()){K();return}if(!U.preview){Te.error("Preview no disponible para esta canción");return}K(),Y.current&&(Y.current.src=U.preview,Y.current.play(),L(U.id.toString()),Y.current.onended=()=>{L(null)})},F=U=>{window.open(U.link,"_blank"),Te.success("Abriendo en Deezer")};return l?d.jsx("div",{className:`relative ${i}`,children:d.jsxs("div",{className:"relative",children:[d.jsx(ty,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Cargando...",disabled:!0,value:"",readOnly:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-lg"})]})}):d.jsxs("div",{ref:O,className:`relative ${i}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx(ty,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",value:W,onChange:U=>h(U.target.value||""),placeholder:r,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg shadow-sm",onFocus:()=>_(!0)}),N&&d.jsx(ol,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),C&&d.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[d.jsxs("div",{onClick:R,className:"p-4 hover:bg-blue-50 cursor-pointer border-b border-gray-100 flex items-center gap-3 bg-blue-25",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:d.jsx(Ig,{className:"w-6 h-6 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-blue-900",children:"Añadir manualmente"}),d.jsx("p",{className:"text-sm text-blue-600",children:W?`Crear "${W}" con formulario`:"Usar formulario manual"})]})]}),s&&p.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100",children:d.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-2",children:[d.jsx(ei,{className:"w-4 h-4"}),"Resultados de Spotify"]})}),p.map(U=>{var ae,Le;return d.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:((ae=U.album.images[2])==null?void 0:ae.url)||((Le=U.album.images[0])==null?void 0:Le.url),alt:U.album.name,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>re(U),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:U.name}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:U.artists.map(P=>P.name).join(", ")}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:U.album.name})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(W0,{className:"w-3 h-3"}),ye(U.duration_ms)]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(QD,{className:"w-3 h-3"}),U.popularity,"%"]})]})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[U.preview_url&&d.jsx("button",{onClick:P=>{P.stopPropagation(),z(U)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Preview (30s)",children:S===U.id?d.jsx(s3,{className:"w-4 h-4"}):d.jsx(a3,{className:"w-4 h-4"})}),d.jsx("button",{onClick:P=>{P.stopPropagation(),J(U)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Abrir en Spotify",children:d.jsx(Z2,{className:"w-4 h-4"})})]})]})},U.id)})]}),!s&&w.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-orange-50 border-b border-orange-100",children:d.jsxs("p",{className:"text-sm text-orange-700 font-medium flex items-center gap-2",children:[d.jsx(ei,{className:"w-4 h-4"}),"Resultados de Deezer"]})}),w.map(U=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:U.album.cover_small||U.album.cover,alt:U.album.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>oe(U),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:U.title}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:U.artist.name}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:U.album.title})]}),d.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(W0,{className:"w-3 h-3"}),pe(U.duration)]})})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[U.preview&&d.jsx("button",{onClick:ae=>{ae.stopPropagation(),X(U)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Preview (30s)",children:S===U.id.toString()?d.jsx(s3,{className:"w-4 h-4"}):d.jsx(a3,{className:"w-4 h-4"})}),d.jsx("button",{onClick:ae=>{ae.stopPropagation(),F(U)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Abrir en Deezer",children:d.jsx(Z2,{className:"w-4 h-4"})})]})]})},U.id))]}),s&&p.length===0&&!N&&W.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(ei,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Spotify para "',W,'"']})]}),!s&&w.length===0&&!N&&W.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(ei,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Deezer para "',W,'"']})]})]}),d.jsx("audio",{ref:Y})]})},Z3={title:"",artist:"",duration_minutes:"",key:"",notes:""},e_=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function QB({groupId:e,canManageSongs:t=!0}){const[n,r]=j.useState([]),[i,s]=j.useState(!0),[a,l]=j.useState(!1),[c,h]=j.useState(null),[p,m]=j.useState(Z3),[w,g]=j.useState(!1),[N,k]=j.useState(null),[C,_]=j.useState(null),[S,L]=j.useState(""),[O,Y]=j.useState(!1),[se,W]=j.useState(null),[I,re]=j.useState(""),[oe,R]=j.useState(""),[z,K]=j.useState("");Pp();const J=n.filter(Z=>{var Be;const je=!I||Z.title.toLowerCase().includes(I.toLowerCase())||((Be=Z.artist)==null?void 0:Be.toLowerCase().includes(I.toLowerCase())),_e=!oe||Z.key===oe,Re=!z||Z.type===z;return je&&_e&&Re}),ye=[...new Set(n.map(Z=>Z.key).filter(Boolean))].sort();j.useEffect(()=>{pe()},[e]),hp({table:"songs",filter:`group_id=eq.${e}`,onInsert:Z=>{r(je=>[...je,Z.new]),Te.success("Nueva canción añadida en tiempo real")},onUpdate:Z=>{r(je=>je.map(_e=>_e.id===Z.new.id?Z.new:_e))},onDelete:Z=>{r(je=>je.filter(_e=>_e.id!==Z.old.id)),Te.success("Canción eliminada en tiempo real")},enabled:!!e});const pe=async()=>{s(!0);const Z=await tg(e);Z&&r(Z),s(!1)},X=async Z=>{const{data:{user:je}}=await et.auth.getUser();if(!je){Te.error("No se pudo obtener la información del usuario");return}const _e=Math.round(Z.duration_ms/6e4),Re=`Popularidad: ${Z.popularity}% | Álbum: ${Z.album.name} (${Z.album.release_date.split("-")[0]})`,Be={title:Z.name,artist:Z.artists.map(We=>We.name).join(", "),duration_minutes:_e.toString(),key:"",notes:Re,group_id:e,created_by:je.id};try{await h0(Be),await pe(),Te.success(`"${Z.name}" añadida desde Spotify`)}catch(We){console.error("Error creating song from Spotify:",We),Te.error("Error al añadir la canción")}},F=async Z=>{const{data:{user:je}}=await et.auth.getUser();if(!je){Te.error("No se pudo obtener la información del usuario");return}const _e=Math.round(Z.duration/60),Re=`Álbum: ${Z.album.title} | Fuente: Deezer`,Be={title:Z.title,artist:Z.artist.name,duration_minutes:_e.toString(),key:"",notes:Re,group_id:e,created_by:je.id};try{await h0(Be),await pe(),Te.success(`"${Z.title}" añadida desde Deezer`)}catch(We){console.error("Error creating song from Deezer:",We),Te.error("Error al añadir la canción")}},U=async Z=>{if(Z.preventDefault(),!p.title.trim()){Te.error("El título es obligatorio");return}const{data:{user:je}}=await et.auth.getUser();if(!je){Te.error("No se pudo obtener la información del usuario");return}const _e={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:je.id};if(c){const Re=await K3(c.id,_e);Re&&(Te.success("Canción actualizada correctamente"),r(Be=>Be.map(We=>We.id===c.id?Re:We)))}else{const Re=await h0(_e);Re&&(Te.success("Canción creada correctamente"),r(Be=>[...Be,Re]))}V()},ae=Z=>{var je;h(Z),m({title:Z.title,artist:Z.artist||"",duration_minutes:((je=Z.duration_minutes)==null?void 0:je.toString())||"",key:Z.key||"",notes:Z.notes||""}),l(!0)},Le=Z=>{k(Z),g(!0)},P=async()=>{if(!N)return;console.log("Eliminando canción:",N.id);const Z=await MB(N.id);console.log("Resultado de eliminación:",Z),Z?(Te.success("Canción eliminada correctamente"),r(je=>je.filter(_e=>_e.id!==N.id))):Te.error("No se pudo eliminar la canción"),g(!1),k(null)},V=()=>{m(Z3),h(null),l(!1)},ne=Z=>{if(!Z)return"-";const je=Math.floor(Z/60),_e=Z%60;return je>0?`${je}h ${_e}m`:`${_e}m`},le=Z=>{if(!Z)return"-";const je=Z.match(/Tempo:\s*(\d+)\s*BPM/i);return je?`${je[1]}`:"-"},de=(Z,je,_e)=>{_({songId:Z,field:je}),L(String(_e||"")),W(null)},Ae=async(Z,je)=>{if(S===(Z[je]||"")){_(null);return}Y(!0),W(null);const _e=await K3(Z.id,{[je]:je==="duration_minutes"?parseInt(S)||null:S||null});Y(!1),_e?(r(Re=>Re.map(Be=>Be.id===Z.id?{...Be,..._e}:Be)),_(null)):W("Error al guardar")},Ee=(Z,je,_e)=>{Z.key==="Enter"?(Z.preventDefault(),Ae(je,_e)):Z.key==="Escape"&&_(null)};return i?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:d.jsx(YO,{rows:8})})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),d.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:d.jsx(JB,{compact:!0})})]})}),t&&d.jsx("div",{className:"mb-6",children:d.jsx(XB,{onSpotifyTrackSelect:X,onDeezerTrackSelect:F,onManualAdd:Z=>{Z&&m(je=>({...je,title:Z})),l(!0)},className:"w-full"})}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),a&&t&&d.jsxs("form",{onSubmit:U,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Canción":"Nueva Canción"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Xn,{label:"Título *",value:p.title,onChange:Z=>m({...p,title:Z.target.value}),required:!0}),d.jsx(Xn,{label:"Artista",value:p.artist,onChange:Z=>m({...p,artist:Z.target.value})}),d.jsx(Xn,{label:"Duración (minutos)",type:"number",value:p.duration_minutes,onChange:Z=>m({...p,duration_minutes:Z.target.value}),min:"1"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),d.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:Z=>m({...p,key:Z.target.value}),children:e_.map(Z=>d.jsx("option",{value:Z,children:Z||"Sin especificar"},Z))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),d.jsx("textarea",{value:p.notes,onChange:Z=>m({...p,notes:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la canción..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_t,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),d.jsx(_t,{type:"button",variant:"secondary",onClick:V,children:"Cancelar"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Añade la primera canción para empezar."}):J.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No se encontraron canciones que coincidan con los filtros aplicados.",d.jsx("button",{onClick:()=>{re(""),R(""),K("")},className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar filtros"})]}):d.jsxs("div",{className:"overflow-x-auto",children:[d.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",J.length," de ",n.length," canciones"]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(ty,{className:"w-3 h-3 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Buscar...",value:I,onChange:Z=>re(Z.target.value),className:"w-20 sm:w-24 px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400 focus:w-28 sm:focus:w-32 transition-all"})]}),d.jsxs("select",{value:oe,onChange:Z=>R(Z.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Clave"}),ye.map(Z=>d.jsx("option",{value:Z,children:Z},Z))]}),d.jsxs("select",{value:z,onChange:Z=>K(Z.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Tipo"}),d.jsx("option",{value:"song",children:"Canciones"}),d.jsx("option",{value:"medley",children:"Medleys"})]})]})]})}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duración"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BPM"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(Z=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(C==null?void 0:C.songId)===Z.id&&C.field==="title"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:je=>L(je.target.value),onBlur:()=>Ae(Z,"title"),onKeyDown:je=>Ee(je,Z,"title"),disabled:O}):d.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&de(Z.id,"title",Z.title),title:"Haz clic para editar",children:Z.title}),(C==null?void 0:C.songId)===Z.id&&se&&d.jsx("div",{className:"text-xs text-red-500 mt-1",children:se})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(C==null?void 0:C.songId)===Z.id&&C.field==="artist"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:je=>L(je.target.value),onBlur:()=>Ae(Z,"artist"),onKeyDown:je=>Ee(je,Z,"artist"),disabled:O}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&de(Z.id,"artist",Z.artist||""),title:"Haz clic para editar",children:Z.artist||d.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(C==null?void 0:C.songId)===Z.id&&C.field==="duration_minutes"?d.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:S,autoFocus:!0,onChange:je=>L(je.target.value),onBlur:()=>Ae(Z,"duration_minutes"),onKeyDown:je=>Ee(je,Z,"duration_minutes"),disabled:O}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var je;return t&&de(Z.id,"duration_minutes",((je=Z.duration_minutes)==null?void 0:je.toString())||"")},title:"Haz clic para editar",children:ne(Z.duration_minutes)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(C==null?void 0:C.songId)===Z.id&&C.field==="key"?d.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:je=>L(je.target.value),onBlur:()=>Ae(Z,"key"),onKeyDown:je=>Ee(je,Z,"key"),disabled:O,children:e_.map(je=>d.jsx("option",{value:je,children:je||"Sin especificar"},je))}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&de(Z.id,"key",Z.key||""),title:"Haz clic para editar",children:Z.key||d.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:d.jsx("div",{className:"cursor-default",children:le(Z.notes)==="-"?d.jsx("span",{className:"text-gray-400",children:"-"}):d.jsx("span",{className:"font-medium",children:le(Z.notes)})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>ae(Z),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),d.jsx("button",{onClick:()=>Le(Z),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},Z.id))})]})]})}),w&&N&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar la canción "',N.title,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>{g(!1),k(null)},children:"Cancelar"}),d.jsx(_t,{variant:"danger",onClick:P,children:"Eliminar"})]})]})})]})}var O6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t_=vt.createContext&&vt.createContext(O6),ZB=["attr","size","title"];function eU(e,t){if(e==null)return{};var n=tU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rg.apply(this,arguments)}function n_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ig(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n_(Object(n),!0).forEach(function(r){nU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nU(e,t,n){return t=rU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rU(e){var t=iU(e,"string");return typeof t=="symbol"?t:t+""}function iU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R6(e){return e&&e.map((t,n)=>vt.createElement(t.tag,ig({key:n},t.attr),R6(t.child)))}function So(e){return t=>vt.createElement(sU,rg({attr:ig({},e.attr)},t),R6(e.child))}function sU(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=eU(e,ZB),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),vt.createElement("svg",rg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:ig(ig({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&vt.createElement("title",null,s),e.children)};return t_!==void 0?vt.createElement(t_.Consumer,null,n=>t(n)):t(O6)}function aU(e){return So({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function oU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function lU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function cU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function F6(e){return So({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function uU(e){return So({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function dU(e){return So({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function _y(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function r_(e){return So({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function fU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function hU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Kg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Z5(e){return"nodeType"in e}function gs(e){var t,n;return e?Tf(e)?e:Z5(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ew(e){const{Document:t}=gs(e);return e instanceof t}function Tp(e){return Tf(e)?!1:e instanceof gs(e).HTMLElement}function $6(e){return e instanceof gs(e).SVGElement}function Mf(e){return e?Tf(e)?e.document:Z5(e)?ew(e)?e:Tp(e)||$6(e)?e.ownerDocument:document:document:document}const xo=Kg?j.useLayoutEffect:j.useEffect;function tw(e){const t=j.useRef(e);return xo(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function pU(){const e=j.useRef(null),t=j.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=j.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function pp(e,t){t===void 0&&(t=[e]);const n=j.useRef(e);return xo(()=>{n.current!==e&&(n.current=e)},t),n}function Mp(e,t){const n=j.useRef();return j.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function sg(e){const t=tw(e),n=j.useRef(null),r=j.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Sy(e){const t=j.useRef();return j.useEffect(()=>{t.current=e},[e]),t.current}let Bv={};function Dp(e,t){return j.useMemo(()=>{if(t)return t;const n=Bv[e]==null?0:Bv[e]+1;return Bv[e]=n,e+"-"+n},[e,t])}function B6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[c,h]of l){const p=s[c];p!=null&&(s[c]=p+e*h)}return s},{...t})}}const pf=B6(1),ag=B6(-1);function mU(e){return"clientX"in e&&"clientY"in e}function nw(e){if(!e)return!1;const{KeyboardEvent:t}=gs(e.target);return t&&e instanceof t}function gU(e){if(!e)return!1;const{TouchEvent:t}=gs(e.target);return t&&e instanceof t}function Ny(e){if(gU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return mU(e)?{x:e.clientX,y:e.clientY}:null}const mp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[mp.Translate.toString(e),mp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),i_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function vU(e){return e.matches(i_)?e:e.querySelector(i_)}const yU={display:"none"};function wU(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:yU},n)}function xU(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function bU(){const[e,t]=j.useState("");return{announce:j.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const U6=j.createContext(null);function _U(e){const t=j.useContext(U6);j.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function SU(){const[e]=j.useState(()=>new Set),t=j.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[j.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const NU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},kU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function jU(e){let{announcements:t=kU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=NU}=e;const{announce:s,announcement:a}=bU(),l=Dp("DndLiveRegion"),[c,h]=j.useState(!1);if(j.useEffect(()=>{h(!0)},[]),_U(j.useMemo(()=>({onDragStart(m){let{active:w}=m;s(t.onDragStart({active:w}))},onDragMove(m){let{active:w,over:g}=m;t.onDragMove&&s(t.onDragMove({active:w,over:g}))},onDragOver(m){let{active:w,over:g}=m;s(t.onDragOver({active:w,over:g}))},onDragEnd(m){let{active:w,over:g}=m;s(t.onDragEnd({active:w,over:g}))},onDragCancel(m){let{active:w,over:g}=m;s(t.onDragCancel({active:w,over:g}))}}),[s,t])),!c)return null;const p=vt.createElement(vt.Fragment,null,vt.createElement(wU,{id:r,value:i.draggable}),vt.createElement(xU,{id:l,announcement:a}));return n?Lu.createPortal(p,n):p}var zr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(zr||(zr={}));function og(){}function Uv(e,t){return j.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function EU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const $a=Object.freeze({x:0,y:0});function CU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function AU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function LU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function PU(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function s_(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const TU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=s_(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const h=CU(s_(c),i);s.push({id:l,data:{droppableContainer:a,value:h}})}}return s.sort(AU)};function MU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const c=t.width*t.height,h=e.width*e.height,p=a*l,m=p/(c+h-p);return Number(m.toFixed(4))}return 0}const DU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=MU(l,t);c>0&&i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(LU)};function IU(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function z6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:$a}function OU(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const RU=OU(1);function FU(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function $U(e,t,n){const r=FU(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,c=e.left-a-(1-i)*parseFloat(n),h=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,m=s?e.height/s:e.height;return{width:p,height:m,top:h,right:c+p,bottom:h+m,left:c}}const BU={ignoreTransform:!1};function Df(e,t){t===void 0&&(t=BU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:p}=gs(e).getComputedStyle(e);h&&(n=$U(n,h,p))}const{top:r,left:i,width:s,height:a,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:c}}function a_(e){return Df(e,{ignoreTransform:!0})}function UU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function zU(e,t){return t===void 0&&(t=gs(e).getComputedStyle(e)),t.position==="fixed"}function qU(e,t){t===void 0&&(t=gs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function rw(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(ew(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Tp(i)||$6(i)||n.includes(i))return n;const s=gs(e).getComputedStyle(i);return i!==e&&qU(i,s)&&n.push(i),zU(i,s)?n:r(i.parentNode)}return e?r(e):n}function q6(e){const[t]=rw(e,1);return t??null}function zv(e){return!Kg||!e?null:Tf(e)?e:Z5(e)?ew(e)||e===Mf(e).scrollingElement?window:Tp(e)?e:null:null}function W6(e){return Tf(e)?e.scrollX:e.scrollLeft}function H6(e){return Tf(e)?e.scrollY:e.scrollTop}function ky(e){return{x:W6(e),y:H6(e)}}var Qr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Qr||(Qr={}));function V6(e){return!Kg||!e?!1:e===document.scrollingElement}function G6(e){const t={x:0,y:0},n=V6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const WU={x:.2,y:.2};function HU(e,t,n,r,i){let{top:s,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=WU);const{isTop:h,isBottom:p,isLeft:m,isRight:w}=G6(e),g={x:0,y:0},N={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!h&&s<=t.top+k.height?(g.y=Qr.Backward,N.y=r*Math.abs((t.top+k.height-s)/k.height)):!p&&c>=t.bottom-k.height&&(g.y=Qr.Forward,N.y=r*Math.abs((t.bottom-k.height-c)/k.height)),!w&&l>=t.right-k.width?(g.x=Qr.Forward,N.x=r*Math.abs((t.right-k.width-l)/k.width)):!m&&a<=t.left+k.width&&(g.x=Qr.Backward,N.x=r*Math.abs((t.left+k.width-a)/k.width)),{direction:g,speed:N}}function VU(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Y6(e){return e.reduce((t,n)=>pf(t,ky(n)),$a)}function GU(e){return e.reduce((t,n)=>t+W6(n),0)}function YU(e){return e.reduce((t,n)=>t+H6(n),0)}function KU(e,t){if(t===void 0&&(t=Df),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);q6(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const JU=[["x",["left","right"],GU],["y",["top","bottom"],YU]];class iw{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rw(n),i=Y6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of JU)for(const c of a)Object.defineProperty(this,c,{get:()=>{const h=l(r),p=i[s]-h;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class zh{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function XU(e){const{EventTarget:t}=gs(e);return e instanceof t?e:Mf(e)}function qv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ea;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ea||(ea={}));function o_(e){e.preventDefault()}function QU(e){e.stopPropagation()}var Sn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Sn||(Sn={}));const K6={start:[Sn.Space,Sn.Enter],cancel:[Sn.Esc],end:[Sn.Space,Sn.Enter,Sn.Tab]},ZU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Sn.Right:return{...n,x:n.x+25};case Sn.Left:return{...n,x:n.x-25};case Sn.Down:return{...n,y:n.y+25};case Sn.Up:return{...n,y:n.y-25}}};class sw{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new zh(Mf(n)),this.windowListeners=new zh(gs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ea.Resize,this.handleCancel),this.windowListeners.add(ea.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ea.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&KU(r),n($a)}handleKeyDown(t){if(nw(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=K6,coordinateGetter:a=ZU,scrollBehavior:l="smooth"}=i,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:h}=r.current,p=h?{x:h.left,y:h.top}:$a;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(t,{active:n,context:r.current,currentCoordinates:p});if(m){const w=ag(m,p),g={x:0,y:0},{scrollableAncestors:N}=r.current;for(const k of N){const C=t.code,{isTop:_,isRight:S,isLeft:L,isBottom:O,maxScroll:Y,minScroll:se}=G6(k),W=VU(k),I={x:Math.min(C===Sn.Right?W.right-W.width/2:W.right,Math.max(C===Sn.Right?W.left:W.left+W.width/2,m.x)),y:Math.min(C===Sn.Down?W.bottom-W.height/2:W.bottom,Math.max(C===Sn.Down?W.top:W.top+W.height/2,m.y))},re=C===Sn.Right&&!S||C===Sn.Left&&!L,oe=C===Sn.Down&&!O||C===Sn.Up&&!_;if(re&&I.x!==m.x){const R=k.scrollLeft+w.x,z=C===Sn.Right&&R<=Y.x||C===Sn.Left&&R>=se.x;if(z&&!w.y){k.scrollTo({left:R,behavior:l});return}z?g.x=k.scrollLeft-R:g.x=C===Sn.Right?k.scrollLeft-Y.x:k.scrollLeft-se.x,g.x&&k.scrollBy({left:-g.x,behavior:l});break}else if(oe&&I.y!==m.y){const R=k.scrollTop+w.y,z=C===Sn.Down&&R<=Y.y||C===Sn.Up&&R>=se.y;if(z&&!w.x){k.scrollTo({top:R,behavior:l});return}z?g.y=k.scrollTop-R:g.y=C===Sn.Down?k.scrollTop-Y.y:k.scrollTop-se.y,g.y&&k.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,pf(ag(m,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sw.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=K6,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function l_(e){return!!(e&&"distance"in e)}function c_(e){return!!(e&&"delay"in e)}class aw{constructor(t,n,r){var i;r===void 0&&(r=XU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Mf(a),this.documentListeners=new zh(this.document),this.listeners=new zh(r),this.windowListeners=new zh(gs(a)),this.initialCoordinates=(i=Ny(s))!=null?i:$a,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ea.Resize,this.handleCancel),this.windowListeners.add(ea.DragStart,o_),this.windowListeners.add(ea.VisibilityChange,this.handleCancel),this.windowListeners.add(ea.ContextMenu,o_),this.documentListeners.add(ea.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(c_(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(l_(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ea.Click,QU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ea.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=Ny(t))!=null?n:$a,h=ag(i,c);if(!r&&l){if(l_(l)){if(l.tolerance!=null&&qv(h,l.tolerance))return this.handleCancel();if(qv(h,l.distance))return this.handleStart()}if(c_(l)&&qv(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Sn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ez={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ow extends aw{constructor(t){const{event:n}=t,r=Mf(n.target);super(t,ez,r)}}ow.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const tz={move:{name:"mousemove"},end:{name:"mouseup"}};var jy;(function(e){e[e.RightClick=2]="RightClick"})(jy||(jy={}));class nz extends aw{constructor(t){super(t,tz,Mf(t.event.target))}}nz.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===jy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Wv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class J6 extends aw{constructor(t){super(t,Wv)}static setup(){return window.addEventListener(Wv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Wv.move.name,t)};function t(){}}}J6.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var qh;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(qh||(qh={}));var lg;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(lg||(lg={}));function rz(e){let{acceleration:t,activator:n=qh.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=lg.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:w}=e;const g=sz({delta:m,disabled:!s}),[N,k]=pU(),C=j.useRef({x:0,y:0}),_=j.useRef({x:0,y:0}),S=j.useMemo(()=>{switch(n){case qh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case qh.DraggableRect:return i}},[n,i,c]),L=j.useRef(null),O=j.useCallback(()=>{const se=L.current;if(!se)return;const W=C.current.x*_.current.x,I=C.current.y*_.current.y;se.scrollBy(W,I)},[]),Y=j.useMemo(()=>l===lg.TreeOrder?[...h].reverse():h,[l,h]);j.useEffect(()=>{if(!s||!h.length||!S){k();return}for(const se of Y){if((r==null?void 0:r(se))===!1)continue;const W=h.indexOf(se),I=p[W];if(!I)continue;const{direction:re,speed:oe}=HU(se,I,S,t,w);for(const R of["x","y"])g[R][re[R]]||(oe[R]=0,re[R]=0);if(oe.x>0||oe.y>0){k(),L.current=se,N(O,a),C.current=oe,_.current=re;return}}C.current={x:0,y:0},_.current={x:0,y:0},k()},[t,O,r,k,s,a,JSON.stringify(S),JSON.stringify(g),N,h,Y,p,JSON.stringify(w)])}const iz={x:{[Qr.Backward]:!1,[Qr.Forward]:!1},y:{[Qr.Backward]:!1,[Qr.Forward]:!1}};function sz(e){let{delta:t,disabled:n}=e;const r=Sy(t);return Mp(i=>{if(n||!r||!i)return iz;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Qr.Backward]:i.x[Qr.Backward]||s.x===-1,[Qr.Forward]:i.x[Qr.Forward]||s.x===1},y:{[Qr.Backward]:i.y[Qr.Backward]||s.y===-1,[Qr.Forward]:i.y[Qr.Forward]||s.y===1}}},[n,t,r])}function az(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Mp(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function oz(e,t){return j.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var gp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(gp||(gp={}));var Ey;(function(e){e.Optimized="optimized"})(Ey||(Ey={}));const u_=new Map;function lz(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=j.useState(null),{frequency:l,measure:c,strategy:h}=i,p=j.useRef(e),m=C(),w=pp(m),g=j.useCallback(function(_){_===void 0&&(_=[]),!w.current&&a(S=>S===null?_:S.concat(_.filter(L=>!S.includes(L))))},[w]),N=j.useRef(null),k=Mp(_=>{if(m&&!n)return u_;if(!_||_===u_||p.current!==e||s!=null){const S=new Map;for(let L of e){if(!L)continue;if(s&&s.length>0&&!s.includes(L.id)&&L.rect.current){S.set(L.id,L.rect.current);continue}const O=L.node.current,Y=O?new iw(c(O),O):null;L.rect.current=Y,Y&&S.set(L.id,Y)}return S}return _},[e,s,n,m,c]);return j.useEffect(()=>{p.current=e},[e]),j.useEffect(()=>{m||g()},[n,m]),j.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),j.useEffect(()=>{m||typeof l!="number"||N.current!==null||(N.current=setTimeout(()=>{g(),N.current=null},l))},[l,m,g,...r]),{droppableRects:k,measureDroppableContainers:g,measuringScheduled:s!=null};function C(){switch(h){case gp.Always:return!1;case gp.BeforeDragging:return n;default:return!n}}}function X6(e,t){return Mp(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function cz(e,t){return X6(e,t)}function uz(e){let{callback:t,disabled:n}=e;const r=tw(t),i=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return j.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Jg(e){let{callback:t,disabled:n}=e;const r=tw(t),i=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return j.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function dz(e){return new iw(Df(e),e)}function d_(e,t,n){t===void 0&&(t=dz);const[r,i]=j.useState(null);function s(){i(c=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=c??n)!=null?h:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=uz({callback(c){if(e)for(const h of c){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(e)){s();break}}}}),l=Jg({callback:s});return xo(()=>{s(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function fz(e){const t=X6(e);return z6(e,t)}const f_=[];function hz(e){const t=j.useRef(e),n=Mp(r=>e?r&&r!==f_&&e&&t.current&&e.parentNode===t.current.parentNode?r:rw(e):f_,[e]);return j.useEffect(()=>{t.current=e},[e]),n}function pz(e){const[t,n]=j.useState(null),r=j.useRef(e),i=j.useCallback(s=>{const a=zv(s.target);a&&n(l=>l?(l.set(a,ky(a)),new Map(l)):null)},[]);return j.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(c=>{const h=zv(c);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,ky(h)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(c=>{const h=zv(c);h==null||h.removeEventListener("scroll",i)})}},[i,e]),j.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>pf(s,a),$a):Y6(e):$a,[e,t])}function h_(e,t){t===void 0&&(t=[]);const n=j.useRef(null);return j.useEffect(()=>{n.current=null},t),j.useEffect(()=>{const r=e!==$a;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ag(e,n.current):$a}function mz(e){j.useEffect(()=>{if(!Kg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function gz(e,t){return j.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function Q6(e){return j.useMemo(()=>e?UU(e):null,[e])}const p_=[];function vz(e,t){t===void 0&&(t=Df);const[n]=e,r=Q6(n?gs(n):null),[i,s]=j.useState(p_);function a(){s(()=>e.length?e.map(c=>V6(c)?r:new iw(t(c),c)):p_)}const l=Jg({callback:a});return xo(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),i}function yz(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Tp(t)?t:e}function wz(e){let{measure:t}=e;const[n,r]=j.useState(null),i=j.useCallback(h=>{for(const{target:p}of h)if(Tp(p)){r(m=>{const w=t(p);return m?{...m,width:w.width,height:w.height}:w});break}},[t]),s=Jg({callback:i}),a=j.useCallback(h=>{const p=yz(h);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[l,c]=sg(a);return j.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const xz=[{sensor:ow,options:{}},{sensor:sw,options:{}}],bz={current:{}},p0={draggable:{measure:a_},droppable:{measure:a_,strategy:gp.WhileDragging,frequency:Ey.Optimized},dragOverlay:{measure:Df}};class Wh extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const _z={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:og},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:p0,measureDroppableContainers:og,windowRect:null,measuringScheduled:!1},Sz={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:og,draggableNodes:new Map,over:null,measureDroppableContainers:og},Xg=j.createContext(Sz),Z6=j.createContext(_z);function Nz(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wh}}}function kz(e,t){switch(t.type){case zr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case zr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case zr.DragEnd:case zr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case zr.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Wh(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case zr.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Wh(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case zr.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Wh(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function jz(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=j.useContext(Xg),s=Sy(r),a=Sy(n==null?void 0:n.id);return j.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!nw(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:c,node:h}=l;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[c.current,h.current]){if(!p)continue;const m=vU(p);if(m){m.focus();break}}})}},[r,t,i,a,s]),null}function Ez(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function Cz(e){return j.useMemo(()=>({draggable:{...p0.draggable,...e==null?void 0:e.draggable},droppable:{...p0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...p0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Az(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=j.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;xo(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const h=t==null?void 0:t.node.current;if(!h||h.isConnected===!1)return;const p=n(h),m=z6(p,r);if(a||(m.x=0),l||(m.y=0),s.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const w=q6(h);w&&w.scrollBy({top:m.y,left:m.x})}},[t,a,l,r,n])}const ek=j.createContext({...$a,scaleX:1,scaleY:1});var lc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(lc||(lc={}));const Lz=j.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:c=!0,children:h,sensors:p=xz,collisionDetection:m=DU,measuring:w,modifiers:g,...N}=t;const k=j.useReducer(kz,void 0,Nz),[C,_]=k,[S,L]=SU(),[O,Y]=j.useState(lc.Uninitialized),se=O===lc.Initialized,{draggable:{active:W,nodes:I,translate:re},droppable:{containers:oe}}=C,R=W!=null?I.get(W):null,z=j.useRef({initial:null,translated:null}),K=j.useMemo(()=>{var un;return W!=null?{id:W,data:(un=R==null?void 0:R.data)!=null?un:bz,rect:z}:null},[W,R]),J=j.useRef(null),[ye,pe]=j.useState(null),[X,F]=j.useState(null),U=pp(N,Object.values(N)),ae=Dp("DndDescribedBy",a),Le=j.useMemo(()=>oe.getEnabled(),[oe]),P=Cz(w),{droppableRects:V,measureDroppableContainers:ne,measuringScheduled:le}=lz(Le,{dragging:se,dependencies:[re.x,re.y],config:P.droppable}),de=az(I,W),Ae=j.useMemo(()=>X?Ny(X):null,[X]),Ee=or(),Z=cz(de,P.draggable.measure);Az({activeNode:W!=null?I.get(W):null,config:Ee.layoutShiftCompensation,initialRect:Z,measure:P.draggable.measure});const je=d_(de,P.draggable.measure,Z),_e=d_(de?de.parentElement:null),Re=j.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:oe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Be=oe.getNodeFor((n=Re.current.over)==null?void 0:n.id),We=wz({measure:P.dragOverlay.measure}),xe=(r=We.nodeRef.current)!=null?r:de,ee=se?(i=We.rect)!=null?i:je:null,Qe=!!(We.nodeRef.current&&We.rect),Je=fz(Qe?null:je),Ve=Q6(xe?gs(xe):null),Ze=hz(se?Be??de:null),be=vz(Ze),ce=Ez(g,{transform:{x:re.x-Je.x,y:re.y-Je.y,scaleX:1,scaleY:1},activatorEvent:X,active:K,activeNodeRect:je,containerNodeRect:_e,draggingNodeRect:ee,over:Re.current.over,overlayNodeRect:We.rect,scrollableAncestors:Ze,scrollableAncestorRects:be,windowRect:Ve}),Ne=Ae?pf(Ae,re):null,fe=pz(Ze),ge=h_(fe),rt=h_(fe,[je]),ot=pf(ce,ge),it=ee?RU(ee,ce):null,Fe=K&&it?m({active:K,collisionRect:it,droppableRects:V,droppableContainers:Le,pointerCoordinates:Ne}):null,st=PU(Fe,"id"),[Ue,Ct]=j.useState(null),ut=Qe?ce:pf(ce,rt),Gt=IU(ut,(s=Ue==null?void 0:Ue.rect)!=null?s:null,je),kt=j.useRef(null),At=j.useCallback((un,zt)=>{let{sensor:bt,options:qt}=zt;if(J.current==null)return;const xn=I.get(J.current);if(!xn)return;const rn=un.nativeEvent,lr=new bt({active:J.current,activeNode:xn,event:rn,options:qt,context:Re,onAbort(gt){if(!I.get(gt))return;const{onDragAbort:cr}=U.current,Pn={id:gt};cr==null||cr(Pn),S({type:"onDragAbort",event:Pn})},onPending(gt,Zn,cr,Pn){if(!I.get(gt))return;const{onDragPending:Tn}=U.current,er={id:gt,constraint:Zn,initialCoordinates:cr,offset:Pn};Tn==null||Tn(er),S({type:"onDragPending",event:er})},onStart(gt){const Zn=J.current;if(Zn==null)return;const cr=I.get(Zn);if(!cr)return;const{onDragStart:Pn}=U.current,On={activatorEvent:rn,active:{id:Zn,data:cr.data,rect:z}};Lu.unstable_batchedUpdates(()=>{Pn==null||Pn(On),Y(lc.Initializing),_({type:zr.DragStart,initialCoordinates:gt,active:Zn}),S({type:"onDragStart",event:On}),pe(kt.current),F(rn)})},onMove(gt){_({type:zr.DragMove,coordinates:gt})},onEnd:Rr(zr.DragEnd),onCancel:Rr(zr.DragCancel)});kt.current=lr;function Rr(gt){return async function(){const{active:cr,collisions:Pn,over:On,scrollAdjustedTranslate:Tn}=Re.current;let er=null;if(cr&&Tn){const{cancelDrop:Wi}=U.current;er={activatorEvent:rn,active:cr,collisions:Pn,delta:Tn,over:On},gt===zr.DragEnd&&typeof Wi=="function"&&await Promise.resolve(Wi(er))&&(gt=zr.DragCancel)}J.current=null,Lu.unstable_batchedUpdates(()=>{_({type:gt}),Y(lc.Uninitialized),Ct(null),pe(null),F(null),kt.current=null;const Wi=gt===zr.DragEnd?"onDragEnd":"onDragCancel";if(er){const Ci=U.current[Wi];Ci==null||Ci(er),S({type:Wi,event:er})}})}}},[I]),mn=j.useCallback((un,zt)=>(bt,qt)=>{const xn=bt.nativeEvent,rn=I.get(qt);if(J.current!==null||!rn||xn.dndKit||xn.defaultPrevented)return;const lr={active:rn};un(bt,zt.options,lr)===!0&&(xn.dndKit={capturedBy:zt.sensor},J.current=qt,At(bt,zt))},[I,At]),Pt=oz(p,mn);mz(p),xo(()=>{je&&O===lc.Initializing&&Y(lc.Initialized)},[je,O]),j.useEffect(()=>{const{onDragMove:un}=U.current,{active:zt,activatorEvent:bt,collisions:qt,over:xn}=Re.current;if(!zt||!bt)return;const rn={active:zt,activatorEvent:bt,collisions:qt,delta:{x:ot.x,y:ot.y},over:xn};Lu.unstable_batchedUpdates(()=>{un==null||un(rn),S({type:"onDragMove",event:rn})})},[ot.x,ot.y]),j.useEffect(()=>{const{active:un,activatorEvent:zt,collisions:bt,droppableContainers:qt,scrollAdjustedTranslate:xn}=Re.current;if(!un||J.current==null||!zt||!xn)return;const{onDragOver:rn}=U.current,lr=qt.get(st),Rr=lr&&lr.rect.current?{id:lr.id,rect:lr.rect.current,data:lr.data,disabled:lr.disabled}:null,gt={active:un,activatorEvent:zt,collisions:bt,delta:{x:xn.x,y:xn.y},over:Rr};Lu.unstable_batchedUpdates(()=>{Ct(Rr),rn==null||rn(gt),S({type:"onDragOver",event:gt})})},[st]),xo(()=>{Re.current={activatorEvent:X,active:K,activeNode:de,collisionRect:it,collisions:Fe,droppableRects:V,draggableNodes:I,draggingNode:xe,draggingNodeRect:ee,droppableContainers:oe,over:Ue,scrollableAncestors:Ze,scrollAdjustedTranslate:ot},z.current={initial:ee,translated:it}},[K,de,Fe,it,I,xe,ee,V,oe,Ue,Ze,ot]),rz({...Ee,delta:re,draggingRect:it,pointerCoordinates:Ne,scrollableAncestors:Ze,scrollableAncestorRects:be});const Qn=j.useMemo(()=>({active:K,activeNode:de,activeNodeRect:je,activatorEvent:X,collisions:Fe,containerNodeRect:_e,dragOverlay:We,draggableNodes:I,droppableContainers:oe,droppableRects:V,over:Ue,measureDroppableContainers:ne,scrollableAncestors:Ze,scrollableAncestorRects:be,measuringConfiguration:P,measuringScheduled:le,windowRect:Ve}),[K,de,je,X,Fe,_e,We,I,oe,V,Ue,ne,Ze,be,P,le,Ve]),Et=j.useMemo(()=>({activatorEvent:X,activators:Pt,active:K,activeNodeRect:je,ariaDescribedById:{draggable:ae},dispatch:_,draggableNodes:I,over:Ue,measureDroppableContainers:ne}),[X,Pt,K,je,_,ae,I,Ue,ne]);return vt.createElement(U6.Provider,{value:L},vt.createElement(Xg.Provider,{value:Et},vt.createElement(Z6.Provider,{value:Qn},vt.createElement(ek.Provider,{value:Gt},h)),vt.createElement(jz,{disabled:(l==null?void 0:l.restoreFocus)===!1})),vt.createElement(jU,{...l,hiddenTextDescribedById:ae}));function or(){const un=(ye==null?void 0:ye.autoScrollEnabled)===!1,zt=typeof c=="object"?c.enabled===!1:c===!1,bt=se&&!un&&!zt;return typeof c=="object"?{...c,enabled:bt}:{enabled:bt}}}),Pz=j.createContext(null),m_="button",Tz="Draggable";function Mz(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Dp(Tz),{activators:a,activatorEvent:l,active:c,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:w}=j.useContext(Xg),{role:g=m_,roleDescription:N="draggable",tabIndex:k=0}=i??{},C=(c==null?void 0:c.id)===t,_=j.useContext(C?ek:Pz),[S,L]=sg(),[O,Y]=sg(),se=gz(a,t),W=pp(n);xo(()=>(m.set(t,{id:t,key:s,node:S,activatorNode:O,data:W}),()=>{const re=m.get(t);re&&re.key===s&&m.delete(t)}),[m,t]);const I=j.useMemo(()=>({role:g,tabIndex:k,"aria-disabled":r,"aria-pressed":C&&g===m_?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[r,g,k,C,N,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:h,attributes:I,isDragging:C,listeners:r?void 0:se,node:S,over:w,setNodeRef:L,setActivatorNodeRef:Y,transform:_}}function Dz(){return j.useContext(Z6)}const Iz="Droppable",Oz={timeout:25};function Rz(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Dp(Iz),{active:a,dispatch:l,over:c,measureDroppableContainers:h}=j.useContext(Xg),p=j.useRef({disabled:n}),m=j.useRef(!1),w=j.useRef(null),g=j.useRef(null),{disabled:N,updateMeasurementsFor:k,timeout:C}={...Oz,...i},_=pp(k??r),S=j.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{h(Array.isArray(_.current)?_.current:[_.current]),g.current=null},C)},[C]),L=Jg({callback:S,disabled:N||!a}),O=j.useCallback((I,re)=>{L&&(re&&(L.unobserve(re),m.current=!1),I&&L.observe(I))},[L]),[Y,se]=sg(O),W=pp(t);return j.useEffect(()=>{!L||!Y.current||(L.disconnect(),m.current=!1,L.observe(Y.current))},[Y,L]),j.useEffect(()=>(l({type:zr.RegisterDroppable,element:{id:r,key:s,disabled:n,node:Y,rect:w,data:W}}),()=>l({type:zr.UnregisterDroppable,key:s,id:r})),[r]),j.useEffect(()=>{n!==p.current.disabled&&(l({type:zr.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:a,rect:w,isOver:(c==null?void 0:c.id)===r,node:Y,over:c,setNodeRef:se}}function lw(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Fz(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function qm(e){return e!==null&&e>=0}function $z(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Bz(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const tk=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=lw(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Wm={scaleX:1,scaleY:1},Uz=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const h=s[a];return h?{x:0,y:n<a?h.top+h.height-(l.top+l.height):h.top-l.top,...Wm}:null}const c=zz(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-c,...Wm}:i<n&&i>=a?{x:0,y:l.height+c,...Wm}:{x:0,y:0,...Wm}};function zz(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const nk="Sortable",rk=vt.createContext({activeIndex:-1,containerId:nk,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tk,disabled:{draggable:!1,droppable:!1}});function qz(e){let{children:t,id:n,items:r,strategy:i=tk,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:h,measureDroppableContainers:p}=Dz(),m=Dp(nk,n),w=l.rect!==null,g=j.useMemo(()=>r.map(se=>typeof se=="object"&&"id"in se?se.id:se),[r]),N=a!=null,k=a?g.indexOf(a.id):-1,C=h?g.indexOf(h.id):-1,_=j.useRef(g),S=!$z(g,_.current),L=C!==-1&&k===-1||S,O=Bz(s);xo(()=>{S&&N&&p(g)},[S,g,N,p]),j.useEffect(()=>{_.current=g},[g]);const Y=j.useMemo(()=>({activeIndex:k,containerId:m,disabled:O,disableTransforms:L,items:g,overIndex:C,useDragOverlay:w,sortedRects:Fz(g,c),strategy:i}),[k,m,O.draggable,O.droppable,L,g,C,c,w,i]);return vt.createElement(rk.Provider,{value:Y},t)}const Wz=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return lw(n,r,i).indexOf(t)},Hz=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:h}=e;return!h||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===c},Vz={duration:200,easing:"ease"},ik="transform",Gz=mp.Transition.toString({property:ik,duration:0,easing:"linear"}),Yz={roleDescription:"sortable"};function Kz(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=j.useState(null),l=j.useRef(n);return xo(()=>{if(!t&&n!==l.current&&r.current){const c=i.current;if(c){const h=Df(r.current,{ignoreTransform:!0}),p={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(p.x||p.y)&&a(p)}}n!==l.current&&(l.current=n)},[t,n,r,i]),j.useEffect(()=>{s&&a(null)},[s]),s}function Jz(e){let{animateLayoutChanges:t=Hz,attributes:n,disabled:r,data:i,getNewIndex:s=Wz,id:a,strategy:l,resizeObserverConfig:c,transition:h=Vz}=e;const{items:p,containerId:m,activeIndex:w,disabled:g,disableTransforms:N,sortedRects:k,overIndex:C,useDragOverlay:_,strategy:S}=j.useContext(rk),L=Xz(r,g),O=p.indexOf(a),Y=j.useMemo(()=>({sortable:{containerId:m,index:O,items:p},...i}),[m,i,O,p]),se=j.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:W,node:I,isOver:re,setNodeRef:oe}=Rz({id:a,data:Y,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:se,...c}}),{active:R,activatorEvent:z,activeNodeRect:K,attributes:J,setNodeRef:ye,listeners:pe,isDragging:X,over:F,setActivatorNodeRef:U,transform:ae}=Mz({id:a,data:Y,attributes:{...Yz,...n},disabled:L.draggable}),Le=hU(oe,ye),P=!!R,V=P&&!N&&qm(w)&&qm(C),ne=!_&&X,le=ne&&V?ae:null,Ae=V?le??(l??S)({rects:k,activeNodeRect:K,activeIndex:w,overIndex:C,index:O}):null,Ee=qm(w)&&qm(C)?s({id:a,items:p,activeIndex:w,overIndex:C}):O,Z=R==null?void 0:R.id,je=j.useRef({activeId:Z,items:p,newIndex:Ee,containerId:m}),_e=p!==je.current.items,Re=t({active:R,containerId:m,isDragging:X,isSorting:P,id:a,index:O,items:p,newIndex:je.current.newIndex,previousItems:je.current.items,previousContainerId:je.current.containerId,transition:h,wasDragging:je.current.activeId!=null}),Be=Kz({disabled:!Re,index:O,node:I,rect:W});return j.useEffect(()=>{P&&je.current.newIndex!==Ee&&(je.current.newIndex=Ee),m!==je.current.containerId&&(je.current.containerId=m),p!==je.current.items&&(je.current.items=p)},[P,Ee,m,p]),j.useEffect(()=>{if(Z===je.current.activeId)return;if(Z!=null&&je.current.activeId==null){je.current.activeId=Z;return}const xe=setTimeout(()=>{je.current.activeId=Z},50);return()=>clearTimeout(xe)},[Z]),{active:R,activeIndex:w,attributes:J,data:Y,rect:W,index:O,newIndex:Ee,items:p,isOver:re,isSorting:P,isDragging:X,listeners:pe,node:I,overIndex:C,over:F,setNodeRef:Le,setActivatorNodeRef:U,setDroppableNodeRef:oe,setDraggableNodeRef:ye,transform:Be??Ae,transition:We()};function We(){if(Be||_e&&je.current.newIndex===O)return Gz;if(!(ne&&!nw(z)||!h)&&(P||Re))return mp.Transition.toString({...h,property:ik})}}function Xz(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}Sn.Down,Sn.Right,Sn.Up,Sn.Left;function Qz({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[s,a]=j.useState(""),[l,c]=j.useState([]),[h,p]=j.useState(!1),[m,w]=j.useState(""),g=C=>{c(_=>_.includes(C)?_.filter(S=>S!==C):[..._,C])},N=async()=>{if(l.length<2){Te.error("Selecciona al menos dos canciones para el medley");return}let C=s.trim();if(C||(C=l.map(S=>r.find(L=>L.id===S)).filter(S=>!!S).map(S=>S.title).join(" | ")),!C){Te.error("No se pudo generar el nombre del medley.");return}p(!0);try{const _=await TB(n,C,l);_&&(Te.success("Medley creado con éxito"),i(_),k())}catch(_){console.error("Error creating medley:",_),Te.error("Error al crear el medley")}finally{p(!1)}},k=()=>{a(""),c([]),w(""),t()};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Xn,{label:"Nombre del Medley",value:s,onChange:C=>a(C.target.value),placeholder:"Ej: Medley de Rock Clásico",autoFocus:!0}),d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),d.jsxs("div",{className:"border rounded-md p-2",children:[d.jsx(Xn,{placeholder:"Buscar canción para añadir...",value:m,onChange:C=>w(C.target.value),className:"mb-2"}),d.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(C=>C.type==="song").filter(C=>{var _;return C.title.toLowerCase().includes(m.toLowerCase())||((_=C.artist)==null?void 0:_.toLowerCase().includes(m.toLowerCase()))}).map(C=>d.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:d.jsx("div",{children:d.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[d.jsx("input",{type:"checkbox",checked:l.includes(C.id),onChange:()=>g(C.id),className:"rounded"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm truncate",children:C.title}),C.artist&&d.jsx("div",{className:"text-xs text-gray-500 truncate",children:C.artist})]})]})})},C.id))})]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:k,disabled:h,children:"Cancelar"}),d.jsx(_t,{variant:"primary",onClick:N,loading:h,disabled:l.length<2,children:"Crear Medley"})]})]})}):null}function Zz({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:s,onMedleyDeleted:a}){const[l,c]=j.useState(!1),[h,p]=j.useState(!1),[m,w]=j.useState(e.title),[g,N]=j.useState(!1),[k,C]=j.useState(!1),[_,S]=j.useState(!1),[L,O]=j.useState(""),[Y,se]=j.useState([]);j.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const J=await tg(e.group_id);if(J){const ye=J.filter(pe=>{var X;return((X=e.medley_song_ids)==null?void 0:X.includes(pe.id))&&pe.type==="song"});se(ye)}}})()},[e.medley_song_ids,e.group_id]);const W=async()=>{if(!m.trim()){Te.error("El nombre del medley es obligatorio");return}C(!0);try{await FB(e.id,{title:m})&&(Te.success("Medley actualizado"),s(e.id,m),p(!1))}catch(K){console.error("Error al actualizar el medley:",K),Te.error("Error al actualizar el medley")}finally{C(!1)}},I=async()=>{C(!0);try{await UB(e.id)&&(Te.success("Medley eliminado"),a(e.id))}catch(K){console.error("Error al eliminar el medley:",K),Te.error("Error al eliminar el medley")}finally{C(!1),S(!1)}},re=async K=>{C(!0);try{await BB(e.id,K)&&(Te.success("Canción eliminada del medley"),i(e.id,K),se(ye=>ye.filter(pe=>pe.id!==K)))}catch(J){console.error("Error al eliminar la canción del medley:",J),Te.error("Error al eliminar la canción del medley")}finally{C(!1)}},oe=async K=>{if(!t.find(ye=>ye.id===K)){Te.error("No se pudo encontrar la canción seleccionada");return}C(!0);try{const ye=await $B(e.id,K);if(ye){Te.success("Canción añadida al medley"),r(e.id,K),N(!1),O("");const pe=await tg(e.group_id);if(pe&&ye.medley_song_ids){const X=pe.filter(F=>{var U;return((U=ye.medley_song_ids)==null?void 0:U.includes(F.id))&&F.type==="song"});se(X)}}}catch(ye){console.error("Error al añadir la canción al medley:",ye),Te.error("Error al añadir la canción al medley")}finally{C(!1)}},R=e.medley_song_ids?e.medley_song_ids.map(K=>Y.find(J=>J.id===K)).filter(Boolean):[],z=Array.from(new Map(R.map(K=>[K.id,K])).values());return d.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!l),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(dU,{className:"text-blue-600"}),d.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[d.jsxs("span",{children:[z.length," canciones"]}),l?d.jsx(lU,{}):d.jsx(oU,{})]})]}),l&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:K=>K.stopPropagation(),children:[n&&d.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[d.jsxs(_t,{variant:"secondary",onClick:()=>{p(!h),h&&w(e.title)},children:[d.jsx(F6,{className:"mr-1"}),h?"Cancelar":"Renombrar"]}),!h&&d.jsxs(_t,{variant:"danger",onClick:()=>S(!0),loading:k,children:[d.jsx(fU,{className:"mr-1"}),"Eliminar"]})]}),h&&d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[d.jsx(Xn,{value:m,onChange:K=>w(K.target.value),placeholder:"Nuevo nombre del medley"}),d.jsx(_t,{onClick:W,loading:k,children:"Guardar"})]}),!h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),z.length===0?d.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):d.jsx("ul",{className:"space-y-1",children:z.map(K=>d.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-sm",children:K.title}),K.artist&&d.jsx("span",{className:"text-xs text-gray-500 ml-2",children:K.artist})]}),n&&d.jsx(_t,{variant:"danger",onClick:()=>re(K.id),loading:k,children:d.jsx(r_,{})})]},K.id))})]}),n&&d.jsx("div",{className:"mt-3",children:g?d.jsxs("div",{className:"border rounded p-2 bg-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"Añadir canción:"}),d.jsx(_t,{variant:"secondary",onClick:()=>{N(!1),O("")},children:d.jsx(r_,{})})]}),d.jsx(Xn,{placeholder:"Buscar canción...",value:L,onChange:K=>O(K.target.value),className:"mb-2"}),d.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(K=>K.type==="song").filter(K=>!z.some(J=>J.id===K.id)).filter(K=>{var J;return K.title.toLowerCase().includes(L.toLowerCase())||((J=K.artist)==null?void 0:J.toLowerCase().includes(L.toLowerCase()))}).map(K=>d.jsxs("button",{onClick:()=>oe(K.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:k,children:[d.jsx("div",{className:"font-medium",children:K.title}),K.artist&&d.jsx("div",{className:"text-xs text-gray-500",children:K.artist})]},K.id)),t.filter(K=>K.type==="song"&&!z.some(J=>J.id===K.id)).length===0&&d.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay más canciones para añadir."})]})]}):d.jsxs(_t,{variant:"primary",onClick:()=>N(!0),children:[d.jsx(_y,{className:"mr-1"}),"Añadir Canción"]})})]})]}),_&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>S(!1),children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:K=>K.stopPropagation(),children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el medley "',e.title,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>S(!1),disabled:k,children:"Cancelar"}),d.jsx(_t,{variant:"danger",onClick:I,loading:k,children:k?"Eliminando...":"Eliminar"})]})]})})]})}function eq({isOpen:e,onClose:t,groupId:n,onSetlistCreated:r}){const{isAuthenticated:i}=Pp(),[s,a]=j.useState([]),[l,c]=j.useState(null),[h,p]=j.useState([]),[m,w]=j.useState(!1),[g,N]=j.useState(!1),[k,C]=j.useState(0),[_,S]=j.useState("");j.useEffect(()=>{e&&i&&L()},[e,i]),j.useEffect(()=>{l&&(S(l.name),O(l.id))},[l]);const L=async()=>{w(!0);try{const I=await zn.getUserPlaylists(50);a(I)}catch(I){console.error("Error loading playlists:",I),Te.error("Error al cargar las playlists")}finally{w(!1)}},O=async I=>{w(!0);try{const re=await zn.getPlaylistTracks(I,100);p(re.filter(oe=>oe&&oe.id))}catch(re){console.error("Error loading playlist tracks:",re),Te.error("Error al cargar las canciones de la playlist")}finally{w(!1)}},Y=async()=>{if(!(!l||!h.length)){N(!0),C(0);try{const{data:{user:I}}=await et.auth.getUser();if(!I){Te.error("No se pudo obtener la información del usuario");return}const re={name:_||l.name,description:`Importado desde Spotify: ${l.name}`,group_id:n,created_by:I.id},oe=await Q5(re);if(!oe){Te.error("Error al crear el setlist");return}const R=h.length;let z=0;for(let K=0;K<R;K++){const J=h[K];C(Math.round((K+1)/R*100));try{const ye=Math.round(J.duration_ms/6e4),pe={title:J.name,artist:J.artists.map(F=>F.name).join(", "),duration_minutes:ye,key:"",notes:`Popularidad: ${J.popularity}% | Álbum: ${J.album.name}`,group_id:n,created_by:I.id},X=await h0(pe);X&&(await ng(oe.id,X.id,K+1),z++)}catch(ye){console.error(`Error importing track ${J.name}:`,ye)}}C(100),Te.success(`Setlist "${_}" creado con ${z}/${R} canciones`),r(),t()}catch(I){console.error("Error importing playlist:",I),Te.error("Error al importar la playlist")}finally{N(!1),C(0)}}},se=I=>{const re=Math.floor(I/6e4),oe=Math.floor(I%6e4/1e3);return`${re}:${oe.toString().padStart(2,"0")}`},W=()=>{const I=h.reduce((z,K)=>z+K.duration_ms,0),re=Math.floor(I/6e4),oe=Math.floor(re/60),R=re%60;return oe>0?`${oe}h ${R}m`:`${R}m`};return e?i?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",disabled:g,children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-3 sm:p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:l?d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 mb-4 sm:mb-6",children:[d.jsx("button",{onClick:()=>{c(null),p([]),S("")},className:"text-blue-600 hover:text-blue-800 text-sm sm:text-base self-start",disabled:g,children:"← Volver a playlists"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold truncate",children:l.name}),l.description&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2",children:l.description})]}),d.jsx("a",{href:l.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 p-1",title:"Abrir en Spotify",children:d.jsx(Z2,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),d.jsxs("div",{className:"mb-4 sm:mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del setlist"}),d.jsx("input",{type:"text",value:_,onChange:I=>S(I.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nombre para el nuevo setlist",disabled:g})]}),m?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(ol,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),d.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando canciones..."})]}):d.jsxs("div",{children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4",children:d.jsx("div",{className:"bg-gray-50 rounded-lg px-3 py-2",children:d.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:[h.length," canciones • ",W()]})})}),d.jsx("div",{className:"max-h-64 sm:max-h-96 overflow-y-auto border border-gray-200 rounded-lg bg-gray-50",children:h.map((I,re)=>{var oe,R;return d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-white border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",children:[d.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-6 sm:w-8 text-center",children:re+1}),d.jsx("img",{src:((oe=I.album.images[2])==null?void 0:oe.url)||((R=I.album.images[0])==null?void 0:R.url),alt:I.album.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-xs sm:text-sm text-gray-900 truncate",children:I.name}),d.jsx("p",{className:"text-xs text-gray-600 truncate",children:I.artists.map(z=>z.name).join(", ")})]}),d.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 flex-shrink-0",children:[d.jsx(W0,{className:"w-3 h-3 mr-1"}),se(I.duration_ms)]})]},I.id)})})]})]}):d.jsxs("div",{children:[d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Selecciona una playlist de Spotify para importar como setlist:"}),m?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(ol,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),d.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando playlists..."})]}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(I=>d.jsx("div",{onClick:()=>c(I),className:"border border-gray-200 rounded-lg p-3 sm:p-4 cursor-pointer hover:border-green-400 hover:bg-green-50 hover:shadow-md transition-all duration-200",children:d.jsxs("div",{className:"flex items-start gap-3",children:[I.images&&I.images.length>0?d.jsx("img",{src:I.images[0].url,alt:I.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded object-cover flex-shrink-0"}):d.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:d.jsx(ei,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:I.name}),I.description&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2",children:I.description}),d.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[I.tracks.total," canciones"]})]})]})},I.id))})]})}),d.jsx("div",{className:"border-t p-3 sm:p-6",children:g?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Importando canciones... ",k,"%"]}),d.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:[Math.round(k/100*h.length),"/",h.length]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}):d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[d.jsx(_t,{variant:"secondary",onClick:t,size:"sm",className:"w-full sm:w-auto",children:"Cancelar"}),l&&h.length>0&&d.jsxs(_t,{variant:"primary",onClick:Y,disabled:!_.trim(),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(H0,{className:"w-4 h-4 mr-2"}),d.jsxs("span",{className:"hidden sm:inline",children:["Importar ",h.length," canciones"]}),d.jsxs("span",{className:"sm:hidden",children:["Importar (",h.length,")"]})]})]})})]})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",children:d.jsx(Ia,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"text-center py-6 sm:py-8",children:[d.jsx(ei,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Necesitas conectar con Spotify para importar playlists"}),d.jsx(_t,{onClick:t,variant:"primary",size:"sm",className:"w-full sm:w-auto",children:"Entendido"})]})]})}):null}const g_={name:"",description:"",estimated_duration_minutes:""};function tq({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:s,onMedleyRenamed:a,onMedleyDeleted:l}){var N,k,C,_;const{attributes:c,listeners:h,setNodeRef:p,transform:m,transition:w}=Jz({id:e.id}),g={transform:mp.Transform.toString(m),transition:w};return d.jsxs("div",{ref:p,style:g,...c,className:"flex items-center gap-2 mb-2",children:[t&&d.jsx("div",{...h,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 py-2 px-2 sm:py-3 sm:px-3 touch-none select-none min-w-[40px] min-h-[40px] sm:min-w-[48px] sm:min-h-[48px] flex items-center justify-center rounded-md hover:bg-gray-100 active:bg-gray-200 transition-colors",role:"button","aria-label":"Arrastrar para reordenar",tabIndex:0,children:d.jsx(uU,{className:"text-lg"})}),d.jsx("div",{className:"flex-grow",children:e.type==="song"?d.jsxs("div",{className:"bg-white p-2 sm:p-3 rounded-md shadow-sm border border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(N=e.data.song)==null?void 0:N.title}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:[(k=e.data.song)==null?void 0:k.artist," - ",(C=e.data.song)==null?void 0:C.duration_minutes,"m - Tono: ",(_=e.data.song)==null?void 0:_.key]})]}),t&&d.jsx(_t,{variant:"danger",size:"sm",onClick:()=>r(e.data.setlist_id,e.data.song_id),className:"w-full sm:w-auto",children:"Eliminar"})]}):d.jsx(Zz,{medley:e.data,availableSongs:n.filter(S=>S.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:s,onMedleyRenamed:a,onMedleyDeleted:l})})]})}function nq({groupId:e,canManageSetlists:t=!0}){const[n,r]=j.useState([]),[i,s]=j.useState([]),[a,l]=j.useState(!0),[c,h]=j.useState(!1),[p,m]=j.useState(null),[w,g]=j.useState(null),[N,k]=j.useState(g_),[C,_]=j.useState(!1),[S,L]=j.useState(null),[O,Y]=j.useState(!1),[se,W]=j.useState(null),[I,re]=j.useState(""),[oe,R]=j.useState(""),[z,K]=j.useState(!1),[J,ye]=j.useState(!1),{isAuthenticated:pe,createPlaylistFromSetlist:X,searchTracks:F}=Pp();j.useState(null),j.useState("");const[U,ae]=j.useState([]),Le=EU(Uv(ow,{activationConstraint:{distance:8}}),Uv(J6,{activationConstraint:{delay:200,tolerance:5}}),Uv(sw,{coordinateGetter:(be,{context:{active:ce,droppableRects:Ne,droppableContainers:fe,collisionRect:ge}})=>null}));j.useEffect(()=>{P()},[e]),hp({table:"setlists",filter:`group_id=eq.${e}`,onInsert:be=>{r(ce=>[...ce,{...be.new,songs:[]}]),Te.success("Nuevo setlist añadido en tiempo real")},onUpdate:be=>{const ce=be.new;r(Ne=>Ne.map(fe=>fe.id===ce.id?{...fe,...ce}:fe)),(w==null?void 0:w.id)===ce.id&&g(Ne=>Ne?{...Ne,...ce}:null)},onDelete:be=>{r(ce=>ce.filter(Ne=>Ne.id!==be.old.id)),(w==null?void 0:w.id)===be.old.id&&g(null),Te.success("Setlist eliminado en tiempo real")},enabled:!!e}),hp({table:"setlist_songs",onInsert:be=>{const ce=be.new;(w==null?void 0:w.id)===ce.setlist_id&&V()},onUpdate:be=>{const ce=be.new;(w==null?void 0:w.id)===ce.setlist_id&&V()},onDelete:be=>{const ce=be.old;(w==null?void 0:w.id)===ce.setlist_id&&V()},enabled:!!w}),j.useEffect(()=>{if(w){const be=[];w.songs&&w.songs.forEach(fe=>{var rt,ot,it,Fe;const ge=((rt=fe.song)==null?void 0:rt.type)==="medley";ge&&console.log("Processing medley item:",{songId:fe.id,songSongId:(ot=fe.song)==null?void 0:ot.id,songTitle:(it=fe.song)==null?void 0:it.title,songType:(Fe=fe.song)==null?void 0:Fe.type,position:fe.position}),fe.id?be.push({id:fe.id,type:ge?"medley":"song",position:fe.position,data:ge?fe.song:fe}):console.error("Song with undefined ID found:",fe)}),w.medleys&&w.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",w.medleys),console.warn('All medleys should be in the songs table with type="medley"')),be.sort((fe,ge)=>fe.position-ge.position);const ce=be.map(fe=>fe.id),Ne=ce.filter((fe,ge)=>ce.indexOf(fe)!==ge);Ne.length>0&&(console.error("Duplicate IDs found in setlistItems:",Ne),console.error("All items:",be),console.error("selectedSetlist.songs:",w.songs),console.error("selectedSetlist.medleys:",w.medleys)),console.log("All setlistItems:",be.map(fe=>({id:fe.id,type:fe.type,position:fe.position}))),ae(be)}else ae([])},[w]);const P=async()=>{l(!0);const[be,ce]=await Promise.all([by(e),tg(e)]);return be&&r(be),ce&&s(ce),l(!1),be},V=async()=>{const be=await P();if(be&&w){const ce=be.find(Ne=>Ne.id===w.id);if(ce){const Ne={...ce,songs:(ce.songs||[]).sort((fe,ge)=>fe.position-ge.position),medleys:(ce.medleys||[]).sort((fe,ge)=>fe.position-ge.position)};g(Ne)}else g(null)}},ne=async be=>{if(be.preventDefault(),!N.name.trim()){Te.error("El nombre es obligatorio");return}const{data:{user:ce}}=await et.auth.getUser();if(!ce){Te.error("No se pudo obtener la información del usuario");return}const Ne={group_id:e,name:N.name.trim(),description:N.description.trim()||void 0,estimated_duration_minutes:N.estimated_duration_minutes?parseInt(N.estimated_duration_minutes):void 0,created_by:ce.id};if(p){const fe=await DB(p.id,Ne);fe&&(Te.success("Setlist actualizado correctamente"),r(ge=>ge.map(rt=>rt.id===p.id?{...rt,...fe}:rt)),(w==null?void 0:w.id)===p.id&&g(ge=>ge?{...ge,...fe}:null))}else{const fe=await Q5({...Ne,name:Ne.name});fe&&(Te.success("Setlist creado correctamente"),r(ge=>[...ge,{...fe,songs:[]}]))}_e()},le=be=>{var ce;m(be),k({name:be.name,description:be.description||"",estimated_duration_minutes:((ce=be.estimated_duration_minutes)==null?void 0:ce.toString())||""}),h(!0)},de=be=>{L(be),_(!0)},Ae=async()=>{if(!S)return;await IB(S.id)?(Te.success("Setlist eliminado correctamente"),r(ce=>ce.filter(Ne=>Ne.id!==S.id)),(w==null?void 0:w.id)===S.id&&g(null)):Te.error("No se pudo eliminar el setlist"),_(!1),L(null)},Ee=async(be,ce)=>{if(!w)return;const fe=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(rt=>rt.position)):0)+1,ge=await ng(be,ce,fe);if(ge){Te.success("Canción añadida al setlist");const rt=i.find(ot=>ot.id===ce);if(rt){const ot={...ge,position:fe,song:rt},it={...w,songs:[...w.songs||[],ot]};g(it),r(Fe=>Fe.map(st=>st.id===be?it:st))}}else console.error("No se pudo añadir la canción al setlist")},Z=async(be,ce)=>{var fe;if(await OB(be,ce)){Te.success("Canción eliminada del setlist");const ge=w?{...w,songs:(fe=w.songs)==null?void 0:fe.filter(rt=>rt.song_id!==ce)}:null;ge&&(g(ge),r(rt=>rt.map(ot=>ot.id===ge.id?ge:ot)))}else Te.error("No se pudo eliminar la canción del setlist")},je=be=>{const{active:ce,over:Ne}=be;if(!Ne||ce.id===Ne.id||!w)return;const fe=U.findIndex(Ue=>Ue.id===ce.id),ge=U.findIndex(Ue=>Ue.id===Ne.id),ot=lw(U,fe,ge).map((Ue,Ct)=>({id:Ue.id,type:Ue.type,position:Ct+1})),it=ot.map(Ue=>{var ut;return{...(ut=w.songs)==null?void 0:ut.find(Gt=>Gt.id===Ue.id),position:Ue.position}}),Fe={...w,songs:it};g(Fe),r(Ue=>Ue.map(Ct=>Ct.id===Fe.id?Fe:Ct)),console.log("Reordering items:",ot);const st=ot.map(Ue=>({songId:Ue.id,position:Ue.position}));RB(w.id,st).then(Ue=>{Ue?console.log("Reorder successful"):(Te.error("No se pudo guardar el orden. Se revertirán los cambios."),P())})},_e=()=>{k(g_),m(null),h(!1)},Re=be=>{if(!i)return[];const ce=new Set((be.songs||[]).map(Ne=>Ne.song_id));return i.filter(Ne=>!ce.has(Ne.id))},Be=be=>{const ce=n.find(Ne=>Ne.id===be.id);g(ce||null)},We=(be,ce,Ne)=>{if(!w)return;const fe={...Ne,song:ce},ge={...w,medleys:(w.medleys||[]).map(rt=>rt.id===be?{...rt,songs:[...rt.songs||[],fe].sort((ot,it)=>ot.position-it.position)}:rt)};g(ge),r(rt=>rt.map(ot=>ot.id===ge.id?ge:ot))},xe=(be,ce)=>{if(!w)return;const Ne={...w,medleys:(w.medleys||[]).map(fe=>fe.id===be?{...fe,songs:(fe.songs||[]).filter(ge=>ge.song_id!==ce)}:fe)};g(Ne),r(fe=>fe.map(ge=>ge.id===Ne.id?Ne:ge))},ee=(be,ce)=>{if(!w)return;const Ne={...w,medleys:(w.medleys||[]).map(fe=>fe.id===be?{...fe,name:ce}:fe)};g(Ne),r(fe=>fe.map(ge=>ge.id===Ne.id?Ne:ge))},Qe=be=>{if(!w)return;const ce={...w,medleys:(w.medleys||[]).filter(Ne=>Ne.id!==be)};g(ce),r(Ne=>Ne.map(fe=>fe.id===ce.id?ce:fe))},Je=async be=>{if(!w)return;const Ne=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(ge=>ge.position)):0)+1;if(await ng(w.id,be.id,Ne)){Te.success("Medley creado y añadido al setlist"),await P();const ge=await by(e);if(ge){const rt=ge.find(ot=>ot.id===w.id);rt&&g(rt)}}else Te.error("Medley creado pero no se pudo añadir al setlist")},Ve=be=>{W(be),re(`${be.name} (copia)`),Y(!0)},Ze=async()=>{if(!se||!I.trim())return;l(!0),Y(!1),await zB(se.id,I.trim())?(Te.success("Setlist duplicado correctamente"),await P()):Te.error("No se pudo duplicar el setlist"),W(null),re(""),l(!1)};return a?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-8 w-40 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx(WN,{count:4})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_t,{onClick:()=>h(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"}),d.jsxs(_t,{onClick:()=>ye(!0),variant:"secondary",className:`${pe?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,title:pe?"Importar playlist desde Spotify":"Conecta con Spotify para importar playlists",children:[d.jsx(aU,{className:"mr-2"}),"Importar de Spotify",!pe&&d.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Conectar)"})]})]})]}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&d.jsxs("form",{onSubmit:ne,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Xn,{label:"Nombre *",value:N.name,onChange:be=>k({...N,name:be.target.value}),required:!0}),d.jsx(Xn,{label:"Duración estimada (minutos)",type:"number",value:N.estimated_duration_minutes,onChange:be=>k({...N,estimated_duration_minutes:be.target.value}),min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),d.jsx("textarea",{value:N.description,onChange:be=>k({...N,description:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripción breve del setlist..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_t,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),d.jsx(_t,{type:"button",variant:"secondary",onClick:_e,children:"Cancelar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 lg:hidden",children:"Setlists"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-3",children:n.map(be=>{var ce,Ne;return d.jsxs("div",{className:`p-3 sm:p-4 rounded-lg cursor-pointer transition-all ${(w==null?void 0:w.id)===be.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>Be(be),children:[d.jsx("h4",{className:`font-bold text-sm sm:text-base truncate ${(w==null?void 0:w.id)===be.id?"text-white":"text-gray-800"}`,children:be.name}),d.jsxs("p",{className:`text-xs sm:text-sm ${(w==null?void 0:w.id)===be.id?"text-blue-100":"text-gray-500"}`,children:[(((ce=be.songs)==null?void 0:ce.length)||0)+(((Ne=be.medleys)==null?void 0:Ne.length)||0)," items"]})]},be.id)})}),n.length===0&&!a&&d.jsx("p",{className:"text-center text-gray-500 py-4 text-sm",children:"No hay setlists. ¡Crea el primero!"})]}),d.jsx("div",{className:"lg:col-span-2",children:w?d.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4 gap-3 sm:gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 truncate",children:w.name}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:w.description})]}),t&&d.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 w-full sm:w-auto lg:flex-nowrap",children:[d.jsxs(_t,{variant:"primary",onClick:()=>K(!0),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(_y,{className:"mr-1"}),d.jsx("span",{className:"hidden sm:inline",children:"Crear Medley"}),d.jsx("span",{className:"sm:hidden",children:"Medley"})]}),d.jsxs(_t,{variant:"secondary",onClick:()=>le(w),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(F6,{className:"mr-2"})," Editar"]}),d.jsxs(_t,{variant:"secondary",onClick:()=>Ve(w),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(cU,{className:"mr-2"})," Duplicar"]}),d.jsx(_t,{variant:"danger",onClick:()=>de(w),size:"sm",className:"w-full sm:w-auto",children:"Eliminar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6 xl:gap-8",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Canciones en el Setlist"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Lz,{sensors:Le,collisionDetection:TU,onDragEnd:je,children:d.jsx(qz,{items:U.map(be=>be.id),strategy:Uz,children:U.map((be,ce)=>d.jsx(tq,{item:be,canManageSetlists:t,songs:i,onRemoveSong:Z,onSongAddedToMedley:We,onSongRemovedFromMedley:xe,onMedleyRenamed:ee,onMedleyDeleted:Qe},`${be.type}-${be.id}-${ce}`))})}),U.length===0&&d.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist está vacío."})]})]}),t&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Añadir Canción al Setlist"}),d.jsx(Xn,{placeholder:"Buscar canción...",value:oe,onChange:be=>R(be.target.value),className:"mb-2"}),d.jsxs("div",{className:"space-y-2 max-h-48 sm:max-h-60 lg:max-h-80 overflow-y-auto pr-1 sm:pr-2",children:[Re(w).filter(be=>{var ce;return be.title.toLowerCase().includes(oe.toLowerCase())||((ce=be.artist)==null?void 0:ce.toLowerCase().includes(oe.toLowerCase()))}).map(be=>d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded-md gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("p",{className:"font-medium text-xs sm:text-sm truncate",children:[be.type==="medley"&&d.jsx("span",{className:"text-blue-600 mr-1",children:"🎵"}),be.title]}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:be.type==="medley"?"Medley":be.artist})]}),d.jsx(_t,{onClick:()=>Ee(w.id,be.id),size:"sm",className:"w-full sm:w-auto",children:d.jsx(_y,{})})]},be.id)),Re(w).length===0&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya están en este setlist."})]})]})]})]}):d.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 bg-white rounded-lg",children:d.jsx("p",{className:"text-sm sm:text-base",children:"Selecciona un setlist para ver los detalles"})})})]}),C&&S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el setlist "',S.name,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>{_(!1),L(null)},fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Cancelar"}),d.jsx(_t,{variant:"danger",onClick:Ae,fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Eliminar"})]})]})}),O&&se&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),d.jsx(Xn,{value:I,onChange:be=>re(be.target.value),className:"mb-6",autoFocus:!0}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>{Y(!1),W(null),re("")},children:"Cancelar"}),d.jsx(_t,{variant:"primary",onClick:Ze,disabled:!I.trim(),children:"Duplicar"})]})]})}),z&&w&&d.jsx(Qz,{isOpen:z,onClose:()=>K(!1),groupId:e,availableSongs:Re(w),onMedleyCreated:be=>{Je(be),K(!1)}}),J&&d.jsx(eq,{isOpen:J,onClose:()=>ye(!1),groupId:e,onSetlistCreated:()=>{P(),ye(!1)}})]})}function rq({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0,defaultTab:r="songs"}){const[i,s]=j.useState(r);return j.useEffect(()=>{s(r)},[r]),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[d.jsx("button",{onClick:()=>s("songs"),className:`${i==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),d.jsx("button",{onClick:()=>s("setlists"),className:`${i==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),d.jsxs("div",{className:"p-6",children:[i==="songs"&&d.jsx(QB,{groupId:e,canManageSongs:t}),i==="setlists"&&d.jsx(nq,{groupId:e,canManageSetlists:n})]})]})})}function Hv({defaultTab:e}){const{id:t}=RS(),n=la(),r=oa(),[i,s]=j.useState(null),[a,l]=j.useState([]),[c,h]=j.useState([]),[p,m]=j.useState(!1),[w,g]=j.useState(!1),[N,k]=j.useState(!1),[C,_]=j.useState(null),[S,L]=j.useState(null),[O,Y]=j.useState(!0),[se,W]=j.useState(!1),[I,re]=j.useState(null),[oe,R]=j.useState(!1),[z,K]=j.useState([]),{user:J}=Zr(),[ye,pe]=j.useState(!1),[X,F]=j.useState(!1),[U,ae]=j.useState(""),Le=()=>e||(r.pathname.endsWith("/songs")?"songs":r.pathname.endsWith("/setlists")?"setlists":"overview"),[P,V]=j.useState(Le()),ne=xe=>{switch(V(xe),xe){case"songs":n(`/group/${t}/songs`);break;case"setlists":n(`/group/${t}/setlists`);break;case"overview":default:n(`/group/${t}`);break}};j.useEffect(()=>{V(Le())},[r.pathname,r.search,e]),j.useEffect(()=>{t&&de()},[t,J]),j.useEffect(()=>{t&&J&&le()},[t,J,a]),hp({table:"group_members",filter:`group_id=eq.${t}`,onInsert:()=>{de(),Te.success("Nuevo miembro añadido en tiempo real")},onUpdate:()=>{de()},onDelete:()=>{de(),Te.success("Miembro eliminado en tiempo real")},enabled:!!t});const le=async()=>{if(J)try{const xe=await qn(()=>et.from("users").select("role").eq("id",J.id).single(),"Error checking permissions");xe&&(re(xe.role),W(xe.role==="admin"));const ee=a.find(Qe=>Qe.user_id===J.id);pe(!!ee),R((ee==null?void 0:ee.role_in_group)==="principal"||!1),(ee==null?void 0:ee.role_in_group)==="principal"&&W(!0)}catch(xe){console.error("Error checking permissions:",xe)}},de=async()=>{try{const xe=await qn(()=>et.from("groups").select("*").eq("id",t).single(),"Error loading group");xe&&s(xe);const ee=await qn(()=>et.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",t).order("member_type",{ascending:!0}).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(ee){const Je=ee.map(Ve=>({...Ve,instruments:(Ve.group_member_roles||[]).filter(Ze=>Ze==null?void 0:Ze.role).map(Ze=>({id:Ze.role.id,name:Ze.role.name}))}));l(Je)}const Qe=await qn(()=>et.from("roles").select("*").eq("group_id",t).order("name"),"Error loading roles");Qe&&h(Qe)}catch(xe){console.error("Error fetching group data:",xe)}finally{Y(!1)}},Ae=async xe=>{if(!(!J||!t))try{await qn(()=>et.rpc("link_group_member",{p_member_id:xe,p_user_id:J.id,p_group_id:t}),"Error linking member"),Te.success("¡Te has vinculado correctamente!"),await de(),await le()}catch(ee){console.error("Error linking member:",ee)}},Ee=xe=>{_(xe),g(!0)},Z=xe=>{L(xe),k(!0)},je=async()=>{if(S)try{await qn(()=>et.from("group_members").delete().eq("id",S.id),"Error deleting member"),Te.success("Miembro eliminado correctamente"),k(!1),L(null),de()}catch(xe){console.error("Error deleting member:",xe)}},_e=a.filter(xe=>xe.role_in_group==="principal"),Re=a.filter(xe=>xe.role_in_group==="sustituto"),Be=(xe,ee)=>d.jsxs("div",{children:[d.jsx("div",{className:"bg-gray-50 px-3 py-2",children:d.jsx("h3",{className:"text-sm font-medium text-gray-700",children:ee})}),d.jsx("div",{className:"divide-y",children:xe.map(Qe=>d.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base",children:Qe.name}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Qe.member_type==="local"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:Qe.member_type==="local"?"🎭 Local":Qe.member_type==="registered"?"👤 Registrado":"👤 Miembro"}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Qe.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:Qe.role_in_group==="principal"?"Principal":"Sustituto"}),(!Qe.member_type||Qe.member_type==="registered")&&!Qe.user_id&&d.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),(!Qe.member_type||Qe.member_type==="registered")&&Qe.email&&d.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["📧 ",Qe.email]}),Qe.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Qe.instruments.map((Je,Ve)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),Je.name]},`${Qe.id}-${Je.id}-${Ve}`))}),Qe.user_id===(J==null?void 0:J.id)&&d.jsx("div",{className:"mt-2 flex items-center",children:d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:Qe.sync_calendar,onChange:async()=>{try{await qn(()=>et.from("group_members").update({sync_calendar:!Qe.sync_calendar}).eq("id",Qe.id),"Error actualizando preferencias de calendario"),Te.success("Preferencias de calendario actualizadas"),de()}catch(Je){console.error("Error updating calendar preferences:",Je)}},className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),Qe.user_id===(J==null?void 0:J.id)&&Qe.sync_calendar&&d.jsxs("button",{onClick:()=>We(Qe.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[d.jsx(q0,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripción al calendario"]})]}),d.jsxs("div",{className:"flex items-center gap-2 ml-2 sm:ml-4",children:[(I==="admin"||Qe.user_id===(J==null?void 0:J.id))&&d.jsx("button",{onClick:()=>Ee(Qe),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:d.jsx(wN,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(I==="admin"||oe)&&d.jsx("button",{onClick:()=>Z(Qe),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:d.jsx(P5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),!Qe.user_id&&!ye&&d.jsxs(_t,{onClick:()=>Ae(Qe.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[d.jsx(l3,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},Qe.id))})]}),We=async xe=>{try{const{data:ee,error:Qe}=await et.rpc("get_group_calendar",{p_group_id:i==null?void 0:i.id,p_member_id:xe});if(Qe)throw Qe;if(!ee)throw new Error("No se pudo generar el calendario");const Je=new Blob([ee],{type:"text/calendar"}),Ve=new File([Je],"calendar.ics",{type:"text/calendar"}),{error:Ze}=await et.storage.from("calendars").upload(`${i==null?void 0:i.id}/${xe}/calendar.ics`,Ve,{cacheControl:"0",upsert:!0});if(Ze)throw Ze;const{data:{publicUrl:be}}=await et.storage.from("calendars").getPublicUrl(`${i==null?void 0:i.id}/${xe}/calendar.ics`);if(be)ae(be),F(!0);else throw new Error("No se pudo generar el enlace público")}catch(ee){console.error("Error generating calendar subscription URL:",ee),ee.message==="new row violates row-level security policy"?Te.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):Te.error("Error al generar el enlace del calendario")}};return O?d.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded mb-2"}),d.jsx("div",{className:"h-4 w-64 bg-gray-200 animate-pulse rounded"})]}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded"})}),d.jsx(JO,{count:6})]})}),d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded"})}),d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-full bg-gray-200 animate-pulse rounded"})]})})]})]})]}):i?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:i.name}),d.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Gestiona miembros y disponibilidad"})]}),(se||oe)&&(!ye||I==="admin"||oe)&&d.jsxs(_t,{onClick:()=>m(!0),className:"flex items-center justify-center space-x-2 w-full sm:w-auto",size:"sm",children:[d.jsx(Ig,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"hidden sm:inline",children:I==="admin"||oe?"Añadir Miembro":"Unirse al Grupo"}),d.jsx("span",{className:"sm:hidden",children:"Añadir"})]})]}),d.jsx("div",{className:"border-b border-gray-200 mb-6 overflow-x-auto",children:d.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[d.jsxs("button",{onClick:()=>ne("overview"),className:`${P==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(q0,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Vista General"}),d.jsx("span",{className:"sm:hidden",children:"Vista"})]}),d.jsxs("button",{onClick:()=>ne("songs"),className:`${P==="songs"||P==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(JD,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Canciones y Setlists"}),d.jsx("span",{className:"sm:hidden",children:"Música"})]})]})}),P==="overview"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-3 sm:p-4 border-b",children:d.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Miembros del Grupo"})}),a.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(l3,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsxs("p",{className:"text-gray-500",children:["No hay miembros aún. ",se?'¡Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):d.jsxs("div",{className:"divide-y divide-gray-200",children:[_e.length>0&&Be(_e,"Miembros Principales"),Re.length>0&&Be(Re,"Miembros Sustitutos")]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-3 sm:p-4 border-b",children:d.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Disponibilidad"})}),d.jsx("div",{className:"p-2 sm:p-4",children:d.jsx(AB,{members:a,onAvailableDatesChange:K,groupName:i.name})})]})]}),i&&t&&d.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:d.jsx(VB,{groupId:t,canManageEvents:I==="admin"||oe,availableDates:z,members:a})})]}),(P==="songs"||P==="setlists")&&i&&t&&d.jsx(rq,{groupId:t,canManageSongs:I==="admin"||oe,canManageSetlists:I==="admin"||oe,defaultTab:P==="setlists"?"setlists":"songs"}),i&&(se||oe)&&(!ye||I==="admin"||oe)&&d.jsx(QO,{isOpen:p,onClose:()=>m(!1),groupId:i.id,instruments:c,onMemberAdded:de,isEmptyGroup:a.length===0,userRole:I}),C&&d.jsx(ZO,{isOpen:w,onClose:()=>{g(!1),_(null)},member:C,instruments:c,onMemberUpdated:de,userRole:I}),d.jsx(GB,{isOpen:N,onClose:()=>{k(!1),L(null)},onConfirm:je,title:"Eliminar Miembro",message:`¿Estás seguro de que quieres eliminar a ${S==null?void 0:S.name}? Esta acción no se puede deshacer.`}),d.jsx(YB,{isOpen:X,onClose:()=>F(!1),calendarUrl:U})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a él."})]})}function Hm({children:e}){const{user:t}=Zr(),n=oa();return t?d.jsx(d.Fragment,{children:e}):d.jsx(o7,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0})}function iq(){return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Política de Privacidad"}),d.jsxs("div",{className:"prose prose-indigo",children:[d.jsxs("p",{className:"mb-4",children:["Última actualización: ",new Date().toLocaleDateString()]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Información que Recopilamos"}),d.jsx("p",{children:"Band Manager recopila la siguiente información personal:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Dirección de correo electrónico"}),d.jsx("li",{children:"Nombre"}),d.jsx("li",{children:"Información de perfil de usuario"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),d.jsx("p",{children:"Nuestra aplicación requiere ciertos permisos para funcionar correctamente:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la información de tu banda y permitir la colaboración entre miembros."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicación) mejorando así el rendimiento y permitiendo el uso sin conexión."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Cámara (opcional):"})," Solo si decides subir fotos directamente desde la aplicación para tu perfil o contenido de la banda."]})]}),d.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicación. No compartimos ninguna información recopilada a través de estos permisos con terceros."}),d.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a través de la configuración de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicación."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cómo Utilizamos su Información"}),d.jsx("p",{children:"Utilizamos la información recopilada para:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),d.jsx("li",{children:"Gestionar su cuenta y membresía"}),d.jsx("li",{children:"Permitir la participación en funciones interactivas"}),d.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),d.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticación, que implementa estándares de seguridad de la industria para proteger su información personal."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),d.jsx("p",{children:"Usted tiene derecho a:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Acceder a sus datos personales"}),d.jsx("li",{children:"Corregir datos inexactos"}),d.jsx("li",{children:"Solicitar la eliminación de sus datos"}),d.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),d.jsxs("p",{children:["Si tiene preguntas sobre esta Política de Privacidad, puede contactarnos en:",d.jsx("br",{}),d.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function sq(){console.log("AcceptInvitation component mounted");const[e]=US(),t=e.get("token"),n=la(),{user:r}=Zr(),[i,s]=j.useState(!0),[a,l]=j.useState(null);j.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),Te.error("Token de invitación no válido"),n("/");return}(async()=>{try{if(!r){const g=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",g),n("/login",{state:{returnTo:g}});return}const{data:p,error:m}=await et.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:m}),m)throw m;if(!p||p.length===0){Te.error("Invitación no encontrada o ya procesada"),n("/");return}const w=p[0];if(console.log("Invitation data:",w),r.email!==w.email){Te.error("Esta invitación es para otro correo electrónico"),n("/");return}if(!e.get("group_member_id")){const g=new URLSearchParams(e);g.set("group_member_id",w.group_member_id),n(`${location.pathname}?${g.toString()}`,{replace:!0})}l({groupName:w.group_name,role:w.role_in_group}),s(!1)}catch(p){console.error("Error checking invitation:",p),Te.error(p.message||"Error al verificar la invitación"),n("/")}})()},[t,r,n,e]);const c=async h=>{try{s(!0);const{data:p,error:m}=await et.rpc("get_invitation_details",{p_token:t});if(m)throw m;if(!p||p.length===0)throw new Error("Invitación no encontrada");const{group_member_id:w}=p[0],{error:g}=await et.rpc("handle_group_invitation",{p_group_member_id:w,p_accept:h});if(g)throw g;Te.success(h?"Invitación aceptada":"Invitación rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),Te.error(p.message)}finally{s(!1)}};return i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),d.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitación..."})]})}):a?d.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitación a Grupo"}),d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",d.jsx("strong",{children:a.groupName})]}),d.jsxs("p",{className:"text-gray-600",children:["Rol: ",d.jsx("span",{className:"capitalize",children:a.role})]})]}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsx(_t,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),d.jsx(_t,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function aq(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(!1),a=async l=>{l.preventDefault(),s(!0),r("");const{error:c}=await et.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});s(!1),r(c?"Error: "+c.message:"¡Revisa tu correo para continuar el proceso!")};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"¿Olvidaste tu contraseña?"}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsx(Xn,{label:"Email",type:"email",value:e,onChange:l=>t(l.target.value),required:!0,placeholder:"tu@email.com"}),d.jsx(_t,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Cc,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function oq(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(!1),[a,l]=j.useState(!1),[c,h]=j.useState(!1),p=la(),m=oa();j.useEffect(()=>{(async()=>{var N;try{const{data:k}=await et.auth.getSession(),C=new URLSearchParams(m.search),_=C.get("token"),S=C.get("type"),L=(N=m.state)==null?void 0:N.resetCode,O=localStorage.getItem("recovery_token");if(_&&S==="recovery")h(!0);else if(L){h(!0);try{await et.auth.verifyOtp({token_hash:L,type:"recovery"})}catch{}}else if(O){h(!0),localStorage.removeItem("recovery_token");try{await et.auth.verifyOtp({token_hash:O,type:"recovery"})}catch{}}else k.session?h(!0):a||p("/login")}catch(k){console.error("Error al verificar autenticación:",k),p("/login")}})()},[m,p,a]);const w=async g=>{g.preventDefault(),s(!0),r("");try{const{error:N}=await et.auth.updateUser({password:e});if(N)throw N;l(!0),r("¡Contraseña actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(N){r("Error: "+N.message)}finally{s(!1)}};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contraseña"}),c?d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsx(Xn,{label:"Nueva contraseña",type:"password",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"••••••••"}),d.jsx(_t,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contraseña"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):d.jsxs("div",{className:"py-6 text-center",children:[d.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:d.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperación..."}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automáticamente, solicita un",d.jsx(Cc,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}const lq=()=>{const e=oa(),t=la(),[n,r]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(e.search),a=s.get("code"),l=s.get("state"),c=s.get("error");if(console.log("🎵 SpotifyCallback: Processing callback...",{hasCode:!!a,hasState:!!l,error:c}),c){console.error("❌ Spotify auth error:",c),Te.error(`Error de autenticación de Spotify: ${c}`),t("/");return}if(!a||!l){console.error("❌ Missing code or state parameters"),Te.error("Parámetros de autenticación faltantes"),t("/");return}if(await zn.handleAuthCallback(a,l)){console.log("✅ Spotify authentication successful");const p=await zn.getCurrentUser();Te.success(`¡Conectado a Spotify como ${p.display_name}!`),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"));const m=localStorage.getItem("spotify_return_url");m?(localStorage.removeItem("spotify_return_url"),window.location.href=m):t("/")}else console.error("❌ Spotify authentication failed"),Te.error("Error al conectar con Spotify. Inténtalo de nuevo."),t("/")}catch(s){console.error("❌ Error in Spotify callback:",s),s.message.includes("State mismatch")?(zn.clearAuthState(),Te.error("Error de autenticación de Spotify. Los parámetros han sido limpiados. Puedes intentar conectar de nuevo.")):Te.error(`Error al autenticar con Spotify: ${s.message}`),t("/")}finally{r(!1)}})()},[e.search,t]),n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Conectando con Spotify..."}),d.jsx("p",{className:"text-gray-600",children:"Por favor espera mientras procesamos tu autenticación"})]})}):null};function cq(){const{setUser:e,setSession:t}=Zr(),n=oa();return j.useEffect(()=>{const r=new URLSearchParams(n.search),i=r.get("token"),s=r.get("type"),a=n.hash;i&&s==="recovery"&&n.pathname!=="/reset-password"?window.location.replace(`/reset-password?token=${i}&type=${s}`):a.includes("access_token=")&&a.includes("type=recovery")&&n.pathname!=="/reset-password"&&window.location.replace("/reset-password"+a)},[n.search,n.pathname]),j.useEffect(()=>{et.auth.getSession().then(({data:{session:i}})=>{t(i),e((i==null?void 0:i.user)??null)});const{data:{subscription:r}}=et.auth.onAuthStateChange((i,s)=>{t(s),e((s==null?void 0:s.user)??null)});return()=>r.unsubscribe()},[e,t]),d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(eI,{}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsxs(c7,{children:[d.jsx(Zs,{path:"/login",element:d.jsx(tI,{})}),d.jsx(Zs,{path:"/register",element:d.jsx(nI,{})}),d.jsx(Zs,{path:"/forgot-password",element:d.jsx(aq,{})}),d.jsx(Zs,{path:"/reset-password",element:d.jsx(oq,{})}),d.jsx(Zs,{path:"/accept-invitation",element:d.jsx(sq,{})}),d.jsx(Zs,{path:"/",element:d.jsx(Hm,{children:d.jsx(XO,{})})}),d.jsx(Zs,{path:"/group/:id",element:d.jsx(Hm,{children:d.jsx(Hv,{})})}),d.jsx(Zs,{path:"/group/:id/songs",element:d.jsx(Hm,{children:d.jsx(Hv,{defaultTab:"songs"})})}),d.jsx(Zs,{path:"/group/:id/setlists",element:d.jsx(Hm,{children:d.jsx(Hv,{defaultTab:"setlists"})})}),d.jsx(Zs,{path:"/privacy-policy",element:d.jsx(iq,{})}),d.jsx(Zs,{path:"/spotify/callback",element:d.jsx(lq,{})})]})}),d.jsx(uT,{position:"top-right"})]})}function uq(){return d.jsx(v7,{children:d.jsx(cq,{})})}LS(document.getElementById("root")).render(d.jsx(j.StrictMode,{children:d.jsx(uq,{})}));export{An as _,ci as c,v_ as g};
