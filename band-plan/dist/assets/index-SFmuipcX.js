function VA(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function YA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var w3={exports:{}},lg={},x3={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=Symbol.for("react.element"),KA=Symbol.for("react.portal"),JA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),ZA=Symbol.for("react.provider"),e8=Symbol.for("react.context"),t8=Symbol.for("react.forward_ref"),n8=Symbol.for("react.suspense"),r8=Symbol.for("react.memo"),i8=Symbol.for("react.lazy"),vx=Symbol.iterator;function s8(e){return e===null||typeof e!="object"?null:(e=vx&&e[vx]||e["@@iterator"],typeof e=="function"?e:null)}var b3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_3=Object.assign,S3={};function Nf(e,t,n){this.props=e,this.context=t,this.refs=S3,this.updater=n||b3}Nf.prototype.isReactComponent={};Nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N3(){}N3.prototype=Nf.prototype;function Cy(e,t,n){this.props=e,this.context=t,this.refs=S3,this.updater=n||b3}var Ay=Cy.prototype=new N3;Ay.constructor=Cy;_3(Ay,Nf.prototype);Ay.isPureReactComponent=!0;var yx=Array.isArray,k3=Object.prototype.hasOwnProperty,Ly={current:null},E3={key:!0,ref:!0,__self:!0,__source:!0};function j3(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)k3.call(t,r)&&!E3.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:yp,type:e,key:s,ref:a,props:i,_owner:Ly.current}}function a8(e,t){return{$$typeof:yp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Py(e){return typeof e=="object"&&e!==null&&e.$$typeof===yp}function o8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wx=/\/+/g;function U1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?o8(""+e.key):t.toString(36)}function Vm(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case yp:case KA:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+U1(a,0):r,yx(i)?(n="",e!=null&&(n=e.replace(wx,"$&/")+"/"),Vm(i,t,n,"",function(f){return f})):i!=null&&(Py(i)&&(i=a8(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(wx,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",yx(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+U1(s,l);a+=Vm(s,t,n,c,i)}else if(c=s8(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+U1(s,l++),a+=Vm(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function gm(e,t,n){if(e==null)return e;var r=[],i=0;return Vm(e,r,"","",function(s){return t.call(n,s,i++)}),r}function l8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $i={current:null},Ym={transition:null},c8={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Ym,ReactCurrentOwner:Ly};function C3(){throw Error("act(...) is not supported in production builds of React.")}Xt.Children={map:gm,forEach:function(e,t,n){gm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return gm(e,function(){t++}),t},toArray:function(e){return gm(e,function(t){return t})||[]},only:function(e){if(!Py(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xt.Component=Nf;Xt.Fragment=JA;Xt.Profiler=QA;Xt.PureComponent=Cy;Xt.StrictMode=XA;Xt.Suspense=n8;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c8;Xt.act=C3;Xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_3({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Ly.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k3.call(t,c)&&!E3.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:yp,type:e.type,key:i,ref:s,props:r,_owner:a}};Xt.createContext=function(e){return e={$$typeof:e8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ZA,_context:e},e.Consumer=e};Xt.createElement=j3;Xt.createFactory=function(e){var t=j3.bind(null,e);return t.type=e,t};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(e){return{$$typeof:t8,render:e}};Xt.isValidElement=Py;Xt.lazy=function(e){return{$$typeof:i8,_payload:{_status:-1,_result:e},_init:l8}};Xt.memo=function(e,t){return{$$typeof:r8,type:e,compare:t===void 0?null:t}};Xt.startTransition=function(e){var t=Ym.transition;Ym.transition={};try{e()}finally{Ym.transition=t}};Xt.unstable_act=C3;Xt.useCallback=function(e,t){return $i.current.useCallback(e,t)};Xt.useContext=function(e){return $i.current.useContext(e)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(e){return $i.current.useDeferredValue(e)};Xt.useEffect=function(e,t){return $i.current.useEffect(e,t)};Xt.useId=function(){return $i.current.useId()};Xt.useImperativeHandle=function(e,t,n){return $i.current.useImperativeHandle(e,t,n)};Xt.useInsertionEffect=function(e,t){return $i.current.useInsertionEffect(e,t)};Xt.useLayoutEffect=function(e,t){return $i.current.useLayoutEffect(e,t)};Xt.useMemo=function(e,t){return $i.current.useMemo(e,t)};Xt.useReducer=function(e,t,n){return $i.current.useReducer(e,t,n)};Xt.useRef=function(e){return $i.current.useRef(e)};Xt.useState=function(e){return $i.current.useState(e)};Xt.useSyncExternalStore=function(e,t,n){return $i.current.useSyncExternalStore(e,t,n)};Xt.useTransition=function(){return $i.current.useTransition()};Xt.version="18.3.1";x3.exports=Xt;var j=x3.exports;const pt=y3(j),Hv=VA({__proto__:null,default:pt},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u8=j,d8=Symbol.for("react.element"),f8=Symbol.for("react.fragment"),h8=Object.prototype.hasOwnProperty,p8=u8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m8={key:!0,ref:!0,__self:!0,__source:!0};function A3(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)h8.call(t,r)&&!m8.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:d8,type:e,key:s,ref:a,props:i,_owner:p8.current}}lg.Fragment=f8;lg.jsx=A3;lg.jsxs=A3;w3.exports=lg;var d=w3.exports,L3={exports:{}},Is={},P3={exports:{}},T3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,q){var oe=$.length;$.push(q);e:for(;0<oe;){var Le=oe-1>>>1,T=$[Le];if(0<i(T,q))$[Le]=q,$[oe]=T,oe=Le;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],oe=$.pop();if(oe!==q){$[0]=oe;e:for(var Le=0,T=$.length,K=T>>>1;Le<K;){var se=2*(Le+1)-1,ue=$[se],he=se+1,je=$[he];if(0>i(ue,oe))he<T&&0>i(je,ue)?($[Le]=je,$[he]=oe,Le=he):($[Le]=ue,$[se]=oe,Le=se);else if(he<T&&0>i(je,oe))$[Le]=je,$[he]=oe,Le=he;else break e}}return q}function i($,q){var oe=$.sortIndex-q.sortIndex;return oe!==0?oe:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,g=null,w=3,m=!1,S=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L($){for(var q=n(f);q!==null;){if(q.callback===null)r(f);else if(q.startTime<=$)r(f),q.sortIndex=q.expirationTime,t(c,q);else break;q=n(f)}}function R($){if(k=!1,L($),!S)if(n(c)!==null)S=!0,ge(J);else{var q=n(f);q!==null&&Q(R,q.startTime-$)}}function J($,q){S=!1,k&&(k=!1,_(I),I=-1),m=!0;var oe=w;try{for(L(q),g=n(c);g!==null&&(!(g.expirationTime>q)||$&&!P());){var Le=g.callback;if(typeof Le=="function"){g.callback=null,w=g.priorityLevel;var T=Le(g.expirationTime<=q);q=e.unstable_now(),typeof T=="function"?g.callback=T:g===n(c)&&r(c),L(q)}else r(c);g=n(c)}if(g!==null)var K=!0;else{var se=n(f);se!==null&&Q(R,se.startTime-q),K=!1}return K}finally{g=null,w=oe,m=!1}}var ee=!1,W=null,I=-1,Z=5,re=-1;function P(){return!(e.unstable_now()-re<Z)}function F(){if(W!==null){var $=e.unstable_now();re=$;var q=!0;try{q=W(!0,$)}finally{q?V():(ee=!1,W=null)}}else ee=!1}var V;if(typeof N=="function")V=function(){N(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,pe=Y.port2;Y.port1.onmessage=F,V=function(){pe.postMessage(null)}}else V=function(){C(F,0)};function ge($){W=$,ee||(ee=!0,V())}function Q($,q){I=C(function(){$(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){S||m||(S=!0,ge(J))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(w){case 1:case 2:case 3:var q=3;break;default:q=w}var oe=w;w=q;try{return $()}finally{w=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var oe=w;w=$;try{return q()}finally{w=oe}},e.unstable_scheduleCallback=function($,q,oe){var Le=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Le+oe:Le):oe=Le,$){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=oe+T,$={id:p++,callback:q,priorityLevel:$,startTime:oe,expirationTime:T,sortIndex:-1},oe>Le?($.sortIndex=oe,t(f,$),n(c)===null&&$===n(f)&&(k?(_(I),I=-1):k=!0,Q(R,oe-Le))):($.sortIndex=T,t(c,$),S||m||(S=!0,ge(J))),$},e.unstable_shouldYield=P,e.unstable_wrapCallback=function($){var q=w;return function(){var oe=w;w=q;try{return $.apply(this,arguments)}finally{w=oe}}}})(T3);P3.exports=T3;var g8=P3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v8=j,Ms=g8;function it(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M3=new Set,Gh={};function Uu(e,t){pf(e,t),pf(e+"Capture",t)}function pf(e,t){for(Gh[e]=t,e=0;e<t.length;e++)M3.add(t[e])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gv=Object.prototype.hasOwnProperty,y8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xx={},bx={};function w8(e){return Gv.call(bx,e)?!0:Gv.call(xx,e)?!1:y8.test(e)?bx[e]=!0:(xx[e]=!0,!1)}function x8(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b8(e,t,n,r){if(t===null||typeof t>"u"||x8(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bi(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ai[e]=new Bi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ai[t]=new Bi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ai[e]=new Bi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ai[e]=new Bi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ai[e]=new Bi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ai[e]=new Bi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ai[e]=new Bi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ai[e]=new Bi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ai[e]=new Bi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ty=/[\-:]([a-z])/g;function My(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ty,My);ai[t]=new Bi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ty,My);ai[t]=new Bi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ty,My);ai[t]=new Bi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ai[e]=new Bi(e,1,!1,e.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ai[e]=new Bi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Iy(e,t,n,r){var i=ai.hasOwnProperty(t)?ai[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b8(t,n,i,r)&&(n=null),r||i===null?w8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var al=v8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vm=Symbol.for("react.element"),Bd=Symbol.for("react.portal"),Ud=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Vv=Symbol.for("react.profiler"),I3=Symbol.for("react.provider"),D3=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Yv=Symbol.for("react.suspense"),Kv=Symbol.for("react.suspense_list"),Ry=Symbol.for("react.memo"),rc=Symbol.for("react.lazy"),O3=Symbol.for("react.offscreen"),_x=Symbol.iterator;function lh(e){return e===null||typeof e!="object"?null:(e=_x&&e[_x]||e["@@iterator"],typeof e=="function"?e:null)}var cr=Object.assign,z1;function Sh(e){if(z1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z1=t&&t[1]||""}return`
`+z1+e}var q1=!1;function W1(e,t){if(!e||q1)return"";q1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{q1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Sh(e):""}function _8(e){switch(e.tag){case 5:return Sh(e.type);case 16:return Sh("Lazy");case 13:return Sh("Suspense");case 19:return Sh("SuspenseList");case 0:case 2:case 15:return e=W1(e.type,!1),e;case 11:return e=W1(e.type.render,!1),e;case 1:return e=W1(e.type,!0),e;default:return""}}function Jv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ud:return"Fragment";case Bd:return"Portal";case Vv:return"Profiler";case Dy:return"StrictMode";case Yv:return"Suspense";case Kv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D3:return(e.displayName||"Context")+".Consumer";case I3:return(e._context.displayName||"Context")+".Provider";case Oy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ry:return t=e.displayName||null,t!==null?t:Jv(e.type)||"Memo";case rc:t=e._payload,e=e._init;try{return Jv(e(t))}catch{}}return null}function S8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jv(t);case 8:return t===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function R3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N8(e){var t=R3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ym(e){e._valueTracker||(e._valueTracker=N8(e))}function F3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=R3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function g0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xv(e,t){var n=t.checked;return cr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Sx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=jc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $3(e,t){t=t.checked,t!=null&&Iy(e,"checked",t,!1)}function Qv(e,t){$3(e,t);var n=jc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zv(e,t.type,jc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zv(e,t,n){(t!=="number"||g0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Nh=Array.isArray;function ef(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function e2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(it(91));return cr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(it(92));if(Nh(n)){if(1<n.length)throw Error(it(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:jc(n)}}function B3(e,t){var n=jc(t.value),r=jc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ex(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function U3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?U3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wm,z3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wm=wm||document.createElement("div"),wm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ah={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k8=["Webkit","ms","Moz","O"];Object.keys(Ah).forEach(function(e){k8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ah[t]=Ah[e]})});function q3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ah.hasOwnProperty(e)&&Ah[e]?(""+t).trim():t+"px"}function W3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var E8=cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function n2(e,t){if(t){if(E8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(it(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(it(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(it(61))}if(t.style!=null&&typeof t.style!="object")throw Error(it(62))}}function r2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i2=null;function Fy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var s2=null,tf=null,nf=null;function jx(e){if(e=bp(e)){if(typeof s2!="function")throw Error(it(280));var t=e.stateNode;t&&(t=hg(t),s2(e.stateNode,e.type,t))}}function H3(e){tf?nf?nf.push(e):nf=[e]:tf=e}function G3(){if(tf){var e=tf,t=nf;if(nf=tf=null,jx(e),t)for(e=0;e<t.length;e++)jx(t[e])}}function V3(e,t){return e(t)}function Y3(){}var H1=!1;function K3(e,t,n){if(H1)return e(t,n);H1=!0;try{return V3(e,t,n)}finally{H1=!1,(tf!==null||nf!==null)&&(Y3(),G3())}}function Yh(e,t){var n=e.stateNode;if(n===null)return null;var r=hg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(it(231,t,typeof n));return n}var a2=!1;if(el)try{var ch={};Object.defineProperty(ch,"passive",{get:function(){a2=!0}}),window.addEventListener("test",ch,ch),window.removeEventListener("test",ch,ch)}catch{a2=!1}function j8(e,t,n,r,i,s,a,l,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Lh=!1,v0=null,y0=!1,o2=null,C8={onError:function(e){Lh=!0,v0=e}};function A8(e,t,n,r,i,s,a,l,c){Lh=!1,v0=null,j8.apply(C8,arguments)}function L8(e,t,n,r,i,s,a,l,c){if(A8.apply(this,arguments),Lh){if(Lh){var f=v0;Lh=!1,v0=null}else throw Error(it(198));y0||(y0=!0,o2=f)}}function zu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function J3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cx(e){if(zu(e)!==e)throw Error(it(188))}function P8(e){var t=e.alternate;if(!t){if(t=zu(e),t===null)throw Error(it(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cx(i),e;if(s===r)return Cx(i),t;s=s.sibling}throw Error(it(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(it(189))}}if(n.alternate!==r)throw Error(it(190))}if(n.tag!==3)throw Error(it(188));return n.stateNode.current===n?e:t}function X3(e){return e=P8(e),e!==null?Q3(e):null}function Q3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Q3(e);if(t!==null)return t;e=e.sibling}return null}var Z3=Ms.unstable_scheduleCallback,Ax=Ms.unstable_cancelCallback,T8=Ms.unstable_shouldYield,M8=Ms.unstable_requestPaint,br=Ms.unstable_now,I8=Ms.unstable_getCurrentPriorityLevel,$y=Ms.unstable_ImmediatePriority,e4=Ms.unstable_UserBlockingPriority,w0=Ms.unstable_NormalPriority,D8=Ms.unstable_LowPriority,t4=Ms.unstable_IdlePriority,cg=null,ho=null;function O8(e){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(cg,e,void 0,(e.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:$8,R8=Math.log,F8=Math.LN2;function $8(e){return e>>>=0,e===0?32:31-(R8(e)/F8|0)|0}var xm=64,bm=4194304;function kh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function x0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=kh(l):(s&=a,s!==0&&(r=kh(s)))}else a=n&~i,a!==0?r=kh(a):s!==0&&(r=kh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Pa(t),i=1<<n,r|=e[n],t&=~i;return r}function B8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U8(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Pa(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=B8(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function l2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n4(){var e=xm;return xm<<=1,!(xm&4194240)&&(xm=64),e}function G1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pa(t),e[t]=n}function z8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Pa(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function By(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Pa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kn=0;function r4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i4,Uy,s4,a4,o4,c2=!1,_m=[],vc=null,yc=null,wc=null,Kh=new Map,Jh=new Map,oc=[],q8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lx(e,t){switch(e){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":wc=null;break;case"pointerover":case"pointerout":Kh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(t.pointerId)}}function uh(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=bp(t),t!==null&&Uy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function W8(e,t,n,r,i){switch(t){case"focusin":return vc=uh(vc,e,t,n,r,i),!0;case"dragenter":return yc=uh(yc,e,t,n,r,i),!0;case"mouseover":return wc=uh(wc,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Kh.set(s,uh(Kh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Jh.set(s,uh(Jh.get(s)||null,e,t,n,r,i)),!0}return!1}function l4(e){var t=ku(e.target);if(t!==null){var n=zu(t);if(n!==null){if(t=n.tag,t===13){if(t=J3(n),t!==null){e.blockedOn=t,o4(e.priority,function(){s4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Km(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=u2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);i2=r,n.target.dispatchEvent(r),i2=null}else return t=bp(n),t!==null&&Uy(t),e.blockedOn=n,!1;t.shift()}return!0}function Px(e,t,n){Km(e)&&n.delete(t)}function H8(){c2=!1,vc!==null&&Km(vc)&&(vc=null),yc!==null&&Km(yc)&&(yc=null),wc!==null&&Km(wc)&&(wc=null),Kh.forEach(Px),Jh.forEach(Px)}function dh(e,t){e.blockedOn===t&&(e.blockedOn=null,c2||(c2=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,H8)))}function Xh(e){function t(i){return dh(i,e)}if(0<_m.length){dh(_m[0],e);for(var n=1;n<_m.length;n++){var r=_m[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vc!==null&&dh(vc,e),yc!==null&&dh(yc,e),wc!==null&&dh(wc,e),Kh.forEach(t),Jh.forEach(t),n=0;n<oc.length;n++)r=oc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<oc.length&&(n=oc[0],n.blockedOn===null);)l4(n),n.blockedOn===null&&oc.shift()}var rf=al.ReactCurrentBatchConfig,b0=!0;function G8(e,t,n,r){var i=kn,s=rf.transition;rf.transition=null;try{kn=1,zy(e,t,n,r)}finally{kn=i,rf.transition=s}}function V8(e,t,n,r){var i=kn,s=rf.transition;rf.transition=null;try{kn=4,zy(e,t,n,r)}finally{kn=i,rf.transition=s}}function zy(e,t,n,r){if(b0){var i=u2(e,t,n,r);if(i===null)nv(e,t,r,_0,n),Lx(e,r);else if(W8(i,e,t,n,r))r.stopPropagation();else if(Lx(e,r),t&4&&-1<q8.indexOf(e)){for(;i!==null;){var s=bp(i);if(s!==null&&i4(s),s=u2(e,t,n,r),s===null&&nv(e,t,r,_0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nv(e,t,r,null,n)}}var _0=null;function u2(e,t,n,r){if(_0=null,e=Fy(r),e=ku(e),e!==null)if(t=zu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=J3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _0=e,null}function c4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I8()){case $y:return 1;case e4:return 4;case w0:case D8:return 16;case t4:return 536870912;default:return 16}default:return 16}}var fc=null,qy=null,Jm=null;function u4(){if(Jm)return Jm;var e,t=qy,n=t.length,r,i="value"in fc?fc.value:fc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Jm=i.slice(e,1<r?1-r:void 0)}function Xm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sm(){return!0}function Tx(){return!1}function Ds(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sm:Tx,this.isPropagationStopped=Tx,this}return cr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sm)},persist:function(){},isPersistent:Sm}),t}var kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Ds(kf),xp=cr({},kf,{view:0,detail:0}),Y8=Ds(xp),V1,Y1,fh,ug=cr({},xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fh&&(fh&&e.type==="mousemove"?(V1=e.screenX-fh.screenX,Y1=e.screenY-fh.screenY):Y1=V1=0,fh=e),V1)},movementY:function(e){return"movementY"in e?e.movementY:Y1}}),Mx=Ds(ug),K8=cr({},ug,{dataTransfer:0}),J8=Ds(K8),X8=cr({},xp,{relatedTarget:0}),K1=Ds(X8),Q8=cr({},kf,{animationName:0,elapsedTime:0,pseudoElement:0}),Z8=Ds(Q8),eL=cr({},kf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tL=Ds(eL),nL=cr({},kf,{data:0}),Ix=Ds(nL),rL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sL[e])?!!t[e]:!1}function Hy(){return aL}var oL=cr({},xp,{key:function(e){if(e.key){var t=rL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(e){return e.type==="keypress"?Xm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lL=Ds(oL),cL=cr({},ug,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dx=Ds(cL),uL=cr({},xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),dL=Ds(uL),fL=cr({},kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),hL=Ds(fL),pL=cr({},ug,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mL=Ds(pL),gL=[9,13,27,32],Gy=el&&"CompositionEvent"in window,Ph=null;el&&"documentMode"in document&&(Ph=document.documentMode);var vL=el&&"TextEvent"in window&&!Ph,d4=el&&(!Gy||Ph&&8<Ph&&11>=Ph),Ox=" ",Rx=!1;function f4(e,t){switch(e){case"keyup":return gL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zd=!1;function yL(e,t){switch(e){case"compositionend":return h4(t);case"keypress":return t.which!==32?null:(Rx=!0,Ox);case"textInput":return e=t.data,e===Ox&&Rx?null:e;default:return null}}function wL(e,t){if(zd)return e==="compositionend"||!Gy&&f4(e,t)?(e=u4(),Jm=qy=fc=null,zd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d4&&t.locale!=="ko"?null:t.data;default:return null}}var xL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xL[e.type]:t==="textarea"}function p4(e,t,n,r){H3(r),t=S0(t,"onChange"),0<t.length&&(n=new Wy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Th=null,Qh=null;function bL(e){k4(e,0)}function dg(e){var t=Hd(e);if(F3(t))return e}function _L(e,t){if(e==="change")return t}var m4=!1;if(el){var J1;if(el){var X1="oninput"in document;if(!X1){var $x=document.createElement("div");$x.setAttribute("oninput","return;"),X1=typeof $x.oninput=="function"}J1=X1}else J1=!1;m4=J1&&(!document.documentMode||9<document.documentMode)}function Bx(){Th&&(Th.detachEvent("onpropertychange",g4),Qh=Th=null)}function g4(e){if(e.propertyName==="value"&&dg(Qh)){var t=[];p4(t,Qh,e,Fy(e)),K3(bL,t)}}function SL(e,t,n){e==="focusin"?(Bx(),Th=t,Qh=n,Th.attachEvent("onpropertychange",g4)):e==="focusout"&&Bx()}function NL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dg(Qh)}function kL(e,t){if(e==="click")return dg(t)}function EL(e,t){if(e==="input"||e==="change")return dg(t)}function jL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:jL;function Zh(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gv.call(t,i)||!Ia(e[i],t[i]))return!1}return!0}function Ux(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zx(e,t){var n=Ux(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ux(n)}}function v4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?v4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function y4(){for(var e=window,t=g0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=g0(e.document)}return t}function Vy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function CL(e){var t=y4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&v4(n.ownerDocument.documentElement,n)){if(r!==null&&Vy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=zx(n,s);var a=zx(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AL=el&&"documentMode"in document&&11>=document.documentMode,qd=null,d2=null,Mh=null,f2=!1;function qx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;f2||qd==null||qd!==g0(r)||(r=qd,"selectionStart"in r&&Vy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mh&&Zh(Mh,r)||(Mh=r,r=S0(d2,"onSelect"),0<r.length&&(t=new Wy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qd)))}function Nm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wd={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},Q1={},w4={};el&&(w4=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function fg(e){if(Q1[e])return Q1[e];if(!Wd[e])return e;var t=Wd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in w4)return Q1[e]=t[n];return e}var x4=fg("animationend"),b4=fg("animationiteration"),_4=fg("animationstart"),S4=fg("transitionend"),N4=new Map,Wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mc(e,t){N4.set(e,t),Uu(t,[e])}for(var Z1=0;Z1<Wx.length;Z1++){var ev=Wx[Z1],LL=ev.toLowerCase(),PL=ev[0].toUpperCase()+ev.slice(1);Mc(LL,"on"+PL)}Mc(x4,"onAnimationEnd");Mc(b4,"onAnimationIteration");Mc(_4,"onAnimationStart");Mc("dblclick","onDoubleClick");Mc("focusin","onFocus");Mc("focusout","onBlur");Mc(S4,"onTransitionEnd");pf("onMouseEnter",["mouseout","mouseover"]);pf("onMouseLeave",["mouseout","mouseover"]);pf("onPointerEnter",["pointerout","pointerover"]);pf("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eh));function Hx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,L8(r,t,void 0,e),e.currentTarget=null}function k4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Hx(i,l,f),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Hx(i,l,f),s=c}}}if(y0)throw e=o2,y0=!1,o2=null,e}function qn(e,t){var n=t[v2];n===void 0&&(n=t[v2]=new Set);var r=e+"__bubble";n.has(r)||(E4(t,e,2,!1),n.add(r))}function tv(e,t,n){var r=0;t&&(r|=4),E4(n,e,r,t)}var km="_reactListening"+Math.random().toString(36).slice(2);function ep(e){if(!e[km]){e[km]=!0,M3.forEach(function(n){n!=="selectionchange"&&(TL.has(n)||tv(n,!1,e),tv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[km]||(t[km]=!0,tv("selectionchange",!1,t))}}function E4(e,t,n,r){switch(c4(t)){case 1:var i=G8;break;case 4:i=V8;break;default:i=zy}n=i.bind(null,t,n,e),i=void 0,!a2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nv(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ku(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}K3(function(){var f=s,p=Fy(n),g=[];e:{var w=N4.get(e);if(w!==void 0){var m=Wy,S=e;switch(e){case"keypress":if(Xm(n)===0)break e;case"keydown":case"keyup":m=lL;break;case"focusin":S="focus",m=K1;break;case"focusout":S="blur",m=K1;break;case"beforeblur":case"afterblur":m=K1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Mx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=J8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=dL;break;case x4:case b4:case _4:m=Z8;break;case S4:m=hL;break;case"scroll":m=Y8;break;case"wheel":m=mL;break;case"copy":case"cut":case"paste":m=tL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dx}var k=(t&4)!==0,C=!k&&e==="scroll",_=k?w!==null?w+"Capture":null:w;k=[];for(var N=f,L;N!==null;){L=N;var R=L.stateNode;if(L.tag===5&&R!==null&&(L=R,_!==null&&(R=Yh(N,_),R!=null&&k.push(tp(N,R,L)))),C)break;N=N.return}0<k.length&&(w=new m(w,S,null,n,p),g.push({event:w,listeners:k}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",w&&n!==i2&&(S=n.relatedTarget||n.fromElement)&&(ku(S)||S[tl]))break e;if((m||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,m?(S=n.relatedTarget||n.toElement,m=f,S=S?ku(S):null,S!==null&&(C=zu(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(m=null,S=f),m!==S)){if(k=Mx,R="onMouseLeave",_="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(k=Dx,R="onPointerLeave",_="onPointerEnter",N="pointer"),C=m==null?w:Hd(m),L=S==null?w:Hd(S),w=new k(R,N+"leave",m,n,p),w.target=C,w.relatedTarget=L,R=null,ku(p)===f&&(k=new k(_,N+"enter",S,n,p),k.target=L,k.relatedTarget=C,R=k),C=R,m&&S)t:{for(k=m,_=S,N=0,L=k;L;L=Pd(L))N++;for(L=0,R=_;R;R=Pd(R))L++;for(;0<N-L;)k=Pd(k),N--;for(;0<L-N;)_=Pd(_),L--;for(;N--;){if(k===_||_!==null&&k===_.alternate)break t;k=Pd(k),_=Pd(_)}k=null}else k=null;m!==null&&Gx(g,w,m,k,!1),S!==null&&C!==null&&Gx(g,C,S,k,!0)}}e:{if(w=f?Hd(f):window,m=w.nodeName&&w.nodeName.toLowerCase(),m==="select"||m==="input"&&w.type==="file")var J=_L;else if(Fx(w))if(m4)J=EL;else{J=NL;var ee=SL}else(m=w.nodeName)&&m.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(J=kL);if(J&&(J=J(e,f))){p4(g,J,n,p);break e}ee&&ee(e,w,f),e==="focusout"&&(ee=w._wrapperState)&&ee.controlled&&w.type==="number"&&Zv(w,"number",w.value)}switch(ee=f?Hd(f):window,e){case"focusin":(Fx(ee)||ee.contentEditable==="true")&&(qd=ee,d2=f,Mh=null);break;case"focusout":Mh=d2=qd=null;break;case"mousedown":f2=!0;break;case"contextmenu":case"mouseup":case"dragend":f2=!1,qx(g,n,p);break;case"selectionchange":if(AL)break;case"keydown":case"keyup":qx(g,n,p)}var W;if(Gy)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else zd?f4(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(d4&&n.locale!=="ko"&&(zd||I!=="onCompositionStart"?I==="onCompositionEnd"&&zd&&(W=u4()):(fc=p,qy="value"in fc?fc.value:fc.textContent,zd=!0)),ee=S0(f,I),0<ee.length&&(I=new Ix(I,e,null,n,p),g.push({event:I,listeners:ee}),W?I.data=W:(W=h4(n),W!==null&&(I.data=W)))),(W=vL?yL(e,n):wL(e,n))&&(f=S0(f,"onBeforeInput"),0<f.length&&(p=new Ix("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:f}),p.data=W))}k4(g,t)})}function tp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function S0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yh(e,n),s!=null&&r.unshift(tp(e,s,i)),s=Yh(e,t),s!=null&&r.push(tp(e,s,i))),e=e.return}return r}function Pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gx(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=Yh(n,s),c!=null&&a.unshift(tp(n,c,l))):i||(c=Yh(n,s),c!=null&&a.push(tp(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ML=/\r\n?/g,IL=/\u0000|\uFFFD/g;function Vx(e){return(typeof e=="string"?e:""+e).replace(ML,`
`).replace(IL,"")}function Em(e,t,n){if(t=Vx(t),Vx(e)!==t&&n)throw Error(it(425))}function N0(){}var h2=null,p2=null;function m2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var g2=typeof setTimeout=="function"?setTimeout:void 0,DL=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,OL=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(e){return Yx.resolve(null).then(e).catch(RL)}:g2;function RL(e){setTimeout(function(){throw e})}function rv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Xh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xh(t)}function xc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ef=Math.random().toString(36).slice(2),oo="__reactFiber$"+Ef,np="__reactProps$"+Ef,tl="__reactContainer$"+Ef,v2="__reactEvents$"+Ef,FL="__reactListeners$"+Ef,$L="__reactHandles$"+Ef;function ku(e){var t=e[oo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tl]||n[oo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Kx(e);e!==null;){if(n=e[oo])return n;e=Kx(e)}return t}e=n,n=e.parentNode}return null}function bp(e){return e=e[oo]||e[tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(it(33))}function hg(e){return e[np]||null}var y2=[],Gd=-1;function Ic(e){return{current:e}}function Hn(e){0>Gd||(e.current=y2[Gd],y2[Gd]=null,Gd--)}function Bn(e,t){Gd++,y2[Gd]=e.current,e.current=t}var Cc={},Ni=Ic(Cc),os=Ic(!1),Du=Cc;function mf(e,t){var n=e.type.contextTypes;if(!n)return Cc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ls(e){return e=e.childContextTypes,e!=null}function k0(){Hn(os),Hn(Ni)}function Jx(e,t,n){if(Ni.current!==Cc)throw Error(it(168));Bn(Ni,t),Bn(os,n)}function j4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(it(108,S8(e)||"Unknown",i));return cr({},n,r)}function E0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cc,Du=Ni.current,Bn(Ni,e),Bn(os,os.current),!0}function Xx(e,t,n){var r=e.stateNode;if(!r)throw Error(it(169));n?(e=j4(e,t,Du),r.__reactInternalMemoizedMergedChildContext=e,Hn(os),Hn(Ni),Bn(Ni,e)):Hn(os),Bn(os,n)}var Yo=null,pg=!1,iv=!1;function C4(e){Yo===null?Yo=[e]:Yo.push(e)}function BL(e){pg=!0,C4(e)}function Dc(){if(!iv&&Yo!==null){iv=!0;var e=0,t=kn;try{var n=Yo;for(kn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yo=null,pg=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(e+1)),Z3($y,Dc),i}finally{kn=t,iv=!1}}return null}var Vd=[],Yd=0,j0=null,C0=0,Qs=[],Zs=0,Ou=null,Jo=1,Xo="";function gu(e,t){Vd[Yd++]=C0,Vd[Yd++]=j0,j0=e,C0=t}function A4(e,t,n){Qs[Zs++]=Jo,Qs[Zs++]=Xo,Qs[Zs++]=Ou,Ou=e;var r=Jo;e=Xo;var i=32-Pa(r)-1;r&=~(1<<i),n+=1;var s=32-Pa(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jo=1<<32-Pa(t)+i|n<<i|r,Xo=s+e}else Jo=1<<s|n<<i|r,Xo=e}function Yy(e){e.return!==null&&(gu(e,1),A4(e,1,0))}function Ky(e){for(;e===j0;)j0=Vd[--Yd],Vd[Yd]=null,C0=Vd[--Yd],Vd[Yd]=null;for(;e===Ou;)Ou=Qs[--Zs],Qs[Zs]=null,Xo=Qs[--Zs],Qs[Zs]=null,Jo=Qs[--Zs],Qs[Zs]=null}var Ts=null,Ls=null,er=!1,Aa=null;function L4(e,t){var n=ea(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ts=e,Ls=xc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ts=e,Ls=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ou!==null?{id:Jo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ea(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ts=e,Ls=null,!0):!1;default:return!1}}function w2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function x2(e){if(er){var t=Ls;if(t){var n=t;if(!Qx(e,t)){if(w2(e))throw Error(it(418));t=xc(n.nextSibling);var r=Ts;t&&Qx(e,t)?L4(r,n):(e.flags=e.flags&-4097|2,er=!1,Ts=e)}}else{if(w2(e))throw Error(it(418));e.flags=e.flags&-4097|2,er=!1,Ts=e}}}function Zx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ts=e}function jm(e){if(e!==Ts)return!1;if(!er)return Zx(e),er=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!m2(e.type,e.memoizedProps)),t&&(t=Ls)){if(w2(e))throw P4(),Error(it(418));for(;t;)L4(e,t),t=xc(t.nextSibling)}if(Zx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ls=xc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ls=null}}else Ls=Ts?xc(e.stateNode.nextSibling):null;return!0}function P4(){for(var e=Ls;e;)e=xc(e.nextSibling)}function gf(){Ls=Ts=null,er=!1}function Jy(e){Aa===null?Aa=[e]:Aa.push(e)}var UL=al.ReactCurrentBatchConfig;function hh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(it(309));var r=n.stateNode}if(!r)throw Error(it(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(it(284));if(!n._owner)throw Error(it(290,e))}return e}function Cm(e,t){throw e=Object.prototype.toString.call(t),Error(it(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eb(e){var t=e._init;return t(e._payload)}function T4(e){function t(_,N){if(e){var L=_.deletions;L===null?(_.deletions=[N],_.flags|=16):L.push(N)}}function n(_,N){if(!e)return null;for(;N!==null;)t(_,N),N=N.sibling;return null}function r(_,N){for(_=new Map;N!==null;)N.key!==null?_.set(N.key,N):_.set(N.index,N),N=N.sibling;return _}function i(_,N){return _=Nc(_,N),_.index=0,_.sibling=null,_}function s(_,N,L){return _.index=L,e?(L=_.alternate,L!==null?(L=L.index,L<N?(_.flags|=2,N):L):(_.flags|=2,N)):(_.flags|=1048576,N)}function a(_){return e&&_.alternate===null&&(_.flags|=2),_}function l(_,N,L,R){return N===null||N.tag!==6?(N=dv(L,_.mode,R),N.return=_,N):(N=i(N,L),N.return=_,N)}function c(_,N,L,R){var J=L.type;return J===Ud?p(_,N,L.props.children,R,L.key):N!==null&&(N.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===rc&&eb(J)===N.type)?(R=i(N,L.props),R.ref=hh(_,N,L),R.return=_,R):(R=i0(L.type,L.key,L.props,null,_.mode,R),R.ref=hh(_,N,L),R.return=_,R)}function f(_,N,L,R){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=fv(L,_.mode,R),N.return=_,N):(N=i(N,L.children||[]),N.return=_,N)}function p(_,N,L,R,J){return N===null||N.tag!==7?(N=Pu(L,_.mode,R,J),N.return=_,N):(N=i(N,L),N.return=_,N)}function g(_,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return N=dv(""+N,_.mode,L),N.return=_,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case vm:return L=i0(N.type,N.key,N.props,null,_.mode,L),L.ref=hh(_,null,N),L.return=_,L;case Bd:return N=fv(N,_.mode,L),N.return=_,N;case rc:var R=N._init;return g(_,R(N._payload),L)}if(Nh(N)||lh(N))return N=Pu(N,_.mode,L,null),N.return=_,N;Cm(_,N)}return null}function w(_,N,L,R){var J=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return J!==null?null:l(_,N,""+L,R);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case vm:return L.key===J?c(_,N,L,R):null;case Bd:return L.key===J?f(_,N,L,R):null;case rc:return J=L._init,w(_,N,J(L._payload),R)}if(Nh(L)||lh(L))return J!==null?null:p(_,N,L,R,null);Cm(_,L)}return null}function m(_,N,L,R,J){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(L)||null,l(N,_,""+R,J);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case vm:return _=_.get(R.key===null?L:R.key)||null,c(N,_,R,J);case Bd:return _=_.get(R.key===null?L:R.key)||null,f(N,_,R,J);case rc:var ee=R._init;return m(_,N,L,ee(R._payload),J)}if(Nh(R)||lh(R))return _=_.get(L)||null,p(N,_,R,J,null);Cm(N,R)}return null}function S(_,N,L,R){for(var J=null,ee=null,W=N,I=N=0,Z=null;W!==null&&I<L.length;I++){W.index>I?(Z=W,W=null):Z=W.sibling;var re=w(_,W,L[I],R);if(re===null){W===null&&(W=Z);break}e&&W&&re.alternate===null&&t(_,W),N=s(re,N,I),ee===null?J=re:ee.sibling=re,ee=re,W=Z}if(I===L.length)return n(_,W),er&&gu(_,I),J;if(W===null){for(;I<L.length;I++)W=g(_,L[I],R),W!==null&&(N=s(W,N,I),ee===null?J=W:ee.sibling=W,ee=W);return er&&gu(_,I),J}for(W=r(_,W);I<L.length;I++)Z=m(W,_,I,L[I],R),Z!==null&&(e&&Z.alternate!==null&&W.delete(Z.key===null?I:Z.key),N=s(Z,N,I),ee===null?J=Z:ee.sibling=Z,ee=Z);return e&&W.forEach(function(P){return t(_,P)}),er&&gu(_,I),J}function k(_,N,L,R){var J=lh(L);if(typeof J!="function")throw Error(it(150));if(L=J.call(L),L==null)throw Error(it(151));for(var ee=J=null,W=N,I=N=0,Z=null,re=L.next();W!==null&&!re.done;I++,re=L.next()){W.index>I?(Z=W,W=null):Z=W.sibling;var P=w(_,W,re.value,R);if(P===null){W===null&&(W=Z);break}e&&W&&P.alternate===null&&t(_,W),N=s(P,N,I),ee===null?J=P:ee.sibling=P,ee=P,W=Z}if(re.done)return n(_,W),er&&gu(_,I),J;if(W===null){for(;!re.done;I++,re=L.next())re=g(_,re.value,R),re!==null&&(N=s(re,N,I),ee===null?J=re:ee.sibling=re,ee=re);return er&&gu(_,I),J}for(W=r(_,W);!re.done;I++,re=L.next())re=m(W,_,I,re.value,R),re!==null&&(e&&re.alternate!==null&&W.delete(re.key===null?I:re.key),N=s(re,N,I),ee===null?J=re:ee.sibling=re,ee=re);return e&&W.forEach(function(F){return t(_,F)}),er&&gu(_,I),J}function C(_,N,L,R){if(typeof L=="object"&&L!==null&&L.type===Ud&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case vm:e:{for(var J=L.key,ee=N;ee!==null;){if(ee.key===J){if(J=L.type,J===Ud){if(ee.tag===7){n(_,ee.sibling),N=i(ee,L.props.children),N.return=_,_=N;break e}}else if(ee.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===rc&&eb(J)===ee.type){n(_,ee.sibling),N=i(ee,L.props),N.ref=hh(_,ee,L),N.return=_,_=N;break e}n(_,ee);break}else t(_,ee);ee=ee.sibling}L.type===Ud?(N=Pu(L.props.children,_.mode,R,L.key),N.return=_,_=N):(R=i0(L.type,L.key,L.props,null,_.mode,R),R.ref=hh(_,N,L),R.return=_,_=R)}return a(_);case Bd:e:{for(ee=L.key;N!==null;){if(N.key===ee)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){n(_,N.sibling),N=i(N,L.children||[]),N.return=_,_=N;break e}else{n(_,N);break}else t(_,N);N=N.sibling}N=fv(L,_.mode,R),N.return=_,_=N}return a(_);case rc:return ee=L._init,C(_,N,ee(L._payload),R)}if(Nh(L))return S(_,N,L,R);if(lh(L))return k(_,N,L,R);Cm(_,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,N!==null&&N.tag===6?(n(_,N.sibling),N=i(N,L),N.return=_,_=N):(n(_,N),N=dv(L,_.mode,R),N.return=_,_=N),a(_)):n(_,N)}return C}var vf=T4(!0),M4=T4(!1),A0=Ic(null),L0=null,Kd=null,Xy=null;function Qy(){Xy=Kd=L0=null}function Zy(e){var t=A0.current;Hn(A0),e._currentValue=t}function b2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sf(e,t){L0=e,Xy=Kd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(as=!0),e.firstContext=null)}function na(e){var t=e._currentValue;if(Xy!==e)if(e={context:e,memoizedValue:t,next:null},Kd===null){if(L0===null)throw Error(it(308));Kd=e,L0.dependencies={lanes:0,firstContext:e}}else Kd=Kd.next=e;return t}var Eu=null;function e5(e){Eu===null?Eu=[e]:Eu.push(e)}function I4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,e5(t)):(n.next=i.next,i.next=n),t.interleaved=n,nl(e,r)}function nl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ic=!1;function t5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,cn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,nl(e,n)}return i=r.interleaved,i===null?(t.next=t,e5(r)):(t.next=i.next,i.next=t),r.interleaved=t,nl(e,n)}function Qm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,By(e,n)}}function tb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function P0(e,t,n,r){var i=e.updateQueue;ic=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=c))}if(s!==null){var g=i.baseState;a=0,p=f=c=null,l=s;do{var w=l.lane,m=l.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=e,k=l;switch(w=t,m=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){g=S.call(m,g,w);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,w=typeof S=="function"?S.call(m,g,w):S,w==null)break e;g=cr({},g,w);break e;case 2:ic=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,w=i.effects,w===null?i.effects=[l]:w.push(l))}else m={eventTime:m,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=m,c=g):p=p.next=m,a|=w;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;w=l,l=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(p===null&&(c=g),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Fu|=a,e.lanes=a,e.memoizedState=g}}function nb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(it(191,i));i.call(r)}}}var _p={},po=Ic(_p),rp=Ic(_p),ip=Ic(_p);function ju(e){if(e===_p)throw Error(it(174));return e}function n5(e,t){switch(Bn(ip,t),Bn(rp,e),Bn(po,_p),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:t2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=t2(t,e)}Hn(po),Bn(po,t)}function yf(){Hn(po),Hn(rp),Hn(ip)}function O4(e){ju(ip.current);var t=ju(po.current),n=t2(t,e.type);t!==n&&(Bn(rp,e),Bn(po,n))}function r5(e){rp.current===e&&(Hn(po),Hn(rp))}var ar=Ic(0);function T0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sv=[];function i5(){for(var e=0;e<sv.length;e++)sv[e]._workInProgressVersionPrimary=null;sv.length=0}var Zm=al.ReactCurrentDispatcher,av=al.ReactCurrentBatchConfig,Ru=0,lr=null,Rr=null,Vr=null,M0=!1,Ih=!1,sp=0,zL=0;function gi(){throw Error(it(321))}function s5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ia(e[n],t[n]))return!1;return!0}function a5(e,t,n,r,i,s){if(Ru=s,lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zm.current=e===null||e.memoizedState===null?GL:VL,e=n(r,i),Ih){s=0;do{if(Ih=!1,sp=0,25<=s)throw Error(it(301));s+=1,Vr=Rr=null,t.updateQueue=null,Zm.current=YL,e=n(r,i)}while(Ih)}if(Zm.current=I0,t=Rr!==null&&Rr.next!==null,Ru=0,Vr=Rr=lr=null,M0=!1,t)throw Error(it(300));return e}function o5(){var e=sp!==0;return sp=0,e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?lr.memoizedState=Vr=e:Vr=Vr.next=e,Vr}function ra(){if(Rr===null){var e=lr.alternate;e=e!==null?e.memoizedState:null}else e=Rr.next;var t=Vr===null?lr.memoizedState:Vr.next;if(t!==null)Vr=t,Rr=e;else{if(e===null)throw Error(it(310));Rr=e,e={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},Vr===null?lr.memoizedState=Vr=e:Vr=Vr.next=e}return Vr}function ap(e,t){return typeof t=="function"?t(e):t}function ov(e){var t=ra(),n=t.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=e;var r=Rr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,f=s;do{var p=f.lane;if((Ru&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var g={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=g,a=r):c=c.next=g,lr.lanes|=p,Fu|=p}f=f.next}while(f!==null&&f!==s);c===null?a=r:c.next=l,Ia(r,t.memoizedState)||(as=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,lr.lanes|=s,Fu|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lv(e){var t=ra(),n=t.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Ia(s,t.memoizedState)||(as=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function R4(){}function F4(e,t){var n=lr,r=ra(),i=t(),s=!Ia(r.memoizedState,i);if(s&&(r.memoizedState=i,as=!0),r=r.queue,l5(U4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Vr!==null&&Vr.memoizedState.tag&1){if(n.flags|=2048,op(9,B4.bind(null,n,r,i,t),void 0,null),Jr===null)throw Error(it(349));Ru&30||$4(n,t,i)}return i}function $4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=lr.updateQueue,t===null?(t={lastEffect:null,stores:null},lr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function B4(e,t,n,r){t.value=n,t.getSnapshot=r,z4(t)&&q4(e)}function U4(e,t,n){return n(function(){z4(t)&&q4(e)})}function z4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ia(e,n)}catch{return!0}}function q4(e){var t=nl(e,1);t!==null&&Ta(t,e,1,-1)}function rb(e){var t=ao();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:e},t.queue=e,e=e.dispatch=HL.bind(null,lr,e),[t.memoizedState,e]}function op(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=lr.updateQueue,t===null?(t={lastEffect:null,stores:null},lr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function W4(){return ra().memoizedState}function e0(e,t,n,r){var i=ao();lr.flags|=e,i.memoizedState=op(1|t,n,void 0,r===void 0?null:r)}function mg(e,t,n,r){var i=ra();r=r===void 0?null:r;var s=void 0;if(Rr!==null){var a=Rr.memoizedState;if(s=a.destroy,r!==null&&s5(r,a.deps)){i.memoizedState=op(t,n,s,r);return}}lr.flags|=e,i.memoizedState=op(1|t,n,s,r)}function ib(e,t){return e0(8390656,8,e,t)}function l5(e,t){return mg(2048,8,e,t)}function H4(e,t){return mg(4,2,e,t)}function G4(e,t){return mg(4,4,e,t)}function V4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y4(e,t,n){return n=n!=null?n.concat([e]):null,mg(4,4,V4.bind(null,t,e),n)}function c5(){}function K4(e,t){var n=ra();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&s5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function J4(e,t){var n=ra();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&s5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function X4(e,t,n){return Ru&21?(Ia(n,t)||(n=n4(),lr.lanes|=n,Fu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,as=!0),e.memoizedState=n)}function qL(e,t){var n=kn;kn=n!==0&&4>n?n:4,e(!0);var r=av.transition;av.transition={};try{e(!1),t()}finally{kn=n,av.transition=r}}function Q4(){return ra().memoizedState}function WL(e,t,n){var r=Sc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z4(e))eS(t,n);else if(n=I4(e,t,n,r),n!==null){var i=Oi();Ta(n,e,r,i),tS(n,t,r)}}function HL(e,t,n){var r=Sc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z4(e))eS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Ia(l,a)){var c=t.interleaved;c===null?(i.next=i,e5(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=I4(e,t,i,r),n!==null&&(i=Oi(),Ta(n,e,r,i),tS(n,t,r))}}function Z4(e){var t=e.alternate;return e===lr||t!==null&&t===lr}function eS(e,t){Ih=M0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,By(e,n)}}var I0={readContext:na,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},GL={readContext:na,useCallback:function(e,t){return ao().memoizedState=[e,t===void 0?null:t],e},useContext:na,useEffect:ib,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,e0(4194308,4,V4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return e0(4194308,4,e,t)},useInsertionEffect:function(e,t){return e0(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WL.bind(null,lr,e),[r.memoizedState,e]},useRef:function(e){var t=ao();return e={current:e},t.memoizedState=e},useState:rb,useDebugValue:c5,useDeferredValue:function(e){return ao().memoizedState=e},useTransition:function(){var e=rb(!1),t=e[0];return e=qL.bind(null,e[1]),ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lr,i=ao();if(er){if(n===void 0)throw Error(it(407));n=n()}else{if(n=t(),Jr===null)throw Error(it(349));Ru&30||$4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ib(U4.bind(null,r,s,e),[e]),r.flags|=2048,op(9,B4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ao(),t=Jr.identifierPrefix;if(er){var n=Xo,r=Jo;n=(r&~(1<<32-Pa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VL={readContext:na,useCallback:K4,useContext:na,useEffect:l5,useImperativeHandle:Y4,useInsertionEffect:H4,useLayoutEffect:G4,useMemo:J4,useReducer:ov,useRef:W4,useState:function(){return ov(ap)},useDebugValue:c5,useDeferredValue:function(e){var t=ra();return X4(t,Rr.memoizedState,e)},useTransition:function(){var e=ov(ap)[0],t=ra().memoizedState;return[e,t]},useMutableSource:R4,useSyncExternalStore:F4,useId:Q4,unstable_isNewReconciler:!1},YL={readContext:na,useCallback:K4,useContext:na,useEffect:l5,useImperativeHandle:Y4,useInsertionEffect:H4,useLayoutEffect:G4,useMemo:J4,useReducer:lv,useRef:W4,useState:function(){return lv(ap)},useDebugValue:c5,useDeferredValue:function(e){var t=ra();return Rr===null?t.memoizedState=e:X4(t,Rr.memoizedState,e)},useTransition:function(){var e=lv(ap)[0],t=ra().memoizedState;return[e,t]},useMutableSource:R4,useSyncExternalStore:F4,useId:Q4,unstable_isNewReconciler:!1};function ka(e,t){if(e&&e.defaultProps){t=cr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:cr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gg={isMounted:function(e){return(e=e._reactInternals)?zu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oi(),i=Sc(e),s=Qo(r,i);s.payload=t,n!=null&&(s.callback=n),t=bc(e,s,i),t!==null&&(Ta(t,e,i,r),Qm(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oi(),i=Sc(e),s=Qo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=bc(e,s,i),t!==null&&(Ta(t,e,i,r),Qm(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oi(),r=Sc(e),i=Qo(n,r);i.tag=2,t!=null&&(i.callback=t),t=bc(e,i,r),t!==null&&(Ta(t,e,r,n),Qm(t,e,r))}};function sb(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Zh(n,r)||!Zh(i,s):!0}function nS(e,t,n){var r=!1,i=Cc,s=t.contextType;return typeof s=="object"&&s!==null?s=na(s):(i=ls(t)?Du:Ni.current,r=t.contextTypes,s=(r=r!=null)?mf(e,i):Cc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ab(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gg.enqueueReplaceState(t,t.state,null)}function S2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},t5(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=na(s):(s=ls(t)?Du:Ni.current,i.context=mf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(_2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&gg.enqueueReplaceState(i,i.state,null),P0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function wf(e,t){try{var n="",r=t;do n+=_8(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function cv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function N2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var KL=typeof WeakMap=="function"?WeakMap:Map;function rS(e,t,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){O0||(O0=!0,I2=r),N2(e,t)},n}function iS(e,t,n){n=Qo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){N2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){N2(e,t),typeof r!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function ob(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new KL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=cP.bind(null,e,t,n),t.then(e,e))}function lb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qo(-1,1),t.tag=2,bc(n,t,1))),n.lanes|=1),e)}var JL=al.ReactCurrentOwner,as=!1;function Ii(e,t,n,r){t.child=e===null?M4(t,null,n,r):vf(t,e.child,n,r)}function ub(e,t,n,r,i){n=n.render;var s=t.ref;return sf(t,i),r=a5(e,t,n,r,s,i),n=o5(),e!==null&&!as?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(er&&n&&Yy(t),t.flags|=1,Ii(e,t,r,i),t.child)}function db(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!v5(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,sS(e,t,s,r,i)):(e=i0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zh,n(a,r)&&e.ref===t.ref)return rl(e,t,i)}return t.flags|=1,e=Nc(s,r),e.ref=t.ref,e.return=t,t.child=e}function sS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Zh(s,r)&&e.ref===t.ref)if(as=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(as=!0);else return t.lanes=e.lanes,rl(e,t,i)}return k2(e,t,n,r,i)}function aS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(Xd,As),As|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bn(Xd,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Bn(Xd,As),As|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Bn(Xd,As),As|=r;return Ii(e,t,i,n),t.child}function oS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function k2(e,t,n,r,i){var s=ls(n)?Du:Ni.current;return s=mf(t,s),sf(t,i),n=a5(e,t,n,r,s,i),r=o5(),e!==null&&!as?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(er&&r&&Yy(t),t.flags|=1,Ii(e,t,n,i),t.child)}function fb(e,t,n,r,i){if(ls(n)){var s=!0;E0(t)}else s=!1;if(sf(t,i),t.stateNode===null)t0(e,t),nS(t,n,r),S2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=na(f):(f=ls(n)?Du:Ni.current,f=mf(t,f));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==f)&&ab(t,a,r,f),ic=!1;var w=t.memoizedState;a.state=w,P0(t,r,a,i),c=t.memoizedState,l!==r||w!==c||os.current||ic?(typeof p=="function"&&(_2(t,n,p,r),c=t.memoizedState),(l=ic||sb(t,n,l,r,w,c,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,D4(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:ka(t.type,l),a.props=f,g=t.pendingProps,w=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=na(c):(c=ls(n)?Du:Ni.current,c=mf(t,c));var m=n.getDerivedStateFromProps;(p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||w!==c)&&ab(t,a,r,c),ic=!1,w=t.memoizedState,a.state=w,P0(t,r,a,i);var S=t.memoizedState;l!==g||w!==S||os.current||ic?(typeof m=="function"&&(_2(t,n,m,r),S=t.memoizedState),(f=ic||sb(t,n,f,r,w,S,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),a.props=r,a.state=S,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return E2(e,t,n,r,s,i)}function E2(e,t,n,r,i,s){oS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Xx(t,n,!1),rl(e,t,s);r=t.stateNode,JL.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=vf(t,e.child,null,s),t.child=vf(t,null,l,s)):Ii(e,t,l,s),t.memoizedState=r.state,i&&Xx(t,n,!0),t.child}function lS(e){var t=e.stateNode;t.pendingContext?Jx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jx(e,t.context,!1),n5(e,t.containerInfo)}function hb(e,t,n,r,i){return gf(),Jy(i),t.flags|=256,Ii(e,t,n,r),t.child}var j2={dehydrated:null,treeContext:null,retryLane:0};function C2(e){return{baseLanes:e,cachePool:null,transitions:null}}function cS(e,t,n){var r=t.pendingProps,i=ar.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Bn(ar,i&1),e===null)return x2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=wg(a,r,0,null),e=Pu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=C2(n),t.memoizedState=j2,e):u5(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return XL(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Nc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Nc(l,s):(s=Pu(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?C2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=j2,r}return s=e.child,e=s.sibling,r=Nc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function u5(e,t){return t=wg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Am(e,t,n,r){return r!==null&&Jy(r),vf(t,e.child,null,n),e=u5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function XL(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=cv(Error(it(422))),Am(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=wg({mode:"visible",children:r.children},i,0,null),s=Pu(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&vf(t,e.child,null,a),t.child.memoizedState=C2(a),t.memoizedState=j2,s);if(!(t.mode&1))return Am(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(it(419)),r=cv(s,r,void 0),Am(e,t,a,r)}if(l=(a&e.childLanes)!==0,as||l){if(r=Jr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nl(e,i),Ta(r,e,i,-1))}return g5(),r=cv(Error(it(421))),Am(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=uP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ls=xc(i.nextSibling),Ts=t,er=!0,Aa=null,e!==null&&(Qs[Zs++]=Jo,Qs[Zs++]=Xo,Qs[Zs++]=Ou,Jo=e.id,Xo=e.overflow,Ou=t),t=u5(t,r.children),t.flags|=4096,t)}function pb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),b2(e.return,t,n)}function uv(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function uS(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ii(e,t,r.children,n),r=ar.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pb(e,n,t);else if(e.tag===19)pb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bn(ar,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&T0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),uv(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&T0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}uv(t,!0,n,null,s);break;case"together":uv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function t0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,n=Nc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function QL(e,t,n){switch(t.tag){case 3:lS(t),gf();break;case 5:O4(t);break;case 1:ls(t.type)&&E0(t);break;case 4:n5(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Bn(A0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bn(ar,ar.current&1),t.flags|=128,null):n&t.child.childLanes?cS(e,t,n):(Bn(ar,ar.current&1),e=rl(e,t,n),e!==null?e.sibling:null);Bn(ar,ar.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return uS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bn(ar,ar.current),r)break;return null;case 22:case 23:return t.lanes=0,aS(e,t,n)}return rl(e,t,n)}var dS,A2,fS,hS;dS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};A2=function(){};fS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ju(po.current);var s=null;switch(n){case"input":i=Xv(e,i),r=Xv(e,r),s=[];break;case"select":i=cr({},i,{value:void 0}),r=cr({},r,{value:void 0}),s=[];break;case"textarea":i=e2(e,i),r=e2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=N0)}n2(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Gh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Gh.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&qn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};hS=function(e,t,n,r){n!==r&&(t.flags|=4)};function ph(e,t){if(!er)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ZL(e,t,n){var r=t.pendingProps;switch(Ky(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(t),null;case 1:return ls(t.type)&&k0(),vi(t),null;case 3:return r=t.stateNode,yf(),Hn(os),Hn(Ni),i5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Aa!==null&&(R2(Aa),Aa=null))),A2(e,t),vi(t),null;case 5:r5(t);var i=ju(ip.current);if(n=t.type,e!==null&&t.stateNode!=null)fS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(it(166));return vi(t),null}if(e=ju(po.current),jm(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[oo]=t,r[np]=s,e=(t.mode&1)!==0,n){case"dialog":qn("cancel",r),qn("close",r);break;case"iframe":case"object":case"embed":qn("load",r);break;case"video":case"audio":for(i=0;i<Eh.length;i++)qn(Eh[i],r);break;case"source":qn("error",r);break;case"img":case"image":case"link":qn("error",r),qn("load",r);break;case"details":qn("toggle",r);break;case"input":Sx(r,s),qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qn("invalid",r);break;case"textarea":kx(r,s),qn("invalid",r)}n2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Em(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Em(r.textContent,l,e),i=["children",""+l]):Gh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&qn("scroll",r)}switch(n){case"input":ym(r),Nx(r,s,!0);break;case"textarea":ym(r),Ex(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=N0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=U3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[oo]=t,e[np]=r,dS(e,t,!1,!1),t.stateNode=e;e:{switch(a=r2(n,r),n){case"dialog":qn("cancel",e),qn("close",e),i=r;break;case"iframe":case"object":case"embed":qn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Eh.length;i++)qn(Eh[i],e);i=r;break;case"source":qn("error",e),i=r;break;case"img":case"image":case"link":qn("error",e),qn("load",e),i=r;break;case"details":qn("toggle",e),i=r;break;case"input":Sx(e,r),i=Xv(e,r),qn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=cr({},r,{value:void 0}),qn("invalid",e);break;case"textarea":kx(e,r),i=e2(e,r),qn("invalid",e);break;default:i=r}n2(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?W3(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&z3(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vh(e,c):typeof c=="number"&&Vh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&qn("scroll",e):c!=null&&Iy(e,s,c,a))}switch(n){case"input":ym(e),Nx(e,r,!1);break;case"textarea":ym(e),Ex(e);break;case"option":r.value!=null&&e.setAttribute("value",""+jc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ef(e,!!r.multiple,s,!1):r.defaultValue!=null&&ef(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=N0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vi(t),null;case 6:if(e&&t.stateNode!=null)hS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(it(166));if(n=ju(ip.current),ju(po.current),jm(t)){if(r=t.stateNode,n=t.memoizedProps,r[oo]=t,(s=r.nodeValue!==n)&&(e=Ts,e!==null))switch(e.tag){case 3:Em(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Em(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oo]=t,t.stateNode=r}return vi(t),null;case 13:if(Hn(ar),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(er&&Ls!==null&&t.mode&1&&!(t.flags&128))P4(),gf(),t.flags|=98560,s=!1;else if(s=jm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(it(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(it(317));s[oo]=t}else gf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vi(t),s=!1}else Aa!==null&&(R2(Aa),Aa=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ar.current&1?$r===0&&($r=3):g5())),t.updateQueue!==null&&(t.flags|=4),vi(t),null);case 4:return yf(),A2(e,t),e===null&&ep(t.stateNode.containerInfo),vi(t),null;case 10:return Zy(t.type._context),vi(t),null;case 17:return ls(t.type)&&k0(),vi(t),null;case 19:if(Hn(ar),s=t.memoizedState,s===null)return vi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)ph(s,!1);else{if($r!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=T0(e),a!==null){for(t.flags|=128,ph(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bn(ar,ar.current&1|2),t.child}e=e.sibling}s.tail!==null&&br()>xf&&(t.flags|=128,r=!0,ph(s,!1),t.lanes=4194304)}else{if(!r)if(e=T0(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ph(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!er)return vi(t),null}else 2*br()-s.renderingStartTime>xf&&n!==1073741824&&(t.flags|=128,r=!0,ph(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=br(),t.sibling=null,n=ar.current,Bn(ar,r?n&1|2:n&1),t):(vi(t),null);case 22:case 23:return m5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?As&1073741824&&(vi(t),t.subtreeFlags&6&&(t.flags|=8192)):vi(t),null;case 24:return null;case 25:return null}throw Error(it(156,t.tag))}function eP(e,t){switch(Ky(t),t.tag){case 1:return ls(t.type)&&k0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yf(),Hn(os),Hn(Ni),i5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return r5(t),null;case 13:if(Hn(ar),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(it(340));gf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Hn(ar),null;case 4:return yf(),null;case 10:return Zy(t.type._context),null;case 22:case 23:return m5(),null;case 24:return null;default:return null}}var Lm=!1,_i=!1,tP=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Jd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mr(e,t,r)}else n.current=null}function L2(e,t,n){try{n()}catch(r){mr(e,t,r)}}var mb=!1;function nP(e,t){if(h2=b0,e=y4(),Vy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,p=0,g=e,w=null;t:for(;;){for(var m;g!==n||i!==0&&g.nodeType!==3||(l=a+i),g!==s||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(m=g.firstChild)!==null;)w=g,g=m;for(;;){if(g===e)break t;if(w===n&&++f===i&&(l=a),w===s&&++p===r&&(c=a),(m=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(p2={focusedElem:e,selectionRange:n},b0=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,C=S.memoizedState,_=t.stateNode,N=_.getSnapshotBeforeUpdate(t.elementType===t.type?k:ka(t.type,k),C);_.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(R){mr(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return S=mb,mb=!1,S}function Dh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&L2(t,n,s)}i=i.next}while(i!==r)}}function vg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function P2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pS(e){var t=e.alternate;t!==null&&(e.alternate=null,pS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oo],delete t[np],delete t[v2],delete t[FL],delete t[$L])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mS(e){return e.tag===5||e.tag===3||e.tag===4}function gb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function T2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=N0));else if(r!==4&&(e=e.child,e!==null))for(T2(e,t,n),e=e.sibling;e!==null;)T2(e,t,n),e=e.sibling}function M2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(M2(e,t,n),e=e.sibling;e!==null;)M2(e,t,n),e=e.sibling}var ri=null,ja=!1;function Xl(e,t,n){for(n=n.child;n!==null;)gS(e,t,n),n=n.sibling}function gS(e,t,n){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(cg,n)}catch{}switch(n.tag){case 5:_i||Jd(n,t);case 6:var r=ri,i=ja;ri=null,Xl(e,t,n),ri=r,ja=i,ri!==null&&(ja?(e=ri,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ri.removeChild(n.stateNode));break;case 18:ri!==null&&(ja?(e=ri,n=n.stateNode,e.nodeType===8?rv(e.parentNode,n):e.nodeType===1&&rv(e,n),Xh(e)):rv(ri,n.stateNode));break;case 4:r=ri,i=ja,ri=n.stateNode.containerInfo,ja=!0,Xl(e,t,n),ri=r,ja=i;break;case 0:case 11:case 14:case 15:if(!_i&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&L2(n,t,a),i=i.next}while(i!==r)}Xl(e,t,n);break;case 1:if(!_i&&(Jd(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){mr(n,t,l)}Xl(e,t,n);break;case 21:Xl(e,t,n);break;case 22:n.mode&1?(_i=(r=_i)||n.memoizedState!==null,Xl(e,t,n),_i=r):Xl(e,t,n);break;default:Xl(e,t,n)}}function vb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tP),t.forEach(function(r){var i=dP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:ri=l.stateNode,ja=!1;break e;case 3:ri=l.stateNode.containerInfo,ja=!0;break e;case 4:ri=l.stateNode.containerInfo,ja=!0;break e}l=l.return}if(ri===null)throw Error(it(160));gS(s,a,i),ri=null,ja=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){mr(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vS(t,e),t=t.sibling}function vS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xa(t,e),io(e),r&4){try{Dh(3,e,e.return),vg(3,e)}catch(k){mr(e,e.return,k)}try{Dh(5,e,e.return)}catch(k){mr(e,e.return,k)}}break;case 1:xa(t,e),io(e),r&512&&n!==null&&Jd(n,n.return);break;case 5:if(xa(t,e),io(e),r&512&&n!==null&&Jd(n,n.return),e.flags&32){var i=e.stateNode;try{Vh(i,"")}catch(k){mr(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&$3(i,s),r2(l,a);var f=r2(l,s);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?W3(i,g):p==="dangerouslySetInnerHTML"?z3(i,g):p==="children"?Vh(i,g):Iy(i,p,g,f)}switch(l){case"input":Qv(i,s);break;case"textarea":B3(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ef(i,!!s.multiple,m,!1):w!==!!s.multiple&&(s.defaultValue!=null?ef(i,!!s.multiple,s.defaultValue,!0):ef(i,!!s.multiple,s.multiple?[]:"",!1))}i[np]=s}catch(k){mr(e,e.return,k)}}break;case 6:if(xa(t,e),io(e),r&4){if(e.stateNode===null)throw Error(it(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){mr(e,e.return,k)}}break;case 3:if(xa(t,e),io(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xh(t.containerInfo)}catch(k){mr(e,e.return,k)}break;case 4:xa(t,e),io(e);break;case 13:xa(t,e),io(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(h5=br())),r&4&&vb(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(_i=(f=_i)||p,xa(t,e),_i=f):xa(t,e),io(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(mt=e,p=e.child;p!==null;){for(g=mt=p;mt!==null;){switch(w=mt,m=w.child,w.tag){case 0:case 11:case 14:case 15:Dh(4,w,w.return);break;case 1:Jd(w,w.return);var S=w.stateNode;if(typeof S.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(k){mr(r,n,k)}}break;case 5:Jd(w,w.return);break;case 22:if(w.memoizedState!==null){wb(g);continue}}m!==null?(m.return=w,mt=m):wb(g)}p=p.sibling}e:for(p=null,g=e;;){if(g.tag===5){if(p===null){p=g;try{i=g.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=q3("display",a))}catch(k){mr(e,e.return,k)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){mr(e,e.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:xa(t,e),io(e),r&4&&vb(e);break;case 21:break;default:xa(t,e),io(e)}}function io(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mS(n)){var r=n;break e}n=n.return}throw Error(it(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vh(i,""),r.flags&=-33);var s=gb(e);M2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=gb(e);T2(e,l,a);break;default:throw Error(it(161))}}catch(c){mr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rP(e,t,n){mt=e,yS(e)}function yS(e,t,n){for(var r=(e.mode&1)!==0;mt!==null;){var i=mt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Lm;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||_i;l=Lm;var f=_i;if(Lm=a,(_i=c)&&!f)for(mt=i;mt!==null;)a=mt,c=a.child,a.tag===22&&a.memoizedState!==null?xb(i):c!==null?(c.return=a,mt=c):xb(i);for(;s!==null;)mt=s,yS(s),s=s.sibling;mt=i,Lm=l,_i=f}yb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mt=s):yb(e)}}function yb(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_i||vg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_i)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ka(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&nb(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nb(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Xh(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}_i||t.flags&512&&P2(t)}catch(w){mr(t,t.return,w)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function wb(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function xb(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vg(4,t)}catch(c){mr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){mr(t,i,c)}}var s=t.return;try{P2(t)}catch(c){mr(t,s,c)}break;case 5:var a=t.return;try{P2(t)}catch(c){mr(t,a,c)}}}catch(c){mr(t,t.return,c)}if(t===e){mt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,mt=l;break}mt=t.return}}var iP=Math.ceil,D0=al.ReactCurrentDispatcher,d5=al.ReactCurrentOwner,ta=al.ReactCurrentBatchConfig,cn=0,Jr=null,Pr=null,si=0,As=0,Xd=Ic(0),$r=0,lp=null,Fu=0,yg=0,f5=0,Oh=null,is=null,h5=0,xf=1/0,Vo=null,O0=!1,I2=null,_c=null,Pm=!1,hc=null,R0=0,Rh=0,D2=null,n0=-1,r0=0;function Oi(){return cn&6?br():n0!==-1?n0:n0=br()}function Sc(e){return e.mode&1?cn&2&&si!==0?si&-si:UL.transition!==null?(r0===0&&(r0=n4()),r0):(e=kn,e!==0||(e=window.event,e=e===void 0?16:c4(e.type)),e):1}function Ta(e,t,n,r){if(50<Rh)throw Rh=0,D2=null,Error(it(185));wp(e,n,r),(!(cn&2)||e!==Jr)&&(e===Jr&&(!(cn&2)&&(yg|=n),$r===4&&lc(e,si)),cs(e,r),n===1&&cn===0&&!(t.mode&1)&&(xf=br()+500,pg&&Dc()))}function cs(e,t){var n=e.callbackNode;U8(e,t);var r=x0(e,e===Jr?si:0);if(r===0)n!==null&&Ax(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ax(n),t===1)e.tag===0?BL(bb.bind(null,e)):C4(bb.bind(null,e)),OL(function(){!(cn&6)&&Dc()}),n=null;else{switch(r4(r)){case 1:n=$y;break;case 4:n=e4;break;case 16:n=w0;break;case 536870912:n=t4;break;default:n=w0}n=ES(n,wS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wS(e,t){if(n0=-1,r0=0,cn&6)throw Error(it(327));var n=e.callbackNode;if(af()&&e.callbackNode!==n)return null;var r=x0(e,e===Jr?si:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=F0(e,r);else{t=r;var i=cn;cn|=2;var s=bS();(Jr!==e||si!==t)&&(Vo=null,xf=br()+500,Lu(e,t));do try{oP();break}catch(l){xS(e,l)}while(!0);Qy(),D0.current=s,cn=i,Pr!==null?t=0:(Jr=null,si=0,t=$r)}if(t!==0){if(t===2&&(i=l2(e),i!==0&&(r=i,t=O2(e,i))),t===1)throw n=lp,Lu(e,0),lc(e,r),cs(e,br()),n;if(t===6)lc(e,r);else{if(i=e.current.alternate,!(r&30)&&!sP(i)&&(t=F0(e,r),t===2&&(s=l2(e),s!==0&&(r=s,t=O2(e,s))),t===1))throw n=lp,Lu(e,0),lc(e,r),cs(e,br()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(it(345));case 2:vu(e,is,Vo);break;case 3:if(lc(e,r),(r&130023424)===r&&(t=h5+500-br(),10<t)){if(x0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Oi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=g2(vu.bind(null,e,is,Vo),t);break}vu(e,is,Vo);break;case 4:if(lc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Pa(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=br()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iP(r/1960))-r,10<r){e.timeoutHandle=g2(vu.bind(null,e,is,Vo),r);break}vu(e,is,Vo);break;case 5:vu(e,is,Vo);break;default:throw Error(it(329))}}}return cs(e,br()),e.callbackNode===n?wS.bind(null,e):null}function O2(e,t){var n=Oh;return e.current.memoizedState.isDehydrated&&(Lu(e,t).flags|=256),e=F0(e,t),e!==2&&(t=is,is=n,t!==null&&R2(t)),e}function R2(e){is===null?is=e:is.push.apply(is,e)}function sP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ia(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lc(e,t){for(t&=~f5,t&=~yg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pa(t),r=1<<n;e[n]=-1,t&=~r}}function bb(e){if(cn&6)throw Error(it(327));af();var t=x0(e,0);if(!(t&1))return cs(e,br()),null;var n=F0(e,t);if(e.tag!==0&&n===2){var r=l2(e);r!==0&&(t=r,n=O2(e,r))}if(n===1)throw n=lp,Lu(e,0),lc(e,t),cs(e,br()),n;if(n===6)throw Error(it(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,is,Vo),cs(e,br()),null}function p5(e,t){var n=cn;cn|=1;try{return e(t)}finally{cn=n,cn===0&&(xf=br()+500,pg&&Dc())}}function $u(e){hc!==null&&hc.tag===0&&!(cn&6)&&af();var t=cn;cn|=1;var n=ta.transition,r=kn;try{if(ta.transition=null,kn=1,e)return e()}finally{kn=r,ta.transition=n,cn=t,!(cn&6)&&Dc()}}function m5(){As=Xd.current,Hn(Xd)}function Lu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DL(n)),Pr!==null)for(n=Pr.return;n!==null;){var r=n;switch(Ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&k0();break;case 3:yf(),Hn(os),Hn(Ni),i5();break;case 5:r5(r);break;case 4:yf();break;case 13:Hn(ar);break;case 19:Hn(ar);break;case 10:Zy(r.type._context);break;case 22:case 23:m5()}n=n.return}if(Jr=e,Pr=e=Nc(e.current,null),si=As=t,$r=0,lp=null,f5=yg=Fu=0,is=Oh=null,Eu!==null){for(t=0;t<Eu.length;t++)if(n=Eu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Eu=null}return e}function xS(e,t){do{var n=Pr;try{if(Qy(),Zm.current=I0,M0){for(var r=lr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}M0=!1}if(Ru=0,Vr=Rr=lr=null,Ih=!1,sp=0,d5.current=null,n===null||n.return===null){$r=1,lp=t,Pr=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=si,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var m=lb(a);if(m!==null){m.flags&=-257,cb(m,a,l,s,t),m.mode&1&&ob(s,f,t),t=m,c=f;var S=t.updateQueue;if(S===null){var k=new Set;k.add(c),t.updateQueue=k}else S.add(c);break e}else{if(!(t&1)){ob(s,f,t),g5();break e}c=Error(it(426))}}else if(er&&l.mode&1){var C=lb(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),cb(C,a,l,s,t),Jy(wf(c,l));break e}}s=c=wf(c,l),$r!==4&&($r=2),Oh===null?Oh=[s]:Oh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var _=rS(s,c,t);tb(s,_);break e;case 1:l=c;var N=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof N.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(_c===null||!_c.has(L)))){s.flags|=65536,t&=-t,s.lanes|=t;var R=iS(s,l,t);tb(s,R);break e}}s=s.return}while(s!==null)}SS(n)}catch(J){t=J,Pr===n&&n!==null&&(Pr=n=n.return);continue}break}while(!0)}function bS(){var e=D0.current;return D0.current=I0,e===null?I0:e}function g5(){($r===0||$r===3||$r===2)&&($r=4),Jr===null||!(Fu&268435455)&&!(yg&268435455)||lc(Jr,si)}function F0(e,t){var n=cn;cn|=2;var r=bS();(Jr!==e||si!==t)&&(Vo=null,Lu(e,t));do try{aP();break}catch(i){xS(e,i)}while(!0);if(Qy(),cn=n,D0.current=r,Pr!==null)throw Error(it(261));return Jr=null,si=0,$r}function aP(){for(;Pr!==null;)_S(Pr)}function oP(){for(;Pr!==null&&!T8();)_S(Pr)}function _S(e){var t=kS(e.alternate,e,As);e.memoizedProps=e.pendingProps,t===null?SS(e):Pr=t,d5.current=null}function SS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eP(n,t),n!==null){n.flags&=32767,Pr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$r=6,Pr=null;return}}else if(n=ZL(n,t,As),n!==null){Pr=n;return}if(t=t.sibling,t!==null){Pr=t;return}Pr=t=e}while(t!==null);$r===0&&($r=5)}function vu(e,t,n){var r=kn,i=ta.transition;try{ta.transition=null,kn=1,lP(e,t,n,r)}finally{ta.transition=i,kn=r}return null}function lP(e,t,n,r){do af();while(hc!==null);if(cn&6)throw Error(it(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(it(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(z8(e,s),e===Jr&&(Pr=Jr=null,si=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pm||(Pm=!0,ES(w0,function(){return af(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ta.transition,ta.transition=null;var a=kn;kn=1;var l=cn;cn|=4,d5.current=null,nP(e,n),vS(n,e),CL(p2),b0=!!h2,p2=h2=null,e.current=n,rP(n),M8(),cn=l,kn=a,ta.transition=s}else e.current=n;if(Pm&&(Pm=!1,hc=e,R0=i),s=e.pendingLanes,s===0&&(_c=null),O8(n.stateNode),cs(e,br()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(O0)throw O0=!1,e=I2,I2=null,e;return R0&1&&e.tag!==0&&af(),s=e.pendingLanes,s&1?e===D2?Rh++:(Rh=0,D2=e):Rh=0,Dc(),null}function af(){if(hc!==null){var e=r4(R0),t=ta.transition,n=kn;try{if(ta.transition=null,kn=16>e?16:e,hc===null)var r=!1;else{if(e=hc,hc=null,R0=0,cn&6)throw Error(it(331));var i=cn;for(cn|=4,mt=e.current;mt!==null;){var s=mt,a=s.child;if(mt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(mt=f;mt!==null;){var p=mt;switch(p.tag){case 0:case 11:case 15:Dh(8,p,s)}var g=p.child;if(g!==null)g.return=p,mt=g;else for(;mt!==null;){p=mt;var w=p.sibling,m=p.return;if(pS(p),p===f){mt=null;break}if(w!==null){w.return=m,mt=w;break}mt=m}}}var S=s.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}mt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,mt=a;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Dh(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,mt=_;break e}mt=s.return}}var N=e.current;for(mt=N;mt!==null;){a=mt;var L=a.child;if(a.subtreeFlags&2064&&L!==null)L.return=a,mt=L;else e:for(a=N;mt!==null;){if(l=mt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vg(9,l)}}catch(J){mr(l,l.return,J)}if(l===a){mt=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,mt=R;break e}mt=l.return}}if(cn=i,Dc(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(cg,e)}catch{}r=!0}return r}finally{kn=n,ta.transition=t}}return!1}function _b(e,t,n){t=wf(n,t),t=rS(e,t,1),e=bc(e,t,1),t=Oi(),e!==null&&(wp(e,1,t),cs(e,t))}function mr(e,t,n){if(e.tag===3)_b(e,e,n);else for(;t!==null;){if(t.tag===3){_b(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_c===null||!_c.has(r))){e=wf(n,e),e=iS(t,e,1),t=bc(t,e,1),e=Oi(),t!==null&&(wp(t,1,e),cs(t,e));break}}t=t.return}}function cP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Oi(),e.pingedLanes|=e.suspendedLanes&n,Jr===e&&(si&n)===n&&($r===4||$r===3&&(si&130023424)===si&&500>br()-h5?Lu(e,0):f5|=n),cs(e,t)}function NS(e,t){t===0&&(e.mode&1?(t=bm,bm<<=1,!(bm&130023424)&&(bm=4194304)):t=1);var n=Oi();e=nl(e,t),e!==null&&(wp(e,t,n),cs(e,n))}function uP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),NS(e,n)}function dP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(it(314))}r!==null&&r.delete(t),NS(e,n)}var kS;kS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||os.current)as=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return as=!1,QL(e,t,n);as=!!(e.flags&131072)}else as=!1,er&&t.flags&1048576&&A4(t,C0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;t0(e,t),e=t.pendingProps;var i=mf(t,Ni.current);sf(t,n),i=a5(null,t,r,e,i,n);var s=o5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ls(r)?(s=!0,E0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,t5(t),i.updater=gg,t.stateNode=i,i._reactInternals=t,S2(t,r,e,n),t=E2(null,t,r,!0,s,n)):(t.tag=0,er&&s&&Yy(t),Ii(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(t0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=hP(r),e=ka(r,e),i){case 0:t=k2(null,t,r,e,n);break e;case 1:t=fb(null,t,r,e,n);break e;case 11:t=ub(null,t,r,e,n);break e;case 14:t=db(null,t,r,ka(r.type,e),n);break e}throw Error(it(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ka(r,i),k2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ka(r,i),fb(e,t,r,i,n);case 3:e:{if(lS(t),e===null)throw Error(it(387));r=t.pendingProps,s=t.memoizedState,i=s.element,D4(e,t),P0(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=wf(Error(it(423)),t),t=hb(e,t,r,n,i);break e}else if(r!==i){i=wf(Error(it(424)),t),t=hb(e,t,r,n,i);break e}else for(Ls=xc(t.stateNode.containerInfo.firstChild),Ts=t,er=!0,Aa=null,n=M4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gf(),r===i){t=rl(e,t,n);break e}Ii(e,t,r,n)}t=t.child}return t;case 5:return O4(t),e===null&&x2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,m2(r,i)?a=null:s!==null&&m2(r,s)&&(t.flags|=32),oS(e,t),Ii(e,t,a,n),t.child;case 6:return e===null&&x2(t),null;case 13:return cS(e,t,n);case 4:return n5(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vf(t,null,r,n):Ii(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ka(r,i),ub(e,t,r,i,n);case 7:return Ii(e,t,t.pendingProps,n),t.child;case 8:return Ii(e,t,t.pendingProps.children,n),t.child;case 12:return Ii(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Bn(A0,r._currentValue),r._currentValue=a,s!==null)if(Ia(s.value,a)){if(s.children===i.children&&!os.current){t=rl(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Qo(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),b2(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(it(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),b2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ii(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,sf(t,n),i=na(i),r=r(i),t.flags|=1,Ii(e,t,r,n),t.child;case 14:return r=t.type,i=ka(r,t.pendingProps),i=ka(r.type,i),db(e,t,r,i,n);case 15:return sS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ka(r,i),t0(e,t),t.tag=1,ls(r)?(e=!0,E0(t)):e=!1,sf(t,n),nS(t,r,i),S2(t,r,i,n),E2(null,t,r,!0,e,n);case 19:return uS(e,t,n);case 22:return aS(e,t,n)}throw Error(it(156,t.tag))};function ES(e,t){return Z3(e,t)}function fP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(e,t,n,r){return new fP(e,t,n,r)}function v5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hP(e){if(typeof e=="function")return v5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oy)return 11;if(e===Ry)return 14}return 2}function Nc(e,t){var n=e.alternate;return n===null?(n=ea(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function i0(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")v5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ud:return Pu(n.children,i,s,t);case Dy:a=8,i|=8;break;case Vv:return e=ea(12,n,t,i|2),e.elementType=Vv,e.lanes=s,e;case Yv:return e=ea(13,n,t,i),e.elementType=Yv,e.lanes=s,e;case Kv:return e=ea(19,n,t,i),e.elementType=Kv,e.lanes=s,e;case O3:return wg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I3:a=10;break e;case D3:a=9;break e;case Oy:a=11;break e;case Ry:a=14;break e;case rc:a=16,r=null;break e}throw Error(it(130,e==null?e:typeof e,""))}return t=ea(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Pu(e,t,n,r){return e=ea(7,e,r,t),e.lanes=n,e}function wg(e,t,n,r){return e=ea(22,e,r,t),e.elementType=O3,e.lanes=n,e.stateNode={isHidden:!1},e}function dv(e,t,n){return e=ea(6,e,null,t),e.lanes=n,e}function fv(e,t,n){return t=ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=G1(0),this.expirationTimes=G1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function y5(e,t,n,r,i,s,a,l,c){return e=new pP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ea(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t5(s),e}function mP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jS(e){if(!e)return Cc;e=e._reactInternals;e:{if(zu(e)!==e||e.tag!==1)throw Error(it(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ls(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(it(171))}if(e.tag===1){var n=e.type;if(ls(n))return j4(e,n,t)}return t}function CS(e,t,n,r,i,s,a,l,c){return e=y5(n,r,!0,e,i,s,a,l,c),e.context=jS(null),n=e.current,r=Oi(),i=Sc(n),s=Qo(r,i),s.callback=t??null,bc(n,s,i),e.current.lanes=i,wp(e,i,r),cs(e,r),e}function xg(e,t,n,r){var i=t.current,s=Oi(),a=Sc(i);return n=jS(n),t.context===null?t.context=n:t.pendingContext=n,t=Qo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bc(i,t,a),e!==null&&(Ta(e,i,a,s),Qm(e,i,a)),a}function $0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function w5(e,t){Sb(e,t),(e=e.alternate)&&Sb(e,t)}function gP(){return null}var AS=typeof reportError=="function"?reportError:function(e){console.error(e)};function x5(e){this._internalRoot=e}bg.prototype.render=x5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(it(409));xg(e,t,null,null)};bg.prototype.unmount=x5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$u(function(){xg(null,e,null,null)}),t[tl]=null}};function bg(e){this._internalRoot=e}bg.prototype.unstable_scheduleHydration=function(e){if(e){var t=a4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oc.length&&t!==0&&t<oc[n].priority;n++);oc.splice(n,0,e),n===0&&l4(e)}};function b5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nb(){}function vP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=$0(a);s.call(f)}}var a=CS(t,r,e,0,null,!1,!1,"",Nb);return e._reactRootContainer=a,e[tl]=a.current,ep(e.nodeType===8?e.parentNode:e),$u(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=$0(c);l.call(f)}}var c=y5(e,0,!1,null,null,!1,!1,"",Nb);return e._reactRootContainer=c,e[tl]=c.current,ep(e.nodeType===8?e.parentNode:e),$u(function(){xg(t,c,n,r)}),c}function Sg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=$0(a);l.call(c)}}xg(t,a,e,i)}else a=vP(n,t,e,i,r);return $0(a)}i4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kh(t.pendingLanes);n!==0&&(By(t,n|1),cs(t,br()),!(cn&6)&&(xf=br()+500,Dc()))}break;case 13:$u(function(){var r=nl(e,1);if(r!==null){var i=Oi();Ta(r,e,1,i)}}),w5(e,1)}};Uy=function(e){if(e.tag===13){var t=nl(e,134217728);if(t!==null){var n=Oi();Ta(t,e,134217728,n)}w5(e,134217728)}};s4=function(e){if(e.tag===13){var t=Sc(e),n=nl(e,t);if(n!==null){var r=Oi();Ta(n,e,t,r)}w5(e,t)}};a4=function(){return kn};o4=function(e,t){var n=kn;try{return kn=e,t()}finally{kn=n}};s2=function(e,t,n){switch(t){case"input":if(Qv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=hg(r);if(!i)throw Error(it(90));F3(r),Qv(r,i)}}}break;case"textarea":B3(e,n);break;case"select":t=n.value,t!=null&&ef(e,!!n.multiple,t,!1)}};V3=p5;Y3=$u;var yP={usingClientEntryPoint:!1,Events:[bp,Hd,hg,H3,G3,p5]},mh={findFiberByHostInstance:ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wP={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=X3(e),e===null?null:e.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||gP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{cg=Tm.inject(wP),ho=Tm}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yP;Is.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b5(t))throw Error(it(200));return mP(e,t,null,n)};Is.createRoot=function(e,t){if(!b5(e))throw Error(it(299));var n=!1,r="",i=AS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=y5(e,1,!1,null,null,n,!1,r,i),e[tl]=t.current,ep(e.nodeType===8?e.parentNode:e),new x5(t)};Is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):(e=Object.keys(e).join(","),Error(it(268,e)));return e=X3(t),e=e===null?null:e.stateNode,e};Is.flushSync=function(e){return $u(e)};Is.hydrate=function(e,t,n){if(!_g(t))throw Error(it(200));return Sg(null,e,t,!0,n)};Is.hydrateRoot=function(e,t,n){if(!b5(e))throw Error(it(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=AS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=CS(t,null,e,1,n??null,i,!1,s,a),e[tl]=t.current,ep(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bg(t)};Is.render=function(e,t,n){if(!_g(t))throw Error(it(200));return Sg(null,e,t,!1,n)};Is.unmountComponentAtNode=function(e){if(!_g(e))throw Error(it(40));return e._reactRootContainer?($u(function(){Sg(null,null,e,!1,function(){e._reactRootContainer=null,e[tl]=null})}),!0):!1};Is.unstable_batchedUpdates=p5;Is.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_g(n))throw Error(it(200));if(e==null||e._reactInternals===void 0)throw Error(it(38));return Sg(e,t,n,!1,r)};Is.version="18.3.1-next-f1338f8080-20240426";function LS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LS)}catch(e){console.error(e)}}LS(),L3.exports=Is;var Cu=L3.exports,PS,kb=Cu;PS=kb.createRoot,kb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cp.apply(this,arguments)}var pc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pc||(pc={}));const Eb="popstate";function xP(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return F2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:B0(i)}return _P(t,n,null,e)}function kr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function TS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bP(){return Math.random().toString(36).substr(2,8)}function jb(e,t){return{usr:e.state,key:e.key,idx:t}}function F2(e,t,n,r){return n===void 0&&(n=null),cp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jf(t):t,{state:n,key:t&&t.key||r||bP()})}function B0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function jf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _P(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=pc.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(cp({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function g(){l=pc.Pop;let C=p(),_=C==null?null:C-f;f=C,c&&c({action:l,location:k.location,delta:_})}function w(C,_){l=pc.Push;let N=F2(k.location,C,_);f=p()+1;let L=jb(N,f),R=k.createHref(N);try{a.pushState(L,"",R)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;i.location.assign(R)}s&&c&&c({action:l,location:k.location,delta:1})}function m(C,_){l=pc.Replace;let N=F2(k.location,C,_);f=p();let L=jb(N,f),R=k.createHref(N);a.replaceState(L,"",R),s&&c&&c({action:l,location:k.location,delta:0})}function S(C){let _=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof C=="string"?C:B0(C);return N=N.replace(/ $/,"%20"),kr(_,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,_)}let k={get action(){return l},get location(){return e(i,a)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Eb,g),c=C,()=>{i.removeEventListener(Eb,g),c=null}},createHref(C){return t(i,C)},createURL:S,encodeLocation(C){let _=S(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:m,go(C){return a.go(C)}};return k}var Cb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cb||(Cb={}));function SP(e,t,n){return n===void 0&&(n="/"),NP(e,t,n,!1)}function NP(e,t,n,r){let i=typeof t=="string"?jf(t):t,s=_5(i.pathname||"/",n);if(s==null)return null;let a=MS(e);kP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=OP(s);l=IP(a[c],f,r)}return l}function MS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(kr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=kc([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(kr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),MS(s.children,t,p,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:TP(f,s.index),routesMeta:p})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of IS(s.path))i(s,a,c)}),t}function IS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=IS(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function kP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:MP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EP=/^:[\w-]+$/,jP=3,CP=2,AP=1,LP=10,PP=-2,Ab=e=>e==="*";function TP(e,t){let n=e.split("/"),r=n.length;return n.some(Ab)&&(r+=PP),t&&(r+=CP),n.filter(i=>!Ab(i)).reduce((i,s)=>i+(EP.test(s)?jP:s===""?AP:LP),r)}function MP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function IP(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),w=c.route;if(!g&&f&&n&&!r[r.length-1].route.index&&(g=Lb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:kc([s,g.pathname]),pathnameBase:BP(kc([s,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(s=kc([s,g.pathnameBase]))}return a}function Lb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=DP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,g)=>{let{paramName:w,isOptional:m}=p;if(w==="*"){let k=l[g]||"";a=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const S=l[g];return m&&!S?f[w]=void 0:f[w]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:e}}function DP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),TS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function OP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return TS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function RP(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?jf(e):e;return{pathname:n?n.startsWith("/")?n:FP(n,t):t,search:UP(r),hash:zP(i)}}function FP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $P(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function S5(e,t){let n=$P(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=jf(e):(i=cp({},e),kr(!i.pathname||!i.pathname.includes("?"),hv("?","pathname","search",i)),kr(!i.pathname||!i.pathname.includes("#"),hv("#","pathname","hash",i)),kr(!i.search||!i.search.includes("#"),hv("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let g=t.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),g-=1;i.pathname=w.join("/")}l=g>=0?t[g]:"/"}let c=RP(i,l),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const kc=e=>e.join("/").replace(/\/\/+/g,"/"),BP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const DS=["post","put","patch","delete"];new Set(DS);const WP=["get",...DS];new Set(WP);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},up.apply(this,arguments)}const k5=j.createContext(null),HP=j.createContext(null),Oc=j.createContext(null),Ng=j.createContext(null),ol=j.createContext({outlet:null,matches:[],isDataRoute:!1}),OS=j.createContext(null);function GP(e,t){let{relative:n}=t===void 0?{}:t;Cf()||kr(!1);let{basename:r,navigator:i}=j.useContext(Oc),{hash:s,pathname:a,search:l}=$S(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:kc([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Cf(){return j.useContext(Ng)!=null}function wo(){return Cf()||kr(!1),j.useContext(Ng).location}function RS(e){j.useContext(Oc).static||j.useLayoutEffect(e)}function Ra(){let{isDataRoute:e}=j.useContext(ol);return e?s7():VP()}function VP(){Cf()||kr(!1);let e=j.useContext(k5),{basename:t,future:n,navigator:r}=j.useContext(Oc),{matches:i}=j.useContext(ol),{pathname:s}=wo(),a=JSON.stringify(S5(i,n.v7_relativeSplatPath)),l=j.useRef(!1);return RS(()=>{l.current=!0}),j.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let g=N5(f,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:kc([t,g.pathname])),(p.replace?r.replace:r.push)(g,p.state,p)},[t,r,a,s,e])}function FS(){let{matches:e}=j.useContext(ol),t=e[e.length-1];return t?t.params:{}}function $S(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=j.useContext(Oc),{matches:i}=j.useContext(ol),{pathname:s}=wo(),a=JSON.stringify(S5(i,r.v7_relativeSplatPath));return j.useMemo(()=>N5(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function YP(e,t){return KP(e,t)}function KP(e,t,n,r){Cf()||kr(!1);let{navigator:i}=j.useContext(Oc),{matches:s}=j.useContext(ol),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=wo(),p;if(t){var g;let C=typeof t=="string"?jf(t):t;c==="/"||(g=C.pathname)!=null&&g.startsWith(c)||kr(!1),p=C}else p=f;let w=p.pathname||"/",m=w;if(c!=="/"){let C=c.replace(/^\//,"").split("/");m="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=SP(e,{pathname:m}),k=e7(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:kc([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:kc([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return t&&k?j.createElement(Ng.Provider,{value:{location:up({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:pc.Pop}},k):k}function JP(){let e=i7(),t=qP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,null)}const XP=j.createElement(JP,null);class QP extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(ol.Provider,{value:this.props.routeContext},j.createElement(OS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZP(e){let{routeContext:t,match:n,children:r}=e,i=j.useContext(k5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ol.Provider,{value:t},r)}function e7(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);p>=0||kr(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=p),g.route.id){let{loaderData:w,errors:m}=n,S=g.route.loader&&w[g.route.id]===void 0&&(!m||m[g.route.id]===void 0);if(g.route.lazy||S){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,g,w)=>{let m,S=!1,k=null,C=null;n&&(m=l&&g.route.id?l[g.route.id]:void 0,k=g.route.errorElement||XP,c&&(f<0&&w===0?(S=!0,C=null):f===w&&(S=!0,C=g.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,w+1)),N=()=>{let L;return m?L=k:S?L=C:g.route.Component?L=j.createElement(g.route.Component,null):g.route.element?L=g.route.element:L=p,j.createElement(ZP,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:L})};return n&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?j.createElement(QP,{location:n.location,revalidation:n.revalidation,component:k,error:m,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):N()},null)}var BS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BS||{}),U0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(U0||{});function t7(e){let t=j.useContext(k5);return t||kr(!1),t}function n7(e){let t=j.useContext(HP);return t||kr(!1),t}function r7(e){let t=j.useContext(ol);return t||kr(!1),t}function US(e){let t=r7(),n=t.matches[t.matches.length-1];return n.route.id||kr(!1),n.route.id}function i7(){var e;let t=j.useContext(OS),n=n7(U0.UseRouteError),r=US(U0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function s7(){let{router:e}=t7(BS.UseNavigateStable),t=US(U0.UseNavigateStable),n=j.useRef(!1);return RS(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,up({fromRouteId:t},s)))},[e,t])}const Pb={};function a7(e,t){Pb[t]||(Pb[t]=!0,console.warn(t))}const Tb=(e,t,n)=>a7(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function o7(e,t){e!=null&&e.v7_startTransition||Tb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Tb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function l7(e){let{to:t,replace:n,state:r,relative:i}=e;Cf()||kr(!1);let{future:s,static:a}=j.useContext(Oc),{matches:l}=j.useContext(ol),{pathname:c}=wo(),f=Ra(),p=N5(t,S5(l,s.v7_relativeSplatPath),c,i==="path"),g=JSON.stringify(p);return j.useEffect(()=>f(JSON.parse(g),{replace:n,state:r,relative:i}),[f,g,i,n,r]),null}function Sa(e){kr(!1)}function c7(e){let{basename:t="/",children:n=null,location:r,navigationType:i=pc.Pop,navigator:s,static:a=!1,future:l}=e;Cf()&&kr(!1);let c=t.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:c,navigator:s,static:a,future:up({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=jf(r));let{pathname:p="/",search:g="",hash:w="",state:m=null,key:S="default"}=r,k=j.useMemo(()=>{let C=_5(p,c);return C==null?null:{location:{pathname:C,search:g,hash:w,state:m,key:S},navigationType:i}},[c,p,g,w,m,S,i]);return k==null?null:j.createElement(Oc.Provider,{value:f},j.createElement(Ng.Provider,{children:n,value:k}))}function u7(e){let{children:t,location:n}=e;return YP($2(t),n)}new Promise(()=>{});function $2(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let s=[...t,i];if(r.type===j.Fragment){n.push.apply(n,$2(r.props.children,s));return}r.type!==Sa&&kr(!1),!r.props.index||!r.props.children||kr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=$2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function B2(){return B2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B2.apply(this,arguments)}function d7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function f7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function h7(e,t){return e.button===0&&(!t||t==="_self")&&!f7(e)}function U2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function p7(e,t){let n=U2(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const m7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g7="6";try{window.__reactRouterVersion=g7}catch{}const v7="startTransition",Mb=Hv[v7];function y7(e){let{basename:t,children:n,future:r,window:i}=e,s=j.useRef();s.current==null&&(s.current=xP({window:i,v5Compat:!0}));let a=s.current,[l,c]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=j.useCallback(g=>{f&&Mb?Mb(()=>c(g)):c(g)},[c,f]);return j.useLayoutEffect(()=>a.listen(p),[a,p]),j.useEffect(()=>o7(r),[r]),j.createElement(c7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const w7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ec=j.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:g}=t,w=d7(t,m7),{basename:m}=j.useContext(Oc),S,k=!1;if(typeof f=="string"&&x7.test(f)&&(S=f,w7))try{let L=new URL(window.location.href),R=f.startsWith("//")?new URL(L.protocol+f):new URL(f),J=_5(R.pathname,m);R.origin===L.origin&&J!=null?f=J+R.search+R.hash:k=!0}catch{}let C=GP(f,{relative:i}),_=b7(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:g});function N(L){r&&r(L),L.defaultPrevented||_(L)}return j.createElement("a",B2({},w,{href:S||C,onClick:k||s?r:N,ref:n,target:c}))});var Ib;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ib||(Ib={}));var Db;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Db||(Db={}));function b7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=Ra(),f=wo(),p=$S(e,{relative:a});return j.useCallback(g=>{if(h7(g,n)){g.preventDefault();let w=r!==void 0?r:B0(f)===B0(p);c(e,{replace:w,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[f,c,p,r,i,n,e,s,a,l])}function zS(e){let t=j.useRef(U2(e)),n=j.useRef(!1),r=wo(),i=j.useMemo(()=>p7(r.search,n.current?null:t.current),[r.search]),s=Ra(),a=j.useCallback((l,c)=>{const f=U2(typeof l=="function"?l(i):l);n.current=!0,s("?"+f,c)},[s,i]);return[i,a]}let _7={data:""},S7=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||_7,N7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,k7=/\/\*[^]*?\*\/|  +/g,Ob=/\n+/g,cc=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?cc(a,s):s+"{"+cc(a,s[1]=="k"?"":t)+"}":typeof a=="object"?r+=cc(a,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=cc.p?cc.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Wo={},qS=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+qS(e[n]);return t}return e},E7=(e,t,n,r,i)=>{let s=qS(e),a=Wo[s]||(Wo[s]=(c=>{let f=0,p=11;for(;f<c.length;)p=101*p+c.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Wo[a]){let c=s!==e?e:(f=>{let p,g,w=[{}];for(;p=N7.exec(f.replace(k7,""));)p[4]?w.shift():p[3]?(g=p[3].replace(Ob," ").trim(),w.unshift(w[0][g]=w[0][g]||{})):w[0][p[1]]=p[2].replace(Ob," ").trim();return w[0]})(e);Wo[a]=cc(i?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Wo.g?Wo.g:null;return n&&(Wo.g=Wo[a]),((c,f,p,g)=>{g?f.data=f.data.replace(g,c):f.data.indexOf(c)===-1&&(f.data=p?c+f.data:f.data+c)})(Wo[a],t,r,l),a},j7=(e,t,n)=>e.reduce((r,i,s)=>{let a=t[s];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":cc(l,""):l===!1?"":l}return r+i+(a??"")},"");function kg(e){let t=this||{},n=e.call?e(t.p):e;return E7(n.unshift?n.raw?j7(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,S7(t.target),t.g,t.o,t.k)}let WS,z2,q2;kg.bind({g:1});let il=kg.bind({k:1});function C7(e,t,n,r){cc.p=t,WS=e,z2=n,q2=r}function Rc(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:z2&&z2()},l),n.o=/ *go\d+/.test(c),l.className=kg.apply(n,r)+(c?" "+c:"");let f=e;return e[0]&&(f=l.as||e,delete l.as),q2&&f[0]&&q2(l),WS(f,l)}return i}}var A7=e=>typeof e=="function",z0=(e,t)=>A7(e)?e(t):e,L7=(()=>{let e=0;return()=>(++e).toString()})(),HS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),P7=20,s0=new Map,T7=1e3,Rb=e=>{if(s0.has(e))return;let t=setTimeout(()=>{s0.delete(e),qu({type:4,toastId:e})},T7);s0.set(e,t)},M7=e=>{let t=s0.get(e);t&&clearTimeout(t)},W2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,P7)};case 1:return t.toast.id&&M7(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?W2(e,{type:1,toast:n}):W2(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?Rb(r):e.toasts.forEach(s=>{Rb(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},a0=[],o0={toasts:[],pausedAt:void 0},qu=e=>{o0=W2(o0,e),a0.forEach(t=>{t(o0)})},I7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D7=(e={})=>{let[t,n]=j.useState(o0);j.useEffect(()=>(a0.push(n),()=>{let i=a0.indexOf(n);i>-1&&a0.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var s,a;return{...e,...e[i.type],...i,duration:i.duration||((s=e[i.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||I7[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:r}},O7=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||L7()}),Sp=e=>(t,n)=>{let r=O7(t,e,n);return qu({type:2,toast:r}),r.id},Te=(e,t)=>Sp("blank")(e,t);Te.error=Sp("error");Te.success=Sp("success");Te.loading=Sp("loading");Te.custom=Sp("custom");Te.dismiss=e=>{qu({type:3,toastId:e})};Te.remove=e=>qu({type:4,toastId:e});Te.promise=(e,t,n)=>{let r=Te.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(Te.success(z0(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Te.error(z0(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var R7=(e,t)=>{qu({type:1,toast:{id:e,height:t}})},F7=()=>{qu({type:5,time:Date.now()})},$7=e=>{let{toasts:t,pausedAt:n}=D7(e);j.useEffect(()=>{if(n)return;let s=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Te.dismiss(l.id);return}return setTimeout(()=>Te.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=j.useCallback(()=>{n&&qu({type:6,time:Date.now()})},[n]),i=j.useCallback((s,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:f}=a||{},p=t.filter(m=>(m.position||f)===(s.position||f)&&m.height),g=p.findIndex(m=>m.id===s.id),w=p.filter((m,S)=>S<g&&m.visible).length;return p.filter(m=>m.visible).slice(...l?[w+1]:[0,w]).reduce((m,S)=>m+(S.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:R7,startPause:F7,endPause:r,calculateOffset:i}}},B7=il`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,U7=il`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,z7=il`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,q7=Rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${B7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${U7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${z7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,W7=il`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,H7=Rc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${W7} 1s linear infinite;
`,G7=il`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,V7=il`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Y7=Rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${G7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${V7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,K7=Rc("div")`
  position: absolute;
`,J7=Rc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,X7=il`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Q7=Rc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${X7} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Z7=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?j.createElement(Q7,null,t):t:n==="blank"?null:j.createElement(J7,null,j.createElement(H7,{...r}),n!=="loading"&&j.createElement(K7,null,n==="error"?j.createElement(q7,{...r}):j.createElement(Y7,{...r})))},eT=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,tT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,nT="0%{opacity:0;} 100%{opacity:1;}",rT="0%{opacity:1;} 100%{opacity:0;}",iT=Rc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sT=Rc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,aT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=HS()?[nT,rT]:[eT(n),tT(n)];return{animation:t?`${il(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${il(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},oT=j.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?aT(e.position||t||"top-center",e.visible):{opacity:0},s=j.createElement(Z7,{toast:e}),a=j.createElement(sT,{...e.ariaProps},z0(e.message,e));return j.createElement(iT,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:a}):j.createElement(j.Fragment,null,s,a))});C7(j.createElement);var lT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=j.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return j.createElement("div",{ref:s,className:t,style:n},i)},cT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:HS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},uT=kg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Mm=16,dT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=$7(n);return j.createElement("div",{style:{position:"fixed",zIndex:9999,top:Mm,left:Mm,right:Mm,bottom:Mm,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(f=>{let p=f.position||t,g=c.calculateOffset(f,{reverseOrder:e,gutter:r,defaultPosition:t}),w=cT(p,g);return j.createElement(lT,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?uT:"",style:w},f.type==="custom"?z0(f.message,f):i?i(f):j.createElement(oT,{toast:f,position:p}))}))};const fT="modulepreload",hT=function(e){return"/"+e},Fb={},sl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=hT(c),c in Fb)return;Fb[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":fT,f||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((w,m)=>{g.addEventListener("load",w),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},pT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class E5 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class mT extends E5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gT extends E5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class vT extends E5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var H2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(H2||(H2={}));var yT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class wT{constructor(t,{headers:n={},customFetch:r,region:i=H2.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=pT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return yT(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f}).catch(S=>{throw new mT(S)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new gT(p);if(!p.ok)throw new vT(p);let w=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return w==="application/json"?m=yield p.json():w==="application/octet-stream"?m=yield p.blob():w==="text/event-stream"?m=p:w==="multipart/form-data"?m=yield p.formData():m=yield p.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}}var ss={},j5={},Eg={},Np={},jg={},Cg={},xT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bf=xT();const bT=bf.fetch,GS=bf.fetch.bind(bf),VS=bf.Headers,_T=bf.Request,ST=bf.Response,Af=Object.freeze(Object.defineProperty({__proto__:null,Headers:VS,Request:_T,Response:ST,default:GS,fetch:bT},Symbol.toStringTag,{value:"Module"})),NT=YA(Af);var Ag={};Object.defineProperty(Ag,"__esModule",{value:!0});class kT extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Ag.default=kT;var YS=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cg,"__esModule",{value:!0});const ET=YS(NT),jT=YS(Ag);let CT=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ET.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,l,c;let f=null,p=null,g=null,w=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const _=await s.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const k=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),C=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");k&&C&&C.length>1&&(g=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,w=406,m="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const k=await s.text();try{f=JSON.parse(k),Array.isArray(f)&&s.status===404&&(p=[],f=null,w=200,m="OK")}catch{s.status===404&&k===""?(w=204,m="No Content"):f={message:k}}if(f&&this.isMaybeSingle&&(!((c=f==null?void 0:f.details)===null||c===void 0)&&c.includes("0 rows"))&&(f=null,w=200,m="OK"),f&&this.shouldThrowOnError)throw new jT.default(f)}return{error:f,data:p,count:g,status:w,statusText:m}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,l,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};Cg.default=CT;var AT=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jg,"__esModule",{value:!0});const LT=AT(Cg);let PT=class extends LT.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${f}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jg.default=PT;var TT=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Np,"__esModule",{value:!0});const MT=TT(jg);let IT=class extends MT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Np.default=IT;var DT=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eg,"__esModule",{value:!0});const gh=DT(Np);let OT=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new gh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(c.length>0){const f=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new gh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new gh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new gh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Eg.default=OT;var Lg={},Pg={};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.version=void 0;Pg.version="0.0.0-automated";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.DEFAULT_HEADERS=void 0;const RT=Pg;Lg.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${RT.version}`};var KS=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j5,"__esModule",{value:!0});const FT=KS(Eg),$T=KS(Np),BT=Lg;let UT=class JS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},BT.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new FT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new JS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{l.searchParams.append(p,g)})):(a="POST",c=n);const f=Object.assign({},this.headers);return s&&(f.Prefer=`count=${s}`),new $T.default({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};j5.default=UT;var Lf=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ss,"__esModule",{value:!0});ss.PostgrestError=ss.PostgrestBuilder=ss.PostgrestTransformBuilder=ss.PostgrestFilterBuilder=ss.PostgrestQueryBuilder=ss.PostgrestClient=void 0;const XS=Lf(j5);ss.PostgrestClient=XS.default;const QS=Lf(Eg);ss.PostgrestQueryBuilder=QS.default;const ZS=Lf(Np);ss.PostgrestFilterBuilder=ZS.default;const eN=Lf(jg);ss.PostgrestTransformBuilder=eN.default;const tN=Lf(Cg);ss.PostgrestBuilder=tN.default;const nN=Lf(Ag);ss.PostgrestError=nN.default;var zT=ss.default={PostgrestClient:XS.default,PostgrestQueryBuilder:QS.default,PostgrestFilterBuilder:ZS.default,PostgrestTransformBuilder:eN.default,PostgrestBuilder:tN.default,PostgrestError:nN.default};const{PostgrestClient:qT,PostgrestQueryBuilder:wq,PostgrestFilterBuilder:xq,PostgrestTransformBuilder:bq,PostgrestBuilder:_q}=zT,WT="2.10.7",HT={"X-Client-Info":`realtime-js/${WT}`},GT="1.0.0",rN=1e4,VT=1e3;var of;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(of||(of={}));var Cs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Cs||(Cs={}));var Ca;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ca||(Ca={}));var G2;(function(e){e.websocket="websocket"})(G2||(G2={}));var _u;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_u||(_u={}));class YT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:f}}}class iN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Fn||(Fn={}));const $b=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=KT(a,e,t,i),s),{})},KT=(e,t,n,r)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?sN(s,a):V2(a)},sN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return ZT(t,n)}switch(e){case Fn.bool:return JT(t);case Fn.float4:case Fn.float8:case Fn.int2:case Fn.int4:case Fn.int8:case Fn.numeric:case Fn.oid:return XT(t);case Fn.json:case Fn.jsonb:return QT(t);case Fn.timestamp:return eM(t);case Fn.abstime:case Fn.date:case Fn.daterange:case Fn.int4range:case Fn.int8range:case Fn.money:case Fn.reltime:case Fn.text:case Fn.time:case Fn.timestamptz:case Fn.timetz:case Fn.tsrange:case Fn.tstzrange:return V2(t);default:return V2(t)}},V2=e=>e,JT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},XT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ZT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>sN(t,l))}return e},eM=e=>typeof e=="string"?e.replace(" ","T"):e,aN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class pv{constructor(t,n,r={},i=rN){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bb||(Bb={}));class Fh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Fh.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Fh.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(s,(f,p)=>{a[f]||(c[f]=p)}),this.map(a,(f,p)=>{const g=s[f];if(g){const w=p.map(C=>C.presence_ref),m=g.map(C=>C.presence_ref),S=p.filter(C=>m.indexOf(C.presence_ref)<0),k=g.filter(C=>w.indexOf(C.presence_ref)<0);S.length>0&&(l[f]=S),k.length>0&&(c[f]=k)}else l[f]=p}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var f;const p=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(c),p.length>0){const g=t[l].map(m=>m.presence_ref),w=p.filter(m=>g.indexOf(m.presence_ref)<0);t[l].unshift(...w)}r(l,p,c)}),this.map(a,(l,c)=>{let f=t[l];if(!f)return;const p=c.map(g=>g.presence_ref);f=f.filter(g=>p.indexOf(g.presence_ref)<0),t[l]=f,i(l,f,c),f.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ub;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ub||(Ub={}));var zb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zb||(zb={}));var qb;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qb||(qb={}));class C5{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Cs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new pv(this,Ca.join,this.params,this.timeout),this.rejoinTimer=new iN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cs.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ca.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Fh(this),this.broadcastEndpointURL=aN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},f={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var g;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const w=this.bindings.postgres_changes,m=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,S=[];for(let k=0;k<m;k++){const C=w[k],{filter:{event:_,schema:N,table:L,filter:R}}=C,J=p&&p[k];if(J&&J.event===_&&J.schema===N&&J.table===L&&J.filter===R)S.push(Object.assign(Object.assign({},C),{id:J.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Cs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ca.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new pv(this,Ca.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new pv(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:f,join:p}=Ca;if(r&&[l,c,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let w=this._onMessage(a,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var S,k,C;return((S=m.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(k=m.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(m=>m.callback(w,r)):(s=this.bindings[a])===null||s===void 0||s.filter(m=>{var S,k,C,_,N,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const R=m.id,J=(S=m.filter)===null||S===void 0?void 0:S.event;return R&&((k=n.ids)===null||k===void 0?void 0:k.includes(R))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const R=(N=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return R==="*"||R===((L=n==null?void 0:n.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:k,table:C,commit_timestamp:_,type:N,errors:L}=S;w=Object.assign(Object.assign({},{schema:k,table:C,commit_timestamp:_,eventType:N,new:{},old:{},errors:L}),this._getPayloadRecords(S))}m.callback(w,r)})}_isClosed(){return this.state===Cs.closed}_isJoined(){return this.state===Cs.joined}_isJoining(){return this.state===Cs.joining}_isLeaving(){return this.state===Cs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&C5.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ca.close,{},t)}_onError(t){this._on(Ca.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=$b(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=$b(t.columns,t.old_record)),n}}const tM=()=>{},nM=typeof WebSocket<"u",rM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iM{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=HT,this.params={},this.timeout=rN,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=tM,this.conn=null,this.sendBuffer=[],this.serializer=new YT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>sl(async()=>{const{default:c}=await Promise.resolve().then(()=>Af);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${G2.websocket}`,this.httpEndpoint=aN(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new iN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(nM){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new sM(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),sl(async()=>{const{default:t}=await import("./browser-Br2KY0lW.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case of.connecting:return _u.Connecting;case of.open:return _u.Open;case of.closing:return _u.Closing;default:return _u.Closed}}isConnected(){return this.connectionState()===_u.Open}channel(t,n={config:{}}){const r=new C5(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Ca.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:GT}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ca.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(VT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([rM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class sM{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=of.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class A5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Gr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class aM extends A5{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Y2 extends A5{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var oM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const oN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},lM=()=>oM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sl(()=>Promise.resolve().then(()=>Af),void 0)).Response:Response}),K2=e=>{if(Array.isArray(e))return e.map(n=>K2(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=K2(r)}),t};var Wu=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const mv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cM=(e,t,n)=>Wu(void 0,void 0,void 0,function*(){const r=yield lM();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new aM(mv(i),e.status||500))}).catch(i=>{t(new Y2(mv(i),i))}):t(new Y2(mv(e),e))}),uM=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function kp(e,t,n,r,i,s){return Wu(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,uM(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>cM(c,l,r))})})}function q0(e,t,n,r){return Wu(this,void 0,void 0,function*(){return kp(e,"GET",t,n,r)})}function sc(e,t,n,r,i){return Wu(this,void 0,void 0,function*(){return kp(e,"POST",t,r,i,n)})}function dM(e,t,n,r,i){return Wu(this,void 0,void 0,function*(){return kp(e,"PUT",t,r,i,n)})}function fM(e,t,n,r){return Wu(this,void 0,void 0,function*(){return kp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lN(e,t,n,r,i){return Wu(this,void 0,void 0,function*(){return kp(e,"DELETE",t,r,i,n)})}var rs=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const hM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pM{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=oN(i)}uploadOrUpdate(t,n,r,i){return rs(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Wb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),g=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:s,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),w=yield g.json();return g.ok?{data:{path:f,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(s){if(Gr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return rs(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Wb.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const g=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:p}),w=yield g.json();return g.ok?{data:{path:s,fullPath:w.Key},error:null}:{data:null,error:w}}catch(c){if(Gr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return rs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield sc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new A5("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Gr(r))return{data:null,error:r};throw r}})}update(t,n,r){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return rs(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Gr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return rs(this,void 0,void 0,function*(){try{return{data:{path:(yield sc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Gr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return rs(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield sc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Gr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return rs(this,void 0,void 0,function*(){try{const i=yield sc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Gr(i))return{data:null,error:i};throw i}})}download(t,n){return rs(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield q0(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Gr(l))return{data:null,error:l};throw l}})}info(t){return rs(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield q0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:K2(r),error:null}}catch(r){if(Gr(r))return{data:null,error:r};throw r}})}exists(t){return rs(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield fM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Gr(r)&&r instanceof Y2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(t){return rs(this,void 0,void 0,function*(){try{return{data:yield lN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Gr(n))return{data:null,error:n};throw n}})}list(t,n,r){return rs(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},hM),n),{prefix:t||""});return{data:yield sc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Gr(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const mM="2.7.1",gM={"X-Client-Info":`storage-js/${mM}`};var Td=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class vM{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},gM),n),this.fetch=oN(r)}listBuckets(){return Td(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Gr(t))return{data:null,error:t};throw t}})}getBucket(t){return Td(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Gr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Td(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Td(this,void 0,void 0,function*(){try{return{data:yield dM(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Td(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Gr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Td(this,void 0,void 0,function*(){try{return{data:yield lN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Gr(n))return{data:null,error:n};throw n}})}}class yM extends vM{constructor(t,n={},r){super(t,n,r)}from(t){return new pM(this.url,this.headers,t,this.fetch)}}const wM="2.46.1";let jh="";typeof Deno<"u"?jh="deno":typeof document<"u"?jh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jh="react-native":jh="node";const xM={"X-Client-Info":`supabase-js-${jh}/${wM}`},bM={headers:xM},_M={schema:"public"},SM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},NM={};var kM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const EM=e=>{let t;return e?t=e:typeof fetch>"u"?t=GS:t=fetch,(...n)=>t(...n)},jM=()=>typeof Headers>"u"?VS:Headers,CM=(e,t,n)=>{const r=EM(n),i=jM();return(s,a)=>kM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var AM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};function LM(e){return e.replace(/\/$/,"")}function PM(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:l,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},f),s),accessToken:()=>AM(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const cN="2.65.1",TM="http://localhost:9999",MM="supabase.auth.token",IM={"X-Client-Info":`gotrue-js/${cN}`},Hb=10,J2="X-Supabase-Api-Version",uN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function DM(e){return Math.round(Date.now()/1e3)+e}function OM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Na=()=>typeof document<"u",hu={tested:!1,writable:!1},$h=()=>{if(!Na())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hu.tested)return hu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hu.tested=!0,hu.writable=!0}catch{hu.tested=!0,hu.writable=!1}return hu.writable};function gv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const dN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},RM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fN=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Im=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dm=async(e,t)=>{await e.removeItem(t)};function FM(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,l,c,f,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)a=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),f=t.indexOf(e.charAt(p++)),r=a<<2|l>>4,i=(l&15)<<4|c>>2,s=(c&3)<<6|f,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),f!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Tg{constructor(){this.promise=new Tg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Tg.promiseConstructor=Promise;function Gb(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(FM(r))}async function $M(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function BM(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function UM(e){return("0"+e.toString(16)).substr(-2)}function zM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,UM).join("")}async function qM(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function WM(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function HM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await qM(e);return WM(n)}async function Md(e,t,n=!1){const r=zM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await fN(e,`${t}-code-verifier`,i);const s=await HM(r);return[s,r===s?"plain":"s256"]}const GM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VM(e){const t=e.headers.get(J2);if(!t||!t.match(GM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class L5 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Gt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class YM extends L5{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function KM(e){return Gt(e)&&e.name==="AuthApiError"}class hN extends L5{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Hu extends L5{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class tc extends Hu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function JM(e){return Gt(e)&&e.name==="AuthSessionMissingError"}class vv extends Hu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Om extends Hu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Rm extends Hu{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vb extends Hu{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class X2 extends Hu{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function yv(e){return Gt(e)&&e.name==="AuthRetryableFetchError"}class Yb extends Hu{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var XM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const yu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QM=[502,503,504];async function Kb(e){var t;if(!RM(e))throw new X2(yu(e),0);if(QM.includes(e.status))throw new X2(yu(e),e.status);let n;try{n=await e.json()}catch(s){throw new hN(yu(s),s)}let r;const i=VM(e);if(i&&i.getTime()>=uN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yb(yu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new tc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Yb(yu(n),e.status,n.weak_password.reasons);throw new YM(yu(n),e.status||500,r)}const ZM=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function nn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[J2]||(s[J2]=uN["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await eI(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function eI(e,t,n,r,i,s){const a=ZM(t,r,i,s);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new X2(yu(c),0)}if(l.ok||await Kb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Kb(c)}}function nc(e){var t;let n=null;iI(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=DM(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Jb(e){const t=nc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function uc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function tI(e){return{data:e,error:null}}function nI(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=XM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function rI(e){return e}function iI(e){return e.access_token&&e.refresh_token&&e.expires_in}var sI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class aI{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=dN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await nn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await nn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:uc})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=sI(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await nn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Gt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await nn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:uc})}catch(n){if(Gt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,l,c;try{const f={nextPage:null,lastPage:0,total:0},p=await nn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:rI});if(p.error)throw p.error;const g=await p.json(),w=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);f[`${C}Page`]=k}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Gt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){try{return await nn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:uc})}catch(n){if(Gt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await nn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:uc})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await nn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:uc})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await nn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await nn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}}}const oI={getItem:e=>$h()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{$h()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{$h()&&globalThis.localStorage.removeItem(e)}};function Xb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function lI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Id={debug:!!(globalThis&&$h()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class cI extends pN{}async function uI(e,t,n){Id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Id.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Id.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Id.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new cI(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Id.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}lI();const dI={url:TM,storageKey:MM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},vh=30*1e3,Qb=3;async function Zb(e,t,n){return await n()}class dp{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dp.nextInstanceID,dp.nextInstanceID+=1,this.instanceID>0&&Na()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},dI),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new aI({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=dN(i.fetch),this.lock=i.lock||Zb,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Na()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=uI:this.lock=Zb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:$h()?this.storage=oI:(this.memoryStorage={},this.storage=Xb(this.memoryStorage)):(this.memoryStorage={},this.storage=Xb(this.memoryStorage)),Na()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Na()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Gt(t)?{error:t}:{error:new hN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await nn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:nc}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(Gt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:p,password:g,options:w}=t;let m=null,S=null;this.flowType==="pkce"&&([m,S]=await Md(this.storage,this.storageKey)),s=await nn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:p,password:g,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:m,code_challenge_method:S},xform:nc})}else if("phone"in t){const{phone:p,password:g,options:w}=t;s=await nn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(i=w==null?void 0:w.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:nc})}else throw new Om("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(Gt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:l}=t;n=await nn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jb})}else if("phone"in t){const{phone:s,password:a,options:l}=t;n=await nn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Jb})}else throw new Om("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Im(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await nn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:nc});if(await Dm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new vv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Gt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,l=await nn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:nc}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vv}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:l,options:c}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Md(this.storage,this.storageKey));const{error:g}=await nn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:l,options:c}=t,{data:f,error:p}=await nn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Om("You must provide either an email or phone number.")}catch(l){if(Gt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await nn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:nc});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Gt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Md(this.storage,this.storageKey)),await nn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:tI})}catch(s){if(Gt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new tc;const{error:i}=await nn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Gt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await nn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:l}=await nn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Om("You must provide either an email or phone number and a type")}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Im(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,p))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await nn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:uc}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tc}:await nn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:uc})})}catch(n){if(Gt(n))return JM(n)&&(await this._removeSession(),await Dm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new tc;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Md(this.storage,this.storageKey));const{data:f,error:p}=await nn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:uc});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Gt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Gb(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new tc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Gb(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Gt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new tc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Gt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!Na())throw new Rm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Rm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Vb("Not a valid PKCE flow url.");const n=gv(window.location.href);if(t){if(!n.code)throw new Vb("No code detected.");const{data:N,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:N.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Rm(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:f}=n;if(!s||!l||!a||!f)throw new Rm("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(l);let w=p+g;c&&(w=parseInt(c));const m=w-p;m*1e3<=vh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${g}s`);const S=w-g;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,p);const{data:k,error:C}=await this._getUser(s);if(C)throw C;const _={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:w,refresh_token:a,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:n.type},error:null}}catch(n){if(Gt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=gv(window.location.href);return!!(Na()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=gv(window.location.href),n=await Im(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(KM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Dm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=OM(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Md(this.storage,this.storageKey,!0));try{return await nn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Gt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,c,f,p;const{data:g,error:w}=s;if(w)throw w;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await nn(this.fetch,"GET",m,{headers:this.headers,jwt:(p=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Na()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Gt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await nn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await BM(async i=>(i>0&&await $M(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await nn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:nc})),(i,s)=>{const a=200*Math.pow(2,i);return s&&yv(s)&&Date.now()+a-r<vh})}catch(r){if(this._debug(n,"error",r),Gt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Na()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Im(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+Hb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Hb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),yv(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new tc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Tg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new tc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),Gt(s)){const a={session:null,error:s};return yv(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fN(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Dm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Na()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/vh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${vh}ms, refresh threshold is ${Qb} ticks`),i<=Qb&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Na()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Md(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await nn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:f}=await nn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:l}=await nn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await nn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}dp.nextInstanceID=0;const fI=dp;class hI extends fI{constructor(t){super(t)}}var pI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(g){a(g)}}function c(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class mI{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=LM(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:_M,realtime:NM,auth:Object.assign(Object.assign({},SM),{storageKey:c}),global:bM},p=PM(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=CM(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new qT(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new wT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new yM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return pI(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:l,debug:c},f,p){var g;const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hI({url:this.authUrl,headers:Object.assign(Object.assign({},w),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:l,debug:c,fetch:p,hasCustomAuthorizationHeader:(g="Authorization"in this.headers)!==null&&g!==void 0?g:!1})}_initRealtimeClient(t){return new iM(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gI=(e,t,n)=>new mI(e,t,n),vI="https://vrzgwnchqdxwgennshmu.supabase.co",yI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",Xe=gI(vI,yI,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://nimble-alfajores-99f196.netlify.app"}}),wI={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GENIUS_ACCESS_TOKEN:"your_genius_token_here",VITE_GETSONGBPM_API_KEY:"your_getsongbpm_api_key_here",VITE_GETSONGKEY_API_KEY:"your_getsongkey_api_key_here",VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173"},e_=e=>{let t;const n=new Set,r=(p,g)=>{const w=typeof p=="function"?p(t):p;if(!Object.is(w,t)){const m=t;t=g??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(S=>S(t,m))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(wI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,c);return c},xI=e=>e?e_(e):e_;var mN={exports:{}},gN={},vN={exports:{}},yN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=j;function bI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _I=typeof Object.is=="function"?Object.is:bI,SI=_f.useState,NI=_f.useEffect,kI=_f.useLayoutEffect,EI=_f.useDebugValue;function jI(e,t){var n=t(),r=SI({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return kI(function(){i.value=n,i.getSnapshot=t,wv(i)&&s({inst:i})},[e,n,t]),NI(function(){return wv(i)&&s({inst:i}),e(function(){wv(i)&&s({inst:i})})},[e]),EI(n),n}function wv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_I(e,n)}catch{return!0}}function CI(e,t){return t()}var AI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CI:jI;yN.useSyncExternalStore=_f.useSyncExternalStore!==void 0?_f.useSyncExternalStore:AI;vN.exports=yN;var LI=vN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg=j,PI=LI;function TI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var MI=typeof Object.is=="function"?Object.is:TI,II=PI.useSyncExternalStore,DI=Mg.useRef,OI=Mg.useEffect,RI=Mg.useMemo,FI=Mg.useDebugValue;gN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=DI(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=RI(function(){function c(m){if(!f){if(f=!0,p=m,m=r(m),i!==void 0&&a.hasValue){var S=a.value;if(i(S,m))return g=S}return g=m}if(S=g,MI(p,m))return S;var k=r(m);return i!==void 0&&i(S,k)?S:(p=m,g=k)}var f=!1,p,g,w=n===void 0?null:n;return[function(){return c(t())},w===null?void 0:function(){return c(w())}]},[t,n,r,i]);var l=II(e,s[0],s[1]);return OI(function(){a.hasValue=!0,a.value=l},[l]),FI(l),l};mN.exports=gN;var $I=mN.exports;const BI=y3($I),wN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GENIUS_ACCESS_TOKEN:"your_genius_token_here",VITE_GETSONGBPM_API_KEY:"your_getsongbpm_api_key_here",VITE_GETSONGKEY_API_KEY:"your_getsongkey_api_key_here",VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173"},{useDebugValue:UI}=pt,{useSyncExternalStoreWithSelector:zI}=BI;let t_=!1;const qI=e=>e;function WI(e,t=qI,n){(wN?"production":void 0)!=="production"&&n&&!t_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),t_=!0);const r=zI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return UI(r),r}const n_=e=>{(wN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?xI(e):e,n=(r,i)=>WI(t,r,i);return Object.assign(n,t),n},HI=e=>e?n_(e):n_,Os=HI(e=>({user:null,session:null,loading:!0,setUser:t=>{console.log("Setting user in store:",t),e({user:t})},setSession:t=>{console.log("Setting session in store:",t),e({session:t})},signOut:async()=>{try{await Xe.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));class GI{constructor(){this.clientId="2f84f95d5e0943afb6e72b6758adedd3",this.redirectUri="http://127.0.0.1:5173",this.scopes=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-modify-playback-state","user-read-playback-state","streaming"].join(" "),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.loadTokensFromStorage()}async getAuthUrl(){const t=this.generateRandomString(16),n=this.generateRandomString(128);localStorage.setItem("spotify_return_url",window.location.href),localStorage.setItem("spotify_auth_state",t),localStorage.setItem("spotify_code_verifier",n);const r=await this.generateCodeChallenge(n);return`https://accounts.spotify.com/authorize?${new URLSearchParams({response_type:"code",client_id:this.clientId,scope:this.scopes,redirect_uri:this.redirectUri,state:t,code_challenge_method:"S256",code_challenge:r}).toString()}`}async handleAuthCallback(t,n){const r=localStorage.getItem("spotify_auth_state"),i=localStorage.getItem("spotify_code_verifier");if(n!==r)throw new Error("State mismatch");if(!i)throw new Error("Code verifier not found");try{const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:this.redirectUri,client_id:this.clientId,code_verifier:i})});if(!s.ok)throw new Error("Failed to exchange code for tokens");const a=await s.json();return this.accessToken=a.access_token,this.refreshToken=a.refresh_token,this.tokenExpiry=Date.now()+a.expires_in*1e3,this.saveTokensToStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),!0}catch(s){return console.error("Error in Spotify auth callback:",s),!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken,client_id:this.clientId})});if(!t.ok)throw new Error("Failed to refresh access token");const n=await t.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,n.refresh_token&&(this.refreshToken=n.refresh_token),this.saveTokensToStorage(),!0}catch(t){return console.error("Error refreshing access token:",t),this.logout(),!1}}async ensureValidToken(){return this.accessToken?this.tokenExpiry&&Date.now()>=this.tokenExpiry-6e4?await this.refreshAccessToken():!0:!1}async apiRequest(t,n={}){if(!await this.ensureValidToken())throw new Error("No valid Spotify token available");const r=await fetch(`https://api.spotify.com/v1${t}`,{...n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",...n.headers}});if(!r.ok){if(r.status===401&&await this.refreshAccessToken())return this.apiRequest(t,n);throw new Error(`Spotify API error: ${r.status} ${r.statusText}`)}return r.headers.get("content-length")==="0"||r.status===204?null:r.json()}async getCurrentUser(){return this.apiRequest("/me")}async searchTracks(t,n=20){const r=new URLSearchParams({q:t,type:"track",limit:n.toString()});return(await this.apiRequest(`/search?${r}`)).tracks.items}async getTrack(t){return this.apiRequest(`/tracks/${t}`)}async getAudioFeatures(t){return this.apiRequest(`/audio-features/${t}`)}async createPlaylist(t,n,r=!1){const i=await this.getCurrentUser();return this.apiRequest(`/users/${i.id}/playlists`,{method:"POST",body:JSON.stringify({name:t,description:n,public:r})})}async addTracksToPlaylist(t,n){await this.apiRequest(`/playlists/${t}/tracks`,{method:"POST",body:JSON.stringify({uris:n})})}async playTrack(t,n){const r={uris:[t]};n&&(r.device_id=n),await this.apiRequest("/me/player/play",{method:"PUT",body:JSON.stringify(r)})}async pausePlayback(){await this.apiRequest("/me/player/pause",{method:"PUT"})}async resumePlayback(){await this.apiRequest("/me/player/play",{method:"PUT"})}async getPlaybackState(){try{return await this.apiRequest("/me/player")}catch{return null}}async getUserPlaylists(t=50){return(await this.apiRequest(`/me/playlists?limit=${t}`)).items}async getPlaylistTracks(t,n=100){return(await this.apiRequest(`/playlists/${t}/tracks?limit=${n}`)).items.map(i=>i.track)}isAuthenticated(){return!!(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}logout(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.clearTokensFromStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier")}async generateCodeChallenge(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(r)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}generateRandomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((i,s)=>i+n[s%n.length],"")}saveTokensToStorage(){this.accessToken&&localStorage.setItem("spotify_access_token",this.accessToken),this.refreshToken&&localStorage.setItem("spotify_refresh_token",this.refreshToken),this.tokenExpiry&&localStorage.setItem("spotify_token_expiry",this.tokenExpiry.toString())}loadTokensFromStorage(){this.accessToken=localStorage.getItem("spotify_access_token"),this.refreshToken=localStorage.getItem("spotify_refresh_token");const t=localStorage.getItem("spotify_token_expiry");this.tokenExpiry=t?parseInt(t):null}clearTokensFromStorage(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry")}}const Lr=new GI;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),In=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...f},p)=>j.createElement("svg",{ref:p,...VI,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${YI(e)}`,l].join(" "),...f},[...t.map(([g,w])=>j.createElement(g,w)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=In("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=In("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=In("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=In("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=In("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=In("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=In("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=In("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=In("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=In("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=In("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=In("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=In("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=In("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=In("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=In("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=In("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=In("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=In("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=In("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=In("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=In("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=In("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=In("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=In("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=In("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=In("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function tD(){const[e,t]=j.useState([]),[n,r]=j.useState(!1),i=Ra(),{user:s}=Os(),[a,l]=j.useState(null);j.useEffect(()=>{if(s)return console.log("Inicializando NotificationBell para usuario:",s.id),c(),f(),()=>{a&&(console.log("Limpiando suscripción de notificaciones"),a.unsubscribe())}},[s]);const c=async()=>{const{data:g,error:w}=await Xe.from("notifications").select("*").eq("user_id",s==null?void 0:s.id).eq("read",!1).order("created_at",{ascending:!1});if(w){console.error("Error fetching notifications:",w);return}t(g||[])},f=async()=>{try{a&&await a.unsubscribe(),console.log("Configurando suscripción en tiempo real para:",s==null?void 0:s.id);const g=Xe.channel(`notifications:${s==null?void 0:s.id}`,{config:{broadcast:{self:!0}}});g.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Nueva notificación recibida:",w);const m=w.new;t(S=>[m,...S]),Te.custom(S=>d.jsxs("div",{className:`${S.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[d.jsx(i_,{className:"h-6 w-6 text-indigo-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:m.title}),d.jsx("p",{className:"text-sm text-gray-500",children:m.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Notificación actualizada:",w),t(m=>m.map(S=>S.id===w.new.id?w.new:S))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Notificación eliminada:",w),t(m=>m.filter(S=>S.id!==w.old.id))}),console.log("Iniciando suscripción..."),await g.subscribe(w=>{console.log("Estado de suscripción:",w)}),l(g)}catch(g){console.error("Error al configurar suscripción en tiempo real:",g)}},p=async(g,w)=>{try{const{error:m}=await Xe.rpc("handle_group_invitation",{p_group_member_id:g.data.group_member_id,p_accept:w});if(m)throw m;await Xe.from("notifications").update({read:!0}).eq("id",g.id),t(S=>S.filter(k=>k.id!==g.id)),Te.success(w?"Invitación aceptada":"Invitación rechazada"),w&&i(`/group/${g.data.group_id}`)}catch(m){Te.error(m.message)}};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[d.jsx(i_,{className:"w-6 h-6"}),e.length>0&&d.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:d.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?d.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(g=>d.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:g.title}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:g.message}),g.type==="group_invitation"&&d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>p(g,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),d.jsx("button",{onClick:()=>p(g,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},g.id))})})]})}function nD(){const{user:e,signOut:t}=Os(),n=Ra(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return d.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs(Ec,{to:"/",className:"flex items-center space-x-2",children:[d.jsx(ZI,{className:"h-8 w-8"}),d.jsx("span",{className:"font-bold text-xl",children:"Band Manager"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[e&&d.jsx(tD,{}),e?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-sm",children:e.email}),d.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[d.jsx(ey,{className:"h-5 w-5"}),d.jsx("span",{children:"Sign Out"})]})]}):d.jsxs("div",{className:"space-x-4",children:[d.jsx(Ec,{to:"/login",className:"hover:text-indigo-200 transition-colors",children:"Login"}),d.jsx(Ec,{to:"/register",className:"hover:text-indigo-200 transition-colors",children:"Register"}),!1]})]})]})})})}function Gn({label:e,error:t,className:n="",...r}){return d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),d.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&d.jsx("p",{className:"text-sm text-red-600",children:t})]})}function yt({children:e,loading:t,variant:n="primary",fullWidth:r,className:i="",...s}){const a="flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",l={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return d.jsxs("button",{className:`${a} ${l[n]} ${r?"w-full":""} ${i}`,disabled:t,...s,children:[t&&d.jsx(go,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function rD(){var w;const[e,t]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(!1),a=Ra(),l=wo(),c=(w=l.state)==null?void 0:w.returnTo,{user:f,setUser:p}=Os();console.log("Login component state:",{returnTo:c,location:l}),j.useEffect(()=>{if(f){const m=c||"/";console.log("User authenticated, redirecting to:",m),a(m,{replace:!0})}},[f,c,a]);const g=async m=>{m.preventDefault(),s(!0);try{const{data:S,error:k}=await Xe.auth.signInWithPassword({email:e,password:n});if(k)throw k;p(S.user),Te.success("Successfully logged in!");const C=c||"/";console.log("Login successful, redirecting to:",C),a(C,{replace:!0})}catch(S){Te.error(S.message||"Failed to login")}finally{s(!1)}};return f?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),d.jsxs("form",{onSubmit:g,className:"space-y-6",children:[d.jsx(Gn,{label:"Email",type:"email",value:e,onChange:m=>t(m.target.value),required:!0,placeholder:"your@email.com"}),d.jsx(Gn,{label:"Password",type:"password",value:n,onChange:m=>r(m.target.value),required:!0,placeholder:"••••••••"}),d.jsx(yt,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Ec,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"¿Olvidaste tu contraseña?"})}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",d.jsx(Ec,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function iD(){const[e]=zS(),t=e.get("email");e.get("token");const[n,r]=j.useState(t||""),[i,s]=j.useState(""),[a,l]=j.useState(""),[c,f]=j.useState(!1),p=Ra(),{user:g}=Os();j.useEffect(()=>{g&&p("/")},[g,p]);const w=async m=>{m.preventDefault(),f(!0);try{const{data:S,error:k}=await Xe.auth.signUp({email:n,password:i,options:{data:{name:a,role:"user"}}});if(k)throw k;if(S.user){const{data:C,error:_}=await Xe.rpc("create_new_user",{user_id:S.user.id,user_email:n,user_name:a,user_role:"user"});if(_)throw _;Te.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(S){console.error("Registration error:",S),S.message.includes("User already registered")?Te.error("This email is already registered. Please try logging in instead."):S.message.includes("rate limit")?Te.error("Too many registration attempts. Please try again in a few minutes."):Te.error("Registration failed. Please try again.")}finally{f(!1)}};return g?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsx(Gn,{label:"Name",type:"text",value:a,onChange:m=>l(m.target.value),required:!0,placeholder:"John Doe"}),d.jsx(Gn,{label:"Email",type:"email",value:n,onChange:m=>r(m.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),d.jsx(Gn,{label:"Password",type:"password",value:i,onChange:m=>s(m.target.value),required:!0,placeholder:"••••••••",minLength:6}),d.jsx(yt,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),d.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",d.jsx(Ec,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var sD=Object.defineProperty,aD=(e,t,n)=>t in e?sD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xv=(e,t,n)=>(aD(e,typeof t!="symbol"?t+"":t,n),n);let oD=class{constructor(){xv(this,"current",this.detect()),xv(this,"handoffState","pending"),xv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Tu=new oD;function Dg(e){return Tu.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Og(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Fc(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Og(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Fc();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function T5(){let[e]=j.useState(Fc);return j.useEffect(()=>()=>e.dispose(),[e]),e}let Ri=(e,t)=>{Tu.isServer?j.useEffect(e,t):j.useLayoutEffect(e,t)};function Gu(e){let t=j.useRef(e);return Ri(()=>{t.current=e},[e]),t}let or=function(e){let t=Gu(e);return pt.useCallback((...n)=>t.current(...n),[t])},lD=j.createContext(void 0);function cD(){return j.useContext(lD)}function ny(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ac(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ac),r}var G0=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(G0||{}),mc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(mc||{});function sa(){let e=dD();return j.useCallback(t=>uD({mergeRefs:e,...t}),[e])}function uD({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??fD;let c=_N(t,e);if(s)return Fm(c,n,r,a,l);let f=i??0;if(f&2){let{static:p=!1,...g}=c;if(p)return Fm(g,n,r,a,l)}if(f&1){let{unmount:p=!0,...g}=c;return Ac(p?0:1,{0(){return null},1(){return Fm({...g,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Fm(c,n,r,a,l)}function Fm(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=bv(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let g={};if(t){let w=!1,m=[];for(let[S,k]of Object.entries(t))typeof k=="boolean"&&(w=!0),k===!0&&m.push(S.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(w){g["data-headlessui-state"]=m.join(" ");for(let S of m)g[`data-${S}`]=""}}if(s===j.Fragment&&(Object.keys(wu(c)).length>0||Object.keys(wu(g)).length>0))if(!j.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(wu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(wu(c)).concat(Object.keys(wu(g))).map(w=>`  - ${w}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(w=>`  - ${w}`).join(`
`)].join(`
`))}else{let w=p.props,m=w==null?void 0:w.className,S=typeof m=="function"?(..._)=>ny(m(..._),c.className):ny(m,c.className),k=S?{className:S}:{},C=_N(p.props,wu(bv(c,["ref"])));for(let _ in g)_ in C&&delete g[_];return j.cloneElement(p,Object.assign({},C,g,f,{ref:i(hD(p),f.ref)},k))}return j.createElement(s,Object.assign({},bv(c,["ref"]),s!==j.Fragment&&f,s!==j.Fragment&&g),p)}function dD(){let e=j.useRef([]),t=j.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function fD(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function _N(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function ds(e){var t;return Object.assign(j.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function wu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function bv(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function hD(e){return pt.version.split(".")[0]>="19"?e.props.ref:e.ref}let pD="span";var V0=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(V0||{});function mD(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return sa()({ourProps:s,theirProps:i,slot:{},defaultTag:pD,name:"Hidden"})}let ry=ds(mD),SN=Symbol();function gD(e,t=!0){return Object.assign(e,{[SN]:t})}function xo(...e){let t=j.useRef(e);j.useEffect(()=>{t.current=e},[e]);let n=or(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[SN]))?void 0:n}let M5=j.createContext(null);M5.displayName="DescriptionContext";function NN(){let e=j.useContext(M5);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,NN),t}return e}function vD(){let[e,t]=j.useState([]);return[e.length>0?e.join(" "):void 0,j.useMemo(()=>function(n){let r=or(s=>(t(a=>[...a,s]),()=>t(a=>{let l=a.slice(),c=l.indexOf(s);return c!==-1&&l.splice(c,1),l}))),i=j.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return pt.createElement(M5.Provider,{value:i},n.children)},[t])]}let yD="p";function wD(e,t){let n=j.useId(),r=cD(),{id:i=`headlessui-description-${n}`,...s}=e,a=NN(),l=xo(t);Ri(()=>a.register(i),[i,a.register]);let c=r||!1,f=j.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),p={ref:l,...a.props,id:i};return sa()({ourProps:p,theirProps:s,slot:f,defaultTag:yD,name:a.name||"Description"})}let xD=ds(wD),bD=Object.assign(xD,{});var kN=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(kN||{});let _D=j.createContext(()=>{});function SD({value:e,children:t}){return pt.createElement(_D.Provider,{value:e},t)}let ND=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function EN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=t[i].call(n,...s);a&&(n=a,r.forEach(l=>l()))}}}function jN(e){return j.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let kD=new ND(()=>EN(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Pf(e,t){let n=kD.get(t),r=j.useId(),i=jN(n);if(Ri(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let iy=new Map,Bh=new Map;function l_(e){var t;let n=(t=Bh.get(e))!=null?t:0;return Bh.set(e,n+1),n!==0?()=>c_(e):(iy.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>c_(e))}function c_(e){var t;let n=(t=Bh.get(e))!=null?t:1;if(n===1?Bh.delete(e):Bh.set(e,n-1),n!==1)return;let r=iy.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,iy.delete(e))}function ED(e,{allowed:t,disallowed:n}={}){let r=Pf(e,"inert-others");Ri(()=>{var i,s;if(!r)return;let a=Fc();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(l_(c));let l=(s=t==null?void 0:t())!=null?s:[];for(let c of l){if(!c)continue;let f=Dg(c);if(!f)continue;let p=c.parentElement;for(;p&&p!==f.body;){for(let g of p.children)l.some(w=>g.contains(w))||a.add(l_(g));p=p.parentElement}}return a.dispose},[r,t,n])}function jD(e,t,n){let r=Gu(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});j.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let s=Fc();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[t,r,e])}let Y0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),CD=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ko=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Ko||{}),sy=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(sy||{}),AD=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(AD||{});function LD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Y0)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function PD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(CD)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var CN=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(CN||{});function TD(e,t=0){var n;return e===((n=Dg(e))==null?void 0:n.body)?!1:Ac(t,{0(){return e.matches(Y0)},1(){let r=e;for(;r!==null;){if(r.matches(Y0))return!0;r=r.parentElement}return!1}})}var MD=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(MD||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zo(e){e==null||e.focus({preventScroll:!0})}let ID=["textarea","input"].join(",");function DD(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,ID))!=null?n:!1}function OD(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Uh(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?OD(e):e:t&64?PD(e):LD(e);i.length>0&&a.length>1&&(a=a.filter(m=>!i.some(S=>S!=null&&"current"in S?(S==null?void 0:S.current)===m:S===m))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,g=a.length,w;do{if(p>=g||p+g<=0)return 0;let m=c+p;if(t&16)m=(m+g)%g;else{if(m<0)return 3;if(m>=g)return 1}w=a[m],w==null||w.focus(f),p+=l}while(w!==s.activeElement);return t&6&&DD(w)&&w.select(),2}function AN(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function RD(){return/Android/gi.test(window.navigator.userAgent)}function FD(){return AN()||RD()}function yh(e,t,n,r){let i=Gu(n);j.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function LN(e,t,n,r){let i=Gu(n);j.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const u_=30;function $D(e,t,n){let r=Pf(e,"outside-click"),i=Gu(n),s=j.useCallback(function(c,f){if(c.defaultPrevented)return;let p=f(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let g=function w(m){return typeof m=="function"?w(m()):Array.isArray(m)||m instanceof Set?m:[m]}(t);for(let w of g)if(w!==null&&(w.contains(p)||c.composed&&c.composedPath().includes(w)))return;return!TD(p,CN.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),a=j.useRef(null);yh(r,"pointerdown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),yh(r,"mousedown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),yh(r,"click",c=>{FD()||a.current&&(s(c,()=>a.current),a.current=null)},!0);let l=j.useRef({x:0,y:0});yh(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),yh(r,"touchend",c=>{let f={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=u_||Math.abs(f.y-l.current.y)>=u_))return s(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),LN(r,"blur",c=>s(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ep(...e){return j.useMemo(()=>Dg(...e),[...e])}function PN(e,t,n,r){let i=Gu(n);j.useEffect(()=>{e=e??window;function s(a){i.current(a)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function BD(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function UD(){return AN()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Fc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),p=e.querySelector(f);p&&!r(p)&&(a=p)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function zD(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function qD(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Au=EN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Fc(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:qD(n)},i=[UD(),BD(),zD()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Au.subscribe(()=>{let e=Au.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Au.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Au.dispatch("TEARDOWN",n)}});function WD(e,t,n=()=>({containers:[]})){let r=jN(Au),i=t?r.get(t):void 0,s=i?i.count>0:!1;return Ri(()=>{if(!(!t||!e))return Au.dispatch("PUSH",t,n),()=>Au.dispatch("POP",t,n)},[e,t]),s}function HD(e,t,n=()=>[document.body]){let r=Pf(e,"scroll-lock");WD(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function GD(e=0){let[t,n]=j.useState(e),r=j.useCallback(c=>n(c),[t]),i=j.useCallback(c=>n(f=>f|c),[t]),s=j.useCallback(c=>(t&c)===c,[t]),a=j.useCallback(c=>n(f=>f&~c),[n]),l=j.useCallback(c=>n(f=>f^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:l}}var VD={},d_,f_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((d_=process==null?void 0:VD)==null?void 0:d_.NODE_ENV)==="test"&&typeof((f_=Element==null?void 0:Element.prototype)==null?void 0:f_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var YD=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(YD||{});function KD(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function JD(e,t,n,r){let[i,s]=j.useState(n),{hasFlag:a,addFlag:l,removeFlag:c}=GD(e&&i?3:0),f=j.useRef(!1),p=j.useRef(!1),g=T5();return Ri(()=>{var w;if(e){if(n&&s(!0),!t){n&&l(3);return}return(w=r==null?void 0:r.start)==null||w.call(r,n),XD(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){p.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var m;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,c(7),n||s(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,g]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function XD(e,{prepare:t,run:n,done:r,inFlight:i}){let s=Fc();return ZD(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(QD(e,r))})}),s.dispose}function QD(e,t){var n,r;let i=Fc();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{s||t()}),i.dispose)}function ZD(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function I5(e,t){let n=j.useRef([]),r=or(e);j.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}let Rg=j.createContext(null);Rg.displayName="OpenClosedContext";var La=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(La||{});function Fg(){return j.useContext(Rg)}function eO({value:e,children:t}){return pt.createElement(Rg.Provider,{value:e},t)}function tO({children:e}){return pt.createElement(Rg.Provider,{value:null},e)}function nO(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let dc=[];nO(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||dc[0]===t.target)return;let n=t.target;n=n.closest(Y0),dc.unshift(n??t.target),dc=dc.filter(r=>r!=null&&r.isConnected),dc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function TN(e){let t=or(e),n=j.useRef(!1);j.useEffect(()=>(n.current=!1,()=>{n.current=!0,Og(()=>{n.current&&t()})}),[t])}function rO(){let e=typeof document>"u";return"useSyncExternalStore"in Hv?(t=>t.useSyncExternalStore)(Hv)(()=>()=>{},()=>!1,()=>!e):!1}function jp(){let e=rO(),[t,n]=j.useState(Tu.isHandoffComplete);return t&&Tu.isHandoffComplete===!1&&n(!1),j.useEffect(()=>{t!==!0&&n(!0)},[t]),j.useEffect(()=>Tu.handoff(),[]),e?!1:t}let MN=j.createContext(!1);function iO(){return j.useContext(MN)}function h_(e){return pt.createElement(MN.Provider,{value:e.force},e.children)}function sO(e){let t=iO(),n=j.useContext(DN),r=Ep(e),[i,s]=j.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(Tu.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return j.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),j.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),i}let IN=j.Fragment,aO=ds(function(e,t){let n=e,r=j.useRef(null),i=xo(gD(g=>{r.current=g}),t),s=Ep(r),a=sO(r),[l]=j.useState(()=>{var g;return Tu.isServer?null:(g=s==null?void 0:s.createElement("div"))!=null?g:null}),c=j.useContext(ay),f=jp();Ri(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Ri(()=>{if(l&&c)return c.register(l)},[c,l]),TN(()=>{var g;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((g=a.parentElement)==null||g.removeChild(a)))});let p=sa();return f?!a||!l?null:Cu.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:IN,name:"Portal"}),l):null});function oO(e,t){let n=xo(t),{enabled:r=!0,...i}=e,s=sa();return r?pt.createElement(aO,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:IN,name:"Portal"})}let lO=j.Fragment,DN=j.createContext(null);function cO(e,t){let{target:n,...r}=e,i={ref:xo(t)},s=sa();return pt.createElement(DN.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:lO,name:"Popover.Group"}))}let ay=j.createContext(null);function uO(){let e=j.useContext(ay),t=j.useRef([]),n=or(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=or(s=>{let a=t.current.indexOf(s);a!==-1&&t.current.splice(a,1),e&&e.unregister(s)}),i=j.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,j.useMemo(()=>function({children:s}){return pt.createElement(ay.Provider,{value:i},s)},[i])]}let dO=ds(oO),ON=ds(cO),fO=Object.assign(dO,{Group:ON});function hO(e,t=typeof document<"u"?document.defaultView:null,n){let r=Pf(e,"escape");PN(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===kN.Escape&&n(i))})}function pO(){var e;let[t]=j.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=j.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ri(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function mO({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Ep(n),i=or(()=>{var s,a;let l=[];for(let c of e)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||l.some(f=>c.contains(f))||l.push(c));return l});return{resolveContainers:i,contains:or(s=>i().some(a=>a.contains(s)))}}let RN=j.createContext(null);function p_({children:e,node:t}){let[n,r]=j.useState(null),i=FN(t??n);return pt.createElement(RN.Provider,{value:i},e,i===null&&pt.createElement(ry,{features:V0.Hidden,ref:s=>{var a,l;if(s){for(let c of(l=(a=Dg(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(s)){r(c);break}}}}))}function FN(e=null){var t;return(t=j.useContext(RN))!=null?t:e}function D5(){let e=j.useRef(!1);return Ri(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ch=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ch||{});function gO(){let e=j.useRef(0);return LN(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function $N(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let vO="div";var Su=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Su||{});function yO(e,t){let n=j.useRef(null),r=xo(n,t),{initialFocus:i,initialFocusFallback:s,containers:a,features:l=15,...c}=e;jp()||(l=0);let f=Ep(n);_O(l,{ownerDocument:f});let p=SO(l,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:s});NO(l,{ownerDocument:f,container:n,containers:a,previousActiveElement:p});let g=gO(),w=or(N=>{let L=n.current;L&&(R=>R())(()=>{Ac(g.current,{[Ch.Forwards]:()=>{Uh(L,Ko.First,{skipElements:[N.relatedTarget,s]})},[Ch.Backwards]:()=>{Uh(L,Ko.Last,{skipElements:[N.relatedTarget,s]})}})})}),m=Pf(!!(l&2),"focus-trap#tab-lock"),S=T5(),k=j.useRef(!1),C={ref:r,onKeyDown(N){N.key=="Tab"&&(k.current=!0,S.requestAnimationFrame(()=>{k.current=!1}))},onBlur(N){if(!(l&4))return;let L=$N(a);n.current instanceof HTMLElement&&L.add(n.current);let R=N.relatedTarget;R instanceof HTMLElement&&R.dataset.headlessuiFocusGuard!=="true"&&(BN(L,R)||(k.current?Uh(n.current,Ac(g.current,{[Ch.Forwards]:()=>Ko.Next,[Ch.Backwards]:()=>Ko.Previous})|Ko.WrapAround,{relativeTo:N.target}):N.target instanceof HTMLElement&&Zo(N.target)))}},_=sa();return pt.createElement(pt.Fragment,null,m&&pt.createElement(ry,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:V0.Focusable}),_({ourProps:C,theirProps:c,defaultTag:vO,name:"FocusTrap"}),m&&pt.createElement(ry,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:V0.Focusable}))}let wO=ds(yO),xO=Object.assign(wO,{features:Su});function bO(e=!0){let t=j.useRef(dc.slice());return I5(([n],[r])=>{r===!0&&n===!1&&Og(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=dc.slice())},[e,dc,t]),or(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function _O(e,{ownerDocument:t}){let n=!!(e&8),r=bO(n);I5(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Zo(r())},[n]),TN(()=>{n&&Zo(r())})}function SO(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=j.useRef(null),a=Pf(!!(e&1),"focus-trap#initial-focus"),l=D5();return I5(()=>{if(e===0)return;if(!a){i!=null&&i.current&&Zo(i.current);return}let c=n.current;c&&Og(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){s.current=f;return}}else if(c.contains(f)){s.current=f;return}if(r!=null&&r.current)Zo(r.current);else{if(e&16){if(Uh(c,Ko.First|Ko.AutoFocus)!==sy.Error)return}else if(Uh(c,Ko.First)!==sy.Error)return;if(i!=null&&i.current&&(Zo(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,a,e]),s}function NO(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=D5(),a=!!(e&4);PN(t==null?void 0:t.defaultView,"focus",l=>{if(!a||!s.current)return;let c=$N(r);n.current instanceof HTMLElement&&c.add(n.current);let f=i.current;if(!f)return;let p=l.target;p&&p instanceof HTMLElement?BN(c,p)?(i.current=p,Zo(p)):(l.preventDefault(),l.stopPropagation(),Zo(f)):Zo(i.current)},!0)}function BN(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function UN(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:qN)!==j.Fragment||pt.Children.count(e.children)===1}let $g=j.createContext(null);$g.displayName="TransitionContext";var kO=(e=>(e.Visible="visible",e.Hidden="hidden",e))(kO||{});function EO(){let e=j.useContext($g);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function jO(){let e=j.useContext(Bg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Bg=j.createContext(null);Bg.displayName="NestingContext";function Ug(e){return"children"in e?Ug(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function zN(e,t){let n=Gu(e),r=j.useRef([]),i=D5(),s=T5(),a=or((m,S=mc.Hidden)=>{let k=r.current.findIndex(({el:C})=>C===m);k!==-1&&(Ac(S,{[mc.Unmount](){r.current.splice(k,1)},[mc.Hidden](){r.current[k].state="hidden"}}),s.microTask(()=>{var C;!Ug(r)&&i.current&&((C=n.current)==null||C.call(n))}))}),l=or(m=>{let S=r.current.find(({el:k})=>k===m);return S?S.state!=="visible"&&(S.state="visible"):r.current.push({el:m,state:"visible"}),()=>a(m,mc.Unmount)}),c=j.useRef([]),f=j.useRef(Promise.resolve()),p=j.useRef({enter:[],leave:[]}),g=or((m,S,k)=>{c.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([C])=>C!==m)),t==null||t.chains.current[S].push([m,new Promise(C=>{c.current.push(C)})]),t==null||t.chains.current[S].push([m,new Promise(C=>{Promise.all(p.current[S].map(([_,N])=>N)).then(()=>C())})]),S==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(S)):k(S)}),w=or((m,S,k)=>{Promise.all(p.current[S].splice(0).map(([C,_])=>_)).then(()=>{var C;(C=c.current.shift())==null||C()}).then(()=>k(S))});return j.useMemo(()=>({children:r,register:l,unregister:a,onStart:g,onStop:w,wait:f,chains:p}),[l,a,r,g,w,p,f])}let qN=j.Fragment,WN=G0.RenderStrategy;function CO(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:f,enterFrom:p,enterTo:g,entered:w,leave:m,leaveFrom:S,leaveTo:k,...C}=e,[_,N]=j.useState(null),L=j.useRef(null),R=UN(e),J=xo(...R?[L,t,N]:t===null?[]:[t]),ee=(n=C.unmount)==null||n?mc.Unmount:mc.Hidden,{show:W,appear:I,initial:Z}=EO(),[re,P]=j.useState(W?"visible":"hidden"),F=jO(),{register:V,unregister:Y}=F;Ri(()=>V(L),[V,L]),Ri(()=>{if(ee===mc.Hidden&&L.current){if(W&&re!=="visible"){P("visible");return}return Ac(re,{hidden:()=>Y(L),visible:()=>V(L)})}},[re,L,V,Y,W,ee]);let pe=jp();Ri(()=>{if(R&&pe&&re==="visible"&&L.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[L,re,pe,R]);let ge=Z&&!I,Q=I&&W&&Z,$=j.useRef(!1),q=zN(()=>{$.current||(P("hidden"),Y(L))},F),oe=or(je=>{$.current=!0;let Ce=je?"enter":"leave";q.onStart(L,Ce,ne=>{ne==="enter"?s==null||s():ne==="leave"&&(l==null||l())})}),Le=or(je=>{let Ce=je?"enter":"leave";$.current=!1,q.onStop(L,Ce,ne=>{ne==="enter"?a==null||a():ne==="leave"&&(c==null||c())}),Ce==="leave"&&!Ug(q)&&(P("hidden"),Y(L))});j.useEffect(()=>{R&&i||(oe(W),Le(W))},[W,R,i]);let T=!(!i||!R||!pe||ge),[,K]=JD(T,_,W,{start:oe,end:Le}),se=wu({ref:J,className:((r=ny(C.className,Q&&f,Q&&p,K.enter&&f,K.enter&&K.closed&&p,K.enter&&!K.closed&&g,K.leave&&m,K.leave&&!K.closed&&S,K.leave&&K.closed&&k,!K.transition&&W&&w))==null?void 0:r.trim())||void 0,...KD(K)}),ue=0;re==="visible"&&(ue|=La.Open),re==="hidden"&&(ue|=La.Closed),K.enter&&(ue|=La.Opening),K.leave&&(ue|=La.Closing);let he=sa();return pt.createElement(Bg.Provider,{value:q},pt.createElement(eO,{value:ue},he({ourProps:se,theirProps:C,defaultTag:qN,features:WN,visible:re==="visible",name:"Transition.Child"})))}function AO(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,a=j.useRef(null),l=UN(e),c=xo(...l?[a,t]:t===null?[]:[t]);jp();let f=Fg();if(n===void 0&&f!==null&&(n=(f&La.Open)===La.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,g]=j.useState(n?"visible":"hidden"),w=zN(()=>{n||g("hidden")}),[m,S]=j.useState(!0),k=j.useRef([n]);Ri(()=>{m!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),S(!1))},[k,n]);let C=j.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);Ri(()=>{n?g("visible"):!Ug(w)&&a.current!==null&&g("hidden")},[n,w]);let _={unmount:i},N=or(()=>{var J;m&&S(!1),(J=e.beforeEnter)==null||J.call(e)}),L=or(()=>{var J;m&&S(!1),(J=e.beforeLeave)==null||J.call(e)}),R=sa();return pt.createElement(Bg.Provider,{value:w},pt.createElement($g.Provider,{value:C},R({ourProps:{..._,as:j.Fragment,children:pt.createElement(HN,{ref:c,..._,...s,beforeEnter:N,beforeLeave:L})},theirProps:{},defaultTag:j.Fragment,features:WN,visible:p==="visible",name:"Transition"})))}function LO(e,t){let n=j.useContext($g)!==null,r=Fg()!==null;return pt.createElement(pt.Fragment,null,!n&&r?pt.createElement(oy,{ref:t,...e}):pt.createElement(HN,{ref:t,...e}))}let oy=ds(AO),HN=ds(CO),O5=ds(LO),PO=Object.assign(oy,{Child:O5,Root:oy});var TO=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(TO||{}),MO=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(MO||{});let IO={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},R5=j.createContext(null);R5.displayName="DialogContext";function zg(e){let t=j.useContext(R5);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,zg),n}return t}function DO(e,t){return Ac(t.type,IO,e,t)}let m_=ds(function(e,t){let n=j.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:p=!1,...g}=e,w=j.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(w.current||(w.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Fg();i===void 0&&m!==null&&(i=(m&La.Open)===La.Open);let S=j.useRef(null),k=xo(S,t),C=Ep(S),_=i?0:1,[N,L]=j.useReducer(DO,{titleId:null,descriptionId:null,panelRef:j.createRef()}),R=or(()=>s(!1)),J=or(Le=>L({type:0,id:Le})),ee=jp()?_===0:!1,[W,I]=uO(),Z={get current(){var Le;return(Le=N.panelRef.current)!=null?Le:S.current}},re=FN(),{resolveContainers:P}=mO({mainTreeNode:re,portals:W,defaultContainers:[Z]}),F=m!==null?(m&La.Closing)===La.Closing:!1;ED(f||F?!1:ee,{allowed:or(()=>{var Le,T;return[(T=(Le=S.current)==null?void 0:Le.closest("[data-headlessui-portal]"))!=null?T:null]}),disallowed:or(()=>{var Le;return[(Le=re==null?void 0:re.closest("body > *:not(#headlessui-portal-root)"))!=null?Le:null]})}),$D(ee,P,Le=>{Le.preventDefault(),R()}),hO(ee,C==null?void 0:C.defaultView,Le=>{Le.preventDefault(),Le.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),R()}),HD(f||F?!1:ee,C,P),jD(ee,S,R);let[V,Y]=vD(),pe=j.useMemo(()=>[{dialogState:_,close:R,setTitleId:J,unmount:p},N],[_,N,R,J,p]),ge=j.useMemo(()=>({open:_===0}),[_]),Q={ref:k,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:_===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":V,unmount:p},$=!pO(),q=Su.None;ee&&!f&&(q|=Su.RestoreFocus,q|=Su.TabLock,c&&(q|=Su.AutoFocus),$&&(q|=Su.InitialFocus));let oe=sa();return pt.createElement(tO,null,pt.createElement(h_,{force:!0},pt.createElement(fO,null,pt.createElement(R5.Provider,{value:pe},pt.createElement(ON,{target:S},pt.createElement(h_,{force:!1},pt.createElement(Y,{slot:ge},pt.createElement(I,null,pt.createElement(xO,{initialFocus:a,initialFocusFallback:S,containers:P,features:q},pt.createElement(SD,{value:R},oe({ourProps:Q,theirProps:g,slot:ge,defaultTag:OO,features:RO,visible:_===0,name:"Dialog"})))))))))))}),OO="div",RO=G0.RenderStrategy|G0.Static;function FO(e,t){let{transition:n=!1,open:r,...i}=e,s=Fg(),a=e.hasOwnProperty("open")||s!==null,l=e.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?pt.createElement(p_,null,pt.createElement(PO,{show:r,transition:n,unmount:i.unmount},pt.createElement(m_,{ref:t,...i}))):pt.createElement(p_,null,pt.createElement(m_,{ref:t,open:r,...i}))}let $O="div";function BO(e,t){let n=j.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:a,unmount:l},c]=zg("Dialog.Panel"),f=xo(t,c.panelRef),p=j.useMemo(()=>({open:a===0}),[a]),g=or(C=>{C.stopPropagation()}),w={ref:f,id:r,onClick:g},m=i?O5:j.Fragment,S=i?{unmount:l}:{},k=sa();return pt.createElement(m,{...S},k({ourProps:w,theirProps:s,slot:p,defaultTag:$O,name:"Dialog.Panel"}))}let UO="div";function zO(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=zg("Dialog.Backdrop"),a=j.useMemo(()=>({open:i===0}),[i]),l={ref:t,"aria-hidden":!0},c=n?O5:j.Fragment,f=n?{unmount:s}:{},p=sa();return pt.createElement(c,{...f},p({ourProps:l,theirProps:r,slot:a,defaultTag:UO,name:"Dialog.Backdrop"}))}let qO="h2";function WO(e,t){let n=j.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:a}]=zg("Dialog.Title"),l=xo(t);j.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=j.useMemo(()=>({open:s===0}),[s]),f={ref:l,id:r};return sa()({ourProps:f,theirProps:i,slot:c,defaultTag:qO,name:"Dialog.Title"})}let HO=ds(FO),GO=ds(BO);ds(zO);let VO=ds(WO),Mu=Object.assign(HO,{Panel:GO,Title:VO,Description:bD});const YO=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,s]=j.useState(""),[a,l]=j.useState(!1);j.useState([]);const c=async f=>{if(f.preventDefault(),!!i.trim())try{l(!0);const{error:p}=await Xe.from("groups").insert([{name:i.trim()}]);if(p)throw p;Te.success("Grupo creado exitosamente"),n(),t(),s("")}catch(p){console.error("Error:",p),Te.error("Error al crear el grupo")}finally{l(!1)}};return d.jsx(Mu,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Ma,{className:"w-6 h-6"})})}),d.jsx(Mu.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),d.jsxs("form",{onSubmit:c,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),d.jsx("input",{type:"text",id:"name",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),d.jsx(yt,{type:"submit",loading:a,children:"Crear Grupo"})]})]})]})]})})},KO=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,s]=j.useState(""),[a,l]=j.useState(!1),c=async f=>{if(f.preventDefault(),i!==r.name){Te.error("El nombre del grupo no coincide");return}try{l(!0);const{error:p}=await Xe.from("groups").delete().eq("id",r.id);if(p)throw p;Te.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),Te.error("Error al eliminar el grupo")}finally{l(!1),s("")}};return d.jsx(Mu,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Ma,{className:"w-6 h-6"})})}),d.jsx(Mu.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta acción no se puede deshacer. Para confirmar, escribe el nombre del grupo:",d.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),d.jsxs("form",{onSubmit:c,children:[d.jsx("div",{className:"mb-4",children:d.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),d.jsx(yt,{type:"submit",loading:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function JO(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(!1),{user:a}=Os(),l=Ra(),[c,f]=j.useState(!1),[p,g]=j.useState(null),[w,m]=j.useState(!1),[S,k]=j.useState("");j.useEffect(()=>{(async()=>{a&&await C()})()},[a]);const C=async()=>{if(a)try{r(!0);const{data:R,error:J}=await Xe.from("users").select("role").eq("id",a.id).single();if(J)throw J;const ee=(R==null?void 0:R.role)==="admin";if(f(ee),ee){const{data:V,error:Y}=await Xe.from("groups").select("*").order("created_at",{ascending:!1});if(Y)throw Y;const{data:pe,error:ge}=await Xe.from("group_members").select("group_id").eq("user_id",a.id);if(ge)throw ge;const Q=new Set((pe==null?void 0:pe.map(q=>q.group_id))||[]),$=await Promise.all((V||[]).map(async q=>{const{data:oe}=await Xe.from("group_members").select("id").eq("group_id",q.id).eq("role_in_group","principal"),{data:Le}=await Xe.from("group_members").select("id").eq("group_id",q.id).eq("role_in_group","sustituto");return{...q,userRole:Q.has(q.id)?"member":"none",principal_count:(oe==null?void 0:oe.length)||0,sustituto_count:(Le==null?void 0:Le.length)||0}}));t($);return}const{data:W,error:I}=await Xe.from("group_members").select("group_id").eq("user_id",a.id);if(I)throw I;const Z=new Set((W==null?void 0:W.map(V=>V.group_id))||[]),{data:re,error:P}=await Xe.from("groups").select("*").or(`created_by.eq.${a.id},id.in.(${Array.from(Z).join(",")})`).order("created_at",{ascending:!1});if(P)throw P;const F=await Promise.all((re||[]).map(async V=>{const{data:Y}=await Xe.from("group_members").select("id").eq("group_id",V.id).eq("role_in_group","principal"),{data:pe}=await Xe.from("group_members").select("id").eq("group_id",V.id).eq("role_in_group","sustituto");return{...V,userRole:Z.has(V.id)?"member":"none",principal_count:(Y==null?void 0:Y.length)||0,sustituto_count:(pe==null?void 0:pe.length)||0}}));t(F)}catch(R){console.error("Error fetching groups:",R),Te.error("Error al cargar los grupos"),t([])}finally{r(!1)}},_=R=>{l(`/group/${R}`)},N=(R,J)=>{R.stopPropagation(),g(J),m(!0)},L=()=>{const R=e.filter(I=>I.name.toLowerCase().includes(S.toLowerCase())),J=R.filter(I=>I.created_by===(a==null?void 0:a.id)),ee=R.filter(I=>I.userRole==="member"&&I.created_by!==(a==null?void 0:a.id)),W=c?R.filter(I=>I.userRole==="none"&&I.created_by!==(a==null?void 0:a.id)&&!ee.some(Z=>Z.id===I.id)):[];return{created:J,member:ee,other:W}};return d.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),d.jsxs(yt,{onClick:()=>s(!0),className:"flex items-center space-x-2",children:[d.jsx(Ig,{className:"w-5 h-5"}),d.jsx("span",{children:"Crear Grupo"})]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:S,onChange:R=>k(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cargando grupos..."}):e.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Sf,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. ¡Crea uno para empezar!"})]}):d.jsxs("div",{className:"space-y-8",children:[L().created.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().created.map(R=>d.jsx(_v,{group:R,user:a,isAdmin:c,onDelete:N,onClick:()=>_(R.id)},R.id))})]}),L().member.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().member.map(R=>d.jsx(_v,{group:R,user:a,isAdmin:c,onDelete:N,onClick:()=>_(R.id)},R.id))})]}),c&&L().other.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().other.map(R=>d.jsx(_v,{group:R,user:a,isAdmin:c,onDelete:N,onClick:()=>_(R.id)},R.id))})]})]}),d.jsx(YO,{isOpen:i,onClose:()=>s(!1),onGroupCreated:C,isAdmin:c}),p&&d.jsx(KO,{isOpen:w,onClose:()=>{m(!1),g(null)},onGroupDeleted:C,group:p})]})}const _v=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>d.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[d.jsx(Sf,{className:"w-5 h-5 text-indigo-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.principal_count}),d.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[d.jsx(Sf,{className:"w-5 h-5 text-orange-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.sustituto_count}),d.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&d.jsx("button",{onClick:s=>r(s,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:d.jsx(P5,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function XO({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:s,userRole:a}){const[l,c]=j.useState(""),[f,p]=j.useState(""),[g,w]=j.useState("principal"),[m,S]=j.useState([]),[k,C]=j.useState(""),[_,N]=j.useState(!1),[L,R]=j.useState(!1),[J,ee]=j.useState([]),[W,I]=j.useState(!1),{user:Z}=Os(),re=()=>{c(""),p(""),w("principal"),S([]),C(""),N(!1),ee([])},P=async()=>{if(Z)try{const{data:Q,error:$}=await Xe.from("users").select("name, email").eq("id",Z.id).single();if($)throw $;Q&&(c(Q.name||""),p(Q.email||""))}catch(Q){console.error("Error fetching user info:",Q)}},F=async()=>{var Q;if(Z)try{const{data:$,error:q}=await Xe.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",Z.id);if(q)throw q;I(((Q=$==null?void 0:$[0])==null?void 0:Q.role_in_group)==="principal")}catch($){console.error("Error checking principal status:",$),I(!1)}},V=async()=>{try{const{data:Q,error:$}=await Xe.from("roles").select("*").eq("group_id",n).order("name");if($)throw $;ee(Q||[])}catch(Q){console.error("Error loading roles:",Q),Te.error("Error al cargar los roles")}};if(j.useEffect(()=>{e&&V()},[e]),j.useEffect(()=>{e||re()},[e]),j.useEffect(()=>{Z&&(F(),a==="user"&&!W?P():(c(""),p("")))},[Z,a,W]),!e||!Z)return null;const Y=()=>{if(!k.trim()){Te.error("Por favor ingresa un nombre para el rol");return}if(J.some(oe=>oe.name.toLowerCase()===k.trim().toLowerCase())){Te.error("Este rol ya existe en el grupo");return}const $=`new-${Date.now()}`,q={id:$,name:k.trim(),isNew:!0,group_id:n};ee([...J,q]),S([...m,$]),C(""),N(!1),Te.success("Rol añadido y seleccionado")},pe=async Q=>{if(Q.preventDefault(),!l.trim()){Te.error("Por favor ingresa un nombre");return}if(!f.trim()){Te.error("Por favor ingresa un email");return}if(m.length===0){Te.error("Por favor selecciona al menos un rol");return}R(!0);try{const $=m.filter(K=>!K.startsWith("new-")),q=J.filter(K=>"isNew"in K&&K.isNew&&m.includes(K.id)).map(K=>({name:K.name,group_id:n})),oe=q.map(K=>`(${K.name}, ${n})`),{data:Le,error:T}=await Xe.rpc("add_group_member_with_instruments",{p_group_id:n,p_name:l,p_email:f.toLowerCase().trim(),p_role:s?"principal":g,p_user_id:a==="user"&&!W?Z.id:null,p_instruments:$,p_new_instruments:q.map(K=>K.name)});if(T)throw T;try{const{invitation:K}=Le;if(console.log("Datos de invitación:",K),!K||!K.token)throw new Error("No se recibieron los datos de invitación correctamente");const{error:se}=await Xe.functions.invoke("send-invitation-email",{body:{email:K.email,token:K.token,userExists:K.userExists,groupName:K.groupName,groupMemberId:K.groupMemberId}});if(se)throw console.error("Error sending invitation email:",se),new Error(`Error al enviar la invitación: ${se.message}`);Te.success("Miembro añadido e invitación enviada")}catch(K){console.error("Error sending invitation:",K),Te.error(`Error al enviar la invitación: ${K.message||"Error desconocido"}`,{icon:"⚠️",duration:5e3})}i(),t(),re()}catch($){console.error("Error adding member:",$),Te.error($.message||"Error al añadir miembro")}finally{R(!1)}},ge=a==="user"&&!W;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:ge?"Join Group":"Add New Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ma,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:pe,className:"p-6 space-y-4",children:[d.jsx(Gn,{label:"Name",value:l,onChange:Q=>c(Q.target.value),required:!0,placeholder:"Enter member name",disabled:ge}),d.jsx(Gn,{label:"Email",type:"email",value:f,onChange:Q=>p(Q.target.value),required:!0,placeholder:"Enter member email",disabled:ge}),!s&&a==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:g,onChange:Q=>w(Q.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Instruments"}),!_&&(a==="admin"||s||W)&&d.jsxs(yt,{type:"button",variant:"secondary",onClick:()=>N(!0),className:"text-sm py-1",children:[d.jsx(Ig,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),_&&d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsx(Gn,{label:"",value:k,onChange:Q=>C(Q.target.value),placeholder:"Enter instrument name",className:"flex-1"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx(yt,{type:"button",onClick:Y,className:"whitespace-nowrap",children:"Add"}),d.jsx(yt,{type:"button",variant:"secondary",onClick:()=>{N(!1),C("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:J.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Añade uno arriba."}):J.map(Q=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:m.includes(Q.id),onChange:$=>{$.target.checked?S([...m,Q.id]):S(m.filter(q=>q!==Q.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),d.jsxs("span",{className:"flex items-center capitalize",children:[d.jsx(Br,{className:"w-3 h-3 mr-1"}),Q.name,"isNew"in Q&&d.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},Q.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(yt,{type:"submit",loading:L,children:ge?"Join Group":"Add Member"})]})]})]})})}function QO({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:s}){const[a,l]=j.useState(n.name),[c,f]=j.useState(n.role_in_group),[p,g]=j.useState([]),[w,m]=j.useState(!1),{user:S}=Os();if(j.useEffect(()=>{n&&(l(n.name),f(n.role_in_group),g(n.instruments.map(_=>_.id)))},[n]),!e||!S)return null;const k=s==="admin"||n.user_id===S.id,C=async _=>{if(_.preventDefault(),!k){Te.error("You do not have permission to edit this member");return}if(!a.trim()){Te.error("Please enter a member name");return}if(p.length===0){Te.error("Please select at least one role");return}m(!0);try{const{error:N}=await Xe.from("group_members").update({name:a.trim(),role_in_group:c}).eq("id",n.id);if(N)throw N;const{error:L}=await Xe.from("group_member_roles").delete().eq("group_member_id",n.id);if(L)throw L;const{error:R}=await Xe.from("group_member_roles").insert(p.map(J=>({group_member_id:n.id,role_id:J,created_by:S.id})));if(R)throw R;Te.success("Member updated successfully!"),i(),t()}catch(N){console.error("Error updating member:",N),Te.error(N.message||"Failed to update member")}finally{m(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:w,children:d.jsx(Ma,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[d.jsx(Gn,{label:"Name",value:a,onChange:_=>l(_.target.value),required:!0,placeholder:"Enter member name",disabled:!k}),s==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:c,onChange:_=>f(_.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!k,children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(_=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:p.includes(_.id),onChange:N=>{N.target.checked?g([...p,_.id]):g(p.filter(L=>L!==_.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:w||!k}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(Br,{className:"w-3 h-3 mr-1"}),_.name]})]},_.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),k&&d.jsx(yt,{type:"submit",loading:w,children:"Save Changes"})]})]})]})})}const g_=3,ZO=1e3;async function $n(e,t="An error occurred"){let n=0;for(;n<g_;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===g_)return console.error(t,r),Te.error(t),null;await new Promise(i=>setTimeout(i,ZO*n))}return null}function ln(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function us(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Di(e,t){const n=ln(e);return isNaN(t)?us(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ia(e,t){const n=ln(e);if(isNaN(t))return us(e,NaN);if(!t)return n;const r=n.getDate(),i=us(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const F5=6048e5,eR=864e5,GN=6e4,VN=36e5;let tR={};function Cp(){return tR}function vo(e,t){var l,c,f,p;const n=Cp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=ln(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Bu(e){return vo(e,{weekStartsOn:1})}function YN(e){const t=ln(e),n=t.getFullYear(),r=us(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Bu(r),s=us(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Bu(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Lc(e){const t=ln(e);return t.setHours(0,0,0,0),t}function K0(e){const t=ln(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function uo(e,t){const n=Lc(e),r=Lc(t),i=+n-K0(n),s=+r-K0(r);return Math.round((i-s)/eR)}function nR(e){const t=YN(e),n=us(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Bu(n)}function ly(e,t){const n=t*7;return Di(e,n)}function rR(e,t){return ia(e,t*12)}function iR(e){let t;return e.forEach(function(n){const r=ln(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function sR(e){let t;return e.forEach(n=>{const r=ln(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function aR(e){return us(e,Date.now())}function gr(e,t){const n=Lc(e),r=Lc(t);return+n==+r}function $5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function oR(e){if(!$5(e)&&typeof e!="number")return!1;const t=ln(e);return!isNaN(Number(t))}function hp(e,t){const n=ln(e),r=ln(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function lR(e,t,n){const r=vo(e,n),i=vo(t,n),s=+r-K0(r),a=+i-K0(i);return Math.round((s-a)/F5)}function qg(e){const t=ln(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Fi(e){const t=ln(e);return t.setDate(1),t.setHours(0,0,0,0),t}function KN(e){const t=ln(e),n=us(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function B5(e,t){var l,c,f,p;const n=Cp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=ln(e),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function JN(e){return B5(e,{weekStartsOn:1})}const cR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uR=(e,t,n)=>{let r;const i=cR[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pR={date:lf({formats:dR,defaultWidth:"full"}),time:lf({formats:fR,defaultWidth:"full"}),dateTime:lf({formats:hR,defaultWidth:"full"})},mR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gR=(e,t,n,r)=>mR[e];function lo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const vR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_R={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SR=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},NR={ordinalNumber:SR,era:lo({values:vR,defaultWidth:"wide"}),quarter:lo({values:yR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:lo({values:wR,defaultWidth:"wide"}),day:lo({values:xR,defaultWidth:"wide"}),dayPeriod:lo({values:bR,defaultWidth:"wide",formattingValues:_R,defaultFormattingWidth:"wide"})};function co(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ER(l,g=>g.test(a)):kR(l,g=>g.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(a.length);return{value:f,rest:p}}}function kR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ER(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function XN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(i.length);return{value:a,rest:l}}}const jR=/^(\d+)(th|st|nd|rd)?/i,CR=/\d+/i,AR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LR={any:[/^b/i,/^(a|c)/i]},PR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},TR={any:[/1/i,/2/i,/3/i,/4/i]},MR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},DR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},FR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$R={ordinalNumber:XN({matchPattern:jR,parsePattern:CR,valueCallback:e=>parseInt(e,10)}),era:co({matchPatterns:AR,defaultMatchWidth:"wide",parsePatterns:LR,defaultParseWidth:"any"}),quarter:co({matchPatterns:PR,defaultMatchWidth:"wide",parsePatterns:TR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:co({matchPatterns:MR,defaultMatchWidth:"wide",parsePatterns:IR,defaultParseWidth:"any"}),day:co({matchPatterns:DR,defaultMatchWidth:"wide",parsePatterns:OR,defaultParseWidth:"any"}),dayPeriod:co({matchPatterns:RR,defaultMatchWidth:"any",parsePatterns:FR,defaultParseWidth:"any"})},QN={code:"en-US",formatDistance:uR,formatLong:pR,formatRelative:gR,localize:NR,match:$R,options:{weekStartsOn:0,firstWeekContainsDate:1}};function BR(e){const t=ln(e);return uo(t,KN(t))+1}function ZN(e){const t=ln(e),n=+Bu(t)-+nR(t);return Math.round(n/F5)+1}function e6(e,t){var p,g,w,m;const n=ln(e),r=n.getFullYear(),i=Cp(),s=(t==null?void 0:t.firstWeekContainsDate)??((g=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(w=i.locale)==null?void 0:w.options)==null?void 0:m.firstWeekContainsDate)??1,a=us(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=vo(a,t),c=us(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const f=vo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function UR(e,t){var l,c,f,p;const n=Cp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,i=e6(e,t),s=us(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),vo(s,t)}function t6(e,t){const n=ln(e),r=+vo(n,t)-+UR(n,t);return Math.round(r/F5)+1}function Sn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ql={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Sn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Sn(n+1,2)},d(e,t){return Sn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Sn(e.getHours()%12||12,t.length)},H(e,t){return Sn(e.getHours(),t.length)},m(e,t){return Sn(e.getMinutes(),t.length)},s(e,t){return Sn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Sn(i,t.length)}},Dd={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},v_={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ql.y(e,t)},Y:function(e,t,n,r){const i=e6(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Sn(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Sn(s,t.length)},R:function(e,t){const n=YN(e);return Sn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Sn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Sn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Sn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ql.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Sn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=t6(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Sn(i,t.length)},I:function(e,t,n){const r=ZN(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Sn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ql.d(e,t)},D:function(e,t,n){const r=BR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Sn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Sn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Sn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Sn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Dd.noon:r===0?i=Dd.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Dd.evening:r>=12?i=Dd.afternoon:r>=4?i=Dd.morning:i=Dd.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ql.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ql.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Sn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Sn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ql.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ql.s(e,t)},S:function(e,t){return Ql.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return w_(r);case"XXXX":case"XX":return xu(r);case"XXXXX":case"XXX":default:return xu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return w_(r);case"xxxx":case"xx":return xu(r);case"xxxxx":case"xxx":default:return xu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+y_(r,":");case"OOOO":default:return"GMT"+xu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+y_(r,":");case"zzzz":default:return"GMT"+xu(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Sn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Sn(r,t.length)}};function y_(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Sn(s,2)}function w_(e,t){return e%60===0?(e>0?"-":"+")+Sn(Math.abs(e)/60,2):xu(e,t)}function xu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Sn(Math.trunc(r/60),2),s=Sn(r%60,2);return n+i+t+s}const x_=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},n6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},zR=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return x_(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",x_(r,t)).replace("{{time}}",n6(i,t))},qR={p:n6,P:zR},WR=/^D+$/,HR=/^Y+$/,GR=["D","DD","YY","YYYY"];function VR(e){return WR.test(e)}function YR(e){return HR.test(e)}function KR(e,t,n){const r=JR(e,t,n);if(console.warn(r),GR.includes(e))throw new RangeError(r)}function JR(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const XR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZR=/^'([^]*?)'?$/,e9=/''/g,t9=/[a-zA-Z]/;function on(e,t,n){var p,g,w,m,S,k,C,_;const r=Cp(),i=(n==null?void 0:n.locale)??r.locale??QN,s=(n==null?void 0:n.firstWeekContainsDate)??((g=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(w=r.locale)==null?void 0:w.options)==null?void 0:m.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((k=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:k.weekStartsOn)??r.weekStartsOn??((_=(C=r.locale)==null?void 0:C.options)==null?void 0:_.weekStartsOn)??0,l=ln(e);if(!oR(l))throw new RangeError("Invalid time value");let c=t.match(QR).map(N=>{const L=N[0];if(L==="p"||L==="P"){const R=qR[L];return R(N,i.formatLong)}return N}).join("").match(XR).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const L=N[0];if(L==="'")return{isToken:!1,value:n9(N)};if(v_[L])return{isToken:!0,value:N};if(L.match(t9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return{isToken:!1,value:N}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const f={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(N=>{if(!N.isToken)return N.value;const L=N.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&YR(L)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&VR(L))&&KR(L,t,String(e));const R=v_[L[0]];return R(l,L,i.localize,f)}).join("")}function n9(e){const t=e.match(ZR);return t?t[1].replace(e9,"'"):e}function r9(e){const t=ln(e),n=t.getFullYear(),r=t.getMonth(),i=us(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function i9(e){return Math.trunc(+ln(e)/1e3)}function s9(e){const t=ln(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function a9(e,t){return lR(s9(e),Fi(e),t)+1}function cy(e,t){const n=ln(e),r=ln(t);return n.getTime()>r.getTime()}function r6(e,t){const n=ln(e),r=ln(t);return+n<+r}function b_(e){return+ln(e)>Date.now()}function U5(e,t){const n=ln(e),r=ln(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function o9(e,t){const n=ln(e),r=ln(t);return n.getFullYear()===r.getFullYear()}function __(e){return gr(e,aR(e))}function Sv(e,t){return Di(e,-t)}function pu(e,t){const r=d9(e);let i;if(r.date){const c=f9(r.date,2);i=h9(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=p9(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=m9(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(s+a+l)}const $m={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d9(e){const t={},n=e.split($m.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],$m.timeZoneDelimiter.test(t.date)&&(t.date=e.split($m.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=$m.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function f9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function h9(e,t){if(t===null)return new Date(NaN);const n=e.match(l9);if(!n)return new Date(NaN);const r=!!n[4],i=wh(n[1]),s=wh(n[2])-1,a=wh(n[3]),l=wh(n[4]),c=wh(n[5])-1;if(r)return x9(t,l,c)?g9(t,l,c):new Date(NaN);{const f=new Date(0);return!y9(t,s,a)||!w9(t,i)?new Date(NaN):(f.setUTCFullYear(t,s,Math.max(i,a)),f)}}function wh(e){return e?parseInt(e):1}function p9(e){const t=e.match(c9);if(!t)return NaN;const n=Nv(t[1]),r=Nv(t[2]),i=Nv(t[3]);return b9(n,r,i)?n*VN+r*GN+i*1e3:NaN}function Nv(e){return e&&parseFloat(e.replace(",","."))||0}function m9(e){if(e==="Z")return 0;const t=e.match(u9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return _9(r,i)?n*(r*VN+i*GN):NaN}function g9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const v9=[31,null,31,30,31,30,31,31,30,31,30,31];function i6(e){return e%400===0||e%4===0&&e%100!==0}function y9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(v9[t]||(i6(e)?29:28))}function w9(e,t){return t>=1&&t<=(i6(e)?366:365)}function x9(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function b9(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function _9(e,t){return t>=0&&t<=59}function kv(e,t){const n=ln(e),r=n.getFullYear(),i=n.getDate(),s=us(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const a=r9(s);return n.setMonth(t,Math.min(i,a)),n}function S_(e,t){const n=ln(e);return isNaN(+n)?us(e,NaN):(n.setFullYear(t),n)}function xh(e,t){return ia(e,-t)}const S9={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},N9=(e,t,n)=>{let r;const i=S9[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},k9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},E9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},j9={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},C9={date:lf({formats:k9,defaultWidth:"full"}),time:lf({formats:E9,defaultWidth:"full"}),dateTime:lf({formats:j9,defaultWidth:"full"})},A9={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},L9={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},P9=(e,t,n,r)=>t.getHours()!==1?L9[e]:A9[e],T9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},M9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},I9={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},D9={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},O9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},R9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},F9=(e,t)=>Number(e)+"º",$9={ordinalNumber:F9,era:lo({values:T9,defaultWidth:"wide"}),quarter:lo({values:M9,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:lo({values:I9,defaultWidth:"wide"}),day:lo({values:D9,defaultWidth:"wide"}),dayPeriod:lo({values:O9,defaultWidth:"wide",formattingValues:R9,defaultFormattingWidth:"wide"})},B9=/^(\d+)(º)?/i,U9=/\d+/i,z9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},q9={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},W9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},H9={any:[/1/i,/2/i,/3/i,/4/i]},G9={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},V9={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Y9={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},K9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},J9={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},X9={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Q9={ordinalNumber:XN({matchPattern:B9,parsePattern:U9,valueCallback:function(e){return parseInt(e,10)}}),era:co({matchPatterns:z9,defaultMatchWidth:"wide",parsePatterns:q9,defaultParseWidth:"any"}),quarter:co({matchPatterns:W9,defaultMatchWidth:"wide",parsePatterns:H9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:co({matchPatterns:G9,defaultMatchWidth:"wide",parsePatterns:V9,defaultParseWidth:"any"}),day:co({matchPatterns:Y9,defaultMatchWidth:"wide",parsePatterns:K9,defaultParseWidth:"any"}),dayPeriod:co({matchPatterns:J9,defaultMatchWidth:"any",parsePatterns:X9,defaultParseWidth:"any"})},Qd={code:"es",formatDistance:N9,formatLong:C9,formatRelative:P9,localize:$9,match:Q9,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Tt=function(){return Tt=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Tt.apply(this,arguments)};function Z9(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s6(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Ap(e){return e.mode==="multiple"}function Lp(e){return e.mode==="range"}function Wg(e){return e.mode==="single"}var eF={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function tF(e,t){return on(e,"LLLL y",t)}function nF(e,t){return on(e,"d",t)}function rF(e,t){return on(e,"LLLL",t)}function iF(e){return"".concat(e)}function sF(e,t){return on(e,"cccccc",t)}function aF(e,t){return on(e,"yyyy",t)}var oF=Object.freeze({__proto__:null,formatCaption:tF,formatDay:nF,formatMonthCaption:rF,formatWeekNumber:iF,formatWeekdayName:sF,formatYearCaption:aF}),lF=function(e,t,n){return on(e,"do MMMM (EEEE)",n)},cF=function(){return"Month: "},uF=function(){return"Go to next month"},dF=function(){return"Go to previous month"},fF=function(e,t){return on(e,"cccc",t)},hF=function(e){return"Week n. ".concat(e)},pF=function(){return"Year: "},mF=Object.freeze({__proto__:null,labelDay:lF,labelMonthDropdown:cF,labelNext:uF,labelPrevious:dF,labelWeekNumber:hF,labelWeekday:fF,labelYearDropdown:pF});function gF(){var e="buttons",t=eF,n=QN,r={},i={},s=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:oF,labels:mF,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:l,mode:"default"}}function vF(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,s=e.fromDate,a=e.toDate;return r?s=Fi(r):t&&(s=new Date(t,0,1)),i?a=qg(i):n&&(a=new Date(n,11,31)),{fromDate:s?Lc(s):void 0,toDate:a?Lc(a):void 0}}var a6=j.createContext(void 0);function yF(e){var t,n=e.initialProps,r=gF(),i=vF(n),s=i.fromDate,a=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!a)&&(l="buttons");var c;(Wg(n)||Ap(n)||Lp(n))&&(c=n.onSelect);var f=Tt(Tt(Tt({},r),n),{captionLayout:l,classNames:Tt(Tt({},r.classNames),n.classNames),components:Tt({},n.components),formatters:Tt(Tt({},r.formatters),n.formatters),fromDate:s,labels:Tt(Tt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Tt(Tt({},r.modifiers),n.modifiers),modifiersClassNames:Tt(Tt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Tt(Tt({},r.styles),n.styles),toDate:a});return d.jsx(a6.Provider,{value:f,children:e.children})}function Un(){var e=j.useContext(a6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function o6(e){var t=Un(),n=t.locale,r=t.classNames,i=t.styles,s=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function wF(e){return d.jsx("svg",Tt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function l6(e){var t,n,r=e.onChange,i=e.value,s=e.children,a=e.caption,l=e.className,c=e.style,f=Un(),p=(n=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:wF;return d.jsxs("div",{className:l,style:c,children:[d.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:i,onChange:r,children:s}),d.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[a,d.jsx(p,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function xF(e){var t,n=Un(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,f=n.components,p=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});var g=[];if(o9(r,i))for(var w=Fi(r),m=r.getMonth();m<=i.getMonth();m++)g.push(kv(w,m));else for(var w=Fi(new Date),m=0;m<=11;m++)g.push(kv(w,m));var S=function(C){var _=Number(C.target.value),N=kv(Fi(e.displayMonth),_);e.onChange(N)},k=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:l6;return d.jsx(k,{name:"months","aria-label":p(),className:c.dropdown_month,style:s.dropdown_month,onChange:S,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:g.map(function(C){return d.jsx("option",{value:C.getMonth(),children:l(C,{locale:a})},C.getMonth())})})}function bF(e){var t,n=e.displayMonth,r=Un(),i=r.fromDate,s=r.toDate,a=r.locale,l=r.styles,c=r.classNames,f=r.components,p=r.formatters.formatYearCaption,g=r.labels.labelYearDropdown,w=[];if(!i)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});for(var m=i.getFullYear(),S=s.getFullYear(),k=m;k<=S;k++)w.push(S_(KN(new Date),k));var C=function(N){var L=S_(Fi(n),Number(N.target.value));e.onChange(L)},_=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:l6;return d.jsx(_,{name:"years","aria-label":g(),className:c.dropdown_year,style:l.dropdown_year,onChange:C,value:n.getFullYear(),caption:p(n,{locale:a}),children:w.map(function(N){return d.jsx("option",{value:N.getFullYear(),children:p(N,{locale:a})},N.getFullYear())})})}function _F(e,t){var n=j.useState(e),r=n[0],i=n[1],s=t===void 0?r:t;return[s,i]}function SF(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,s=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&hp(s,i)<0){var f=-1*(c-1);i=ia(s,f)}return a&&hp(i,a)<0&&(i=a),Fi(i)}function NF(){var e=Un(),t=SF(e),n=_F(t,e.month),r=n[0],i=n[1],s=function(a){var l;if(!e.disableNavigation){var c=Fi(a);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function kF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=Fi(e),s=Fi(ia(i,r)),a=hp(s,i),l=[],c=0;c<a;c++){var f=ia(i,c);l.push(f)}return n&&(l=l.reverse()),l}function EF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=Fi(e);if(!n)return ia(l,a);var c=hp(n,e);if(!(c<s))return ia(l,a)}}function jF(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=Fi(e);if(!n)return ia(l,-a);var c=hp(l,n);if(!(c<=0))return ia(l,-a)}}var c6=j.createContext(void 0);function CF(e){var t=Un(),n=NF(),r=n[0],i=n[1],s=kF(r,t),a=EF(r,t),l=jF(r,t),c=function(g){return s.some(function(w){return U5(g,w)})},f=function(g,w){c(g)||(w&&r6(g,w)?i(ia(g,1+t.numberOfMonths*-1)):i(g))},p={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:f,previousMonth:l,nextMonth:a,isDateDisplayed:c};return d.jsx(c6.Provider,{value:p,children:e.children})}function Pp(){var e=j.useContext(c6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function N_(e){var t,n=Un(),r=n.classNames,i=n.styles,s=n.components,a=Pp().goToMonth,l=function(p){a(ia(p,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:o6,f=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:f}),d.jsx(xF,{onChange:l,displayMonth:e.displayMonth}),d.jsx(bF,{onChange:l,displayMonth:e.displayMonth})]})}function AF(e){return d.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function LF(e){return d.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var J0=j.forwardRef(function(e,t){var n=Un(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var a=s.join(" "),l=Tt(Tt({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),d.jsx("button",Tt({},e,{ref:t,type:"button",className:a,style:l}))});function PF(e){var t,n,r=Un(),i=r.dir,s=r.locale,a=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,p=c.labelNext,g=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var w=f(e.previousMonth,{locale:s}),m=[a.nav_button,a.nav_button_previous].join(" "),S=p(e.nextMonth,{locale:s}),k=[a.nav_button,a.nav_button_next].join(" "),C=(t=g==null?void 0:g.IconRight)!==null&&t!==void 0?t:LF,_=(n=g==null?void 0:g.IconLeft)!==null&&n!==void 0?n:AF;return d.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&d.jsx(J0,{name:"previous-month","aria-label":w,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?d.jsx(C,{className:a.nav_icon,style:l.nav_icon}):d.jsx(_,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&d.jsx(J0,{name:"next-month","aria-label":S,className:k,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?d.jsx(_,{className:a.nav_icon,style:l.nav_icon}):d.jsx(C,{className:a.nav_icon,style:l.nav_icon})})]})}function k_(e){var t=Un().numberOfMonths,n=Pp(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(S){return U5(e.displayMonth,S)}),c=l===0,f=l===a.length-1,p=t>1&&(c||!f),g=t>1&&(f||!c),w=function(){r&&s(r)},m=function(){i&&s(i)};return d.jsx(PF,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:g,nextMonth:i,previousMonth:r,onPreviousClick:w,onNextClick:m})}function TF(e){var t,n=Un(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:o6,f;return i?f=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?f=d.jsx(N_,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?f=d.jsxs(d.Fragment,{children:[d.jsx(N_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(k_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(k_,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:s.caption,children:f})}function MF(e){var t=Un(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?d.jsx("tfoot",{className:i,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function IF(e,t,n){for(var r=n?Bu(new Date):vo(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var a=Di(r,s);i.push(a)}return i}function DF(){var e=Un(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,f=IF(i,s,a);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),f.map(function(p,g){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:l(p,{locale:i})},g)})]})}function OF(){var e,t=Un(),n=t.classNames,r=t.styles,i=t.components,s=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:DF;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(s,{})})}function RF(e){var t=Un(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var z5=j.createContext(void 0);function FF(e){if(!Ap(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx(z5.Provider,{value:t,children:e.children})}return d.jsx($F,{initialProps:e.initialProps,children:e.children})}function $F(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,s=t.max,a=function(f,p,g){var w,m;(w=t.onDayClick)===null||w===void 0||w.call(t,f,p,g);var S=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!S){var k=!!(!p.selected&&s&&(r==null?void 0:r.length)===s);if(!k){var C=r?s6([],r):[];if(p.selected){var _=C.findIndex(function(N){return gr(f,N)});C.splice(_,1)}else C.push(f);(m=t.onSelect)===null||m===void 0||m.call(t,C,f,p,g)}}},l={disabled:[]};r&&l.disabled.push(function(f){var p=s&&r.length>s-1,g=r.some(function(w){return gr(w,f)});return!!(p&&!g)});var c={selected:r,onDayClick:a,modifiers:l};return d.jsx(z5.Provider,{value:c,children:n})}function q5(){var e=j.useContext(z5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function BF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?gr(i,e)&&gr(r,e)?void 0:gr(i,e)?{from:i,to:void 0}:gr(r,e)?void 0:cy(r,e)?{from:e,to:i}:{from:r,to:e}:i?cy(e,i)?{from:i,to:e}:{from:e,to:i}:r?r6(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var W5=j.createContext(void 0);function UF(e){if(!Lp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(W5.Provider,{value:t,children:e.children})}return d.jsx(zF,{initialProps:e.initialProps,children:e.children})}function zF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},s=i.from,a=i.to,l=t.min,c=t.max,f=function(m,S,k){var C,_;(C=t.onDayClick)===null||C===void 0||C.call(t,m,S,k);var N=BF(m,r);(_=t.onSelect)===null||_===void 0||_.call(t,N,m,S,k)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(p.range_start=[s],a?(p.range_end=[a],gr(s,a)||(p.range_middle=[{after:s,before:a}])):p.range_end=[s]):a&&(p.range_start=[a],p.range_end=[a]),l&&(s&&!a&&p.disabled.push({after:Sv(s,l-1),before:Di(s,l-1)}),s&&a&&p.disabled.push({after:s,before:Di(s,l-1)}),!s&&a&&p.disabled.push({after:Sv(a,l-1),before:Di(a,l-1)})),c){if(s&&!a&&(p.disabled.push({before:Di(s,-c+1)}),p.disabled.push({after:Di(s,c-1)})),s&&a){var g=uo(a,s)+1,w=c-g;p.disabled.push({before:Sv(s,w)}),p.disabled.push({after:Di(a,w)})}!s&&a&&(p.disabled.push({before:Di(a,-c+1)}),p.disabled.push({after:Di(a,c-1)}))}return d.jsx(W5.Provider,{value:{selected:r,onDayClick:f,modifiers:p},children:n})}function H5(){var e=j.useContext(W5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function c0(e){return Array.isArray(e)?s6([],e):e!==void 0?[e]:[]}function qF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=c0(i)}),t}var Da;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Da||(Da={}));var WF=Da.Selected,Ho=Da.Disabled,HF=Da.Hidden,GF=Da.Today,Ev=Da.RangeEnd,jv=Da.RangeMiddle,Cv=Da.RangeStart,VF=Da.Outside;function YF(e,t,n){var r,i=(r={},r[WF]=c0(e.selected),r[Ho]=c0(e.disabled),r[HF]=c0(e.hidden),r[GF]=[e.today],r[Ev]=[],r[jv]=[],r[Cv]=[],r[VF]=[],r);return e.fromDate&&i[Ho].push({before:e.fromDate}),e.toDate&&i[Ho].push({after:e.toDate}),Ap(e)?i[Ho]=i[Ho].concat(t.modifiers[Ho]):Lp(e)&&(i[Ho]=i[Ho].concat(n.modifiers[Ho]),i[Cv]=n.modifiers[Cv],i[jv]=n.modifiers[jv],i[Ev]=n.modifiers[Ev]),i}var u6=j.createContext(void 0);function KF(e){var t=Un(),n=q5(),r=H5(),i=YF(t,n,r),s=qF(t.modifiers),a=Tt(Tt({},i),s);return d.jsx(u6.Provider,{value:a,children:e.children})}function d6(){var e=j.useContext(u6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function JF(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function XF(e){return!!(e&&typeof e=="object"&&"from"in e)}function QF(e){return!!(e&&typeof e=="object"&&"after"in e)}function ZF(e){return!!(e&&typeof e=="object"&&"before"in e)}function e$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function t$(e,t){var n,r=t.from,i=t.to;if(r&&i){var s=uo(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=uo(e,r)>=0&&uo(i,e)>=0;return a}return i?gr(i,e):r?gr(r,e):!1}function n$(e){return $5(e)}function r$(e){return Array.isArray(e)&&e.every($5)}function i$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(n$(n))return gr(e,n);if(r$(n))return n.includes(e);if(XF(n))return t$(e,n);if(e$(n))return n.dayOfWeek.includes(e.getDay());if(JF(n)){var r=uo(n.before,e),i=uo(n.after,e),s=r>0,a=i<0,l=cy(n.before,n.after);return l?a&&s:s||a}return QF(n)?uo(e,n.after)>0:ZF(n)?uo(n.before,e)>0:typeof n=="function"?n(e):!1})}function G5(e,t,n){var r=Object.keys(t).reduce(function(s,a){var l=t[a];return i$(e,l)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!U5(e,n)&&(i.outside=!0),i}function s$(e,t){for(var n=Fi(e[0]),r=qg(e[e.length-1]),i,s,a=n;a<=r;){var l=G5(a,t),c=!l.disabled&&!l.hidden;if(!c){a=Di(a,1);continue}if(l.selected)return a;l.today&&!s&&(s=a),i||(i=a),a=Di(a,1)}return s||i}var a$=365;function f6(e,t){var n=t.moveBy,r=t.direction,i=t.context,s=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=i.weekStartsOn,f=i.fromDate,p=i.toDate,g=i.locale,w={day:Di,week:ly,month:ia,year:rR,startOfWeek:function(C){return i.ISOWeek?Bu(C):vo(C,{locale:g,weekStartsOn:c})},endOfWeek:function(C){return i.ISOWeek?JN(C):B5(C,{locale:g,weekStartsOn:c})}},m=w[n](e,r==="after"?1:-1);r==="before"&&f?m=iR([f,m]):r==="after"&&p&&(m=sR([p,m]));var S=!0;if(s){var k=G5(m,s);S=!k.disabled&&!k.hidden}return S?m:l.count>a$?l.lastFocused:f6(m,{moveBy:n,direction:r,context:i,modifiers:s,retry:Tt(Tt({},l),{count:l.count+1})})}var h6=j.createContext(void 0);function o$(e){var t=Pp(),n=d6(),r=j.useState(),i=r[0],s=r[1],a=j.useState(),l=a[0],c=a[1],f=s$(t.displayMonths,n),p=i??(l&&t.isDateDisplayed(l))?l:f,g=function(){c(i),s(void 0)},w=function(C){s(C)},m=Un(),S=function(C,_){if(i){var N=f6(i,{moveBy:C,direction:_,context:m,modifiers:n});gr(i,N)||(t.goToDate(N,i),w(N))}},k={focusedDay:i,focusTarget:p,blur:g,focus:w,focusDayAfter:function(){return S("day","after")},focusDayBefore:function(){return S("day","before")},focusWeekAfter:function(){return S("week","after")},focusWeekBefore:function(){return S("week","before")},focusMonthBefore:function(){return S("month","before")},focusMonthAfter:function(){return S("month","after")},focusYearBefore:function(){return S("year","before")},focusYearAfter:function(){return S("year","after")},focusStartOfWeek:function(){return S("startOfWeek","before")},focusEndOfWeek:function(){return S("endOfWeek","after")}};return d.jsx(h6.Provider,{value:k,children:e.children})}function V5(){var e=j.useContext(h6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function l$(e,t){var n=d6(),r=G5(e,n,t);return r}var Y5=j.createContext(void 0);function c$(e){if(!Wg(e.initialProps)){var t={selected:void 0};return d.jsx(Y5.Provider,{value:t,children:e.children})}return d.jsx(u$,{initialProps:e.initialProps,children:e.children})}function u$(e){var t=e.initialProps,n=e.children,r=function(s,a,l){var c,f,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,a,l),a.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,s,a,l);return}(p=t.onSelect)===null||p===void 0||p.call(t,s,s,a,l)},i={selected:t.selected,onDayClick:r};return d.jsx(Y5.Provider,{value:i,children:n})}function p6(){var e=j.useContext(Y5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function d$(e,t){var n=Un(),r=p6(),i=q5(),s=H5(),a=V5(),l=a.focusDayAfter,c=a.focusDayBefore,f=a.focusWeekAfter,p=a.focusWeekBefore,g=a.blur,w=a.focus,m=a.focusMonthBefore,S=a.focusMonthAfter,k=a.focusYearBefore,C=a.focusYearAfter,_=a.focusStartOfWeek,N=a.focusEndOfWeek,L=function(Q){var $,q,oe,Le;Wg(n)?($=r.onDayClick)===null||$===void 0||$.call(r,e,t,Q):Ap(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,e,t,Q):Lp(n)?(oe=s.onDayClick)===null||oe===void 0||oe.call(s,e,t,Q):(Le=n.onDayClick)===null||Le===void 0||Le.call(n,e,t,Q)},R=function(Q){var $;w(e),($=n.onDayFocus)===null||$===void 0||$.call(n,e,t,Q)},J=function(Q){var $;g(),($=n.onDayBlur)===null||$===void 0||$.call(n,e,t,Q)},ee=function(Q){var $;($=n.onDayMouseEnter)===null||$===void 0||$.call(n,e,t,Q)},W=function(Q){var $;($=n.onDayMouseLeave)===null||$===void 0||$.call(n,e,t,Q)},I=function(Q){var $;($=n.onDayPointerEnter)===null||$===void 0||$.call(n,e,t,Q)},Z=function(Q){var $;($=n.onDayPointerLeave)===null||$===void 0||$.call(n,e,t,Q)},re=function(Q){var $;($=n.onDayTouchCancel)===null||$===void 0||$.call(n,e,t,Q)},P=function(Q){var $;($=n.onDayTouchEnd)===null||$===void 0||$.call(n,e,t,Q)},F=function(Q){var $;($=n.onDayTouchMove)===null||$===void 0||$.call(n,e,t,Q)},V=function(Q){var $;($=n.onDayTouchStart)===null||$===void 0||$.call(n,e,t,Q)},Y=function(Q){var $;($=n.onDayKeyUp)===null||$===void 0||$.call(n,e,t,Q)},pe=function(Q){var $;switch(Q.key){case"ArrowLeft":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":Q.preventDefault(),Q.stopPropagation(),f();break;case"ArrowUp":Q.preventDefault(),Q.stopPropagation(),p();break;case"PageUp":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?k():m();break;case"PageDown":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?C():S();break;case"Home":Q.preventDefault(),Q.stopPropagation(),_();break;case"End":Q.preventDefault(),Q.stopPropagation(),N();break}($=n.onDayKeyDown)===null||$===void 0||$.call(n,e,t,Q)},ge={onClick:L,onFocus:R,onBlur:J,onKeyDown:pe,onKeyUp:Y,onMouseEnter:ee,onMouseLeave:W,onPointerEnter:I,onPointerLeave:Z,onTouchCancel:re,onTouchEnd:P,onTouchMove:F,onTouchStart:V};return ge}function f$(){var e=Un(),t=p6(),n=q5(),r=H5(),i=Wg(e)?t.selected:Ap(e)?n.selected:Lp(e)?r.selected:void 0;return i}function h$(e){return Object.values(Da).includes(e)}function p$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(h$(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function m$(e,t){var n=Tt({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Tt(Tt({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function g$(e,t,n){var r,i,s,a=Un(),l=V5(),c=l$(e,t),f=d$(e,c),p=f$(),g=!!(a.onDayClick||a.mode!=="default");j.useEffect(function(){var ee;c.outside||l.focusedDay&&g&&gr(l.focusedDay,e)&&((ee=n.current)===null||ee===void 0||ee.focus())},[l.focusedDay,e,n,g,c.outside]);var w=p$(a,c).join(" "),m=m$(a,c),S=!!(c.outside&&!a.showOutsideDays||c.hidden),k=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:RF,C=d.jsx(k,{date:e,displayMonth:t,activeModifiers:c}),_={style:m,className:w,children:C,role:"gridcell"},N=l.focusTarget&&gr(l.focusTarget,e)&&!c.outside,L=l.focusedDay&&gr(l.focusedDay,e),R=Tt(Tt(Tt({},_),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=L||N?0:-1,r)),f),J={isButton:g,isHidden:S,activeModifiers:c,selectedDays:p,buttonProps:R,divProps:_};return J}function v$(e){var t=j.useRef(null),n=g$(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(J0,Tt({name:"day",ref:t},n.buttonProps)):d.jsx("div",Tt({},n.divProps))}function y$(e){var t=e.number,n=e.dates,r=Un(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,p=f(Number(t),{locale:l});if(!i)return d.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:p});var g=c(Number(t),{locale:l}),w=function(m){i(t,n,m)};return d.jsx(J0,{name:"week-number","aria-label":g,className:a.weeknumber,style:s.weeknumber,onClick:w,children:p})}function w$(e){var t,n,r=Un(),i=r.styles,s=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:v$,f=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:y$,p;return a&&(p=d.jsx("td",{className:s.cell,style:i.cell,children:d.jsx(f,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:s.row,style:i.row,children:[p,e.dates.map(function(g){return d.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:g})},i9(g))})]})}function E_(e,t,n){for(var r=n!=null&&n.ISOWeek?JN(t):B5(t,n),i=n!=null&&n.ISOWeek?Bu(e):vo(e,n),s=uo(r,i),a=[],l=0;l<=s;l++)a.push(Di(i,l));var c=a.reduce(function(f,p){var g=n!=null&&n.ISOWeek?ZN(p):t6(p,n),w=f.find(function(m){return m.weekNumber===g});return w?(w.dates.push(p),f):(f.push({weekNumber:g,dates:[p]}),f)},[]);return c}function x$(e,t){var n=E_(Fi(e),qg(e),t);if(t!=null&&t.useFixedWeeks){var r=a9(e,t);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=ly(s,6-r),l=E_(ly(s,1),a,t);n.push.apply(n,l)}}return n}function b$(e){var t,n,r,i=Un(),s=i.locale,a=i.classNames,l=i.styles,c=i.hideHead,f=i.fixedWeeks,p=i.components,g=i.weekStartsOn,w=i.firstWeekContainsDate,m=i.ISOWeek,S=x$(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:m,locale:s,weekStartsOn:g,firstWeekContainsDate:w}),k=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:OF,C=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:w$,_=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:MF;return d.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(k,{}),d.jsx("tbody",{className:a.tbody,style:l.tbody,children:S.map(function(N){return d.jsx(C,{displayMonth:e.displayMonth,dates:N.dates,weekNumber:N.weekNumber},N.weekNumber)})}),d.jsx(_,{displayMonth:e.displayMonth})]})}function _$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var S$=_$()?j.useLayoutEffect:j.useEffect,Av=!1,N$=0;function j_(){return"react-day-picker-".concat(++N$)}function k$(e){var t,n=e??(Av?j_():null),r=j.useState(n),i=r[0],s=r[1];return S$(function(){i===null&&s(j_())},[]),j.useEffect(function(){Av===!1&&(Av=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function E$(e){var t,n,r=Un(),i=r.dir,s=r.classNames,a=r.styles,l=r.components,c=Pp().displayMonths,f=k$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,g=[s.month],w=a.month,m=e.displayIndex===0,S=e.displayIndex===c.length-1,k=!m&&!S;i==="rtl"&&(t=[m,S],S=t[0],m=t[1]),m&&(g.push(s.caption_start),w=Tt(Tt({},w),a.caption_start)),S&&(g.push(s.caption_end),w=Tt(Tt({},w),a.caption_end)),k&&(g.push(s.caption_between),w=Tt(Tt({},w),a.caption_between));var C=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:TF;return d.jsxs("div",{className:g.join(" "),style:w,children:[d.jsx(C,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(b$,{id:p,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function j$(e){var t=Un(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function C$(e){var t,n,r=e.initialProps,i=Un(),s=V5(),a=Pp(),l=j.useState(!1),c=l[0],f=l[1];j.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),f(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var g=Tt(Tt({},i.styles.root),i.style),w=Object.keys(r).filter(function(S){return S.startsWith("data-")}).reduce(function(S,k){var C;return Tt(Tt({},S),(C={},C[k]=r[k],C))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:j$;return d.jsx("div",Tt({className:p.join(" "),style:g,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},w,{children:d.jsx(m,{children:a.displayMonths.map(function(S,k){return d.jsx(E$,{displayIndex:k,displayMonth:S},k)})})}))}function A$(e){var t=e.children,n=Z9(e,["children"]);return d.jsx(yF,{initialProps:n,children:d.jsx(CF,{children:d.jsx(c$,{initialProps:n,children:d.jsx(FF,{initialProps:n,children:d.jsx(UF,{initialProps:n,children:d.jsx(KF,{children:d.jsx(o$,{children:t})})})})})})})}function L$(e){return d.jsx(A$,Tt({},e,{children:d.jsx(C$,{initialProps:e})}))}function P$({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para días seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualización de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para días con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los días seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=FS(),[s,a]=j.useState([]),[l,c]=j.useState(void 0),[f,p]=j.useState(!0),[g,w]=j.useState(!1),[m,S]=j.useState(null),[k,C]=j.useState(!1),[_,N]=j.useState([]),[L,R]=j.useState([]),[J,ee]=j.useState([]),[W,I]=j.useState([]),{user:Z}=Os();j.useEffect(()=>{Z&&(pe(),q(),Q(),ge(),$())},[Z,i]);const re=j.useMemo(()=>{console.log("🚀 SIMPLE: Calculando fechas por miembro...");const ce=new Map;return s.forEach(le=>{const me=new Set;le.dates.forEach(Ne=>{me.add(on(Ne,"yyyy-MM-dd"))}),ce.set(le.userId,me),console.log(`${le.memberName}: ${me.size} fechas marcadas`)}),console.log(`✅ Total miembros procesados: ${ce.size}`),ce},[s]),P=j.useMemo(()=>{console.log("📅 SIMPLE: Procesando eventos...");const ce=new Map,le=new Map;return L.forEach(me=>{ce.has(me.user_id)||ce.set(me.user_id,new Set),ce.get(me.user_id).add(on(new Date(me.date),"yyyy-MM-dd"))}),W.forEach(me=>{le.has(me.user_id)||le.set(me.user_id,new Set),le.get(me.user_id).add(on(new Date(me.date),"yyyy-MM-dd"))}),console.log(`✅ Eventos procesados - Grupo: ${ce.size} usuarios, Externos: ${le.size} usuarios`),{groupEvents:ce,externalEvents:le}},[L,W]),F=j.useCallback(ce=>{const le=on(ce,"yyyy-MM-dd");return e.filter(me=>{var B,ke,Fe;if(!me.user_id)return!1;const Ne=((B=re.get(me.user_id))==null?void 0:B.has(le))??!1,Me=((ke=P.groupEvents.get(me.user_id))==null?void 0:ke.has(le))??!1,de=((Fe=P.externalEvents.get(me.user_id))==null?void 0:Fe.has(le))??!1;return Ne&&!Me&&!de})},[e,re,P]),V=j.useCallback(ce=>{const le=F(ce),me=e.filter(de=>de.role_in_group==="principal"),Ne=le.filter(de=>de.role_in_group==="sustituto"),Me=new Set;return me.forEach(de=>{de.instruments.forEach(B=>{Me.add(B.id)})}),Array.from(Me).every(de=>le.some(ke=>ke.role_in_group==="principal"&&ke.instruments.some(Fe=>Fe.id===de))?!0:Ne.some(Fe=>Fe.instruments.some(Re=>Re.id===de)))},[e,F]),Y=j.useMemo(()=>{if(!t)return[];console.log("🎯 SIMPLE: Calculando fechas disponibles del grupo (con sustitutos)...");const ce=new Set;re.forEach(Ne=>{Ne.forEach(Me=>ce.add(Me))});const le=e.filter(Ne=>Ne.role_in_group==="principal");if(le.length===0)return[];const me=[];return ce.forEach(Ne=>{const Me=new Date(Ne);if(V(Me)){me.push(Me);const de=F(Me),B=de.filter(Fe=>Fe.role_in_group==="principal"),ke=de.filter(Fe=>Fe.role_in_group==="sustituto");console.log(`📅 ${Ne}: ✅ Disponible - Principales: ${B.length}/${le.length}, Sustitutos: ${ke.length}`)}else{const de=F(Me),B=de.filter(Fe=>Fe.role_in_group==="principal"),ke=de.filter(Fe=>Fe.role_in_group==="sustituto");console.log(`📅 ${Ne}: ❌ NO disponible - Principales: ${B.length}/${le.length}, Sustitutos: ${ke.length} (instrumentos no cubiertos)`)}}),console.log(`✅ SIMPLE: ${me.length} fechas disponibles para el grupo (considerando sustitutos)`),me},[e,re,F,t,V]);j.useEffect(()=>{t&&Y.length>=0&&(N(Y),t(Y))},[Y,t]),j.useEffect(()=>{t&&t(_)},[_,t]);const pe=j.useCallback(async()=>{const ce=await $n(async()=>await Xe.from("users").select("role").eq("id",Z==null?void 0:Z.id).single(),"Error checking admin status");ce&&C(ce.role==="admin")},[Z==null?void 0:Z.id]),ge=async()=>{const ce=await $n(async()=>await Xe.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(ce){const le=[];ce.forEach(me=>{var Ne;(Ne=me.event_members)==null||Ne.forEach(Me=>{le.push({event_id:me.id,date:me.date,user_id:Me.user_id,name:me.name,group_id:me.group_id})})}),R(le)}},Q=async()=>{const ce=await $n(async()=>await Xe.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(ce){const le=ce.map(me=>({event_id:me.id,date:me.date,user_id:"",name:me.name,group_id:me.group_id}));ee(le)}},$=async()=>{console.log("=== INICIO fetchMemberExternalEvents ==="),console.log("GroupId actual:",i);const ce=await Xe.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(console.log("4. Query completa:",ce.data),ce.error){console.error("Error al obtener eventos externos:",ce.error);return}const le=ce.data||[],me=[];le.forEach(Ne=>{var Me;(Me=Ne.event_members)==null||Me.forEach(de=>{me.push({user_id:de.user_id,date:Ne.date})})}),I(me),console.log("Eventos externos formateados:",me),console.log("=== FIN fetchMemberExternalEvents ===")},q=async()=>{if(i){p(!0);try{const ce=e.filter(me=>me.user_id!==null).map(me=>me.user_id),le=await $n(async()=>await Xe.from("member_availability").select("user_id, date").in("user_id",ce).order("date"),"Error fetching availabilities");if(le){const me=e.filter(Ne=>Ne.user_id!==null).map(Ne=>({userId:Ne.user_id,memberName:Ne.name||"Unknown Member",dates:le.filter(Me=>Me.user_id===Ne.user_id).map(Me=>new Date(Me.date)),instruments:Ne.instruments||[],roleInBand:Ne.role_in_group||"principal"}));a(me)}}catch(ce){console.error("Error fetching availabilities:",ce),Te.error("Error al obtener las disponibilidades")}finally{p(!1)}}},oe=ce=>J.filter(le=>gr(new Date(le.date),ce)),Le=()=>{const ce=e.find(le=>le.user_id===(Z==null?void 0:Z.id));return k||(ce==null?void 0:ce.role_in_group)==="principal"},[T,K]=j.useState(!1),se=j.useRef(null),ue=async(ce=!1)=>{try{const le=window.scrollY;return ce?K(!0):w(!0),await new Promise(me=>setTimeout(me,50)),await Promise.all([q(),ge(),Q(),$()]),window.scrollTo(0,le),ce||Te.success("Calendario actualizado correctamente"),!0}catch(le){return console.error("Error al actualizar datos del calendario:",le),ce||Te.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{ce||w(!1),K(!1)},500)}},he=async ce=>{var de;if(console.log(`Fecha seleccionada: ${on(ce,"dd/MM/yyyy")}`),!Z){Te.error("Debes iniciar sesión para gestionar la disponibilidad");return}if(g)return;w(!0);const le=e.find(B=>B.user_id===Z.id);if(!(k||(le==null?void 0:le.role_in_group)==="principal"||Z.id===(m??Z.id))){Te.error("No tienes permisos para gestionar esta disponibilidad"),w(!1);return}const Ne=m??Z.id;if(L.some(B=>B.user_id===Ne&&gr(new Date(B.date),ce))){Te.error("No puedes cambiar tu disponibilidad en fechas con eventos programados"),w(!1);return}try{const B=e.find(Re=>Re.user_id===Ne);if(!B){Te.error("Miembro no encontrado"),w(!1);return}const ke=(de=s.find(Re=>Re.userId===B.user_id))==null?void 0:de.dates.some(Re=>gr(Re,ce)),Fe=on(ce,"yyyy-MM-dd");if(ke)try{const Re=await Xe.from("member_availability").delete().eq("user_id",B.user_id).eq("date",Fe);if(Re.error){console.error("Error al eliminar disponibilidad:",Re.error),Te.error("Hubo un problema al guardar"),w(!1);return}c(ce),Te.success(`Fecha ${on(ce,"dd/MM/yyyy")} eliminada de tu disponibilidad`),a(qe=>qe.map(be=>be.userId===B.user_id?{...be,dates:be.dates.filter($e=>!gr($e,ce))}:be))}catch(Re){console.error("Error inesperado al eliminar disponibilidad:",Re),Te.error("Ha ocurrido un error al procesar tu solicitud")}else try{const Re=await Xe.from("member_availability").insert([{user_id:B.user_id,date:Fe}]);if(Re.error){console.error("Error al insertar disponibilidad:",Re.error),Te.error("Hubo un problema al guardar"),w(!1);return}c(ce),Te.success(`Fecha ${on(ce,"dd/MM/yyyy")} añadida a tu disponibilidad`),a(qe=>qe.map(be=>be.userId===B.user_id?{...be,dates:[...be.dates,ce]}:be))}catch(Re){console.error("Error inesperado al añadir disponibilidad:",Re),Te.error("Ha ocurrido un error al procesar tu solicitud")}}catch(B){console.error("Error en handleDayClick:",B),Te.error("Ha ocurrido un error al procesar tu solicitud")}finally{w(!1)}};function je(ce){const le=F(ce),me=on(ce,"yyyy-MM-dd"),Ne=e.filter(de=>{var B;return de.user_id&&((B=P.groupEvents.get(de.user_id))==null?void 0:B.has(me))}),Me=[...le];return Ne.forEach(de=>{Me.find(B=>B.id===de.id)||Me.push(de)}),Me}const Ce=ce=>{var nt;const{date:le}=ce,me=on(le,"yyyy-MM-dd"),Ne=je(le),Me=F(le),de=m||(Z==null?void 0:Z.id),B=Ne.some(rt=>rt.user_id===de),ke=de&&((nt=P.externalEvents.get(de))==null?void 0:nt.has(me))||!1,Fe=Ne.filter(rt=>rt.user_id!==de),Re=Fe.length,qe=Fe.filter(rt=>{var at;return rt.user_id&&((at=P.externalEvents.get(rt.user_id))==null?void 0:at.has(me))}).length,be=V(le),$e=oe(le),Ke=$e.length>0,Je=ke||qe>0;return d.jsxs("div",{className:`day-content ${be?"group-available":""} ${Ke?"has-event":""} ${Je?"has-external-events":""} ${l&&gr(le,l)?"selected-day":""}`,children:[d.jsx("span",{className:`${l&&gr(le,l)?"text-indigo-900 font-bold":""}`,children:le.getDate()}),(B||Re>0||Ke)&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"availability-dots",children:[B&&d.jsx("div",{className:`availability-dot you ${ke?"border border-orange-500 bg-orange-200":""}`}),Fe.slice(0,3).map((rt,at)=>{const St=W.some(ft=>ft.user_id===rt.user_id&&gr(new Date(ft.date),le));return d.jsx("div",{className:`availability-dot others ${St?"border border-orange-500 bg-orange-200":""}`},at)})]}),d.jsxs("div",{className:"day-tooltip",children:[d.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[on(le,"MMMM d, yyyy"),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[be&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),Ke&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:$e.length>1?`${$e[0].name} y ${$e.length-1} más`:$e[0].name}),Je&&d.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[qe+(ke?1:0)," miembro(s) con eventos externos"]})]})]}),Ne.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),Ne.map(rt=>{var ft;const at=Me.some(Nt=>Nt.id===rt.id),St=rt.user_id&&((ft=P.externalEvents.get(rt.user_id))==null?void 0:ft.has(me))||!1;return d.jsx("div",{className:`tooltip-member ${rt.user_id===(m||(Z==null?void 0:Z.id))?"you":"other"}`,children:d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsx("span",{className:"font-medium",children:rt.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[rt.role_in_group==="sustituto"&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),at&&!St&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),St&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),rt.user_id===(m||(Z==null?void 0:Z.id))&&d.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"Tú"})]})]}),rt.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:rt.instruments.map((Nt,et)=>d.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[d.jsx(Br,{className:"w-3 h-3 mr-1"}),Nt.name,et<rt.instruments.length-1&&", "]},`${rt.id}-${Nt.id}-${et}`))})]})},rt.id)})]})]})]})]})},ne=()=>{const le=Y.filter(B=>oe(B).length===0).sort((B,ke)=>B.getTime()-ke.getTime()).reduce((B,ke)=>{const Fe=on(ke,"MMMM yyyy",{locale:Qd});B[Fe]||(B[Fe]={withPrincipals:[],withSubstitutes:[]});const Re=je(ke);return e.filter(be=>be.role_in_group==="principal").filter(be=>!Re.some($e=>$e.user_id===be.user_id)).length===0?B[Fe].withPrincipals.push(ke):B[Fe].withSubstitutes.push(ke),B},{});let me=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(le).length===0?me+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(le).forEach(([B,ke])=>{me+=`${B.toUpperCase()}
`,ke.withPrincipals.length>0&&(me+=`Fechas con miembros principales:
`,me+=ke.withPrincipals.map(Fe=>`${on(Fe,"d(EEE)",{locale:Qd})}`).join(", "),me+=`

`),ke.withSubstitutes.length>0&&(me+=`Fechas con sustitutos:
`,me+=ke.withSubstitutes.map(Fe=>`${on(Fe,"d(EEE)",{locale:Qd})}`).join(", "),me+=`

`),me+=`
`});const Ne=new Blob([me],{type:"text/plain;charset=utf-8"}),Me=window.URL.createObjectURL(Ne),de=document.createElement("a");de.href=Me,de.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${on(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(de),de.click(),document.body.removeChild(de),window.URL.revokeObjectURL(Me)};return f?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx(go,{className:"w-6 h-6 animate-spin text-indigo-600"})}):d.jsxs("div",{className:"space-y-6",children:[(k||Le())&&e.length>0&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),d.jsxs("div",{className:"relative w-full max-w-xs",children:[d.jsx("select",{id:"member-select",value:m||(Z==null?void 0:Z.id)||"",onChange:ce=>S(ce.target.value===(Z==null?void 0:Z.id)?null:ce.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(ce=>d.jsxs("option",{value:ce.user_id||"",children:[ce.name," ",ce.user_id===(Z==null?void 0:Z.id)?"(Tú)":""]},ce.id))}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:d.jsx(JI,{className:"h-4 w-4"})})]})]}),d.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),d.jsxs("div",{ref:se,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[d.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${g||T?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/20"}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[d.jsx(go,{className:"w-6 h-6 animate-spin text-indigo-600"}),d.jsx("span",{children:"Actualizando calendario..."})]})]}),d.jsx(L$,{mode:"single",selected:l,onSelect:c,onDayClick:he,modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:Ce},weekStartsOn:1,locale:Qd})]}),d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),d.jsxs("button",{onClick:ce=>{ce.preventDefault(),ue()},disabled:g,className:`px-3 py-1 text-sm ${g?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[d.jsx("span",{className:"mr-1",children:g?"...":"↻"}),g?"Actualizando...":"Actualizar"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:"✓"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs("button",{onClick:ne,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(H0,{className:"w-4 h-4 mr-2"}),"Descargar Fechas Disponibles del Grupo"]})})]})}async function m6(e,t){try{const{data:n,error:r}=await Xe.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r)throw r;if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,s="calendar.ics",a=new Blob([i],{type:"text/calendar;charset=utf-8"}),l=new File([a],s,{type:"text/calendar;charset=utf-8"}),{error:c}=await Xe.storage.from("calendars").upload(`${e}/${t}/${s}`,l,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:f}}=Xe.storage.from("calendars").getPublicUrl(`${e}/${t}/${s}`),p=`${f}?v=${Date.now()}`,{error:g}=await Xe.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(g)throw g}catch(n){throw console.error("Error updating calendar:",n),n}}function T$({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r,groupId:i}){const s=t.filter(c=>{const f=e.find(p=>p.id===c.memberId);return(f==null?void 0:f.role_in_group)==="principal"}),a=t.filter(c=>{const f=e.find(p=>p.id===c.memberId);return(f==null?void 0:f.role_in_group)==="sustituto"}),l=(c,f)=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:f}),c.map(p=>{const g=e.find(w=>w.id===p.memberId);return g?d.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${p.isAvailable?"bg-gray-50 hover:bg-gray-100":"bg-red-50"}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",checked:p.selected,onChange:w=>n(p.memberId,w.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${!p.isAvailable&&!p.selected?"opacity-50":""}`,disabled:!p.isAvailable&&!p.selected}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-gray-900",children:g.name}),!p.isAvailable&&d.jsxs("span",{className:"inline-flex items-center text-xs text-red-700 bg-red-100 px-2 py-0.5 rounded-full",children:[d.jsx(r_,{className:"w-3 h-3 mr-1"}),"No disponible"]})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[d.jsx(Br,{className:"w-3 h-3 mr-1"}),g.instruments.map(w=>w.name).join(", ")]})]})]})},p.memberId):null})]});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),d.jsxs("div",{className:"space-y-6",children:[l(s,"Miembros Principales"),a.length>0&&l(a,"Sustitutos")]}),r&&d.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[d.jsx(r_,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),d.jsx("p",{children:"Por favor, asegúrate de que todos los instrumentos estén cubiertos por los miembros seleccionados. Si un miembro principal no está disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var X0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */X0.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",g=1,w=2,m=4,S=1,k=2,C=1,_=2,N=4,L=8,R=16,J=32,ee=64,W=128,I=256,Z=512,re=30,P="...",F=800,V=16,Y=1,pe=2,ge=3,Q=1/0,$=9007199254740991,q=17976931348623157e292,oe=NaN,Le=4294967295,T=Le-1,K=Le>>>1,se=[["ary",W],["bind",C],["bindKey",_],["curry",L],["curryRight",R],["flip",Z],["partial",J],["partialRight",ee],["rearg",I]],ue="[object Arguments]",he="[object Array]",je="[object AsyncFunction]",Ce="[object Boolean]",ne="[object Date]",ce="[object DOMException]",le="[object Error]",me="[object Function]",Ne="[object GeneratorFunction]",Me="[object Map]",de="[object Number]",B="[object Null]",ke="[object Object]",Fe="[object Promise]",Re="[object Proxy]",qe="[object RegExp]",be="[object Set]",$e="[object String]",Ke="[object Symbol]",Je="[object Undefined]",nt="[object WeakMap]",rt="[object WeakSet]",at="[object ArrayBuffer]",St="[object DataView]",ft="[object Float32Array]",Nt="[object Float64Array]",et="[object Int8Array]",bn="[object Int16Array]",Bt="[object Int32Array]",Tr="[object Uint8Array]",Qt="[object Uint8ClampedArray]",pn="[object Uint16Array]",oi="[object Uint32Array]",Zt=/\b__p \+= '';/g,aa=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,li=/&(?:amp|lt|gt|quot|#39);/g,_n=/[&<>"']/g,Vt=RegExp(li.source),wt=RegExp(_n.source),Ut=/<%-([\s\S]+?)%>/g,ur=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mr=/^\w*$/,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vn=/[\\^$.*+?()[\]{}|]/g,nr=RegExp(Vn.source),En=/^\s+/,Pn=/\s/,jn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yn=/\{\n\/\* \[wrapped with (.+)\] \*/,Ui=/,? & /,ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ps=/[()=,{}\[\]\/\s]/,ms=/\\(\\)?/g,gs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vs=/\w*$/,zi=/^[-+]0x[0-9a-f]+$/i,Rs=/^0b[01]+$/i,So=/^\[object .+?Constructor\]$/,ll=/^0o[0-7]+$/i,cl=/^(?:0|[1-9]\d*)$/,ul=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oa=/($^)/,Yu=/['\n\r\u2028\u2029\\]/g,dl="\\ud800-\\udfff",Df="\\u0300-\\u036f",fl="\\ufe20-\\ufe2f",Ku="\\u20d0-\\u20ff",Ju=Df+fl+Ku,hl="\\u2700-\\u27bf",Xu="a-z\\xdf-\\xf6\\xf8-\\xff",Qu="\\xac\\xb1\\xd7\\xf7",Of="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pl="\\u2000-\\u206f",Rf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kn="A-Z\\xc0-\\xd6\\xd8-\\xde",$c="\\ufe0e\\ufe0f",Bc=Qu+Of+pl+Rf,ml="['’]",Uc="["+dl+"]",Zu="["+Bc+"]",ci="["+Ju+"]",No="\\d+",ui="["+hl+"]",gl="["+Xu+"]",zc="[^"+dl+Bc+No+hl+Xu+Kn+"]",qc="\\ud83c[\\udffb-\\udfff]",ed="(?:"+ci+"|"+qc+")",td="[^"+dl+"]",vl="(?:\\ud83c[\\udde6-\\uddff]){2}",Wc="[\\ud800-\\udbff][\\udc00-\\udfff]",Fs="["+Kn+"]",nd="\\u200d",rd="(?:"+gl+"|"+zc+")",Ff="(?:"+Fs+"|"+zc+")",$s="(?:"+ml+"(?:d|ll|m|re|s|t|ve))?",ko="(?:"+ml+"(?:D|LL|M|RE|S|T|VE))?",Eo=ed+"?",Hc="["+$c+"]?",Ur="(?:"+nd+"(?:"+[td,vl,Wc].join("|")+")"+Hc+Eo+")*",$f="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",id="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lt=Hc+Eo+Ur,Bf="(?:"+[ui,vl,Wc].join("|")+")"+Lt,Uf="(?:"+[td+ci+"?",ci,vl,Wc,Uc].join("|")+")",Bs=RegExp(ml,"g"),sd=RegExp(ci,"g"),yl=RegExp(qc+"(?="+qc+")|"+Uf+Lt,"g"),wl=RegExp([Fs+"?"+gl+"+"+$s+"(?="+[Zu,Fs,"$"].join("|")+")",Ff+"+"+ko+"(?="+[Zu,Fs+rd,"$"].join("|")+")",Fs+"?"+rd+"+"+$s,Fs+"+"+ko,id,$f,No,Bf].join("|"),"g"),Gc=RegExp("["+nd+dl+Ju+$c+"]"),zf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wf=-1,mn={};mn[ft]=mn[Nt]=mn[et]=mn[bn]=mn[Bt]=mn[Tr]=mn[Qt]=mn[pn]=mn[oi]=!0,mn[ue]=mn[he]=mn[at]=mn[Ce]=mn[St]=mn[ne]=mn[le]=mn[me]=mn[Me]=mn[de]=mn[ke]=mn[qe]=mn[be]=mn[$e]=mn[nt]=!1;var sn={};sn[ue]=sn[he]=sn[at]=sn[St]=sn[Ce]=sn[ne]=sn[ft]=sn[Nt]=sn[et]=sn[bn]=sn[Bt]=sn[Me]=sn[de]=sn[ke]=sn[qe]=sn[be]=sn[$e]=sn[Ke]=sn[Tr]=sn[Qt]=sn[pn]=sn[oi]=!0,sn[le]=sn[me]=sn[nt]=!1;var Ba={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Hf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xl=parseFloat,ad=parseInt,Yc=typeof ii=="object"&&ii&&ii.Object===Object&&ii,od=typeof self=="object"&&self&&self.Object===Object&&self,dr=Yc||od||Function("return this")(),qi=t&&!t.nodeType&&t,Xr=qi&&!0&&e&&!e.nodeType&&e,ld=Xr&&Xr.exports===qi,Us=ld&&Yc.process,Jn=function(){try{var Se=Xr&&Xr.require&&Xr.require("util").types;return Se||Us&&Us.binding&&Us.binding("util")}catch{}}(),bl=Jn&&Jn.isArrayBuffer,Ua=Jn&&Jn.isDate,cd=Jn&&Jn.isMap,Co=Jn&&Jn.isRegExp,ud=Jn&&Jn.isSet,_l=Jn&&Jn.isTypedArray;function Ir(Se,ze,Ie){switch(Ie.length){case 0:return Se.call(ze);case 1:return Se.call(ze,Ie[0]);case 2:return Se.call(ze,Ie[0],Ie[1]);case 3:return Se.call(ze,Ie[0],Ie[1],Ie[2])}return Se.apply(ze,Ie)}function dd(Se,ze,Ie,dt){for(var xt=-1,Ot=Se==null?0:Se.length;++xt<Ot;){var Rn=Se[xt];ze(dt,Rn,Ie(Rn),Se)}return dt}function Dr(Se,ze){for(var Ie=-1,dt=Se==null?0:Se.length;++Ie<dt&&ze(Se[Ie],Ie,Se)!==!1;);return Se}function Kc(Se,ze){for(var Ie=Se==null?0:Se.length;Ie--&&ze(Se[Ie],Ie,Se)!==!1;);return Se}function Sl(Se,ze){for(var Ie=-1,dt=Se==null?0:Se.length;++Ie<dt;)if(!ze(Se[Ie],Ie,Se))return!1;return!0}function ys(Se,ze){for(var Ie=-1,dt=Se==null?0:Se.length,xt=0,Ot=[];++Ie<dt;){var Rn=Se[Ie];ze(Rn,Ie,Se)&&(Ot[xt++]=Rn)}return Ot}function Nl(Se,ze){var Ie=Se==null?0:Se.length;return!!Ie&&Qe(Se,ze,0)>-1}function za(Se,ze,Ie){for(var dt=-1,xt=Se==null?0:Se.length;++dt<xt;)if(Ie(ze,Se[dt]))return!0;return!1}function un(Se,ze){for(var Ie=-1,dt=Se==null?0:Se.length,xt=Array(dt);++Ie<dt;)xt[Ie]=ze(Se[Ie],Ie,Se);return xt}function Wi(Se,ze){for(var Ie=-1,dt=ze.length,xt=Se.length;++Ie<dt;)Se[xt+Ie]=ze[Ie];return Se}function zs(Se,ze,Ie,dt){var xt=-1,Ot=Se==null?0:Se.length;for(dt&&Ot&&(Ie=Se[++xt]);++xt<Ot;)Ie=ze(Ie,Se[xt],xt,Se);return Ie}function Jc(Se,ze,Ie,dt){var xt=Se==null?0:Se.length;for(dt&&xt&&(Ie=Se[--xt]);xt--;)Ie=ze(Ie,Se[xt],xt,Se);return Ie}function x(Se,ze){for(var Ie=-1,dt=Se==null?0:Se.length;++Ie<dt;)if(ze(Se[Ie],Ie,Se))return!0;return!1}var D=Pt("length");function ae(Se){return Se.split("")}function ve(Se){return Se.match(ki)||[]}function Pe(Se,ze,Ie){var dt;return Ie(Se,function(xt,Ot,Rn){if(ze(xt,Ot,Rn))return dt=Ot,!1}),dt}function Ue(Se,ze,Ie,dt){for(var xt=Se.length,Ot=Ie+(dt?1:-1);dt?Ot--:++Ot<xt;)if(ze(Se[Ot],Ot,Se))return Ot;return-1}function Qe(Se,ze,Ie){return ze===ze?Vi(Se,ze,Ie):Ue(Se,_t,Ie)}function ut(Se,ze,Ie,dt){for(var xt=Ie-1,Ot=Se.length;++xt<Ot;)if(dt(Se[xt],ze))return xt;return-1}function _t(Se){return Se!==Se}function It(Se,ze){var Ie=Se==null?0:Se.length;return Ie?Qn(Se,ze)/Ie:oe}function Pt(Se){return function(ze){return ze==null?n:ze[Se]}}function Yt(Se){return function(ze){return Se==null?n:Se[ze]}}function On(Se,ze,Ie,dt,xt){return xt(Se,function(Ot,Rn,dn){Ie=dt?(dt=!1,Ot):ze(Ie,Ot,Rn,dn)}),Ie}function Xn(Se,ze){var Ie=Se.length;for(Se.sort(ze);Ie--;)Se[Ie]=Se[Ie].value;return Se}function Qn(Se,ze){for(var Ie,dt=-1,xt=Se.length;++dt<xt;){var Ot=ze(Se[dt]);Ot!==n&&(Ie=Ie===n?Ot:Ie+Ot)}return Ie}function Er(Se,ze){for(var Ie=-1,dt=Array(Se);++Ie<Se;)dt[Ie]=ze(Ie);return dt}function jr(Se,ze){return un(ze,function(Ie){return[Ie,Se[Ie]]})}function Hi(Se){return Se&&Se.slice(0,ca(Se)+1).replace(En,"")}function Tn(Se){return function(ze){return Se(ze)}}function Gi(Se,ze){return un(ze,function(Ie){return Se[Ie]})}function qa(Se,ze){return Se.has(ze)}function kl(Se,ze){for(var Ie=-1,dt=Se.length;++Ie<dt&&Qe(ze,Se[Ie],0)>-1;);return Ie}function El(Se,ze){for(var Ie=Se.length;Ie--&&Qe(ze,Se[Ie],0)>-1;);return Ie}function jl(Se,ze){for(var Ie=Se.length,dt=0;Ie--;)Se[Ie]===ze&&++dt;return dt}var Xc=Yt(Ba),Qc=Yt(Hf);function Cl(Se){return"\\"+Vc[Se]}function Or(Se,ze){return Se==null?n:Se[ze]}function ws(Se){return Gc.test(Se)}function Al(Se){return zf.test(Se)}function Ll(Se){for(var ze,Ie=[];!(ze=Se.next()).done;)Ie.push(ze.value);return Ie}function Ao(Se){var ze=-1,Ie=Array(Se.size);return Se.forEach(function(dt,xt){Ie[++ze]=[xt,dt]}),Ie}function Qr(Se,ze){return function(Ie){return Se(ze(Ie))}}function qs(Se,ze){for(var Ie=-1,dt=Se.length,xt=0,Ot=[];++Ie<dt;){var Rn=Se[Ie];(Rn===ze||Rn===p)&&(Se[Ie]=p,Ot[xt++]=Ie)}return Ot}function Wa(Se){var ze=-1,Ie=Array(Se.size);return Se.forEach(function(dt){Ie[++ze]=dt}),Ie}function fd(Se){var ze=-1,Ie=Array(Se.size);return Se.forEach(function(dt){Ie[++ze]=[dt,dt]}),Ie}function Vi(Se,ze,Ie){for(var dt=Ie-1,xt=Se.length;++dt<xt;)if(Se[dt]===ze)return dt;return-1}function Pl(Se,ze,Ie){for(var dt=Ie+1;dt--;)if(Se[dt]===ze)return dt;return dt}function la(Se){return ws(Se)?fi(Se):D(Se)}function di(Se){return ws(Se)?Zr(Se):ae(Se)}function ca(Se){for(var ze=Se.length;ze--&&Pn.test(Se.charAt(ze)););return ze}var Lo=Yt(jo);function fi(Se){for(var ze=yl.lastIndex=0;yl.test(Se);)++ze;return ze}function Zr(Se){return Se.match(yl)||[]}function Ha(Se){return Se.match(wl)||[]}var ua=function Se(ze){ze=ze==null?dr:hi.defaults(dr.Object(),ze,hi.pick(dr,qf));var Ie=ze.Array,dt=ze.Date,xt=ze.Error,Ot=ze.Function,Rn=ze.Math,dn=ze.Object,Po=ze.RegExp,To=ze.String,Cr=ze.TypeError,xs=Ie.prototype,Mo=Ot.prototype,bs=dn.prototype,Ws=ze["__core-js_shared__"],_s=Mo.toString,en=bs.hasOwnProperty,Yi=0,Ei=function(){var o=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),gn=bs.toString,Cn=_s.call(dn),rr=dr._,vr=Po("^"+_s.call(en).replace(Vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ki=ld?ze.Buffer:n,Ji=ze.Symbol,da=ze.Uint8Array,Zc=Ki?Ki.allocUnsafe:n,Tl=Qr(dn.getPrototypeOf,dn),eu=dn.create,pi=bs.propertyIsEnumerable,ei=xs.splice,tu=Ji?Ji.isConcatSpreadable:n,Ga=Ji?Ji.iterator:n,Va=Ji?Ji.toStringTag:n,Io=function(){try{var o=uu(dn,"defineProperty");return o({},"",{}),o}catch{}}(),hd=ze.clearTimeout!==dr.clearTimeout&&ze.clearTimeout,Gf=dt&&dt.now!==dr.Date.now&&dt.now,Op=ze.setTimeout!==dr.setTimeout&&ze.setTimeout,Ml=Rn.ceil,Il=Rn.floor,Dl=dn.getOwnPropertySymbols,Vf=Ki?Ki.isBuffer:n,Rp=ze.isFinite,Xg=xs.join,Fp=Qr(dn.keys,dn),yr=Rn.max,zr=Rn.min,Qg=dt.now,Zg=ze.parseInt,$p=Rn.random,Yf=xs.reverse,nu=uu(ze,"DataView"),fa=uu(ze,"Map"),Kf=uu(ze,"Promise"),Ol=uu(ze,"Set"),Rl=uu(ze,"WeakMap"),ru=uu(dn,"create"),pd=Rl&&new Rl,Fl={},e1=du(nu),Ya=du(fa),Ss=du(Kf),ha=du(Ol),t1=du(Rl),iu=Ji?Ji.prototype:n,Xi=iu?iu.valueOf:n,ji=iu?iu.toString:n;function G(o){if(hr(o)&&!Ft(o)&&!(o instanceof Wt)){if(o instanceof Ci)return o;if(en.call(o,"__wrapped__"))return Ow(o)}return new Ci(o)}var $l=function(){function o(){}return function(u){if(!sr(u))return{};if(eu)return eu(u);o.prototype=u;var y=new o;return o.prototype=n,y}}();function su(){}function Ci(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}G.templateSettings={escape:Ut,evaluate:ur,interpolate:rn,variable:"",imports:{_:G}},G.prototype=su.prototype,G.prototype.constructor=G,Ci.prototype=$l(su.prototype),Ci.prototype.constructor=Ci;function Wt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function Bp(){var o=new Wt(this.__wrapped__);return o.__actions__=Zi(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Zi(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Zi(this.__views__),o}function n1(){if(this.__filtered__){var o=new Wt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function md(){var o=this.__wrapped__.value(),u=this.__dir__,y=Ft(o),E=u<0,O=y?o.length:0,te=xk(0,O,this.__views__),fe=te.start,ye=te.end,Ae=ye-fe,Ve=E?ye:fe-1,Ye=this.__iteratees__,tt=Ye.length,lt=0,bt=zr(Ae,this.__takeCount__);if(!y||!E&&O==Ae&&bt==Ae)return cu(o,this.__actions__);var Et=[];e:for(;Ae--&&lt<bt;){Ve+=u;for(var qt=-1,jt=o[Ve];++qt<tt;){var Jt=Ye[qt],tn=Jt.iteratee,Es=Jt.type,Mi=tn(jt);if(Es==pe)jt=Mi;else if(!Mi){if(Es==Y)continue e;break e}}Et[lt++]=jt}return Et}Wt.prototype=$l(su.prototype),Wt.prototype.constructor=Wt;function Hs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function au(){this.__data__=ru?ru(null):{},this.size=0}function Jf(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Up(o){var u=this.__data__;if(ru){var y=u[o];return y===c?n:y}return en.call(u,o)?u[o]:n}function r1(o){var u=this.__data__;return ru?u[o]!==n:en.call(u,o)}function zp(o,u){var y=this.__data__;return this.size+=this.has(o)?0:1,y[o]=ru&&u===n?c:u,this}Hs.prototype.clear=au,Hs.prototype.delete=Jf,Hs.prototype.get=Up,Hs.prototype.has=r1,Hs.prototype.set=zp;function pa(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function i1(){this.__data__=[],this.size=0}function s1(o){var u=this.__data__,y=we(u,o);if(y<0)return!1;var E=u.length-1;return y==E?u.pop():ei.call(u,y,1),--this.size,!0}function a1(o){var u=this.__data__,y=we(u,o);return y<0?n:u[y][1]}function o1(o){return we(this.__data__,o)>-1}function l1(o,u){var y=this.__data__,E=we(y,o);return E<0?(++this.size,y.push([o,u])):y[E][1]=u,this}pa.prototype.clear=i1,pa.prototype.delete=s1,pa.prototype.get=a1,pa.prototype.has=o1,pa.prototype.set=l1;function Gs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var E=o[u];this.set(E[0],E[1])}}function gd(){this.size=0,this.__data__={hash:new Hs,map:new(fa||pa),string:new Hs}}function c1(o){var u=am(this,o).delete(o);return this.size-=u?1:0,u}function u1(o){return am(this,o).get(o)}function qp(o){return am(this,o).has(o)}function h(o,u){var y=am(this,o),E=y.size;return y.set(o,u),this.size+=y.size==E?0:1,this}Gs.prototype.clear=gd,Gs.prototype.delete=c1,Gs.prototype.get=u1,Gs.prototype.has=qp,Gs.prototype.set=h;function v(o){var u=-1,y=o==null?0:o.length;for(this.__data__=new Gs;++u<y;)this.add(o[u])}function b(o){return this.__data__.set(o,c),this}function A(o){return this.__data__.has(o)}v.prototype.add=v.prototype.push=b,v.prototype.has=A;function M(o){var u=this.__data__=new pa(o);this.size=u.size}function U(){this.__data__=new pa,this.size=0}function z(o){var u=this.__data__,y=u.delete(o);return this.size=u.size,y}function H(o){return this.__data__.get(o)}function X(o){return this.__data__.has(o)}function ie(o,u){var y=this.__data__;if(y instanceof pa){var E=y.__data__;if(!fa||E.length<i-1)return E.push([o,u]),this.size=++y.size,this;y=this.__data__=new Gs(E)}return y.set(o,u),this.size=y.size,this}M.prototype.clear=U,M.prototype.delete=z,M.prototype.get=H,M.prototype.has=X,M.prototype.set=ie;function xe(o,u){var y=Ft(o),E=!y&&fu(o),O=!y&&!E&&Jl(o),te=!y&&!E&&!O&&Ad(o),fe=y||E||O||te,ye=fe?Er(o.length,To):[],Ae=ye.length;for(var Ve in o)(u||en.call(o,Ve))&&!(fe&&(Ve=="length"||O&&(Ve=="offset"||Ve=="parent")||te&&(Ve=="buffer"||Ve=="byteLength"||Ve=="byteOffset")||Bo(Ve,Ae)))&&ye.push(Ve);return ye}function De(o){var u=o.length;return u?o[Hl(0,u-1)]:n}function Oe(o,u){return om(Zi(o),st(u,0,o.length))}function Ee(o){return om(Zi(o))}function Ge(o,u,y){(y!==n&&!ya(o[u],y)||y===n&&!(u in o))&&We(o,u,y)}function Be(o,u,y){var E=o[u];(!(en.call(o,u)&&ya(E,y))||y===n&&!(u in o))&&We(o,u,y)}function we(o,u){for(var y=o.length;y--;)if(ya(o[y][0],u))return y;return-1}function _e(o,u,y,E){return Dt(o,function(O,te,fe){u(E,O,y(O),fe)}),E}function He(o,u){return o&&no(u,Hr(u),o)}function Ze(o,u){return o&&no(u,ts(u),o)}function We(o,u,y){u=="__proto__"&&Io?Io(o,u,{configurable:!0,enumerable:!0,value:y,writable:!0}):o[u]=y}function ct(o,u){for(var y=-1,E=u.length,O=Ie(E),te=o==null;++y<E;)O[y]=te?n:T1(o,u[y]);return O}function st(o,u,y){return o===o&&(y!==n&&(o=o<=y?o:y),u!==n&&(o=o>=u?o:u)),o}function gt(o,u,y,E,O,te){var fe,ye=u&g,Ae=u&w,Ve=u&m;if(y&&(fe=O?y(o,E,O,te):y(o)),fe!==n)return fe;if(!sr(o))return o;var Ye=Ft(o);if(Ye){if(fe=_k(o),!ye)return Zi(o,fe)}else{var tt=mi(o),lt=tt==me||tt==Ne;if(Jl(o))return kd(o,ye);if(tt==ke||tt==ue||lt&&!O){if(fe=Ae||lt?{}:jw(o),!ye)return Ae?dk(o,Ze(fe,o)):uk(o,He(fe,o))}else{if(!sn[tt])return O?o:{};fe=Sk(o,tt,ye)}}te||(te=new M);var bt=te.get(o);if(bt)return bt;te.set(o,fe),nx(o)?o.forEach(function(jt){fe.add(gt(jt,u,y,jt,o,te))}):ex(o)&&o.forEach(function(jt,Jt){fe.set(Jt,gt(jt,u,y,Jt,o,te))});var Et=Ve?Ae?y1:v1:Ae?ts:Hr,qt=Ye?n:Et(o);return Dr(qt||o,function(jt,Jt){qt&&(Jt=jt,jt=o[Jt]),Be(fe,Jt,gt(jt,u,y,Jt,o,te))}),fe}function ot(o){var u=Hr(o);return function(y){return an(y,o,u)}}function an(o,u,y){var E=y.length;if(o==null)return!E;for(o=dn(o);E--;){var O=y[E],te=u[O],fe=o[O];if(fe===n&&!(O in o)||!te(fe))return!1}return!0}function fn(o,u,y){if(typeof o!="function")throw new Cr(a);return ah(function(){o.apply(n,y)},u)}function Ht(o,u,y,E){var O=-1,te=Nl,fe=!0,ye=o.length,Ae=[],Ve=u.length;if(!ye)return Ae;y&&(u=un(u,Tn(y))),E?(te=za,fe=!1):u.length>=i&&(te=qa,fe=!1,u=new v(u));e:for(;++O<ye;){var Ye=o[O],tt=y==null?Ye:y(Ye);if(Ye=E||Ye!==0?Ye:0,fe&&tt===tt){for(var lt=Ve;lt--;)if(u[lt]===tt)continue e;Ae.push(Ye)}else te(u,tt,E)||Ae.push(Ye)}return Ae}var Dt=hw(Zn),yn=hw(ni,!0);function wn(o,u){var y=!0;return Dt(o,function(E,O,te){return y=!!u(E,O,te),y}),y}function Mt(o,u,y){for(var E=-1,O=o.length;++E<O;){var te=o[E],fe=u(te);if(fe!=null&&(ye===n?fe===fe&&!ks(fe):y(fe,ye)))var ye=fe,Ae=te}return Ae}function fr(o,u,y,E){var O=o.length;for(y=zt(y),y<0&&(y=-y>O?0:O+y),E=E===n||E>O?O:zt(E),E<0&&(E+=O),E=y>E?0:ix(E);y<E;)o[y++]=u;return o}function ti(o,u){var y=[];return Dt(o,function(E,O,te){u(E,O,te)&&y.push(E)}),y}function Kt(o,u,y,E,O){var te=-1,fe=o.length;for(y||(y=kk),O||(O=[]);++te<fe;){var ye=o[te];u>0&&y(ye)?u>1?Kt(ye,u-1,y,E,O):Wi(O,ye):E||(O[O.length]=ye)}return O}var qr=pw(),hn=pw(!0);function Zn(o,u){return o&&qr(o,u,Hr)}function ni(o,u){return o&&hn(o,u,Hr)}function ir(o,u){return ys(u,function(y){return Uo(o[y])})}function zn(o,u){u=Ys(u,o);for(var y=0,E=u.length;o!=null&&y<E;)o=o[ro(u[y++])];return y&&y==E?o:n}function Wr(o,u,y){var E=u(o);return Ft(o)?E:Wi(E,y(o))}function An(o){return o==null?o===n?Je:B:Va&&Va in dn(o)?wk(o):Tk(o)}function Qi(o,u){return o>u}function Ar(o,u){return o!=null&&en.call(o,u)}function ma(o,u){return o!=null&&u in dn(o)}function Do(o,u,y){return o>=zr(u,y)&&o<yr(u,y)}function Ka(o,u,y){for(var E=y?za:Nl,O=o[0].length,te=o.length,fe=te,ye=Ie(te),Ae=1/0,Ve=[];fe--;){var Ye=o[fe];fe&&u&&(Ye=un(Ye,Tn(u))),Ae=zr(Ye.length,Ae),ye[fe]=!y&&(u||O>=120&&Ye.length>=120)?new v(fe&&Ye):n}Ye=o[0];var tt=-1,lt=ye[0];e:for(;++tt<O&&Ve.length<Ae;){var bt=Ye[tt],Et=u?u(bt):bt;if(bt=y||bt!==0?bt:0,!(lt?qa(lt,Et):E(Ve,Et,y))){for(fe=te;--fe;){var qt=ye[fe];if(!(qt?qa(qt,Et):E(o[fe],Et,y)))continue e}lt&&lt.push(Et),Ve.push(bt)}}return Ve}function Ja(o,u,y,E){return Zn(o,function(O,te,fe){u(E,y(O),te,fe)}),E}function Ln(o,u,y){u=Ys(u,o),o=Pw(o,u);var E=o==null?o:o[ro(Ks(u))];return E==null?n:Ir(E,o,y)}function vd(o){return hr(o)&&An(o)==ue}function Wp(o){return hr(o)&&An(o)==at}function Hp(o){return hr(o)&&An(o)==ne}function Xa(o,u,y,E,O){return o===u?!0:o==null||u==null||!hr(o)&&!hr(u)?o!==o&&u!==u:ou(o,u,y,E,Xa,O)}function ou(o,u,y,E,O,te){var fe=Ft(o),ye=Ft(u),Ae=fe?he:mi(o),Ve=ye?he:mi(u);Ae=Ae==ue?ke:Ae,Ve=Ve==ue?ke:Ve;var Ye=Ae==ke,tt=Ve==ke,lt=Ae==Ve;if(lt&&Jl(o)){if(!Jl(u))return!1;fe=!0,Ye=!1}if(lt&&!Ye)return te||(te=new M),fe||Ad(o)?Nw(o,u,y,E,O,te):vk(o,u,Ae,y,E,O,te);if(!(y&S)){var bt=Ye&&en.call(o,"__wrapped__"),Et=tt&&en.call(u,"__wrapped__");if(bt||Et){var qt=bt?o.value():o,jt=Et?u.value():u;return te||(te=new M),O(qt,jt,y,E,te)}}return lt?(te||(te=new M),yk(o,u,y,E,O,te)):!1}function yd(o){return hr(o)&&mi(o)==Me}function Ai(o,u,y,E){var O=y.length,te=O,fe=!E;if(o==null)return!te;for(o=dn(o);O--;){var ye=y[O];if(fe&&ye[2]?ye[1]!==o[ye[0]]:!(ye[0]in o))return!1}for(;++O<te;){ye=y[O];var Ae=ye[0],Ve=o[Ae],Ye=ye[1];if(fe&&ye[2]){if(Ve===n&&!(Ae in o))return!1}else{var tt=new M;if(E)var lt=E(Ve,Ye,Ae,o,u,tt);if(!(lt===n?Xa(Ye,Ve,S|k,E,tt):lt))return!1}}return!0}function Oo(o){if(!sr(o)||jk(o))return!1;var u=Uo(o)?vr:So;return u.test(du(o))}function Bl(o){return hr(o)&&An(o)==qe}function Gp(o){return hr(o)&&mi(o)==be}function wd(o){return hr(o)&&hm(o.length)&&!!mn[An(o)]}function Xf(o){return typeof o=="function"?o:o==null?ns:typeof o=="object"?Ft(o)?Yp(o[0],o[1]):Vp(o):mx(o)}function Ul(o){if(!sh(o))return Fp(o);var u=[];for(var y in dn(o))en.call(o,y)&&y!="constructor"&&u.push(y);return u}function Qf(o){if(!sr(o))return Pk(o);var u=sh(o),y=[];for(var E in o)E=="constructor"&&(u||!en.call(o,E))||y.push(E);return y}function zl(o,u){return o<u}function ql(o,u){var y=-1,E=es(o)?Ie(o.length):[];return Dt(o,function(O,te,fe){E[++y]=u(O,te,fe)}),E}function Vp(o){var u=x1(o);return u.length==1&&u[0][2]?Aw(u[0][0],u[0][1]):function(y){return y===o||Ai(y,o,u)}}function Yp(o,u){return _1(o)&&Cw(u)?Aw(ro(o),u):function(y){var E=T1(y,o);return E===n&&E===u?M1(y,o):Xa(u,E,S|k)}}function Wl(o,u,y,E,O){o!==u&&qr(u,function(te,fe){if(O||(O=new M),sr(te))Qa(o,u,fe,y,Wl,E,O);else{var ye=E?E(N1(o,fe),te,fe+"",o,u,O):n;ye===n&&(ye=te),Ge(o,fe,ye)}},ts)}function Qa(o,u,y,E,O,te,fe){var ye=N1(o,y),Ae=N1(u,y),Ve=fe.get(Ae);if(Ve){Ge(o,y,Ve);return}var Ye=te?te(ye,Ae,y+"",o,u,fe):n,tt=Ye===n;if(tt){var lt=Ft(Ae),bt=!lt&&Jl(Ae),Et=!lt&&!bt&&Ad(Ae);Ye=Ae,lt||bt||Et?Ft(ye)?Ye=ye:wr(ye)?Ye=Zi(ye):bt?(tt=!1,Ye=kd(Ae,!0)):Et?(tt=!1,Ye=cw(Ae,!0)):Ye=[]:oh(Ae)||fu(Ae)?(Ye=ye,fu(ye)?Ye=sx(ye):(!sr(ye)||Uo(ye))&&(Ye=jw(Ae))):tt=!1}tt&&(fe.set(Ae,Ye),O(Ye,Ae,E,te,fe),fe.delete(Ae)),Ge(o,y,Ye)}function Kp(o,u){var y=o.length;if(y)return u+=u<0?y:0,Bo(u,y)?o[u]:n}function Jp(o,u,y){u.length?u=un(u,function(te){return Ft(te)?function(fe){return zn(fe,te.length===1?te[0]:te)}:te}):u=[ns];var E=-1;u=un(u,Tn(kt()));var O=ql(o,function(te,fe,ye){var Ae=un(u,function(Ve){return Ve(te)});return{criteria:Ae,index:++E,value:te}});return Xn(O,function(te,fe){return ck(te,fe,y)})}function d1(o,u){return Zf(o,u,function(y,E){return M1(o,E)})}function Zf(o,u,y){for(var E=-1,O=u.length,te={};++E<O;){var fe=u[E],ye=zn(o,fe);y(ye,fe)&&Gl(te,Ys(fe,o),ye)}return te}function xd(o){return function(u){return zn(u,o)}}function bd(o,u,y,E){var O=E?ut:Qe,te=-1,fe=u.length,ye=o;for(o===u&&(u=Zi(u)),y&&(ye=un(o,Tn(y)));++te<fe;)for(var Ae=0,Ve=u[te],Ye=y?y(Ve):Ve;(Ae=O(ye,Ye,Ae,E))>-1;)ye!==o&&ei.call(ye,Ae,1),ei.call(o,Ae,1);return o}function eh(o,u){for(var y=o?u.length:0,E=y-1;y--;){var O=u[y];if(y==E||O!==te){var te=O;Bo(O)?ei.call(o,O,1):rh(o,O)}}return o}function Hl(o,u){return o+Il($p()*(u-o+1))}function th(o,u,y,E){for(var O=-1,te=yr(Ml((u-o)/(y||1)),0),fe=Ie(te);te--;)fe[E?te:++O]=o,o+=y;return fe}function Ro(o,u){var y="";if(!o||u<1||u>$)return y;do u%2&&(y+=o),u=Il(u/2),u&&(o+=o);while(u);return y}function $t(o,u){return k1(Lw(o,u,ns),o+"")}function f1(o){return De(Ld(o))}function _d(o,u){var y=Ld(o);return om(y,st(u,0,y.length))}function Gl(o,u,y,E){if(!sr(o))return o;u=Ys(u,o);for(var O=-1,te=u.length,fe=te-1,ye=o;ye!=null&&++O<te;){var Ae=ro(u[O]),Ve=y;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return o;if(O!=fe){var Ye=ye[Ae];Ve=E?E(Ye,Ae,ye):n,Ve===n&&(Ve=sr(Ye)?Ye:Bo(u[O+1])?[]:{})}Be(ye,Ae,Ve),ye=ye[Ae]}return o}var Sd=pd?function(o,u){return pd.set(o,u),o}:ns,Za=Io?function(o,u){return Io(o,"toString",{configurable:!0,enumerable:!1,value:D1(u),writable:!0})}:ns;function Xp(o){return om(Ld(o))}function Li(o,u,y){var E=-1,O=o.length;u<0&&(u=-u>O?0:O+u),y=y>O?O:y,y<0&&(y+=O),O=u>y?0:y-u>>>0,u>>>=0;for(var te=Ie(O);++E<O;)te[E]=o[E+u];return te}function h1(o,u){var y;return Dt(o,function(E,O,te){return y=u(E,O,te),!y}),!!y}function lu(o,u,y){var E=0,O=o==null?E:o.length;if(typeof u=="number"&&u===u&&O<=K){for(;E<O;){var te=E+O>>>1,fe=o[te];fe!==null&&!ks(fe)&&(y?fe<=u:fe<u)?E=te+1:O=te}return O}return eo(o,u,ns,y)}function eo(o,u,y,E){var O=0,te=o==null?0:o.length;if(te===0)return 0;u=y(u);for(var fe=u!==u,ye=u===null,Ae=ks(u),Ve=u===n;O<te;){var Ye=Il((O+te)/2),tt=y(o[Ye]),lt=tt!==n,bt=tt===null,Et=tt===tt,qt=ks(tt);if(fe)var jt=E||Et;else Ve?jt=Et&&(E||lt):ye?jt=Et&&lt&&(E||!bt):Ae?jt=Et&&lt&&!bt&&(E||!qt):bt||qt?jt=!1:jt=E?tt<=u:tt<u;jt?O=Ye+1:te=Ye}return zr(te,T)}function Qp(o,u){for(var y=-1,E=o.length,O=0,te=[];++y<E;){var fe=o[y],ye=u?u(fe):fe;if(!y||!ya(ye,Ae)){var Ae=ye;te[O++]=fe===0?0:fe}}return te}function nh(o){return typeof o=="number"?o:ks(o)?oe:+o}function Pi(o){if(typeof o=="string")return o;if(Ft(o))return un(o,Pi)+"";if(ks(o))return ji?ji.call(o):"";var u=o+"";return u=="0"&&1/o==-Q?"-0":u}function ga(o,u,y){var E=-1,O=Nl,te=o.length,fe=!0,ye=[],Ae=ye;if(y)fe=!1,O=za;else if(te>=i){var Ve=u?null:mk(o);if(Ve)return Wa(Ve);fe=!1,O=qa,Ae=new v}else Ae=u?[]:ye;e:for(;++E<te;){var Ye=o[E],tt=u?u(Ye):Ye;if(Ye=y||Ye!==0?Ye:0,fe&&tt===tt){for(var lt=Ae.length;lt--;)if(Ae[lt]===tt)continue e;u&&Ae.push(tt),ye.push(Ye)}else O(Ae,tt,y)||(Ae!==ye&&Ae.push(tt),ye.push(Ye))}return ye}function rh(o,u){return u=Ys(u,o),o=Pw(o,u),o==null||delete o[ro(Ks(u))]}function Vl(o,u,y,E){return Gl(o,u,y(zn(o,u)),E)}function Yl(o,u,y,E){for(var O=o.length,te=E?O:-1;(E?te--:++te<O)&&u(o[te],te,o););return y?Li(o,E?0:te,E?te+1:O):Li(o,E?te+1:0,E?O:te)}function cu(o,u){var y=o;return y instanceof Wt&&(y=y.value()),zs(u,function(E,O){return O.func.apply(O.thisArg,Wi([E],O.args))},y)}function Ns(o,u,y){var E=o.length;if(E<2)return E?ga(o[0]):[];for(var O=-1,te=Ie(E);++O<E;)for(var fe=o[O],ye=-1;++ye<E;)ye!=O&&(te[O]=Ht(te[O]||fe,o[ye],u,y));return ga(Kt(te,1),u,y)}function va(o,u,y){for(var E=-1,O=o.length,te=u.length,fe={};++E<O;){var ye=E<te?u[E]:n;y(fe,o[E],ye)}return fe}function Vs(o){return wr(o)?o:[]}function Kl(o){return typeof o=="function"?o:ns}function Ys(o,u){return Ft(o)?o:_1(o,u)?[o]:Dw(xn(o))}var Zp=$t;function to(o,u,y){var E=o.length;return y=y===n?E:y,!u&&y>=E?o:Li(o,u,y)}var Nd=hd||function(o){return dr.clearTimeout(o)};function kd(o,u){if(u)return o.slice();var y=o.length,E=Zc?Zc(y):new o.constructor(y);return o.copy(E),E}function p1(o){var u=new o.constructor(o.byteLength);return new da(u).set(new da(o)),u}function ak(o,u){var y=u?p1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.byteLength)}function ok(o){var u=new o.constructor(o.source,vs.exec(o));return u.lastIndex=o.lastIndex,u}function lk(o){return Xi?dn(Xi.call(o)):{}}function cw(o,u){var y=u?p1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.length)}function uw(o,u){if(o!==u){var y=o!==n,E=o===null,O=o===o,te=ks(o),fe=u!==n,ye=u===null,Ae=u===u,Ve=ks(u);if(!ye&&!Ve&&!te&&o>u||te&&fe&&Ae&&!ye&&!Ve||E&&fe&&Ae||!y&&Ae||!O)return 1;if(!E&&!te&&!Ve&&o<u||Ve&&y&&O&&!E&&!te||ye&&y&&O||!fe&&O||!Ae)return-1}return 0}function ck(o,u,y){for(var E=-1,O=o.criteria,te=u.criteria,fe=O.length,ye=y.length;++E<fe;){var Ae=uw(O[E],te[E]);if(Ae){if(E>=ye)return Ae;var Ve=y[E];return Ae*(Ve=="desc"?-1:1)}}return o.index-u.index}function dw(o,u,y,E){for(var O=-1,te=o.length,fe=y.length,ye=-1,Ae=u.length,Ve=yr(te-fe,0),Ye=Ie(Ae+Ve),tt=!E;++ye<Ae;)Ye[ye]=u[ye];for(;++O<fe;)(tt||O<te)&&(Ye[y[O]]=o[O]);for(;Ve--;)Ye[ye++]=o[O++];return Ye}function fw(o,u,y,E){for(var O=-1,te=o.length,fe=-1,ye=y.length,Ae=-1,Ve=u.length,Ye=yr(te-ye,0),tt=Ie(Ye+Ve),lt=!E;++O<Ye;)tt[O]=o[O];for(var bt=O;++Ae<Ve;)tt[bt+Ae]=u[Ae];for(;++fe<ye;)(lt||O<te)&&(tt[bt+y[fe]]=o[O++]);return tt}function Zi(o,u){var y=-1,E=o.length;for(u||(u=Ie(E));++y<E;)u[y]=o[y];return u}function no(o,u,y,E){var O=!y;y||(y={});for(var te=-1,fe=u.length;++te<fe;){var ye=u[te],Ae=E?E(y[ye],o[ye],ye,y,o):n;Ae===n&&(Ae=o[ye]),O?We(y,ye,Ae):Be(y,ye,Ae)}return y}function uk(o,u){return no(o,b1(o),u)}function dk(o,u){return no(o,kw(o),u)}function em(o,u){return function(y,E){var O=Ft(y)?dd:_e,te=u?u():{};return O(y,o,kt(E,2),te)}}function Ed(o){return $t(function(u,y){var E=-1,O=y.length,te=O>1?y[O-1]:n,fe=O>2?y[2]:n;for(te=o.length>3&&typeof te=="function"?(O--,te):n,fe&&Ti(y[0],y[1],fe)&&(te=O<3?n:te,O=1),u=dn(u);++E<O;){var ye=y[E];ye&&o(u,ye,E,te)}return u})}function hw(o,u){return function(y,E){if(y==null)return y;if(!es(y))return o(y,E);for(var O=y.length,te=u?O:-1,fe=dn(y);(u?te--:++te<O)&&E(fe[te],te,fe)!==!1;);return y}}function pw(o){return function(u,y,E){for(var O=-1,te=dn(u),fe=E(u),ye=fe.length;ye--;){var Ae=fe[o?ye:++O];if(y(te[Ae],Ae,te)===!1)break}return u}}function fk(o,u,y){var E=u&C,O=ih(o);function te(){var fe=this&&this!==dr&&this instanceof te?O:o;return fe.apply(E?y:this,arguments)}return te}function mw(o){return function(u){u=xn(u);var y=ws(u)?di(u):n,E=y?y[0]:u.charAt(0),O=y?to(y,1).join(""):u.slice(1);return E[o]()+O}}function jd(o){return function(u){return zs(hx(fx(u).replace(Bs,"")),o,"")}}function ih(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var y=$l(o.prototype),E=o.apply(y,u);return sr(E)?E:y}}function hk(o,u,y){var E=ih(o);function O(){for(var te=arguments.length,fe=Ie(te),ye=te,Ae=Cd(O);ye--;)fe[ye]=arguments[ye];var Ve=te<3&&fe[0]!==Ae&&fe[te-1]!==Ae?[]:qs(fe,Ae);if(te-=Ve.length,te<y)return xw(o,u,tm,O.placeholder,n,fe,Ve,n,n,y-te);var Ye=this&&this!==dr&&this instanceof O?E:o;return Ir(Ye,this,fe)}return O}function gw(o){return function(u,y,E){var O=dn(u);if(!es(u)){var te=kt(y,3);u=Hr(u),y=function(ye){return te(O[ye],ye,O)}}var fe=o(u,y,E);return fe>-1?O[te?u[fe]:fe]:n}}function vw(o){return $o(function(u){var y=u.length,E=y,O=Ci.prototype.thru;for(o&&u.reverse();E--;){var te=u[E];if(typeof te!="function")throw new Cr(a);if(O&&!fe&&sm(te)=="wrapper")var fe=new Ci([],!0)}for(E=fe?E:y;++E<y;){te=u[E];var ye=sm(te),Ae=ye=="wrapper"?w1(te):n;Ae&&S1(Ae[0])&&Ae[1]==(W|L|J|I)&&!Ae[4].length&&Ae[9]==1?fe=fe[sm(Ae[0])].apply(fe,Ae[3]):fe=te.length==1&&S1(te)?fe[ye]():fe.thru(te)}return function(){var Ve=arguments,Ye=Ve[0];if(fe&&Ve.length==1&&Ft(Ye))return fe.plant(Ye).value();for(var tt=0,lt=y?u[tt].apply(this,Ve):Ye;++tt<y;)lt=u[tt].call(this,lt);return lt}})}function tm(o,u,y,E,O,te,fe,ye,Ae,Ve){var Ye=u&W,tt=u&C,lt=u&_,bt=u&(L|R),Et=u&Z,qt=lt?n:ih(o);function jt(){for(var Jt=arguments.length,tn=Ie(Jt),Es=Jt;Es--;)tn[Es]=arguments[Es];if(bt)var Mi=Cd(jt),js=jl(tn,Mi);if(E&&(tn=dw(tn,E,O,bt)),te&&(tn=fw(tn,te,fe,bt)),Jt-=js,bt&&Jt<Ve){var xr=qs(tn,Mi);return xw(o,u,tm,jt.placeholder,y,tn,xr,ye,Ae,Ve-Jt)}var wa=tt?y:this,qo=lt?wa[o]:o;return Jt=tn.length,ye?tn=Mk(tn,ye):Et&&Jt>1&&tn.reverse(),Ye&&Ae<Jt&&(tn.length=Ae),this&&this!==dr&&this instanceof jt&&(qo=qt||ih(qo)),qo.apply(wa,tn)}return jt}function yw(o,u){return function(y,E){return Ja(y,o,u(E),{})}}function nm(o,u){return function(y,E){var O;if(y===n&&E===n)return u;if(y!==n&&(O=y),E!==n){if(O===n)return E;typeof y=="string"||typeof E=="string"?(y=Pi(y),E=Pi(E)):(y=nh(y),E=nh(E)),O=o(y,E)}return O}}function m1(o){return $o(function(u){return u=un(u,Tn(kt())),$t(function(y){var E=this;return o(u,function(O){return Ir(O,E,y)})})})}function rm(o,u){u=u===n?" ":Pi(u);var y=u.length;if(y<2)return y?Ro(u,o):u;var E=Ro(u,Ml(o/la(u)));return ws(u)?to(di(E),0,o).join(""):E.slice(0,o)}function pk(o,u,y,E){var O=u&C,te=ih(o);function fe(){for(var ye=-1,Ae=arguments.length,Ve=-1,Ye=E.length,tt=Ie(Ye+Ae),lt=this&&this!==dr&&this instanceof fe?te:o;++Ve<Ye;)tt[Ve]=E[Ve];for(;Ae--;)tt[Ve++]=arguments[++ye];return Ir(lt,O?y:this,tt)}return fe}function ww(o){return function(u,y,E){return E&&typeof E!="number"&&Ti(u,y,E)&&(y=E=n),u=zo(u),y===n?(y=u,u=0):y=zo(y),E=E===n?u<y?1:-1:zo(E),th(u,y,E,o)}}function im(o){return function(u,y){return typeof u=="string"&&typeof y=="string"||(u=Js(u),y=Js(y)),o(u,y)}}function xw(o,u,y,E,O,te,fe,ye,Ae,Ve){var Ye=u&L,tt=Ye?fe:n,lt=Ye?n:fe,bt=Ye?te:n,Et=Ye?n:te;u|=Ye?J:ee,u&=~(Ye?ee:J),u&N||(u&=~(C|_));var qt=[o,u,O,bt,tt,Et,lt,ye,Ae,Ve],jt=y.apply(n,qt);return S1(o)&&Tw(jt,qt),jt.placeholder=E,Mw(jt,o,u)}function g1(o){var u=Rn[o];return function(y,E){if(y=Js(y),E=E==null?0:zr(zt(E),292),E&&Rp(y)){var O=(xn(y)+"e").split("e"),te=u(O[0]+"e"+(+O[1]+E));return O=(xn(te)+"e").split("e"),+(O[0]+"e"+(+O[1]-E))}return u(y)}}var mk=Ol&&1/Wa(new Ol([,-0]))[1]==Q?function(o){return new Ol(o)}:F1;function bw(o){return function(u){var y=mi(u);return y==Me?Ao(u):y==be?fd(u):jr(u,o(u))}}function Fo(o,u,y,E,O,te,fe,ye){var Ae=u&_;if(!Ae&&typeof o!="function")throw new Cr(a);var Ve=E?E.length:0;if(Ve||(u&=~(J|ee),E=O=n),fe=fe===n?fe:yr(zt(fe),0),ye=ye===n?ye:zt(ye),Ve-=O?O.length:0,u&ee){var Ye=E,tt=O;E=O=n}var lt=Ae?n:w1(o),bt=[o,u,y,E,O,Ye,tt,te,fe,ye];if(lt&&Lk(bt,lt),o=bt[0],u=bt[1],y=bt[2],E=bt[3],O=bt[4],ye=bt[9]=bt[9]===n?Ae?0:o.length:yr(bt[9]-Ve,0),!ye&&u&(L|R)&&(u&=~(L|R)),!u||u==C)var Et=fk(o,u,y);else u==L||u==R?Et=hk(o,u,ye):(u==J||u==(C|J))&&!O.length?Et=pk(o,u,y,E):Et=tm.apply(n,bt);var qt=lt?Sd:Tw;return Mw(qt(Et,bt),o,u)}function _w(o,u,y,E){return o===n||ya(o,bs[y])&&!en.call(E,y)?u:o}function Sw(o,u,y,E,O,te){return sr(o)&&sr(u)&&(te.set(u,o),Wl(o,u,n,Sw,te),te.delete(u)),o}function gk(o){return oh(o)?n:o}function Nw(o,u,y,E,O,te){var fe=y&S,ye=o.length,Ae=u.length;if(ye!=Ae&&!(fe&&Ae>ye))return!1;var Ve=te.get(o),Ye=te.get(u);if(Ve&&Ye)return Ve==u&&Ye==o;var tt=-1,lt=!0,bt=y&k?new v:n;for(te.set(o,u),te.set(u,o);++tt<ye;){var Et=o[tt],qt=u[tt];if(E)var jt=fe?E(qt,Et,tt,u,o,te):E(Et,qt,tt,o,u,te);if(jt!==n){if(jt)continue;lt=!1;break}if(bt){if(!x(u,function(Jt,tn){if(!qa(bt,tn)&&(Et===Jt||O(Et,Jt,y,E,te)))return bt.push(tn)})){lt=!1;break}}else if(!(Et===qt||O(Et,qt,y,E,te))){lt=!1;break}}return te.delete(o),te.delete(u),lt}function vk(o,u,y,E,O,te,fe){switch(y){case St:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case at:return!(o.byteLength!=u.byteLength||!te(new da(o),new da(u)));case Ce:case ne:case de:return ya(+o,+u);case le:return o.name==u.name&&o.message==u.message;case qe:case $e:return o==u+"";case Me:var ye=Ao;case be:var Ae=E&S;if(ye||(ye=Wa),o.size!=u.size&&!Ae)return!1;var Ve=fe.get(o);if(Ve)return Ve==u;E|=k,fe.set(o,u);var Ye=Nw(ye(o),ye(u),E,O,te,fe);return fe.delete(o),Ye;case Ke:if(Xi)return Xi.call(o)==Xi.call(u)}return!1}function yk(o,u,y,E,O,te){var fe=y&S,ye=v1(o),Ae=ye.length,Ve=v1(u),Ye=Ve.length;if(Ae!=Ye&&!fe)return!1;for(var tt=Ae;tt--;){var lt=ye[tt];if(!(fe?lt in u:en.call(u,lt)))return!1}var bt=te.get(o),Et=te.get(u);if(bt&&Et)return bt==u&&Et==o;var qt=!0;te.set(o,u),te.set(u,o);for(var jt=fe;++tt<Ae;){lt=ye[tt];var Jt=o[lt],tn=u[lt];if(E)var Es=fe?E(tn,Jt,lt,u,o,te):E(Jt,tn,lt,o,u,te);if(!(Es===n?Jt===tn||O(Jt,tn,y,E,te):Es)){qt=!1;break}jt||(jt=lt=="constructor")}if(qt&&!jt){var Mi=o.constructor,js=u.constructor;Mi!=js&&"constructor"in o&&"constructor"in u&&!(typeof Mi=="function"&&Mi instanceof Mi&&typeof js=="function"&&js instanceof js)&&(qt=!1)}return te.delete(o),te.delete(u),qt}function $o(o){return k1(Lw(o,n,$w),o+"")}function v1(o){return Wr(o,Hr,b1)}function y1(o){return Wr(o,ts,kw)}var w1=pd?function(o){return pd.get(o)}:F1;function sm(o){for(var u=o.name+"",y=Fl[u],E=en.call(Fl,u)?y.length:0;E--;){var O=y[E],te=O.func;if(te==null||te==o)return O.name}return u}function Cd(o){var u=en.call(G,"placeholder")?G:o;return u.placeholder}function kt(){var o=G.iteratee||O1;return o=o===O1?Xf:o,arguments.length?o(arguments[0],arguments[1]):o}function am(o,u){var y=o.__data__;return Ek(u)?y[typeof u=="string"?"string":"hash"]:y.map}function x1(o){for(var u=Hr(o),y=u.length;y--;){var E=u[y],O=o[E];u[y]=[E,O,Cw(O)]}return u}function uu(o,u){var y=Or(o,u);return Oo(y)?y:n}function wk(o){var u=en.call(o,Va),y=o[Va];try{o[Va]=n;var E=!0}catch{}var O=gn.call(o);return E&&(u?o[Va]=y:delete o[Va]),O}var b1=Dl?function(o){return o==null?[]:(o=dn(o),ys(Dl(o),function(u){return pi.call(o,u)}))}:$1,kw=Dl?function(o){for(var u=[];o;)Wi(u,b1(o)),o=Tl(o);return u}:$1,mi=An;(nu&&mi(new nu(new ArrayBuffer(1)))!=St||fa&&mi(new fa)!=Me||Kf&&mi(Kf.resolve())!=Fe||Ol&&mi(new Ol)!=be||Rl&&mi(new Rl)!=nt)&&(mi=function(o){var u=An(o),y=u==ke?o.constructor:n,E=y?du(y):"";if(E)switch(E){case e1:return St;case Ya:return Me;case Ss:return Fe;case ha:return be;case t1:return nt}return u});function xk(o,u,y){for(var E=-1,O=y.length;++E<O;){var te=y[E],fe=te.size;switch(te.type){case"drop":o+=fe;break;case"dropRight":u-=fe;break;case"take":u=zr(u,o+fe);break;case"takeRight":o=yr(o,u-fe);break}}return{start:o,end:u}}function bk(o){var u=o.match(Yn);return u?u[1].split(Ui):[]}function Ew(o,u,y){u=Ys(u,o);for(var E=-1,O=u.length,te=!1;++E<O;){var fe=ro(u[E]);if(!(te=o!=null&&y(o,fe)))break;o=o[fe]}return te||++E!=O?te:(O=o==null?0:o.length,!!O&&hm(O)&&Bo(fe,O)&&(Ft(o)||fu(o)))}function _k(o){var u=o.length,y=new o.constructor(u);return u&&typeof o[0]=="string"&&en.call(o,"index")&&(y.index=o.index,y.input=o.input),y}function jw(o){return typeof o.constructor=="function"&&!sh(o)?$l(Tl(o)):{}}function Sk(o,u,y){var E=o.constructor;switch(u){case at:return p1(o);case Ce:case ne:return new E(+o);case St:return ak(o,y);case ft:case Nt:case et:case bn:case Bt:case Tr:case Qt:case pn:case oi:return cw(o,y);case Me:return new E;case de:case $e:return new E(o);case qe:return ok(o);case be:return new E;case Ke:return lk(o)}}function Nk(o,u){var y=u.length;if(!y)return o;var E=y-1;return u[E]=(y>1?"& ":"")+u[E],u=u.join(y>2?", ":" "),o.replace(jn,`{
/* [wrapped with `+u+`] */
`)}function kk(o){return Ft(o)||fu(o)||!!(tu&&o&&o[tu])}function Bo(o,u){var y=typeof o;return u=u??$,!!u&&(y=="number"||y!="symbol"&&cl.test(o))&&o>-1&&o%1==0&&o<u}function Ti(o,u,y){if(!sr(y))return!1;var E=typeof u;return(E=="number"?es(y)&&Bo(u,y.length):E=="string"&&u in y)?ya(y[u],o):!1}function _1(o,u){if(Ft(o))return!1;var y=typeof o;return y=="number"||y=="symbol"||y=="boolean"||o==null||ks(o)?!0:Mr.test(o)||!tr.test(o)||u!=null&&o in dn(u)}function Ek(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function S1(o){var u=sm(o),y=G[u];if(typeof y!="function"||!(u in Wt.prototype))return!1;if(o===y)return!0;var E=w1(y);return!!E&&o===E[0]}function jk(o){return!!Ei&&Ei in o}var Ck=Ws?Uo:B1;function sh(o){var u=o&&o.constructor,y=typeof u=="function"&&u.prototype||bs;return o===y}function Cw(o){return o===o&&!sr(o)}function Aw(o,u){return function(y){return y==null?!1:y[o]===u&&(u!==n||o in dn(y))}}function Ak(o){var u=dm(o,function(E){return y.size===f&&y.clear(),E}),y=u.cache;return u}function Lk(o,u){var y=o[1],E=u[1],O=y|E,te=O<(C|_|W),fe=E==W&&y==L||E==W&&y==I&&o[7].length<=u[8]||E==(W|I)&&u[7].length<=u[8]&&y==L;if(!(te||fe))return o;E&C&&(o[2]=u[2],O|=y&C?0:N);var ye=u[3];if(ye){var Ae=o[3];o[3]=Ae?dw(Ae,ye,u[4]):ye,o[4]=Ae?qs(o[3],p):u[4]}return ye=u[5],ye&&(Ae=o[5],o[5]=Ae?fw(Ae,ye,u[6]):ye,o[6]=Ae?qs(o[5],p):u[6]),ye=u[7],ye&&(o[7]=ye),E&W&&(o[8]=o[8]==null?u[8]:zr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=O,o}function Pk(o){var u=[];if(o!=null)for(var y in dn(o))u.push(y);return u}function Tk(o){return gn.call(o)}function Lw(o,u,y){return u=yr(u===n?o.length-1:u,0),function(){for(var E=arguments,O=-1,te=yr(E.length-u,0),fe=Ie(te);++O<te;)fe[O]=E[u+O];O=-1;for(var ye=Ie(u+1);++O<u;)ye[O]=E[O];return ye[u]=y(fe),Ir(o,this,ye)}}function Pw(o,u){return u.length<2?o:zn(o,Li(u,0,-1))}function Mk(o,u){for(var y=o.length,E=zr(u.length,y),O=Zi(o);E--;){var te=u[E];o[E]=Bo(te,y)?O[te]:n}return o}function N1(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Tw=Iw(Sd),ah=Op||function(o,u){return dr.setTimeout(o,u)},k1=Iw(Za);function Mw(o,u,y){var E=u+"";return k1(o,Nk(E,Ik(bk(E),y)))}function Iw(o){var u=0,y=0;return function(){var E=Qg(),O=V-(E-y);if(y=E,O>0){if(++u>=F)return arguments[0]}else u=0;return o.apply(n,arguments)}}function om(o,u){var y=-1,E=o.length,O=E-1;for(u=u===n?E:u;++y<u;){var te=Hl(y,O),fe=o[te];o[te]=o[y],o[y]=fe}return o.length=u,o}var Dw=Ak(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(ht,function(y,E,O,te){u.push(O?te.replace(ms,"$1"):E||y)}),u});function ro(o){if(typeof o=="string"||ks(o))return o;var u=o+"";return u=="0"&&1/o==-Q?"-0":u}function du(o){if(o!=null){try{return _s.call(o)}catch{}try{return o+""}catch{}}return""}function Ik(o,u){return Dr(se,function(y){var E="_."+y[0];u&y[1]&&!Nl(o,E)&&o.push(E)}),o.sort()}function Ow(o){if(o instanceof Wt)return o.clone();var u=new Ci(o.__wrapped__,o.__chain__);return u.__actions__=Zi(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function Dk(o,u,y){(y?Ti(o,u,y):u===n)?u=1:u=yr(zt(u),0);var E=o==null?0:o.length;if(!E||u<1)return[];for(var O=0,te=0,fe=Ie(Ml(E/u));O<E;)fe[te++]=Li(o,O,O+=u);return fe}function Ok(o){for(var u=-1,y=o==null?0:o.length,E=0,O=[];++u<y;){var te=o[u];te&&(O[E++]=te)}return O}function Rk(){var o=arguments.length;if(!o)return[];for(var u=Ie(o-1),y=arguments[0],E=o;E--;)u[E-1]=arguments[E];return Wi(Ft(y)?Zi(y):[y],Kt(u,1))}var Fk=$t(function(o,u){return wr(o)?Ht(o,Kt(u,1,wr,!0)):[]}),$k=$t(function(o,u){var y=Ks(u);return wr(y)&&(y=n),wr(o)?Ht(o,Kt(u,1,wr,!0),kt(y,2)):[]}),Bk=$t(function(o,u){var y=Ks(u);return wr(y)&&(y=n),wr(o)?Ht(o,Kt(u,1,wr,!0),n,y):[]});function Uk(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:zt(u),Li(o,u<0?0:u,E)):[]}function zk(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:zt(u),u=E-u,Li(o,0,u<0?0:u)):[]}function qk(o,u){return o&&o.length?Yl(o,kt(u,3),!0,!0):[]}function Wk(o,u){return o&&o.length?Yl(o,kt(u,3),!0):[]}function Hk(o,u,y,E){var O=o==null?0:o.length;return O?(y&&typeof y!="number"&&Ti(o,u,y)&&(y=0,E=O),fr(o,u,y,E)):[]}function Rw(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var O=y==null?0:zt(y);return O<0&&(O=yr(E+O,0)),Ue(o,kt(u,3),O)}function Fw(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var O=E-1;return y!==n&&(O=zt(y),O=y<0?yr(E+O,0):zr(O,E-1)),Ue(o,kt(u,3),O,!0)}function $w(o){var u=o==null?0:o.length;return u?Kt(o,1):[]}function Gk(o){var u=o==null?0:o.length;return u?Kt(o,Q):[]}function Vk(o,u){var y=o==null?0:o.length;return y?(u=u===n?1:zt(u),Kt(o,u)):[]}function Yk(o){for(var u=-1,y=o==null?0:o.length,E={};++u<y;){var O=o[u];E[O[0]]=O[1]}return E}function Bw(o){return o&&o.length?o[0]:n}function Kk(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var O=y==null?0:zt(y);return O<0&&(O=yr(E+O,0)),Qe(o,u,O)}function Jk(o){var u=o==null?0:o.length;return u?Li(o,0,-1):[]}var Xk=$t(function(o){var u=un(o,Vs);return u.length&&u[0]===o[0]?Ka(u):[]}),Qk=$t(function(o){var u=Ks(o),y=un(o,Vs);return u===Ks(y)?u=n:y.pop(),y.length&&y[0]===o[0]?Ka(y,kt(u,2)):[]}),Zk=$t(function(o){var u=Ks(o),y=un(o,Vs);return u=typeof u=="function"?u:n,u&&y.pop(),y.length&&y[0]===o[0]?Ka(y,n,u):[]});function eE(o,u){return o==null?"":Xg.call(o,u)}function Ks(o){var u=o==null?0:o.length;return u?o[u-1]:n}function tE(o,u,y){var E=o==null?0:o.length;if(!E)return-1;var O=E;return y!==n&&(O=zt(y),O=O<0?yr(E+O,0):zr(O,E-1)),u===u?Pl(o,u,O):Ue(o,_t,O,!0)}function nE(o,u){return o&&o.length?Kp(o,zt(u)):n}var rE=$t(Uw);function Uw(o,u){return o&&o.length&&u&&u.length?bd(o,u):o}function iE(o,u,y){return o&&o.length&&u&&u.length?bd(o,u,kt(y,2)):o}function sE(o,u,y){return o&&o.length&&u&&u.length?bd(o,u,n,y):o}var aE=$o(function(o,u){var y=o==null?0:o.length,E=ct(o,u);return eh(o,un(u,function(O){return Bo(O,y)?+O:O}).sort(uw)),E});function oE(o,u){var y=[];if(!(o&&o.length))return y;var E=-1,O=[],te=o.length;for(u=kt(u,3);++E<te;){var fe=o[E];u(fe,E,o)&&(y.push(fe),O.push(E))}return eh(o,O),y}function E1(o){return o==null?o:Yf.call(o)}function lE(o,u,y){var E=o==null?0:o.length;return E?(y&&typeof y!="number"&&Ti(o,u,y)?(u=0,y=E):(u=u==null?0:zt(u),y=y===n?E:zt(y)),Li(o,u,y)):[]}function cE(o,u){return lu(o,u)}function uE(o,u,y){return eo(o,u,kt(y,2))}function dE(o,u){var y=o==null?0:o.length;if(y){var E=lu(o,u);if(E<y&&ya(o[E],u))return E}return-1}function fE(o,u){return lu(o,u,!0)}function hE(o,u,y){return eo(o,u,kt(y,2),!0)}function pE(o,u){var y=o==null?0:o.length;if(y){var E=lu(o,u,!0)-1;if(ya(o[E],u))return E}return-1}function mE(o){return o&&o.length?Qp(o):[]}function gE(o,u){return o&&o.length?Qp(o,kt(u,2)):[]}function vE(o){var u=o==null?0:o.length;return u?Li(o,1,u):[]}function yE(o,u,y){return o&&o.length?(u=y||u===n?1:zt(u),Li(o,0,u<0?0:u)):[]}function wE(o,u,y){var E=o==null?0:o.length;return E?(u=y||u===n?1:zt(u),u=E-u,Li(o,u<0?0:u,E)):[]}function xE(o,u){return o&&o.length?Yl(o,kt(u,3),!1,!0):[]}function bE(o,u){return o&&o.length?Yl(o,kt(u,3)):[]}var _E=$t(function(o){return ga(Kt(o,1,wr,!0))}),SE=$t(function(o){var u=Ks(o);return wr(u)&&(u=n),ga(Kt(o,1,wr,!0),kt(u,2))}),NE=$t(function(o){var u=Ks(o);return u=typeof u=="function"?u:n,ga(Kt(o,1,wr,!0),n,u)});function kE(o){return o&&o.length?ga(o):[]}function EE(o,u){return o&&o.length?ga(o,kt(u,2)):[]}function jE(o,u){return u=typeof u=="function"?u:n,o&&o.length?ga(o,n,u):[]}function j1(o){if(!(o&&o.length))return[];var u=0;return o=ys(o,function(y){if(wr(y))return u=yr(y.length,u),!0}),Er(u,function(y){return un(o,Pt(y))})}function zw(o,u){if(!(o&&o.length))return[];var y=j1(o);return u==null?y:un(y,function(E){return Ir(u,n,E)})}var CE=$t(function(o,u){return wr(o)?Ht(o,u):[]}),AE=$t(function(o){return Ns(ys(o,wr))}),LE=$t(function(o){var u=Ks(o);return wr(u)&&(u=n),Ns(ys(o,wr),kt(u,2))}),PE=$t(function(o){var u=Ks(o);return u=typeof u=="function"?u:n,Ns(ys(o,wr),n,u)}),TE=$t(j1);function ME(o,u){return va(o||[],u||[],Be)}function IE(o,u){return va(o||[],u||[],Gl)}var DE=$t(function(o){var u=o.length,y=u>1?o[u-1]:n;return y=typeof y=="function"?(o.pop(),y):n,zw(o,y)});function qw(o){var u=G(o);return u.__chain__=!0,u}function OE(o,u){return u(o),o}function lm(o,u){return u(o)}var RE=$o(function(o){var u=o.length,y=u?o[0]:0,E=this.__wrapped__,O=function(te){return ct(te,o)};return u>1||this.__actions__.length||!(E instanceof Wt)||!Bo(y)?this.thru(O):(E=E.slice(y,+y+(u?1:0)),E.__actions__.push({func:lm,args:[O],thisArg:n}),new Ci(E,this.__chain__).thru(function(te){return u&&!te.length&&te.push(n),te}))});function FE(){return qw(this)}function $E(){return new Ci(this.value(),this.__chain__)}function BE(){this.__values__===n&&(this.__values__=rx(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function UE(){return this}function zE(o){for(var u,y=this;y instanceof su;){var E=Ow(y);E.__index__=0,E.__values__=n,u?O.__wrapped__=E:u=E;var O=E;y=y.__wrapped__}return O.__wrapped__=o,u}function qE(){var o=this.__wrapped__;if(o instanceof Wt){var u=o;return this.__actions__.length&&(u=new Wt(this)),u=u.reverse(),u.__actions__.push({func:lm,args:[E1],thisArg:n}),new Ci(u,this.__chain__)}return this.thru(E1)}function WE(){return cu(this.__wrapped__,this.__actions__)}var HE=em(function(o,u,y){en.call(o,y)?++o[y]:We(o,y,1)});function GE(o,u,y){var E=Ft(o)?Sl:wn;return y&&Ti(o,u,y)&&(u=n),E(o,kt(u,3))}function VE(o,u){var y=Ft(o)?ys:ti;return y(o,kt(u,3))}var YE=gw(Rw),KE=gw(Fw);function JE(o,u){return Kt(cm(o,u),1)}function XE(o,u){return Kt(cm(o,u),Q)}function QE(o,u,y){return y=y===n?1:zt(y),Kt(cm(o,u),y)}function Ww(o,u){var y=Ft(o)?Dr:Dt;return y(o,kt(u,3))}function Hw(o,u){var y=Ft(o)?Kc:yn;return y(o,kt(u,3))}var ZE=em(function(o,u,y){en.call(o,y)?o[y].push(u):We(o,y,[u])});function ej(o,u,y,E){o=es(o)?o:Ld(o),y=y&&!E?zt(y):0;var O=o.length;return y<0&&(y=yr(O+y,0)),pm(o)?y<=O&&o.indexOf(u,y)>-1:!!O&&Qe(o,u,y)>-1}var tj=$t(function(o,u,y){var E=-1,O=typeof u=="function",te=es(o)?Ie(o.length):[];return Dt(o,function(fe){te[++E]=O?Ir(u,fe,y):Ln(fe,u,y)}),te}),nj=em(function(o,u,y){We(o,y,u)});function cm(o,u){var y=Ft(o)?un:ql;return y(o,kt(u,3))}function rj(o,u,y,E){return o==null?[]:(Ft(u)||(u=u==null?[]:[u]),y=E?n:y,Ft(y)||(y=y==null?[]:[y]),Jp(o,u,y))}var ij=em(function(o,u,y){o[y?0:1].push(u)},function(){return[[],[]]});function sj(o,u,y){var E=Ft(o)?zs:On,O=arguments.length<3;return E(o,kt(u,4),y,O,Dt)}function aj(o,u,y){var E=Ft(o)?Jc:On,O=arguments.length<3;return E(o,kt(u,4),y,O,yn)}function oj(o,u){var y=Ft(o)?ys:ti;return y(o,fm(kt(u,3)))}function lj(o){var u=Ft(o)?De:f1;return u(o)}function cj(o,u,y){(y?Ti(o,u,y):u===n)?u=1:u=zt(u);var E=Ft(o)?Oe:_d;return E(o,u)}function uj(o){var u=Ft(o)?Ee:Xp;return u(o)}function dj(o){if(o==null)return 0;if(es(o))return pm(o)?la(o):o.length;var u=mi(o);return u==Me||u==be?o.size:Ul(o).length}function fj(o,u,y){var E=Ft(o)?x:h1;return y&&Ti(o,u,y)&&(u=n),E(o,kt(u,3))}var hj=$t(function(o,u){if(o==null)return[];var y=u.length;return y>1&&Ti(o,u[0],u[1])?u=[]:y>2&&Ti(u[0],u[1],u[2])&&(u=[u[0]]),Jp(o,Kt(u,1),[])}),um=Gf||function(){return dr.Date.now()};function pj(o,u){if(typeof u!="function")throw new Cr(a);return o=zt(o),function(){if(--o<1)return u.apply(this,arguments)}}function Gw(o,u,y){return u=y?n:u,u=o&&u==null?o.length:u,Fo(o,W,n,n,n,n,u)}function Vw(o,u){var y;if(typeof u!="function")throw new Cr(a);return o=zt(o),function(){return--o>0&&(y=u.apply(this,arguments)),o<=1&&(u=n),y}}var C1=$t(function(o,u,y){var E=C;if(y.length){var O=qs(y,Cd(C1));E|=J}return Fo(o,E,u,y,O)}),Yw=$t(function(o,u,y){var E=C|_;if(y.length){var O=qs(y,Cd(Yw));E|=J}return Fo(u,E,o,y,O)});function Kw(o,u,y){u=y?n:u;var E=Fo(o,L,n,n,n,n,n,u);return E.placeholder=Kw.placeholder,E}function Jw(o,u,y){u=y?n:u;var E=Fo(o,R,n,n,n,n,n,u);return E.placeholder=Jw.placeholder,E}function Xw(o,u,y){var E,O,te,fe,ye,Ae,Ve=0,Ye=!1,tt=!1,lt=!0;if(typeof o!="function")throw new Cr(a);u=Js(u)||0,sr(y)&&(Ye=!!y.leading,tt="maxWait"in y,te=tt?yr(Js(y.maxWait)||0,u):te,lt="trailing"in y?!!y.trailing:lt);function bt(xr){var wa=E,qo=O;return E=O=n,Ve=xr,fe=o.apply(qo,wa),fe}function Et(xr){return Ve=xr,ye=ah(Jt,u),Ye?bt(xr):fe}function qt(xr){var wa=xr-Ae,qo=xr-Ve,gx=u-wa;return tt?zr(gx,te-qo):gx}function jt(xr){var wa=xr-Ae,qo=xr-Ve;return Ae===n||wa>=u||wa<0||tt&&qo>=te}function Jt(){var xr=um();if(jt(xr))return tn(xr);ye=ah(Jt,qt(xr))}function tn(xr){return ye=n,lt&&E?bt(xr):(E=O=n,fe)}function Es(){ye!==n&&Nd(ye),Ve=0,E=Ae=O=ye=n}function Mi(){return ye===n?fe:tn(um())}function js(){var xr=um(),wa=jt(xr);if(E=arguments,O=this,Ae=xr,wa){if(ye===n)return Et(Ae);if(tt)return Nd(ye),ye=ah(Jt,u),bt(Ae)}return ye===n&&(ye=ah(Jt,u)),fe}return js.cancel=Es,js.flush=Mi,js}var mj=$t(function(o,u){return fn(o,1,u)}),gj=$t(function(o,u,y){return fn(o,Js(u)||0,y)});function vj(o){return Fo(o,Z)}function dm(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Cr(a);var y=function(){var E=arguments,O=u?u.apply(this,E):E[0],te=y.cache;if(te.has(O))return te.get(O);var fe=o.apply(this,E);return y.cache=te.set(O,fe)||te,fe};return y.cache=new(dm.Cache||Gs),y}dm.Cache=Gs;function fm(o){if(typeof o!="function")throw new Cr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function yj(o){return Vw(2,o)}var wj=Zp(function(o,u){u=u.length==1&&Ft(u[0])?un(u[0],Tn(kt())):un(Kt(u,1),Tn(kt()));var y=u.length;return $t(function(E){for(var O=-1,te=zr(E.length,y);++O<te;)E[O]=u[O].call(this,E[O]);return Ir(o,this,E)})}),A1=$t(function(o,u){var y=qs(u,Cd(A1));return Fo(o,J,n,u,y)}),Qw=$t(function(o,u){var y=qs(u,Cd(Qw));return Fo(o,ee,n,u,y)}),xj=$o(function(o,u){return Fo(o,I,n,n,n,u)});function bj(o,u){if(typeof o!="function")throw new Cr(a);return u=u===n?u:zt(u),$t(o,u)}function _j(o,u){if(typeof o!="function")throw new Cr(a);return u=u==null?0:yr(zt(u),0),$t(function(y){var E=y[u],O=to(y,0,u);return E&&Wi(O,E),Ir(o,this,O)})}function Sj(o,u,y){var E=!0,O=!0;if(typeof o!="function")throw new Cr(a);return sr(y)&&(E="leading"in y?!!y.leading:E,O="trailing"in y?!!y.trailing:O),Xw(o,u,{leading:E,maxWait:u,trailing:O})}function Nj(o){return Gw(o,1)}function kj(o,u){return A1(Kl(u),o)}function Ej(){if(!arguments.length)return[];var o=arguments[0];return Ft(o)?o:[o]}function jj(o){return gt(o,m)}function Cj(o,u){return u=typeof u=="function"?u:n,gt(o,m,u)}function Aj(o){return gt(o,g|m)}function Lj(o,u){return u=typeof u=="function"?u:n,gt(o,g|m,u)}function Pj(o,u){return u==null||an(o,u,Hr(u))}function ya(o,u){return o===u||o!==o&&u!==u}var Tj=im(Qi),Mj=im(function(o,u){return o>=u}),fu=vd(function(){return arguments}())?vd:function(o){return hr(o)&&en.call(o,"callee")&&!pi.call(o,"callee")},Ft=Ie.isArray,Ij=bl?Tn(bl):Wp;function es(o){return o!=null&&hm(o.length)&&!Uo(o)}function wr(o){return hr(o)&&es(o)}function Dj(o){return o===!0||o===!1||hr(o)&&An(o)==Ce}var Jl=Vf||B1,Oj=Ua?Tn(Ua):Hp;function Rj(o){return hr(o)&&o.nodeType===1&&!oh(o)}function Fj(o){if(o==null)return!0;if(es(o)&&(Ft(o)||typeof o=="string"||typeof o.splice=="function"||Jl(o)||Ad(o)||fu(o)))return!o.length;var u=mi(o);if(u==Me||u==be)return!o.size;if(sh(o))return!Ul(o).length;for(var y in o)if(en.call(o,y))return!1;return!0}function $j(o,u){return Xa(o,u)}function Bj(o,u,y){y=typeof y=="function"?y:n;var E=y?y(o,u):n;return E===n?Xa(o,u,n,y):!!E}function L1(o){if(!hr(o))return!1;var u=An(o);return u==le||u==ce||typeof o.message=="string"&&typeof o.name=="string"&&!oh(o)}function Uj(o){return typeof o=="number"&&Rp(o)}function Uo(o){if(!sr(o))return!1;var u=An(o);return u==me||u==Ne||u==je||u==Re}function Zw(o){return typeof o=="number"&&o==zt(o)}function hm(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=$}function sr(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function hr(o){return o!=null&&typeof o=="object"}var ex=cd?Tn(cd):yd;function zj(o,u){return o===u||Ai(o,u,x1(u))}function qj(o,u,y){return y=typeof y=="function"?y:n,Ai(o,u,x1(u),y)}function Wj(o){return tx(o)&&o!=+o}function Hj(o){if(Ck(o))throw new xt(s);return Oo(o)}function Gj(o){return o===null}function Vj(o){return o==null}function tx(o){return typeof o=="number"||hr(o)&&An(o)==de}function oh(o){if(!hr(o)||An(o)!=ke)return!1;var u=Tl(o);if(u===null)return!0;var y=en.call(u,"constructor")&&u.constructor;return typeof y=="function"&&y instanceof y&&_s.call(y)==Cn}var P1=Co?Tn(Co):Bl;function Yj(o){return Zw(o)&&o>=-$&&o<=$}var nx=ud?Tn(ud):Gp;function pm(o){return typeof o=="string"||!Ft(o)&&hr(o)&&An(o)==$e}function ks(o){return typeof o=="symbol"||hr(o)&&An(o)==Ke}var Ad=_l?Tn(_l):wd;function Kj(o){return o===n}function Jj(o){return hr(o)&&mi(o)==nt}function Xj(o){return hr(o)&&An(o)==rt}var Qj=im(zl),Zj=im(function(o,u){return o<=u});function rx(o){if(!o)return[];if(es(o))return pm(o)?di(o):Zi(o);if(Ga&&o[Ga])return Ll(o[Ga]());var u=mi(o),y=u==Me?Ao:u==be?Wa:Ld;return y(o)}function zo(o){if(!o)return o===0?o:0;if(o=Js(o),o===Q||o===-Q){var u=o<0?-1:1;return u*q}return o===o?o:0}function zt(o){var u=zo(o),y=u%1;return u===u?y?u-y:u:0}function ix(o){return o?st(zt(o),0,Le):0}function Js(o){if(typeof o=="number")return o;if(ks(o))return oe;if(sr(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=sr(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Hi(o);var y=Rs.test(o);return y||ll.test(o)?ad(o.slice(2),y?2:8):zi.test(o)?oe:+o}function sx(o){return no(o,ts(o))}function eC(o){return o?st(zt(o),-$,$):o===0?o:0}function xn(o){return o==null?"":Pi(o)}var tC=Ed(function(o,u){if(sh(u)||es(u)){no(u,Hr(u),o);return}for(var y in u)en.call(u,y)&&Be(o,y,u[y])}),ax=Ed(function(o,u){no(u,ts(u),o)}),mm=Ed(function(o,u,y,E){no(u,ts(u),o,E)}),nC=Ed(function(o,u,y,E){no(u,Hr(u),o,E)}),rC=$o(ct);function iC(o,u){var y=$l(o);return u==null?y:He(y,u)}var sC=$t(function(o,u){o=dn(o);var y=-1,E=u.length,O=E>2?u[2]:n;for(O&&Ti(u[0],u[1],O)&&(E=1);++y<E;)for(var te=u[y],fe=ts(te),ye=-1,Ae=fe.length;++ye<Ae;){var Ve=fe[ye],Ye=o[Ve];(Ye===n||ya(Ye,bs[Ve])&&!en.call(o,Ve))&&(o[Ve]=te[Ve])}return o}),aC=$t(function(o){return o.push(n,Sw),Ir(ox,n,o)});function oC(o,u){return Pe(o,kt(u,3),Zn)}function lC(o,u){return Pe(o,kt(u,3),ni)}function cC(o,u){return o==null?o:qr(o,kt(u,3),ts)}function uC(o,u){return o==null?o:hn(o,kt(u,3),ts)}function dC(o,u){return o&&Zn(o,kt(u,3))}function fC(o,u){return o&&ni(o,kt(u,3))}function hC(o){return o==null?[]:ir(o,Hr(o))}function pC(o){return o==null?[]:ir(o,ts(o))}function T1(o,u,y){var E=o==null?n:zn(o,u);return E===n?y:E}function mC(o,u){return o!=null&&Ew(o,u,Ar)}function M1(o,u){return o!=null&&Ew(o,u,ma)}var gC=yw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=gn.call(u)),o[u]=y},D1(ns)),vC=yw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=gn.call(u)),en.call(o,u)?o[u].push(y):o[u]=[y]},kt),yC=$t(Ln);function Hr(o){return es(o)?xe(o):Ul(o)}function ts(o){return es(o)?xe(o,!0):Qf(o)}function wC(o,u){var y={};return u=kt(u,3),Zn(o,function(E,O,te){We(y,u(E,O,te),E)}),y}function xC(o,u){var y={};return u=kt(u,3),Zn(o,function(E,O,te){We(y,O,u(E,O,te))}),y}var bC=Ed(function(o,u,y){Wl(o,u,y)}),ox=Ed(function(o,u,y,E){Wl(o,u,y,E)}),_C=$o(function(o,u){var y={};if(o==null)return y;var E=!1;u=un(u,function(te){return te=Ys(te,o),E||(E=te.length>1),te}),no(o,y1(o),y),E&&(y=gt(y,g|w|m,gk));for(var O=u.length;O--;)rh(y,u[O]);return y});function SC(o,u){return lx(o,fm(kt(u)))}var NC=$o(function(o,u){return o==null?{}:d1(o,u)});function lx(o,u){if(o==null)return{};var y=un(y1(o),function(E){return[E]});return u=kt(u),Zf(o,y,function(E,O){return u(E,O[0])})}function kC(o,u,y){u=Ys(u,o);var E=-1,O=u.length;for(O||(O=1,o=n);++E<O;){var te=o==null?n:o[ro(u[E])];te===n&&(E=O,te=y),o=Uo(te)?te.call(o):te}return o}function EC(o,u,y){return o==null?o:Gl(o,u,y)}function jC(o,u,y,E){return E=typeof E=="function"?E:n,o==null?o:Gl(o,u,y,E)}var cx=bw(Hr),ux=bw(ts);function CC(o,u,y){var E=Ft(o),O=E||Jl(o)||Ad(o);if(u=kt(u,4),y==null){var te=o&&o.constructor;O?y=E?new te:[]:sr(o)?y=Uo(te)?$l(Tl(o)):{}:y={}}return(O?Dr:Zn)(o,function(fe,ye,Ae){return u(y,fe,ye,Ae)}),y}function AC(o,u){return o==null?!0:rh(o,u)}function LC(o,u,y){return o==null?o:Vl(o,u,Kl(y))}function PC(o,u,y,E){return E=typeof E=="function"?E:n,o==null?o:Vl(o,u,Kl(y),E)}function Ld(o){return o==null?[]:Gi(o,Hr(o))}function TC(o){return o==null?[]:Gi(o,ts(o))}function MC(o,u,y){return y===n&&(y=u,u=n),y!==n&&(y=Js(y),y=y===y?y:0),u!==n&&(u=Js(u),u=u===u?u:0),st(Js(o),u,y)}function IC(o,u,y){return u=zo(u),y===n?(y=u,u=0):y=zo(y),o=Js(o),Do(o,u,y)}function DC(o,u,y){if(y&&typeof y!="boolean"&&Ti(o,u,y)&&(u=y=n),y===n&&(typeof u=="boolean"?(y=u,u=n):typeof o=="boolean"&&(y=o,o=n)),o===n&&u===n?(o=0,u=1):(o=zo(o),u===n?(u=o,o=0):u=zo(u)),o>u){var E=o;o=u,u=E}if(y||o%1||u%1){var O=$p();return zr(o+O*(u-o+xl("1e-"+((O+"").length-1))),u)}return Hl(o,u)}var OC=jd(function(o,u,y){return u=u.toLowerCase(),o+(y?dx(u):u)});function dx(o){return I1(xn(o).toLowerCase())}function fx(o){return o=xn(o),o&&o.replace(ul,Xc).replace(sd,"")}function RC(o,u,y){o=xn(o),u=Pi(u);var E=o.length;y=y===n?E:st(zt(y),0,E);var O=y;return y-=u.length,y>=0&&o.slice(y,O)==u}function FC(o){return o=xn(o),o&&wt.test(o)?o.replace(_n,Qc):o}function $C(o){return o=xn(o),o&&nr.test(o)?o.replace(Vn,"\\$&"):o}var BC=jd(function(o,u,y){return o+(y?"-":"")+u.toLowerCase()}),UC=jd(function(o,u,y){return o+(y?" ":"")+u.toLowerCase()}),zC=mw("toLowerCase");function qC(o,u,y){o=xn(o),u=zt(u);var E=u?la(o):0;if(!u||E>=u)return o;var O=(u-E)/2;return rm(Il(O),y)+o+rm(Ml(O),y)}function WC(o,u,y){o=xn(o),u=zt(u);var E=u?la(o):0;return u&&E<u?o+rm(u-E,y):o}function HC(o,u,y){o=xn(o),u=zt(u);var E=u?la(o):0;return u&&E<u?rm(u-E,y)+o:o}function GC(o,u,y){return y||u==null?u=0:u&&(u=+u),Zg(xn(o).replace(En,""),u||0)}function VC(o,u,y){return(y?Ti(o,u,y):u===n)?u=1:u=zt(u),Ro(xn(o),u)}function YC(){var o=arguments,u=xn(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var KC=jd(function(o,u,y){return o+(y?"_":"")+u.toLowerCase()});function JC(o,u,y){return y&&typeof y!="number"&&Ti(o,u,y)&&(u=y=n),y=y===n?Le:y>>>0,y?(o=xn(o),o&&(typeof u=="string"||u!=null&&!P1(u))&&(u=Pi(u),!u&&ws(o))?to(di(o),0,y):o.split(u,y)):[]}var XC=jd(function(o,u,y){return o+(y?" ":"")+I1(u)});function QC(o,u,y){return o=xn(o),y=y==null?0:st(zt(y),0,o.length),u=Pi(u),o.slice(y,y+u.length)==u}function ZC(o,u,y){var E=G.templateSettings;y&&Ti(o,u,y)&&(u=n),o=xn(o),u=mm({},u,E,_w);var O=mm({},u.imports,E.imports,_w),te=Hr(O),fe=Gi(O,te),ye,Ae,Ve=0,Ye=u.interpolate||oa,tt="__p += '",lt=Po((u.escape||oa).source+"|"+Ye.source+"|"+(Ye===rn?gs:oa).source+"|"+(u.evaluate||oa).source+"|$","g"),bt="//# sourceURL="+(en.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wf+"]")+`
`;o.replace(lt,function(jt,Jt,tn,Es,Mi,js){return tn||(tn=Es),tt+=o.slice(Ve,js).replace(Yu,Cl),Jt&&(ye=!0,tt+=`' +
__e(`+Jt+`) +
'`),Mi&&(Ae=!0,tt+=`';
`+Mi+`;
__p += '`),tn&&(tt+=`' +
((__t = (`+tn+`)) == null ? '' : __t) +
'`),Ve=js+jt.length,jt}),tt+=`';
`;var Et=en.call(u,"variable")&&u.variable;if(!Et)tt=`with (obj) {
`+tt+`
}
`;else if(ps.test(Et))throw new xt(l);tt=(Ae?tt.replace(Zt,""):tt).replace(aa,"$1").replace(Dn,"$1;"),tt="function("+(Et||"obj")+`) {
`+(Et?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+tt+`return __p
}`;var qt=px(function(){return Ot(te,bt+"return "+tt).apply(n,fe)});if(qt.source=tt,L1(qt))throw qt;return qt}function eA(o){return xn(o).toLowerCase()}function tA(o){return xn(o).toUpperCase()}function nA(o,u,y){if(o=xn(o),o&&(y||u===n))return Hi(o);if(!o||!(u=Pi(u)))return o;var E=di(o),O=di(u),te=kl(E,O),fe=El(E,O)+1;return to(E,te,fe).join("")}function rA(o,u,y){if(o=xn(o),o&&(y||u===n))return o.slice(0,ca(o)+1);if(!o||!(u=Pi(u)))return o;var E=di(o),O=El(E,di(u))+1;return to(E,0,O).join("")}function iA(o,u,y){if(o=xn(o),o&&(y||u===n))return o.replace(En,"");if(!o||!(u=Pi(u)))return o;var E=di(o),O=kl(E,di(u));return to(E,O).join("")}function sA(o,u){var y=re,E=P;if(sr(u)){var O="separator"in u?u.separator:O;y="length"in u?zt(u.length):y,E="omission"in u?Pi(u.omission):E}o=xn(o);var te=o.length;if(ws(o)){var fe=di(o);te=fe.length}if(y>=te)return o;var ye=y-la(E);if(ye<1)return E;var Ae=fe?to(fe,0,ye).join(""):o.slice(0,ye);if(O===n)return Ae+E;if(fe&&(ye+=Ae.length-ye),P1(O)){if(o.slice(ye).search(O)){var Ve,Ye=Ae;for(O.global||(O=Po(O.source,xn(vs.exec(O))+"g")),O.lastIndex=0;Ve=O.exec(Ye);)var tt=Ve.index;Ae=Ae.slice(0,tt===n?ye:tt)}}else if(o.indexOf(Pi(O),ye)!=ye){var lt=Ae.lastIndexOf(O);lt>-1&&(Ae=Ae.slice(0,lt))}return Ae+E}function aA(o){return o=xn(o),o&&Vt.test(o)?o.replace(li,Lo):o}var oA=jd(function(o,u,y){return o+(y?" ":"")+u.toUpperCase()}),I1=mw("toUpperCase");function hx(o,u,y){return o=xn(o),u=y?n:u,u===n?Al(o)?Ha(o):ve(o):o.match(u)||[]}var px=$t(function(o,u){try{return Ir(o,n,u)}catch(y){return L1(y)?y:new xt(y)}}),lA=$o(function(o,u){return Dr(u,function(y){y=ro(y),We(o,y,C1(o[y],o))}),o});function cA(o){var u=o==null?0:o.length,y=kt();return o=u?un(o,function(E){if(typeof E[1]!="function")throw new Cr(a);return[y(E[0]),E[1]]}):[],$t(function(E){for(var O=-1;++O<u;){var te=o[O];if(Ir(te[0],this,E))return Ir(te[1],this,E)}})}function uA(o){return ot(gt(o,g))}function D1(o){return function(){return o}}function dA(o,u){return o==null||o!==o?u:o}var fA=vw(),hA=vw(!0);function ns(o){return o}function O1(o){return Xf(typeof o=="function"?o:gt(o,g))}function pA(o){return Vp(gt(o,g))}function mA(o,u){return Yp(o,gt(u,g))}var gA=$t(function(o,u){return function(y){return Ln(y,o,u)}}),vA=$t(function(o,u){return function(y){return Ln(o,y,u)}});function R1(o,u,y){var E=Hr(u),O=ir(u,E);y==null&&!(sr(u)&&(O.length||!E.length))&&(y=u,u=o,o=this,O=ir(u,Hr(u)));var te=!(sr(y)&&"chain"in y)||!!y.chain,fe=Uo(o);return Dr(O,function(ye){var Ae=u[ye];o[ye]=Ae,fe&&(o.prototype[ye]=function(){var Ve=this.__chain__;if(te||Ve){var Ye=o(this.__wrapped__),tt=Ye.__actions__=Zi(this.__actions__);return tt.push({func:Ae,args:arguments,thisArg:o}),Ye.__chain__=Ve,Ye}return Ae.apply(o,Wi([this.value()],arguments))})}),o}function yA(){return dr._===this&&(dr._=rr),this}function F1(){}function wA(o){return o=zt(o),$t(function(u){return Kp(u,o)})}var xA=m1(un),bA=m1(Sl),_A=m1(x);function mx(o){return _1(o)?Pt(ro(o)):xd(o)}function SA(o){return function(u){return o==null?n:zn(o,u)}}var NA=ww(),kA=ww(!0);function $1(){return[]}function B1(){return!1}function EA(){return{}}function jA(){return""}function CA(){return!0}function AA(o,u){if(o=zt(o),o<1||o>$)return[];var y=Le,E=zr(o,Le);u=kt(u),o-=Le;for(var O=Er(E,u);++y<o;)u(y);return O}function LA(o){return Ft(o)?un(o,ro):ks(o)?[o]:Zi(Dw(xn(o)))}function PA(o){var u=++Yi;return xn(o)+u}var TA=nm(function(o,u){return o+u},0),MA=g1("ceil"),IA=nm(function(o,u){return o/u},1),DA=g1("floor");function OA(o){return o&&o.length?Mt(o,ns,Qi):n}function RA(o,u){return o&&o.length?Mt(o,kt(u,2),Qi):n}function FA(o){return It(o,ns)}function $A(o,u){return It(o,kt(u,2))}function BA(o){return o&&o.length?Mt(o,ns,zl):n}function UA(o,u){return o&&o.length?Mt(o,kt(u,2),zl):n}var zA=nm(function(o,u){return o*u},1),qA=g1("round"),WA=nm(function(o,u){return o-u},0);function HA(o){return o&&o.length?Qn(o,ns):0}function GA(o,u){return o&&o.length?Qn(o,kt(u,2)):0}return G.after=pj,G.ary=Gw,G.assign=tC,G.assignIn=ax,G.assignInWith=mm,G.assignWith=nC,G.at=rC,G.before=Vw,G.bind=C1,G.bindAll=lA,G.bindKey=Yw,G.castArray=Ej,G.chain=qw,G.chunk=Dk,G.compact=Ok,G.concat=Rk,G.cond=cA,G.conforms=uA,G.constant=D1,G.countBy=HE,G.create=iC,G.curry=Kw,G.curryRight=Jw,G.debounce=Xw,G.defaults=sC,G.defaultsDeep=aC,G.defer=mj,G.delay=gj,G.difference=Fk,G.differenceBy=$k,G.differenceWith=Bk,G.drop=Uk,G.dropRight=zk,G.dropRightWhile=qk,G.dropWhile=Wk,G.fill=Hk,G.filter=VE,G.flatMap=JE,G.flatMapDeep=XE,G.flatMapDepth=QE,G.flatten=$w,G.flattenDeep=Gk,G.flattenDepth=Vk,G.flip=vj,G.flow=fA,G.flowRight=hA,G.fromPairs=Yk,G.functions=hC,G.functionsIn=pC,G.groupBy=ZE,G.initial=Jk,G.intersection=Xk,G.intersectionBy=Qk,G.intersectionWith=Zk,G.invert=gC,G.invertBy=vC,G.invokeMap=tj,G.iteratee=O1,G.keyBy=nj,G.keys=Hr,G.keysIn=ts,G.map=cm,G.mapKeys=wC,G.mapValues=xC,G.matches=pA,G.matchesProperty=mA,G.memoize=dm,G.merge=bC,G.mergeWith=ox,G.method=gA,G.methodOf=vA,G.mixin=R1,G.negate=fm,G.nthArg=wA,G.omit=_C,G.omitBy=SC,G.once=yj,G.orderBy=rj,G.over=xA,G.overArgs=wj,G.overEvery=bA,G.overSome=_A,G.partial=A1,G.partialRight=Qw,G.partition=ij,G.pick=NC,G.pickBy=lx,G.property=mx,G.propertyOf=SA,G.pull=rE,G.pullAll=Uw,G.pullAllBy=iE,G.pullAllWith=sE,G.pullAt=aE,G.range=NA,G.rangeRight=kA,G.rearg=xj,G.reject=oj,G.remove=oE,G.rest=bj,G.reverse=E1,G.sampleSize=cj,G.set=EC,G.setWith=jC,G.shuffle=uj,G.slice=lE,G.sortBy=hj,G.sortedUniq=mE,G.sortedUniqBy=gE,G.split=JC,G.spread=_j,G.tail=vE,G.take=yE,G.takeRight=wE,G.takeRightWhile=xE,G.takeWhile=bE,G.tap=OE,G.throttle=Sj,G.thru=lm,G.toArray=rx,G.toPairs=cx,G.toPairsIn=ux,G.toPath=LA,G.toPlainObject=sx,G.transform=CC,G.unary=Nj,G.union=_E,G.unionBy=SE,G.unionWith=NE,G.uniq=kE,G.uniqBy=EE,G.uniqWith=jE,G.unset=AC,G.unzip=j1,G.unzipWith=zw,G.update=LC,G.updateWith=PC,G.values=Ld,G.valuesIn=TC,G.without=CE,G.words=hx,G.wrap=kj,G.xor=AE,G.xorBy=LE,G.xorWith=PE,G.zip=TE,G.zipObject=ME,G.zipObjectDeep=IE,G.zipWith=DE,G.entries=cx,G.entriesIn=ux,G.extend=ax,G.extendWith=mm,R1(G,G),G.add=TA,G.attempt=px,G.camelCase=OC,G.capitalize=dx,G.ceil=MA,G.clamp=MC,G.clone=jj,G.cloneDeep=Aj,G.cloneDeepWith=Lj,G.cloneWith=Cj,G.conformsTo=Pj,G.deburr=fx,G.defaultTo=dA,G.divide=IA,G.endsWith=RC,G.eq=ya,G.escape=FC,G.escapeRegExp=$C,G.every=GE,G.find=YE,G.findIndex=Rw,G.findKey=oC,G.findLast=KE,G.findLastIndex=Fw,G.findLastKey=lC,G.floor=DA,G.forEach=Ww,G.forEachRight=Hw,G.forIn=cC,G.forInRight=uC,G.forOwn=dC,G.forOwnRight=fC,G.get=T1,G.gt=Tj,G.gte=Mj,G.has=mC,G.hasIn=M1,G.head=Bw,G.identity=ns,G.includes=ej,G.indexOf=Kk,G.inRange=IC,G.invoke=yC,G.isArguments=fu,G.isArray=Ft,G.isArrayBuffer=Ij,G.isArrayLike=es,G.isArrayLikeObject=wr,G.isBoolean=Dj,G.isBuffer=Jl,G.isDate=Oj,G.isElement=Rj,G.isEmpty=Fj,G.isEqual=$j,G.isEqualWith=Bj,G.isError=L1,G.isFinite=Uj,G.isFunction=Uo,G.isInteger=Zw,G.isLength=hm,G.isMap=ex,G.isMatch=zj,G.isMatchWith=qj,G.isNaN=Wj,G.isNative=Hj,G.isNil=Vj,G.isNull=Gj,G.isNumber=tx,G.isObject=sr,G.isObjectLike=hr,G.isPlainObject=oh,G.isRegExp=P1,G.isSafeInteger=Yj,G.isSet=nx,G.isString=pm,G.isSymbol=ks,G.isTypedArray=Ad,G.isUndefined=Kj,G.isWeakMap=Jj,G.isWeakSet=Xj,G.join=eE,G.kebabCase=BC,G.last=Ks,G.lastIndexOf=tE,G.lowerCase=UC,G.lowerFirst=zC,G.lt=Qj,G.lte=Zj,G.max=OA,G.maxBy=RA,G.mean=FA,G.meanBy=$A,G.min=BA,G.minBy=UA,G.stubArray=$1,G.stubFalse=B1,G.stubObject=EA,G.stubString=jA,G.stubTrue=CA,G.multiply=zA,G.nth=nE,G.noConflict=yA,G.noop=F1,G.now=um,G.pad=qC,G.padEnd=WC,G.padStart=HC,G.parseInt=GC,G.random=DC,G.reduce=sj,G.reduceRight=aj,G.repeat=VC,G.replace=YC,G.result=kC,G.round=qA,G.runInContext=Se,G.sample=lj,G.size=dj,G.snakeCase=KC,G.some=fj,G.sortedIndex=cE,G.sortedIndexBy=uE,G.sortedIndexOf=dE,G.sortedLastIndex=fE,G.sortedLastIndexBy=hE,G.sortedLastIndexOf=pE,G.startCase=XC,G.startsWith=QC,G.subtract=WA,G.sum=HA,G.sumBy=GA,G.template=ZC,G.times=AA,G.toFinite=zo,G.toInteger=zt,G.toLength=ix,G.toLower=eA,G.toNumber=Js,G.toSafeInteger=eC,G.toString=xn,G.toUpper=tA,G.trim=nA,G.trimEnd=rA,G.trimStart=iA,G.truncate=sA,G.unescape=aA,G.uniqueId=PA,G.upperCase=oA,G.upperFirst=I1,G.each=Ww,G.eachRight=Hw,G.first=Bw,R1(G,function(){var o={};return Zn(G,function(u,y){en.call(G.prototype,y)||(o[y]=u)}),o}(),{chain:!1}),G.VERSION=r,Dr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){G[o].placeholder=G}),Dr(["drop","take"],function(o,u){Wt.prototype[o]=function(y){y=y===n?1:yr(zt(y),0);var E=this.__filtered__&&!u?new Wt(this):this.clone();return E.__filtered__?E.__takeCount__=zr(y,E.__takeCount__):E.__views__.push({size:zr(y,Le),type:o+(E.__dir__<0?"Right":"")}),E},Wt.prototype[o+"Right"]=function(y){return this.reverse()[o](y).reverse()}}),Dr(["filter","map","takeWhile"],function(o,u){var y=u+1,E=y==Y||y==ge;Wt.prototype[o]=function(O){var te=this.clone();return te.__iteratees__.push({iteratee:kt(O,3),type:y}),te.__filtered__=te.__filtered__||E,te}}),Dr(["head","last"],function(o,u){var y="take"+(u?"Right":"");Wt.prototype[o]=function(){return this[y](1).value()[0]}}),Dr(["initial","tail"],function(o,u){var y="drop"+(u?"":"Right");Wt.prototype[o]=function(){return this.__filtered__?new Wt(this):this[y](1)}}),Wt.prototype.compact=function(){return this.filter(ns)},Wt.prototype.find=function(o){return this.filter(o).head()},Wt.prototype.findLast=function(o){return this.reverse().find(o)},Wt.prototype.invokeMap=$t(function(o,u){return typeof o=="function"?new Wt(this):this.map(function(y){return Ln(y,o,u)})}),Wt.prototype.reject=function(o){return this.filter(fm(kt(o)))},Wt.prototype.slice=function(o,u){o=zt(o);var y=this;return y.__filtered__&&(o>0||u<0)?new Wt(y):(o<0?y=y.takeRight(-o):o&&(y=y.drop(o)),u!==n&&(u=zt(u),y=u<0?y.dropRight(-u):y.take(u-o)),y)},Wt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Wt.prototype.toArray=function(){return this.take(Le)},Zn(Wt.prototype,function(o,u){var y=/^(?:filter|find|map|reject)|While$/.test(u),E=/^(?:head|last)$/.test(u),O=G[E?"take"+(u=="last"?"Right":""):u],te=E||/^find/.test(u);O&&(G.prototype[u]=function(){var fe=this.__wrapped__,ye=E?[1]:arguments,Ae=fe instanceof Wt,Ve=ye[0],Ye=Ae||Ft(fe),tt=function(Jt){var tn=O.apply(G,Wi([Jt],ye));return E&&lt?tn[0]:tn};Ye&&y&&typeof Ve=="function"&&Ve.length!=1&&(Ae=Ye=!1);var lt=this.__chain__,bt=!!this.__actions__.length,Et=te&&!lt,qt=Ae&&!bt;if(!te&&Ye){fe=qt?fe:new Wt(this);var jt=o.apply(fe,ye);return jt.__actions__.push({func:lm,args:[tt],thisArg:n}),new Ci(jt,lt)}return Et&&qt?o.apply(this,ye):(jt=this.thru(tt),Et?E?jt.value()[0]:jt.value():jt)})}),Dr(["pop","push","shift","sort","splice","unshift"],function(o){var u=xs[o],y=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",E=/^(?:pop|shift)$/.test(o);G.prototype[o]=function(){var O=arguments;if(E&&!this.__chain__){var te=this.value();return u.apply(Ft(te)?te:[],O)}return this[y](function(fe){return u.apply(Ft(fe)?fe:[],O)})}}),Zn(Wt.prototype,function(o,u){var y=G[u];if(y){var E=y.name+"";en.call(Fl,E)||(Fl[E]=[]),Fl[E].push({name:u,func:y})}}),Fl[tm(n,_).name]=[{name:"wrapper",func:n}],Wt.prototype.clone=Bp,Wt.prototype.reverse=n1,Wt.prototype.value=md,G.prototype.at=RE,G.prototype.chain=FE,G.prototype.commit=$E,G.prototype.next=BE,G.prototype.plant=zE,G.prototype.reverse=qE,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=WE,G.prototype.first=G.prototype.head,Ga&&(G.prototype[Ga]=UE),G},hi=ua();Xr?((Xr.exports=hi)._=hi,qi._=hi):dr._=hi}).call(ii)})(X0,X0.exports);var M$=X0.exports;async function Q0(e){return $n(async()=>{const{data:t,error:n}=await Xe.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function u0(e){const t={...e,type:e.type||"song"};return $n(async()=>{const{data:n,error:r}=await Xe.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la canción")}async function I$(e,t,n){const{data:{user:r}}=await Xe.auth.getUser();if(!r)return Te.error("No se pudo obtener la información del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return $n(async()=>{const{data:s,error:a}=await Xe.from("songs").insert(i).select().single();return{data:s,error:a}},"Error al crear el medley")}async function C_(e,t){return $n(async()=>{const{data:n,error:r}=await Xe.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la canción")}async function D$(e){try{const{error:t}=await Xe.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la canción:",t),Te.error("Error al eliminar la canción"),!1):!0}catch(t){return console.error("Error al eliminar la canción:",t),Te.error("Error al eliminar la canción"),!1}}async function uy(e){return $n(async()=>{const{data:t,error:n}=await Xe.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function A_(e){return $n(async()=>{const{data:t,error:n}=await Xe.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function K5(e){return $n(async()=>{const{data:t,error:n}=await Xe.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function O$(e,t){return $n(async()=>{const{data:n,error:r}=await Xe.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function R$(e){try{const{error:t}=await Xe.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),Te.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),Te.error("Error al eliminar el setlist"),!1}}async function Z0(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await Xe.auth.getUser();if(!r)return console.error("No se pudo obtener la información del usuario"),Te.error("No se pudo obtener la información del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:s,error:a}=await Xe.from("setlist_songs").insert(i).select().single();return a?(console.error("Error de Supabase al añadir la canción al setlist:",a),console.error("Código de error:",a.code),console.error("Mensaje de error:",a.message),console.error("Detalles:",a.details),Te.error(`Error al añadir la canción al setlist: ${a.message}`),null):(console.log("Canción añadida exitosamente:",s),s)}catch(r){return console.error("Error general al añadir la canción al setlist:",r),Te.error("Error al añadir la canción al setlist"),null}}async function F$(e,t){try{const{error:n,count:r}=await Xe.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la canción del setlist:",n),Te.error("Error al eliminar la canción del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la canción del setlist:",n),Te.error("Error al eliminar la canción del setlist"),!1}}async function $$(e,t){try{const{error:n}=await Xe.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),Te.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),Te.error("Error al reordenar las canciones del setlist"),!1}}async function L_(e,t){return await $n(async()=>{const{data:r,error:i}=await Xe.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function B$(e,t){return $n(async()=>{const{data:n,error:r}=await Xe.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function U$(e,t){try{const{data:n,error:r}=await Xe.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Te.error("Error al obtener el medley"),null;const s=[...n.medley_song_ids||[],t],{data:a,error:l}=await Xe.from("songs").update({medley_song_ids:s}).eq("id",e).select().single();return l?(console.error("Error al añadir la canción al medley:",l),Te.error("Error al añadir la canción al medley"),null):a}catch(n){return console.error("Error al añadir la canción al medley:",n),Te.error("Error al añadir la canción al medley"),null}}async function z$(e,t){try{const{data:n,error:r}=await Xe.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Te.error("Error al obtener el medley"),!1;const s=(n.medley_song_ids||[]).filter(l=>l!==t),{error:a}=await Xe.from("songs").update({medley_song_ids:s}).eq("id",e);return a?(console.error("Error al eliminar la canción del medley:",a),Te.error("Error al eliminar la canción del medley"),!1):!0}catch(n){return console.error("Error al eliminar la canción del medley:",n),Te.error("Error al eliminar la canción del medley"),!1}}async function q$(e){try{const{error:t}=await Xe.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),Te.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),Te.error("Error al eliminar el medley"),!1}}async function W$(e,t){try{const n=await A_(e);if(!n)return Te.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await Xe.auth.getUser();if(!r)return Te.error("No se pudo obtener la información del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},s=await K5(i);if(!s)return Te.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const a=n.songs.map(l=>Z0(s.id,l.song_id,l.position));await Promise.all(a)}return await A_(s.id)}catch(n){return console.error("Error al duplicar el setlist:",n),Te.error("Error al duplicar el setlist"),null}}let mu=null;function P_({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:s,availableDates:a,members:l}){var ce;const[c,f]=j.useState(""),[p,g]=j.useState(""),[w,m]=j.useState(""),[S,k]=j.useState(""),[C,_]=j.useState(!1),[N,L]=j.useState([]),[R,J]=j.useState(!1),{user:ee}=Os(),[W,I]=j.useState(""),[Z,re]=j.useState([]),[P,F]=j.useState(null),[V,Y]=j.useState(!1),[pe,ge]=j.useState([]),[Q,$]=j.useState([]),[q,oe]=j.useState("");j.useEffect(()=>{if(i)f(i.name),g(i.date),m(i.time),k(i.notes||""),I(i.location||""),oe(i.setlist_id||""),i.location&&F({display_name:i.location,lat:"",lon:"",type:"",class:""}),Le();else if(r){const le=on(r,"yyyy-MM-dd");g(le),m("20:00"),oe(""),T(le)}},[i,r]),j.useEffect(()=>{e&&(async()=>{const[me,Ne]=await Promise.all([Xe.from("events").select("*").eq("group_id",n),uy(n)]);ge(me.data||[]),$(Ne||[])})()},[e,n]);const Le=async()=>{if(i)try{const le=await $n(()=>Xe.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),me=await $n(()=>Xe.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),Ne=await $n(()=>Xe.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(le){const Me=new Set((me==null?void 0:me.map(Fe=>Fe.user_id))||[]),de=new Set;Ne==null||Ne.forEach(Fe=>{var Re;(Re=Fe.event_members)==null||Re.forEach(qe=>{de.add(qe.user_id)})});const B=new Set(le.map(Fe=>Fe.group_member_id)),ke=l.map(Fe=>({memberId:Fe.id,userId:Fe.user_id,selected:B.has(Fe.id),isAvailable:B.has(Fe.id)||(Fe.user_id?Me.has(Fe.user_id)&&!de.has(Fe.user_id):!0),sync_calendar:Fe.sync_calendar}));L(ke)}}catch(le){console.error("Error loading event members:",le)}},T=async(le,me)=>{try{const Ne=await $n(()=>Xe.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",le),"Error loading external events"),Me=new Set;Ne==null||Ne.forEach(Fe=>{var Re;(Re=Fe.event_members)==null||Re.forEach(qe=>{Me.add(qe.user_id)})});const de=await $n(()=>Xe.from("member_availability").select("user_id").eq("date",le),"Error loading member availability"),B=new Set((de==null?void 0:de.map(Fe=>Fe.user_id))||[]),ke=l.map(Fe=>{const Re=Fe.user_id?B.has(Fe.user_id)&&!Me.has(Fe.user_id):!0;return{memberId:Fe.id,userId:Fe.user_id,selected:me?me.includes(Fe.id):Fe.role_in_group==="principal"&&Re,isAvailable:Re,sync_calendar:Fe.sync_calendar}});L(ke)}catch(Ne){console.error("Error loading available members:",Ne)}};j.useEffect(()=>{K()},[N]);const K=()=>{const le=l.filter(Me=>Me.role_in_group==="principal"),me=N.filter(Me=>Me.selected).map(Me=>Me.memberId),Ne=new Set;return le.forEach(Me=>{me.includes(Me.id)||Me.instruments.forEach(de=>{N.filter(ke=>ke.selected).some(ke=>{const Fe=l.find(Re=>Re.id===ke.memberId);return Fe==null?void 0:Fe.instruments.some(Re=>Re.id===de.id)})||Ne.add(de.name)})}),J(Ne.size>0),Ne},se=(le,me)=>{L(Ne=>Ne.map(Me=>Me.memberId===le?{...Me,selected:me}:Me))},ue=async le=>{if(!le.trim()){re([]);return}mu&&mu.abort(),mu=new AbortController,Y(!0);try{const Me=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(le)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:mu.signal})).json()).sort((de,B)=>{const ke=de.display_name.toLowerCase().includes("madrid")||de.display_name.toLowerCase().includes("españa"),Fe=B.display_name.toLowerCase().includes("madrid")||B.display_name.toLowerCase().includes("españa");return ke&&!Fe?-1:!ke&&Fe?1:0});re(Me)}catch(me){me.name!=="AbortError"&&(console.error("Error searching locations:",me),Te.error("Error al buscar ubicaciones"))}finally{Y(!1),mu=null}};j.useEffect(()=>()=>{mu&&mu.abort()},[]);const he=pt.useCallback(M$.debounce(le=>{ue(le)},300),[]),je=le=>{const me=le.target.value;if(I(me),re([]),!me.trim()){re([]);return}he(me)},Ce=async()=>{try{if(!c||!p){Te.error("Por favor completa los campos requeridos");return}_(!0);const le={group_id:n,name:c.trim(),date:p,time:w,datetime:(()=>{const Ne=new Date(`${p}T${w}`),Me=-Ne.getTimezoneOffset(),de=new Date(Ne.getTime()-Me*60*1e3).toISOString().replace("Z",H$(Me));return console.log("Zona horaria local:",Intl.DateTimeFormat().resolvedOptions().timeZone),console.log("Fecha local:",Ne.toString()),console.log("Fecha con offset local:",de),de})(),notes:S.trim()||null,created_by:ee.id,location:P?P.display_name:W};let me;if(i){const{data:Ne,error:Me}=await Xe.from("events").update(le).eq("id",i.id).select().single();if(Me)throw Me;me=i.id}else{const{data:Ne,error:Me}=await Xe.from("events").insert([le]).select().single();if(Me)throw Me;me=Ne.id}if(me){i&&await Xe.from("event_members").delete().eq("event_id",me);const Ne=N.filter(Me=>Me.selected).map(Me=>({event_id:me,group_member_id:Me.memberId,user_id:Me.userId,created_by:ee.id}));if(Ne.length>0){const{error:Me}=await Xe.from("event_members").insert(Ne);if(Me)throw Me}console.log("Actualizando calendarios para miembros:",N),await Promise.all(N.filter(Me=>Me.selected&&Me.sync_calendar).map(Me=>(console.log("Actualizando calendario para miembro:",Me),m6(n,Me.memberId)))),q?await L_(me,q):i!=null&&i.setlist_id&&await L_(me,null)}_(!1),s&&s(),t(),Te.success(i?"Evento actualizado":"Evento creado")}catch(le){_(!1),console.error("Error saving event:",le),Te.error("Error al guardar el evento")}},ne=le=>{const me=new Date;me.setHours(0,0,0,0);const Ne=new Set(a.map(de=>on(de,"yyyy-MM-dd"))),Me=new Set(pe.map(de=>on(new Date(de.date),"yyyy-MM-dd")));return le.filter(de=>{const B=on(de,"yyyy-MM-dd"),ke=de>=me;return Ne.has(B)&&!Me.has(B)&&ke}).sort((de,B)=>de.getTime()-B.getTime())};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[d.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ma,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:Ce,className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(Gn,{label:"Event Name",value:c,onChange:le=>f(le.target.value),required:!0,placeholder:"Enter event name"}),d.jsx(Gn,{label:"Time",type:"time",value:w,onChange:le=>m(le.target.value),required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),d.jsxs("select",{value:p,onChange:le=>{g(le.target.value),T(le.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",disabled:!0,children:"Select a date"}),ne(a).map((le,me)=>{const Ne=on(le,"yyyy-MM-dd");return d.jsx("option",{value:Ne,children:on(le,"EEEE, d MMMM yyyy",{locale:Qd})},me)})]})]}),i&&d.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:d.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",on(new Date(i.date),"EEEE, d MMMM yyyy",{locale:Qd})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),d.jsxs("select",{value:q,onChange:le=>oe(le.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",children:"Sin setlist"}),Q.map(le=>{var me;return d.jsxs("option",{value:le.id,children:[le.name," (",((me=le.songs)==null?void 0:me.length)||0," canciones)"]},le.id)})]}),q&&d.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(ce=Q.find(le=>le.id===q))==null?void 0:ce.name]})})]}),p&&d.jsx(T$,{members:l,selectedMembers:N,onMemberSelectionChange:se,validationError:R}),d.jsxs("div",{className:"relative space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicación"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(l0,{className:"h-5 w-5 text-gray-400"})}),d.jsx(Gn,{value:W,onChange:je,className:"pl-10 pr-10",placeholder:"Buscar ubicación..."}),W&&d.jsx("button",{type:"button",onClick:()=>{I(""),F(null),re([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d.jsx(Ma,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),V&&d.jsx("div",{className:"flex items-center justify-center p-4",children:d.jsx(go,{className:"h-6 w-6 animate-spin text-primary"})}),Z.length>0&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:Z.map((le,me)=>d.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{F(le),I(le.display_name),re([])},children:[d.jsx(l0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:le.display_name.split(",")[0]}),d.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:le.display_name.split(",").slice(1).join(",").trim()})]})]},me))}),P&&d.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(l0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:typeof P.display_name=="string"&&P.display_name.includes(",")?P.display_name.split(",")[0]:P.display_name}),d.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:typeof P.display_name=="string"&&P.display_name.includes(",")?P.display_name.split(",").slice(1).join(",").trim():""})]}),d.jsx("button",{type:"button",onClick:()=>{F(null),I("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:d.jsx(Ma,{className:"h-5 w-5"})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:S,onChange:le=>k(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(yt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(yt,{onClick:Ce,disabled:C,className:"w-full",children:C?d.jsxs(d.Fragment,{children:[d.jsx(go,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function H$(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}function Nn(e){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(e)}var Si=Uint8Array,Ps=Uint16Array,J5=Int32Array,Hg=new Si([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gg=new Si([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dy=new Si([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g6=function(e,t){for(var n=new Ps(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new J5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},v6=g6(Hg,2),y6=v6.b,fy=v6.r;y6[28]=258,fy[258]=28;var w6=g6(Gg,0),G$=w6.b,T_=w6.r,hy=new Ps(32768);for(var Wn=0;Wn<32768;++Wn){var Zl=(Wn&43690)>>1|(Wn&21845)<<1;Zl=(Zl&52428)>>2|(Zl&13107)<<2,Zl=(Zl&61680)>>4|(Zl&3855)<<4,hy[Wn]=((Zl&65280)>>8|(Zl&255)<<8)>>1}var mo=function(e,t,n){for(var r=e.length,i=0,s=new Ps(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new Ps(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Ps(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var f=i<<4|e[i],p=t-e[i],g=a[e[i]-1]++<<p,w=g|(1<<p)-1;g<=w;++g)l[hy[g]>>c]=f}else for(l=new Ps(r),i=0;i<r;++i)e[i]&&(l[i]=hy[a[e[i]-1]++]>>15-e[i]);return l},Pc=new Si(288);for(var Wn=0;Wn<144;++Wn)Pc[Wn]=8;for(var Wn=144;Wn<256;++Wn)Pc[Wn]=9;for(var Wn=256;Wn<280;++Wn)Pc[Wn]=7;for(var Wn=280;Wn<288;++Wn)Pc[Wn]=8;var pp=new Si(32);for(var Wn=0;Wn<32;++Wn)pp[Wn]=5;var V$=mo(Pc,9,0),Y$=mo(Pc,9,1),K$=mo(pp,5,0),J$=mo(pp,5,1),Lv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ba=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Pv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},X5=function(e){return(e+7)/8|0},x6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Si(e.subarray(t,n))},X$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ea=function(e,t,n){var r=new Error(t||X$[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ea),!n)throw r;return r},Q$=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Si(0);var a=!n,l=a||t.i!=2,c=t.i;a&&(n=new Si(i*3));var f=function(le){var me=n.length;if(le>me){var Ne=new Si(Math.max(me*2,le));Ne.set(n),n=Ne}},p=t.f||0,g=t.p||0,w=t.b||0,m=t.l,S=t.d,k=t.m,C=t.n,_=i*8;do{if(!m){p=ba(e,g,1);var N=ba(e,g+1,3);if(g+=3,N)if(N==1)m=Y$,S=J$,k=9,C=5;else if(N==2){var ee=ba(e,g,31)+257,W=ba(e,g+10,15)+4,I=ee+ba(e,g+5,31)+1;g+=14;for(var Z=new Si(I),re=new Si(19),P=0;P<W;++P)re[dy[P]]=ba(e,g+P*3,7);g+=W*3;for(var F=Lv(re),V=(1<<F)-1,Y=mo(re,F,1),P=0;P<I;){var pe=Y[ba(e,g,V)];g+=pe&15;var L=pe>>4;if(L<16)Z[P++]=L;else{var ge=0,Q=0;for(L==16?(Q=3+ba(e,g,3),g+=2,ge=Z[P-1]):L==17?(Q=3+ba(e,g,7),g+=3):L==18&&(Q=11+ba(e,g,127),g+=7);Q--;)Z[P++]=ge}}var $=Z.subarray(0,ee),q=Z.subarray(ee);k=Lv($),C=Lv(q),m=mo($,k,1),S=mo(q,C,1)}else Ea(1);else{var L=X5(g)+4,R=e[L-4]|e[L-3]<<8,J=L+R;if(J>i){c&&Ea(0);break}l&&f(w+R),n.set(e.subarray(L,J),w),t.b=w+=R,t.p=g=J*8,t.f=p;continue}if(g>_){c&&Ea(0);break}}l&&f(w+131072);for(var oe=(1<<k)-1,Le=(1<<C)-1,T=g;;T=g){var ge=m[Pv(e,g)&oe],K=ge>>4;if(g+=ge&15,g>_){c&&Ea(0);break}if(ge||Ea(2),K<256)n[w++]=K;else if(K==256){T=g,m=null;break}else{var se=K-254;if(K>264){var P=K-257,ue=Hg[P];se=ba(e,g,(1<<ue)-1)+y6[P],g+=ue}var he=S[Pv(e,g)&Le],je=he>>4;he||Ea(3),g+=he&15;var q=G$[je];if(je>3){var ue=Gg[je];q+=Pv(e,g)&(1<<ue)-1,g+=ue}if(g>_){c&&Ea(0);break}l&&f(w+131072);var Ce=w+se;if(w<q){var ne=s-q,ce=Math.min(q,Ce);for(ne+w<0&&Ea(3);w<ce;++w)n[w]=r[ne+w]}for(;w<Ce;++w)n[w]=n[w-q]}}t.l=m,t.p=T,t.b=w,t.f=p,m&&(p=1,t.m=k,t.d=S,t.n=C)}while(!p);return w!=n.length&&a?x6(n,0,w):n.subarray(0,w)},Go=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},bh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Tv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:_6,l:0};if(i==1){var a=new Si(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(J,ee){return J.f-ee.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],f=0,p=1,g=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=n[n[f].f<n[g].f?f++:g++],c=n[f!=p&&n[f].f<n[g].f?f++:g++],n[p++]={s:-1,f:l.f+c.f,l,r:c};for(var w=s[0].s,r=1;r<i;++r)s[r].s>w&&(w=s[r].s);var m=new Ps(w+1),S=py(n[p-1],m,0);if(S>t){var r=0,k=0,C=S-t,_=1<<C;for(s.sort(function(ee,W){return m[W.s]-m[ee.s]||ee.f-W.f});r<i;++r){var N=s[r].s;if(m[N]>t)k+=_-(1<<S-m[N]),m[N]=t;else break}for(k>>=C;k>0;){var L=s[r].s;m[L]<t?k-=1<<t-m[L]++-1:++r}for(;r>=0&&k;--r){var R=s[r].s;m[R]==t&&(--m[R],++k)}S=t}return{t:new Si(m),l:S}},py=function(e,t,n){return e.s==-1?Math.max(py(e.l,t,n+1),py(e.r,t,n+1)):t[e.s]=n},M_=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ps(++t),r=0,i=e[0],s=1,a=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:n.subarray(0,r),n:t}},_h=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},b6=function(e,t,n){var r=n.length,i=X5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},I_=function(e,t,n,r,i,s,a,l,c,f,p){Go(t,p++,n),++i[256];for(var g=Tv(i,15),w=g.t,m=g.l,S=Tv(s,15),k=S.t,C=S.l,_=M_(w),N=_.c,L=_.n,R=M_(k),J=R.c,ee=R.n,W=new Ps(19),I=0;I<N.length;++I)++W[N[I]&31];for(var I=0;I<J.length;++I)++W[J[I]&31];for(var Z=Tv(W,7),re=Z.t,P=Z.l,F=19;F>4&&!re[dy[F-1]];--F);var V=f+5<<3,Y=_h(i,Pc)+_h(s,pp)+a,pe=_h(i,w)+_h(s,k)+a+14+3*F+_h(W,re)+2*W[16]+3*W[17]+7*W[18];if(c>=0&&V<=Y&&V<=pe)return b6(t,p,e.subarray(c,c+f));var ge,Q,$,q;if(Go(t,p,1+(pe<Y)),p+=2,pe<Y){ge=mo(w,m,0),Q=w,$=mo(k,C,0),q=k;var oe=mo(re,P,0);Go(t,p,L-257),Go(t,p+5,ee-1),Go(t,p+10,F-4),p+=14;for(var I=0;I<F;++I)Go(t,p+3*I,re[dy[I]]);p+=3*F;for(var Le=[N,J],T=0;T<2;++T)for(var K=Le[T],I=0;I<K.length;++I){var se=K[I]&31;Go(t,p,oe[se]),p+=re[se],se>15&&(Go(t,p,K[I]>>5&127),p+=K[I]>>12)}}else ge=V$,Q=Pc,$=K$,q=pp;for(var I=0;I<l;++I){var ue=r[I];if(ue>255){var se=ue>>18&31;bh(t,p,ge[se+257]),p+=Q[se+257],se>7&&(Go(t,p,ue>>23&31),p+=Hg[se]);var he=ue&31;bh(t,p,$[he]),p+=q[he],he>3&&(bh(t,p,ue>>5&8191),p+=Gg[he])}else bh(t,p,ge[ue]),p+=Q[ue]}return bh(t,p,ge[256]),p+Q[256]},Z$=new J5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_6=new Si(0),eB=function(e,t,n,r,i,s){var a=s.z||e.length,l=new Si(r+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(r,l.length-i),f=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var g=Z$[t-1],w=g>>13,m=g&8191,S=(1<<n)-1,k=s.p||new Ps(32768),C=s.h||new Ps(S+1),_=Math.ceil(n/3),N=2*_,L=function(Me){return(e[Me]^e[Me+1]<<_^e[Me+2]<<N)&S},R=new J5(25e3),J=new Ps(288),ee=new Ps(32),W=0,I=0,Z=s.i||0,re=0,P=s.w||0,F=0;Z+2<a;++Z){var V=L(Z),Y=Z&32767,pe=C[V];if(k[Y]=pe,C[V]=Y,P<=Z){var ge=a-Z;if((W>7e3||re>24576)&&(ge>423||!f)){p=I_(e,c,0,R,J,ee,I,re,F,Z-F,p),re=W=I=0,F=Z;for(var Q=0;Q<286;++Q)J[Q]=0;for(var Q=0;Q<30;++Q)ee[Q]=0}var $=2,q=0,oe=m,Le=Y-pe&32767;if(ge>2&&V==L(Z-Le))for(var T=Math.min(w,ge)-1,K=Math.min(32767,Z),se=Math.min(258,ge);Le<=K&&--oe&&Y!=pe;){if(e[Z+$]==e[Z+$-Le]){for(var ue=0;ue<se&&e[Z+ue]==e[Z+ue-Le];++ue);if(ue>$){if($=ue,q=Le,ue>T)break;for(var he=Math.min(Le,ue-2),je=0,Q=0;Q<he;++Q){var Ce=Z-Le+Q&32767,ne=k[Ce],ce=Ce-ne&32767;ce>je&&(je=ce,pe=Ce)}}}Y=pe,pe=k[Y],Le+=Y-pe&32767}if(q){R[re++]=268435456|fy[$]<<18|T_[q];var le=fy[$]&31,me=T_[q]&31;I+=Hg[le]+Gg[me],++J[257+le],++ee[me],P=Z+$,++W}else R[re++]=e[Z],++J[e[Z]]}}for(Z=Math.max(Z,P);Z<a;++Z)R[re++]=e[Z],++J[e[Z]];p=I_(e,c,f,R,J,ee,I,re,F,Z-F,p),f||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=C,s.p=k,s.i=Z,s.w=P)}else{for(var Z=s.w||0;Z<a+f;Z+=65535){var Ne=Z+65535;Ne>=a&&(c[p/8|0]=f,Ne=a),p=b6(c,p+1,e.subarray(Z,Ne))}s.i=a}return x6(l,0,r+X5(p)+i)},S6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},tB=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Si(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return eB(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},N6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},nB=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=S6();i.p(t.dictionary),N6(e,2,i.d())}},rB=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ea(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Ea(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function my(e,t){t||(t={});var n=S6();n.p(e);var r=tB(e,t,t.dictionary?6:2,4);return nB(r,t),N6(r,r.length-4,n.d()),r}function iB(e,t){return Q$(e.subarray(rB(e,t),-4),{i:2},t,t)}var sB=typeof TextDecoder<"u"&&new TextDecoder,aB=0;try{sB.decode(_6,{stream:!0}),aB=1}catch{}var At=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Mv(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var Mn={log:Mv,warn:function(e){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):Mv.call(null,arguments))},error:function(e){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):Mv(e))}};function Iv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){bu(r.response,t,n)},r.onerror=function(){Mn.error("could not download file")},r.send()}function D_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Bm(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var zh,gy,bu=At.saveAs||((typeof window>"u"?"undefined":Nn(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=At.URL||At.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?D_(i.href)?Iv(e,t,n):Bm(i,i.target="_blank"):Bm(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(D_(e))Iv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Bm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Nn(s)!=="object"&&(Mn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Iv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(At.HTMLElement)||At.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Nn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(e)}else{var c=At.URL||At.webkitURL,f=c.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function k6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+l+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Dv(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=yi(n,r,i,s,t[0],7,-680876936),s=yi(s,n,r,i,t[1],12,-389564586),i=yi(i,s,n,r,t[2],17,606105819),r=yi(r,i,s,n,t[3],22,-1044525330),n=yi(n,r,i,s,t[4],7,-176418897),s=yi(s,n,r,i,t[5],12,1200080426),i=yi(i,s,n,r,t[6],17,-1473231341),r=yi(r,i,s,n,t[7],22,-45705983),n=yi(n,r,i,s,t[8],7,1770035416),s=yi(s,n,r,i,t[9],12,-1958414417),i=yi(i,s,n,r,t[10],17,-42063),r=yi(r,i,s,n,t[11],22,-1990404162),n=yi(n,r,i,s,t[12],7,1804603682),s=yi(s,n,r,i,t[13],12,-40341101),i=yi(i,s,n,r,t[14],17,-1502002290),n=wi(n,r=yi(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=wi(s,n,r,i,t[6],9,-1069501632),i=wi(i,s,n,r,t[11],14,643717713),r=wi(r,i,s,n,t[0],20,-373897302),n=wi(n,r,i,s,t[5],5,-701558691),s=wi(s,n,r,i,t[10],9,38016083),i=wi(i,s,n,r,t[15],14,-660478335),r=wi(r,i,s,n,t[4],20,-405537848),n=wi(n,r,i,s,t[9],5,568446438),s=wi(s,n,r,i,t[14],9,-1019803690),i=wi(i,s,n,r,t[3],14,-187363961),r=wi(r,i,s,n,t[8],20,1163531501),n=wi(n,r,i,s,t[13],5,-1444681467),s=wi(s,n,r,i,t[2],9,-51403784),i=wi(i,s,n,r,t[7],14,1735328473),n=xi(n,r=wi(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=xi(s,n,r,i,t[8],11,-2022574463),i=xi(i,s,n,r,t[11],16,1839030562),r=xi(r,i,s,n,t[14],23,-35309556),n=xi(n,r,i,s,t[1],4,-1530992060),s=xi(s,n,r,i,t[4],11,1272893353),i=xi(i,s,n,r,t[7],16,-155497632),r=xi(r,i,s,n,t[10],23,-1094730640),n=xi(n,r,i,s,t[13],4,681279174),s=xi(s,n,r,i,t[0],11,-358537222),i=xi(i,s,n,r,t[3],16,-722521979),r=xi(r,i,s,n,t[6],23,76029189),n=xi(n,r,i,s,t[9],4,-640364487),s=xi(s,n,r,i,t[12],11,-421815835),i=xi(i,s,n,r,t[15],16,530742520),n=bi(n,r=xi(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=bi(s,n,r,i,t[7],10,1126891415),i=bi(i,s,n,r,t[14],15,-1416354905),r=bi(r,i,s,n,t[5],21,-57434055),n=bi(n,r,i,s,t[12],6,1700485571),s=bi(s,n,r,i,t[3],10,-1894986606),i=bi(i,s,n,r,t[10],15,-1051523),r=bi(r,i,s,n,t[1],21,-2054922799),n=bi(n,r,i,s,t[8],6,1873313359),s=bi(s,n,r,i,t[15],10,-30611744),i=bi(i,s,n,r,t[6],15,-1560198380),r=bi(r,i,s,n,t[13],21,1309151649),n=bi(n,r,i,s,t[4],6,-145523070),s=bi(s,n,r,i,t[11],10,-1120210379),i=bi(i,s,n,r,t[2],15,718787259),r=bi(r,i,s,n,t[9],21,-343485551),e[0]=gc(n,e[0]),e[1]=gc(r,e[1]),e[2]=gc(i,e[2]),e[3]=gc(s,e[3])}function Vg(e,t,n,r,i,s){return t=gc(gc(t,e),gc(r,s)),gc(t<<i|t>>>32-i,n)}function yi(e,t,n,r,i,s,a){return Vg(t&n|~t&r,e,t,i,s,a)}function wi(e,t,n,r,i,s,a){return Vg(t&r|n&~r,e,t,i,s,a)}function xi(e,t,n,r,i,s,a){return Vg(t^n^r,e,t,i,s,a)}function bi(e,t,n,r,i,s,a){return Vg(n^(t|~r),e,t,i,s,a)}function E6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Dv(r,oB(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Dv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Dv(r,i),r}function oB(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}zh=At.atob.bind(At),gy=At.btoa.bind(At);var O_="0123456789abcdef".split("");function lB(e){for(var t="",n=0;n<4;n++)t+=O_[e>>8*n+4&15]+O_[e>>8*n&15];return t}function cB(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function vy(e){return E6(e).map(cB).join("")}var uB=function(e){for(var t=0;t<e.length;t++)e[t]=lB(e[t]);return e.join("")}(E6("hello"))!="5d41402abc4b2a76b9719d911017c592";function gc(e,t){if(uB){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function yy(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var f=0;for(c=0;c<256;c++){var p=l[c];f=(f+p+a.charCodeAt(c))%256,l[c]=l[f],l[f]=p}n=e,r=l}else l=r;var g=t.length,w=0,m=0,S="";for(c=0;c<g;c++)m=(m+(p=l[w=(w+1)%256]))%256,l[w]=l[m],l[m]=p,a=l[(l[w]+l[m])%256],S+=String.fromCharCode(t.charCodeAt(c)^a);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var R_={print:4,modify:8,copy:16,"annot-forms":32};function Fd(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(R_.perm!==void 0)throw new Error("Invalid permission: "+l);i+=R_[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=vy(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=yy(this.encryptionKey,this.padding)}function $d(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function F_(e){if(Nn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(l){At.console&&Mn.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function eg(e){if(!(this instanceof eg))return new eg(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function j6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Nu(e,t,n,r,i){if(!(this instanceof Nu))return new Nu(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,j6.call(this,r,i)}function Zd(e,t,n,r,i){if(!(this instanceof Zd))return new Zd(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,j6.call(this,r,i)}function Ct(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,c=16,f="S",p=null;Nn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),f=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,w={},m={internal:{},__private__:{}};m.__private__.PubSub=F_;var S="1.3",k=m.__private__.getPdfVersion=function(){return S};m.__private__.setPdfVersion=function(x){S=x};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return C};var _=m.__private__.getPageFormat=function(x){return C[x]};i=i||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},L=N.COMPAT;function R(){this.saveGraphicsState(),B(new ht(et,0,0,-et,0,zs()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),f="n",L=N.ADVANCED}function J(){this.restoreGraphicsState(),f="S",L=N.COMPAT}var ee=m.__private__.combineFontStyleAndFontWeight=function(x,D){if(x=="bold"&&D=="normal"||x=="bold"&&D==400||x=="normal"&&D=="italic"||x=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(x=D==400||D==="normal"?x==="italic"?"italic":"normal":D!=700&&D!=="bold"||x!=="normal"?(D==700?"bold":D)+""+x:"bold"),x};m.advancedAPI=function(x){var D=L===N.COMPAT;return D&&R.call(this),typeof x!="function"||(x(this),D&&J.call(this)),this},m.compatAPI=function(x){var D=L===N.ADVANCED;return D&&J.call(this),typeof x!="function"||(x(this),D&&R.call(this)),this},m.isAdvancedAPI=function(){return L===N.ADVANCED};var W,I=function(x){if(L!==N.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=m.roundToPrecision=m.__private__.roundToPrecision=function(x,D){var ae=t||D;if(isNaN(x)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ae).replace(/0+$/,"")};W=m.hpf=m.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(x,16)};var re=m.f2=m.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return Z(x,2)},P=m.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return Z(x,3)},F=m.scale=m.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return L===N.COMPAT?x*et:L===N.ADVANCED?x:void 0},V=function(x){return L===N.COMPAT?zs()-x:L===N.ADVANCED?x:void 0},Y=function(x){return F(V(x))};m.__private__.setPrecision=m.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var pe,ge="00000000000000000000000000000000",Q=m.__private__.getFileId=function(){return ge},$=m.__private__.setFileId=function(x){return ge=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Ur=new Fd(p.userPermissions,p.userPassword,p.ownerPassword,ge)),ge};m.setFileId=function(x){return $(x),this},m.getFileId=function(){return Q()};var q=m.__private__.convertDateToPDFDate=function(x){var D=x.getTimezoneOffset(),ae=D<0?"+":"-",ve=Math.floor(Math.abs(D/60)),Pe=Math.abs(D%60),Ue=[ae,se(ve),"'",se(Pe),"'"].join("");return["D:",x.getFullYear(),se(x.getMonth()+1),se(x.getDate()),se(x.getHours()),se(x.getMinutes()),se(x.getSeconds()),Ue].join("")},oe=m.__private__.convertPDFDateToDate=function(x){var D=parseInt(x.substr(2,4),10),ae=parseInt(x.substr(6,2),10)-1,ve=parseInt(x.substr(8,2),10),Pe=parseInt(x.substr(10,2),10),Ue=parseInt(x.substr(12,2),10),Qe=parseInt(x.substr(14,2),10);return new Date(D,ae,ve,Pe,Ue,Qe,0)},Le=m.__private__.setCreationDate=function(x){var D;if(x===void 0&&(x=new Date),x instanceof Date)D=q(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=x}return pe=D},T=m.__private__.getCreationDate=function(x){var D=pe;return x==="jsDate"&&(D=oe(pe)),D};m.setCreationDate=function(x){return Le(x),this},m.getCreationDate=function(x){return T(x)};var K,se=m.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},ue=m.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},he=0,je=[],Ce=[],ne=0,ce=[],le=[],me=!1,Ne=Ce,Me=function(){he=0,ne=0,Ce=[],je=[],ce=[],ki=jn(),ps=jn()};m.__private__.setCustomOutputDestination=function(x){me=!0,Ne=x};var de=function(x){me||(Ne=x)};m.__private__.resetCustomOutputDestination=function(){me=!1,Ne=Ce};var B=m.__private__.out=function(x){return x=x.toString(),ne+=x.length+1,Ne.push(x),Ne},ke=m.__private__.write=function(x){return B(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Fe=m.__private__.getArrayBuffer=function(x){for(var D=x.length,ae=new ArrayBuffer(D),ve=new Uint8Array(ae);D--;)ve[D]=x.charCodeAt(D);return ae},Re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Re};var qe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(x){return qe=L===N.ADVANCED?x/et:x,this};var be,$e=m.__private__.getFontSize=m.getFontSize=function(){return L===N.COMPAT?qe:qe*et},Ke=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(x){return Ke=x,this},m.__private__.getR2L=m.getR2L=function(){return Ke};var Je,nt=m.__private__.setZoomMode=function(x){var D=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))be=x;else if(isNaN(x)){if(D.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');be=x}else be=parseInt(x,10)};m.__private__.getZoomMode=function(){return be};var rt,at=m.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Je=x};m.__private__.getPageMode=function(){return Je};var St=m.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');rt=x};m.__private__.getLayoutMode=function(){return rt},m.__private__.setDisplayMode=m.setDisplayMode=function(x,D,ae){return nt(x),St(D),at(ae),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(x){if(Object.keys(ft).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[x]},m.__private__.getDocumentProperties=function(){return ft},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(x){for(var D in ft)ft.hasOwnProperty(D)&&x[D]&&(ft[D]=x[D]);return this},m.__private__.setDocumentProperty=function(x,D){if(Object.keys(ft).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[x]=D};var Nt,et,bn,Bt,Tr,Qt={},pn={},oi=[],Zt={},aa={},Dn={},li={},_n=null,Vt=0,wt=[],Ut=new F_(m),ur=e.hotfixes||[],rn={},tr={},Mr=[],ht=function x(D,ae,ve,Pe,Ue,Qe){if(!(this instanceof x))return new x(D,ae,ve,Pe,Ue,Qe);isNaN(D)&&(D=1),isNaN(ae)&&(ae=0),isNaN(ve)&&(ve=0),isNaN(Pe)&&(Pe=1),isNaN(Ue)&&(Ue=0),isNaN(Qe)&&(Qe=0),this._matrix=[D,ae,ve,Pe,Ue,Qe]};Object.defineProperty(ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ht.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(x)},ht.prototype.multiply=function(x){var D=x.sx*this.sx+x.shy*this.shx,ae=x.sx*this.shy+x.shy*this.sy,ve=x.shx*this.sx+x.sy*this.shx,Pe=x.shx*this.shy+x.sy*this.sy,Ue=x.tx*this.sx+x.ty*this.shx+this.tx,Qe=x.tx*this.shy+x.ty*this.sy+this.ty;return new ht(D,ae,ve,Pe,Ue,Qe)},ht.prototype.decompose=function(){var x=this.sx,D=this.shy,ae=this.shx,ve=this.sy,Pe=this.tx,Ue=this.ty,Qe=Math.sqrt(x*x+D*D),ut=(x/=Qe)*ae+(D/=Qe)*ve;ae-=x*ut,ve-=D*ut;var _t=Math.sqrt(ae*ae+ve*ve);return ut/=_t,x*(ve/=_t)<D*(ae/=_t)&&(x=-x,D=-D,ut=-ut,Qe=-Qe),{scale:new ht(Qe,0,0,_t,0,0),translate:new ht(1,0,0,1,Pe,Ue),rotate:new ht(x,D,-D,x,0,0),skew:new ht(1,0,ut,1,0,0)}},ht.prototype.toString=function(x){return this.join(" ")},ht.prototype.inversed=function(){var x=this.sx,D=this.shy,ae=this.shx,ve=this.sy,Pe=this.tx,Ue=this.ty,Qe=1/(x*ve-D*ae),ut=ve*Qe,_t=-D*Qe,It=-ae*Qe,Pt=x*Qe;return new ht(ut,_t,It,Pt,-ut*Pe-It*Ue,-_t*Pe-Pt*Ue)},ht.prototype.applyToPoint=function(x){var D=x.x*this.sx+x.y*this.shx+this.tx,ae=x.x*this.shy+x.y*this.sy+this.ty;return new Dr(D,ae)},ht.prototype.applyToRectangle=function(x){var D=this.applyToPoint(x),ae=this.applyToPoint(new Dr(x.x+x.w,x.y+x.h));return new Kc(D.x,D.y,ae.x-D.x,ae.y-D.y)},ht.prototype.clone=function(){var x=this.sx,D=this.shy,ae=this.shx,ve=this.sy,Pe=this.tx,Ue=this.ty;return new ht(x,D,ae,ve,Pe,Ue)},m.Matrix=ht;var Vn=m.matrixMult=function(x,D){return D.multiply(x)},nr=new ht(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=nr;var En=function(x,D){if(!aa[x]){var ae=(D instanceof Nu?"Sh":"P")+(Object.keys(Zt).length+1).toString(10);D.id=ae,aa[x]=ae,Zt[ae]=D,Ut.publish("addPattern",D)}};m.ShadingPattern=Nu,m.TilingPattern=Zd,m.addShadingPattern=function(x,D){return I("addShadingPattern()"),En(x,D),this},m.beginTilingPattern=function(x){I("beginTilingPattern()"),ys(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},m.endTilingPattern=function(x,D){I("endTilingPattern()"),D.stream=le[K].join(`
`),En(x,D),Ut.publish("endTilingPattern",D),Mr.pop().restore()};var Pn=m.__private__.newObject=function(){var x=jn();return Yn(x,!0),x},jn=m.__private__.newObjectDeferred=function(){return he++,je[he]=function(){return ne},he},Yn=function(x,D){return D=typeof D=="boolean"&&D,je[x]=ne,D&&B(x+" 0 obj"),x},Ui=m.__private__.newAdditionalObject=function(){var x={objId:jn(),content:""};return ce.push(x),x},ki=jn(),ps=jn(),ms=m.__private__.decodeColorString=function(x){var D=x.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length===5&&(D[4]==="k"||D[4]==="K")&&(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var ae=parseFloat(D[0]);D=[ae,ae,ae,"r"]}for(var ve="#",Pe=0;Pe<3;Pe++)ve+=("0"+Math.floor(255*parseFloat(D[Pe])).toString(16)).slice(-2);return ve},gs=m.__private__.encodeColorString=function(x){var D;typeof x=="string"&&(x={ch1:x});var ae=x.ch1,ve=x.ch2,Pe=x.ch3,Ue=x.ch4,Qe=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var ut=new k6(ae);if(ut.ok)ae=ut.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var _t=parseInt(ae.substr(1),16);ae=_t>>16&255,ve=_t>>8&255,Pe=255&_t}if(ve===void 0||Ue===void 0&&ae===ve&&ve===Pe)if(typeof ae=="string")D=ae+" "+Qe[0];else switch(x.precision){case 2:D=re(ae/255)+" "+Qe[0];break;case 3:default:D=P(ae/255)+" "+Qe[0]}else if(Ue===void 0||Nn(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return D=["1.","1.","1.",Qe[1]].join(" ");if(typeof ae=="string")D=[ae,ve,Pe,Qe[1]].join(" ");else switch(x.precision){case 2:D=[re(ae/255),re(ve/255),re(Pe/255),Qe[1]].join(" ");break;default:case 3:D=[P(ae/255),P(ve/255),P(Pe/255),Qe[1]].join(" ")}}else if(typeof ae=="string")D=[ae,ve,Pe,Ue,Qe[2]].join(" ");else switch(x.precision){case 2:D=[re(ae),re(ve),re(Pe),re(Ue),Qe[2]].join(" ");break;case 3:default:D=[P(ae),P(ve),P(Pe),P(Ue),Qe[2]].join(" ")}return D},vs=m.__private__.getFilters=function(){return a},zi=m.__private__.putStream=function(x){var D=(x=x||{}).data||"",ae=x.filters||vs(),ve=x.alreadyAppliedFilters||[],Pe=x.addLength1||!1,Ue=D.length,Qe=x.objectId,ut=function(Er){return Er};if(p!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ut=Ur.encryptor(Qe,0));var _t={};ae===!0&&(ae=["FlateEncode"]);var It=x.additionalKeyValues||[],Pt=(_t=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(D,ae):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(_t.data.length!==0&&(It.push({key:"Length",value:_t.data.length}),Pe===!0&&It.push({key:"Length1",value:Ue})),Pt.length!=0)if(Pt.split("/").length-1==1)It.push({key:"Filter",value:Pt});else{It.push({key:"Filter",value:"["+Pt+"]"});for(var Yt=0;Yt<It.length;Yt+=1)if(It[Yt].key==="DecodeParms"){for(var On=[],Xn=0;Xn<_t.reverseChain.split("/").length-1;Xn+=1)On.push("null");On.push(It[Yt].value),It[Yt].value="["+On.join(" ")+"]"}}B("<<");for(var Qn=0;Qn<It.length;Qn++)B("/"+It[Qn].key+" "+It[Qn].value);B(">>"),_t.data.length!==0&&(B("stream"),B(ut(_t.data)),B("endstream"))},Rs=m.__private__.putPage=function(x){var D=x.number,ae=x.data,ve=x.objId,Pe=x.contentsObjId;Yn(ve,!0),B("<</Type /Page"),B("/Parent "+x.rootDictionaryObjId+" 0 R"),B("/Resources "+x.resourceDictionaryObjId+" 0 R"),B("/MediaBox ["+parseFloat(W(x.mediaBox.bottomLeftX))+" "+parseFloat(W(x.mediaBox.bottomLeftY))+" "+W(x.mediaBox.topRightX)+" "+W(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&B("/CropBox ["+W(x.cropBox.bottomLeftX)+" "+W(x.cropBox.bottomLeftY)+" "+W(x.cropBox.topRightX)+" "+W(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&B("/BleedBox ["+W(x.bleedBox.bottomLeftX)+" "+W(x.bleedBox.bottomLeftY)+" "+W(x.bleedBox.topRightX)+" "+W(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&B("/TrimBox ["+W(x.trimBox.bottomLeftX)+" "+W(x.trimBox.bottomLeftY)+" "+W(x.trimBox.topRightX)+" "+W(x.trimBox.topRightY)+"]"),x.artBox!==null&&B("/ArtBox ["+W(x.artBox.bottomLeftX)+" "+W(x.artBox.bottomLeftY)+" "+W(x.artBox.topRightX)+" "+W(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&B("/UserUnit "+x.userUnit),Ut.publish("putPage",{objId:ve,pageContext:wt[D],pageNumber:D,page:ae}),B("/Contents "+Pe+" 0 R"),B(">>"),B("endobj");var Ue=ae.join(`
`);return L===N.ADVANCED&&(Ue+=`
Q`),Yn(Pe,!0),zi({data:Ue,filters:vs(),objectId:Pe}),B("endobj"),ve},So=m.__private__.putPages=function(){var x,D,ae=[];for(x=1;x<=Vt;x++)wt[x].objId=jn(),wt[x].contentsObjId=jn();for(x=1;x<=Vt;x++)ae.push(Rs({number:x,data:le[x],objId:wt[x].objId,contentsObjId:wt[x].contentsObjId,mediaBox:wt[x].mediaBox,cropBox:wt[x].cropBox,bleedBox:wt[x].bleedBox,trimBox:wt[x].trimBox,artBox:wt[x].artBox,userUnit:wt[x].userUnit,rootDictionaryObjId:ki,resourceDictionaryObjId:ps}));Yn(ki,!0),B("<</Type /Pages");var ve="/Kids [";for(D=0;D<Vt;D++)ve+=ae[D]+" 0 R ";B(ve+"]"),B("/Count "+Vt),B(">>"),B("endobj"),Ut.publish("postPutPages")},ll=function(x){Ut.publish("putFont",{font:x,out:B,newObject:Pn,putStream:zi}),x.isAlreadyPutted!==!0&&(x.objectNumber=Pn(),B("<<"),B("/Type /Font"),B("/BaseFont /"+$d(x.postScriptName)),B("/Subtype /Type1"),typeof x.encoding=="string"&&B("/Encoding /"+x.encoding),B("/FirstChar 32"),B("/LastChar 255"),B(">>"),B("endobj"))},cl=function(){for(var x in Qt)Qt.hasOwnProperty(x)&&(g===!1||g===!0&&w.hasOwnProperty(x))&&ll(Qt[x])},ul=function(x){x.objectNumber=Pn();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[W(x.x),W(x.y),W(x.x+x.width),W(x.y+x.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ae=x.pages[1].join(`
`);zi({data:ae,additionalKeyValues:D,objectId:x.objectNumber}),B("endobj")},oa=function(){for(var x in rn)rn.hasOwnProperty(x)&&ul(rn[x])},Yu=function(x,D){var ae,ve=[],Pe=1/(D-1);for(ae=0;ae<1;ae+=Pe)ve.push(ae);if(ve.push(1),x[0].offset!=0){var Ue={offset:0,color:x[0].color};x.unshift(Ue)}if(x[x.length-1].offset!=1){var Qe={offset:1,color:x[x.length-1].color};x.push(Qe)}for(var ut="",_t=0,It=0;It<ve.length;It++){for(ae=ve[It];ae>x[_t+1].offset;)_t++;var Pt=x[_t].offset,Yt=(ae-Pt)/(x[_t+1].offset-Pt),On=x[_t].color,Xn=x[_t+1].color;ut+=ue(Math.round((1-Yt)*On[0]+Yt*Xn[0]).toString(16))+ue(Math.round((1-Yt)*On[1]+Yt*Xn[1]).toString(16))+ue(Math.round((1-Yt)*On[2]+Yt*Xn[2]).toString(16))}return ut.trim()},dl=function(x,D){D||(D=21);var ae=Pn(),ve=Yu(x.colors,D),Pe=[];Pe.push({key:"FunctionType",value:"0"}),Pe.push({key:"Domain",value:"[0.0 1.0]"}),Pe.push({key:"Size",value:"["+D+"]"}),Pe.push({key:"BitsPerSample",value:"8"}),Pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zi({data:ve,additionalKeyValues:Pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),B("endobj"),x.objectNumber=Pn(),B("<< /ShadingType "+x.type),B("/ColorSpace /DeviceRGB");var Ue="/Coords ["+W(parseFloat(x.coords[0]))+" "+W(parseFloat(x.coords[1]))+" ";x.type===2?Ue+=W(parseFloat(x.coords[2]))+" "+W(parseFloat(x.coords[3])):Ue+=W(parseFloat(x.coords[2]))+" "+W(parseFloat(x.coords[3]))+" "+W(parseFloat(x.coords[4]))+" "+W(parseFloat(x.coords[5])),B(Ue+="]"),x.matrix&&B("/Matrix ["+x.matrix.toString()+"]"),B("/Function "+ae+" 0 R"),B("/Extend [true true]"),B(">>"),B("endobj")},Df=function(x,D){var ae=jn(),ve=Pn();D.push({resourcesOid:ae,objectOid:ve}),x.objectNumber=ve;var Pe=[];Pe.push({key:"Type",value:"/Pattern"}),Pe.push({key:"PatternType",value:"1"}),Pe.push({key:"PaintType",value:"1"}),Pe.push({key:"TilingType",value:"1"}),Pe.push({key:"BBox",value:"["+x.boundingBox.map(W).join(" ")+"]"}),Pe.push({key:"XStep",value:W(x.xStep)}),Pe.push({key:"YStep",value:W(x.yStep)}),Pe.push({key:"Resources",value:ae+" 0 R"}),x.matrix&&Pe.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),zi({data:x.stream,additionalKeyValues:Pe,objectId:x.objectNumber}),B("endobj")},fl=function(x){var D;for(D in Zt)Zt.hasOwnProperty(D)&&(Zt[D]instanceof Nu?dl(Zt[D]):Zt[D]instanceof Zd&&Df(Zt[D],x))},Ku=function(x){for(var D in x.objectNumber=Pn(),B("<<"),x)switch(D){case"opacity":B("/ca "+re(x[D]));break;case"stroke-opacity":B("/CA "+re(x[D]))}B(">>"),B("endobj")},Ju=function(){var x;for(x in Dn)Dn.hasOwnProperty(x)&&Ku(Dn[x])},hl=function(){for(var x in B("/XObject <<"),rn)rn.hasOwnProperty(x)&&rn[x].objectNumber>=0&&B("/"+x+" "+rn[x].objectNumber+" 0 R");Ut.publish("putXobjectDict"),B(">>")},Xu=function(){Ur.oid=Pn(),B("<<"),B("/Filter /Standard"),B("/V "+Ur.v),B("/R "+Ur.r),B("/U <"+Ur.toHexString(Ur.U)+">"),B("/O <"+Ur.toHexString(Ur.O)+">"),B("/P "+Ur.P),B(">>"),B("endobj")},Qu=function(){for(var x in B("/Font <<"),Qt)Qt.hasOwnProperty(x)&&(g===!1||g===!0&&w.hasOwnProperty(x))&&B("/"+x+" "+Qt[x].objectNumber+" 0 R");B(">>")},Of=function(){if(Object.keys(Zt).length>0){for(var x in B("/Shading <<"),Zt)Zt.hasOwnProperty(x)&&Zt[x]instanceof Nu&&Zt[x].objectNumber>=0&&B("/"+x+" "+Zt[x].objectNumber+" 0 R");Ut.publish("putShadingPatternDict"),B(">>")}},pl=function(x){if(Object.keys(Zt).length>0){for(var D in B("/Pattern <<"),Zt)Zt.hasOwnProperty(D)&&Zt[D]instanceof m.TilingPattern&&Zt[D].objectNumber>=0&&Zt[D].objectNumber<x&&B("/"+D+" "+Zt[D].objectNumber+" 0 R");Ut.publish("putTilingPatternDict"),B(">>")}},Rf=function(){if(Object.keys(Dn).length>0){var x;for(x in B("/ExtGState <<"),Dn)Dn.hasOwnProperty(x)&&Dn[x].objectNumber>=0&&B("/"+x+" "+Dn[x].objectNumber+" 0 R");Ut.publish("putGStateDict"),B(">>")}},Kn=function(x){Yn(x.resourcesOid,!0),B("<<"),B("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qu(),Of(),pl(x.objectOid),Rf(),hl(),B(">>"),B("endobj")},$c=function(){var x=[];cl(),Ju(),oa(),fl(x),Ut.publish("putResources"),x.forEach(Kn),Kn({resourcesOid:ps,objectOid:Number.MAX_SAFE_INTEGER}),Ut.publish("postPutResources")},Bc=function(){Ut.publish("putAdditionalObjects");for(var x=0;x<ce.length;x++){var D=ce[x];Yn(D.objId,!0),B(D.content),B("endobj")}Ut.publish("postPutAdditionalObjects")},ml=function(x){pn[x.fontName]=pn[x.fontName]||{},pn[x.fontName][x.fontStyle]=x.id},Uc=function(x,D,ae,ve,Pe){var Ue={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:x,fontName:D,fontStyle:ae,encoding:ve,isStandardFont:Pe||!1,metadata:{}};return Ut.publish("addFont",{font:Ue,instance:this}),Qt[Ue.id]=Ue,ml(Ue),Ue.id},Zu=function(x){for(var D=0,ae=Re.length;D<ae;D++){var ve=Uc.call(this,x[D][0],x[D][1],x[D][2],Re[D][3],!0);g===!1&&(w[ve]=!0);var Pe=x[D][0].split("-");ml({id:ve,fontName:Pe[0],fontStyle:Pe[1]||""})}Ut.publish("addFonts",{fonts:Qt,dictionary:pn})},ci=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(ve){var D=ve.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var ae="Error in function "+D.split(`
`)[0].split("<")[0]+": "+ve.message;if(!At.console)throw new Error(ae);At.console.error(ae,ve),At.alert&&alert(ae)}},x.foo.bar=x,x.foo},No=function(x,D){var ae,ve,Pe,Ue,Qe,ut,_t,It,Pt;if(Pe=(D=D||{}).sourceEncoding||"Unicode",Qe=D.outputEncoding,(D.autoencode||Qe)&&Qt[Nt].metadata&&Qt[Nt].metadata[Pe]&&Qt[Nt].metadata[Pe].encoding&&(Ue=Qt[Nt].metadata[Pe].encoding,!Qe&&Qt[Nt].encoding&&(Qe=Qt[Nt].encoding),!Qe&&Ue.codePages&&(Qe=Ue.codePages[0]),typeof Qe=="string"&&(Qe=Ue[Qe]),Qe)){for(_t=!1,ut=[],ae=0,ve=x.length;ae<ve;ae++)(It=Qe[x.charCodeAt(ae)])?ut.push(String.fromCharCode(It)):ut.push(x[ae]),ut[ae].charCodeAt(0)>>8&&(_t=!0);x=ut.join("")}for(ae=x.length;_t===void 0&&ae!==0;)x.charCodeAt(ae-1)>>8&&(_t=!0),ae--;if(!_t)return x;for(ut=D.noBOM?[]:[254,255],ae=0,ve=x.length;ae<ve;ae++){if((Pt=(It=x.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ut.push(Pt),ut.push(It-(Pt<<8))}return String.fromCharCode.apply(void 0,ut)},ui=m.__private__.pdfEscape=m.pdfEscape=function(x,D){return No(x,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gl=m.__private__.beginPage=function(x){le[++Vt]=[],wt[Vt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ed(Vt),de(le[K])},zc=function(x,D){var ae,ve,Pe;switch(n=D||n,typeof x=="string"&&(ae=_(x.toLowerCase()),Array.isArray(ae)&&(ve=ae[0],Pe=ae[1])),Array.isArray(x)&&(ve=x[0]*et,Pe=x[1]*et),isNaN(ve)&&(ve=i[0],Pe=i[1]),(ve>14400||Pe>14400)&&(Mn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Pe=Math.min(14400,Pe)),i=[ve,Pe],n.substr(0,1)){case"l":Pe>ve&&(i=[Pe,ve]);break;case"p":ve>Pe&&(i=[Pe,ve])}gl(i),ad(Vc),B(Jn),_l!==0&&B(_l+" J"),Ir!==0&&B(Ir+" j"),Ut.publish("addPage",{pageNumber:Vt})},qc=function(x){x>0&&x<=Vt&&(le.splice(x,1),wt.splice(x,1),Vt--,K>Vt&&(K=Vt),this.setPage(K))},ed=function(x){x>0&&x<=Vt&&(K=x)},td=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return le.length-1},vl=function(x,D,ae){var ve,Pe=void 0;return ae=ae||{},x=x!==void 0?x:Qt[Nt].fontName,D=D!==void 0?D:Qt[Nt].fontStyle,ve=x.toLowerCase(),pn[ve]!==void 0&&pn[ve][D]!==void 0?Pe=pn[ve][D]:pn[x]!==void 0&&pn[x][D]!==void 0?Pe=pn[x][D]:ae.disableWarning===!1&&Mn.warn("Unable to look up font label for font '"+x+"', '"+D+"'. Refer to getFontList() for available fonts."),Pe||ae.noFallback||(Pe=pn.times[D])==null&&(Pe=pn.times.normal),Pe},Wc=m.__private__.putInfo=function(){var x=Pn(),D=function(ve){return ve};for(var ae in p!==null&&(D=Ur.encryptor(x,0)),B("<<"),B("/Producer ("+ui(D("jsPDF "+Ct.version))+")"),ft)ft.hasOwnProperty(ae)&&ft[ae]&&B("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+ui(D(ft[ae]))+")");B("/CreationDate ("+ui(D(pe))+")"),B(">>"),B("endobj")},Fs=m.__private__.putCatalog=function(x){var D=(x=x||{}).rootDictionaryObjId||ki;switch(Pn(),B("<<"),B("/Type /Catalog"),B("/Pages "+D+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":B("/OpenAction [3 0 R /FitH null]");break;case"fullheight":B("/OpenAction [3 0 R /FitV null]");break;case"fullpage":B("/OpenAction [3 0 R /Fit]");break;case"original":B("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+be;ae.substr(ae.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&B("/OpenAction [3 0 R /XYZ null null "+re(be)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":B("/PageLayout /OneColumn");break;case"single":B("/PageLayout /SinglePage");break;case"two":case"twoleft":B("/PageLayout /TwoColumnLeft");break;case"tworight":B("/PageLayout /TwoColumnRight")}Je&&B("/PageMode /"+Je),Ut.publish("putCatalog"),B(">>"),B("endobj")},nd=m.__private__.putTrailer=function(){B("trailer"),B("<<"),B("/Size "+(he+1)),B("/Root "+he+" 0 R"),B("/Info "+(he-1)+" 0 R"),p!==null&&B("/Encrypt "+Ur.oid+" 0 R"),B("/ID [ <"+ge+"> <"+ge+"> ]"),B(">>")},rd=m.__private__.putHeader=function(){B("%PDF-"+S),B("%ºß¬à")},Ff=m.__private__.putXRef=function(){var x="0000000000";B("xref"),B("0 "+(he+1)),B("0000000000 65535 f ");for(var D=1;D<=he;D++)typeof je[D]=="function"?B((x+je[D]()).slice(-10)+" 00000 n "):je[D]!==void 0?B((x+je[D]).slice(-10)+" 00000 n "):B("0000000000 00000 n ")},$s=m.__private__.buildDocument=function(){Me(),de(Ce),Ut.publish("buildDocument"),rd(),So(),Bc(),$c(),p!==null&&Xu(),Wc(),Fs();var x=ne;return Ff(),nd(),B("startxref"),B(""+x),B("%%EOF"),de(le[K]),Ce.join(`
`)},ko=m.__private__.getBlob=function(x){return new Blob([Fe(x)],{type:"application/pdf"})},Eo=m.output=m.__private__.output=ci(function(x,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",x){case void 0:return $s();case"save":m.save(D.filename);break;case"arraybuffer":return Fe($s());case"blob":return ko($s());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(ko($s()))||void 0;Mn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",ve=$s();try{ae=gy(ve)}catch{ae=gy(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+D.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var Pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(Pe=D.pdfObjectUrl,Ue="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pe+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",ut=At.open();return ut!==null&&ut.document.write(Qe),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',It=At.open();if(It!==null){It.document.write(_t);var Pt=this;It.document.documentElement.querySelector("#pdfViewer").onload=function(){It.document.title=D.filename,It.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return It}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',On=At.open();if(On!==null&&(On.document.write(Yt),On.document.title=D.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",D);default:return null}}),Hc=function(x){return Array.isArray(ur)===!0&&ur.indexOf(x)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=Hc("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var Ur=null;Le(),$();var $f=function(x){return p!==null?Ur.encryptor(x,0):function(D){return D}},id=m.__private__.getPageInfo=m.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[x].objId,pageNumber:x,pageContext:wt[x]}},Lt=m.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in wt)if(wt[D].objId===x)break;return id(D)},Bf=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:wt[K].objId,pageNumber:K,pageContext:wt[K]}};m.addPage=function(){return zc.apply(this,arguments),this},m.setPage=function(){return ed.apply(this,arguments),de.call(this,le[K]),this},m.insertPage=function(x){return this.addPage(),this.movePage(K,x),this},m.movePage=function(x,D){var ae,ve;if(x>D){ae=le[x],ve=wt[x];for(var Pe=x;Pe>D;Pe--)le[Pe]=le[Pe-1],wt[Pe]=wt[Pe-1];le[D]=ae,wt[D]=ve,this.setPage(D)}else if(x<D){ae=le[x],ve=wt[x];for(var Ue=x;Ue<D;Ue++)le[Ue]=le[Ue+1],wt[Ue]=wt[Ue+1];le[D]=ae,wt[D]=ve,this.setPage(D)}return this},m.deletePage=function(){return qc.apply(this,arguments),this},m.__private__.text=m.text=function(x,D,ae,ve,Pe){var Ue,Qe,ut,_t,It,Pt,Yt,On,Xn,Qn=(ve=ve||{}).scope||this;if(typeof x=="number"&&typeof D=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Er=ae;ae=D,D=x,x=Er}if(arguments[3]instanceof ht?(I("The transform parameter of text() with a Matrix value"),Xn=Pe):(ut=arguments[4],_t=arguments[5],Nn(Yt=arguments[3])==="object"&&Yt!==null||(typeof ut=="string"&&(_t=ut,ut=null),typeof Yt=="string"&&(_t=Yt,Yt=null),typeof Yt=="number"&&(ut=Yt,Yt=null),ve={flags:Yt,angle:ut,align:_t})),isNaN(D)||isNaN(ae)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Qn;var jr="",Hi=!1,Tn=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:jo,Gi=Qn.internal.scaleFactor;function qa(gn){return gn=gn.split("	").join(Array(ve.TabLen||9).join(" ")),ui(gn,Yt)}function kl(gn){for(var Cn,rr=gn.concat(),vr=[],Ki=rr.length;Ki--;)typeof(Cn=rr.shift())=="string"?vr.push(Cn):Array.isArray(gn)&&(Cn.length===1||Cn[1]===void 0&&Cn[2]===void 0)?vr.push(Cn[0]):vr.push([Cn[0],Cn[1],Cn[2]]);return vr}function El(gn,Cn){var rr;if(typeof gn=="string")rr=Cn(gn)[0];else if(Array.isArray(gn)){for(var vr,Ki,Ji=gn.concat(),da=[],Zc=Ji.length;Zc--;)typeof(vr=Ji.shift())=="string"?da.push(Cn(vr)[0]):Array.isArray(vr)&&typeof vr[0]=="string"&&(Ki=Cn(vr[0],vr[1],vr[2]),da.push([Ki[0],Ki[1],Ki[2]]));rr=da}return rr}var jl=!1,Xc=!0;if(typeof x=="string")jl=!0;else if(Array.isArray(x)){var Qc=x.concat();Qe=[];for(var Cl,Or=Qc.length;Or--;)(typeof(Cl=Qc.shift())!="string"||Array.isArray(Cl)&&typeof Cl[0]!="string")&&(Xc=!1);jl=Xc}if(jl===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var ws=qe/Qn.internal.scaleFactor,Al=ws*(Tn-1);switch(ve.baseline){case"bottom":ae-=Al;break;case"top":ae+=ws-Al;break;case"hanging":ae+=ws-2*Al;break;case"middle":ae+=ws/2-Al}if((Pt=ve.maxWidth||0)>0&&(typeof x=="string"?x=Qn.splitTextToSize(x,Pt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(gn,Cn){return gn.concat(Qn.splitTextToSize(Cn,Pt))},[]))),Ue={text:x,x:D,y:ae,options:ve,mutex:{pdfEscape:ui,activeFontKey:Nt,fonts:Qt,activeFontSize:qe}},Ut.publish("preProcessText",Ue),x=Ue.text,ut=(ve=Ue.options).angle,!(Xn instanceof ht)&&ut&&typeof ut=="number"){ut*=Math.PI/180,ve.rotationDirection===0&&(ut=-ut),L===N.ADVANCED&&(ut=-ut);var Ll=Math.cos(ut),Ao=Math.sin(ut);Xn=new ht(Ll,Ao,-Ao,Ll,0,0)}else ut&&ut instanceof ht&&(Xn=ut);L!==N.ADVANCED||Xn||(Xn=nr),(It=ve.charSpace||Co)!==void 0&&(jr+=W(F(It))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=ve.horizontalScale)!==void 0&&(jr+=W(100*On)+` Tz
`),ve.lang;var Qr=-1,qs=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Wa=Qn.internal.getCurrentPageInfo().pageContext;switch(qs){case 0:case!1:case"fill":Qr=0;break;case 1:case!0:case"stroke":Qr=1;break;case 2:case"fillThenStroke":Qr=2;break;case 3:case"invisible":Qr=3;break;case 4:case"fillAndAddForClipping":Qr=4;break;case 5:case"strokeAndAddPathForClipping":Qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qr=6;break;case 7:case"addToPathForClipping":Qr=7}var fd=Wa.usedRenderingMode!==void 0?Wa.usedRenderingMode:-1;Qr!==-1?jr+=Qr+` Tr
`:fd!==-1&&(jr+=`0 Tr
`),Qr!==-1&&(Wa.usedRenderingMode=Qr),_t=ve.align||"left";var Vi,Pl=qe*Tn,la=Qn.internal.pageSize.getWidth(),di=Qt[Nt];It=ve.charSpace||Co,Pt=ve.maxWidth||0,Yt=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var ca=[],Lo=function(gn){return Qn.getStringUnitWidth(gn,{font:di,charSpace:It,fontSize:qe,doKerning:!1})*qe/Gi};if(Object.prototype.toString.call(x)==="[object Array]"){var fi;Qe=kl(x),_t!=="left"&&(Vi=Qe.map(Lo));var Zr,Ha=0;if(_t==="right"){D-=Vi[0],x=[],Or=Qe.length;for(var ua=0;ua<Or;ua++)ua===0?(Zr=qi(D),fi=Xr(ae)):(Zr=F(Ha-Vi[ua]),fi=-Pl),x.push([Qe[ua],Zr,fi]),Ha=Vi[ua]}else if(_t==="center"){D-=Vi[0]/2,x=[],Or=Qe.length;for(var hi=0;hi<Or;hi++)hi===0?(Zr=qi(D),fi=Xr(ae)):(Zr=F((Ha-Vi[hi])/2),fi=-Pl),x.push([Qe[hi],Zr,fi]),Ha=Vi[hi]}else if(_t==="left"){x=[],Or=Qe.length;for(var Se=0;Se<Or;Se++)x.push(Qe[Se])}else if(_t==="justify"&&di.encoding==="Identity-H"){x=[],Or=Qe.length,Pt=Pt!==0?Pt:la;for(var ze=0,Ie=0;Ie<Or;Ie++)if(fi=Ie===0?Xr(ae):-Pl,Zr=Ie===0?qi(D):ze,Ie<Or-1){var dt=F((Pt-Vi[Ie])/(Qe[Ie].split(" ").length-1)),xt=Qe[Ie].split(" ");x.push([xt[0]+" ",Zr,fi]),ze=0;for(var Ot=1;Ot<xt.length;Ot++){var Rn=(Lo(xt[Ot-1]+" "+xt[Ot])-Lo(xt[Ot]))*Gi+dt;Ot==xt.length-1?x.push([xt[Ot],Rn,0]):x.push([xt[Ot]+" ",Rn,0]),ze-=Rn}}else x.push([Qe[Ie],Zr,fi]);x.push(["",ze,0])}else{if(_t!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Or=Qe.length,Pt=Pt!==0?Pt:la,Ie=0;Ie<Or;Ie++)fi=Ie===0?Xr(ae):-Pl,Zr=Ie===0?qi(D):0,Ie<Or-1?ca.push(W(F((Pt-Vi[Ie])/(Qe[Ie].split(" ").length-1)))):ca.push(0),x.push([Qe[Ie],Zr,fi])}}var dn=typeof ve.R2L=="boolean"?ve.R2L:Ke;dn===!0&&(x=El(x,function(gn,Cn,rr){return[gn.split("").reverse().join(""),Cn,rr]})),Ue={text:x,x:D,y:ae,options:ve,mutex:{pdfEscape:ui,activeFontKey:Nt,fonts:Qt,activeFontSize:qe}},Ut.publish("postProcessText",Ue),x=Ue.text,Hi=Ue.mutex.isHex||!1;var Po=Qt[Nt].encoding;Po!=="WinAnsiEncoding"&&Po!=="StandardEncoding"||(x=El(x,function(gn,Cn,rr){return[qa(gn),Cn,rr]})),Qe=kl(x),x=[];for(var To,Cr,xs,Mo=0,bs=1,Ws=Array.isArray(Qe[0])?bs:Mo,_s="",en=function(gn,Cn,rr){var vr="";return rr instanceof ht?(rr=typeof ve.angle=="number"?Vn(rr,new ht(1,0,0,1,gn,Cn)):Vn(new ht(1,0,0,1,gn,Cn),rr),L===N.ADVANCED&&(rr=Vn(new ht(1,0,0,-1,0,0),rr)),vr=rr.join(" ")+` Tm
`):vr=W(gn)+" "+W(Cn)+` Td
`,vr},Yi=0;Yi<Qe.length;Yi++){switch(_s="",Ws){case bs:xs=(Hi?"<":"(")+Qe[Yi][0]+(Hi?">":")"),To=parseFloat(Qe[Yi][1]),Cr=parseFloat(Qe[Yi][2]);break;case Mo:xs=(Hi?"<":"(")+Qe[Yi]+(Hi?">":")"),To=qi(D),Cr=Xr(ae)}ca!==void 0&&ca[Yi]!==void 0&&(_s=ca[Yi]+` Tw
`),Yi===0?x.push(_s+en(To,Cr,Xn)+xs):Ws===Mo?x.push(_s+xs):Ws===bs&&x.push(_s+en(To,Cr,Xn)+xs)}x=Ws===Mo?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Ei=`BT
/`;return Ei+=Nt+" "+qe+` Tf
`,Ei+=W(qe*Tn)+` TL
`,Ei+=Ua+`
`,Ei+=jr,Ei+=x,B(Ei+="ET"),w[Nt]=!0,Qn};var Uf=m.__private__.clip=m.clip=function(x){return B(x==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Uf("evenodd")},m.__private__.discardPath=m.discardPath=function(){return B("n"),this};var Bs=m.__private__.isValidStyle=function(x){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(D=!0),D};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(x){return Bs(x)&&(f=x),this};var sd=m.__private__.getStyle=m.getStyle=function(x){var D=f;switch(x){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=x}return D},yl=m.close=function(){return B("h"),this};m.stroke=function(){return B("S"),this},m.fill=function(x){return wl("f",x),this},m.fillEvenOdd=function(x){return wl("f*",x),this},m.fillStroke=function(x){return wl("B",x),this},m.fillStrokeEvenOdd=function(x){return wl("B*",x),this};var wl=function(x,D){Nn(D)==="object"?qf(D,x):B(x)},Gc=function(x){x===null||L===N.ADVANCED&&x===void 0||(x=sd(x),B(x))};function zf(x,D,ae,ve,Pe){var Ue=new Zd(D||this.boundingBox,ae||this.xStep,ve||this.yStep,this.gState,Pe||this.matrix);Ue.stream=this.stream;var Qe=x+"$$"+this.cloneIndex+++"$$";return En(Qe,Ue),Ue}var qf=function(x,D){var ae=aa[x.key],ve=Zt[ae];if(ve instanceof Nu)B("q"),B(Wf(D)),ve.gState&&m.setGState(ve.gState),B(x.matrix.toString()+" cm"),B("/"+ae+" sh"),B("Q");else if(ve instanceof Zd){var Pe=new ht(1,0,0,-1,0,zs());x.matrix&&(Pe=Pe.multiply(x.matrix||nr),ae=zf.call(ve,x.key,x.boundingBox,x.xStep,x.yStep,Pe).id),B("q"),B("/Pattern cs"),B("/"+ae+" scn"),ve.gState&&m.setGState(ve.gState),B(D),B("Q")}},Wf=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mn=m.moveTo=function(x,D){return B(W(F(x))+" "+W(Y(D))+" m"),this},sn=m.lineTo=function(x,D){return B(W(F(x))+" "+W(Y(D))+" l"),this},Ba=m.curveTo=function(x,D,ae,ve,Pe,Ue){return B([W(F(x)),W(Y(D)),W(F(ae)),W(Y(ve)),W(F(Pe)),W(Y(Ue)),"c"].join(" ")),this};m.__private__.line=m.line=function(x,D,ae,ve,Pe){if(isNaN(x)||isNaN(D)||isNaN(ae)||isNaN(ve)||!Bs(Pe))throw new Error("Invalid arguments passed to jsPDF.line");return L===N.COMPAT?this.lines([[ae-x,ve-D]],x,D,[1,1],Pe||"S"):this.lines([[ae-x,ve-D]],x,D,[1,1]).stroke()},m.__private__.lines=m.lines=function(x,D,ae,ve,Pe,Ue){var Qe,ut,_t,It,Pt,Yt,On,Xn,Qn,Er,jr,Hi;if(typeof x=="number"&&(Hi=ae,ae=D,D=x,x=Hi),ve=ve||[1,1],Ue=Ue||!1,isNaN(D)||isNaN(ae)||!Array.isArray(x)||!Array.isArray(ve)||!Bs(Pe)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mn(D,ae),Qe=ve[0],ut=ve[1],It=x.length,Er=D,jr=ae,_t=0;_t<It;_t++)(Pt=x[_t]).length===2?(Er=Pt[0]*Qe+Er,jr=Pt[1]*ut+jr,sn(Er,jr)):(Yt=Pt[0]*Qe+Er,On=Pt[1]*ut+jr,Xn=Pt[2]*Qe+Er,Qn=Pt[3]*ut+jr,Er=Pt[4]*Qe+Er,jr=Pt[5]*ut+jr,Ba(Yt,On,Xn,Qn,Er,jr));return Ue&&yl(),Gc(Pe),this},m.path=function(x){for(var D=0;D<x.length;D++){var ae=x[D],ve=ae.c;switch(ae.op){case"m":mn(ve[0],ve[1]);break;case"l":sn(ve[0],ve[1]);break;case"c":Ba.apply(this,ve);break;case"h":yl()}}return this},m.__private__.rect=m.rect=function(x,D,ae,ve,Pe){if(isNaN(x)||isNaN(D)||isNaN(ae)||isNaN(ve)||!Bs(Pe))throw new Error("Invalid arguments passed to jsPDF.rect");return L===N.COMPAT&&(ve=-ve),B([W(F(x)),W(Y(D)),W(F(ae)),W(F(ve)),"re"].join(" ")),Gc(Pe),this},m.__private__.triangle=m.triangle=function(x,D,ae,ve,Pe,Ue,Qe){if(isNaN(x)||isNaN(D)||isNaN(ae)||isNaN(ve)||isNaN(Pe)||isNaN(Ue)||!Bs(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-x,ve-D],[Pe-ae,Ue-ve],[x-Pe,D-Ue]],x,D,[1,1],Qe,!0),this},m.__private__.roundedRect=m.roundedRect=function(x,D,ae,ve,Pe,Ue,Qe){if(isNaN(x)||isNaN(D)||isNaN(ae)||isNaN(ve)||isNaN(Pe)||isNaN(Ue)||!Bs(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return Pe=Math.min(Pe,.5*ae),Ue=Math.min(Ue,.5*ve),this.lines([[ae-2*Pe,0],[Pe*ut,0,Pe,Ue-Ue*ut,Pe,Ue],[0,ve-2*Ue],[0,Ue*ut,-Pe*ut,Ue,-Pe,Ue],[2*Pe-ae,0],[-Pe*ut,0,-Pe,-Ue*ut,-Pe,-Ue],[0,2*Ue-ve],[0,-Ue*ut,Pe*ut,-Ue,Pe,-Ue]],x+Pe,D,[1,1],Qe,!0),this},m.__private__.ellipse=m.ellipse=function(x,D,ae,ve,Pe){if(isNaN(x)||isNaN(D)||isNaN(ae)||isNaN(ve)||!Bs(Pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*ae,Qe=4/3*(Math.SQRT2-1)*ve;return mn(x+ae,D),Ba(x+ae,D-Qe,x+Ue,D-ve,x,D-ve),Ba(x-Ue,D-ve,x-ae,D-Qe,x-ae,D),Ba(x-ae,D+Qe,x-Ue,D+ve,x,D+ve),Ba(x+Ue,D+ve,x+ae,D+Qe,x+ae,D),Gc(Pe),this},m.__private__.circle=m.circle=function(x,D,ae,ve){if(isNaN(x)||isNaN(D)||isNaN(ae)||!Bs(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,D,ae,ae,ve)},m.setFont=function(x,D,ae){return ae&&(D=ee(D,ae)),Nt=vl(x,D,{disableWarning:!1}),this};var Hf=m.__private__.getFont=m.getFont=function(){return Qt[vl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var x,D,ae={};for(x in pn)if(pn.hasOwnProperty(x))for(D in ae[x]=[],pn[x])pn[x].hasOwnProperty(D)&&ae[x].push(D);return ae},m.addFont=function(x,D,ae,ve,Pe){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?Pe=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(ae=ee(ae,ve)),Pe=Pe||"Identity-H",Uc.call(this,x,D,ae,Pe)};var jo,Vc=e.lineWidth||.200025,xl=m.__private__.getLineWidth=m.getLineWidth=function(){return Vc},ad=m.__private__.setLineWidth=m.setLineWidth=function(x){return Vc=x,B(W(F(x))+" w"),this};m.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(x,D){if(x=x||[],D=D||0,isNaN(D)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(ae){return W(F(ae))}).join(" "),D=W(F(D)),B("["+x+"] "+D+" d"),this};var Yc=m.__private__.getLineHeight=m.getLineHeight=function(){return qe*jo};m.__private__.getLineHeight=m.getLineHeight=function(){return qe*jo};var od=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(jo=x),this},dr=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return jo};od(e.lineHeight);var qi=m.__private__.getHorizontalCoordinate=function(x){return F(x)},Xr=m.__private__.getVerticalCoordinate=function(x){return L===N.ADVANCED?x:wt[K].mediaBox.topRightY-wt[K].mediaBox.bottomLeftY-F(x)},ld=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(x){return W(qi(x))},Us=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(x){return W(Xr(x))},Jn=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ms(Jn)},m.__private__.setStrokeColor=m.setDrawColor=function(x,D,ae,ve){return Jn=gs({ch1:x,ch2:D,ch3:ae,ch4:ve,pdfColorType:"draw",precision:2}),B(Jn),this};var bl=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ms(bl)},m.__private__.setFillColor=m.setFillColor=function(x,D,ae,ve){return bl=gs({ch1:x,ch2:D,ch3:ae,ch4:ve,pdfColorType:"fill",precision:2}),B(bl),this};var Ua=e.textColor||"0 g",cd=m.__private__.getTextColor=m.getTextColor=function(){return ms(Ua)};m.__private__.setTextColor=m.setTextColor=function(x,D,ae,ve){return Ua=gs({ch1:x,ch2:D,ch3:ae,ch4:ve,pdfColorType:"text",precision:3}),this};var Co=e.charSpace,ud=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Co||0)};m.__private__.setCharSpace=m.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Co=x,this};var _l=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(x){var D=m.CapJoinStyles[x];if(D===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=D,B(D+" J"),this};var Ir=0;m.__private__.setLineJoin=m.setLineJoin=function(x){var D=m.CapJoinStyles[x];if(D===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ir=D,B(D+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return B(W(F(x))+" M"),this},m.GState=eg,m.setGState=function(x){(x=typeof x=="string"?Dn[li[x]]:dd(null,x)).equals(_n)||(B("/"+x.id+" gs"),_n=x)};var dd=function(x,D){if(!x||!li[x]){var ae=!1;for(var ve in Dn)if(Dn.hasOwnProperty(ve)&&Dn[ve].equals(D)){ae=!0;break}if(ae)D=Dn[ve];else{var Pe="GS"+(Object.keys(Dn).length+1).toString(10);Dn[Pe]=D,D.id=Pe}return x&&(li[x]=D.id),Ut.publish("addGState",D),D}};m.addGState=function(x,D){return dd(x,D),this},m.saveGraphicsState=function(){return B("q"),oi.push({key:Nt,size:qe,color:Ua}),this},m.restoreGraphicsState=function(){B("Q");var x=oi.pop();return Nt=x.key,qe=x.size,Ua=x.color,_n=null,this},m.setCurrentTransformationMatrix=function(x){return B(x.toString()+" cm"),this},m.comment=function(x){return B("#"+x),this};var Dr=function(x,D){var ae=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ue){isNaN(Ue)||(ae=parseFloat(Ue))}});var ve=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(Ue){isNaN(Ue)||(ve=parseFloat(Ue))}});var Pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pe},set:function(Ue){Pe=Ue.toString()}}),this},Kc=function(x,D,ae,ve){Dr.call(this,x,D),this.type="rect";var Pe=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pe},set:function(Qe){isNaN(Qe)||(Pe=parseFloat(Qe))}});var Ue=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function(Qe){isNaN(Qe)||(Ue=parseFloat(Qe))}}),this},Sl=function(){this.page=Vt,this.currentPage=K,this.pages=le.slice(0),this.pagesContext=wt.slice(0),this.x=bn,this.y=Bt,this.matrix=Tr,this.width=un(K),this.height=zs(K),this.outputDestination=Ne,this.id="",this.objectNumber=-1};Sl.prototype.restore=function(){Vt=this.page,K=this.currentPage,wt=this.pagesContext,le=this.pages,bn=this.x,Bt=this.y,Tr=this.matrix,Wi(K,this.width),Jc(K,this.height),Ne=this.outputDestination};var ys=function(x,D,ae,ve,Pe){Mr.push(new Sl),Vt=K=0,le=[],bn=x,Bt=D,Tr=Pe,gl([ae,ve])},Nl=function(x){if(tr[x])Mr.pop().restore();else{var D=new Sl,ae="Xo"+(Object.keys(rn).length+1).toString(10);D.id=ae,tr[x]=ae,rn[ae]=D,Ut.publish("addFormObject",D),Mr.pop().restore()}};for(var za in m.beginFormObject=function(x,D,ae,ve,Pe){return ys(x,D,ae,ve,Pe),this},m.endFormObject=function(x){return Nl(x),this},m.doFormObject=function(x,D){var ae=rn[tr[x]];return B("q"),B(D.toString()+" cm"),B("/"+ae.id+" Do"),B("Q"),this},m.getFormObject=function(x){var D=rn[tr[x]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},m.save=function(x,D){return x=x||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(bu(ko($s()),x),typeof bu.unload=="function"&&At.setTimeout&&setTimeout(bu.unload,911),this):new Promise(function(ae,ve){try{var Pe=bu(ko($s()),x);typeof bu.unload=="function"&&At.setTimeout&&setTimeout(bu.unload,911),ae(Pe)}catch(Ue){ve(Ue.message)}})},Ct.API)Ct.API.hasOwnProperty(za)&&(za==="events"&&Ct.API.events.length?function(x,D){var ae,ve,Pe;for(Pe=D.length-1;Pe!==-1;Pe--)ae=D[Pe][0],ve=D[Pe][1],x.subscribe.apply(x,[ae].concat(typeof ve=="function"?[ve]:ve))}(Ut,Ct.API.events):m[za]=Ct.API[za]);var un=m.getPageWidth=function(x){return(wt[x=x||K].mediaBox.topRightX-wt[x].mediaBox.bottomLeftX)/et},Wi=m.setPageWidth=function(x,D){wt[x].mediaBox.topRightX=D*et+wt[x].mediaBox.bottomLeftX},zs=m.getPageHeight=function(x){return(wt[x=x||K].mediaBox.topRightY-wt[x].mediaBox.bottomLeftY)/et},Jc=m.setPageHeight=function(x,D){wt[x].mediaBox.topRightY=D*et+wt[x].mediaBox.bottomLeftY};return m.internal={pdfEscape:ui,getStyle:sd,getFont:Hf,getFontSize:$e,getCharSpace:ud,getTextColor:cd,getLineHeight:Yc,getLineHeightFactor:dr,getLineWidth:xl,write:ke,getHorizontalCoordinate:qi,getVerticalCoordinate:Xr,getCoordinateString:ld,getVerticalCoordinateString:Us,collections:{},newObject:Pn,newAdditionalObject:Ui,newObjectDeferred:jn,newObjectDeferredBegin:Yn,getFilters:vs,putStream:zi,events:Ut,scaleFactor:et,pageSize:{getWidth:function(){return un(K)},setWidth:function(x){Wi(K,x)},getHeight:function(){return zs(K)},setHeight:function(x){Jc(K,x)}},encryptionOptions:p,encryption:Ur,getEncryptor:$f,output:Eo,getNumberOfPages:td,pages:le,out:B,f2:re,f3:P,getPageInfo:id,getPageInfoByObjId:Lt,getCurrentPageInfo:Bf,getPDFVersion:k,Point:Dr,Rectangle:Kc,Matrix:ht,hasHotfix:Hc},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return un(K)},set:function(x){Wi(K,x)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return zs(K)},set:function(x){Jc(K,x)},enumerable:!0,configurable:!0}),Zu.call(m,Re),Nt="F1",zc(i,n),Ut.publish("initialized"),m}Fd.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Fd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fd.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Fd.prototype.processOwnerPassword=function(e,t){return yy(vy(t).substr(0,5),e)},Fd.prototype.encryptor=function(e,t){var n=vy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return yy(n,r)}},eg.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Nn(e)!==Nn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Ct.API={events:[]},Ct.version="3.0.1";var pr=Ct.API,Q5=1,Vu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Od=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rt=function(e){return e.toFixed(2)},ec=function(e){return e.toFixed(5)};pr.__acroform__={};var fs=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},$_=function(e){return e*Q5},so=function(e){var t=new A6,n=vt.internal.getHeight(e)||0,r=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Rt(r)),Number(Rt(n))],t},dB=pr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},fB=pr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},hB=pr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},_r=pr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hB(e,t-1)},Sr=pr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return dB(e,t-1)},Nr=pr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fB(e,t-1)},pB=pr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Rt(c.lowerLeft_X)),Number(Rt(c.lowerLeft_Y)),Number(Rt(c.upperRight_X)),Number(Rt(c.upperRight_Y))]},mB=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=wy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Rt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=so(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},wy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(P){return P.split(`
`)}):i.map(function(P){return[P]});var s=n,a=vt.internal.getHeight(e)||0;a=a<0?-a:a;var l=vt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,F,V){if(P+1<i.length){var Y=F+" "+i[P+1][0];return Um(Y,e,V).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var f,p,g=Um("3",e,s).height,w=e.multiline?a-s:(a-g)/2,m=w+=2,S=0,k=0,C=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Um(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var _="",N=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var R=!1;if(i[L].length!==1&&C!==i[L].length-1){if((g+2)*(N+2)+2>a)continue e;_+=i[L][C],R=!0,k=L,L--}else{_=(_+=i[L][C]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var J=parseInt(L),ee=c(J,_,s),W=L>=i.length-1;if(ee&&!W){_+=" ",C=0;continue}if(ee||W){if(W)k=J;else if(e.multiline&&(g+2)*(N+2)+2>a)continue e}else{if(!e.multiline||(g+2)*(N+2)+2>a)continue e;k=J}}for(var I="",Z=S;Z<=k;Z++){var re=i[Z];if(e.multiline){if(Z===k){I+=re[C]+" ",C=(C+1)%re.length;continue}if(Z===S){I+=re[re.length-1]+" ";continue}}I+=re[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,p=Um(I,e,s).width,e.textAlign){case"right":f=l-p-2;break;case"center":f=(l-p)/2;break;case"left":default:f=2}t+=Rt(f)+" "+Rt(m)+` Td
`,t+="("+Vu(I)+`) Tj
`,t+=-Rt(f)+` 0 Td
`,m=-(s+2),p=0,S=R?k:k+1,N++,_=""}break}return r.text=t,r.fontSize=s,r},Um=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},gB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vB=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},yB=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Nn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},wB=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Fa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(gB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Q5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new L6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&vB(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],f=l.Rect;if(l.Rect&&(l.Rect=pB(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=vt.createDefaultAppearanceStream(l),Nn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=mB(l);c.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var g="";for(var w in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(w)){var m=l.appearanceStreamContent[w];if(g+="/"+w+" ",g+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var S=m[a];typeof S=="function"&&(S=S.call(i,l)),g+="/"+a+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=m)=="function"&&(S=S.call(i,l)),g+="/"+a+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&yB(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},C6=pr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Nn(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Vu(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ov=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Vu(r(e))+")"},fo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fo.prototype.toString=function(){return this.objId+" 0 R"},fo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:C6(i,this.objId,this.scope)}):i instanceof fo?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var A6=function(){fo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};fs(A6,fo);var L6=function(){fo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Vu(n(e))+")"}},set:function(n){e=n}})};fs(L6,fo);var Fa=function e(){fo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!_r(t,3)},set:function(_){_?this.F=Sr(t,3):this.F=Nr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');n=_}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(_){r=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(_){r[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(_){r[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(_){r[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(_){r[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof tg)return;s="FieldObject"+e.FieldNum++}var _=function(N){return N};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Vu(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Q5:f},set:function(_){f=_}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(_){p=_}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof tg||this instanceof Iu))return Ov(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=_}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Yr?w:Ov(w,this.objId,this.scope)},set:function(_){_=_.toString(),w=this instanceof Yr?_:_.substr(0,1)==="("?Od(_.substr(1,_.length-2)):Od(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr?Od(w.substr(1,w.length-1)):w},set:function(_){_=_.toString(),w=this instanceof Yr?"/"+_:_}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yr?m:Ov(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof Yr?_:_.substr(0,1)==="("?Od(_.substr(1,_.length-2)):Od(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr?Od(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof Yr?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(_){_=!!_,k=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(_){S=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,1)},set:function(_){_?this.Ff=Sr(this.Ff,1):this.Ff=Nr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,2)},set:function(_){_?this.Ff=Sr(this.Ff,2):this.Ff=Nr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,3)},set:function(_){_?this.Ff=Sr(this.Ff,3):this.Ff=Nr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');C=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(C){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};fs(Fa,fo);var cf=function(){Fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return C6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var c,f=[];c=a.exec(s);)f.push(c[l]);return f}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,18)},set:function(n){n?this.Ff=Sr(this.Ff,18):this.Ff=Nr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Sr(this.Ff,19):this.Ff=Nr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,20)},set:function(n){n?(this.Ff=Sr(this.Ff,20),t.sort()):this.Ff=Nr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,22)},set:function(n){n?this.Ff=Sr(this.Ff,22):this.Ff=Nr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,23)},set:function(n){n?this.Ff=Sr(this.Ff,23):this.Ff=Nr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,27)},set:function(n){n?this.Ff=Sr(this.Ff,27):this.Ff=Nr(this.Ff,27)}}),this.hasAppearanceStream=!1};fs(cf,Fa);var uf=function(){cf.call(this),this.fontName="helvetica",this.combo=!1};fs(uf,cf);var df=function(){uf.call(this),this.combo=!0};fs(df,uf);var d0=function(){df.call(this),this.edit=!0};fs(d0,df);var Yr=function(){Fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,15)},set:function(n){n?this.Ff=Sr(this.Ff,15):this.Ff=Nr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,16)},set:function(n){n?this.Ff=Sr(this.Ff,16):this.Ff=Nr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,17)},set:function(n){n?this.Ff=Sr(this.Ff,17):this.Ff=Nr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,26)},set:function(n){n?this.Ff=Sr(this.Ff,26):this.Ff=Nr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Vu(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Nn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};fs(Yr,Fa);var f0=function(){Yr.call(this),this.pushButton=!0};fs(f0,Yr);var ff=function(){Yr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};fs(ff,Yr);var tg=function(){var e,t;Fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Vu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Nn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fs(tg,Fa),ff.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ff.prototype.createOption=function(e){var t=new tg;return t.Parent=this,t.optionName=e,this.Kids.push(t),xB.call(this.scope,t),t};var h0=function(){Yr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};fs(h0,Yr);var Iu=function(){Fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,13)},set:function(t){t?this.Ff=Sr(this.Ff,13):this.Ff=Nr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,21)},set:function(t){t?this.Ff=Sr(this.Ff,21):this.Ff=Nr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,23)},set:function(t){t?this.Ff=Sr(this.Ff,23):this.Ff=Nr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,24)},set:function(t){t?this.Ff=Sr(this.Ff,24):this.Ff=Nr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,25)},set:function(t){t?this.Ff=Sr(this.Ff,25):this.Ff=Nr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,26)},set:function(t){t?this.Ff=Sr(this.Ff,26):this.Ff=Nr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fs(Iu,Fa);var p0=function(){Iu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!_r(this.Ff,14)},set:function(e){e?this.Ff=Sr(this.Ff,14):this.Ff=Nr(this.Ff,14)}}),this.password=!0};fs(p0,Iu);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=wy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Rt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=so(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=vt.internal.getHeight(e),a=vt.internal.getWidth(e),l=wy(e,e.caption);return i.push("1 g"),i.push("0 0 "+Rt(a)+" "+Rt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rt(a-1)+" "+Rt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Rt(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=vt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*vt.internal.Bezier_C).toFixed(5)),a=Number((r*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Rt(vt.internal.getWidth(e)-2)+" "+Rt(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Rt(r.x1.x)+" "+Rt(r.x1.y)+" m"),n.push(Rt(r.x2.x)+" "+Rt(r.x2.y)+" l"),n.push(Rt(r.x4.x)+" "+Rt(r.x4.y)+" m"),n.push(Rt(r.x3.x)+" "+Rt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=so(e);t.scope=e.scope;var n=vt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rt(vt.internal.getWidth(e)-2)+" "+Rt(vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Rt(n.x1.x)+" "+Rt(n.x1.y)+" m"),r.push(Rt(n.x2.x)+" "+Rt(n.x2.y)+" l"),r.push(Rt(n.x4.x)+" "+Rt(n.x4.y)+" m"),r.push(Rt(n.x3.x)+" "+Rt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),n=vt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},vt.internal.getWidth=function(e){var t=0;return Nn(e)==="object"&&(t=$_(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return Nn(e)==="object"&&(t=$_(e.Rect[3])),t};var xB=pr.addField=function(e){if(wB(this,e),!(e instanceof Fa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};pr.AcroFormChoiceField=cf,pr.AcroFormListBox=uf,pr.AcroFormComboBox=df,pr.AcroFormEditBox=d0,pr.AcroFormButton=Yr,pr.AcroFormPushButton=f0,pr.AcroFormRadioButton=ff,pr.AcroFormCheckBox=h0,pr.AcroFormTextField=Iu,pr.AcroFormPasswordField=p0,pr.AcroFormAppearance=vt,pr.AcroForm={ChoiceField:cf,ListBox:uf,ComboBox:df,EditBox:d0,Button:Yr,PushButton:f0,RadioButton:ff,CheckBox:h0,TextField:Iu,PasswordField:p0,Appearance:vt},Ct.AcroForm={ChoiceField:cf,ListBox:uf,ComboBox:df,EditBox:d0,Button:Yr,PushButton:f0,RadioButton:ff,CheckBox:h0,TextField:Iu,PasswordField:p0,Appearance:vt};function P6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(P,F){var V,Y,pe,ge,Q,$=t;if((F=F||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(ee(P))for(Q in n)for(pe=n[Q],V=0;V<pe.length;V+=1){for(ge=!0,Y=0;Y<pe[V].length;Y+=1)if(pe[V][Y]!==void 0&&pe[V][Y]!==P[Y]){ge=!1;break}if(ge===!0){$=Q;break}}else for(Q in n)for(pe=n[Q],V=0;V<pe.length;V+=1){for(ge=!0,Y=0;Y<pe[V].length;Y+=1)if(pe[V][Y]!==void 0&&pe[V][Y]!==P.charCodeAt(Y)){ge=!1;break}if(ge===!0){$=Q;break}}return $===t&&F!==t&&($=F),$},i=function P(F){for(var V=this.internal.write,Y=this.internal.putStream,pe=(0,this.internal.getFilters)();pe.indexOf("FlateEncode")!==-1;)pe.splice(pe.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:F.width}),ge.push({key:"Height",value:F.height}),F.colorSpace===C.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===C.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var Q="",$=0,q=F.transparency.length;$<q;$++)Q+=F.transparency[$]+" "+F.transparency[$]+" ";ge.push({key:"Mask",value:"["+Q+"]"})}F.sMask!==void 0&&ge.push({key:"SMask",value:F.objectId+1+" 0 R"});var oe=F.filter!==void 0?["/"+F.filter]:void 0;if(Y({data:F.data,additionalKeyValues:ge,alreadyAppliedFilters:oe,objectId:F.objectId}),V("endobj"),"sMask"in F&&F.sMask!==void 0){var Le="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,T={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:Le,data:F.sMask};"filter"in F&&(T.filter=F.filter),P.call(this,T)}if(F.colorSpace===C.INDEXED){var K=this.internal.newObject();Y({data:I(new Uint8Array(F.palette)),objectId:K}),V("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var F in P)i.call(this,P[F])},a=function(){var P,F=this.internal.collections.addImage_images,V=this.internal.write;for(var Y in F)V("/I"+(P=F[Y]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(P){return typeof e["process"+P.toUpperCase()]=="function"},g=function(P){return Nn(P)==="object"&&P.nodeType===1},w=function(P,F){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var V=""+P.getAttribute("src");if(V.indexOf("data:image/")===0)return zh(unescape(V).split("base64,").pop());var Y=e.loadFile(V,!0);if(Y!==void 0)return Y}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var pe;switch(F){case"PNG":pe="image/png";break;case"WEBP":pe="image/webp";break;case"JPEG":case"JPG":default:pe="image/jpeg"}return zh(P.toDataURL(pe,1).split("base64,").pop())}},m=function(P){var F=this.internal.collections.addImage_images;if(F){for(var V in F)if(P===F[V].alias)return F[V]}},S=function(P,F,V){return P||F||(P=-96,F=-96),P<0&&(P=-1*V.width*72/P/this.internal.scaleFactor),F<0&&(F=-1*V.height*72/F/this.internal.scaleFactor),P===0&&(P=F*V.width/V.height),F===0&&(F=P*V.height/V.width),[P,F]},k=function(P,F,V,Y,pe,ge){var Q=S.call(this,V,Y,pe),$=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,oe=c.call(this);if(V=Q[0],Y=Q[1],oe[pe.index]=pe,ge){ge*=Math.PI/180;var Le=Math.cos(ge),T=Math.sin(ge),K=function(ue){return ue.toFixed(4)},se=[K(Le),K(T),K(-1*T),K(Le),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,$(P),q(F+Y),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([$(V),"0","0",$(Y),"0","0","cm"].join(" "))):this.internal.write([$(V),"0","0",$(Y),$(P),q(F+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pe.index+" Do"),this.internal.write("Q")},C=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(P){var F,V,Y=0;if(typeof P=="string")for(V=P.length,F=0;F<V;F++)Y=(Y<<5)-Y+P.charCodeAt(F),Y|=0;else if(ee(P))for(V=P.byteLength/2,F=0;F<V;F++)Y=(Y<<5)-Y+P[F],Y|=0;return Y},L=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var F=!0;return P.length===0&&(F=!1),P.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(F=!1),F},R=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var F=P.indexOf(",");return F<0?null:P.substring(0,F).trim().endsWith("base64")?P.substring(F+1):null},J=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return J()&&P instanceof ArrayBuffer};var ee=e.__addimage__.isArrayBufferView=function(P){return J()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},W=e.__addimage__.binaryStringToUint8Array=function(P){for(var F=P.length,V=new Uint8Array(F),Y=0;Y<F;Y++)V[Y]=P.charCodeAt(Y);return V},I=e.__addimage__.arrayBufferToBinaryString=function(P){for(var F="",V=ee(P)?P:new Uint8Array(P),Y=0;Y<V.length;Y+=8192)F+=String.fromCharCode.apply(null,V.subarray(Y,Y+8192));return F};e.addImage=function(){var P,F,V,Y,pe,ge,Q,$,q;if(typeof arguments[1]=="number"?(F=t,V=arguments[1],Y=arguments[2],pe=arguments[3],ge=arguments[4],Q=arguments[5],$=arguments[6],q=arguments[7]):(F=arguments[1],V=arguments[2],Y=arguments[3],pe=arguments[4],ge=arguments[5],Q=arguments[6],$=arguments[7],q=arguments[8]),Nn(P=arguments[0])==="object"&&!g(P)&&"imageData"in P){var oe=P;P=oe.imageData,F=oe.format||F||t,V=oe.x||V||0,Y=oe.y||Y||0,pe=oe.w||oe.width||pe,ge=oe.h||oe.height||ge,Q=oe.alias||Q,$=oe.compression||$,q=oe.rotation||oe.angle||q}var Le=this.internal.getFilters();if($===void 0&&Le.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(V)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=Z.call(this,P,F,Q,$);return k.call(this,V,Y,pe,ge,T,q),this};var Z=function(P,F,V,Y){var pe,ge,Q;if(typeof P=="string"&&r(P)===t){P=unescape(P);var $=re(P,!1);($!==""||($=e.loadFile(P,!0))!==void 0)&&(P=$)}if(g(P)&&(P=w(P,F)),F=r(P,F),!p(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((Q=V)==null||Q.length===0)&&(V=function(q){return typeof q=="string"||ee(q)?N(q):ee(q.data)?N(q.data):null}(P)),(pe=m.call(this,V))||(J()&&(P instanceof Uint8Array||F==="RGBA"||(ge=P,P=W(P))),pe=this["process"+F.toUpperCase()](P,f.call(this),V,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in e.image_compression?q:_.NONE}(Y),ge)),!pe)throw new Error("An unknown error occurred whilst processing the image.");return pe},re=e.__addimage__.convertBase64ToBinaryString=function(P,F){F=typeof F!="boolean"||F;var V,Y="";if(typeof P=="string"){var pe;V=(pe=R(P))!==null&&pe!==void 0?pe:P;try{Y=zh(V)}catch(ge){if(F)throw L(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};e.getImageProperties=function(P){var F,V,Y="";if(g(P)&&(P=w(P)),typeof P=="string"&&r(P)===t&&((Y=re(P,!1))===""&&(Y=e.loadFile(P)||""),P=Y),V=r(P),!p(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!J()||P instanceof Uint8Array||(P=W(P)),!(F=this["process"+V.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=V,F}})(Ct.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ct.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,p=!1,g=0;g<f.length&&!p;g++)switch((r=f[g]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<f.length;w++){r=f[w];var m=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(k.objId),N=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(_(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(_(N))+") >>",k.content=s;var L=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(k.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(S(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var J=this.annotations._nameMap[r.options.name];r.options.pageNumber=J.page,r.options.top=J.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ee=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:f(r),w:c(n+i),h:f(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,l,c=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(f*p)}else l=c,a=f;return this.text(n,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,l,a,s),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ct.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},l=e.__arabicParser__.isArabicEndLetter=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(k){return a(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(k){var C=0,_=n,N="",L=0;for(C=0;C<k.length;C+=1)_[k.charCodeAt(C)]!==void 0?(L++,typeof(_=_[k.charCodeAt(C)])=="number"&&(N+=String.fromCharCode(_),_=n,L=0),C===k.length-1&&(_=n,N+=k.charAt(C-(L-1)),C-=L-1,L=0)):(_=n,N+=k.charAt(C-L),C-=L,L=0);return N};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(k,C,_){return a(k)?s(k)===!1?-1:!f(k)||!a(C)&&!a(_)||!a(_)&&l(C)||l(k)&&!a(C)||l(k)&&c(C)||l(k)&&l(C)?0:p(k)&&a(C)&&!l(C)&&a(_)&&f(_)?3:l(k)||!a(_)?1:2:-1},m=function(k){var C=0,_=0,N=0,L="",R="",J="",ee=(k=k||"").split("\\s+"),W=[];for(C=0;C<ee.length;C+=1){for(W.push(""),_=0;_<ee[C].length;_+=1)L=ee[C][_],R=ee[C][_-1],J=ee[C][_+1],a(L)?(N=w(L,R,J),W[C]+=N!==-1?String.fromCharCode(t[L.charCodeAt(0)][N]):L):W[C]+=L;W[C]=g(W[C])}return W.join(" ")},S=e.__arabicParser__.processArabic=e.processArabic=function(){var k,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(C)){var N=0;for(_=[],N=0;N<C.length;N+=1)Array.isArray(C[N])?_.push([m(C[N][0]),C[N][1],C[N][2]]):_.push([m(C[N])]);k=_}else k=m(C);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",S])}(Ct.API),Ct.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ct.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(k){c=k}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(k){S=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),g=f.font||this.getFont(),w=f.scaleFactor||this.internal.scaleFactor,m=0,S=0,k=0,C=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var _=f.maxWidth;_>0?typeof c=="string"?c=this.splitTextToSize(c,_):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,R){return L.concat(C.splitTextToSize(R,_))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(k=this.getStringUnitWidth(c[N],{font:g})*p)&&(m=k);return m!==0&&(S=c.length),{w:m/=w,h:Math.max((S*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,m&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,f,p,g,w){if(r.call(this),!p)throw new Error("No data for PDF table.");var m,S,k,C,_=[],N=[],L=[],R={},J={},ee=[],W=[],I=(w=w||{}).autoSize||!1,Z=w.printHeaders!==!1,re=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,P=w.margins||Object.assign({width:this.getPageWidth()},t),F=typeof w.padding=="number"?w.padding:3,V=w.headerBackgroundColor||"#c8c8c8",Y=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Z,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=re,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=Y,this.setFontSize(re),g==null)N=_=Object.keys(p[0]),L=_.map(function(){return"left"});else if(Array.isArray(g)&&Nn(g[0])==="object")for(_=g.map(function(oe){return oe.name}),N=g.map(function(oe){return oe.prompt||oe.name||""}),L=g.map(function(oe){return oe.align||"left"}),m=0;m<g.length;m+=1)J[g[m].name]=g[m].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(N=_=g,L=_.map(function(){return"left"}));if(I||Array.isArray(g)&&typeof g[0]=="string")for(m=0;m<_.length;m+=1){for(R[C=_[m]]=p.map(function(oe){return oe[C]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=R[C],this.setFont(void 0,"normal"),k=0;k<S.length;k+=1)ee.push(this.getTextDimensions(S[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[C]=Math.max.apply(null,ee)+F+F,ee=[]}if(Z){var pe={};for(m=0;m<_.length;m+=1)pe[_[m]]={},pe[_[m]].text=N[m],pe[_[m]].align=L[m];var ge=l.call(this,pe,J);W=_.map(function(oe){return new s(c,f,J[oe],ge,pe[oe].text,void 0,pe[oe].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var Q=g.reduce(function(oe,Le){return oe[Le.name]=Le.align,oe},{});for(m=0;m<p.length;m+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:m,data:p[m]},this);var $=l.call(this,p[m],J);for(k=0;k<_.length;k+=1){var q=p[m][_[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:m,col:k,data:q},this),a.call(this,new s(c,f,J[_[k]],$,q,m+2,Q[_[k]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var l=function(c,f){var p=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(m){var S=c[m];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,f[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*g/w+p+p},this).reduce(function(m,S){return Math.max(m,S)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=c;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(S)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(Ct.API);var T6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},M6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xy=P6(M6),I6=[100,200,300,400,500,600,700,800,900],bB=P6(I6);function by(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return T6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof xy[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function B_(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var _B={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},U_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function z_(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function SB(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},_B,n.genericFontFamilies||{}),s=null,a=null,l=0;l<t.length;++l)if(i[(s=by(t[l])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+z_(s)+"' and default family '"+r+"'.");if(a=function(c,f){if(f[c])return f[c];var p=xy[c],g=p<=xy.normal?-1:1,w=B_(f,M6,p,g);if(!w)throw new Error("Could not find a matching font-stretch value for "+c);return w}(s.stretch,a),a=function(c,f){if(f[c])return f[c];for(var p=T6[c],g=0;g<p.length;++g)if(f[p[g]])return f[p[g]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var p=bB[c],g=B_(f,I6,p,c<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+c);return g}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+z_(s)+"'.");return a}function q_(e){return e.trimLeft()}function NB(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function kB(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var zm,W_,H_,Rv=["times"];(function(e){var t,n,r,i,s,a,l,c,f,p=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new a,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new a,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,f=new p}]);var g=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=T;Object.defineProperty(this,"pdf",{get:function(){return K}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(de){se=!!de}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(de){ue=!!de}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(de){isNaN(de)||(he=de)}});var je=0;Object.defineProperty(this,"posY",{get:function(){return je},set:function(de){isNaN(de)||(je=de)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(de){var B;typeof de=="number"?B=[de,de,de,de]:((B=new Array(4))[0]=de[0],B[1]=de.length>=2?de[1]:B[0],B[2]=de.length>=3?de[2]:B[0],B[3]=de.length>=4?de[3]:B[1]),f.margin=B}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(de){Ce=de}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(de){ne=de}});var ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ce},set:function(de){ce=de}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(de){de instanceof p&&(f=de)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(de){f.path=de}});var le=[];Object.defineProperty(this,"ctxStack",{get:function(){return le},set:function(de){le=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var B;B=w(de),this.ctx.fillStyle=B.style,this.ctx.isFillTransparent=B.a===0,this.ctx.fillOpacity=B.a,this.pdf.setFillColor(B.r,B.g,B.b,{a:B.a}),this.pdf.setTextColor(B.r,B.g,B.b,{a:B.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var B=w(de);this.ctx.strokeStyle=B.style,this.ctx.isStrokeTransparent=B.a===0,this.ctx.strokeOpacity=B.a,B.a===0?this.pdf.setDrawColor(255,255,255):(B.a,this.pdf.setDrawColor(B.r,B.g,B.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var me=null;function Ne(de,B){if(me===null){var ke=function(Fe){var Re=[];return Object.keys(Fe).forEach(function(qe){Fe[qe].forEach(function(be){var $e=null;switch(be){case"bold":$e={family:qe,weight:"bold"};break;case"italic":$e={family:qe,style:"italic"};break;case"bolditalic":$e={family:qe,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:qe}}$e!==null&&($e.ref={name:qe,style:be},Re.push($e))})}),Re}(de.getFontList());me=function(Fe){for(var Re={},qe=0;qe<Fe.length;++qe){var be=by(Fe[qe]),$e=be.family,Ke=be.stretch,Je=be.style,nt=be.weight;Re[$e]=Re[$e]||{},Re[$e][Ke]=Re[$e][Ke]||{},Re[$e][Ke][Je]=Re[$e][Ke][Je]||{},Re[$e][Ke][Je][nt]=be}return Re}(ke.concat(B))}return me}var Me=null;Object.defineProperty(this,"fontFaces",{get:function(){return Me},set:function(de){me=null,Me=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var B;if(this.ctx.font=de,(B=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var ke=B[1];B[2];var Fe=B[3],Re=B[4];B[5];var qe=B[6],be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Re)[2];Re=Math.floor(be==="px"?parseFloat(Re)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(Re)*this.pdf.getFontSize():parseFloat(Re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Re);var $e=function(ft){var Nt,et,bn=[],Bt=ft.trim();if(Bt==="")return Rv;if(Bt in U_)return[U_[Bt]];for(;Bt!=="";){switch(et=null,Nt=(Bt=q_(Bt)).charAt(0)){case'"':case"'":et=NB(Bt.substring(1),Nt);break;default:et=kB(Bt)}if(et===null||(bn.push(et[0]),(Bt=q_(et[1]))!==""&&Bt.charAt(0)!==","))return Rv;Bt=Bt.replace(/^,/,"")}return bn}(qe);if(this.fontFaces){var Ke=SB(Ne(this.pdf,this.fontFaces),$e.map(function(ft){return{family:ft,stretch:"normal",weight:Fe,style:ke}}));this.pdf.setFont(Ke.ref.name,Ke.ref.style)}else{var Je="";(Fe==="bold"||parseInt(Fe,10)>=700||ke==="bold")&&(Je="bold"),ke==="italic"&&(Je+="italic"),Je.length===0&&(Je="normal");for(var nt="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},at=0;at<$e.length;at++){if(this.pdf.internal.getFont($e[at],Je,{noFallback:!0,disableWarning:!0})!==void 0){nt=$e[at];break}if(Je==="bolditalic"&&this.pdf.internal.getFont($e[at],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=$e[at],Je="bold";else if(this.pdf.internal.getFont($e[at],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=$e[at],Je="normal";break}}if(nt===""){for(var St=0;St<$e.length;St++)if(rt[$e[St]]){nt=rt[$e[St]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,Je)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};g.prototype.setLineDash=function(T){this.lineDash=T},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){R.call(this,"fill",!1)},g.prototype.stroke=function(){R.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(T,K){if(isNaN(T)||isNaN(K))throw Mn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new a(T,K));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new a(T,K)},g.prototype.closePath=function(){var T=new a(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Nn(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){T=new a(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(T.x,T.y)},g.prototype.lineTo=function(T,K){if(isNaN(T)||isNaN(K))throw Mn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new a(T,K));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new a(se.x,se.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},g.prototype.quadraticCurveTo=function(T,K,se,ue){if(isNaN(se)||isNaN(ue)||isNaN(T)||isNaN(K))throw Mn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new a(se,ue)),je=this.ctx.transform.applyToPoint(new a(T,K));this.path.push({type:"qct",x1:je.x,y1:je.y,x:he.x,y:he.y}),this.ctx.lastPoint=new a(he.x,he.y)},g.prototype.bezierCurveTo=function(T,K,se,ue,he,je){if(isNaN(he)||isNaN(je)||isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue))throw Mn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new a(he,je)),ne=this.ctx.transform.applyToPoint(new a(T,K)),ce=this.ctx.transform.applyToPoint(new a(se,ue));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:ce.x,y2:ce.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new a(Ce.x,Ce.y)},g.prototype.arc=function(T,K,se,ue,he,je){if(isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue)||isNaN(he))throw Mn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(je=!!je,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new a(T,K));T=Ce.x,K=Ce.y;var ne=this.ctx.transform.applyToPoint(new a(0,se)),ce=this.ctx.transform.applyToPoint(new a(0,0));se=Math.sqrt(Math.pow(ne.x-ce.x,2)+Math.pow(ne.y-ce.y,2))}Math.abs(he-ue)>=2*Math.PI&&(ue=0,he=2*Math.PI),this.path.push({type:"arc",x:T,y:K,radius:se,startAngle:ue,endAngle:he,counterclockwise:je})},g.prototype.arcTo=function(T,K,se,ue,he){throw new Error("arcTo not implemented.")},g.prototype.rect=function(T,K,se,ue){if(isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue))throw Mn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,K),this.lineTo(T+se,K),this.lineTo(T+se,K+ue),this.lineTo(T,K+ue),this.lineTo(T,K),this.lineTo(T+se,K),this.lineTo(T,K)},g.prototype.fillRect=function(T,K,se,ue){if(isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue))throw Mn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,K,se,ue),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},g.prototype.strokeRect=function(T,K,se,ue){if(isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue))throw Mn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(T,K,se,ue),this.stroke())},g.prototype.clearRect=function(T,K,se,ue){if(isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue))throw Mn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,K,se,ue))},g.prototype.save=function(T){T=typeof T!="boolean"||T;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},g.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(K),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(T){var K,se,ue,he;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))K=0,se=0,ue=0,he=0;else{var je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(je!==null)K=parseInt(je[1]),se=parseInt(je[2]),ue=parseInt(je[3]),he=1;else if((je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)K=parseInt(je[1]),se=parseInt(je[2]),ue=parseInt(je[3]),he=parseFloat(je[4]);else{if(he=1,typeof T=="string"&&T.charAt(0)!=="#"){var Ce=new k6(T);T=Ce.ok?Ce.toHex():"#000000"}T.length===4?(K=T.substring(1,2),K+=K,se=T.substring(2,3),se+=se,ue=T.substring(3,4),ue+=ue):(K=T.substring(1,3),se=T.substring(3,5),ue=T.substring(5,7)),K=parseInt(K,16),se=parseInt(se,16),ue=parseInt(ue,16)}}return{r:K,g:se,b:ue,a:he,style:T}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(T,K,se,ue){if(isNaN(K)||isNaN(se)||typeof T!="string")throw Mn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!m.call(this)){var he=$(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;F.call(this,{text:T,x:K,y:se,scale:je,angle:he,align:this.textAlign,maxWidth:ue})}},g.prototype.strokeText=function(T,K,se,ue){if(isNaN(K)||isNaN(se)||typeof T!="string")throw Mn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){ue=isNaN(ue)?void 0:ue;var he=$(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;F.call(this,{text:T,x:K,y:se,scale:je,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ue})}},g.prototype.measureText=function(T){if(typeof T!="string")throw Mn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,se=this.pdf.internal.scaleFactor,ue=K.internal.getFontSize(),he=K.getStringUnitWidth(T)*ue/K.internal.scaleFactor,je=function(Ce){var ne=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new je({width:he*=Math.round(96*se/72*1e4)/1e4})},g.prototype.scale=function(T,K){if(isNaN(T)||isNaN(K))throw Mn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new c(T,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},g.prototype.rotate=function(T){if(isNaN(T))throw Mn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},g.prototype.translate=function(T,K){if(isNaN(T)||isNaN(K))throw Mn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new c(1,0,0,1,T,K);this.ctx.transform=this.ctx.transform.multiply(se)},g.prototype.transform=function(T,K,se,ue,he,je){if(isNaN(T)||isNaN(K)||isNaN(se)||isNaN(ue)||isNaN(he)||isNaN(je))throw Mn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new c(T,K,se,ue,he,je);this.ctx.transform=this.ctx.transform.multiply(Ce)},g.prototype.setTransform=function(T,K,se,ue,he,je){T=isNaN(T)?1:T,K=isNaN(K)?0:K,se=isNaN(se)?0:se,ue=isNaN(ue)?1:ue,he=isNaN(he)?0:he,je=isNaN(je)?0:je,this.ctx.transform=new c(T,K,se,ue,he,je)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(T,K,se,ue,he,je,Ce,ne,ce){var le=this.pdf.getImageProperties(T),me=1,Ne=1,Me=1,de=1;ue!==void 0&&ne!==void 0&&(Me=ne/ue,de=ce/he,me=le.width/ue*ne/ue,Ne=le.height/he*ce/he),je===void 0&&(je=K,Ce=se,K=0,se=0),ue!==void 0&&ne===void 0&&(ne=ue,ce=he),ue===void 0&&ne===void 0&&(ne=le.width,ce=le.height);for(var B,ke=this.ctx.transform.decompose(),Fe=$(ke.rotate.shx),Re=new c,qe=(Re=(Re=(Re=Re.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new l(je-K*Me,Ce-se*de,ue*me,he*Ne)),be=C.call(this,qe),$e=[],Ke=0;Ke<be.length;Ke+=1)$e.indexOf(be[Ke])===-1&&$e.push(be[Ke]);if(L($e),this.autoPaging)for(var Je=$e[0],nt=$e[$e.length-1],rt=Je;rt<nt+1;rt++){this.pdf.setPage(rt);var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=rt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=rt===1?0:ft+(rt-2)*Nt;if(this.ctx.clip_path.length!==0){var bn=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(B,this.posX+this.margin[3],-et+St+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=bn}var Bt=JSON.parse(JSON.stringify(qe));Bt=N([Bt],this.posX+this.margin[3],-et+St+this.ctx.prevPageLastElemOffset)[0];var Tr=(rt>Je||rt<nt)&&k.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Nt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,Fe),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,Fe)};var C=function(T,K,se){var ue=[];K=K||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":ue.push(Math.floor((T.y+he)/se)+1);break;case"arc":ue.push(Math.floor((T.y+he-T.radius)/se)+1),ue.push(Math.floor((T.y+he+T.radius)/se)+1);break;case"qct":var je=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);ue.push(Math.floor((je.y+he)/se)+1),ue.push(Math.floor((je.y+je.h+he)/se)+1);break;case"bct":var Ce=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);ue.push(Math.floor((Ce.y+he)/se)+1),ue.push(Math.floor((Ce.y+Ce.h+he)/se)+1);break;case"rect":ue.push(Math.floor((T.y+he)/se)+1),ue.push(Math.floor((T.y+T.h+he)/se)+1)}for(var ne=0;ne<ue.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<ue[ne];)_.call(this);return ue},_=function(){var T=this.fillStyle,K=this.strokeStyle,se=this.font,ue=this.lineCap,he=this.lineWidth,je=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=K,this.font=se,this.lineCap=ue,this.lineWidth=he,this.lineJoin=je},N=function(T,K,se){for(var ue=0;ue<T.length;ue++)switch(T[ue].type){case"bct":T[ue].x2+=K,T[ue].y2+=se;case"qct":T[ue].x1+=K,T[ue].y1+=se;case"mt":case"lt":case"arc":default:T[ue].x+=K,T[ue].y+=se}return T},L=function(T){return T.sort(function(K,se){return K-se})},R=function(T,K){for(var se,ue,he=this.fillStyle,je=this.strokeStyle,Ce=this.lineCap,ne=this.lineWidth,ce=Math.abs(ne*this.ctx.transform.scaleX),le=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),Me=[],de=0;de<Ne.length;de++)if(Ne[de].x!==void 0)for(var B=C.call(this,Ne[de]),ke=0;ke<B.length;ke+=1)Me.indexOf(B[ke])===-1&&Me.push(B[ke]);for(var Fe=0;Fe<Me.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Me[Fe];)_.call(this);if(L(Me),this.autoPaging)for(var Re=Me[0],qe=Me[Me.length-1],be=Re;be<qe+1;be++){this.pdf.setPage(be),this.fillStyle=he,this.strokeStyle=je,this.lineCap=Ce,this.lineWidth=ce,this.lineJoin=le;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=be===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=be===1?0:Je+(be-2)*nt;if(this.ctx.clip_path.length!==0){var at=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(se,this.posX+this.margin[3],-rt+Ke+this.ctx.prevPageLastElemOffset),J.call(this,T,!0),this.path=at}if(ue=JSON.parse(JSON.stringify(me)),this.path=N(ue,this.posX+this.margin[3],-rt+Ke+this.ctx.prevPageLastElemOffset),K===!1||be===0){var St=(be>Re||be<qe)&&k.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,nt,null).clip().discardPath()),J.call(this,T,K),St&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=ce,J.call(this,T,K),this.lineWidth=ne;this.path=me},J=function(T,K){if((T!=="stroke"||K||!S.call(this))&&(T==="stroke"||K||!m.call(this))){for(var se,ue,he=[],je=this.path,Ce=0;Ce<je.length;Ce++){var ne=je[Ce];switch(ne.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:ne,deltas:[],abs:[]});break;case"lt":var ce=he.length;if(je[Ce-1]&&!isNaN(je[Ce-1].x)&&(se=[ne.x-je[Ce-1].x,ne.y-je[Ce-1].y],ce>0)){for(;ce>=0;ce--)if(he[ce-1].close!==!0&&he[ce-1].begin!==!0){he[ce-1].deltas.push(se),he[ce-1].abs.push(ne);break}}break;case"bct":se=[ne.x1-je[Ce-1].x,ne.y1-je[Ce-1].y,ne.x2-je[Ce-1].x,ne.y2-je[Ce-1].y,ne.x-je[Ce-1].x,ne.y-je[Ce-1].y],he[he.length-1].deltas.push(se);break;case"qct":var le=je[Ce-1].x+2/3*(ne.x1-je[Ce-1].x),me=je[Ce-1].y+2/3*(ne.y1-je[Ce-1].y),Ne=ne.x+2/3*(ne.x1-ne.x),Me=ne.y+2/3*(ne.y1-ne.y),de=ne.x,B=ne.y;se=[le-je[Ce-1].x,me-je[Ce-1].y,Ne-je[Ce-1].x,Me-je[Ce-1].y,de-je[Ce-1].x,B-je[Ce-1].y],he[he.length-1].deltas.push(se);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(ne)}}ue=K?null:T==="stroke"?"stroke":"fill";for(var ke=!1,Fe=0;Fe<he.length;Fe++)if(he[Fe].arc)for(var Re=he[Fe].abs,qe=0;qe<Re.length;qe++){var be=Re[qe];be.type==="arc"?I.call(this,be.x,be.y,be.radius,be.startAngle,be.endAngle,be.counterclockwise,void 0,K,!ke):V.call(this,be.x,be.y),ke=!0}else if(he[Fe].close===!0)this.pdf.internal.out("h"),ke=!1;else if(he[Fe].begin!==!0){var $e=he[Fe].start.x,Ke=he[Fe].start.y;Y.call(this,he[Fe].deltas,$e,Ke),ke=!0}ue&&Z.call(this,ue),K&&re.call(this)}},ee=function(T){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-se;case"top":return T+K-se;case"hanging":return T+K-2*se;case"middle":return T+K/2-se;case"ideographic":return T;case"alphabetic":default:return T}},W=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(K,se){this.colorStops.push([K,se])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(T,K,se,ue,he,je,Ce,ne,ce){for(var le=ge.call(this,se,ue,he,je),me=0;me<le.length;me++){var Ne=le[me];me===0&&(ce?P.call(this,Ne.x1+T,Ne.y1+K):V.call(this,Ne.x1+T,Ne.y1+K)),pe.call(this,T,K,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}ne?re.call(this):Z.call(this,Ce)},Z=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},re=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(T,K){this.pdf.internal.out(n(T)+" "+r(K)+" m")},F=function(T){var K;switch(T.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var se=this.pdf.getTextDimensions(T.text),ue=ee.call(this,T.y),he=W.call(this,ue)-se.h,je=this.ctx.transform.applyToPoint(new a(T.x,ue)),Ce=this.ctx.transform.decompose(),ne=new c;ne=(ne=(ne=ne.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var ce,le,me,Ne=this.ctx.transform.applyToRectangle(new l(T.x,ue,se.w,se.h)),Me=ne.applyToRectangle(new l(T.x,he,se.w,se.h)),de=C.call(this,Me),B=[],ke=0;ke<de.length;ke+=1)B.indexOf(de[ke])===-1&&B.push(de[ke]);if(L(B),this.autoPaging)for(var Fe=B[0],Re=B[B.length-1],qe=Fe;qe<Re+1;qe++){this.pdf.setPage(qe);var be=qe===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[2],Je=Ke-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],rt=nt-this.margin[3],at=qe===1?0:$e+(qe-2)*Je;if(this.ctx.clip_path.length!==0){var St=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ce,this.posX+this.margin[3],-1*at+be),J.call(this,"fill",!0),this.path=St}var ft=N([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-at+be+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*T.scale),me=this.lineWidth,this.lineWidth=me*T.scale);var Nt=this.autoPaging!=="text";if(Nt||ft.y+ft.h<=Ke){if(Nt||ft.y>=be&&ft.x<=nt){var et=Nt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||nt-ft.x)[0],bn=N([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-at+be+this.ctx.prevPageLastElemOffset)[0],Bt=Nt&&(qe>Fe||qe<Re)&&k.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,Je,null).clip().discardPath()),this.pdf.text(et,bn.x,bn.y,{angle:T.angle,align:K,renderingMode:T.renderingMode}),Bt&&this.pdf.restoreGraphicsState()}}else ft.y<Ke&&(this.ctx.prevPageLastElemOffset+=Ke-ft.y);T.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=me)}else T.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*T.scale),me=this.lineWidth,this.lineWidth=me*T.scale),this.pdf.text(T.text,je.x+this.posX,je.y+this.posY,{angle:T.angle,align:K,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=me)},V=function(T,K,se,ue){se=se||0,ue=ue||0,this.pdf.internal.out(n(T+se)+" "+r(K+ue)+" l")},Y=function(T,K,se){return this.pdf.lines(T,K,se,null,null)},pe=function(T,K,se,ue,he,je,Ce,ne){this.pdf.internal.out([t(i(se+T)),t(s(ue+K)),t(i(he+T)),t(s(je+K)),t(i(Ce+T)),t(s(ne+K)),"c"].join(" "))},ge=function(T,K,se,ue){for(var he=2*Math.PI,je=Math.PI/2;K>se;)K-=he;var Ce=Math.abs(se-K);Ce<he&&ue&&(Ce=he-Ce);for(var ne=[],ce=ue?-1:1,le=K;Ce>1e-5;){var me=le+ce*Math.min(Ce,je);ne.push(Q.call(this,T,le,me)),Ce-=Math.abs(me-le),le=me}return ne},Q=function(T,K,se){var ue=(se-K)/2,he=T*Math.cos(ue),je=T*Math.sin(ue),Ce=he,ne=-je,ce=Ce*Ce+ne*ne,le=ce+Ce*he+ne*je,me=4/3*(Math.sqrt(2*ce*le)-le)/(Ce*je-ne*he),Ne=Ce-me*ne,Me=ne+me*Ce,de=Ne,B=-Me,ke=ue+K,Fe=Math.cos(ke),Re=Math.sin(ke);return{x1:T*Math.cos(K),y1:T*Math.sin(K),x2:Ne*Fe-Me*Re,y2:Ne*Re+Me*Fe,x3:de*Fe-B*Re,y3:de*Re+B*Fe,x4:T*Math.cos(se),y4:T*Math.sin(se)}},$=function(T){return 180*T/Math.PI},q=function(T,K,se,ue,he,je){var Ce=T+.5*(se-T),ne=K+.5*(ue-K),ce=he+.5*(se-he),le=je+.5*(ue-je),me=Math.min(T,he,Ce,ce),Ne=Math.max(T,he,Ce,ce),Me=Math.min(K,je,ne,le),de=Math.max(K,je,ne,le);return new l(me,Me,Ne-me,de-Me)},oe=function(T,K,se,ue,he,je,Ce,ne){var ce,le,me,Ne,Me,de,B,ke,Fe,Re,qe,be,$e,Ke,Je=se-T,nt=ue-K,rt=he-se,at=je-ue,St=Ce-he,ft=ne-je;for(le=0;le<41;le++)Fe=(B=(me=T+(ce=le/40)*Je)+ce*((Me=se+ce*rt)-me))+ce*(Me+ce*(he+ce*St-Me)-B),Re=(ke=(Ne=K+ce*nt)+ce*((de=ue+ce*at)-Ne))+ce*(de+ce*(je+ce*ft-de)-ke),le==0?(qe=Fe,be=Re,$e=Fe,Ke=Re):(qe=Math.min(qe,Fe),be=Math.min(be,Re),$e=Math.max($e,Fe),Ke=Math.max(Ke,Re));return new l(Math.round(qe),Math.round(be),Math.round($e-qe),Math.round(Ke-be))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,K,se=(T=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:K}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(Ct.API),function(e){var t=function(s){var a,l,c,f,p,g,w,m,S,k;for(l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(g=(p=((p=((p=((p=(p-(k=p%85))/85)-(S=p%85))/85)-(m=p%85))/85)-(w=p%85))/85)%85,l.push(g+33,w+33,m+33,S+33,k+33)):l.push(122);return function(C,_){for(var N=_;N>0;N--)C.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,f,p,g=String,w="length",m=255,S="charCodeAt",k="slice",C="replace";for(s[k](-2),s=s[k](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),c=[],f=0,p=(s+=a="uuuuu"[k](s[w]%5||5))[w];p>f;f+=5)l=52200625*(s[S](f)-33)+614125*(s[S](f+1)-33)+7225*(s[S](f+2)-33)+85*(s[S](f+3)-33)+(s[S](f+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(_,N){for(var L=N;L>0;L--)_.pop()}(c,a[w]),g.fromCharCode.apply(g,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=my(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Ct.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,f,p){var g=new XMLHttpRequest,w=0,m=function(S){var k=S.length,C=[],_=String.fromCharCode;for(w=0;w<k;w+=1)C.push(_(255&S.charCodeAt(w)));return C.join("")};if(g.open("GET",c,!f),g.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(g.onload=function(){g.status===200?p(m(this.responseText)):p(void 0)}),g.send(null),f&&g.status===200)return m(g.responseText)}(i,s,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Ct.API),function(e){function t(){return(At.html2canvas?Promise.resolve(At.html2canvas):sl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):sl(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Nn(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(f,p){for(var g=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||g.appendChild(c(w,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(g.width=f.width,g.height=f.height,g.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(g.value=f.value),g.addEventListener("load",function(){g.scrollTop=f.scrollTop,g.scrollLeft=f.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var w=0;w<f.length;++w){var m=f[w],S=m.src.find(function(k){return k.format==="truetype"});S&&c.addFont(S.url,m.ref.name,m.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),l(this.prop.container,g)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,p){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(g){return c.updateProgress(null,f),g}).then(f,p).then(function(g){return c.updateProgress(1),g})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(f,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ct.getPageSize=function(a,l,c){if(Nn(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,g=(""+c).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var m,S=0,k=0;if(w.hasOwnProperty(g))S=w[g][1]/p,k=w[g][0]/p;else try{S=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",k>S&&(m=k,k=S,S=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",S>k&&(m=k,k=S,S=m)}return{width:k,height:S,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(by):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(Ct.API),Ct.API.addJS=function(e){return H_=e,this.internal.events.subscribe("postPutResources",function(){zm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),W_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+H_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zm!==void 0&&W_!==void 0&&this.internal.out("/Names <</JavaScript "+zm+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var g=n.internal.newObject();p.push(g);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ct.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,l){var c,f=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(g){for(var w,m=256*g.charCodeAt(4)+g.charCodeAt(5),S=g.length,k={width:0,height:0,numcomponents:1},C=4;C<S;C+=2){if(C+=m,t.indexOf(g.charCodeAt(C+1))!==-1){w=256*g.charCodeAt(C+5)+g.charCodeAt(C+6),k={width:256*g.charCodeAt(C+7)+g.charCodeAt(C+8),height:w,numcomponents:g.charCodeAt(C+9)};break}m=256*g.charCodeAt(C+2)+g.charCodeAt(C+3)}return k}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}}(Ct.API);var Rd,qm,G_,V_,Y_,EB=function(){var e,t,n;function r(s){var a,l,c,f,p,g,w,m,S,k,C,_,N,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(a=this.readUInt32(),S=(function(){var R,J;for(J=[],R=0;R<4;++R)J.push(String.fromCharCode(this.data[this.pos++]));return J}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,g.delay=1e3*p/f,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,a-=4),s=(g!=null?g.data:void 0)||this.imgData,_=0;0<=a?_<a:_>a;0<=a?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((k=c-this.transparency.indexed.length)>0)for(N=0;0<=k?N<k:N>k;0<=k?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":w=(C=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,C.slice(0,w)),this.text[m]=String.fromCharCode.apply(String,C.slice(w+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(g,w,m,S){var k,C,_,N,L,R,J,ee,W,I,Z,re,P,F,V,Y,pe,ge,Q,$,q,oe=Math.ceil((f.width-g)/m),Le=Math.ceil((f.height-w)/S),T=f.width==oe&&f.height==Le;for(F=a*oe,re=T?l:new Uint8Array(F*Le),R=s.length,P=0,C=0;P<Le&&c<R;){switch(s[c++]){case 0:for(N=pe=0;pe<F;N=pe+=1)re[C++]=s[c++];break;case 1:for(N=ge=0;ge<F;N=ge+=1)k=s[c++],L=N<a?0:re[C-a],re[C++]=(k+L)%256;break;case 2:for(N=Q=0;Q<F;N=Q+=1)k=s[c++],_=(N-N%a)/a,V=P&&re[(P-1)*F+_*a+N%a],re[C++]=(V+k)%256;break;case 3:for(N=$=0;$<F;N=$+=1)k=s[c++],_=(N-N%a)/a,L=N<a?0:re[C-a],V=P&&re[(P-1)*F+_*a+N%a],re[C++]=(k+Math.floor((L+V)/2))%256;break;case 4:for(N=q=0;q<F;N=q+=1)k=s[c++],_=(N-N%a)/a,L=N<a?0:re[C-a],P===0?V=Y=0:(V=re[(P-1)*F+_*a+N%a],Y=_&&re[(P-1)*F+(_-1)*a+N%a]),J=L+V-Y,ee=Math.abs(J-L),I=Math.abs(J-V),Z=Math.abs(J-Y),W=ee<=I&&ee<=Z?L:I<=Z?V:Y,re[C++]=(k+W)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!T){var K=((w+P*S)*f.width+g)*a,se=P*F;for(N=0;N<oe;N+=1){for(var ue=0;ue<a;ue+=1)l[K++]=re[se++];K+=(m-1)*a}}P++}}return s=iB(s),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,c,f,p,g,w,m;for(l=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+l.length),c=0,s=0,a=g=0,w=l.length;g<w;a=g+=3)f[c++]=l[a],f[c++]=l[a+1],f[c++]=l[a+2],f[c++]=(m=p[s++])!=null?m:255;return f},r.prototype.copyToImageData=function(s,a){var l,c,f,p,g,w,m,S,k,C,_;if(c=this.colors,k=null,l=this.hasAlphaChannel,this.palette.length&&(k=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),c=4,l=!0),S=(f=s.data||s).length,g=k||a,p=w=0,c===1)for(;p<S;)m=k?4*a[p/4]:w,C=g[m++],f[p++]=C,f[p++]=C,f[p++]=C,f[p++]=l?g[m++]:255,w=m;else for(;p<S;)m=k?4*a[p/4]:w,f[p++]=g[m++],f[p++]=g[m++],f[p++]=g[m++],f[p++]=l?g[m++]:255,w=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(At)==="[object Window]"){try{t=At.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,c,f,p,g,w,m;if(this.animation){for(m=[],l=p=0,g=(w=this.animation.frames).length;p<g;l=++p)a=w[l],c=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,f),a.imageData=c,m.push(a.image=e(c));return m}},r.prototype.renderFrame=function(s,a){var l,c,f;return l=(c=this.animation.frames)[a],f=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,c,f,p,g,w=this;return l=0,g=this.animation,f=g.numFrames,c=g.frames,p=g.numPlays,(a=function(){var m,S;if(m=l++%f,S=c[m],w.renderFrame(s,m),f>1&&l/f<p)return w.animation._timeout=setTimeout(a,S.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jB(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=a,t+=3*a);var f=!0,p=[],g=0,w=null,m=0,S=null;for(this.width=n,this.height=r;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,S=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];g=e[t++]|e[t++]<<8,w=e[t++],!(1&k)&&(w=null),m=k>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var C=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,R=e[t++],J=R>>6&1,ee=1<<(7&R)+1,W=l,I=c,Z=!1;R>>7&&(Z=!0,W=t,I=ee,t+=3*ee);var re=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}p.push({x:C,y:_,width:N,height:L,has_local_palette:Z,palette_offset:W,palette_size:I,data_offset:re,data_length:t-re,transparent_index:w,interlaced:!!J,delay:g,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return S},this.frameInfo=function(F){if(F<0||F>=p.length)throw new Error("Frame index out of range.");return p[F]},this.decodeAndBlitFrameBGRA=function(F,V){var Y=this.frameInfo(F),pe=Y.width*Y.height,ge=new Uint8Array(pe);K_(e,Y.data_offset,ge,pe);var Q=Y.palette_offset,$=Y.transparent_index;$===null&&($=256);var q=Y.width,oe=n-q,Le=q,T=4*(Y.y*n+Y.x),K=4*((Y.y+Y.height)*n+Y.x),se=T,ue=4*oe;Y.interlaced===!0&&(ue+=4*n*7);for(var he=8,je=0,Ce=ge.length;je<Ce;++je){var ne=ge[je];if(Le===0&&(Le=q,(se+=ue)>=K&&(ue=4*oe+4*n*(he-1),se=T+(q+oe)*(he<<1),he>>=1)),ne===$)se+=4;else{var ce=e[Q+3*ne],le=e[Q+3*ne+1],me=e[Q+3*ne+2];V[se++]=me,V[se++]=le,V[se++]=ce,V[se++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(F,V){var Y=this.frameInfo(F),pe=Y.width*Y.height,ge=new Uint8Array(pe);K_(e,Y.data_offset,ge,pe);var Q=Y.palette_offset,$=Y.transparent_index;$===null&&($=256);var q=Y.width,oe=n-q,Le=q,T=4*(Y.y*n+Y.x),K=4*((Y.y+Y.height)*n+Y.x),se=T,ue=4*oe;Y.interlaced===!0&&(ue+=4*n*7);for(var he=8,je=0,Ce=ge.length;je<Ce;++je){var ne=ge[je];if(Le===0&&(Le=q,(se+=ue)>=K&&(ue=4*oe+4*n*(he-1),se=T+(q+oe)*(he<<1),he>>=1)),ne===$)se+=4;else{var ce=e[Q+3*ne],le=e[Q+3*ne+1],me=e[Q+3*ne+2];V[se++]=ce,V[se++]=le,V[se++]=me,V[se++]=255}--Le}}}function K_(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,l=a+1,c=i+1,f=(1<<c)-1,p=0,g=0,w=0,m=e[t++],S=new Int32Array(4096),k=null;;){for(;p<16&&m!==0;)g|=e[t++]<<p,p+=8,m===1?m=e[t++]:--m;if(p<c)break;var C=g&f;if(g>>=c,p-=c,C!==s){if(C===a)break;for(var _=C<l?C:k,N=0,L=_;L>s;)L=S[L]>>8,++N;var R=L;if(w+N+(_!==C?1:0)>r)return void Mn.log("Warning, gif stream longer than expected.");n[w++]=R;var J=w+=N;for(_!==C&&(n[w++]=R),L=_;N--;)L=S[L],n[--J]=255&L,L>>=8;k!==null&&l<4096&&(S[l++]=k<<8|R,l>=f+1&&c<12&&(++c,f=f<<1|1)),k=C}else l=a+1,f=(1<<(c=i+1))-1,k=null}return w!==r&&Mn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fv(e){var t,n,r,i,s,a=Math.floor,l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(64),g=new Array(65535),w=new Array(65535),m=new Array(64),S=new Array(64),k=[],C=0,_=7,N=new Array(64),L=new Array(64),R=new Array(64),J=new Array(256),ee=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(T,K){for(var se=0,ue=0,he=new Array,je=1;je<=16;je++){for(var Ce=1;Ce<=T[je];Ce++)he[K[ue]]=[],he[K[ue]][0]=se,he[K[ue]][1]=je,ue++,se++;se*=2}return he}function Q(T){for(var K=T[0],se=T[1]-1;se>=0;)K&1<<se&&(C|=1<<_),se--,--_<0&&(C==255?($(255),$(0)):$(C),_=7,C=0)}function $(T){k.push(T)}function q(T){$(T>>8&255),$(255&T)}function oe(T,K,se,ue,he){for(var je,Ce=he[0],ne=he[240],ce=function(Re,qe){var be,$e,Ke,Je,nt,rt,at,St,ft,Nt,et=0;for(ft=0;ft<8;++ft){be=Re[et],$e=Re[et+1],Ke=Re[et+2],Je=Re[et+3],nt=Re[et+4],rt=Re[et+5],at=Re[et+6];var bn=be+(St=Re[et+7]),Bt=be-St,Tr=$e+at,Qt=$e-at,pn=Ke+rt,oi=Ke-rt,Zt=Je+nt,aa=Je-nt,Dn=bn+Zt,li=bn-Zt,_n=Tr+pn,Vt=Tr-pn;Re[et]=Dn+_n,Re[et+4]=Dn-_n;var wt=.707106781*(Vt+li);Re[et+2]=li+wt,Re[et+6]=li-wt;var Ut=.382683433*((Dn=aa+oi)-(Vt=Qt+Bt)),ur=.5411961*Dn+Ut,rn=1.306562965*Vt+Ut,tr=.707106781*(_n=oi+Qt),Mr=Bt+tr,ht=Bt-tr;Re[et+5]=ht+ur,Re[et+3]=ht-ur,Re[et+1]=Mr+rn,Re[et+7]=Mr-rn,et+=8}for(et=0,ft=0;ft<8;++ft){be=Re[et],$e=Re[et+8],Ke=Re[et+16],Je=Re[et+24],nt=Re[et+32],rt=Re[et+40],at=Re[et+48];var Vn=be+(St=Re[et+56]),nr=be-St,En=$e+at,Pn=$e-at,jn=Ke+rt,Yn=Ke-rt,Ui=Je+nt,ki=Je-nt,ps=Vn+Ui,ms=Vn-Ui,gs=En+jn,vs=En-jn;Re[et]=ps+gs,Re[et+32]=ps-gs;var zi=.707106781*(vs+ms);Re[et+16]=ms+zi,Re[et+48]=ms-zi;var Rs=.382683433*((ps=ki+Yn)-(vs=Pn+nr)),So=.5411961*ps+Rs,ll=1.306562965*vs+Rs,cl=.707106781*(gs=Yn+Pn),ul=nr+cl,oa=nr-cl;Re[et+40]=oa+So,Re[et+24]=oa-So,Re[et+8]=ul+ll,Re[et+56]=ul-ll,et++}for(ft=0;ft<64;++ft)Nt=Re[ft]*qe[ft],m[ft]=Nt>0?Nt+.5|0:Nt-.5|0;return m}(T,K),le=0;le<64;++le)S[W[le]]=ce[le];var me=S[0]-se;se=S[0],me==0?Q(ue[0]):(Q(ue[w[je=32767+me]]),Q(g[je]));for(var Ne=63;Ne>0&&S[Ne]==0;)Ne--;if(Ne==0)return Q(Ce),se;for(var Me,de=1;de<=Ne;){for(var B=de;S[de]==0&&de<=Ne;)++de;var ke=de-B;if(ke>=16){Me=ke>>4;for(var Fe=1;Fe<=Me;++Fe)Q(ne);ke&=15}je=32767+S[de],Q(he[(ke<<4)+w[je]]),Q(g[je]),de++}return Ne!=63&&Q(Ce),se}function Le(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(K){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var he=a((se[ue]*K+50)/100);he=Math.min(Math.max(he,1),255),l[W[ue]]=he}for(var je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var ne=a((je[Ce]*K+50)/100);ne=Math.min(Math.max(ne,1),255),c[W[Ce]]=ne}for(var ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],le=0,me=0;me<8;me++)for(var Ne=0;Ne<8;Ne++)f[le]=1/(l[W[le]]*ce[me]*ce[Ne]*8),p[le]=1/(c[W[le]]*ce[me]*ce[Ne]*8),le++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,K){K&&Le(K),k=new Array,C=0,_=7,q(65496),q(65504),q(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),q(1),q(1),$(0),$(0),function(){q(65499),q(132),$(0);for(var $e=0;$e<64;$e++)$(l[$e]);$(1);for(var Ke=0;Ke<64;Ke++)$(c[Ke])}(),function($e,Ke){q(65472),q(17),$(8),q(Ke),q($e),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(T.width,T.height),function(){q(65476),q(418),$(0);for(var $e=0;$e<16;$e++)$(I[$e+1]);for(var Ke=0;Ke<=11;Ke++)$(Z[Ke]);$(16);for(var Je=0;Je<16;Je++)$(re[Je+1]);for(var nt=0;nt<=161;nt++)$(P[nt]);$(1);for(var rt=0;rt<16;rt++)$(F[rt+1]);for(var at=0;at<=11;at++)$(V[at]);$(17);for(var St=0;St<16;St++)$(Y[St+1]);for(var ft=0;ft<=161;ft++)$(pe[ft])}(),q(65498),q(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var se=0,ue=0,he=0;C=0,_=7,this.encode.displayName="_encode_";for(var je,Ce,ne,ce,le,me,Ne,Me,de,B=T.data,ke=T.width,Fe=T.height,Re=4*ke,qe=0;qe<Fe;){for(je=0;je<Re;){for(le=Re*qe+je,Ne=-1,Me=0,de=0;de<64;de++)me=le+(Me=de>>3)*Re+(Ne=4*(7&de)),qe+Me>=Fe&&(me-=Re*(qe+1+Me-Fe)),je+Ne>=Re&&(me-=je+Ne-Re+4),Ce=B[me++],ne=B[me++],ce=B[me++],N[de]=(ee[Ce]+ee[ne+256>>0]+ee[ce+512>>0]>>16)-128,L[de]=(ee[Ce+768>>0]+ee[ne+1024>>0]+ee[ce+1280>>0]>>16)-128,R[de]=(ee[Ce+1280>>0]+ee[ne+1536>>0]+ee[ce+1792>>0]>>16)-128;se=oe(N,f,se,t,r),ue=oe(L,p,ue,n,i),he=oe(R,p,he,n,i),je+=32}qe+=8}if(_>=0){var be=[];be[1]=_+1,be[0]=(1<<_+1)-1,Q(be)}return q(65497),new Uint8Array(k)},e=e||50,function(){for(var T=String.fromCharCode,K=0;K<256;K++)J[K]=T(K)}(),t=ge(I,Z),n=ge(F,V),r=ge(re,P),i=ge(Y,pe),function(){for(var T=1,K=2,se=1;se<=15;se++){for(var ue=T;ue<K;ue++)w[32767+ue]=se,g[32767+ue]=[],g[32767+ue][1]=se,g[32767+ue][0]=ue;for(var he=-(K-1);he<=-T;he++)w[32767+he]=se,g[32767+he]=[],g[32767+he][1]=se,g[32767+he][0]=K-1+he;T<<=1,K<<=1}}(),function(){for(var T=0;T<256;T++)ee[T]=19595*T,ee[T+256>>0]=38470*T,ee[T+512>>0]=7471*T+32768,ee[T+768>>0]=-11059*T,ee[T+1024>>0]=-21709*T,ee[T+1280>>0]=32768*T+8421375,ee[T+1536>>0]=-27439*T,ee[T+1792>>0]=-5329*T}(),Le(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _a(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function J_(e){function t(I){if(!I)throw Error("assert :P")}function n(I,Z,re){for(var P=0;4>P;P++)if(I[Z+P]!=re.charCodeAt(P))return!0;return!1}function r(I,Z,re,P,F){for(var V=0;V<F;V++)I[Z+V]=re[P+V]}function i(I,Z,re,P){for(var F=0;F<P;F++)I[Z+F]=re}function s(I){return new Int32Array(I)}function a(I,Z){for(var re=[],P=0;P<I;P++)re.push(new Z);return re}function l(I,Z){var re=[];return function P(F,V,Y){for(var pe=Y[V],ge=0;ge<pe&&(F.push(Y.length>V+1?[]:new Z),!(Y.length<V+1));ge++)P(F[ge],V+1,Y)}(re,0,I),re}var c=function(){var I=this;function Z(h,v){for(var b=1<<v-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function re(h,v,b,A,M){t(!(A%b));do h[v+(A-=b)]=M;while(0<A)}function P(h,v,b,A,M){if(t(2328>=M),512>=M)var U=s(512);else if((U=s(M))==null)return 0;return function(z,H,X,ie,xe,De){var Oe,Ee,Ge=H,Be=1<<X,we=s(16),_e=s(16);for(t(xe!=0),t(ie!=null),t(z!=null),t(0<X),Ee=0;Ee<xe;++Ee){if(15<ie[Ee])return 0;++we[ie[Ee]]}if(we[0]==xe)return 0;for(_e[1]=0,Oe=1;15>Oe;++Oe){if(we[Oe]>1<<Oe)return 0;_e[Oe+1]=_e[Oe]+we[Oe]}for(Ee=0;Ee<xe;++Ee)Oe=ie[Ee],0<ie[Ee]&&(De[_e[Oe]++]=Ee);if(_e[15]==1)return(ie=new F).g=0,ie.value=De[0],re(z,Ge,1,Be,ie),Be;var He,Ze=-1,We=Be-1,ct=0,st=1,gt=1,ot=1<<X;for(Ee=0,Oe=1,xe=2;Oe<=X;++Oe,xe<<=1){if(st+=gt<<=1,0>(gt-=we[Oe]))return 0;for(;0<we[Oe];--we[Oe])(ie=new F).g=Oe,ie.value=De[Ee++],re(z,Ge+ct,xe,ot,ie),ct=Z(ct,Oe)}for(Oe=X+1,xe=2;15>=Oe;++Oe,xe<<=1){if(st+=gt<<=1,0>(gt-=we[Oe]))return 0;for(;0<we[Oe];--we[Oe]){if(ie=new F,(ct&We)!=Ze){for(Ge+=ot,He=1<<(Ze=Oe)-X;15>Ze&&!(0>=(He-=we[Ze]));)++Ze,He<<=1;Be+=ot=1<<(He=Ze-X),z[H+(Ze=ct&We)].g=He+X,z[H+Ze].value=Ge-H-Ze}ie.g=Oe-X,ie.value=De[Ee++],re(z,Ge+(ct>>X),xe,ot,ie),ct=Z(ct,Oe)}}return st!=2*_e[15]-1?0:Be}(h,v,b,A,M,U)}function F(){this.value=this.g=0}function V(){this.value=this.g=0}function Y(){this.G=a(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Or,V)}function pe(h,v,b,A){t(h!=null),t(v!=null),t(2147483648>A),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=b,h.Jd=v,h.Yc=b+A,h.Zc=4<=A?b+A-4+1:b,je(h)}function ge(h,v){for(var b=0;0<v--;)b|=ne(h,128)<<v;return b}function Q(h,v){var b=ge(h,v);return Ce(h)?-b:b}function $(h,v,b,A){var M,U=0;for(t(h!=null),t(v!=null),t(4294967288>A),h.Sb=A,h.Ra=0,h.u=0,h.h=0,4<A&&(A=4),M=0;M<A;++M)U+=v[b+M]<<8*M;h.Ra=U,h.bb=A,h.oa=v,h.pa=b}function q(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ll-8>>>0,++h.bb,h.u-=8;se(h)&&(h.h=1,h.u=0)}function oe(h,v){if(t(0<=v),!h.h&&v<=Al){var b=K(h)&ws[v];return h.u+=v,q(h),b}return h.h=1,h.u=0}function Le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(h){return h.Ra>>>(h.u&Ll-1)>>>0}function se(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ll}function ue(h,v){h.u=v,h.h=se(h)}function he(h){h.u>=Ao&&(t(h.u>=Ao),q(h))}function je(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ce(h){return ge(h,1)}function ne(h,v){var b=h.Ca;0>h.b&&je(h);var A=h.b,M=b*v>>>8,U=(h.I>>>A>M)+0;for(U?(b-=M,h.I-=M+1<<A>>>0):b=M+1,A=b,M=0;256<=A;)M+=8,A>>=8;return A=7^M+Qr[A],h.b-=A,h.Ca=(b<<A)-1,U}function ce(h,v,b){h[v+0]=b>>24&255,h[v+1]=b>>16&255,h[v+2]=b>>8&255,h[v+3]=b>>0&255}function le(h,v){return h[v+0]<<0|h[v+1]<<8}function me(h,v){return le(h,v)|h[v+2]<<16}function Ne(h,v){return le(h,v)|le(h,v+2)<<16}function Me(h,v){var b=1<<v;return t(h!=null),t(0<v),h.X=s(b),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function de(h,v){t(h!=null),t(v!=null),t(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function B(){this.X=[],this.Xa=this.Mb=0}function ke(h,v,b,A){t(b!=null),t(A!=null);var M=b[0],U=A[0];return M==0&&(M=(h*U+v/2)/v),U==0&&(U=(v*M+h/2)/h),0>=M||0>=U?0:(b[0]=M,A[0]=U,1)}function Fe(h,v){return h+(1<<v)-1>>>v}function Re(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function qe(h,v){I[v]=function(b,A,M,U,z,H,X){var ie;for(ie=0;ie<z;++ie){var xe=I[h](H[X+ie-1],M,U+ie);H[X+ie]=Re(b[A+ie],xe)}}}function be(){this.ud=this.hd=this.jd=0}function $e(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function Ke(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Je(h,v){return Ke(h+(h-v+.5>>1))}function nt(h,v,b){return Math.abs(v-b)-Math.abs(h-b)}function rt(h,v,b,A,M,U,z){for(A=U[z-1],b=0;b<M;++b)U[z+b]=A=Re(h[v+b],A)}function at(h,v,b,A,M){var U;for(U=0;U<b;++U){var z=h[v+U],H=z>>8&255,X=16711935&(X=(X=16711935&z)+((H<<16)+H));A[M+U]=(4278255360&z)+X>>>0}}function St(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function ft(h,v,b,A,M,U){var z;for(z=0;z<A;++z){var H=v[b+z],X=H>>>8,ie=H,xe=255&(xe=(xe=H>>>16)+((h.jd<<24>>24)*(X<<24>>24)>>>5));ie=255&(ie=(ie=ie+((h.hd<<24>>24)*(X<<24>>24)>>>5))+((h.ud<<24>>24)*(xe<<24>>24)>>>5)),M[U+z]=(4278255360&H)+(xe<<16)+ie}}function Nt(h,v,b,A,M){I[v]=function(U,z,H,X,ie,xe,De,Oe,Ee){for(X=De;X<Oe;++X)for(De=0;De<Ee;++De)ie[xe++]=M(H[A(U[z++])])},I[h]=function(U,z,H,X,ie,xe,De){var Oe=8>>U.b,Ee=U.Ea,Ge=U.K[0],Be=U.w;if(8>Oe)for(U=(1<<U.b)-1,Be=(1<<Oe)-1;z<H;++z){var we,_e=0;for(we=0;we<Ee;++we)we&U||(_e=A(X[ie++])),xe[De++]=M(Ge[_e&Be]),_e>>=Oe}else I["VP8LMapColor"+b](X,ie,Ge,Be,xe,De,z,H,Ee)}}function et(h,v,b,A,M){for(b=v+b;v<b;){var U=h[v++];A[M++]=U>>16&255,A[M++]=U>>8&255,A[M++]=U>>0&255}}function bn(h,v,b,A,M){for(b=v+b;v<b;){var U=h[v++];A[M++]=U>>16&255,A[M++]=U>>8&255,A[M++]=U>>0&255,A[M++]=U>>24&255}}function Bt(h,v,b,A,M){for(b=v+b;v<b;){var U=(z=h[v++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;A[M++]=U,A[M++]=z}}function Tr(h,v,b,A,M){for(b=v+b;v<b;){var U=(z=h[v++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;A[M++]=U,A[M++]=z}}function Qt(h,v,b,A,M){for(b=v+b;v<b;){var U=h[v++];A[M++]=U>>0&255,A[M++]=U>>8&255,A[M++]=U>>16&255}}function pn(h,v,b,A,M,U){if(U==0)for(b=v+b;v<b;)ce(A,((U=h[v++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),M+=32;else r(A,M,h,v,b)}function oi(h,v){I[v][0]=I[h+"0"],I[v][1]=I[h+"1"],I[v][2]=I[h+"2"],I[v][3]=I[h+"3"],I[v][4]=I[h+"4"],I[v][5]=I[h+"5"],I[v][6]=I[h+"6"],I[v][7]=I[h+"7"],I[v][8]=I[h+"8"],I[v][9]=I[h+"9"],I[v][10]=I[h+"10"],I[v][11]=I[h+"11"],I[v][12]=I[h+"12"],I[v][13]=I[h+"13"],I[v][14]=I[h+"0"],I[v][15]=I[h+"0"]}function Zt(h){return h==Ml||h==Il||h==Dl||h==Vf}function aa(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function li(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new aa,this.f.kb=new Dn,this.sd=null}function _n(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Vt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Ut(h,v){var b=h.T,A=v.ba.f.RGBA,M=A.eb,U=A.fb+h.ka*A.A,z=ji[v.ba.S],H=h.y,X=h.O,ie=h.f,xe=h.N,De=h.ea,Oe=h.W,Ee=v.cc,Ge=v.dc,Be=v.Mc,we=v.Nc,_e=h.ka,He=h.ka+h.T,Ze=h.U,We=Ze+1>>1;for(_e==0?z(H,X,null,null,ie,xe,De,Oe,ie,xe,De,Oe,M,U,null,null,Ze):(z(v.ec,v.fc,H,X,Ee,Ge,Be,we,ie,xe,De,Oe,M,U-A.A,M,U,Ze),++b);_e+2<He;_e+=2)Ee=ie,Ge=xe,Be=De,we=Oe,xe+=h.Rc,Oe+=h.Rc,U+=2*A.A,z(H,(X+=2*h.fa)-h.fa,H,X,Ee,Ge,Be,we,ie,xe,De,Oe,M,U-A.A,M,U,Ze);return X+=h.fa,h.j+He<h.o?(r(v.ec,v.fc,H,X,Ze),r(v.cc,v.dc,ie,xe,We),r(v.Mc,v.Nc,De,Oe,We),b--):1&He||z(H,X,null,null,ie,xe,De,Oe,ie,xe,De,Oe,M,U+A.A,null,null,Ze),b}function ur(h,v,b){var A=h.F,M=[h.J];if(A!=null){var U=h.U,z=v.ba.S,H=z==hd||z==Dl;v=v.ba.f.RGBA;var X=[0],ie=h.ka;X[0]=h.T,h.Kb&&(ie==0?--X[0]:(--ie,M[0]-=h.width),h.j+h.ka+h.T==h.o&&(X[0]=h.o-h.j-ie));var xe=v.eb;ie=v.fb+ie*v.A,h=Cn(A,M[0],h.width,U,X,xe,ie+(H?0:3),v.A),t(b==X),h&&Zt(z)&&Ei(xe,ie,H,U,X,v.A)}return 0}function rn(h){var v=h.ma,b=v.ba.S,A=11>b,M=b==Ga||b==Io||b==hd||b==Gf||b==12||Zt(b);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Xc(v.Oa,h,M?11:12))return 0;if(M&&Zt(b)&&Qe(),h.da)alert("todo:use_scaling");else{if(A){if(v.Ib=wt,h.Kb){if(b=h.U+1>>1,v.memory=s(h.U+2*b),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+b,v.Ib=Ut,Qe()}}else alert("todo:EmitYUV");M&&(v.Jb=ur,A&&Pe())}if(A&&!zp){for(h=0;256>h;++h)pa[h]=89858*(h-128)+Hs>>md,a1[h]=-22014*(h-128)+Hs,s1[h]=-45773*(h-128),i1[h]=113618*(h-128)+Hs>>md;for(h=au;h<Jf;++h)v=76283*(h-16)+Hs>>md,o1[h-au]=Tn(v,255),l1[h-au]=Tn(v+8>>4,15);zp=1}return 1}function tr(h){var v=h.ma,b=h.U,A=h.T;return t(!(1&h.ka)),0>=b||0>=A?0:(b=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,b),v.Dc+=b,1)}function Mr(h){h.ma.memory=null}function ht(h,v,b,A){return oe(h,8)!=47?0:(v[0]=oe(h,14)+1,b[0]=oe(h,14)+1,A[0]=oe(h,1),oe(h,3)!=0?0:!h.h)}function Vn(h,v){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+oe(v,b)+1}function nr(h,v){return 120<v?v-120:1<=(b=((b=Qg[v-1])>>4)*h+(8-(15&b)))?b:1;var b}function En(h,v,b){var A=K(b),M=h[v+=255&A].g-8;return 0<M&&(ue(b,b.u+8),A=K(b),v+=h[v].value,v+=A&(1<<M)-1),ue(b,b.u+h[v].g),h[v].value}function Pn(h,v,b){return b.g+=h.g,b.value+=h.value<<v>>>0,t(8>=b.g),h.g}function jn(h,v,b){var A=h.xc;return t((v=A==0?0:h.vc[h.md*(b>>A)+(v>>A)])<h.Wb),h.Ya[v]}function Yn(h,v,b,A){var M=h.ab,U=h.c*v,z=h.C;v=z+v;var H=b,X=A;for(A=h.Ta,b=h.Ua;0<M--;){var ie=h.gc[M],xe=z,De=v,Oe=H,Ee=X,Ge=(X=A,H=b,ie.Ea);switch(t(xe<De),t(De<=ie.nc),ie.hc){case 2:fd(Oe,Ee,(De-xe)*Ge,X,H);break;case 0:var Be=xe,we=De,_e=X,He=H,Ze=(ot=ie).Ea;Be==0&&(qs(Oe,Ee,null,null,1,_e,He),rt(Oe,Ee+1,0,0,Ze-1,_e,He+1),Ee+=Ze,He+=Ze,++Be);for(var We=1<<ot.b,ct=We-1,st=Fe(Ze,ot.b),gt=ot.K,ot=ot.w+(Be>>ot.b)*st;Be<we;){var an=gt,fn=ot,Ht=1;for(Wa(Oe,Ee,_e,He-Ze,1,_e,He);Ht<Ze;){var Dt=(Ht&~ct)+We;Dt>Ze&&(Dt=Ze),(0,ca[an[fn++]>>8&15])(Oe,Ee+ +Ht,_e,He+Ht-Ze,Dt-Ht,_e,He+Ht),Ht=Dt}Ee+=Ze,He+=Ze,++Be&ct||(ot+=st)}De!=ie.nc&&r(X,H-Ge,X,H+(De-xe-1)*Ge,Ge);break;case 1:for(Ge=Oe,we=Ee,Ze=(Oe=ie.Ea)-(He=Oe&~(_e=(Ee=1<<ie.b)-1)),Be=Fe(Oe,ie.b),We=ie.K,ie=ie.w+(xe>>ie.b)*Be;xe<De;){for(ct=We,st=ie,gt=new be,ot=we+He,an=we+Oe;we<ot;)St(ct[st++],gt),Lo(gt,Ge,we,Ee,X,H),we+=Ee,H+=Ee;we<an&&(St(ct[st++],gt),Lo(gt,Ge,we,Ze,X,H),we+=Ze,H+=Ze),++xe&_e||(ie+=Be)}break;case 3:if(Oe==X&&Ee==H&&0<ie.b){for(we=X,Oe=Ge=H+(De-xe)*Ge-(He=(De-xe)*Fe(ie.Ea,ie.b)),Ee=X,_e=H,Be=[],He=(Ze=He)-1;0<=He;--He)Be[He]=Ee[_e+He];for(He=Ze-1;0<=He;--He)we[Oe+He]=Be[He];Vi(ie,xe,De,X,Ge,X,H)}else Vi(ie,xe,De,Oe,Ee,X,H)}H=A,X=b}X!=b&&r(A,b,H,X,U)}function Ui(h,v){var b=h.V,A=h.Ba+h.c*h.C,M=v-h.C;if(t(v<=h.l.o),t(16>=M),0<M){var U=h.l,z=h.Ta,H=h.Ua,X=U.width;if(Yn(h,M,b,A),M=H=[H],t((b=h.C)<(A=v)),t(U.v<U.va),A>U.o&&(A=U.o),b<U.j){var ie=U.j-b;b=U.j,M[0]+=ie*X}if(b>=A?b=0:(M[0]+=4*U.v,U.ka=b-U.j,U.U=U.va-U.v,U.T=A-b,b=1),b){if(H=H[0],11>(b=h.ca).S){var xe=b.f.RGBA,De=(A=b.S,M=U.U,U=U.T,ie=xe.eb,xe.A),Oe=U;for(xe=xe.fb+h.Ma*xe.A;0<Oe--;){var Ee=z,Ge=H,Be=M,we=ie,_e=xe;switch(A){case tu:fi(Ee,Ge,Be,we,_e);break;case Ga:Zr(Ee,Ge,Be,we,_e);break;case Ml:Zr(Ee,Ge,Be,we,_e),Ei(we,_e,0,Be,1,0);break;case Va:hi(Ee,Ge,Be,we,_e);break;case Io:pn(Ee,Ge,Be,we,_e,1);break;case Il:pn(Ee,Ge,Be,we,_e,1),Ei(we,_e,0,Be,1,0);break;case hd:pn(Ee,Ge,Be,we,_e,0);break;case Dl:pn(Ee,Ge,Be,we,_e,0),Ei(we,_e,1,Be,1,0);break;case Gf:Ha(Ee,Ge,Be,we,_e);break;case Vf:Ha(Ee,Ge,Be,we,_e),gn(we,_e,Be,1,0);break;case Op:ua(Ee,Ge,Be,we,_e);break;default:t(0)}H+=X,xe+=De}h.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=b.height)}}h.C=v,t(h.C<=h.i)}function ki(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var b=h.Ya[v].G,A=h.Ya[v].H;if(0<b[1][A[1]+0].g||0<b[2][A[2]+0].g||0<b[3][A[3]+0].g)return 0}return 1}function ps(h,v,b,A,M,U){if(h.Z!=0){var z=h.qd,H=h.rd;for(t(Xi[h.Z]!=null);v<b;++v)Xi[h.Z](z,H,A,M,A,M,U),z=A,H=M,M+=U;h.qd=z,h.rd=H}}function ms(h,v){var b=h.l.ma,A=b.Z==0||b.Z==1?h.l.j:h.C;if(A=h.C<A?A:h.C,t(v<=h.l.o),v>A){var M=h.l.width,U=b.ca,z=b.tb+M*A,H=h.V,X=h.Ba+h.c*A,ie=h.gc;t(h.ab==1),t(ie[0].hc==3),la(ie[0],A,v,H,X,U,z),ps(b,A,v,U,z,M)}h.C=h.Ma=v}function gs(h,v,b,A,M,U,z){var H=h.$/A,X=h.$%A,ie=h.m,xe=h.s,De=b+h.$,Oe=De;M=b+A*M;var Ee=b+A*U,Ge=280+xe.ua,Be=h.Pb?H:16777216,we=0<xe.ua?xe.Wa:null,_e=xe.wc,He=De<Ee?jn(xe,X,H):null;t(h.C<U),t(Ee<=M);var Ze=!1;e:for(;;){for(;Ze||De<Ee;){var We=0;if(H>=Be){var ct=De-b;t((Be=h).Pb),Be.wd=Be.m,Be.xd=ct,0<Be.s.ua&&de(Be.s.Wa,Be.s.vb),Be=H+$p}if(X&_e||(He=jn(xe,X,H)),t(He!=null),He.Qb&&(v[De]=He.qb,Ze=!0),!Ze)if(he(ie),He.jc){We=ie,ct=v;var st=De,gt=He.pd[K(We)&Or-1];t(He.jc),256>gt.g?(ue(We,We.u+gt.g),ct[st]=gt.value,We=0):(ue(We,We.u+gt.g-256),t(256<=gt.value),We=gt.value),We==0&&(Ze=!0)}else We=En(He.G[0],He.H[0],ie);if(ie.h)break;if(Ze||256>We){if(!Ze)if(He.nd)v[De]=(He.qb|We<<8)>>>0;else{if(he(ie),Ze=En(He.G[1],He.H[1],ie),he(ie),ct=En(He.G[2],He.H[2],ie),st=En(He.G[3],He.H[3],ie),ie.h)break;v[De]=(st<<24|Ze<<16|We<<8|ct)>>>0}if(Ze=!1,++De,++X>=A&&(X=0,++H,z!=null&&H<=U&&!(H%16)&&z(h,H),we!=null))for(;Oe<De;)We=v[Oe++],we.X[(506832829*We&4294967295)>>>we.Mb]=We}else if(280>We){if(We=Vn(We-256,ie),ct=En(He.G[4],He.H[4],ie),he(ie),ct=nr(A,ct=Vn(ct,ie)),ie.h)break;if(De-b<ct||M-De<We)break e;for(st=0;st<We;++st)v[De+st]=v[De+st-ct];for(De+=We,X+=We;X>=A;)X-=A,++H,z!=null&&H<=U&&!(H%16)&&z(h,H);if(t(De<=M),X&_e&&(He=jn(xe,X,H)),we!=null)for(;Oe<De;)We=v[Oe++],we.X[(506832829*We&4294967295)>>>we.Mb]=We}else{if(!(We<Ge))break e;for(Ze=We-280,t(we!=null);Oe<De;)We=v[Oe++],we.X[(506832829*We&4294967295)>>>we.Mb]=We;We=De,t(!(Ze>>>(ct=we).Xa)),v[We]=ct.X[Ze],Ze=!0}Ze||t(ie.h==se(ie))}if(h.Pb&&ie.h&&De<M)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&de(h.s.vb,h.s.Wa);else{if(ie.h)break e;z!=null&&z(h,H>U?U:H),h.a=0,h.$=De-b}return 1}return h.a=3,0}function vs(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,t(h!=null)}function zi(){var h=new Nl;return h==null?null:(h.a=0,h.xb=iu,oi("Predictor","VP8LPredictors"),oi("Predictor","VP8LPredictors_C"),oi("PredictorAdd","VP8LPredictorsAdd"),oi("PredictorAdd","VP8LPredictorsAdd_C"),fd=at,Lo=ft,fi=et,Zr=bn,Ha=Bt,ua=Tr,hi=Qt,I.VP8LMapColor32b=Pl,I.VP8LMapColor8b=di,h)}function Rs(h,v,b,A,M){var U=1,z=[h],H=[v],X=A.m,ie=A.s,xe=null,De=0;e:for(;;){if(b)for(;U&&oe(X,1);){var Oe=z,Ee=H,Ge=A,Be=1,we=Ge.m,_e=Ge.gc[Ge.ab],He=oe(we,2);if(Ge.Oc&1<<He)U=0;else{switch(Ge.Oc|=1<<He,_e.hc=He,_e.Ea=Oe[0],_e.nc=Ee[0],_e.K=[null],++Ge.ab,t(4>=Ge.ab),He){case 0:case 1:_e.b=oe(we,3)+2,Be=Rs(Fe(_e.Ea,_e.b),Fe(_e.nc,_e.b),0,Ge,_e.K),_e.K=_e.K[0];break;case 3:var Ze,We=oe(we,8)+1,ct=16<We?0:4<We?1:2<We?2:3;if(Oe[0]=Fe(_e.Ea,ct),_e.b=ct,Ze=Be=Rs(We,1,0,Ge,_e.K)){var st,gt=We,ot=_e,an=1<<(8>>ot.b),fn=s(an);if(fn==null)Ze=0;else{var Ht=ot.K[0],Dt=ot.w;for(fn[0]=ot.K[0][0],st=1;st<1*gt;++st)fn[st]=Re(Ht[Dt+st],fn[st-1]);for(;st<4*an;++st)fn[st]=0;ot.K[0]=null,ot.K[0]=fn,Ze=1}}Be=Ze;break;case 2:break;default:t(0)}U=Be}}if(z=z[0],H=H[0],U&&oe(X,1)&&!(U=1<=(De=oe(X,4))&&11>=De)){A.a=3;break e}var yn;if(yn=U)t:{var wn,Mt,fr,ti=A,Kt=z,qr=H,hn=De,Zn=b,ni=ti.m,ir=ti.s,zn=[null],Wr=1,An=0,Qi=Zg[hn];n:for(;;){if(Zn&&oe(ni,1)){var Ar=oe(ni,3)+2,ma=Fe(Kt,Ar),Do=Fe(qr,Ar),Ka=ma*Do;if(!Rs(ma,Do,0,ti,zn))break n;for(zn=zn[0],ir.xc=Ar,wn=0;wn<Ka;++wn){var Ja=zn[wn]>>8&65535;zn[wn]=Ja,Ja>=Wr&&(Wr=Ja+1)}}if(ni.h)break n;for(Mt=0;5>Mt;++Mt){var Ln=Fp[Mt];!Mt&&0<hn&&(Ln+=1<<hn),An<Ln&&(An=Ln)}var vd=a(Wr*Qi,F),Wp=Wr,Hp=a(Wp,Y);if(Hp==null)var Xa=null;else t(65536>=Wp),Xa=Hp;var ou=s(An);if(Xa==null||ou==null||vd==null){ti.a=1;break n}var yd=vd;for(wn=fr=0;wn<Wr;++wn){var Ai=Xa[wn],Oo=Ai.G,Bl=Ai.H,Gp=0,wd=1,Xf=0;for(Mt=0;5>Mt;++Mt){Ln=Fp[Mt],Oo[Mt]=yd,Bl[Mt]=fr,!Mt&&0<hn&&(Ln+=1<<hn);i:{var Ul,Qf=Ln,zl=ti,ql=ou,Vp=yd,Yp=fr,Wl=0,Qa=zl.m,Kp=oe(Qa,1);if(i(ql,0,0,Qf),Kp){var Jp=oe(Qa,1)+1,d1=oe(Qa,1),Zf=oe(Qa,d1==0?1:8);ql[Zf]=1,Jp==2&&(ql[Zf=oe(Qa,8)]=1);var xd=1}else{var bd=s(19),eh=oe(Qa,4)+4;if(19<eh){zl.a=3;var Hl=0;break i}for(Ul=0;Ul<eh;++Ul)bd[zr[Ul]]=oe(Qa,3);var th=void 0,Ro=void 0,$t=zl,f1=bd,_d=Qf,Gl=ql,Sd=0,Za=$t.m,Xp=8,Li=a(128,F);r:for(;P(Li,0,7,f1,19);){if(oe(Za,1)){var h1=2+2*oe(Za,3);if((th=2+oe(Za,h1))>_d)break r}else th=_d;for(Ro=0;Ro<_d&&th--;){he(Za);var lu=Li[0+(127&K(Za))];ue(Za,Za.u+lu.g);var eo=lu.value;if(16>eo)Gl[Ro++]=eo,eo!=0&&(Xp=eo);else{var Qp=eo==16,nh=eo-16,Pi=Xg[nh],ga=oe(Za,Rp[nh])+Pi;if(Ro+ga>_d)break r;for(var rh=Qp?Xp:0;0<ga--;)Gl[Ro++]=rh}}Sd=1;break r}Sd||($t.a=3),xd=Sd}(xd=xd&&!Qa.h)&&(Wl=P(Vp,Yp,8,ql,Qf)),xd&&Wl!=0?Hl=Wl:(zl.a=3,Hl=0)}if(Hl==0)break n;if(wd&&yr[Mt]==1&&(wd=yd[fr].g==0),Gp+=yd[fr].g,fr+=Hl,3>=Mt){var Vl,Yl=ou[0];for(Vl=1;Vl<Ln;++Vl)ou[Vl]>Yl&&(Yl=ou[Vl]);Xf+=Yl}}if(Ai.nd=wd,Ai.Qb=0,wd&&(Ai.qb=(Oo[3][Bl[3]+0].value<<24|Oo[1][Bl[1]+0].value<<16|Oo[2][Bl[2]+0].value)>>>0,Gp==0&&256>Oo[0][Bl[0]+0].value&&(Ai.Qb=1,Ai.qb+=Oo[0][Bl[0]+0].value<<8)),Ai.jc=!Ai.Qb&&6>Xf,Ai.jc){var cu,Ns=Ai;for(cu=0;cu<Or;++cu){var va=cu,Vs=Ns.pd[va],Kl=Ns.G[0][Ns.H[0]+va];256<=Kl.value?(Vs.g=Kl.g+256,Vs.value=Kl.value):(Vs.g=0,Vs.value=0,va>>=Pn(Kl,8,Vs),va>>=Pn(Ns.G[1][Ns.H[1]+va],16,Vs),va>>=Pn(Ns.G[2][Ns.H[2]+va],0,Vs),Pn(Ns.G[3][Ns.H[3]+va],24,Vs))}}}ir.vc=zn,ir.Wb=Wr,ir.Ya=Xa,ir.yc=vd,yn=1;break t}yn=0}if(!(U=yn)){A.a=3;break e}if(0<De){if(ie.ua=1<<De,!Me(ie.Wa,De)){A.a=1,U=0;break e}}else ie.ua=0;var Ys=A,Zp=z,to=H,Nd=Ys.s,kd=Nd.xc;if(Ys.c=Zp,Ys.i=to,Nd.md=Fe(Zp,kd),Nd.wc=kd==0?-1:(1<<kd)-1,b){A.xb=t1;break e}if((xe=s(z*H))==null){A.a=1,U=0;break e}U=(U=gs(A,xe,0,z,H,H,null))&&!X.h;break e}return U?(M!=null?M[0]=xe:(t(xe==null),t(b)),A.$=0,b||vs(ie)):vs(ie),U}function So(h,v){var b=h.c*h.i,A=b+v+16*v;return t(h.c<=v),h.V=s(A),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+v,1)}function ll(h,v){var b=h.C,A=v-b,M=h.V,U=h.Ba+h.c*b;for(t(v<=h.l.o);0<A;){var z=16<A?16:A,H=h.l.ma,X=h.l.width,ie=X*z,xe=H.ca,De=H.tb+X*b,Oe=h.Ta,Ee=h.Ua;Yn(h,z,M,U),rr(Oe,Ee,xe,De,ie),ps(H,b,b+z,xe,De,X),A-=z,M+=z*h.c,b+=z}t(b==v),h.C=h.Ma=v}function cl(){this.ub=this.yd=this.td=this.Rb=0}function ul(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function oa(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Yu(){this.Yb=function(){var h=[];return function v(b,A,M){for(var U=M[A],z=0;z<U&&(b.push(M.length>A+1?[]:0),!(M.length<A+1));z++)v(b[z],A+1,M)}(h,0,[3,11]),h}()}function dl(){this.jb=s(3),this.Wc=l([4,8],Yu),this.Xc=l([4,17],Yu)}function Df(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function fl(){this.ld=this.La=this.dd=this.tc=0}function Ku(){this.Na=this.la=0}function Ju(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xu(){this.uc=this.M=this.Nb=0,this.wa=Array(new fl),this.Y=0,this.ya=Array(new hl),this.aa=0,this.l=new pl}function Qu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Of(){this.cb=this.a=0,this.sc="",this.m=new Le,this.Od=new cl,this.Kc=new ul,this.ed=new Df,this.Qa=new oa,this.Ic=this.$c=this.Aa=0,this.D=new Xu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Le),this.ia=0,this.pb=a(4,Ju),this.Pa=new dl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qu),this.Hd=0,this.rb=Array(new Ku),this.sb=0,this.wa=Array(new fl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hl),this.L=this.aa=0,this.gd=l([4,2],fl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function pl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rf(){var h=new Of;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,fa||(fa=ml)),h}function Kn(h,v,b){return h.a==0&&(h.a=v,h.sc=b,h.cb=0),0}function $c(h,v,b){return 3<=b&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function Bc(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return Kn(h,2,"null VP8Io passed to VP8GetHeaders()");var b=v.data,A=v.w,M=v.ha;if(4>M)return Kn(h,7,"Truncated header.");var U=b[A+0]|b[A+1]<<8|b[A+2]<<16,z=h.Od;if(z.Rb=!(1&U),z.td=U>>1&7,z.yd=U>>4&1,z.ub=U>>5,3<z.td)return Kn(h,3,"Incorrect keyframe parameters.");if(!z.yd)return Kn(h,4,"Frame not displayable.");A+=3,M-=3;var H=h.Kc;if(z.Rb){if(7>M)return Kn(h,7,"cannot parse picture header");if(!$c(b,A,M))return Kn(h,3,"Bad code word");H.c=16383&(b[A+4]<<8|b[A+3]),H.Td=b[A+4]>>6,H.i=16383&(b[A+6]<<8|b[A+5]),H.Ud=b[A+6]>>6,A+=7,M-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,v.width=H.c,v.height=H.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((U=h.Pa).jb,0,255,U.jb.length),t((U=h.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,i(U.Zb,0,0,U.Zb.length),i(U.Lb,0,0,U.Lb)}if(z.ub>M)return Kn(h,7,"bad partition length");pe(U=h.m,b,A,z.ub),A+=z.ub,M-=z.ub,z.Rb&&(H.Ld=Ce(U),H.Kd=Ce(U)),H=h.Qa;var X,ie=h.Pa;if(t(U!=null),t(H!=null),H.Cb=Ce(U),H.Cb){if(H.Bb=Ce(U),Ce(U)){for(H.Fb=Ce(U),X=0;4>X;++X)H.Zb[X]=Ce(U)?Q(U,7):0;for(X=0;4>X;++X)H.Lb[X]=Ce(U)?Q(U,6):0}if(H.Bb)for(X=0;3>X;++X)ie.jb[X]=Ce(U)?ge(U,8):255}else H.Bb=0;if(U.Ka)return Kn(h,3,"cannot parse segment header");if((H=h.ed).zd=Ce(U),H.Tb=ge(U,6),H.wb=ge(U,3),H.Pc=Ce(U),H.Pc&&Ce(U)){for(ie=0;4>ie;++ie)Ce(U)&&(H.vd[ie]=Q(U,6));for(ie=0;4>ie;++ie)Ce(U)&&(H.od[ie]=Q(U,6))}if(h.L=H.Tb==0?0:H.zd?1:2,U.Ka)return Kn(h,3,"cannot parse filter header");var xe=M;if(M=X=A,A=X+xe,H=xe,h.Xb=(1<<ge(h.m,2))-1,xe<3*(ie=h.Xb))b=7;else{for(X+=3*ie,H-=3*ie,xe=0;xe<ie;++xe){var De=b[M+0]|b[M+1]<<8|b[M+2]<<16;De>H&&(De=H),pe(h.Jc[+xe],b,X,De),X+=De,H-=De,M+=3}pe(h.Jc[+ie],b,X,H),b=X<A?0:5}if(b!=0)return Kn(h,b,"cannot parse partitions");for(b=ge(X=h.m,7),M=Ce(X)?Q(X,4):0,A=Ce(X)?Q(X,4):0,H=Ce(X)?Q(X,4):0,ie=Ce(X)?Q(X,4):0,X=Ce(X)?Q(X,4):0,xe=h.Qa,De=0;4>De;++De){if(xe.Cb){var Oe=xe.Zb[De];xe.Fb||(Oe+=b)}else{if(0<De){h.pb[De]=h.pb[0];continue}Oe=b}var Ee=h.pb[De];Ee.Sc[0]=Yf[Tn(Oe+M,127)],Ee.Sc[1]=nu[Tn(Oe+0,127)],Ee.Eb[0]=2*Yf[Tn(Oe+A,127)],Ee.Eb[1]=101581*nu[Tn(Oe+H,127)]>>16,8>Ee.Eb[1]&&(Ee.Eb[1]=8),Ee.Qc[0]=Yf[Tn(Oe+ie,117)],Ee.Qc[1]=nu[Tn(Oe+X,127)],Ee.lc=Oe+X}if(!z.Rb)return Kn(h,4,"Not a key frame.");for(Ce(U),z=h.Pa,b=0;4>b;++b){for(M=0;8>M;++M)for(A=0;3>A;++A)for(H=0;11>H;++H)ie=ne(U,Fl[b][M][A][H])?ge(U,8):ru[b][M][A][H],z.Wc[b][M].Yb[A][H]=ie;for(M=0;17>M;++M)z.Xc[b][M]=z.Wc[b][e1[M]]}return h.kc=Ce(U),h.kc&&(h.Bd=ge(U,8)),h.cb=1}function ml(h,v,b,A,M,U,z){var H=v[M].Yb[b];for(b=0;16>M;++M){if(!ne(h,H[b+0]))return M;for(;!ne(h,H[b+1]);)if(H=v[++M].Yb[0],b=0,M==16)return 16;var X=v[M+1].Yb;if(ne(h,H[b+2])){var ie=h,xe=0;if(ne(ie,(Oe=H)[(De=b)+3]))if(ne(ie,Oe[De+6])){for(H=0,De=2*(xe=ne(ie,Oe[De+8]))+(Oe=ne(ie,Oe[De+9+xe])),xe=0,Oe=Kf[De];Oe[H];++H)xe+=xe+ne(ie,Oe[H]);xe+=3+(8<<De)}else ne(ie,Oe[De+7])?(xe=7+2*ne(ie,165),xe+=ne(ie,145)):xe=5+ne(ie,159);else xe=ne(ie,Oe[De+4])?3+ne(ie,Oe[De+5]):2;H=X[2]}else xe=1,H=X[1];X=z+Ol[M],0>(ie=h).b&&je(ie);var De,Oe=ie.b,Ee=(De=ie.Ca>>1)-(ie.I>>Oe)>>31;--ie.b,ie.Ca+=Ee,ie.Ca|=1,ie.I-=(De+1&Ee)<<Oe,U[X]=((xe^Ee)-Ee)*A[(0<M)+0]}return 16}function Uc(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Zu(h,v){if(h==null)return 0;if(v==null)return Kn(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Bc(h,v))return 0;if(t(h.cb),v.ac==null||v.ac(v)){v.ob&&(h.L=0);var b=gd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=v.v-b>>4,h.zb=v.j-b>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+b>>4,h.Hb=v.va+15+b>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var A=h.ed;for(b=0;4>b;++b){var M;if(h.Qa.Cb){var U=h.Qa.Lb[b];h.Qa.Fb||(U+=A.Tb)}else U=A.Tb;for(M=0;1>=M;++M){var z=h.gd[b][M],H=U;if(A.Pc&&(H+=A.vd[0],M&&(H+=A.od[0])),0<(H=0>H?0:63<H?63:H)){var X=H;0<A.wb&&(X=4<A.wb?X>>2:X>>1)>9-A.wb&&(X=9-A.wb),1>X&&(X=1),z.dd=X,z.tc=2*H+X,z.ld=40<=H?2:15<=H?1:0}else z.tc=0;z.La=M}}}b=0}else Kn(h,6,"Frame setup failed"),b=h.a;if(b=b==0){if(b){h.$c=0,0<h.Aa||(h.Ic=u1);e:{b=h.Ic,A=4*(X=h.za);var ie=32*X,xe=X+1,De=0<h.L?X*(0<h.Aa?2:1):0,Oe=(h.Aa==2?2:1)*X;if((z=A+832+(M=3*(16*b+gd[h.L])/2*ie)+(U=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=z)b=0;else{if(z>h.Vb){if(h.Vb=0,h.Ec=s(z),h.Fc=0,h.Ec==null){b=Kn(h,1,"no memory during frame initialization.");break e}h.Vb=z}z=h.Ec,H=h.Fc,h.Ac=z,h.Bc=H,H+=A,h.Gd=a(ie,Qu),h.Hd=0,h.rb=a(xe+1,Ku),h.sb=1,h.wa=De?a(De,fl):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=X),t(!0),h.oc=z,h.pc=H,H+=832,h.ya=a(Oe,hl),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=X),h.R=16*X,h.B=8*X,X=(ie=gd[h.L])*h.R,ie=ie/2*h.B,h.sa=z,h.ta=H+X,h.qa=h.sa,h.ra=h.ta+16*b*h.R+ie,h.Ha=h.qa,h.Ia=h.ra+8*b*h.B+ie,h.$c=0,H+=M,h.mb=U?z:null,h.nb=U?H:null,t(H+U<=h.Fc+h.Vb),Uc(h),i(h.Ac,h.Bc,0,A),b=1}}if(b){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!Zc){for(b=-255;255>=b;++b)vr[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Ki[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Ji[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)da[255+b]=0>b?0:255<b?255:b;Zc=1}Se=Wc,ze=qc,dt=ed,xt=td,Ot=vl,Ie=zc,Rn=bl,dn=Ua,Po=ud,To=_l,Cr=cd,xs=Co,Mo=Ir,bs=dd,Ws=dr,_s=qi,en=Xr,Yi=ld,Ss[0]=Bs,Ss[1]=nd,Ss[2]=Bf,Ss[3]=Uf,Ss[4]=sd,Ss[5]=wl,Ss[6]=yl,Ss[7]=Gc,Ss[8]=qf,Ss[9]=zf,Ya[0]=Hc,Ya[1]=Ff,Ya[2]=$s,Ya[3]=ko,Ya[4]=Ur,Ya[5]=$f,Ya[6]=id,ha[0]=Ba,ha[1]=rd,ha[2]=Wf,ha[3]=mn,ha[4]=jo,ha[5]=Hf,ha[6]=Vc,b=1}else b=0}b&&(b=function(Ee,Ge){for(Ee.M=0;Ee.M<Ee.Va;++Ee.M){var Be,we=Ee.Jc[Ee.M&Ee.Xb],_e=Ee.m,He=Ee;for(Be=0;Be<He.za;++Be){var Ze=_e,We=He,ct=We.Ac,st=We.Bc+4*Be,gt=We.zc,ot=We.ya[We.aa+Be];if(We.Qa.Bb?ot.$b=ne(Ze,We.Pa.jb[0])?2+ne(Ze,We.Pa.jb[2]):ne(Ze,We.Pa.jb[1]):ot.$b=0,We.kc&&(ot.Ad=ne(Ze,We.Bd)),ot.Za=!ne(Ze,145)+0,ot.Za){var an=ot.Ob,fn=0;for(We=0;4>We;++We){var Ht,Dt=gt[0+We];for(Ht=0;4>Ht;++Ht){Dt=pd[ct[st+Ht]][Dt];for(var yn=Rl[ne(Ze,Dt[0])];0<yn;)yn=Rl[2*yn+ne(Ze,Dt[yn])];Dt=-yn,ct[st+Ht]=Dt}r(an,fn,ct,st,4),fn+=4,gt[0+We]=Dt}}else Dt=ne(Ze,156)?ne(Ze,128)?1:3:ne(Ze,163)?2:0,ot.Ob[0]=Dt,i(ct,st,Dt,4),i(gt,0,Dt,4);ot.Dd=ne(Ze,142)?ne(Ze,114)?ne(Ze,183)?1:3:2:0}if(He.m.Ka)return Kn(Ee,7,"Premature end-of-partition0 encountered.");for(;Ee.ja<Ee.za;++Ee.ja){if(He=we,Ze=(_e=Ee).rb[_e.sb-1],ct=_e.rb[_e.sb+_e.ja],Be=_e.ya[_e.aa+_e.ja],st=_e.kc?Be.Ad:0)Ze.la=ct.la=0,Be.Za||(Ze.Na=ct.Na=0),Be.Hc=0,Be.Gc=0,Be.ia=0;else{var wn,Mt;if(Ze=ct,ct=He,st=_e.Pa.Xc,gt=_e.ya[_e.aa+_e.ja],ot=_e.pb[gt.$b],We=gt.ad,an=0,fn=_e.rb[_e.sb-1],Dt=Ht=0,i(We,an,0,384),gt.Za)var fr=0,ti=st[3];else{yn=s(16);var Kt=Ze.Na+fn.Na;if(Kt=fa(ct,st[1],Kt,ot.Eb,0,yn,0),Ze.Na=fn.Na=(0<Kt)+0,1<Kt)Se(yn,0,We,an);else{var qr=yn[0]+3>>3;for(yn=0;256>yn;yn+=16)We[an+yn]=qr}fr=1,ti=st[0]}var hn=15&Ze.la,Zn=15&fn.la;for(yn=0;4>yn;++yn){var ni=1&Zn;for(qr=Mt=0;4>qr;++qr)hn=hn>>1|(ni=(Kt=fa(ct,ti,Kt=ni+(1&hn),ot.Sc,fr,We,an))>fr)<<7,Mt=Mt<<2|(3<Kt?3:1<Kt?2:We[an+0]!=0),an+=16;hn>>=4,Zn=Zn>>1|ni<<7,Ht=(Ht<<8|Mt)>>>0}for(ti=hn,fr=Zn>>4,wn=0;4>wn;wn+=2){for(Mt=0,hn=Ze.la>>4+wn,Zn=fn.la>>4+wn,yn=0;2>yn;++yn){for(ni=1&Zn,qr=0;2>qr;++qr)Kt=ni+(1&hn),hn=hn>>1|(ni=0<(Kt=fa(ct,st[2],Kt,ot.Qc,0,We,an)))<<3,Mt=Mt<<2|(3<Kt?3:1<Kt?2:We[an+0]!=0),an+=16;hn>>=2,Zn=Zn>>1|ni<<5}Dt|=Mt<<4*wn,ti|=hn<<4<<wn,fr|=(240&Zn)<<wn}Ze.la=ti,fn.la=fr,gt.Hc=Ht,gt.Gc=Dt,gt.ia=43690&Dt?0:ot.ia,st=!(Ht|Dt)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[Be.$b][Be.Za],_e.wa[_e.Y+_e.ja].La|=!st),He.Ka)return Kn(Ee,7,"Premature end-of-file encountered.")}if(Uc(Ee),_e=Ge,He=1,Be=(we=Ee).D,Ze=0<we.L&&we.M>=we.zb&&we.M<=we.Va,we.Aa==0)e:{if(Be.M=we.M,Be.uc=Ze,El(we,Be),He=1,Be=(Mt=we.D).Nb,Ze=(Dt=gd[we.L])*we.R,ct=Dt/2*we.B,yn=16*Be*we.R,qr=8*Be*we.B,st=we.sa,gt=we.ta-Ze+yn,ot=we.qa,We=we.ra-ct+qr,an=we.Ha,fn=we.Ia-ct+qr,Zn=(hn=Mt.M)==0,Ht=hn>=we.Va-1,we.Aa==2&&El(we,Mt),Mt.uc)for(ni=(Kt=we).D.M,t(Kt.D.uc),Mt=Kt.yb;Mt<Kt.Hb;++Mt){fr=Mt,ti=ni;var ir=(zn=(Ln=Kt).D).Nb;wn=Ln.R;var zn=zn.wa[zn.Y+fr],Wr=Ln.sa,An=Ln.ta+16*ir*wn+16*fr,Qi=zn.dd,Ar=zn.tc;if(Ar!=0)if(t(3<=Ar),Ln.L==1)0<fr&&_s(Wr,An,wn,Ar+4),zn.La&&Yi(Wr,An,wn,Ar),0<ti&&Ws(Wr,An,wn,Ar+4),zn.La&&en(Wr,An,wn,Ar);else{var ma=Ln.B,Do=Ln.qa,Ka=Ln.ra+8*ir*ma+8*fr,Ja=Ln.Ha,Ln=Ln.Ia+8*ir*ma+8*fr;ir=zn.ld,0<fr&&(dn(Wr,An,wn,Ar+4,Qi,ir),To(Do,Ka,Ja,Ln,ma,Ar+4,Qi,ir)),zn.La&&(xs(Wr,An,wn,Ar,Qi,ir),bs(Do,Ka,Ja,Ln,ma,Ar,Qi,ir)),0<ti&&(Rn(Wr,An,wn,Ar+4,Qi,ir),Po(Do,Ka,Ja,Ln,ma,Ar+4,Qi,ir)),zn.La&&(Cr(Wr,An,wn,Ar,Qi,ir),Mo(Do,Ka,Ja,Ln,ma,Ar,Qi,ir))}}if(we.ia&&alert("todo:DitherRow"),_e.put!=null){if(Mt=16*hn,hn=16*(hn+1),Zn?(_e.y=we.sa,_e.O=we.ta+yn,_e.f=we.qa,_e.N=we.ra+qr,_e.ea=we.Ha,_e.W=we.Ia+qr):(Mt-=Dt,_e.y=st,_e.O=gt,_e.f=ot,_e.N=We,_e.ea=an,_e.W=fn),Ht||(hn-=Dt),hn>_e.o&&(hn=_e.o),_e.F=null,_e.J=null,we.Fa!=null&&0<we.Fa.length&&Mt<hn&&(_e.J=Jc(we,_e,Mt,hn-Mt),_e.F=we.mb,_e.F==null&&_e.F.length==0)){He=Kn(we,3,"Could not decode alpha data.");break e}Mt<_e.j&&(Dt=_e.j-Mt,Mt=_e.j,t(!(1&Dt)),_e.O+=we.R*Dt,_e.N+=we.B*(Dt>>1),_e.W+=we.B*(Dt>>1),_e.F!=null&&(_e.J+=_e.width*Dt)),Mt<hn&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=Mt-_e.j,_e.U=_e.va-_e.v,_e.T=hn-Mt,He=_e.put(_e))}Be+1!=we.Ic||Ht||(r(we.sa,we.ta-Ze,st,gt+16*we.R,Ze),r(we.qa,we.ra-ct,ot,We+8*we.B,ct),r(we.Ha,we.Ia-ct,an,fn+8*we.B,ct))}if(!He)return Kn(Ee,6,"Output aborted.")}return 1}(h,v)),v.bc!=null&&v.bc(v),b&=1}return b?(h.cb=0,b):0}function ci(h,v,b,A,M){M=h[v+b+32*A]+(M>>3),h[v+b+32*A]=-256&M?0>M?0:255:M}function No(h,v,b,A,M,U){ci(h,v,0,b,A+M),ci(h,v,1,b,A+U),ci(h,v,2,b,A-U),ci(h,v,3,b,A-M)}function ui(h){return(20091*h>>16)+h}function gl(h,v,b,A){var M,U=0,z=s(16);for(M=0;4>M;++M){var H=h[v+0]+h[v+8],X=h[v+0]-h[v+8],ie=(35468*h[v+4]>>16)-ui(h[v+12]),xe=ui(h[v+4])+(35468*h[v+12]>>16);z[U+0]=H+xe,z[U+1]=X+ie,z[U+2]=X-ie,z[U+3]=H-xe,U+=4,v++}for(M=U=0;4>M;++M)H=(h=z[U+0]+4)+z[U+8],X=h-z[U+8],ie=(35468*z[U+4]>>16)-ui(z[U+12]),ci(b,A,0,0,H+(xe=ui(z[U+4])+(35468*z[U+12]>>16))),ci(b,A,1,0,X+ie),ci(b,A,2,0,X-ie),ci(b,A,3,0,H-xe),U++,A+=32}function zc(h,v,b,A){var M=h[v+0]+4,U=35468*h[v+4]>>16,z=ui(h[v+4]),H=35468*h[v+1]>>16;No(b,A,0,M+z,h=ui(h[v+1]),H),No(b,A,1,M+U,h,H),No(b,A,2,M-U,h,H),No(b,A,3,M-z,h,H)}function qc(h,v,b,A,M){gl(h,v,b,A),M&&gl(h,v+16,b,A+4)}function ed(h,v,b,A){ze(h,v+0,b,A,1),ze(h,v+32,b,A+128,1)}function td(h,v,b,A){var M;for(h=h[v+0]+4,M=0;4>M;++M)for(v=0;4>v;++v)ci(b,A,v,M,h)}function vl(h,v,b,A){h[v+0]&&xt(h,v+0,b,A),h[v+16]&&xt(h,v+16,b,A+4),h[v+32]&&xt(h,v+32,b,A+128),h[v+48]&&xt(h,v+48,b,A+128+4)}function Wc(h,v,b,A){var M,U=s(16);for(M=0;4>M;++M){var z=h[v+0+M]+h[v+12+M],H=h[v+4+M]+h[v+8+M],X=h[v+4+M]-h[v+8+M],ie=h[v+0+M]-h[v+12+M];U[0+M]=z+H,U[8+M]=z-H,U[4+M]=ie+X,U[12+M]=ie-X}for(M=0;4>M;++M)z=(h=U[0+4*M]+3)+U[3+4*M],H=U[1+4*M]+U[2+4*M],X=U[1+4*M]-U[2+4*M],ie=h-U[3+4*M],b[A+0]=z+H>>3,b[A+16]=ie+X>>3,b[A+32]=z-H>>3,b[A+48]=ie-X>>3,A+=64}function Fs(h,v,b){var A,M=v-32,U=pi,z=255-h[M-1];for(A=0;A<b;++A){var H,X=U,ie=z+h[v-1];for(H=0;H<b;++H)h[v+H]=X[ie+h[M+H]];v+=32}}function nd(h,v){Fs(h,v,4)}function rd(h,v){Fs(h,v,8)}function Ff(h,v){Fs(h,v,16)}function $s(h,v){var b;for(b=0;16>b;++b)r(h,v+32*b,h,v-32,16)}function ko(h,v){var b;for(b=16;0<b;--b)i(h,v,h[v-1],16),v+=32}function Eo(h,v,b){var A;for(A=0;16>A;++A)i(v,b+32*A,h,16)}function Hc(h,v){var b,A=16;for(b=0;16>b;++b)A+=h[v-1+32*b]+h[v+b-32];Eo(A>>5,h,v)}function Ur(h,v){var b,A=8;for(b=0;16>b;++b)A+=h[v-1+32*b];Eo(A>>4,h,v)}function $f(h,v){var b,A=8;for(b=0;16>b;++b)A+=h[v+b-32];Eo(A>>4,h,v)}function id(h,v){Eo(128,h,v)}function Lt(h,v,b){return h+2*v+b+2>>2}function Bf(h,v){var b,A=v-32;for(A=new Uint8Array([Lt(h[A-1],h[A+0],h[A+1]),Lt(h[A+0],h[A+1],h[A+2]),Lt(h[A+1],h[A+2],h[A+3]),Lt(h[A+2],h[A+3],h[A+4])]),b=0;4>b;++b)r(h,v+32*b,A,0,A.length)}function Uf(h,v){var b=h[v-1],A=h[v-1+32],M=h[v-1+64],U=h[v-1+96];ce(h,v+0,16843009*Lt(h[v-1-32],b,A)),ce(h,v+32,16843009*Lt(b,A,M)),ce(h,v+64,16843009*Lt(A,M,U)),ce(h,v+96,16843009*Lt(M,U,U))}function Bs(h,v){var b,A=4;for(b=0;4>b;++b)A+=h[v+b-32]+h[v-1+32*b];for(A>>=3,b=0;4>b;++b)i(h,v+32*b,A,4)}function sd(h,v){var b=h[v-1+0],A=h[v-1+32],M=h[v-1+64],U=h[v-1-32],z=h[v+0-32],H=h[v+1-32],X=h[v+2-32],ie=h[v+3-32];h[v+0+96]=Lt(A,M,h[v-1+96]),h[v+1+96]=h[v+0+64]=Lt(b,A,M),h[v+2+96]=h[v+1+64]=h[v+0+32]=Lt(U,b,A),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=Lt(z,U,b),h[v+3+64]=h[v+2+32]=h[v+1+0]=Lt(H,z,U),h[v+3+32]=h[v+2+0]=Lt(X,H,z),h[v+3+0]=Lt(ie,X,H)}function yl(h,v){var b=h[v+1-32],A=h[v+2-32],M=h[v+3-32],U=h[v+4-32],z=h[v+5-32],H=h[v+6-32],X=h[v+7-32];h[v+0+0]=Lt(h[v+0-32],b,A),h[v+1+0]=h[v+0+32]=Lt(b,A,M),h[v+2+0]=h[v+1+32]=h[v+0+64]=Lt(A,M,U),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=Lt(M,U,z),h[v+3+32]=h[v+2+64]=h[v+1+96]=Lt(U,z,H),h[v+3+64]=h[v+2+96]=Lt(z,H,X),h[v+3+96]=Lt(H,X,X)}function wl(h,v){var b=h[v-1+0],A=h[v-1+32],M=h[v-1+64],U=h[v-1-32],z=h[v+0-32],H=h[v+1-32],X=h[v+2-32],ie=h[v+3-32];h[v+0+0]=h[v+1+64]=U+z+1>>1,h[v+1+0]=h[v+2+64]=z+H+1>>1,h[v+2+0]=h[v+3+64]=H+X+1>>1,h[v+3+0]=X+ie+1>>1,h[v+0+96]=Lt(M,A,b),h[v+0+64]=Lt(A,b,U),h[v+0+32]=h[v+1+96]=Lt(b,U,z),h[v+1+32]=h[v+2+96]=Lt(U,z,H),h[v+2+32]=h[v+3+96]=Lt(z,H,X),h[v+3+32]=Lt(H,X,ie)}function Gc(h,v){var b=h[v+0-32],A=h[v+1-32],M=h[v+2-32],U=h[v+3-32],z=h[v+4-32],H=h[v+5-32],X=h[v+6-32],ie=h[v+7-32];h[v+0+0]=b+A+1>>1,h[v+1+0]=h[v+0+64]=A+M+1>>1,h[v+2+0]=h[v+1+64]=M+U+1>>1,h[v+3+0]=h[v+2+64]=U+z+1>>1,h[v+0+32]=Lt(b,A,M),h[v+1+32]=h[v+0+96]=Lt(A,M,U),h[v+2+32]=h[v+1+96]=Lt(M,U,z),h[v+3+32]=h[v+2+96]=Lt(U,z,H),h[v+3+64]=Lt(z,H,X),h[v+3+96]=Lt(H,X,ie)}function zf(h,v){var b=h[v-1+0],A=h[v-1+32],M=h[v-1+64],U=h[v-1+96];h[v+0+0]=b+A+1>>1,h[v+2+0]=h[v+0+32]=A+M+1>>1,h[v+2+32]=h[v+0+64]=M+U+1>>1,h[v+1+0]=Lt(b,A,M),h[v+3+0]=h[v+1+32]=Lt(A,M,U),h[v+3+32]=h[v+1+64]=Lt(M,U,U),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=U}function qf(h,v){var b=h[v-1+0],A=h[v-1+32],M=h[v-1+64],U=h[v-1+96],z=h[v-1-32],H=h[v+0-32],X=h[v+1-32],ie=h[v+2-32];h[v+0+0]=h[v+2+32]=b+z+1>>1,h[v+0+32]=h[v+2+64]=A+b+1>>1,h[v+0+64]=h[v+2+96]=M+A+1>>1,h[v+0+96]=U+M+1>>1,h[v+3+0]=Lt(H,X,ie),h[v+2+0]=Lt(z,H,X),h[v+1+0]=h[v+3+32]=Lt(b,z,H),h[v+1+32]=h[v+3+64]=Lt(A,b,z),h[v+1+64]=h[v+3+96]=Lt(M,A,b),h[v+1+96]=Lt(U,M,A)}function Wf(h,v){var b;for(b=0;8>b;++b)r(h,v+32*b,h,v-32,8)}function mn(h,v){var b;for(b=0;8>b;++b)i(h,v,h[v-1],8),v+=32}function sn(h,v,b){var A;for(A=0;8>A;++A)i(v,b+32*A,h,8)}function Ba(h,v){var b,A=8;for(b=0;8>b;++b)A+=h[v+b-32]+h[v-1+32*b];sn(A>>4,h,v)}function Hf(h,v){var b,A=4;for(b=0;8>b;++b)A+=h[v+b-32];sn(A>>3,h,v)}function jo(h,v){var b,A=4;for(b=0;8>b;++b)A+=h[v-1+32*b];sn(A>>3,h,v)}function Vc(h,v){sn(128,h,v)}function xl(h,v,b){var A=h[v-b],M=h[v+0],U=3*(M-A)+Tl[1020+h[v-2*b]-h[v+b]],z=eu[112+(U+4>>3)];h[v-b]=pi[255+A+eu[112+(U+3>>3)]],h[v+0]=pi[255+M-z]}function ad(h,v,b,A){var M=h[v+0],U=h[v+b];return ei[255+h[v-2*b]-h[v-b]]>A||ei[255+U-M]>A}function Yc(h,v,b,A){return 4*ei[255+h[v-b]-h[v+0]]+ei[255+h[v-2*b]-h[v+b]]<=A}function od(h,v,b,A,M){var U=h[v-3*b],z=h[v-2*b],H=h[v-b],X=h[v+0],ie=h[v+b],xe=h[v+2*b],De=h[v+3*b];return 4*ei[255+H-X]+ei[255+z-ie]>A?0:ei[255+h[v-4*b]-U]<=M&&ei[255+U-z]<=M&&ei[255+z-H]<=M&&ei[255+De-xe]<=M&&ei[255+xe-ie]<=M&&ei[255+ie-X]<=M}function dr(h,v,b,A){var M=2*A+1;for(A=0;16>A;++A)Yc(h,v+A,b,M)&&xl(h,v+A,b)}function qi(h,v,b,A){var M=2*A+1;for(A=0;16>A;++A)Yc(h,v+A*b,1,M)&&xl(h,v+A*b,1)}function Xr(h,v,b,A){var M;for(M=3;0<M;--M)dr(h,v+=4*b,b,A)}function ld(h,v,b,A){var M;for(M=3;0<M;--M)qi(h,v+=4,b,A)}function Us(h,v,b,A,M,U,z,H){for(U=2*U+1;0<M--;){if(od(h,v,b,U,z))if(ad(h,v,b,H))xl(h,v,b);else{var X=h,ie=v,xe=b,De=X[ie-2*xe],Oe=X[ie-xe],Ee=X[ie+0],Ge=X[ie+xe],Be=X[ie+2*xe],we=27*(He=Tl[1020+3*(Ee-Oe)+Tl[1020+De-Ge]])+63>>7,_e=18*He+63>>7,He=9*He+63>>7;X[ie-3*xe]=pi[255+X[ie-3*xe]+He],X[ie-2*xe]=pi[255+De+_e],X[ie-xe]=pi[255+Oe+we],X[ie+0]=pi[255+Ee-we],X[ie+xe]=pi[255+Ge-_e],X[ie+2*xe]=pi[255+Be-He]}v+=A}}function Jn(h,v,b,A,M,U,z,H){for(U=2*U+1;0<M--;){if(od(h,v,b,U,z))if(ad(h,v,b,H))xl(h,v,b);else{var X=h,ie=v,xe=b,De=X[ie-xe],Oe=X[ie+0],Ee=X[ie+xe],Ge=eu[112+((Be=3*(Oe-De))+4>>3)],Be=eu[112+(Be+3>>3)],we=Ge+1>>1;X[ie-2*xe]=pi[255+X[ie-2*xe]+we],X[ie-xe]=pi[255+De+Be],X[ie+0]=pi[255+Oe-Ge],X[ie+xe]=pi[255+Ee-we]}v+=A}}function bl(h,v,b,A,M,U){Us(h,v,b,1,16,A,M,U)}function Ua(h,v,b,A,M,U){Us(h,v,1,b,16,A,M,U)}function cd(h,v,b,A,M,U){var z;for(z=3;0<z;--z)Jn(h,v+=4*b,b,1,16,A,M,U)}function Co(h,v,b,A,M,U){var z;for(z=3;0<z;--z)Jn(h,v+=4,1,b,16,A,M,U)}function ud(h,v,b,A,M,U,z,H){Us(h,v,M,1,8,U,z,H),Us(b,A,M,1,8,U,z,H)}function _l(h,v,b,A,M,U,z,H){Us(h,v,1,M,8,U,z,H),Us(b,A,1,M,8,U,z,H)}function Ir(h,v,b,A,M,U,z,H){Jn(h,v+4*M,M,1,8,U,z,H),Jn(b,A+4*M,M,1,8,U,z,H)}function dd(h,v,b,A,M,U,z,H){Jn(h,v+4,1,M,8,U,z,H),Jn(b,A+4,1,M,8,U,z,H)}function Dr(){this.ba=new li,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Vt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Kc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Sl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ys(){this.ua=0,this.Wa=new B,this.vb=new B,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new F}function Nl(){this.xb=this.a=0,this.l=new pl,this.ca=new li,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ys,this.ab=0,this.gc=a(4,Sl),this.Oc=0}function za(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function un(h,v,b,A,M,U,z){for(h=h==null?0:h[v+0],v=0;v<z;++v)M[U+v]=h+b[A+v]&255,h=M[U+v]}function Wi(h,v,b,A,M,U,z){var H;if(h==null)un(null,null,b,A,M,U,z);else for(H=0;H<z;++H)M[U+H]=h[v+H]+b[A+H]&255}function zs(h,v,b,A,M,U,z){if(h==null)un(null,null,b,A,M,U,z);else{var H,X=h[v+0],ie=X,xe=X;for(H=0;H<z;++H)ie=xe+(X=h[v+H])-ie,xe=b[A+H]+(-256&ie?0>ie?0:255:ie)&255,ie=X,M[U+H]=xe}}function Jc(h,v,b,A){var M=v.width,U=v.o;if(t(h!=null&&v!=null),0>b||0>=A||b+A>U)return null;if(!h.Cc){if(h.ga==null){var z;if(h.ga=new za,(z=h.ga==null)||(z=v.width*v.o,t(h.Gb.length==0),h.Gb=s(z),h.Uc=0,h.Gb==null?z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,z=1),z=!z),!z){z=h.ga;var H=h.Fa,X=h.P,ie=h.qc,xe=h.mb,De=h.nb,Oe=X+1,Ee=ie-1,Ge=z.l;if(t(H!=null&&xe!=null&&v!=null),Xi[0]=null,Xi[1]=un,Xi[2]=Wi,Xi[3]=zs,z.ca=xe,z.tb=De,z.c=v.width,z.i=v.height,t(0<z.c&&0<z.i),1>=ie)v=0;else if(z.$a=H[X+0]>>0&3,z.Z=H[X+0]>>2&3,z.Lc=H[X+0]>>4&3,X=H[X+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||X)v=0;else if(Ge.put=tr,Ge.ac=rn,Ge.bc=Mr,Ge.ma=z,Ge.width=v.width,Ge.height=v.height,Ge.Da=v.Da,Ge.v=v.v,Ge.va=v.va,Ge.j=v.j,Ge.o=v.o,z.$a)e:{t(z.$a==1),v=zi();t:for(;;){if(v==null){v=0;break e}if(t(z!=null),z.mc=v,v.c=z.c,v.i=z.i,v.l=z.l,v.l.ma=z,v.l.width=z.c,v.l.height=z.i,v.a=0,$(v.m,H,Oe,Ee),!Rs(z.c,z.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&ki(v.s)?(z.ic=1,H=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(H),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(z.ic=0,v=So(v,z.c)),!v))break t;v=1;break e}z.mc=null,v=0}else v=Ee>=z.c*z.i;z=!v}if(z)return null;h.ga.Lc!=1?h.Ga=0:A=U-b}t(h.ga!=null),t(b+A<=U);e:{if(v=(H=h.ga).c,U=H.l.o,H.$a==0){if(Oe=h.rc,Ee=h.Vc,Ge=h.Fa,X=h.P+1+b*v,ie=h.mb,xe=h.nb+b*v,t(X<=h.P+h.qc),H.Z!=0)for(t(Xi[H.Z]!=null),z=0;z<A;++z)Xi[H.Z](Oe,Ee,Ge,X,ie,xe,v),Oe=ie,Ee=xe,xe+=v,X+=v;else for(z=0;z<A;++z)r(ie,xe,Ge,X,v),Oe=ie,Ee=xe,xe+=v,X+=v;h.rc=Oe,h.Vc=Ee}else{if(t(H.mc!=null),v=b+A,t((z=H.mc)!=null),t(v<=z.i),z.C>=v)v=1;else if(H.ic||Pe(),H.ic){H=z.V,Oe=z.Ba,Ee=z.c;var Be=z.i,we=(Ge=1,X=z.$/Ee,ie=z.$%Ee,xe=z.m,De=z.s,z.$),_e=Ee*Be,He=Ee*v,Ze=De.wc,We=we<He?jn(De,ie,X):null;t(we<=_e),t(v<=Be),t(ki(De));t:for(;;){for(;!xe.h&&we<He;){if(ie&Ze||(We=jn(De,ie,X)),t(We!=null),he(xe),256>(Be=En(We.G[0],We.H[0],xe)))H[Oe+we]=Be,++we,++ie>=Ee&&(ie=0,++X<=v&&!(X%16)&&ms(z,X));else{if(!(280>Be)){Ge=0;break t}Be=Vn(Be-256,xe);var ct,st=En(We.G[4],We.H[4],xe);if(he(xe),!(we>=(st=nr(Ee,st=Vn(st,xe)))&&_e-we>=Be)){Ge=0;break t}for(ct=0;ct<Be;++ct)H[Oe+we+ct]=H[Oe+we+ct-st];for(we+=Be,ie+=Be;ie>=Ee;)ie-=Ee,++X<=v&&!(X%16)&&ms(z,X);we<He&&ie&Ze&&(We=jn(De,ie,X))}t(xe.h==se(xe))}ms(z,X>v?v:X);break t}!Ge||xe.h&&we<_e?(Ge=0,z.a=xe.h?5:3):z.$=we,v=Ge}else v=gs(z,z.V,z.Ba,z.c,z.i,v,ll);if(!v){A=0;break e}}b+A>=U&&(h.Cc=1),A=1}if(!A)return null;if(h.Cc&&((A=h.ga)!=null&&(A.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*M}function x(h,v,b,A,M,U){for(;0<M--;){var z,H=h,X=v+(b?1:0),ie=h,xe=v+(b?0:3);for(z=0;z<A;++z){var De=ie[xe+4*z];De!=255&&(De*=32897,H[X+4*z+0]=H[X+4*z+0]*De>>23,H[X+4*z+1]=H[X+4*z+1]*De>>23,H[X+4*z+2]=H[X+4*z+2]*De>>23)}v+=U}}function D(h,v,b,A,M){for(;0<A--;){var U;for(U=0;U<b;++U){var z=h[v+2*U+0],H=15&(ie=h[v+2*U+1]),X=4369*H,ie=(240&ie|ie>>4)*X>>16;h[v+2*U+0]=(240&z|z>>4)*X>>16&240|(15&z|z<<4)*X>>16>>4&15,h[v+2*U+1]=240&ie|H}v+=M}}function ae(h,v,b,A,M,U,z,H){var X,ie,xe=255;for(ie=0;ie<M;++ie){for(X=0;X<A;++X){var De=h[v+X];U[z+4*X]=De,xe&=De}v+=b,z+=H}return xe!=255}function ve(h,v,b,A,M){var U;for(U=0;U<M;++U)b[A+U]=h[v+U]>>8}function Pe(){Ei=x,gn=D,Cn=ae,rr=ve}function Ue(h,v,b){I[h]=function(A,M,U,z,H,X,ie,xe,De,Oe,Ee,Ge,Be,we,_e,He,Ze){var We,ct=Ze-1>>1,st=H[X+0]|ie[xe+0]<<16,gt=De[Oe+0]|Ee[Ge+0]<<16;t(A!=null);var ot=3*st+gt+131074>>2;for(v(A[M+0],255&ot,ot>>16,Be,we),U!=null&&(ot=3*gt+st+131074>>2,v(U[z+0],255&ot,ot>>16,_e,He)),We=1;We<=ct;++We){var an=H[X+We]|ie[xe+We]<<16,fn=De[Oe+We]|Ee[Ge+We]<<16,Ht=st+an+gt+fn+524296,Dt=Ht+2*(an+gt)>>3;ot=Dt+st>>1,st=(Ht=Ht+2*(st+fn)>>3)+an>>1,v(A[M+2*We-1],255&ot,ot>>16,Be,we+(2*We-1)*b),v(A[M+2*We-0],255&st,st>>16,Be,we+(2*We-0)*b),U!=null&&(ot=Ht+gt>>1,st=Dt+fn>>1,v(U[z+2*We-1],255&ot,ot>>16,_e,He+(2*We-1)*b),v(U[z+2*We+0],255&st,st>>16,_e,He+(2*We+0)*b)),st=an,gt=fn}1&Ze||(ot=3*st+gt+131074>>2,v(A[M+Ze-1],255&ot,ot>>16,Be,we+(Ze-1)*b),U!=null&&(ot=3*gt+st+131074>>2,v(U[z+Ze-1],255&ot,ot>>16,_e,He+(Ze-1)*b)))}}function Qe(){ji[tu]=G,ji[Ga]=su,ji[Va]=$l,ji[Io]=Ci,ji[hd]=Wt,ji[Gf]=Bp,ji[Op]=n1,ji[Ml]=su,ji[Il]=Ci,ji[Dl]=Wt,ji[Vf]=Bp}function ut(h){return h&~r1?0>h?0:255:h>>Up}function _t(h,v){return ut((19077*h>>8)+(26149*v>>8)-14234)}function It(h,v,b){return ut((19077*h>>8)-(6419*v>>8)-(13320*b>>8)+8708)}function Pt(h,v){return ut((19077*h>>8)+(33050*v>>8)-17685)}function Yt(h,v,b,A,M){A[M+0]=_t(h,b),A[M+1]=It(h,v,b),A[M+2]=Pt(h,v)}function On(h,v,b,A,M){A[M+0]=Pt(h,v),A[M+1]=It(h,v,b),A[M+2]=_t(h,b)}function Xn(h,v,b,A,M){var U=It(h,v,b);v=U<<3&224|Pt(h,v)>>3,A[M+0]=248&_t(h,b)|U>>5,A[M+1]=v}function Qn(h,v,b,A,M){var U=240&Pt(h,v)|15;A[M+0]=240&_t(h,b)|It(h,v,b)>>4,A[M+1]=U}function Er(h,v,b,A,M){A[M+0]=255,Yt(h,v,b,A,M+1)}function jr(h,v,b,A,M){On(h,v,b,A,M),A[M+3]=255}function Hi(h,v,b,A,M){Yt(h,v,b,A,M),A[M+3]=255}function Tn(h,v){return 0>h?0:h>v?v:h}function Gi(h,v,b){I[h]=function(A,M,U,z,H,X,ie,xe,De){for(var Oe=xe+(-2&De)*b;xe!=Oe;)v(A[M+0],U[z+0],H[X+0],ie,xe),v(A[M+1],U[z+0],H[X+0],ie,xe+b),M+=2,++z,++X,xe+=2*b;1&De&&v(A[M+0],U[z+0],H[X+0],ie,xe)}}function qa(h,v,b){return b==0?h==0?v==0?6:5:v==0?4:0:b}function kl(h,v,b,A,M){switch(h>>>30){case 3:ze(v,b,A,M,0);break;case 2:Ie(v,b,A,M);break;case 1:xt(v,b,A,M)}}function El(h,v){var b,A,M=v.M,U=v.Nb,z=h.oc,H=h.pc+40,X=h.oc,ie=h.pc+584,xe=h.oc,De=h.pc+600;for(b=0;16>b;++b)z[H+32*b-1]=129;for(b=0;8>b;++b)X[ie+32*b-1]=129,xe[De+32*b-1]=129;for(0<M?z[H-1-32]=X[ie-1-32]=xe[De-1-32]=129:(i(z,H-32-1,127,21),i(X,ie-32-1,127,9),i(xe,De-32-1,127,9)),A=0;A<h.za;++A){var Oe=v.ya[v.aa+A];if(0<A){for(b=-1;16>b;++b)r(z,H+32*b-4,z,H+32*b+12,4);for(b=-1;8>b;++b)r(X,ie+32*b-4,X,ie+32*b+4,4),r(xe,De+32*b-4,xe,De+32*b+4,4)}var Ee=h.Gd,Ge=h.Hd+A,Be=Oe.ad,we=Oe.Hc;if(0<M&&(r(z,H-32,Ee[Ge].y,0,16),r(X,ie-32,Ee[Ge].f,0,8),r(xe,De-32,Ee[Ge].ea,0,8)),Oe.Za){var _e=z,He=H-32+16;for(0<M&&(A>=h.za-1?i(_e,He,Ee[Ge].y[15],4):r(_e,He,Ee[Ge+1].y,0,4)),b=0;4>b;b++)_e[He+128+b]=_e[He+256+b]=_e[He+384+b]=_e[He+0+b];for(b=0;16>b;++b,we<<=2)_e=z,He=H+Gs[b],Ss[Oe.Ob[b]](_e,He),kl(we,Be,16*+b,_e,He)}else if(_e=qa(A,M,Oe.Ob[0]),Ya[_e](z,H),we!=0)for(b=0;16>b;++b,we<<=2)kl(we,Be,16*+b,z,H+Gs[b]);for(b=Oe.Gc,_e=qa(A,M,Oe.Dd),ha[_e](X,ie),ha[_e](xe,De),we=Be,_e=X,He=ie,255&(Oe=b>>0)&&(170&Oe?dt(we,256,_e,He):Ot(we,256,_e,He)),Oe=xe,we=De,255&(b>>=8)&&(170&b?dt(Be,320,Oe,we):Ot(Be,320,Oe,we)),M<h.Ub-1&&(r(Ee[Ge].y,0,z,H+480,16),r(Ee[Ge].f,0,X,ie+224,8),r(Ee[Ge].ea,0,xe,De+224,8)),b=8*U*h.B,Ee=h.sa,Ge=h.ta+16*A+16*U*h.R,Be=h.qa,Oe=h.ra+8*A+b,we=h.Ha,_e=h.Ia+8*A+b,b=0;16>b;++b)r(Ee,Ge+b*h.R,z,H+32*b,16);for(b=0;8>b;++b)r(Be,Oe+b*h.B,X,ie+32*b,8),r(we,_e+b*h.B,xe,De+32*b,8)}}function jl(h,v,b,A,M,U,z,H,X){var ie=[0],xe=[0],De=0,Oe=X!=null?X.kd:0,Ee=X??new Kc;if(h==null||12>b)return 7;Ee.data=h,Ee.w=v,Ee.ha=b,v=[v],b=[b],Ee.gb=[Ee.gb];e:{var Ge=v,Be=b,we=Ee.gb;if(t(h!=null),t(Be!=null),t(we!=null),we[0]=0,12<=Be[0]&&!n(h,Ge[0],"RIFF")){if(n(h,Ge[0]+8,"WEBP")){we=3;break e}var _e=Ne(h,Ge[0]+4);if(12>_e||4294967286<_e){we=3;break e}if(Oe&&_e>Be[0]-8){we=7;break e}we[0]=_e,Ge[0]+=12,Be[0]-=12}we=0}if(we!=0)return we;for(_e=0<Ee.gb[0],b=b[0];;){e:{var He=h;Be=v,we=b;var Ze=ie,We=xe,ct=Ge=[0];if((ot=De=[De])[0]=0,8>we[0])we=7;else{if(!n(He,Be[0],"VP8X")){if(Ne(He,Be[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var st=Ne(He,Be[0]+8),gt=1+me(He,Be[0]+12);if(2147483648<=gt*(He=1+me(He,Be[0]+15))){we=3;break e}ct!=null&&(ct[0]=st),Ze!=null&&(Ze[0]=gt),We!=null&&(We[0]=He),Be[0]+=18,we[0]-=18,ot[0]=1}we=0}}if(De=De[0],Ge=Ge[0],we!=0)return we;if(Be=!!(2&Ge),!_e&&De)return 3;if(U!=null&&(U[0]=!!(16&Ge)),z!=null&&(z[0]=Be),H!=null&&(H[0]=0),z=ie[0],Ge=xe[0],De&&Be&&X==null){we=0;break}if(4>b){we=7;break}if(_e&&De||!_e&&!De&&!n(h,v[0],"ALPH")){b=[b],Ee.na=[Ee.na],Ee.P=[Ee.P],Ee.Sa=[Ee.Sa];e:{st=h,we=v,_e=b;var ot=Ee.gb;Ze=Ee.na,We=Ee.P,ct=Ee.Sa,gt=22,t(st!=null),t(_e!=null),He=we[0];var an=_e[0];for(t(Ze!=null),t(ct!=null),Ze[0]=null,We[0]=null,ct[0]=0;;){if(we[0]=He,_e[0]=an,8>an){we=7;break e}var fn=Ne(st,He+4);if(4294967286<fn){we=3;break e}var Ht=8+fn+1&-2;if(gt+=Ht,0<ot&&gt>ot){we=3;break e}if(!n(st,He,"VP8 ")||!n(st,He,"VP8L")){we=0;break e}if(an[0]<Ht){we=7;break e}n(st,He,"ALPH")||(Ze[0]=st,We[0]=He+8,ct[0]=fn),He+=Ht,an-=Ht}}if(b=b[0],Ee.na=Ee.na[0],Ee.P=Ee.P[0],Ee.Sa=Ee.Sa[0],we!=0)break}b=[b],Ee.Ja=[Ee.Ja],Ee.xa=[Ee.xa];e:if(ot=h,we=v,_e=b,Ze=Ee.gb[0],We=Ee.Ja,ct=Ee.xa,st=we[0],He=!n(ot,st,"VP8 "),gt=!n(ot,st,"VP8L"),t(ot!=null),t(_e!=null),t(We!=null),t(ct!=null),8>_e[0])we=7;else{if(He||gt){if(ot=Ne(ot,st+4),12<=Ze&&ot>Ze-12){we=3;break e}if(Oe&&ot>_e[0]-8){we=7;break e}We[0]=ot,we[0]+=8,_e[0]-=8,ct[0]=gt}else ct[0]=5<=_e[0]&&ot[st+0]==47&&!(ot[st+4]>>5),We[0]=_e[0];we=0}if(b=b[0],Ee.Ja=Ee.Ja[0],Ee.xa=Ee.xa[0],v=v[0],we!=0)break;if(4294967286<Ee.Ja)return 3;if(H==null||Be||(H[0]=Ee.xa?2:1),z=[z],Ge=[Ge],Ee.xa){if(5>b){we=7;break}H=z,Oe=Ge,Be=U,h==null||5>b?h=0:5<=b&&h[v+0]==47&&!(h[v+4]>>5)?(_e=[0],ot=[0],Ze=[0],$(We=new T,h,v,b),ht(We,_e,ot,Ze)?(H!=null&&(H[0]=_e[0]),Oe!=null&&(Oe[0]=ot[0]),Be!=null&&(Be[0]=Ze[0]),h=1):h=0):h=0}else{if(10>b){we=7;break}H=Ge,h==null||10>b||!$c(h,v+3,b-3)?h=0:(Oe=h[v+0]|h[v+1]<<8|h[v+2]<<16,Be=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ee.Ja||!Be||!h?h=0:(z&&(z[0]=Be),H&&(H[0]=h),h=1))}if(!h||(z=z[0],Ge=Ge[0],De&&(ie[0]!=z||xe[0]!=Ge)))return 3;X!=null&&(X[0]=Ee,X.offset=v-X.w,t(4294967286>v-X.w),t(X.offset==X.ha-b));break}return we==0||we==7&&De&&X==null?(U!=null&&(U[0]|=Ee.na!=null&&0<Ee.na.length),A!=null&&(A[0]=z),M!=null&&(M[0]=Ge),0):we}function Xc(h,v,b){var A=v.width,M=v.height,U=0,z=0,H=A,X=M;if(v.Da=h!=null&&0<h.Da,v.Da&&(H=h.cd,X=h.bd,U=h.v,z=h.j,11>b||(U&=-2,z&=-2),0>U||0>z||0>=H||0>=X||U+H>A||z+X>M))return 0;if(v.v=U,v.j=z,v.va=U+H,v.o=z+X,v.U=H,v.T=X,v.da=h!=null&&0<h.da,v.da){if(!ke(H,X,b=[h.ib],U=[h.hb]))return 0;v.ib=b[0],v.hb=U[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*A/4&&v.hb<3*M/4,v.Kb=0),1}function Qc(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function Cl(h,v,b,A){if(A==null||0>=h||0>=v)return 2;if(b!=null){if(b.Da){var M=b.cd,U=b.bd,z=-2&b.v,H=-2&b.j;if(0>z||0>H||0>=M||0>=U||z+M>h||H+U>v)return 2;h=M,v=U}if(b.da){if(!ke(h,v,M=[b.ib],U=[b.hb]))return 2;h=M[0],v=U[0]}}A.width=h,A.height=v;e:{var X=A.width,ie=A.height;if(h=A.S,0>=X||0>=ie||!(h>=tu&&13>h))h=2;else{if(0>=A.Rd&&A.sd==null){z=U=M=v=0;var xe=(H=X*qp[h])*ie;if(11>h||(U=(ie+1)/2*(v=(X+1)/2),h==12&&(z=(M=X)*ie)),(ie=s(xe+2*U+z))==null){h=1;break e}A.sd=ie,11>h?((X=A.f.RGBA).eb=ie,X.fb=0,X.A=H,X.size=xe):((X=A.f.kb).y=ie,X.O=0,X.fa=H,X.Fd=xe,X.f=ie,X.N=0+xe,X.Ab=v,X.Cd=U,X.ea=ie,X.W=0+xe+U,X.Db=v,X.Ed=U,h==12&&(X.F=ie,X.J=0+xe+2*U),X.Tc=z,X.lb=M)}if(v=1,M=A.S,U=A.width,z=A.height,M>=tu&&13>M)if(11>M)h=A.f.RGBA,v&=(H=Math.abs(h.A))*(z-1)+U<=h.size,v&=H>=U*qp[M],v&=h.eb!=null;else{h=A.f.kb,H=(U+1)/2,xe=(z+1)/2,X=Math.abs(h.fa),ie=Math.abs(h.Ab);var De=Math.abs(h.Db),Oe=Math.abs(h.lb),Ee=Oe*(z-1)+U;v&=X*(z-1)+U<=h.Fd,v&=ie*(xe-1)+H<=h.Cd,v=(v&=De*(xe-1)+H<=h.Ed)&X>=U&ie>=H&De>=H,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,M==12&&(v&=Oe>=U,v&=Ee<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||b!=null&&b.fd&&(h=Qc(A)),h}var Or=64,ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Al=24,Ll=32,Ao=8,Qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qe("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(h){return h},I.Predictor2=function(h,v,b){return v[b+0]},I.Predictor3=function(h,v,b){return v[b+1]},I.Predictor4=function(h,v,b){return v[b-1]},I.Predictor5=function(h,v,b){return $e($e(h,v[b+1]),v[b+0])},I.Predictor6=function(h,v,b){return $e(h,v[b-1])},I.Predictor7=function(h,v,b){return $e(h,v[b+0])},I.Predictor8=function(h,v,b){return $e(v[b-1],v[b+0])},I.Predictor9=function(h,v,b){return $e(v[b+0],v[b+1])},I.Predictor10=function(h,v,b){return $e($e(h,v[b-1]),$e(v[b+0],v[b+1]))},I.Predictor11=function(h,v,b){var A=v[b+0];return 0>=nt(A>>24&255,h>>24&255,(v=v[b-1])>>24&255)+nt(A>>16&255,h>>16&255,v>>16&255)+nt(A>>8&255,h>>8&255,v>>8&255)+nt(255&A,255&h,255&v)?A:h},I.Predictor12=function(h,v,b){var A=v[b+0];return(Ke((h>>24&255)+(A>>24&255)-((v=v[b-1])>>24&255))<<24|Ke((h>>16&255)+(A>>16&255)-(v>>16&255))<<16|Ke((h>>8&255)+(A>>8&255)-(v>>8&255))<<8|Ke((255&h)+(255&A)-(255&v)))>>>0},I.Predictor13=function(h,v,b){var A=v[b-1];return(Je((h=$e(h,v[b+0]))>>24&255,A>>24&255)<<24|Je(h>>16&255,A>>16&255)<<16|Je(h>>8&255,A>>8&255)<<8|Je(h>>0&255,A>>0&255))>>>0};var qs=I.PredictorAdd0;I.PredictorAdd1=rt,qe("Predictor2","PredictorAdd2"),qe("Predictor3","PredictorAdd3"),qe("Predictor4","PredictorAdd4"),qe("Predictor5","PredictorAdd5"),qe("Predictor6","PredictorAdd6"),qe("Predictor7","PredictorAdd7"),qe("Predictor8","PredictorAdd8"),qe("Predictor9","PredictorAdd9"),qe("Predictor10","PredictorAdd10"),qe("Predictor11","PredictorAdd11"),qe("Predictor12","PredictorAdd12"),qe("Predictor13","PredictorAdd13");var Wa=I.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var fd,Vi=I.ColorIndexInverseTransform,Pl=I.MapARGB,la=I.VP8LColorIndexInverseTransformAlpha,di=I.MapAlpha,ca=I.VP8LPredictorsAdd=[];ca.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Lo,fi,Zr,Ha,ua,hi,Se,ze,Ie,dt,xt,Ot,Rn,dn,Po,To,Cr,xs,Mo,bs,Ws,_s,en,Yi,Ei,gn,Cn,rr,vr=s(511),Ki=s(2041),Ji=s(225),da=s(767),Zc=0,Tl=Ki,eu=Ji,pi=da,ei=vr,tu=0,Ga=1,Va=2,Io=3,hd=4,Gf=5,Op=6,Ml=7,Il=8,Dl=9,Vf=10,Rp=[2,3,7],Xg=[3,3,11],Fp=[280,256,256,256,40],yr=[0,1,1,1,0],zr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$p=8,Yf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fa=null,Kf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ol=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ru=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],pd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],e1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ya=[],Ss=[],ha=[],t1=1,iu=2,Xi=[],ji=[];Ue("UpsampleRgbLinePair",Yt,3),Ue("UpsampleBgrLinePair",On,3),Ue("UpsampleRgbaLinePair",Hi,4),Ue("UpsampleBgraLinePair",jr,4),Ue("UpsampleArgbLinePair",Er,4),Ue("UpsampleRgba4444LinePair",Qn,2),Ue("UpsampleRgb565LinePair",Xn,2);var G=I.UpsampleRgbLinePair,$l=I.UpsampleBgrLinePair,su=I.UpsampleRgbaLinePair,Ci=I.UpsampleBgraLinePair,Wt=I.UpsampleArgbLinePair,Bp=I.UpsampleRgba4444LinePair,n1=I.UpsampleRgb565LinePair,md=16,Hs=1<<md-1,au=-227,Jf=482,Up=6,r1=(256<<Up)-1,zp=0,pa=s(256),i1=s(256),s1=s(256),a1=s(256),o1=s(Jf-au),l1=s(Jf-au);Gi("YuvToRgbRow",Yt,3),Gi("YuvToBgrRow",On,3),Gi("YuvToRgbaRow",Hi,4),Gi("YuvToBgraRow",jr,4),Gi("YuvToArgbRow",Er,4),Gi("YuvToRgba4444Row",Qn,2),Gi("YuvToRgb565Row",Xn,2);var Gs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gd=[0,2,8],c1=[8,7,6,4,4,2,2,2,1,1,1,1],u1=1;this.WebPDecodeRGBA=function(h,v,b,A,M){var U=Ga,z=new Dr,H=new li;z.ba=H,H.S=U,H.width=[H.width],H.height=[H.height];var X=H.width,ie=H.height,xe=new _n;if(xe==null||h==null)var De=2;else t(xe!=null),De=jl(h,v,b,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(De!=0?X=0:(X!=null&&(X[0]=xe.width[0]),ie!=null&&(ie[0]=xe.height[0]),X=1),X){H.width=H.width[0],H.height=H.height[0],A!=null&&(A[0]=H.width),M!=null&&(M[0]=H.height);e:{if(A=new pl,(M=new Kc).data=h,M.w=v,M.ha=b,M.kd=1,v=[0],t(M!=null),((h=jl(M.data,M.w,M.ha,null,null,null,v,null,M))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(t(z!=null),A.data=M.data,A.w=M.w+M.offset,A.ha=M.ha-M.offset,A.put=tr,A.ac=rn,A.bc=Mr,A.ma=z,M.xa){if((h=zi())==null){z=1;break e}if(function(Oe,Ee){var Ge=[0],Be=[0],we=[0];t:for(;;){if(Oe==null)return 0;if(Ee==null)return Oe.a=2,0;if(Oe.l=Ee,Oe.a=0,$(Oe.m,Ee.data,Ee.w,Ee.ha),!ht(Oe.m,Ge,Be,we)){Oe.a=3;break t}if(Oe.xb=iu,Ee.width=Ge[0],Ee.height=Be[0],!Rs(Ge[0],Be[0],1,Oe,null))break t;return 1}return t(Oe.a!=0),0}(h,A)){if(A=(v=Cl(A.width,A.height,z.Oa,z.ba))==0){t:{A=h;n:for(;;){if(A==null){A=0;break t}if(t(A.s.yc!=null),t(A.s.Ya!=null),t(0<A.s.Wb),t((b=A.l)!=null),t((M=b.ma)!=null),A.xb!=0){if(A.ca=M.ba,A.tb=M.tb,t(A.ca!=null),!Xc(M.Oa,b,Io)){A.a=2;break n}if(!So(A,b.width)||b.da)break n;if((b.da||Zt(A.ca.S))&&Pe(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&Pe()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!Me(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!gs(A,A.V,A.Ba,A.c,A.i,b.o,Ui))break n;M.Dc=A.Ma,A=1;break t}t(A.a!=0),A=0}A=!A}A&&(v=h.a)}else v=h.a}else{if((h=new Rf)==null){z=1;break e}if(h.Fa=M.na,h.P=M.P,h.qc=M.Sa,Bc(h,A)){if((v=Cl(A.width,A.height,z.Oa,z.ba))==0){if(h.Aa=0,b=z.Oa,t((M=h)!=null),b!=null){if(0<(X=0>(X=b.Md)?0:100<X?255:255*X/100)){for(ie=xe=0;4>ie;++ie)12>(De=M.pb[ie]).lc&&(De.ia=X*c1[0>De.lc?0:De.lc]>>3),xe|=De.ia;xe&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=b.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}Zu(h,A)||(v=h.a)}}else v=h.a}v==0&&z.Oa!=null&&z.Oa.fd&&(v=Qc(z.ba))}z=v}U=z!=0?null:11>U?H.f.RGBA.eb:H.f.kb.y}else U=null;return U};var qp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(I,Z){for(var re="",P=0;P<4;P++)re+=String.fromCharCode(I[Z++]);return re}function p(I,Z){return(I[Z+0]<<0|I[Z+1]<<8|I[Z+2]<<16)>>>0}function g(I,Z){return(I[Z+0]<<0|I[Z+1]<<8|I[Z+2]<<16|I[Z+3]<<24)>>>0}new c;var w=[0],m=[0],S=[],k=new c,C=e,_=function(I,Z){var re={},P=0,F=!1,V=0,Y=0;if(re.frames=[],!function(K,se,ue,he){for(var je=0;je<he;je++)if(K[se+je]!=ue.charCodeAt(je))return!0;return!1}(I,Z,"RIFF",4)){for(g(I,Z+=4),Z+=8;Z<I.length;){var pe=f(I,Z),ge=g(I,Z+=4);Z+=4;var Q=ge+(1&ge);switch(pe){case"VP8 ":case"VP8L":re.frames[P]===void 0&&(re.frames[P]={}),(oe=re.frames[P]).src_off=F?Y:Z-8,oe.src_size=V+ge+8,P++,F&&(F=!1,V=0,Y=0);break;case"VP8X":(oe=re.header={}).feature_flags=I[Z];var $=Z+4;oe.canvas_width=1+p(I,$),$+=3,oe.canvas_height=1+p(I,$),$+=3;break;case"ALPH":F=!0,V=Q+8,Y=Z-8;break;case"ANIM":(oe=re.header).bgcolor=g(I,Z),$=Z+4,oe.loop_count=(Le=I)[(T=$)+0]<<0|Le[T+1]<<8,$+=2;break;case"ANMF":var q,oe;(oe=re.frames[P]={}).offset_x=2*p(I,Z),Z+=3,oe.offset_y=2*p(I,Z),Z+=3,oe.width=1+p(I,Z),Z+=3,oe.height=1+p(I,Z),Z+=3,oe.duration=p(I,Z),Z+=3,q=I[Z++],oe.dispose=1&q,oe.blend=q>>1&1}pe!="ANMF"&&(Z+=Q)}var Le,T;return re}}(C,0);_.response=C,_.rgbaoutput=!0,_.dataurl=!1;var N=_.header?_.header:null,L=_.frames?_.frames:null;if(N){N.loop_counter=N.loop_count,w=[N.canvas_height],m=[N.canvas_width];for(var R=0;R<L.length&&L[R].blend!=0;R++);}var J=L[0],ee=k.WebPDecodeRGBA(C,J.src_off,J.src_size,m,w);J.rgba=ee,J.imgwidth=m[0],J.imgheight=w[0];for(var W=0;W<m[0]*w[0]*4;W++)S[W]=ee[W];return this.width=m,this.height=w,this.data=S,this}(function(e){var t=function(){return typeof my=="function"},n=function(w,m,S,k){var C=4,_=a;switch(k){case e.image_compression.FAST:C=1,_=s;break;case e.image_compression.MEDIUM:C=6,_=l;break;case e.image_compression.SLOW:C=9,_=c}w=r(w,m,S,_);var N=my(w,{level:C});return e.__addimage__.arrayBufferToBinaryString(N)},r=function(w,m,S,k){for(var C,_,N,L=w.length/m,R=new Uint8Array(w.length+L),J=p(),ee=0;ee<L;ee+=1){if(N=ee*m,C=w.subarray(N,N+m),k)R.set(k(C,S,_),N+ee);else{for(var W,I=J.length,Z=[];W<I;W+=1)Z[W]=J[W](C,S,_);var re=g(Z.concat());R.set(Z[re],N+ee)}_=C}return R},i=function(w){var m=Array.apply([],w);return m.unshift(0),m},s=function(w,m){var S,k=[],C=w.length;k[0]=1;for(var _=0;_<C;_+=1)S=w[_-m]||0,k[_+1]=w[_]-S+256&255;return k},a=function(w,m,S){var k,C=[],_=w.length;C[0]=2;for(var N=0;N<_;N+=1)k=S&&S[N]||0,C[N+1]=w[N]-k+256&255;return C},l=function(w,m,S){var k,C,_=[],N=w.length;_[0]=3;for(var L=0;L<N;L+=1)k=w[L-m]||0,C=S&&S[L]||0,_[L+1]=w[L]+256-(k+C>>>1)&255;return _},c=function(w,m,S){var k,C,_,N,L=[],R=w.length;L[0]=4;for(var J=0;J<R;J+=1)k=w[J-m]||0,C=S&&S[J]||0,_=S&&S[J-m]||0,N=f(k,C,_),L[J+1]=w[J]-N+256&255;return L},f=function(w,m,S){if(w===m&&m===S)return w;var k=Math.abs(m-S),C=Math.abs(w-S),_=Math.abs(w+m-S-S);return k<=C&&k<=_?w:C<=_?m:S},p=function(){return[i,s,a,l,c]},g=function(w){var m=w.map(function(S){return S.reduce(function(k,C){return k+Math.abs(C)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(w,m,S,k){var C,_,N,L,R,J,ee,W,I,Z,re,P,F,V,Y,pe=this.decode.FLATE_DECODE,ge="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(N=new EB(w)).imgData,_=N.bits,C=N.colorSpace,R=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){I=(W=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,re=new Uint8Array(I*N.colors),Z=new Uint8Array(I);var Q,$=N.pixelBitlength-N.bits;for(V=0,Y=0;V<I;V++){for(F=W[V],Q=0;Q<$;)re[Y++]=F>>>Q&255,Q+=N.bits;Z[V]=F>>>Q&255}}if(N.bits===16){I=(W=new Uint32Array(N.decodePixels().buffer)).length,re=new Uint8Array(I*(32/N.pixelBitlength)*N.colors),Z=new Uint8Array(I*(32/N.pixelBitlength)),P=N.colors>1,V=0,Y=0;for(var q=0;V<I;)F=W[V++],re[Y++]=F>>>0&255,P&&(re[Y++]=F>>>16&255,F=W[V++],re[Y++]=F>>>0&255),Z[q++]=F>>>16&255;_=8}k!==e.image_compression.NONE&&t()?(w=n(re,N.width*N.colors,N.colors,k),ee=n(Z,N.width,1,k)):(w=re,ee=Z,pe=void 0)}if(N.colorType===3&&(C=this.color_spaces.INDEXED,J=N.palette,N.transparency.indexed)){var oe=N.transparency.indexed,Le=0;for(V=0,I=oe.length;V<I;++V)Le+=oe[V];if((Le/=255)===I-1&&oe.indexOf(0)!==-1)L=[oe.indexOf(0)];else if(Le!==I){for(W=N.decodePixels(),Z=new Uint8Array(W.length),V=0,I=W.length;V<I;V++)Z[V]=oe[W[V]];ee=n(Z,N.width,1)}}var T=function(K){var se;switch(K){case e.image_compression.FAST:se=11;break;case e.image_compression.MEDIUM:se=13;break;case e.image_compression.SLOW:se=14;break;default:se=12}return se}(k);return pe===this.decode.FLATE_DECODE&&(ge="/Predictor "+T+" "),ge+="/Colors "+R+" /BitsPerComponent "+_+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:S,data:w,index:m,filter:pe,decodeParameters:ge,transparency:L,palette:J,sMask:ee,predictor:T,width:N.width,height:N.height,bitsPerComponent:_,colorSpace:C}}}})(Ct.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new jB(t),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:a,height:l},p=new Fv(100).encode(f,100);return e.processJPEG.call(this,p,n,r,i)},e.processGIF87A=e.processGIF89A}(Ct.API),_a.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_a.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Mn.log("bit decode error:"+n)}},_a.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},_a.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,c=15&s,f=this.palette[l];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},_a.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},_a.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,f=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=f}this.pos+=e}},_a.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,f=(a>>11)/t*255|0,p=i*this.width*4+4*s;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},_a.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},_a.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},_a.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new _a(t,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Fv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Ct.API),J_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new J_(t),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Fv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Ct.API),Ct.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,c=0,f=0;f<i;f+=4){var p=r[f],g=r[f+1],w=r[f+2],m=r[f+3];s[l++]=p,s[l++]=g,s[l++]=w,a[c++]=m}var S=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:S,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ct.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Rd=Ct.API,qm=Rd.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,g=t.doKerning!==!1,w=0,m=e.length,S=0,k=l[0]||c,C=[];for(n=0;n<m;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(w=g&&Nn(f[r])==="object"&&!isNaN(parseInt(f[r][S],10))?f[r][S]/p:0,C.push((l[r]||k)/c+w)),S=r;return C},G_=Rd.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Rd.processArabic&&(e=Rd.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:qm.apply(this,arguments).reduce(function(s,a){return s+a},0)},V_=function(e,t,n,r){for(var i=[],s=0,a=e.length,l=0;s!==a&&l+t[s]<n;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+t[s]>r&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},Y_=function(e,t,n){n||(n={});var r,i,s,a,l,c,f,p=[],g=[p],w=n.textIndent||0,m=0,S=0,k=e.split(" "),C=qm.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var _=Array(c).join(" "),N=[];k.map(function(R){(R=R.split(/\s*\n/)).length>1?N=N.concat(R.map(function(J,ee){return(ee&&J.length?`
`:"")+J})):N.push(R[0])}),k=N,c=G_.apply(this,[_,n])}for(s=0,a=k.length;s<a;s++){var L=0;if(r=k[s],c&&r[0]==`
`&&(r=r.substr(1),L=1),w+m+(S=(i=qm.apply(this,[r,n])).reduce(function(R,J){return R+J},0))>t||L){if(S>t){for(l=V_.apply(this,[r,i,t-(w+m),t]),p.push(l.shift()),p=[l.pop()];l.length;)g.push([l.shift()]);S=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(R,J){return R+J},0)}else p=[r];g.push(p),w=S+c,m=C}else p.push(r),w+=m+S,m=C}return f=c?function(R,J){return(J?_:"")+R.join(" ")}:function(R){return R.join(" ")},g.map(f)},Rd.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var g=this.internal.getFont(p.fontName,p.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,f=[];for(l=0,c=r.length;l<c;l++)f=f.concat(Y_.apply(this,[r[l],a,s]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(g){return"0x"+parseInt(g,10).toString(16)},a=e.__fontmetrics__.compress=function(g){var w,m,S,k,C=["{"];for(var _ in g){if(w=g[_],isNaN(parseInt(_,10))?m="'"+_+"'":(_=parseInt(_,10),m=(m=s(_).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof w=="number")w<0?(S=s(w).slice(3),k="-"):(S=s(w).slice(2),k=""),S=k+S.slice(0,-1)+r[S.slice(-1)];else{if(Nn(w)!=="object")throw new Error("Don't know what to do with value type "+Nn(w)+".");S=a(w)}C.push(m+S)}return C.push("}"),C.join("")},l=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,m,S,k,C={},_=1,N=C,L=[],R="",J="",ee=g.length-1,W=1;W<ee;W+=1)(k=g[W])=="'"?w?(S=w.join(""),w=void 0):w=[]:w?w.push(k):k=="{"?(L.push([N,S]),N={},S=void 0):k=="}"?((m=L.pop())[0][m[1]]=N,S=void 0,N=m[0]):k=="-"?_=-1:S===void 0?n.hasOwnProperty(k)?(R+=n[k],S=parseInt(R,16)*_,_=1,R=""):R+=k:n.hasOwnProperty(k)?(J+=n[k],N[S]=parseInt(J,16)*_,_=1,S=void 0,J=""):J+=k;return C},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var w=g.font,m=p.Unicode[w.postScriptName];m&&(w.metadata.Unicode={},w.metadata.Unicode.widths=m.widths,w.metadata.Unicode.kerning=m.kerning);var S=f.Unicode[w.postScriptName];S&&(w.metadata.Unicode.encoding=S,w.encoding=S.codePages[0])}])}(Ct.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(zh(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ct),function(e){function t(){return(At.canvg?Promise.resolve(At.canvg):sl(()=>import("./index.es-Bw8yLv4H.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ct.API.addSvgAsImage=function(n,r,i,s,a,l,c,f){if(isNaN(r)||isNaN(i))throw Mn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Mn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var g=p.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(S){return S.fromString(g,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(w)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,c,f)})}}(),Ct.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Ct.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],f=0,p=0,g=0;function w(S,k){var C,_=!1;for(C=0;C<S.length;C+=1)S[C]===k&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(g=0;g<m;g+=1)n[l[g]].value=n[l[g]].defaultValue,n[l[g]].explicitSet=!1}if(Nn(e)==="object"){for(i in e)if(s=e[i],w(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&w(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,k=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?k.push("/"+S+" /"+n[S].value):k.push("/"+S+" "+n[S].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ct.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],g=0,w=s.length;g<w;++g){if(l=a.metadata.characterToGlyph(s.charCodeAt(g)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(g),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(f[4-l.length],l)}return p.join("")},r=function(s){var a,l,c,f,p,g,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,w=(l=Object.keys(s).sort(function(m,S){return m-S})).length;g<w;g++)a=l[g],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+f+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var g=l.metadata.Unicode.widths,w=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",S=0;S<w.length;S++)m+=String.fromCharCode(w[S]);var k=f();p({data:m,addLength1:!0,objectId:k}),c("endobj");var C=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:C}),c("endobj");var _=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+$d(l.fontName)),c("/FontFile2 "+k+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+$d(l.fontName)),c("/FontDescriptor "+_+" 0 R"),c("/W "+e.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+C+" 0 R"),c("/BaseFont /"+$d(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var g=l.metadata.rawData,w="",m=0;m<g.length;m++)w+=String.fromCharCode(g[m]);var S=f();p({data:w,addLength1:!0,objectId:S}),c("endobj");var k=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var C=f();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+S+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+$d(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=f();for(var _=0;_<l.metadata.hmtx.widths.length;_++)l.metadata.hmtx.widths[_]=parseInt(l.metadata.hmtx.widths[_]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+$d(l.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",c=s.x,f=s.y,p=s.options||{},g=s.mutex||{},w=g.pdfEscape,m=g.activeFontKey,S=g.fonts,k=m,C="",_=0,N="",L=S[k].encoding;if(S[k].encoding!=="Identity-H")return{text:l,x:c,y:f,options:p,mutex:g};for(N=l,k=m,Array.isArray(l)&&(N=l[0]),_=0;_<N.length;_+=1)S[k].metadata.hasOwnProperty("cmap")&&(a=S[k].metadata.cmap.unicode.codeMap[N[_].charCodeAt(0)]),a||N[_].charCodeAt(0)<256&&S[k].metadata.hasOwnProperty("Unicode")?C+=N[_]:C+="";var R="";return parseInt(k.slice(1))<14||L==="WinAnsiEncoding"?R=w(C,k).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(R=n(C,S[k])),g.isHex=!0,{text:R,x:c,y:f,options:p,mutex:g}};t.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?l.push([i(Object.assign({},c,{text:a[f][0]})).text,a[f][1],a[f][2]]):l.push(i(Object.assign({},c,{text:a[f]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:a})).text}])}(Ct),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ct.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,l,c,f,p,g=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,L=0;this.__bidiEngine__={};var R=function(P){var F=P.charCodeAt(),V=F>>8,Y=k[V];return Y!==void 0?g[256*Y+(255&F)]:V===252||V===253?"AL":_.test(V)?"L":V===8?"R":"N"},J=function(P){for(var F,V=0;V<P.length;V++){if((F=R(P.charAt(V)))==="L")return!1;if(F==="R")return!0}return!1},ee=function(P,F,V,Y){var pe,ge,Q,$,q=F[Y];switch(q){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(q="AN");break;case"AL":N=!0,q="R";break;case"WS":q="N";break;case"CS":Y<1||Y+1>=F.length||(pe=V[Y-1])!=="EN"&&pe!=="AN"||(ge=F[Y+1])!=="EN"&&ge!=="AN"?q="N":N&&(ge="AN"),q=ge===pe?ge:"N";break;case"ES":q=(pe=Y>0?V[Y-1]:"B")==="EN"&&Y+1<F.length&&F[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&V[Y-1]==="EN"){q="EN";break}if(N){q="N";break}for(Q=Y+1,$=F.length;Q<$&&F[Q]==="ET";)Q++;q=Q<$&&F[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for($=F.length,Q=Y+1;Q<$&&F[Q]==="NSM";)Q++;if(Q<$){var oe=P[Y],Le=oe>=1425&&oe<=2303||oe===64286;if(pe=F[Q],Le&&(pe==="R"||pe==="AL")){q="R";break}}}q=Y<1||(pe=F[Y-1])==="B"?"N":V[Y-1];break;case"B":N=!1,i=!0,q=L;break;case"S":s=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":q="N"}return q},W=function(P,F,V){var Y=P.split("");return V&&I(Y,V,{hiLevel:L}),Y.reverse(),F&&F.reverse(),Y.join("")},I=function(P,F,V){var Y,pe,ge,Q,$,q=-1,oe=P.length,Le=0,T=[],K=L?m:w,se=[];for(N=!1,i=!1,s=!1,pe=0;pe<oe;pe++)se[pe]=R(P[pe]);for(ge=0;ge<oe;ge++){if($=Le,T[ge]=ee(P,se,T,ge),Y=240&(Le=K[$][S[T[ge]]]),Le&=15,F[ge]=Q=K[Le][5],Y>0)if(Y===16){for(pe=q;pe<ge;pe++)F[pe]=1;q=-1}else q=-1;if(K[Le][6])q===-1&&(q=ge);else if(q>-1){for(pe=q;pe<ge;pe++)F[pe]=Q;q=-1}se[ge]==="B"&&(F[ge]=0),V.hiLevel|=Q}s&&function(ue,he,je){for(var Ce=0;Ce<je;Ce++)if(ue[Ce]==="S"){he[Ce]=L;for(var ne=Ce-1;ne>=0&&ue[ne]==="WS";ne--)he[ne]=L}}(se,F,oe)},Z=function(P,F,V,Y,pe){if(!(pe.hiLevel<P)){if(P===1&&L===1&&!i)return F.reverse(),void(V&&V.reverse());for(var ge,Q,$,q,oe=F.length,Le=0;Le<oe;){if(Y[Le]>=P){for($=Le+1;$<oe&&Y[$]>=P;)$++;for(q=Le,Q=$-1;q<Q;q++,Q--)ge=F[q],F[q]=F[Q],F[Q]=ge,V&&(ge=V[q],V[q]=V[Q],V[Q]=ge);Le=$}Le++}}},re=function(P,F,V){var Y=P.split(""),pe={hiLevel:L};return V||(V=[]),I(Y,V,pe),function(ge,Q,$){if($.hiLevel!==0&&p)for(var q,oe=0;oe<ge.length;oe++)Q[oe]===1&&(q=C.indexOf(ge[oe]))>=0&&(ge[oe]=C[q+1])}(Y,V,pe),Z(2,Y,F,V,pe),Z(1,Y,F,V,pe),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(P,F,V){if(function(pe,ge){if(ge)for(var Q=0;Q<pe.length;Q++)ge[Q]=Q;l===void 0&&(l=J(pe)),f===void 0&&(f=J(pe))}(P,F),a||!c||f)if(a&&c&&l^f)L=l?1:0,P=W(P,F,V);else if(!a&&c&&f)L=l?1:0,P=re(P,F,V),P=W(P,F);else if(!a||l||c||f){if(a&&!c&&l^f)P=W(P,F),l?(L=0,P=re(P,F,V)):(L=1,P=re(P,F,V),P=W(P,F));else if(a&&l&&!c&&f)L=1,P=re(P,F,V),P=W(P,F);else if(!a&&!c&&l^f){var Y=p;l?(L=1,P=re(P,F,V),L=0,p=!1,P=re(P,F,V),p=Y):(L=0,P=re(P,F,V),P=W(P,F),L=1,p=!1,P=re(P,F,V),p=Y,P=W(P,F))}}else L=0,P=re(P,F,V);else L=l?1:0,P=re(P,F,V);return P},this.__bidiEngine__.setOptions=function(P){P&&(a=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,f=P.isOutputRtl,p=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Ct),Ct.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Tc(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new zB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new CB(this.contents),this.head=new LB(this),this.name=new DB(this),this.cmap=new D6(this),this.toUnicode={},this.hhea=new PB(this),this.maxp=new OB(this),this.hmtx=new RB(this),this.post=new MB(this),this.os2=new TB(this),this.loca=new UB(this),this.glyf=new FB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,f;for(f=[],a=0,l=(c=this.bbox).length;a<l;a++)t=c[a],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,l;for(a=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var $a,Tc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),CB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,l,c,f,p,g,w,m,S,k;for(k in m=Object.keys(n).length,c=Math.log(2),g=16*Math.floor(Math.log(m)/c),a=Math.floor(g/c),p=16*m-g,(i=new Tc).writeInt(this.scalarType),i.writeShort(m),i.writeShort(g),i.writeShort(a),i.writeShort(p),s=16*m,f=i.pos+s,l=null,S=[],n)for(w=n[k],i.writeString(k),i.writeInt(e(w)),i.writeInt(f),i.writeInt(w.length),S=S.concat(w),k==="head"&&(l=f),f+=w.length;f%4;)S.push(0),f++;return i.write(S),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=O6.call(n);n.length%4;)n.push(0);for(s=new Tc(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),AB={}.hasOwnProperty,bo=function(e,t){for(var n in t)AB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};$a=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var LB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Tc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),X_=function(){function e(t,n){var r,i,s,a,l,c,f,p,g,w,m,S,k,C,_,N,L;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),w=m/2,t.pos+=6,s=function(){var R,J;for(J=[],c=R=0;0<=w?R<w:R>w;c=0<=w?++R:--R)J.push(t.readUInt16());return J}(),t.pos+=2,k=function(){var R,J;for(J=[],c=R=0;0<=w?R<w:R>w;c=0<=w?++R:--R)J.push(t.readUInt16());return J}(),f=function(){var R,J;for(J=[],c=R=0;0<=w?R<w:R>w;c=0<=w?++R:--R)J.push(t.readUInt16());return J}(),p=function(){var R,J;for(J=[],c=R=0;0<=w?R<w:R>w;c=0<=w?++R:--R)J.push(t.readUInt16());return J}(),i=(this.length-t.pos+this.offset)/2,l=function(){var R,J;for(J=[],c=R=0;0<=i?R<i:R>i;c=0<=i?++R:--R)J.push(t.readUInt16());return J}(),c=_=0,L=s.length;_<L;c=++_)for(C=s[c],r=N=S=k[c];S<=C?N<=C:N>=C;r=S<=C?++N:--N)p[c]===0?a=r+f[c]:(a=l[p[c]/2+(r-S)-(w-c)]||0)!==0&&(a+=f[c]),this.codeMap[r]=65535&a}t.pos=g}return e.encode=function(t,n){var r,i,s,a,l,c,f,p,g,w,m,S,k,C,_,N,L,R,J,ee,W,I,Z,re,P,F,V,Y,pe,ge,Q,$,q,oe,Le,T,K,se,ue,he,je,Ce,ne,ce,le,me;switch(Y=new Tc,a=Object.keys(t).sort(function(Ne,Me){return Ne-Me}),n){case"macroman":for(k=0,C=function(){var Ne=[];for(S=0;S<256;++S)Ne.push(0);return Ne}(),N={0:0},s={},pe=0,q=a.length;pe<q;pe++)N[ne=t[i=a[pe]]]==null&&(N[ne]=++k),s[i]={old:t[i],new:N[t[i]]},C[i]=N[t[i]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(C),{charMap:s,subtable:Y.data,maxGlyphID:k+1};case"unicode":for(F=[],g=[],L=0,N={},r={},_=f=null,ge=0,oe=a.length;ge<oe;ge++)N[J=t[i=a[ge]]]==null&&(N[J]=++L),r[i]={old:J,new:N[J]},l=N[J]-i,_!=null&&l===f||(_&&g.push(_),F.push(i),f=l),_=i;for(_&&g.push(_),g.push(65535),F.push(65535),re=2*(Z=F.length),I=2*Math.pow(Math.log(Z)/Math.LN2,2),w=Math.log(I/2)/Math.LN2,W=2*Z-I,c=[],ee=[],m=[],S=Q=0,Le=F.length;Q<Le;S=++Q){if(P=F[S],p=g[S],P===65535){c.push(0),ee.push(0);break}if(P-(V=r[P].new)>=32768)for(c.push(0),ee.push(2*(m.length+Z-S)),i=$=P;P<=p?$<=p:$>=p;i=P<=p?++$:--$)m.push(r[i].new);else c.push(V-P),ee.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*Z+2*m.length),Y.writeUInt16(0),Y.writeUInt16(re),Y.writeUInt16(I),Y.writeUInt16(w),Y.writeUInt16(W),je=0,T=g.length;je<T;je++)i=g[je],Y.writeUInt16(i);for(Y.writeUInt16(0),Ce=0,K=F.length;Ce<K;Ce++)i=F[Ce],Y.writeUInt16(i);for(ce=0,se=c.length;ce<se;ce++)l=c[ce],Y.writeUInt16(l);for(le=0,ue=ee.length;le<ue;le++)R=ee[le],Y.writeUInt16(R);for(me=0,he=m.length;me<he;me++)k=m[me],Y.writeUInt16(k);return{charMap:r,subtable:Y.data,maxGlyphID:L+1}}},e}(),D6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new X_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=X_.encode(n,r),(s=new Tc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),PB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),TB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),MB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,f;for(f=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)f.push(n.readUInt32());return f}).call(this)}},t}(),IB=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},DB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,a,l,c,f,p,g,w,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(f={},a=g=0,w=i.length;g<w;a=++g)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new IB(p,s),f[m=s.nameID]==null&&(f[m]=[]),f[s.nameID].push(l);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t}(),OB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),RB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,a,l,c,f;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,g;for(g=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)g.push(n.readInt16());return g}(),this.widths=(function(){var p,g,w,m;for(m=[],p=0,g=(w=this.metrics).length;p<g;p++)a=w[p],m.push(a.advance);return m}).call(this),i=this.widths[this.widths.length-1],f=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)f.push(this.widths.push(i));return f},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),O6=[].slice,FB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,a,l,c,f,p,g,w;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Tc(r.read(s))).readShort(),p=c.readShort(),w=c.readShort(),f=c.readShort(),g=c.readShort(),this.cache[n]=l===-1?new BB(c,p,w,f,g):new $B(c,l,p,w,f,g),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,a,l,c,f;for(l=[],a=[],c=0,f=r.length;c<f;c++)s=n[r[c]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),$B=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),BB=function(){function e(t,n,r,i,s){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Tc(O6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),UB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var c=this.offsets[l],f=this.offsets[l+1]-c;f>0&&(s+=f)}for(var p=new Array(4*i.length),g=0;g<i.length;++g)p[4*g+3]=255&i[g],p[4*g+2]=(65280&i[g])>>8,p[4*g+1]=(16711680&i[g])>>16,p[4*g]=(4278190080&i[g])>>24;return p},t}(),zB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,l,c;for(i={},a=0,l=t.length;a<l;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,l,c,f,p,g,w,m,S,k,C,_;for(i in r=D6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),m={0:0},_=r.charMap)m[(c=_[i]).old]=c.new;for(S in w=r.maxGlyphID,a)S in m||(m[S]=w++);return p=function(N){var L,R;for(L in R={},N)R[N[L]]=L;return R}(m),g=Object.keys(p).sort(function(N,L){return N-L}),k=function(){var N,L,R;for(R=[],N=0,L=g.length;N<L;N++)l=g[N],R.push(p[l]);return R}(),s=this.font.glyf.encode(a,k,m),f=this.font.loca.encode(s.offsets,k),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},e}();Ct.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,c,f;for(f=[],l=0,c=n.length;l<c;l++)r=n[l],f.push(t.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();const qB=(e,t,n,r=!1)=>{var W,I;const i=new Ct("p","mm","a4"),s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),l=r?"#FFFFFF":"#1E2A47",c=r?"#000000":"#F95738",f="helvetica";r||(i.setFillColor(l),i.rect(0,0,s,a,"F"));const p=[...((W=e.songs)==null?void 0:W.map(Z=>({...Z,type:"song"})))||[],...((I=e.medleys)==null?void 0:I.map(Z=>({...Z,type:"medley"})))||[]].sort((Z,re)=>Z.position-re.position),g=30,w=10,m=s-60,S=p.length>20,k=S?(m-20)/2:m,C=20,_=C+k+20;let N=18,L=w;p.length>30?(N=14,L=8):p.length>25&&(N=16,L=9),i.setFont(f,"bold"),i.setFontSize(N),i.setTextColor(c);let R=g;if(S){const Z=Math.ceil(p.length/2),re=p.slice(0,Z),P=p.slice(Z);let F=R;re.forEach((Y,pe)=>{let ge="";if(Y.type==="song"){const oe=Y;oe.song&&(ge=oe.song.title)}else Y.type==="medley"&&(ge=Y.name||"Medley");const $=`${String(pe+1).padStart(2,"0")}. ${ge}`,q=i.splitTextToSize($.toUpperCase(),k);i.text(q,C,F),F+=q.length*L});let V=R;P.forEach((Y,pe)=>{let ge="";if(Y.type==="song"){const oe=Y;oe.song&&(ge=oe.song.title)}else Y.type==="medley"&&(ge=Y.name||"Medley");const $=`${String(Z+pe+1).padStart(2,"0")}. ${ge}`,q=i.splitTextToSize($.toUpperCase(),k);i.text(q,_,V),V+=q.length*L})}else p.forEach((Z,re)=>{R>a-50&&(i.addPage(),r||(i.setFillColor(l),i.rect(0,0,s,a,"F")),R=g,i.setFont(f,"bold"),i.setFontSize(N),i.setTextColor(c));let P="";if(Z.type==="song"){const pe=Z;pe.song&&(P=pe.song.title)}else Z.type==="medley"&&(P=Z.name||"Medley");const V=`${String(re+1).padStart(2,"0")}. ${P}`,Y=i.splitTextToSize(V.toUpperCase(),k);i.text(Y,C,R),R+=Y.length*L});const J=i.getNumberOfPages();for(let Z=1;Z<=J;Z++){i.setPage(Z),i.setFont(f,"bold"),i.setFontSize(48),i.setTextColor(c);const re=(n||"YOUR BAND").toUpperCase();i.text(re,s-20,g,{angle:-90,align:"left"})}const ee=Z=>new Date(Z).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});if(t){i.setFont(f,"normal"),i.setFontSize(10),i.setTextColor(c);const Z=[t.name||"The Arena",t.location||"Town, Country",ee(t.date)];i.text(Z,s-20,a-30,{align:"right"})}return i},WB=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:s})=>{const[a,l]=j.useState(!0),c=(f=!1)=>{if(!n)return;const g=qB(n,r&&i?{name:r,date:i}:void 0,s,f),m=`${s||"Setlist"} - ${r||"Event"}${f?" (Print)":" (Digital)"}.pdf`;if(f){const S=g.output("blob"),k=URL.createObjectURL(S);window.open(k,"_blank")}else g.save(m)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:d.jsx("div",{className:`bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:f=>f.stopPropagation(),children:n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 border-b border-gray-200 gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg flex-shrink-0",children:d.jsx(Br,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),d.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:n.name})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 print:hidden flex-wrap",children:[d.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-2 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-xs",title:"Descargar PDF Digital",children:[d.jsx(H0,{className:"w-3 h-3"}),"Digital"]}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-2 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs",title:"Descargar PDF para Imprimir",children:[d.jsx(H0,{className:"w-3 h-3"}),"Impresión"]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),d.jsx("button",{onClick:()=>l(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-indigo-600":"bg-gray-200"}`,children:d.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(Ma,{className:"w-6 h-6"})})]})]}),d.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&d.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const f=j.useMemo(()=>n!=null&&n.songs?n.songs.map(m=>{var S;return{...m,type:((S=m.song)==null?void 0:S.type)==="medley"?"medley":"song"}}).sort((m,S)=>m.position-S.position):[],[n==null?void 0:n.songs]),p=f.length,g=p>10,w=g?Math.ceil(p/2):p;return p===0?d.jsx("div",{className:"text-center py-10",children:d.jsx("p",{className:"text-gray-500",children:"Este setlist está vacío."})}):d.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${w}, auto)`,gridAutoFlow:"column",gridTemplateColumns:g?"1fr 1fr":"1fr"},children:f.map((m,S)=>{var k,C,_,N,L,R,J;return m.type==="medley"?d.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:d.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[S+1,"."]}),d.jsxs("div",{className:"flex-grow",children:[d.jsx("p",{className:"text-indigo-600 font-bold",children:(k=m.song)==null?void 0:k.title}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((_=(C=m.song)==null?void 0:C.medley_song_ids)==null?void 0:_.length)||0," canciones)"]})]})]})},`medley-${m.id}`):d.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[S+1,"."]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((N=m.song)==null?void 0:N.title)||"N/A"}),d.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${a&&((L=m.song)!=null&&L.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(R=m.song)==null?void 0:R.artist})]})]},`song-${((J=m.song)==null?void 0:J.id)||S}`)})})})()]})]})})})})};function HB({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,s]=j.useState([]),[a,l]=j.useState(!0),[c,f]=j.useState(null),[p,g]=j.useState(!1),[w,m]=j.useState(!1),[S,k]=j.useState("upcoming"),[C,_]=j.useState(null),[N,L]=j.useState(null),[R,J]=j.useState("");j.useEffect(()=>{ee()},[e]);const ee=async()=>{try{l(!0);const{data:Q,error:$}=await Xe.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if($)throw $;if(Q){const q=await Promise.all(Q.map(async oe=>{const{data:Le,error:T}=await Xe.from("event_members").select("group_member_id, user_id").eq("event_id",oe.id);if(T)return console.error("Error loading event members:",T),{...oe,members:[]};const K=(Le==null?void 0:Le.map(se=>{const ue=r.find(he=>he.id===se.group_member_id);return{group_member_id:se.group_member_id,user_id:se.user_id,member_name:(ue==null?void 0:ue.name)||"Unknown Member",role_in_group:(ue==null?void 0:ue.role_in_group)||"principal"}}))||[];return{...oe,members:K}}));s(q)}}catch(Q){console.error("Error fetching events:",Q),Te.error("Error loading events")}finally{l(!1)}},W=async Q=>{if(window.confirm("¿Estás seguro de que quieres eliminar este evento?"))try{const{data:$,error:q}=await Xe.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",Q);if(q)throw q;const{error:oe}=await Xe.from("events").delete().eq("id",Q);if(oe)throw oe;$&&$.length>0&&(console.log("Actualizando calendarios después de eliminar evento"),await Promise.all($.filter(Le=>Le.group_members.sync_calendar).map(async Le=>{try{await m6(e,Le.group_member_id),console.log("Calendario actualizado para miembro:",Le.group_member_id)}catch(T){console.error("Error actualizando calendario para miembro:",Le.group_member_id,T)}}))),Te.success("Evento eliminado correctamente"),ee()}catch($){console.error("Error deleting event:",$),Te.error("Error al eliminar el evento")}},I=Q=>{f(Q),m(!0)},Z=async Q=>{try{const{data:q,error:oe}=await Xe.from("groups").select("name").eq("id",Q.group_id).single();if(oe)throw oe;J((q==null?void 0:q.name)||"")}catch{J("")}const $=Q.setlist;if(!$){console.warn("Se intentó abrir un preview con un setlist undefined");return}if(L({name:Q.name,date:Q.date}),!$){console.warn("Se intentó abrir un preview con un setlist undefined");return}try{const{data:q,error:oe}=await Xe.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",$.id).single();if(oe)throw oe;q&&_(q)}catch(q){console.error("Error al cargar el setlist completo:",q),Te.error("Error al cargar el setlist")}};if(a)return d.jsx("div",{className:"text-center py-4",children:"Cargando eventos..."});const re=Q=>{const $=Q.reduce((q,oe)=>{const Le=on(pu(oe.date),"MMMM yyyy");return q[Le]||(q[Le]=[]),q[Le].push(oe),q},{});return Object.entries($)},P=Q=>{if(!Q)return"";if(console.log("Location raw:",Q),typeof Q=="object"&&Q!==null)return Q.name||String(Q);if(typeof Q!="string")return String(Q);if(Q.startsWith("{")||Q.startsWith("["))try{const $=JSON.parse(Q);return $.name||$.formatted_address||$.description||String($)}catch($){return console.log("Location parse error:",$),Q}return Q},F=Q=>{if(!Q)return;const $=P(Q);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent($)}`,"_blank")},V=Q=>{const $=Q.members.filter(oe=>oe.role_in_group==="principal"),q=Q.members.filter(oe=>oe.role_in_group==="sustituto");return d.jsxs("div",{className:"mt-1.5 space-y-1",children:[d.jsx("div",{className:"flex flex-wrap gap-1",children:$.map(oe=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:oe.member_name},oe.group_member_id))}),q.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),q.map(oe=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:oe.member_name},oe.group_member_id))]}),Q.location&&d.jsx("div",{className:"flex items-center gap-1 mt-1",children:d.jsxs("button",{onClick:()=>F(Q.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[d.jsx(l0,{className:"w-3 h-3 mr-1"}),d.jsx("span",{className:"underline",children:Y(P(Q.location))})]})})]})},Y=(Q,$=40)=>{if(!Q)return"";if(Q.includes(",")){const q=Q.split(",")[0];return q.length<=$?q:`${q.slice(0,$)}...`}return Q.length>$?`${Q.slice(0,$)}...`:Q},pe=i.filter(Q=>{const $=pu(Q.date);return b_(Lc($))||__($)}),ge=i.filter(Q=>{const $=pu(Q.date);return!b_(Lc($))&&!__($)});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Eventos"}),t&&d.jsx(yt,{onClick:()=>g(!0),children:"Añadir Evento"})]}),i.length===0?d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(fp,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay eventos programados"})]}):d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsxs("button",{onClick:()=>k("upcoming"),className:`${S==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{children:"Próximos eventos"}),pe.length>0&&d.jsx("span",{className:`${S==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:pe.length})]}),d.jsxs("button",{onClick:()=>k("past"),className:`${S==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{children:"Eventos pasados"}),ge.length>0&&d.jsx("span",{className:`${S==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:ge.length})]})]})}),d.jsx("div",{className:"mt-4 space-y-6",children:re(S==="upcoming"?pe:ge).map(([Q,$])=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:Q}),d.jsx("div",{className:"space-y-1",children:$.map(q=>d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:d.jsx("div",{className:"p-3",children:d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[d.jsx("div",{className:"text-lg font-bold text-gray-900",children:on(pu(q.date),"d")}),d.jsx("div",{className:"text-xs text-gray-500 uppercase",children:on(pu(q.date),"EEE")})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:q.name}),d.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-0.5",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(W0,{className:"w-3 h-3 mr-1"}),on(pu(`2000-01-01T${q.time}`),"h:mm a")]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(Sf,{className:"w-3 h-3 mr-1"}),q.members.length]}),q.setlist?d.jsxs("div",{className:"flex items-center",children:[d.jsx(Br,{className:"w-3 h-3 mr-1 text-blue-500"}),d.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>q.setlist&&Z(q),children:q.setlist.name}),d.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var T,K;const oe=((T=q.setlist.songs)==null?void 0:T.filter(se=>{var ue,he;return((ue=se.song)==null?void 0:ue.type)==="song"||!((he=se.song)!=null&&he.type)}))||[],Le=((K=q.setlist.songs)==null?void 0:K.filter(se=>{var ue;return((ue=se.song)==null?void 0:ue.type)==="medley"}))||[];return`(${oe.length} canciones${Le.length>0?`, ${Le.length} medleys`:""})`})()})]}):d.jsxs("div",{className:"flex items-center",children:[d.jsx(Br,{className:"w-3 h-3 mr-1 text-gray-300"}),d.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),V(q),q.notes&&d.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:q.notes})]}),t&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>I(q),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:d.jsx(xN,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>W(q.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:d.jsx(P5,{className:"w-4 h-4"})})]})]})})},q.id))})]},Q))})]})]})}),d.jsx(P_,{isOpen:p,onClose:()=>g(!1),groupId:e,onEventSaved:()=>{ee(),g(!1)},availableDates:n,members:r}),c&&d.jsx(P_,{isOpen:w,onClose:()=>{m(!1),f(null)},groupId:e,event:c,onEventSaved:()=>{ee(),m(!1),f(null)},availableDates:[...n,pu(c.date)],members:r}),C&&d.jsx(WB,{isOpen:!!C,onClose:()=>{_(null),L(null),J("")},setlist:C,eventName:N==null?void 0:N.name,eventDate:N==null?void 0:N.date,bandName:R})]})}function GB({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ma,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-700 mb-6",children:i}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(yt,{variant:"secondary",onClick:t,children:"Cancelar"}),d.jsx(yt,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function VB({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),Te.success("URL copiada al portapapeles")};return d.jsxs(Mu,{open:e,onClose:t,className:"relative z-50",children:[d.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:d.jsxs(Mu.Panel,{className:"mx-auto max-w-md rounded-lg bg-white p-6",children:[d.jsxs(Mu.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[d.jsx(fp,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Google Calendar"}),d.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),d.jsx("li",{children:'Selecciona "Desde URL"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Añadir calendario"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre la aplicación Calendario"}),d.jsx("li",{children:"Ve a Archivo → Nueva suscripción a calendario"}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Outlook Calendar"}),d.jsx("li",{children:'Ve a "Añadir calendario" → "Desde Internet"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),d.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2"}),d.jsxs(yt,{onClick:r,variant:"secondary",className:"flex items-center gap-1",children:[d.jsx(XI,{className:"w-4 h-4"}),"Copiar"]})]})]})]}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx(yt,{onClick:t,children:"Cerrar"})})]})})]})}const Tp=()=>{const[e,t]=j.useState(!1),[n,r]=j.useState(null),[i,s]=j.useState(!0);j.useEffect(()=>{a()},[]);const a=async()=>{try{if(console.log("🎵 Checking Spotify auth status..."),console.log("🎵 Is authenticated:",Lr.isAuthenticated()),Lr.isAuthenticated()){console.log("🎵 Getting user data...");const S=await Lr.getCurrentUser();console.log("🎵 User data:",S),r(S),t(!0)}}catch(S){console.error("❌ Error checking Spotify auth status:",S),Lr.logout()}finally{s(!1)}},l=j.useCallback(async()=>{const S=await Lr.getAuthUrl();window.location.href=S},[]),c=j.useCallback(()=>{Lr.logout(),t(!1),r(null),Te.success("Desconectado de Spotify")},[]),f=j.useCallback(async S=>{if(!e)throw new Error("No authenticated with Spotify");try{return await Lr.searchTracks(S)}catch(k){throw console.error("Error searching tracks:",k),Te.error("Error al buscar canciones en Spotify"),k}},[e]),p=j.useCallback(async(S,k)=>{if(!e)return Te.error("Debes conectar con Spotify primero"),null;try{const C=await Lr.createPlaylist(`Band Plan - ${S}`,"Setlist generado automáticamente desde Band Plan",!1),_=k.filter(N=>N.id).map(N=>`spotify:track:${N.id}`);return _.length>0&&await Lr.addTracksToPlaylist(C.id,_),Te.success(`Playlist "${C.name}" creada en Spotify`),C.external_urls.spotify}catch(C){return console.error("Error creating playlist:",C),Te.error("Error al crear playlist en Spotify"),null}},[e]),g=j.useCallback(async S=>{if(!e){Te.error("Debes conectar con Spotify primero");return}try{await Lr.playTrack(S)}catch(k){console.error("Error playing track:",k),Te.error("Error al reproducir canción. Asegúrate de tener Spotify abierto.")}},[e]),w=j.useCallback(async()=>{if(e)try{await Lr.pausePlayback()}catch(S){console.error("Error pausing playback:",S),Te.error("Error al pausar reproducción")}},[e]),m=j.useCallback(async()=>{if(e)try{await Lr.resumePlayback()}catch(S){console.error("Error resuming playback:",S),Te.error("Error al reanudar reproducción")}},[e]);return{isAuthenticated:e,user:n,loading:i,login:l,logout:c,searchTracks:f,createPlaylistFromSetlist:p,playTrack:g,pausePlayback:w,resumePlayback:m}},YB=({className:e="",compact:t=!1})=>{var l,c;const{isAuthenticated:n,user:r,loading:i,login:s,logout:a}=Tp();return i?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[d.jsx(go,{className:"w-4 h-4 animate-spin text-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Conectando con Spotify..."})]}):n?t?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[((l=r==null?void 0:r.images)==null?void 0:l[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),d.jsx("span",{className:"text-sm text-gray-700",children:r==null?void 0:r.display_name}),d.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Desconectar Spotify",children:d.jsx(ey,{className:"w-4 h-4"})})]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:d.jsx(Br,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[((c=r==null?void 0:r.images)==null?void 0:c[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),d.jsxs("span",{className:"font-medium text-gray-900",children:["Conectado como ",r==null?void 0:r.display_name]})]}),d.jsx("p",{className:"text-sm text-gray-600",children:"Spotify conectado correctamente"})]})]}),d.jsxs(yt,{onClick:a,variant:"secondary",size:"sm",children:[d.jsx(ey,{className:"w-4 h-4 mr-2"}),"Desconectar"]})]})}):t?d.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm ${e}`,children:[d.jsx(Br,{className:"w-4 h-4"}),"Conectar Spotify"]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-green-500 p-3 rounded-full",children:d.jsx(Br,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Conecta con Spotify"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Conecta tu cuenta de Spotify para acceder a funciones avanzadas como búsqueda de canciones, creación automática de playlists, y reproducción de previews."}),d.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[d.jsx("li",{children:"• Búsqueda automática de canciones con datos completos"}),d.jsx("li",{children:"• Crear playlists automáticamente desde tus setlists"}),d.jsx("li",{children:"• Reproducir previews de canciones"}),d.jsx("li",{children:"• Control de reproducción desde la app"})]}),d.jsxs(yt,{onClick:s,variant:"primary",className:"bg-green-500 hover:bg-green-600 text-white",children:[d.jsx(Br,{className:"w-4 h-4 mr-2"}),"Conectar con Spotify"]})]})]})})},KB=({onSpotifyTrackSelect:e,onDeezerTrackSelect:t,onManualAdd:n,placeholder:r="Buscar canciones o añadir manualmente...",className:i=""})=>{const{isAuthenticated:s,searchTracks:a,loading:l}=Tp(),[c,f]=j.useState(""),[p,g]=j.useState([]),[w,m]=j.useState([]),[S,k]=j.useState(!1),[C,_]=j.useState(!1),[N,L]=j.useState(null),R=j.useRef(null),J=j.useRef(null),ee=j.useRef(),W=c||"";j.useEffect(()=>{const q=oe=>{R.current&&!R.current.contains(oe.target)&&_(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]),j.useEffect(()=>{if(W.length<2){g([]),m([]);return}return ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{I(W)},300),()=>{ee.current&&clearTimeout(ee.current)}},[W,s]);const I=async q=>{if(k(!0),s)try{const oe=await a(q);g(oe),_(!0)}catch(oe){console.error("Error searching tracks:",oe),g([]),_(!0)}else try{const Le=await(await fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(q)}`)).json();m(Le.data||[]),_(!0)}catch(oe){console.error("Error searching Deezer:",oe),m([]),_(!0)}k(!1)},Z=q=>{e(q),f(""),g([]),m([]),_(!1),V()},re=q=>{t&&t(q),f(""),g([]),m([]),_(!1),V()},P=()=>{n(W),f(""),g([]),m([]),_(!1),V()},F=q=>{if(N===q.id){V();return}if(!q.preview_url){Te.error("Preview no disponible para esta canción");return}V(),J.current&&(J.current.src=q.preview_url,J.current.play(),L(q.id),J.current.onended=()=>{L(null)})},V=()=>{J.current&&(J.current.pause(),J.current.currentTime=0),L(null)},Y=q=>{window.open(q.external_urls.spotify,"_blank"),Te.success("Abriendo en Spotify")},pe=q=>{const oe=Math.floor(q/6e4),Le=Math.floor(q%6e4/1e3);return`${oe}:${Le.toString().padStart(2,"0")}`},ge=q=>{const oe=Math.floor(q/60),Le=q%60;return`${oe}:${Le.toString().padStart(2,"0")}`},Q=q=>{if(N===q.id.toString()){V();return}if(!q.preview){Te.error("Preview no disponible para esta canción");return}V(),J.current&&(J.current.src=q.preview,J.current.play(),L(q.id.toString()),J.current.onended=()=>{L(null)})},$=q=>{window.open(q.link,"_blank"),Te.success("Abriendo en Deezer")};return l?d.jsx("div",{className:`relative ${i}`,children:d.jsxs("div",{className:"relative",children:[d.jsx(ty,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Cargando...",disabled:!0,value:"",readOnly:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-lg"})]})}):d.jsxs("div",{ref:R,className:`relative ${i}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx(ty,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",value:W,onChange:q=>f(q.target.value||""),placeholder:r,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg shadow-sm",onFocus:()=>_(!0)}),S&&d.jsx(go,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),C&&d.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[d.jsxs("div",{onClick:P,className:"p-4 hover:bg-blue-50 cursor-pointer border-b border-gray-100 flex items-center gap-3 bg-blue-25",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:d.jsx(Ig,{className:"w-6 h-6 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-blue-900",children:"Añadir manualmente"}),d.jsx("p",{className:"text-sm text-blue-600",children:W?`Crear "${W}" con formulario`:"Usar formulario manual"})]})]}),s&&p.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100",children:d.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-2",children:[d.jsx(Br,{className:"w-4 h-4"}),"Resultados de Spotify"]})}),p.map(q=>{var oe,Le;return d.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:((oe=q.album.images[2])==null?void 0:oe.url)||((Le=q.album.images[0])==null?void 0:Le.url),alt:q.album.name,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>Z(q),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:q.name}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:q.artists.map(T=>T.name).join(", ")}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.album.name})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(W0,{className:"w-3 h-3"}),pe(q.duration_ms)]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(bN,{className:"w-3 h-3"}),q.popularity,"%"]})]})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[q.preview_url&&d.jsx("button",{onClick:T=>{T.stopPropagation(),F(q)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Preview (30s)",children:N===q.id?d.jsx(s_,{className:"w-4 h-4"}):d.jsx(a_,{className:"w-4 h-4"})}),d.jsx("button",{onClick:T=>{T.stopPropagation(),Y(q)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Abrir en Spotify",children:d.jsx(Z2,{className:"w-4 h-4"})})]})]})},q.id)})]}),!s&&w.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-orange-50 border-b border-orange-100",children:d.jsxs("p",{className:"text-sm text-orange-700 font-medium flex items-center gap-2",children:[d.jsx(Br,{className:"w-4 h-4"}),"Resultados de Deezer"]})}),w.map(q=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:q.album.cover_small||q.album.cover,alt:q.album.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>re(q),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:q.title}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:q.artist.name}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.album.title})]}),d.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(W0,{className:"w-3 h-3"}),ge(q.duration)]})})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[q.preview&&d.jsx("button",{onClick:oe=>{oe.stopPropagation(),Q(q)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Preview (30s)",children:N===q.id.toString()?d.jsx(s_,{className:"w-4 h-4"}):d.jsx(a_,{className:"w-4 h-4"})}),d.jsx("button",{onClick:oe=>{oe.stopPropagation(),$(q)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Abrir en Deezer",children:d.jsx(Z2,{className:"w-4 h-4"})})]})]})},q.id))]}),s&&p.length===0&&!S&&W.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(Br,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Spotify para "',W,'"']})]}),!s&&w.length===0&&!S&&W.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(Br,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Deezer para "',W,'"']})]})]}),d.jsx("audio",{ref:J})]})};class JB{constructor(){this.MUSICBRAINZ_BASE_URL="https://musicbrainz.org/ws/2",this.ACOUSTICBRAINZ_BASE_URL="https://acousticbrainz.org/api/v1",this.lastRequestTime=0,this.MIN_REQUEST_INTERVAL=1e3}async rateLimitedFetch(t){const n=Date.now(),r=this.MIN_REQUEST_INTERVAL-(n-this.lastRequestTime);return r>0&&await new Promise(i=>setTimeout(i,r)),this.lastRequestTime=Date.now(),fetch(t,{headers:{"User-Agent":"BandPlan/1.0 ( https://bandplan.netlify.app )"}})}async searchTrack(t,n){try{const r=t.replace(/[^\w\s]/g,"").trim(),i=n.replace(/[^\w\s]/g,"").trim(),s=`artist:"${r}" AND recording:"${i}"`,a=encodeURIComponent(s),l=`${this.MUSICBRAINZ_BASE_URL}/recording?query=${a}&fmt=json&limit=5`;console.log(`🔍 Searching MusicBrainz for: ${t} - ${n}`);const c=await this.rateLimitedFetch(l);if(!c.ok)return console.warn(`MusicBrainz search failed: ${c.status}`),[];const f=await c.json();if(!f.recordings||f.recordings.length===0)return console.log(`🔍 No recordings found in MusicBrainz for: ${t} - ${n}`),[];const p=f.recordings.map(g=>{var w,m,S,k;return{id:g.id,title:g.title,artist:((m=(w=g["artist-credit"])==null?void 0:w[0])==null?void 0:m.name)||t,album:(k=(S=g.releases)==null?void 0:S[0])==null?void 0:k.title,length:g.length,score:g.score}});return console.log(`✅ Found ${p.length} MusicBrainz matches for: ${t} - ${n}`),p.sort((g,w)=>(w.score||0)-(g.score||0))}catch(r){return console.warn(`Error searching MusicBrainz for ${t} - ${n}:`,r),[]}}async getAudioAnalysis(t){try{const n=`${this.ACOUSTICBRAINZ_BASE_URL}/${t}/high-level`;console.log(`🎵 Getting AcousticBrainz analysis for ID: ${t}`);let r=await fetch(n);if(r.ok){const i=await r.json(),s=`${this.ACOUSTICBRAINZ_BASE_URL}/${t}/low-level`,a=await fetch(s);let l=null;return a.ok&&(l=await a.json()),this.processAcousticBrainzData(i,l)}else return console.warn(`AcousticBrainz analysis not found for ID: ${t}`),null}catch(n){return console.warn(`Error getting AcousticBrainz analysis for ${t}:`,n),null}}processAcousticBrainzData(t,n){var i,s,a,l,c,f,p,g,w,m,S,k,C;const r={};try{if((i=n==null?void 0:n.rhythm)!=null&&i.bpm&&(r.bpm=Math.round(n.rhythm.bpm),r.tempo_confidence=n.rhythm.bpm_confidence||0),((s=n==null?void 0:n.tonal)==null?void 0:s.key_key)!==void 0&&((a=n==null?void 0:n.tonal)==null?void 0:a.key_scale)!==void 0){const _=n.tonal.key_key,N=n.tonal.key_scale,R=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][_];R&&(r.key=N===0?`${R}m`:R,r.key_confidence=n.tonal.key_strength||0)}if(t&&((c=(l=t.mood_happy)==null?void 0:l.all)!=null&&c.happy&&(r.valence=t.mood_happy.all.happy),(p=(f=t.danceability)==null?void 0:f.all)!=null&&p.danceable&&(r.danceability=t.danceability.all.danceable),(w=(g=t.mood_aggressive)==null?void 0:g.all)!=null&&w.aggressive&&(r.energy=t.mood_aggressive.all.aggressive),(S=(m=t.voice_instrumental)==null?void 0:m.all)!=null&&S.instrumental&&(r.instrumentalness=t.voice_instrumental.all.instrumental)),n!=null&&n.highlevel){const _=n.highlevel;(k=_.mood_happy)!=null&&k.value&&(r.valence=r.valence||parseFloat(_.mood_happy.value)),(C=_.danceability)!=null&&C.value&&(r.danceability=r.danceability||parseFloat(_.danceability.value))}}catch(_){console.warn("Error processing AcousticBrainz data:",_)}return r}async getEnhancedMusicData(t,n){try{const r=await this.searchTrack(t,n);if(r.length===0)return console.log(`❌ No MusicBrainz match found for: ${t} - ${n}`),null;const i=r[0];console.log(`🎯 Best MusicBrainz match: ${i.artist} - ${i.title} (score: ${i.score})`);const s=await this.getAudioAnalysis(i.id);if(!s||!s.bpm&&!s.key)return console.log(`❌ No AcousticBrainz data found for: ${i.id}`),null;const a={bpm:s.bpm,key:s.key,energy:s.energy,danceability:s.danceability,valence:s.valence,confidence:{tempo:s.tempo_confidence,key:s.key_confidence,overall:i.score?i.score/100:.5},source:"acousticbrainz"};return console.log(`✅ AcousticBrainz analysis for "${n}" by ${t}:`,{bpm:a.bpm,key:a.key,energy:a.energy,confidence:a.confidence}),a}catch(r){return console.warn(`Error getting enhanced music data for ${t} - ${n}:`,r),null}}}const XB=new JB;class QB{constructor(){this.GETSONGBPM_BASE_URL="https://api.getsongbpm.com",this.GETSONGKEY_BASE_URL="https://api.getsongkey.com"}async getBPMData(t,n){try{const r=this.cleanSearchTerm(t),i=this.cleanSearchTerm(n);console.log("🎵 ===== GETSONGBPM DEBUG START ====="),console.log(`🎵 Original search: "${t}" - "${n}"`),console.log(`🎵 Cleaned search: "${r}" - "${i}"`);const s=`${r} ${i}`,a=`https://getsongbpm.com/search?q=${encodeURIComponent(s)}`;console.log(`🎵 Search query: "${s}"`),console.log(`🎵 GetSongBPM URL: ${a}`);const l=`https://api.allorigins.win/get?url=${encodeURIComponent(a)}`,c=await fetch(l);if(!c.ok)return console.warn(`GetSongBPM website failed: ${c.status}`),null;const p=(await c.json()).contents,g=[/(\d+)\s*BPM/gi,/bpm[:\s]*(\d+)/gi,/tempo[:\s]*(\d+)/gi,/"bpm"\s*:\s*(\d+)/gi];let w=null,m=!1;const S=i.toLowerCase(),k=r.toLowerCase();if(p.toLowerCase().includes(S)||p.toLowerCase().includes(k)){m=!0;for(const C of g){const _=p.matchAll(C);for(const N of _){const L=parseInt(N[1]);if(L>=60&&L<=200){w=L;break}}if(w)break}}return w&&m?(console.log(`✅ GetSongBPM website found: ${w} BPM for "${i}" by ${r}`),{bpm:w,confidence:.85}):(console.log(`❌ No BPM data found on GetSongBPM website for: ${r} - ${i}`),null)}catch(r){return console.warn(`Error scraping GetSongBPM for ${t} - ${n}:`,r),null}}async getKeyData(t,n){var r;try{const i=this.cleanSearchTerm(t),s=this.cleanSearchTerm(n);console.log("🔑 ===== GETSONGKEY DEBUG START ====="),console.log(`🔑 Original search: "${t}" - "${n}"`),console.log(`🔑 Cleaned search: "${i}" - "${s}"`);const a=`${i} ${s}`,l=`https://getsongkey.com/search?q=${encodeURIComponent(a)}`;console.log(`🔑 Search query: "${a}"`),console.log(`🔑 GetSongKey URL: ${l}`);const c=`https://api.allorigins.win/get?url=${encodeURIComponent(l)}`;console.log("🔑 ===== PROXY CONFIGURATION ====="),console.log(`🔑 Target URL (what we want to fetch): ${l}`),console.log(`🔑 Encoded target URL: ${encodeURIComponent(l)}`),console.log(`🔑 Final proxy URL: ${c}`),console.log("🔑 Proxy service: api.allorigins.win"),console.log("🔑 Proxy method: GET with url parameter");const f={method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive","Upgrade-Insecure-Requests":"1"}};console.log("🔑 ===== REQUEST DETAILS ====="),console.log("🔑 Making fetch request to proxy..."),console.log(`🔑 Method: ${f.method}`),console.log(`🔑 URL: ${c}`),console.log("🔑 Headers:",f.headers),console.log("🔑 Body: (none - GET request)"),console.log("🔑 Request options:",f),console.log("🔑 ===== SENDING REQUEST =====");const p=Date.now(),g=await fetch(c,f),w=Date.now();if(console.log("🔑 ===== RESPONSE RECEIVED ====="),console.log(`🔑 Response time: ${w-p}ms`),console.log(`🔑 Status: ${g.status} ${g.statusText}`),console.log("🔑 Headers:",Object.fromEntries(g.headers.entries())),!g.ok)return console.warn(`🔑 GetSongKey website failed: ${g.status} ${g.statusText}`),console.log("🔑 ===== GETSONGKEY DEBUG END (FAILED) ====="),null;console.log("🔑 Response received, parsing JSON...");const m=await g.json();console.log("🔑 ===== PROXY RESPONSE DATA ====="),console.log("🔑 Response object keys:",Object.keys(m)),console.log("🔑 Status field:",m.status),console.log("🔑 Status code field:",(r=m.status)==null?void 0:r.http_code),console.log("🔑 Response object:",m);const S=m.contents;if(console.log("🔑 ===== HTML CONTENT ANALYSIS ====="),console.log("🔑 HTML exists:",!!S),console.log("🔑 HTML type:",typeof S),console.log("🔑 HTML length:",S?S.length:"null"),console.log("🔑 HTML is string:",typeof S=="string"),console.log("🔑 HTML preview (first 500 chars):",S?S.substring(0,500):"null"),S&&S.length>0){const ee=S.toLowerCase().includes("getsongkey"),W=S.toLowerCase().includes("search"),I=S.toLowerCase().includes("key"),Z=S.toLowerCase().includes("bpm");console.log(`🔑 HTML contains 'getsongkey': ${ee}`),console.log(`🔑 HTML contains 'search': ${W}`),console.log(`🔑 HTML contains 'key': ${I}`),console.log(`🔑 HTML contains 'bpm': ${Z}`)}const k=[/key[:\s]*([A-G][#b]?(?:\s*(?:major|minor|maj|min|m))?)/gi,/([A-G][#b]?)\s*(?:major|minor|maj|min|m)/gi,/"key"\s*:\s*"([^"]+)"/gi,/\b([A-G][#b]?)\s+(?:major|minor)\b/gi];let C=null,_=!1;const N=s.toLowerCase(),L=i.toLowerCase();console.log("🔑 Looking for matches in HTML..."),console.log(`🔑 Searching for title: "${N}"`),console.log(`🔑 Searching for artist: "${L}"`);const R=S&&S.toLowerCase().includes(N),J=S&&S.toLowerCase().includes(L);if(console.log(`🔑 Title found in HTML: ${R}`),console.log(`🔑 Artist found in HTML: ${J}`),R||J){_=!0,console.log("🔑 Match found! Searching for key patterns...");for(let ee=0;ee<k.length;ee++){const W=k[ee];console.log(`🔑 Trying pattern ${ee+1}: ${W}`);const I=S.matchAll(W);let Z=0;for(const re of I){Z++;const P=re[1].trim();if(console.log(`🔑 Found potential key match ${Z}: "${P}" (full match: "${re[0]}")`),/^[A-G][#b]?(?:\s*(?:major|minor|maj|min|m))?$/i.test(P)){C=this.normalizeKey(P),console.log(`🔑 Valid key found: "${C}"`);break}else console.log(`🔑 Invalid key format: "${P}"`)}if(console.log(`🔑 Pattern ${ee+1} found ${Z} matches`),C)break}}else console.log("🔑 No match found in HTML - neither title nor artist found");return C&&_?(console.log(`🔑 ✅ SUCCESS: GetSongKey website found: ${C} for "${s}" by ${i}`),console.log("🔑 ===== GETSONGKEY DEBUG END (SUCCESS) ====="),{key:C,confidence:.85}):(console.log(`🔑 ❌ FAILURE: No key data found on GetSongKey website for: ${i} - ${s}`),console.log("🔑 ===== GETSONGKEY DEBUG END (NO DATA) ====="),null)}catch(i){return console.error(`🔑 ERROR in GetSongKey scraping for ${t} - ${n}:`,i),console.log("🔑 ===== GETSONGKEY DEBUG END (ERROR) ====="),null}}normalizeKey(t){return t.trim().replace(/\s+/g," ").replace(/major/gi,"").replace(/minor/gi,"m").replace(/maj/gi,"").replace(/min/gi,"m").replace(/\s+/g,"").trim().replace(/([A-G][#b]?)\s*m$/i,"$1m")}async getPreciseAnalysis(t,n){try{console.log(`🎯 Getting precise analysis from GetSongBPM + GetSongKey websites for: ${t} - ${n}`);const[r,i]=await Promise.allSettled([this.getBPMData(t,n),this.getKeyData(t,n)]);let s=null,a=null,l=0,c=0;r.status==="fulfilled"&&r.value&&(s=r.value.bpm,l=r.value.confidence),i.status==="fulfilled"&&i.value&&(a=i.value.key,c=i.value.confidence);const f={bpm:s||void 0,key:a||void 0,confidence:{bpm:l,key:c},source:s&&a?"combined":s?"getsongbpm":a?"getsongkey":"combined"};return s||a?console.log(`✅ Website analysis complete for "${n}" by ${t}:`,f):(console.log(`❌ No data found on GetSong websites for "${n}" by ${t}`),f.error="No data found on GetSongBPM/GetSongKey websites"),f}catch(r){return console.warn(`Error in website analysis for ${t} - ${n}:`,r),{source:"combined",error:r instanceof Error?r.message:"Unknown error"}}}cleanSearchTerm(t){return t.replace(/\([^)]*\)/g,"").replace(/\[[^\]]*\]/g,"").replace(/feat\.|ft\./gi,"").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}findBestMatch(t,n,r){if(!t||t.length===0)return null;let i=null,s=0;for(const a of t){const l=this.calculateMatchScore(a,n,r);l>s&&(s=l,i=a)}return s>.5?i:null}calculateMatchScore(t,n,r){const i=(t.artist||"").toLowerCase(),s=(t.song||t.title||"").toLowerCase(),a=n.toLowerCase(),l=r.toLowerCase(),c=this.stringSimilarity(i,a);return this.stringSimilarity(s,l)*.6+c*.4}stringSimilarity(t,n){if(t===n)return 1;if(t.length===0||n.length===0)return 0;if(t.includes(n)||n.includes(t))return .8;const r=t.split(/\s+/),i=n.split(/\s+/);let s=0;for(const a of r)i.some(l=>a.includes(l)||l.includes(a))&&s++;return s/Math.max(r.length,i.length)}calculateMatchConfidence(t,n,r){const i=this.calculateMatchScore(t,n,r);return Math.min(i,.95)}}const ZB=new QB;class eU{constructor(){this.AUDIODB_BASE_URL="https://theaudiodb.com/api/v1/json",this.AUDIODB_API_KEY="2",this.ITUNES_BASE_URL="https://itunes.apple.com/search",this.DEEZER_BASE_URL="https://api.deezer.com",this.GENIUS_BASE_URL="https://api.genius.com",this.GENIUS_ACCESS_TOKEN="your_genius_token_here",this.MUSICBRAINZ_BASE_URL="https://musicbrainz.org/ws/2",this.cache=new Map}async searchAudioDB(t,n){try{const r=`audiodb-${t}-${n}`;if(this.cache.has(r))return this.cache.get(r);console.log(`🎵 Searching AudioDB API for: ${t} - ${n}`);const i=this.cleanSearchTerm(t),s=this.cleanSearchTerm(n),a=`${this.AUDIODB_BASE_URL}/${this.AUDIODB_API_KEY}/searchtrack.php?s=${encodeURIComponent(i)}&t=${encodeURIComponent(s)}`,l=await fetch(a);if(!l.ok)return null;const c=await l.json();if(c.track&&c.track.length>0){const f=this.findBestMatch(c.track,i,s,"strArtist","strTrack");if(f)return console.log(`✅ AudioDB found: ${f.strArtist} - ${f.strTrack}`),{genre:f.strGenre,mood:f.strMood,style:f.strStyle,source:"audiodb"}}return null}catch(r){return console.warn(`Error searching AudioDB: ${r}`),null}}async searchItunes(t,n){try{console.log(`🍎 Searching iTunes API for: ${t} - ${n}`);const r=`${t} ${n}`,i=`${this.ITUNES_BASE_URL}?term=${encodeURIComponent(r)}&media=music&entity=song&limit=10`,s=await fetch(i);if(!s.ok)return null;const a=await s.json();if(a.results&&a.results.length>0){const l=this.findBestMatch(a.results,t,n,"artistName","trackName");if(l)return console.log(`✅ iTunes found: ${l.artistName} - ${l.trackName}`),{genre:l.primaryGenreName,duration:l.trackTimeMillis,preview:l.previewUrl,source:"itunes"}}return null}catch(r){return console.warn(`Error searching iTunes: ${r}`),null}}async searchDeezer(t,n){var r,i,s,a,l;try{console.log(`🎧 Searching Deezer API for: ${t} - ${n}`);const c=`artist:"${t}" track:"${n}"`,f=`${this.DEEZER_BASE_URL}/search?q=${encodeURIComponent(c)}&limit=10`,p=await fetch(f);if(!p.ok)return null;const g=await p.json();if(g.data&&g.data.length>0){const w=this.findBestMatch(g.data,t,n,"artist.name","title");if(w){console.log(`✅ Deezer found: ${(r=w.artist)==null?void 0:r.name} - ${w.title}`);let m=null;if((i=w.album)!=null&&i.id)try{const S=await fetch(`${this.DEEZER_BASE_URL}/album/${w.album.id}`);S.ok&&(m=await S.json())}catch(S){console.warn("Error fetching Deezer album data:",S)}return{duration:w.duration,bpm:w.bpm||null,genre:((l=(a=(s=m==null?void 0:m.genres)==null?void 0:s.data)==null?void 0:a[0])==null?void 0:l.name)||null,preview:w.preview,source:"deezer"}}}return null}catch(c){return console.warn(`Error searching Deezer: ${c}`),null}}async searchMusicBrainz(t,n){try{console.log(`🎼 Searching MusicBrainz API for: ${t} - ${n}`),await this.sleep(1e3);const r=`artist:"${t}" AND recording:"${n}"`,i=`${this.MUSICBRAINZ_BASE_URL}/recording?query=${encodeURIComponent(r)}&fmt=json&limit=5`,s=await fetch(i,{headers:{"User-Agent":"BandPlan/1.0 ( https://bandplan.netlify.app )"}});if(!s.ok)return null;const a=await s.json();if(a.recordings&&a.recordings.length>0){const l=a.recordings[0];return console.log(`✅ MusicBrainz found: ${l.title}`),{id:l.id,title:l.title,length:l.length,tags:l.tags||[],source:"musicbrainz"}}return null}catch(r){return console.warn(`Error searching MusicBrainz: ${r}`),null}}async searchGenius(t,n){var r,i;try{if(!this.GENIUS_ACCESS_TOKEN||this.GENIUS_ACCESS_TOKEN==="your_genius_token")return null;console.log(`🧠 Searching Genius API for: ${t} - ${n}`);const s=`${t} ${n}`,a=`${this.GENIUS_BASE_URL}/search?q=${encodeURIComponent(s)}`,l=await fetch(a,{headers:{Authorization:`Bearer ${this.GENIUS_ACCESS_TOKEN}`}});if(!l.ok)return null;const c=await l.json();if((r=c.response)!=null&&r.hits&&c.response.hits.length>0){const f=c.response.hits[0].result;if(f)return console.log(`✅ Genius found: ${f.full_title}`),{title:f.title,artist:(i=f.primary_artist)==null?void 0:i.name,lyrics_url:f.url,stats:f.stats,source:"genius"}}return null}catch(s){return console.warn(`Error searching Genius: ${s}`),null}}async getFreeApiData(t,n){try{const r=`free-${t}-${n}`;if(this.cache.has(r)){const g=this.cache.get(r);return console.log(`📦 Using cached free API data for: ${t} - ${n}`),g}console.log(`🚀 Getting free API data for: ${t} - ${n}`);const[i,s,a]=await Promise.allSettled([this.searchAudioDB(t,n),this.searchItunes(t,n),this.searchDeezer(t,n)]),l=await Promise.allSettled([this.searchMusicBrainz(t,n)]),c=await Promise.allSettled([this.searchGenius(t,n)]);let f={source:"combined"},p=[];if(i.status==="fulfilled"&&i.value){const g=i.value;g.genre&&(f.genre=g.genre),p.push("audiodb")}if(s.status==="fulfilled"&&s.value){const g=s.value;g.genre&&!f.genre&&(f.genre=g.genre),p.push("itunes")}if(a.status==="fulfilled"&&a.value){const g=a.value;g.bpm&&(f.bpm=g.bpm,f.confidence={bpm:.9,overall:.9}),g.genre&&!f.genre&&(f.genre=g.genre),p.push("deezer")}return l[0].status==="fulfilled"&&l[0].value&&p.push("musicbrainz"),c[0].status==="fulfilled"&&c[0].value&&p.push("genius"),p.length>1?f.source="combined":p.length===1&&(f.source=p[0]),f.bpm||f.genre||p.length>0?(this.cache.set(r,f),console.log(`✅ Free API analysis complete for "${n}" by ${t}:`,{...f,sourcesUsed:p})):(f.error="No data found from free APIs",console.log(`❌ No free API data found for "${n}" by ${t}`)),f}catch(r){return console.warn(`Error in free API analysis for ${t} - ${n}:`,r),{source:"combined",error:r instanceof Error?r.message:"Unknown error"}}}cleanSearchTerm(t){return t.replace(/\([^)]*\)/g,"").replace(/\[[^\]]*\]/g,"").replace(/feat\.|ft\./gi,"").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}findBestMatch(t,n,r,i,s){if(!t||t.length===0)return null;let a=null,l=0;for(const c of t){const f=this.getNestedValue(c,i)||"",p=this.getNestedValue(c,s)||"",g=this.calculateMatchScore(f,p,n,r);g>l&&(l=g,a=c)}return l>.5?a:null}getNestedValue(t,n){return n.split(".").reduce((r,i)=>r&&r[i],t)}calculateMatchScore(t,n,r,i){const s=this.stringSimilarity(t.toLowerCase(),r.toLowerCase());return this.stringSimilarity(n.toLowerCase(),i.toLowerCase())*.7+s*.3}stringSimilarity(t,n){if(t===n)return 1;if(t.length===0||n.length===0)return 0;if(t.includes(n)||n.includes(t))return .8;const r=t.split(/\s+/),i=n.split(/\s+/);let s=0;for(const a of r)i.some(l=>a.includes(l)||l.includes(a))&&s++;return s/Math.max(r.length,i.length)}sleep(t){return new Promise(n=>setTimeout(n,t))}}const tU=new eU;class nU{constructor(){this.LASTFM_API_KEY="d3640056096deab975e1baced497df72",this.LASTFM_BASE_URL="https://ws.audioscrobbler.com/2.0/",this.artistGenreMap={queen:"rock","led zeppelin":"rock","the beatles":"rock","pink floyd":"rock","the rolling stones":"rock","ac/dc":"metal",metallica:"metal","iron maiden":"metal","black sabbath":"metal",madonna:"pop","michael jackson":"pop","britney spears":"pop","taylor swift":"pop","ariana grande":"pop","ed sheeran":"pop",adele:"ballad","daft punk":"electronic","calvin harris":"dance","david guetta":"dance",skrillex:"electronic",deadmau5:"electronic",eminem:"hip hop","jay-z":"hip hop","kanye west":"hip hop",drake:"hip hop","kendrick lamar":"hip hop","alanis morissette":"alternative",nirvana:"grunge",radiohead:"alternative","foo fighters":"alternative",shakira:"latin","jennifer lopez":"latin pop","ricky martin":"latin pop","manu chao":"latin","jesse & joy":"latin pop","alejandro sanz":"latin ballad",mecano:"spanish pop","heroes del silencio":"spanish rock","maldita nerea":"spanish pop","la oreja de van gogh":"spanish pop"},this.genreBPMMap={rock:{min:110,max:140,typical:125},pop:{min:100,max:130,typical:115},dance:{min:120,max:140,typical:128},electronic:{min:110,max:150,typical:130},"hip hop":{min:80,max:100,typical:90},jazz:{min:100,max:180,typical:120},blues:{min:60,max:120,typical:80},reggae:{min:60,max:90,typical:75},folk:{min:80,max:120,typical:100},classical:{min:60,max:200,typical:120},metal:{min:140,max:200,typical:160},punk:{min:150,max:200,typical:175},ballad:{min:60,max:90,typical:75},disco:{min:110,max:130,typical:120},funk:{min:100,max:120,typical:110},country:{min:80,max:140,typical:110},latin:{min:90,max:140,typical:115},reggaeton:{min:90,max:100,typical:95},alternative:{min:100,max:140,typical:120},grunge:{min:110,max:140,typical:125},"latin pop":{min:100,max:130,typical:115},"latin ballad":{min:70,max:100,typical:85},"spanish pop":{min:100,max:130,typical:115},"spanish rock":{min:110,max:140,typical:125}},this.genreKeyMap={rock:["E","A","G","D","C"],pop:["C","G","F","D","A"],dance:["C","G","F","A","D"],electronic:["C","G","F","A","D"],"hip hop":["C","F","G","Bb","Eb"],jazz:["F","Bb","C","G","D"],blues:["E","A","G","C","D"],folk:["G","C","D","A","F"],country:["G","C","D","A","F"],metal:["E","D","C","A","F#"],ballad:["C","G","F","D","A"],alternative:["E","A","D","G","C"],grunge:["E","A","D","G","C"],latin:["C","G","F","D","A"],"latin pop":["C","G","F","D","A"],"spanish pop":["C","G","F","D","A"],"spanish rock":["E","A","G","D","C"]}}detectGenreFromArtist(t){const n=t.toLowerCase();if(this.artistGenreMap[n])return this.artistGenreMap[n];for(const[r,i]of Object.entries(this.artistGenreMap))if(n.includes(r)||r.includes(n))return i;return null}detectGenreFromTitle(t){const n=t.toLowerCase();return n.includes("remix")||n.includes("mix")||n.includes("club")||n.includes("dance")?"dance":n.includes("love")||n.includes("heart")||n.includes("forever")||n.includes("tears")?"ballad":n.includes("rock")||n.includes("roll")||n.includes("wild")||n.includes("break")?"rock":null}hashString(t){let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return Math.abs(n)}getConsistentRandom(t,n,r,i){const a=this.hashString(t+n)%1e3/1e3;return Math.round(r+a*(i-r))}async getLastFMTrackInfo(t,n){var r,i,s,a;if(!this.LASTFM_API_KEY||this.LASTFM_API_KEY==="tu_lastfm_api_key_aqui")return console.warn("LastFM API key not configured"),null;try{const l=new URLSearchParams({method:"track.getInfo",api_key:this.LASTFM_API_KEY,artist:t,track:n,format:"json"}),f=await(await fetch(`${this.LASTFM_BASE_URL}?${l}`)).json();if(f.error)return console.warn(`LastFM API error: ${f.message}`),null;const p=f.track;return p?{name:p.name,artist:((r=p.artist)==null?void 0:r.name)||t,album:(i=p.album)==null?void 0:i.title,duration:p.duration?parseInt(p.duration)*1e3:void 0,playcount:parseInt(p.playcount)||0,listeners:parseInt(p.listeners)||0,tags:((a=(s=p.toptags)==null?void 0:s.tag)==null?void 0:a.map(g=>({name:g.name,count:parseInt(g.count)||0})))||[]}:null}catch(l){return console.warn(`Error fetching from LastFM: ${l}`),null}}async getLastFMArtistInfo(t){var n,r;if(!this.LASTFM_API_KEY||this.LASTFM_API_KEY==="tu_lastfm_api_key_aqui")return null;try{const i=new URLSearchParams({method:"artist.getInfo",api_key:this.LASTFM_API_KEY,artist:t,format:"json"}),a=await(await fetch(`${this.LASTFM_BASE_URL}?${i}`)).json();return a.error||!a.artist?null:{tags:((r=(n=a.artist.tags)==null?void 0:n.tag)==null?void 0:r.map(l=>({name:l.name.toLowerCase(),count:parseInt(l.count)||0})))||[]}}catch(i){return console.warn(`Error fetching artist from LastFM: ${i}`),null}}detectGenreFromLastFM(t,n){const r=[...t.tags||[],...(n==null?void 0:n.tags)||[]];if(r.length===0)return null;const i={rock:"rock","classic rock":"rock","hard rock":"rock","alternative rock":"alternative","indie rock":"alternative","punk rock":"punk",metal:"metal","heavy metal":"metal","death metal":"metal","black metal":"metal",grunge:"grunge",pop:"pop","pop rock":"pop",synthpop:"pop",electropop:"electronic","indie pop":"pop",electronic:"electronic",house:"dance",techno:"electronic",trance:"dance","drum and bass":"electronic",dubstep:"electronic",edm:"dance",dance:"dance","hip hop":"hip hop",rap:"hip hop","hip-hop":"hip hop",jazz:"jazz",blues:"blues",country:"country",folk:"folk",reggae:"reggae",funk:"funk",disco:"disco",ballad:"ballad",latin:"latin",spanish:"spanish pop"};let s=null,a=0;for(const l of r){const c=i[l.name.toLowerCase()];c&&l.count>a&&(s=c,a=l.count)}return s}async enrichTrackData(t,n){try{console.log(`🎯 Trying Free Official APIs for: ${t} - ${n}`);const m=await tU.getFreeApiData(t,n);if(m&&!m.error&&(m.bpm||m.key||m.genre)){const S={bpm:m.bpm,key:m.key,energy:m.energy,danceability:m.danceability,valence:m.valence,confidence:m.confidence,source:m.source};if(m.bpm)return console.log(`✅ Using Free API data for "${n}" by ${t}:`,S),S;console.log("📊 Got partial data from Free APIs, trying other sources for BPM...")}}catch(m){console.warn(`Free API Service failed for ${t} - ${n}:`,m)}try{console.log(`🎯 Trying GetSongBPM/GetSongKey for: ${t} - ${n}`);const m=await ZB.getPreciseAnalysis(t,n);if(m&&!m.error&&(m.bpm||m.key)){const S={bpm:m.bpm,key:m.key,confidence:m.confidence,source:m.source};return console.log(`✅ Using GetSongBPM/GetSongKey data for "${n}" by ${t}:`,S),S}}catch(m){console.warn(`GetSongBPM/GetSongKey failed for ${t} - ${n}:`,m)}try{console.log(`🎯 Trying MusicBrainz/AcousticBrainz for: ${t} - ${n}`);const m=await XB.getEnhancedMusicData(t,n);if(m&&(m.bpm||m.key)){const S={bpm:m.bpm,key:m.key,energy:m.energy,danceability:m.danceability,valence:m.valence,confidence:m.confidence,source:"acousticbrainz"};return console.log(`✅ Using AcousticBrainz data for "${n}" by ${t}:`,S),S}}catch(m){console.warn(`MusicBrainz/AcousticBrainz failed for ${t} - ${n}:`,m)}console.log(`🔄 Falling back to LastFM + estimation for: ${t} - ${n}`);const r={source:"lastfm"};let i=null,s=null,a=null;try{const[m,S]=await Promise.allSettled([this.getLastFMTrackInfo(t,n),this.getLastFMArtistInfo(t)]);m.status==="fulfilled"&&(s=m.value),S.status==="fulfilled"&&(a=S.value),(s||a)&&(i=this.detectGenreFromLastFM(s||{name:n,artist:t,tags:[]},a))}catch(m){console.warn(`Error getting LastFM data for ${t} - ${n}:`,m)}i||(i=this.detectGenreFromArtist(t),i||(i=this.detectGenreFromTitle(n)),r.source="estimation"),i||(i="pop",r.source="estimation");const l=this.genreBPMMap[i];l&&(r.bpm=this.getConsistentRandom(t,n,l.min,l.max));const c=this.genreKeyMap[i];if(c){const m=this.hashString(t+n)%c.length;r.key=c[m]}const f={metal:.9,punk:.9,dance:.8,electronic:.8,rock:.7,pop:.6,"hip hop":.6,alternative:.6,grunge:.7,"spanish rock":.7,folk:.4,ballad:.3,"latin ballad":.3,blues:.4,jazz:.5};r.energy=f[i]||.6;let p=.5;const g=n.toLowerCase();g.includes("happy")||g.includes("love")||g.includes("party")||g.includes("dance")?p=.8:g.includes("sad")||g.includes("cry")||g.includes("break")||g.includes("hurt")?p=.2:i==="dance"||i==="pop"?p=.7:(i==="ballad"||i==="blues")&&(p=.3),r.valence=p;const w={};return s!=null&&s.playcount&&(w.playcount=s.playcount),s!=null&&s.listeners&&(w.listeners=s.listeners),console.log(`🎵 Generated enhanced data for "${n}" by ${t}:`,{source:r.source,genre:i,bpm:r.bpm,key:r.key,energy:r.energy,valence:r.valence,confidence:r.confidence,...w}),r}}const Q_=new nU,Z_={title:"",artist:"",duration_minutes:"",key:"",notes:""},e3=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function rU({groupId:e,canManageSongs:t=!0}){const[n,r]=j.useState([]),[i,s]=j.useState(!0),[a,l]=j.useState(!1),[c,f]=j.useState(null),[p,g]=j.useState(Z_),[w,m]=j.useState(!1),[S,k]=j.useState(null),[C,_]=j.useState(null),[N,L]=j.useState(""),[R,J]=j.useState(!1),[ee,W]=j.useState(null),[I,Z]=j.useState(""),[re,P]=j.useState(""),[F,V]=j.useState("");Tp();const Y=n.filter(ne=>{var Ne;const ce=!I||ne.title.toLowerCase().includes(I.toLowerCase())||((Ne=ne.artist)==null?void 0:Ne.toLowerCase().includes(I.toLowerCase())),le=!re||ne.key===re,me=!F||ne.type===F;return ce&&le&&me}),pe=[...new Set(n.map(ne=>ne.key).filter(Boolean))].sort();j.useEffect(()=>{ge()},[e]);const ge=async()=>{s(!0);const ne=await Q0(e);ne&&r(ne),s(!1)},Q=async ne=>{const{data:{user:ce}}=await Xe.auth.getUser();if(!ce){Te.error("No se pudo obtener la información del usuario");return}let le=ne.audio_features;if(!le)try{le=await Lr.getAudioFeatures(ne.id)}catch(qe){console.warn(`No se pudieron obtener audio features de Spotify para "${ne.name}":`,qe)}const me=Math.round(ne.duration_ms/6e4);let Ne="",Me=null,de=null,B=null,ke=null;if((le==null?void 0:le.key)!==void 0)Ne=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][le.key],Me=le.tempo,de=le.energy,B=le.valence,console.log(`✅ Using Spotify audio features for "${ne.name}"`);else try{ke=await Q_.enrichTrackData(ne.artists.map(be=>be.name).join(", "),ne.name),ke.key&&(Ne=ke.key),ke.bpm&&(Me=ke.bpm),ke.energy&&(de=ke.energy),ke.valence&&(B=ke.valence);const qe=ke.source==="audiodb"?"AudioDB":ke.source==="itunes"?"iTunes":ke.source==="deezer"?"Deezer":ke.source==="musicbrainz"?"MusicBrainz":ke.source==="genius"?"Genius":ke.source==="getsongbpm"?"GetSongBPM":ke.source==="getsongkey"?"GetSongKey":ke.source==="combined"?"Multiple Sources":ke.source==="acousticbrainz"?"AcousticBrainz":ke.source==="lastfm"?"LastFM":"Estimation";console.log(`🔄 Using ${qe} data for "${ne.name}":`,ke)}catch(qe){console.warn(`Could not get enhanced music data for "${ne.name}":`,qe)}let Fe=`Popularidad: ${ne.popularity}% | Álbum: ${ne.album.name} (${ne.album.release_date.split("-")[0]})`;if(Me){const qe=le!=null&&le.tempo?"Spotify":(ke==null?void 0:ke.source)==="audiodb"?"AudioDB":(ke==null?void 0:ke.source)==="itunes"?"iTunes":(ke==null?void 0:ke.source)==="deezer"?"Deezer":(ke==null?void 0:ke.source)==="musicbrainz"?"MusicBrainz":(ke==null?void 0:ke.source)==="genius"?"Genius":(ke==null?void 0:ke.source)==="getsongbpm"?"GetSongBPM":(ke==null?void 0:ke.source)==="getsongkey"?"GetSongKey":(ke==null?void 0:ke.source)==="combined"?"Multiple Sources":(ke==null?void 0:ke.source)==="acousticbrainz"?"AcousticBrainz":(ke==null?void 0:ke.source)==="lastfm"?"LastFM":"Estimado";Fe+=` | Tempo: ${Math.round(Me)} BPM (${qe})`}de!==null&&(Fe+=` | Energía: ${Math.round(de*100)}%`),B!==null&&(Fe+=` | Valencia: ${Math.round(B*100)}%`);const Re={title:ne.name,artist:ne.artists.map(qe=>qe.name).join(", "),duration_minutes:me.toString(),key:Ne,notes:Fe,group_id:e,created_by:ce.id};try{await u0(Re),await ge();const qe=Me?` (${Math.round(Me)} BPM${Ne?`, ${Ne}`:""})`:Ne?` (${Ne})`:"";Te.success(`"${ne.name}"${qe} añadida desde Spotify`)}catch(qe){console.error("Error creating song from Spotify:",qe),Te.error("Error al añadir la canción")}},$=async ne=>{const{data:{user:ce}}=await Xe.auth.getUser();if(!ce){Te.error("No se pudo obtener la información del usuario");return}const le=Math.round(ne.duration/60);let me="",Ne=null,Me=null,de=null,B=null;try{B=await Q_.enrichTrackData(ne.artist.name,ne.title),B.key&&(me=B.key),B.bpm&&(Ne=B.bpm),B.energy&&(Me=B.energy),B.valence&&(de=B.valence);const Re=B.source==="audiodb"?"AudioDB":B.source==="itunes"?"iTunes":B.source==="deezer"?"Deezer API":B.source==="musicbrainz"?"MusicBrainz":B.source==="genius"?"Genius":B.source==="getsongbpm"?"GetSongBPM":B.source==="getsongkey"?"GetSongKey":B.source==="combined"?"Multiple Sources":B.source==="acousticbrainz"?"AcousticBrainz":B.source==="lastfm"?"LastFM":"Estimado";console.log(`🔄 Enhanced Deezer track "${ne.title}" with ${Re}:`,B)}catch(Re){console.warn(`Could not enhance Deezer track "${ne.title}":`,Re)}let ke=`Álbum: ${ne.album.title} | Fuente: Deezer`;if(Ne){const Re=(B==null?void 0:B.source)==="audiodb"?"AudioDB":(B==null?void 0:B.source)==="itunes"?"iTunes":(B==null?void 0:B.source)==="deezer"?"Deezer API":(B==null?void 0:B.source)==="musicbrainz"?"MusicBrainz":(B==null?void 0:B.source)==="genius"?"Genius":(B==null?void 0:B.source)==="getsongbpm"?"GetSongBPM":(B==null?void 0:B.source)==="getsongkey"?"GetSongKey":(B==null?void 0:B.source)==="combined"?"Multiple Sources":(B==null?void 0:B.source)==="acousticbrainz"?"AcousticBrainz":(B==null?void 0:B.source)==="lastfm"?"LastFM":"Estimado";ke+=` | Tempo: ${Math.round(Ne)} BPM (${Re})`}Me!==null&&(ke+=` | Energía: ${Math.round(Me*100)}%`),de!==null&&(ke+=` | Valencia: ${Math.round(de*100)}%`);const Fe={title:ne.title,artist:ne.artist.name,duration_minutes:le.toString(),key:me,notes:ke,group_id:e,created_by:ce.id};try{await u0(Fe),await ge();const Re=Ne?` (${Math.round(Ne)} BPM${me?`, ${me}`:""})`:me?` (${me})`:"";Te.success(`"${ne.title}"${Re} añadida desde Deezer`)}catch(Re){console.error("Error creating song from Deezer:",Re),Te.error("Error al añadir la canción")}},q=async ne=>{if(ne.preventDefault(),!p.title.trim()){Te.error("El título es obligatorio");return}const{data:{user:ce}}=await Xe.auth.getUser();if(!ce){Te.error("No se pudo obtener la información del usuario");return}const le={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:ce.id};if(c){const me=await C_(c.id,le);me&&(Te.success("Canción actualizada correctamente"),r(Ne=>Ne.map(Me=>Me.id===c.id?me:Me)))}else{const me=await u0(le);me&&(Te.success("Canción creada correctamente"),r(Ne=>[...Ne,me]))}K()},oe=ne=>{var ce;f(ne),g({title:ne.title,artist:ne.artist||"",duration_minutes:((ce=ne.duration_minutes)==null?void 0:ce.toString())||"",key:ne.key||"",notes:ne.notes||""}),l(!0)},Le=ne=>{k(ne),m(!0)},T=async()=>{if(!S)return;console.log("Eliminando canción:",S.id);const ne=await D$(S.id);console.log("Resultado de eliminación:",ne),ne?(Te.success("Canción eliminada correctamente"),r(ce=>ce.filter(le=>le.id!==S.id))):Te.error("No se pudo eliminar la canción"),m(!1),k(null)},K=()=>{g(Z_),f(null),l(!1)},se=ne=>{if(!ne)return"-";const ce=Math.floor(ne/60),le=ne%60;return ce>0?`${ce}h ${le}m`:`${le}m`},ue=ne=>{if(!ne)return"-";const ce=ne.match(/Tempo:\s*(\d+)\s*BPM/i);return ce?`${ce[1]}`:"-"},he=(ne,ce,le)=>{_({songId:ne,field:ce}),L(String(le||"")),W(null)},je=async(ne,ce)=>{if(N===(ne[ce]||"")){_(null);return}J(!0),W(null);const le=await C_(ne.id,{[ce]:ce==="duration_minutes"?parseInt(N)||null:N||null});J(!1),le?(r(me=>me.map(Ne=>Ne.id===ne.id?{...Ne,...le}:Ne)),_(null)):W("Error al guardar")},Ce=(ne,ce,le)=>{ne.key==="Enter"?(ne.preventDefault(),je(ce,le)):ne.key==="Escape"&&_(null)};return i?d.jsx("div",{className:"text-center py-8",children:"Cargando canciones..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),d.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:d.jsx(YB,{compact:!0})})]})}),t&&d.jsx("div",{className:"mb-6",children:d.jsx(KB,{onSpotifyTrackSelect:Q,onDeezerTrackSelect:$,onManualAdd:ne=>{ne&&g(ce=>({...ce,title:ne})),l(!0)},className:"w-full"})}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),a&&t&&d.jsxs("form",{onSubmit:q,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Canción":"Nueva Canción"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Gn,{label:"Título *",value:p.title,onChange:ne=>g({...p,title:ne.target.value}),required:!0}),d.jsx(Gn,{label:"Artista",value:p.artist,onChange:ne=>g({...p,artist:ne.target.value})}),d.jsx(Gn,{label:"Duración (minutos)",type:"number",value:p.duration_minutes,onChange:ne=>g({...p,duration_minutes:ne.target.value}),min:"1"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),d.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:ne=>g({...p,key:ne.target.value}),children:e3.map(ne=>d.jsx("option",{value:ne,children:ne||"Sin especificar"},ne))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),d.jsx("textarea",{value:p.notes,onChange:ne=>g({...p,notes:ne.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la canción..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(yt,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),d.jsx(yt,{type:"button",variant:"secondary",onClick:K,children:"Cancelar"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Añade la primera canción para empezar."}):Y.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No se encontraron canciones que coincidan con los filtros aplicados.",d.jsx("button",{onClick:()=>{Z(""),P(""),V("")},className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar filtros"})]}):d.jsxs("div",{className:"overflow-x-auto",children:[d.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",Y.length," de ",n.length," canciones"]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx(ty,{className:"w-3 h-3 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Buscar...",value:I,onChange:ne=>Z(ne.target.value),className:"w-24 px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400 focus:w-32 transition-all"}),d.jsxs("select",{value:re,onChange:ne=>P(ne.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Clave"}),pe.map(ne=>d.jsx("option",{value:ne,children:ne},ne))]}),d.jsxs("select",{value:F,onChange:ne=>V(ne.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Tipo"}),d.jsx("option",{value:"song",children:"Canciones"}),d.jsx("option",{value:"medley",children:"Medleys"})]})]})]})}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duración"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BPM"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.map(ne=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(C==null?void 0:C.songId)===ne.id&&C.field==="title"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,autoFocus:!0,onChange:ce=>L(ce.target.value),onBlur:()=>je(ne,"title"),onKeyDown:ce=>Ce(ce,ne,"title"),disabled:R}):d.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&he(ne.id,"title",ne.title),title:"Haz clic para editar",children:ne.title}),(C==null?void 0:C.songId)===ne.id&&ee&&d.jsx("div",{className:"text-xs text-red-500 mt-1",children:ee})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(C==null?void 0:C.songId)===ne.id&&C.field==="artist"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,autoFocus:!0,onChange:ce=>L(ce.target.value),onBlur:()=>je(ne,"artist"),onKeyDown:ce=>Ce(ce,ne,"artist"),disabled:R}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&he(ne.id,"artist",ne.artist||""),title:"Haz clic para editar",children:ne.artist||d.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(C==null?void 0:C.songId)===ne.id&&C.field==="duration_minutes"?d.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:N,autoFocus:!0,onChange:ce=>L(ce.target.value),onBlur:()=>je(ne,"duration_minutes"),onKeyDown:ce=>Ce(ce,ne,"duration_minutes"),disabled:R}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var ce;return t&&he(ne.id,"duration_minutes",((ce=ne.duration_minutes)==null?void 0:ce.toString())||"")},title:"Haz clic para editar",children:se(ne.duration_minutes)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(C==null?void 0:C.songId)===ne.id&&C.field==="key"?d.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,autoFocus:!0,onChange:ce=>L(ce.target.value),onBlur:()=>je(ne,"key"),onKeyDown:ce=>Ce(ce,ne,"key"),disabled:R,children:e3.map(ce=>d.jsx("option",{value:ce,children:ce||"Sin especificar"},ce))}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&he(ne.id,"key",ne.key||""),title:"Haz clic para editar",children:ne.key||d.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:d.jsx("div",{className:"cursor-default",children:ue(ne.notes)==="-"?d.jsx("span",{className:"text-gray-400",children:"-"}):d.jsx("span",{className:"font-medium",children:ue(ne.notes)})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>oe(ne),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),d.jsx("button",{onClick:()=>Le(ne),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},ne.id))})]})]})}),w&&S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar la canción "',S.title,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>{m(!1),k(null)},children:"Cancelar"}),d.jsx(yt,{variant:"danger",onClick:T,children:"Eliminar"})]})]})})]})}var R6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t3=pt.createContext&&pt.createContext(R6),iU=["attr","size","title"];function sU(e,t){if(e==null)return{};var n=aU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ng.apply(this,arguments)}function n3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n3(Object(n),!0).forEach(function(r){oU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oU(e,t,n){return t=lU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lU(e){var t=cU(e,"string");return typeof t=="symbol"?t:t+""}function cU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F6(e){return e&&e.map((t,n)=>pt.createElement(t.tag,rg({key:n},t.attr),F6(t.child)))}function _o(e){return t=>pt.createElement(uU,ng({attr:rg({},e.attr)},t),F6(e.child))}function uU(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=sU(e,iU),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),pt.createElement("svg",ng({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:rg(rg({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&pt.createElement("title",null,s),e.children)};return t3!==void 0?pt.createElement(t3.Consumer,null,n=>t(n)):t(R6)}function r3(e){return _o({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function dU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function fU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function hU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function $6(e){return _o({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function pU(e){return _o({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function mU(e){return _o({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function _y(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function i3(e){return _o({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function gU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function vU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Tf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Z5(e){return"nodeType"in e}function hs(e){var t,n;return e?Tf(e)?e:Z5(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ew(e){const{Document:t}=hs(e);return e instanceof t}function Mp(e){return Tf(e)?!1:e instanceof hs(e).HTMLElement}function B6(e){return e instanceof hs(e).SVGElement}function Mf(e){return e?Tf(e)?e.document:Z5(e)?ew(e)?e:Mp(e)||B6(e)?e.ownerDocument:document:document:document}const yo=Yg?j.useLayoutEffect:j.useEffect;function tw(e){const t=j.useRef(e);return yo(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function yU(){const e=j.useRef(null),t=j.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=j.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function mp(e,t){t===void 0&&(t=[e]);const n=j.useRef(e);return yo(()=>{n.current!==e&&(n.current=e)},t),n}function Ip(e,t){const n=j.useRef();return j.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ig(e){const t=tw(e),n=j.useRef(null),r=j.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Sy(e){const t=j.useRef();return j.useEffect(()=>{t.current=e},[e]),t.current}let $v={};function Dp(e,t){return j.useMemo(()=>{if(t)return t;const n=$v[e]==null?0:$v[e]+1;return $v[e]=n,e+"-"+n},[e,t])}function U6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[c,f]of l){const p=s[c];p!=null&&(s[c]=p+e*f)}return s},{...t})}}const hf=U6(1),sg=U6(-1);function wU(e){return"clientX"in e&&"clientY"in e}function nw(e){if(!e)return!1;const{KeyboardEvent:t}=hs(e.target);return t&&e instanceof t}function xU(e){if(!e)return!1;const{TouchEvent:t}=hs(e.target);return t&&e instanceof t}function Ny(e){if(xU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return wU(e)?{x:e.clientX,y:e.clientY}:null}const gp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[gp.Translate.toString(e),gp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),s3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bU(e){return e.matches(s3)?e:e.querySelector(s3)}const _U={display:"none"};function SU(e){let{id:t,value:n}=e;return pt.createElement("div",{id:t,style:_U},n)}function NU(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function kU(){const[e,t]=j.useState("");return{announce:j.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const z6=j.createContext(null);function EU(e){const t=j.useContext(z6);j.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function jU(){const[e]=j.useState(()=>new Set),t=j.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[j.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const CU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},AU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function LU(e){let{announcements:t=AU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=CU}=e;const{announce:s,announcement:a}=kU(),l=Dp("DndLiveRegion"),[c,f]=j.useState(!1);if(j.useEffect(()=>{f(!0)},[]),EU(j.useMemo(()=>({onDragStart(g){let{active:w}=g;s(t.onDragStart({active:w}))},onDragMove(g){let{active:w,over:m}=g;t.onDragMove&&s(t.onDragMove({active:w,over:m}))},onDragOver(g){let{active:w,over:m}=g;s(t.onDragOver({active:w,over:m}))},onDragEnd(g){let{active:w,over:m}=g;s(t.onDragEnd({active:w,over:m}))},onDragCancel(g){let{active:w,over:m}=g;s(t.onDragCancel({active:w,over:m}))}}),[s,t])),!c)return null;const p=pt.createElement(pt.Fragment,null,pt.createElement(SU,{id:r,value:i.draggable}),pt.createElement(NU,{id:l,announcement:a}));return n?Cu.createPortal(p,n):p}var Fr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Fr||(Fr={}));function ag(){}function Bv(e,t){return j.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function PU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return j.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Oa=Object.freeze({x:0,y:0});function TU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function MU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function IU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function DU(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function a3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const OU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=a3(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const f=TU(a3(c),i);s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(MU)};function RU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const c=t.width*t.height,f=e.width*e.height,p=a*l,g=p/(c+f-p);return Number(g.toFixed(4))}return 0}const FU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=RU(l,t);c>0&&i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(IU)};function $U(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function q6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Oa}function BU(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const UU=BU(1);function zU(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function qU(e,t,n){const r=zU(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,g=s?e.height/s:e.height;return{width:p,height:g,top:f,right:c+p,bottom:f+g,left:c}}const WU={ignoreTransform:!1};function If(e,t){t===void 0&&(t=WU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=hs(e).getComputedStyle(e);f&&(n=qU(n,f,p))}const{top:r,left:i,width:s,height:a,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:c}}function o3(e){return If(e,{ignoreTransform:!0})}function HU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function GU(e,t){return t===void 0&&(t=hs(e).getComputedStyle(e)),t.position==="fixed"}function VU(e,t){t===void 0&&(t=hs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function rw(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(ew(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Mp(i)||B6(i)||n.includes(i))return n;const s=hs(e).getComputedStyle(i);return i!==e&&VU(i,s)&&n.push(i),GU(i,s)?n:r(i.parentNode)}return e?r(e):n}function W6(e){const[t]=rw(e,1);return t??null}function Uv(e){return!Yg||!e?null:Tf(e)?e:Z5(e)?ew(e)||e===Mf(e).scrollingElement?window:Mp(e)?e:null:null}function H6(e){return Tf(e)?e.scrollX:e.scrollLeft}function G6(e){return Tf(e)?e.scrollY:e.scrollTop}function ky(e){return{x:H6(e),y:G6(e)}}var Kr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Kr||(Kr={}));function V6(e){return!Yg||!e?!1:e===document.scrollingElement}function Y6(e){const t={x:0,y:0},n=V6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const YU={x:.2,y:.2};function KU(e,t,n,r,i){let{top:s,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=YU);const{isTop:f,isBottom:p,isLeft:g,isRight:w}=Y6(e),m={x:0,y:0},S={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!f&&s<=t.top+k.height?(m.y=Kr.Backward,S.y=r*Math.abs((t.top+k.height-s)/k.height)):!p&&c>=t.bottom-k.height&&(m.y=Kr.Forward,S.y=r*Math.abs((t.bottom-k.height-c)/k.height)),!w&&l>=t.right-k.width?(m.x=Kr.Forward,S.x=r*Math.abs((t.right-k.width-l)/k.width)):!g&&a<=t.left+k.width&&(m.x=Kr.Backward,S.x=r*Math.abs((t.left+k.width-a)/k.width)),{direction:m,speed:S}}function JU(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function K6(e){return e.reduce((t,n)=>hf(t,ky(n)),Oa)}function XU(e){return e.reduce((t,n)=>t+H6(n),0)}function QU(e){return e.reduce((t,n)=>t+G6(n),0)}function ZU(e,t){if(t===void 0&&(t=If),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);W6(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ez=[["x",["left","right"],XU],["y",["top","bottom"],QU]];class iw{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rw(n),i=K6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of ez)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=l(r),p=i[s]-f;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qh{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function tz(e){const{EventTarget:t}=hs(e);return e instanceof t?e:Mf(e)}function zv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Xs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Xs||(Xs={}));function l3(e){e.preventDefault()}function nz(e){e.stopPropagation()}var vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(vn||(vn={}));const J6={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},rz=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case vn.Right:return{...n,x:n.x+25};case vn.Left:return{...n,x:n.x-25};case vn.Down:return{...n,y:n.y+25};case vn.Up:return{...n,y:n.y-25}}};class sw{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new qh(Mf(n)),this.windowListeners=new qh(hs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xs.Resize,this.handleCancel),this.windowListeners.add(Xs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ZU(r),n(Oa)}handleKeyDown(t){if(nw(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=J6,coordinateGetter:a=rz,scrollBehavior:l="smooth"}=i,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,p=f?{x:f.left,y:f.top}:Oa;this.referenceCoordinates||(this.referenceCoordinates=p);const g=a(t,{active:n,context:r.current,currentCoordinates:p});if(g){const w=sg(g,p),m={x:0,y:0},{scrollableAncestors:S}=r.current;for(const k of S){const C=t.code,{isTop:_,isRight:N,isLeft:L,isBottom:R,maxScroll:J,minScroll:ee}=Y6(k),W=JU(k),I={x:Math.min(C===vn.Right?W.right-W.width/2:W.right,Math.max(C===vn.Right?W.left:W.left+W.width/2,g.x)),y:Math.min(C===vn.Down?W.bottom-W.height/2:W.bottom,Math.max(C===vn.Down?W.top:W.top+W.height/2,g.y))},Z=C===vn.Right&&!N||C===vn.Left&&!L,re=C===vn.Down&&!R||C===vn.Up&&!_;if(Z&&I.x!==g.x){const P=k.scrollLeft+w.x,F=C===vn.Right&&P<=J.x||C===vn.Left&&P>=ee.x;if(F&&!w.y){k.scrollTo({left:P,behavior:l});return}F?m.x=k.scrollLeft-P:m.x=C===vn.Right?k.scrollLeft-J.x:k.scrollLeft-ee.x,m.x&&k.scrollBy({left:-m.x,behavior:l});break}else if(re&&I.y!==g.y){const P=k.scrollTop+w.y,F=C===vn.Down&&P<=J.y||C===vn.Up&&P>=ee.y;if(F&&!w.x){k.scrollTo({top:P,behavior:l});return}F?m.y=k.scrollTop-P:m.y=C===vn.Down?k.scrollTop-J.y:k.scrollTop-ee.y,m.y&&k.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,hf(sg(g,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sw.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=J6,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function c3(e){return!!(e&&"distance"in e)}function u3(e){return!!(e&&"delay"in e)}class aw{constructor(t,n,r){var i;r===void 0&&(r=tz(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Mf(a),this.documentListeners=new qh(this.document),this.listeners=new qh(r),this.windowListeners=new qh(hs(a)),this.initialCoordinates=(i=Ny(s))!=null?i:Oa,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Xs.Resize,this.handleCancel),this.windowListeners.add(Xs.DragStart,l3),this.windowListeners.add(Xs.VisibilityChange,this.handleCancel),this.windowListeners.add(Xs.ContextMenu,l3),this.documentListeners.add(Xs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(u3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(c3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Xs.Click,nz,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xs.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=Ny(t))!=null?n:Oa,f=sg(i,c);if(!r&&l){if(c3(l)){if(l.tolerance!=null&&zv(f,l.tolerance))return this.handleCancel();if(zv(f,l.distance))return this.handleStart()}if(u3(l)&&zv(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const iz={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ow extends aw{constructor(t){const{event:n}=t,r=Mf(n.target);super(t,iz,r)}}ow.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const sz={move:{name:"mousemove"},end:{name:"mouseup"}};var Ey;(function(e){e[e.RightClick=2]="RightClick"})(Ey||(Ey={}));class az extends aw{constructor(t){super(t,sz,Mf(t.event.target))}}az.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ey.RightClick?!1:(r==null||r({event:n}),!0)}}];const qv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class X6 extends aw{constructor(t){super(t,qv)}static setup(){return window.addEventListener(qv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(qv.move.name,t)};function t(){}}}X6.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Wh;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Wh||(Wh={}));var og;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(og||(og={}));function oz(e){let{acceleration:t,activator:n=Wh.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=og.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:p,delta:g,threshold:w}=e;const m=cz({delta:g,disabled:!s}),[S,k]=yU(),C=j.useRef({x:0,y:0}),_=j.useRef({x:0,y:0}),N=j.useMemo(()=>{switch(n){case Wh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Wh.DraggableRect:return i}},[n,i,c]),L=j.useRef(null),R=j.useCallback(()=>{const ee=L.current;if(!ee)return;const W=C.current.x*_.current.x,I=C.current.y*_.current.y;ee.scrollBy(W,I)},[]),J=j.useMemo(()=>l===og.TreeOrder?[...f].reverse():f,[l,f]);j.useEffect(()=>{if(!s||!f.length||!N){k();return}for(const ee of J){if((r==null?void 0:r(ee))===!1)continue;const W=f.indexOf(ee),I=p[W];if(!I)continue;const{direction:Z,speed:re}=KU(ee,I,N,t,w);for(const P of["x","y"])m[P][Z[P]]||(re[P]=0,Z[P]=0);if(re.x>0||re.y>0){k(),L.current=ee,S(R,a),C.current=re,_.current=Z;return}}C.current={x:0,y:0},_.current={x:0,y:0},k()},[t,R,r,k,s,a,JSON.stringify(N),JSON.stringify(m),S,f,J,p,JSON.stringify(w)])}const lz={x:{[Kr.Backward]:!1,[Kr.Forward]:!1},y:{[Kr.Backward]:!1,[Kr.Forward]:!1}};function cz(e){let{delta:t,disabled:n}=e;const r=Sy(t);return Ip(i=>{if(n||!r||!i)return lz;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Kr.Backward]:i.x[Kr.Backward]||s.x===-1,[Kr.Forward]:i.x[Kr.Forward]||s.x===1},y:{[Kr.Backward]:i.y[Kr.Backward]||s.y===-1,[Kr.Forward]:i.y[Kr.Forward]||s.y===1}}},[n,t,r])}function uz(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ip(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function dz(e,t){return j.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var vp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(vp||(vp={}));var jy;(function(e){e.Optimized="optimized"})(jy||(jy={}));const d3=new Map;function fz(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=j.useState(null),{frequency:l,measure:c,strategy:f}=i,p=j.useRef(e),g=C(),w=mp(g),m=j.useCallback(function(_){_===void 0&&(_=[]),!w.current&&a(N=>N===null?_:N.concat(_.filter(L=>!N.includes(L))))},[w]),S=j.useRef(null),k=Ip(_=>{if(g&&!n)return d3;if(!_||_===d3||p.current!==e||s!=null){const N=new Map;for(let L of e){if(!L)continue;if(s&&s.length>0&&!s.includes(L.id)&&L.rect.current){N.set(L.id,L.rect.current);continue}const R=L.node.current,J=R?new iw(c(R),R):null;L.rect.current=J,J&&N.set(L.id,J)}return N}return _},[e,s,n,g,c]);return j.useEffect(()=>{p.current=e},[e]),j.useEffect(()=>{g||m()},[n,g]),j.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),j.useEffect(()=>{g||typeof l!="number"||S.current!==null||(S.current=setTimeout(()=>{m(),S.current=null},l))},[l,g,m,...r]),{droppableRects:k,measureDroppableContainers:m,measuringScheduled:s!=null};function C(){switch(f){case vp.Always:return!1;case vp.BeforeDragging:return n;default:return!n}}}function Q6(e,t){return Ip(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function hz(e,t){return Q6(e,t)}function pz(e){let{callback:t,disabled:n}=e;const r=tw(t),i=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return j.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Kg(e){let{callback:t,disabled:n}=e;const r=tw(t),i=j.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return j.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function mz(e){return new iw(If(e),e)}function f3(e,t,n){t===void 0&&(t=mz);const[r,i]=j.useState(null);function s(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=pz({callback(c){if(e)for(const f of c){const{type:p,target:g}=f;if(p==="childList"&&g instanceof HTMLElement&&g.contains(e)){s();break}}}}),l=Kg({callback:s});return yo(()=>{s(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function gz(e){const t=Q6(e);return q6(e,t)}const h3=[];function vz(e){const t=j.useRef(e),n=Ip(r=>e?r&&r!==h3&&e&&t.current&&e.parentNode===t.current.parentNode?r:rw(e):h3,[e]);return j.useEffect(()=>{t.current=e},[e]),n}function yz(e){const[t,n]=j.useState(null),r=j.useRef(e),i=j.useCallback(s=>{const a=Uv(s.target);a&&n(l=>l?(l.set(a,ky(a)),new Map(l)):null)},[]);return j.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(c=>{const f=Uv(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,ky(f)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(c=>{const f=Uv(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),j.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>hf(s,a),Oa):K6(e):Oa,[e,t])}function p3(e,t){t===void 0&&(t=[]);const n=j.useRef(null);return j.useEffect(()=>{n.current=null},t),j.useEffect(()=>{const r=e!==Oa;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?sg(e,n.current):Oa}function wz(e){j.useEffect(()=>{if(!Yg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function xz(e,t){return j.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function Z6(e){return j.useMemo(()=>e?HU(e):null,[e])}const m3=[];function bz(e,t){t===void 0&&(t=If);const[n]=e,r=Z6(n?hs(n):null),[i,s]=j.useState(m3);function a(){s(()=>e.length?e.map(c=>V6(c)?r:new iw(t(c),c)):m3)}const l=Kg({callback:a});return yo(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),i}function _z(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Mp(t)?t:e}function Sz(e){let{measure:t}=e;const[n,r]=j.useState(null),i=j.useCallback(f=>{for(const{target:p}of f)if(Mp(p)){r(g=>{const w=t(p);return g?{...g,width:w.width,height:w.height}:w});break}},[t]),s=Kg({callback:i}),a=j.useCallback(f=>{const p=_z(f);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[l,c]=ig(a);return j.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const Nz=[{sensor:ow,options:{}},{sensor:sw,options:{}}],kz={current:{}},m0={draggable:{measure:o3},droppable:{measure:o3,strategy:vp.WhileDragging,frequency:jy.Optimized},dragOverlay:{measure:If}};class Hh extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ez={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Hh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ag},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:m0,measureDroppableContainers:ag,windowRect:null,measuringScheduled:!1},jz={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ag,draggableNodes:new Map,over:null,measureDroppableContainers:ag},Jg=j.createContext(jz),ek=j.createContext(Ez);function Cz(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Hh}}}function Az(e,t){switch(t.type){case Fr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Fr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Fr.DragEnd:case Fr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Fr.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Hh(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Fr.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Hh(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case Fr.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Hh(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Lz(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=j.useContext(Jg),s=Sy(r),a=Sy(n==null?void 0:n.id);return j.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!nw(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:c,node:f}=l;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[c.current,f.current]){if(!p)continue;const g=bU(p);if(g){g.focus();break}}})}},[r,t,i,a,s]),null}function Pz(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function Tz(e){return j.useMemo(()=>({draggable:{...m0.draggable,...e==null?void 0:e.draggable},droppable:{...m0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...m0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Mz(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=j.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;yo(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const p=n(f),g=q6(p,r);if(a||(g.x=0),l||(g.y=0),s.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const w=W6(f);w&&w.scrollBy({top:g.y,left:g.x})}},[t,a,l,r,n])}const tk=j.createContext({...Oa,scaleX:1,scaleY:1});var ac;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ac||(ac={}));const Iz=j.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:c=!0,children:f,sensors:p=Nz,collisionDetection:g=FU,measuring:w,modifiers:m,...S}=t;const k=j.useReducer(Az,void 0,Cz),[C,_]=k,[N,L]=jU(),[R,J]=j.useState(ac.Uninitialized),ee=R===ac.Initialized,{draggable:{active:W,nodes:I,translate:Z},droppable:{containers:re}}=C,P=W!=null?I.get(W):null,F=j.useRef({initial:null,translated:null}),V=j.useMemo(()=>{var _n;return W!=null?{id:W,data:(_n=P==null?void 0:P.data)!=null?_n:kz,rect:F}:null},[W,P]),Y=j.useRef(null),[pe,ge]=j.useState(null),[Q,$]=j.useState(null),q=mp(S,Object.values(S)),oe=Dp("DndDescribedBy",a),Le=j.useMemo(()=>re.getEnabled(),[re]),T=Tz(w),{droppableRects:K,measureDroppableContainers:se,measuringScheduled:ue}=fz(Le,{dragging:ee,dependencies:[Z.x,Z.y],config:T.droppable}),he=uz(I,W),je=j.useMemo(()=>Q?Ny(Q):null,[Q]),Ce=li(),ne=hz(he,T.draggable.measure);Mz({activeNode:W!=null?I.get(W):null,config:Ce.layoutShiftCompensation,initialRect:ne,measure:T.draggable.measure});const ce=f3(he,T.draggable.measure,ne),le=f3(he?he.parentElement:null),me=j.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=re.getNodeFor((n=me.current.over)==null?void 0:n.id),Me=Sz({measure:T.dragOverlay.measure}),de=(r=Me.nodeRef.current)!=null?r:he,B=ee?(i=Me.rect)!=null?i:ce:null,ke=!!(Me.nodeRef.current&&Me.rect),Fe=gz(ke?null:ce),Re=Z6(de?hs(de):null),qe=vz(ee?Ne??he:null),be=bz(qe),$e=Pz(m,{transform:{x:Z.x-Fe.x,y:Z.y-Fe.y,scaleX:1,scaleY:1},activatorEvent:Q,active:V,activeNodeRect:ce,containerNodeRect:le,draggingNodeRect:B,over:me.current.over,overlayNodeRect:Me.rect,scrollableAncestors:qe,scrollableAncestorRects:be,windowRect:Re}),Ke=je?hf(je,Z):null,Je=yz(qe),nt=p3(Je),rt=p3(Je,[ce]),at=hf($e,nt),St=B?UU(B,$e):null,ft=V&&St?g({active:V,collisionRect:St,droppableRects:K,droppableContainers:Le,pointerCoordinates:Ke}):null,Nt=DU(ft,"id"),[et,bn]=j.useState(null),Bt=ke?$e:hf($e,rt),Tr=$U(Bt,(s=et==null?void 0:et.rect)!=null?s:null,ce),Qt=j.useRef(null),pn=j.useCallback((_n,Vt)=>{let{sensor:wt,options:Ut}=Vt;if(Y.current==null)return;const ur=I.get(Y.current);if(!ur)return;const rn=_n.nativeEvent,tr=new wt({active:Y.current,activeNode:ur,event:rn,options:Ut,context:me,onAbort(ht){if(!I.get(ht))return;const{onDragAbort:nr}=q.current,En={id:ht};nr==null||nr(En),N({type:"onDragAbort",event:En})},onPending(ht,Vn,nr,En){if(!I.get(ht))return;const{onDragPending:jn}=q.current,Yn={id:ht,constraint:Vn,initialCoordinates:nr,offset:En};jn==null||jn(Yn),N({type:"onDragPending",event:Yn})},onStart(ht){const Vn=Y.current;if(Vn==null)return;const nr=I.get(Vn);if(!nr)return;const{onDragStart:En}=q.current,Pn={activatorEvent:rn,active:{id:Vn,data:nr.data,rect:F}};Cu.unstable_batchedUpdates(()=>{En==null||En(Pn),J(ac.Initializing),_({type:Fr.DragStart,initialCoordinates:ht,active:Vn}),N({type:"onDragStart",event:Pn}),ge(Qt.current),$(rn)})},onMove(ht){_({type:Fr.DragMove,coordinates:ht})},onEnd:Mr(Fr.DragEnd),onCancel:Mr(Fr.DragCancel)});Qt.current=tr;function Mr(ht){return async function(){const{active:nr,collisions:En,over:Pn,scrollAdjustedTranslate:jn}=me.current;let Yn=null;if(nr&&jn){const{cancelDrop:Ui}=q.current;Yn={activatorEvent:rn,active:nr,collisions:En,delta:jn,over:Pn},ht===Fr.DragEnd&&typeof Ui=="function"&&await Promise.resolve(Ui(Yn))&&(ht=Fr.DragCancel)}Y.current=null,Cu.unstable_batchedUpdates(()=>{_({type:ht}),J(ac.Uninitialized),bn(null),ge(null),$(null),Qt.current=null;const Ui=ht===Fr.DragEnd?"onDragEnd":"onDragCancel";if(Yn){const ki=q.current[Ui];ki==null||ki(Yn),N({type:Ui,event:Yn})}})}}},[I]),oi=j.useCallback((_n,Vt)=>(wt,Ut)=>{const ur=wt.nativeEvent,rn=I.get(Ut);if(Y.current!==null||!rn||ur.dndKit||ur.defaultPrevented)return;const tr={active:rn};_n(wt,Vt.options,tr)===!0&&(ur.dndKit={capturedBy:Vt.sensor},Y.current=Ut,pn(wt,Vt))},[I,pn]),Zt=dz(p,oi);wz(p),yo(()=>{ce&&R===ac.Initializing&&J(ac.Initialized)},[ce,R]),j.useEffect(()=>{const{onDragMove:_n}=q.current,{active:Vt,activatorEvent:wt,collisions:Ut,over:ur}=me.current;if(!Vt||!wt)return;const rn={active:Vt,activatorEvent:wt,collisions:Ut,delta:{x:at.x,y:at.y},over:ur};Cu.unstable_batchedUpdates(()=>{_n==null||_n(rn),N({type:"onDragMove",event:rn})})},[at.x,at.y]),j.useEffect(()=>{const{active:_n,activatorEvent:Vt,collisions:wt,droppableContainers:Ut,scrollAdjustedTranslate:ur}=me.current;if(!_n||Y.current==null||!Vt||!ur)return;const{onDragOver:rn}=q.current,tr=Ut.get(Nt),Mr=tr&&tr.rect.current?{id:tr.id,rect:tr.rect.current,data:tr.data,disabled:tr.disabled}:null,ht={active:_n,activatorEvent:Vt,collisions:wt,delta:{x:ur.x,y:ur.y},over:Mr};Cu.unstable_batchedUpdates(()=>{bn(Mr),rn==null||rn(ht),N({type:"onDragOver",event:ht})})},[Nt]),yo(()=>{me.current={activatorEvent:Q,active:V,activeNode:he,collisionRect:St,collisions:ft,droppableRects:K,draggableNodes:I,draggingNode:de,draggingNodeRect:B,droppableContainers:re,over:et,scrollableAncestors:qe,scrollAdjustedTranslate:at},F.current={initial:B,translated:St}},[V,he,ft,St,I,de,B,K,re,et,qe,at]),oz({...Ce,delta:Z,draggingRect:St,pointerCoordinates:Ke,scrollableAncestors:qe,scrollableAncestorRects:be});const aa=j.useMemo(()=>({active:V,activeNode:he,activeNodeRect:ce,activatorEvent:Q,collisions:ft,containerNodeRect:le,dragOverlay:Me,draggableNodes:I,droppableContainers:re,droppableRects:K,over:et,measureDroppableContainers:se,scrollableAncestors:qe,scrollableAncestorRects:be,measuringConfiguration:T,measuringScheduled:ue,windowRect:Re}),[V,he,ce,Q,ft,le,Me,I,re,K,et,se,qe,be,T,ue,Re]),Dn=j.useMemo(()=>({activatorEvent:Q,activators:Zt,active:V,activeNodeRect:ce,ariaDescribedById:{draggable:oe},dispatch:_,draggableNodes:I,over:et,measureDroppableContainers:se}),[Q,Zt,V,ce,_,oe,I,et,se]);return pt.createElement(z6.Provider,{value:L},pt.createElement(Jg.Provider,{value:Dn},pt.createElement(ek.Provider,{value:aa},pt.createElement(tk.Provider,{value:Tr},f)),pt.createElement(Lz,{disabled:(l==null?void 0:l.restoreFocus)===!1})),pt.createElement(LU,{...l,hiddenTextDescribedById:oe}));function li(){const _n=(pe==null?void 0:pe.autoScrollEnabled)===!1,Vt=typeof c=="object"?c.enabled===!1:c===!1,wt=ee&&!_n&&!Vt;return typeof c=="object"?{...c,enabled:wt}:{enabled:wt}}}),Dz=j.createContext(null),g3="button",Oz="Draggable";function Rz(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Dp(Oz),{activators:a,activatorEvent:l,active:c,activeNodeRect:f,ariaDescribedById:p,draggableNodes:g,over:w}=j.useContext(Jg),{role:m=g3,roleDescription:S="draggable",tabIndex:k=0}=i??{},C=(c==null?void 0:c.id)===t,_=j.useContext(C?tk:Dz),[N,L]=ig(),[R,J]=ig(),ee=xz(a,t),W=mp(n);yo(()=>(g.set(t,{id:t,key:s,node:N,activatorNode:R,data:W}),()=>{const Z=g.get(t);Z&&Z.key===s&&g.delete(t)}),[g,t]);const I=j.useMemo(()=>({role:m,tabIndex:k,"aria-disabled":r,"aria-pressed":C&&m===g3?!0:void 0,"aria-roledescription":S,"aria-describedby":p.draggable}),[r,m,k,C,S,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:f,attributes:I,isDragging:C,listeners:r?void 0:ee,node:N,over:w,setNodeRef:L,setActivatorNodeRef:J,transform:_}}function Fz(){return j.useContext(ek)}const $z="Droppable",Bz={timeout:25};function Uz(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Dp($z),{active:a,dispatch:l,over:c,measureDroppableContainers:f}=j.useContext(Jg),p=j.useRef({disabled:n}),g=j.useRef(!1),w=j.useRef(null),m=j.useRef(null),{disabled:S,updateMeasurementsFor:k,timeout:C}={...Bz,...i},_=mp(k??r),N=j.useCallback(()=>{if(!g.current){g.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{f(Array.isArray(_.current)?_.current:[_.current]),m.current=null},C)},[C]),L=Kg({callback:N,disabled:S||!a}),R=j.useCallback((I,Z)=>{L&&(Z&&(L.unobserve(Z),g.current=!1),I&&L.observe(I))},[L]),[J,ee]=ig(R),W=mp(t);return j.useEffect(()=>{!L||!J.current||(L.disconnect(),g.current=!1,L.observe(J.current))},[J,L]),j.useEffect(()=>(l({type:Fr.RegisterDroppable,element:{id:r,key:s,disabled:n,node:J,rect:w,data:W}}),()=>l({type:Fr.UnregisterDroppable,key:s,id:r})),[r]),j.useEffect(()=>{n!==p.current.disabled&&(l({type:Fr.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:a,rect:w,isOver:(c==null?void 0:c.id)===r,node:J,over:c,setNodeRef:ee}}function lw(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function zz(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function Wm(e){return e!==null&&e>=0}function qz(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Wz(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const nk=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=lw(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Hm={scaleX:1,scaleY:1},Hz=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const f=s[a];return f?{x:0,y:n<a?f.top+f.height-(l.top+l.height):f.top-l.top,...Hm}:null}const c=Gz(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-c,...Hm}:i<n&&i>=a?{x:0,y:l.height+c,...Hm}:{x:0,y:0,...Hm}};function Gz(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const rk="Sortable",ik=pt.createContext({activeIndex:-1,containerId:rk,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:nk,disabled:{draggable:!1,droppable:!1}});function Vz(e){let{children:t,id:n,items:r,strategy:i=nk,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:f,measureDroppableContainers:p}=Fz(),g=Dp(rk,n),w=l.rect!==null,m=j.useMemo(()=>r.map(ee=>typeof ee=="object"&&"id"in ee?ee.id:ee),[r]),S=a!=null,k=a?m.indexOf(a.id):-1,C=f?m.indexOf(f.id):-1,_=j.useRef(m),N=!qz(m,_.current),L=C!==-1&&k===-1||N,R=Wz(s);yo(()=>{N&&S&&p(m)},[N,m,S,p]),j.useEffect(()=>{_.current=m},[m]);const J=j.useMemo(()=>({activeIndex:k,containerId:g,disabled:R,disableTransforms:L,items:m,overIndex:C,useDragOverlay:w,sortedRects:zz(m,c),strategy:i}),[k,g,R.draggable,R.droppable,L,m,C,c,w,i]);return pt.createElement(ik.Provider,{value:J},t)}const Yz=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return lw(n,r,i).indexOf(t)},Kz=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:f}=e;return!f||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===c},Jz={duration:200,easing:"ease"},sk="transform",Xz=gp.Transition.toString({property:sk,duration:0,easing:"linear"}),Qz={roleDescription:"sortable"};function Zz(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=j.useState(null),l=j.useRef(n);return yo(()=>{if(!t&&n!==l.current&&r.current){const c=i.current;if(c){const f=If(r.current,{ignoreTransform:!0}),p={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(p.x||p.y)&&a(p)}}n!==l.current&&(l.current=n)},[t,n,r,i]),j.useEffect(()=>{s&&a(null)},[s]),s}function eq(e){let{animateLayoutChanges:t=Kz,attributes:n,disabled:r,data:i,getNewIndex:s=Yz,id:a,strategy:l,resizeObserverConfig:c,transition:f=Jz}=e;const{items:p,containerId:g,activeIndex:w,disabled:m,disableTransforms:S,sortedRects:k,overIndex:C,useDragOverlay:_,strategy:N}=j.useContext(ik),L=tq(r,m),R=p.indexOf(a),J=j.useMemo(()=>({sortable:{containerId:g,index:R,items:p},...i}),[g,i,R,p]),ee=j.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:W,node:I,isOver:Z,setNodeRef:re}=Uz({id:a,data:J,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:ee,...c}}),{active:P,activatorEvent:F,activeNodeRect:V,attributes:Y,setNodeRef:pe,listeners:ge,isDragging:Q,over:$,setActivatorNodeRef:q,transform:oe}=Rz({id:a,data:J,attributes:{...Qz,...n},disabled:L.draggable}),Le=vU(re,pe),T=!!P,K=T&&!S&&Wm(w)&&Wm(C),se=!_&&Q,ue=se&&K?oe:null,je=K?ue??(l??N)({rects:k,activeNodeRect:V,activeIndex:w,overIndex:C,index:R}):null,Ce=Wm(w)&&Wm(C)?s({id:a,items:p,activeIndex:w,overIndex:C}):R,ne=P==null?void 0:P.id,ce=j.useRef({activeId:ne,items:p,newIndex:Ce,containerId:g}),le=p!==ce.current.items,me=t({active:P,containerId:g,isDragging:Q,isSorting:T,id:a,index:R,items:p,newIndex:ce.current.newIndex,previousItems:ce.current.items,previousContainerId:ce.current.containerId,transition:f,wasDragging:ce.current.activeId!=null}),Ne=Zz({disabled:!me,index:R,node:I,rect:W});return j.useEffect(()=>{T&&ce.current.newIndex!==Ce&&(ce.current.newIndex=Ce),g!==ce.current.containerId&&(ce.current.containerId=g),p!==ce.current.items&&(ce.current.items=p)},[T,Ce,g,p]),j.useEffect(()=>{if(ne===ce.current.activeId)return;if(ne!=null&&ce.current.activeId==null){ce.current.activeId=ne;return}const de=setTimeout(()=>{ce.current.activeId=ne},50);return()=>clearTimeout(de)},[ne]),{active:P,activeIndex:w,attributes:Y,data:J,rect:W,index:R,newIndex:Ce,items:p,isOver:Z,isSorting:T,isDragging:Q,listeners:ge,node:I,overIndex:C,over:$,setNodeRef:Le,setActivatorNodeRef:q,setDroppableNodeRef:re,setDraggableNodeRef:pe,transform:Ne??je,transition:Me()};function Me(){if(Ne||le&&ce.current.newIndex===R)return Xz;if(!(se&&!nw(F)||!f)&&(T||me))return gp.Transition.toString({...f,property:sk})}}function tq(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}vn.Down,vn.Right,vn.Up,vn.Left;function nq({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[s,a]=j.useState(""),[l,c]=j.useState([]),[f,p]=j.useState(!1),[g,w]=j.useState(""),m=C=>{c(_=>_.includes(C)?_.filter(N=>N!==C):[..._,C])},S=async()=>{if(l.length<2){Te.error("Selecciona al menos dos canciones para el medley");return}let C=s.trim();if(C||(C=l.map(N=>r.find(L=>L.id===N)).filter(N=>!!N).map(N=>N.title).join(" | ")),!C){Te.error("No se pudo generar el nombre del medley.");return}p(!0);try{const _=await I$(n,C,l);_&&(Te.success("Medley creado con éxito"),i(_),k())}catch(_){console.error("Error creating medley:",_),Te.error("Error al crear el medley")}finally{p(!1)}},k=()=>{a(""),c([]),w(""),t()};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Gn,{label:"Nombre del Medley",value:s,onChange:C=>a(C.target.value),placeholder:"Ej: Medley de Rock Clásico",autoFocus:!0}),d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),d.jsxs("div",{className:"border rounded-md p-2",children:[d.jsx(Gn,{placeholder:"Buscar canción para añadir...",value:g,onChange:C=>w(C.target.value),className:"mb-2"}),d.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(C=>C.type==="song").filter(C=>{var _;return C.title.toLowerCase().includes(g.toLowerCase())||((_=C.artist)==null?void 0:_.toLowerCase().includes(g.toLowerCase()))}).map(C=>d.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:d.jsx("div",{children:d.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[d.jsx("input",{type:"checkbox",checked:l.includes(C.id),onChange:()=>m(C.id),className:"rounded"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm truncate",children:C.title}),C.artist&&d.jsx("div",{className:"text-xs text-gray-500 truncate",children:C.artist})]})]})})},C.id))})]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:k,disabled:f,children:"Cancelar"}),d.jsx(yt,{variant:"primary",onClick:S,loading:f,disabled:l.length<2,children:"Crear Medley"})]})]})}):null}function rq({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:s,onMedleyDeleted:a}){const[l,c]=j.useState(!1),[f,p]=j.useState(!1),[g,w]=j.useState(e.title),[m,S]=j.useState(!1),[k,C]=j.useState(!1),[_,N]=j.useState(!1),[L,R]=j.useState(""),[J,ee]=j.useState([]);j.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const Y=await Q0(e.group_id);if(Y){const pe=Y.filter(ge=>{var Q;return((Q=e.medley_song_ids)==null?void 0:Q.includes(ge.id))&&ge.type==="song"});ee(pe)}}})()},[e.medley_song_ids,e.group_id]);const W=async()=>{if(!g.trim()){Te.error("El nombre del medley es obligatorio");return}C(!0);try{await B$(e.id,{title:g})&&(Te.success("Medley actualizado"),s(e.id,g),p(!1))}catch(V){console.error("Error al actualizar el medley:",V),Te.error("Error al actualizar el medley")}finally{C(!1)}},I=async()=>{C(!0);try{await q$(e.id)&&(Te.success("Medley eliminado"),a(e.id))}catch(V){console.error("Error al eliminar el medley:",V),Te.error("Error al eliminar el medley")}finally{C(!1),N(!1)}},Z=async V=>{C(!0);try{await z$(e.id,V)&&(Te.success("Canción eliminada del medley"),i(e.id,V),ee(pe=>pe.filter(ge=>ge.id!==V)))}catch(Y){console.error("Error al eliminar la canción del medley:",Y),Te.error("Error al eliminar la canción del medley")}finally{C(!1)}},re=async V=>{if(!t.find(pe=>pe.id===V)){Te.error("No se pudo encontrar la canción seleccionada");return}C(!0);try{const pe=await U$(e.id,V);if(pe){Te.success("Canción añadida al medley"),r(e.id,V),S(!1),R("");const ge=await Q0(e.group_id);if(ge&&pe.medley_song_ids){const Q=ge.filter($=>{var q;return((q=pe.medley_song_ids)==null?void 0:q.includes($.id))&&$.type==="song"});ee(Q)}}}catch(pe){console.error("Error al añadir la canción al medley:",pe),Te.error("Error al añadir la canción al medley")}finally{C(!1)}},P=e.medley_song_ids?e.medley_song_ids.map(V=>J.find(Y=>Y.id===V)).filter(Boolean):[],F=Array.from(new Map(P.map(V=>[V.id,V])).values());return d.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!l),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(mU,{className:"text-blue-600"}),d.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[d.jsxs("span",{children:[F.length," canciones"]}),l?d.jsx(fU,{}):d.jsx(dU,{})]})]}),l&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:V=>V.stopPropagation(),children:[n&&d.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[d.jsxs(yt,{variant:"secondary",onClick:()=>{p(!f),f&&w(e.title)},children:[d.jsx($6,{className:"mr-1"}),f?"Cancelar":"Renombrar"]}),!f&&d.jsxs(yt,{variant:"danger",onClick:()=>N(!0),loading:k,children:[d.jsx(gU,{className:"mr-1"}),"Eliminar"]})]}),f&&d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[d.jsx(Gn,{value:g,onChange:V=>w(V.target.value),placeholder:"Nuevo nombre del medley"}),d.jsx(yt,{onClick:W,loading:k,children:"Guardar"})]}),!f&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),F.length===0?d.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):d.jsx("ul",{className:"space-y-1",children:F.map(V=>d.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-sm",children:V.title}),V.artist&&d.jsx("span",{className:"text-xs text-gray-500 ml-2",children:V.artist})]}),n&&d.jsx(yt,{variant:"danger",onClick:()=>Z(V.id),loading:k,children:d.jsx(i3,{})})]},V.id))})]}),n&&d.jsx("div",{className:"mt-3",children:m?d.jsxs("div",{className:"border rounded p-2 bg-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"Añadir canción:"}),d.jsx(yt,{variant:"secondary",onClick:()=>{S(!1),R("")},children:d.jsx(i3,{})})]}),d.jsx(Gn,{placeholder:"Buscar canción...",value:L,onChange:V=>R(V.target.value),className:"mb-2"}),d.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(V=>V.type==="song").filter(V=>!F.some(Y=>Y.id===V.id)).filter(V=>{var Y;return V.title.toLowerCase().includes(L.toLowerCase())||((Y=V.artist)==null?void 0:Y.toLowerCase().includes(L.toLowerCase()))}).map(V=>d.jsxs("button",{onClick:()=>re(V.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:k,children:[d.jsx("div",{className:"font-medium",children:V.title}),V.artist&&d.jsx("div",{className:"text-xs text-gray-500",children:V.artist})]},V.id)),t.filter(V=>V.type==="song"&&!F.some(Y=>Y.id===V.id)).length===0&&d.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay más canciones para añadir."})]})]}):d.jsxs(yt,{variant:"primary",onClick:()=>S(!0),children:[d.jsx(_y,{className:"mr-1"}),"Añadir Canción"]})})]})]}),_&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>N(!1),children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:V=>V.stopPropagation(),children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el medley "',e.title,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>N(!1),disabled:k,children:"Cancelar"}),d.jsx(yt,{variant:"danger",onClick:I,loading:k,children:k?"Eliminando...":"Eliminar"})]})]})})]})}function iq({isOpen:e,onClose:t,groupId:n,onSetlistCreated:r}){const{isAuthenticated:i}=Tp(),[s,a]=j.useState([]),[l,c]=j.useState(null),[f,p]=j.useState([]),[g,w]=j.useState(!1),[m,S]=j.useState(!1),[k,C]=j.useState(0),[_,N]=j.useState("");j.useEffect(()=>{e&&i&&L()},[e,i]),j.useEffect(()=>{l&&(N(l.name),R(l.id))},[l]);const L=async()=>{w(!0);try{const I=await Lr.getUserPlaylists(50);a(I)}catch(I){console.error("Error loading playlists:",I),Te.error("Error al cargar las playlists")}finally{w(!1)}},R=async I=>{w(!0);try{const Z=await Lr.getPlaylistTracks(I,100);p(Z.filter(re=>re&&re.id))}catch(Z){console.error("Error loading playlist tracks:",Z),Te.error("Error al cargar las canciones de la playlist")}finally{w(!1)}},J=async()=>{if(!(!l||!f.length)){S(!0),C(0);try{const{data:{user:I}}=await Xe.auth.getUser();if(!I){Te.error("No se pudo obtener la información del usuario");return}const Z={name:_||l.name,description:`Importado desde Spotify: ${l.name}`,group_id:n,created_by:I.id},re=await K5(Z);if(!re){Te.error("Error al crear el setlist");return}const P=f.length;let F=0;for(let V=0;V<P;V++){const Y=f[V];C(Math.round((V+1)/P*100));try{let pe=null;try{pe=await Lr.getAudioFeatures(Y.id)}catch(oe){console.warn(`No se pudieron obtener audio features para "${Y.name}":`,oe)}const ge=Math.round(Y.duration_ms/6e4),Q=(pe==null?void 0:pe.key)!==void 0?["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][pe.key]:"",$={title:Y.name,artist:Y.artists.map(oe=>oe.name).join(", "),duration_minutes:ge,key:Q,notes:`Popularidad: ${Y.popularity}% | Álbum: ${Y.album.name}${pe!=null&&pe.tempo?` | Tempo: ${Math.round(pe.tempo)} BPM`:""}`,group_id:n,created_by:I.id},q=await u0($);q&&(await Z0(re.id,q.id,V+1),F++)}catch(pe){console.error(`Error importing track ${Y.name}:`,pe)}}C(100),Te.success(`Setlist "${_}" creado con ${F}/${P} canciones`),r(),t()}catch(I){console.error("Error importing playlist:",I),Te.error("Error al importar la playlist")}finally{S(!1),C(0)}}},ee=I=>{const Z=Math.floor(I/6e4),re=Math.floor(I%6e4/1e3);return`${Z}:${re.toString().padStart(2,"0")}`},W=()=>{const I=f.reduce((F,V)=>F+V.duration_ms,0),Z=Math.floor(I/6e4),re=Math.floor(Z/60),P=Z%60;return re>0?`${re}h ${P}m`:`${P}m`};return e?i?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:m,children:d.jsx(Ma,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:l?d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx("button",{onClick:()=>{c(null),p([]),N("")},className:"text-blue-600 hover:text-blue-800",disabled:m,children:"← Volver a playlists"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-semibold",children:l.name}),l.description&&d.jsx("p",{className:"text-sm text-gray-600",children:l.description})]}),d.jsx("a",{href:l.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800",children:d.jsx(Z2,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del setlist"}),d.jsx("input",{type:"text",value:_,onChange:I=>N(I.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nombre para el nuevo setlist",disabled:m})]}),g?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(go,{className:"w-8 h-8 animate-spin text-blue-500"}),d.jsx("span",{className:"ml-2 text-gray-600",children:"Cargando canciones..."})]}):d.jsxs("div",{children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," canciones • Duración total: ",W()]})}),d.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:f.map((I,Z)=>{var re,P;return d.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-gray-100 last:border-b-0",children:[d.jsx("span",{className:"text-sm text-gray-500 w-8",children:Z+1}),d.jsx("img",{src:((re=I.album.images[2])==null?void 0:re.url)||((P=I.album.images[0])==null?void 0:P.url),alt:I.album.name,className:"w-10 h-10 rounded object-cover"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:I.name}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:I.artists.map(F=>F.name).join(", ")})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[d.jsx(W0,{className:"w-3 h-3 mr-1"}),ee(I.duration_ms)]})]},I.id)})})]})]}):d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600 mb-4",children:"Selecciona una playlist de Spotify para importar como setlist:"}),g?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(go,{className:"w-8 h-8 animate-spin text-blue-500"}),d.jsx("span",{className:"ml-2 text-gray-600",children:"Cargando playlists..."})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(I=>d.jsx("div",{onClick:()=>c(I),className:"border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-green-400 hover:bg-green-50 transition-colors",children:d.jsxs("div",{className:"flex items-start gap-3",children:[I.images&&I.images.length>0?d.jsx("img",{src:I.images[0].url,alt:I.name,className:"w-16 h-16 rounded object-cover flex-shrink-0"}):d.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:d.jsx(Br,{className:"w-8 h-8 text-gray-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:I.name}),I.description&&d.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:I.description})]})]})},I.id))})]})}),d.jsx("div",{className:"border-t p-6",children:m?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-sm text-gray-600",children:["Importando canciones... ",k,"%"]}),d.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(k/100*f.length),"/",f.length]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}):d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(yt,{variant:"secondary",onClick:t,children:"Cancelar"}),l&&f.length>0&&d.jsxs(yt,{variant:"primary",onClick:J,disabled:!_.trim(),children:[d.jsx(H0,{className:"w-4 h-4 mr-2"}),"Importar ",f.length," canciones"]})]})})]})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ma,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Br,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Necesitas conectar con Spotify para importar playlists"}),d.jsx(yt,{onClick:t,variant:"primary",children:"Entendido"})]})]})}):null}const v3={name:"",description:"",estimated_duration_minutes:""};function sq({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:s,onMedleyRenamed:a,onMedleyDeleted:l}){var S,k,C,_;const{attributes:c,listeners:f,setNodeRef:p,transform:g,transition:w}=eq({id:e.id}),m={transform:gp.Transform.toString(g),transition:w};return d.jsxs("div",{ref:p,style:m,...c,className:"flex items-center gap-2 mb-2",children:[t&&d.jsx("div",{...f,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 py-3 px-3 touch-none select-none min-w-[48px] min-h-[48px] flex items-center justify-center rounded-md hover:bg-gray-100 active:bg-gray-200 transition-colors",role:"button","aria-label":"Arrastrar para reordenar",tabIndex:0,children:d.jsx(pU,{className:"text-lg"})}),d.jsx("div",{className:"flex-grow",children:e.type==="song"?d.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm border border-gray-200 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:(S=e.data.song)==null?void 0:S.title}),d.jsxs("p",{className:"text-sm text-gray-500",children:[(k=e.data.song)==null?void 0:k.artist," - ",(C=e.data.song)==null?void 0:C.duration_minutes,"m - Tono: ",(_=e.data.song)==null?void 0:_.key]})]}),t&&d.jsx(yt,{variant:"danger",onClick:()=>r(e.data.setlist_id,e.data.song_id),children:"Eliminar"})]}):d.jsx(rq,{medley:e.data,availableSongs:n.filter(N=>N.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:s,onMedleyRenamed:a,onMedleyDeleted:l})})]})}function aq({groupId:e,canManageSetlists:t=!0}){const[n,r]=j.useState([]),[i,s]=j.useState([]),[a,l]=j.useState(!0),[c,f]=j.useState(!1),[p,g]=j.useState(null),[w,m]=j.useState(null),[S,k]=j.useState(v3),[C,_]=j.useState(!1),[N,L]=j.useState(null),[R,J]=j.useState(!1),[ee,W]=j.useState(null),[I,Z]=j.useState(""),[re,P]=j.useState(""),[F,V]=j.useState(!1),[Y,pe]=j.useState(!1),{isAuthenticated:ge,createPlaylistFromSetlist:Q,searchTracks:$}=Tp();j.useState(null),j.useState("");const[q,oe]=j.useState([]),Le=PU(Bv(ow,{activationConstraint:{distance:8}}),Bv(X6,{activationConstraint:{delay:200,tolerance:5}}),Bv(sw,{coordinateGetter:(be,{context:{active:$e,droppableRects:Ke,droppableContainers:Je,collisionRect:nt}})=>null}));j.useEffect(()=>{T()},[e]),j.useEffect(()=>{if(w){const be=[];w.songs&&w.songs.forEach(Je=>{var rt,at,St,ft;const nt=((rt=Je.song)==null?void 0:rt.type)==="medley";nt&&console.log("Processing medley item:",{songId:Je.id,songSongId:(at=Je.song)==null?void 0:at.id,songTitle:(St=Je.song)==null?void 0:St.title,songType:(ft=Je.song)==null?void 0:ft.type,position:Je.position}),Je.id?be.push({id:Je.id,type:nt?"medley":"song",position:Je.position,data:nt?Je.song:Je}):console.error("Song with undefined ID found:",Je)}),w.medleys&&w.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",w.medleys),console.warn('All medleys should be in the songs table with type="medley"')),be.sort((Je,nt)=>Je.position-nt.position);const $e=be.map(Je=>Je.id),Ke=$e.filter((Je,nt)=>$e.indexOf(Je)!==nt);Ke.length>0&&(console.error("Duplicate IDs found in setlistItems:",Ke),console.error("All items:",be),console.error("selectedSetlist.songs:",w.songs),console.error("selectedSetlist.medleys:",w.medleys)),console.log("All setlistItems:",be.map(Je=>({id:Je.id,type:Je.type,position:Je.position}))),oe(be)}else oe([])},[w]);const T=async()=>{l(!0);const[be,$e]=await Promise.all([uy(e),Q0(e)]);return be&&r(be),$e&&s($e),l(!1),be},K=async be=>{if(be.preventDefault(),!S.name.trim()){Te.error("El nombre es obligatorio");return}const{data:{user:$e}}=await Xe.auth.getUser();if(!$e){Te.error("No se pudo obtener la información del usuario");return}const Ke={group_id:e,name:S.name.trim(),description:S.description.trim()||void 0,estimated_duration_minutes:S.estimated_duration_minutes?parseInt(S.estimated_duration_minutes):void 0,created_by:$e.id};if(p){const Je=await O$(p.id,Ke);Je&&(Te.success("Setlist actualizado correctamente"),r(nt=>nt.map(rt=>rt.id===p.id?{...rt,...Je}:rt)),(w==null?void 0:w.id)===p.id&&m(nt=>nt?{...nt,...Je}:null))}else{const Je=await K5({...Ke,name:Ke.name});Je&&(Te.success("Setlist creado correctamente"),r(nt=>[...nt,{...Je,songs:[]}]))}ce()},se=be=>{var $e;g(be),k({name:be.name,description:be.description||"",estimated_duration_minutes:(($e=be.estimated_duration_minutes)==null?void 0:$e.toString())||""}),f(!0)},ue=be=>{L(be),_(!0)},he=async()=>{if(!N)return;await R$(N.id)?(Te.success("Setlist eliminado correctamente"),r($e=>$e.filter(Ke=>Ke.id!==N.id)),(w==null?void 0:w.id)===N.id&&m(null)):Te.error("No se pudo eliminar el setlist"),_(!1),L(null)},je=async(be,$e)=>{if(!w)return;const Je=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(rt=>rt.position)):0)+1,nt=await Z0(be,$e,Je);if(nt){Te.success("Canción añadida al setlist");const rt=i.find(at=>at.id===$e);if(rt){const at={...nt,position:Je,song:rt},St={...w,songs:[...w.songs||[],at]};m(St),r(ft=>ft.map(Nt=>Nt.id===be?St:Nt))}}else console.error("No se pudo añadir la canción al setlist")},Ce=async(be,$e)=>{var Je;if(await F$(be,$e)){Te.success("Canción eliminada del setlist");const nt=w?{...w,songs:(Je=w.songs)==null?void 0:Je.filter(rt=>rt.song_id!==$e)}:null;nt&&(m(nt),r(rt=>rt.map(at=>at.id===nt.id?nt:at)))}else Te.error("No se pudo eliminar la canción del setlist")},ne=be=>{const{active:$e,over:Ke}=be;if(!Ke||$e.id===Ke.id||!w)return;const Je=q.findIndex(et=>et.id===$e.id),nt=q.findIndex(et=>et.id===Ke.id),at=lw(q,Je,nt).map((et,bn)=>({id:et.id,type:et.type,position:bn+1})),St=at.map(et=>{var Bt;return{...(Bt=w.songs)==null?void 0:Bt.find(Tr=>Tr.id===et.id),position:et.position}}),ft={...w,songs:St};m(ft),r(et=>et.map(bn=>bn.id===ft.id?ft:bn)),console.log("Reordering items:",at);const Nt=at.map(et=>({songId:et.id,position:et.position}));$$(w.id,Nt).then(et=>{et?console.log("Reorder successful"):(Te.error("No se pudo guardar el orden. Se revertirán los cambios."),T())})},ce=()=>{k(v3),g(null),f(!1)},le=be=>{if(!i)return[];const $e=new Set((be.songs||[]).map(Ke=>Ke.song_id));return i.filter(Ke=>!$e.has(Ke.id))},me=be=>{const $e=n.find(Ke=>Ke.id===be.id);m($e||null)},Ne=(be,$e,Ke)=>{if(!w)return;const Je={...Ke,song:$e},nt={...w,medleys:(w.medleys||[]).map(rt=>rt.id===be?{...rt,songs:[...rt.songs||[],Je].sort((at,St)=>at.position-St.position)}:rt)};m(nt),r(rt=>rt.map(at=>at.id===nt.id?nt:at))},Me=(be,$e)=>{if(!w)return;const Ke={...w,medleys:(w.medleys||[]).map(Je=>Je.id===be?{...Je,songs:(Je.songs||[]).filter(nt=>nt.song_id!==$e)}:Je)};m(Ke),r(Je=>Je.map(nt=>nt.id===Ke.id?Ke:nt))},de=(be,$e)=>{if(!w)return;const Ke={...w,medleys:(w.medleys||[]).map(Je=>Je.id===be?{...Je,name:$e}:Je)};m(Ke),r(Je=>Je.map(nt=>nt.id===Ke.id?Ke:nt))},B=be=>{if(!w)return;const $e={...w,medleys:(w.medleys||[]).filter(Ke=>Ke.id!==be)};m($e),r(Ke=>Ke.map(Je=>Je.id===$e.id?$e:Je))},ke=async be=>{if(!w)return;const Ke=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(nt=>nt.position)):0)+1;if(await Z0(w.id,be.id,Ke)){Te.success("Medley creado y añadido al setlist"),await T();const nt=await uy(e);if(nt){const rt=nt.find(at=>at.id===w.id);rt&&m(rt)}}else Te.error("Medley creado pero no se pudo añadir al setlist")},Fe=be=>{W(be),Z(`${be.name} (copia)`),J(!0)},Re=async be=>{if(!ge){Te.error("Debes conectar con Spotify primero");return}l(!0);try{const $e=be.songs||[],Ke=[];for(const nt of $e)if(nt.song){const rt=`${nt.song.title} ${nt.song.artist||""}`.trim();try{const at=await $(rt);at.length>0&&Ke.push(at[0])}catch{console.warn(`Could not find "${rt}" on Spotify`)}}if(Ke.length===0){Te.error("No se encontraron canciones del setlist en Spotify");return}const Je=await Q(be.name,Ke);Je&&Te.success(d.jsxs("div",{children:[d.jsx("p",{children:"¡Playlist creada en Spotify!"}),d.jsxs("p",{className:"text-sm",children:["Encontradas ",Ke.length," de ",$e.length," canciones"]}),d.jsx("a",{href:Je,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Abrir en Spotify"})]}))}catch($e){console.error("Error creating Spotify playlist:",$e),Te.error("Error al crear playlist en Spotify")}finally{l(!1)}},qe=async()=>{if(!ee||!I.trim())return;l(!0),J(!1),await W$(ee.id,I.trim())?(Te.success("Setlist duplicado correctamente"),await T()):Te.error("No se pudo duplicar el setlist"),W(null),Z(""),l(!1)};return a?d.jsx("div",{className:"text-center py-8",children:"Cargando setlists..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx(yt,{onClick:()=>f(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"}),d.jsxs(yt,{onClick:()=>pe(!0),variant:"secondary",className:`${ge?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,title:ge?"Importar playlist desde Spotify":"Conecta con Spotify para importar playlists",children:[d.jsx(r3,{className:"mr-2"}),"Importar de Spotify",!ge&&d.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Conectar)"})]})]})]}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&d.jsxs("form",{onSubmit:K,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Gn,{label:"Nombre *",value:S.name,onChange:be=>k({...S,name:be.target.value}),required:!0}),d.jsx(Gn,{label:"Duración estimada (minutos)",type:"number",value:S.estimated_duration_minutes,onChange:be=>k({...S,estimated_duration_minutes:be.target.value}),min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),d.jsx("textarea",{value:S.description,onChange:be=>k({...S,description:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripción breve del setlist..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(yt,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),d.jsx(yt,{type:"button",variant:"secondary",onClick:ce,children:"Cancelar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 lg:hidden",children:"Setlists"}),n.map(be=>{var $e,Ke;return d.jsxs("div",{className:`p-4 rounded-lg cursor-pointer transition-all ${(w==null?void 0:w.id)===be.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>me(be),children:[d.jsx("h4",{className:`font-bold ${(w==null?void 0:w.id)===be.id?"text-white":"text-gray-800"}`,children:be.name}),d.jsxs("p",{className:`text-sm ${(w==null?void 0:w.id)===be.id?"text-blue-100":"text-gray-500"}`,children:[((($e=be.songs)==null?void 0:$e.length)||0)+(((Ke=be.medleys)==null?void 0:Ke.length)||0)," items"]})]},be.id)}),n.length===0&&!a&&d.jsx("p",{className:"text-center text-gray-500 py-4",children:"No hay setlists. ¡Crea el primero!"})]}),d.jsx("div",{className:"lg:col-span-2",children:w?d.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4 gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800 truncate",children:w.name}),d.jsx("p",{className:"text-sm text-gray-500 break-words",children:w.description})]}),t&&d.jsxs("div",{className:"flex flex-wrap gap-2 lg:flex-nowrap",children:[d.jsxs(yt,{variant:"primary",onClick:()=>V(!0),children:[d.jsx(_y,{className:"mr-1"})," Crear Medley"]}),ge&&d.jsxs(yt,{variant:"secondary",onClick:()=>Re(w),className:"bg-green-500 hover:bg-green-600 text-white",children:[d.jsx(r3,{className:"mr-2"})," Playlist Spotify"]}),d.jsxs(yt,{variant:"secondary",onClick:()=>se(w),children:[d.jsx($6,{className:"mr-2"})," Editar"]}),d.jsxs(yt,{variant:"secondary",onClick:()=>Fe(w),children:[d.jsx(hU,{className:"mr-2"})," Duplicar"]}),d.jsx(yt,{variant:"danger",onClick:()=>ue(w),children:"Eliminar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 xl:gap-8",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Canciones en el Setlist"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Iz,{sensors:Le,collisionDetection:OU,onDragEnd:ne,children:d.jsx(Vz,{items:q.map(be=>be.id),strategy:Hz,children:q.map((be,$e)=>d.jsx(sq,{item:be,canManageSetlists:t,songs:i,onRemoveSong:Ce,onSongAddedToMedley:Ne,onSongRemovedFromMedley:Me,onMedleyRenamed:de,onMedleyDeleted:B},`${be.type}-${be.id}-${$e}`))})}),q.length===0&&d.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist está vacío."})]})]}),t&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Añadir Canción al Setlist"}),d.jsx(Gn,{placeholder:"Buscar canción...",value:re,onChange:be=>P(be.target.value),className:"mb-2"}),d.jsxs("div",{className:"space-y-2 max-h-60 lg:max-h-80 overflow-y-auto pr-2",children:[le(w).filter(be=>{var $e;return be.title.toLowerCase().includes(re.toLowerCase())||(($e=be.artist)==null?void 0:$e.toLowerCase().includes(re.toLowerCase()))}).map(be=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-medium text-sm",children:[be.type==="medley"&&d.jsx("span",{className:"text-blue-600 mr-1",children:"🎵"}),be.title]}),d.jsx("p",{className:"text-xs text-gray-500",children:be.type==="medley"?"Medley":be.artist})]}),d.jsx(yt,{onClick:()=>je(w.id,be.id),children:d.jsx(_y,{})})]},be.id)),le(w).length===0&&d.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya están en este setlist."})]})]})]})]}):d.jsx("div",{className:"text-center py-12 text-gray-500",children:d.jsx("p",{children:"Selecciona un setlist para ver los detalles"})})})]}),C&&N&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el setlist "',N.name,'"? Esta acción no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>{_(!1),L(null)},children:"Cancelar"}),d.jsx(yt,{variant:"danger",onClick:he,children:"Eliminar"})]})]})}),R&&ee&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),d.jsx(Gn,{value:I,onChange:be=>Z(be.target.value),className:"mb-6",autoFocus:!0}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(yt,{variant:"secondary",onClick:()=>{J(!1),W(null),Z("")},children:"Cancelar"}),d.jsx(yt,{variant:"primary",onClick:qe,disabled:!I.trim(),children:"Duplicar"})]})]})}),F&&w&&d.jsx(nq,{isOpen:F,onClose:()=>V(!1),groupId:e,availableSongs:le(w),onMedleyCreated:be=>{ke(be),V(!1)}}),Y&&d.jsx(iq,{isOpen:Y,onClose:()=>pe(!1),groupId:e,onSetlistCreated:()=>{T(),pe(!1)}})]})}function oq({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0,defaultTab:r="songs"}){const[i,s]=j.useState(r);return j.useEffect(()=>{s(r)},[r]),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[d.jsx("button",{onClick:()=>s("songs"),className:`${i==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),d.jsx("button",{onClick:()=>s("setlists"),className:`${i==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),d.jsxs("div",{className:"p-6",children:[i==="songs"&&d.jsx(rU,{groupId:e,canManageSongs:t}),i==="setlists"&&d.jsx(aq,{groupId:e,canManageSetlists:n})]})]})})}const lq=({groupId:e})=>{const[t,n]=j.useState(!0),[r,i]=j.useState([]),[s,a]=j.useState(null),[l,c]=j.useState(null),[f,p]=j.useState(null),[g,w]=j.useState([]),[m,S]=j.useState("6m");j.useEffect(()=>{e&&k()},[e,m]);const k=async()=>{n(!0);try{await Promise.all([_(),N(),L(),R(),J()])}catch(ee){console.error("Error loading analytics:",ee)}n(!1)},C=()=>{const ee=new Date;switch(m){case"3m":return xh(ee,3);case"6m":return xh(ee,6);case"1y":return xh(ee,12);default:return new Date("2020-01-01")}},_=async()=>{try{const{data:ee}=await Xe.from("songs").select("*").eq("group_id",e).eq("type","song"),{data:W}=await Xe.from("setlist_songs").select(`
          song_id,
          setlist:setlists!inner(created_at)
        `).gte("setlist.created_at",C().toISOString());if(ee&&W){const I=new Map;W.forEach(re=>{var F;const P=I.get(re.song_id)||{count:0};I.set(re.song_id,{count:P.count+1,lastUsed:((F=re.setlist)==null?void 0:F.created_at)||P.lastUsed})});const Z=ee.map(re=>{var P,F;return{song:re,usageCount:((P=I.get(re.id))==null?void 0:P.count)||0,lastUsed:(F=I.get(re.id))==null?void 0:F.lastUsed}}).sort((re,P)=>P.usageCount-re.usageCount);i(Z)}}catch(ee){console.error("Error loading song stats:",ee)}},N=async()=>{try{const ee=C(),{data:W}=await Xe.from("events").select("*").eq("group_id",e).gte("created_at",ee.toISOString()),{data:I}=await Xe.from("setlists").select(`
          id,
          songs:setlist_songs(count),
          medleys:setlist_medleys(count)
        `).eq("group_id",e);if(W){const Z=new Date,re=W.filter(Y=>new Date(Y.date)>=Z).length,P=[];for(let Y=5;Y>=0;Y--){const pe=Fi(xh(Z,Y)),ge=qg(xh(Z,Y)),Q=W.filter($=>{const q=new Date($.date);return q>=pe&&q<=ge});P.push({month:on(pe,"MMM yyyy"),count:Q.length})}let F=0,V=0;I&&I.forEach(Y=>{var ge,Q,$,q;const pe=(((Q=(ge=Y.songs)==null?void 0:ge[0])==null?void 0:Q.count)||0)+(((q=($=Y.medleys)==null?void 0:$[0])==null?void 0:q.count)||0);pe>0&&(F+=pe,V++)}),a({totalEvents:W.length,upcomingEvents:re,monthlyEvents:P,averageSetlistSize:V>0?Math.round(F/V):0})}}catch(ee){console.error("Error loading event stats:",ee)}},L=async()=>{try{const{data:ee}=await Xe.from("setlists").select(`
          id,
          name,
          songs:setlist_songs(count),
          medleys:setlist_medleys(count)
        `).eq("group_id",e);if(ee){const W=ee.map(F=>{var V,Y,pe,ge;return{...F,songCount:(((Y=(V=F.songs)==null?void 0:V[0])==null?void 0:Y.count)||0)+(((ge=(pe=F.medleys)==null?void 0:pe[0])==null?void 0:ge.count)||0)}}).filter(F=>F.songCount>0),I=W.reduce((F,V)=>F+V.songCount,0),Z=W.length>0?Math.round(I/W.length):0,re=W.reduce((F,V)=>V.songCount>F.songCount?V:F,W[0]||{name:"N/A",songCount:0}),P=W.reduce((F,V)=>V.songCount<F.songCount?V:F,W[0]||{name:"N/A",songCount:0});c({totalSetlists:ee.length,averageSongsPerSetlist:Z,longestSetlist:{name:re.name,songCount:re.songCount},shortestSetlist:{name:P.name,songCount:P.songCount}})}}catch(ee){console.error("Error loading setlist stats:",ee)}},R=async()=>{try{const{data:ee}=await Xe.from("group_members").select(`
          *,
          user:users(id, email)
        `).eq("group_id",e),{data:W}=await Xe.from("event_members").select(`
          member_id,
          event:events!inner(date)
        `).gte("event.date",C().toISOString());if(ee){const I=ee.filter(re=>re.user).length,Z=ee.map(re=>{const P=(W==null?void 0:W.filter(F=>F.member_id===re.id).length)||0;return{member:re,eventCount:P}}).sort((re,P)=>P.eventCount-re.eventCount);p({totalMembers:ee.length,activeMembers:I,memberParticipation:Z})}}catch(ee){console.error("Error loading member stats:",ee)}},J=async()=>{try{const{data:ee}=await Xe.from("songs").select("*").eq("group_id",e).eq("type","song").not("artist","is",null),{data:W}=await Xe.from("setlist_songs").select(`
          song_id,
          song:songs!inner(artist)
        `);if(ee&&W){const I=new Map;ee.forEach(re=>{if(re.artist){const P=I.get(re.artist)||{songCount:0,usageCount:0};I.set(re.artist,{...P,songCount:P.songCount+1})}}),W.forEach(re=>{var F;const P=(F=re.song)==null?void 0:F.artist;if(P){const V=I.get(P)||{songCount:0,usageCount:0};I.set(P,{...V,usageCount:V.usageCount+1})}});const Z=Array.from(I.entries()).map(([re,P])=>({artist:re,...P})).sort((re,P)=>P.usageCount-re.usageCount).slice(0,10);w(Z)}}catch(ee){console.error("Error loading artist stats:",ee)}};return t?d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"animate-pulse space-y-6",children:[d.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(ee=>d.jsx("div",{className:"h-32 bg-gray-200 rounded"},ee))})]})}):d.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Analytics Dashboard"}),d.jsxs("select",{value:m,onChange:ee=>S(ee.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"3m",children:"Últimos 3 meses"}),d.jsx("option",{value:"6m",children:"Últimos 6 meses"}),d.jsx("option",{value:"1y",children:"Último año"}),d.jsx("option",{value:"all",children:"Todo el tiempo"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Eventos"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.totalEvents)||0})]}),d.jsx(fp,{className:"w-8 h-8 text-blue-500"})]})}),d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Próximos Eventos"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.upcomingEvents)||0})]}),d.jsx(bN,{className:"w-8 h-8 text-green-500"})]})}),d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-purple-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Setlists"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(l==null?void 0:l.totalSetlists)||0})]}),d.jsx(Br,{className:"w-8 h-8 text-purple-500"})]})}),d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-orange-500",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Miembros Activos"}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(f==null?void 0:f.activeMembers)||0})]}),d.jsx(Sf,{className:"w-8 h-8 text-orange-500"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(KI,{className:"w-5 h-5 text-yellow-500"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Canciones Más Tocadas"})]}),d.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((ee,W)=>d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"w-6 h-6 bg-yellow-100 text-yellow-800 rounded-full flex items-center justify-center text-sm font-bold",children:W+1}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:ee.song.title}),d.jsx("p",{className:"text-sm text-gray-500",children:ee.song.artist})]})]}),d.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:[ee.usageCount," veces"]})]},ee.song.id))})]}),d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(Q2,{className:"w-5 h-5 text-blue-500"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Artistas Más Tocados"})]}),d.jsx("div",{className:"space-y-3",children:g.slice(0,5).map((ee,W)=>d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-bold",children:W+1}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:ee.artist}),d.jsxs("p",{className:"text-sm text-gray-500",children:[ee.songCount," canciones"]})]})]}),d.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:[ee.usageCount," usos"]})]},ee.artist))})]}),d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(eD,{className:"w-5 h-5 text-green-500"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Estadísticas de Setlists"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Promedio de canciones"}),d.jsx("span",{className:"font-bold text-gray-900",children:(l==null?void 0:l.averageSongsPerSetlist)||0})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Setlist más largo"}),d.jsxs("span",{className:"font-bold text-gray-900",children:[(l==null?void 0:l.longestSetlist.songCount)||0," canciones"]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Setlist más corto"}),d.jsxs("span",{className:"font-bold text-gray-900",children:[(l==null?void 0:l.shortestSetlist.songCount)||0," canciones"]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Promedio por evento"}),d.jsxs("span",{className:"font-bold text-gray-900",children:[(s==null?void 0:s.averageSetlistSize)||0," canciones"]})]})]})]}),d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(Sf,{className:"w-5 h-5 text-purple-500"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Participación de Miembros"})]}),d.jsx("div",{className:"space-y-3",children:f==null?void 0:f.memberParticipation.slice(0,5).map((ee,W)=>{var I;return d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"w-6 h-6 bg-purple-100 text-purple-800 rounded-full flex items-center justify-center text-sm font-bold",children:W+1}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:ee.member.name}),d.jsx("p",{className:"text-sm text-gray-500",children:((I=ee.member.role)==null?void 0:I.name)||"Sin rol"})]})]}),d.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-sm font-medium",children:[ee.eventCount," eventos"]})]},ee.member.id)})})]})]}),(s==null?void 0:s.monthlyEvents)&&s.monthlyEvents.length>0&&d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(Q2,{className:"w-5 h-5 text-indigo-500"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Eventos por Mes"})]}),d.jsx("div",{className:"flex items-end gap-2 h-32",children:s.monthlyEvents.map((ee,W)=>d.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[d.jsx("div",{className:"bg-indigo-500 w-full rounded-t",style:{height:`${Math.max(ee.count/Math.max(...s.monthlyEvents.map(I=>I.count))*100,5)}%`}}),d.jsx("span",{className:"text-xs text-gray-600 mt-2 transform -rotate-45 origin-left",children:ee.month}),d.jsx("span",{className:"text-xs font-bold text-gray-900",children:ee.count})]},W))})]})]})};function Wv({defaultTab:e}){const{id:t}=FS(),n=Ra(),r=wo(),[i,s]=j.useState(null),[a,l]=j.useState([]),[c,f]=j.useState([]),[p,g]=j.useState(!1),[w,m]=j.useState(!1),[S,k]=j.useState(!1),[C,_]=j.useState(null),[N,L]=j.useState(null),[R,J]=j.useState(!0),[ee,W]=j.useState(!1),[I,Z]=j.useState(null),[re,P]=j.useState(!1),[F,V]=j.useState([]),{user:Y}=Os(),[pe,ge]=j.useState(!1),[Q,$]=j.useState(!1),[q,oe]=j.useState(""),Le=()=>{if(e)return e;const B=new URLSearchParams(r.search).get("tab");return r.pathname.endsWith("/songs")?"songs":r.pathname.endsWith("/setlists")?"setlists":B==="analytics"?"analytics":"overview"},[T,K]=j.useState(Le()),se=de=>{switch(K(de),de){case"songs":n(`/group/${t}/songs`);break;case"setlists":n(`/group/${t}/setlists`);break;case"analytics":n(`/group/${t}?tab=analytics`);break;case"overview":default:n(`/group/${t}`);break}};j.useEffect(()=>{K(Le())},[r.pathname,r.search,e]),j.useEffect(()=>{t&&he()},[t,Y]),j.useEffect(()=>{t&&Y&&ue()},[t,Y,a]);const ue=async()=>{if(Y)try{const de=await $n(()=>Xe.from("users").select("role").eq("id",Y.id).single(),"Error checking permissions");de&&(Z(de.role),W(de.role==="admin"));const B=a.find(ke=>ke.user_id===Y.id);ge(!!B),P((B==null?void 0:B.role_in_group)==="principal"||!1),(B==null?void 0:B.role_in_group)==="principal"&&W(!0)}catch(de){console.error("Error checking permissions:",de)}},he=async()=>{try{const de=await $n(()=>Xe.from("groups").select("*").eq("id",t).single(),"Error loading group");de&&s(de);const B=await $n(()=>Xe.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",t).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(B){const Fe=B.map(Re=>({...Re,instruments:(Re.group_member_roles||[]).filter(qe=>qe==null?void 0:qe.role).map(qe=>({id:qe.role.id,name:qe.role.name}))}));l(Fe)}const ke=await $n(()=>Xe.from("roles").select("*").eq("group_id",t).order("name"),"Error loading roles");ke&&f(ke)}catch(de){console.error("Error fetching group data:",de)}finally{J(!1)}},je=async de=>{if(!(!Y||!t))try{await $n(()=>Xe.rpc("link_group_member",{p_member_id:de,p_user_id:Y.id,p_group_id:t}),"Error linking member"),Te.success("¡Te has vinculado correctamente!"),await he(),await ue()}catch(B){console.error("Error linking member:",B)}},Ce=de=>{_(de),m(!0)},ne=de=>{L(de),k(!0)},ce=async()=>{if(N)try{await $n(()=>Xe.from("group_members").delete().eq("id",N.id),"Error deleting member"),Te.success("Miembro eliminado correctamente"),k(!1),L(null),he()}catch(de){console.error("Error deleting member:",de)}},le=a.filter(de=>de.role_in_group==="principal"),me=a.filter(de=>de.role_in_group==="sustituto"),Ne=(de,B)=>d.jsxs("div",{children:[d.jsx("div",{className:"bg-gray-50 px-3 py-2",children:d.jsx("h3",{className:"text-sm font-medium text-gray-700",children:B})}),d.jsx("div",{className:"divide-y",children:de.map(ke=>d.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-medium text-gray-900",children:ke.name}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${ke.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:ke.role_in_group==="principal"?"Principal":"Sustituto"}),!ke.user_id&&d.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),ke.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ke.instruments.map((Fe,Re)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[d.jsx(Br,{className:"w-3 h-3 mr-1"}),Fe.name]},`${ke.id}-${Fe.id}-${Re}`))}),ke.user_id===(Y==null?void 0:Y.id)&&d.jsx("div",{className:"mt-2 flex items-center",children:d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:ke.sync_calendar,onChange:async()=>{try{await $n(()=>Xe.from("group_members").update({sync_calendar:!ke.sync_calendar}).eq("id",ke.id),"Error actualizando preferencias de calendario"),Te.success("Preferencias de calendario actualizadas"),he()}catch(Fe){console.error("Error:",Fe)}},className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),ke.user_id===(Y==null?void 0:Y.id)&&ke.sync_calendar&&d.jsxs("button",{onClick:()=>Me(ke.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[d.jsx(fp,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripción al calendario"]})]}),d.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[(I==="admin"||ke.user_id===(Y==null?void 0:Y.id))&&d.jsx("button",{onClick:()=>Ce(ke),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:d.jsx(xN,{className:"w-4 h-4"})}),(I==="admin"||re)&&d.jsx("button",{onClick:()=>ne(ke),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:d.jsx(P5,{className:"w-4 h-4"})})]})]}),!ke.user_id&&!pe&&d.jsxs(yt,{onClick:()=>je(ke.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[d.jsx(o_,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},ke.id))})]}),Me=async de=>{try{const{data:B,error:ke}=await Xe.rpc("get_group_calendar",{p_group_id:i==null?void 0:i.id,p_member_id:de});if(ke)throw ke;if(!B)throw new Error("No se pudo generar el calendario");const Fe=new Blob([B],{type:"text/calendar"}),Re=new File([Fe],"calendar.ics",{type:"text/calendar"}),{error:qe}=await Xe.storage.from("calendars").upload(`${i==null?void 0:i.id}/${de}/calendar.ics`,Re,{cacheControl:"0",upsert:!0});if(qe)throw console.error("Upload error:",qe),qe;const{data:{publicUrl:be}}=await Xe.storage.from("calendars").getPublicUrl(`${i==null?void 0:i.id}/${de}/calendar.ics`);if(be)oe(be),$(!0);else throw new Error("No se pudo generar el enlace público")}catch(B){console.error("Error:",B),B.message==="new row violates row-level security policy"?Te.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):Te.error("Error al generar el enlace del calendario")}};return R?d.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:d.jsx(go,{className:"w-8 h-8 animate-spin text-indigo-600"})}):i?d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),d.jsx("p",{className:"text-gray-500 mt-1",children:"Gestiona miembros y disponibilidad"})]}),(ee||re)&&(!pe||I==="admin"||re)&&d.jsxs(yt,{onClick:()=>g(!0),className:"flex items-center space-x-2",children:[d.jsx(Ig,{className:"w-5 h-5"}),d.jsx("span",{children:I==="admin"||re?"Añadir Miembro":"Unirse al Grupo"})]})]}),d.jsx("div",{className:"border-b border-gray-200 mb-6",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsxs("button",{onClick:()=>se("overview"),className:`${T==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx(fp,{className:"w-4 h-4"}),d.jsx("span",{children:"Vista General"})]}),d.jsxs("button",{onClick:()=>se("songs"),className:`${T==="songs"||T==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx(QI,{className:"w-4 h-4"}),d.jsx("span",{children:"Canciones y Setlists"})]}),d.jsxs("button",{onClick:()=>se("analytics"),className:`${T==="analytics"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx(Q2,{className:"w-4 h-4"}),d.jsx("span",{children:"Analytics"})]})]})}),T==="overview"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-4 border-b",children:d.jsx("h2",{className:"text-lg font-semibold",children:"Miembros del Grupo"})}),a.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(o_,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsxs("p",{className:"text-gray-500",children:["No hay miembros aún. ",ee?'¡Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):d.jsxs("div",{className:"divide-y divide-gray-200",children:[le.length>0&&Ne(le,"Miembros Principales"),me.length>0&&Ne(me,"Miembros Sustitutos")]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-4 border-b",children:d.jsx("h2",{className:"text-lg font-semibold",children:"Disponibilidad"})}),d.jsx("div",{className:"p-4",children:d.jsx(P$,{members:a,onAvailableDatesChange:V,groupName:i.name})})]})]}),i&&t&&d.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:d.jsx(HB,{groupId:t,canManageEvents:I==="admin"||re,availableDates:F,members:a})})]}),(T==="songs"||T==="setlists")&&i&&t&&d.jsx(oq,{groupId:t,canManageSongs:I==="admin"||re,canManageSetlists:I==="admin"||re,defaultTab:T==="setlists"?"setlists":"songs"}),T==="analytics"&&i&&t&&d.jsx(lq,{groupId:t}),i&&(ee||re)&&(!pe||I==="admin"||re)&&d.jsx(XO,{isOpen:p,onClose:()=>g(!1),groupId:i.id,instruments:c,onMemberAdded:he,isEmptyGroup:a.length===0,userRole:I}),C&&d.jsx(QO,{isOpen:w,onClose:()=>{m(!1),_(null)},member:C,instruments:c,onMemberUpdated:he,userRole:I}),d.jsx(GB,{isOpen:S,onClose:()=>{k(!1),L(null)},onConfirm:ce,title:"Eliminar Miembro",message:`¿Estás seguro de que quieres eliminar a ${N==null?void 0:N.name}? Esta acción no se puede deshacer.`}),d.jsx(VB,{isOpen:Q,onClose:()=>$(!1),calendarUrl:q})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a él."})]})}function Gm({children:e}){console.log("ProtectedRoute mounted");const{user:t}=Os(),n=wo(),[r,i]=j.useState(!1);console.log("ProtectedRoute check:",{user:t,currentPath:n.pathname}),j.useEffect(()=>{const a=new URLSearchParams(n.search),l=a.get("code"),c=a.get("state"),f=a.get("error");if(console.log("🎵 ProtectedRoute: Checking Spotify params:",{spotifyCode:l?l.substring(0,10)+"...":null,spotifyState:c,spotifyError:f}),f){console.log("❌ Spotify auth error:",f),Te.error(`Error de autenticación de Spotify: ${f}`);const p=new URL(window.location.href);p.searchParams.delete("error"),window.history.replaceState({},document.title,p.toString())}else l&&c&&!r&&(console.log("✅ Processing Spotify auth in ProtectedRoute..."),i(!0),s(l,c))},[n.search,r]);const s=async(a,l)=>{try{if(console.log("🎵 ProtectedRoute: Starting Spotify auth..."),await Lr.handleAuthCallback(a,l)){console.log("🎵 ProtectedRoute: Auth successful");const f=await Lr.getCurrentUser();Te.success(`¡Conectado a Spotify como ${f.display_name}!`);const p=localStorage.getItem("spotify_return_url");if(console.log("🎵 ProtectedRoute: Return URL:",p),p){localStorage.removeItem("spotify_return_url"),window.location.href=p;return}}else console.log("❌ ProtectedRoute: Auth failed"),Te.error("Error al conectar con Spotify")}catch(c){console.error("❌ ProtectedRoute: Error in Spotify auth:",c),Te.error("Error al autenticar con Spotify")}finally{const c=new URL(window.location.href);c.searchParams.delete("code"),c.searchParams.delete("state"),window.history.replaceState({},document.title,c.toString()),i(!1)}};return r?d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),d.jsx("p",{children:"Conectando con Spotify..."})]})}):t?d.jsx(d.Fragment,{children:e}):(console.log("No user in ProtectedRoute, redirecting to login"),d.jsx(l7,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0}))}function cq(){return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Política de Privacidad"}),d.jsxs("div",{className:"prose prose-indigo",children:[d.jsxs("p",{className:"mb-4",children:["Última actualización: ",new Date().toLocaleDateString()]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Información que Recopilamos"}),d.jsx("p",{children:"Band Manager recopila la siguiente información personal:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Dirección de correo electrónico"}),d.jsx("li",{children:"Nombre"}),d.jsx("li",{children:"Información de perfil de usuario"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),d.jsx("p",{children:"Nuestra aplicación requiere ciertos permisos para funcionar correctamente:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la información de tu banda y permitir la colaboración entre miembros."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicación) mejorando así el rendimiento y permitiendo el uso sin conexión."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Cámara (opcional):"})," Solo si decides subir fotos directamente desde la aplicación para tu perfil o contenido de la banda."]})]}),d.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicación. No compartimos ninguna información recopilada a través de estos permisos con terceros."}),d.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a través de la configuración de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicación."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cómo Utilizamos su Información"}),d.jsx("p",{children:"Utilizamos la información recopilada para:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),d.jsx("li",{children:"Gestionar su cuenta y membresía"}),d.jsx("li",{children:"Permitir la participación en funciones interactivas"}),d.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),d.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticación, que implementa estándares de seguridad de la industria para proteger su información personal."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),d.jsx("p",{children:"Usted tiene derecho a:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Acceder a sus datos personales"}),d.jsx("li",{children:"Corregir datos inexactos"}),d.jsx("li",{children:"Solicitar la eliminación de sus datos"}),d.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),d.jsxs("p",{children:["Si tiene preguntas sobre esta Política de Privacidad, puede contactarnos en:",d.jsx("br",{}),d.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function uq(){console.log("AcceptInvitation component mounted");const[e]=zS(),t=e.get("token"),n=Ra(),{user:r}=Os(),[i,s]=j.useState(!0),[a,l]=j.useState(null);j.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),Te.error("Token de invitación no válido"),n("/");return}(async()=>{try{if(!r){const m=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",m),n("/login",{state:{returnTo:m}});return}const{data:p,error:g}=await Xe.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:g}),g)throw g;if(!p||p.length===0){Te.error("Invitación no encontrada o ya procesada"),n("/");return}const w=p[0];if(console.log("Invitation data:",w),r.email!==w.email){Te.error("Esta invitación es para otro correo electrónico"),n("/");return}if(!e.get("group_member_id")){const m=new URLSearchParams(e);m.set("group_member_id",w.group_member_id),n(`${location.pathname}?${m.toString()}`,{replace:!0})}l({groupName:w.group_name,role:w.role_in_group}),s(!1)}catch(p){console.error("Error checking invitation:",p),Te.error(p.message||"Error al verificar la invitación"),n("/")}})()},[t,r,n,e]);const c=async f=>{try{s(!0);const{data:p,error:g}=await Xe.rpc("get_invitation_details",{p_token:t});if(g)throw g;if(!p||p.length===0)throw new Error("Invitación no encontrada");const{group_member_id:w}=p[0],{error:m}=await Xe.rpc("handle_group_invitation",{p_group_member_id:w,p_accept:f});if(m)throw m;Te.success(f?"Invitación aceptada":"Invitación rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),Te.error(p.message)}finally{s(!1)}};return i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),d.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitación..."})]})}):a?d.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitación a Grupo"}),d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",d.jsx("strong",{children:a.groupName})]}),d.jsxs("p",{className:"text-gray-600",children:["Rol: ",d.jsx("span",{className:"capitalize",children:a.role})]})]}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsx(yt,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),d.jsx(yt,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function dq(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(!1),a=async l=>{l.preventDefault(),s(!0),r("");const{error:c}=await Xe.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});s(!1),r(c?"Error: "+c.message:"¡Revisa tu correo para continuar el proceso!")};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"¿Olvidaste tu contraseña?"}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsx(Gn,{label:"Email",type:"email",value:e,onChange:l=>t(l.target.value),required:!0,placeholder:"tu@email.com"}),d.jsx(yt,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Ec,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function fq(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(!1),[a,l]=j.useState(!1),[c,f]=j.useState(!1),p=Ra(),g=wo();j.useEffect(()=>{(async()=>{var S;console.log("Verificando autenticación para reset de contraseña");try{const{data:k}=await Xe.auth.getSession(),C=new URLSearchParams(g.search),_=C.get("token"),N=C.get("type"),L=(S=g.state)==null?void 0:S.resetCode,R=localStorage.getItem("recovery_token");if(console.log("Verificando tokens de recuperación:",{urlToken:(_==null?void 0:_.substring(0,10))+"..."||"No presente",stateResetCode:L?"Presente":"No presente",storedToken:R?"Presente":"No presente",type:N}),console.log("Sesión activa:",!!k.session),_&&N==="recovery")console.log("Token de recuperación válido detectado en URL"),f(!0);else if(L){console.log("Código de recuperación detectado en state"),f(!0);try{await Xe.auth.verifyOtp({token_hash:L,type:"recovery"})}catch(J){console.warn("Error al verificar OTP con resetCode:",J)}}else if(R){console.log("Token de recuperación encontrado en localStorage"),f(!0),localStorage.removeItem("recovery_token");try{await Xe.auth.verifyOtp({token_hash:R,type:"recovery"})}catch(J){console.warn("Error al verificar OTP con storedToken:",J)}}else k.session?(console.log("Sesión activa detectada, permitiendo reset de contraseña"),f(!0)):a||(console.log("No hay token de recuperación válido ni sesión activa"),p("/login"))}catch(k){console.error("Error al verificar autenticación:",k),p("/login")}})()},[g,p,a]);const w=async m=>{m.preventDefault(),s(!0),r("");try{const{error:S}=await Xe.auth.updateUser({password:e});if(S)throw S;l(!0),r("¡Contraseña actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(S){r("Error: "+S.message)}finally{s(!1)}};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contraseña"}),c?d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsx(Gn,{label:"Nueva contraseña",type:"password",value:e,onChange:m=>t(m.target.value),required:!0,placeholder:"••••••••"}),d.jsx(yt,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contraseña"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):d.jsxs("div",{className:"py-6 text-center",children:[d.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:d.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperación..."}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automáticamente, solicita un",d.jsx(Ec,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}function hq(){return d.jsx("div",{className:"py-4 text-center text-xs text-gray-500 bg-gray-50 border-t",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsx("p",{className:"mb-2",children:"Análisis musical potenciado por:"}),d.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 md:gap-4",children:[d.jsx("a",{href:"https://getsongbpm.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline transition-colors",children:"GetSongBPM.com"}),d.jsx("span",{className:"hidden md:inline",children:"•"}),d.jsx("a",{href:"https://getsongkey.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline transition-colors",children:"GetSongKey.com"}),d.jsx("span",{className:"hidden md:inline",children:"•"}),d.jsx("a",{href:"https://theaudiodb.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline transition-colors",children:"TheAudioDB"}),d.jsx("span",{className:"hidden md:inline",children:"•"}),d.jsx("a",{href:"https://musicbrainz.org",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline transition-colors",children:"MusicBrainz"})]})]})})}function pq(){const{setUser:e,setSession:t}=Os();j.useEffect(()=>{const r=new URLSearchParams(window.location.search),i=r.get("token"),s=r.get("type"),a=window.location.hash,l=r.get("code"),c=r.get("state"),f=r.get("error");if(console.log("App: Verificando parámetros en URL:",{token:i?i.substring(0,10)+"...":null,type:s,hash:a.length>0?a.substring(0,20)+"...":null,spotifyCode:l?l.substring(0,10)+"...":null,spotifyState:c,spotifyError:f,fullURL:window.location.href,searchParams:window.location.search}),f){console.log("❌ Spotify auth error:",f),Te.error(`Error de autenticación de Spotify: ${f}`);const p=new URL(window.location.href);p.searchParams.delete("error"),window.history.replaceState({},document.title,p.toString())}else l&&c?(console.log("✅ Procesando autenticación de Spotify..."),console.log("🎵 Spotify Code:",l.substring(0,10)+"..."),console.log("🎵 Spotify State:",c),n(l,c)):l||c?console.log("⚠️ Spotify params parciales:",{spotifyCode:!!l,spotifyState:!!c}):i&&s==="recovery"&&window.location.pathname!=="/reset-password"?(console.log("App: Token PKCE de recuperación detectado, redirigiendo a /reset-password"),window.location.replace(`/reset-password?token=${i}&type=${s}`)):a.includes("access_token=")&&a.includes("type=recovery")&&window.location.pathname!=="/reset-password"&&(console.log("App: Token hash de recuperación detectado, redirigiendo a /reset-password"),window.location.replace("/reset-password"+a))},[]);const n=async(r,i)=>{try{if(console.log("🎵 App: Iniciando autenticación de Spotify..."),await Lr.handleAuthCallback(r,i)){console.log("🎵 App: Autenticación exitosa");const a=await Lr.getCurrentUser();Te.success(`¡Conectado a Spotify como ${a.display_name}!`);const l=localStorage.getItem("spotify_return_url");if(console.log("🎵 Return URL saved:",l),console.log("🎵 Current URL:",window.location.href),l){const c=new URL(l),f=new URL(window.location.href);if(c.pathname!==f.pathname){console.log("🎵 Redirecting back to:",l),localStorage.removeItem("spotify_return_url"),window.location.href=l;return}}}else console.log("❌ App: Error en autenticación"),Te.error("Error al conectar con Spotify")}catch(s){console.error("❌ App: Error en callback de Spotify:",s),Te.error("Error al autenticar con Spotify")}finally{const s=new URL(window.location.href);s.searchParams.delete("code"),s.searchParams.delete("state"),window.history.replaceState({},document.title,s.toString())}};return j.useEffect(()=>{console.log("App mounted"),Xe.auth.getSession().then(({data:{session:i}})=>{console.log("Initial session:",i),t(i),e((i==null?void 0:i.user)??null)});const{data:{subscription:r}}=Xe.auth.onAuthStateChange((i,s)=>{console.log("Auth state changed:",s),t(s),e((s==null?void 0:s.user)??null)});return()=>r.unsubscribe()},[e,t]),d.jsx(y7,{children:d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(nD,{}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsxs(u7,{children:[d.jsx(Sa,{path:"/login",element:d.jsx(rD,{})}),d.jsx(Sa,{path:"/register",element:d.jsx(iD,{})}),d.jsx(Sa,{path:"/forgot-password",element:d.jsx(dq,{})}),d.jsx(Sa,{path:"/reset-password",element:d.jsx(fq,{})}),d.jsx(Sa,{path:"/accept-invitation",element:d.jsx(uq,{})}),d.jsx(Sa,{path:"/",element:d.jsx(Gm,{children:d.jsx(JO,{})})}),d.jsx(Sa,{path:"/group/:id",element:d.jsx(Gm,{children:d.jsx(Wv,{})})}),d.jsx(Sa,{path:"/group/:id/songs",element:d.jsx(Gm,{children:d.jsx(Wv,{defaultTab:"songs"})})}),d.jsx(Sa,{path:"/group/:id/setlists",element:d.jsx(Gm,{children:d.jsx(Wv,{defaultTab:"setlists"})})}),d.jsx(Sa,{path:"/privacy-policy",element:d.jsx(cq,{})})]})}),d.jsx(hq,{}),d.jsx(dT,{position:"top-right"})]})})}PS(document.getElementById("root")).render(d.jsx(j.StrictMode,{children:d.jsx(pq,{})}));export{Nn as _,ii as c,y3 as g};
