function zC(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var m3={exports:{}},og={},g3={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp=Symbol.for("react.element"),WC=Symbol.for("react.portal"),HC=Symbol.for("react.fragment"),VC=Symbol.for("react.strict_mode"),GC=Symbol.for("react.profiler"),YC=Symbol.for("react.provider"),KC=Symbol.for("react.context"),JC=Symbol.for("react.forward_ref"),XC=Symbol.for("react.suspense"),QC=Symbol.for("react.memo"),ZC=Symbol.for("react.lazy"),mx=Symbol.iterator;function eA(e){return e===null||typeof e!="object"?null:(e=mx&&e[mx]||e["@@iterator"],typeof e=="function"?e:null)}var v3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y3=Object.assign,w3={};function Sf(e,t,n){this.props=e,this.context=t,this.refs=w3,this.updater=n||v3}Sf.prototype.isReactComponent={};Sf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function x3(){}x3.prototype=Sf.prototype;function ky(e,t,n){this.props=e,this.context=t,this.refs=w3,this.updater=n||v3}var Ey=ky.prototype=new x3;Ey.constructor=ky;y3(Ey,Sf.prototype);Ey.isPureReactComponent=!0;var gx=Array.isArray,b3=Object.prototype.hasOwnProperty,jy={current:null},_3={key:!0,ref:!0,__self:!0,__source:!0};function S3(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)b3.call(t,r)&&!_3.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:mp,type:e,key:s,ref:a,props:i,_owner:jy.current}}function tA(e,t){return{$$typeof:mp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cy(e){return typeof e=="object"&&e!==null&&e.$$typeof===mp}function nA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vx=/\/+/g;function $1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nA(""+e.key):t.toString(36)}function Wm(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case mp:case WC:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+$1(a,0):r,gx(i)?(n="",e!=null&&(n=e.replace(vx,"$&/")+"/"),Wm(i,t,n,"",function(f){return f})):i!=null&&(Cy(i)&&(i=tA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(vx,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",gx(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+$1(s,l);a+=Wm(s,t,n,c,i)}else if(c=eA(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+$1(s,l++),a+=Wm(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function hm(e,t,n){if(e==null)return e;var r=[],i=0;return Wm(e,r,"","",function(s){return t.call(n,s,i++)}),r}function rA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fi={current:null},Hm={transition:null},iA={ReactCurrentDispatcher:Fi,ReactCurrentBatchConfig:Hm,ReactCurrentOwner:jy};function N3(){throw Error("act(...) is not supported in production builds of React.")}Xt.Children={map:hm,forEach:function(e,t,n){hm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hm(e,function(){t++}),t},toArray:function(e){return hm(e,function(t){return t})||[]},only:function(e){if(!Cy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xt.Component=Sf;Xt.Fragment=HC;Xt.Profiler=GC;Xt.PureComponent=ky;Xt.StrictMode=VC;Xt.Suspense=XC;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;Xt.act=N3;Xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=y3({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=jy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)b3.call(t,c)&&!_3.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:mp,type:e.type,key:i,ref:s,props:r,_owner:a}};Xt.createContext=function(e){return e={$$typeof:KC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:YC,_context:e},e.Consumer=e};Xt.createElement=S3;Xt.createFactory=function(e){var t=S3.bind(null,e);return t.type=e,t};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(e){return{$$typeof:JC,render:e}};Xt.isValidElement=Cy;Xt.lazy=function(e){return{$$typeof:ZC,_payload:{_status:-1,_result:e},_init:rA}};Xt.memo=function(e,t){return{$$typeof:QC,type:e,compare:t===void 0?null:t}};Xt.startTransition=function(e){var t=Hm.transition;Hm.transition={};try{e()}finally{Hm.transition=t}};Xt.unstable_act=N3;Xt.useCallback=function(e,t){return Fi.current.useCallback(e,t)};Xt.useContext=function(e){return Fi.current.useContext(e)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(e){return Fi.current.useDeferredValue(e)};Xt.useEffect=function(e,t){return Fi.current.useEffect(e,t)};Xt.useId=function(){return Fi.current.useId()};Xt.useImperativeHandle=function(e,t,n){return Fi.current.useImperativeHandle(e,t,n)};Xt.useInsertionEffect=function(e,t){return Fi.current.useInsertionEffect(e,t)};Xt.useLayoutEffect=function(e,t){return Fi.current.useLayoutEffect(e,t)};Xt.useMemo=function(e,t){return Fi.current.useMemo(e,t)};Xt.useReducer=function(e,t,n){return Fi.current.useReducer(e,t,n)};Xt.useRef=function(e){return Fi.current.useRef(e)};Xt.useState=function(e){return Fi.current.useState(e)};Xt.useSyncExternalStore=function(e,t,n){return Fi.current.useSyncExternalStore(e,t,n)};Xt.useTransition=function(){return Fi.current.useTransition()};Xt.version="18.3.1";g3.exports=Xt;var C=g3.exports;const ht=p3(C),qv=zC({__proto__:null,default:ht},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=C,aA=Symbol.for("react.element"),oA=Symbol.for("react.fragment"),lA=Object.prototype.hasOwnProperty,cA=sA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uA={key:!0,ref:!0,__self:!0,__source:!0};function k3(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)lA.call(t,r)&&!uA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:aA,type:e,key:s,ref:a,props:i,_owner:cA.current}}og.Fragment=oA;og.jsx=k3;og.jsxs=k3;m3.exports=og;var h=m3.exports,E3={exports:{}},Ds={},j3={exports:{}},C3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,q){var se=$.length;$.push(q);e:for(;0<se;){var Ae=se-1>>>1,P=$[Ae];if(0<i(P,q))$[Ae]=q,$[se]=P,se=Ae;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],se=$.pop();if(se!==q){$[0]=se;e:for(var Ae=0,P=$.length,H=P>>>1;Ae<H;){var re=2*(Ae+1)-1,ce=$[re],he=re+1,ke=$[he];if(0>i(ce,se))he<P&&0>i(ke,ce)?($[Ae]=ke,$[he]=se,Ae=he):($[Ae]=ce,$[re]=se,Ae=re);else if(he<P&&0>i(ke,se))$[Ae]=ke,$[he]=se,Ae=he;else break e}}return q}function i($,q){var se=$.sortIndex-q.sortIndex;return se!==0?se:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,m=null,w=3,g=!1,N=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L($){for(var q=n(f);q!==null;){if(q.callback===null)r(f);else if(q.startTime<=$)r(f),q.sortIndex=q.expirationTime,t(c,q);else break;q=n(f)}}function M($){if(k=!1,L($),!N)if(n(c)!==null)N=!0,ye(Y);else{var q=n(f);q!==null&&Q(M,q.startTime-$)}}function Y($,q){N=!1,k&&(k=!1,b(R),R=-1),g=!0;var se=w;try{for(L(q),m=n(c);m!==null&&(!(m.expirationTime>q)||$&&!O());){var Ae=m.callback;if(typeof Ae=="function"){m.callback=null,w=m.priorityLevel;var P=Ae(m.expirationTime<=q);q=e.unstable_now(),typeof P=="function"?m.callback=P:m===n(c)&&r(c),L(q)}else r(c);m=n(c)}if(m!==null)var H=!0;else{var re=n(f);re!==null&&Q(M,re.startTime-q),H=!1}return H}finally{m=null,w=se,g=!1}}var oe=!1,Z=null,R=-1,ee=5,ae=-1;function O(){return!(e.unstable_now()-ae<ee)}function U(){if(Z!==null){var $=e.unstable_now();ae=$;var q=!0;try{q=Z(!0,$)}finally{q?K():(oe=!1,Z=null)}}else oe=!1}var K;if(typeof S=="function")K=function(){S(U)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,xe=J.port2;J.port1.onmessage=U,K=function(){xe.postMessage(null)}}else K=function(){E(U,0)};function ye($){Z=$,oe||(oe=!0,K())}function Q($,q){R=E(function(){$(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){N||g||(N=!0,ye(Y))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(w){case 1:case 2:case 3:var q=3;break;default:q=w}var se=w;w=q;try{return $()}finally{w=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=w;w=$;try{return q()}finally{w=se}},e.unstable_scheduleCallback=function($,q,se){var Ae=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ae+se:Ae):se=Ae,$){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=se+P,$={id:p++,callback:q,priorityLevel:$,startTime:se,expirationTime:P,sortIndex:-1},se>Ae?($.sortIndex=se,t(f,$),n(c)===null&&$===n(f)&&(k?(b(R),R=-1):k=!0,Q(M,se-Ae))):($.sortIndex=P,t(c,$),N||g||(N=!0,ye(Y))),$},e.unstable_shouldYield=O,e.unstable_wrapCallback=function($){var q=w;return function(){var se=w;w=q;try{return $.apply(this,arguments)}finally{w=se}}}})(C3);j3.exports=C3;var dA=j3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA=C,Is=dA;function nt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A3=new Set,Wh={};function Uu(e,t){pf(e,t),pf(e+"Capture",t)}function pf(e,t){for(Wh[e]=t,e=0;e<t.length;e++)A3.add(t[e])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wv=Object.prototype.hasOwnProperty,hA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yx={},wx={};function pA(e){return Wv.call(wx,e)?!0:Wv.call(yx,e)?!1:hA.test(e)?wx[e]=!0:(yx[e]=!0,!1)}function mA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gA(e,t,n,r){if(t===null||typeof t>"u"||mA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $i(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ai[e]=new $i(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ai[t]=new $i(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ai[e]=new $i(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ai[e]=new $i(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ai[e]=new $i(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ai[e]=new $i(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ai[e]=new $i(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ai[e]=new $i(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ai[e]=new $i(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ay=/[\-:]([a-z])/g;function Ly(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ay,Ly);ai[t]=new $i(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ay,Ly);ai[t]=new $i(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ay,Ly);ai[t]=new $i(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ai[e]=new $i(e,1,!1,e.toLowerCase(),null,!1,!1)});ai.xlinkHref=new $i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ai[e]=new $i(e,1,!1,e.toLowerCase(),null,!0,!0)});function Py(e,t,n,r){var i=ai.hasOwnProperty(t)?ai[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gA(t,n,i,r)&&(n=null),r||i===null?pA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var al=fA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pm=Symbol.for("react.element"),Bd=Symbol.for("react.portal"),Ud=Symbol.for("react.fragment"),Ty=Symbol.for("react.strict_mode"),Hv=Symbol.for("react.profiler"),L3=Symbol.for("react.provider"),P3=Symbol.for("react.context"),Iy=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),Gv=Symbol.for("react.suspense_list"),Dy=Symbol.for("react.memo"),rc=Symbol.for("react.lazy"),T3=Symbol.for("react.offscreen"),xx=Symbol.iterator;function oh(e){return e===null||typeof e!="object"?null:(e=xx&&e[xx]||e["@@iterator"],typeof e=="function"?e:null)}var ur=Object.assign,B1;function bh(e){if(B1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B1=t&&t[1]||""}return`
`+B1+e}var U1=!1;function z1(e,t){if(!e||U1)return"";U1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{U1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bh(e):""}function vA(e){switch(e.tag){case 5:return bh(e.type);case 16:return bh("Lazy");case 13:return bh("Suspense");case 19:return bh("SuspenseList");case 0:case 2:case 15:return e=z1(e.type,!1),e;case 11:return e=z1(e.type.render,!1),e;case 1:return e=z1(e.type,!0),e;default:return""}}function Yv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ud:return"Fragment";case Bd:return"Portal";case Hv:return"Profiler";case Ty:return"StrictMode";case Vv:return"Suspense";case Gv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case P3:return(e.displayName||"Context")+".Consumer";case L3:return(e._context.displayName||"Context")+".Provider";case Iy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dy:return t=e.displayName||null,t!==null?t:Yv(e.type)||"Memo";case rc:t=e._payload,e=e._init;try{return Yv(e(t))}catch{}}return null}function yA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yv(t);case 8:return t===Ty?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function I3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wA(e){var t=I3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mm(e){e._valueTracker||(e._valueTracker=wA(e))}function D3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=I3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function h0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kv(e,t){var n=t.checked;return ur({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=jc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function O3(e,t){t=t.checked,t!=null&&Py(e,"checked",t,!1)}function Jv(e,t){O3(e,t);var n=jc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xv(e,t.type,jc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _x(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xv(e,t,n){(t!=="number"||h0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _h=Array.isArray;function ef(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Qv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(nt(91));return ur({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(nt(92));if(_h(n)){if(1<n.length)throw Error(nt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:jc(n)}}function M3(e,t){var n=jc(t.value),r=jc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Nx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function R3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?R3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gm,F3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gm=gm||document.createElement("div"),gm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xA=["Webkit","ms","Moz","O"];Object.keys(jh).forEach(function(e){xA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jh[t]=jh[e]})});function $3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jh.hasOwnProperty(e)&&jh[e]?(""+t).trim():t+"px"}function B3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var bA=ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e2(e,t){if(t){if(bA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(nt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(nt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(nt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(nt(62))}}function t2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n2=null;function Oy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var r2=null,tf=null,nf=null;function kx(e){if(e=yp(e)){if(typeof r2!="function")throw Error(nt(280));var t=e.stateNode;t&&(t=fg(t),r2(e.stateNode,e.type,t))}}function U3(e){tf?nf?nf.push(e):nf=[e]:tf=e}function z3(){if(tf){var e=tf,t=nf;if(nf=tf=null,kx(e),t)for(e=0;e<t.length;e++)kx(t[e])}}function q3(e,t){return e(t)}function W3(){}var q1=!1;function H3(e,t,n){if(q1)return e(t,n);q1=!0;try{return q3(e,t,n)}finally{q1=!1,(tf!==null||nf!==null)&&(W3(),z3())}}function Vh(e,t){var n=e.stateNode;if(n===null)return null;var r=fg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(nt(231,t,typeof n));return n}var i2=!1;if(el)try{var lh={};Object.defineProperty(lh,"passive",{get:function(){i2=!0}}),window.addEventListener("test",lh,lh),window.removeEventListener("test",lh,lh)}catch{i2=!1}function _A(e,t,n,r,i,s,a,l,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Ch=!1,p0=null,m0=!1,s2=null,SA={onError:function(e){Ch=!0,p0=e}};function NA(e,t,n,r,i,s,a,l,c){Ch=!1,p0=null,_A.apply(SA,arguments)}function kA(e,t,n,r,i,s,a,l,c){if(NA.apply(this,arguments),Ch){if(Ch){var f=p0;Ch=!1,p0=null}else throw Error(nt(198));m0||(m0=!0,s2=f)}}function zu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function V3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ex(e){if(zu(e)!==e)throw Error(nt(188))}function EA(e){var t=e.alternate;if(!t){if(t=zu(e),t===null)throw Error(nt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ex(i),e;if(s===r)return Ex(i),t;s=s.sibling}throw Error(nt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(nt(189))}}if(n.alternate!==r)throw Error(nt(190))}if(n.tag!==3)throw Error(nt(188));return n.stateNode.current===n?e:t}function G3(e){return e=EA(e),e!==null?Y3(e):null}function Y3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Y3(e);if(t!==null)return t;e=e.sibling}return null}var K3=Is.unstable_scheduleCallback,jx=Is.unstable_cancelCallback,jA=Is.unstable_shouldYield,CA=Is.unstable_requestPaint,_r=Is.unstable_now,AA=Is.unstable_getCurrentPriorityLevel,My=Is.unstable_ImmediatePriority,J3=Is.unstable_UserBlockingPriority,g0=Is.unstable_NormalPriority,LA=Is.unstable_LowPriority,X3=Is.unstable_IdlePriority,lg=null,ho=null;function PA(e){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(lg,e,void 0,(e.current.flags&128)===128)}catch{}}var La=Math.clz32?Math.clz32:DA,TA=Math.log,IA=Math.LN2;function DA(e){return e>>>=0,e===0?32:31-(TA(e)/IA|0)|0}var vm=64,ym=4194304;function Sh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function v0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Sh(l):(s&=a,s!==0&&(r=Sh(s)))}else a=n&~i,a!==0?r=Sh(a):s!==0&&(r=Sh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-La(t),i=1<<n,r|=e[n],t&=~i;return r}function OA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-La(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=OA(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function a2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Q3(){var e=vm;return vm<<=1,!(vm&4194240)&&(vm=64),e}function W1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-La(t),e[t]=n}function RA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-La(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ry(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-La(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Nn=0;function Z3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var e4,Fy,t4,n4,r4,o2=!1,wm=[],vc=null,yc=null,wc=null,Gh=new Map,Yh=new Map,oc=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cx(e,t){switch(e){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":wc=null;break;case"pointerover":case"pointerout":Gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(t.pointerId)}}function ch(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=yp(t),t!==null&&Fy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $A(e,t,n,r,i){switch(t){case"focusin":return vc=ch(vc,e,t,n,r,i),!0;case"dragenter":return yc=ch(yc,e,t,n,r,i),!0;case"mouseover":return wc=ch(wc,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gh.set(s,ch(Gh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Yh.set(s,ch(Yh.get(s)||null,e,t,n,r,i)),!0}return!1}function i4(e){var t=ku(e.target);if(t!==null){var n=zu(t);if(n!==null){if(t=n.tag,t===13){if(t=V3(n),t!==null){e.blockedOn=t,r4(e.priority,function(){t4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=l2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);n2=r,n.target.dispatchEvent(r),n2=null}else return t=yp(n),t!==null&&Fy(t),e.blockedOn=n,!1;t.shift()}return!0}function Ax(e,t,n){Vm(e)&&n.delete(t)}function BA(){o2=!1,vc!==null&&Vm(vc)&&(vc=null),yc!==null&&Vm(yc)&&(yc=null),wc!==null&&Vm(wc)&&(wc=null),Gh.forEach(Ax),Yh.forEach(Ax)}function uh(e,t){e.blockedOn===t&&(e.blockedOn=null,o2||(o2=!0,Is.unstable_scheduleCallback(Is.unstable_NormalPriority,BA)))}function Kh(e){function t(i){return uh(i,e)}if(0<wm.length){uh(wm[0],e);for(var n=1;n<wm.length;n++){var r=wm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vc!==null&&uh(vc,e),yc!==null&&uh(yc,e),wc!==null&&uh(wc,e),Gh.forEach(t),Yh.forEach(t),n=0;n<oc.length;n++)r=oc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<oc.length&&(n=oc[0],n.blockedOn===null);)i4(n),n.blockedOn===null&&oc.shift()}var rf=al.ReactCurrentBatchConfig,y0=!0;function UA(e,t,n,r){var i=Nn,s=rf.transition;rf.transition=null;try{Nn=1,$y(e,t,n,r)}finally{Nn=i,rf.transition=s}}function zA(e,t,n,r){var i=Nn,s=rf.transition;rf.transition=null;try{Nn=4,$y(e,t,n,r)}finally{Nn=i,rf.transition=s}}function $y(e,t,n,r){if(y0){var i=l2(e,t,n,r);if(i===null)ev(e,t,r,w0,n),Cx(e,r);else if($A(i,e,t,n,r))r.stopPropagation();else if(Cx(e,r),t&4&&-1<FA.indexOf(e)){for(;i!==null;){var s=yp(i);if(s!==null&&e4(s),s=l2(e,t,n,r),s===null&&ev(e,t,r,w0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ev(e,t,r,null,n)}}var w0=null;function l2(e,t,n,r){if(w0=null,e=Oy(r),e=ku(e),e!==null)if(t=zu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=V3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return w0=e,null}function s4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AA()){case My:return 1;case J3:return 4;case g0:case LA:return 16;case X3:return 536870912;default:return 16}default:return 16}}var fc=null,By=null,Gm=null;function a4(){if(Gm)return Gm;var e,t=By,n=t.length,r,i="value"in fc?fc.value:fc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Gm=i.slice(e,1<r?1-r:void 0)}function Ym(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xm(){return!0}function Lx(){return!1}function Os(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xm:Lx,this.isPropagationStopped=Lx,this}return ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xm)},persist:function(){},isPersistent:xm}),t}var Nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uy=Os(Nf),vp=ur({},Nf,{view:0,detail:0}),qA=Os(vp),H1,V1,dh,cg=ur({},vp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dh&&(dh&&e.type==="mousemove"?(H1=e.screenX-dh.screenX,V1=e.screenY-dh.screenY):V1=H1=0,dh=e),H1)},movementY:function(e){return"movementY"in e?e.movementY:V1}}),Px=Os(cg),WA=ur({},cg,{dataTransfer:0}),HA=Os(WA),VA=ur({},vp,{relatedTarget:0}),G1=Os(VA),GA=ur({},Nf,{animationName:0,elapsedTime:0,pseudoElement:0}),YA=Os(GA),KA=ur({},Nf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JA=Os(KA),XA=ur({},Nf,{data:0}),Tx=Os(XA),QA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eL[e])?!!t[e]:!1}function zy(){return tL}var nL=ur({},vp,{key:function(e){if(e.key){var t=QA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ym(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ZA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zy,charCode:function(e){return e.type==="keypress"?Ym(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ym(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rL=Os(nL),iL=ur({},cg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ix=Os(iL),sL=ur({},vp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zy}),aL=Os(sL),oL=ur({},Nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),lL=Os(oL),cL=ur({},cg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uL=Os(cL),dL=[9,13,27,32],qy=el&&"CompositionEvent"in window,Ah=null;el&&"documentMode"in document&&(Ah=document.documentMode);var fL=el&&"TextEvent"in window&&!Ah,o4=el&&(!qy||Ah&&8<Ah&&11>=Ah),Dx=" ",Ox=!1;function l4(e,t){switch(e){case"keyup":return dL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zd=!1;function hL(e,t){switch(e){case"compositionend":return c4(t);case"keypress":return t.which!==32?null:(Ox=!0,Dx);case"textInput":return e=t.data,e===Dx&&Ox?null:e;default:return null}}function pL(e,t){if(zd)return e==="compositionend"||!qy&&l4(e,t)?(e=a4(),Gm=By=fc=null,zd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return o4&&t.locale!=="ko"?null:t.data;default:return null}}var mL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mL[e.type]:t==="textarea"}function u4(e,t,n,r){U3(r),t=x0(t,"onChange"),0<t.length&&(n=new Uy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Lh=null,Jh=null;function gL(e){b4(e,0)}function ug(e){var t=Hd(e);if(D3(t))return e}function vL(e,t){if(e==="change")return t}var d4=!1;if(el){var Y1;if(el){var K1="oninput"in document;if(!K1){var Rx=document.createElement("div");Rx.setAttribute("oninput","return;"),K1=typeof Rx.oninput=="function"}Y1=K1}else Y1=!1;d4=Y1&&(!document.documentMode||9<document.documentMode)}function Fx(){Lh&&(Lh.detachEvent("onpropertychange",f4),Jh=Lh=null)}function f4(e){if(e.propertyName==="value"&&ug(Jh)){var t=[];u4(t,Jh,e,Oy(e)),H3(gL,t)}}function yL(e,t,n){e==="focusin"?(Fx(),Lh=t,Jh=n,Lh.attachEvent("onpropertychange",f4)):e==="focusout"&&Fx()}function wL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ug(Jh)}function xL(e,t){if(e==="click")return ug(t)}function bL(e,t){if(e==="input"||e==="change")return ug(t)}function _L(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:_L;function Xh(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wv.call(t,i)||!Ia(e[i],t[i]))return!1}return!0}function $x(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bx(e,t){var n=$x(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$x(n)}}function h4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?h4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p4(){for(var e=window,t=h0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=h0(e.document)}return t}function Wy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SL(e){var t=p4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&h4(n.ownerDocument.documentElement,n)){if(r!==null&&Wy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Bx(n,s);var a=Bx(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var NL=el&&"documentMode"in document&&11>=document.documentMode,qd=null,c2=null,Ph=null,u2=!1;function Ux(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;u2||qd==null||qd!==h0(r)||(r=qd,"selectionStart"in r&&Wy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ph&&Xh(Ph,r)||(Ph=r,r=x0(c2,"onSelect"),0<r.length&&(t=new Uy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qd)))}function bm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wd={animationend:bm("Animation","AnimationEnd"),animationiteration:bm("Animation","AnimationIteration"),animationstart:bm("Animation","AnimationStart"),transitionend:bm("Transition","TransitionEnd")},J1={},m4={};el&&(m4=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function dg(e){if(J1[e])return J1[e];if(!Wd[e])return e;var t=Wd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in m4)return J1[e]=t[n];return e}var g4=dg("animationend"),v4=dg("animationiteration"),y4=dg("animationstart"),w4=dg("transitionend"),x4=new Map,zx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(e,t){x4.set(e,t),Uu(t,[e])}for(var X1=0;X1<zx.length;X1++){var Q1=zx[X1],kL=Q1.toLowerCase(),EL=Q1[0].toUpperCase()+Q1.slice(1);Ic(kL,"on"+EL)}Ic(g4,"onAnimationEnd");Ic(v4,"onAnimationIteration");Ic(y4,"onAnimationStart");Ic("dblclick","onDoubleClick");Ic("focusin","onFocus");Ic("focusout","onBlur");Ic(w4,"onTransitionEnd");pf("onMouseEnter",["mouseout","mouseover"]);pf("onMouseLeave",["mouseout","mouseover"]);pf("onPointerEnter",["pointerout","pointerover"]);pf("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nh));function qx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kA(r,t,void 0,e),e.currentTarget=null}function b4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;qx(i,l,f),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;qx(i,l,f),s=c}}}if(m0)throw e=s2,m0=!1,s2=null,e}function zn(e,t){var n=t[m2];n===void 0&&(n=t[m2]=new Set);var r=e+"__bubble";n.has(r)||(_4(t,e,2,!1),n.add(r))}function Z1(e,t,n){var r=0;t&&(r|=4),_4(n,e,r,t)}var _m="_reactListening"+Math.random().toString(36).slice(2);function Qh(e){if(!e[_m]){e[_m]=!0,A3.forEach(function(n){n!=="selectionchange"&&(jL.has(n)||Z1(n,!1,e),Z1(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_m]||(t[_m]=!0,Z1("selectionchange",!1,t))}}function _4(e,t,n,r){switch(s4(t)){case 1:var i=UA;break;case 4:i=zA;break;default:i=$y}n=i.bind(null,t,n,e),i=void 0,!i2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ev(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ku(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}H3(function(){var f=s,p=Oy(n),m=[];e:{var w=x4.get(e);if(w!==void 0){var g=Uy,N=e;switch(e){case"keypress":if(Ym(n)===0)break e;case"keydown":case"keyup":g=rL;break;case"focusin":N="focus",g=G1;break;case"focusout":N="blur",g=G1;break;case"beforeblur":case"afterblur":g=G1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Px;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=HA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=aL;break;case g4:case v4:case y4:g=YA;break;case w4:g=lL;break;case"scroll":g=qA;break;case"wheel":g=uL;break;case"copy":case"cut":case"paste":g=JA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ix}var k=(t&4)!==0,E=!k&&e==="scroll",b=k?w!==null?w+"Capture":null:w;k=[];for(var S=f,L;S!==null;){L=S;var M=L.stateNode;if(L.tag===5&&M!==null&&(L=M,b!==null&&(M=Vh(S,b),M!=null&&k.push(Zh(S,M,L)))),E)break;S=S.return}0<k.length&&(w=new g(w,N,null,n,p),m.push({event:w,listeners:k}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",w&&n!==n2&&(N=n.relatedTarget||n.fromElement)&&(ku(N)||N[tl]))break e;if((g||w)&&(w=p.window===p?p:(w=p.ownerDocument)?w.defaultView||w.parentWindow:window,g?(N=n.relatedTarget||n.toElement,g=f,N=N?ku(N):null,N!==null&&(E=zu(N),N!==E||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=f),g!==N)){if(k=Px,M="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(k=Ix,M="onPointerLeave",b="onPointerEnter",S="pointer"),E=g==null?w:Hd(g),L=N==null?w:Hd(N),w=new k(M,S+"leave",g,n,p),w.target=E,w.relatedTarget=L,M=null,ku(p)===f&&(k=new k(b,S+"enter",N,n,p),k.target=L,k.relatedTarget=E,M=k),E=M,g&&N)t:{for(k=g,b=N,S=0,L=k;L;L=Pd(L))S++;for(L=0,M=b;M;M=Pd(M))L++;for(;0<S-L;)k=Pd(k),S--;for(;0<L-S;)b=Pd(b),L--;for(;S--;){if(k===b||b!==null&&k===b.alternate)break t;k=Pd(k),b=Pd(b)}k=null}else k=null;g!==null&&Wx(m,w,g,k,!1),N!==null&&E!==null&&Wx(m,E,N,k,!0)}}e:{if(w=f?Hd(f):window,g=w.nodeName&&w.nodeName.toLowerCase(),g==="select"||g==="input"&&w.type==="file")var Y=vL;else if(Mx(w))if(d4)Y=bL;else{Y=wL;var oe=yL}else(g=w.nodeName)&&g.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(Y=xL);if(Y&&(Y=Y(e,f))){u4(m,Y,n,p);break e}oe&&oe(e,w,f),e==="focusout"&&(oe=w._wrapperState)&&oe.controlled&&w.type==="number"&&Xv(w,"number",w.value)}switch(oe=f?Hd(f):window,e){case"focusin":(Mx(oe)||oe.contentEditable==="true")&&(qd=oe,c2=f,Ph=null);break;case"focusout":Ph=c2=qd=null;break;case"mousedown":u2=!0;break;case"contextmenu":case"mouseup":case"dragend":u2=!1,Ux(m,n,p);break;case"selectionchange":if(NL)break;case"keydown":case"keyup":Ux(m,n,p)}var Z;if(qy)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else zd?l4(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(o4&&n.locale!=="ko"&&(zd||R!=="onCompositionStart"?R==="onCompositionEnd"&&zd&&(Z=a4()):(fc=p,By="value"in fc?fc.value:fc.textContent,zd=!0)),oe=x0(f,R),0<oe.length&&(R=new Tx(R,e,null,n,p),m.push({event:R,listeners:oe}),Z?R.data=Z:(Z=c4(n),Z!==null&&(R.data=Z)))),(Z=fL?hL(e,n):pL(e,n))&&(f=x0(f,"onBeforeInput"),0<f.length&&(p=new Tx("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=Z))}b4(m,t)})}function Zh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function x0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vh(e,n),s!=null&&r.unshift(Zh(e,s,i)),s=Vh(e,t),s!=null&&r.push(Zh(e,s,i))),e=e.return}return r}function Pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wx(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=Vh(n,s),c!=null&&a.unshift(Zh(n,c,l))):i||(c=Vh(n,s),c!=null&&a.push(Zh(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var CL=/\r\n?/g,AL=/\u0000|\uFFFD/g;function Hx(e){return(typeof e=="string"?e:""+e).replace(CL,`
`).replace(AL,"")}function Sm(e,t,n){if(t=Hx(t),Hx(e)!==t&&n)throw Error(nt(425))}function b0(){}var d2=null,f2=null;function h2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var p2=typeof setTimeout=="function"?setTimeout:void 0,LL=typeof clearTimeout=="function"?clearTimeout:void 0,Vx=typeof Promise=="function"?Promise:void 0,PL=typeof queueMicrotask=="function"?queueMicrotask:typeof Vx<"u"?function(e){return Vx.resolve(null).then(e).catch(TL)}:p2;function TL(e){setTimeout(function(){throw e})}function tv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Kh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kh(t)}function xc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var kf=Math.random().toString(36).slice(2),oo="__reactFiber$"+kf,ep="__reactProps$"+kf,tl="__reactContainer$"+kf,m2="__reactEvents$"+kf,IL="__reactListeners$"+kf,DL="__reactHandles$"+kf;function ku(e){var t=e[oo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tl]||n[oo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gx(e);e!==null;){if(n=e[oo])return n;e=Gx(e)}return t}e=n,n=e.parentNode}return null}function yp(e){return e=e[oo]||e[tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(nt(33))}function fg(e){return e[ep]||null}var g2=[],Vd=-1;function Dc(e){return{current:e}}function Hn(e){0>Vd||(e.current=g2[Vd],g2[Vd]=null,Vd--)}function $n(e,t){Vd++,g2[Vd]=e.current,e.current=t}var Cc={},Ni=Dc(Cc),as=Dc(!1),Ou=Cc;function mf(e,t){var n=e.type.contextTypes;if(!n)return Cc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function os(e){return e=e.childContextTypes,e!=null}function _0(){Hn(as),Hn(Ni)}function Yx(e,t,n){if(Ni.current!==Cc)throw Error(nt(168));$n(Ni,t),$n(as,n)}function S4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(nt(108,yA(e)||"Unknown",i));return ur({},n,r)}function S0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cc,Ou=Ni.current,$n(Ni,e),$n(as,as.current),!0}function Kx(e,t,n){var r=e.stateNode;if(!r)throw Error(nt(169));n?(e=S4(e,t,Ou),r.__reactInternalMemoizedMergedChildContext=e,Hn(as),Hn(Ni),$n(Ni,e)):Hn(as),$n(as,n)}var Yo=null,hg=!1,nv=!1;function N4(e){Yo===null?Yo=[e]:Yo.push(e)}function OL(e){hg=!0,N4(e)}function Oc(){if(!nv&&Yo!==null){nv=!0;var e=0,t=Nn;try{var n=Yo;for(Nn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yo=null,hg=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(e+1)),K3(My,Oc),i}finally{Nn=t,nv=!1}}return null}var Gd=[],Yd=0,N0=null,k0=0,Qs=[],Zs=0,Mu=null,Jo=1,Xo="";function gu(e,t){Gd[Yd++]=k0,Gd[Yd++]=N0,N0=e,k0=t}function k4(e,t,n){Qs[Zs++]=Jo,Qs[Zs++]=Xo,Qs[Zs++]=Mu,Mu=e;var r=Jo;e=Xo;var i=32-La(r)-1;r&=~(1<<i),n+=1;var s=32-La(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jo=1<<32-La(t)+i|n<<i|r,Xo=s+e}else Jo=1<<s|n<<i|r,Xo=e}function Hy(e){e.return!==null&&(gu(e,1),k4(e,1,0))}function Vy(e){for(;e===N0;)N0=Gd[--Yd],Gd[Yd]=null,k0=Gd[--Yd],Gd[Yd]=null;for(;e===Mu;)Mu=Qs[--Zs],Qs[Zs]=null,Xo=Qs[--Zs],Qs[Zs]=null,Jo=Qs[--Zs],Qs[Zs]=null}var Ts=null,Ls=null,tr=!1,Ca=null;function E4(e,t){var n=ea(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Jx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ts=e,Ls=xc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ts=e,Ls=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mu!==null?{id:Jo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ea(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ts=e,Ls=null,!0):!1;default:return!1}}function v2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function y2(e){if(tr){var t=Ls;if(t){var n=t;if(!Jx(e,t)){if(v2(e))throw Error(nt(418));t=xc(n.nextSibling);var r=Ts;t&&Jx(e,t)?E4(r,n):(e.flags=e.flags&-4097|2,tr=!1,Ts=e)}}else{if(v2(e))throw Error(nt(418));e.flags=e.flags&-4097|2,tr=!1,Ts=e}}}function Xx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ts=e}function Nm(e){if(e!==Ts)return!1;if(!tr)return Xx(e),tr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!h2(e.type,e.memoizedProps)),t&&(t=Ls)){if(v2(e))throw j4(),Error(nt(418));for(;t;)E4(e,t),t=xc(t.nextSibling)}if(Xx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(nt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ls=xc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ls=null}}else Ls=Ts?xc(e.stateNode.nextSibling):null;return!0}function j4(){for(var e=Ls;e;)e=xc(e.nextSibling)}function gf(){Ls=Ts=null,tr=!1}function Gy(e){Ca===null?Ca=[e]:Ca.push(e)}var ML=al.ReactCurrentBatchConfig;function fh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(nt(309));var r=n.stateNode}if(!r)throw Error(nt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(nt(284));if(!n._owner)throw Error(nt(290,e))}return e}function km(e,t){throw e=Object.prototype.toString.call(t),Error(nt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qx(e){var t=e._init;return t(e._payload)}function C4(e){function t(b,S){if(e){var L=b.deletions;L===null?(b.deletions=[S],b.flags|=16):L.push(S)}}function n(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=Nc(b,S),b.index=0,b.sibling=null,b}function s(b,S,L){return b.index=L,e?(L=b.alternate,L!==null?(L=L.index,L<S?(b.flags|=2,S):L):(b.flags|=2,S)):(b.flags|=1048576,S)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,S,L,M){return S===null||S.tag!==6?(S=cv(L,b.mode,M),S.return=b,S):(S=i(S,L),S.return=b,S)}function c(b,S,L,M){var Y=L.type;return Y===Ud?p(b,S,L.props.children,M,L.key):S!==null&&(S.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===rc&&Qx(Y)===S.type)?(M=i(S,L.props),M.ref=fh(b,S,L),M.return=b,M):(M=t0(L.type,L.key,L.props,null,b.mode,M),M.ref=fh(b,S,L),M.return=b,M)}function f(b,S,L,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==L.containerInfo||S.stateNode.implementation!==L.implementation?(S=uv(L,b.mode,M),S.return=b,S):(S=i(S,L.children||[]),S.return=b,S)}function p(b,S,L,M,Y){return S===null||S.tag!==7?(S=Pu(L,b.mode,M,Y),S.return=b,S):(S=i(S,L),S.return=b,S)}function m(b,S,L){if(typeof S=="string"&&S!==""||typeof S=="number")return S=cv(""+S,b.mode,L),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case pm:return L=t0(S.type,S.key,S.props,null,b.mode,L),L.ref=fh(b,null,S),L.return=b,L;case Bd:return S=uv(S,b.mode,L),S.return=b,S;case rc:var M=S._init;return m(b,M(S._payload),L)}if(_h(S)||oh(S))return S=Pu(S,b.mode,L,null),S.return=b,S;km(b,S)}return null}function w(b,S,L,M){var Y=S!==null?S.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return Y!==null?null:l(b,S,""+L,M);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case pm:return L.key===Y?c(b,S,L,M):null;case Bd:return L.key===Y?f(b,S,L,M):null;case rc:return Y=L._init,w(b,S,Y(L._payload),M)}if(_h(L)||oh(L))return Y!==null?null:p(b,S,L,M,null);km(b,L)}return null}function g(b,S,L,M,Y){if(typeof M=="string"&&M!==""||typeof M=="number")return b=b.get(L)||null,l(S,b,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case pm:return b=b.get(M.key===null?L:M.key)||null,c(S,b,M,Y);case Bd:return b=b.get(M.key===null?L:M.key)||null,f(S,b,M,Y);case rc:var oe=M._init;return g(b,S,L,oe(M._payload),Y)}if(_h(M)||oh(M))return b=b.get(L)||null,p(S,b,M,Y,null);km(S,M)}return null}function N(b,S,L,M){for(var Y=null,oe=null,Z=S,R=S=0,ee=null;Z!==null&&R<L.length;R++){Z.index>R?(ee=Z,Z=null):ee=Z.sibling;var ae=w(b,Z,L[R],M);if(ae===null){Z===null&&(Z=ee);break}e&&Z&&ae.alternate===null&&t(b,Z),S=s(ae,S,R),oe===null?Y=ae:oe.sibling=ae,oe=ae,Z=ee}if(R===L.length)return n(b,Z),tr&&gu(b,R),Y;if(Z===null){for(;R<L.length;R++)Z=m(b,L[R],M),Z!==null&&(S=s(Z,S,R),oe===null?Y=Z:oe.sibling=Z,oe=Z);return tr&&gu(b,R),Y}for(Z=r(b,Z);R<L.length;R++)ee=g(Z,b,R,L[R],M),ee!==null&&(e&&ee.alternate!==null&&Z.delete(ee.key===null?R:ee.key),S=s(ee,S,R),oe===null?Y=ee:oe.sibling=ee,oe=ee);return e&&Z.forEach(function(O){return t(b,O)}),tr&&gu(b,R),Y}function k(b,S,L,M){var Y=oh(L);if(typeof Y!="function")throw Error(nt(150));if(L=Y.call(L),L==null)throw Error(nt(151));for(var oe=Y=null,Z=S,R=S=0,ee=null,ae=L.next();Z!==null&&!ae.done;R++,ae=L.next()){Z.index>R?(ee=Z,Z=null):ee=Z.sibling;var O=w(b,Z,ae.value,M);if(O===null){Z===null&&(Z=ee);break}e&&Z&&O.alternate===null&&t(b,Z),S=s(O,S,R),oe===null?Y=O:oe.sibling=O,oe=O,Z=ee}if(ae.done)return n(b,Z),tr&&gu(b,R),Y;if(Z===null){for(;!ae.done;R++,ae=L.next())ae=m(b,ae.value,M),ae!==null&&(S=s(ae,S,R),oe===null?Y=ae:oe.sibling=ae,oe=ae);return tr&&gu(b,R),Y}for(Z=r(b,Z);!ae.done;R++,ae=L.next())ae=g(Z,b,R,ae.value,M),ae!==null&&(e&&ae.alternate!==null&&Z.delete(ae.key===null?R:ae.key),S=s(ae,S,R),oe===null?Y=ae:oe.sibling=ae,oe=ae);return e&&Z.forEach(function(U){return t(b,U)}),tr&&gu(b,R),Y}function E(b,S,L,M){if(typeof L=="object"&&L!==null&&L.type===Ud&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case pm:e:{for(var Y=L.key,oe=S;oe!==null;){if(oe.key===Y){if(Y=L.type,Y===Ud){if(oe.tag===7){n(b,oe.sibling),S=i(oe,L.props.children),S.return=b,b=S;break e}}else if(oe.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===rc&&Qx(Y)===oe.type){n(b,oe.sibling),S=i(oe,L.props),S.ref=fh(b,oe,L),S.return=b,b=S;break e}n(b,oe);break}else t(b,oe);oe=oe.sibling}L.type===Ud?(S=Pu(L.props.children,b.mode,M,L.key),S.return=b,b=S):(M=t0(L.type,L.key,L.props,null,b.mode,M),M.ref=fh(b,S,L),M.return=b,b=M)}return a(b);case Bd:e:{for(oe=L.key;S!==null;){if(S.key===oe)if(S.tag===4&&S.stateNode.containerInfo===L.containerInfo&&S.stateNode.implementation===L.implementation){n(b,S.sibling),S=i(S,L.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else t(b,S);S=S.sibling}S=uv(L,b.mode,M),S.return=b,b=S}return a(b);case rc:return oe=L._init,E(b,S,oe(L._payload),M)}if(_h(L))return N(b,S,L,M);if(oh(L))return k(b,S,L,M);km(b,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,S!==null&&S.tag===6?(n(b,S.sibling),S=i(S,L),S.return=b,b=S):(n(b,S),S=cv(L,b.mode,M),S.return=b,b=S),a(b)):n(b,S)}return E}var vf=C4(!0),A4=C4(!1),E0=Dc(null),j0=null,Kd=null,Yy=null;function Ky(){Yy=Kd=j0=null}function Jy(e){var t=E0.current;Hn(E0),e._currentValue=t}function w2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sf(e,t){j0=e,Yy=Kd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ss=!0),e.firstContext=null)}function na(e){var t=e._currentValue;if(Yy!==e)if(e={context:e,memoizedValue:t,next:null},Kd===null){if(j0===null)throw Error(nt(308));Kd=e,j0.dependencies={lanes:0,firstContext:e}}else Kd=Kd.next=e;return t}var Eu=null;function Xy(e){Eu===null?Eu=[e]:Eu.push(e)}function L4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Xy(t)):(n.next=i.next,i.next=n),t.interleaved=n,nl(e,r)}function nl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ic=!1;function Qy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,cn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,nl(e,n)}return i=r.interleaved,i===null?(t.next=t,Xy(r)):(t.next=i.next,i.next=t),r.interleaved=t,nl(e,n)}function Km(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ry(e,n)}}function Zx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function C0(e,t,n,r){var i=e.updateQueue;ic=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,p=f=c=null,l=s;do{var w=l.lane,g=l.eventTime;if((r&w)===w){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,k=l;switch(w=t,g=n,k.tag){case 1:if(N=k.payload,typeof N=="function"){m=N.call(g,m,w);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,w=typeof N=="function"?N.call(g,m,w):N,w==null)break e;m=ur({},m,w);break e;case 2:ic=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,w=i.effects,w===null?i.effects=[l]:w.push(l))}else g={eventTime:g,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=g,c=m):p=p.next=g,a|=w;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;w=l,l=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Fu|=a,e.lanes=a,e.memoizedState=m}}function eb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(nt(191,i));i.call(r)}}}var wp={},po=Dc(wp),tp=Dc(wp),np=Dc(wp);function ju(e){if(e===wp)throw Error(nt(174));return e}function Zy(e,t){switch($n(np,t),$n(tp,e),$n(po,wp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zv(t,e)}Hn(po),$n(po,t)}function yf(){Hn(po),Hn(tp),Hn(np)}function T4(e){ju(np.current);var t=ju(po.current),n=Zv(t,e.type);t!==n&&($n(tp,e),$n(po,n))}function e5(e){tp.current===e&&(Hn(po),Hn(tp))}var or=Dc(0);function A0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rv=[];function t5(){for(var e=0;e<rv.length;e++)rv[e]._workInProgressVersionPrimary=null;rv.length=0}var Jm=al.ReactCurrentDispatcher,iv=al.ReactCurrentBatchConfig,Ru=0,cr=null,Mr=null,Hr=null,L0=!1,Th=!1,rp=0,RL=0;function gi(){throw Error(nt(321))}function n5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ia(e[n],t[n]))return!1;return!0}function r5(e,t,n,r,i,s){if(Ru=s,cr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jm.current=e===null||e.memoizedState===null?UL:zL,e=n(r,i),Th){s=0;do{if(Th=!1,rp=0,25<=s)throw Error(nt(301));s+=1,Hr=Mr=null,t.updateQueue=null,Jm.current=qL,e=n(r,i)}while(Th)}if(Jm.current=P0,t=Mr!==null&&Mr.next!==null,Ru=0,Hr=Mr=cr=null,L0=!1,t)throw Error(nt(300));return e}function i5(){var e=rp!==0;return rp=0,e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?cr.memoizedState=Hr=e:Hr=Hr.next=e,Hr}function ra(){if(Mr===null){var e=cr.alternate;e=e!==null?e.memoizedState:null}else e=Mr.next;var t=Hr===null?cr.memoizedState:Hr.next;if(t!==null)Hr=t,Mr=e;else{if(e===null)throw Error(nt(310));Mr=e,e={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Hr===null?cr.memoizedState=Hr=e:Hr=Hr.next=e}return Hr}function ip(e,t){return typeof t=="function"?t(e):t}function sv(e){var t=ra(),n=t.queue;if(n===null)throw Error(nt(311));n.lastRenderedReducer=e;var r=Mr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,f=s;do{var p=f.lane;if((Ru&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,cr.lanes|=p,Fu|=p}f=f.next}while(f!==null&&f!==s);c===null?a=r:c.next=l,Ia(r,t.memoizedState)||(ss=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,cr.lanes|=s,Fu|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function av(e){var t=ra(),n=t.queue;if(n===null)throw Error(nt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Ia(s,t.memoizedState)||(ss=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function I4(){}function D4(e,t){var n=cr,r=ra(),i=t(),s=!Ia(r.memoizedState,i);if(s&&(r.memoizedState=i,ss=!0),r=r.queue,s5(R4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Hr!==null&&Hr.memoizedState.tag&1){if(n.flags|=2048,sp(9,M4.bind(null,n,r,i,t),void 0,null),Kr===null)throw Error(nt(349));Ru&30||O4(n,t,i)}return i}function O4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=cr.updateQueue,t===null?(t={lastEffect:null,stores:null},cr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function M4(e,t,n,r){t.value=n,t.getSnapshot=r,F4(t)&&$4(e)}function R4(e,t,n){return n(function(){F4(t)&&$4(e)})}function F4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ia(e,n)}catch{return!0}}function $4(e){var t=nl(e,1);t!==null&&Pa(t,e,1,-1)}function tb(e){var t=ao();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:e},t.queue=e,e=e.dispatch=BL.bind(null,cr,e),[t.memoizedState,e]}function sp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=cr.updateQueue,t===null?(t={lastEffect:null,stores:null},cr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function B4(){return ra().memoizedState}function Xm(e,t,n,r){var i=ao();cr.flags|=e,i.memoizedState=sp(1|t,n,void 0,r===void 0?null:r)}function pg(e,t,n,r){var i=ra();r=r===void 0?null:r;var s=void 0;if(Mr!==null){var a=Mr.memoizedState;if(s=a.destroy,r!==null&&n5(r,a.deps)){i.memoizedState=sp(t,n,s,r);return}}cr.flags|=e,i.memoizedState=sp(1|t,n,s,r)}function nb(e,t){return Xm(8390656,8,e,t)}function s5(e,t){return pg(2048,8,e,t)}function U4(e,t){return pg(4,2,e,t)}function z4(e,t){return pg(4,4,e,t)}function q4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function W4(e,t,n){return n=n!=null?n.concat([e]):null,pg(4,4,q4.bind(null,t,e),n)}function a5(){}function H4(e,t){var n=ra();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&n5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function V4(e,t){var n=ra();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&n5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function G4(e,t,n){return Ru&21?(Ia(n,t)||(n=Q3(),cr.lanes|=n,Fu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ss=!0),e.memoizedState=n)}function FL(e,t){var n=Nn;Nn=n!==0&&4>n?n:4,e(!0);var r=iv.transition;iv.transition={};try{e(!1),t()}finally{Nn=n,iv.transition=r}}function Y4(){return ra().memoizedState}function $L(e,t,n){var r=Sc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K4(e))J4(t,n);else if(n=L4(e,t,n,r),n!==null){var i=Mi();Pa(n,e,r,i),X4(n,t,r)}}function BL(e,t,n){var r=Sc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K4(e))J4(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Ia(l,a)){var c=t.interleaved;c===null?(i.next=i,Xy(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=L4(e,t,i,r),n!==null&&(i=Mi(),Pa(n,e,r,i),X4(n,t,r))}}function K4(e){var t=e.alternate;return e===cr||t!==null&&t===cr}function J4(e,t){Th=L0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function X4(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ry(e,n)}}var P0={readContext:na,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},UL={readContext:na,useCallback:function(e,t){return ao().memoizedState=[e,t===void 0?null:t],e},useContext:na,useEffect:nb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xm(4194308,4,q4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xm(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$L.bind(null,cr,e),[r.memoizedState,e]},useRef:function(e){var t=ao();return e={current:e},t.memoizedState=e},useState:tb,useDebugValue:a5,useDeferredValue:function(e){return ao().memoizedState=e},useTransition:function(){var e=tb(!1),t=e[0];return e=FL.bind(null,e[1]),ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=cr,i=ao();if(tr){if(n===void 0)throw Error(nt(407));n=n()}else{if(n=t(),Kr===null)throw Error(nt(349));Ru&30||O4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,nb(R4.bind(null,r,s,e),[e]),r.flags|=2048,sp(9,M4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ao(),t=Kr.identifierPrefix;if(tr){var n=Xo,r=Jo;n=(r&~(1<<32-La(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=RL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zL={readContext:na,useCallback:H4,useContext:na,useEffect:s5,useImperativeHandle:W4,useInsertionEffect:U4,useLayoutEffect:z4,useMemo:V4,useReducer:sv,useRef:B4,useState:function(){return sv(ip)},useDebugValue:a5,useDeferredValue:function(e){var t=ra();return G4(t,Mr.memoizedState,e)},useTransition:function(){var e=sv(ip)[0],t=ra().memoizedState;return[e,t]},useMutableSource:I4,useSyncExternalStore:D4,useId:Y4,unstable_isNewReconciler:!1},qL={readContext:na,useCallback:H4,useContext:na,useEffect:s5,useImperativeHandle:W4,useInsertionEffect:U4,useLayoutEffect:z4,useMemo:V4,useReducer:av,useRef:B4,useState:function(){return av(ip)},useDebugValue:a5,useDeferredValue:function(e){var t=ra();return Mr===null?t.memoizedState=e:G4(t,Mr.memoizedState,e)},useTransition:function(){var e=av(ip)[0],t=ra().memoizedState;return[e,t]},useMutableSource:I4,useSyncExternalStore:D4,useId:Y4,unstable_isNewReconciler:!1};function Na(e,t){if(e&&e.defaultProps){t=ur({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function x2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ur({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mg={isMounted:function(e){return(e=e._reactInternals)?zu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mi(),i=Sc(e),s=Qo(r,i);s.payload=t,n!=null&&(s.callback=n),t=bc(e,s,i),t!==null&&(Pa(t,e,i,r),Km(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mi(),i=Sc(e),s=Qo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=bc(e,s,i),t!==null&&(Pa(t,e,i,r),Km(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mi(),r=Sc(e),i=Qo(n,r);i.tag=2,t!=null&&(i.callback=t),t=bc(e,i,r),t!==null&&(Pa(t,e,r,n),Km(t,e,r))}};function rb(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Xh(n,r)||!Xh(i,s):!0}function Q4(e,t,n){var r=!1,i=Cc,s=t.contextType;return typeof s=="object"&&s!==null?s=na(s):(i=os(t)?Ou:Ni.current,r=t.contextTypes,s=(r=r!=null)?mf(e,i):Cc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ib(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mg.enqueueReplaceState(t,t.state,null)}function b2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qy(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=na(s):(s=os(t)?Ou:Ni.current,i.context=mf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(x2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&mg.enqueueReplaceState(i,i.state,null),C0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function wf(e,t){try{var n="",r=t;do n+=vA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function ov(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var WL=typeof WeakMap=="function"?WeakMap:Map;function Z4(e,t,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){I0||(I0=!0,T2=r),_2(e,t)},n}function eS(e,t,n){n=Qo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_2(e,t),typeof r!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function sb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new WL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=iP.bind(null,e,t,n),t.then(e,e))}function ab(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ob(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qo(-1,1),t.tag=2,bc(n,t,1))),n.lanes|=1),e)}var HL=al.ReactCurrentOwner,ss=!1;function Di(e,t,n,r){t.child=e===null?A4(t,null,n,r):vf(t,e.child,n,r)}function lb(e,t,n,r,i){n=n.render;var s=t.ref;return sf(t,i),r=r5(e,t,n,r,s,i),n=i5(),e!==null&&!ss?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(tr&&n&&Hy(t),t.flags|=1,Di(e,t,r,i),t.child)}function cb(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!p5(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,tS(e,t,s,r,i)):(e=t0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xh,n(a,r)&&e.ref===t.ref)return rl(e,t,i)}return t.flags|=1,e=Nc(s,r),e.ref=t.ref,e.return=t,t.child=e}function tS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Xh(s,r)&&e.ref===t.ref)if(ss=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ss=!0);else return t.lanes=e.lanes,rl(e,t,i)}return S2(e,t,n,r,i)}function nS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Xd,As),As|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$n(Xd,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$n(Xd,As),As|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,$n(Xd,As),As|=r;return Di(e,t,i,n),t.child}function rS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function S2(e,t,n,r,i){var s=os(n)?Ou:Ni.current;return s=mf(t,s),sf(t,i),n=r5(e,t,n,r,s,i),r=i5(),e!==null&&!ss?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(tr&&r&&Hy(t),t.flags|=1,Di(e,t,n,i),t.child)}function ub(e,t,n,r,i){if(os(n)){var s=!0;S0(t)}else s=!1;if(sf(t,i),t.stateNode===null)Qm(e,t),Q4(t,n,r),b2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=na(f):(f=os(n)?Ou:Ni.current,f=mf(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==f)&&ib(t,a,r,f),ic=!1;var w=t.memoizedState;a.state=w,C0(t,r,a,i),c=t.memoizedState,l!==r||w!==c||as.current||ic?(typeof p=="function"&&(x2(t,n,p,r),c=t.memoizedState),(l=ic||rb(t,n,l,r,w,c,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,P4(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Na(t.type,l),a.props=f,m=t.pendingProps,w=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=na(c):(c=os(n)?Ou:Ni.current,c=mf(t,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||w!==c)&&ib(t,a,r,c),ic=!1,w=t.memoizedState,a.state=w,C0(t,r,a,i);var N=t.memoizedState;l!==m||w!==N||as.current||ic?(typeof g=="function"&&(x2(t,n,g,r),N=t.memoizedState),(f=ic||rb(t,n,f,r,w,N,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),a.props=r,a.state=N,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return N2(e,t,n,r,s,i)}function N2(e,t,n,r,i,s){rS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Kx(t,n,!1),rl(e,t,s);r=t.stateNode,HL.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=vf(t,e.child,null,s),t.child=vf(t,null,l,s)):Di(e,t,l,s),t.memoizedState=r.state,i&&Kx(t,n,!0),t.child}function iS(e){var t=e.stateNode;t.pendingContext?Yx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yx(e,t.context,!1),Zy(e,t.containerInfo)}function db(e,t,n,r,i){return gf(),Gy(i),t.flags|=256,Di(e,t,n,r),t.child}var k2={dehydrated:null,treeContext:null,retryLane:0};function E2(e){return{baseLanes:e,cachePool:null,transitions:null}}function sS(e,t,n){var r=t.pendingProps,i=or.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),$n(or,i&1),e===null)return y2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=yg(a,r,0,null),e=Pu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=E2(n),t.memoizedState=k2,e):o5(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return VL(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Nc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Nc(l,s):(s=Pu(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?E2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=k2,r}return s=e.child,e=s.sibling,r=Nc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function o5(e,t){return t=yg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Em(e,t,n,r){return r!==null&&Gy(r),vf(t,e.child,null,n),e=o5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function VL(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=ov(Error(nt(422))),Em(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=yg({mode:"visible",children:r.children},i,0,null),s=Pu(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&vf(t,e.child,null,a),t.child.memoizedState=E2(a),t.memoizedState=k2,s);if(!(t.mode&1))return Em(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(nt(419)),r=ov(s,r,void 0),Em(e,t,a,r)}if(l=(a&e.childLanes)!==0,ss||l){if(r=Kr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nl(e,i),Pa(r,e,i,-1))}return h5(),r=ov(Error(nt(421))),Em(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=sP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ls=xc(i.nextSibling),Ts=t,tr=!0,Ca=null,e!==null&&(Qs[Zs++]=Jo,Qs[Zs++]=Xo,Qs[Zs++]=Mu,Jo=e.id,Xo=e.overflow,Mu=t),t=o5(t,r.children),t.flags|=4096,t)}function fb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),w2(e.return,t,n)}function lv(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function aS(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Di(e,t,r.children,n),r=or.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fb(e,n,t);else if(e.tag===19)fb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($n(or,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&A0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),lv(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&A0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}lv(t,!0,n,null,s);break;case"together":lv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(nt(153));if(t.child!==null){for(e=t.child,n=Nc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function GL(e,t,n){switch(t.tag){case 3:iS(t),gf();break;case 5:T4(t);break;case 1:os(t.type)&&S0(t);break;case 4:Zy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;$n(E0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?($n(or,or.current&1),t.flags|=128,null):n&t.child.childLanes?sS(e,t,n):($n(or,or.current&1),e=rl(e,t,n),e!==null?e.sibling:null);$n(or,or.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return aS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$n(or,or.current),r)break;return null;case 22:case 23:return t.lanes=0,nS(e,t,n)}return rl(e,t,n)}var oS,j2,lS,cS;oS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};j2=function(){};lS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ju(po.current);var s=null;switch(n){case"input":i=Kv(e,i),r=Kv(e,r),s=[];break;case"select":i=ur({},i,{value:void 0}),r=ur({},r,{value:void 0}),s=[];break;case"textarea":i=Qv(e,i),r=Qv(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=b0)}e2(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Wh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Wh.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&zn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};cS=function(e,t,n,r){n!==r&&(t.flags|=4)};function hh(e,t){if(!tr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function YL(e,t,n){var r=t.pendingProps;switch(Vy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(t),null;case 1:return os(t.type)&&_0(),vi(t),null;case 3:return r=t.stateNode,yf(),Hn(as),Hn(Ni),t5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Nm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ca!==null&&(O2(Ca),Ca=null))),j2(e,t),vi(t),null;case 5:e5(t);var i=ju(np.current);if(n=t.type,e!==null&&t.stateNode!=null)lS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(nt(166));return vi(t),null}if(e=ju(po.current),Nm(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[oo]=t,r[ep]=s,e=(t.mode&1)!==0,n){case"dialog":zn("cancel",r),zn("close",r);break;case"iframe":case"object":case"embed":zn("load",r);break;case"video":case"audio":for(i=0;i<Nh.length;i++)zn(Nh[i],r);break;case"source":zn("error",r);break;case"img":case"image":case"link":zn("error",r),zn("load",r);break;case"details":zn("toggle",r);break;case"input":bx(r,s),zn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zn("invalid",r);break;case"textarea":Sx(r,s),zn("invalid",r)}e2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Sm(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Sm(r.textContent,l,e),i=["children",""+l]):Wh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&zn("scroll",r)}switch(n){case"input":mm(r),_x(r,s,!0);break;case"textarea":mm(r),Nx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=b0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=R3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[oo]=t,e[ep]=r,oS(e,t,!1,!1),t.stateNode=e;e:{switch(a=t2(n,r),n){case"dialog":zn("cancel",e),zn("close",e),i=r;break;case"iframe":case"object":case"embed":zn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nh.length;i++)zn(Nh[i],e);i=r;break;case"source":zn("error",e),i=r;break;case"img":case"image":case"link":zn("error",e),zn("load",e),i=r;break;case"details":zn("toggle",e),i=r;break;case"input":bx(e,r),i=Kv(e,r),zn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ur({},r,{value:void 0}),zn("invalid",e);break;case"textarea":Sx(e,r),i=Qv(e,r),zn("invalid",e);break;default:i=r}e2(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?B3(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F3(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Hh(e,c):typeof c=="number"&&Hh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&zn("scroll",e):c!=null&&Py(e,s,c,a))}switch(n){case"input":mm(e),_x(e,r,!1);break;case"textarea":mm(e),Nx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+jc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ef(e,!!r.multiple,s,!1):r.defaultValue!=null&&ef(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=b0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vi(t),null;case 6:if(e&&t.stateNode!=null)cS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(nt(166));if(n=ju(np.current),ju(po.current),Nm(t)){if(r=t.stateNode,n=t.memoizedProps,r[oo]=t,(s=r.nodeValue!==n)&&(e=Ts,e!==null))switch(e.tag){case 3:Sm(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sm(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oo]=t,t.stateNode=r}return vi(t),null;case 13:if(Hn(or),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tr&&Ls!==null&&t.mode&1&&!(t.flags&128))j4(),gf(),t.flags|=98560,s=!1;else if(s=Nm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(nt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(nt(317));s[oo]=t}else gf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vi(t),s=!1}else Ca!==null&&(O2(Ca),Ca=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||or.current&1?Fr===0&&(Fr=3):h5())),t.updateQueue!==null&&(t.flags|=4),vi(t),null);case 4:return yf(),j2(e,t),e===null&&Qh(t.stateNode.containerInfo),vi(t),null;case 10:return Jy(t.type._context),vi(t),null;case 17:return os(t.type)&&_0(),vi(t),null;case 19:if(Hn(or),s=t.memoizedState,s===null)return vi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)hh(s,!1);else{if(Fr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=A0(e),a!==null){for(t.flags|=128,hh(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $n(or,or.current&1|2),t.child}e=e.sibling}s.tail!==null&&_r()>xf&&(t.flags|=128,r=!0,hh(s,!1),t.lanes=4194304)}else{if(!r)if(e=A0(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!tr)return vi(t),null}else 2*_r()-s.renderingStartTime>xf&&n!==1073741824&&(t.flags|=128,r=!0,hh(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=_r(),t.sibling=null,n=or.current,$n(or,r?n&1|2:n&1),t):(vi(t),null);case 22:case 23:return f5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?As&1073741824&&(vi(t),t.subtreeFlags&6&&(t.flags|=8192)):vi(t),null;case 24:return null;case 25:return null}throw Error(nt(156,t.tag))}function KL(e,t){switch(Vy(t),t.tag){case 1:return os(t.type)&&_0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yf(),Hn(as),Hn(Ni),t5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return e5(t),null;case 13:if(Hn(or),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(nt(340));gf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Hn(or),null;case 4:return yf(),null;case 10:return Jy(t.type._context),null;case 22:case 23:return f5(),null;case 24:return null;default:return null}}var jm=!1,_i=!1,JL=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Jd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gr(e,t,r)}else n.current=null}function C2(e,t,n){try{n()}catch(r){gr(e,t,r)}}var hb=!1;function XL(e,t){if(d2=y0,e=p4(),Wy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,p=0,m=e,w=null;t:for(;;){for(var g;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)w=m,m=g;for(;;){if(m===e)break t;if(w===n&&++f===i&&(l=a),w===s&&++p===r&&(c=a),(g=m.nextSibling)!==null)break;m=w,w=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(f2={focusedElem:e,selectionRange:n},y0=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,E=N.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?k:Na(t.type,k),E);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(nt(163))}}catch(M){gr(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return N=hb,hb=!1,N}function Ih(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&C2(t,n,s)}i=i.next}while(i!==r)}}function gg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function A2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uS(e){var t=e.alternate;t!==null&&(e.alternate=null,uS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oo],delete t[ep],delete t[m2],delete t[IL],delete t[DL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dS(e){return e.tag===5||e.tag===3||e.tag===4}function pb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function L2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=b0));else if(r!==4&&(e=e.child,e!==null))for(L2(e,t,n),e=e.sibling;e!==null;)L2(e,t,n),e=e.sibling}function P2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(P2(e,t,n),e=e.sibling;e!==null;)P2(e,t,n),e=e.sibling}var ri=null,Ea=!1;function Xl(e,t,n){for(n=n.child;n!==null;)fS(e,t,n),n=n.sibling}function fS(e,t,n){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(lg,n)}catch{}switch(n.tag){case 5:_i||Jd(n,t);case 6:var r=ri,i=Ea;ri=null,Xl(e,t,n),ri=r,Ea=i,ri!==null&&(Ea?(e=ri,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ri.removeChild(n.stateNode));break;case 18:ri!==null&&(Ea?(e=ri,n=n.stateNode,e.nodeType===8?tv(e.parentNode,n):e.nodeType===1&&tv(e,n),Kh(e)):tv(ri,n.stateNode));break;case 4:r=ri,i=Ea,ri=n.stateNode.containerInfo,Ea=!0,Xl(e,t,n),ri=r,Ea=i;break;case 0:case 11:case 14:case 15:if(!_i&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&C2(n,t,a),i=i.next}while(i!==r)}Xl(e,t,n);break;case 1:if(!_i&&(Jd(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){gr(n,t,l)}Xl(e,t,n);break;case 21:Xl(e,t,n);break;case 22:n.mode&1?(_i=(r=_i)||n.memoizedState!==null,Xl(e,t,n),_i=r):Xl(e,t,n);break;default:Xl(e,t,n)}}function mb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new JL),t.forEach(function(r){var i=aP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:ri=l.stateNode,Ea=!1;break e;case 3:ri=l.stateNode.containerInfo,Ea=!0;break e;case 4:ri=l.stateNode.containerInfo,Ea=!0;break e}l=l.return}if(ri===null)throw Error(nt(160));fS(s,a,i),ri=null,Ea=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){gr(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hS(t,e),t=t.sibling}function hS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wa(t,e),io(e),r&4){try{Ih(3,e,e.return),gg(3,e)}catch(k){gr(e,e.return,k)}try{Ih(5,e,e.return)}catch(k){gr(e,e.return,k)}}break;case 1:wa(t,e),io(e),r&512&&n!==null&&Jd(n,n.return);break;case 5:if(wa(t,e),io(e),r&512&&n!==null&&Jd(n,n.return),e.flags&32){var i=e.stateNode;try{Hh(i,"")}catch(k){gr(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&O3(i,s),t2(l,a);var f=t2(l,s);for(a=0;a<c.length;a+=2){var p=c[a],m=c[a+1];p==="style"?B3(i,m):p==="dangerouslySetInnerHTML"?F3(i,m):p==="children"?Hh(i,m):Py(i,p,m,f)}switch(l){case"input":Jv(i,s);break;case"textarea":M3(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ef(i,!!s.multiple,g,!1):w!==!!s.multiple&&(s.defaultValue!=null?ef(i,!!s.multiple,s.defaultValue,!0):ef(i,!!s.multiple,s.multiple?[]:"",!1))}i[ep]=s}catch(k){gr(e,e.return,k)}}break;case 6:if(wa(t,e),io(e),r&4){if(e.stateNode===null)throw Error(nt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){gr(e,e.return,k)}}break;case 3:if(wa(t,e),io(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kh(t.containerInfo)}catch(k){gr(e,e.return,k)}break;case 4:wa(t,e),io(e);break;case 13:wa(t,e),io(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(u5=_r())),r&4&&mb(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(_i=(f=_i)||p,wa(t,e),_i=f):wa(t,e),io(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(mt=e,p=e.child;p!==null;){for(m=mt=p;mt!==null;){switch(w=mt,g=w.child,w.tag){case 0:case 11:case 14:case 15:Ih(4,w,w.return);break;case 1:Jd(w,w.return);var N=w.stateNode;if(typeof N.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(k){gr(r,n,k)}}break;case 5:Jd(w,w.return);break;case 22:if(w.memoizedState!==null){vb(m);continue}}g!==null?(g.return=w,mt=g):vb(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$3("display",a))}catch(k){gr(e,e.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(k){gr(e,e.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:wa(t,e),io(e),r&4&&mb(e);break;case 21:break;default:wa(t,e),io(e)}}function io(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dS(n)){var r=n;break e}n=n.return}throw Error(nt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hh(i,""),r.flags&=-33);var s=pb(e);P2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=pb(e);L2(e,l,a);break;default:throw Error(nt(161))}}catch(c){gr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QL(e,t,n){mt=e,pS(e)}function pS(e,t,n){for(var r=(e.mode&1)!==0;mt!==null;){var i=mt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jm;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||_i;l=jm;var f=_i;if(jm=a,(_i=c)&&!f)for(mt=i;mt!==null;)a=mt,c=a.child,a.tag===22&&a.memoizedState!==null?yb(i):c!==null?(c.return=a,mt=c):yb(i);for(;s!==null;)mt=s,pS(s),s=s.sibling;mt=i,jm=l,_i=f}gb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mt=s):gb(e)}}function gb(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_i||gg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_i)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&eb(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}eb(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Kh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(nt(163))}_i||t.flags&512&&A2(t)}catch(w){gr(t,t.return,w)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function vb(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function yb(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gg(4,t)}catch(c){gr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){gr(t,i,c)}}var s=t.return;try{A2(t)}catch(c){gr(t,s,c)}break;case 5:var a=t.return;try{A2(t)}catch(c){gr(t,a,c)}}}catch(c){gr(t,t.return,c)}if(t===e){mt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,mt=l;break}mt=t.return}}var ZL=Math.ceil,T0=al.ReactCurrentDispatcher,l5=al.ReactCurrentOwner,ta=al.ReactCurrentBatchConfig,cn=0,Kr=null,Pr=null,si=0,As=0,Xd=Dc(0),Fr=0,ap=null,Fu=0,vg=0,c5=0,Dh=null,rs=null,u5=0,xf=1/0,Go=null,I0=!1,T2=null,_c=null,Cm=!1,hc=null,D0=0,Oh=0,I2=null,Zm=-1,e0=0;function Mi(){return cn&6?_r():Zm!==-1?Zm:Zm=_r()}function Sc(e){return e.mode&1?cn&2&&si!==0?si&-si:ML.transition!==null?(e0===0&&(e0=Q3()),e0):(e=Nn,e!==0||(e=window.event,e=e===void 0?16:s4(e.type)),e):1}function Pa(e,t,n,r){if(50<Oh)throw Oh=0,I2=null,Error(nt(185));gp(e,n,r),(!(cn&2)||e!==Kr)&&(e===Kr&&(!(cn&2)&&(vg|=n),Fr===4&&lc(e,si)),ls(e,r),n===1&&cn===0&&!(t.mode&1)&&(xf=_r()+500,hg&&Oc()))}function ls(e,t){var n=e.callbackNode;MA(e,t);var r=v0(e,e===Kr?si:0);if(r===0)n!==null&&jx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&jx(n),t===1)e.tag===0?OL(wb.bind(null,e)):N4(wb.bind(null,e)),PL(function(){!(cn&6)&&Oc()}),n=null;else{switch(Z3(r)){case 1:n=My;break;case 4:n=J3;break;case 16:n=g0;break;case 536870912:n=X3;break;default:n=g0}n=_S(n,mS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mS(e,t){if(Zm=-1,e0=0,cn&6)throw Error(nt(327));var n=e.callbackNode;if(af()&&e.callbackNode!==n)return null;var r=v0(e,e===Kr?si:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=O0(e,r);else{t=r;var i=cn;cn|=2;var s=vS();(Kr!==e||si!==t)&&(Go=null,xf=_r()+500,Lu(e,t));do try{nP();break}catch(l){gS(e,l)}while(!0);Ky(),T0.current=s,cn=i,Pr!==null?t=0:(Kr=null,si=0,t=Fr)}if(t!==0){if(t===2&&(i=a2(e),i!==0&&(r=i,t=D2(e,i))),t===1)throw n=ap,Lu(e,0),lc(e,r),ls(e,_r()),n;if(t===6)lc(e,r);else{if(i=e.current.alternate,!(r&30)&&!eP(i)&&(t=O0(e,r),t===2&&(s=a2(e),s!==0&&(r=s,t=D2(e,s))),t===1))throw n=ap,Lu(e,0),lc(e,r),ls(e,_r()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(nt(345));case 2:vu(e,rs,Go);break;case 3:if(lc(e,r),(r&130023424)===r&&(t=u5+500-_r(),10<t)){if(v0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Mi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=p2(vu.bind(null,e,rs,Go),t);break}vu(e,rs,Go);break;case 4:if(lc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-La(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=_r()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZL(r/1960))-r,10<r){e.timeoutHandle=p2(vu.bind(null,e,rs,Go),r);break}vu(e,rs,Go);break;case 5:vu(e,rs,Go);break;default:throw Error(nt(329))}}}return ls(e,_r()),e.callbackNode===n?mS.bind(null,e):null}function D2(e,t){var n=Dh;return e.current.memoizedState.isDehydrated&&(Lu(e,t).flags|=256),e=O0(e,t),e!==2&&(t=rs,rs=n,t!==null&&O2(t)),e}function O2(e){rs===null?rs=e:rs.push.apply(rs,e)}function eP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ia(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lc(e,t){for(t&=~c5,t&=~vg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-La(t),r=1<<n;e[n]=-1,t&=~r}}function wb(e){if(cn&6)throw Error(nt(327));af();var t=v0(e,0);if(!(t&1))return ls(e,_r()),null;var n=O0(e,t);if(e.tag!==0&&n===2){var r=a2(e);r!==0&&(t=r,n=D2(e,r))}if(n===1)throw n=ap,Lu(e,0),lc(e,t),ls(e,_r()),n;if(n===6)throw Error(nt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,rs,Go),ls(e,_r()),null}function d5(e,t){var n=cn;cn|=1;try{return e(t)}finally{cn=n,cn===0&&(xf=_r()+500,hg&&Oc())}}function $u(e){hc!==null&&hc.tag===0&&!(cn&6)&&af();var t=cn;cn|=1;var n=ta.transition,r=Nn;try{if(ta.transition=null,Nn=1,e)return e()}finally{Nn=r,ta.transition=n,cn=t,!(cn&6)&&Oc()}}function f5(){As=Xd.current,Hn(Xd)}function Lu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,LL(n)),Pr!==null)for(n=Pr.return;n!==null;){var r=n;switch(Vy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_0();break;case 3:yf(),Hn(as),Hn(Ni),t5();break;case 5:e5(r);break;case 4:yf();break;case 13:Hn(or);break;case 19:Hn(or);break;case 10:Jy(r.type._context);break;case 22:case 23:f5()}n=n.return}if(Kr=e,Pr=e=Nc(e.current,null),si=As=t,Fr=0,ap=null,c5=vg=Fu=0,rs=Dh=null,Eu!==null){for(t=0;t<Eu.length;t++)if(n=Eu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Eu=null}return e}function gS(e,t){do{var n=Pr;try{if(Ky(),Jm.current=P0,L0){for(var r=cr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}L0=!1}if(Ru=0,Hr=Mr=cr=null,Th=!1,rp=0,l5.current=null,n===null||n.return===null){Fr=1,ap=t,Pr=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=si,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var w=p.alternate;w?(p.updateQueue=w.updateQueue,p.memoizedState=w.memoizedState,p.lanes=w.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=ab(a);if(g!==null){g.flags&=-257,ob(g,a,l,s,t),g.mode&1&&sb(s,f,t),t=g,c=f;var N=t.updateQueue;if(N===null){var k=new Set;k.add(c),t.updateQueue=k}else N.add(c);break e}else{if(!(t&1)){sb(s,f,t),h5();break e}c=Error(nt(426))}}else if(tr&&l.mode&1){var E=ab(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ob(E,a,l,s,t),Gy(wf(c,l));break e}}s=c=wf(c,l),Fr!==4&&(Fr=2),Dh===null?Dh=[s]:Dh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=Z4(s,c,t);Zx(s,b);break e;case 1:l=c;var S=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(_c===null||!_c.has(L)))){s.flags|=65536,t&=-t,s.lanes|=t;var M=eS(s,l,t);Zx(s,M);break e}}s=s.return}while(s!==null)}wS(n)}catch(Y){t=Y,Pr===n&&n!==null&&(Pr=n=n.return);continue}break}while(!0)}function vS(){var e=T0.current;return T0.current=P0,e===null?P0:e}function h5(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Kr===null||!(Fu&268435455)&&!(vg&268435455)||lc(Kr,si)}function O0(e,t){var n=cn;cn|=2;var r=vS();(Kr!==e||si!==t)&&(Go=null,Lu(e,t));do try{tP();break}catch(i){gS(e,i)}while(!0);if(Ky(),cn=n,T0.current=r,Pr!==null)throw Error(nt(261));return Kr=null,si=0,Fr}function tP(){for(;Pr!==null;)yS(Pr)}function nP(){for(;Pr!==null&&!jA();)yS(Pr)}function yS(e){var t=bS(e.alternate,e,As);e.memoizedProps=e.pendingProps,t===null?wS(e):Pr=t,l5.current=null}function wS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=KL(n,t),n!==null){n.flags&=32767,Pr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fr=6,Pr=null;return}}else if(n=YL(n,t,As),n!==null){Pr=n;return}if(t=t.sibling,t!==null){Pr=t;return}Pr=t=e}while(t!==null);Fr===0&&(Fr=5)}function vu(e,t,n){var r=Nn,i=ta.transition;try{ta.transition=null,Nn=1,rP(e,t,n,r)}finally{ta.transition=i,Nn=r}return null}function rP(e,t,n,r){do af();while(hc!==null);if(cn&6)throw Error(nt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(nt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(RA(e,s),e===Kr&&(Pr=Kr=null,si=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cm||(Cm=!0,_S(g0,function(){return af(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ta.transition,ta.transition=null;var a=Nn;Nn=1;var l=cn;cn|=4,l5.current=null,XL(e,n),hS(n,e),SL(f2),y0=!!d2,f2=d2=null,e.current=n,QL(n),CA(),cn=l,Nn=a,ta.transition=s}else e.current=n;if(Cm&&(Cm=!1,hc=e,D0=i),s=e.pendingLanes,s===0&&(_c=null),PA(n.stateNode),ls(e,_r()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(I0)throw I0=!1,e=T2,T2=null,e;return D0&1&&e.tag!==0&&af(),s=e.pendingLanes,s&1?e===I2?Oh++:(Oh=0,I2=e):Oh=0,Oc(),null}function af(){if(hc!==null){var e=Z3(D0),t=ta.transition,n=Nn;try{if(ta.transition=null,Nn=16>e?16:e,hc===null)var r=!1;else{if(e=hc,hc=null,D0=0,cn&6)throw Error(nt(331));var i=cn;for(cn|=4,mt=e.current;mt!==null;){var s=mt,a=s.child;if(mt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(mt=f;mt!==null;){var p=mt;switch(p.tag){case 0:case 11:case 15:Ih(8,p,s)}var m=p.child;if(m!==null)m.return=p,mt=m;else for(;mt!==null;){p=mt;var w=p.sibling,g=p.return;if(uS(p),p===f){mt=null;break}if(w!==null){w.return=g,mt=w;break}mt=g}}}var N=s.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var E=k.sibling;k.sibling=null,k=E}while(k!==null)}}mt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,mt=a;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ih(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,mt=b;break e}mt=s.return}}var S=e.current;for(mt=S;mt!==null;){a=mt;var L=a.child;if(a.subtreeFlags&2064&&L!==null)L.return=a,mt=L;else e:for(a=S;mt!==null;){if(l=mt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gg(9,l)}}catch(Y){gr(l,l.return,Y)}if(l===a){mt=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,mt=M;break e}mt=l.return}}if(cn=i,Oc(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(lg,e)}catch{}r=!0}return r}finally{Nn=n,ta.transition=t}}return!1}function xb(e,t,n){t=wf(n,t),t=Z4(e,t,1),e=bc(e,t,1),t=Mi(),e!==null&&(gp(e,1,t),ls(e,t))}function gr(e,t,n){if(e.tag===3)xb(e,e,n);else for(;t!==null;){if(t.tag===3){xb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_c===null||!_c.has(r))){e=wf(n,e),e=eS(t,e,1),t=bc(t,e,1),e=Mi(),t!==null&&(gp(t,1,e),ls(t,e));break}}t=t.return}}function iP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&n,Kr===e&&(si&n)===n&&(Fr===4||Fr===3&&(si&130023424)===si&&500>_r()-u5?Lu(e,0):c5|=n),ls(e,t)}function xS(e,t){t===0&&(e.mode&1?(t=ym,ym<<=1,!(ym&130023424)&&(ym=4194304)):t=1);var n=Mi();e=nl(e,t),e!==null&&(gp(e,t,n),ls(e,n))}function sP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xS(e,n)}function aP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(nt(314))}r!==null&&r.delete(t),xS(e,n)}var bS;bS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||as.current)ss=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ss=!1,GL(e,t,n);ss=!!(e.flags&131072)}else ss=!1,tr&&t.flags&1048576&&k4(t,k0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qm(e,t),e=t.pendingProps;var i=mf(t,Ni.current);sf(t,n),i=r5(null,t,r,e,i,n);var s=i5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,os(r)?(s=!0,S0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qy(t),i.updater=mg,t.stateNode=i,i._reactInternals=t,b2(t,r,e,n),t=N2(null,t,r,!0,s,n)):(t.tag=0,tr&&s&&Hy(t),Di(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qm(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=lP(r),e=Na(r,e),i){case 0:t=S2(null,t,r,e,n);break e;case 1:t=ub(null,t,r,e,n);break e;case 11:t=lb(null,t,r,e,n);break e;case 14:t=cb(null,t,r,Na(r.type,e),n);break e}throw Error(nt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),S2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),ub(e,t,r,i,n);case 3:e:{if(iS(t),e===null)throw Error(nt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,P4(e,t),C0(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=wf(Error(nt(423)),t),t=db(e,t,r,n,i);break e}else if(r!==i){i=wf(Error(nt(424)),t),t=db(e,t,r,n,i);break e}else for(Ls=xc(t.stateNode.containerInfo.firstChild),Ts=t,tr=!0,Ca=null,n=A4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gf(),r===i){t=rl(e,t,n);break e}Di(e,t,r,n)}t=t.child}return t;case 5:return T4(t),e===null&&y2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,h2(r,i)?a=null:s!==null&&h2(r,s)&&(t.flags|=32),rS(e,t),Di(e,t,a,n),t.child;case 6:return e===null&&y2(t),null;case 13:return sS(e,t,n);case 4:return Zy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vf(t,null,r,n):Di(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),lb(e,t,r,i,n);case 7:return Di(e,t,t.pendingProps,n),t.child;case 8:return Di(e,t,t.pendingProps.children,n),t.child;case 12:return Di(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,$n(E0,r._currentValue),r._currentValue=a,s!==null)if(Ia(s.value,a)){if(s.children===i.children&&!as.current){t=rl(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Qo(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),w2(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(nt(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),w2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Di(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,sf(t,n),i=na(i),r=r(i),t.flags|=1,Di(e,t,r,n),t.child;case 14:return r=t.type,i=Na(r,t.pendingProps),i=Na(r.type,i),cb(e,t,r,i,n);case 15:return tS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Na(r,i),Qm(e,t),t.tag=1,os(r)?(e=!0,S0(t)):e=!1,sf(t,n),Q4(t,r,i),b2(t,r,i,n),N2(null,t,r,!0,e,n);case 19:return aS(e,t,n);case 22:return nS(e,t,n)}throw Error(nt(156,t.tag))};function _S(e,t){return K3(e,t)}function oP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(e,t,n,r){return new oP(e,t,n,r)}function p5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lP(e){if(typeof e=="function")return p5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Iy)return 11;if(e===Dy)return 14}return 2}function Nc(e,t){var n=e.alternate;return n===null?(n=ea(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function t0(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")p5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ud:return Pu(n.children,i,s,t);case Ty:a=8,i|=8;break;case Hv:return e=ea(12,n,t,i|2),e.elementType=Hv,e.lanes=s,e;case Vv:return e=ea(13,n,t,i),e.elementType=Vv,e.lanes=s,e;case Gv:return e=ea(19,n,t,i),e.elementType=Gv,e.lanes=s,e;case T3:return yg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L3:a=10;break e;case P3:a=9;break e;case Iy:a=11;break e;case Dy:a=14;break e;case rc:a=16,r=null;break e}throw Error(nt(130,e==null?e:typeof e,""))}return t=ea(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Pu(e,t,n,r){return e=ea(7,e,r,t),e.lanes=n,e}function yg(e,t,n,r){return e=ea(22,e,r,t),e.elementType=T3,e.lanes=n,e.stateNode={isHidden:!1},e}function cv(e,t,n){return e=ea(6,e,null,t),e.lanes=n,e}function uv(e,t,n){return t=ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W1(0),this.expirationTimes=W1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function m5(e,t,n,r,i,s,a,l,c){return e=new cP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ea(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qy(s),e}function uP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function SS(e){if(!e)return Cc;e=e._reactInternals;e:{if(zu(e)!==e||e.tag!==1)throw Error(nt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(os(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(nt(171))}if(e.tag===1){var n=e.type;if(os(n))return S4(e,n,t)}return t}function NS(e,t,n,r,i,s,a,l,c){return e=m5(n,r,!0,e,i,s,a,l,c),e.context=SS(null),n=e.current,r=Mi(),i=Sc(n),s=Qo(r,i),s.callback=t??null,bc(n,s,i),e.current.lanes=i,gp(e,i,r),ls(e,r),e}function wg(e,t,n,r){var i=t.current,s=Mi(),a=Sc(i);return n=SS(n),t.context===null?t.context=n:t.pendingContext=n,t=Qo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bc(i,t,a),e!==null&&(Pa(e,i,a,s),Km(e,i,a)),a}function M0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function g5(e,t){bb(e,t),(e=e.alternate)&&bb(e,t)}function dP(){return null}var kS=typeof reportError=="function"?reportError:function(e){console.error(e)};function v5(e){this._internalRoot=e}xg.prototype.render=v5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(nt(409));wg(e,t,null,null)};xg.prototype.unmount=v5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$u(function(){wg(null,e,null,null)}),t[tl]=null}};function xg(e){this._internalRoot=e}xg.prototype.unstable_scheduleHydration=function(e){if(e){var t=n4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oc.length&&t!==0&&t<oc[n].priority;n++);oc.splice(n,0,e),n===0&&i4(e)}};function y5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _b(){}function fP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=M0(a);s.call(f)}}var a=NS(t,r,e,0,null,!1,!1,"",_b);return e._reactRootContainer=a,e[tl]=a.current,Qh(e.nodeType===8?e.parentNode:e),$u(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=M0(c);l.call(f)}}var c=m5(e,0,!1,null,null,!1,!1,"",_b);return e._reactRootContainer=c,e[tl]=c.current,Qh(e.nodeType===8?e.parentNode:e),$u(function(){wg(t,c,n,r)}),c}function _g(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=M0(a);l.call(c)}}wg(t,a,e,i)}else a=fP(n,t,e,i,r);return M0(a)}e4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sh(t.pendingLanes);n!==0&&(Ry(t,n|1),ls(t,_r()),!(cn&6)&&(xf=_r()+500,Oc()))}break;case 13:$u(function(){var r=nl(e,1);if(r!==null){var i=Mi();Pa(r,e,1,i)}}),g5(e,1)}};Fy=function(e){if(e.tag===13){var t=nl(e,134217728);if(t!==null){var n=Mi();Pa(t,e,134217728,n)}g5(e,134217728)}};t4=function(e){if(e.tag===13){var t=Sc(e),n=nl(e,t);if(n!==null){var r=Mi();Pa(n,e,t,r)}g5(e,t)}};n4=function(){return Nn};r4=function(e,t){var n=Nn;try{return Nn=e,t()}finally{Nn=n}};r2=function(e,t,n){switch(t){case"input":if(Jv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fg(r);if(!i)throw Error(nt(90));D3(r),Jv(r,i)}}}break;case"textarea":M3(e,n);break;case"select":t=n.value,t!=null&&ef(e,!!n.multiple,t,!1)}};q3=d5;W3=$u;var hP={usingClientEntryPoint:!1,Events:[yp,Hd,fg,U3,z3,d5]},ph={findFiberByHostInstance:ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pP={bundleType:ph.bundleType,version:ph.version,rendererPackageName:ph.rendererPackageName,rendererConfig:ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=G3(e),e===null?null:e.stateNode},findFiberByHostInstance:ph.findFiberByHostInstance||dP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Am.isDisabled&&Am.supportsFiber)try{lg=Am.inject(pP),ho=Am}catch{}}Ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hP;Ds.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y5(t))throw Error(nt(200));return uP(e,t,null,n)};Ds.createRoot=function(e,t){if(!y5(e))throw Error(nt(299));var n=!1,r="",i=kS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=m5(e,1,!1,null,null,n,!1,r,i),e[tl]=t.current,Qh(e.nodeType===8?e.parentNode:e),new v5(t)};Ds.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(nt(188)):(e=Object.keys(e).join(","),Error(nt(268,e)));return e=G3(t),e=e===null?null:e.stateNode,e};Ds.flushSync=function(e){return $u(e)};Ds.hydrate=function(e,t,n){if(!bg(t))throw Error(nt(200));return _g(null,e,t,!0,n)};Ds.hydrateRoot=function(e,t,n){if(!y5(e))throw Error(nt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=kS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=NS(t,null,e,1,n??null,i,!1,s,a),e[tl]=t.current,Qh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new xg(t)};Ds.render=function(e,t,n){if(!bg(t))throw Error(nt(200));return _g(null,e,t,!1,n)};Ds.unmountComponentAtNode=function(e){if(!bg(e))throw Error(nt(40));return e._reactRootContainer?($u(function(){_g(null,null,e,!1,function(){e._reactRootContainer=null,e[tl]=null})}),!0):!1};Ds.unstable_batchedUpdates=d5;Ds.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bg(n))throw Error(nt(200));if(e==null||e._reactInternals===void 0)throw Error(nt(38));return _g(e,t,n,!1,r)};Ds.version="18.3.1-next-f1338f8080-20240426";function ES(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ES)}catch(e){console.error(e)}}ES(),E3.exports=Ds;var Cu=E3.exports,jS,Sb=Cu;jS=Sb.createRoot,Sb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},op.apply(this,arguments)}var pc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pc||(pc={}));const Nb="popstate";function mP(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return M2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:R0(i)}return vP(t,n,null,e)}function Er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gP(){return Math.random().toString(36).substr(2,8)}function kb(e,t){return{usr:e.state,key:e.key,idx:t}}function M2(e,t,n,r){return n===void 0&&(n=null),op({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ef(t):t,{state:n,key:t&&t.key||r||gP()})}function R0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ef(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vP(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=pc.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(op({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=pc.Pop;let E=p(),b=E==null?null:E-f;f=E,c&&c({action:l,location:k.location,delta:b})}function w(E,b){l=pc.Push;let S=M2(k.location,E,b);f=p()+1;let L=kb(S,f),M=k.createHref(S);try{a.pushState(L,"",M)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(M)}s&&c&&c({action:l,location:k.location,delta:1})}function g(E,b){l=pc.Replace;let S=M2(k.location,E,b);f=p();let L=kb(S,f),M=k.createHref(S);a.replaceState(L,"",M),s&&c&&c({action:l,location:k.location,delta:0})}function N(E){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof E=="string"?E:R0(E);return S=S.replace(/ $/,"%20"),Er(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let k={get action(){return l},get location(){return e(i,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Nb,m),c=E,()=>{i.removeEventListener(Nb,m),c=null}},createHref(E){return t(i,E)},createURL:N,encodeLocation(E){let b=N(E);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:w,replace:g,go(E){return a.go(E)}};return k}var Eb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Eb||(Eb={}));function yP(e,t,n){return n===void 0&&(n="/"),wP(e,t,n,!1)}function wP(e,t,n,r){let i=typeof t=="string"?Ef(t):t,s=w5(i.pathname||"/",n);if(s==null)return null;let a=AS(e);xP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=PP(s);l=AP(a[c],f,r)}return l}function AS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Er(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=kc([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Er(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),AS(s.children,t,p,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:jP(f,s.index),routesMeta:p})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of LS(s.path))i(s,a,c)}),t}function LS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=LS(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function xP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:CP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bP=/^:[\w-]+$/,_P=3,SP=2,NP=1,kP=10,EP=-2,jb=e=>e==="*";function jP(e,t){let n=e.split("/"),r=n.length;return n.some(jb)&&(r+=EP),t&&(r+=SP),n.filter(i=>!jb(i)).reduce((i,s)=>i+(bP.test(s)?_P:s===""?NP:kP),r)}function CP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function AP(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=Cb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),w=c.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=Cb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:kc([s,m.pathname]),pathnameBase:OP(kc([s,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(s=kc([s,m.pathnameBase]))}return a}function Cb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=LP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:w,isOptional:g}=p;if(w==="*"){let k=l[m]||"";a=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const N=l[m];return g&&!N?f[w]=void 0:f[w]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:e}}function LP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),CS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function PP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return CS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function w5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function TP(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ef(e):e;return{pathname:n?n.startsWith("/")?n:IP(n,t):t,search:MP(r),hash:RP(i)}}function IP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function dv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function x5(e,t){let n=DP(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function b5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ef(e):(i=op({},e),Er(!i.pathname||!i.pathname.includes("?"),dv("?","pathname","search",i)),Er(!i.pathname||!i.pathname.includes("#"),dv("#","pathname","hash",i)),Er(!i.search||!i.search.includes("#"),dv("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),m-=1;i.pathname=w.join("/")}l=m>=0?t[m]:"/"}let c=TP(i,l),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const kc=e=>e.join("/").replace(/\/\/+/g,"/"),OP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const PS=["post","put","patch","delete"];new Set(PS);const $P=["get",...PS];new Set($P);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}const _5=C.createContext(null),BP=C.createContext(null),Mc=C.createContext(null),Sg=C.createContext(null),ol=C.createContext({outlet:null,matches:[],isDataRoute:!1}),TS=C.createContext(null);function UP(e,t){let{relative:n}=t===void 0?{}:t;jf()||Er(!1);let{basename:r,navigator:i}=C.useContext(Mc),{hash:s,pathname:a,search:l}=OS(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:kc([r,a])),i.createHref({pathname:c,search:l,hash:s})}function jf(){return C.useContext(Sg)!=null}function wo(){return jf()||Er(!1),C.useContext(Sg).location}function IS(e){C.useContext(Mc).static||C.useLayoutEffect(e)}function Ra(){let{isDataRoute:e}=C.useContext(ol);return e?e7():zP()}function zP(){jf()||Er(!1);let e=C.useContext(_5),{basename:t,future:n,navigator:r}=C.useContext(Mc),{matches:i}=C.useContext(ol),{pathname:s}=wo(),a=JSON.stringify(x5(i,n.v7_relativeSplatPath)),l=C.useRef(!1);return IS(()=>{l.current=!0}),C.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let m=b5(f,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:kc([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,a,s,e])}function DS(){let{matches:e}=C.useContext(ol),t=e[e.length-1];return t?t.params:{}}function OS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(Mc),{matches:i}=C.useContext(ol),{pathname:s}=wo(),a=JSON.stringify(x5(i,r.v7_relativeSplatPath));return C.useMemo(()=>b5(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function qP(e,t){return WP(e,t)}function WP(e,t,n,r){jf()||Er(!1);let{navigator:i}=C.useContext(Mc),{matches:s}=C.useContext(ol),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=wo(),p;if(t){var m;let E=typeof t=="string"?Ef(t):t;c==="/"||(m=E.pathname)!=null&&m.startsWith(c)||Er(!1),p=E}else p=f;let w=p.pathname||"/",g=w;if(c!=="/"){let E=c.replace(/^\//,"").split("/");g="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=yP(e,{pathname:g}),k=KP(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:kc([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:kc([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return t&&k?C.createElement(Sg.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:pc.Pop}},k):k}function HP(){let e=ZP(),t=FP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,null)}const VP=C.createElement(HP,null);class GP extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(ol.Provider,{value:this.props.routeContext},C.createElement(TS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YP(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(_5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(ol.Provider,{value:t},r)}function KP(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Er(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:w,errors:g}=n,N=m.route.loader&&w[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||N){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,w)=>{let g,N=!1,k=null,E=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||VP,c&&(f<0&&w===0?(N=!0,E=null):f===w&&(N=!0,E=m.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,w+1)),S=()=>{let L;return g?L=k:N?L=E:m.route.Component?L=C.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=p,C.createElement(YP,{match:m,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:L})};return n&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?C.createElement(GP,{location:n.location,revalidation:n.revalidation,component:k,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var MS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(MS||{}),F0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(F0||{});function JP(e){let t=C.useContext(_5);return t||Er(!1),t}function XP(e){let t=C.useContext(BP);return t||Er(!1),t}function QP(e){let t=C.useContext(ol);return t||Er(!1),t}function RS(e){let t=QP(),n=t.matches[t.matches.length-1];return n.route.id||Er(!1),n.route.id}function ZP(){var e;let t=C.useContext(TS),n=XP(F0.UseRouteError),r=RS(F0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function e7(){let{router:e}=JP(MS.UseNavigateStable),t=RS(F0.UseNavigateStable),n=C.useRef(!1);return IS(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,lp({fromRouteId:t},s)))},[e,t])}const Ab={};function t7(e,t){Ab[t]||(Ab[t]=!0,console.warn(t))}const Lb=(e,t,n)=>t7(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function n7(e,t){e!=null&&e.v7_startTransition||Lb("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Lb("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function r7(e){let{to:t,replace:n,state:r,relative:i}=e;jf()||Er(!1);let{future:s,static:a}=C.useContext(Mc),{matches:l}=C.useContext(ol),{pathname:c}=wo(),f=Ra(),p=b5(t,x5(l,s.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(p);return C.useEffect(()=>f(JSON.parse(m),{replace:n,state:r,relative:i}),[f,m,i,n,r]),null}function _a(e){Er(!1)}function i7(e){let{basename:t="/",children:n=null,location:r,navigationType:i=pc.Pop,navigator:s,static:a=!1,future:l}=e;jf()&&Er(!1);let c=t.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:c,navigator:s,static:a,future:lp({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=Ef(r));let{pathname:p="/",search:m="",hash:w="",state:g=null,key:N="default"}=r,k=C.useMemo(()=>{let E=w5(p,c);return E==null?null:{location:{pathname:E,search:m,hash:w,state:g,key:N},navigationType:i}},[c,p,m,w,g,N,i]);return k==null?null:C.createElement(Mc.Provider,{value:f},C.createElement(Sg.Provider,{children:n,value:k}))}function s7(e){let{children:t,location:n}=e;return qP(R2(t),n)}new Promise(()=>{});function R2(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,R2(r.props.children,s));return}r.type!==_a&&Er(!1),!r.props.index||!r.props.children||Er(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=R2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F2.apply(this,arguments)}function a7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function o7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function l7(e,t){return e.button===0&&(!t||t==="_self")&&!o7(e)}function $2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function c7(e,t){let n=$2(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const u7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d7="6";try{window.__reactRouterVersion=d7}catch{}const f7="startTransition",Pb=qv[f7];function h7(e){let{basename:t,children:n,future:r,window:i}=e,s=C.useRef();s.current==null&&(s.current=mP({window:i,v5Compat:!0}));let a=s.current,[l,c]=C.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=C.useCallback(m=>{f&&Pb?Pb(()=>c(m)):c(m)},[c,f]);return C.useLayoutEffect(()=>a.listen(p),[a,p]),C.useEffect(()=>n7(r),[r]),C.createElement(i7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const p7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ec=C.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:m}=t,w=a7(t,u7),{basename:g}=C.useContext(Mc),N,k=!1;if(typeof f=="string"&&m7.test(f)&&(N=f,p7))try{let L=new URL(window.location.href),M=f.startsWith("//")?new URL(L.protocol+f):new URL(f),Y=w5(M.pathname,g);M.origin===L.origin&&Y!=null?f=Y+M.search+M.hash:k=!0}catch{}let E=UP(f,{relative:i}),b=g7(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:m});function S(L){r&&r(L),L.defaultPrevented||b(L)}return C.createElement("a",F2({},w,{href:N||E,onClick:k||s?r:S,ref:n,target:c}))});var Tb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tb||(Tb={}));var Ib;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ib||(Ib={}));function g7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=Ra(),f=wo(),p=OS(e,{relative:a});return C.useCallback(m=>{if(l7(m,n)){m.preventDefault();let w=r!==void 0?r:R0(f)===R0(p);c(e,{replace:w,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[f,c,p,r,i,n,e,s,a,l])}function FS(e){let t=C.useRef($2(e)),n=C.useRef(!1),r=wo(),i=C.useMemo(()=>c7(r.search,n.current?null:t.current),[r.search]),s=Ra(),a=C.useCallback((l,c)=>{const f=$2(typeof l=="function"?l(i):l);n.current=!0,s("?"+f,c)},[s,i]);return[i,a]}let v7={data:""},y7=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||v7,w7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,x7=/\/\*[^]*?\*\/|  +/g,Db=/\n+/g,cc=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?cc(a,s):s+"{"+cc(a,s[1]=="k"?"":t)+"}":typeof a=="object"?r+=cc(a,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=cc.p?cc.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Wo={},$S=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+$S(e[n]);return t}return e},b7=(e,t,n,r,i)=>{let s=$S(e),a=Wo[s]||(Wo[s]=(c=>{let f=0,p=11;for(;f<c.length;)p=101*p+c.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Wo[a]){let c=s!==e?e:(f=>{let p,m,w=[{}];for(;p=w7.exec(f.replace(x7,""));)p[4]?w.shift():p[3]?(m=p[3].replace(Db," ").trim(),w.unshift(w[0][m]=w[0][m]||{})):w[0][p[1]]=p[2].replace(Db," ").trim();return w[0]})(e);Wo[a]=cc(i?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Wo.g?Wo.g:null;return n&&(Wo.g=Wo[a]),((c,f,p,m)=>{m?f.data=f.data.replace(m,c):f.data.indexOf(c)===-1&&(f.data=p?c+f.data:f.data+c)})(Wo[a],t,r,l),a},_7=(e,t,n)=>e.reduce((r,i,s)=>{let a=t[s];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":cc(l,""):l===!1?"":l}return r+i+(a??"")},"");function Ng(e){let t=this||{},n=e.call?e(t.p):e;return b7(n.unshift?n.raw?_7(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,y7(t.target),t.g,t.o,t.k)}let BS,B2,U2;Ng.bind({g:1});let il=Ng.bind({k:1});function S7(e,t,n,r){cc.p=t,BS=e,B2=n,U2=r}function Rc(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:B2&&B2()},l),n.o=/ *go\d+/.test(c),l.className=Ng.apply(n,r)+(c?" "+c:"");let f=e;return e[0]&&(f=l.as||e,delete l.as),U2&&f[0]&&U2(l),BS(f,l)}return i}}var N7=e=>typeof e=="function",$0=(e,t)=>N7(e)?e(t):e,k7=(()=>{let e=0;return()=>(++e).toString()})(),US=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),E7=20,n0=new Map,j7=1e3,Ob=e=>{if(n0.has(e))return;let t=setTimeout(()=>{n0.delete(e),qu({type:4,toastId:e})},j7);n0.set(e,t)},C7=e=>{let t=n0.get(e);t&&clearTimeout(t)},z2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,E7)};case 1:return t.toast.id&&C7(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?z2(e,{type:1,toast:n}):z2(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?Ob(r):e.toasts.forEach(s=>{Ob(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},r0=[],i0={toasts:[],pausedAt:void 0},qu=e=>{i0=z2(i0,e),r0.forEach(t=>{t(i0)})},A7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},L7=(e={})=>{let[t,n]=C.useState(i0);C.useEffect(()=>(r0.push(n),()=>{let i=r0.indexOf(n);i>-1&&r0.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var s,a;return{...e,...e[i.type],...i,duration:i.duration||((s=e[i.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||A7[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:r}},P7=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||k7()}),xp=e=>(t,n)=>{let r=P7(t,e,n);return qu({type:2,toast:r}),r.id},Pe=(e,t)=>xp("blank")(e,t);Pe.error=xp("error");Pe.success=xp("success");Pe.loading=xp("loading");Pe.custom=xp("custom");Pe.dismiss=e=>{qu({type:3,toastId:e})};Pe.remove=e=>qu({type:4,toastId:e});Pe.promise=(e,t,n)=>{let r=Pe.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(Pe.success($0(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Pe.error($0(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var T7=(e,t)=>{qu({type:1,toast:{id:e,height:t}})},I7=()=>{qu({type:5,time:Date.now()})},D7=e=>{let{toasts:t,pausedAt:n}=L7(e);C.useEffect(()=>{if(n)return;let s=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Pe.dismiss(l.id);return}return setTimeout(()=>Pe.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=C.useCallback(()=>{n&&qu({type:6,time:Date.now()})},[n]),i=C.useCallback((s,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:f}=a||{},p=t.filter(g=>(g.position||f)===(s.position||f)&&g.height),m=p.findIndex(g=>g.id===s.id),w=p.filter((g,N)=>N<m&&g.visible).length;return p.filter(g=>g.visible).slice(...l?[w+1]:[0,w]).reduce((g,N)=>g+(N.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:T7,startPause:I7,endPause:r,calculateOffset:i}}},O7=il`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,M7=il`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,R7=il`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,F7=Rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${O7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${M7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${R7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$7=il`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,B7=Rc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${$7} 1s linear infinite;
`,U7=il`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,z7=il`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,q7=Rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${U7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${z7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,W7=Rc("div")`
  position: absolute;
`,H7=Rc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,V7=il`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,G7=Rc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${V7} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Y7=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?C.createElement(G7,null,t):t:n==="blank"?null:C.createElement(H7,null,C.createElement(B7,{...r}),n!=="loading"&&C.createElement(W7,null,n==="error"?C.createElement(F7,{...r}):C.createElement(q7,{...r})))},K7=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,J7=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,X7="0%{opacity:0;} 100%{opacity:1;}",Q7="0%{opacity:1;} 100%{opacity:0;}",Z7=Rc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eT=Rc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=US()?[X7,Q7]:[K7(n),J7(n)];return{animation:t?`${il(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${il(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},nT=C.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?tT(e.position||t||"top-center",e.visible):{opacity:0},s=C.createElement(Y7,{toast:e}),a=C.createElement(eT,{...e.ariaProps},$0(e.message,e));return C.createElement(Z7,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:a}):C.createElement(C.Fragment,null,s,a))});S7(C.createElement);var rT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=C.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return C.createElement("div",{ref:s,className:t,style:n},i)},iT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:US()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},sT=Ng`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lm=16,aT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=D7(n);return C.createElement("div",{style:{position:"fixed",zIndex:9999,top:Lm,left:Lm,right:Lm,bottom:Lm,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(f=>{let p=f.position||t,m=c.calculateOffset(f,{reverseOrder:e,gutter:r,defaultPosition:t}),w=iT(p,m);return C.createElement(rT,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?sT:"",style:w},f.type==="custom"?$0(f.message,f):i?i(f):C.createElement(nT,{toast:f,position:p}))}))};const oT="modulepreload",lT=function(e){return"/"+e},Mb={},sl=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=lT(c),c in Mb)return;Mb[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":oT,f||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((w,g)=>{m.addEventListener("load",w),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},cT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Cf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class S5 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class uT extends S5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class dT extends S5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fT extends S5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var q2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(q2||(q2={}));var hT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class pT{constructor(t,{headers:n={},customFetch:r,region:i=q2.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=cT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return hT(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f}).catch(N=>{throw new uT(N)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new dT(p);if(!p.ok)throw new fT(p);let w=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return w==="application/json"?g=yield p.json():w==="application/octet-stream"?g=yield p.blob():w==="text/event-stream"?g=p:w==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var is={},N5={},kg={},bp={},Eg={},jg={},mT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bf=mT();const gT=bf.fetch,zS=bf.fetch.bind(bf),qS=bf.Headers,vT=bf.Request,yT=bf.Response,Cf=Object.freeze(Object.defineProperty({__proto__:null,Headers:qS,Request:vT,Response:yT,default:zS,fetch:gT},Symbol.toStringTag,{value:"Module"})),wT=qC(Cf);var Cg={};Object.defineProperty(Cg,"__esModule",{value:!0});class xT extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Cg.default=xT;var WS=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jg,"__esModule",{value:!0});const bT=WS(wT),_T=WS(Cg);let ST=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=bT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,l,c;let f=null,p=null,m=null,w=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=b:p=JSON.parse(b))}const k=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),E=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");k&&E&&E.length>1&&(m=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,w=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const k=await s.text();try{f=JSON.parse(k),Array.isArray(f)&&s.status===404&&(p=[],f=null,w=200,g="OK")}catch{s.status===404&&k===""?(w=204,g="No Content"):f={message:k}}if(f&&this.isMaybeSingle&&(!((c=f==null?void 0:f.details)===null||c===void 0)&&c.includes("0 rows"))&&(f=null,w=200,g="OK"),f&&this.shouldThrowOnError)throw new _T.default(f)}return{error:f,data:p,count:m,status:w,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,l,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};jg.default=ST;var NT=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eg,"__esModule",{value:!0});const kT=NT(jg);let ET=class extends kT.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${f}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Eg.default=ET;var jT=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bp,"__esModule",{value:!0});const CT=jT(Eg);let AT=class extends CT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};bp.default=AT;var LT=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kg,"__esModule",{value:!0});const mh=LT(bp);let PT=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new mh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new mh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(c.length>0){const f=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new mh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new mh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new mh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};kg.default=PT;var Ag={},Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});Lg.version=void 0;Lg.version="0.0.0-automated";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.DEFAULT_HEADERS=void 0;const TT=Lg;Ag.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${TT.version}`};var HS=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N5,"__esModule",{value:!0});const IT=HS(kg),DT=HS(bp),OT=Ag;let MT=class VS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},OT.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new IT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new VS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=Object.assign({},this.headers);return s&&(f.Prefer=`count=${s}`),new DT.default({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};N5.default=MT;var Af=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(is,"__esModule",{value:!0});is.PostgrestError=is.PostgrestBuilder=is.PostgrestTransformBuilder=is.PostgrestFilterBuilder=is.PostgrestQueryBuilder=is.PostgrestClient=void 0;const GS=Af(N5);is.PostgrestClient=GS.default;const YS=Af(kg);is.PostgrestQueryBuilder=YS.default;const KS=Af(bp);is.PostgrestFilterBuilder=KS.default;const JS=Af(Eg);is.PostgrestTransformBuilder=JS.default;const XS=Af(jg);is.PostgrestBuilder=XS.default;const QS=Af(Cg);is.PostgrestError=QS.default;var RT=is.default={PostgrestClient:GS.default,PostgrestQueryBuilder:YS.default,PostgrestFilterBuilder:KS.default,PostgrestTransformBuilder:JS.default,PostgrestBuilder:XS.default,PostgrestError:QS.default};const{PostgrestClient:FT,PostgrestQueryBuilder:aq,PostgrestFilterBuilder:oq,PostgrestTransformBuilder:lq,PostgrestBuilder:cq}=RT,$T="2.10.7",BT={"X-Client-Info":`realtime-js/${$T}`},UT="1.0.0",ZS=1e4,zT=1e3;var of;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(of||(of={}));var Cs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Cs||(Cs={}));var ja;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ja||(ja={}));var W2;(function(e){e.websocket="websocket"})(W2||(W2={}));var _u;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_u||(_u={}));class qT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:f}}}class eN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Rn||(Rn={}));const Rb=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=WT(a,e,t,i),s),{})},WT=(e,t,n,r)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?tN(s,a):H2(a)},tN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return YT(t,n)}switch(e){case Rn.bool:return HT(t);case Rn.float4:case Rn.float8:case Rn.int2:case Rn.int4:case Rn.int8:case Rn.numeric:case Rn.oid:return VT(t);case Rn.json:case Rn.jsonb:return GT(t);case Rn.timestamp:return KT(t);case Rn.abstime:case Rn.date:case Rn.daterange:case Rn.int4range:case Rn.int8range:case Rn.money:case Rn.reltime:case Rn.text:case Rn.time:case Rn.timestamptz:case Rn.timetz:case Rn.tsrange:case Rn.tstzrange:return H2(t);default:return H2(t)}},H2=e=>e,HT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},VT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},GT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},YT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>tN(t,l))}return e},KT=e=>typeof e=="string"?e.replace(" ","T"):e,nN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class fv{constructor(t,n,r={},i=ZS){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Fb||(Fb={}));class Mh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Mh.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Mh.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(s,(f,p)=>{a[f]||(c[f]=p)}),this.map(a,(f,p)=>{const m=s[f];if(m){const w=p.map(E=>E.presence_ref),g=m.map(E=>E.presence_ref),N=p.filter(E=>g.indexOf(E.presence_ref)<0),k=m.filter(E=>w.indexOf(E.presence_ref)<0);N.length>0&&(l[f]=N),k.length>0&&(c[f]=k)}else l[f]=p}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var f;const p=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(c),p.length>0){const m=t[l].map(g=>g.presence_ref),w=p.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...w)}r(l,p,c)}),this.map(a,(l,c)=>{let f=t[l];if(!f)return;const p=c.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),t[l]=f,i(l,f,c),f.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $b;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($b||($b={}));var Bb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Bb||(Bb={}));var Ub;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ub||(Ub={}));class k5{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Cs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new fv(this,ja.join,this.params,this.timeout),this.rejoinTimer=new eN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cs.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ja.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Mh(this),this.broadcastEndpointURL=nN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},f={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const w=this.bindings.postgres_changes,g=(m=w==null?void 0:w.length)!==null&&m!==void 0?m:0,N=[];for(let k=0;k<g;k++){const E=w[k],{filter:{event:b,schema:S,table:L,filter:M}}=E,Y=p&&p[k];if(Y&&Y.event===b&&Y.schema===S&&Y.table===L&&Y.filter===M)N.push(Object.assign(Object.assign({},E),{id:Y.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Cs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ja.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new fv(this,ja.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fv(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:f,join:p}=ja;if(r&&[l,c,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let w=this._onMessage(a,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var N,k,E;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((E=(k=g.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(g=>g.callback(w,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var N,k,E,b,S,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const M=g.id,Y=(N=g.filter)===null||N===void 0?void 0:N.event;return M&&((k=n.ids)===null||k===void 0?void 0:k.includes(M))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const M=(S=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return M==="*"||M===((L=n==null?void 0:n.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof w=="object"&&"ids"in w){const N=w.data,{schema:k,table:E,commit_timestamp:b,type:S,errors:L}=N;w=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:b,eventType:S,new:{},old:{},errors:L}),this._getPayloadRecords(N))}g.callback(w,r)})}_isClosed(){return this.state===Cs.closed}_isJoined(){return this.state===Cs.joined}_isJoining(){return this.state===Cs.joining}_isLeaving(){return this.state===Cs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&k5.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ja.close,{},t)}_onError(t){this._on(ja.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Rb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Rb(t.columns,t.old_record)),n}}const JT=()=>{},XT=typeof WebSocket<"u",QT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZT{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=BT,this.params={},this.timeout=ZS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=JT,this.conn=null,this.sendBuffer=[],this.serializer=new qT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>sl(async()=>{const{default:c}=await Promise.resolve().then(()=>Cf);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${W2.websocket}`,this.httpEndpoint=nN(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new eN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(XT){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new eI(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),sl(async()=>{const{default:t}=await import("./browser-C-kCwx2l.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case of.connecting:return _u.Connecting;case of.open:return _u.Open;case of.closing:return _u.Closing;default:return _u.Closed}}isConnected(){return this.connectionState()===_u.Open}channel(t,n={config:{}}){const r=new k5(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(ja.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:UT}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ja.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(zT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([QT],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class eI{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=of.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class E5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tI extends E5{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class V2 extends E5{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var nI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const rN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Cf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},rI=()=>nI(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sl(()=>Promise.resolve().then(()=>Cf),void 0)).Response:Response}),G2=e=>{if(Array.isArray(e))return e.map(n=>G2(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=G2(r)}),t};var Wu=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const hv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iI=(e,t,n)=>Wu(void 0,void 0,void 0,function*(){const r=yield rI();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new tI(hv(i),e.status||500))}).catch(i=>{t(new V2(hv(i),i))}):t(new V2(hv(e),e))}),sI=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function _p(e,t,n,r,i,s){return Wu(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,sI(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>iI(c,l,r))})})}function B0(e,t,n,r){return Wu(this,void 0,void 0,function*(){return _p(e,"GET",t,n,r)})}function sc(e,t,n,r,i){return Wu(this,void 0,void 0,function*(){return _p(e,"POST",t,r,i,n)})}function aI(e,t,n,r,i){return Wu(this,void 0,void 0,function*(){return _p(e,"PUT",t,r,i,n)})}function oI(e,t,n,r){return Wu(this,void 0,void 0,function*(){return _p(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function iN(e,t,n,r,i){return Wu(this,void 0,void 0,function*(){return _p(e,"DELETE",t,r,i,n)})}var ns=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const lI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cI{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=rN(i)}uploadOrUpdate(t,n,r,i){return ns(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},zb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:s,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),w=yield m.json();return m.ok?{data:{path:f,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(s){if(Wr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return ns(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return ns(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:zb.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:p}),w=yield m.json();return m.ok?{data:{path:s,fullPath:w.Key},error:null}:{data:null,error:w}}catch(c){if(Wr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return ns(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield sc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new E5("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Wr(r))return{data:null,error:r};throw r}})}update(t,n,r){return ns(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ns(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Wr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return ns(this,void 0,void 0,function*(){try{return{data:{path:(yield sc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Wr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return ns(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield sc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Wr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return ns(this,void 0,void 0,function*(){try{const i=yield sc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Wr(i))return{data:null,error:i};throw i}})}download(t,n){return ns(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield B0(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Wr(l))return{data:null,error:l};throw l}})}info(t){return ns(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield B0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:G2(r),error:null}}catch(r){if(Wr(r))return{data:null,error:r};throw r}})}exists(t){return ns(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield oI(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Wr(r)&&r instanceof V2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(t){return ns(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}list(t,n,r){return ns(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},lI),n),{prefix:t||""});return{data:yield sc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Wr(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const uI="2.7.1",dI={"X-Client-Info":`storage-js/${uI}`};var Td=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class fI{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},dI),n),this.fetch=rN(r)}listBuckets(){return Td(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Wr(t))return{data:null,error:t};throw t}})}getBucket(t){return Td(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Td(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Wr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Td(this,void 0,void 0,function*(){try{return{data:yield aI(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Wr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Td(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Td(this,void 0,void 0,function*(){try{return{data:yield iN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}}class hI extends fI{constructor(t,n={},r){super(t,n,r)}from(t){return new cI(this.url,this.headers,t,this.fetch)}}const pI="2.46.1";let kh="";typeof Deno<"u"?kh="deno":typeof document<"u"?kh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kh="react-native":kh="node";const mI={"X-Client-Info":`supabase-js-${kh}/${pI}`},gI={headers:mI},vI={schema:"public"},yI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wI={};var xI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const bI=e=>{let t;return e?t=e:typeof fetch>"u"?t=zS:t=fetch,(...n)=>t(...n)},_I=()=>typeof Headers>"u"?qS:Headers,SI=(e,t,n)=>{const r=bI(n),i=_I();return(s,a)=>xI(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var NI=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};function kI(e){return e.replace(/\/$/,"")}function EI(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:l,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},f),s),accessToken:()=>NI(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const sN="2.65.1",jI="http://localhost:9999",CI="supabase.auth.token",AI={"X-Client-Info":`gotrue-js/${sN}`},qb=10,Y2="X-Supabase-Api-Version",aN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function LI(e){return Math.round(Date.now()/1e3)+e}function PI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Sa=()=>typeof document<"u",hu={tested:!1,writable:!1},Rh=()=>{if(!Sa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hu.tested)return hu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hu.tested=!0,hu.writable=!0}catch{hu.tested=!0,hu.writable=!1}return hu.writable};function pv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const oN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>sl(async()=>{const{default:r}=await Promise.resolve().then(()=>Cf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},TI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lN=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Pm=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tm=async(e,t)=>{await e.removeItem(t)};function II(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,l,c,f,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)a=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),f=t.indexOf(e.charAt(p++)),r=a<<2|l>>4,i=(l&15)<<4|c>>2,s=(c&3)<<6|f,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),f!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Pg{constructor(){this.promise=new Pg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Pg.promiseConstructor=Promise;function Wb(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(II(r))}async function DI(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function OI(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function MI(e){return("0"+e.toString(16)).substr(-2)}function RI(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,MI).join("")}async function FI(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function $I(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function BI(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await FI(e);return $I(n)}async function Id(e,t,n=!1){const r=RI();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await lN(e,`${t}-code-verifier`,i);const s=await BI(r);return[s,r===s?"plain":"s256"]}const UI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zI(e){const t=e.headers.get(Y2);if(!t||!t.match(UI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class j5 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Vt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class qI extends j5{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function WI(e){return Vt(e)&&e.name==="AuthApiError"}class cN extends j5{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Hu extends j5{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class tc extends Hu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HI(e){return Vt(e)&&e.name==="AuthSessionMissingError"}class mv extends Hu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Im extends Hu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Dm extends Hu{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hb extends Hu{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class K2 extends Hu{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function gv(e){return Vt(e)&&e.name==="AuthRetryableFetchError"}class Vb extends Hu{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var VI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const yu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GI=[502,503,504];async function Gb(e){var t;if(!TI(e))throw new K2(yu(e),0);if(GI.includes(e.status))throw new K2(yu(e),e.status);let n;try{n=await e.json()}catch(s){throw new cN(yu(s),s)}let r;const i=zI(e);if(i&&i.getTime()>=aN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Vb(yu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new tc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Vb(yu(n),e.status,n.weak_password.reasons);throw new qI(yu(n),e.status||500,r)}const YI=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function nn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Y2]||(s[Y2]=aN["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await KI(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function KI(e,t,n,r,i,s){const a=YI(t,r,i,s);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new K2(yu(c),0)}if(l.ok||await Gb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Gb(c)}}function nc(e){var t;let n=null;ZI(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=LI(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Yb(e){const t=nc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function uc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function JI(e){return{data:e,error:null}}function XI(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=VI(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function QI(e){return e}function ZI(e){return e.access_token&&e.refresh_token&&e.expires_in}var eD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class tD{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=oN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await nn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await nn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:uc})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=eD(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await nn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:XI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Vt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await nn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:uc})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,l,c;try{const f={nextPage:null,lastPage:0,total:0},p=await nn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:QI});if(p.error)throw p.error;const m=await p.json(),w=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const k=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);f[`${E}Page`]=k}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(Vt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){try{return await nn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:uc})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await nn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:uc})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await nn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:uc})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await nn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await nn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}}const nD={getItem:e=>Rh()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Rh()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Rh()&&globalThis.localStorage.removeItem(e)}};function Kb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function rD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Dd={debug:!!(globalThis&&Rh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class iD extends uN{}async function sD(e,t,n){Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Dd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new iD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Dd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}rD();const aD={url:jI,storageKey:CI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},gh=30*1e3,Jb=3;async function Xb(e,t,n){return await n()}class cp{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=cp.nextInstanceID,cp.nextInstanceID+=1,this.instanceID>0&&Sa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},aD),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new tD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=oN(i.fetch),this.lock=i.lock||Xb,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Sa()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=sD:this.lock=Xb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Rh()?this.storage=nD:(this.memoryStorage={},this.storage=Kb(this.memoryStorage)):(this.memoryStorage={},this.storage=Kb(this.memoryStorage)),Sa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Sa()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Vt(t)?{error:t}:{error:new cN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await nn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:nc}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(Vt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:p,password:m,options:w}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await Id(this.storage,this.storageKey)),s=await nn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:p,password:m,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:g,code_challenge_method:N},xform:nc})}else if("phone"in t){const{phone:p,password:m,options:w}=t;s=await nn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(i=w==null?void 0:w.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:nc})}else throw new Im("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(Vt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:l}=t;n=await nn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yb})}else if("phone"in t){const{phone:s,password:a,options:l}=t;n=await nn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yb})}else throw new Im("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new mv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Vt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Pm(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await nn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:nc});if(await Tm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new mv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Vt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,l=await nn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:nc}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new mv}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(Vt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:l,options:c}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Id(this.storage,this.storageKey));const{error:m}=await nn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:f,error:p}=await nn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Im("You must provide either an email or phone number.")}catch(l){if(Vt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await nn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:nc});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(Vt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Id(this.storage,this.storageKey)),await nn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:JI})}catch(s){if(Vt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new tc;const{error:i}=await nn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Vt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await nn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:l}=await nn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Im("You must provide either an email or phone number and a type")}catch(n){if(Vt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Pm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,p))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await nn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:uc}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tc}:await nn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:uc})})}catch(n){if(Vt(n))return HI(n)&&(await this._removeSession(),await Tm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new tc;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Id(this.storage,this.storageKey));const{data:f,error:p}=await nn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:uc});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Wb(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new tc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Wb(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Vt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new tc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Vt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!Sa())throw new Dm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Dm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Hb("Not a valid PKCE flow url.");const n=pv(window.location.href);if(t){if(!n.code)throw new Hb("No code detected.");const{data:S,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Dm(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:f}=n;if(!s||!l||!a||!f)throw new Dm("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let w=p+m;c&&(w=parseInt(c));const g=w-p;g*1e3<=gh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const N=w-m;p-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,w,p):p-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,w,p);const{data:k,error:E}=await this._getUser(s);if(E)throw E;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:w,refresh_token:a,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(Vt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=pv(window.location.href);return!!(Sa()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=pv(window.location.href),n=await Pm(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(WI(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Tm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=PI(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Id(this.storage,this.storageKey,!0));try{return await nn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Vt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,c,f,p;const{data:m,error:w}=s;if(w)throw w;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await nn(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Sa()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Vt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await nn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await OI(async i=>(i>0&&await DI(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await nn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:nc})),(i,s)=>{const a=200*Math.pow(2,i);return s&&gv(s)&&Date.now()+a-r<gh})}catch(r){if(this._debug(n,"error",r),Vt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Sa()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Pm(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+qb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${qb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),gv(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new tc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Pg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new tc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),Vt(s)){const a={session:null,error:s};return gv(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await lN(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Tm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Sa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),gh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/gh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${gh}ms, refresh threshold is ${Jb} ticks`),i<=Jb&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof uN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Sa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Id(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await nn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:f}=await nn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:l}=await nn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await nn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}cp.nextInstanceID=0;const oD=cp;class lD extends oD{constructor(t){super(t)}}var cD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class uD{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=kI(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:vI,realtime:wI,auth:Object.assign(Object.assign({},yI),{storageKey:c}),global:gI},p=EI(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=SI(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new FT(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new pT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hI(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return cD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:l,debug:c},f,p){var m;const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lD({url:this.authUrl,headers:Object.assign(Object.assign({},w),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:l,debug:c,fetch:p,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(t){return new ZT(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dD=(e,t,n)=>new uD(e,t,n),fD="https://vrzgwnchqdxwgennshmu.supabase.co",hD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",Ze=dD(fD,hD,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://nimble-alfajores-99f196.netlify.app"}}),pD={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GENIUS_ACCESS_TOKEN:"your_genius_token_here",VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173"},Qb=e=>{let t;const n=new Set,r=(p,m)=>{const w=typeof p=="function"?p(t):p;if(!Object.is(w,t)){const g=t;t=m??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(N=>N(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(pD?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,c);return c},mD=e=>e?Qb(e):Qb;var dN={exports:{}},fN={},hN={exports:{}},pN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=C;function gD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vD=typeof Object.is=="function"?Object.is:gD,yD=_f.useState,wD=_f.useEffect,xD=_f.useLayoutEffect,bD=_f.useDebugValue;function _D(e,t){var n=t(),r=yD({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return xD(function(){i.value=n,i.getSnapshot=t,vv(i)&&s({inst:i})},[e,n,t]),wD(function(){return vv(i)&&s({inst:i}),e(function(){vv(i)&&s({inst:i})})},[e]),bD(n),n}function vv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vD(e,n)}catch{return!0}}function SD(e,t){return t()}var ND=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?SD:_D;pN.useSyncExternalStore=_f.useSyncExternalStore!==void 0?_f.useSyncExternalStore:ND;hN.exports=pN;var kD=hN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg=C,ED=kD;function jD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var CD=typeof Object.is=="function"?Object.is:jD,AD=ED.useSyncExternalStore,LD=Tg.useRef,PD=Tg.useEffect,TD=Tg.useMemo,ID=Tg.useDebugValue;fN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=LD(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=TD(function(){function c(g){if(!f){if(f=!0,p=g,g=r(g),i!==void 0&&a.hasValue){var N=a.value;if(i(N,g))return m=N}return m=g}if(N=m,CD(p,g))return N;var k=r(g);return i!==void 0&&i(N,k)?N:(p=g,m=k)}var f=!1,p,m,w=n===void 0?null:n;return[function(){return c(t())},w===null?void 0:function(){return c(w())}]},[t,n,r,i]);var l=AD(e,s[0],s[1]);return PD(function(){a.hasValue=!0,a.value=l},[l]),ID(l),l};dN.exports=fN;var DD=dN.exports;const OD=p3(DD),mN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GENIUS_ACCESS_TOKEN:"your_genius_token_here",VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173"},{useDebugValue:MD}=ht,{useSyncExternalStoreWithSelector:RD}=OD;let Zb=!1;const FD=e=>e;function $D(e,t=FD,n){(mN?"production":void 0)!=="production"&&n&&!Zb&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Zb=!0);const r=RD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return MD(r),r}const e_=e=>{(mN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?mD(e):e,n=(r,i)=>$D(t,r,i);return Object.assign(n,t),n},BD=e=>e?e_(e):e_,Ms=BD(e=>({user:null,session:null,loading:!0,setUser:t=>{console.log("Setting user in store:",t),e({user:t})},setSession:t=>{console.log("Setting session in store:",t),e({session:t})},signOut:async()=>{try{await Ze.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));class UD{constructor(){this.clientId="2f84f95d5e0943afb6e72b6758adedd3",this.redirectUri="http://127.0.0.1:5173",this.scopes=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-modify-playback-state","user-read-playback-state","streaming"].join(" "),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.loadTokensFromStorage(),console.log("🎵 Spotify Service Config:",{clientId:this.clientId?this.clientId.substring(0,8)+"...":"NOT SET",redirectUri:this.redirectUri||"NOT SET",hasClientId:!!this.clientId,hasRedirectUri:!!this.redirectUri})}async getAuthUrl(){console.log("🎵 getAuthUrl called, generating new auth URL..."),this.isProcessingAuth?console.log("🎵 Auth in progress, keeping existing state"):(localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log("🎵 Cleared previous auth state"));const t=this.generateRandomString(16),n=this.generateRandomString(128);localStorage.setItem("spotify_return_url",window.location.href),localStorage.setItem("spotify_auth_state",t),localStorage.setItem("spotify_code_verifier",n),console.log("🎵 Generated new auth state:",t.substring(0,8)+"..."),console.log("🎵 Using redirect URI:",this.redirectUri);const r=await this.generateCodeChallenge(n);return`https://accounts.spotify.com/authorize?${new URLSearchParams({response_type:"code",client_id:this.clientId,scope:this.scopes,redirect_uri:this.redirectUri,state:t,code_challenge_method:"S256",code_challenge:r}).toString()}`}async handleAuthCallback(t,n){if(this.isProcessingAuth)return console.log("🎵 Already processing auth, skipping..."),!1;console.log("🎵 SpotifyService: Starting handleAuthCallback..."),this.isProcessingAuth=!0;try{const r=localStorage.getItem("spotify_auth_state"),i=localStorage.getItem("spotify_code_verifier");if(console.log("🎵 SpotifyService: Auth callback data:",{receivedState:n?n.substring(0,10)+"...":"NULL",storedState:r?r.substring(0,10)+"...":"NULL",hasCodeVerifier:!!i,codeLength:t==null?void 0:t.length,receivedStateLength:n==null?void 0:n.length,storedStateLength:r==null?void 0:r.length,statesMatch:n===r}),!r)throw console.error("❌ No stored state found"),new Error("No stored state found");if(n!==r)throw console.error("❌ State mismatch:",{received:n,stored:r,receivedLength:n==null?void 0:n.length,storedLength:r==null?void 0:r.length,match:n===r}),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),new Error("State mismatch - auth state was corrupted. Please try connecting to Spotify again.");if(!i)throw console.error("❌ Code verifier not found"),new Error("Code verifier not found");console.log("🎵 SpotifyService: All validations passed, making token request...");const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:this.redirectUri,client_id:this.clientId,code_verifier:i})});if(console.log("🎵 SpotifyService: Token request response status:",s.status),!s.ok){const l=await s.text();throw console.error("❌ SpotifyService: Token request failed:",s.status,l),new Error(`Failed to exchange code for tokens: ${s.status} ${l}`)}console.log("🎵 SpotifyService: Token request successful, parsing response...");const a=await s.json();return console.log("🎵 SpotifyService: Token data received:",{hasAccessToken:!!a.access_token,hasRefreshToken:!!a.refresh_token,expiresIn:a.expires_in}),this.accessToken=a.access_token,this.refreshToken=a.refresh_token,this.tokenExpiry=Date.now()+a.expires_in*1e3,console.log("🎵 SpotifyService: Tokens stored in memory, saving to localStorage..."),this.saveTokensToStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log("🎵 SpotifyService: Auth callback completed successfully!"),!0}catch(r){return console.error("Error in Spotify auth callback:",r),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),!1}finally{this.isProcessingAuth=!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken,client_id:this.clientId})});if(!t.ok)throw new Error("Failed to refresh access token");const n=await t.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,n.refresh_token&&(this.refreshToken=n.refresh_token),this.saveTokensToStorage(),!0}catch(t){return console.error("Error refreshing access token:",t),this.logout(),!1}}async ensureValidToken(){return this.accessToken?this.tokenExpiry&&Date.now()>=this.tokenExpiry-6e4?await this.refreshAccessToken():!0:!1}async apiRequest(t,n={}){if(!await this.ensureValidToken())throw new Error("No valid Spotify token available");const r=await fetch(`https://api.spotify.com/v1${t}`,{...n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",...n.headers}});if(!r.ok){if(r.status===401&&await this.refreshAccessToken())return this.apiRequest(t,n);throw new Error(`Spotify API error: ${r.status} ${r.statusText}`)}return r.headers.get("content-length")==="0"||r.status===204?null:r.json()}async getCurrentUser(){return this.apiRequest("/me")}async searchTracks(t,n=20){const r=new URLSearchParams({q:t,type:"track",limit:n.toString()});return(await this.apiRequest(`/search?${r}`)).tracks.items}async getTrack(t){return this.apiRequest(`/tracks/${t}`)}async getAudioFeatures(t){return this.apiRequest(`/audio-features/${t}`)}async createPlaylist(t,n,r=!1){const i=await this.getCurrentUser();return this.apiRequest(`/users/${i.id}/playlists`,{method:"POST",body:JSON.stringify({name:t,description:n,public:r})})}async addTracksToPlaylist(t,n){await this.apiRequest(`/playlists/${t}/tracks`,{method:"POST",body:JSON.stringify({uris:n})})}async playTrack(t,n){const r={uris:[t]};n&&(r.device_id=n),await this.apiRequest("/me/player/play",{method:"PUT",body:JSON.stringify(r)})}async pausePlayback(){await this.apiRequest("/me/player/pause",{method:"PUT"})}async resumePlayback(){await this.apiRequest("/me/player/play",{method:"PUT"})}async getPlaybackState(){try{return await this.apiRequest("/me/player")}catch{return null}}async getUserPlaylists(t=50){return(await this.apiRequest(`/me/playlists?limit=${t}`)).items}async getPlaylistTracks(t,n=100){return(await this.apiRequest(`/playlists/${t}/tracks?limit=${n}`)).items.map(i=>i.track)}isAuthenticated(){return!!(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}logout(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.clearTokensFromStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}clearAuthState(){console.log("🎵 Clearing Spotify auth state manually"),this.isProcessingAuth=!1,localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}async generateCodeChallenge(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(r)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}generateRandomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((i,s)=>i+n[s%n.length],"")}saveTokensToStorage(){this.accessToken&&localStorage.setItem("spotify_access_token",this.accessToken),this.refreshToken&&localStorage.setItem("spotify_refresh_token",this.refreshToken),this.tokenExpiry&&localStorage.setItem("spotify_token_expiry",this.tokenExpiry.toString())}loadTokensFromStorage(){this.accessToken=localStorage.getItem("spotify_access_token"),this.refreshToken=localStorage.getItem("spotify_refresh_token");const t=localStorage.getItem("spotify_token_expiry");this.tokenExpiry=t?parseInt(t):null}clearTokensFromStorage(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry")}}const qn=new UD;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Gn=(e,t)=>{const n=C.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...f},p)=>C.createElement("svg",{ref:p,...zD,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${qD(e)}`,l].join(" "),...f},[...t.map(([m,w])=>C.createElement(m,w)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Gn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Gn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=Gn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=Gn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=Gn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=Gn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Gn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=Gn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=Gn("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Gn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Gn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=Gn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=Gn("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Gn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Gn("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Gn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Gn("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Gn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Gn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Gn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=Gn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Gn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Gn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Gn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Gn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function JD(){const[e,t]=C.useState([]),[n,r]=C.useState(!1),i=Ra(),{user:s}=Ms(),[a,l]=C.useState(null);C.useEffect(()=>{if(s)return console.log("Inicializando NotificationBell para usuario:",s.id),c(),f(),()=>{a&&(console.log("Limpiando suscripción de notificaciones"),a.unsubscribe())}},[s]);const c=async()=>{const{data:m,error:w}=await Ze.from("notifications").select("*").eq("user_id",s==null?void 0:s.id).eq("read",!1).order("created_at",{ascending:!1});if(w){console.error("Error fetching notifications:",w);return}t(m||[])},f=async()=>{try{a&&await a.unsubscribe(),console.log("Configurando suscripción en tiempo real para:",s==null?void 0:s.id);const m=Ze.channel(`notifications:${s==null?void 0:s.id}`,{config:{broadcast:{self:!0}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Nueva notificación recibida:",w);const g=w.new;t(N=>[g,...N]),Pe.custom(N=>h.jsxs("div",{className:`${N.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[h.jsx(n_,{className:"h-6 w-6 text-indigo-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:g.title}),h.jsx("p",{className:"text-sm text-gray-500",children:g.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Notificación actualizada:",w),t(g=>g.map(N=>N.id===w.new.id?w.new:N))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},w=>{console.log("Notificación eliminada:",w),t(g=>g.filter(N=>N.id!==w.old.id))}),console.log("Iniciando suscripción..."),await m.subscribe(w=>{console.log("Estado de suscripción:",w)}),l(m)}catch(m){console.error("Error al configurar suscripción en tiempo real:",m)}},p=async(m,w)=>{try{const{error:g}=await Ze.rpc("handle_group_invitation",{p_group_member_id:m.data.group_member_id,p_accept:w});if(g)throw g;await Ze.from("notifications").update({read:!0}).eq("id",m.id),t(N=>N.filter(k=>k.id!==m.id)),Pe.success(w?"Invitación aceptada":"Invitación rechazada"),w&&i(`/group/${m.data.group_id}`)}catch(g){Pe.error(g.message)}};return h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[h.jsx(n_,{className:"w-6 h-6"}),e.length>0&&h.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&h.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:h.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?h.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(m=>h.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[h.jsx("h3",{className:"font-semibold text-gray-900",children:m.title}),h.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.message}),m.type==="group_invitation"&&h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>p(m,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),h.jsx("button",{onClick:()=>p(m,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},m.id))})})]})}function XD(){const{user:e,signOut:t}=Ms(),n=Ra(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return h.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsxs("div",{className:"flex items-center justify-between h-16",children:[h.jsxs(Ec,{to:"/",className:"flex items-center space-x-2",children:[h.jsx(GD,{className:"h-8 w-8"}),h.jsx("span",{className:"font-bold text-xl",children:"Band Manager"})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[e&&h.jsx(JD,{}),e?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-sm",children:e.email}),h.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[h.jsx(X2,{className:"h-5 w-5"}),h.jsx("span",{children:"Sign Out"})]})]}):h.jsxs("div",{className:"space-x-4",children:[h.jsx(Ec,{to:"/login",className:"hover:text-indigo-200 transition-colors",children:"Login"}),h.jsx(Ec,{to:"/register",className:"hover:text-indigo-200 transition-colors",children:"Register"}),!1]})]})]})})})}function Vn({label:e,error:t,className:n="",...r}){return h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),h.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&h.jsx("p",{className:"text-sm text-red-600",children:t})]})}function wt({children:e,loading:t,variant:n="primary",fullWidth:r,className:i="",...s}){const a="flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",l={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return h.jsxs("button",{className:`${a} ${l[n]} ${r?"w-full":""} ${i}`,disabled:t,...s,children:[t&&h.jsx(go,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function QD(){var w;const[e,t]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),a=Ra(),l=wo(),c=(w=l.state)==null?void 0:w.returnTo,{user:f,setUser:p}=Ms();console.log("Login component state:",{returnTo:c,location:l}),C.useEffect(()=>{if(f){let g=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){console.log("🎵 Login: Detected Spotify callback in returnTo:",c);const N=new URL(c,window.location.origin),k=N.searchParams.get("code"),E=N.searchParams.get("state"),b=N.searchParams.get("error");k&&E?(console.log("🎵 Login: Extracting Spotify params and redirecting to root"),g=`/?code=${k}&state=${E}`):b?(console.log("🎵 Login: Spotify error detected:",b),g=`/?error=${b}`):g=N.pathname}console.log("User authenticated, redirecting to:",g),a(g,{replace:!0})}},[f,c,a]);const m=async g=>{g.preventDefault(),s(!0);try{const{data:N,error:k}=await Ze.auth.signInWithPassword({email:e,password:n});if(k)throw k;p(N.user),Pe.success("Successfully logged in!");let E=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){console.log("🎵 Login: handleLogin detected Spotify callback in returnTo:",c);const b=new URL(c,window.location.origin),S=b.searchParams.get("code"),L=b.searchParams.get("state"),M=b.searchParams.get("error");S&&L?(console.log("🎵 Login: handleLogin extracting Spotify params and redirecting to root"),E=`/?code=${S}&state=${L}`):M?(console.log("🎵 Login: handleLogin Spotify error detected:",M),E=`/?error=${M}`):E=b.pathname}console.log("Login successful, redirecting to:",E),a(E,{replace:!0})}catch(N){Pe.error(N.message||"Failed to login")}finally{s(!1)}};return f?null:h.jsx("div",{className:"max-w-md mx-auto mt-16",children:h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),h.jsxs("form",{onSubmit:m,className:"space-y-6",children:[h.jsx(Vn,{label:"Email",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"your@email.com"}),h.jsx(Vn,{label:"Password",type:"password",value:n,onChange:g=>r(g.target.value),required:!0,placeholder:"••••••••"}),h.jsx(wt,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),h.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:h.jsx(Ec,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"¿Olvidaste tu contraseña?"})}),h.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",h.jsx(Ec,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function ZD(){const[e]=FS(),t=e.get("email");e.get("token");const[n,r]=C.useState(t||""),[i,s]=C.useState(""),[a,l]=C.useState(""),[c,f]=C.useState(!1),p=Ra(),{user:m}=Ms();C.useEffect(()=>{m&&p("/")},[m,p]);const w=async g=>{g.preventDefault(),f(!0);try{const{data:N,error:k}=await Ze.auth.signUp({email:n,password:i,options:{data:{name:a,role:"user"}}});if(k)throw k;if(N.user){const{data:E,error:b}=await Ze.rpc("create_new_user",{user_id:N.user.id,user_email:n,user_name:a,user_role:"user"});if(b)throw b;Pe.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(N){console.error("Registration error:",N),N.message.includes("User already registered")?Pe.error("This email is already registered. Please try logging in instead."):N.message.includes("rate limit")?Pe.error("Too many registration attempts. Please try again in a few minutes."):Pe.error("Registration failed. Please try again.")}finally{f(!1)}};return m?null:h.jsx("div",{className:"max-w-md mx-auto mt-16",children:h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),h.jsxs("form",{onSubmit:w,className:"space-y-6",children:[h.jsx(Vn,{label:"Name",type:"text",value:a,onChange:g=>l(g.target.value),required:!0,placeholder:"John Doe"}),h.jsx(Vn,{label:"Email",type:"email",value:n,onChange:g=>r(g.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),h.jsx(Vn,{label:"Password",type:"password",value:i,onChange:g=>s(g.target.value),required:!0,placeholder:"••••••••",minLength:6}),h.jsx(wt,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),h.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",h.jsx(Ec,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var eO=Object.defineProperty,tO=(e,t,n)=>t in e?eO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yv=(e,t,n)=>(tO(e,typeof t!="symbol"?t+"":t,n),n);let nO=class{constructor(){yv(this,"current",this.detect()),yv(this,"handoffState","pending"),yv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Tu=new nO;function Dg(e){return Tu.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Og(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Fc(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Og(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Fc();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function A5(){let[e]=C.useState(Fc);return C.useEffect(()=>()=>e.dispose(),[e]),e}let Ri=(e,t)=>{Tu.isServer?C.useEffect(e,t):C.useLayoutEffect(e,t)};function Vu(e){let t=C.useRef(e);return Ri(()=>{t.current=e},[e]),t}let lr=function(e){let t=Vu(e);return ht.useCallback((...n)=>t.current(...n),[t])},rO=C.createContext(void 0);function iO(){return C.useContext(rO)}function Z2(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ac(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ac),r}var H0=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(H0||{}),mc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(mc||{});function ia(){let e=aO();return C.useCallback(t=>sO({mergeRefs:e,...t}),[e])}function sO({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??oO;let c=vN(t,e);if(s)return Om(c,n,r,a,l);let f=i??0;if(f&2){let{static:p=!1,...m}=c;if(p)return Om(m,n,r,a,l)}if(f&1){let{unmount:p=!0,...m}=c;return Ac(p?0:1,{0(){return null},1(){return Om({...m,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Om(c,n,r,a,l)}function Om(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=wv(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let w=!1,g=[];for(let[N,k]of Object.entries(t))typeof k=="boolean"&&(w=!0),k===!0&&g.push(N.replace(/([A-Z])/g,E=>`-${E.toLowerCase()}`));if(w){m["data-headlessui-state"]=g.join(" ");for(let N of g)m[`data-${N}`]=""}}if(s===C.Fragment&&(Object.keys(wu(c)).length>0||Object.keys(wu(m)).length>0))if(!C.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(wu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(wu(c)).concat(Object.keys(wu(m))).map(w=>`  - ${w}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(w=>`  - ${w}`).join(`
`)].join(`
`))}else{let w=p.props,g=w==null?void 0:w.className,N=typeof g=="function"?(...b)=>Z2(g(...b),c.className):Z2(g,c.className),k=N?{className:N}:{},E=vN(p.props,wu(wv(c,["ref"])));for(let b in m)b in E&&delete m[b];return C.cloneElement(p,Object.assign({},E,m,f,{ref:i(lO(p),f.ref)},k))}return C.createElement(s,Object.assign({},wv(c,["ref"]),s!==C.Fragment&&f,s!==C.Fragment&&m),p)}function aO(){let e=C.useRef([]),t=C.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function oO(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function vN(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function ds(e){var t;return Object.assign(C.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function wu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function wv(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function lO(e){return ht.version.split(".")[0]>="19"?e.props.ref:e.ref}let cO="span";var V0=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(V0||{});function uO(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return ia()({ourProps:s,theirProps:i,slot:{},defaultTag:cO,name:"Hidden"})}let ey=ds(uO),yN=Symbol();function dO(e,t=!0){return Object.assign(e,{[yN]:t})}function xo(...e){let t=C.useRef(e);C.useEffect(()=>{t.current=e},[e]);let n=lr(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[yN]))?void 0:n}let L5=C.createContext(null);L5.displayName="DescriptionContext";function wN(){let e=C.useContext(L5);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,wN),t}return e}function fO(){let[e,t]=C.useState([]);return[e.length>0?e.join(" "):void 0,C.useMemo(()=>function(n){let r=lr(s=>(t(a=>[...a,s]),()=>t(a=>{let l=a.slice(),c=l.indexOf(s);return c!==-1&&l.splice(c,1),l}))),i=C.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return ht.createElement(L5.Provider,{value:i},n.children)},[t])]}let hO="p";function pO(e,t){let n=C.useId(),r=iO(),{id:i=`headlessui-description-${n}`,...s}=e,a=wN(),l=xo(t);Ri(()=>a.register(i),[i,a.register]);let c=r||!1,f=C.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),p={ref:l,...a.props,id:i};return ia()({ourProps:p,theirProps:s,slot:f,defaultTag:hO,name:a.name||"Description"})}let mO=ds(pO),gO=Object.assign(mO,{});var xN=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(xN||{});let vO=C.createContext(()=>{});function yO({value:e,children:t}){return ht.createElement(vO.Provider,{value:e},t)}let wO=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function bN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=t[i].call(n,...s);a&&(n=a,r.forEach(l=>l()))}}}function _N(e){return C.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let xO=new wO(()=>bN(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Lf(e,t){let n=xO.get(t),r=C.useId(),i=_N(n);if(Ri(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let ty=new Map,Fh=new Map;function a_(e){var t;let n=(t=Fh.get(e))!=null?t:0;return Fh.set(e,n+1),n!==0?()=>o_(e):(ty.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>o_(e))}function o_(e){var t;let n=(t=Fh.get(e))!=null?t:1;if(n===1?Fh.delete(e):Fh.set(e,n-1),n!==1)return;let r=ty.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,ty.delete(e))}function bO(e,{allowed:t,disallowed:n}={}){let r=Lf(e,"inert-others");Ri(()=>{var i,s;if(!r)return;let a=Fc();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(a_(c));let l=(s=t==null?void 0:t())!=null?s:[];for(let c of l){if(!c)continue;let f=Dg(c);if(!f)continue;let p=c.parentElement;for(;p&&p!==f.body;){for(let m of p.children)l.some(w=>m.contains(w))||a.add(a_(m));p=p.parentElement}}return a.dispose},[r,t,n])}function _O(e,t,n){let r=Vu(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});C.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let s=Fc();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[t,r,e])}let G0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),SO=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ko=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Ko||{}),ny=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ny||{}),NO=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(NO||{});function kO(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(G0)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function EO(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(SO)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var SN=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(SN||{});function jO(e,t=0){var n;return e===((n=Dg(e))==null?void 0:n.body)?!1:Ac(t,{0(){return e.matches(G0)},1(){let r=e;for(;r!==null;){if(r.matches(G0))return!0;r=r.parentElement}return!1}})}var CO=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(CO||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Zo(e){e==null||e.focus({preventScroll:!0})}let AO=["textarea","input"].join(",");function LO(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,AO))!=null?n:!1}function PO(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function $h(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?PO(e):e:t&64?EO(e):kO(e);i.length>0&&a.length>1&&(a=a.filter(g=>!i.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===g:N===g))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,m=a.length,w;do{if(p>=m||p+m<=0)return 0;let g=c+p;if(t&16)g=(g+m)%m;else{if(g<0)return 3;if(g>=m)return 1}w=a[g],w==null||w.focus(f),p+=l}while(w!==s.activeElement);return t&6&&LO(w)&&w.select(),2}function NN(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function TO(){return/Android/gi.test(window.navigator.userAgent)}function IO(){return NN()||TO()}function vh(e,t,n,r){let i=Vu(n);C.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function kN(e,t,n,r){let i=Vu(n);C.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const l_=30;function DO(e,t,n){let r=Lf(e,"outside-click"),i=Vu(n),s=C.useCallback(function(c,f){if(c.defaultPrevented)return;let p=f(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let m=function w(g){return typeof g=="function"?w(g()):Array.isArray(g)||g instanceof Set?g:[g]}(t);for(let w of m)if(w!==null&&(w.contains(p)||c.composed&&c.composedPath().includes(w)))return;return!jO(p,SN.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),a=C.useRef(null);vh(r,"pointerdown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),vh(r,"mousedown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),vh(r,"click",c=>{IO()||a.current&&(s(c,()=>a.current),a.current=null)},!0);let l=C.useRef({x:0,y:0});vh(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),vh(r,"touchend",c=>{let f={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=l_||Math.abs(f.y-l.current.y)>=l_))return s(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),kN(r,"blur",c=>s(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Sp(...e){return C.useMemo(()=>Dg(...e),[...e])}function EN(e,t,n,r){let i=Vu(n);C.useEffect(()=>{e=e??window;function s(a){i.current(a)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function OO(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function MO(){return NN()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Fc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),p=e.querySelector(f);p&&!r(p)&&(a=p)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function RO(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function FO(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Au=bN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Fc(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:FO(n)},i=[MO(),OO(),RO()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Au.subscribe(()=>{let e=Au.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Au.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Au.dispatch("TEARDOWN",n)}});function $O(e,t,n=()=>({containers:[]})){let r=_N(Au),i=t?r.get(t):void 0,s=i?i.count>0:!1;return Ri(()=>{if(!(!t||!e))return Au.dispatch("PUSH",t,n),()=>Au.dispatch("POP",t,n)},[e,t]),s}function BO(e,t,n=()=>[document.body]){let r=Lf(e,"scroll-lock");$O(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function UO(e=0){let[t,n]=C.useState(e),r=C.useCallback(c=>n(c),[t]),i=C.useCallback(c=>n(f=>f|c),[t]),s=C.useCallback(c=>(t&c)===c,[t]),a=C.useCallback(c=>n(f=>f&~c),[n]),l=C.useCallback(c=>n(f=>f^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:l}}var zO={},c_,u_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((c_=process==null?void 0:zO)==null?void 0:c_.NODE_ENV)==="test"&&typeof((u_=Element==null?void 0:Element.prototype)==null?void 0:u_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var qO=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(qO||{});function WO(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function HO(e,t,n,r){let[i,s]=C.useState(n),{hasFlag:a,addFlag:l,removeFlag:c}=UO(e&&i?3:0),f=C.useRef(!1),p=C.useRef(!1),m=A5();return Ri(()=>{var w;if(e){if(n&&s(!0),!t){n&&l(3);return}return(w=r==null?void 0:r.start)==null||w.call(r,n),VO(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){p.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var g;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,c(7),n||s(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,m]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function VO(e,{prepare:t,run:n,done:r,inFlight:i}){let s=Fc();return YO(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(GO(e,r))})}),s.dispose}function GO(e,t){var n,r;let i=Fc();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{s||t()}),i.dispose)}function YO(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function P5(e,t){let n=C.useRef([]),r=lr(e);C.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}let Mg=C.createContext(null);Mg.displayName="OpenClosedContext";var Aa=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Aa||{});function Rg(){return C.useContext(Mg)}function KO({value:e,children:t}){return ht.createElement(Mg.Provider,{value:e},t)}function JO({children:e}){return ht.createElement(Mg.Provider,{value:null},e)}function XO(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let dc=[];XO(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||dc[0]===t.target)return;let n=t.target;n=n.closest(G0),dc.unshift(n??t.target),dc=dc.filter(r=>r!=null&&r.isConnected),dc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function jN(e){let t=lr(e),n=C.useRef(!1);C.useEffect(()=>(n.current=!1,()=>{n.current=!0,Og(()=>{n.current&&t()})}),[t])}function QO(){let e=typeof document>"u";return"useSyncExternalStore"in qv?(t=>t.useSyncExternalStore)(qv)(()=>()=>{},()=>!1,()=>!e):!1}function Np(){let e=QO(),[t,n]=C.useState(Tu.isHandoffComplete);return t&&Tu.isHandoffComplete===!1&&n(!1),C.useEffect(()=>{t!==!0&&n(!0)},[t]),C.useEffect(()=>Tu.handoff(),[]),e?!1:t}let CN=C.createContext(!1);function ZO(){return C.useContext(CN)}function d_(e){return ht.createElement(CN.Provider,{value:e.force},e.children)}function eM(e){let t=ZO(),n=C.useContext(LN),r=Sp(e),[i,s]=C.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(Tu.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return C.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),C.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),i}let AN=C.Fragment,tM=ds(function(e,t){let n=e,r=C.useRef(null),i=xo(dO(m=>{r.current=m}),t),s=Sp(r),a=eM(r),[l]=C.useState(()=>{var m;return Tu.isServer?null:(m=s==null?void 0:s.createElement("div"))!=null?m:null}),c=C.useContext(ry),f=Np();Ri(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Ri(()=>{if(l&&c)return c.register(l)},[c,l]),jN(()=>{var m;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let p=ia();return f?!a||!l?null:Cu.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:AN,name:"Portal"}),l):null});function nM(e,t){let n=xo(t),{enabled:r=!0,...i}=e,s=ia();return r?ht.createElement(tM,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:AN,name:"Portal"})}let rM=C.Fragment,LN=C.createContext(null);function iM(e,t){let{target:n,...r}=e,i={ref:xo(t)},s=ia();return ht.createElement(LN.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:rM,name:"Popover.Group"}))}let ry=C.createContext(null);function sM(){let e=C.useContext(ry),t=C.useRef([]),n=lr(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=lr(s=>{let a=t.current.indexOf(s);a!==-1&&t.current.splice(a,1),e&&e.unregister(s)}),i=C.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,C.useMemo(()=>function({children:s}){return ht.createElement(ry.Provider,{value:i},s)},[i])]}let aM=ds(nM),PN=ds(iM),oM=Object.assign(aM,{Group:PN});function lM(e,t=typeof document<"u"?document.defaultView:null,n){let r=Lf(e,"escape");EN(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===xN.Escape&&n(i))})}function cM(){var e;let[t]=C.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=C.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ri(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function uM({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Sp(n),i=lr(()=>{var s,a;let l=[];for(let c of e)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||l.some(f=>c.contains(f))||l.push(c));return l});return{resolveContainers:i,contains:lr(s=>i().some(a=>a.contains(s)))}}let TN=C.createContext(null);function f_({children:e,node:t}){let[n,r]=C.useState(null),i=IN(t??n);return ht.createElement(TN.Provider,{value:i},e,i===null&&ht.createElement(ey,{features:V0.Hidden,ref:s=>{var a,l;if(s){for(let c of(l=(a=Dg(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(s)){r(c);break}}}}))}function IN(e=null){var t;return(t=C.useContext(TN))!=null?t:e}function T5(){let e=C.useRef(!1);return Ri(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Eh=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Eh||{});function dM(){let e=C.useRef(0);return kN(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function DN(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let fM="div";var Su=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Su||{});function hM(e,t){let n=C.useRef(null),r=xo(n,t),{initialFocus:i,initialFocusFallback:s,containers:a,features:l=15,...c}=e;Np()||(l=0);let f=Sp(n);vM(l,{ownerDocument:f});let p=yM(l,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:s});wM(l,{ownerDocument:f,container:n,containers:a,previousActiveElement:p});let m=dM(),w=lr(S=>{let L=n.current;L&&(M=>M())(()=>{Ac(m.current,{[Eh.Forwards]:()=>{$h(L,Ko.First,{skipElements:[S.relatedTarget,s]})},[Eh.Backwards]:()=>{$h(L,Ko.Last,{skipElements:[S.relatedTarget,s]})}})})}),g=Lf(!!(l&2),"focus-trap#tab-lock"),N=A5(),k=C.useRef(!1),E={ref:r,onKeyDown(S){S.key=="Tab"&&(k.current=!0,N.requestAnimationFrame(()=>{k.current=!1}))},onBlur(S){if(!(l&4))return;let L=DN(a);n.current instanceof HTMLElement&&L.add(n.current);let M=S.relatedTarget;M instanceof HTMLElement&&M.dataset.headlessuiFocusGuard!=="true"&&(ON(L,M)||(k.current?$h(n.current,Ac(m.current,{[Eh.Forwards]:()=>Ko.Next,[Eh.Backwards]:()=>Ko.Previous})|Ko.WrapAround,{relativeTo:S.target}):S.target instanceof HTMLElement&&Zo(S.target)))}},b=ia();return ht.createElement(ht.Fragment,null,g&&ht.createElement(ey,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:V0.Focusable}),b({ourProps:E,theirProps:c,defaultTag:fM,name:"FocusTrap"}),g&&ht.createElement(ey,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:w,features:V0.Focusable}))}let pM=ds(hM),mM=Object.assign(pM,{features:Su});function gM(e=!0){let t=C.useRef(dc.slice());return P5(([n],[r])=>{r===!0&&n===!1&&Og(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=dc.slice())},[e,dc,t]),lr(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function vM(e,{ownerDocument:t}){let n=!!(e&8),r=gM(n);P5(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Zo(r())},[n]),jN(()=>{n&&Zo(r())})}function yM(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=C.useRef(null),a=Lf(!!(e&1),"focus-trap#initial-focus"),l=T5();return P5(()=>{if(e===0)return;if(!a){i!=null&&i.current&&Zo(i.current);return}let c=n.current;c&&Og(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){s.current=f;return}}else if(c.contains(f)){s.current=f;return}if(r!=null&&r.current)Zo(r.current);else{if(e&16){if($h(c,Ko.First|Ko.AutoFocus)!==ny.Error)return}else if($h(c,Ko.First)!==ny.Error)return;if(i!=null&&i.current&&(Zo(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,a,e]),s}function wM(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=T5(),a=!!(e&4);EN(t==null?void 0:t.defaultView,"focus",l=>{if(!a||!s.current)return;let c=DN(r);n.current instanceof HTMLElement&&c.add(n.current);let f=i.current;if(!f)return;let p=l.target;p&&p instanceof HTMLElement?ON(c,p)?(i.current=p,Zo(p)):(l.preventDefault(),l.stopPropagation(),Zo(f)):Zo(i.current)},!0)}function ON(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function MN(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:FN)!==C.Fragment||ht.Children.count(e.children)===1}let Fg=C.createContext(null);Fg.displayName="TransitionContext";var xM=(e=>(e.Visible="visible",e.Hidden="hidden",e))(xM||{});function bM(){let e=C.useContext(Fg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function _M(){let e=C.useContext($g);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let $g=C.createContext(null);$g.displayName="NestingContext";function Bg(e){return"children"in e?Bg(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function RN(e,t){let n=Vu(e),r=C.useRef([]),i=T5(),s=A5(),a=lr((g,N=mc.Hidden)=>{let k=r.current.findIndex(({el:E})=>E===g);k!==-1&&(Ac(N,{[mc.Unmount](){r.current.splice(k,1)},[mc.Hidden](){r.current[k].state="hidden"}}),s.microTask(()=>{var E;!Bg(r)&&i.current&&((E=n.current)==null||E.call(n))}))}),l=lr(g=>{let N=r.current.find(({el:k})=>k===g);return N?N.state!=="visible"&&(N.state="visible"):r.current.push({el:g,state:"visible"}),()=>a(g,mc.Unmount)}),c=C.useRef([]),f=C.useRef(Promise.resolve()),p=C.useRef({enter:[],leave:[]}),m=lr((g,N,k)=>{c.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([E])=>E!==g)),t==null||t.chains.current[N].push([g,new Promise(E=>{c.current.push(E)})]),t==null||t.chains.current[N].push([g,new Promise(E=>{Promise.all(p.current[N].map(([b,S])=>S)).then(()=>E())})]),N==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(N)):k(N)}),w=lr((g,N,k)=>{Promise.all(p.current[N].splice(0).map(([E,b])=>b)).then(()=>{var E;(E=c.current.shift())==null||E()}).then(()=>k(N))});return C.useMemo(()=>({children:r,register:l,unregister:a,onStart:m,onStop:w,wait:f,chains:p}),[l,a,r,m,w,p,f])}let FN=C.Fragment,$N=H0.RenderStrategy;function SM(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:f,enterFrom:p,enterTo:m,entered:w,leave:g,leaveFrom:N,leaveTo:k,...E}=e,[b,S]=C.useState(null),L=C.useRef(null),M=MN(e),Y=xo(...M?[L,t,S]:t===null?[]:[t]),oe=(n=E.unmount)==null||n?mc.Unmount:mc.Hidden,{show:Z,appear:R,initial:ee}=bM(),[ae,O]=C.useState(Z?"visible":"hidden"),U=_M(),{register:K,unregister:J}=U;Ri(()=>K(L),[K,L]),Ri(()=>{if(oe===mc.Hidden&&L.current){if(Z&&ae!=="visible"){O("visible");return}return Ac(ae,{hidden:()=>J(L),visible:()=>K(L)})}},[ae,L,K,J,Z,oe]);let xe=Np();Ri(()=>{if(M&&xe&&ae==="visible"&&L.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[L,ae,xe,M]);let ye=ee&&!R,Q=R&&Z&&ee,$=C.useRef(!1),q=RN(()=>{$.current||(O("hidden"),J(L))},U),se=lr(ke=>{$.current=!0;let Ee=ke?"enter":"leave";q.onStart(L,Ee,te=>{te==="enter"?s==null||s():te==="leave"&&(l==null||l())})}),Ae=lr(ke=>{let Ee=ke?"enter":"leave";$.current=!1,q.onStop(L,Ee,te=>{te==="enter"?a==null||a():te==="leave"&&(c==null||c())}),Ee==="leave"&&!Bg(q)&&(O("hidden"),J(L))});C.useEffect(()=>{M&&i||(se(Z),Ae(Z))},[Z,M,i]);let P=!(!i||!M||!xe||ye),[,H]=HO(P,b,Z,{start:se,end:Ae}),re=wu({ref:Y,className:((r=Z2(E.className,Q&&f,Q&&p,H.enter&&f,H.enter&&H.closed&&p,H.enter&&!H.closed&&m,H.leave&&g,H.leave&&!H.closed&&N,H.leave&&H.closed&&k,!H.transition&&Z&&w))==null?void 0:r.trim())||void 0,...WO(H)}),ce=0;ae==="visible"&&(ce|=Aa.Open),ae==="hidden"&&(ce|=Aa.Closed),H.enter&&(ce|=Aa.Opening),H.leave&&(ce|=Aa.Closing);let he=ia();return ht.createElement($g.Provider,{value:q},ht.createElement(KO,{value:ce},he({ourProps:re,theirProps:E,defaultTag:FN,features:$N,visible:ae==="visible",name:"Transition.Child"})))}function NM(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,a=C.useRef(null),l=MN(e),c=xo(...l?[a,t]:t===null?[]:[t]);Np();let f=Rg();if(n===void 0&&f!==null&&(n=(f&Aa.Open)===Aa.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=C.useState(n?"visible":"hidden"),w=RN(()=>{n||m("hidden")}),[g,N]=C.useState(!0),k=C.useRef([n]);Ri(()=>{g!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),N(!1))},[k,n]);let E=C.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);Ri(()=>{n?m("visible"):!Bg(w)&&a.current!==null&&m("hidden")},[n,w]);let b={unmount:i},S=lr(()=>{var Y;g&&N(!1),(Y=e.beforeEnter)==null||Y.call(e)}),L=lr(()=>{var Y;g&&N(!1),(Y=e.beforeLeave)==null||Y.call(e)}),M=ia();return ht.createElement($g.Provider,{value:w},ht.createElement(Fg.Provider,{value:E},M({ourProps:{...b,as:C.Fragment,children:ht.createElement(BN,{ref:c,...b,...s,beforeEnter:S,beforeLeave:L})},theirProps:{},defaultTag:C.Fragment,features:$N,visible:p==="visible",name:"Transition"})))}function kM(e,t){let n=C.useContext(Fg)!==null,r=Rg()!==null;return ht.createElement(ht.Fragment,null,!n&&r?ht.createElement(iy,{ref:t,...e}):ht.createElement(BN,{ref:t,...e}))}let iy=ds(NM),BN=ds(SM),I5=ds(kM),EM=Object.assign(iy,{Child:I5,Root:iy});var jM=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(jM||{}),CM=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(CM||{});let AM={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},D5=C.createContext(null);D5.displayName="DialogContext";function Ug(e){let t=C.useContext(D5);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ug),n}return t}function LM(e,t){return Ac(t.type,AM,e,t)}let h_=ds(function(e,t){let n=C.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:p=!1,...m}=e,w=C.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(w.current||(w.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=Rg();i===void 0&&g!==null&&(i=(g&Aa.Open)===Aa.Open);let N=C.useRef(null),k=xo(N,t),E=Sp(N),b=i?0:1,[S,L]=C.useReducer(LM,{titleId:null,descriptionId:null,panelRef:C.createRef()}),M=lr(()=>s(!1)),Y=lr(Ae=>L({type:0,id:Ae})),oe=Np()?b===0:!1,[Z,R]=sM(),ee={get current(){var Ae;return(Ae=S.panelRef.current)!=null?Ae:N.current}},ae=IN(),{resolveContainers:O}=uM({mainTreeNode:ae,portals:Z,defaultContainers:[ee]}),U=g!==null?(g&Aa.Closing)===Aa.Closing:!1;bO(f||U?!1:oe,{allowed:lr(()=>{var Ae,P;return[(P=(Ae=N.current)==null?void 0:Ae.closest("[data-headlessui-portal]"))!=null?P:null]}),disallowed:lr(()=>{var Ae;return[(Ae=ae==null?void 0:ae.closest("body > *:not(#headlessui-portal-root)"))!=null?Ae:null]})}),DO(oe,O,Ae=>{Ae.preventDefault(),M()}),lM(oe,E==null?void 0:E.defaultView,Ae=>{Ae.preventDefault(),Ae.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),M()}),BO(f||U?!1:oe,E,O),_O(oe,N,M);let[K,J]=fO(),xe=C.useMemo(()=>[{dialogState:b,close:M,setTitleId:Y,unmount:p},S],[b,S,M,Y,p]),ye=C.useMemo(()=>({open:b===0}),[b]),Q={ref:k,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:b===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":K,unmount:p},$=!cM(),q=Su.None;oe&&!f&&(q|=Su.RestoreFocus,q|=Su.TabLock,c&&(q|=Su.AutoFocus),$&&(q|=Su.InitialFocus));let se=ia();return ht.createElement(JO,null,ht.createElement(d_,{force:!0},ht.createElement(oM,null,ht.createElement(D5.Provider,{value:xe},ht.createElement(PN,{target:N},ht.createElement(d_,{force:!1},ht.createElement(J,{slot:ye},ht.createElement(R,null,ht.createElement(mM,{initialFocus:a,initialFocusFallback:N,containers:O,features:q},ht.createElement(yO,{value:M},se({ourProps:Q,theirProps:m,slot:ye,defaultTag:PM,features:TM,visible:b===0,name:"Dialog"})))))))))))}),PM="div",TM=H0.RenderStrategy|H0.Static;function IM(e,t){let{transition:n=!1,open:r,...i}=e,s=Rg(),a=e.hasOwnProperty("open")||s!==null,l=e.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?ht.createElement(f_,null,ht.createElement(EM,{show:r,transition:n,unmount:i.unmount},ht.createElement(h_,{ref:t,...i}))):ht.createElement(f_,null,ht.createElement(h_,{ref:t,open:r,...i}))}let DM="div";function OM(e,t){let n=C.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:a,unmount:l},c]=Ug("Dialog.Panel"),f=xo(t,c.panelRef),p=C.useMemo(()=>({open:a===0}),[a]),m=lr(E=>{E.stopPropagation()}),w={ref:f,id:r,onClick:m},g=i?I5:C.Fragment,N=i?{unmount:l}:{},k=ia();return ht.createElement(g,{...N},k({ourProps:w,theirProps:s,slot:p,defaultTag:DM,name:"Dialog.Panel"}))}let MM="div";function RM(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=Ug("Dialog.Backdrop"),a=C.useMemo(()=>({open:i===0}),[i]),l={ref:t,"aria-hidden":!0},c=n?I5:C.Fragment,f=n?{unmount:s}:{},p=ia();return ht.createElement(c,{...f},p({ourProps:l,theirProps:r,slot:a,defaultTag:MM,name:"Dialog.Backdrop"}))}let FM="h2";function $M(e,t){let n=C.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:a}]=Ug("Dialog.Title"),l=xo(t);C.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=C.useMemo(()=>({open:s===0}),[s]),f={ref:l,id:r};return ia()({ourProps:f,theirProps:i,slot:c,defaultTag:FM,name:"Dialog.Title"})}let BM=ds(IM),UM=ds(OM);ds(RM);let zM=ds($M),Iu=Object.assign(BM,{Panel:UM,Title:zM,Description:gO});const qM=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,s]=C.useState(""),[a,l]=C.useState(!1);C.useState([]);const c=async f=>{if(f.preventDefault(),!!i.trim())try{l(!0);const{error:p}=await Ze.from("groups").insert([{name:i.trim()}]);if(p)throw p;Pe.success("Grupo creado exitosamente"),n(),t(),s("")}catch(p){console.error("Error:",p),Pe.error("Error al crear el grupo")}finally{l(!1)}};return h.jsx(Iu,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:h.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[h.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),h.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[h.jsx("div",{className:"absolute right-4 top-4",children:h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:h.jsx(Ta,{className:"w-6 h-6"})})}),h.jsx(Iu.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),h.jsxs("form",{onSubmit:c,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),h.jsx("input",{type:"text",id:"name",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx(wt,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),h.jsx(wt,{type:"submit",loading:a,children:"Crear Grupo"})]})]})]})]})})},WM=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,s]=C.useState(""),[a,l]=C.useState(!1),c=async f=>{if(f.preventDefault(),i!==r.name){Pe.error("El nombre del grupo no coincide");return}try{l(!0);const{error:p}=await Ze.from("groups").delete().eq("id",r.id);if(p)throw p;Pe.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),Pe.error("Error al eliminar el grupo")}finally{l(!1),s("")}};return h.jsx(Iu,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:h.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[h.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),h.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[h.jsx("div",{className:"absolute right-4 top-4",children:h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:h.jsx(Ta,{className:"w-6 h-6"})})}),h.jsx(Iu.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),h.jsx("div",{className:"mb-4",children:h.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta acción no se puede deshacer. Para confirmar, escribe el nombre del grupo:",h.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),h.jsxs("form",{onSubmit:c,children:[h.jsx("div",{className:"mb-4",children:h.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx(wt,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),h.jsx(wt,{type:"submit",loading:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function HM(){const[e,t]=C.useState([]),[n,r]=C.useState(!0),[i,s]=C.useState(!1),{user:a}=Ms(),l=Ra(),[c,f]=C.useState(!1),[p,m]=C.useState(null),[w,g]=C.useState(!1),[N,k]=C.useState("");C.useEffect(()=>{(async()=>{a&&await E()})()},[a]);const E=async()=>{if(a)try{r(!0);const{data:M,error:Y}=await Ze.from("users").select("role").eq("id",a.id).single();if(Y)throw Y;const oe=(M==null?void 0:M.role)==="admin";if(f(oe),oe){const{data:K,error:J}=await Ze.from("groups").select("*").order("created_at",{ascending:!1});if(J)throw J;const{data:xe,error:ye}=await Ze.from("group_members").select("group_id").eq("user_id",a.id);if(ye)throw ye;const Q=new Set((xe==null?void 0:xe.map(q=>q.group_id))||[]),$=await Promise.all((K||[]).map(async q=>{const{data:se}=await Ze.from("group_members").select("id").eq("group_id",q.id).eq("role_in_group","principal"),{data:Ae}=await Ze.from("group_members").select("id").eq("group_id",q.id).eq("role_in_group","sustituto");return{...q,userRole:Q.has(q.id)?"member":"none",principal_count:(se==null?void 0:se.length)||0,sustituto_count:(Ae==null?void 0:Ae.length)||0}}));t($);return}const{data:Z,error:R}=await Ze.from("group_members").select("group_id").eq("user_id",a.id);if(R)throw R;const ee=new Set((Z==null?void 0:Z.map(K=>K.group_id))||[]),{data:ae,error:O}=await Ze.from("groups").select("*").or(`created_by.eq.${a.id},id.in.(${Array.from(ee).join(",")})`).order("created_at",{ascending:!1});if(O)throw O;const U=await Promise.all((ae||[]).map(async K=>{const{data:J}=await Ze.from("group_members").select("id").eq("group_id",K.id).eq("role_in_group","principal"),{data:xe}=await Ze.from("group_members").select("id").eq("group_id",K.id).eq("role_in_group","sustituto");return{...K,userRole:ee.has(K.id)?"member":"none",principal_count:(J==null?void 0:J.length)||0,sustituto_count:(xe==null?void 0:xe.length)||0}}));t(U)}catch(M){console.error("Error fetching groups:",M),Pe.error("Error al cargar los grupos"),t([])}finally{r(!1)}},b=M=>{l(`/group/${M}`)},S=(M,Y)=>{M.stopPropagation(),m(Y),g(!0)},L=()=>{const M=e.filter(R=>R.name.toLowerCase().includes(N.toLowerCase())),Y=M.filter(R=>R.created_by===(a==null?void 0:a.id)),oe=M.filter(R=>R.userRole==="member"&&R.created_by!==(a==null?void 0:a.id)),Z=c?M.filter(R=>R.userRole==="none"&&R.created_by!==(a==null?void 0:a.id)&&!oe.some(ee=>ee.id===R.id)):[];return{created:Y,member:oe,other:Z}};return h.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),h.jsxs(wt,{onClick:()=>s(!0),className:"flex items-center space-x-2",children:[h.jsx(Ig,{className:"w-5 h-5"}),h.jsx("span",{children:"Crear Grupo"})]})]}),h.jsx("div",{className:"mb-6",children:h.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:N,onChange:M=>k(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?h.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cargando grupos..."}):e.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(W0,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. ¡Crea uno para empezar!"})]}):h.jsxs("div",{className:"space-y-8",children:[L().created.length>0&&h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().created.map(M=>h.jsx(xv,{group:M,user:a,isAdmin:c,onDelete:S,onClick:()=>b(M.id)},M.id))})]}),L().member.length>0&&h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().member.map(M=>h.jsx(xv,{group:M,user:a,isAdmin:c,onDelete:S,onClick:()=>b(M.id)},M.id))})]}),c&&L().other.length>0&&h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L().other.map(M=>h.jsx(xv,{group:M,user:a,isAdmin:c,onDelete:S,onClick:()=>b(M.id)},M.id))})]})]}),h.jsx(qM,{isOpen:i,onClose:()=>s(!1),onGroupCreated:E,isAdmin:c}),p&&h.jsx(WM,{isOpen:w,onClose:()=>{g(!1),m(null)},onGroupDeleted:E,group:p})]})}const xv=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>h.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[h.jsx(W0,{className:"w-5 h-5 text-indigo-600 mr-1"}),h.jsx("span",{className:"font-medium",children:e.principal_count}),h.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),h.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[h.jsx(W0,{className:"w-5 h-5 text-orange-600 mr-1"}),h.jsx("span",{className:"font-medium",children:e.sustituto_count}),h.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&h.jsx("button",{onClick:s=>r(s,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:h.jsx(C5,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&h.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&h.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&h.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function VM({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:s,userRole:a}){const[l,c]=C.useState(""),[f,p]=C.useState(""),[m,w]=C.useState("principal"),[g,N]=C.useState([]),[k,E]=C.useState(""),[b,S]=C.useState(!1),[L,M]=C.useState(!1),[Y,oe]=C.useState([]),[Z,R]=C.useState(!1),{user:ee}=Ms(),ae=()=>{c(""),p(""),w("principal"),N([]),E(""),S(!1),oe([])},O=async()=>{if(ee)try{const{data:Q,error:$}=await Ze.from("users").select("name, email").eq("id",ee.id).single();if($)throw $;Q&&(c(Q.name||""),p(Q.email||""))}catch(Q){console.error("Error fetching user info:",Q)}},U=async()=>{var Q;if(ee)try{const{data:$,error:q}=await Ze.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",ee.id);if(q)throw q;R(((Q=$==null?void 0:$[0])==null?void 0:Q.role_in_group)==="principal")}catch($){console.error("Error checking principal status:",$),R(!1)}},K=async()=>{try{const{data:Q,error:$}=await Ze.from("roles").select("*").eq("group_id",n).order("name");if($)throw $;oe(Q||[])}catch(Q){console.error("Error loading roles:",Q),Pe.error("Error al cargar los roles")}};if(C.useEffect(()=>{e&&K()},[e]),C.useEffect(()=>{e||ae()},[e]),C.useEffect(()=>{ee&&(U(),a==="user"&&!Z?O():(c(""),p("")))},[ee,a,Z]),!e||!ee)return null;const J=()=>{if(!k.trim()){Pe.error("Por favor ingresa un nombre para el rol");return}if(Y.some(se=>se.name.toLowerCase()===k.trim().toLowerCase())){Pe.error("Este rol ya existe en el grupo");return}const $=`new-${Date.now()}`,q={id:$,name:k.trim(),isNew:!0,group_id:n};oe([...Y,q]),N([...g,$]),E(""),S(!1),Pe.success("Rol añadido y seleccionado")},xe=async Q=>{if(Q.preventDefault(),!l.trim()){Pe.error("Por favor ingresa un nombre");return}if(!f.trim()){Pe.error("Por favor ingresa un email");return}if(g.length===0){Pe.error("Por favor selecciona al menos un rol");return}M(!0);try{const $=g.filter(H=>!H.startsWith("new-")),q=Y.filter(H=>"isNew"in H&&H.isNew&&g.includes(H.id)).map(H=>({name:H.name,group_id:n})),se=q.map(H=>`(${H.name}, ${n})`),{data:Ae,error:P}=await Ze.rpc("add_group_member_with_instruments",{p_group_id:n,p_name:l,p_email:f.toLowerCase().trim(),p_role:s?"principal":m,p_user_id:a==="user"&&!Z?ee.id:null,p_instruments:$,p_new_instruments:q.map(H=>H.name)});if(P)throw P;try{const{invitation:H}=Ae;if(console.log("Datos de invitación:",H),!H||!H.token)throw new Error("No se recibieron los datos de invitación correctamente");const{error:re}=await Ze.functions.invoke("send-invitation-email",{body:{email:H.email,token:H.token,userExists:H.userExists,groupName:H.groupName,groupMemberId:H.groupMemberId}});if(re)throw console.error("Error sending invitation email:",re),new Error(`Error al enviar la invitación: ${re.message}`);Pe.success("Miembro añadido e invitación enviada")}catch(H){console.error("Error sending invitation:",H),Pe.error(`Error al enviar la invitación: ${H.message||"Error desconocido"}`,{icon:"⚠️",duration:5e3})}i(),t(),ae()}catch($){console.error("Error adding member:",$),Pe.error($.message||"Error al añadir miembro")}finally{M(!1)}},ye=a==="user"&&!Z;return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[h.jsx("h2",{className:"text-xl font-semibold",children:ye?"Join Group":"Add New Member"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Ta,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:xe,className:"p-6 space-y-4",children:[h.jsx(Vn,{label:"Name",value:l,onChange:Q=>c(Q.target.value),required:!0,placeholder:"Enter member name",disabled:ye}),h.jsx(Vn,{label:"Email",type:"email",value:f,onChange:Q=>p(Q.target.value),required:!0,placeholder:"Enter member email",disabled:ye}),!s&&a==="admin"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),h.jsxs("select",{value:m,onChange:Q=>w(Q.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[h.jsx("option",{value:"principal",children:"Principal"}),h.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Instruments"}),!b&&(a==="admin"||s||Z)&&h.jsxs(wt,{type:"button",variant:"secondary",onClick:()=>S(!0),className:"text-sm py-1",children:[h.jsx(Ig,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),b&&h.jsxs("div",{className:"flex gap-2 mb-3",children:[h.jsx(Vn,{label:"",value:k,onChange:Q=>E(Q.target.value),placeholder:"Enter instrument name",className:"flex-1"}),h.jsxs("div",{className:"flex gap-2 mt-1",children:[h.jsx(wt,{type:"button",onClick:J,className:"whitespace-nowrap",children:"Add"}),h.jsx(wt,{type:"button",variant:"secondary",onClick:()=>{S(!1),E("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),h.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:Y.length===0?h.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Añade uno arriba."}):Y.map(Q=>h.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[h.jsx("input",{type:"checkbox",checked:g.includes(Q.id),onChange:$=>{$.target.checked?N([...g,Q.id]):N(g.filter(q=>q!==Q.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),h.jsxs("span",{className:"flex items-center capitalize",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1"}),Q.name,"isNew"in Q&&h.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},Q.id))})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[h.jsx(wt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),h.jsx(wt,{type:"submit",loading:L,children:ye?"Join Group":"Add Member"})]})]})]})})}function GM({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:s}){const[a,l]=C.useState(n.name),[c,f]=C.useState(n.role_in_group),[p,m]=C.useState([]),[w,g]=C.useState(!1),{user:N}=Ms();if(C.useEffect(()=>{n&&(l(n.name),f(n.role_in_group),m(n.instruments.map(b=>b.id)))},[n]),!e||!N)return null;const k=s==="admin"||n.user_id===N.id,E=async b=>{if(b.preventDefault(),!k){Pe.error("You do not have permission to edit this member");return}if(!a.trim()){Pe.error("Please enter a member name");return}if(p.length===0){Pe.error("Please select at least one role");return}g(!0);try{const{error:S}=await Ze.from("group_members").update({name:a.trim(),role_in_group:c}).eq("id",n.id);if(S)throw S;const{error:L}=await Ze.from("group_member_roles").delete().eq("group_member_id",n.id);if(L)throw L;const{error:M}=await Ze.from("group_member_roles").insert(p.map(Y=>({group_member_id:n.id,role_id:Y,created_by:N.id})));if(M)throw M;Pe.success("Member updated successfully!"),i(),t()}catch(S){console.error("Error updating member:",S),Pe.error(S.message||"Failed to update member")}finally{g(!1)}};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:w,children:h.jsx(Ta,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[h.jsx(Vn,{label:"Name",value:a,onChange:b=>l(b.target.value),required:!0,placeholder:"Enter member name",disabled:!k}),s==="admin"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),h.jsxs("select",{value:c,onChange:b=>f(b.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!k,children:[h.jsx("option",{value:"principal",children:"Principal"}),h.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),h.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(b=>h.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[h.jsx("input",{type:"checkbox",checked:p.includes(b.id),onChange:S=>{S.target.checked?m([...p,b.id]):m(p.filter(L=>L!==b.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:w||!k}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1"}),b.name]})]},b.id))})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[h.jsx(wt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),k&&h.jsx(wt,{type:"submit",loading:w,children:"Save Changes"})]})]})]})})}const p_=3,YM=1e3;async function Fn(e,t="An error occurred"){let n=0;for(;n<p_;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===p_)return console.error(t,r),Pe.error(t),null;await new Promise(i=>setTimeout(i,YM*n))}return null}function on(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function us(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Oi(e,t){const n=on(e);return isNaN(t)?us(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Da(e,t){const n=on(e);if(isNaN(t))return us(e,NaN);if(!t)return n;const r=n.getDate(),i=us(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const O5=6048e5,KM=864e5,UN=6e4,zN=36e5;let JM={};function kp(){return JM}function vo(e,t){var l,c,f,p;const n=kp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=on(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Bu(e){return vo(e,{weekStartsOn:1})}function qN(e){const t=on(e),n=t.getFullYear(),r=us(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Bu(r),s=us(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Bu(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Lc(e){const t=on(e);return t.setHours(0,0,0,0),t}function Y0(e){const t=on(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function uo(e,t){const n=Lc(e),r=Lc(t),i=+n-Y0(n),s=+r-Y0(r);return Math.round((i-s)/KM)}function XM(e){const t=qN(e),n=us(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Bu(n)}function sy(e,t){const n=t*7;return Oi(e,n)}function QM(e,t){return Da(e,t*12)}function ZM(e){let t;return e.forEach(function(n){const r=on(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function eR(e){let t;return e.forEach(n=>{const r=on(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function tR(e){return us(e,Date.now())}function vr(e,t){const n=Lc(e),r=Lc(t);return+n==+r}function M5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function nR(e){if(!M5(e)&&typeof e!="number")return!1;const t=on(e);return!isNaN(Number(t))}function up(e,t){const n=on(e),r=on(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function rR(e,t,n){const r=vo(e,n),i=vo(t,n),s=+r-Y0(r),a=+i-Y0(i);return Math.round((s-a)/O5)}function R5(e){const t=on(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function cs(e){const t=on(e);return t.setDate(1),t.setHours(0,0,0,0),t}function WN(e){const t=on(e),n=us(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function F5(e,t){var l,c,f,p;const n=kp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=on(e),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function HN(e){return F5(e,{weekStartsOn:1})}const iR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sR=(e,t,n)=>{let r;const i=iR[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function lf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const aR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cR={date:lf({formats:aR,defaultWidth:"full"}),time:lf({formats:oR,defaultWidth:"full"}),dateTime:lf({formats:lR,defaultWidth:"full"})},uR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dR=(e,t,n,r)=>uR[e];function lo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const fR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yR=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wR={ordinalNumber:yR,era:lo({values:fR,defaultWidth:"wide"}),quarter:lo({values:hR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:lo({values:pR,defaultWidth:"wide"}),day:lo({values:mR,defaultWidth:"wide"}),dayPeriod:lo({values:gR,defaultWidth:"wide",formattingValues:vR,defaultFormattingWidth:"wide"})};function co(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?bR(l,m=>m.test(a)):xR(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(a.length);return{value:f,rest:p}}}function xR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function bR(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function VN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(i.length);return{value:a,rest:l}}}const _R=/^(\d+)(th|st|nd|rd)?/i,SR=/\d+/i,NR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kR={any:[/^b/i,/^(a|c)/i]},ER={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jR={any:[/1/i,/2/i,/3/i,/4/i]},CR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},TR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},IR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DR={ordinalNumber:VN({matchPattern:_R,parsePattern:SR,valueCallback:e=>parseInt(e,10)}),era:co({matchPatterns:NR,defaultMatchWidth:"wide",parsePatterns:kR,defaultParseWidth:"any"}),quarter:co({matchPatterns:ER,defaultMatchWidth:"wide",parsePatterns:jR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:co({matchPatterns:CR,defaultMatchWidth:"wide",parsePatterns:AR,defaultParseWidth:"any"}),day:co({matchPatterns:LR,defaultMatchWidth:"wide",parsePatterns:PR,defaultParseWidth:"any"}),dayPeriod:co({matchPatterns:TR,defaultMatchWidth:"any",parsePatterns:IR,defaultParseWidth:"any"})},GN={code:"en-US",formatDistance:sR,formatLong:cR,formatRelative:dR,localize:wR,match:DR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function OR(e){const t=on(e);return uo(t,WN(t))+1}function YN(e){const t=on(e),n=+Bu(t)-+XM(t);return Math.round(n/O5)+1}function KN(e,t){var p,m,w,g;const n=on(e),r=n.getFullYear(),i=kp(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(w=i.locale)==null?void 0:w.options)==null?void 0:g.firstWeekContainsDate)??1,a=us(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=vo(a,t),c=us(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const f=vo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function MR(e,t){var l,c,f,p;const n=kp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,i=KN(e,t),s=us(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),vo(s,t)}function JN(e,t){const n=on(e),r=+vo(n,t)-+MR(n,t);return Math.round(r/O5)+1}function _n(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ql={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return _n(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):_n(n+1,2)},d(e,t){return _n(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return _n(e.getHours()%12||12,t.length)},H(e,t){return _n(e.getHours(),t.length)},m(e,t){return _n(e.getMinutes(),t.length)},s(e,t){return _n(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return _n(i,t.length)}},Od={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},m_={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ql.y(e,t)},Y:function(e,t,n,r){const i=KN(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return _n(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):_n(s,t.length)},R:function(e,t){const n=qN(e);return _n(n,t.length)},u:function(e,t){const n=e.getFullYear();return _n(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return _n(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return _n(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ql.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return _n(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=JN(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):_n(i,t.length)},I:function(e,t,n){const r=YN(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):_n(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ql.d(e,t)},D:function(e,t,n){const r=OR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):_n(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return _n(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return _n(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return _n(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Od.noon:r===0?i=Od.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Od.evening:r>=12?i=Od.afternoon:r>=4?i=Od.morning:i=Od.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ql.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ql.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):_n(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):_n(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ql.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ql.s(e,t)},S:function(e,t){return Ql.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return v_(r);case"XXXX":case"XX":return xu(r);case"XXXXX":case"XXX":default:return xu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return v_(r);case"xxxx":case"xx":return xu(r);case"xxxxx":case"xxx":default:return xu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+g_(r,":");case"OOOO":default:return"GMT"+xu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+g_(r,":");case"zzzz":default:return"GMT"+xu(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return _n(r,t.length)},T:function(e,t,n){const r=e.getTime();return _n(r,t.length)}};function g_(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+_n(s,2)}function v_(e,t){return e%60===0?(e>0?"-":"+")+_n(Math.abs(e)/60,2):xu(e,t)}function xu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=_n(Math.trunc(r/60),2),s=_n(r%60,2);return n+i+t+s}const y_=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},XN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},RR=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return y_(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",y_(r,t)).replace("{{time}}",XN(i,t))},FR={p:XN,P:RR},$R=/^D+$/,BR=/^Y+$/,UR=["D","DD","YY","YYYY"];function zR(e){return $R.test(e)}function qR(e){return BR.test(e)}function WR(e,t,n){const r=HR(e,t,n);if(console.warn(r),UR.includes(e))throw new RangeError(r)}function HR(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YR=/^'([^]*?)'?$/,KR=/''/g,JR=/[a-zA-Z]/;function ln(e,t,n){var p,m,w,g,N,k,E,b;const r=kp(),i=(n==null?void 0:n.locale)??r.locale??GN,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(w=r.locale)==null?void 0:w.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((k=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:k.weekStartsOn)??r.weekStartsOn??((b=(E=r.locale)==null?void 0:E.options)==null?void 0:b.weekStartsOn)??0,l=on(e);if(!nR(l))throw new RangeError("Invalid time value");let c=t.match(GR).map(S=>{const L=S[0];if(L==="p"||L==="P"){const M=FR[L];return M(S,i.formatLong)}return S}).join("").match(VR).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const L=S[0];if(L==="'")return{isToken:!1,value:XR(S)};if(m_[L])return{isToken:!0,value:S};if(L.match(JR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const f={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const L=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&qR(L)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&zR(L))&&WR(L,t,String(e));const M=m_[L[0]];return M(l,L,i.localize,f)}).join("")}function XR(e){const t=e.match(YR);return t?t[1].replace(KR,"'"):e}function QR(e){const t=on(e),n=t.getFullYear(),r=t.getMonth(),i=us(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function ZR(e){return Math.trunc(+on(e)/1e3)}function e9(e){const t=on(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function t9(e,t){return rR(e9(e),cs(e),t)+1}function ay(e,t){const n=on(e),r=on(t);return n.getTime()>r.getTime()}function QN(e,t){const n=on(e),r=on(t);return+n<+r}function w_(e){return+on(e)>Date.now()}function $5(e,t){const n=on(e),r=on(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function n9(e,t){const n=on(e),r=on(t);return n.getFullYear()===r.getFullYear()}function x_(e){return vr(e,tR(e))}function bv(e,t){return Oi(e,-t)}function pu(e,t){const r=a9(e);let i;if(r.date){const c=o9(r.date,2);i=l9(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=c9(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=u9(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(s+a+l)}const Mm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},r9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,i9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,s9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function a9(e){const t={},n=e.split(Mm.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Mm.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Mm.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Mm.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function o9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function l9(e,t){if(t===null)return new Date(NaN);const n=e.match(r9);if(!n)return new Date(NaN);const r=!!n[4],i=yh(n[1]),s=yh(n[2])-1,a=yh(n[3]),l=yh(n[4]),c=yh(n[5])-1;if(r)return m9(t,l,c)?d9(t,l,c):new Date(NaN);{const f=new Date(0);return!h9(t,s,a)||!p9(t,i)?new Date(NaN):(f.setUTCFullYear(t,s,Math.max(i,a)),f)}}function yh(e){return e?parseInt(e):1}function c9(e){const t=e.match(i9);if(!t)return NaN;const n=_v(t[1]),r=_v(t[2]),i=_v(t[3]);return g9(n,r,i)?n*zN+r*UN+i*1e3:NaN}function _v(e){return e&&parseFloat(e.replace(",","."))||0}function u9(e){if(e==="Z")return 0;const t=e.match(s9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return v9(r,i)?n*(r*zN+i*UN):NaN}function d9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const f9=[31,null,31,30,31,30,31,31,30,31,30,31];function ZN(e){return e%400===0||e%4===0&&e%100!==0}function h9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(f9[t]||(ZN(e)?29:28))}function p9(e,t){return t>=1&&t<=(ZN(e)?366:365)}function m9(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function g9(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function v9(e,t){return t>=0&&t<=59}function Sv(e,t){const n=on(e),r=n.getFullYear(),i=n.getDate(),s=us(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const a=QR(s);return n.setMonth(t,Math.min(i,a)),n}function b_(e,t){const n=on(e);return isNaN(+n)?us(e,NaN):(n.setFullYear(t),n)}const y9={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},w9=(e,t,n)=>{let r;const i=y9[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},x9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},b9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},_9={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},S9={date:lf({formats:x9,defaultWidth:"full"}),time:lf({formats:b9,defaultWidth:"full"}),dateTime:lf({formats:_9,defaultWidth:"full"})},N9={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},k9={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},E9=(e,t,n,r)=>t.getHours()!==1?k9[e]:N9[e],j9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},C9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},A9={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},L9={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},P9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},T9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},I9=(e,t)=>Number(e)+"º",D9={ordinalNumber:I9,era:lo({values:j9,defaultWidth:"wide"}),quarter:lo({values:C9,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:lo({values:A9,defaultWidth:"wide"}),day:lo({values:L9,defaultWidth:"wide"}),dayPeriod:lo({values:P9,defaultWidth:"wide",formattingValues:T9,defaultFormattingWidth:"wide"})},O9=/^(\d+)(º)?/i,M9=/\d+/i,R9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},F9={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},$9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},B9={any:[/1/i,/2/i,/3/i,/4/i]},U9={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},z9={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},q9={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},W9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},H9={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},V9={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},G9={ordinalNumber:VN({matchPattern:O9,parsePattern:M9,valueCallback:function(e){return parseInt(e,10)}}),era:co({matchPatterns:R9,defaultMatchWidth:"wide",parsePatterns:F9,defaultParseWidth:"any"}),quarter:co({matchPatterns:$9,defaultMatchWidth:"wide",parsePatterns:B9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:co({matchPatterns:U9,defaultMatchWidth:"wide",parsePatterns:z9,defaultParseWidth:"any"}),day:co({matchPatterns:q9,defaultMatchWidth:"wide",parsePatterns:W9,defaultParseWidth:"any"}),dayPeriod:co({matchPatterns:H9,defaultMatchWidth:"any",parsePatterns:V9,defaultParseWidth:"any"})},Qd={code:"es",formatDistance:w9,formatLong:S9,formatRelative:E9,localize:D9,match:G9,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Tt=function(){return Tt=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Tt.apply(this,arguments)};function Y9(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function e6(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Ep(e){return e.mode==="multiple"}function jp(e){return e.mode==="range"}function zg(e){return e.mode==="single"}var K9={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function J9(e,t){return ln(e,"LLLL y",t)}function X9(e,t){return ln(e,"d",t)}function Q9(e,t){return ln(e,"LLLL",t)}function Z9(e){return"".concat(e)}function eF(e,t){return ln(e,"cccccc",t)}function tF(e,t){return ln(e,"yyyy",t)}var nF=Object.freeze({__proto__:null,formatCaption:J9,formatDay:X9,formatMonthCaption:Q9,formatWeekNumber:Z9,formatWeekdayName:eF,formatYearCaption:tF}),rF=function(e,t,n){return ln(e,"do MMMM (EEEE)",n)},iF=function(){return"Month: "},sF=function(){return"Go to next month"},aF=function(){return"Go to previous month"},oF=function(e,t){return ln(e,"cccc",t)},lF=function(e){return"Week n. ".concat(e)},cF=function(){return"Year: "},uF=Object.freeze({__proto__:null,labelDay:rF,labelMonthDropdown:iF,labelNext:sF,labelPrevious:aF,labelWeekNumber:lF,labelWeekday:oF,labelYearDropdown:cF});function dF(){var e="buttons",t=K9,n=GN,r={},i={},s=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:nF,labels:uF,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:l,mode:"default"}}function fF(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,s=e.fromDate,a=e.toDate;return r?s=cs(r):t&&(s=new Date(t,0,1)),i?a=R5(i):n&&(a=new Date(n,11,31)),{fromDate:s?Lc(s):void 0,toDate:a?Lc(a):void 0}}var t6=C.createContext(void 0);function hF(e){var t,n=e.initialProps,r=dF(),i=fF(n),s=i.fromDate,a=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!a)&&(l="buttons");var c;(zg(n)||Ep(n)||jp(n))&&(c=n.onSelect);var f=Tt(Tt(Tt({},r),n),{captionLayout:l,classNames:Tt(Tt({},r.classNames),n.classNames),components:Tt({},n.components),formatters:Tt(Tt({},r.formatters),n.formatters),fromDate:s,labels:Tt(Tt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Tt(Tt({},r.modifiers),n.modifiers),modifiersClassNames:Tt(Tt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Tt(Tt({},r.styles),n.styles),toDate:a});return h.jsx(t6.Provider,{value:f,children:e.children})}function Bn(){var e=C.useContext(t6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function n6(e){var t=Bn(),n=t.locale,r=t.classNames,i=t.styles,s=t.formatters.formatCaption;return h.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function pF(e){return h.jsx("svg",Tt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:h.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function r6(e){var t,n,r=e.onChange,i=e.value,s=e.children,a=e.caption,l=e.className,c=e.style,f=Bn(),p=(n=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:pF;return h.jsxs("div",{className:l,style:c,children:[h.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),h.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:i,onChange:r,children:s}),h.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[a,h.jsx(p,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function mF(e){var t,n=Bn(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,f=n.components,p=n.labels.labelMonthDropdown;if(!r)return h.jsx(h.Fragment,{});if(!i)return h.jsx(h.Fragment,{});var m=[];if(n9(r,i))for(var w=cs(r),g=r.getMonth();g<=i.getMonth();g++)m.push(Sv(w,g));else for(var w=cs(new Date),g=0;g<=11;g++)m.push(Sv(w,g));var N=function(E){var b=Number(E.target.value),S=Sv(cs(e.displayMonth),b);e.onChange(S)},k=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:r6;return h.jsx(k,{name:"months","aria-label":p(),className:c.dropdown_month,style:s.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(E){return h.jsx("option",{value:E.getMonth(),children:l(E,{locale:a})},E.getMonth())})})}function gF(e){var t,n=e.displayMonth,r=Bn(),i=r.fromDate,s=r.toDate,a=r.locale,l=r.styles,c=r.classNames,f=r.components,p=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,w=[];if(!i)return h.jsx(h.Fragment,{});if(!s)return h.jsx(h.Fragment,{});for(var g=i.getFullYear(),N=s.getFullYear(),k=g;k<=N;k++)w.push(b_(WN(new Date),k));var E=function(S){var L=b_(cs(n),Number(S.target.value));e.onChange(L)},b=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:r6;return h.jsx(b,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:E,value:n.getFullYear(),caption:p(n,{locale:a}),children:w.map(function(S){return h.jsx("option",{value:S.getFullYear(),children:p(S,{locale:a})},S.getFullYear())})})}function vF(e,t){var n=C.useState(e),r=n[0],i=n[1],s=t===void 0?r:t;return[s,i]}function yF(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,s=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&up(s,i)<0){var f=-1*(c-1);i=Da(s,f)}return a&&up(i,a)<0&&(i=a),cs(i)}function wF(){var e=Bn(),t=yF(e),n=vF(t,e.month),r=n[0],i=n[1],s=function(a){var l;if(!e.disableNavigation){var c=cs(a);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function xF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=cs(e),s=cs(Da(i,r)),a=up(s,i),l=[],c=0;c<a;c++){var f=Da(i,c);l.push(f)}return n&&(l=l.reverse()),l}function bF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=cs(e);if(!n)return Da(l,a);var c=up(n,e);if(!(c<s))return Da(l,a)}}function _F(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=cs(e);if(!n)return Da(l,-a);var c=up(l,n);if(!(c<=0))return Da(l,-a)}}var i6=C.createContext(void 0);function SF(e){var t=Bn(),n=wF(),r=n[0],i=n[1],s=xF(r,t),a=bF(r,t),l=_F(r,t),c=function(m){return s.some(function(w){return $5(m,w)})},f=function(m,w){c(m)||(w&&QN(m,w)?i(Da(m,1+t.numberOfMonths*-1)):i(m))},p={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:f,previousMonth:l,nextMonth:a,isDateDisplayed:c};return h.jsx(i6.Provider,{value:p,children:e.children})}function Cp(){var e=C.useContext(i6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function __(e){var t,n=Bn(),r=n.classNames,i=n.styles,s=n.components,a=Cp().goToMonth,l=function(p){a(Da(p,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:n6,f=h.jsx(c,{id:e.id,displayMonth:e.displayMonth});return h.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[h.jsx("div",{className:r.vhidden,children:f}),h.jsx(mF,{onChange:l,displayMonth:e.displayMonth}),h.jsx(gF,{onChange:l,displayMonth:e.displayMonth})]})}function NF(e){return h.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:h.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function kF(e){return h.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:h.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var K0=C.forwardRef(function(e,t){var n=Bn(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var a=s.join(" "),l=Tt(Tt({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),h.jsx("button",Tt({},e,{ref:t,type:"button",className:a,style:l}))});function EF(e){var t,n,r=Bn(),i=r.dir,s=r.locale,a=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,p=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return h.jsx(h.Fragment,{});var w=f(e.previousMonth,{locale:s}),g=[a.nav_button,a.nav_button_previous].join(" "),N=p(e.nextMonth,{locale:s}),k=[a.nav_button,a.nav_button_next].join(" "),E=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:kF,b=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:NF;return h.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&h.jsx(K0,{name:"previous-month","aria-label":w,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?h.jsx(E,{className:a.nav_icon,style:l.nav_icon}):h.jsx(b,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&h.jsx(K0,{name:"next-month","aria-label":N,className:k,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?h.jsx(b,{className:a.nav_icon,style:l.nav_icon}):h.jsx(E,{className:a.nav_icon,style:l.nav_icon})})]})}function S_(e){var t=Bn().numberOfMonths,n=Cp(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(N){return $5(e.displayMonth,N)}),c=l===0,f=l===a.length-1,p=t>1&&(c||!f),m=t>1&&(f||!c),w=function(){r&&s(r)},g=function(){i&&s(i)};return h.jsx(EF,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:w,onNextClick:g})}function jF(e){var t,n=Bn(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:n6,f;return i?f=h.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?f=h.jsx(__,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?f=h.jsxs(h.Fragment,{children:[h.jsx(__,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),h.jsx(S_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=h.jsxs(h.Fragment,{children:[h.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),h.jsx(S_,{displayMonth:e.displayMonth,id:e.id})]}),h.jsx("div",{className:r.caption,style:s.caption,children:f})}function CF(e){var t=Bn(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?h.jsx("tfoot",{className:i,style:r.tfoot,children:h.jsx("tr",{children:h.jsx("td",{colSpan:8,children:n})})}):h.jsx(h.Fragment,{})}function AF(e,t,n){for(var r=n?Bu(new Date):vo(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var a=Oi(r,s);i.push(a)}return i}function LF(){var e=Bn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,f=AF(i,s,a);return h.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&h.jsx("td",{style:n.head_cell,className:t.head_cell}),f.map(function(p,m){return h.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:l(p,{locale:i})},m)})]})}function PF(){var e,t=Bn(),n=t.classNames,r=t.styles,i=t.components,s=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:LF;return h.jsx("thead",{style:r.head,className:n.head,children:h.jsx(s,{})})}function TF(e){var t=Bn(),n=t.locale,r=t.formatters.formatDay;return h.jsx(h.Fragment,{children:r(e.date,{locale:n})})}var B5=C.createContext(void 0);function IF(e){if(!Ep(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return h.jsx(B5.Provider,{value:t,children:e.children})}return h.jsx(DF,{initialProps:e.initialProps,children:e.children})}function DF(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,s=t.max,a=function(f,p,m){var w,g;(w=t.onDayClick)===null||w===void 0||w.call(t,f,p,m);var N=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var k=!!(!p.selected&&s&&(r==null?void 0:r.length)===s);if(!k){var E=r?e6([],r):[];if(p.selected){var b=E.findIndex(function(S){return vr(f,S)});E.splice(b,1)}else E.push(f);(g=t.onSelect)===null||g===void 0||g.call(t,E,f,p,m)}}},l={disabled:[]};r&&l.disabled.push(function(f){var p=s&&r.length>s-1,m=r.some(function(w){return vr(w,f)});return!!(p&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return h.jsx(B5.Provider,{value:c,children:n})}function U5(){var e=C.useContext(B5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function OF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?vr(i,e)&&vr(r,e)?void 0:vr(i,e)?{from:i,to:void 0}:vr(r,e)?void 0:ay(r,e)?{from:e,to:i}:{from:r,to:e}:i?ay(e,i)?{from:i,to:e}:{from:e,to:i}:r?QN(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var z5=C.createContext(void 0);function MF(e){if(!jp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return h.jsx(z5.Provider,{value:t,children:e.children})}return h.jsx(RF,{initialProps:e.initialProps,children:e.children})}function RF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},s=i.from,a=i.to,l=t.min,c=t.max,f=function(g,N,k){var E,b;(E=t.onDayClick)===null||E===void 0||E.call(t,g,N,k);var S=OF(g,r);(b=t.onSelect)===null||b===void 0||b.call(t,S,g,N,k)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(p.range_start=[s],a?(p.range_end=[a],vr(s,a)||(p.range_middle=[{after:s,before:a}])):p.range_end=[s]):a&&(p.range_start=[a],p.range_end=[a]),l&&(s&&!a&&p.disabled.push({after:bv(s,l-1),before:Oi(s,l-1)}),s&&a&&p.disabled.push({after:s,before:Oi(s,l-1)}),!s&&a&&p.disabled.push({after:bv(a,l-1),before:Oi(a,l-1)})),c){if(s&&!a&&(p.disabled.push({before:Oi(s,-c+1)}),p.disabled.push({after:Oi(s,c-1)})),s&&a){var m=uo(a,s)+1,w=c-m;p.disabled.push({before:bv(s,w)}),p.disabled.push({after:Oi(a,w)})}!s&&a&&(p.disabled.push({before:Oi(a,-c+1)}),p.disabled.push({after:Oi(a,c-1)}))}return h.jsx(z5.Provider,{value:{selected:r,onDayClick:f,modifiers:p},children:n})}function q5(){var e=C.useContext(z5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function a0(e){return Array.isArray(e)?e6([],e):e!==void 0?[e]:[]}function FF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=a0(i)}),t}var Oa;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Oa||(Oa={}));var $F=Oa.Selected,Ho=Oa.Disabled,BF=Oa.Hidden,UF=Oa.Today,Nv=Oa.RangeEnd,kv=Oa.RangeMiddle,Ev=Oa.RangeStart,zF=Oa.Outside;function qF(e,t,n){var r,i=(r={},r[$F]=a0(e.selected),r[Ho]=a0(e.disabled),r[BF]=a0(e.hidden),r[UF]=[e.today],r[Nv]=[],r[kv]=[],r[Ev]=[],r[zF]=[],r);return e.fromDate&&i[Ho].push({before:e.fromDate}),e.toDate&&i[Ho].push({after:e.toDate}),Ep(e)?i[Ho]=i[Ho].concat(t.modifiers[Ho]):jp(e)&&(i[Ho]=i[Ho].concat(n.modifiers[Ho]),i[Ev]=n.modifiers[Ev],i[kv]=n.modifiers[kv],i[Nv]=n.modifiers[Nv]),i}var s6=C.createContext(void 0);function WF(e){var t=Bn(),n=U5(),r=q5(),i=qF(t,n,r),s=FF(t.modifiers),a=Tt(Tt({},i),s);return h.jsx(s6.Provider,{value:a,children:e.children})}function a6(){var e=C.useContext(s6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function HF(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function VF(e){return!!(e&&typeof e=="object"&&"from"in e)}function GF(e){return!!(e&&typeof e=="object"&&"after"in e)}function YF(e){return!!(e&&typeof e=="object"&&"before"in e)}function KF(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function JF(e,t){var n,r=t.from,i=t.to;if(r&&i){var s=uo(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=uo(e,r)>=0&&uo(i,e)>=0;return a}return i?vr(i,e):r?vr(r,e):!1}function XF(e){return M5(e)}function QF(e){return Array.isArray(e)&&e.every(M5)}function ZF(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(XF(n))return vr(e,n);if(QF(n))return n.includes(e);if(VF(n))return JF(e,n);if(KF(n))return n.dayOfWeek.includes(e.getDay());if(HF(n)){var r=uo(n.before,e),i=uo(n.after,e),s=r>0,a=i<0,l=ay(n.before,n.after);return l?a&&s:s||a}return GF(n)?uo(e,n.after)>0:YF(n)?uo(n.before,e)>0:typeof n=="function"?n(e):!1})}function W5(e,t,n){var r=Object.keys(t).reduce(function(s,a){var l=t[a];return ZF(e,l)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!$5(e,n)&&(i.outside=!0),i}function e$(e,t){for(var n=cs(e[0]),r=R5(e[e.length-1]),i,s,a=n;a<=r;){var l=W5(a,t),c=!l.disabled&&!l.hidden;if(!c){a=Oi(a,1);continue}if(l.selected)return a;l.today&&!s&&(s=a),i||(i=a),a=Oi(a,1)}return s||i}var t$=365;function o6(e,t){var n=t.moveBy,r=t.direction,i=t.context,s=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=i.weekStartsOn,f=i.fromDate,p=i.toDate,m=i.locale,w={day:Oi,week:sy,month:Da,year:QM,startOfWeek:function(E){return i.ISOWeek?Bu(E):vo(E,{locale:m,weekStartsOn:c})},endOfWeek:function(E){return i.ISOWeek?HN(E):F5(E,{locale:m,weekStartsOn:c})}},g=w[n](e,r==="after"?1:-1);r==="before"&&f?g=ZM([f,g]):r==="after"&&p&&(g=eR([p,g]));var N=!0;if(s){var k=W5(g,s);N=!k.disabled&&!k.hidden}return N?g:l.count>t$?l.lastFocused:o6(g,{moveBy:n,direction:r,context:i,modifiers:s,retry:Tt(Tt({},l),{count:l.count+1})})}var l6=C.createContext(void 0);function n$(e){var t=Cp(),n=a6(),r=C.useState(),i=r[0],s=r[1],a=C.useState(),l=a[0],c=a[1],f=e$(t.displayMonths,n),p=i??(l&&t.isDateDisplayed(l))?l:f,m=function(){c(i),s(void 0)},w=function(E){s(E)},g=Bn(),N=function(E,b){if(i){var S=o6(i,{moveBy:E,direction:b,context:g,modifiers:n});vr(i,S)||(t.goToDate(S,i),w(S))}},k={focusedDay:i,focusTarget:p,blur:m,focus:w,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return h.jsx(l6.Provider,{value:k,children:e.children})}function H5(){var e=C.useContext(l6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function r$(e,t){var n=a6(),r=W5(e,n,t);return r}var V5=C.createContext(void 0);function i$(e){if(!zg(e.initialProps)){var t={selected:void 0};return h.jsx(V5.Provider,{value:t,children:e.children})}return h.jsx(s$,{initialProps:e.initialProps,children:e.children})}function s$(e){var t=e.initialProps,n=e.children,r=function(s,a,l){var c,f,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,a,l),a.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,s,a,l);return}(p=t.onSelect)===null||p===void 0||p.call(t,s,s,a,l)},i={selected:t.selected,onDayClick:r};return h.jsx(V5.Provider,{value:i,children:n})}function c6(){var e=C.useContext(V5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function a$(e,t){var n=Bn(),r=c6(),i=U5(),s=q5(),a=H5(),l=a.focusDayAfter,c=a.focusDayBefore,f=a.focusWeekAfter,p=a.focusWeekBefore,m=a.blur,w=a.focus,g=a.focusMonthBefore,N=a.focusMonthAfter,k=a.focusYearBefore,E=a.focusYearAfter,b=a.focusStartOfWeek,S=a.focusEndOfWeek,L=function(Q){var $,q,se,Ae;zg(n)?($=r.onDayClick)===null||$===void 0||$.call(r,e,t,Q):Ep(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,e,t,Q):jp(n)?(se=s.onDayClick)===null||se===void 0||se.call(s,e,t,Q):(Ae=n.onDayClick)===null||Ae===void 0||Ae.call(n,e,t,Q)},M=function(Q){var $;w(e),($=n.onDayFocus)===null||$===void 0||$.call(n,e,t,Q)},Y=function(Q){var $;m(),($=n.onDayBlur)===null||$===void 0||$.call(n,e,t,Q)},oe=function(Q){var $;($=n.onDayMouseEnter)===null||$===void 0||$.call(n,e,t,Q)},Z=function(Q){var $;($=n.onDayMouseLeave)===null||$===void 0||$.call(n,e,t,Q)},R=function(Q){var $;($=n.onDayPointerEnter)===null||$===void 0||$.call(n,e,t,Q)},ee=function(Q){var $;($=n.onDayPointerLeave)===null||$===void 0||$.call(n,e,t,Q)},ae=function(Q){var $;($=n.onDayTouchCancel)===null||$===void 0||$.call(n,e,t,Q)},O=function(Q){var $;($=n.onDayTouchEnd)===null||$===void 0||$.call(n,e,t,Q)},U=function(Q){var $;($=n.onDayTouchMove)===null||$===void 0||$.call(n,e,t,Q)},K=function(Q){var $;($=n.onDayTouchStart)===null||$===void 0||$.call(n,e,t,Q)},J=function(Q){var $;($=n.onDayKeyUp)===null||$===void 0||$.call(n,e,t,Q)},xe=function(Q){var $;switch(Q.key){case"ArrowLeft":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":Q.preventDefault(),Q.stopPropagation(),f();break;case"ArrowUp":Q.preventDefault(),Q.stopPropagation(),p();break;case"PageUp":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?k():g();break;case"PageDown":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?E():N();break;case"Home":Q.preventDefault(),Q.stopPropagation(),b();break;case"End":Q.preventDefault(),Q.stopPropagation(),S();break}($=n.onDayKeyDown)===null||$===void 0||$.call(n,e,t,Q)},ye={onClick:L,onFocus:M,onBlur:Y,onKeyDown:xe,onKeyUp:J,onMouseEnter:oe,onMouseLeave:Z,onPointerEnter:R,onPointerLeave:ee,onTouchCancel:ae,onTouchEnd:O,onTouchMove:U,onTouchStart:K};return ye}function o$(){var e=Bn(),t=c6(),n=U5(),r=q5(),i=zg(e)?t.selected:Ep(e)?n.selected:jp(e)?r.selected:void 0;return i}function l$(e){return Object.values(Oa).includes(e)}function c$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(l$(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function u$(e,t){var n=Tt({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Tt(Tt({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function d$(e,t,n){var r,i,s,a=Bn(),l=H5(),c=r$(e,t),f=a$(e,c),p=o$(),m=!!(a.onDayClick||a.mode!=="default");C.useEffect(function(){var oe;c.outside||l.focusedDay&&m&&vr(l.focusedDay,e)&&((oe=n.current)===null||oe===void 0||oe.focus())},[l.focusedDay,e,n,m,c.outside]);var w=c$(a,c).join(" "),g=u$(a,c),N=!!(c.outside&&!a.showOutsideDays||c.hidden),k=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:TF,E=h.jsx(k,{date:e,displayMonth:t,activeModifiers:c}),b={style:g,className:w,children:E,role:"gridcell"},S=l.focusTarget&&vr(l.focusTarget,e)&&!c.outside,L=l.focusedDay&&vr(l.focusedDay,e),M=Tt(Tt(Tt({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=L||S?0:-1,r)),f),Y={isButton:m,isHidden:N,activeModifiers:c,selectedDays:p,buttonProps:M,divProps:b};return Y}function f$(e){var t=C.useRef(null),n=d$(e.date,e.displayMonth,t);return n.isHidden?h.jsx("div",{role:"gridcell"}):n.isButton?h.jsx(K0,Tt({name:"day",ref:t},n.buttonProps)):h.jsx("div",Tt({},n.divProps))}function h$(e){var t=e.number,n=e.dates,r=Bn(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,p=f(Number(t),{locale:l});if(!i)return h.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:p});var m=c(Number(t),{locale:l}),w=function(g){i(t,n,g)};return h.jsx(K0,{name:"week-number","aria-label":m,className:a.weeknumber,style:s.weeknumber,onClick:w,children:p})}function p$(e){var t,n,r=Bn(),i=r.styles,s=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:f$,f=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:h$,p;return a&&(p=h.jsx("td",{className:s.cell,style:i.cell,children:h.jsx(f,{number:e.weekNumber,dates:e.dates})})),h.jsxs("tr",{className:s.row,style:i.row,children:[p,e.dates.map(function(m){return h.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:h.jsx(c,{displayMonth:e.displayMonth,date:m})},ZR(m))})]})}function N_(e,t,n){for(var r=n!=null&&n.ISOWeek?HN(t):F5(t,n),i=n!=null&&n.ISOWeek?Bu(e):vo(e,n),s=uo(r,i),a=[],l=0;l<=s;l++)a.push(Oi(i,l));var c=a.reduce(function(f,p){var m=n!=null&&n.ISOWeek?YN(p):JN(p,n),w=f.find(function(g){return g.weekNumber===m});return w?(w.dates.push(p),f):(f.push({weekNumber:m,dates:[p]}),f)},[]);return c}function m$(e,t){var n=N_(cs(e),R5(e),t);if(t!=null&&t.useFixedWeeks){var r=t9(e,t);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=sy(s,6-r),l=N_(sy(s,1),a,t);n.push.apply(n,l)}}return n}function g$(e){var t,n,r,i=Bn(),s=i.locale,a=i.classNames,l=i.styles,c=i.hideHead,f=i.fixedWeeks,p=i.components,m=i.weekStartsOn,w=i.firstWeekContainsDate,g=i.ISOWeek,N=m$(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:g,locale:s,weekStartsOn:m,firstWeekContainsDate:w}),k=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:PF,E=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:p$,b=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:CF;return h.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&h.jsx(k,{}),h.jsx("tbody",{className:a.tbody,style:l.tbody,children:N.map(function(S){return h.jsx(E,{displayMonth:e.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),h.jsx(b,{displayMonth:e.displayMonth})]})}function v$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var y$=v$()?C.useLayoutEffect:C.useEffect,jv=!1,w$=0;function k_(){return"react-day-picker-".concat(++w$)}function x$(e){var t,n=e??(jv?k_():null),r=C.useState(n),i=r[0],s=r[1];return y$(function(){i===null&&s(k_())},[]),C.useEffect(function(){jv===!1&&(jv=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function b$(e){var t,n,r=Bn(),i=r.dir,s=r.classNames,a=r.styles,l=r.components,c=Cp().displayMonths,f=x$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[s.month],w=a.month,g=e.displayIndex===0,N=e.displayIndex===c.length-1,k=!g&&!N;i==="rtl"&&(t=[g,N],N=t[0],g=t[1]),g&&(m.push(s.caption_start),w=Tt(Tt({},w),a.caption_start)),N&&(m.push(s.caption_end),w=Tt(Tt({},w),a.caption_end)),k&&(m.push(s.caption_between),w=Tt(Tt({},w),a.caption_between));var E=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:jF;return h.jsxs("div",{className:m.join(" "),style:w,children:[h.jsx(E,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),h.jsx(g$,{id:p,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function _$(e){var t=Bn(),n=t.classNames,r=t.styles;return h.jsx("div",{className:n.months,style:r.months,children:e.children})}function S$(e){var t,n,r=e.initialProps,i=Bn(),s=H5(),a=Cp(),l=C.useState(!1),c=l[0],f=l[1];C.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),f(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var m=Tt(Tt({},i.styles.root),i.style),w=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,k){var E;return Tt(Tt({},N),(E={},E[k]=r[k],E))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:_$;return h.jsx("div",Tt({className:p.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},w,{children:h.jsx(g,{children:a.displayMonths.map(function(N,k){return h.jsx(b$,{displayIndex:k,displayMonth:N},k)})})}))}function N$(e){var t=e.children,n=Y9(e,["children"]);return h.jsx(hF,{initialProps:n,children:h.jsx(SF,{children:h.jsx(i$,{initialProps:n,children:h.jsx(IF,{initialProps:n,children:h.jsx(MF,{initialProps:n,children:h.jsx(WF,{children:h.jsx(n$,{children:t})})})})})})})}function k$(e){return h.jsx(N$,Tt({},e,{children:h.jsx(S$,{initialProps:e})}))}function E$({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para días seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualización de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para días con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los días seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=DS(),[s,a]=C.useState([]),[l,c]=C.useState(void 0),[f,p]=C.useState(!0),[m,w]=C.useState(!1),[g,N]=C.useState(null),[k,E]=C.useState(!1),[b,S]=C.useState([]),[L,M]=C.useState([]),[Y,oe]=C.useState([]),[Z,R]=C.useState([]),{user:ee}=Ms();C.useEffect(()=>{ee&&(xe(),q(),Q(),ye(),$())},[ee,i]);const ae=C.useMemo(()=>{console.log("🚀 SIMPLE: Calculando fechas por miembro...");const le=new Map;return s.forEach(ue=>{const pe=new Set;ue.dates.forEach(je=>{pe.add(ln(je,"yyyy-MM-dd"))}),le.set(ue.userId,pe),console.log(`${ue.memberName}: ${pe.size} fechas marcadas`)}),console.log(`✅ Total miembros procesados: ${le.size}`),le},[s]),O=C.useMemo(()=>{console.log("📅 SIMPLE: Procesando eventos...");const le=new Map,ue=new Map;return L.forEach(pe=>{le.has(pe.user_id)||le.set(pe.user_id,new Set),le.get(pe.user_id).add(ln(new Date(pe.date),"yyyy-MM-dd"))}),Z.forEach(pe=>{ue.has(pe.user_id)||ue.set(pe.user_id,new Set),ue.get(pe.user_id).add(ln(new Date(pe.date),"yyyy-MM-dd"))}),console.log(`✅ Eventos procesados - Grupo: ${le.size} usuarios, Externos: ${ue.size} usuarios`),{groupEvents:le,externalEvents:ue}},[L,Z]),U=C.useCallback(le=>{const ue=ln(le,"yyyy-MM-dd");return e.filter(pe=>{var G,qe,Re;if(!pe.user_id)return!1;const je=((G=ae.get(pe.user_id))==null?void 0:G.has(ue))??!1,Oe=((qe=O.groupEvents.get(pe.user_id))==null?void 0:qe.has(ue))??!1,fe=((Re=O.externalEvents.get(pe.user_id))==null?void 0:Re.has(ue))??!1;return je&&!Oe&&!fe})},[e,ae,O]),K=C.useCallback(le=>{const ue=U(le),pe=e.filter(fe=>fe.role_in_group==="principal"),je=ue.filter(fe=>fe.role_in_group==="sustituto"),Oe=new Set;return pe.forEach(fe=>{fe.instruments.forEach(G=>{Oe.add(G.id)})}),Array.from(Oe).every(fe=>ue.some(qe=>qe.role_in_group==="principal"&&qe.instruments.some(Re=>Re.id===fe))?!0:je.some(Re=>Re.instruments.some(Fe=>Fe.id===fe)))},[e,U]),J=C.useMemo(()=>{if(!t)return[];console.log("🎯 SIMPLE: Calculando fechas disponibles del grupo (con sustitutos)...");const le=new Set;ae.forEach(je=>{je.forEach(Oe=>le.add(Oe))});const ue=e.filter(je=>je.role_in_group==="principal");if(ue.length===0)return[];const pe=[];return le.forEach(je=>{const Oe=new Date(je);if(K(Oe)){pe.push(Oe);const fe=U(Oe),G=fe.filter(Re=>Re.role_in_group==="principal"),qe=fe.filter(Re=>Re.role_in_group==="sustituto");console.log(`📅 ${je}: ✅ Disponible - Principales: ${G.length}/${ue.length}, Sustitutos: ${qe.length}`)}else{const fe=U(Oe),G=fe.filter(Re=>Re.role_in_group==="principal"),qe=fe.filter(Re=>Re.role_in_group==="sustituto");console.log(`📅 ${je}: ❌ NO disponible - Principales: ${G.length}/${ue.length}, Sustitutos: ${qe.length} (instrumentos no cubiertos)`)}}),console.log(`✅ SIMPLE: ${pe.length} fechas disponibles para el grupo (considerando sustitutos)`),pe},[e,ae,U,t,K]);C.useEffect(()=>{t&&J.length>=0&&(S(J),t(J))},[J,t]),C.useEffect(()=>{t&&t(b)},[b,t]);const xe=C.useCallback(async()=>{const le=await Fn(async()=>await Ze.from("users").select("role").eq("id",ee==null?void 0:ee.id).single(),"Error checking admin status");le&&E(le.role==="admin")},[ee==null?void 0:ee.id]),ye=async()=>{const le=await Fn(async()=>await Ze.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(le){const ue=[];le.forEach(pe=>{var je;(je=pe.event_members)==null||je.forEach(Oe=>{ue.push({event_id:pe.id,date:pe.date,user_id:Oe.user_id,name:pe.name,group_id:pe.group_id})})}),M(ue)}},Q=async()=>{const le=await Fn(async()=>await Ze.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(le){const ue=le.map(pe=>({event_id:pe.id,date:pe.date,user_id:"",name:pe.name,group_id:pe.group_id}));oe(ue)}},$=async()=>{console.log("=== INICIO fetchMemberExternalEvents ==="),console.log("GroupId actual:",i);const le=await Ze.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(console.log("4. Query completa:",le.data),le.error){console.error("Error al obtener eventos externos:",le.error);return}const ue=le.data||[],pe=[];ue.forEach(je=>{var Oe;(Oe=je.event_members)==null||Oe.forEach(fe=>{pe.push({user_id:fe.user_id,date:je.date})})}),R(pe),console.log("Eventos externos formateados:",pe),console.log("=== FIN fetchMemberExternalEvents ===")},q=async()=>{if(i){p(!0);try{const le=e.filter(pe=>pe.user_id!==null).map(pe=>pe.user_id),ue=await Fn(async()=>await Ze.from("member_availability").select("user_id, date").in("user_id",le).order("date"),"Error fetching availabilities");if(ue){const pe=e.filter(je=>je.user_id!==null).map(je=>({userId:je.user_id,memberName:je.name||"Unknown Member",dates:ue.filter(Oe=>Oe.user_id===je.user_id).map(Oe=>new Date(Oe.date)),instruments:je.instruments||[],roleInBand:je.role_in_group||"principal"}));a(pe)}}catch(le){console.error("Error fetching availabilities:",le),Pe.error("Error al obtener las disponibilidades")}finally{p(!1)}}},se=le=>Y.filter(ue=>vr(new Date(ue.date),le)),Ae=()=>{const le=e.find(ue=>ue.user_id===(ee==null?void 0:ee.id));return k||(le==null?void 0:le.role_in_group)==="principal"},[P,H]=C.useState(!1),re=C.useRef(null),ce=async(le=!1)=>{try{const ue=window.scrollY;return le?H(!0):w(!0),await new Promise(pe=>setTimeout(pe,50)),await Promise.all([q(),ye(),Q(),$()]),window.scrollTo(0,ue),le||Pe.success("Calendario actualizado correctamente"),!0}catch(ue){return console.error("Error al actualizar datos del calendario:",ue),le||Pe.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{le||w(!1),H(!1)},500)}},he=async le=>{var fe;if(console.log(`Fecha seleccionada: ${ln(le,"dd/MM/yyyy")}`),!ee){Pe.error("Debes iniciar sesión para gestionar la disponibilidad");return}if(m)return;w(!0);const ue=e.find(G=>G.user_id===ee.id);if(!(k||(ue==null?void 0:ue.role_in_group)==="principal"||ee.id===(g??ee.id))){Pe.error("No tienes permisos para gestionar esta disponibilidad"),w(!1);return}const je=g??ee.id;if(L.some(G=>G.user_id===je&&vr(new Date(G.date),le))){Pe.error("No puedes cambiar tu disponibilidad en fechas con eventos programados"),w(!1);return}try{const G=e.find(Fe=>Fe.user_id===je);if(!G){Pe.error("Miembro no encontrado"),w(!1);return}const qe=(fe=s.find(Fe=>Fe.userId===G.user_id))==null?void 0:fe.dates.some(Fe=>vr(Fe,le)),Re=ln(le,"yyyy-MM-dd");if(qe)try{const Fe=await Ze.from("member_availability").delete().eq("user_id",G.user_id).eq("date",Re);if(Fe.error){console.error("Error al eliminar disponibilidad:",Fe.error),Pe.error("Hubo un problema al guardar"),w(!1);return}c(le),Pe.success(`Fecha ${ln(le,"dd/MM/yyyy")} eliminada de tu disponibilidad`),a(be=>be.map(Me=>Me.userId===G.user_id?{...Me,dates:Me.dates.filter(Be=>!vr(Be,le))}:Me))}catch(Fe){console.error("Error inesperado al eliminar disponibilidad:",Fe),Pe.error("Ha ocurrido un error al procesar tu solicitud")}else try{const Fe=await Ze.from("member_availability").insert([{user_id:G.user_id,date:Re}]);if(Fe.error){console.error("Error al insertar disponibilidad:",Fe.error),Pe.error("Hubo un problema al guardar"),w(!1);return}c(le),Pe.success(`Fecha ${ln(le,"dd/MM/yyyy")} añadida a tu disponibilidad`),a(be=>be.map(Me=>Me.userId===G.user_id?{...Me,dates:[...Me.dates,le]}:Me))}catch(Fe){console.error("Error inesperado al añadir disponibilidad:",Fe),Pe.error("Ha ocurrido un error al procesar tu solicitud")}}catch(G){console.error("Error en handleDayClick:",G),Pe.error("Ha ocurrido un error al procesar tu solicitud")}finally{w(!1)}};function ke(le){const ue=U(le),pe=ln(le,"yyyy-MM-dd"),je=e.filter(fe=>{var G;return fe.user_id&&((G=O.groupEvents.get(fe.user_id))==null?void 0:G.has(pe))}),Oe=[...ue];return je.forEach(fe=>{Oe.find(G=>G.id===fe.id)||Oe.push(fe)}),Oe}const Ee=le=>{var st;const{date:ue}=le,pe=ln(ue,"yyyy-MM-dd"),je=ke(ue),Oe=U(ue),fe=g||(ee==null?void 0:ee.id),G=je.some(it=>it.user_id===fe),qe=fe&&((st=O.externalEvents.get(fe))==null?void 0:st.has(pe))||!1,Re=je.filter(it=>it.user_id!==fe),Fe=Re.length,be=Re.filter(it=>{var yt;return it.user_id&&((yt=O.externalEvents.get(it.user_id))==null?void 0:yt.has(pe))}).length,Me=K(ue),Be=se(ue),We=Be.length>0,et=qe||be>0;return h.jsxs("div",{className:`day-content ${Me?"group-available":""} ${We?"has-event":""} ${et?"has-external-events":""} ${l&&vr(ue,l)?"selected-day":""}`,children:[h.jsx("span",{className:`${l&&vr(ue,l)?"text-indigo-900 font-bold":""}`,children:ue.getDate()}),(G||Fe>0||We)&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"availability-dots",children:[G&&h.jsx("div",{className:`availability-dot you ${qe?"border border-orange-500 bg-orange-200":""}`}),Re.slice(0,3).map((it,yt)=>{const Nt=Z.some(ft=>ft.user_id===it.user_id&&vr(new Date(ft.date),ue));return h.jsx("div",{className:`availability-dot others ${Nt?"border border-orange-500 bg-orange-200":""}`},yt)})]}),h.jsxs("div",{className:"day-tooltip",children:[h.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[ln(ue,"MMMM d, yyyy"),h.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[Me&&h.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),We&&h.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:Be.length>1?`${Be[0].name} y ${Be.length-1} más`:Be[0].name}),et&&h.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[be+(qe?1:0)," miembro(s) con eventos externos"]})]})]}),je.length>0&&h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),je.map(it=>{var ft;const yt=Oe.some(pt=>pt.id===it.id),Nt=it.user_id&&((ft=O.externalEvents.get(it.user_id))==null?void 0:ft.has(pe))||!1;return h.jsx("div",{className:`tooltip-member ${it.user_id===(g||(ee==null?void 0:ee.id))?"you":"other"}`,children:h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsx("span",{className:"font-medium",children:it.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[it.role_in_group==="sustituto"&&h.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),yt&&!Nt&&h.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),Nt&&h.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),it.user_id===(g||(ee==null?void 0:ee.id))&&h.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"Tú"})]})]}),it.instruments.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:it.instruments.map((pt,tt)=>h.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1"}),pt.name,tt<it.instruments.length-1&&", "]},`${it.id}-${pt.id}-${tt}`))})]})},it.id)})]})]})]})]})},te=()=>{const ue=J.filter(G=>se(G).length===0).sort((G,qe)=>G.getTime()-qe.getTime()).reduce((G,qe)=>{const Re=ln(qe,"MMMM yyyy",{locale:Qd});G[Re]||(G[Re]={withPrincipals:[],withSubstitutes:[]});const Fe=ke(qe);return e.filter(Me=>Me.role_in_group==="principal").filter(Me=>!Fe.some(Be=>Be.user_id===Me.user_id)).length===0?G[Re].withPrincipals.push(qe):G[Re].withSubstitutes.push(qe),G},{});let pe=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(ue).length===0?pe+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(ue).forEach(([G,qe])=>{pe+=`${G.toUpperCase()}
`,qe.withPrincipals.length>0&&(pe+=`Fechas con miembros principales:
`,pe+=qe.withPrincipals.map(Re=>`${ln(Re,"d(EEE)",{locale:Qd})}`).join(", "),pe+=`

`),qe.withSubstitutes.length>0&&(pe+=`Fechas con sustitutos:
`,pe+=qe.withSubstitutes.map(Re=>`${ln(Re,"d(EEE)",{locale:Qd})}`).join(", "),pe+=`

`),pe+=`
`});const je=new Blob([pe],{type:"text/plain;charset=utf-8"}),Oe=window.URL.createObjectURL(je),fe=document.createElement("a");fe.href=Oe,fe.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${ln(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),window.URL.revokeObjectURL(Oe)};return f?h.jsx("div",{className:"flex justify-center items-center py-8",children:h.jsx(go,{className:"w-6 h-6 animate-spin text-indigo-600"})}):h.jsxs("div",{className:"space-y-6",children:[(k||Ae())&&e.length>0&&h.jsxs("div",{children:[h.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),h.jsxs("div",{className:"relative w-full max-w-xs",children:[h.jsx("select",{id:"member-select",value:g||(ee==null?void 0:ee.id)||"",onChange:le=>N(le.target.value===(ee==null?void 0:ee.id)?null:le.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(le=>h.jsxs("option",{value:le.user_id||"",children:[le.name," ",le.user_id===(ee==null?void 0:ee.id)?"(Tú)":""]},le.id))}),h.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:h.jsx(WD,{className:"h-4 w-4"})})]})]}),h.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),h.jsxs("div",{ref:re,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[h.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${m||P?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[h.jsx("div",{className:"absolute inset-0 bg-black/20"}),h.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[h.jsx(go,{className:"w-6 h-6 animate-spin text-indigo-600"}),h.jsx("span",{children:"Actualizando calendario..."})]})]}),h.jsx(k$,{mode:"single",selected:l,onSelect:c,onDayClick:he,modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:Ee},weekStartsOn:1,locale:Qd})]}),h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),h.jsxs("button",{onClick:le=>{le.preventDefault(),ce()},disabled:m,className:`px-3 py-1 text-sm ${m?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[h.jsx("span",{className:"mr-1",children:m?"...":"↻"}),m?"Actualizando...":"Actualizar"]})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[h.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[h.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[h.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),h.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[h.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),h.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[h.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),h.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[h.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),h.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[h.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),h.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[h.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:"✓"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),h.jsx("div",{className:"flex justify-between items-center",children:h.jsxs("button",{onClick:te,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[h.jsx(q0,{className:"w-4 h-4 mr-2"}),"Descargar Fechas Disponibles del Grupo"]})})]})}async function u6(e,t){try{const{data:n,error:r}=await Ze.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r)throw r;if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,s="calendar.ics",a=new Blob([i],{type:"text/calendar;charset=utf-8"}),l=new File([a],s,{type:"text/calendar;charset=utf-8"}),{error:c}=await Ze.storage.from("calendars").upload(`${e}/${t}/${s}`,l,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:f}}=Ze.storage.from("calendars").getPublicUrl(`${e}/${t}/${s}`),p=`${f}?v=${Date.now()}`,{error:m}=await Ze.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(m)throw m}catch(n){throw console.error("Error updating calendar:",n),n}}function j$({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r,groupId:i}){const s=t.filter(c=>{const f=e.find(p=>p.id===c.memberId);return(f==null?void 0:f.role_in_group)==="principal"}),a=t.filter(c=>{const f=e.find(p=>p.id===c.memberId);return(f==null?void 0:f.role_in_group)==="sustituto"}),l=(c,f)=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-700",children:f}),c.map(p=>{const m=e.find(w=>w.id===p.memberId);return m?h.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${p.isAvailable?"bg-gray-50 hover:bg-gray-100":"bg-red-50"}`,children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("input",{type:"checkbox",checked:p.selected,onChange:w=>n(p.memberId,w.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${!p.isAvailable&&!p.selected?"opacity-50":""}`,disabled:!p.isAvailable&&!p.selected}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-gray-900",children:m.name}),!p.isAvailable&&h.jsxs("span",{className:"inline-flex items-center text-xs text-red-700 bg-red-100 px-2 py-0.5 rounded-full",children:[h.jsx(t_,{className:"w-3 h-3 mr-1"}),"No disponible"]})]}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1"}),m.instruments.map(w=>w.name).join(", ")]})]})]})},p.memberId):null})]});return h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),h.jsxs("div",{className:"space-y-6",children:[l(s,"Miembros Principales"),a.length>0&&l(a,"Sustitutos")]}),r&&h.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[h.jsx(t_,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),h.jsx("p",{children:"Por favor, asegúrate de que todos los instrumentos estén cubiertos por los miembros seleccionados. Si un miembro principal no está disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var J0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */J0.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",m=1,w=2,g=4,N=1,k=2,E=1,b=2,S=4,L=8,M=16,Y=32,oe=64,Z=128,R=256,ee=512,ae=30,O="...",U=800,K=16,J=1,xe=2,ye=3,Q=1/0,$=9007199254740991,q=17976931348623157e292,se=NaN,Ae=4294967295,P=Ae-1,H=Ae>>>1,re=[["ary",Z],["bind",E],["bindKey",b],["curry",L],["curryRight",M],["flip",ee],["partial",Y],["partialRight",oe],["rearg",R]],ce="[object Arguments]",he="[object Array]",ke="[object AsyncFunction]",Ee="[object Boolean]",te="[object Date]",le="[object DOMException]",ue="[object Error]",pe="[object Function]",je="[object GeneratorFunction]",Oe="[object Map]",fe="[object Number]",G="[object Null]",qe="[object Object]",Re="[object Promise]",Fe="[object Proxy]",be="[object RegExp]",Me="[object Set]",Be="[object String]",We="[object Symbol]",et="[object Undefined]",st="[object WeakMap]",it="[object WeakSet]",yt="[object ArrayBuffer]",Nt="[object DataView]",ft="[object Float32Array]",pt="[object Float64Array]",tt="[object Int8Array]",In="[object Int16Array]",zt="[object Int32Array]",Jr="[object Uint8Array]",Qt="[object Uint8ClampedArray]",pn="[object Uint16Array]",oi="[object Uint32Array]",Zt=/\b__p \+= '';/g,sa=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,li=/&(?:amp|lt|gt|quot|#39);/g,bn=/[&<>"']/g,Gt=RegExp(li.source),xt=RegExp(bn.source),Bt=/<%-([\s\S]+?)%>/g,dr=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tr=/^\w*$/,dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yn=/[\\^$.*+?()[\]{}|]/g,rr=RegExp(Yn.source),kn=/^\s+/,Ln=/\s/,En=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kn=/\{\n\/\* \[wrapped with (.+)\] \*/,Bi=/,? & /,ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ps=/[()=,{}\[\]\/\s]/,ms=/\\(\\)?/g,gs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vs=/\w*$/,Ui=/^[-+]0x[0-9a-f]+$/i,Rs=/^0b[01]+$/i,So=/^\[object .+?Constructor\]$/,ll=/^0o[0-7]+$/i,cl=/^(?:0|[1-9]\d*)$/,ul=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,aa=/($^)/,Yu=/['\n\r\u2028\u2029\\]/g,dl="\\ud800-\\udfff",Df="\\u0300-\\u036f",fl="\\ufe20-\\ufe2f",Ku="\\u20d0-\\u20ff",Ju=Df+fl+Ku,hl="\\u2700-\\u27bf",Xu="a-z\\xdf-\\xf6\\xf8-\\xff",Qu="\\xac\\xb1\\xd7\\xf7",Of="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pl="\\u2000-\\u206f",Mf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jn="A-Z\\xc0-\\xd6\\xd8-\\xde",$c="\\ufe0e\\ufe0f",Bc=Qu+Of+pl+Mf,ml="['’]",Uc="["+dl+"]",Zu="["+Bc+"]",ci="["+Ju+"]",No="\\d+",ui="["+hl+"]",gl="["+Xu+"]",zc="[^"+dl+Bc+No+hl+Xu+Jn+"]",qc="\\ud83c[\\udffb-\\udfff]",ed="(?:"+ci+"|"+qc+")",td="[^"+dl+"]",vl="(?:\\ud83c[\\udde6-\\uddff]){2}",Wc="[\\ud800-\\udbff][\\udc00-\\udfff]",Fs="["+Jn+"]",nd="\\u200d",rd="(?:"+gl+"|"+zc+")",Rf="(?:"+Fs+"|"+zc+")",$s="(?:"+ml+"(?:d|ll|m|re|s|t|ve))?",ko="(?:"+ml+"(?:D|LL|M|RE|S|T|VE))?",Eo=ed+"?",Hc="["+$c+"]?",$r="(?:"+nd+"(?:"+[td,vl,Wc].join("|")+")"+Hc+Eo+")*",Ff="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",id="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lt=Hc+Eo+$r,$f="(?:"+[ui,vl,Wc].join("|")+")"+Lt,Bf="(?:"+[td+ci+"?",ci,vl,Wc,Uc].join("|")+")",Bs=RegExp(ml,"g"),sd=RegExp(ci,"g"),yl=RegExp(qc+"(?="+qc+")|"+Bf+Lt,"g"),wl=RegExp([Fs+"?"+gl+"+"+$s+"(?="+[Zu,Fs,"$"].join("|")+")",Rf+"+"+ko+"(?="+[Zu,Fs+rd,"$"].join("|")+")",Fs+"?"+rd+"+"+$s,Fs+"+"+ko,id,Ff,No,$f].join("|"),"g"),Vc=RegExp("["+nd+dl+Ju+$c+"]"),Uf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qf=-1,mn={};mn[ft]=mn[pt]=mn[tt]=mn[In]=mn[zt]=mn[Jr]=mn[Qt]=mn[pn]=mn[oi]=!0,mn[ce]=mn[he]=mn[yt]=mn[Ee]=mn[Nt]=mn[te]=mn[ue]=mn[pe]=mn[Oe]=mn[fe]=mn[qe]=mn[be]=mn[Me]=mn[Be]=mn[st]=!1;var sn={};sn[ce]=sn[he]=sn[yt]=sn[Nt]=sn[Ee]=sn[te]=sn[ft]=sn[pt]=sn[tt]=sn[In]=sn[zt]=sn[Oe]=sn[fe]=sn[qe]=sn[be]=sn[Me]=sn[Be]=sn[We]=sn[Jr]=sn[Qt]=sn[pn]=sn[oi]=!0,sn[ue]=sn[pe]=sn[st]=!1;var Ba={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xl=parseFloat,ad=parseInt,Yc=typeof ii=="object"&&ii&&ii.Object===Object&&ii,od=typeof self=="object"&&self&&self.Object===Object&&self,fr=Yc||od||Function("return this")(),zi=t&&!t.nodeType&&t,Xr=zi&&!0&&e&&!e.nodeType&&e,ld=Xr&&Xr.exports===zi,Us=ld&&Yc.process,Xn=function(){try{var Se=Xr&&Xr.require&&Xr.require("util").types;return Se||Us&&Us.binding&&Us.binding("util")}catch{}}(),bl=Xn&&Xn.isArrayBuffer,Ua=Xn&&Xn.isDate,cd=Xn&&Xn.isMap,Co=Xn&&Xn.isRegExp,ud=Xn&&Xn.isSet,_l=Xn&&Xn.isTypedArray;function Ir(Se,ze,Te){switch(Te.length){case 0:return Se.call(ze);case 1:return Se.call(ze,Te[0]);case 2:return Se.call(ze,Te[0],Te[1]);case 3:return Se.call(ze,Te[0],Te[1],Te[2])}return Se.apply(ze,Te)}function dd(Se,ze,Te,ut){for(var bt=-1,Mt=Se==null?0:Se.length;++bt<Mt;){var Mn=Se[bt];ze(ut,Mn,Te(Mn),Se)}return ut}function Dr(Se,ze){for(var Te=-1,ut=Se==null?0:Se.length;++Te<ut&&ze(Se[Te],Te,Se)!==!1;);return Se}function Kc(Se,ze){for(var Te=Se==null?0:Se.length;Te--&&ze(Se[Te],Te,Se)!==!1;);return Se}function Sl(Se,ze){for(var Te=-1,ut=Se==null?0:Se.length;++Te<ut;)if(!ze(Se[Te],Te,Se))return!1;return!0}function ys(Se,ze){for(var Te=-1,ut=Se==null?0:Se.length,bt=0,Mt=[];++Te<ut;){var Mn=Se[Te];ze(Mn,Te,Se)&&(Mt[bt++]=Mn)}return Mt}function Nl(Se,ze){var Te=Se==null?0:Se.length;return!!Te&&Je(Se,ze,0)>-1}function za(Se,ze,Te){for(var ut=-1,bt=Se==null?0:Se.length;++ut<bt;)if(Te(ze,Se[ut]))return!0;return!1}function un(Se,ze){for(var Te=-1,ut=Se==null?0:Se.length,bt=Array(ut);++Te<ut;)bt[Te]=ze(Se[Te],Te,Se);return bt}function qi(Se,ze){for(var Te=-1,ut=ze.length,bt=Se.length;++Te<ut;)Se[bt+Te]=ze[Te];return Se}function zs(Se,ze,Te,ut){var bt=-1,Mt=Se==null?0:Se.length;for(ut&&Mt&&(Te=Se[++bt]);++bt<Mt;)Te=ze(Te,Se[bt],bt,Se);return Te}function Jc(Se,ze,Te,ut){var bt=Se==null?0:Se.length;for(ut&&bt&&(Te=Se[--bt]);bt--;)Te=ze(Te,Se[bt],bt,Se);return Te}function x(Se,ze){for(var Te=-1,ut=Se==null?0:Se.length;++Te<ut;)if(ze(Se[Te],Te,Se))return!0;return!1}var I=Pt("length");function ie(Se){return Se.split("")}function me(Se){return Se.match(ki)||[]}function Le(Se,ze,Te){var ut;return Te(Se,function(bt,Mt,Mn){if(ze(bt,Mt,Mn))return ut=Mt,!1}),ut}function Ue(Se,ze,Te,ut){for(var bt=Se.length,Mt=Te+(ut?1:-1);ut?Mt--:++Mt<bt;)if(ze(Se[Mt],Mt,Se))return Mt;return-1}function Je(Se,ze,Te){return ze===ze?Vi(Se,ze,Te):Ue(Se,St,Te)}function ct(Se,ze,Te,ut){for(var bt=Te-1,Mt=Se.length;++bt<Mt;)if(ut(Se[bt],ze))return bt;return-1}function St(Se){return Se!==Se}function Dt(Se,ze){var Te=Se==null?0:Se.length;return Te?Zn(Se,ze)/Te:se}function Pt(Se){return function(ze){return ze==null?n:ze[Se]}}function Yt(Se){return function(ze){return Se==null?n:Se[ze]}}function On(Se,ze,Te,ut,bt){return bt(Se,function(Mt,Mn,dn){Te=ut?(ut=!1,Mt):ze(Te,Mt,Mn,dn)}),Te}function Qn(Se,ze){var Te=Se.length;for(Se.sort(ze);Te--;)Se[Te]=Se[Te].value;return Se}function Zn(Se,ze){for(var Te,ut=-1,bt=Se.length;++ut<bt;){var Mt=ze(Se[ut]);Mt!==n&&(Te=Te===n?Mt:Te+Mt)}return Te}function jr(Se,ze){for(var Te=-1,ut=Array(Se);++Te<Se;)ut[Te]=ze(Te);return ut}function Cr(Se,ze){return un(ze,function(Te){return[Te,Se[Te]]})}function Wi(Se){return Se&&Se.slice(0,la(Se)+1).replace(kn,"")}function Pn(Se){return function(ze){return Se(ze)}}function Hi(Se,ze){return un(ze,function(Te){return Se[Te]})}function qa(Se,ze){return Se.has(ze)}function kl(Se,ze){for(var Te=-1,ut=Se.length;++Te<ut&&Je(ze,Se[Te],0)>-1;);return Te}function El(Se,ze){for(var Te=Se.length;Te--&&Je(ze,Se[Te],0)>-1;);return Te}function jl(Se,ze){for(var Te=Se.length,ut=0;Te--;)Se[Te]===ze&&++ut;return ut}var Xc=Yt(Ba),Qc=Yt(Wf);function Cl(Se){return"\\"+Gc[Se]}function Or(Se,ze){return Se==null?n:Se[ze]}function ws(Se){return Vc.test(Se)}function Al(Se){return Uf.test(Se)}function Ll(Se){for(var ze,Te=[];!(ze=Se.next()).done;)Te.push(ze.value);return Te}function Ao(Se){var ze=-1,Te=Array(Se.size);return Se.forEach(function(ut,bt){Te[++ze]=[bt,ut]}),Te}function Qr(Se,ze){return function(Te){return Se(ze(Te))}}function qs(Se,ze){for(var Te=-1,ut=Se.length,bt=0,Mt=[];++Te<ut;){var Mn=Se[Te];(Mn===ze||Mn===p)&&(Se[Te]=p,Mt[bt++]=Te)}return Mt}function Wa(Se){var ze=-1,Te=Array(Se.size);return Se.forEach(function(ut){Te[++ze]=ut}),Te}function fd(Se){var ze=-1,Te=Array(Se.size);return Se.forEach(function(ut){Te[++ze]=[ut,ut]}),Te}function Vi(Se,ze,Te){for(var ut=Te-1,bt=Se.length;++ut<bt;)if(Se[ut]===ze)return ut;return-1}function Pl(Se,ze,Te){for(var ut=Te+1;ut--;)if(Se[ut]===ze)return ut;return ut}function oa(Se){return ws(Se)?fi(Se):I(Se)}function di(Se){return ws(Se)?Zr(Se):ie(Se)}function la(Se){for(var ze=Se.length;ze--&&Ln.test(Se.charAt(ze)););return ze}var Lo=Yt(jo);function fi(Se){for(var ze=yl.lastIndex=0;yl.test(Se);)++ze;return ze}function Zr(Se){return Se.match(yl)||[]}function Ha(Se){return Se.match(wl)||[]}var ca=function Se(ze){ze=ze==null?fr:hi.defaults(fr.Object(),ze,hi.pick(fr,zf));var Te=ze.Array,ut=ze.Date,bt=ze.Error,Mt=ze.Function,Mn=ze.Math,dn=ze.Object,Po=ze.RegExp,To=ze.String,Ar=ze.TypeError,xs=Te.prototype,Io=Mt.prototype,bs=dn.prototype,Ws=ze["__core-js_shared__"],_s=Io.toString,en=bs.hasOwnProperty,Gi=0,Ei=function(){var o=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),gn=bs.toString,jn=_s.call(dn),ir=fr._,yr=Po("^"+_s.call(en).replace(Yn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yi=ld?ze.Buffer:n,Ki=ze.Symbol,ua=ze.Uint8Array,Zc=Yi?Yi.allocUnsafe:n,Tl=Qr(dn.getPrototypeOf,dn),eu=dn.create,pi=bs.propertyIsEnumerable,ei=xs.splice,tu=Ki?Ki.isConcatSpreadable:n,Va=Ki?Ki.iterator:n,Ga=Ki?Ki.toStringTag:n,Do=function(){try{var o=uu(dn,"defineProperty");return o({},"",{}),o}catch{}}(),hd=ze.clearTimeout!==fr.clearTimeout&&ze.clearTimeout,Hf=ut&&ut.now!==fr.Date.now&&ut.now,Ip=ze.setTimeout!==fr.setTimeout&&ze.setTimeout,Il=Mn.ceil,Dl=Mn.floor,Ol=dn.getOwnPropertySymbols,Vf=Yi?Yi.isBuffer:n,Dp=ze.isFinite,Kg=xs.join,Op=Qr(dn.keys,dn),wr=Mn.max,Br=Mn.min,Jg=ut.now,Xg=ze.parseInt,Mp=Mn.random,Gf=xs.reverse,nu=uu(ze,"DataView"),da=uu(ze,"Map"),Yf=uu(ze,"Promise"),Ml=uu(ze,"Set"),Rl=uu(ze,"WeakMap"),ru=uu(dn,"create"),pd=Rl&&new Rl,Fl={},Qg=du(nu),Ya=du(da),Ss=du(Yf),fa=du(Ml),Zg=du(Rl),iu=Ki?Ki.prototype:n,Ji=iu?iu.valueOf:n,ji=iu?iu.toString:n;function W(o){if(pr(o)&&!Ft(o)&&!(o instanceof Wt)){if(o instanceof Ci)return o;if(en.call(o,"__wrapped__"))return Dw(o)}return new Ci(o)}var $l=function(){function o(){}return function(u){if(!ar(u))return{};if(eu)return eu(u);o.prototype=u;var y=new o;return o.prototype=n,y}}();function su(){}function Ci(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}W.templateSettings={escape:Bt,evaluate:dr,interpolate:rn,variable:"",imports:{_:W}},W.prototype=su.prototype,W.prototype.constructor=W,Ci.prototype=$l(su.prototype),Ci.prototype.constructor=Ci;function Wt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ae,this.__views__=[]}function Rp(){var o=new Wt(this.__wrapped__);return o.__actions__=Qi(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Qi(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Qi(this.__views__),o}function e1(){if(this.__filtered__){var o=new Wt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function md(){var o=this.__wrapped__.value(),u=this.__dir__,y=Ft(o),j=u<0,D=y?o.length:0,X=mk(0,D,this.__views__),de=X.start,ge=X.end,Ce=ge-de,Ye=j?ge:de-1,Ke=this.__iteratees__,Qe=Ke.length,ot=0,_t=Br(Ce,this.__takeCount__);if(!y||!j&&D==Ce&&_t==Ce)return cu(o,this.__actions__);var Et=[];e:for(;Ce--&&ot<_t;){Ye+=u;for(var qt=-1,jt=o[Ye];++qt<Qe;){var Jt=Ke[qt],tn=Jt.iteratee,Es=Jt.type,Ii=tn(jt);if(Es==xe)jt=Ii;else if(!Ii){if(Es==J)continue e;break e}}Et[ot++]=jt}return Et}Wt.prototype=$l(su.prototype),Wt.prototype.constructor=Wt;function Hs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var j=o[u];this.set(j[0],j[1])}}function au(){this.__data__=ru?ru(null):{},this.size=0}function Kf(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Fp(o){var u=this.__data__;if(ru){var y=u[o];return y===c?n:y}return en.call(u,o)?u[o]:n}function t1(o){var u=this.__data__;return ru?u[o]!==n:en.call(u,o)}function $p(o,u){var y=this.__data__;return this.size+=this.has(o)?0:1,y[o]=ru&&u===n?c:u,this}Hs.prototype.clear=au,Hs.prototype.delete=Kf,Hs.prototype.get=Fp,Hs.prototype.has=t1,Hs.prototype.set=$p;function ha(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var j=o[u];this.set(j[0],j[1])}}function n1(){this.__data__=[],this.size=0}function r1(o){var u=this.__data__,y=ve(u,o);if(y<0)return!1;var j=u.length-1;return y==j?u.pop():ei.call(u,y,1),--this.size,!0}function i1(o){var u=this.__data__,y=ve(u,o);return y<0?n:u[y][1]}function s1(o){return ve(this.__data__,o)>-1}function a1(o,u){var y=this.__data__,j=ve(y,o);return j<0?(++this.size,y.push([o,u])):y[j][1]=u,this}ha.prototype.clear=n1,ha.prototype.delete=r1,ha.prototype.get=i1,ha.prototype.has=s1,ha.prototype.set=a1;function Vs(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var j=o[u];this.set(j[0],j[1])}}function gd(){this.size=0,this.__data__={hash:new Hs,map:new(da||ha),string:new Hs}}function o1(o){var u=rm(this,o).delete(o);return this.size-=u?1:0,u}function l1(o){return rm(this,o).get(o)}function Bp(o){return rm(this,o).has(o)}function d(o,u){var y=rm(this,o),j=y.size;return y.set(o,u),this.size+=y.size==j?0:1,this}Vs.prototype.clear=gd,Vs.prototype.delete=o1,Vs.prototype.get=l1,Vs.prototype.has=Bp,Vs.prototype.set=d;function v(o){var u=-1,y=o==null?0:o.length;for(this.__data__=new Vs;++u<y;)this.add(o[u])}function _(o){return this.__data__.set(o,c),this}function A(o){return this.__data__.has(o)}v.prototype.add=v.prototype.push=_,v.prototype.has=A;function T(o){var u=this.__data__=new ha(o);this.size=u.size}function F(){this.__data__=new ha,this.size=0}function B(o){var u=this.__data__,y=u.delete(o);return this.size=u.size,y}function z(o){return this.__data__.get(o)}function V(o){return this.__data__.has(o)}function ne(o,u){var y=this.__data__;if(y instanceof ha){var j=y.__data__;if(!da||j.length<i-1)return j.push([o,u]),this.size=++y.size,this;y=this.__data__=new Vs(j)}return y.set(o,u),this.size=y.size,this}T.prototype.clear=F,T.prototype.delete=B,T.prototype.get=z,T.prototype.has=V,T.prototype.set=ne;function we(o,u){var y=Ft(o),j=!y&&fu(o),D=!y&&!j&&Jl(o),X=!y&&!j&&!D&&Ad(o),de=y||j||D||X,ge=de?jr(o.length,To):[],Ce=ge.length;for(var Ye in o)(u||en.call(o,Ye))&&!(de&&(Ye=="length"||D&&(Ye=="offset"||Ye=="parent")||X&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||Bo(Ye,Ce)))&&ge.push(Ye);return ge}function Ie(o){var u=o.length;return u?o[Hl(0,u-1)]:n}function De(o,u){return im(Qi(o),rt(u,0,o.length))}function Ne(o){return im(Qi(o))}function Ge(o,u,y){(y!==n&&!va(o[u],y)||y===n&&!(u in o))&&He(o,u,y)}function $e(o,u,y){var j=o[u];(!(en.call(o,u)&&va(j,y))||y===n&&!(u in o))&&He(o,u,y)}function ve(o,u){for(var y=o.length;y--;)if(va(o[y][0],u))return y;return-1}function _e(o,u,y,j){return Ot(o,function(D,X,de){u(j,D,y(D),de)}),j}function Ve(o,u){return o&&no(u,qr(u),o)}function Xe(o,u){return o&&no(u,es(u),o)}function He(o,u,y){u=="__proto__"&&Do?Do(o,u,{configurable:!0,enumerable:!0,value:y,writable:!0}):o[u]=y}function lt(o,u){for(var y=-1,j=u.length,D=Te(j),X=o==null;++y<j;)D[y]=X?n:L1(o,u[y]);return D}function rt(o,u,y){return o===o&&(y!==n&&(o=o<=y?o:y),u!==n&&(o=o>=u?o:u)),o}function gt(o,u,y,j,D,X){var de,ge=u&m,Ce=u&w,Ye=u&g;if(y&&(de=D?y(o,j,D,X):y(o)),de!==n)return de;if(!ar(o))return o;var Ke=Ft(o);if(Ke){if(de=vk(o),!ge)return Qi(o,de)}else{var Qe=mi(o),ot=Qe==pe||Qe==je;if(Jl(o))return kd(o,ge);if(Qe==qe||Qe==ce||ot&&!D){if(de=Ce||ot?{}:kw(o),!ge)return Ce?ak(o,Xe(de,o)):sk(o,Ve(de,o))}else{if(!sn[Qe])return D?o:{};de=yk(o,Qe,ge)}}X||(X=new T);var _t=X.get(o);if(_t)return _t;X.set(o,de),ex(o)?o.forEach(function(jt){de.add(gt(jt,u,y,jt,o,X))}):Qw(o)&&o.forEach(function(jt,Jt){de.set(Jt,gt(jt,u,y,Jt,o,X))});var Et=Ye?Ce?g1:m1:Ce?es:qr,qt=Ke?n:Et(o);return Dr(qt||o,function(jt,Jt){qt&&(Jt=jt,jt=o[Jt]),$e(de,Jt,gt(jt,u,y,Jt,o,X))}),de}function at(o){var u=qr(o);return function(y){return an(y,o,u)}}function an(o,u,y){var j=y.length;if(o==null)return!j;for(o=dn(o);j--;){var D=y[j],X=u[D],de=o[D];if(de===n&&!(D in o)||!X(de))return!1}return!0}function fn(o,u,y){if(typeof o!="function")throw new Ar(a);return sh(function(){o.apply(n,y)},u)}function Ht(o,u,y,j){var D=-1,X=Nl,de=!0,ge=o.length,Ce=[],Ye=u.length;if(!ge)return Ce;y&&(u=un(u,Pn(y))),j?(X=za,de=!1):u.length>=i&&(X=qa,de=!1,u=new v(u));e:for(;++D<ge;){var Ke=o[D],Qe=y==null?Ke:y(Ke);if(Ke=j||Ke!==0?Ke:0,de&&Qe===Qe){for(var ot=Ye;ot--;)if(u[ot]===Qe)continue e;Ce.push(Ke)}else X(u,Qe,j)||Ce.push(Ke)}return Ce}var Ot=dw(er),yn=dw(ni,!0);function wn(o,u){var y=!0;return Ot(o,function(j,D,X){return y=!!u(j,D,X),y}),y}function It(o,u,y){for(var j=-1,D=o.length;++j<D;){var X=o[j],de=u(X);if(de!=null&&(ge===n?de===de&&!ks(de):y(de,ge)))var ge=de,Ce=X}return Ce}function hr(o,u,y,j){var D=o.length;for(y=Ut(y),y<0&&(y=-y>D?0:D+y),j=j===n||j>D?D:Ut(j),j<0&&(j+=D),j=y>j?0:nx(j);y<j;)o[y++]=u;return o}function ti(o,u){var y=[];return Ot(o,function(j,D,X){u(j,D,X)&&y.push(j)}),y}function Kt(o,u,y,j,D){var X=-1,de=o.length;for(y||(y=xk),D||(D=[]);++X<de;){var ge=o[X];u>0&&y(ge)?u>1?Kt(ge,u-1,y,j,D):qi(D,ge):j||(D[D.length]=ge)}return D}var Ur=fw(),hn=fw(!0);function er(o,u){return o&&Ur(o,u,qr)}function ni(o,u){return o&&hn(o,u,qr)}function sr(o,u){return ys(u,function(y){return Uo(o[y])})}function Un(o,u){u=Ys(u,o);for(var y=0,j=u.length;o!=null&&y<j;)o=o[ro(u[y++])];return y&&y==j?o:n}function zr(o,u,y){var j=u(o);return Ft(o)?j:qi(j,y(o))}function Cn(o){return o==null?o===n?et:G:Ga&&Ga in dn(o)?pk(o):jk(o)}function Xi(o,u){return o>u}function Lr(o,u){return o!=null&&en.call(o,u)}function pa(o,u){return o!=null&&u in dn(o)}function Oo(o,u,y){return o>=Br(u,y)&&o<wr(u,y)}function Ka(o,u,y){for(var j=y?za:Nl,D=o[0].length,X=o.length,de=X,ge=Te(X),Ce=1/0,Ye=[];de--;){var Ke=o[de];de&&u&&(Ke=un(Ke,Pn(u))),Ce=Br(Ke.length,Ce),ge[de]=!y&&(u||D>=120&&Ke.length>=120)?new v(de&&Ke):n}Ke=o[0];var Qe=-1,ot=ge[0];e:for(;++Qe<D&&Ye.length<Ce;){var _t=Ke[Qe],Et=u?u(_t):_t;if(_t=y||_t!==0?_t:0,!(ot?qa(ot,Et):j(Ye,Et,y))){for(de=X;--de;){var qt=ge[de];if(!(qt?qa(qt,Et):j(o[de],Et,y)))continue e}ot&&ot.push(Et),Ye.push(_t)}}return Ye}function Ja(o,u,y,j){return er(o,function(D,X,de){u(j,y(D),X,de)}),j}function An(o,u,y){u=Ys(u,o),o=Aw(o,u);var j=o==null?o:o[ro(Ks(u))];return j==null?n:Ir(j,o,y)}function vd(o){return pr(o)&&Cn(o)==ce}function Up(o){return pr(o)&&Cn(o)==yt}function zp(o){return pr(o)&&Cn(o)==te}function Xa(o,u,y,j,D){return o===u?!0:o==null||u==null||!pr(o)&&!pr(u)?o!==o&&u!==u:ou(o,u,y,j,Xa,D)}function ou(o,u,y,j,D,X){var de=Ft(o),ge=Ft(u),Ce=de?he:mi(o),Ye=ge?he:mi(u);Ce=Ce==ce?qe:Ce,Ye=Ye==ce?qe:Ye;var Ke=Ce==qe,Qe=Ye==qe,ot=Ce==Ye;if(ot&&Jl(o)){if(!Jl(u))return!1;de=!0,Ke=!1}if(ot&&!Ke)return X||(X=new T),de||Ad(o)?_w(o,u,y,j,D,X):fk(o,u,Ce,y,j,D,X);if(!(y&N)){var _t=Ke&&en.call(o,"__wrapped__"),Et=Qe&&en.call(u,"__wrapped__");if(_t||Et){var qt=_t?o.value():o,jt=Et?u.value():u;return X||(X=new T),D(qt,jt,y,j,X)}}return ot?(X||(X=new T),hk(o,u,y,j,D,X)):!1}function yd(o){return pr(o)&&mi(o)==Oe}function Ai(o,u,y,j){var D=y.length,X=D,de=!j;if(o==null)return!X;for(o=dn(o);D--;){var ge=y[D];if(de&&ge[2]?ge[1]!==o[ge[0]]:!(ge[0]in o))return!1}for(;++D<X;){ge=y[D];var Ce=ge[0],Ye=o[Ce],Ke=ge[1];if(de&&ge[2]){if(Ye===n&&!(Ce in o))return!1}else{var Qe=new T;if(j)var ot=j(Ye,Ke,Ce,o,u,Qe);if(!(ot===n?Xa(Ke,Ye,N|k,j,Qe):ot))return!1}}return!0}function Mo(o){if(!ar(o)||_k(o))return!1;var u=Uo(o)?yr:So;return u.test(du(o))}function Bl(o){return pr(o)&&Cn(o)==be}function qp(o){return pr(o)&&mi(o)==Me}function wd(o){return pr(o)&&um(o.length)&&!!mn[Cn(o)]}function Jf(o){return typeof o=="function"?o:o==null?ts:typeof o=="object"?Ft(o)?Hp(o[0],o[1]):Wp(o):hx(o)}function Ul(o){if(!ih(o))return Op(o);var u=[];for(var y in dn(o))en.call(o,y)&&y!="constructor"&&u.push(y);return u}function Xf(o){if(!ar(o))return Ek(o);var u=ih(o),y=[];for(var j in o)j=="constructor"&&(u||!en.call(o,j))||y.push(j);return y}function zl(o,u){return o<u}function ql(o,u){var y=-1,j=Zi(o)?Te(o.length):[];return Ot(o,function(D,X,de){j[++y]=u(D,X,de)}),j}function Wp(o){var u=y1(o);return u.length==1&&u[0][2]?jw(u[0][0],u[0][1]):function(y){return y===o||Ai(y,o,u)}}function Hp(o,u){return x1(o)&&Ew(u)?jw(ro(o),u):function(y){var j=L1(y,o);return j===n&&j===u?P1(y,o):Xa(u,j,N|k)}}function Wl(o,u,y,j,D){o!==u&&Ur(u,function(X,de){if(D||(D=new T),ar(X))Qa(o,u,de,y,Wl,j,D);else{var ge=j?j(_1(o,de),X,de+"",o,u,D):n;ge===n&&(ge=X),Ge(o,de,ge)}},es)}function Qa(o,u,y,j,D,X,de){var ge=_1(o,y),Ce=_1(u,y),Ye=de.get(Ce);if(Ye){Ge(o,y,Ye);return}var Ke=X?X(ge,Ce,y+"",o,u,de):n,Qe=Ke===n;if(Qe){var ot=Ft(Ce),_t=!ot&&Jl(Ce),Et=!ot&&!_t&&Ad(Ce);Ke=Ce,ot||_t||Et?Ft(ge)?Ke=ge:xr(ge)?Ke=Qi(ge):_t?(Qe=!1,Ke=kd(Ce,!0)):Et?(Qe=!1,Ke=ow(Ce,!0)):Ke=[]:ah(Ce)||fu(Ce)?(Ke=ge,fu(ge)?Ke=rx(ge):(!ar(ge)||Uo(ge))&&(Ke=kw(Ce))):Qe=!1}Qe&&(de.set(Ce,Ke),D(Ke,Ce,j,X,de),de.delete(Ce)),Ge(o,y,Ke)}function Vp(o,u){var y=o.length;if(y)return u+=u<0?y:0,Bo(u,y)?o[u]:n}function Gp(o,u,y){u.length?u=un(u,function(X){return Ft(X)?function(de){return Un(de,X.length===1?X[0]:X)}:X}):u=[ts];var j=-1;u=un(u,Pn(kt()));var D=ql(o,function(X,de,ge){var Ce=un(u,function(Ye){return Ye(X)});return{criteria:Ce,index:++j,value:X}});return Qn(D,function(X,de){return ik(X,de,y)})}function c1(o,u){return Qf(o,u,function(y,j){return P1(o,j)})}function Qf(o,u,y){for(var j=-1,D=u.length,X={};++j<D;){var de=u[j],ge=Un(o,de);y(ge,de)&&Vl(X,Ys(de,o),ge)}return X}function xd(o){return function(u){return Un(u,o)}}function bd(o,u,y,j){var D=j?ct:Je,X=-1,de=u.length,ge=o;for(o===u&&(u=Qi(u)),y&&(ge=un(o,Pn(y)));++X<de;)for(var Ce=0,Ye=u[X],Ke=y?y(Ye):Ye;(Ce=D(ge,Ke,Ce,j))>-1;)ge!==o&&ei.call(ge,Ce,1),ei.call(o,Ce,1);return o}function Zf(o,u){for(var y=o?u.length:0,j=y-1;y--;){var D=u[y];if(y==j||D!==X){var X=D;Bo(D)?ei.call(o,D,1):nh(o,D)}}return o}function Hl(o,u){return o+Dl(Mp()*(u-o+1))}function eh(o,u,y,j){for(var D=-1,X=wr(Il((u-o)/(y||1)),0),de=Te(X);X--;)de[j?X:++D]=o,o+=y;return de}function Ro(o,u){var y="";if(!o||u<1||u>$)return y;do u%2&&(y+=o),u=Dl(u/2),u&&(o+=o);while(u);return y}function $t(o,u){return S1(Cw(o,u,ts),o+"")}function u1(o){return Ie(Ld(o))}function _d(o,u){var y=Ld(o);return im(y,rt(u,0,y.length))}function Vl(o,u,y,j){if(!ar(o))return o;u=Ys(u,o);for(var D=-1,X=u.length,de=X-1,ge=o;ge!=null&&++D<X;){var Ce=ro(u[D]),Ye=y;if(Ce==="__proto__"||Ce==="constructor"||Ce==="prototype")return o;if(D!=de){var Ke=ge[Ce];Ye=j?j(Ke,Ce,ge):n,Ye===n&&(Ye=ar(Ke)?Ke:Bo(u[D+1])?[]:{})}$e(ge,Ce,Ye),ge=ge[Ce]}return o}var Sd=pd?function(o,u){return pd.set(o,u),o}:ts,Za=Do?function(o,u){return Do(o,"toString",{configurable:!0,enumerable:!1,value:I1(u),writable:!0})}:ts;function Yp(o){return im(Ld(o))}function Li(o,u,y){var j=-1,D=o.length;u<0&&(u=-u>D?0:D+u),y=y>D?D:y,y<0&&(y+=D),D=u>y?0:y-u>>>0,u>>>=0;for(var X=Te(D);++j<D;)X[j]=o[j+u];return X}function d1(o,u){var y;return Ot(o,function(j,D,X){return y=u(j,D,X),!y}),!!y}function lu(o,u,y){var j=0,D=o==null?j:o.length;if(typeof u=="number"&&u===u&&D<=H){for(;j<D;){var X=j+D>>>1,de=o[X];de!==null&&!ks(de)&&(y?de<=u:de<u)?j=X+1:D=X}return D}return eo(o,u,ts,y)}function eo(o,u,y,j){var D=0,X=o==null?0:o.length;if(X===0)return 0;u=y(u);for(var de=u!==u,ge=u===null,Ce=ks(u),Ye=u===n;D<X;){var Ke=Dl((D+X)/2),Qe=y(o[Ke]),ot=Qe!==n,_t=Qe===null,Et=Qe===Qe,qt=ks(Qe);if(de)var jt=j||Et;else Ye?jt=Et&&(j||ot):ge?jt=Et&&ot&&(j||!_t):Ce?jt=Et&&ot&&!_t&&(j||!qt):_t||qt?jt=!1:jt=j?Qe<=u:Qe<u;jt?D=Ke+1:X=Ke}return Br(X,P)}function Kp(o,u){for(var y=-1,j=o.length,D=0,X=[];++y<j;){var de=o[y],ge=u?u(de):de;if(!y||!va(ge,Ce)){var Ce=ge;X[D++]=de===0?0:de}}return X}function th(o){return typeof o=="number"?o:ks(o)?se:+o}function Pi(o){if(typeof o=="string")return o;if(Ft(o))return un(o,Pi)+"";if(ks(o))return ji?ji.call(o):"";var u=o+"";return u=="0"&&1/o==-Q?"-0":u}function ma(o,u,y){var j=-1,D=Nl,X=o.length,de=!0,ge=[],Ce=ge;if(y)de=!1,D=za;else if(X>=i){var Ye=u?null:uk(o);if(Ye)return Wa(Ye);de=!1,D=qa,Ce=new v}else Ce=u?[]:ge;e:for(;++j<X;){var Ke=o[j],Qe=u?u(Ke):Ke;if(Ke=y||Ke!==0?Ke:0,de&&Qe===Qe){for(var ot=Ce.length;ot--;)if(Ce[ot]===Qe)continue e;u&&Ce.push(Qe),ge.push(Ke)}else D(Ce,Qe,y)||(Ce!==ge&&Ce.push(Qe),ge.push(Ke))}return ge}function nh(o,u){return u=Ys(u,o),o=Aw(o,u),o==null||delete o[ro(Ks(u))]}function Gl(o,u,y,j){return Vl(o,u,y(Un(o,u)),j)}function Yl(o,u,y,j){for(var D=o.length,X=j?D:-1;(j?X--:++X<D)&&u(o[X],X,o););return y?Li(o,j?0:X,j?X+1:D):Li(o,j?X+1:0,j?D:X)}function cu(o,u){var y=o;return y instanceof Wt&&(y=y.value()),zs(u,function(j,D){return D.func.apply(D.thisArg,qi([j],D.args))},y)}function Ns(o,u,y){var j=o.length;if(j<2)return j?ma(o[0]):[];for(var D=-1,X=Te(j);++D<j;)for(var de=o[D],ge=-1;++ge<j;)ge!=D&&(X[D]=Ht(X[D]||de,o[ge],u,y));return ma(Kt(X,1),u,y)}function ga(o,u,y){for(var j=-1,D=o.length,X=u.length,de={};++j<D;){var ge=j<X?u[j]:n;y(de,o[j],ge)}return de}function Gs(o){return xr(o)?o:[]}function Kl(o){return typeof o=="function"?o:ts}function Ys(o,u){return Ft(o)?o:x1(o,u)?[o]:Iw(xn(o))}var Jp=$t;function to(o,u,y){var j=o.length;return y=y===n?j:y,!u&&y>=j?o:Li(o,u,y)}var Nd=hd||function(o){return fr.clearTimeout(o)};function kd(o,u){if(u)return o.slice();var y=o.length,j=Zc?Zc(y):new o.constructor(y);return o.copy(j),j}function f1(o){var u=new o.constructor(o.byteLength);return new ua(u).set(new ua(o)),u}function tk(o,u){var y=u?f1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.byteLength)}function nk(o){var u=new o.constructor(o.source,vs.exec(o));return u.lastIndex=o.lastIndex,u}function rk(o){return Ji?dn(Ji.call(o)):{}}function ow(o,u){var y=u?f1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.length)}function lw(o,u){if(o!==u){var y=o!==n,j=o===null,D=o===o,X=ks(o),de=u!==n,ge=u===null,Ce=u===u,Ye=ks(u);if(!ge&&!Ye&&!X&&o>u||X&&de&&Ce&&!ge&&!Ye||j&&de&&Ce||!y&&Ce||!D)return 1;if(!j&&!X&&!Ye&&o<u||Ye&&y&&D&&!j&&!X||ge&&y&&D||!de&&D||!Ce)return-1}return 0}function ik(o,u,y){for(var j=-1,D=o.criteria,X=u.criteria,de=D.length,ge=y.length;++j<de;){var Ce=lw(D[j],X[j]);if(Ce){if(j>=ge)return Ce;var Ye=y[j];return Ce*(Ye=="desc"?-1:1)}}return o.index-u.index}function cw(o,u,y,j){for(var D=-1,X=o.length,de=y.length,ge=-1,Ce=u.length,Ye=wr(X-de,0),Ke=Te(Ce+Ye),Qe=!j;++ge<Ce;)Ke[ge]=u[ge];for(;++D<de;)(Qe||D<X)&&(Ke[y[D]]=o[D]);for(;Ye--;)Ke[ge++]=o[D++];return Ke}function uw(o,u,y,j){for(var D=-1,X=o.length,de=-1,ge=y.length,Ce=-1,Ye=u.length,Ke=wr(X-ge,0),Qe=Te(Ke+Ye),ot=!j;++D<Ke;)Qe[D]=o[D];for(var _t=D;++Ce<Ye;)Qe[_t+Ce]=u[Ce];for(;++de<ge;)(ot||D<X)&&(Qe[_t+y[de]]=o[D++]);return Qe}function Qi(o,u){var y=-1,j=o.length;for(u||(u=Te(j));++y<j;)u[y]=o[y];return u}function no(o,u,y,j){var D=!y;y||(y={});for(var X=-1,de=u.length;++X<de;){var ge=u[X],Ce=j?j(y[ge],o[ge],ge,y,o):n;Ce===n&&(Ce=o[ge]),D?He(y,ge,Ce):$e(y,ge,Ce)}return y}function sk(o,u){return no(o,w1(o),u)}function ak(o,u){return no(o,Sw(o),u)}function Xp(o,u){return function(y,j){var D=Ft(y)?dd:_e,X=u?u():{};return D(y,o,kt(j,2),X)}}function Ed(o){return $t(function(u,y){var j=-1,D=y.length,X=D>1?y[D-1]:n,de=D>2?y[2]:n;for(X=o.length>3&&typeof X=="function"?(D--,X):n,de&&Ti(y[0],y[1],de)&&(X=D<3?n:X,D=1),u=dn(u);++j<D;){var ge=y[j];ge&&o(u,ge,j,X)}return u})}function dw(o,u){return function(y,j){if(y==null)return y;if(!Zi(y))return o(y,j);for(var D=y.length,X=u?D:-1,de=dn(y);(u?X--:++X<D)&&j(de[X],X,de)!==!1;);return y}}function fw(o){return function(u,y,j){for(var D=-1,X=dn(u),de=j(u),ge=de.length;ge--;){var Ce=de[o?ge:++D];if(y(X[Ce],Ce,X)===!1)break}return u}}function ok(o,u,y){var j=u&E,D=rh(o);function X(){var de=this&&this!==fr&&this instanceof X?D:o;return de.apply(j?y:this,arguments)}return X}function hw(o){return function(u){u=xn(u);var y=ws(u)?di(u):n,j=y?y[0]:u.charAt(0),D=y?to(y,1).join(""):u.slice(1);return j[o]()+D}}function jd(o){return function(u){return zs(dx(ux(u).replace(Bs,"")),o,"")}}function rh(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var y=$l(o.prototype),j=o.apply(y,u);return ar(j)?j:y}}function lk(o,u,y){var j=rh(o);function D(){for(var X=arguments.length,de=Te(X),ge=X,Ce=Cd(D);ge--;)de[ge]=arguments[ge];var Ye=X<3&&de[0]!==Ce&&de[X-1]!==Ce?[]:qs(de,Ce);if(X-=Ye.length,X<y)return yw(o,u,Qp,D.placeholder,n,de,Ye,n,n,y-X);var Ke=this&&this!==fr&&this instanceof D?j:o;return Ir(Ke,this,de)}return D}function pw(o){return function(u,y,j){var D=dn(u);if(!Zi(u)){var X=kt(y,3);u=qr(u),y=function(ge){return X(D[ge],ge,D)}}var de=o(u,y,j);return de>-1?D[X?u[de]:de]:n}}function mw(o){return $o(function(u){var y=u.length,j=y,D=Ci.prototype.thru;for(o&&u.reverse();j--;){var X=u[j];if(typeof X!="function")throw new Ar(a);if(D&&!de&&nm(X)=="wrapper")var de=new Ci([],!0)}for(j=de?j:y;++j<y;){X=u[j];var ge=nm(X),Ce=ge=="wrapper"?v1(X):n;Ce&&b1(Ce[0])&&Ce[1]==(Z|L|Y|R)&&!Ce[4].length&&Ce[9]==1?de=de[nm(Ce[0])].apply(de,Ce[3]):de=X.length==1&&b1(X)?de[ge]():de.thru(X)}return function(){var Ye=arguments,Ke=Ye[0];if(de&&Ye.length==1&&Ft(Ke))return de.plant(Ke).value();for(var Qe=0,ot=y?u[Qe].apply(this,Ye):Ke;++Qe<y;)ot=u[Qe].call(this,ot);return ot}})}function Qp(o,u,y,j,D,X,de,ge,Ce,Ye){var Ke=u&Z,Qe=u&E,ot=u&b,_t=u&(L|M),Et=u&ee,qt=ot?n:rh(o);function jt(){for(var Jt=arguments.length,tn=Te(Jt),Es=Jt;Es--;)tn[Es]=arguments[Es];if(_t)var Ii=Cd(jt),js=jl(tn,Ii);if(j&&(tn=cw(tn,j,D,_t)),X&&(tn=uw(tn,X,de,_t)),Jt-=js,_t&&Jt<Ye){var br=qs(tn,Ii);return yw(o,u,Qp,jt.placeholder,y,tn,br,ge,Ce,Ye-Jt)}var ya=Qe?y:this,qo=ot?ya[o]:o;return Jt=tn.length,ge?tn=Ck(tn,ge):Et&&Jt>1&&tn.reverse(),Ke&&Ce<Jt&&(tn.length=Ce),this&&this!==fr&&this instanceof jt&&(qo=qt||rh(qo)),qo.apply(ya,tn)}return jt}function gw(o,u){return function(y,j){return Ja(y,o,u(j),{})}}function Zp(o,u){return function(y,j){var D;if(y===n&&j===n)return u;if(y!==n&&(D=y),j!==n){if(D===n)return j;typeof y=="string"||typeof j=="string"?(y=Pi(y),j=Pi(j)):(y=th(y),j=th(j)),D=o(y,j)}return D}}function h1(o){return $o(function(u){return u=un(u,Pn(kt())),$t(function(y){var j=this;return o(u,function(D){return Ir(D,j,y)})})})}function em(o,u){u=u===n?" ":Pi(u);var y=u.length;if(y<2)return y?Ro(u,o):u;var j=Ro(u,Il(o/oa(u)));return ws(u)?to(di(j),0,o).join(""):j.slice(0,o)}function ck(o,u,y,j){var D=u&E,X=rh(o);function de(){for(var ge=-1,Ce=arguments.length,Ye=-1,Ke=j.length,Qe=Te(Ke+Ce),ot=this&&this!==fr&&this instanceof de?X:o;++Ye<Ke;)Qe[Ye]=j[Ye];for(;Ce--;)Qe[Ye++]=arguments[++ge];return Ir(ot,D?y:this,Qe)}return de}function vw(o){return function(u,y,j){return j&&typeof j!="number"&&Ti(u,y,j)&&(y=j=n),u=zo(u),y===n?(y=u,u=0):y=zo(y),j=j===n?u<y?1:-1:zo(j),eh(u,y,j,o)}}function tm(o){return function(u,y){return typeof u=="string"&&typeof y=="string"||(u=Js(u),y=Js(y)),o(u,y)}}function yw(o,u,y,j,D,X,de,ge,Ce,Ye){var Ke=u&L,Qe=Ke?de:n,ot=Ke?n:de,_t=Ke?X:n,Et=Ke?n:X;u|=Ke?Y:oe,u&=~(Ke?oe:Y),u&S||(u&=~(E|b));var qt=[o,u,D,_t,Qe,Et,ot,ge,Ce,Ye],jt=y.apply(n,qt);return b1(o)&&Lw(jt,qt),jt.placeholder=j,Pw(jt,o,u)}function p1(o){var u=Mn[o];return function(y,j){if(y=Js(y),j=j==null?0:Br(Ut(j),292),j&&Dp(y)){var D=(xn(y)+"e").split("e"),X=u(D[0]+"e"+(+D[1]+j));return D=(xn(X)+"e").split("e"),+(D[0]+"e"+(+D[1]-j))}return u(y)}}var uk=Ml&&1/Wa(new Ml([,-0]))[1]==Q?function(o){return new Ml(o)}:M1;function ww(o){return function(u){var y=mi(u);return y==Oe?Ao(u):y==Me?fd(u):Cr(u,o(u))}}function Fo(o,u,y,j,D,X,de,ge){var Ce=u&b;if(!Ce&&typeof o!="function")throw new Ar(a);var Ye=j?j.length:0;if(Ye||(u&=~(Y|oe),j=D=n),de=de===n?de:wr(Ut(de),0),ge=ge===n?ge:Ut(ge),Ye-=D?D.length:0,u&oe){var Ke=j,Qe=D;j=D=n}var ot=Ce?n:v1(o),_t=[o,u,y,j,D,Ke,Qe,X,de,ge];if(ot&&kk(_t,ot),o=_t[0],u=_t[1],y=_t[2],j=_t[3],D=_t[4],ge=_t[9]=_t[9]===n?Ce?0:o.length:wr(_t[9]-Ye,0),!ge&&u&(L|M)&&(u&=~(L|M)),!u||u==E)var Et=ok(o,u,y);else u==L||u==M?Et=lk(o,u,ge):(u==Y||u==(E|Y))&&!D.length?Et=ck(o,u,y,j):Et=Qp.apply(n,_t);var qt=ot?Sd:Lw;return Pw(qt(Et,_t),o,u)}function xw(o,u,y,j){return o===n||va(o,bs[y])&&!en.call(j,y)?u:o}function bw(o,u,y,j,D,X){return ar(o)&&ar(u)&&(X.set(u,o),Wl(o,u,n,bw,X),X.delete(u)),o}function dk(o){return ah(o)?n:o}function _w(o,u,y,j,D,X){var de=y&N,ge=o.length,Ce=u.length;if(ge!=Ce&&!(de&&Ce>ge))return!1;var Ye=X.get(o),Ke=X.get(u);if(Ye&&Ke)return Ye==u&&Ke==o;var Qe=-1,ot=!0,_t=y&k?new v:n;for(X.set(o,u),X.set(u,o);++Qe<ge;){var Et=o[Qe],qt=u[Qe];if(j)var jt=de?j(qt,Et,Qe,u,o,X):j(Et,qt,Qe,o,u,X);if(jt!==n){if(jt)continue;ot=!1;break}if(_t){if(!x(u,function(Jt,tn){if(!qa(_t,tn)&&(Et===Jt||D(Et,Jt,y,j,X)))return _t.push(tn)})){ot=!1;break}}else if(!(Et===qt||D(Et,qt,y,j,X))){ot=!1;break}}return X.delete(o),X.delete(u),ot}function fk(o,u,y,j,D,X,de){switch(y){case Nt:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case yt:return!(o.byteLength!=u.byteLength||!X(new ua(o),new ua(u)));case Ee:case te:case fe:return va(+o,+u);case ue:return o.name==u.name&&o.message==u.message;case be:case Be:return o==u+"";case Oe:var ge=Ao;case Me:var Ce=j&N;if(ge||(ge=Wa),o.size!=u.size&&!Ce)return!1;var Ye=de.get(o);if(Ye)return Ye==u;j|=k,de.set(o,u);var Ke=_w(ge(o),ge(u),j,D,X,de);return de.delete(o),Ke;case We:if(Ji)return Ji.call(o)==Ji.call(u)}return!1}function hk(o,u,y,j,D,X){var de=y&N,ge=m1(o),Ce=ge.length,Ye=m1(u),Ke=Ye.length;if(Ce!=Ke&&!de)return!1;for(var Qe=Ce;Qe--;){var ot=ge[Qe];if(!(de?ot in u:en.call(u,ot)))return!1}var _t=X.get(o),Et=X.get(u);if(_t&&Et)return _t==u&&Et==o;var qt=!0;X.set(o,u),X.set(u,o);for(var jt=de;++Qe<Ce;){ot=ge[Qe];var Jt=o[ot],tn=u[ot];if(j)var Es=de?j(tn,Jt,ot,u,o,X):j(Jt,tn,ot,o,u,X);if(!(Es===n?Jt===tn||D(Jt,tn,y,j,X):Es)){qt=!1;break}jt||(jt=ot=="constructor")}if(qt&&!jt){var Ii=o.constructor,js=u.constructor;Ii!=js&&"constructor"in o&&"constructor"in u&&!(typeof Ii=="function"&&Ii instanceof Ii&&typeof js=="function"&&js instanceof js)&&(qt=!1)}return X.delete(o),X.delete(u),qt}function $o(o){return S1(Cw(o,n,Rw),o+"")}function m1(o){return zr(o,qr,w1)}function g1(o){return zr(o,es,Sw)}var v1=pd?function(o){return pd.get(o)}:M1;function nm(o){for(var u=o.name+"",y=Fl[u],j=en.call(Fl,u)?y.length:0;j--;){var D=y[j],X=D.func;if(X==null||X==o)return D.name}return u}function Cd(o){var u=en.call(W,"placeholder")?W:o;return u.placeholder}function kt(){var o=W.iteratee||D1;return o=o===D1?Jf:o,arguments.length?o(arguments[0],arguments[1]):o}function rm(o,u){var y=o.__data__;return bk(u)?y[typeof u=="string"?"string":"hash"]:y.map}function y1(o){for(var u=qr(o),y=u.length;y--;){var j=u[y],D=o[j];u[y]=[j,D,Ew(D)]}return u}function uu(o,u){var y=Or(o,u);return Mo(y)?y:n}function pk(o){var u=en.call(o,Ga),y=o[Ga];try{o[Ga]=n;var j=!0}catch{}var D=gn.call(o);return j&&(u?o[Ga]=y:delete o[Ga]),D}var w1=Ol?function(o){return o==null?[]:(o=dn(o),ys(Ol(o),function(u){return pi.call(o,u)}))}:R1,Sw=Ol?function(o){for(var u=[];o;)qi(u,w1(o)),o=Tl(o);return u}:R1,mi=Cn;(nu&&mi(new nu(new ArrayBuffer(1)))!=Nt||da&&mi(new da)!=Oe||Yf&&mi(Yf.resolve())!=Re||Ml&&mi(new Ml)!=Me||Rl&&mi(new Rl)!=st)&&(mi=function(o){var u=Cn(o),y=u==qe?o.constructor:n,j=y?du(y):"";if(j)switch(j){case Qg:return Nt;case Ya:return Oe;case Ss:return Re;case fa:return Me;case Zg:return st}return u});function mk(o,u,y){for(var j=-1,D=y.length;++j<D;){var X=y[j],de=X.size;switch(X.type){case"drop":o+=de;break;case"dropRight":u-=de;break;case"take":u=Br(u,o+de);break;case"takeRight":o=wr(o,u-de);break}}return{start:o,end:u}}function gk(o){var u=o.match(Kn);return u?u[1].split(Bi):[]}function Nw(o,u,y){u=Ys(u,o);for(var j=-1,D=u.length,X=!1;++j<D;){var de=ro(u[j]);if(!(X=o!=null&&y(o,de)))break;o=o[de]}return X||++j!=D?X:(D=o==null?0:o.length,!!D&&um(D)&&Bo(de,D)&&(Ft(o)||fu(o)))}function vk(o){var u=o.length,y=new o.constructor(u);return u&&typeof o[0]=="string"&&en.call(o,"index")&&(y.index=o.index,y.input=o.input),y}function kw(o){return typeof o.constructor=="function"&&!ih(o)?$l(Tl(o)):{}}function yk(o,u,y){var j=o.constructor;switch(u){case yt:return f1(o);case Ee:case te:return new j(+o);case Nt:return tk(o,y);case ft:case pt:case tt:case In:case zt:case Jr:case Qt:case pn:case oi:return ow(o,y);case Oe:return new j;case fe:case Be:return new j(o);case be:return nk(o);case Me:return new j;case We:return rk(o)}}function wk(o,u){var y=u.length;if(!y)return o;var j=y-1;return u[j]=(y>1?"& ":"")+u[j],u=u.join(y>2?", ":" "),o.replace(En,`{
/* [wrapped with `+u+`] */
`)}function xk(o){return Ft(o)||fu(o)||!!(tu&&o&&o[tu])}function Bo(o,u){var y=typeof o;return u=u??$,!!u&&(y=="number"||y!="symbol"&&cl.test(o))&&o>-1&&o%1==0&&o<u}function Ti(o,u,y){if(!ar(y))return!1;var j=typeof u;return(j=="number"?Zi(y)&&Bo(u,y.length):j=="string"&&u in y)?va(y[u],o):!1}function x1(o,u){if(Ft(o))return!1;var y=typeof o;return y=="number"||y=="symbol"||y=="boolean"||o==null||ks(o)?!0:Tr.test(o)||!nr.test(o)||u!=null&&o in dn(u)}function bk(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function b1(o){var u=nm(o),y=W[u];if(typeof y!="function"||!(u in Wt.prototype))return!1;if(o===y)return!0;var j=v1(y);return!!j&&o===j[0]}function _k(o){return!!Ei&&Ei in o}var Sk=Ws?Uo:F1;function ih(o){var u=o&&o.constructor,y=typeof u=="function"&&u.prototype||bs;return o===y}function Ew(o){return o===o&&!ar(o)}function jw(o,u){return function(y){return y==null?!1:y[o]===u&&(u!==n||o in dn(y))}}function Nk(o){var u=lm(o,function(j){return y.size===f&&y.clear(),j}),y=u.cache;return u}function kk(o,u){var y=o[1],j=u[1],D=y|j,X=D<(E|b|Z),de=j==Z&&y==L||j==Z&&y==R&&o[7].length<=u[8]||j==(Z|R)&&u[7].length<=u[8]&&y==L;if(!(X||de))return o;j&E&&(o[2]=u[2],D|=y&E?0:S);var ge=u[3];if(ge){var Ce=o[3];o[3]=Ce?cw(Ce,ge,u[4]):ge,o[4]=Ce?qs(o[3],p):u[4]}return ge=u[5],ge&&(Ce=o[5],o[5]=Ce?uw(Ce,ge,u[6]):ge,o[6]=Ce?qs(o[5],p):u[6]),ge=u[7],ge&&(o[7]=ge),j&Z&&(o[8]=o[8]==null?u[8]:Br(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=D,o}function Ek(o){var u=[];if(o!=null)for(var y in dn(o))u.push(y);return u}function jk(o){return gn.call(o)}function Cw(o,u,y){return u=wr(u===n?o.length-1:u,0),function(){for(var j=arguments,D=-1,X=wr(j.length-u,0),de=Te(X);++D<X;)de[D]=j[u+D];D=-1;for(var ge=Te(u+1);++D<u;)ge[D]=j[D];return ge[u]=y(de),Ir(o,this,ge)}}function Aw(o,u){return u.length<2?o:Un(o,Li(u,0,-1))}function Ck(o,u){for(var y=o.length,j=Br(u.length,y),D=Qi(o);j--;){var X=u[j];o[j]=Bo(X,y)?D[X]:n}return o}function _1(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Lw=Tw(Sd),sh=Ip||function(o,u){return fr.setTimeout(o,u)},S1=Tw(Za);function Pw(o,u,y){var j=u+"";return S1(o,wk(j,Ak(gk(j),y)))}function Tw(o){var u=0,y=0;return function(){var j=Jg(),D=K-(j-y);if(y=j,D>0){if(++u>=U)return arguments[0]}else u=0;return o.apply(n,arguments)}}function im(o,u){var y=-1,j=o.length,D=j-1;for(u=u===n?j:u;++y<u;){var X=Hl(y,D),de=o[X];o[X]=o[y],o[y]=de}return o.length=u,o}var Iw=Nk(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(dt,function(y,j,D,X){u.push(D?X.replace(ms,"$1"):j||y)}),u});function ro(o){if(typeof o=="string"||ks(o))return o;var u=o+"";return u=="0"&&1/o==-Q?"-0":u}function du(o){if(o!=null){try{return _s.call(o)}catch{}try{return o+""}catch{}}return""}function Ak(o,u){return Dr(re,function(y){var j="_."+y[0];u&y[1]&&!Nl(o,j)&&o.push(j)}),o.sort()}function Dw(o){if(o instanceof Wt)return o.clone();var u=new Ci(o.__wrapped__,o.__chain__);return u.__actions__=Qi(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function Lk(o,u,y){(y?Ti(o,u,y):u===n)?u=1:u=wr(Ut(u),0);var j=o==null?0:o.length;if(!j||u<1)return[];for(var D=0,X=0,de=Te(Il(j/u));D<j;)de[X++]=Li(o,D,D+=u);return de}function Pk(o){for(var u=-1,y=o==null?0:o.length,j=0,D=[];++u<y;){var X=o[u];X&&(D[j++]=X)}return D}function Tk(){var o=arguments.length;if(!o)return[];for(var u=Te(o-1),y=arguments[0],j=o;j--;)u[j-1]=arguments[j];return qi(Ft(y)?Qi(y):[y],Kt(u,1))}var Ik=$t(function(o,u){return xr(o)?Ht(o,Kt(u,1,xr,!0)):[]}),Dk=$t(function(o,u){var y=Ks(u);return xr(y)&&(y=n),xr(o)?Ht(o,Kt(u,1,xr,!0),kt(y,2)):[]}),Ok=$t(function(o,u){var y=Ks(u);return xr(y)&&(y=n),xr(o)?Ht(o,Kt(u,1,xr,!0),n,y):[]});function Mk(o,u,y){var j=o==null?0:o.length;return j?(u=y||u===n?1:Ut(u),Li(o,u<0?0:u,j)):[]}function Rk(o,u,y){var j=o==null?0:o.length;return j?(u=y||u===n?1:Ut(u),u=j-u,Li(o,0,u<0?0:u)):[]}function Fk(o,u){return o&&o.length?Yl(o,kt(u,3),!0,!0):[]}function $k(o,u){return o&&o.length?Yl(o,kt(u,3),!0):[]}function Bk(o,u,y,j){var D=o==null?0:o.length;return D?(y&&typeof y!="number"&&Ti(o,u,y)&&(y=0,j=D),hr(o,u,y,j)):[]}function Ow(o,u,y){var j=o==null?0:o.length;if(!j)return-1;var D=y==null?0:Ut(y);return D<0&&(D=wr(j+D,0)),Ue(o,kt(u,3),D)}function Mw(o,u,y){var j=o==null?0:o.length;if(!j)return-1;var D=j-1;return y!==n&&(D=Ut(y),D=y<0?wr(j+D,0):Br(D,j-1)),Ue(o,kt(u,3),D,!0)}function Rw(o){var u=o==null?0:o.length;return u?Kt(o,1):[]}function Uk(o){var u=o==null?0:o.length;return u?Kt(o,Q):[]}function zk(o,u){var y=o==null?0:o.length;return y?(u=u===n?1:Ut(u),Kt(o,u)):[]}function qk(o){for(var u=-1,y=o==null?0:o.length,j={};++u<y;){var D=o[u];j[D[0]]=D[1]}return j}function Fw(o){return o&&o.length?o[0]:n}function Wk(o,u,y){var j=o==null?0:o.length;if(!j)return-1;var D=y==null?0:Ut(y);return D<0&&(D=wr(j+D,0)),Je(o,u,D)}function Hk(o){var u=o==null?0:o.length;return u?Li(o,0,-1):[]}var Vk=$t(function(o){var u=un(o,Gs);return u.length&&u[0]===o[0]?Ka(u):[]}),Gk=$t(function(o){var u=Ks(o),y=un(o,Gs);return u===Ks(y)?u=n:y.pop(),y.length&&y[0]===o[0]?Ka(y,kt(u,2)):[]}),Yk=$t(function(o){var u=Ks(o),y=un(o,Gs);return u=typeof u=="function"?u:n,u&&y.pop(),y.length&&y[0]===o[0]?Ka(y,n,u):[]});function Kk(o,u){return o==null?"":Kg.call(o,u)}function Ks(o){var u=o==null?0:o.length;return u?o[u-1]:n}function Jk(o,u,y){var j=o==null?0:o.length;if(!j)return-1;var D=j;return y!==n&&(D=Ut(y),D=D<0?wr(j+D,0):Br(D,j-1)),u===u?Pl(o,u,D):Ue(o,St,D,!0)}function Xk(o,u){return o&&o.length?Vp(o,Ut(u)):n}var Qk=$t($w);function $w(o,u){return o&&o.length&&u&&u.length?bd(o,u):o}function Zk(o,u,y){return o&&o.length&&u&&u.length?bd(o,u,kt(y,2)):o}function eE(o,u,y){return o&&o.length&&u&&u.length?bd(o,u,n,y):o}var tE=$o(function(o,u){var y=o==null?0:o.length,j=lt(o,u);return Zf(o,un(u,function(D){return Bo(D,y)?+D:D}).sort(lw)),j});function nE(o,u){var y=[];if(!(o&&o.length))return y;var j=-1,D=[],X=o.length;for(u=kt(u,3);++j<X;){var de=o[j];u(de,j,o)&&(y.push(de),D.push(j))}return Zf(o,D),y}function N1(o){return o==null?o:Gf.call(o)}function rE(o,u,y){var j=o==null?0:o.length;return j?(y&&typeof y!="number"&&Ti(o,u,y)?(u=0,y=j):(u=u==null?0:Ut(u),y=y===n?j:Ut(y)),Li(o,u,y)):[]}function iE(o,u){return lu(o,u)}function sE(o,u,y){return eo(o,u,kt(y,2))}function aE(o,u){var y=o==null?0:o.length;if(y){var j=lu(o,u);if(j<y&&va(o[j],u))return j}return-1}function oE(o,u){return lu(o,u,!0)}function lE(o,u,y){return eo(o,u,kt(y,2),!0)}function cE(o,u){var y=o==null?0:o.length;if(y){var j=lu(o,u,!0)-1;if(va(o[j],u))return j}return-1}function uE(o){return o&&o.length?Kp(o):[]}function dE(o,u){return o&&o.length?Kp(o,kt(u,2)):[]}function fE(o){var u=o==null?0:o.length;return u?Li(o,1,u):[]}function hE(o,u,y){return o&&o.length?(u=y||u===n?1:Ut(u),Li(o,0,u<0?0:u)):[]}function pE(o,u,y){var j=o==null?0:o.length;return j?(u=y||u===n?1:Ut(u),u=j-u,Li(o,u<0?0:u,j)):[]}function mE(o,u){return o&&o.length?Yl(o,kt(u,3),!1,!0):[]}function gE(o,u){return o&&o.length?Yl(o,kt(u,3)):[]}var vE=$t(function(o){return ma(Kt(o,1,xr,!0))}),yE=$t(function(o){var u=Ks(o);return xr(u)&&(u=n),ma(Kt(o,1,xr,!0),kt(u,2))}),wE=$t(function(o){var u=Ks(o);return u=typeof u=="function"?u:n,ma(Kt(o,1,xr,!0),n,u)});function xE(o){return o&&o.length?ma(o):[]}function bE(o,u){return o&&o.length?ma(o,kt(u,2)):[]}function _E(o,u){return u=typeof u=="function"?u:n,o&&o.length?ma(o,n,u):[]}function k1(o){if(!(o&&o.length))return[];var u=0;return o=ys(o,function(y){if(xr(y))return u=wr(y.length,u),!0}),jr(u,function(y){return un(o,Pt(y))})}function Bw(o,u){if(!(o&&o.length))return[];var y=k1(o);return u==null?y:un(y,function(j){return Ir(u,n,j)})}var SE=$t(function(o,u){return xr(o)?Ht(o,u):[]}),NE=$t(function(o){return Ns(ys(o,xr))}),kE=$t(function(o){var u=Ks(o);return xr(u)&&(u=n),Ns(ys(o,xr),kt(u,2))}),EE=$t(function(o){var u=Ks(o);return u=typeof u=="function"?u:n,Ns(ys(o,xr),n,u)}),jE=$t(k1);function CE(o,u){return ga(o||[],u||[],$e)}function AE(o,u){return ga(o||[],u||[],Vl)}var LE=$t(function(o){var u=o.length,y=u>1?o[u-1]:n;return y=typeof y=="function"?(o.pop(),y):n,Bw(o,y)});function Uw(o){var u=W(o);return u.__chain__=!0,u}function PE(o,u){return u(o),o}function sm(o,u){return u(o)}var TE=$o(function(o){var u=o.length,y=u?o[0]:0,j=this.__wrapped__,D=function(X){return lt(X,o)};return u>1||this.__actions__.length||!(j instanceof Wt)||!Bo(y)?this.thru(D):(j=j.slice(y,+y+(u?1:0)),j.__actions__.push({func:sm,args:[D],thisArg:n}),new Ci(j,this.__chain__).thru(function(X){return u&&!X.length&&X.push(n),X}))});function IE(){return Uw(this)}function DE(){return new Ci(this.value(),this.__chain__)}function OE(){this.__values__===n&&(this.__values__=tx(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function ME(){return this}function RE(o){for(var u,y=this;y instanceof su;){var j=Dw(y);j.__index__=0,j.__values__=n,u?D.__wrapped__=j:u=j;var D=j;y=y.__wrapped__}return D.__wrapped__=o,u}function FE(){var o=this.__wrapped__;if(o instanceof Wt){var u=o;return this.__actions__.length&&(u=new Wt(this)),u=u.reverse(),u.__actions__.push({func:sm,args:[N1],thisArg:n}),new Ci(u,this.__chain__)}return this.thru(N1)}function $E(){return cu(this.__wrapped__,this.__actions__)}var BE=Xp(function(o,u,y){en.call(o,y)?++o[y]:He(o,y,1)});function UE(o,u,y){var j=Ft(o)?Sl:wn;return y&&Ti(o,u,y)&&(u=n),j(o,kt(u,3))}function zE(o,u){var y=Ft(o)?ys:ti;return y(o,kt(u,3))}var qE=pw(Ow),WE=pw(Mw);function HE(o,u){return Kt(am(o,u),1)}function VE(o,u){return Kt(am(o,u),Q)}function GE(o,u,y){return y=y===n?1:Ut(y),Kt(am(o,u),y)}function zw(o,u){var y=Ft(o)?Dr:Ot;return y(o,kt(u,3))}function qw(o,u){var y=Ft(o)?Kc:yn;return y(o,kt(u,3))}var YE=Xp(function(o,u,y){en.call(o,y)?o[y].push(u):He(o,y,[u])});function KE(o,u,y,j){o=Zi(o)?o:Ld(o),y=y&&!j?Ut(y):0;var D=o.length;return y<0&&(y=wr(D+y,0)),dm(o)?y<=D&&o.indexOf(u,y)>-1:!!D&&Je(o,u,y)>-1}var JE=$t(function(o,u,y){var j=-1,D=typeof u=="function",X=Zi(o)?Te(o.length):[];return Ot(o,function(de){X[++j]=D?Ir(u,de,y):An(de,u,y)}),X}),XE=Xp(function(o,u,y){He(o,y,u)});function am(o,u){var y=Ft(o)?un:ql;return y(o,kt(u,3))}function QE(o,u,y,j){return o==null?[]:(Ft(u)||(u=u==null?[]:[u]),y=j?n:y,Ft(y)||(y=y==null?[]:[y]),Gp(o,u,y))}var ZE=Xp(function(o,u,y){o[y?0:1].push(u)},function(){return[[],[]]});function ej(o,u,y){var j=Ft(o)?zs:On,D=arguments.length<3;return j(o,kt(u,4),y,D,Ot)}function tj(o,u,y){var j=Ft(o)?Jc:On,D=arguments.length<3;return j(o,kt(u,4),y,D,yn)}function nj(o,u){var y=Ft(o)?ys:ti;return y(o,cm(kt(u,3)))}function rj(o){var u=Ft(o)?Ie:u1;return u(o)}function ij(o,u,y){(y?Ti(o,u,y):u===n)?u=1:u=Ut(u);var j=Ft(o)?De:_d;return j(o,u)}function sj(o){var u=Ft(o)?Ne:Yp;return u(o)}function aj(o){if(o==null)return 0;if(Zi(o))return dm(o)?oa(o):o.length;var u=mi(o);return u==Oe||u==Me?o.size:Ul(o).length}function oj(o,u,y){var j=Ft(o)?x:d1;return y&&Ti(o,u,y)&&(u=n),j(o,kt(u,3))}var lj=$t(function(o,u){if(o==null)return[];var y=u.length;return y>1&&Ti(o,u[0],u[1])?u=[]:y>2&&Ti(u[0],u[1],u[2])&&(u=[u[0]]),Gp(o,Kt(u,1),[])}),om=Hf||function(){return fr.Date.now()};function cj(o,u){if(typeof u!="function")throw new Ar(a);return o=Ut(o),function(){if(--o<1)return u.apply(this,arguments)}}function Ww(o,u,y){return u=y?n:u,u=o&&u==null?o.length:u,Fo(o,Z,n,n,n,n,u)}function Hw(o,u){var y;if(typeof u!="function")throw new Ar(a);return o=Ut(o),function(){return--o>0&&(y=u.apply(this,arguments)),o<=1&&(u=n),y}}var E1=$t(function(o,u,y){var j=E;if(y.length){var D=qs(y,Cd(E1));j|=Y}return Fo(o,j,u,y,D)}),Vw=$t(function(o,u,y){var j=E|b;if(y.length){var D=qs(y,Cd(Vw));j|=Y}return Fo(u,j,o,y,D)});function Gw(o,u,y){u=y?n:u;var j=Fo(o,L,n,n,n,n,n,u);return j.placeholder=Gw.placeholder,j}function Yw(o,u,y){u=y?n:u;var j=Fo(o,M,n,n,n,n,n,u);return j.placeholder=Yw.placeholder,j}function Kw(o,u,y){var j,D,X,de,ge,Ce,Ye=0,Ke=!1,Qe=!1,ot=!0;if(typeof o!="function")throw new Ar(a);u=Js(u)||0,ar(y)&&(Ke=!!y.leading,Qe="maxWait"in y,X=Qe?wr(Js(y.maxWait)||0,u):X,ot="trailing"in y?!!y.trailing:ot);function _t(br){var ya=j,qo=D;return j=D=n,Ye=br,de=o.apply(qo,ya),de}function Et(br){return Ye=br,ge=sh(Jt,u),Ke?_t(br):de}function qt(br){var ya=br-Ce,qo=br-Ye,px=u-ya;return Qe?Br(px,X-qo):px}function jt(br){var ya=br-Ce,qo=br-Ye;return Ce===n||ya>=u||ya<0||Qe&&qo>=X}function Jt(){var br=om();if(jt(br))return tn(br);ge=sh(Jt,qt(br))}function tn(br){return ge=n,ot&&j?_t(br):(j=D=n,de)}function Es(){ge!==n&&Nd(ge),Ye=0,j=Ce=D=ge=n}function Ii(){return ge===n?de:tn(om())}function js(){var br=om(),ya=jt(br);if(j=arguments,D=this,Ce=br,ya){if(ge===n)return Et(Ce);if(Qe)return Nd(ge),ge=sh(Jt,u),_t(Ce)}return ge===n&&(ge=sh(Jt,u)),de}return js.cancel=Es,js.flush=Ii,js}var uj=$t(function(o,u){return fn(o,1,u)}),dj=$t(function(o,u,y){return fn(o,Js(u)||0,y)});function fj(o){return Fo(o,ee)}function lm(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Ar(a);var y=function(){var j=arguments,D=u?u.apply(this,j):j[0],X=y.cache;if(X.has(D))return X.get(D);var de=o.apply(this,j);return y.cache=X.set(D,de)||X,de};return y.cache=new(lm.Cache||Vs),y}lm.Cache=Vs;function cm(o){if(typeof o!="function")throw new Ar(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function hj(o){return Hw(2,o)}var pj=Jp(function(o,u){u=u.length==1&&Ft(u[0])?un(u[0],Pn(kt())):un(Kt(u,1),Pn(kt()));var y=u.length;return $t(function(j){for(var D=-1,X=Br(j.length,y);++D<X;)j[D]=u[D].call(this,j[D]);return Ir(o,this,j)})}),j1=$t(function(o,u){var y=qs(u,Cd(j1));return Fo(o,Y,n,u,y)}),Jw=$t(function(o,u){var y=qs(u,Cd(Jw));return Fo(o,oe,n,u,y)}),mj=$o(function(o,u){return Fo(o,R,n,n,n,u)});function gj(o,u){if(typeof o!="function")throw new Ar(a);return u=u===n?u:Ut(u),$t(o,u)}function vj(o,u){if(typeof o!="function")throw new Ar(a);return u=u==null?0:wr(Ut(u),0),$t(function(y){var j=y[u],D=to(y,0,u);return j&&qi(D,j),Ir(o,this,D)})}function yj(o,u,y){var j=!0,D=!0;if(typeof o!="function")throw new Ar(a);return ar(y)&&(j="leading"in y?!!y.leading:j,D="trailing"in y?!!y.trailing:D),Kw(o,u,{leading:j,maxWait:u,trailing:D})}function wj(o){return Ww(o,1)}function xj(o,u){return j1(Kl(u),o)}function bj(){if(!arguments.length)return[];var o=arguments[0];return Ft(o)?o:[o]}function _j(o){return gt(o,g)}function Sj(o,u){return u=typeof u=="function"?u:n,gt(o,g,u)}function Nj(o){return gt(o,m|g)}function kj(o,u){return u=typeof u=="function"?u:n,gt(o,m|g,u)}function Ej(o,u){return u==null||an(o,u,qr(u))}function va(o,u){return o===u||o!==o&&u!==u}var jj=tm(Xi),Cj=tm(function(o,u){return o>=u}),fu=vd(function(){return arguments}())?vd:function(o){return pr(o)&&en.call(o,"callee")&&!pi.call(o,"callee")},Ft=Te.isArray,Aj=bl?Pn(bl):Up;function Zi(o){return o!=null&&um(o.length)&&!Uo(o)}function xr(o){return pr(o)&&Zi(o)}function Lj(o){return o===!0||o===!1||pr(o)&&Cn(o)==Ee}var Jl=Vf||F1,Pj=Ua?Pn(Ua):zp;function Tj(o){return pr(o)&&o.nodeType===1&&!ah(o)}function Ij(o){if(o==null)return!0;if(Zi(o)&&(Ft(o)||typeof o=="string"||typeof o.splice=="function"||Jl(o)||Ad(o)||fu(o)))return!o.length;var u=mi(o);if(u==Oe||u==Me)return!o.size;if(ih(o))return!Ul(o).length;for(var y in o)if(en.call(o,y))return!1;return!0}function Dj(o,u){return Xa(o,u)}function Oj(o,u,y){y=typeof y=="function"?y:n;var j=y?y(o,u):n;return j===n?Xa(o,u,n,y):!!j}function C1(o){if(!pr(o))return!1;var u=Cn(o);return u==ue||u==le||typeof o.message=="string"&&typeof o.name=="string"&&!ah(o)}function Mj(o){return typeof o=="number"&&Dp(o)}function Uo(o){if(!ar(o))return!1;var u=Cn(o);return u==pe||u==je||u==ke||u==Fe}function Xw(o){return typeof o=="number"&&o==Ut(o)}function um(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=$}function ar(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function pr(o){return o!=null&&typeof o=="object"}var Qw=cd?Pn(cd):yd;function Rj(o,u){return o===u||Ai(o,u,y1(u))}function Fj(o,u,y){return y=typeof y=="function"?y:n,Ai(o,u,y1(u),y)}function $j(o){return Zw(o)&&o!=+o}function Bj(o){if(Sk(o))throw new bt(s);return Mo(o)}function Uj(o){return o===null}function zj(o){return o==null}function Zw(o){return typeof o=="number"||pr(o)&&Cn(o)==fe}function ah(o){if(!pr(o)||Cn(o)!=qe)return!1;var u=Tl(o);if(u===null)return!0;var y=en.call(u,"constructor")&&u.constructor;return typeof y=="function"&&y instanceof y&&_s.call(y)==jn}var A1=Co?Pn(Co):Bl;function qj(o){return Xw(o)&&o>=-$&&o<=$}var ex=ud?Pn(ud):qp;function dm(o){return typeof o=="string"||!Ft(o)&&pr(o)&&Cn(o)==Be}function ks(o){return typeof o=="symbol"||pr(o)&&Cn(o)==We}var Ad=_l?Pn(_l):wd;function Wj(o){return o===n}function Hj(o){return pr(o)&&mi(o)==st}function Vj(o){return pr(o)&&Cn(o)==it}var Gj=tm(zl),Yj=tm(function(o,u){return o<=u});function tx(o){if(!o)return[];if(Zi(o))return dm(o)?di(o):Qi(o);if(Va&&o[Va])return Ll(o[Va]());var u=mi(o),y=u==Oe?Ao:u==Me?Wa:Ld;return y(o)}function zo(o){if(!o)return o===0?o:0;if(o=Js(o),o===Q||o===-Q){var u=o<0?-1:1;return u*q}return o===o?o:0}function Ut(o){var u=zo(o),y=u%1;return u===u?y?u-y:u:0}function nx(o){return o?rt(Ut(o),0,Ae):0}function Js(o){if(typeof o=="number")return o;if(ks(o))return se;if(ar(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=ar(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Wi(o);var y=Rs.test(o);return y||ll.test(o)?ad(o.slice(2),y?2:8):Ui.test(o)?se:+o}function rx(o){return no(o,es(o))}function Kj(o){return o?rt(Ut(o),-$,$):o===0?o:0}function xn(o){return o==null?"":Pi(o)}var Jj=Ed(function(o,u){if(ih(u)||Zi(u)){no(u,qr(u),o);return}for(var y in u)en.call(u,y)&&$e(o,y,u[y])}),ix=Ed(function(o,u){no(u,es(u),o)}),fm=Ed(function(o,u,y,j){no(u,es(u),o,j)}),Xj=Ed(function(o,u,y,j){no(u,qr(u),o,j)}),Qj=$o(lt);function Zj(o,u){var y=$l(o);return u==null?y:Ve(y,u)}var e8=$t(function(o,u){o=dn(o);var y=-1,j=u.length,D=j>2?u[2]:n;for(D&&Ti(u[0],u[1],D)&&(j=1);++y<j;)for(var X=u[y],de=es(X),ge=-1,Ce=de.length;++ge<Ce;){var Ye=de[ge],Ke=o[Ye];(Ke===n||va(Ke,bs[Ye])&&!en.call(o,Ye))&&(o[Ye]=X[Ye])}return o}),t8=$t(function(o){return o.push(n,bw),Ir(sx,n,o)});function n8(o,u){return Le(o,kt(u,3),er)}function r8(o,u){return Le(o,kt(u,3),ni)}function i8(o,u){return o==null?o:Ur(o,kt(u,3),es)}function s8(o,u){return o==null?o:hn(o,kt(u,3),es)}function a8(o,u){return o&&er(o,kt(u,3))}function o8(o,u){return o&&ni(o,kt(u,3))}function l8(o){return o==null?[]:sr(o,qr(o))}function c8(o){return o==null?[]:sr(o,es(o))}function L1(o,u,y){var j=o==null?n:Un(o,u);return j===n?y:j}function u8(o,u){return o!=null&&Nw(o,u,Lr)}function P1(o,u){return o!=null&&Nw(o,u,pa)}var d8=gw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=gn.call(u)),o[u]=y},I1(ts)),f8=gw(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=gn.call(u)),en.call(o,u)?o[u].push(y):o[u]=[y]},kt),h8=$t(An);function qr(o){return Zi(o)?we(o):Ul(o)}function es(o){return Zi(o)?we(o,!0):Xf(o)}function p8(o,u){var y={};return u=kt(u,3),er(o,function(j,D,X){He(y,u(j,D,X),j)}),y}function m8(o,u){var y={};return u=kt(u,3),er(o,function(j,D,X){He(y,D,u(j,D,X))}),y}var g8=Ed(function(o,u,y){Wl(o,u,y)}),sx=Ed(function(o,u,y,j){Wl(o,u,y,j)}),v8=$o(function(o,u){var y={};if(o==null)return y;var j=!1;u=un(u,function(X){return X=Ys(X,o),j||(j=X.length>1),X}),no(o,g1(o),y),j&&(y=gt(y,m|w|g,dk));for(var D=u.length;D--;)nh(y,u[D]);return y});function y8(o,u){return ax(o,cm(kt(u)))}var w8=$o(function(o,u){return o==null?{}:c1(o,u)});function ax(o,u){if(o==null)return{};var y=un(g1(o),function(j){return[j]});return u=kt(u),Qf(o,y,function(j,D){return u(j,D[0])})}function x8(o,u,y){u=Ys(u,o);var j=-1,D=u.length;for(D||(D=1,o=n);++j<D;){var X=o==null?n:o[ro(u[j])];X===n&&(j=D,X=y),o=Uo(X)?X.call(o):X}return o}function b8(o,u,y){return o==null?o:Vl(o,u,y)}function _8(o,u,y,j){return j=typeof j=="function"?j:n,o==null?o:Vl(o,u,y,j)}var ox=ww(qr),lx=ww(es);function S8(o,u,y){var j=Ft(o),D=j||Jl(o)||Ad(o);if(u=kt(u,4),y==null){var X=o&&o.constructor;D?y=j?new X:[]:ar(o)?y=Uo(X)?$l(Tl(o)):{}:y={}}return(D?Dr:er)(o,function(de,ge,Ce){return u(y,de,ge,Ce)}),y}function N8(o,u){return o==null?!0:nh(o,u)}function k8(o,u,y){return o==null?o:Gl(o,u,Kl(y))}function E8(o,u,y,j){return j=typeof j=="function"?j:n,o==null?o:Gl(o,u,Kl(y),j)}function Ld(o){return o==null?[]:Hi(o,qr(o))}function j8(o){return o==null?[]:Hi(o,es(o))}function C8(o,u,y){return y===n&&(y=u,u=n),y!==n&&(y=Js(y),y=y===y?y:0),u!==n&&(u=Js(u),u=u===u?u:0),rt(Js(o),u,y)}function A8(o,u,y){return u=zo(u),y===n?(y=u,u=0):y=zo(y),o=Js(o),Oo(o,u,y)}function L8(o,u,y){if(y&&typeof y!="boolean"&&Ti(o,u,y)&&(u=y=n),y===n&&(typeof u=="boolean"?(y=u,u=n):typeof o=="boolean"&&(y=o,o=n)),o===n&&u===n?(o=0,u=1):(o=zo(o),u===n?(u=o,o=0):u=zo(u)),o>u){var j=o;o=u,u=j}if(y||o%1||u%1){var D=Mp();return Br(o+D*(u-o+xl("1e-"+((D+"").length-1))),u)}return Hl(o,u)}var P8=jd(function(o,u,y){return u=u.toLowerCase(),o+(y?cx(u):u)});function cx(o){return T1(xn(o).toLowerCase())}function ux(o){return o=xn(o),o&&o.replace(ul,Xc).replace(sd,"")}function T8(o,u,y){o=xn(o),u=Pi(u);var j=o.length;y=y===n?j:rt(Ut(y),0,j);var D=y;return y-=u.length,y>=0&&o.slice(y,D)==u}function I8(o){return o=xn(o),o&&xt.test(o)?o.replace(bn,Qc):o}function D8(o){return o=xn(o),o&&rr.test(o)?o.replace(Yn,"\\$&"):o}var O8=jd(function(o,u,y){return o+(y?"-":"")+u.toLowerCase()}),M8=jd(function(o,u,y){return o+(y?" ":"")+u.toLowerCase()}),R8=hw("toLowerCase");function F8(o,u,y){o=xn(o),u=Ut(u);var j=u?oa(o):0;if(!u||j>=u)return o;var D=(u-j)/2;return em(Dl(D),y)+o+em(Il(D),y)}function $8(o,u,y){o=xn(o),u=Ut(u);var j=u?oa(o):0;return u&&j<u?o+em(u-j,y):o}function B8(o,u,y){o=xn(o),u=Ut(u);var j=u?oa(o):0;return u&&j<u?em(u-j,y)+o:o}function U8(o,u,y){return y||u==null?u=0:u&&(u=+u),Xg(xn(o).replace(kn,""),u||0)}function z8(o,u,y){return(y?Ti(o,u,y):u===n)?u=1:u=Ut(u),Ro(xn(o),u)}function q8(){var o=arguments,u=xn(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var W8=jd(function(o,u,y){return o+(y?"_":"")+u.toLowerCase()});function H8(o,u,y){return y&&typeof y!="number"&&Ti(o,u,y)&&(u=y=n),y=y===n?Ae:y>>>0,y?(o=xn(o),o&&(typeof u=="string"||u!=null&&!A1(u))&&(u=Pi(u),!u&&ws(o))?to(di(o),0,y):o.split(u,y)):[]}var V8=jd(function(o,u,y){return o+(y?" ":"")+T1(u)});function G8(o,u,y){return o=xn(o),y=y==null?0:rt(Ut(y),0,o.length),u=Pi(u),o.slice(y,y+u.length)==u}function Y8(o,u,y){var j=W.templateSettings;y&&Ti(o,u,y)&&(u=n),o=xn(o),u=fm({},u,j,xw);var D=fm({},u.imports,j.imports,xw),X=qr(D),de=Hi(D,X),ge,Ce,Ye=0,Ke=u.interpolate||aa,Qe="__p += '",ot=Po((u.escape||aa).source+"|"+Ke.source+"|"+(Ke===rn?gs:aa).source+"|"+(u.evaluate||aa).source+"|$","g"),_t="//# sourceURL="+(en.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qf+"]")+`
`;o.replace(ot,function(jt,Jt,tn,Es,Ii,js){return tn||(tn=Es),Qe+=o.slice(Ye,js).replace(Yu,Cl),Jt&&(ge=!0,Qe+=`' +
__e(`+Jt+`) +
'`),Ii&&(Ce=!0,Qe+=`';
`+Ii+`;
__p += '`),tn&&(Qe+=`' +
((__t = (`+tn+`)) == null ? '' : __t) +
'`),Ye=js+jt.length,jt}),Qe+=`';
`;var Et=en.call(u,"variable")&&u.variable;if(!Et)Qe=`with (obj) {
`+Qe+`
}
`;else if(ps.test(Et))throw new bt(l);Qe=(Ce?Qe.replace(Zt,""):Qe).replace(sa,"$1").replace(Dn,"$1;"),Qe="function("+(Et||"obj")+`) {
`+(Et?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ge?", __e = _.escape":"")+(Ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Qe+`return __p
}`;var qt=fx(function(){return Mt(X,_t+"return "+Qe).apply(n,de)});if(qt.source=Qe,C1(qt))throw qt;return qt}function K8(o){return xn(o).toLowerCase()}function J8(o){return xn(o).toUpperCase()}function X8(o,u,y){if(o=xn(o),o&&(y||u===n))return Wi(o);if(!o||!(u=Pi(u)))return o;var j=di(o),D=di(u),X=kl(j,D),de=El(j,D)+1;return to(j,X,de).join("")}function Q8(o,u,y){if(o=xn(o),o&&(y||u===n))return o.slice(0,la(o)+1);if(!o||!(u=Pi(u)))return o;var j=di(o),D=El(j,di(u))+1;return to(j,0,D).join("")}function Z8(o,u,y){if(o=xn(o),o&&(y||u===n))return o.replace(kn,"");if(!o||!(u=Pi(u)))return o;var j=di(o),D=kl(j,di(u));return to(j,D).join("")}function eC(o,u){var y=ae,j=O;if(ar(u)){var D="separator"in u?u.separator:D;y="length"in u?Ut(u.length):y,j="omission"in u?Pi(u.omission):j}o=xn(o);var X=o.length;if(ws(o)){var de=di(o);X=de.length}if(y>=X)return o;var ge=y-oa(j);if(ge<1)return j;var Ce=de?to(de,0,ge).join(""):o.slice(0,ge);if(D===n)return Ce+j;if(de&&(ge+=Ce.length-ge),A1(D)){if(o.slice(ge).search(D)){var Ye,Ke=Ce;for(D.global||(D=Po(D.source,xn(vs.exec(D))+"g")),D.lastIndex=0;Ye=D.exec(Ke);)var Qe=Ye.index;Ce=Ce.slice(0,Qe===n?ge:Qe)}}else if(o.indexOf(Pi(D),ge)!=ge){var ot=Ce.lastIndexOf(D);ot>-1&&(Ce=Ce.slice(0,ot))}return Ce+j}function tC(o){return o=xn(o),o&&Gt.test(o)?o.replace(li,Lo):o}var nC=jd(function(o,u,y){return o+(y?" ":"")+u.toUpperCase()}),T1=hw("toUpperCase");function dx(o,u,y){return o=xn(o),u=y?n:u,u===n?Al(o)?Ha(o):me(o):o.match(u)||[]}var fx=$t(function(o,u){try{return Ir(o,n,u)}catch(y){return C1(y)?y:new bt(y)}}),rC=$o(function(o,u){return Dr(u,function(y){y=ro(y),He(o,y,E1(o[y],o))}),o});function iC(o){var u=o==null?0:o.length,y=kt();return o=u?un(o,function(j){if(typeof j[1]!="function")throw new Ar(a);return[y(j[0]),j[1]]}):[],$t(function(j){for(var D=-1;++D<u;){var X=o[D];if(Ir(X[0],this,j))return Ir(X[1],this,j)}})}function sC(o){return at(gt(o,m))}function I1(o){return function(){return o}}function aC(o,u){return o==null||o!==o?u:o}var oC=mw(),lC=mw(!0);function ts(o){return o}function D1(o){return Jf(typeof o=="function"?o:gt(o,m))}function cC(o){return Wp(gt(o,m))}function uC(o,u){return Hp(o,gt(u,m))}var dC=$t(function(o,u){return function(y){return An(y,o,u)}}),fC=$t(function(o,u){return function(y){return An(o,y,u)}});function O1(o,u,y){var j=qr(u),D=sr(u,j);y==null&&!(ar(u)&&(D.length||!j.length))&&(y=u,u=o,o=this,D=sr(u,qr(u)));var X=!(ar(y)&&"chain"in y)||!!y.chain,de=Uo(o);return Dr(D,function(ge){var Ce=u[ge];o[ge]=Ce,de&&(o.prototype[ge]=function(){var Ye=this.__chain__;if(X||Ye){var Ke=o(this.__wrapped__),Qe=Ke.__actions__=Qi(this.__actions__);return Qe.push({func:Ce,args:arguments,thisArg:o}),Ke.__chain__=Ye,Ke}return Ce.apply(o,qi([this.value()],arguments))})}),o}function hC(){return fr._===this&&(fr._=ir),this}function M1(){}function pC(o){return o=Ut(o),$t(function(u){return Vp(u,o)})}var mC=h1(un),gC=h1(Sl),vC=h1(x);function hx(o){return x1(o)?Pt(ro(o)):xd(o)}function yC(o){return function(u){return o==null?n:Un(o,u)}}var wC=vw(),xC=vw(!0);function R1(){return[]}function F1(){return!1}function bC(){return{}}function _C(){return""}function SC(){return!0}function NC(o,u){if(o=Ut(o),o<1||o>$)return[];var y=Ae,j=Br(o,Ae);u=kt(u),o-=Ae;for(var D=jr(j,u);++y<o;)u(y);return D}function kC(o){return Ft(o)?un(o,ro):ks(o)?[o]:Qi(Iw(xn(o)))}function EC(o){var u=++Gi;return xn(o)+u}var jC=Zp(function(o,u){return o+u},0),CC=p1("ceil"),AC=Zp(function(o,u){return o/u},1),LC=p1("floor");function PC(o){return o&&o.length?It(o,ts,Xi):n}function TC(o,u){return o&&o.length?It(o,kt(u,2),Xi):n}function IC(o){return Dt(o,ts)}function DC(o,u){return Dt(o,kt(u,2))}function OC(o){return o&&o.length?It(o,ts,zl):n}function MC(o,u){return o&&o.length?It(o,kt(u,2),zl):n}var RC=Zp(function(o,u){return o*u},1),FC=p1("round"),$C=Zp(function(o,u){return o-u},0);function BC(o){return o&&o.length?Zn(o,ts):0}function UC(o,u){return o&&o.length?Zn(o,kt(u,2)):0}return W.after=cj,W.ary=Ww,W.assign=Jj,W.assignIn=ix,W.assignInWith=fm,W.assignWith=Xj,W.at=Qj,W.before=Hw,W.bind=E1,W.bindAll=rC,W.bindKey=Vw,W.castArray=bj,W.chain=Uw,W.chunk=Lk,W.compact=Pk,W.concat=Tk,W.cond=iC,W.conforms=sC,W.constant=I1,W.countBy=BE,W.create=Zj,W.curry=Gw,W.curryRight=Yw,W.debounce=Kw,W.defaults=e8,W.defaultsDeep=t8,W.defer=uj,W.delay=dj,W.difference=Ik,W.differenceBy=Dk,W.differenceWith=Ok,W.drop=Mk,W.dropRight=Rk,W.dropRightWhile=Fk,W.dropWhile=$k,W.fill=Bk,W.filter=zE,W.flatMap=HE,W.flatMapDeep=VE,W.flatMapDepth=GE,W.flatten=Rw,W.flattenDeep=Uk,W.flattenDepth=zk,W.flip=fj,W.flow=oC,W.flowRight=lC,W.fromPairs=qk,W.functions=l8,W.functionsIn=c8,W.groupBy=YE,W.initial=Hk,W.intersection=Vk,W.intersectionBy=Gk,W.intersectionWith=Yk,W.invert=d8,W.invertBy=f8,W.invokeMap=JE,W.iteratee=D1,W.keyBy=XE,W.keys=qr,W.keysIn=es,W.map=am,W.mapKeys=p8,W.mapValues=m8,W.matches=cC,W.matchesProperty=uC,W.memoize=lm,W.merge=g8,W.mergeWith=sx,W.method=dC,W.methodOf=fC,W.mixin=O1,W.negate=cm,W.nthArg=pC,W.omit=v8,W.omitBy=y8,W.once=hj,W.orderBy=QE,W.over=mC,W.overArgs=pj,W.overEvery=gC,W.overSome=vC,W.partial=j1,W.partialRight=Jw,W.partition=ZE,W.pick=w8,W.pickBy=ax,W.property=hx,W.propertyOf=yC,W.pull=Qk,W.pullAll=$w,W.pullAllBy=Zk,W.pullAllWith=eE,W.pullAt=tE,W.range=wC,W.rangeRight=xC,W.rearg=mj,W.reject=nj,W.remove=nE,W.rest=gj,W.reverse=N1,W.sampleSize=ij,W.set=b8,W.setWith=_8,W.shuffle=sj,W.slice=rE,W.sortBy=lj,W.sortedUniq=uE,W.sortedUniqBy=dE,W.split=H8,W.spread=vj,W.tail=fE,W.take=hE,W.takeRight=pE,W.takeRightWhile=mE,W.takeWhile=gE,W.tap=PE,W.throttle=yj,W.thru=sm,W.toArray=tx,W.toPairs=ox,W.toPairsIn=lx,W.toPath=kC,W.toPlainObject=rx,W.transform=S8,W.unary=wj,W.union=vE,W.unionBy=yE,W.unionWith=wE,W.uniq=xE,W.uniqBy=bE,W.uniqWith=_E,W.unset=N8,W.unzip=k1,W.unzipWith=Bw,W.update=k8,W.updateWith=E8,W.values=Ld,W.valuesIn=j8,W.without=SE,W.words=dx,W.wrap=xj,W.xor=NE,W.xorBy=kE,W.xorWith=EE,W.zip=jE,W.zipObject=CE,W.zipObjectDeep=AE,W.zipWith=LE,W.entries=ox,W.entriesIn=lx,W.extend=ix,W.extendWith=fm,O1(W,W),W.add=jC,W.attempt=fx,W.camelCase=P8,W.capitalize=cx,W.ceil=CC,W.clamp=C8,W.clone=_j,W.cloneDeep=Nj,W.cloneDeepWith=kj,W.cloneWith=Sj,W.conformsTo=Ej,W.deburr=ux,W.defaultTo=aC,W.divide=AC,W.endsWith=T8,W.eq=va,W.escape=I8,W.escapeRegExp=D8,W.every=UE,W.find=qE,W.findIndex=Ow,W.findKey=n8,W.findLast=WE,W.findLastIndex=Mw,W.findLastKey=r8,W.floor=LC,W.forEach=zw,W.forEachRight=qw,W.forIn=i8,W.forInRight=s8,W.forOwn=a8,W.forOwnRight=o8,W.get=L1,W.gt=jj,W.gte=Cj,W.has=u8,W.hasIn=P1,W.head=Fw,W.identity=ts,W.includes=KE,W.indexOf=Wk,W.inRange=A8,W.invoke=h8,W.isArguments=fu,W.isArray=Ft,W.isArrayBuffer=Aj,W.isArrayLike=Zi,W.isArrayLikeObject=xr,W.isBoolean=Lj,W.isBuffer=Jl,W.isDate=Pj,W.isElement=Tj,W.isEmpty=Ij,W.isEqual=Dj,W.isEqualWith=Oj,W.isError=C1,W.isFinite=Mj,W.isFunction=Uo,W.isInteger=Xw,W.isLength=um,W.isMap=Qw,W.isMatch=Rj,W.isMatchWith=Fj,W.isNaN=$j,W.isNative=Bj,W.isNil=zj,W.isNull=Uj,W.isNumber=Zw,W.isObject=ar,W.isObjectLike=pr,W.isPlainObject=ah,W.isRegExp=A1,W.isSafeInteger=qj,W.isSet=ex,W.isString=dm,W.isSymbol=ks,W.isTypedArray=Ad,W.isUndefined=Wj,W.isWeakMap=Hj,W.isWeakSet=Vj,W.join=Kk,W.kebabCase=O8,W.last=Ks,W.lastIndexOf=Jk,W.lowerCase=M8,W.lowerFirst=R8,W.lt=Gj,W.lte=Yj,W.max=PC,W.maxBy=TC,W.mean=IC,W.meanBy=DC,W.min=OC,W.minBy=MC,W.stubArray=R1,W.stubFalse=F1,W.stubObject=bC,W.stubString=_C,W.stubTrue=SC,W.multiply=RC,W.nth=Xk,W.noConflict=hC,W.noop=M1,W.now=om,W.pad=F8,W.padEnd=$8,W.padStart=B8,W.parseInt=U8,W.random=L8,W.reduce=ej,W.reduceRight=tj,W.repeat=z8,W.replace=q8,W.result=x8,W.round=FC,W.runInContext=Se,W.sample=rj,W.size=aj,W.snakeCase=W8,W.some=oj,W.sortedIndex=iE,W.sortedIndexBy=sE,W.sortedIndexOf=aE,W.sortedLastIndex=oE,W.sortedLastIndexBy=lE,W.sortedLastIndexOf=cE,W.startCase=V8,W.startsWith=G8,W.subtract=$C,W.sum=BC,W.sumBy=UC,W.template=Y8,W.times=NC,W.toFinite=zo,W.toInteger=Ut,W.toLength=nx,W.toLower=K8,W.toNumber=Js,W.toSafeInteger=Kj,W.toString=xn,W.toUpper=J8,W.trim=X8,W.trimEnd=Q8,W.trimStart=Z8,W.truncate=eC,W.unescape=tC,W.uniqueId=EC,W.upperCase=nC,W.upperFirst=T1,W.each=zw,W.eachRight=qw,W.first=Fw,O1(W,function(){var o={};return er(W,function(u,y){en.call(W.prototype,y)||(o[y]=u)}),o}(),{chain:!1}),W.VERSION=r,Dr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){W[o].placeholder=W}),Dr(["drop","take"],function(o,u){Wt.prototype[o]=function(y){y=y===n?1:wr(Ut(y),0);var j=this.__filtered__&&!u?new Wt(this):this.clone();return j.__filtered__?j.__takeCount__=Br(y,j.__takeCount__):j.__views__.push({size:Br(y,Ae),type:o+(j.__dir__<0?"Right":"")}),j},Wt.prototype[o+"Right"]=function(y){return this.reverse()[o](y).reverse()}}),Dr(["filter","map","takeWhile"],function(o,u){var y=u+1,j=y==J||y==ye;Wt.prototype[o]=function(D){var X=this.clone();return X.__iteratees__.push({iteratee:kt(D,3),type:y}),X.__filtered__=X.__filtered__||j,X}}),Dr(["head","last"],function(o,u){var y="take"+(u?"Right":"");Wt.prototype[o]=function(){return this[y](1).value()[0]}}),Dr(["initial","tail"],function(o,u){var y="drop"+(u?"":"Right");Wt.prototype[o]=function(){return this.__filtered__?new Wt(this):this[y](1)}}),Wt.prototype.compact=function(){return this.filter(ts)},Wt.prototype.find=function(o){return this.filter(o).head()},Wt.prototype.findLast=function(o){return this.reverse().find(o)},Wt.prototype.invokeMap=$t(function(o,u){return typeof o=="function"?new Wt(this):this.map(function(y){return An(y,o,u)})}),Wt.prototype.reject=function(o){return this.filter(cm(kt(o)))},Wt.prototype.slice=function(o,u){o=Ut(o);var y=this;return y.__filtered__&&(o>0||u<0)?new Wt(y):(o<0?y=y.takeRight(-o):o&&(y=y.drop(o)),u!==n&&(u=Ut(u),y=u<0?y.dropRight(-u):y.take(u-o)),y)},Wt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Wt.prototype.toArray=function(){return this.take(Ae)},er(Wt.prototype,function(o,u){var y=/^(?:filter|find|map|reject)|While$/.test(u),j=/^(?:head|last)$/.test(u),D=W[j?"take"+(u=="last"?"Right":""):u],X=j||/^find/.test(u);D&&(W.prototype[u]=function(){var de=this.__wrapped__,ge=j?[1]:arguments,Ce=de instanceof Wt,Ye=ge[0],Ke=Ce||Ft(de),Qe=function(Jt){var tn=D.apply(W,qi([Jt],ge));return j&&ot?tn[0]:tn};Ke&&y&&typeof Ye=="function"&&Ye.length!=1&&(Ce=Ke=!1);var ot=this.__chain__,_t=!!this.__actions__.length,Et=X&&!ot,qt=Ce&&!_t;if(!X&&Ke){de=qt?de:new Wt(this);var jt=o.apply(de,ge);return jt.__actions__.push({func:sm,args:[Qe],thisArg:n}),new Ci(jt,ot)}return Et&&qt?o.apply(this,ge):(jt=this.thru(Qe),Et?j?jt.value()[0]:jt.value():jt)})}),Dr(["pop","push","shift","sort","splice","unshift"],function(o){var u=xs[o],y=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",j=/^(?:pop|shift)$/.test(o);W.prototype[o]=function(){var D=arguments;if(j&&!this.__chain__){var X=this.value();return u.apply(Ft(X)?X:[],D)}return this[y](function(de){return u.apply(Ft(de)?de:[],D)})}}),er(Wt.prototype,function(o,u){var y=W[u];if(y){var j=y.name+"";en.call(Fl,j)||(Fl[j]=[]),Fl[j].push({name:u,func:y})}}),Fl[Qp(n,b).name]=[{name:"wrapper",func:n}],Wt.prototype.clone=Rp,Wt.prototype.reverse=e1,Wt.prototype.value=md,W.prototype.at=TE,W.prototype.chain=IE,W.prototype.commit=DE,W.prototype.next=OE,W.prototype.plant=RE,W.prototype.reverse=FE,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=$E,W.prototype.first=W.prototype.head,Va&&(W.prototype[Va]=ME),W},hi=ca();Xr?((Xr.exports=hi)._=hi,zi._=hi):fr._=hi}).call(ii)})(J0,J0.exports);var C$=J0.exports;async function X0(e){return Fn(async()=>{const{data:t,error:n}=await Ze.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function o0(e){const t={...e,type:e.type||"song"};return Fn(async()=>{const{data:n,error:r}=await Ze.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la canción")}async function A$(e,t,n){const{data:{user:r}}=await Ze.auth.getUser();if(!r)return Pe.error("No se pudo obtener la información del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return Fn(async()=>{const{data:s,error:a}=await Ze.from("songs").insert(i).select().single();return{data:s,error:a}},"Error al crear el medley")}async function E_(e,t){return Fn(async()=>{const{data:n,error:r}=await Ze.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la canción")}async function L$(e){try{const{error:t}=await Ze.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la canción:",t),Pe.error("Error al eliminar la canción"),!1):!0}catch(t){return console.error("Error al eliminar la canción:",t),Pe.error("Error al eliminar la canción"),!1}}async function oy(e){return Fn(async()=>{const{data:t,error:n}=await Ze.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function j_(e){return Fn(async()=>{const{data:t,error:n}=await Ze.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function G5(e){return Fn(async()=>{const{data:t,error:n}=await Ze.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function P$(e,t){return Fn(async()=>{const{data:n,error:r}=await Ze.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function T$(e){try{const{error:t}=await Ze.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),Pe.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),Pe.error("Error al eliminar el setlist"),!1}}async function Q0(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await Ze.auth.getUser();if(!r)return console.error("No se pudo obtener la información del usuario"),Pe.error("No se pudo obtener la información del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:s,error:a}=await Ze.from("setlist_songs").insert(i).select().single();return a?(console.error("Error de Supabase al añadir la canción al setlist:",a),console.error("Código de error:",a.code),console.error("Mensaje de error:",a.message),console.error("Detalles:",a.details),Pe.error(`Error al añadir la canción al setlist: ${a.message}`),null):(console.log("Canción añadida exitosamente:",s),s)}catch(r){return console.error("Error general al añadir la canción al setlist:",r),Pe.error("Error al añadir la canción al setlist"),null}}async function I$(e,t){try{const{error:n,count:r}=await Ze.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la canción del setlist:",n),Pe.error("Error al eliminar la canción del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la canción del setlist:",n),Pe.error("Error al eliminar la canción del setlist"),!1}}async function D$(e,t){try{const{error:n}=await Ze.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),Pe.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),Pe.error("Error al reordenar las canciones del setlist"),!1}}async function C_(e,t){return await Fn(async()=>{const{data:r,error:i}=await Ze.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function O$(e,t){return Fn(async()=>{const{data:n,error:r}=await Ze.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function M$(e,t){try{const{data:n,error:r}=await Ze.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Pe.error("Error al obtener el medley"),null;const s=[...n.medley_song_ids||[],t],{data:a,error:l}=await Ze.from("songs").update({medley_song_ids:s}).eq("id",e).select().single();return l?(console.error("Error al añadir la canción al medley:",l),Pe.error("Error al añadir la canción al medley"),null):a}catch(n){return console.error("Error al añadir la canción al medley:",n),Pe.error("Error al añadir la canción al medley"),null}}async function R$(e,t){try{const{data:n,error:r}=await Ze.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Pe.error("Error al obtener el medley"),!1;const s=(n.medley_song_ids||[]).filter(l=>l!==t),{error:a}=await Ze.from("songs").update({medley_song_ids:s}).eq("id",e);return a?(console.error("Error al eliminar la canción del medley:",a),Pe.error("Error al eliminar la canción del medley"),!1):!0}catch(n){return console.error("Error al eliminar la canción del medley:",n),Pe.error("Error al eliminar la canción del medley"),!1}}async function F$(e){try{const{error:t}=await Ze.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),Pe.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),Pe.error("Error al eliminar el medley"),!1}}async function $$(e,t){try{const n=await j_(e);if(!n)return Pe.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await Ze.auth.getUser();if(!r)return Pe.error("No se pudo obtener la información del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},s=await G5(i);if(!s)return Pe.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const a=n.songs.map(l=>Q0(s.id,l.song_id,l.position));await Promise.all(a)}return await j_(s.id)}catch(n){return console.error("Error al duplicar el setlist:",n),Pe.error("Error al duplicar el setlist"),null}}let mu=null;function A_({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:s,availableDates:a,members:l}){var le;const[c,f]=C.useState(""),[p,m]=C.useState(""),[w,g]=C.useState(""),[N,k]=C.useState(""),[E,b]=C.useState(!1),[S,L]=C.useState([]),[M,Y]=C.useState(!1),{user:oe}=Ms(),[Z,R]=C.useState(""),[ee,ae]=C.useState([]),[O,U]=C.useState(null),[K,J]=C.useState(!1),[xe,ye]=C.useState([]),[Q,$]=C.useState([]),[q,se]=C.useState("");C.useEffect(()=>{if(i)f(i.name),m(i.date),g(i.time),k(i.notes||""),R(i.location||""),se(i.setlist_id||""),i.location&&U({display_name:i.location,lat:"",lon:"",type:"",class:""}),Ae();else if(r){const ue=ln(r,"yyyy-MM-dd");m(ue),g("20:00"),se(""),P(ue)}},[i,r]),C.useEffect(()=>{e&&(async()=>{const[pe,je]=await Promise.all([Ze.from("events").select("*").eq("group_id",n),oy(n)]);ye(pe.data||[]),$(je||[])})()},[e,n]);const Ae=async()=>{if(i)try{const ue=await Fn(()=>Ze.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),pe=await Fn(()=>Ze.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),je=await Fn(()=>Ze.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(ue){const Oe=new Set((pe==null?void 0:pe.map(Re=>Re.user_id))||[]),fe=new Set;je==null||je.forEach(Re=>{var Fe;(Fe=Re.event_members)==null||Fe.forEach(be=>{fe.add(be.user_id)})});const G=new Set(ue.map(Re=>Re.group_member_id)),qe=l.map(Re=>({memberId:Re.id,userId:Re.user_id,selected:G.has(Re.id),isAvailable:G.has(Re.id)||(Re.user_id?Oe.has(Re.user_id)&&!fe.has(Re.user_id):!0),sync_calendar:Re.sync_calendar}));L(qe)}}catch(ue){console.error("Error loading event members:",ue)}},P=async(ue,pe)=>{try{const je=await Fn(()=>Ze.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",ue),"Error loading external events"),Oe=new Set;je==null||je.forEach(Re=>{var Fe;(Fe=Re.event_members)==null||Fe.forEach(be=>{Oe.add(be.user_id)})});const fe=await Fn(()=>Ze.from("member_availability").select("user_id").eq("date",ue),"Error loading member availability"),G=new Set((fe==null?void 0:fe.map(Re=>Re.user_id))||[]),qe=l.map(Re=>{const Fe=Re.user_id?G.has(Re.user_id)&&!Oe.has(Re.user_id):!0;return{memberId:Re.id,userId:Re.user_id,selected:pe?pe.includes(Re.id):Re.role_in_group==="principal"&&Fe,isAvailable:Fe,sync_calendar:Re.sync_calendar}});L(qe)}catch(je){console.error("Error loading available members:",je)}};C.useEffect(()=>{H()},[S]);const H=()=>{const ue=l.filter(Oe=>Oe.role_in_group==="principal"),pe=S.filter(Oe=>Oe.selected).map(Oe=>Oe.memberId),je=new Set;return ue.forEach(Oe=>{pe.includes(Oe.id)||Oe.instruments.forEach(fe=>{S.filter(qe=>qe.selected).some(qe=>{const Re=l.find(Fe=>Fe.id===qe.memberId);return Re==null?void 0:Re.instruments.some(Fe=>Fe.id===fe.id)})||je.add(fe.name)})}),Y(je.size>0),je},re=(ue,pe)=>{L(je=>je.map(Oe=>Oe.memberId===ue?{...Oe,selected:pe}:Oe))},ce=async ue=>{if(!ue.trim()){ae([]);return}mu&&mu.abort(),mu=new AbortController,J(!0);try{const Oe=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(ue)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:mu.signal})).json()).sort((fe,G)=>{const qe=fe.display_name.toLowerCase().includes("madrid")||fe.display_name.toLowerCase().includes("españa"),Re=G.display_name.toLowerCase().includes("madrid")||G.display_name.toLowerCase().includes("españa");return qe&&!Re?-1:!qe&&Re?1:0});ae(Oe)}catch(pe){pe.name!=="AbortError"&&(console.error("Error searching locations:",pe),Pe.error("Error al buscar ubicaciones"))}finally{J(!1),mu=null}};C.useEffect(()=>()=>{mu&&mu.abort()},[]);const he=ht.useCallback(C$.debounce(ue=>{ce(ue)},300),[]),ke=ue=>{const pe=ue.target.value;if(R(pe),ae([]),!pe.trim()){ae([]);return}he(pe)},Ee=async()=>{try{if(!c||!p){Pe.error("Por favor completa los campos requeridos");return}b(!0);const ue={group_id:n,name:c.trim(),date:p,time:w,datetime:(()=>{const je=new Date(`${p}T${w}`),Oe=-je.getTimezoneOffset(),fe=new Date(je.getTime()-Oe*60*1e3).toISOString().replace("Z",B$(Oe));return console.log("Zona horaria local:",Intl.DateTimeFormat().resolvedOptions().timeZone),console.log("Fecha local:",je.toString()),console.log("Fecha con offset local:",fe),fe})(),notes:N.trim()||null,created_by:oe.id,location:O?O.display_name:Z};let pe;if(i){const{data:je,error:Oe}=await Ze.from("events").update(ue).eq("id",i.id).select().single();if(Oe)throw Oe;pe=i.id}else{const{data:je,error:Oe}=await Ze.from("events").insert([ue]).select().single();if(Oe)throw Oe;pe=je.id}if(pe){i&&await Ze.from("event_members").delete().eq("event_id",pe);const je=S.filter(Oe=>Oe.selected).map(Oe=>({event_id:pe,group_member_id:Oe.memberId,user_id:Oe.userId,created_by:oe.id}));if(je.length>0){const{error:Oe}=await Ze.from("event_members").insert(je);if(Oe)throw Oe}console.log("Actualizando calendarios para miembros:",S),await Promise.all(S.filter(Oe=>Oe.selected&&Oe.sync_calendar).map(Oe=>(console.log("Actualizando calendario para miembro:",Oe),u6(n,Oe.memberId)))),q?await C_(pe,q):i!=null&&i.setlist_id&&await C_(pe,null)}b(!1),s&&s(),t(),Pe.success(i?"Evento actualizado":"Evento creado")}catch(ue){b(!1),console.error("Error saving event:",ue),Pe.error("Error al guardar el evento")}},te=ue=>{const pe=new Date;pe.setHours(0,0,0,0);const je=new Set(a.map(fe=>ln(fe,"yyyy-MM-dd"))),Oe=new Set(xe.map(fe=>ln(new Date(fe.date),"yyyy-MM-dd")));return ue.filter(fe=>{const G=ln(fe,"yyyy-MM-dd"),qe=fe>=pe;return je.has(G)&&!Oe.has(G)&&qe}).sort((fe,G)=>fe.getTime()-G.getTime())};return e?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[h.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Ta,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:Ee,className:"p-4 space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsx(Vn,{label:"Event Name",value:c,onChange:ue=>f(ue.target.value),required:!0,placeholder:"Enter event name"}),h.jsx(Vn,{label:"Time",type:"time",value:w,onChange:ue=>g(ue.target.value),required:!0})]}),!i&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),h.jsxs("select",{value:p,onChange:ue=>{m(ue.target.value),P(ue.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[h.jsx("option",{value:"",disabled:!0,children:"Select a date"}),te(a).map((ue,pe)=>{const je=ln(ue,"yyyy-MM-dd");return h.jsx("option",{value:je,children:ln(ue,"EEEE, d MMMM yyyy",{locale:Qd})},pe)})]})]}),i&&h.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:h.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",ln(new Date(i.date),"EEEE, d MMMM yyyy",{locale:Qd})]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),h.jsxs("select",{value:q,onChange:ue=>se(ue.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[h.jsx("option",{value:"",children:"Sin setlist"}),Q.map(ue=>{var pe;return h.jsxs("option",{value:ue.id,children:[ue.name," (",((pe=ue.songs)==null?void 0:pe.length)||0," canciones)"]},ue.id)})]}),q&&h.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:h.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(le=Q.find(ue=>ue.id===q))==null?void 0:le.name]})})]}),p&&h.jsx(j$,{members:l,selectedMembers:S,onMemberSelectionChange:re,validationError:M}),h.jsxs("div",{className:"relative space-y-2",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicación"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(s0,{className:"h-5 w-5 text-gray-400"})}),h.jsx(Vn,{value:Z,onChange:ke,className:"pl-10 pr-10",placeholder:"Buscar ubicación..."}),Z&&h.jsx("button",{type:"button",onClick:()=>{R(""),U(null),ae([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:h.jsx(Ta,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),K&&h.jsx("div",{className:"flex items-center justify-center p-4",children:h.jsx(go,{className:"h-6 w-6 animate-spin text-primary"})}),ee.length>0&&h.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:ee.map((ue,pe)=>h.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{U(ue),R(ue.display_name),ae([])},children:[h.jsx(s0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-sm font-medium text-gray-900",children:ue.display_name.split(",")[0]}),h.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:ue.display_name.split(",").slice(1).join(",").trim()})]})]},pe))}),O&&h.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(s0,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"block text-sm font-medium text-gray-900",children:typeof O.display_name=="string"&&O.display_name.includes(",")?O.display_name.split(",")[0]:O.display_name}),h.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:typeof O.display_name=="string"&&O.display_name.includes(",")?O.display_name.split(",").slice(1).join(",").trim():""})]}),h.jsx("button",{type:"button",onClick:()=>{U(null),R("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:h.jsx(Ta,{className:"h-5 w-5"})})]})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),h.jsx("textarea",{value:N,onChange:ue=>k(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[h.jsx(wt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),h.jsx(wt,{onClick:Ee,disabled:E,className:"w-full",children:E?h.jsxs(h.Fragment,{children:[h.jsx(go,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function B$(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}function Sn(e){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(e)}var Si=Uint8Array,Ps=Uint16Array,Y5=Int32Array,qg=new Si([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wg=new Si([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ly=new Si([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d6=function(e,t){for(var n=new Ps(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new Y5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},f6=d6(qg,2),h6=f6.b,cy=f6.r;h6[28]=258,cy[258]=28;var p6=d6(Wg,0),U$=p6.b,L_=p6.r,uy=new Ps(32768);for(var Wn=0;Wn<32768;++Wn){var Zl=(Wn&43690)>>1|(Wn&21845)<<1;Zl=(Zl&52428)>>2|(Zl&13107)<<2,Zl=(Zl&61680)>>4|(Zl&3855)<<4,uy[Wn]=((Zl&65280)>>8|(Zl&255)<<8)>>1}var mo=function(e,t,n){for(var r=e.length,i=0,s=new Ps(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new Ps(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Ps(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var f=i<<4|e[i],p=t-e[i],m=a[e[i]-1]++<<p,w=m|(1<<p)-1;m<=w;++m)l[uy[m]>>c]=f}else for(l=new Ps(r),i=0;i<r;++i)e[i]&&(l[i]=uy[a[e[i]-1]++]>>15-e[i]);return l},Pc=new Si(288);for(var Wn=0;Wn<144;++Wn)Pc[Wn]=8;for(var Wn=144;Wn<256;++Wn)Pc[Wn]=9;for(var Wn=256;Wn<280;++Wn)Pc[Wn]=7;for(var Wn=280;Wn<288;++Wn)Pc[Wn]=8;var dp=new Si(32);for(var Wn=0;Wn<32;++Wn)dp[Wn]=5;var z$=mo(Pc,9,0),q$=mo(Pc,9,1),W$=mo(dp,5,0),H$=mo(dp,5,1),Cv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},xa=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Av=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},K5=function(e){return(e+7)/8|0},m6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Si(e.subarray(t,n))},V$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ka=function(e,t,n){var r=new Error(t||V$[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,ka),!n)throw r;return r},G$=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Si(0);var a=!n,l=a||t.i!=2,c=t.i;a&&(n=new Si(i*3));var f=function(ue){var pe=n.length;if(ue>pe){var je=new Si(Math.max(pe*2,ue));je.set(n),n=je}},p=t.f||0,m=t.p||0,w=t.b||0,g=t.l,N=t.d,k=t.m,E=t.n,b=i*8;do{if(!g){p=xa(e,m,1);var S=xa(e,m+1,3);if(m+=3,S)if(S==1)g=q$,N=H$,k=9,E=5;else if(S==2){var oe=xa(e,m,31)+257,Z=xa(e,m+10,15)+4,R=oe+xa(e,m+5,31)+1;m+=14;for(var ee=new Si(R),ae=new Si(19),O=0;O<Z;++O)ae[ly[O]]=xa(e,m+O*3,7);m+=Z*3;for(var U=Cv(ae),K=(1<<U)-1,J=mo(ae,U,1),O=0;O<R;){var xe=J[xa(e,m,K)];m+=xe&15;var L=xe>>4;if(L<16)ee[O++]=L;else{var ye=0,Q=0;for(L==16?(Q=3+xa(e,m,3),m+=2,ye=ee[O-1]):L==17?(Q=3+xa(e,m,7),m+=3):L==18&&(Q=11+xa(e,m,127),m+=7);Q--;)ee[O++]=ye}}var $=ee.subarray(0,oe),q=ee.subarray(oe);k=Cv($),E=Cv(q),g=mo($,k,1),N=mo(q,E,1)}else ka(1);else{var L=K5(m)+4,M=e[L-4]|e[L-3]<<8,Y=L+M;if(Y>i){c&&ka(0);break}l&&f(w+M),n.set(e.subarray(L,Y),w),t.b=w+=M,t.p=m=Y*8,t.f=p;continue}if(m>b){c&&ka(0);break}}l&&f(w+131072);for(var se=(1<<k)-1,Ae=(1<<E)-1,P=m;;P=m){var ye=g[Av(e,m)&se],H=ye>>4;if(m+=ye&15,m>b){c&&ka(0);break}if(ye||ka(2),H<256)n[w++]=H;else if(H==256){P=m,g=null;break}else{var re=H-254;if(H>264){var O=H-257,ce=qg[O];re=xa(e,m,(1<<ce)-1)+h6[O],m+=ce}var he=N[Av(e,m)&Ae],ke=he>>4;he||ka(3),m+=he&15;var q=U$[ke];if(ke>3){var ce=Wg[ke];q+=Av(e,m)&(1<<ce)-1,m+=ce}if(m>b){c&&ka(0);break}l&&f(w+131072);var Ee=w+re;if(w<q){var te=s-q,le=Math.min(q,Ee);for(te+w<0&&ka(3);w<le;++w)n[w]=r[te+w]}for(;w<Ee;++w)n[w]=n[w-q]}}t.l=g,t.p=P,t.b=w,t.f=p,g&&(p=1,t.m=k,t.d=N,t.n=E)}while(!p);return w!=n.length&&a?m6(n,0,w):n.subarray(0,w)},Vo=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},wh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Lv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:v6,l:0};if(i==1){var a=new Si(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(Y,oe){return Y.f-oe.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],f=0,p=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=n[n[f].f<n[m].f?f++:m++],c=n[f!=p&&n[f].f<n[m].f?f++:m++],n[p++]={s:-1,f:l.f+c.f,l,r:c};for(var w=s[0].s,r=1;r<i;++r)s[r].s>w&&(w=s[r].s);var g=new Ps(w+1),N=dy(n[p-1],g,0);if(N>t){var r=0,k=0,E=N-t,b=1<<E;for(s.sort(function(oe,Z){return g[Z.s]-g[oe.s]||oe.f-Z.f});r<i;++r){var S=s[r].s;if(g[S]>t)k+=b-(1<<N-g[S]),g[S]=t;else break}for(k>>=E;k>0;){var L=s[r].s;g[L]<t?k-=1<<t-g[L]++-1:++r}for(;r>=0&&k;--r){var M=s[r].s;g[M]==t&&(--g[M],++k)}N=t}return{t:new Si(g),l:N}},dy=function(e,t,n){return e.s==-1?Math.max(dy(e.l,t,n+1),dy(e.r,t,n+1)):t[e.s]=n},P_=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ps(++t),r=0,i=e[0],s=1,a=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:n.subarray(0,r),n:t}},xh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},g6=function(e,t,n){var r=n.length,i=K5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},T_=function(e,t,n,r,i,s,a,l,c,f,p){Vo(t,p++,n),++i[256];for(var m=Lv(i,15),w=m.t,g=m.l,N=Lv(s,15),k=N.t,E=N.l,b=P_(w),S=b.c,L=b.n,M=P_(k),Y=M.c,oe=M.n,Z=new Ps(19),R=0;R<S.length;++R)++Z[S[R]&31];for(var R=0;R<Y.length;++R)++Z[Y[R]&31];for(var ee=Lv(Z,7),ae=ee.t,O=ee.l,U=19;U>4&&!ae[ly[U-1]];--U);var K=f+5<<3,J=xh(i,Pc)+xh(s,dp)+a,xe=xh(i,w)+xh(s,k)+a+14+3*U+xh(Z,ae)+2*Z[16]+3*Z[17]+7*Z[18];if(c>=0&&K<=J&&K<=xe)return g6(t,p,e.subarray(c,c+f));var ye,Q,$,q;if(Vo(t,p,1+(xe<J)),p+=2,xe<J){ye=mo(w,g,0),Q=w,$=mo(k,E,0),q=k;var se=mo(ae,O,0);Vo(t,p,L-257),Vo(t,p+5,oe-1),Vo(t,p+10,U-4),p+=14;for(var R=0;R<U;++R)Vo(t,p+3*R,ae[ly[R]]);p+=3*U;for(var Ae=[S,Y],P=0;P<2;++P)for(var H=Ae[P],R=0;R<H.length;++R){var re=H[R]&31;Vo(t,p,se[re]),p+=ae[re],re>15&&(Vo(t,p,H[R]>>5&127),p+=H[R]>>12)}}else ye=z$,Q=Pc,$=W$,q=dp;for(var R=0;R<l;++R){var ce=r[R];if(ce>255){var re=ce>>18&31;wh(t,p,ye[re+257]),p+=Q[re+257],re>7&&(Vo(t,p,ce>>23&31),p+=qg[re]);var he=ce&31;wh(t,p,$[he]),p+=q[he],he>3&&(wh(t,p,ce>>5&8191),p+=Wg[he])}else wh(t,p,ye[ce]),p+=Q[ce]}return wh(t,p,ye[256]),p+Q[256]},Y$=new Y5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),v6=new Si(0),K$=function(e,t,n,r,i,s){var a=s.z||e.length,l=new Si(r+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(r,l.length-i),f=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=Y$[t-1],w=m>>13,g=m&8191,N=(1<<n)-1,k=s.p||new Ps(32768),E=s.h||new Ps(N+1),b=Math.ceil(n/3),S=2*b,L=function(Oe){return(e[Oe]^e[Oe+1]<<b^e[Oe+2]<<S)&N},M=new Y5(25e3),Y=new Ps(288),oe=new Ps(32),Z=0,R=0,ee=s.i||0,ae=0,O=s.w||0,U=0;ee+2<a;++ee){var K=L(ee),J=ee&32767,xe=E[K];if(k[J]=xe,E[K]=J,O<=ee){var ye=a-ee;if((Z>7e3||ae>24576)&&(ye>423||!f)){p=T_(e,c,0,M,Y,oe,R,ae,U,ee-U,p),ae=Z=R=0,U=ee;for(var Q=0;Q<286;++Q)Y[Q]=0;for(var Q=0;Q<30;++Q)oe[Q]=0}var $=2,q=0,se=g,Ae=J-xe&32767;if(ye>2&&K==L(ee-Ae))for(var P=Math.min(w,ye)-1,H=Math.min(32767,ee),re=Math.min(258,ye);Ae<=H&&--se&&J!=xe;){if(e[ee+$]==e[ee+$-Ae]){for(var ce=0;ce<re&&e[ee+ce]==e[ee+ce-Ae];++ce);if(ce>$){if($=ce,q=Ae,ce>P)break;for(var he=Math.min(Ae,ce-2),ke=0,Q=0;Q<he;++Q){var Ee=ee-Ae+Q&32767,te=k[Ee],le=Ee-te&32767;le>ke&&(ke=le,xe=Ee)}}}J=xe,xe=k[J],Ae+=J-xe&32767}if(q){M[ae++]=268435456|cy[$]<<18|L_[q];var ue=cy[$]&31,pe=L_[q]&31;R+=qg[ue]+Wg[pe],++Y[257+ue],++oe[pe],O=ee+$,++Z}else M[ae++]=e[ee],++Y[e[ee]]}}for(ee=Math.max(ee,O);ee<a;++ee)M[ae++]=e[ee],++Y[e[ee]];p=T_(e,c,f,M,Y,oe,R,ae,U,ee-U,p),f||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=E,s.p=k,s.i=ee,s.w=O)}else{for(var ee=s.w||0;ee<a+f;ee+=65535){var je=ee+65535;je>=a&&(c[p/8|0]=f,je=a),p=g6(c,p+1,e.subarray(ee,je))}s.i=a}return m6(l,0,r+K5(p)+i)},y6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},J$=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Si(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return K$(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},w6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},X$=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=y6();i.p(t.dictionary),w6(e,2,i.d())}},Q$=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ka(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&ka(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function fy(e,t){t||(t={});var n=y6();n.p(e);var r=J$(e,t,t.dictionary?6:2,4);return X$(r,t),w6(r,r.length-4,n.d()),r}function Z$(e,t){return G$(e.subarray(Q$(e,t),-4),{i:2},t,t)}var eB=typeof TextDecoder<"u"&&new TextDecoder,tB=0;try{eB.decode(v6,{stream:!0}),tB=1}catch{}var At=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Pv(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var Tn={log:Pv,warn:function(e){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):Pv.call(null,arguments))},error:function(e){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):Pv(e))}};function Tv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){bu(r.response,t,n)},r.onerror=function(){Tn.error("could not download file")},r.send()}function I_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Rm(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Bh,hy,bu=At.saveAs||((typeof window>"u"?"undefined":Sn(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=At.URL||At.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?I_(i.href)?Tv(e,t,n):Rm(i,i.target="_blank"):Rm(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Rm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(I_(e))Tv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Rm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Sn(s)!=="object"&&(Tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Tv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(At.HTMLElement)||At.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Sn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(e)}else{var c=At.URL||At.webkitURL,f=c.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function x6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+l+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Iv(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=yi(n,r,i,s,t[0],7,-680876936),s=yi(s,n,r,i,t[1],12,-389564586),i=yi(i,s,n,r,t[2],17,606105819),r=yi(r,i,s,n,t[3],22,-1044525330),n=yi(n,r,i,s,t[4],7,-176418897),s=yi(s,n,r,i,t[5],12,1200080426),i=yi(i,s,n,r,t[6],17,-1473231341),r=yi(r,i,s,n,t[7],22,-45705983),n=yi(n,r,i,s,t[8],7,1770035416),s=yi(s,n,r,i,t[9],12,-1958414417),i=yi(i,s,n,r,t[10],17,-42063),r=yi(r,i,s,n,t[11],22,-1990404162),n=yi(n,r,i,s,t[12],7,1804603682),s=yi(s,n,r,i,t[13],12,-40341101),i=yi(i,s,n,r,t[14],17,-1502002290),n=wi(n,r=yi(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=wi(s,n,r,i,t[6],9,-1069501632),i=wi(i,s,n,r,t[11],14,643717713),r=wi(r,i,s,n,t[0],20,-373897302),n=wi(n,r,i,s,t[5],5,-701558691),s=wi(s,n,r,i,t[10],9,38016083),i=wi(i,s,n,r,t[15],14,-660478335),r=wi(r,i,s,n,t[4],20,-405537848),n=wi(n,r,i,s,t[9],5,568446438),s=wi(s,n,r,i,t[14],9,-1019803690),i=wi(i,s,n,r,t[3],14,-187363961),r=wi(r,i,s,n,t[8],20,1163531501),n=wi(n,r,i,s,t[13],5,-1444681467),s=wi(s,n,r,i,t[2],9,-51403784),i=wi(i,s,n,r,t[7],14,1735328473),n=xi(n,r=wi(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=xi(s,n,r,i,t[8],11,-2022574463),i=xi(i,s,n,r,t[11],16,1839030562),r=xi(r,i,s,n,t[14],23,-35309556),n=xi(n,r,i,s,t[1],4,-1530992060),s=xi(s,n,r,i,t[4],11,1272893353),i=xi(i,s,n,r,t[7],16,-155497632),r=xi(r,i,s,n,t[10],23,-1094730640),n=xi(n,r,i,s,t[13],4,681279174),s=xi(s,n,r,i,t[0],11,-358537222),i=xi(i,s,n,r,t[3],16,-722521979),r=xi(r,i,s,n,t[6],23,76029189),n=xi(n,r,i,s,t[9],4,-640364487),s=xi(s,n,r,i,t[12],11,-421815835),i=xi(i,s,n,r,t[15],16,530742520),n=bi(n,r=xi(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=bi(s,n,r,i,t[7],10,1126891415),i=bi(i,s,n,r,t[14],15,-1416354905),r=bi(r,i,s,n,t[5],21,-57434055),n=bi(n,r,i,s,t[12],6,1700485571),s=bi(s,n,r,i,t[3],10,-1894986606),i=bi(i,s,n,r,t[10],15,-1051523),r=bi(r,i,s,n,t[1],21,-2054922799),n=bi(n,r,i,s,t[8],6,1873313359),s=bi(s,n,r,i,t[15],10,-30611744),i=bi(i,s,n,r,t[6],15,-1560198380),r=bi(r,i,s,n,t[13],21,1309151649),n=bi(n,r,i,s,t[4],6,-145523070),s=bi(s,n,r,i,t[11],10,-1120210379),i=bi(i,s,n,r,t[2],15,718787259),r=bi(r,i,s,n,t[9],21,-343485551),e[0]=gc(n,e[0]),e[1]=gc(r,e[1]),e[2]=gc(i,e[2]),e[3]=gc(s,e[3])}function Hg(e,t,n,r,i,s){return t=gc(gc(t,e),gc(r,s)),gc(t<<i|t>>>32-i,n)}function yi(e,t,n,r,i,s,a){return Hg(t&n|~t&r,e,t,i,s,a)}function wi(e,t,n,r,i,s,a){return Hg(t&r|n&~r,e,t,i,s,a)}function xi(e,t,n,r,i,s,a){return Hg(t^n^r,e,t,i,s,a)}function bi(e,t,n,r,i,s,a){return Hg(n^(t|~r),e,t,i,s,a)}function b6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Iv(r,nB(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Iv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Iv(r,i),r}function nB(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Bh=At.atob.bind(At),hy=At.btoa.bind(At);var D_="0123456789abcdef".split("");function rB(e){for(var t="",n=0;n<4;n++)t+=D_[e>>8*n+4&15]+D_[e>>8*n&15];return t}function iB(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function py(e){return b6(e).map(iB).join("")}var sB=function(e){for(var t=0;t<e.length;t++)e[t]=rB(e[t]);return e.join("")}(b6("hello"))!="5d41402abc4b2a76b9719d911017c592";function gc(e,t){if(sB){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function my(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var f=0;for(c=0;c<256;c++){var p=l[c];f=(f+p+a.charCodeAt(c))%256,l[c]=l[f],l[f]=p}n=e,r=l}else l=r;var m=t.length,w=0,g=0,N="";for(c=0;c<m;c++)g=(g+(p=l[w=(w+1)%256]))%256,l[w]=l[g],l[g]=p,a=l[(l[w]+l[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var O_={print:4,modify:8,copy:16,"annot-forms":32};function Fd(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(O_.perm!==void 0)throw new Error("Invalid permission: "+l);i+=O_[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=py(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=my(this.encryptionKey,this.padding)}function $d(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function M_(e){if(Sn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(l){At.console&&Tn.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Z0(e){if(!(this instanceof Z0))return new Z0(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function _6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Nu(e,t,n,r,i){if(!(this instanceof Nu))return new Nu(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,_6.call(this,r,i)}function Zd(e,t,n,r,i){if(!(this instanceof Zd))return new Zd(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,_6.call(this,r,i)}function Ct(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,c=16,f="S",p=null;Sn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),f=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,w={},g={internal:{},__private__:{}};g.__private__.PubSub=M_;var N="1.3",k=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(x){N=x};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var b=g.__private__.getPageFormat=function(x){return E[x]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},L=S.COMPAT;function M(){this.saveGraphicsState(),G(new dt(tt,0,0,-tt,0,zs()*tt).toString()+" cm"),this.setFontSize(this.getFontSize()/tt),f="n",L=S.ADVANCED}function Y(){this.restoreGraphicsState(),f="S",L=S.COMPAT}var oe=g.__private__.combineFontStyleAndFontWeight=function(x,I){if(x=="bold"&&I=="normal"||x=="bold"&&I==400||x=="normal"&&I=="italic"||x=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(x=I==400||I==="normal"?x==="italic"?"italic":"normal":I!=700&&I!=="bold"||x!=="normal"?(I==700?"bold":I)+""+x:"bold"),x};g.advancedAPI=function(x){var I=L===S.COMPAT;return I&&M.call(this),typeof x!="function"||(x(this),I&&Y.call(this)),this},g.compatAPI=function(x){var I=L===S.ADVANCED;return I&&Y.call(this),typeof x!="function"||(x(this),I&&M.call(this)),this},g.isAdvancedAPI=function(){return L===S.ADVANCED};var Z,R=function(x){if(L!==S.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=g.roundToPrecision=g.__private__.roundToPrecision=function(x,I){var ie=t||I;if(isNaN(x)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(ie).replace(/0+$/,"")};Z=g.hpf=g.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,16)};var ae=g.f2=g.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return ee(x,2)},O=g.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return ee(x,3)},U=g.scale=g.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return L===S.COMPAT?x*tt:L===S.ADVANCED?x:void 0},K=function(x){return L===S.COMPAT?zs()-x:L===S.ADVANCED?x:void 0},J=function(x){return U(K(x))};g.__private__.setPrecision=g.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var xe,ye="00000000000000000000000000000000",Q=g.__private__.getFileId=function(){return ye},$=g.__private__.setFileId=function(x){return ye=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ye.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&($r=new Fd(p.userPermissions,p.userPassword,p.ownerPassword,ye)),ye};g.setFileId=function(x){return $(x),this},g.getFileId=function(){return Q()};var q=g.__private__.convertDateToPDFDate=function(x){var I=x.getTimezoneOffset(),ie=I<0?"+":"-",me=Math.floor(Math.abs(I/60)),Le=Math.abs(I%60),Ue=[ie,re(me),"'",re(Le),"'"].join("");return["D:",x.getFullYear(),re(x.getMonth()+1),re(x.getDate()),re(x.getHours()),re(x.getMinutes()),re(x.getSeconds()),Ue].join("")},se=g.__private__.convertPDFDateToDate=function(x){var I=parseInt(x.substr(2,4),10),ie=parseInt(x.substr(6,2),10)-1,me=parseInt(x.substr(8,2),10),Le=parseInt(x.substr(10,2),10),Ue=parseInt(x.substr(12,2),10),Je=parseInt(x.substr(14,2),10);return new Date(I,ie,me,Le,Ue,Je,0)},Ae=g.__private__.setCreationDate=function(x){var I;if(x===void 0&&(x=new Date),x instanceof Date)I=q(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=x}return xe=I},P=g.__private__.getCreationDate=function(x){var I=xe;return x==="jsDate"&&(I=se(xe)),I};g.setCreationDate=function(x){return Ae(x),this},g.getCreationDate=function(x){return P(x)};var H,re=g.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},ce=g.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},he=0,ke=[],Ee=[],te=0,le=[],ue=[],pe=!1,je=Ee,Oe=function(){he=0,te=0,Ee=[],ke=[],le=[],ki=En(),ps=En()};g.__private__.setCustomOutputDestination=function(x){pe=!0,je=x};var fe=function(x){pe||(je=x)};g.__private__.resetCustomOutputDestination=function(){pe=!1,je=Ee};var G=g.__private__.out=function(x){return x=x.toString(),te+=x.length+1,je.push(x),je},qe=g.__private__.write=function(x){return G(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Re=g.__private__.getArrayBuffer=function(x){for(var I=x.length,ie=new ArrayBuffer(I),me=new Uint8Array(ie);I--;)me[I]=x.charCodeAt(I);return ie},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Fe};var be=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(x){return be=L===S.ADVANCED?x/tt:x,this};var Me,Be=g.__private__.getFontSize=g.getFontSize=function(){return L===S.COMPAT?be:be*tt},We=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(x){return We=x,this},g.__private__.getR2L=g.getR2L=function(){return We};var et,st=g.__private__.setZoomMode=function(x){var I=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Me=x;else if(isNaN(x)){if(I.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Me=x}else Me=parseInt(x,10)};g.__private__.getZoomMode=function(){return Me};var it,yt=g.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');et=x};g.__private__.getPageMode=function(){return et};var Nt=g.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');it=x};g.__private__.getLayoutMode=function(){return it},g.__private__.setDisplayMode=g.setDisplayMode=function(x,I,ie){return st(x),Nt(I),yt(ie),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(x){if(Object.keys(ft).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[x]},g.__private__.getDocumentProperties=function(){return ft},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(x){for(var I in ft)ft.hasOwnProperty(I)&&x[I]&&(ft[I]=x[I]);return this},g.__private__.setDocumentProperty=function(x,I){if(Object.keys(ft).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[x]=I};var pt,tt,In,zt,Jr,Qt={},pn={},oi=[],Zt={},sa={},Dn={},li={},bn=null,Gt=0,xt=[],Bt=new M_(g),dr=e.hotfixes||[],rn={},nr={},Tr=[],dt=function x(I,ie,me,Le,Ue,Je){if(!(this instanceof x))return new x(I,ie,me,Le,Ue,Je);isNaN(I)&&(I=1),isNaN(ie)&&(ie=0),isNaN(me)&&(me=0),isNaN(Le)&&(Le=1),isNaN(Ue)&&(Ue=0),isNaN(Je)&&(Je=0),this._matrix=[I,ie,me,Le,Ue,Je]};Object.defineProperty(dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),dt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Z).join(x)},dt.prototype.multiply=function(x){var I=x.sx*this.sx+x.shy*this.shx,ie=x.sx*this.shy+x.shy*this.sy,me=x.shx*this.sx+x.sy*this.shx,Le=x.shx*this.shy+x.sy*this.sy,Ue=x.tx*this.sx+x.ty*this.shx+this.tx,Je=x.tx*this.shy+x.ty*this.sy+this.ty;return new dt(I,ie,me,Le,Ue,Je)},dt.prototype.decompose=function(){var x=this.sx,I=this.shy,ie=this.shx,me=this.sy,Le=this.tx,Ue=this.ty,Je=Math.sqrt(x*x+I*I),ct=(x/=Je)*ie+(I/=Je)*me;ie-=x*ct,me-=I*ct;var St=Math.sqrt(ie*ie+me*me);return ct/=St,x*(me/=St)<I*(ie/=St)&&(x=-x,I=-I,ct=-ct,Je=-Je),{scale:new dt(Je,0,0,St,0,0),translate:new dt(1,0,0,1,Le,Ue),rotate:new dt(x,I,-I,x,0,0),skew:new dt(1,0,ct,1,0,0)}},dt.prototype.toString=function(x){return this.join(" ")},dt.prototype.inversed=function(){var x=this.sx,I=this.shy,ie=this.shx,me=this.sy,Le=this.tx,Ue=this.ty,Je=1/(x*me-I*ie),ct=me*Je,St=-I*Je,Dt=-ie*Je,Pt=x*Je;return new dt(ct,St,Dt,Pt,-ct*Le-Dt*Ue,-St*Le-Pt*Ue)},dt.prototype.applyToPoint=function(x){var I=x.x*this.sx+x.y*this.shx+this.tx,ie=x.x*this.shy+x.y*this.sy+this.ty;return new Dr(I,ie)},dt.prototype.applyToRectangle=function(x){var I=this.applyToPoint(x),ie=this.applyToPoint(new Dr(x.x+x.w,x.y+x.h));return new Kc(I.x,I.y,ie.x-I.x,ie.y-I.y)},dt.prototype.clone=function(){var x=this.sx,I=this.shy,ie=this.shx,me=this.sy,Le=this.tx,Ue=this.ty;return new dt(x,I,ie,me,Le,Ue)},g.Matrix=dt;var Yn=g.matrixMult=function(x,I){return I.multiply(x)},rr=new dt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=rr;var kn=function(x,I){if(!sa[x]){var ie=(I instanceof Nu?"Sh":"P")+(Object.keys(Zt).length+1).toString(10);I.id=ie,sa[x]=ie,Zt[ie]=I,Bt.publish("addPattern",I)}};g.ShadingPattern=Nu,g.TilingPattern=Zd,g.addShadingPattern=function(x,I){return R("addShadingPattern()"),kn(x,I),this},g.beginTilingPattern=function(x){R("beginTilingPattern()"),ys(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},g.endTilingPattern=function(x,I){R("endTilingPattern()"),I.stream=ue[H].join(`
`),kn(x,I),Bt.publish("endTilingPattern",I),Tr.pop().restore()};var Ln=g.__private__.newObject=function(){var x=En();return Kn(x,!0),x},En=g.__private__.newObjectDeferred=function(){return he++,ke[he]=function(){return te},he},Kn=function(x,I){return I=typeof I=="boolean"&&I,ke[x]=te,I&&G(x+" 0 obj"),x},Bi=g.__private__.newAdditionalObject=function(){var x={objId:En(),content:""};return le.push(x),x},ki=En(),ps=En(),ms=g.__private__.decodeColorString=function(x){var I=x.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length===5&&(I[4]==="k"||I[4]==="K")&&(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var ie=parseFloat(I[0]);I=[ie,ie,ie,"r"]}for(var me="#",Le=0;Le<3;Le++)me+=("0"+Math.floor(255*parseFloat(I[Le])).toString(16)).slice(-2);return me},gs=g.__private__.encodeColorString=function(x){var I;typeof x=="string"&&(x={ch1:x});var ie=x.ch1,me=x.ch2,Le=x.ch3,Ue=x.ch4,Je=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var ct=new x6(ie);if(ct.ok)ie=ct.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var St=parseInt(ie.substr(1),16);ie=St>>16&255,me=St>>8&255,Le=255&St}if(me===void 0||Ue===void 0&&ie===me&&me===Le)if(typeof ie=="string")I=ie+" "+Je[0];else switch(x.precision){case 2:I=ae(ie/255)+" "+Je[0];break;case 3:default:I=O(ie/255)+" "+Je[0]}else if(Ue===void 0||Sn(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return I=["1.","1.","1.",Je[1]].join(" ");if(typeof ie=="string")I=[ie,me,Le,Je[1]].join(" ");else switch(x.precision){case 2:I=[ae(ie/255),ae(me/255),ae(Le/255),Je[1]].join(" ");break;default:case 3:I=[O(ie/255),O(me/255),O(Le/255),Je[1]].join(" ")}}else if(typeof ie=="string")I=[ie,me,Le,Ue,Je[2]].join(" ");else switch(x.precision){case 2:I=[ae(ie),ae(me),ae(Le),ae(Ue),Je[2]].join(" ");break;case 3:default:I=[O(ie),O(me),O(Le),O(Ue),Je[2]].join(" ")}return I},vs=g.__private__.getFilters=function(){return a},Ui=g.__private__.putStream=function(x){var I=(x=x||{}).data||"",ie=x.filters||vs(),me=x.alreadyAppliedFilters||[],Le=x.addLength1||!1,Ue=I.length,Je=x.objectId,ct=function(jr){return jr};if(p!==null&&Je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ct=$r.encryptor(Je,0));var St={};ie===!0&&(ie=["FlateEncode"]);var Dt=x.additionalKeyValues||[],Pt=(St=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(I,ie):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(St.data.length!==0&&(Dt.push({key:"Length",value:St.data.length}),Le===!0&&Dt.push({key:"Length1",value:Ue})),Pt.length!=0)if(Pt.split("/").length-1==1)Dt.push({key:"Filter",value:Pt});else{Dt.push({key:"Filter",value:"["+Pt+"]"});for(var Yt=0;Yt<Dt.length;Yt+=1)if(Dt[Yt].key==="DecodeParms"){for(var On=[],Qn=0;Qn<St.reverseChain.split("/").length-1;Qn+=1)On.push("null");On.push(Dt[Yt].value),Dt[Yt].value="["+On.join(" ")+"]"}}G("<<");for(var Zn=0;Zn<Dt.length;Zn++)G("/"+Dt[Zn].key+" "+Dt[Zn].value);G(">>"),St.data.length!==0&&(G("stream"),G(ct(St.data)),G("endstream"))},Rs=g.__private__.putPage=function(x){var I=x.number,ie=x.data,me=x.objId,Le=x.contentsObjId;Kn(me,!0),G("<</Type /Page"),G("/Parent "+x.rootDictionaryObjId+" 0 R"),G("/Resources "+x.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(Z(x.mediaBox.bottomLeftX))+" "+parseFloat(Z(x.mediaBox.bottomLeftY))+" "+Z(x.mediaBox.topRightX)+" "+Z(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&G("/CropBox ["+Z(x.cropBox.bottomLeftX)+" "+Z(x.cropBox.bottomLeftY)+" "+Z(x.cropBox.topRightX)+" "+Z(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&G("/BleedBox ["+Z(x.bleedBox.bottomLeftX)+" "+Z(x.bleedBox.bottomLeftY)+" "+Z(x.bleedBox.topRightX)+" "+Z(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&G("/TrimBox ["+Z(x.trimBox.bottomLeftX)+" "+Z(x.trimBox.bottomLeftY)+" "+Z(x.trimBox.topRightX)+" "+Z(x.trimBox.topRightY)+"]"),x.artBox!==null&&G("/ArtBox ["+Z(x.artBox.bottomLeftX)+" "+Z(x.artBox.bottomLeftY)+" "+Z(x.artBox.topRightX)+" "+Z(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&G("/UserUnit "+x.userUnit),Bt.publish("putPage",{objId:me,pageContext:xt[I],pageNumber:I,page:ie}),G("/Contents "+Le+" 0 R"),G(">>"),G("endobj");var Ue=ie.join(`
`);return L===S.ADVANCED&&(Ue+=`
Q`),Kn(Le,!0),Ui({data:Ue,filters:vs(),objectId:Le}),G("endobj"),me},So=g.__private__.putPages=function(){var x,I,ie=[];for(x=1;x<=Gt;x++)xt[x].objId=En(),xt[x].contentsObjId=En();for(x=1;x<=Gt;x++)ie.push(Rs({number:x,data:ue[x],objId:xt[x].objId,contentsObjId:xt[x].contentsObjId,mediaBox:xt[x].mediaBox,cropBox:xt[x].cropBox,bleedBox:xt[x].bleedBox,trimBox:xt[x].trimBox,artBox:xt[x].artBox,userUnit:xt[x].userUnit,rootDictionaryObjId:ki,resourceDictionaryObjId:ps}));Kn(ki,!0),G("<</Type /Pages");var me="/Kids [";for(I=0;I<Gt;I++)me+=ie[I]+" 0 R ";G(me+"]"),G("/Count "+Gt),G(">>"),G("endobj"),Bt.publish("postPutPages")},ll=function(x){Bt.publish("putFont",{font:x,out:G,newObject:Ln,putStream:Ui}),x.isAlreadyPutted!==!0&&(x.objectNumber=Ln(),G("<<"),G("/Type /Font"),G("/BaseFont /"+$d(x.postScriptName)),G("/Subtype /Type1"),typeof x.encoding=="string"&&G("/Encoding /"+x.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},cl=function(){for(var x in Qt)Qt.hasOwnProperty(x)&&(m===!1||m===!0&&w.hasOwnProperty(x))&&ll(Qt[x])},ul=function(x){x.objectNumber=Ln();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[Z(x.x),Z(x.y),Z(x.x+x.width),Z(x.y+x.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var ie=x.pages[1].join(`
`);Ui({data:ie,additionalKeyValues:I,objectId:x.objectNumber}),G("endobj")},aa=function(){for(var x in rn)rn.hasOwnProperty(x)&&ul(rn[x])},Yu=function(x,I){var ie,me=[],Le=1/(I-1);for(ie=0;ie<1;ie+=Le)me.push(ie);if(me.push(1),x[0].offset!=0){var Ue={offset:0,color:x[0].color};x.unshift(Ue)}if(x[x.length-1].offset!=1){var Je={offset:1,color:x[x.length-1].color};x.push(Je)}for(var ct="",St=0,Dt=0;Dt<me.length;Dt++){for(ie=me[Dt];ie>x[St+1].offset;)St++;var Pt=x[St].offset,Yt=(ie-Pt)/(x[St+1].offset-Pt),On=x[St].color,Qn=x[St+1].color;ct+=ce(Math.round((1-Yt)*On[0]+Yt*Qn[0]).toString(16))+ce(Math.round((1-Yt)*On[1]+Yt*Qn[1]).toString(16))+ce(Math.round((1-Yt)*On[2]+Yt*Qn[2]).toString(16))}return ct.trim()},dl=function(x,I){I||(I=21);var ie=Ln(),me=Yu(x.colors,I),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+I+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ui({data:me,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),G("endobj"),x.objectNumber=Ln(),G("<< /ShadingType "+x.type),G("/ColorSpace /DeviceRGB");var Ue="/Coords ["+Z(parseFloat(x.coords[0]))+" "+Z(parseFloat(x.coords[1]))+" ";x.type===2?Ue+=Z(parseFloat(x.coords[2]))+" "+Z(parseFloat(x.coords[3])):Ue+=Z(parseFloat(x.coords[2]))+" "+Z(parseFloat(x.coords[3]))+" "+Z(parseFloat(x.coords[4]))+" "+Z(parseFloat(x.coords[5])),G(Ue+="]"),x.matrix&&G("/Matrix ["+x.matrix.toString()+"]"),G("/Function "+ie+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Df=function(x,I){var ie=En(),me=Ln();I.push({resourcesOid:ie,objectOid:me}),x.objectNumber=me;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+x.boundingBox.map(Z).join(" ")+"]"}),Le.push({key:"XStep",value:Z(x.xStep)}),Le.push({key:"YStep",value:Z(x.yStep)}),Le.push({key:"Resources",value:ie+" 0 R"}),x.matrix&&Le.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),Ui({data:x.stream,additionalKeyValues:Le,objectId:x.objectNumber}),G("endobj")},fl=function(x){var I;for(I in Zt)Zt.hasOwnProperty(I)&&(Zt[I]instanceof Nu?dl(Zt[I]):Zt[I]instanceof Zd&&Df(Zt[I],x))},Ku=function(x){for(var I in x.objectNumber=Ln(),G("<<"),x)switch(I){case"opacity":G("/ca "+ae(x[I]));break;case"stroke-opacity":G("/CA "+ae(x[I]))}G(">>"),G("endobj")},Ju=function(){var x;for(x in Dn)Dn.hasOwnProperty(x)&&Ku(Dn[x])},hl=function(){for(var x in G("/XObject <<"),rn)rn.hasOwnProperty(x)&&rn[x].objectNumber>=0&&G("/"+x+" "+rn[x].objectNumber+" 0 R");Bt.publish("putXobjectDict"),G(">>")},Xu=function(){$r.oid=Ln(),G("<<"),G("/Filter /Standard"),G("/V "+$r.v),G("/R "+$r.r),G("/U <"+$r.toHexString($r.U)+">"),G("/O <"+$r.toHexString($r.O)+">"),G("/P "+$r.P),G(">>"),G("endobj")},Qu=function(){for(var x in G("/Font <<"),Qt)Qt.hasOwnProperty(x)&&(m===!1||m===!0&&w.hasOwnProperty(x))&&G("/"+x+" "+Qt[x].objectNumber+" 0 R");G(">>")},Of=function(){if(Object.keys(Zt).length>0){for(var x in G("/Shading <<"),Zt)Zt.hasOwnProperty(x)&&Zt[x]instanceof Nu&&Zt[x].objectNumber>=0&&G("/"+x+" "+Zt[x].objectNumber+" 0 R");Bt.publish("putShadingPatternDict"),G(">>")}},pl=function(x){if(Object.keys(Zt).length>0){for(var I in G("/Pattern <<"),Zt)Zt.hasOwnProperty(I)&&Zt[I]instanceof g.TilingPattern&&Zt[I].objectNumber>=0&&Zt[I].objectNumber<x&&G("/"+I+" "+Zt[I].objectNumber+" 0 R");Bt.publish("putTilingPatternDict"),G(">>")}},Mf=function(){if(Object.keys(Dn).length>0){var x;for(x in G("/ExtGState <<"),Dn)Dn.hasOwnProperty(x)&&Dn[x].objectNumber>=0&&G("/"+x+" "+Dn[x].objectNumber+" 0 R");Bt.publish("putGStateDict"),G(">>")}},Jn=function(x){Kn(x.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qu(),Of(),pl(x.objectOid),Mf(),hl(),G(">>"),G("endobj")},$c=function(){var x=[];cl(),Ju(),aa(),fl(x),Bt.publish("putResources"),x.forEach(Jn),Jn({resourcesOid:ps,objectOid:Number.MAX_SAFE_INTEGER}),Bt.publish("postPutResources")},Bc=function(){Bt.publish("putAdditionalObjects");for(var x=0;x<le.length;x++){var I=le[x];Kn(I.objId,!0),G(I.content),G("endobj")}Bt.publish("postPutAdditionalObjects")},ml=function(x){pn[x.fontName]=pn[x.fontName]||{},pn[x.fontName][x.fontStyle]=x.id},Uc=function(x,I,ie,me,Le){var Ue={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:x,fontName:I,fontStyle:ie,encoding:me,isStandardFont:Le||!1,metadata:{}};return Bt.publish("addFont",{font:Ue,instance:this}),Qt[Ue.id]=Ue,ml(Ue),Ue.id},Zu=function(x){for(var I=0,ie=Fe.length;I<ie;I++){var me=Uc.call(this,x[I][0],x[I][1],x[I][2],Fe[I][3],!0);m===!1&&(w[me]=!0);var Le=x[I][0].split("-");ml({id:me,fontName:Le[0],fontStyle:Le[1]||""})}Bt.publish("addFonts",{fonts:Qt,dictionary:pn})},ci=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(me){var I=me.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var ie="Error in function "+I.split(`
`)[0].split("<")[0]+": "+me.message;if(!At.console)throw new Error(ie);At.console.error(ie,me),At.alert&&alert(ie)}},x.foo.bar=x,x.foo},No=function(x,I){var ie,me,Le,Ue,Je,ct,St,Dt,Pt;if(Le=(I=I||{}).sourceEncoding||"Unicode",Je=I.outputEncoding,(I.autoencode||Je)&&Qt[pt].metadata&&Qt[pt].metadata[Le]&&Qt[pt].metadata[Le].encoding&&(Ue=Qt[pt].metadata[Le].encoding,!Je&&Qt[pt].encoding&&(Je=Qt[pt].encoding),!Je&&Ue.codePages&&(Je=Ue.codePages[0]),typeof Je=="string"&&(Je=Ue[Je]),Je)){for(St=!1,ct=[],ie=0,me=x.length;ie<me;ie++)(Dt=Je[x.charCodeAt(ie)])?ct.push(String.fromCharCode(Dt)):ct.push(x[ie]),ct[ie].charCodeAt(0)>>8&&(St=!0);x=ct.join("")}for(ie=x.length;St===void 0&&ie!==0;)x.charCodeAt(ie-1)>>8&&(St=!0),ie--;if(!St)return x;for(ct=I.noBOM?[]:[254,255],ie=0,me=x.length;ie<me;ie++){if((Pt=(Dt=x.charCodeAt(ie))>>8)>>8)throw new Error("Character at position "+ie+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ct.push(Pt),ct.push(Dt-(Pt<<8))}return String.fromCharCode.apply(void 0,ct)},ui=g.__private__.pdfEscape=g.pdfEscape=function(x,I){return No(x,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gl=g.__private__.beginPage=function(x){ue[++Gt]=[],xt[Gt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ed(Gt),fe(ue[H])},zc=function(x,I){var ie,me,Le;switch(n=I||n,typeof x=="string"&&(ie=b(x.toLowerCase()),Array.isArray(ie)&&(me=ie[0],Le=ie[1])),Array.isArray(x)&&(me=x[0]*tt,Le=x[1]*tt),isNaN(me)&&(me=i[0],Le=i[1]),(me>14400||Le>14400)&&(Tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Le=Math.min(14400,Le)),i=[me,Le],n.substr(0,1)){case"l":Le>me&&(i=[Le,me]);break;case"p":me>Le&&(i=[Le,me])}gl(i),ad(Gc),G(Xn),_l!==0&&G(_l+" J"),Ir!==0&&G(Ir+" j"),Bt.publish("addPage",{pageNumber:Gt})},qc=function(x){x>0&&x<=Gt&&(ue.splice(x,1),xt.splice(x,1),Gt--,H>Gt&&(H=Gt),this.setPage(H))},ed=function(x){x>0&&x<=Gt&&(H=x)},td=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return ue.length-1},vl=function(x,I,ie){var me,Le=void 0;return ie=ie||{},x=x!==void 0?x:Qt[pt].fontName,I=I!==void 0?I:Qt[pt].fontStyle,me=x.toLowerCase(),pn[me]!==void 0&&pn[me][I]!==void 0?Le=pn[me][I]:pn[x]!==void 0&&pn[x][I]!==void 0?Le=pn[x][I]:ie.disableWarning===!1&&Tn.warn("Unable to look up font label for font '"+x+"', '"+I+"'. Refer to getFontList() for available fonts."),Le||ie.noFallback||(Le=pn.times[I])==null&&(Le=pn.times.normal),Le},Wc=g.__private__.putInfo=function(){var x=Ln(),I=function(me){return me};for(var ie in p!==null&&(I=$r.encryptor(x,0)),G("<<"),G("/Producer ("+ui(I("jsPDF "+Ct.version))+")"),ft)ft.hasOwnProperty(ie)&&ft[ie]&&G("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+ui(I(ft[ie]))+")");G("/CreationDate ("+ui(I(xe))+")"),G(">>"),G("endobj")},Fs=g.__private__.putCatalog=function(x){var I=(x=x||{}).rootDictionaryObjId||ki;switch(Ln(),G("<<"),G("/Type /Catalog"),G("/Pages "+I+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Me;ie.substr(ie.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&G("/OpenAction [3 0 R /XYZ null null "+ae(Me)+"]")}switch(it||(it="continuous"),it){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}et&&G("/PageMode /"+et),Bt.publish("putCatalog"),G(">>"),G("endobj")},nd=g.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(he+1)),G("/Root "+he+" 0 R"),G("/Info "+(he-1)+" 0 R"),p!==null&&G("/Encrypt "+$r.oid+" 0 R"),G("/ID [ <"+ye+"> <"+ye+"> ]"),G(">>")},rd=g.__private__.putHeader=function(){G("%PDF-"+N),G("%ºß¬à")},Rf=g.__private__.putXRef=function(){var x="0000000000";G("xref"),G("0 "+(he+1)),G("0000000000 65535 f ");for(var I=1;I<=he;I++)typeof ke[I]=="function"?G((x+ke[I]()).slice(-10)+" 00000 n "):ke[I]!==void 0?G((x+ke[I]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},$s=g.__private__.buildDocument=function(){Oe(),fe(Ee),Bt.publish("buildDocument"),rd(),So(),Bc(),$c(),p!==null&&Xu(),Wc(),Fs();var x=te;return Rf(),nd(),G("startxref"),G(""+x),G("%%EOF"),fe(ue[H]),Ee.join(`
`)},ko=g.__private__.getBlob=function(x){return new Blob([Re(x)],{type:"application/pdf"})},Eo=g.output=g.__private__.output=ci(function(x,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",x){case void 0:return $s();case"save":g.save(I.filename);break;case"arraybuffer":return Re($s());case"blob":return ko($s());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(ko($s()))||void 0;Tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",me=$s();try{ie=hy(me)}catch{ie=hy(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+I.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(Le=I.pdfObjectUrl,Ue="");var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",ct=At.open();return ct!==null&&ct.document.write(Je),ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Dt=At.open();if(Dt!==null){Dt.document.write(St);var Pt=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=I.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',On=At.open();if(On!==null&&(On.document.write(Yt),On.document.title=I.filename),On||typeof safari>"u")return On;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",I);default:return null}}),Hc=function(x){return Array.isArray(dr)===!0&&dr.indexOf(x)>-1};switch(r){case"pt":tt=1;break;case"mm":tt=72/25.4;break;case"cm":tt=72/2.54;break;case"in":tt=72;break;case"px":tt=Hc("px_scaling")==1?.75:96/72;break;case"pc":case"em":tt=12;break;case"ex":tt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);tt=r}var $r=null;Ae(),$();var Ff=function(x){return p!==null?$r.encryptor(x,0):function(I){return I}},id=g.__private__.getPageInfo=g.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xt[x].objId,pageNumber:x,pageContext:xt[x]}},Lt=g.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in xt)if(xt[I].objId===x)break;return id(I)},$f=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:xt[H].objId,pageNumber:H,pageContext:xt[H]}};g.addPage=function(){return zc.apply(this,arguments),this},g.setPage=function(){return ed.apply(this,arguments),fe.call(this,ue[H]),this},g.insertPage=function(x){return this.addPage(),this.movePage(H,x),this},g.movePage=function(x,I){var ie,me;if(x>I){ie=ue[x],me=xt[x];for(var Le=x;Le>I;Le--)ue[Le]=ue[Le-1],xt[Le]=xt[Le-1];ue[I]=ie,xt[I]=me,this.setPage(I)}else if(x<I){ie=ue[x],me=xt[x];for(var Ue=x;Ue<I;Ue++)ue[Ue]=ue[Ue+1],xt[Ue]=xt[Ue+1];ue[I]=ie,xt[I]=me,this.setPage(I)}return this},g.deletePage=function(){return qc.apply(this,arguments),this},g.__private__.text=g.text=function(x,I,ie,me,Le){var Ue,Je,ct,St,Dt,Pt,Yt,On,Qn,Zn=(me=me||{}).scope||this;if(typeof x=="number"&&typeof I=="number"&&(typeof ie=="string"||Array.isArray(ie))){var jr=ie;ie=I,I=x,x=jr}if(arguments[3]instanceof dt?(R("The transform parameter of text() with a Matrix value"),Qn=Le):(ct=arguments[4],St=arguments[5],Sn(Yt=arguments[3])==="object"&&Yt!==null||(typeof ct=="string"&&(St=ct,ct=null),typeof Yt=="string"&&(St=Yt,Yt=null),typeof Yt=="number"&&(ct=Yt,Yt=null),me={flags:Yt,angle:ct,align:St})),isNaN(I)||isNaN(ie)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Zn;var Cr="",Wi=!1,Pn=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:jo,Hi=Zn.internal.scaleFactor;function qa(gn){return gn=gn.split("	").join(Array(me.TabLen||9).join(" ")),ui(gn,Yt)}function kl(gn){for(var jn,ir=gn.concat(),yr=[],Yi=ir.length;Yi--;)typeof(jn=ir.shift())=="string"?yr.push(jn):Array.isArray(gn)&&(jn.length===1||jn[1]===void 0&&jn[2]===void 0)?yr.push(jn[0]):yr.push([jn[0],jn[1],jn[2]]);return yr}function El(gn,jn){var ir;if(typeof gn=="string")ir=jn(gn)[0];else if(Array.isArray(gn)){for(var yr,Yi,Ki=gn.concat(),ua=[],Zc=Ki.length;Zc--;)typeof(yr=Ki.shift())=="string"?ua.push(jn(yr)[0]):Array.isArray(yr)&&typeof yr[0]=="string"&&(Yi=jn(yr[0],yr[1],yr[2]),ua.push([Yi[0],Yi[1],Yi[2]]));ir=ua}return ir}var jl=!1,Xc=!0;if(typeof x=="string")jl=!0;else if(Array.isArray(x)){var Qc=x.concat();Je=[];for(var Cl,Or=Qc.length;Or--;)(typeof(Cl=Qc.shift())!="string"||Array.isArray(Cl)&&typeof Cl[0]!="string")&&(Xc=!1);jl=Xc}if(jl===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var ws=be/Zn.internal.scaleFactor,Al=ws*(Pn-1);switch(me.baseline){case"bottom":ie-=Al;break;case"top":ie+=ws-Al;break;case"hanging":ie+=ws-2*Al;break;case"middle":ie+=ws/2-Al}if((Pt=me.maxWidth||0)>0&&(typeof x=="string"?x=Zn.splitTextToSize(x,Pt):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(gn,jn){return gn.concat(Zn.splitTextToSize(jn,Pt))},[]))),Ue={text:x,x:I,y:ie,options:me,mutex:{pdfEscape:ui,activeFontKey:pt,fonts:Qt,activeFontSize:be}},Bt.publish("preProcessText",Ue),x=Ue.text,ct=(me=Ue.options).angle,!(Qn instanceof dt)&&ct&&typeof ct=="number"){ct*=Math.PI/180,me.rotationDirection===0&&(ct=-ct),L===S.ADVANCED&&(ct=-ct);var Ll=Math.cos(ct),Ao=Math.sin(ct);Qn=new dt(Ll,Ao,-Ao,Ll,0,0)}else ct&&ct instanceof dt&&(Qn=ct);L!==S.ADVANCED||Qn||(Qn=rr),(Dt=me.charSpace||Co)!==void 0&&(Cr+=Z(U(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(On=me.horizontalScale)!==void 0&&(Cr+=Z(100*On)+` Tz
`),me.lang;var Qr=-1,qs=me.renderingMode!==void 0?me.renderingMode:me.stroke,Wa=Zn.internal.getCurrentPageInfo().pageContext;switch(qs){case 0:case!1:case"fill":Qr=0;break;case 1:case!0:case"stroke":Qr=1;break;case 2:case"fillThenStroke":Qr=2;break;case 3:case"invisible":Qr=3;break;case 4:case"fillAndAddForClipping":Qr=4;break;case 5:case"strokeAndAddPathForClipping":Qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qr=6;break;case 7:case"addToPathForClipping":Qr=7}var fd=Wa.usedRenderingMode!==void 0?Wa.usedRenderingMode:-1;Qr!==-1?Cr+=Qr+` Tr
`:fd!==-1&&(Cr+=`0 Tr
`),Qr!==-1&&(Wa.usedRenderingMode=Qr),St=me.align||"left";var Vi,Pl=be*Pn,oa=Zn.internal.pageSize.getWidth(),di=Qt[pt];Dt=me.charSpace||Co,Pt=me.maxWidth||0,Yt=Object.assign({autoencode:!0,noBOM:!0},me.flags);var la=[],Lo=function(gn){return Zn.getStringUnitWidth(gn,{font:di,charSpace:Dt,fontSize:be,doKerning:!1})*be/Hi};if(Object.prototype.toString.call(x)==="[object Array]"){var fi;Je=kl(x),St!=="left"&&(Vi=Je.map(Lo));var Zr,Ha=0;if(St==="right"){I-=Vi[0],x=[],Or=Je.length;for(var ca=0;ca<Or;ca++)ca===0?(Zr=zi(I),fi=Xr(ie)):(Zr=U(Ha-Vi[ca]),fi=-Pl),x.push([Je[ca],Zr,fi]),Ha=Vi[ca]}else if(St==="center"){I-=Vi[0]/2,x=[],Or=Je.length;for(var hi=0;hi<Or;hi++)hi===0?(Zr=zi(I),fi=Xr(ie)):(Zr=U((Ha-Vi[hi])/2),fi=-Pl),x.push([Je[hi],Zr,fi]),Ha=Vi[hi]}else if(St==="left"){x=[],Or=Je.length;for(var Se=0;Se<Or;Se++)x.push(Je[Se])}else if(St==="justify"&&di.encoding==="Identity-H"){x=[],Or=Je.length,Pt=Pt!==0?Pt:oa;for(var ze=0,Te=0;Te<Or;Te++)if(fi=Te===0?Xr(ie):-Pl,Zr=Te===0?zi(I):ze,Te<Or-1){var ut=U((Pt-Vi[Te])/(Je[Te].split(" ").length-1)),bt=Je[Te].split(" ");x.push([bt[0]+" ",Zr,fi]),ze=0;for(var Mt=1;Mt<bt.length;Mt++){var Mn=(Lo(bt[Mt-1]+" "+bt[Mt])-Lo(bt[Mt]))*Hi+ut;Mt==bt.length-1?x.push([bt[Mt],Mn,0]):x.push([bt[Mt]+" ",Mn,0]),ze-=Mn}}else x.push([Je[Te],Zr,fi]);x.push(["",ze,0])}else{if(St!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],Or=Je.length,Pt=Pt!==0?Pt:oa,Te=0;Te<Or;Te++)fi=Te===0?Xr(ie):-Pl,Zr=Te===0?zi(I):0,Te<Or-1?la.push(Z(U((Pt-Vi[Te])/(Je[Te].split(" ").length-1)))):la.push(0),x.push([Je[Te],Zr,fi])}}var dn=typeof me.R2L=="boolean"?me.R2L:We;dn===!0&&(x=El(x,function(gn,jn,ir){return[gn.split("").reverse().join(""),jn,ir]})),Ue={text:x,x:I,y:ie,options:me,mutex:{pdfEscape:ui,activeFontKey:pt,fonts:Qt,activeFontSize:be}},Bt.publish("postProcessText",Ue),x=Ue.text,Wi=Ue.mutex.isHex||!1;var Po=Qt[pt].encoding;Po!=="WinAnsiEncoding"&&Po!=="StandardEncoding"||(x=El(x,function(gn,jn,ir){return[qa(gn),jn,ir]})),Je=kl(x),x=[];for(var To,Ar,xs,Io=0,bs=1,Ws=Array.isArray(Je[0])?bs:Io,_s="",en=function(gn,jn,ir){var yr="";return ir instanceof dt?(ir=typeof me.angle=="number"?Yn(ir,new dt(1,0,0,1,gn,jn)):Yn(new dt(1,0,0,1,gn,jn),ir),L===S.ADVANCED&&(ir=Yn(new dt(1,0,0,-1,0,0),ir)),yr=ir.join(" ")+` Tm
`):yr=Z(gn)+" "+Z(jn)+` Td
`,yr},Gi=0;Gi<Je.length;Gi++){switch(_s="",Ws){case bs:xs=(Wi?"<":"(")+Je[Gi][0]+(Wi?">":")"),To=parseFloat(Je[Gi][1]),Ar=parseFloat(Je[Gi][2]);break;case Io:xs=(Wi?"<":"(")+Je[Gi]+(Wi?">":")"),To=zi(I),Ar=Xr(ie)}la!==void 0&&la[Gi]!==void 0&&(_s=la[Gi]+` Tw
`),Gi===0?x.push(_s+en(To,Ar,Qn)+xs):Ws===Io?x.push(_s+xs):Ws===bs&&x.push(_s+en(To,Ar,Qn)+xs)}x=Ws===Io?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Ei=`BT
/`;return Ei+=pt+" "+be+` Tf
`,Ei+=Z(be*Pn)+` TL
`,Ei+=Ua+`
`,Ei+=Cr,Ei+=x,G(Ei+="ET"),w[pt]=!0,Zn};var Bf=g.__private__.clip=g.clip=function(x){return G(x==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Bf("evenodd")},g.__private__.discardPath=g.discardPath=function(){return G("n"),this};var Bs=g.__private__.isValidStyle=function(x){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(I=!0),I};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(x){return Bs(x)&&(f=x),this};var sd=g.__private__.getStyle=g.getStyle=function(x){var I=f;switch(x){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=x}return I},yl=g.close=function(){return G("h"),this};g.stroke=function(){return G("S"),this},g.fill=function(x){return wl("f",x),this},g.fillEvenOdd=function(x){return wl("f*",x),this},g.fillStroke=function(x){return wl("B",x),this},g.fillStrokeEvenOdd=function(x){return wl("B*",x),this};var wl=function(x,I){Sn(I)==="object"?zf(I,x):G(x)},Vc=function(x){x===null||L===S.ADVANCED&&x===void 0||(x=sd(x),G(x))};function Uf(x,I,ie,me,Le){var Ue=new Zd(I||this.boundingBox,ie||this.xStep,me||this.yStep,this.gState,Le||this.matrix);Ue.stream=this.stream;var Je=x+"$$"+this.cloneIndex+++"$$";return kn(Je,Ue),Ue}var zf=function(x,I){var ie=sa[x.key],me=Zt[ie];if(me instanceof Nu)G("q"),G(qf(I)),me.gState&&g.setGState(me.gState),G(x.matrix.toString()+" cm"),G("/"+ie+" sh"),G("Q");else if(me instanceof Zd){var Le=new dt(1,0,0,-1,0,zs());x.matrix&&(Le=Le.multiply(x.matrix||rr),ie=Uf.call(me,x.key,x.boundingBox,x.xStep,x.yStep,Le).id),G("q"),G("/Pattern cs"),G("/"+ie+" scn"),me.gState&&g.setGState(me.gState),G(I),G("Q")}},qf=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mn=g.moveTo=function(x,I){return G(Z(U(x))+" "+Z(J(I))+" m"),this},sn=g.lineTo=function(x,I){return G(Z(U(x))+" "+Z(J(I))+" l"),this},Ba=g.curveTo=function(x,I,ie,me,Le,Ue){return G([Z(U(x)),Z(J(I)),Z(U(ie)),Z(J(me)),Z(U(Le)),Z(J(Ue)),"c"].join(" ")),this};g.__private__.line=g.line=function(x,I,ie,me,Le){if(isNaN(x)||isNaN(I)||isNaN(ie)||isNaN(me)||!Bs(Le))throw new Error("Invalid arguments passed to jsPDF.line");return L===S.COMPAT?this.lines([[ie-x,me-I]],x,I,[1,1],Le||"S"):this.lines([[ie-x,me-I]],x,I,[1,1]).stroke()},g.__private__.lines=g.lines=function(x,I,ie,me,Le,Ue){var Je,ct,St,Dt,Pt,Yt,On,Qn,Zn,jr,Cr,Wi;if(typeof x=="number"&&(Wi=ie,ie=I,I=x,x=Wi),me=me||[1,1],Ue=Ue||!1,isNaN(I)||isNaN(ie)||!Array.isArray(x)||!Array.isArray(me)||!Bs(Le)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mn(I,ie),Je=me[0],ct=me[1],Dt=x.length,jr=I,Cr=ie,St=0;St<Dt;St++)(Pt=x[St]).length===2?(jr=Pt[0]*Je+jr,Cr=Pt[1]*ct+Cr,sn(jr,Cr)):(Yt=Pt[0]*Je+jr,On=Pt[1]*ct+Cr,Qn=Pt[2]*Je+jr,Zn=Pt[3]*ct+Cr,jr=Pt[4]*Je+jr,Cr=Pt[5]*ct+Cr,Ba(Yt,On,Qn,Zn,jr,Cr));return Ue&&yl(),Vc(Le),this},g.path=function(x){for(var I=0;I<x.length;I++){var ie=x[I],me=ie.c;switch(ie.op){case"m":mn(me[0],me[1]);break;case"l":sn(me[0],me[1]);break;case"c":Ba.apply(this,me);break;case"h":yl()}}return this},g.__private__.rect=g.rect=function(x,I,ie,me,Le){if(isNaN(x)||isNaN(I)||isNaN(ie)||isNaN(me)||!Bs(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return L===S.COMPAT&&(me=-me),G([Z(U(x)),Z(J(I)),Z(U(ie)),Z(U(me)),"re"].join(" ")),Vc(Le),this},g.__private__.triangle=g.triangle=function(x,I,ie,me,Le,Ue,Je){if(isNaN(x)||isNaN(I)||isNaN(ie)||isNaN(me)||isNaN(Le)||isNaN(Ue)||!Bs(Je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-x,me-I],[Le-ie,Ue-me],[x-Le,I-Ue]],x,I,[1,1],Je,!0),this},g.__private__.roundedRect=g.roundedRect=function(x,I,ie,me,Le,Ue,Je){if(isNaN(x)||isNaN(I)||isNaN(ie)||isNaN(me)||isNaN(Le)||isNaN(Ue)||!Bs(Je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ct=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ie),Ue=Math.min(Ue,.5*me),this.lines([[ie-2*Le,0],[Le*ct,0,Le,Ue-Ue*ct,Le,Ue],[0,me-2*Ue],[0,Ue*ct,-Le*ct,Ue,-Le,Ue],[2*Le-ie,0],[-Le*ct,0,-Le,-Ue*ct,-Le,-Ue],[0,2*Ue-me],[0,-Ue*ct,Le*ct,-Ue,Le,-Ue]],x+Le,I,[1,1],Je,!0),this},g.__private__.ellipse=g.ellipse=function(x,I,ie,me,Le){if(isNaN(x)||isNaN(I)||isNaN(ie)||isNaN(me)||!Bs(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*ie,Je=4/3*(Math.SQRT2-1)*me;return mn(x+ie,I),Ba(x+ie,I-Je,x+Ue,I-me,x,I-me),Ba(x-Ue,I-me,x-ie,I-Je,x-ie,I),Ba(x-ie,I+Je,x-Ue,I+me,x,I+me),Ba(x+Ue,I+me,x+ie,I+Je,x+ie,I),Vc(Le),this},g.__private__.circle=g.circle=function(x,I,ie,me){if(isNaN(x)||isNaN(I)||isNaN(ie)||!Bs(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,I,ie,ie,me)},g.setFont=function(x,I,ie){return ie&&(I=oe(I,ie)),pt=vl(x,I,{disableWarning:!1}),this};var Wf=g.__private__.getFont=g.getFont=function(){return Qt[vl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var x,I,ie={};for(x in pn)if(pn.hasOwnProperty(x))for(I in ie[x]=[],pn[x])pn[x].hasOwnProperty(I)&&ie[x].push(I);return ie},g.addFont=function(x,I,ie,me,Le){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(ie=oe(ie,me)),Le=Le||"Identity-H",Uc.call(this,x,I,ie,Le)};var jo,Gc=e.lineWidth||.200025,xl=g.__private__.getLineWidth=g.getLineWidth=function(){return Gc},ad=g.__private__.setLineWidth=g.setLineWidth=function(x){return Gc=x,G(Z(U(x))+" w"),this};g.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(x,I){if(x=x||[],I=I||0,isNaN(I)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(ie){return Z(U(ie))}).join(" "),I=Z(U(I)),G("["+x+"] "+I+" d"),this};var Yc=g.__private__.getLineHeight=g.getLineHeight=function(){return be*jo};g.__private__.getLineHeight=g.getLineHeight=function(){return be*jo};var od=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(jo=x),this},fr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return jo};od(e.lineHeight);var zi=g.__private__.getHorizontalCoordinate=function(x){return U(x)},Xr=g.__private__.getVerticalCoordinate=function(x){return L===S.ADVANCED?x:xt[H].mediaBox.topRightY-xt[H].mediaBox.bottomLeftY-U(x)},ld=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(x){return Z(zi(x))},Us=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(x){return Z(Xr(x))},Xn=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ms(Xn)},g.__private__.setStrokeColor=g.setDrawColor=function(x,I,ie,me){return Xn=gs({ch1:x,ch2:I,ch3:ie,ch4:me,pdfColorType:"draw",precision:2}),G(Xn),this};var bl=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ms(bl)},g.__private__.setFillColor=g.setFillColor=function(x,I,ie,me){return bl=gs({ch1:x,ch2:I,ch3:ie,ch4:me,pdfColorType:"fill",precision:2}),G(bl),this};var Ua=e.textColor||"0 g",cd=g.__private__.getTextColor=g.getTextColor=function(){return ms(Ua)};g.__private__.setTextColor=g.setTextColor=function(x,I,ie,me){return Ua=gs({ch1:x,ch2:I,ch3:ie,ch4:me,pdfColorType:"text",precision:3}),this};var Co=e.charSpace,ud=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Co||0)};g.__private__.setCharSpace=g.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Co=x,this};var _l=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=I,G(I+" J"),this};var Ir=0;g.__private__.setLineJoin=g.setLineJoin=function(x){var I=g.CapJoinStyles[x];if(I===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ir=I,G(I+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(Z(U(x))+" M"),this},g.GState=Z0,g.setGState=function(x){(x=typeof x=="string"?Dn[li[x]]:dd(null,x)).equals(bn)||(G("/"+x.id+" gs"),bn=x)};var dd=function(x,I){if(!x||!li[x]){var ie=!1;for(var me in Dn)if(Dn.hasOwnProperty(me)&&Dn[me].equals(I)){ie=!0;break}if(ie)I=Dn[me];else{var Le="GS"+(Object.keys(Dn).length+1).toString(10);Dn[Le]=I,I.id=Le}return x&&(li[x]=I.id),Bt.publish("addGState",I),I}};g.addGState=function(x,I){return dd(x,I),this},g.saveGraphicsState=function(){return G("q"),oi.push({key:pt,size:be,color:Ua}),this},g.restoreGraphicsState=function(){G("Q");var x=oi.pop();return pt=x.key,be=x.size,Ua=x.color,bn=null,this},g.setCurrentTransformationMatrix=function(x){return G(x.toString()+" cm"),this},g.comment=function(x){return G("#"+x),this};var Dr=function(x,I){var ie=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(Ue){isNaN(Ue)||(ie=parseFloat(Ue))}});var me=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Ue){isNaN(Ue)||(me=parseFloat(Ue))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(Ue){Le=Ue.toString()}}),this},Kc=function(x,I,ie,me){Dr.call(this,x,I),this.type="rect";var Le=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(Je){isNaN(Je)||(Le=parseFloat(Je))}});var Ue=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function(Je){isNaN(Je)||(Ue=parseFloat(Je))}}),this},Sl=function(){this.page=Gt,this.currentPage=H,this.pages=ue.slice(0),this.pagesContext=xt.slice(0),this.x=In,this.y=zt,this.matrix=Jr,this.width=un(H),this.height=zs(H),this.outputDestination=je,this.id="",this.objectNumber=-1};Sl.prototype.restore=function(){Gt=this.page,H=this.currentPage,xt=this.pagesContext,ue=this.pages,In=this.x,zt=this.y,Jr=this.matrix,qi(H,this.width),Jc(H,this.height),je=this.outputDestination};var ys=function(x,I,ie,me,Le){Tr.push(new Sl),Gt=H=0,ue=[],In=x,zt=I,Jr=Le,gl([ie,me])},Nl=function(x){if(nr[x])Tr.pop().restore();else{var I=new Sl,ie="Xo"+(Object.keys(rn).length+1).toString(10);I.id=ie,nr[x]=ie,rn[ie]=I,Bt.publish("addFormObject",I),Tr.pop().restore()}};for(var za in g.beginFormObject=function(x,I,ie,me,Le){return ys(x,I,ie,me,Le),this},g.endFormObject=function(x){return Nl(x),this},g.doFormObject=function(x,I){var ie=rn[nr[x]];return G("q"),G(I.toString()+" cm"),G("/"+ie.id+" Do"),G("Q"),this},g.getFormObject=function(x){var I=rn[nr[x]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},g.save=function(x,I){return x=x||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(bu(ko($s()),x),typeof bu.unload=="function"&&At.setTimeout&&setTimeout(bu.unload,911),this):new Promise(function(ie,me){try{var Le=bu(ko($s()),x);typeof bu.unload=="function"&&At.setTimeout&&setTimeout(bu.unload,911),ie(Le)}catch(Ue){me(Ue.message)}})},Ct.API)Ct.API.hasOwnProperty(za)&&(za==="events"&&Ct.API.events.length?function(x,I){var ie,me,Le;for(Le=I.length-1;Le!==-1;Le--)ie=I[Le][0],me=I[Le][1],x.subscribe.apply(x,[ie].concat(typeof me=="function"?[me]:me))}(Bt,Ct.API.events):g[za]=Ct.API[za]);var un=g.getPageWidth=function(x){return(xt[x=x||H].mediaBox.topRightX-xt[x].mediaBox.bottomLeftX)/tt},qi=g.setPageWidth=function(x,I){xt[x].mediaBox.topRightX=I*tt+xt[x].mediaBox.bottomLeftX},zs=g.getPageHeight=function(x){return(xt[x=x||H].mediaBox.topRightY-xt[x].mediaBox.bottomLeftY)/tt},Jc=g.setPageHeight=function(x,I){xt[x].mediaBox.topRightY=I*tt+xt[x].mediaBox.bottomLeftY};return g.internal={pdfEscape:ui,getStyle:sd,getFont:Wf,getFontSize:Be,getCharSpace:ud,getTextColor:cd,getLineHeight:Yc,getLineHeightFactor:fr,getLineWidth:xl,write:qe,getHorizontalCoordinate:zi,getVerticalCoordinate:Xr,getCoordinateString:ld,getVerticalCoordinateString:Us,collections:{},newObject:Ln,newAdditionalObject:Bi,newObjectDeferred:En,newObjectDeferredBegin:Kn,getFilters:vs,putStream:Ui,events:Bt,scaleFactor:tt,pageSize:{getWidth:function(){return un(H)},setWidth:function(x){qi(H,x)},getHeight:function(){return zs(H)},setHeight:function(x){Jc(H,x)}},encryptionOptions:p,encryption:$r,getEncryptor:Ff,output:Eo,getNumberOfPages:td,pages:ue,out:G,f2:ae,f3:O,getPageInfo:id,getPageInfoByObjId:Lt,getCurrentPageInfo:$f,getPDFVersion:k,Point:Dr,Rectangle:Kc,Matrix:dt,hasHotfix:Hc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return un(H)},set:function(x){qi(H,x)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return zs(H)},set:function(x){Jc(H,x)},enumerable:!0,configurable:!0}),Zu.call(g,Fe),pt="F1",zc(i,n),Bt.publish("initialized"),g}Fd.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Fd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fd.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Fd.prototype.processOwnerPassword=function(e,t){return my(py(t).substr(0,5),e)},Fd.prototype.encryptor=function(e,t){var n=py(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return my(n,r)}},Z0.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Sn(e)!==Sn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Ct.API={events:[]},Ct.version="3.0.1";var mr=Ct.API,J5=1,Gu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Md=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rt=function(e){return e.toFixed(2)},ec=function(e){return e.toFixed(5)};mr.__acroform__={};var fs=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},R_=function(e){return e*J5},so=function(e){var t=new N6,n=vt.internal.getHeight(e)||0,r=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Rt(r)),Number(Rt(n))],t},aB=mr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},oB=mr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},lB=mr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Sr=mr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lB(e,t-1)},Nr=mr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aB(e,t-1)},kr=mr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return oB(e,t-1)},cB=mr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Rt(c.lowerLeft_X)),Number(Rt(c.lowerLeft_Y)),Number(Rt(c.upperRight_X)),Number(Rt(c.upperRight_Y))]},uB=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=gy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Rt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=so(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},gy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var s=n,a=vt.internal.getHeight(e)||0;a=a<0?-a:a;var l=vt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(O,U,K){if(O+1<i.length){var J=U+" "+i[O+1][0];return Fm(J,e,K).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var f,p,m=Fm("3",e,s).height,w=e.multiline?a-s:(a-m)/2,g=w+=2,N=0,k=0,E=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Fm(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",S=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var M=!1;if(i[L].length!==1&&E!==i[L].length-1){if((m+2)*(S+2)+2>a)continue e;b+=i[L][E],M=!0,k=L,L--}else{b=(b+=i[L][E]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var Y=parseInt(L),oe=c(Y,b,s),Z=L>=i.length-1;if(oe&&!Z){b+=" ",E=0;continue}if(oe||Z){if(Z)k=Y;else if(e.multiline&&(m+2)*(S+2)+2>a)continue e}else{if(!e.multiline||(m+2)*(S+2)+2>a)continue e;k=Y}}for(var R="",ee=N;ee<=k;ee++){var ae=i[ee];if(e.multiline){if(ee===k){R+=ae[E]+" ",E=(E+1)%ae.length;continue}if(ee===N){R+=ae[ae.length-1]+" ";continue}}R+=ae[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,p=Fm(R,e,s).width,e.textAlign){case"right":f=l-p-2;break;case"center":f=(l-p)/2;break;case"left":default:f=2}t+=Rt(f)+" "+Rt(g)+` Td
`,t+="("+Gu(R)+`) Tj
`,t+=-Rt(f)+` 0 Td
`,g=-(s+2),p=0,N=M?k:k+1,S++,b=""}break}return r.text=t,r.fontSize=s,r},Fm=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},dB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fB=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},hB=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),Sn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},pB=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Fa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(dB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");J5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new k6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&fB(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],f=l.Rect;if(l.Rect&&(l.Rect=cB(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=vt.createDefaultAppearanceStream(l),Sn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=uB(l);c.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var w in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(w)){var g=l.appearanceStreamContent[w];if(m+="/"+w+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var N=g[a];typeof N=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&hB(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},S6=mr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),Sn(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Gu(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Dv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Gu(r(e))+")"},fo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fo.prototype.toString=function(){return this.objId+" 0 R"},fo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:S6(i,this.objId,this.scope)}):i instanceof fo?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var N6=function(){fo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};fs(N6,fo);var k6=function(){fo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Gu(n(e))+")"}},set:function(n){e=n}})};fs(k6,fo);var Fa=function e(){fo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sr(t,3)},set:function(b){b?this.F=Nr(t,3):this.F=kr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof eg)return;s="FieldObject"+e.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Gu(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/J5:f},set:function(b){f=b}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(b){p=b}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof eg||this instanceof Du))return Dv(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=b}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Vr?w:Dv(w,this.objId,this.scope)},set:function(b){b=b.toString(),w=this instanceof Vr?b:b.substr(0,1)==="("?Md(b.substr(1,b.length-2)):Md(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr?Md(w.substr(1,w.length-1)):w},set:function(b){b=b.toString(),w=this instanceof Vr?"/"+b:b}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Vr?g:Dv(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof Vr?b:b.substr(0,1)==="("?Md(b.substr(1,b.length-2)):Md(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vr?Md(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof Vr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(b){b=!!b,k=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(b){N=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,1)},set:function(b){b?this.Ff=Nr(this.Ff,1):this.Ff=kr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,2)},set:function(b){b?this.Ff=Nr(this.Ff,2):this.Ff=kr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,3)},set:function(b){b?this.Ff=Nr(this.Ff,3):this.Ff=kr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');E=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(E){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};fs(Fa,fo);var cf=function(){Fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return S6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var c,f=[];c=a.exec(s);)f.push(c[l]);return f}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,18)},set:function(n){n?this.Ff=Nr(this.Ff,18):this.Ff=kr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Nr(this.Ff,19):this.Ff=kr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,20)},set:function(n){n?(this.Ff=Nr(this.Ff,20),t.sort()):this.Ff=kr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,22)},set:function(n){n?this.Ff=Nr(this.Ff,22):this.Ff=kr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,23)},set:function(n){n?this.Ff=Nr(this.Ff,23):this.Ff=kr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,27)},set:function(n){n?this.Ff=Nr(this.Ff,27):this.Ff=kr(this.Ff,27)}}),this.hasAppearanceStream=!1};fs(cf,Fa);var uf=function(){cf.call(this),this.fontName="helvetica",this.combo=!1};fs(uf,cf);var df=function(){uf.call(this),this.combo=!0};fs(df,uf);var l0=function(){df.call(this),this.edit=!0};fs(l0,df);var Vr=function(){Fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,15)},set:function(n){n?this.Ff=Nr(this.Ff,15):this.Ff=kr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,16)},set:function(n){n?this.Ff=Nr(this.Ff,16):this.Ff=kr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,17)},set:function(n){n?this.Ff=Nr(this.Ff,17):this.Ff=kr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,26)},set:function(n){n?this.Ff=Nr(this.Ff,26):this.Ff=kr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Gu(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Sn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};fs(Vr,Fa);var c0=function(){Vr.call(this),this.pushButton=!0};fs(c0,Vr);var ff=function(){Vr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};fs(ff,Vr);var eg=function(){var e,t;Fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Gu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Sn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fs(eg,Fa),ff.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ff.prototype.createOption=function(e){var t=new eg;return t.Parent=this,t.optionName=e,this.Kids.push(t),mB.call(this.scope,t),t};var u0=function(){Vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};fs(u0,Vr);var Du=function(){Fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,13)},set:function(t){t?this.Ff=Nr(this.Ff,13):this.Ff=kr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,21)},set:function(t){t?this.Ff=Nr(this.Ff,21):this.Ff=kr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,23)},set:function(t){t?this.Ff=Nr(this.Ff,23):this.Ff=kr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,24)},set:function(t){t?this.Ff=Nr(this.Ff,24):this.Ff=kr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,25)},set:function(t){t?this.Ff=Nr(this.Ff,25):this.Ff=kr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,26)},set:function(t){t?this.Ff=Nr(this.Ff,26):this.Ff=kr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fs(Du,Fa);var d0=function(){Du.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,14)},set:function(e){e?this.Ff=Nr(this.Ff,14):this.Ff=kr(this.Ff,14)}}),this.password=!0};fs(d0,Du);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=gy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Rt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=so(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=vt.internal.getHeight(e),a=vt.internal.getWidth(e),l=gy(e,e.caption);return i.push("1 g"),i.push("0 0 "+Rt(a)+" "+Rt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rt(a-1)+" "+Rt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Rt(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=vt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*vt.internal.Bezier_C).toFixed(5)),a=Number((r*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ec(vt.internal.getWidth(e)/2)+" "+ec(vt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=so(e);t.scope=e.scope;var n=[],r=vt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Rt(vt.internal.getWidth(e)-2)+" "+Rt(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Rt(r.x1.x)+" "+Rt(r.x1.y)+" m"),n.push(Rt(r.x2.x)+" "+Rt(r.x2.y)+" l"),n.push(Rt(r.x4.x)+" "+Rt(r.x4.y)+" m"),n.push(Rt(r.x3.x)+" "+Rt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=so(e);t.scope=e.scope;var n=vt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rt(vt.internal.getWidth(e)-2)+" "+Rt(vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Rt(n.x1.x)+" "+Rt(n.x1.y)+" m"),r.push(Rt(n.x2.x)+" "+Rt(n.x2.y)+" l"),r.push(Rt(n.x4.x)+" "+Rt(n.x4.y)+" m"),r.push(Rt(n.x3.x)+" "+Rt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=so(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Rt(vt.internal.getWidth(e))+" "+Rt(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),n=vt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},vt.internal.getWidth=function(e){var t=0;return Sn(e)==="object"&&(t=R_(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return Sn(e)==="object"&&(t=R_(e.Rect[3])),t};var mB=mr.addField=function(e){if(pB(this,e),!(e instanceof Fa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};mr.AcroFormChoiceField=cf,mr.AcroFormListBox=uf,mr.AcroFormComboBox=df,mr.AcroFormEditBox=l0,mr.AcroFormButton=Vr,mr.AcroFormPushButton=c0,mr.AcroFormRadioButton=ff,mr.AcroFormCheckBox=u0,mr.AcroFormTextField=Du,mr.AcroFormPasswordField=d0,mr.AcroFormAppearance=vt,mr.AcroForm={ChoiceField:cf,ListBox:uf,ComboBox:df,EditBox:l0,Button:Vr,PushButton:c0,RadioButton:ff,CheckBox:u0,TextField:Du,PasswordField:d0,Appearance:vt},Ct.AcroForm={ChoiceField:cf,ListBox:uf,ComboBox:df,EditBox:l0,Button:Vr,PushButton:c0,RadioButton:ff,CheckBox:u0,TextField:Du,PasswordField:d0,Appearance:vt};function E6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(O,U){var K,J,xe,ye,Q,$=t;if((U=U||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(oe(O))for(Q in n)for(xe=n[Q],K=0;K<xe.length;K+=1){for(ye=!0,J=0;J<xe[K].length;J+=1)if(xe[K][J]!==void 0&&xe[K][J]!==O[J]){ye=!1;break}if(ye===!0){$=Q;break}}else for(Q in n)for(xe=n[Q],K=0;K<xe.length;K+=1){for(ye=!0,J=0;J<xe[K].length;J+=1)if(xe[K][J]!==void 0&&xe[K][J]!==O.charCodeAt(J)){ye=!1;break}if(ye===!0){$=Q;break}}return $===t&&U!==t&&($=U),$},i=function O(U){for(var K=this.internal.write,J=this.internal.putStream,xe=(0,this.internal.getFilters)();xe.indexOf("FlateEncode")!==-1;)xe.splice(xe.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var ye=[];if(ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Image"}),ye.push({key:"Width",value:U.width}),ye.push({key:"Height",value:U.height}),U.colorSpace===E.INDEXED?ye.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(ye.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===E.DEVICE_CMYK&&ye.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ye.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&ye.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var Q="",$=0,q=U.transparency.length;$<q;$++)Q+=U.transparency[$]+" "+U.transparency[$]+" ";ye.push({key:"Mask",value:"["+Q+"]"})}U.sMask!==void 0&&ye.push({key:"SMask",value:U.objectId+1+" 0 R"});var se=U.filter!==void 0?["/"+U.filter]:void 0;if(J({data:U.data,additionalKeyValues:ye,alreadyAppliedFilters:se,objectId:U.objectId}),K("endobj"),"sMask"in U&&U.sMask!==void 0){var Ae="/Predictor "+U.predictor+" /Colors 1 /BitsPerComponent "+U.bitsPerComponent+" /Columns "+U.width,P={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:Ae,data:U.sMask};"filter"in U&&(P.filter=U.filter),O.call(this,P)}if(U.colorSpace===E.INDEXED){var H=this.internal.newObject();J({data:R(new Uint8Array(U.palette)),objectId:H}),K("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var U in O)i.call(this,O[U])},a=function(){var O,U=this.internal.collections.addImage_images,K=this.internal.write;for(var J in U)K("/I"+(O=U[J]).index,O.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var O=this.internal.collections.addImage_images;return l.call(this),O},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(O){return typeof e["process"+O.toUpperCase()]=="function"},m=function(O){return Sn(O)==="object"&&O.nodeType===1},w=function(O,U){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var K=""+O.getAttribute("src");if(K.indexOf("data:image/")===0)return Bh(unescape(K).split("base64,").pop());var J=e.loadFile(K,!0);if(J!==void 0)return J}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var xe;switch(U){case"PNG":xe="image/png";break;case"WEBP":xe="image/webp";break;case"JPEG":case"JPG":default:xe="image/jpeg"}return Bh(O.toDataURL(xe,1).split("base64,").pop())}},g=function(O){var U=this.internal.collections.addImage_images;if(U){for(var K in U)if(O===U[K].alias)return U[K]}},N=function(O,U,K){return O||U||(O=-96,U=-96),O<0&&(O=-1*K.width*72/O/this.internal.scaleFactor),U<0&&(U=-1*K.height*72/U/this.internal.scaleFactor),O===0&&(O=U*K.width/K.height),U===0&&(U=O*K.height/K.width),[O,U]},k=function(O,U,K,J,xe,ye){var Q=N.call(this,K,J,xe),$=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,se=c.call(this);if(K=Q[0],J=Q[1],se[xe.index]=xe,ye){ye*=Math.PI/180;var Ae=Math.cos(ye),P=Math.sin(ye),H=function(ce){return ce.toFixed(4)},re=[H(Ae),H(P),H(-1*P),H(Ae),0,0,"cm"]}this.internal.write("q"),ye?(this.internal.write([1,"0","0",1,$(O),q(U+J),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([$(K),"0","0",$(J),"0","0","cm"].join(" "))):this.internal.write([$(K),"0","0",$(J),$(O),q(U+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+xe.index+" Do"),this.internal.write("Q")},E=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(O){var U,K,J=0;if(typeof O=="string")for(K=O.length,U=0;U<K;U++)J=(J<<5)-J+O.charCodeAt(U),J|=0;else if(oe(O))for(K=O.byteLength/2,U=0;U<K;U++)J=(J<<5)-J+O[U],J|=0;return J},L=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var U=!0;return O.length===0&&(U=!1),O.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(U=!1),U},M=e.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var U=O.indexOf(",");return U<0?null:O.substring(0,U).trim().endsWith("base64")?O.substring(U+1):null},Y=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(O){return Y()&&O instanceof ArrayBuffer};var oe=e.__addimage__.isArrayBufferView=function(O){return Y()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},Z=e.__addimage__.binaryStringToUint8Array=function(O){for(var U=O.length,K=new Uint8Array(U),J=0;J<U;J++)K[J]=O.charCodeAt(J);return K},R=e.__addimage__.arrayBufferToBinaryString=function(O){for(var U="",K=oe(O)?O:new Uint8Array(O),J=0;J<K.length;J+=8192)U+=String.fromCharCode.apply(null,K.subarray(J,J+8192));return U};e.addImage=function(){var O,U,K,J,xe,ye,Q,$,q;if(typeof arguments[1]=="number"?(U=t,K=arguments[1],J=arguments[2],xe=arguments[3],ye=arguments[4],Q=arguments[5],$=arguments[6],q=arguments[7]):(U=arguments[1],K=arguments[2],J=arguments[3],xe=arguments[4],ye=arguments[5],Q=arguments[6],$=arguments[7],q=arguments[8]),Sn(O=arguments[0])==="object"&&!m(O)&&"imageData"in O){var se=O;O=se.imageData,U=se.format||U||t,K=se.x||K||0,J=se.y||J||0,xe=se.w||se.width||xe,ye=se.h||se.height||ye,Q=se.alias||Q,$=se.compression||$,q=se.rotation||se.angle||q}var Ae=this.internal.getFilters();if($===void 0&&Ae.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(K)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=ee.call(this,O,U,Q,$);return k.call(this,K,J,xe,ye,P,q),this};var ee=function(O,U,K,J){var xe,ye,Q;if(typeof O=="string"&&r(O)===t){O=unescape(O);var $=ae(O,!1);($!==""||($=e.loadFile(O,!0))!==void 0)&&(O=$)}if(m(O)&&(O=w(O,U)),U=r(O,U),!p(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((Q=K)==null||Q.length===0)&&(K=function(q){return typeof q=="string"||oe(q)?S(q):oe(q.data)?S(q.data):null}(O)),(xe=g.call(this,K))||(Y()&&(O instanceof Uint8Array||U==="RGBA"||(ye=O,O=Z(O))),xe=this["process"+U.toUpperCase()](O,f.call(this),K,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in e.image_compression?q:b.NONE}(J),ye)),!xe)throw new Error("An unknown error occurred whilst processing the image.");return xe},ae=e.__addimage__.convertBase64ToBinaryString=function(O,U){U=typeof U!="boolean"||U;var K,J="";if(typeof O=="string"){var xe;K=(xe=M(O))!==null&&xe!==void 0?xe:O;try{J=Bh(K)}catch(ye){if(U)throw L(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ye.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(O){var U,K,J="";if(m(O)&&(O=w(O)),typeof O=="string"&&r(O)===t&&((J=ae(O,!1))===""&&(J=e.loadFile(O)||""),O=J),K=r(O),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(!Y()||O instanceof Uint8Array||(O=Z(O)),!(U=this["process"+K.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=K,U}})(Ct.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ct.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,p=!1,m=0;m<f.length&&!p;m++)switch((r=f[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<f.length;w++){r=f[w];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(k.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(b(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(b(S))+") >>",k.content=s;var L=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(k.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Y=this.annotations._nameMap[r.options.name];r.options.pageNumber=Y.page,r.options.top=Y.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var oe=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+oe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:f(r),w:c(n+i),h:f(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,l,c=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(f*p)}else l=c,a=f;return this.text(n,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,l,a,s),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ct.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},l=e.__arabicParser__.isArabicEndLetter=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(k){return a(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return a(k)&&s(k)&&t[k.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(k){var E=0,b=n,S="",L=0;for(E=0;E<k.length;E+=1)b[k.charCodeAt(E)]!==void 0?(L++,typeof(b=b[k.charCodeAt(E)])=="number"&&(S+=String.fromCharCode(b),b=n,L=0),E===k.length-1&&(b=n,S+=k.charAt(E-(L-1)),E-=L-1,L=0)):(b=n,S+=k.charAt(E-L),E-=L,L=0);return S};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(k,E,b){return a(k)?s(k)===!1?-1:!f(k)||!a(E)&&!a(b)||!a(b)&&l(E)||l(k)&&!a(E)||l(k)&&c(E)||l(k)&&l(E)?0:p(k)&&a(E)&&!l(E)&&a(b)&&f(b)?3:l(k)||!a(b)?1:2:-1},g=function(k){var E=0,b=0,S=0,L="",M="",Y="",oe=(k=k||"").split("\\s+"),Z=[];for(E=0;E<oe.length;E+=1){for(Z.push(""),b=0;b<oe[E].length;b+=1)L=oe[E][b],M=oe[E][b-1],Y=oe[E][b+1],a(L)?(S=w(L,M,Y),Z[E]+=S!==-1?String.fromCharCode(t[L.charCodeAt(0)][S]):L):Z[E]+=L;Z[E]=m(Z[E])}return Z.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var k,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(E)){var S=0;for(b=[],S=0;S<E.length;S+=1)Array.isArray(E[S])?b.push([g(E[S][0]),E[S][1],E[S][2]]):b.push([g(E[S])]);k=b}else k=g(E);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",N])}(Ct.API),Ct.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ct.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(k){c=k}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(k){N=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),w=f.scaleFactor||this.internal.scaleFactor,g=0,N=0,k=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=f.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,M){return L.concat(E.splitTextToSize(M,b))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)g<(k=this.getStringUnitWidth(c[S],{font:m})*p)&&(g=k);return g!==0&&(N=c.length),{w:g/=w,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,g&&w&&(this.printHeaderRow(c.lineNumber,!0),c.y+=w[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,f,p,m,w){if(r.call(this),!p)throw new Error("No data for PDF table.");var g,N,k,E,b=[],S=[],L=[],M={},Y={},oe=[],Z=[],R=(w=w||{}).autoSize||!1,ee=w.printHeaders!==!1,ae=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,O=w.margins||Object.assign({width:this.getPageWidth()},t),U=typeof w.padding=="number"?w.padding:3,K=w.headerBackgroundColor||"#c8c8c8",J=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=ae,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=J,this.setFontSize(ae),m==null)S=b=Object.keys(p[0]),L=b.map(function(){return"left"});else if(Array.isArray(m)&&Sn(m[0])==="object")for(b=m.map(function(se){return se.name}),S=m.map(function(se){return se.prompt||se.name||""}),L=m.map(function(se){return se.align||"left"}),g=0;g<m.length;g+=1)Y[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(S=b=m,L=b.map(function(){return"left"}));if(R||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<b.length;g+=1){for(M[E=b[g]]=p.map(function(se){return se[E]}),this.setFont(void 0,"bold"),oe.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=M[E],this.setFont(void 0,"normal"),k=0;k<N.length;k+=1)oe.push(this.getTextDimensions(N[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[E]=Math.max.apply(null,oe)+U+U,oe=[]}if(ee){var xe={};for(g=0;g<b.length;g+=1)xe[b[g]]={},xe[b[g]].text=S[g],xe[b[g]].align=L[g];var ye=l.call(this,xe,Y);Z=b.map(function(se){return new s(c,f,Y[se],ye,xe[se].text,void 0,xe[se].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var Q=m.reduce(function(se,Ae){return se[Ae.name]=Ae.align,se},{});for(g=0;g<p.length;g+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:g,data:p[g]},this);var $=l.call(this,p[g],Y);for(k=0;k<b.length;k+=1){var q=p[g][b[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:g,col:k,data:q},this),a.call(this,new s(c,f,Y[b[k]],$,q,g+2,Q[b[k]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var l=function(c,f){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[g]-p-p)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/w+p+p},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){p=this.internal.__cell__.tableHeaderRow[g].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(N)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}}(Ct.API);var j6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vy=E6(C6),A6=[100,200,300,400,500,600,700,800,900],gB=E6(A6);function yy(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return j6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof vy[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function F_(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var vB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B_(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function yB(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},vB,n.genericFontFamilies||{}),s=null,a=null,l=0;l<t.length;++l)if(i[(s=yy(t[l])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+B_(s)+"' and default family '"+r+"'.");if(a=function(c,f){if(f[c])return f[c];var p=vy[c],m=p<=vy.normal?-1:1,w=F_(f,C6,p,m);if(!w)throw new Error("Could not find a matching font-stretch value for "+c);return w}(s.stretch,a),a=function(c,f){if(f[c])return f[c];for(var p=j6[c],m=0;m<p.length;++m)if(f[p[m]])return f[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var p=gB[c],m=F_(f,A6,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+B_(s)+"'.");return a}function U_(e){return e.trimLeft()}function wB(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function xB(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var $m,z_,q_,Ov=["times"];(function(e){var t,n,r,i,s,a,l,c,f,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,f=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=P;Object.defineProperty(this,"pdf",{get:function(){return H}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(fe){re=!!fe}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(fe){ce=!!fe}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(fe){isNaN(fe)||(he=fe)}});var ke=0;Object.defineProperty(this,"posY",{get:function(){return ke},set:function(fe){isNaN(fe)||(ke=fe)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(fe){var G;typeof fe=="number"?G=[fe,fe,fe,fe]:((G=new Array(4))[0]=fe[0],G[1]=fe.length>=2?fe[1]:G[0],G[2]=fe.length>=3?fe[2]:G[0],G[3]=fe.length>=4?fe[3]:G[1]),f.margin=G}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(fe){Ee=fe}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(fe){te=fe}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(fe){le=fe}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(fe){fe instanceof p&&(f=fe)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(fe){f.path=fe}});var ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return ue},set:function(fe){ue=fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(fe){var G;G=w(fe),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(fe){var G=w(fe);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(fe){["butt","round","square"].indexOf(fe)!==-1&&(this.ctx.lineCap=fe,this.pdf.setLineCap(fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(fe){isNaN(fe)||(this.ctx.lineWidth=fe,this.pdf.setLineWidth(fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(fe){["bevel","round","miter"].indexOf(fe)!==-1&&(this.ctx.lineJoin=fe,this.pdf.setLineJoin(fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(fe){isNaN(fe)||(this.ctx.miterLimit=fe,this.pdf.setMiterLimit(fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(fe){this.ctx.textBaseline=fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(fe){["right","end","center","left","start"].indexOf(fe)!==-1&&(this.ctx.textAlign=fe)}});var pe=null;function je(fe,G){if(pe===null){var qe=function(Re){var Fe=[];return Object.keys(Re).forEach(function(be){Re[be].forEach(function(Me){var Be=null;switch(Me){case"bold":Be={family:be,weight:"bold"};break;case"italic":Be={family:be,style:"italic"};break;case"bolditalic":Be={family:be,weight:"bold",style:"italic"};break;case"":case"normal":Be={family:be}}Be!==null&&(Be.ref={name:be,style:Me},Fe.push(Be))})}),Fe}(fe.getFontList());pe=function(Re){for(var Fe={},be=0;be<Re.length;++be){var Me=yy(Re[be]),Be=Me.family,We=Me.stretch,et=Me.style,st=Me.weight;Fe[Be]=Fe[Be]||{},Fe[Be][We]=Fe[Be][We]||{},Fe[Be][We][et]=Fe[Be][We][et]||{},Fe[Be][We][et][st]=Me}return Fe}(qe.concat(G))}return pe}var Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(fe){pe=null,Oe=fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(fe){var G;if(this.ctx.font=fe,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(fe))!==null){var qe=G[1];G[2];var Re=G[3],Fe=G[4];G[5];var be=G[6],Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(Me==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var Be=function(ft){var pt,tt,In=[],zt=ft.trim();if(zt==="")return Ov;if(zt in $_)return[$_[zt]];for(;zt!=="";){switch(tt=null,pt=(zt=U_(zt)).charAt(0)){case'"':case"'":tt=wB(zt.substring(1),pt);break;default:tt=xB(zt)}if(tt===null||(In.push(tt[0]),(zt=U_(tt[1]))!==""&&zt.charAt(0)!==","))return Ov;zt=zt.replace(/^,/,"")}return In}(be);if(this.fontFaces){var We=yB(je(this.pdf,this.fontFaces),Be.map(function(ft){return{family:ft,stretch:"normal",weight:Re,style:qe}}));this.pdf.setFont(We.ref.name,We.ref.style)}else{var et="";(Re==="bold"||parseInt(Re,10)>=700||qe==="bold")&&(et="bold"),qe==="italic"&&(et+="italic"),et.length===0&&(et="normal");for(var st="",it={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yt=0;yt<Be.length;yt++){if(this.pdf.internal.getFont(Be[yt],et,{noFallback:!0,disableWarning:!0})!==void 0){st=Be[yt];break}if(et==="bolditalic"&&this.pdf.internal.getFont(Be[yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=Be[yt],et="bold";else if(this.pdf.internal.getFont(Be[yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=Be[yt],et="normal";break}}if(st===""){for(var Nt=0;Nt<Be.length;Nt++)if(it[Be[Nt]]){st=it[Be[Nt]];break}}st=st===""?"Times":st,this.pdf.setFont(st,et)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(fe){this.ctx.globalCompositeOperation=fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(fe){this.ctx.globalAlpha=fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(fe){this.ctx.lineDashOffset=fe,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(fe){this.ctx.lineDash=fe,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(fe){this.ctx.ignoreClearRect=!!fe}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){M.call(this,"fill",!1)},m.prototype.stroke=function(){M.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,H){if(isNaN(P)||isNaN(H))throw Tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new a(P,H));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new a(P,H)},m.prototype.closePath=function(){var P=new a(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Sn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){P=new a(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.lineTo=function(P,H){if(isNaN(P)||isNaN(H))throw Tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new a(P,H));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new a(re.x,re.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,H,re,ce){if(isNaN(re)||isNaN(ce)||isNaN(P)||isNaN(H))throw Tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new a(re,ce)),ke=this.ctx.transform.applyToPoint(new a(P,H));this.path.push({type:"qct",x1:ke.x,y1:ke.y,x:he.x,y:he.y}),this.ctx.lastPoint=new a(he.x,he.y)},m.prototype.bezierCurveTo=function(P,H,re,ce,he,ke){if(isNaN(he)||isNaN(ke)||isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new a(he,ke)),te=this.ctx.transform.applyToPoint(new a(P,H)),le=this.ctx.transform.applyToPoint(new a(re,ce));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:le.x,y2:le.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new a(Ee.x,Ee.y)},m.prototype.arc=function(P,H,re,ce,he,ke){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce)||isNaN(he))throw Tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ke=!!ke,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new a(P,H));P=Ee.x,H=Ee.y;var te=this.ctx.transform.applyToPoint(new a(0,re)),le=this.ctx.transform.applyToPoint(new a(0,0));re=Math.sqrt(Math.pow(te.x-le.x,2)+Math.pow(te.y-le.y,2))}Math.abs(he-ce)>=2*Math.PI&&(ce=0,he=2*Math.PI),this.path.push({type:"arc",x:P,y:H,radius:re,startAngle:ce,endAngle:he,counterclockwise:ke})},m.prototype.arcTo=function(P,H,re,ce,he){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,H),this.lineTo(P+re,H),this.lineTo(P+re,H+ce),this.lineTo(P,H+ce),this.lineTo(P,H),this.lineTo(P+re,H),this.lineTo(P,H)},m.prototype.fillRect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,H,re,ce),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},m.prototype.strokeRect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,H,re,ce),this.stroke())},m.prototype.clearRect=function(P,H,re,ce){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce))throw Tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,H,re,ce))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(H),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(P){var H,re,ce,he;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))H=0,re=0,ce=0,he=0;else{var ke=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ke!==null)H=parseInt(ke[1]),re=parseInt(ke[2]),ce=parseInt(ke[3]),he=1;else if((ke=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)H=parseInt(ke[1]),re=parseInt(ke[2]),ce=parseInt(ke[3]),he=parseFloat(ke[4]);else{if(he=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ee=new x6(P);P=Ee.ok?Ee.toHex():"#000000"}P.length===4?(H=P.substring(1,2),H+=H,re=P.substring(2,3),re+=re,ce=P.substring(3,4),ce+=ce):(H=P.substring(1,3),re=P.substring(3,5),ce=P.substring(5,7)),H=parseInt(H,16),re=parseInt(re,16),ce=parseInt(ce,16)}}return{r:H,g:re,b:ce,a:he,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,H,re,ce){if(isNaN(H)||isNaN(re)||typeof P!="string")throw Tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!g.call(this)){var he=$(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;U.call(this,{text:P,x:H,y:re,scale:ke,angle:he,align:this.textAlign,maxWidth:ce})}},m.prototype.strokeText=function(P,H,re,ce){if(isNaN(H)||isNaN(re)||typeof P!="string")throw Tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ce=isNaN(ce)?void 0:ce;var he=$(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;U.call(this,{text:P,x:H,y:re,scale:ke,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ce})}},m.prototype.measureText=function(P){if(typeof P!="string")throw Tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,re=this.pdf.internal.scaleFactor,ce=H.internal.getFontSize(),he=H.getStringUnitWidth(P)*ce/H.internal.scaleFactor,ke=function(Ee){var te=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return te}}),this};return new ke({width:he*=Math.round(96*re/72*1e4)/1e4})},m.prototype.scale=function(P,H){if(isNaN(P)||isNaN(H))throw Tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new c(P,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.rotate=function(P){if(isNaN(P))throw Tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.translate=function(P,H){if(isNaN(P)||isNaN(H))throw Tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new c(1,0,0,1,P,H);this.ctx.transform=this.ctx.transform.multiply(re)},m.prototype.transform=function(P,H,re,ce,he,ke){if(isNaN(P)||isNaN(H)||isNaN(re)||isNaN(ce)||isNaN(he)||isNaN(ke))throw Tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new c(P,H,re,ce,he,ke);this.ctx.transform=this.ctx.transform.multiply(Ee)},m.prototype.setTransform=function(P,H,re,ce,he,ke){P=isNaN(P)?1:P,H=isNaN(H)?0:H,re=isNaN(re)?0:re,ce=isNaN(ce)?1:ce,he=isNaN(he)?0:he,ke=isNaN(ke)?0:ke,this.ctx.transform=new c(P,H,re,ce,he,ke)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,H,re,ce,he,ke,Ee,te,le){var ue=this.pdf.getImageProperties(P),pe=1,je=1,Oe=1,fe=1;ce!==void 0&&te!==void 0&&(Oe=te/ce,fe=le/he,pe=ue.width/ce*te/ce,je=ue.height/he*le/he),ke===void 0&&(ke=H,Ee=re,H=0,re=0),ce!==void 0&&te===void 0&&(te=ce,le=he),ce===void 0&&te===void 0&&(te=ue.width,le=ue.height);for(var G,qe=this.ctx.transform.decompose(),Re=$(qe.rotate.shx),Fe=new c,be=(Fe=(Fe=(Fe=Fe.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale)).applyToRectangle(new l(ke-H*Oe,Ee-re*fe,ce*pe,he*je)),Me=E.call(this,be),Be=[],We=0;We<Me.length;We+=1)Be.indexOf(Me[We])===-1&&Be.push(Me[We]);if(L(Be),this.autoPaging)for(var et=Be[0],st=Be[Be.length-1],it=et;it<st+1;it++){this.pdf.setPage(it);var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=it===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=it===1?0:ft+(it-2)*pt;if(this.ctx.clip_path.length!==0){var In=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(G,this.posX+this.margin[3],-tt+Nt+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=In}var zt=JSON.parse(JSON.stringify(be));zt=S([zt],this.posX+this.margin[3],-tt+Nt+this.ctx.prevPageLastElemOffset)[0];var Jr=(it>et||it<st)&&k.call(this);Jr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,pt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",zt.x,zt.y,zt.w,zt.h,null,null,Re),Jr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",be.x,be.y,be.w,be.h,null,null,Re)};var E=function(P,H,re){var ce=[];H=H||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ce.push(Math.floor((P.y+he)/re)+1);break;case"arc":ce.push(Math.floor((P.y+he-P.radius)/re)+1),ce.push(Math.floor((P.y+he+P.radius)/re)+1);break;case"qct":var ke=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ce.push(Math.floor((ke.y+he)/re)+1),ce.push(Math.floor((ke.y+ke.h+he)/re)+1);break;case"bct":var Ee=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ce.push(Math.floor((Ee.y+he)/re)+1),ce.push(Math.floor((Ee.y+Ee.h+he)/re)+1);break;case"rect":ce.push(Math.floor((P.y+he)/re)+1),ce.push(Math.floor((P.y+P.h+he)/re)+1)}for(var te=0;te<ce.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<ce[te];)b.call(this);return ce},b=function(){var P=this.fillStyle,H=this.strokeStyle,re=this.font,ce=this.lineCap,he=this.lineWidth,ke=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=H,this.font=re,this.lineCap=ce,this.lineWidth=he,this.lineJoin=ke},S=function(P,H,re){for(var ce=0;ce<P.length;ce++)switch(P[ce].type){case"bct":P[ce].x2+=H,P[ce].y2+=re;case"qct":P[ce].x1+=H,P[ce].y1+=re;case"mt":case"lt":case"arc":default:P[ce].x+=H,P[ce].y+=re}return P},L=function(P){return P.sort(function(H,re){return H-re})},M=function(P,H){for(var re,ce,he=this.fillStyle,ke=this.strokeStyle,Ee=this.lineCap,te=this.lineWidth,le=Math.abs(te*this.ctx.transform.scaleX),ue=this.lineJoin,pe=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),Oe=[],fe=0;fe<je.length;fe++)if(je[fe].x!==void 0)for(var G=E.call(this,je[fe]),qe=0;qe<G.length;qe+=1)Oe.indexOf(G[qe])===-1&&Oe.push(G[qe]);for(var Re=0;Re<Oe.length;Re++)for(;this.pdf.internal.getNumberOfPages()<Oe[Re];)b.call(this);if(L(Oe),this.autoPaging)for(var Fe=Oe[0],be=Oe[Oe.length-1],Me=Fe;Me<be+1;Me++){this.pdf.setPage(Me),this.fillStyle=he,this.strokeStyle=ke,this.lineCap=Ee,this.lineWidth=le,this.lineJoin=ue;var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=Me===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Me===1?0:et+(Me-2)*st;if(this.ctx.clip_path.length!==0){var yt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(re,this.posX+this.margin[3],-it+We+this.ctx.prevPageLastElemOffset),Y.call(this,P,!0),this.path=yt}if(ce=JSON.parse(JSON.stringify(pe)),this.path=S(ce,this.posX+this.margin[3],-it+We+this.ctx.prevPageLastElemOffset),H===!1||Me===0){var Nt=(Me>Fe||Me<be)&&k.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,st,null).clip().discardPath()),Y.call(this,P,H),Nt&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=le,Y.call(this,P,H),this.lineWidth=te;this.path=pe},Y=function(P,H){if((P!=="stroke"||H||!N.call(this))&&(P==="stroke"||H||!g.call(this))){for(var re,ce,he=[],ke=this.path,Ee=0;Ee<ke.length;Ee++){var te=ke[Ee];switch(te.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:te,deltas:[],abs:[]});break;case"lt":var le=he.length;if(ke[Ee-1]&&!isNaN(ke[Ee-1].x)&&(re=[te.x-ke[Ee-1].x,te.y-ke[Ee-1].y],le>0)){for(;le>=0;le--)if(he[le-1].close!==!0&&he[le-1].begin!==!0){he[le-1].deltas.push(re),he[le-1].abs.push(te);break}}break;case"bct":re=[te.x1-ke[Ee-1].x,te.y1-ke[Ee-1].y,te.x2-ke[Ee-1].x,te.y2-ke[Ee-1].y,te.x-ke[Ee-1].x,te.y-ke[Ee-1].y],he[he.length-1].deltas.push(re);break;case"qct":var ue=ke[Ee-1].x+2/3*(te.x1-ke[Ee-1].x),pe=ke[Ee-1].y+2/3*(te.y1-ke[Ee-1].y),je=te.x+2/3*(te.x1-te.x),Oe=te.y+2/3*(te.y1-te.y),fe=te.x,G=te.y;re=[ue-ke[Ee-1].x,pe-ke[Ee-1].y,je-ke[Ee-1].x,Oe-ke[Ee-1].y,fe-ke[Ee-1].x,G-ke[Ee-1].y],he[he.length-1].deltas.push(re);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(te)}}ce=H?null:P==="stroke"?"stroke":"fill";for(var qe=!1,Re=0;Re<he.length;Re++)if(he[Re].arc)for(var Fe=he[Re].abs,be=0;be<Fe.length;be++){var Me=Fe[be];Me.type==="arc"?R.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,H,!qe):K.call(this,Me.x,Me.y),qe=!0}else if(he[Re].close===!0)this.pdf.internal.out("h"),qe=!1;else if(he[Re].begin!==!0){var Be=he[Re].start.x,We=he[Re].start.y;J.call(this,he[Re].deltas,Be,We),qe=!0}ce&&ee.call(this,ce),H&&ae.call(this)}},oe=function(P){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-re;case"top":return P+H-re;case"hanging":return P+H-2*re;case"middle":return P+H/2-re;case"ideographic":return P;case"alphabetic":default:return P}},Z=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(H,re){this.colorStops.push([H,re])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(P,H,re,ce,he,ke,Ee,te,le){for(var ue=ye.call(this,re,ce,he,ke),pe=0;pe<ue.length;pe++){var je=ue[pe];pe===0&&(le?O.call(this,je.x1+P,je.y1+H):K.call(this,je.x1+P,je.y1+H)),xe.call(this,P,H,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}te?ae.call(this):ee.call(this,Ee)},ee=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ae=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(P,H){this.pdf.internal.out(n(P)+" "+r(H)+" m")},U=function(P){var H;switch(P.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var re=this.pdf.getTextDimensions(P.text),ce=oe.call(this,P.y),he=Z.call(this,ce)-re.h,ke=this.ctx.transform.applyToPoint(new a(P.x,ce)),Ee=this.ctx.transform.decompose(),te=new c;te=(te=(te=te.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var le,ue,pe,je=this.ctx.transform.applyToRectangle(new l(P.x,ce,re.w,re.h)),Oe=te.applyToRectangle(new l(P.x,he,re.w,re.h)),fe=E.call(this,Oe),G=[],qe=0;qe<fe.length;qe+=1)G.indexOf(fe[qe])===-1&&G.push(fe[qe]);if(L(G),this.autoPaging)for(var Re=G[0],Fe=G[G.length-1],be=Re;be<Fe+1;be++){this.pdf.setPage(be);var Me=be===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[2],et=We-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],it=st-this.margin[3],yt=be===1?0:Be+(be-2)*et;if(this.ctx.clip_path.length!==0){var Nt=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(le,this.posX+this.margin[3],-1*yt+Me),Y.call(this,"fill",!0),this.path=Nt}var ft=S([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-yt+Me+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*P.scale),pe=this.lineWidth,this.lineWidth=pe*P.scale);var pt=this.autoPaging!=="text";if(pt||ft.y+ft.h<=We){if(pt||ft.y>=Me&&ft.x<=st){var tt=pt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||st-ft.x)[0],In=S([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-yt+Me+this.ctx.prevPageLastElemOffset)[0],zt=pt&&(be>Re||be<Fe)&&k.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,et,null).clip().discardPath()),this.pdf.text(tt,In.x,In.y,{angle:P.angle,align:H,renderingMode:P.renderingMode}),zt&&this.pdf.restoreGraphicsState()}}else ft.y<We&&(this.ctx.prevPageLastElemOffset+=We-ft.y);P.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=pe)}else P.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*P.scale),pe=this.lineWidth,this.lineWidth=pe*P.scale),this.pdf.text(P.text,ke.x+this.posX,ke.y+this.posY,{angle:P.angle,align:H,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=pe)},K=function(P,H,re,ce){re=re||0,ce=ce||0,this.pdf.internal.out(n(P+re)+" "+r(H+ce)+" l")},J=function(P,H,re){return this.pdf.lines(P,H,re,null,null)},xe=function(P,H,re,ce,he,ke,Ee,te){this.pdf.internal.out([t(i(re+P)),t(s(ce+H)),t(i(he+P)),t(s(ke+H)),t(i(Ee+P)),t(s(te+H)),"c"].join(" "))},ye=function(P,H,re,ce){for(var he=2*Math.PI,ke=Math.PI/2;H>re;)H-=he;var Ee=Math.abs(re-H);Ee<he&&ce&&(Ee=he-Ee);for(var te=[],le=ce?-1:1,ue=H;Ee>1e-5;){var pe=ue+le*Math.min(Ee,ke);te.push(Q.call(this,P,ue,pe)),Ee-=Math.abs(pe-ue),ue=pe}return te},Q=function(P,H,re){var ce=(re-H)/2,he=P*Math.cos(ce),ke=P*Math.sin(ce),Ee=he,te=-ke,le=Ee*Ee+te*te,ue=le+Ee*he+te*ke,pe=4/3*(Math.sqrt(2*le*ue)-ue)/(Ee*ke-te*he),je=Ee-pe*te,Oe=te+pe*Ee,fe=je,G=-Oe,qe=ce+H,Re=Math.cos(qe),Fe=Math.sin(qe);return{x1:P*Math.cos(H),y1:P*Math.sin(H),x2:je*Re-Oe*Fe,y2:je*Fe+Oe*Re,x3:fe*Re-G*Fe,y3:fe*Fe+G*Re,x4:P*Math.cos(re),y4:P*Math.sin(re)}},$=function(P){return 180*P/Math.PI},q=function(P,H,re,ce,he,ke){var Ee=P+.5*(re-P),te=H+.5*(ce-H),le=he+.5*(re-he),ue=ke+.5*(ce-ke),pe=Math.min(P,he,Ee,le),je=Math.max(P,he,Ee,le),Oe=Math.min(H,ke,te,ue),fe=Math.max(H,ke,te,ue);return new l(pe,Oe,je-pe,fe-Oe)},se=function(P,H,re,ce,he,ke,Ee,te){var le,ue,pe,je,Oe,fe,G,qe,Re,Fe,be,Me,Be,We,et=re-P,st=ce-H,it=he-re,yt=ke-ce,Nt=Ee-he,ft=te-ke;for(ue=0;ue<41;ue++)Re=(G=(pe=P+(le=ue/40)*et)+le*((Oe=re+le*it)-pe))+le*(Oe+le*(he+le*Nt-Oe)-G),Fe=(qe=(je=H+le*st)+le*((fe=ce+le*yt)-je))+le*(fe+le*(ke+le*ft-fe)-qe),ue==0?(be=Re,Me=Fe,Be=Re,We=Fe):(be=Math.min(be,Re),Me=Math.min(Me,Fe),Be=Math.max(Be,Re),We=Math.max(We,Fe));return new l(Math.round(be),Math.round(Me),Math.round(Be-be),Math.round(We-Me))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,H,re=(P=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:H}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Ct.API),function(e){var t=function(s){var a,l,c,f,p,m,w,g,N,k;for(l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(k=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)-(w=p%85))/85)%85,l.push(m+33,w+33,g+33,N+33,k+33)):l.push(122);return function(E,b){for(var S=b;S>0;S--)E.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,f,p,m=String,w="length",g=255,N="charCodeAt",k="slice",E="replace";for(s[k](-2),s=s[k](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],f=0,p=(s+=a="uuuuu"[k](s[w]%5||5))[w];p>f;f+=5)l=52200625*(s[N](f)-33)+614125*(s[N](f+1)-33)+7225*(s[N](f+2)-33)+85*(s[N](f+3)-33)+(s[N](f+4)-33),c.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(b,S){for(var L=S;L>0;L--)b.pop()}(c,a[w]),m.fromCharCode.apply(m,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=fy(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Ct.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,f,p){var m=new XMLHttpRequest,w=0,g=function(N){var k=N.length,E=[],b=String.fromCharCode;for(w=0;w<k;w+=1)E.push(b(255&N.charCodeAt(w)));return E.join("")};if(m.open("GET",c,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?p(g(this.responseText)):p(void 0)}),m.send(null),f&&m.status===200)return g(m.responseText)}(i,s,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Ct.API),function(e){function t(){return(At.html2canvas?Promise.resolve(At.html2canvas):sl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):sl(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Sn(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||m.appendChild(c(w,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var w=0;w<f.length;++w){var g=f[w],N=g.src.find(function(k){return k.format==="truetype"});N&&c.addFont(N.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,p){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,f),m}).then(f,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(f,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ct.getPageSize=function(a,l,c){if(Sn(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var g,N=0,k=0;if(w.hasOwnProperty(m))N=w[m][1]/p,k=w[m][0]/p;else try{N=c[1],k=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",k>N&&(g=k,k=N,N=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>k&&(g=k,k=N,N=g)}return{width:k,height:N,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(yy):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(Ct.API),Ct.API.addJS=function(e){return q_=e,this.internal.events.subscribe("postPutResources",function(){$m=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($m+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$m!==void 0&&z_!==void 0&&this.internal.out("/Names <</JavaScript "+$m+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var m=n.internal.newObject();p.push(m);var w=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Ct.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,l){var c,f=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(m){for(var w,g=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,k={width:0,height:0,numcomponents:1},E=4;E<N;E+=2){if(E+=g,t.indexOf(m.charCodeAt(E+1))!==-1){w=256*m.charCodeAt(E+5)+m.charCodeAt(E+6),k={width:256*m.charCodeAt(E+7)+m.charCodeAt(E+8),height:w,numcomponents:m.charCodeAt(E+9)};break}g=256*m.charCodeAt(E+2)+m.charCodeAt(E+3)}return k}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}}(Ct.API);var Rd,Bm,W_,H_,V_,bB=function(){var e,t,n;function r(s){var a,l,c,f,p,m,w,g,N,k,E,b,S,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),N=(function(){var M,Y;for(Y=[],M=0;M<4;++M)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*p/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,b=0;0<=a?b<a:b>a;0<=a?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((k=c-this.transparency.indexed.length)>0)for(S=0;0<=k?S<k:S>k;0<=k?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":w=(E=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,w)),this.text[g]=String.fromCharCode.apply(String,E.slice(w+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,w,g,N){var k,E,b,S,L,M,Y,oe,Z,R,ee,ae,O,U,K,J,xe,ye,Q,$,q,se=Math.ceil((f.width-m)/g),Ae=Math.ceil((f.height-w)/N),P=f.width==se&&f.height==Ae;for(U=a*se,ae=P?l:new Uint8Array(U*Ae),M=s.length,O=0,E=0;O<Ae&&c<M;){switch(s[c++]){case 0:for(S=xe=0;xe<U;S=xe+=1)ae[E++]=s[c++];break;case 1:for(S=ye=0;ye<U;S=ye+=1)k=s[c++],L=S<a?0:ae[E-a],ae[E++]=(k+L)%256;break;case 2:for(S=Q=0;Q<U;S=Q+=1)k=s[c++],b=(S-S%a)/a,K=O&&ae[(O-1)*U+b*a+S%a],ae[E++]=(K+k)%256;break;case 3:for(S=$=0;$<U;S=$+=1)k=s[c++],b=(S-S%a)/a,L=S<a?0:ae[E-a],K=O&&ae[(O-1)*U+b*a+S%a],ae[E++]=(k+Math.floor((L+K)/2))%256;break;case 4:for(S=q=0;q<U;S=q+=1)k=s[c++],b=(S-S%a)/a,L=S<a?0:ae[E-a],O===0?K=J=0:(K=ae[(O-1)*U+b*a+S%a],J=b&&ae[(O-1)*U+(b-1)*a+S%a]),Y=L+K-J,oe=Math.abs(Y-L),R=Math.abs(Y-K),ee=Math.abs(Y-J),Z=oe<=R&&oe<=ee?L:R<=ee?K:J,ae[E++]=(k+Z)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var H=((w+O*N)*f.width+m)*a,re=O*U;for(S=0;S<se;S+=1){for(var ce=0;ce<a;ce+=1)l[H++]=ae[re++];H+=(g-1)*a}}O++}}return s=Z$(s),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,c,f,p,m,w,g;for(l=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+l.length),c=0,s=0,a=m=0,w=l.length;m<w;a=m+=3)f[c++]=l[a],f[c++]=l[a+1],f[c++]=l[a+2],f[c++]=(g=p[s++])!=null?g:255;return f},r.prototype.copyToImageData=function(s,a){var l,c,f,p,m,w,g,N,k,E,b;if(c=this.colors,k=null,l=this.hasAlphaChannel,this.palette.length&&(k=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(f=s.data||s).length,m=k||a,p=w=0,c===1)for(;p<N;)g=k?4*a[p/4]:w,E=m[g++],f[p++]=E,f[p++]=E,f[p++]=E,f[p++]=l?m[g++]:255,w=g;else for(;p<N;)g=k?4*a[p/4]:w,f[p++]=m[g++],f[p++]=m[g++],f[p++]=m[g++],f[p++]=l?m[g++]:255,w=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(At)==="[object Window]"){try{t=At.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,c,f,p,m,w,g;if(this.animation){for(g=[],l=p=0,m=(w=this.animation.frames).length;p<m;l=++p)a=w[l],c=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,f),a.imageData=c,g.push(a.image=e(c));return g}},r.prototype.renderFrame=function(s,a){var l,c,f;return l=(c=this.animation.frames)[a],f=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,c,f,p,m,w=this;return l=0,m=this.animation,f=m.numFrames,c=m.frames,p=m.numPlays,(a=function(){var g,N;if(g=l++%f,N=c[g],w.renderFrame(s,g),f>1&&l/f<p)return w.animation._timeout=setTimeout(a,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function _B(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=a,t+=3*a);var f=!0,p=[],m=0,w=null,g=0,N=null;for(this.width=n,this.height=r;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];m=e[t++]|e[t++]<<8,w=e[t++],!(1&k)&&(w=null),g=k>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var E=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,M=e[t++],Y=M>>6&1,oe=1<<(7&M)+1,Z=l,R=c,ee=!1;M>>7&&(ee=!0,Z=t,R=oe,t+=3*oe);var ae=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}p.push({x:E,y:b,width:S,height:L,has_local_palette:ee,palette_offset:Z,palette_size:R,data_offset:ae,data_length:t-ae,transparent_index:w,interlaced:!!Y,delay:m,disposal:g});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(U){if(U<0||U>=p.length)throw new Error("Frame index out of range.");return p[U]},this.decodeAndBlitFrameBGRA=function(U,K){var J=this.frameInfo(U),xe=J.width*J.height,ye=new Uint8Array(xe);G_(e,J.data_offset,ye,xe);var Q=J.palette_offset,$=J.transparent_index;$===null&&($=256);var q=J.width,se=n-q,Ae=q,P=4*(J.y*n+J.x),H=4*((J.y+J.height)*n+J.x),re=P,ce=4*se;J.interlaced===!0&&(ce+=4*n*7);for(var he=8,ke=0,Ee=ye.length;ke<Ee;++ke){var te=ye[ke];if(Ae===0&&(Ae=q,(re+=ce)>=H&&(ce=4*se+4*n*(he-1),re=P+(q+se)*(he<<1),he>>=1)),te===$)re+=4;else{var le=e[Q+3*te],ue=e[Q+3*te+1],pe=e[Q+3*te+2];K[re++]=pe,K[re++]=ue,K[re++]=le,K[re++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(U,K){var J=this.frameInfo(U),xe=J.width*J.height,ye=new Uint8Array(xe);G_(e,J.data_offset,ye,xe);var Q=J.palette_offset,$=J.transparent_index;$===null&&($=256);var q=J.width,se=n-q,Ae=q,P=4*(J.y*n+J.x),H=4*((J.y+J.height)*n+J.x),re=P,ce=4*se;J.interlaced===!0&&(ce+=4*n*7);for(var he=8,ke=0,Ee=ye.length;ke<Ee;++ke){var te=ye[ke];if(Ae===0&&(Ae=q,(re+=ce)>=H&&(ce=4*se+4*n*(he-1),re=P+(q+se)*(he<<1),he>>=1)),te===$)re+=4;else{var le=e[Q+3*te],ue=e[Q+3*te+1],pe=e[Q+3*te+2];K[re++]=le,K[re++]=ue,K[re++]=pe,K[re++]=255}--Ae}}}function G_(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,l=a+1,c=i+1,f=(1<<c)-1,p=0,m=0,w=0,g=e[t++],N=new Int32Array(4096),k=null;;){for(;p<16&&g!==0;)m|=e[t++]<<p,p+=8,g===1?g=e[t++]:--g;if(p<c)break;var E=m&f;if(m>>=c,p-=c,E!==s){if(E===a)break;for(var b=E<l?E:k,S=0,L=b;L>s;)L=N[L]>>8,++S;var M=L;if(w+S+(b!==E?1:0)>r)return void Tn.log("Warning, gif stream longer than expected.");n[w++]=M;var Y=w+=S;for(b!==E&&(n[w++]=M),L=b;S--;)L=N[L],n[--Y]=255&L,L>>=8;k!==null&&l<4096&&(N[l++]=k<<8|M,l>=f+1&&c<12&&(++c,f=f<<1|1)),k=E}else l=a+1,f=(1<<(c=i+1))-1,k=null}return w!==r&&Tn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Mv(e){var t,n,r,i,s,a=Math.floor,l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(65535),w=new Array(65535),g=new Array(64),N=new Array(64),k=[],E=0,b=7,S=new Array(64),L=new Array(64),M=new Array(64),Y=new Array(256),oe=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],xe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ye(P,H){for(var re=0,ce=0,he=new Array,ke=1;ke<=16;ke++){for(var Ee=1;Ee<=P[ke];Ee++)he[H[ce]]=[],he[H[ce]][0]=re,he[H[ce]][1]=ke,ce++,re++;re*=2}return he}function Q(P){for(var H=P[0],re=P[1]-1;re>=0;)H&1<<re&&(E|=1<<b),re--,--b<0&&(E==255?($(255),$(0)):$(E),b=7,E=0)}function $(P){k.push(P)}function q(P){$(P>>8&255),$(255&P)}function se(P,H,re,ce,he){for(var ke,Ee=he[0],te=he[240],le=function(Fe,be){var Me,Be,We,et,st,it,yt,Nt,ft,pt,tt=0;for(ft=0;ft<8;++ft){Me=Fe[tt],Be=Fe[tt+1],We=Fe[tt+2],et=Fe[tt+3],st=Fe[tt+4],it=Fe[tt+5],yt=Fe[tt+6];var In=Me+(Nt=Fe[tt+7]),zt=Me-Nt,Jr=Be+yt,Qt=Be-yt,pn=We+it,oi=We-it,Zt=et+st,sa=et-st,Dn=In+Zt,li=In-Zt,bn=Jr+pn,Gt=Jr-pn;Fe[tt]=Dn+bn,Fe[tt+4]=Dn-bn;var xt=.707106781*(Gt+li);Fe[tt+2]=li+xt,Fe[tt+6]=li-xt;var Bt=.382683433*((Dn=sa+oi)-(Gt=Qt+zt)),dr=.5411961*Dn+Bt,rn=1.306562965*Gt+Bt,nr=.707106781*(bn=oi+Qt),Tr=zt+nr,dt=zt-nr;Fe[tt+5]=dt+dr,Fe[tt+3]=dt-dr,Fe[tt+1]=Tr+rn,Fe[tt+7]=Tr-rn,tt+=8}for(tt=0,ft=0;ft<8;++ft){Me=Fe[tt],Be=Fe[tt+8],We=Fe[tt+16],et=Fe[tt+24],st=Fe[tt+32],it=Fe[tt+40],yt=Fe[tt+48];var Yn=Me+(Nt=Fe[tt+56]),rr=Me-Nt,kn=Be+yt,Ln=Be-yt,En=We+it,Kn=We-it,Bi=et+st,ki=et-st,ps=Yn+Bi,ms=Yn-Bi,gs=kn+En,vs=kn-En;Fe[tt]=ps+gs,Fe[tt+32]=ps-gs;var Ui=.707106781*(vs+ms);Fe[tt+16]=ms+Ui,Fe[tt+48]=ms-Ui;var Rs=.382683433*((ps=ki+Kn)-(vs=Ln+rr)),So=.5411961*ps+Rs,ll=1.306562965*vs+Rs,cl=.707106781*(gs=Kn+Ln),ul=rr+cl,aa=rr-cl;Fe[tt+40]=aa+So,Fe[tt+24]=aa-So,Fe[tt+8]=ul+ll,Fe[tt+56]=ul-ll,tt++}for(ft=0;ft<64;++ft)pt=Fe[ft]*be[ft],g[ft]=pt>0?pt+.5|0:pt-.5|0;return g}(P,H),ue=0;ue<64;++ue)N[Z[ue]]=le[ue];var pe=N[0]-re;re=N[0],pe==0?Q(ce[0]):(Q(ce[w[ke=32767+pe]]),Q(m[ke]));for(var je=63;je>0&&N[je]==0;)je--;if(je==0)return Q(Ee),re;for(var Oe,fe=1;fe<=je;){for(var G=fe;N[fe]==0&&fe<=je;)++fe;var qe=fe-G;if(qe>=16){Oe=qe>>4;for(var Re=1;Re<=Oe;++Re)Q(te);qe&=15}ke=32767+N[fe],Q(he[(qe<<4)+w[ke]]),Q(m[ke]),fe++}return je!=63&&Q(Ee),re}function Ae(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(H){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var he=a((re[ce]*H+50)/100);he=Math.min(Math.max(he,1),255),l[Z[ce]]=he}for(var ke=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var te=a((ke[Ee]*H+50)/100);te=Math.min(Math.max(te,1),255),c[Z[Ee]]=te}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ue=0,pe=0;pe<8;pe++)for(var je=0;je<8;je++)f[ue]=1/(l[Z[ue]]*le[pe]*le[je]*8),p[ue]=1/(c[Z[ue]]*le[pe]*le[je]*8),ue++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,H){H&&Ae(H),k=new Array,E=0,b=7,q(65496),q(65504),q(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),q(1),q(1),$(0),$(0),function(){q(65499),q(132),$(0);for(var Be=0;Be<64;Be++)$(l[Be]);$(1);for(var We=0;We<64;We++)$(c[We])}(),function(Be,We){q(65472),q(17),$(8),q(We),q(Be),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(P.width,P.height),function(){q(65476),q(418),$(0);for(var Be=0;Be<16;Be++)$(R[Be+1]);for(var We=0;We<=11;We++)$(ee[We]);$(16);for(var et=0;et<16;et++)$(ae[et+1]);for(var st=0;st<=161;st++)$(O[st]);$(1);for(var it=0;it<16;it++)$(U[it+1]);for(var yt=0;yt<=11;yt++)$(K[yt]);$(17);for(var Nt=0;Nt<16;Nt++)$(J[Nt+1]);for(var ft=0;ft<=161;ft++)$(xe[ft])}(),q(65498),q(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var re=0,ce=0,he=0;E=0,b=7,this.encode.displayName="_encode_";for(var ke,Ee,te,le,ue,pe,je,Oe,fe,G=P.data,qe=P.width,Re=P.height,Fe=4*qe,be=0;be<Re;){for(ke=0;ke<Fe;){for(ue=Fe*be+ke,je=-1,Oe=0,fe=0;fe<64;fe++)pe=ue+(Oe=fe>>3)*Fe+(je=4*(7&fe)),be+Oe>=Re&&(pe-=Fe*(be+1+Oe-Re)),ke+je>=Fe&&(pe-=ke+je-Fe+4),Ee=G[pe++],te=G[pe++],le=G[pe++],S[fe]=(oe[Ee]+oe[te+256>>0]+oe[le+512>>0]>>16)-128,L[fe]=(oe[Ee+768>>0]+oe[te+1024>>0]+oe[le+1280>>0]>>16)-128,M[fe]=(oe[Ee+1280>>0]+oe[te+1536>>0]+oe[le+1792>>0]>>16)-128;re=se(S,f,re,t,r),ce=se(L,p,ce,n,i),he=se(M,p,he,n,i),ke+=32}be+=8}if(b>=0){var Me=[];Me[1]=b+1,Me[0]=(1<<b+1)-1,Q(Me)}return q(65497),new Uint8Array(k)},e=e||50,function(){for(var P=String.fromCharCode,H=0;H<256;H++)Y[H]=P(H)}(),t=ye(R,ee),n=ye(U,K),r=ye(ae,O),i=ye(J,xe),function(){for(var P=1,H=2,re=1;re<=15;re++){for(var ce=P;ce<H;ce++)w[32767+ce]=re,m[32767+ce]=[],m[32767+ce][1]=re,m[32767+ce][0]=ce;for(var he=-(H-1);he<=-P;he++)w[32767+he]=re,m[32767+he]=[],m[32767+he][1]=re,m[32767+he][0]=H-1+he;P<<=1,H<<=1}}(),function(){for(var P=0;P<256;P++)oe[P]=19595*P,oe[P+256>>0]=38470*P,oe[P+512>>0]=7471*P+32768,oe[P+768>>0]=-11059*P,oe[P+1024>>0]=-21709*P,oe[P+1280>>0]=32768*P+8421375,oe[P+1536>>0]=-27439*P,oe[P+1792>>0]=-5329*P}(),Ae(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ba(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y_(e){function t(R){if(!R)throw Error("assert :P")}function n(R,ee,ae){for(var O=0;4>O;O++)if(R[ee+O]!=ae.charCodeAt(O))return!0;return!1}function r(R,ee,ae,O,U){for(var K=0;K<U;K++)R[ee+K]=ae[O+K]}function i(R,ee,ae,O){for(var U=0;U<O;U++)R[ee+U]=ae}function s(R){return new Int32Array(R)}function a(R,ee){for(var ae=[],O=0;O<R;O++)ae.push(new ee);return ae}function l(R,ee){var ae=[];return function O(U,K,J){for(var xe=J[K],ye=0;ye<xe&&(U.push(J.length>K+1?[]:new ee),!(J.length<K+1));ye++)O(U[ye],K+1,J)}(ae,0,R),ae}var c=function(){var R=this;function ee(d,v){for(var _=1<<v-1>>>0;d&_;)_>>>=1;return _?(d&_-1)+_:d}function ae(d,v,_,A,T){t(!(A%_));do d[v+(A-=_)]=T;while(0<A)}function O(d,v,_,A,T){if(t(2328>=T),512>=T)var F=s(512);else if((F=s(T))==null)return 0;return function(B,z,V,ne,we,Ie){var De,Ne,Ge=z,$e=1<<V,ve=s(16),_e=s(16);for(t(we!=0),t(ne!=null),t(B!=null),t(0<V),Ne=0;Ne<we;++Ne){if(15<ne[Ne])return 0;++ve[ne[Ne]]}if(ve[0]==we)return 0;for(_e[1]=0,De=1;15>De;++De){if(ve[De]>1<<De)return 0;_e[De+1]=_e[De]+ve[De]}for(Ne=0;Ne<we;++Ne)De=ne[Ne],0<ne[Ne]&&(Ie[_e[De]++]=Ne);if(_e[15]==1)return(ne=new U).g=0,ne.value=Ie[0],ae(B,Ge,1,$e,ne),$e;var Ve,Xe=-1,He=$e-1,lt=0,rt=1,gt=1,at=1<<V;for(Ne=0,De=1,we=2;De<=V;++De,we<<=1){if(rt+=gt<<=1,0>(gt-=ve[De]))return 0;for(;0<ve[De];--ve[De])(ne=new U).g=De,ne.value=Ie[Ne++],ae(B,Ge+lt,we,at,ne),lt=ee(lt,De)}for(De=V+1,we=2;15>=De;++De,we<<=1){if(rt+=gt<<=1,0>(gt-=ve[De]))return 0;for(;0<ve[De];--ve[De]){if(ne=new U,(lt&He)!=Xe){for(Ge+=at,Ve=1<<(Xe=De)-V;15>Xe&&!(0>=(Ve-=ve[Xe]));)++Xe,Ve<<=1;$e+=at=1<<(Ve=Xe-V),B[z+(Xe=lt&He)].g=Ve+V,B[z+Xe].value=Ge-z-Xe}ne.g=De-V,ne.value=Ie[Ne++],ae(B,Ge+(lt>>V),we,at,ne),lt=ee(lt,De)}}return rt!=2*_e[15]-1?0:$e}(d,v,_,A,T,F)}function U(){this.value=this.g=0}function K(){this.value=this.g=0}function J(){this.G=a(5,U),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Or,K)}function xe(d,v,_,A){t(d!=null),t(v!=null),t(2147483648>A),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=v,d.pa=_,d.Jd=v,d.Yc=_+A,d.Zc=4<=A?_+A-4+1:_,ke(d)}function ye(d,v){for(var _=0;0<v--;)_|=te(d,128)<<v;return _}function Q(d,v){var _=ye(d,v);return Ee(d)?-_:_}function $(d,v,_,A){var T,F=0;for(t(d!=null),t(v!=null),t(4294967288>A),d.Sb=A,d.Ra=0,d.u=0,d.h=0,4<A&&(A=4),T=0;T<A;++T)F+=v[_+T]<<8*T;d.Ra=F,d.bb=A,d.oa=v,d.pa=_}function q(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Ll-8>>>0,++d.bb,d.u-=8;re(d)&&(d.h=1,d.u=0)}function se(d,v){if(t(0<=v),!d.h&&v<=Al){var _=H(d)&ws[v];return d.u+=v,q(d),_}return d.h=1,d.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(d){return d.Ra>>>(d.u&Ll-1)>>>0}function re(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Ll}function ce(d,v){d.u=v,d.h=re(d)}function he(d){d.u>=Ao&&(t(d.u>=Ao),q(d))}function ke(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function Ee(d){return ye(d,1)}function te(d,v){var _=d.Ca;0>d.b&&ke(d);var A=d.b,T=_*v>>>8,F=(d.I>>>A>T)+0;for(F?(_-=T,d.I-=T+1<<A>>>0):_=T+1,A=_,T=0;256<=A;)T+=8,A>>=8;return A=7^T+Qr[A],d.b-=A,d.Ca=(_<<A)-1,F}function le(d,v,_){d[v+0]=_>>24&255,d[v+1]=_>>16&255,d[v+2]=_>>8&255,d[v+3]=_>>0&255}function ue(d,v){return d[v+0]<<0|d[v+1]<<8}function pe(d,v){return ue(d,v)|d[v+2]<<16}function je(d,v){return ue(d,v)|ue(d,v+2)<<16}function Oe(d,v){var _=1<<v;return t(d!=null),t(0<v),d.X=s(_),d.X==null?0:(d.Mb=32-v,d.Xa=v,1)}function fe(d,v){t(d!=null),t(v!=null),t(d.Xa==v.Xa),r(v.X,0,d.X,0,1<<v.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function qe(d,v,_,A){t(_!=null),t(A!=null);var T=_[0],F=A[0];return T==0&&(T=(d*F+v/2)/v),F==0&&(F=(v*T+d/2)/d),0>=T||0>=F?0:(_[0]=T,A[0]=F,1)}function Re(d,v){return d+(1<<v)-1>>>v}function Fe(d,v){return((4278255360&d)+(4278255360&v)>>>0&4278255360)+((16711935&d)+(16711935&v)>>>0&16711935)>>>0}function be(d,v){R[v]=function(_,A,T,F,B,z,V){var ne;for(ne=0;ne<B;++ne){var we=R[d](z[V+ne-1],T,F+ne);z[V+ne]=Fe(_[A+ne],we)}}}function Me(){this.ud=this.hd=this.jd=0}function Be(d,v){return((4278124286&(d^v))>>>1)+(d&v)>>>0}function We(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function et(d,v){return We(d+(d-v+.5>>1))}function st(d,v,_){return Math.abs(v-_)-Math.abs(d-_)}function it(d,v,_,A,T,F,B){for(A=F[B-1],_=0;_<T;++_)F[B+_]=A=Fe(d[v+_],A)}function yt(d,v,_,A,T){var F;for(F=0;F<_;++F){var B=d[v+F],z=B>>8&255,V=16711935&(V=(V=16711935&B)+((z<<16)+z));A[T+F]=(4278255360&B)+V>>>0}}function Nt(d,v){v.jd=d>>0&255,v.hd=d>>8&255,v.ud=d>>16&255}function ft(d,v,_,A,T,F){var B;for(B=0;B<A;++B){var z=v[_+B],V=z>>>8,ne=z,we=255&(we=(we=z>>>16)+((d.jd<<24>>24)*(V<<24>>24)>>>5));ne=255&(ne=(ne=ne+((d.hd<<24>>24)*(V<<24>>24)>>>5))+((d.ud<<24>>24)*(we<<24>>24)>>>5)),T[F+B]=(4278255360&z)+(we<<16)+ne}}function pt(d,v,_,A,T){R[v]=function(F,B,z,V,ne,we,Ie,De,Ne){for(V=Ie;V<De;++V)for(Ie=0;Ie<Ne;++Ie)ne[we++]=T(z[A(F[B++])])},R[d]=function(F,B,z,V,ne,we,Ie){var De=8>>F.b,Ne=F.Ea,Ge=F.K[0],$e=F.w;if(8>De)for(F=(1<<F.b)-1,$e=(1<<De)-1;B<z;++B){var ve,_e=0;for(ve=0;ve<Ne;++ve)ve&F||(_e=A(V[ne++])),we[Ie++]=T(Ge[_e&$e]),_e>>=De}else R["VP8LMapColor"+_](V,ne,Ge,$e,we,Ie,B,z,Ne)}}function tt(d,v,_,A,T){for(_=v+_;v<_;){var F=d[v++];A[T++]=F>>16&255,A[T++]=F>>8&255,A[T++]=F>>0&255}}function In(d,v,_,A,T){for(_=v+_;v<_;){var F=d[v++];A[T++]=F>>16&255,A[T++]=F>>8&255,A[T++]=F>>0&255,A[T++]=F>>24&255}}function zt(d,v,_,A,T){for(_=v+_;v<_;){var F=(B=d[v++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;A[T++]=F,A[T++]=B}}function Jr(d,v,_,A,T){for(_=v+_;v<_;){var F=(B=d[v++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;A[T++]=F,A[T++]=B}}function Qt(d,v,_,A,T){for(_=v+_;v<_;){var F=d[v++];A[T++]=F>>0&255,A[T++]=F>>8&255,A[T++]=F>>16&255}}function pn(d,v,_,A,T,F){if(F==0)for(_=v+_;v<_;)le(A,((F=d[v++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),T+=32;else r(A,T,d,v,_)}function oi(d,v){R[v][0]=R[d+"0"],R[v][1]=R[d+"1"],R[v][2]=R[d+"2"],R[v][3]=R[d+"3"],R[v][4]=R[d+"4"],R[v][5]=R[d+"5"],R[v][6]=R[d+"6"],R[v][7]=R[d+"7"],R[v][8]=R[d+"8"],R[v][9]=R[d+"9"],R[v][10]=R[d+"10"],R[v][11]=R[d+"11"],R[v][12]=R[d+"12"],R[v][13]=R[d+"13"],R[v][14]=R[d+"0"],R[v][15]=R[d+"0"]}function Zt(d){return d==Il||d==Dl||d==Ol||d==Vf}function sa(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function li(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new sa,this.f.kb=new Dn,this.sd=null}function bn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Gt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xt(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Bt(d,v){var _=d.T,A=v.ba.f.RGBA,T=A.eb,F=A.fb+d.ka*A.A,B=ji[v.ba.S],z=d.y,V=d.O,ne=d.f,we=d.N,Ie=d.ea,De=d.W,Ne=v.cc,Ge=v.dc,$e=v.Mc,ve=v.Nc,_e=d.ka,Ve=d.ka+d.T,Xe=d.U,He=Xe+1>>1;for(_e==0?B(z,V,null,null,ne,we,Ie,De,ne,we,Ie,De,T,F,null,null,Xe):(B(v.ec,v.fc,z,V,Ne,Ge,$e,ve,ne,we,Ie,De,T,F-A.A,T,F,Xe),++_);_e+2<Ve;_e+=2)Ne=ne,Ge=we,$e=Ie,ve=De,we+=d.Rc,De+=d.Rc,F+=2*A.A,B(z,(V+=2*d.fa)-d.fa,z,V,Ne,Ge,$e,ve,ne,we,Ie,De,T,F-A.A,T,F,Xe);return V+=d.fa,d.j+Ve<d.o?(r(v.ec,v.fc,z,V,Xe),r(v.cc,v.dc,ne,we,He),r(v.Mc,v.Nc,Ie,De,He),_--):1&Ve||B(z,V,null,null,ne,we,Ie,De,ne,we,Ie,De,T,F+A.A,null,null,Xe),_}function dr(d,v,_){var A=d.F,T=[d.J];if(A!=null){var F=d.U,B=v.ba.S,z=B==hd||B==Ol;v=v.ba.f.RGBA;var V=[0],ne=d.ka;V[0]=d.T,d.Kb&&(ne==0?--V[0]:(--ne,T[0]-=d.width),d.j+d.ka+d.T==d.o&&(V[0]=d.o-d.j-ne));var we=v.eb;ne=v.fb+ne*v.A,d=jn(A,T[0],d.width,F,V,we,ne+(z?0:3),v.A),t(_==V),d&&Zt(B)&&Ei(we,ne,z,F,V,v.A)}return 0}function rn(d){var v=d.ma,_=v.ba.S,A=11>_,T=_==Va||_==Do||_==hd||_==Hf||_==12||Zt(_);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Xc(v.Oa,d,T?11:12))return 0;if(T&&Zt(_)&&Je(),d.da)alert("todo:use_scaling");else{if(A){if(v.Ib=xt,d.Kb){if(_=d.U+1>>1,v.memory=s(d.U+2*_),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+d.U,v.Mc=v.cc,v.Nc=v.dc+_,v.Ib=Bt,Je()}}else alert("todo:EmitYUV");T&&(v.Jb=dr,A&&Le())}if(A&&!$p){for(d=0;256>d;++d)ha[d]=89858*(d-128)+Hs>>md,i1[d]=-22014*(d-128)+Hs,r1[d]=-45773*(d-128),n1[d]=113618*(d-128)+Hs>>md;for(d=au;d<Kf;++d)v=76283*(d-16)+Hs>>md,s1[d-au]=Pn(v,255),a1[d-au]=Pn(v+8>>4,15);$p=1}return 1}function nr(d){var v=d.ma,_=d.U,A=d.T;return t(!(1&d.ka)),0>=_||0>=A?0:(_=v.Ib(d,v),v.Jb!=null&&v.Jb(d,v,_),v.Dc+=_,1)}function Tr(d){d.ma.memory=null}function dt(d,v,_,A){return se(d,8)!=47?0:(v[0]=se(d,14)+1,_[0]=se(d,14)+1,A[0]=se(d,1),se(d,3)!=0?0:!d.h)}function Yn(d,v){if(4>d)return d+1;var _=d-2>>1;return(2+(1&d)<<_)+se(v,_)+1}function rr(d,v){return 120<v?v-120:1<=(_=((_=Jg[v-1])>>4)*d+(8-(15&_)))?_:1;var _}function kn(d,v,_){var A=H(_),T=d[v+=255&A].g-8;return 0<T&&(ce(_,_.u+8),A=H(_),v+=d[v].value,v+=A&(1<<T)-1),ce(_,_.u+d[v].g),d[v].value}function Ln(d,v,_){return _.g+=d.g,_.value+=d.value<<v>>>0,t(8>=_.g),d.g}function En(d,v,_){var A=d.xc;return t((v=A==0?0:d.vc[d.md*(_>>A)+(v>>A)])<d.Wb),d.Ya[v]}function Kn(d,v,_,A){var T=d.ab,F=d.c*v,B=d.C;v=B+v;var z=_,V=A;for(A=d.Ta,_=d.Ua;0<T--;){var ne=d.gc[T],we=B,Ie=v,De=z,Ne=V,Ge=(V=A,z=_,ne.Ea);switch(t(we<Ie),t(Ie<=ne.nc),ne.hc){case 2:fd(De,Ne,(Ie-we)*Ge,V,z);break;case 0:var $e=we,ve=Ie,_e=V,Ve=z,Xe=(at=ne).Ea;$e==0&&(qs(De,Ne,null,null,1,_e,Ve),it(De,Ne+1,0,0,Xe-1,_e,Ve+1),Ne+=Xe,Ve+=Xe,++$e);for(var He=1<<at.b,lt=He-1,rt=Re(Xe,at.b),gt=at.K,at=at.w+($e>>at.b)*rt;$e<ve;){var an=gt,fn=at,Ht=1;for(Wa(De,Ne,_e,Ve-Xe,1,_e,Ve);Ht<Xe;){var Ot=(Ht&~lt)+He;Ot>Xe&&(Ot=Xe),(0,la[an[fn++]>>8&15])(De,Ne+ +Ht,_e,Ve+Ht-Xe,Ot-Ht,_e,Ve+Ht),Ht=Ot}Ne+=Xe,Ve+=Xe,++$e&lt||(at+=rt)}Ie!=ne.nc&&r(V,z-Ge,V,z+(Ie-we-1)*Ge,Ge);break;case 1:for(Ge=De,ve=Ne,Xe=(De=ne.Ea)-(Ve=De&~(_e=(Ne=1<<ne.b)-1)),$e=Re(De,ne.b),He=ne.K,ne=ne.w+(we>>ne.b)*$e;we<Ie;){for(lt=He,rt=ne,gt=new Me,at=ve+Ve,an=ve+De;ve<at;)Nt(lt[rt++],gt),Lo(gt,Ge,ve,Ne,V,z),ve+=Ne,z+=Ne;ve<an&&(Nt(lt[rt++],gt),Lo(gt,Ge,ve,Xe,V,z),ve+=Xe,z+=Xe),++we&_e||(ne+=$e)}break;case 3:if(De==V&&Ne==z&&0<ne.b){for(ve=V,De=Ge=z+(Ie-we)*Ge-(Ve=(Ie-we)*Re(ne.Ea,ne.b)),Ne=V,_e=z,$e=[],Ve=(Xe=Ve)-1;0<=Ve;--Ve)$e[Ve]=Ne[_e+Ve];for(Ve=Xe-1;0<=Ve;--Ve)ve[De+Ve]=$e[Ve];Vi(ne,we,Ie,V,Ge,V,z)}else Vi(ne,we,Ie,De,Ne,V,z)}z=A,V=_}V!=_&&r(A,_,z,V,F)}function Bi(d,v){var _=d.V,A=d.Ba+d.c*d.C,T=v-d.C;if(t(v<=d.l.o),t(16>=T),0<T){var F=d.l,B=d.Ta,z=d.Ua,V=F.width;if(Kn(d,T,_,A),T=z=[z],t((_=d.C)<(A=v)),t(F.v<F.va),A>F.o&&(A=F.o),_<F.j){var ne=F.j-_;_=F.j,T[0]+=ne*V}if(_>=A?_=0:(T[0]+=4*F.v,F.ka=_-F.j,F.U=F.va-F.v,F.T=A-_,_=1),_){if(z=z[0],11>(_=d.ca).S){var we=_.f.RGBA,Ie=(A=_.S,T=F.U,F=F.T,ne=we.eb,we.A),De=F;for(we=we.fb+d.Ma*we.A;0<De--;){var Ne=B,Ge=z,$e=T,ve=ne,_e=we;switch(A){case tu:fi(Ne,Ge,$e,ve,_e);break;case Va:Zr(Ne,Ge,$e,ve,_e);break;case Il:Zr(Ne,Ge,$e,ve,_e),Ei(ve,_e,0,$e,1,0);break;case Ga:hi(Ne,Ge,$e,ve,_e);break;case Do:pn(Ne,Ge,$e,ve,_e,1);break;case Dl:pn(Ne,Ge,$e,ve,_e,1),Ei(ve,_e,0,$e,1,0);break;case hd:pn(Ne,Ge,$e,ve,_e,0);break;case Ol:pn(Ne,Ge,$e,ve,_e,0),Ei(ve,_e,1,$e,1,0);break;case Hf:Ha(Ne,Ge,$e,ve,_e);break;case Vf:Ha(Ne,Ge,$e,ve,_e),gn(ve,_e,$e,1,0);break;case Ip:ca(Ne,Ge,$e,ve,_e);break;default:t(0)}z+=V,we+=Ie}d.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=_.height)}}d.C=v,t(d.C<=d.i)}function ki(d){var v;if(0<d.ua)return 0;for(v=0;v<d.Wb;++v){var _=d.Ya[v].G,A=d.Ya[v].H;if(0<_[1][A[1]+0].g||0<_[2][A[2]+0].g||0<_[3][A[3]+0].g)return 0}return 1}function ps(d,v,_,A,T,F){if(d.Z!=0){var B=d.qd,z=d.rd;for(t(Ji[d.Z]!=null);v<_;++v)Ji[d.Z](B,z,A,T,A,T,F),B=A,z=T,T+=F;d.qd=B,d.rd=z}}function ms(d,v){var _=d.l.ma,A=_.Z==0||_.Z==1?d.l.j:d.C;if(A=d.C<A?A:d.C,t(v<=d.l.o),v>A){var T=d.l.width,F=_.ca,B=_.tb+T*A,z=d.V,V=d.Ba+d.c*A,ne=d.gc;t(d.ab==1),t(ne[0].hc==3),oa(ne[0],A,v,z,V,F,B),ps(_,A,v,F,B,T)}d.C=d.Ma=v}function gs(d,v,_,A,T,F,B){var z=d.$/A,V=d.$%A,ne=d.m,we=d.s,Ie=_+d.$,De=Ie;T=_+A*T;var Ne=_+A*F,Ge=280+we.ua,$e=d.Pb?z:16777216,ve=0<we.ua?we.Wa:null,_e=we.wc,Ve=Ie<Ne?En(we,V,z):null;t(d.C<F),t(Ne<=T);var Xe=!1;e:for(;;){for(;Xe||Ie<Ne;){var He=0;if(z>=$e){var lt=Ie-_;t(($e=d).Pb),$e.wd=$e.m,$e.xd=lt,0<$e.s.ua&&fe($e.s.Wa,$e.s.vb),$e=z+Mp}if(V&_e||(Ve=En(we,V,z)),t(Ve!=null),Ve.Qb&&(v[Ie]=Ve.qb,Xe=!0),!Xe)if(he(ne),Ve.jc){He=ne,lt=v;var rt=Ie,gt=Ve.pd[H(He)&Or-1];t(Ve.jc),256>gt.g?(ce(He,He.u+gt.g),lt[rt]=gt.value,He=0):(ce(He,He.u+gt.g-256),t(256<=gt.value),He=gt.value),He==0&&(Xe=!0)}else He=kn(Ve.G[0],Ve.H[0],ne);if(ne.h)break;if(Xe||256>He){if(!Xe)if(Ve.nd)v[Ie]=(Ve.qb|He<<8)>>>0;else{if(he(ne),Xe=kn(Ve.G[1],Ve.H[1],ne),he(ne),lt=kn(Ve.G[2],Ve.H[2],ne),rt=kn(Ve.G[3],Ve.H[3],ne),ne.h)break;v[Ie]=(rt<<24|Xe<<16|He<<8|lt)>>>0}if(Xe=!1,++Ie,++V>=A&&(V=0,++z,B!=null&&z<=F&&!(z%16)&&B(d,z),ve!=null))for(;De<Ie;)He=v[De++],ve.X[(506832829*He&4294967295)>>>ve.Mb]=He}else if(280>He){if(He=Yn(He-256,ne),lt=kn(Ve.G[4],Ve.H[4],ne),he(ne),lt=rr(A,lt=Yn(lt,ne)),ne.h)break;if(Ie-_<lt||T-Ie<He)break e;for(rt=0;rt<He;++rt)v[Ie+rt]=v[Ie+rt-lt];for(Ie+=He,V+=He;V>=A;)V-=A,++z,B!=null&&z<=F&&!(z%16)&&B(d,z);if(t(Ie<=T),V&_e&&(Ve=En(we,V,z)),ve!=null)for(;De<Ie;)He=v[De++],ve.X[(506832829*He&4294967295)>>>ve.Mb]=He}else{if(!(He<Ge))break e;for(Xe=He-280,t(ve!=null);De<Ie;)He=v[De++],ve.X[(506832829*He&4294967295)>>>ve.Mb]=He;He=Ie,t(!(Xe>>>(lt=ve).Xa)),v[He]=lt.X[Xe],Xe=!0}Xe||t(ne.h==re(ne))}if(d.Pb&&ne.h&&Ie<T)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&fe(d.s.vb,d.s.Wa);else{if(ne.h)break e;B!=null&&B(d,z>F?F:z),d.a=0,d.$=Ie-_}return 1}return d.a=3,0}function vs(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var v=d.Wa;v!=null&&(v.X=null),d.vb=null,t(d!=null)}function Ui(){var d=new Nl;return d==null?null:(d.a=0,d.xb=iu,oi("Predictor","VP8LPredictors"),oi("Predictor","VP8LPredictors_C"),oi("PredictorAdd","VP8LPredictorsAdd"),oi("PredictorAdd","VP8LPredictorsAdd_C"),fd=yt,Lo=ft,fi=tt,Zr=In,Ha=zt,ca=Jr,hi=Qt,R.VP8LMapColor32b=Pl,R.VP8LMapColor8b=di,d)}function Rs(d,v,_,A,T){var F=1,B=[d],z=[v],V=A.m,ne=A.s,we=null,Ie=0;e:for(;;){if(_)for(;F&&se(V,1);){var De=B,Ne=z,Ge=A,$e=1,ve=Ge.m,_e=Ge.gc[Ge.ab],Ve=se(ve,2);if(Ge.Oc&1<<Ve)F=0;else{switch(Ge.Oc|=1<<Ve,_e.hc=Ve,_e.Ea=De[0],_e.nc=Ne[0],_e.K=[null],++Ge.ab,t(4>=Ge.ab),Ve){case 0:case 1:_e.b=se(ve,3)+2,$e=Rs(Re(_e.Ea,_e.b),Re(_e.nc,_e.b),0,Ge,_e.K),_e.K=_e.K[0];break;case 3:var Xe,He=se(ve,8)+1,lt=16<He?0:4<He?1:2<He?2:3;if(De[0]=Re(_e.Ea,lt),_e.b=lt,Xe=$e=Rs(He,1,0,Ge,_e.K)){var rt,gt=He,at=_e,an=1<<(8>>at.b),fn=s(an);if(fn==null)Xe=0;else{var Ht=at.K[0],Ot=at.w;for(fn[0]=at.K[0][0],rt=1;rt<1*gt;++rt)fn[rt]=Fe(Ht[Ot+rt],fn[rt-1]);for(;rt<4*an;++rt)fn[rt]=0;at.K[0]=null,at.K[0]=fn,Xe=1}}$e=Xe;break;case 2:break;default:t(0)}F=$e}}if(B=B[0],z=z[0],F&&se(V,1)&&!(F=1<=(Ie=se(V,4))&&11>=Ie)){A.a=3;break e}var yn;if(yn=F)t:{var wn,It,hr,ti=A,Kt=B,Ur=z,hn=Ie,er=_,ni=ti.m,sr=ti.s,Un=[null],zr=1,Cn=0,Xi=Xg[hn];n:for(;;){if(er&&se(ni,1)){var Lr=se(ni,3)+2,pa=Re(Kt,Lr),Oo=Re(Ur,Lr),Ka=pa*Oo;if(!Rs(pa,Oo,0,ti,Un))break n;for(Un=Un[0],sr.xc=Lr,wn=0;wn<Ka;++wn){var Ja=Un[wn]>>8&65535;Un[wn]=Ja,Ja>=zr&&(zr=Ja+1)}}if(ni.h)break n;for(It=0;5>It;++It){var An=Op[It];!It&&0<hn&&(An+=1<<hn),Cn<An&&(Cn=An)}var vd=a(zr*Xi,U),Up=zr,zp=a(Up,J);if(zp==null)var Xa=null;else t(65536>=Up),Xa=zp;var ou=s(Cn);if(Xa==null||ou==null||vd==null){ti.a=1;break n}var yd=vd;for(wn=hr=0;wn<zr;++wn){var Ai=Xa[wn],Mo=Ai.G,Bl=Ai.H,qp=0,wd=1,Jf=0;for(It=0;5>It;++It){An=Op[It],Mo[It]=yd,Bl[It]=hr,!It&&0<hn&&(An+=1<<hn);i:{var Ul,Xf=An,zl=ti,ql=ou,Wp=yd,Hp=hr,Wl=0,Qa=zl.m,Vp=se(Qa,1);if(i(ql,0,0,Xf),Vp){var Gp=se(Qa,1)+1,c1=se(Qa,1),Qf=se(Qa,c1==0?1:8);ql[Qf]=1,Gp==2&&(ql[Qf=se(Qa,8)]=1);var xd=1}else{var bd=s(19),Zf=se(Qa,4)+4;if(19<Zf){zl.a=3;var Hl=0;break i}for(Ul=0;Ul<Zf;++Ul)bd[Br[Ul]]=se(Qa,3);var eh=void 0,Ro=void 0,$t=zl,u1=bd,_d=Xf,Vl=ql,Sd=0,Za=$t.m,Yp=8,Li=a(128,U);r:for(;O(Li,0,7,u1,19);){if(se(Za,1)){var d1=2+2*se(Za,3);if((eh=2+se(Za,d1))>_d)break r}else eh=_d;for(Ro=0;Ro<_d&&eh--;){he(Za);var lu=Li[0+(127&H(Za))];ce(Za,Za.u+lu.g);var eo=lu.value;if(16>eo)Vl[Ro++]=eo,eo!=0&&(Yp=eo);else{var Kp=eo==16,th=eo-16,Pi=Kg[th],ma=se(Za,Dp[th])+Pi;if(Ro+ma>_d)break r;for(var nh=Kp?Yp:0;0<ma--;)Vl[Ro++]=nh}}Sd=1;break r}Sd||($t.a=3),xd=Sd}(xd=xd&&!Qa.h)&&(Wl=O(Wp,Hp,8,ql,Xf)),xd&&Wl!=0?Hl=Wl:(zl.a=3,Hl=0)}if(Hl==0)break n;if(wd&&wr[It]==1&&(wd=yd[hr].g==0),qp+=yd[hr].g,hr+=Hl,3>=It){var Gl,Yl=ou[0];for(Gl=1;Gl<An;++Gl)ou[Gl]>Yl&&(Yl=ou[Gl]);Jf+=Yl}}if(Ai.nd=wd,Ai.Qb=0,wd&&(Ai.qb=(Mo[3][Bl[3]+0].value<<24|Mo[1][Bl[1]+0].value<<16|Mo[2][Bl[2]+0].value)>>>0,qp==0&&256>Mo[0][Bl[0]+0].value&&(Ai.Qb=1,Ai.qb+=Mo[0][Bl[0]+0].value<<8)),Ai.jc=!Ai.Qb&&6>Jf,Ai.jc){var cu,Ns=Ai;for(cu=0;cu<Or;++cu){var ga=cu,Gs=Ns.pd[ga],Kl=Ns.G[0][Ns.H[0]+ga];256<=Kl.value?(Gs.g=Kl.g+256,Gs.value=Kl.value):(Gs.g=0,Gs.value=0,ga>>=Ln(Kl,8,Gs),ga>>=Ln(Ns.G[1][Ns.H[1]+ga],16,Gs),ga>>=Ln(Ns.G[2][Ns.H[2]+ga],0,Gs),Ln(Ns.G[3][Ns.H[3]+ga],24,Gs))}}}sr.vc=Un,sr.Wb=zr,sr.Ya=Xa,sr.yc=vd,yn=1;break t}yn=0}if(!(F=yn)){A.a=3;break e}if(0<Ie){if(ne.ua=1<<Ie,!Oe(ne.Wa,Ie)){A.a=1,F=0;break e}}else ne.ua=0;var Ys=A,Jp=B,to=z,Nd=Ys.s,kd=Nd.xc;if(Ys.c=Jp,Ys.i=to,Nd.md=Re(Jp,kd),Nd.wc=kd==0?-1:(1<<kd)-1,_){A.xb=Zg;break e}if((we=s(B*z))==null){A.a=1,F=0;break e}F=(F=gs(A,we,0,B,z,z,null))&&!V.h;break e}return F?(T!=null?T[0]=we:(t(we==null),t(_)),A.$=0,_||vs(ne)):vs(ne),F}function So(d,v){var _=d.c*d.i,A=_+v+16*v;return t(d.c<=v),d.V=s(A),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+_+v,1)}function ll(d,v){var _=d.C,A=v-_,T=d.V,F=d.Ba+d.c*_;for(t(v<=d.l.o);0<A;){var B=16<A?16:A,z=d.l.ma,V=d.l.width,ne=V*B,we=z.ca,Ie=z.tb+V*_,De=d.Ta,Ne=d.Ua;Kn(d,B,T,F),ir(De,Ne,we,Ie,ne),ps(z,_,_+B,we,Ie,V),A-=B,T+=B*d.c,_+=B}t(_==v),d.C=d.Ma=v}function cl(){this.ub=this.yd=this.td=this.Rb=0}function ul(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function aa(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Yu(){this.Yb=function(){var d=[];return function v(_,A,T){for(var F=T[A],B=0;B<F&&(_.push(T.length>A+1?[]:0),!(T.length<A+1));B++)v(_[B],A+1,T)}(d,0,[3,11]),d}()}function dl(){this.jb=s(3),this.Wc=l([4,8],Yu),this.Xc=l([4,17],Yu)}function Df(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function fl(){this.ld=this.La=this.dd=this.tc=0}function Ku(){this.Na=this.la=0}function Ju(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xu(){this.uc=this.M=this.Nb=0,this.wa=Array(new fl),this.Y=0,this.ya=Array(new hl),this.aa=0,this.l=new pl}function Qu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Of(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new cl,this.Kc=new ul,this.ed=new Df,this.Qa=new aa,this.Ic=this.$c=this.Aa=0,this.D=new Xu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Ae),this.ia=0,this.pb=a(4,Ju),this.Pa=new dl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qu),this.Hd=0,this.rb=Array(new Ku),this.sb=0,this.wa=Array(new fl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hl),this.L=this.aa=0,this.gd=l([4,2],fl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function pl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mf(){var d=new Of;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,da||(da=ml)),d}function Jn(d,v,_){return d.a==0&&(d.a=v,d.sc=_,d.cb=0),0}function $c(d,v,_){return 3<=_&&d[v+0]==157&&d[v+1]==1&&d[v+2]==42}function Bc(d,v){if(d==null)return 0;if(d.a=0,d.sc="OK",v==null)return Jn(d,2,"null VP8Io passed to VP8GetHeaders()");var _=v.data,A=v.w,T=v.ha;if(4>T)return Jn(d,7,"Truncated header.");var F=_[A+0]|_[A+1]<<8|_[A+2]<<16,B=d.Od;if(B.Rb=!(1&F),B.td=F>>1&7,B.yd=F>>4&1,B.ub=F>>5,3<B.td)return Jn(d,3,"Incorrect keyframe parameters.");if(!B.yd)return Jn(d,4,"Frame not displayable.");A+=3,T-=3;var z=d.Kc;if(B.Rb){if(7>T)return Jn(d,7,"cannot parse picture header");if(!$c(_,A,T))return Jn(d,3,"Bad code word");z.c=16383&(_[A+4]<<8|_[A+3]),z.Td=_[A+4]>>6,z.i=16383&(_[A+6]<<8|_[A+5]),z.Ud=_[A+6]>>6,A+=7,T-=7,d.za=z.c+15>>4,d.Ub=z.i+15>>4,v.width=z.c,v.height=z.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((F=d.Pa).jb,0,255,F.jb.length),t((F=d.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(B.ub>T)return Jn(d,7,"bad partition length");xe(F=d.m,_,A,B.ub),A+=B.ub,T-=B.ub,B.Rb&&(z.Ld=Ee(F),z.Kd=Ee(F)),z=d.Qa;var V,ne=d.Pa;if(t(F!=null),t(z!=null),z.Cb=Ee(F),z.Cb){if(z.Bb=Ee(F),Ee(F)){for(z.Fb=Ee(F),V=0;4>V;++V)z.Zb[V]=Ee(F)?Q(F,7):0;for(V=0;4>V;++V)z.Lb[V]=Ee(F)?Q(F,6):0}if(z.Bb)for(V=0;3>V;++V)ne.jb[V]=Ee(F)?ye(F,8):255}else z.Bb=0;if(F.Ka)return Jn(d,3,"cannot parse segment header");if((z=d.ed).zd=Ee(F),z.Tb=ye(F,6),z.wb=ye(F,3),z.Pc=Ee(F),z.Pc&&Ee(F)){for(ne=0;4>ne;++ne)Ee(F)&&(z.vd[ne]=Q(F,6));for(ne=0;4>ne;++ne)Ee(F)&&(z.od[ne]=Q(F,6))}if(d.L=z.Tb==0?0:z.zd?1:2,F.Ka)return Jn(d,3,"cannot parse filter header");var we=T;if(T=V=A,A=V+we,z=we,d.Xb=(1<<ye(d.m,2))-1,we<3*(ne=d.Xb))_=7;else{for(V+=3*ne,z-=3*ne,we=0;we<ne;++we){var Ie=_[T+0]|_[T+1]<<8|_[T+2]<<16;Ie>z&&(Ie=z),xe(d.Jc[+we],_,V,Ie),V+=Ie,z-=Ie,T+=3}xe(d.Jc[+ne],_,V,z),_=V<A?0:5}if(_!=0)return Jn(d,_,"cannot parse partitions");for(_=ye(V=d.m,7),T=Ee(V)?Q(V,4):0,A=Ee(V)?Q(V,4):0,z=Ee(V)?Q(V,4):0,ne=Ee(V)?Q(V,4):0,V=Ee(V)?Q(V,4):0,we=d.Qa,Ie=0;4>Ie;++Ie){if(we.Cb){var De=we.Zb[Ie];we.Fb||(De+=_)}else{if(0<Ie){d.pb[Ie]=d.pb[0];continue}De=_}var Ne=d.pb[Ie];Ne.Sc[0]=Gf[Pn(De+T,127)],Ne.Sc[1]=nu[Pn(De+0,127)],Ne.Eb[0]=2*Gf[Pn(De+A,127)],Ne.Eb[1]=101581*nu[Pn(De+z,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=Gf[Pn(De+ne,117)],Ne.Qc[1]=nu[Pn(De+V,127)],Ne.lc=De+V}if(!B.Rb)return Jn(d,4,"Not a key frame.");for(Ee(F),B=d.Pa,_=0;4>_;++_){for(T=0;8>T;++T)for(A=0;3>A;++A)for(z=0;11>z;++z)ne=te(F,Fl[_][T][A][z])?ye(F,8):ru[_][T][A][z],B.Wc[_][T].Yb[A][z]=ne;for(T=0;17>T;++T)B.Xc[_][T]=B.Wc[_][Qg[T]]}return d.kc=Ee(F),d.kc&&(d.Bd=ye(F,8)),d.cb=1}function ml(d,v,_,A,T,F,B){var z=v[T].Yb[_];for(_=0;16>T;++T){if(!te(d,z[_+0]))return T;for(;!te(d,z[_+1]);)if(z=v[++T].Yb[0],_=0,T==16)return 16;var V=v[T+1].Yb;if(te(d,z[_+2])){var ne=d,we=0;if(te(ne,(De=z)[(Ie=_)+3]))if(te(ne,De[Ie+6])){for(z=0,Ie=2*(we=te(ne,De[Ie+8]))+(De=te(ne,De[Ie+9+we])),we=0,De=Yf[Ie];De[z];++z)we+=we+te(ne,De[z]);we+=3+(8<<Ie)}else te(ne,De[Ie+7])?(we=7+2*te(ne,165),we+=te(ne,145)):we=5+te(ne,159);else we=te(ne,De[Ie+4])?3+te(ne,De[Ie+5]):2;z=V[2]}else we=1,z=V[1];V=B+Ml[T],0>(ne=d).b&&ke(ne);var Ie,De=ne.b,Ne=(Ie=ne.Ca>>1)-(ne.I>>De)>>31;--ne.b,ne.Ca+=Ne,ne.Ca|=1,ne.I-=(Ie+1&Ne)<<De,F[V]=((we^Ne)-Ne)*A[(0<T)+0]}return 16}function Uc(d){var v=d.rb[d.sb-1];v.la=0,v.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Zu(d,v){if(d==null)return 0;if(v==null)return Jn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Bc(d,v))return 0;if(t(d.cb),v.ac==null||v.ac(v)){v.ob&&(d.L=0);var _=gd[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=v.v-_>>4,d.zb=v.j-_>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=v.o+15+_>>4,d.Hb=v.va+15+_>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var A=d.ed;for(_=0;4>_;++_){var T;if(d.Qa.Cb){var F=d.Qa.Lb[_];d.Qa.Fb||(F+=A.Tb)}else F=A.Tb;for(T=0;1>=T;++T){var B=d.gd[_][T],z=F;if(A.Pc&&(z+=A.vd[0],T&&(z+=A.od[0])),0<(z=0>z?0:63<z?63:z)){var V=z;0<A.wb&&(V=4<A.wb?V>>2:V>>1)>9-A.wb&&(V=9-A.wb),1>V&&(V=1),B.dd=V,B.tc=2*z+V,B.ld=40<=z?2:15<=z?1:0}else B.tc=0;B.La=T}}}_=0}else Jn(d,6,"Frame setup failed"),_=d.a;if(_=_==0){if(_){d.$c=0,0<d.Aa||(d.Ic=l1);e:{_=d.Ic,A=4*(V=d.za);var ne=32*V,we=V+1,Ie=0<d.L?V*(0<d.Aa?2:1):0,De=(d.Aa==2?2:1)*V;if((B=A+832+(T=3*(16*_+gd[d.L])/2*ne)+(F=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=B)_=0;else{if(B>d.Vb){if(d.Vb=0,d.Ec=s(B),d.Fc=0,d.Ec==null){_=Jn(d,1,"no memory during frame initialization.");break e}d.Vb=B}B=d.Ec,z=d.Fc,d.Ac=B,d.Bc=z,z+=A,d.Gd=a(ne,Qu),d.Hd=0,d.rb=a(we+1,Ku),d.sb=1,d.wa=Ie?a(Ie,fl):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=V),t(!0),d.oc=B,d.pc=z,z+=832,d.ya=a(De,hl),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=V),d.R=16*V,d.B=8*V,V=(ne=gd[d.L])*d.R,ne=ne/2*d.B,d.sa=B,d.ta=z+V,d.qa=d.sa,d.ra=d.ta+16*_*d.R+ne,d.Ha=d.qa,d.Ia=d.ra+8*_*d.B+ne,d.$c=0,z+=T,d.mb=F?B:null,d.nb=F?z:null,t(z+F<=d.Fc+d.Vb),Uc(d),i(d.Ac,d.Bc,0,A),_=1}}if(_){if(v.ka=0,v.y=d.sa,v.O=d.ta,v.f=d.qa,v.N=d.ra,v.ea=d.Ha,v.Vd=d.Ia,v.fa=d.R,v.Rc=d.B,v.F=null,v.J=0,!Zc){for(_=-255;255>=_;++_)yr[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Yi[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)Ki[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)ua[255+_]=0>_?0:255<_?255:_;Zc=1}Se=Wc,ze=qc,ut=ed,bt=td,Mt=vl,Te=zc,Mn=bl,dn=Ua,Po=ud,To=_l,Ar=cd,xs=Co,Io=Ir,bs=dd,Ws=fr,_s=zi,en=Xr,Gi=ld,Ss[0]=Bs,Ss[1]=nd,Ss[2]=$f,Ss[3]=Bf,Ss[4]=sd,Ss[5]=wl,Ss[6]=yl,Ss[7]=Vc,Ss[8]=zf,Ss[9]=Uf,Ya[0]=Hc,Ya[1]=Rf,Ya[2]=$s,Ya[3]=ko,Ya[4]=$r,Ya[5]=Ff,Ya[6]=id,fa[0]=Ba,fa[1]=rd,fa[2]=qf,fa[3]=mn,fa[4]=jo,fa[5]=Wf,fa[6]=Gc,_=1}else _=0}_&&(_=function(Ne,Ge){for(Ne.M=0;Ne.M<Ne.Va;++Ne.M){var $e,ve=Ne.Jc[Ne.M&Ne.Xb],_e=Ne.m,Ve=Ne;for($e=0;$e<Ve.za;++$e){var Xe=_e,He=Ve,lt=He.Ac,rt=He.Bc+4*$e,gt=He.zc,at=He.ya[He.aa+$e];if(He.Qa.Bb?at.$b=te(Xe,He.Pa.jb[0])?2+te(Xe,He.Pa.jb[2]):te(Xe,He.Pa.jb[1]):at.$b=0,He.kc&&(at.Ad=te(Xe,He.Bd)),at.Za=!te(Xe,145)+0,at.Za){var an=at.Ob,fn=0;for(He=0;4>He;++He){var Ht,Ot=gt[0+He];for(Ht=0;4>Ht;++Ht){Ot=pd[lt[rt+Ht]][Ot];for(var yn=Rl[te(Xe,Ot[0])];0<yn;)yn=Rl[2*yn+te(Xe,Ot[yn])];Ot=-yn,lt[rt+Ht]=Ot}r(an,fn,lt,rt,4),fn+=4,gt[0+He]=Ot}}else Ot=te(Xe,156)?te(Xe,128)?1:3:te(Xe,163)?2:0,at.Ob[0]=Ot,i(lt,rt,Ot,4),i(gt,0,Ot,4);at.Dd=te(Xe,142)?te(Xe,114)?te(Xe,183)?1:3:2:0}if(Ve.m.Ka)return Jn(Ne,7,"Premature end-of-partition0 encountered.");for(;Ne.ja<Ne.za;++Ne.ja){if(Ve=ve,Xe=(_e=Ne).rb[_e.sb-1],lt=_e.rb[_e.sb+_e.ja],$e=_e.ya[_e.aa+_e.ja],rt=_e.kc?$e.Ad:0)Xe.la=lt.la=0,$e.Za||(Xe.Na=lt.Na=0),$e.Hc=0,$e.Gc=0,$e.ia=0;else{var wn,It;if(Xe=lt,lt=Ve,rt=_e.Pa.Xc,gt=_e.ya[_e.aa+_e.ja],at=_e.pb[gt.$b],He=gt.ad,an=0,fn=_e.rb[_e.sb-1],Ot=Ht=0,i(He,an,0,384),gt.Za)var hr=0,ti=rt[3];else{yn=s(16);var Kt=Xe.Na+fn.Na;if(Kt=da(lt,rt[1],Kt,at.Eb,0,yn,0),Xe.Na=fn.Na=(0<Kt)+0,1<Kt)Se(yn,0,He,an);else{var Ur=yn[0]+3>>3;for(yn=0;256>yn;yn+=16)He[an+yn]=Ur}hr=1,ti=rt[0]}var hn=15&Xe.la,er=15&fn.la;for(yn=0;4>yn;++yn){var ni=1&er;for(Ur=It=0;4>Ur;++Ur)hn=hn>>1|(ni=(Kt=da(lt,ti,Kt=ni+(1&hn),at.Sc,hr,He,an))>hr)<<7,It=It<<2|(3<Kt?3:1<Kt?2:He[an+0]!=0),an+=16;hn>>=4,er=er>>1|ni<<7,Ht=(Ht<<8|It)>>>0}for(ti=hn,hr=er>>4,wn=0;4>wn;wn+=2){for(It=0,hn=Xe.la>>4+wn,er=fn.la>>4+wn,yn=0;2>yn;++yn){for(ni=1&er,Ur=0;2>Ur;++Ur)Kt=ni+(1&hn),hn=hn>>1|(ni=0<(Kt=da(lt,rt[2],Kt,at.Qc,0,He,an)))<<3,It=It<<2|(3<Kt?3:1<Kt?2:He[an+0]!=0),an+=16;hn>>=2,er=er>>1|ni<<5}Ot|=It<<4*wn,ti|=hn<<4<<wn,hr|=(240&er)<<wn}Xe.la=ti,fn.la=hr,gt.Hc=Ht,gt.Gc=Ot,gt.ia=43690&Ot?0:at.ia,rt=!(Ht|Ot)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[$e.$b][$e.Za],_e.wa[_e.Y+_e.ja].La|=!rt),Ve.Ka)return Jn(Ne,7,"Premature end-of-file encountered.")}if(Uc(Ne),_e=Ge,Ve=1,$e=(ve=Ne).D,Xe=0<ve.L&&ve.M>=ve.zb&&ve.M<=ve.Va,ve.Aa==0)e:{if($e.M=ve.M,$e.uc=Xe,El(ve,$e),Ve=1,$e=(It=ve.D).Nb,Xe=(Ot=gd[ve.L])*ve.R,lt=Ot/2*ve.B,yn=16*$e*ve.R,Ur=8*$e*ve.B,rt=ve.sa,gt=ve.ta-Xe+yn,at=ve.qa,He=ve.ra-lt+Ur,an=ve.Ha,fn=ve.Ia-lt+Ur,er=(hn=It.M)==0,Ht=hn>=ve.Va-1,ve.Aa==2&&El(ve,It),It.uc)for(ni=(Kt=ve).D.M,t(Kt.D.uc),It=Kt.yb;It<Kt.Hb;++It){hr=It,ti=ni;var sr=(Un=(An=Kt).D).Nb;wn=An.R;var Un=Un.wa[Un.Y+hr],zr=An.sa,Cn=An.ta+16*sr*wn+16*hr,Xi=Un.dd,Lr=Un.tc;if(Lr!=0)if(t(3<=Lr),An.L==1)0<hr&&_s(zr,Cn,wn,Lr+4),Un.La&&Gi(zr,Cn,wn,Lr),0<ti&&Ws(zr,Cn,wn,Lr+4),Un.La&&en(zr,Cn,wn,Lr);else{var pa=An.B,Oo=An.qa,Ka=An.ra+8*sr*pa+8*hr,Ja=An.Ha,An=An.Ia+8*sr*pa+8*hr;sr=Un.ld,0<hr&&(dn(zr,Cn,wn,Lr+4,Xi,sr),To(Oo,Ka,Ja,An,pa,Lr+4,Xi,sr)),Un.La&&(xs(zr,Cn,wn,Lr,Xi,sr),bs(Oo,Ka,Ja,An,pa,Lr,Xi,sr)),0<ti&&(Mn(zr,Cn,wn,Lr+4,Xi,sr),Po(Oo,Ka,Ja,An,pa,Lr+4,Xi,sr)),Un.La&&(Ar(zr,Cn,wn,Lr,Xi,sr),Io(Oo,Ka,Ja,An,pa,Lr,Xi,sr))}}if(ve.ia&&alert("todo:DitherRow"),_e.put!=null){if(It=16*hn,hn=16*(hn+1),er?(_e.y=ve.sa,_e.O=ve.ta+yn,_e.f=ve.qa,_e.N=ve.ra+Ur,_e.ea=ve.Ha,_e.W=ve.Ia+Ur):(It-=Ot,_e.y=rt,_e.O=gt,_e.f=at,_e.N=He,_e.ea=an,_e.W=fn),Ht||(hn-=Ot),hn>_e.o&&(hn=_e.o),_e.F=null,_e.J=null,ve.Fa!=null&&0<ve.Fa.length&&It<hn&&(_e.J=Jc(ve,_e,It,hn-It),_e.F=ve.mb,_e.F==null&&_e.F.length==0)){Ve=Jn(ve,3,"Could not decode alpha data.");break e}It<_e.j&&(Ot=_e.j-It,It=_e.j,t(!(1&Ot)),_e.O+=ve.R*Ot,_e.N+=ve.B*(Ot>>1),_e.W+=ve.B*(Ot>>1),_e.F!=null&&(_e.J+=_e.width*Ot)),It<hn&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=It-_e.j,_e.U=_e.va-_e.v,_e.T=hn-It,Ve=_e.put(_e))}$e+1!=ve.Ic||Ht||(r(ve.sa,ve.ta-Xe,rt,gt+16*ve.R,Xe),r(ve.qa,ve.ra-lt,at,He+8*ve.B,lt),r(ve.Ha,ve.Ia-lt,an,fn+8*ve.B,lt))}if(!Ve)return Jn(Ne,6,"Output aborted.")}return 1}(d,v)),v.bc!=null&&v.bc(v),_&=1}return _?(d.cb=0,_):0}function ci(d,v,_,A,T){T=d[v+_+32*A]+(T>>3),d[v+_+32*A]=-256&T?0>T?0:255:T}function No(d,v,_,A,T,F){ci(d,v,0,_,A+T),ci(d,v,1,_,A+F),ci(d,v,2,_,A-F),ci(d,v,3,_,A-T)}function ui(d){return(20091*d>>16)+d}function gl(d,v,_,A){var T,F=0,B=s(16);for(T=0;4>T;++T){var z=d[v+0]+d[v+8],V=d[v+0]-d[v+8],ne=(35468*d[v+4]>>16)-ui(d[v+12]),we=ui(d[v+4])+(35468*d[v+12]>>16);B[F+0]=z+we,B[F+1]=V+ne,B[F+2]=V-ne,B[F+3]=z-we,F+=4,v++}for(T=F=0;4>T;++T)z=(d=B[F+0]+4)+B[F+8],V=d-B[F+8],ne=(35468*B[F+4]>>16)-ui(B[F+12]),ci(_,A,0,0,z+(we=ui(B[F+4])+(35468*B[F+12]>>16))),ci(_,A,1,0,V+ne),ci(_,A,2,0,V-ne),ci(_,A,3,0,z-we),F++,A+=32}function zc(d,v,_,A){var T=d[v+0]+4,F=35468*d[v+4]>>16,B=ui(d[v+4]),z=35468*d[v+1]>>16;No(_,A,0,T+B,d=ui(d[v+1]),z),No(_,A,1,T+F,d,z),No(_,A,2,T-F,d,z),No(_,A,3,T-B,d,z)}function qc(d,v,_,A,T){gl(d,v,_,A),T&&gl(d,v+16,_,A+4)}function ed(d,v,_,A){ze(d,v+0,_,A,1),ze(d,v+32,_,A+128,1)}function td(d,v,_,A){var T;for(d=d[v+0]+4,T=0;4>T;++T)for(v=0;4>v;++v)ci(_,A,v,T,d)}function vl(d,v,_,A){d[v+0]&&bt(d,v+0,_,A),d[v+16]&&bt(d,v+16,_,A+4),d[v+32]&&bt(d,v+32,_,A+128),d[v+48]&&bt(d,v+48,_,A+128+4)}function Wc(d,v,_,A){var T,F=s(16);for(T=0;4>T;++T){var B=d[v+0+T]+d[v+12+T],z=d[v+4+T]+d[v+8+T],V=d[v+4+T]-d[v+8+T],ne=d[v+0+T]-d[v+12+T];F[0+T]=B+z,F[8+T]=B-z,F[4+T]=ne+V,F[12+T]=ne-V}for(T=0;4>T;++T)B=(d=F[0+4*T]+3)+F[3+4*T],z=F[1+4*T]+F[2+4*T],V=F[1+4*T]-F[2+4*T],ne=d-F[3+4*T],_[A+0]=B+z>>3,_[A+16]=ne+V>>3,_[A+32]=B-z>>3,_[A+48]=ne-V>>3,A+=64}function Fs(d,v,_){var A,T=v-32,F=pi,B=255-d[T-1];for(A=0;A<_;++A){var z,V=F,ne=B+d[v-1];for(z=0;z<_;++z)d[v+z]=V[ne+d[T+z]];v+=32}}function nd(d,v){Fs(d,v,4)}function rd(d,v){Fs(d,v,8)}function Rf(d,v){Fs(d,v,16)}function $s(d,v){var _;for(_=0;16>_;++_)r(d,v+32*_,d,v-32,16)}function ko(d,v){var _;for(_=16;0<_;--_)i(d,v,d[v-1],16),v+=32}function Eo(d,v,_){var A;for(A=0;16>A;++A)i(v,_+32*A,d,16)}function Hc(d,v){var _,A=16;for(_=0;16>_;++_)A+=d[v-1+32*_]+d[v+_-32];Eo(A>>5,d,v)}function $r(d,v){var _,A=8;for(_=0;16>_;++_)A+=d[v-1+32*_];Eo(A>>4,d,v)}function Ff(d,v){var _,A=8;for(_=0;16>_;++_)A+=d[v+_-32];Eo(A>>4,d,v)}function id(d,v){Eo(128,d,v)}function Lt(d,v,_){return d+2*v+_+2>>2}function $f(d,v){var _,A=v-32;for(A=new Uint8Array([Lt(d[A-1],d[A+0],d[A+1]),Lt(d[A+0],d[A+1],d[A+2]),Lt(d[A+1],d[A+2],d[A+3]),Lt(d[A+2],d[A+3],d[A+4])]),_=0;4>_;++_)r(d,v+32*_,A,0,A.length)}function Bf(d,v){var _=d[v-1],A=d[v-1+32],T=d[v-1+64],F=d[v-1+96];le(d,v+0,16843009*Lt(d[v-1-32],_,A)),le(d,v+32,16843009*Lt(_,A,T)),le(d,v+64,16843009*Lt(A,T,F)),le(d,v+96,16843009*Lt(T,F,F))}function Bs(d,v){var _,A=4;for(_=0;4>_;++_)A+=d[v+_-32]+d[v-1+32*_];for(A>>=3,_=0;4>_;++_)i(d,v+32*_,A,4)}function sd(d,v){var _=d[v-1+0],A=d[v-1+32],T=d[v-1+64],F=d[v-1-32],B=d[v+0-32],z=d[v+1-32],V=d[v+2-32],ne=d[v+3-32];d[v+0+96]=Lt(A,T,d[v-1+96]),d[v+1+96]=d[v+0+64]=Lt(_,A,T),d[v+2+96]=d[v+1+64]=d[v+0+32]=Lt(F,_,A),d[v+3+96]=d[v+2+64]=d[v+1+32]=d[v+0+0]=Lt(B,F,_),d[v+3+64]=d[v+2+32]=d[v+1+0]=Lt(z,B,F),d[v+3+32]=d[v+2+0]=Lt(V,z,B),d[v+3+0]=Lt(ne,V,z)}function yl(d,v){var _=d[v+1-32],A=d[v+2-32],T=d[v+3-32],F=d[v+4-32],B=d[v+5-32],z=d[v+6-32],V=d[v+7-32];d[v+0+0]=Lt(d[v+0-32],_,A),d[v+1+0]=d[v+0+32]=Lt(_,A,T),d[v+2+0]=d[v+1+32]=d[v+0+64]=Lt(A,T,F),d[v+3+0]=d[v+2+32]=d[v+1+64]=d[v+0+96]=Lt(T,F,B),d[v+3+32]=d[v+2+64]=d[v+1+96]=Lt(F,B,z),d[v+3+64]=d[v+2+96]=Lt(B,z,V),d[v+3+96]=Lt(z,V,V)}function wl(d,v){var _=d[v-1+0],A=d[v-1+32],T=d[v-1+64],F=d[v-1-32],B=d[v+0-32],z=d[v+1-32],V=d[v+2-32],ne=d[v+3-32];d[v+0+0]=d[v+1+64]=F+B+1>>1,d[v+1+0]=d[v+2+64]=B+z+1>>1,d[v+2+0]=d[v+3+64]=z+V+1>>1,d[v+3+0]=V+ne+1>>1,d[v+0+96]=Lt(T,A,_),d[v+0+64]=Lt(A,_,F),d[v+0+32]=d[v+1+96]=Lt(_,F,B),d[v+1+32]=d[v+2+96]=Lt(F,B,z),d[v+2+32]=d[v+3+96]=Lt(B,z,V),d[v+3+32]=Lt(z,V,ne)}function Vc(d,v){var _=d[v+0-32],A=d[v+1-32],T=d[v+2-32],F=d[v+3-32],B=d[v+4-32],z=d[v+5-32],V=d[v+6-32],ne=d[v+7-32];d[v+0+0]=_+A+1>>1,d[v+1+0]=d[v+0+64]=A+T+1>>1,d[v+2+0]=d[v+1+64]=T+F+1>>1,d[v+3+0]=d[v+2+64]=F+B+1>>1,d[v+0+32]=Lt(_,A,T),d[v+1+32]=d[v+0+96]=Lt(A,T,F),d[v+2+32]=d[v+1+96]=Lt(T,F,B),d[v+3+32]=d[v+2+96]=Lt(F,B,z),d[v+3+64]=Lt(B,z,V),d[v+3+96]=Lt(z,V,ne)}function Uf(d,v){var _=d[v-1+0],A=d[v-1+32],T=d[v-1+64],F=d[v-1+96];d[v+0+0]=_+A+1>>1,d[v+2+0]=d[v+0+32]=A+T+1>>1,d[v+2+32]=d[v+0+64]=T+F+1>>1,d[v+1+0]=Lt(_,A,T),d[v+3+0]=d[v+1+32]=Lt(A,T,F),d[v+3+32]=d[v+1+64]=Lt(T,F,F),d[v+3+64]=d[v+2+64]=d[v+0+96]=d[v+1+96]=d[v+2+96]=d[v+3+96]=F}function zf(d,v){var _=d[v-1+0],A=d[v-1+32],T=d[v-1+64],F=d[v-1+96],B=d[v-1-32],z=d[v+0-32],V=d[v+1-32],ne=d[v+2-32];d[v+0+0]=d[v+2+32]=_+B+1>>1,d[v+0+32]=d[v+2+64]=A+_+1>>1,d[v+0+64]=d[v+2+96]=T+A+1>>1,d[v+0+96]=F+T+1>>1,d[v+3+0]=Lt(z,V,ne),d[v+2+0]=Lt(B,z,V),d[v+1+0]=d[v+3+32]=Lt(_,B,z),d[v+1+32]=d[v+3+64]=Lt(A,_,B),d[v+1+64]=d[v+3+96]=Lt(T,A,_),d[v+1+96]=Lt(F,T,A)}function qf(d,v){var _;for(_=0;8>_;++_)r(d,v+32*_,d,v-32,8)}function mn(d,v){var _;for(_=0;8>_;++_)i(d,v,d[v-1],8),v+=32}function sn(d,v,_){var A;for(A=0;8>A;++A)i(v,_+32*A,d,8)}function Ba(d,v){var _,A=8;for(_=0;8>_;++_)A+=d[v+_-32]+d[v-1+32*_];sn(A>>4,d,v)}function Wf(d,v){var _,A=4;for(_=0;8>_;++_)A+=d[v+_-32];sn(A>>3,d,v)}function jo(d,v){var _,A=4;for(_=0;8>_;++_)A+=d[v-1+32*_];sn(A>>3,d,v)}function Gc(d,v){sn(128,d,v)}function xl(d,v,_){var A=d[v-_],T=d[v+0],F=3*(T-A)+Tl[1020+d[v-2*_]-d[v+_]],B=eu[112+(F+4>>3)];d[v-_]=pi[255+A+eu[112+(F+3>>3)]],d[v+0]=pi[255+T-B]}function ad(d,v,_,A){var T=d[v+0],F=d[v+_];return ei[255+d[v-2*_]-d[v-_]]>A||ei[255+F-T]>A}function Yc(d,v,_,A){return 4*ei[255+d[v-_]-d[v+0]]+ei[255+d[v-2*_]-d[v+_]]<=A}function od(d,v,_,A,T){var F=d[v-3*_],B=d[v-2*_],z=d[v-_],V=d[v+0],ne=d[v+_],we=d[v+2*_],Ie=d[v+3*_];return 4*ei[255+z-V]+ei[255+B-ne]>A?0:ei[255+d[v-4*_]-F]<=T&&ei[255+F-B]<=T&&ei[255+B-z]<=T&&ei[255+Ie-we]<=T&&ei[255+we-ne]<=T&&ei[255+ne-V]<=T}function fr(d,v,_,A){var T=2*A+1;for(A=0;16>A;++A)Yc(d,v+A,_,T)&&xl(d,v+A,_)}function zi(d,v,_,A){var T=2*A+1;for(A=0;16>A;++A)Yc(d,v+A*_,1,T)&&xl(d,v+A*_,1)}function Xr(d,v,_,A){var T;for(T=3;0<T;--T)fr(d,v+=4*_,_,A)}function ld(d,v,_,A){var T;for(T=3;0<T;--T)zi(d,v+=4,_,A)}function Us(d,v,_,A,T,F,B,z){for(F=2*F+1;0<T--;){if(od(d,v,_,F,B))if(ad(d,v,_,z))xl(d,v,_);else{var V=d,ne=v,we=_,Ie=V[ne-2*we],De=V[ne-we],Ne=V[ne+0],Ge=V[ne+we],$e=V[ne+2*we],ve=27*(Ve=Tl[1020+3*(Ne-De)+Tl[1020+Ie-Ge]])+63>>7,_e=18*Ve+63>>7,Ve=9*Ve+63>>7;V[ne-3*we]=pi[255+V[ne-3*we]+Ve],V[ne-2*we]=pi[255+Ie+_e],V[ne-we]=pi[255+De+ve],V[ne+0]=pi[255+Ne-ve],V[ne+we]=pi[255+Ge-_e],V[ne+2*we]=pi[255+$e-Ve]}v+=A}}function Xn(d,v,_,A,T,F,B,z){for(F=2*F+1;0<T--;){if(od(d,v,_,F,B))if(ad(d,v,_,z))xl(d,v,_);else{var V=d,ne=v,we=_,Ie=V[ne-we],De=V[ne+0],Ne=V[ne+we],Ge=eu[112+(($e=3*(De-Ie))+4>>3)],$e=eu[112+($e+3>>3)],ve=Ge+1>>1;V[ne-2*we]=pi[255+V[ne-2*we]+ve],V[ne-we]=pi[255+Ie+$e],V[ne+0]=pi[255+De-Ge],V[ne+we]=pi[255+Ne-ve]}v+=A}}function bl(d,v,_,A,T,F){Us(d,v,_,1,16,A,T,F)}function Ua(d,v,_,A,T,F){Us(d,v,1,_,16,A,T,F)}function cd(d,v,_,A,T,F){var B;for(B=3;0<B;--B)Xn(d,v+=4*_,_,1,16,A,T,F)}function Co(d,v,_,A,T,F){var B;for(B=3;0<B;--B)Xn(d,v+=4,1,_,16,A,T,F)}function ud(d,v,_,A,T,F,B,z){Us(d,v,T,1,8,F,B,z),Us(_,A,T,1,8,F,B,z)}function _l(d,v,_,A,T,F,B,z){Us(d,v,1,T,8,F,B,z),Us(_,A,1,T,8,F,B,z)}function Ir(d,v,_,A,T,F,B,z){Xn(d,v+4*T,T,1,8,F,B,z),Xn(_,A+4*T,T,1,8,F,B,z)}function dd(d,v,_,A,T,F,B,z){Xn(d,v+4,1,T,8,F,B,z),Xn(_,A+4,1,T,8,F,B,z)}function Dr(){this.ba=new li,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Gt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Kc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Sl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ys(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new U}function Nl(){this.xb=this.a=0,this.l=new pl,this.ca=new li,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ys,this.ab=0,this.gc=a(4,Sl),this.Oc=0}function za(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new pl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function un(d,v,_,A,T,F,B){for(d=d==null?0:d[v+0],v=0;v<B;++v)T[F+v]=d+_[A+v]&255,d=T[F+v]}function qi(d,v,_,A,T,F,B){var z;if(d==null)un(null,null,_,A,T,F,B);else for(z=0;z<B;++z)T[F+z]=d[v+z]+_[A+z]&255}function zs(d,v,_,A,T,F,B){if(d==null)un(null,null,_,A,T,F,B);else{var z,V=d[v+0],ne=V,we=V;for(z=0;z<B;++z)ne=we+(V=d[v+z])-ne,we=_[A+z]+(-256&ne?0>ne?0:255:ne)&255,ne=V,T[F+z]=we}}function Jc(d,v,_,A){var T=v.width,F=v.o;if(t(d!=null&&v!=null),0>_||0>=A||_+A>F)return null;if(!d.Cc){if(d.ga==null){var B;if(d.ga=new za,(B=d.ga==null)||(B=v.width*v.o,t(d.Gb.length==0),d.Gb=s(B),d.Uc=0,d.Gb==null?B=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,B=1),B=!B),!B){B=d.ga;var z=d.Fa,V=d.P,ne=d.qc,we=d.mb,Ie=d.nb,De=V+1,Ne=ne-1,Ge=B.l;if(t(z!=null&&we!=null&&v!=null),Ji[0]=null,Ji[1]=un,Ji[2]=qi,Ji[3]=zs,B.ca=we,B.tb=Ie,B.c=v.width,B.i=v.height,t(0<B.c&&0<B.i),1>=ne)v=0;else if(B.$a=z[V+0]>>0&3,B.Z=z[V+0]>>2&3,B.Lc=z[V+0]>>4&3,V=z[V+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||V)v=0;else if(Ge.put=nr,Ge.ac=rn,Ge.bc=Tr,Ge.ma=B,Ge.width=v.width,Ge.height=v.height,Ge.Da=v.Da,Ge.v=v.v,Ge.va=v.va,Ge.j=v.j,Ge.o=v.o,B.$a)e:{t(B.$a==1),v=Ui();t:for(;;){if(v==null){v=0;break e}if(t(B!=null),B.mc=v,v.c=B.c,v.i=B.i,v.l=B.l,v.l.ma=B,v.l.width=B.c,v.l.height=B.i,v.a=0,$(v.m,z,De,Ne),!Rs(B.c,B.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&ki(v.s)?(B.ic=1,z=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(z),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(B.ic=0,v=So(v,B.c)),!v))break t;v=1;break e}B.mc=null,v=0}else v=Ne>=B.c*B.i;B=!v}if(B)return null;d.ga.Lc!=1?d.Ga=0:A=F-_}t(d.ga!=null),t(_+A<=F);e:{if(v=(z=d.ga).c,F=z.l.o,z.$a==0){if(De=d.rc,Ne=d.Vc,Ge=d.Fa,V=d.P+1+_*v,ne=d.mb,we=d.nb+_*v,t(V<=d.P+d.qc),z.Z!=0)for(t(Ji[z.Z]!=null),B=0;B<A;++B)Ji[z.Z](De,Ne,Ge,V,ne,we,v),De=ne,Ne=we,we+=v,V+=v;else for(B=0;B<A;++B)r(ne,we,Ge,V,v),De=ne,Ne=we,we+=v,V+=v;d.rc=De,d.Vc=Ne}else{if(t(z.mc!=null),v=_+A,t((B=z.mc)!=null),t(v<=B.i),B.C>=v)v=1;else if(z.ic||Le(),z.ic){z=B.V,De=B.Ba,Ne=B.c;var $e=B.i,ve=(Ge=1,V=B.$/Ne,ne=B.$%Ne,we=B.m,Ie=B.s,B.$),_e=Ne*$e,Ve=Ne*v,Xe=Ie.wc,He=ve<Ve?En(Ie,ne,V):null;t(ve<=_e),t(v<=$e),t(ki(Ie));t:for(;;){for(;!we.h&&ve<Ve;){if(ne&Xe||(He=En(Ie,ne,V)),t(He!=null),he(we),256>($e=kn(He.G[0],He.H[0],we)))z[De+ve]=$e,++ve,++ne>=Ne&&(ne=0,++V<=v&&!(V%16)&&ms(B,V));else{if(!(280>$e)){Ge=0;break t}$e=Yn($e-256,we);var lt,rt=kn(He.G[4],He.H[4],we);if(he(we),!(ve>=(rt=rr(Ne,rt=Yn(rt,we)))&&_e-ve>=$e)){Ge=0;break t}for(lt=0;lt<$e;++lt)z[De+ve+lt]=z[De+ve+lt-rt];for(ve+=$e,ne+=$e;ne>=Ne;)ne-=Ne,++V<=v&&!(V%16)&&ms(B,V);ve<Ve&&ne&Xe&&(He=En(Ie,ne,V))}t(we.h==re(we))}ms(B,V>v?v:V);break t}!Ge||we.h&&ve<_e?(Ge=0,B.a=we.h?5:3):B.$=ve,v=Ge}else v=gs(B,B.V,B.Ba,B.c,B.i,v,ll);if(!v){A=0;break e}}_+A>=F&&(d.Cc=1),A=1}if(!A)return null;if(d.Cc&&((A=d.ga)!=null&&(A.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+_*T}function x(d,v,_,A,T,F){for(;0<T--;){var B,z=d,V=v+(_?1:0),ne=d,we=v+(_?0:3);for(B=0;B<A;++B){var Ie=ne[we+4*B];Ie!=255&&(Ie*=32897,z[V+4*B+0]=z[V+4*B+0]*Ie>>23,z[V+4*B+1]=z[V+4*B+1]*Ie>>23,z[V+4*B+2]=z[V+4*B+2]*Ie>>23)}v+=F}}function I(d,v,_,A,T){for(;0<A--;){var F;for(F=0;F<_;++F){var B=d[v+2*F+0],z=15&(ne=d[v+2*F+1]),V=4369*z,ne=(240&ne|ne>>4)*V>>16;d[v+2*F+0]=(240&B|B>>4)*V>>16&240|(15&B|B<<4)*V>>16>>4&15,d[v+2*F+1]=240&ne|z}v+=T}}function ie(d,v,_,A,T,F,B,z){var V,ne,we=255;for(ne=0;ne<T;++ne){for(V=0;V<A;++V){var Ie=d[v+V];F[B+4*V]=Ie,we&=Ie}v+=_,B+=z}return we!=255}function me(d,v,_,A,T){var F;for(F=0;F<T;++F)_[A+F]=d[v+F]>>8}function Le(){Ei=x,gn=I,jn=ie,ir=me}function Ue(d,v,_){R[d]=function(A,T,F,B,z,V,ne,we,Ie,De,Ne,Ge,$e,ve,_e,Ve,Xe){var He,lt=Xe-1>>1,rt=z[V+0]|ne[we+0]<<16,gt=Ie[De+0]|Ne[Ge+0]<<16;t(A!=null);var at=3*rt+gt+131074>>2;for(v(A[T+0],255&at,at>>16,$e,ve),F!=null&&(at=3*gt+rt+131074>>2,v(F[B+0],255&at,at>>16,_e,Ve)),He=1;He<=lt;++He){var an=z[V+He]|ne[we+He]<<16,fn=Ie[De+He]|Ne[Ge+He]<<16,Ht=rt+an+gt+fn+524296,Ot=Ht+2*(an+gt)>>3;at=Ot+rt>>1,rt=(Ht=Ht+2*(rt+fn)>>3)+an>>1,v(A[T+2*He-1],255&at,at>>16,$e,ve+(2*He-1)*_),v(A[T+2*He-0],255&rt,rt>>16,$e,ve+(2*He-0)*_),F!=null&&(at=Ht+gt>>1,rt=Ot+fn>>1,v(F[B+2*He-1],255&at,at>>16,_e,Ve+(2*He-1)*_),v(F[B+2*He+0],255&rt,rt>>16,_e,Ve+(2*He+0)*_)),rt=an,gt=fn}1&Xe||(at=3*rt+gt+131074>>2,v(A[T+Xe-1],255&at,at>>16,$e,ve+(Xe-1)*_),F!=null&&(at=3*gt+rt+131074>>2,v(F[B+Xe-1],255&at,at>>16,_e,Ve+(Xe-1)*_)))}}function Je(){ji[tu]=W,ji[Va]=su,ji[Ga]=$l,ji[Do]=Ci,ji[hd]=Wt,ji[Hf]=Rp,ji[Ip]=e1,ji[Il]=su,ji[Dl]=Ci,ji[Ol]=Wt,ji[Vf]=Rp}function ct(d){return d&~t1?0>d?0:255:d>>Fp}function St(d,v){return ct((19077*d>>8)+(26149*v>>8)-14234)}function Dt(d,v,_){return ct((19077*d>>8)-(6419*v>>8)-(13320*_>>8)+8708)}function Pt(d,v){return ct((19077*d>>8)+(33050*v>>8)-17685)}function Yt(d,v,_,A,T){A[T+0]=St(d,_),A[T+1]=Dt(d,v,_),A[T+2]=Pt(d,v)}function On(d,v,_,A,T){A[T+0]=Pt(d,v),A[T+1]=Dt(d,v,_),A[T+2]=St(d,_)}function Qn(d,v,_,A,T){var F=Dt(d,v,_);v=F<<3&224|Pt(d,v)>>3,A[T+0]=248&St(d,_)|F>>5,A[T+1]=v}function Zn(d,v,_,A,T){var F=240&Pt(d,v)|15;A[T+0]=240&St(d,_)|Dt(d,v,_)>>4,A[T+1]=F}function jr(d,v,_,A,T){A[T+0]=255,Yt(d,v,_,A,T+1)}function Cr(d,v,_,A,T){On(d,v,_,A,T),A[T+3]=255}function Wi(d,v,_,A,T){Yt(d,v,_,A,T),A[T+3]=255}function Pn(d,v){return 0>d?0:d>v?v:d}function Hi(d,v,_){R[d]=function(A,T,F,B,z,V,ne,we,Ie){for(var De=we+(-2&Ie)*_;we!=De;)v(A[T+0],F[B+0],z[V+0],ne,we),v(A[T+1],F[B+0],z[V+0],ne,we+_),T+=2,++B,++V,we+=2*_;1&Ie&&v(A[T+0],F[B+0],z[V+0],ne,we)}}function qa(d,v,_){return _==0?d==0?v==0?6:5:v==0?4:0:_}function kl(d,v,_,A,T){switch(d>>>30){case 3:ze(v,_,A,T,0);break;case 2:Te(v,_,A,T);break;case 1:bt(v,_,A,T)}}function El(d,v){var _,A,T=v.M,F=v.Nb,B=d.oc,z=d.pc+40,V=d.oc,ne=d.pc+584,we=d.oc,Ie=d.pc+600;for(_=0;16>_;++_)B[z+32*_-1]=129;for(_=0;8>_;++_)V[ne+32*_-1]=129,we[Ie+32*_-1]=129;for(0<T?B[z-1-32]=V[ne-1-32]=we[Ie-1-32]=129:(i(B,z-32-1,127,21),i(V,ne-32-1,127,9),i(we,Ie-32-1,127,9)),A=0;A<d.za;++A){var De=v.ya[v.aa+A];if(0<A){for(_=-1;16>_;++_)r(B,z+32*_-4,B,z+32*_+12,4);for(_=-1;8>_;++_)r(V,ne+32*_-4,V,ne+32*_+4,4),r(we,Ie+32*_-4,we,Ie+32*_+4,4)}var Ne=d.Gd,Ge=d.Hd+A,$e=De.ad,ve=De.Hc;if(0<T&&(r(B,z-32,Ne[Ge].y,0,16),r(V,ne-32,Ne[Ge].f,0,8),r(we,Ie-32,Ne[Ge].ea,0,8)),De.Za){var _e=B,Ve=z-32+16;for(0<T&&(A>=d.za-1?i(_e,Ve,Ne[Ge].y[15],4):r(_e,Ve,Ne[Ge+1].y,0,4)),_=0;4>_;_++)_e[Ve+128+_]=_e[Ve+256+_]=_e[Ve+384+_]=_e[Ve+0+_];for(_=0;16>_;++_,ve<<=2)_e=B,Ve=z+Vs[_],Ss[De.Ob[_]](_e,Ve),kl(ve,$e,16*+_,_e,Ve)}else if(_e=qa(A,T,De.Ob[0]),Ya[_e](B,z),ve!=0)for(_=0;16>_;++_,ve<<=2)kl(ve,$e,16*+_,B,z+Vs[_]);for(_=De.Gc,_e=qa(A,T,De.Dd),fa[_e](V,ne),fa[_e](we,Ie),ve=$e,_e=V,Ve=ne,255&(De=_>>0)&&(170&De?ut(ve,256,_e,Ve):Mt(ve,256,_e,Ve)),De=we,ve=Ie,255&(_>>=8)&&(170&_?ut($e,320,De,ve):Mt($e,320,De,ve)),T<d.Ub-1&&(r(Ne[Ge].y,0,B,z+480,16),r(Ne[Ge].f,0,V,ne+224,8),r(Ne[Ge].ea,0,we,Ie+224,8)),_=8*F*d.B,Ne=d.sa,Ge=d.ta+16*A+16*F*d.R,$e=d.qa,De=d.ra+8*A+_,ve=d.Ha,_e=d.Ia+8*A+_,_=0;16>_;++_)r(Ne,Ge+_*d.R,B,z+32*_,16);for(_=0;8>_;++_)r($e,De+_*d.B,V,ne+32*_,8),r(ve,_e+_*d.B,we,Ie+32*_,8)}}function jl(d,v,_,A,T,F,B,z,V){var ne=[0],we=[0],Ie=0,De=V!=null?V.kd:0,Ne=V??new Kc;if(d==null||12>_)return 7;Ne.data=d,Ne.w=v,Ne.ha=_,v=[v],_=[_],Ne.gb=[Ne.gb];e:{var Ge=v,$e=_,ve=Ne.gb;if(t(d!=null),t($e!=null),t(ve!=null),ve[0]=0,12<=$e[0]&&!n(d,Ge[0],"RIFF")){if(n(d,Ge[0]+8,"WEBP")){ve=3;break e}var _e=je(d,Ge[0]+4);if(12>_e||4294967286<_e){ve=3;break e}if(De&&_e>$e[0]-8){ve=7;break e}ve[0]=_e,Ge[0]+=12,$e[0]-=12}ve=0}if(ve!=0)return ve;for(_e=0<Ne.gb[0],_=_[0];;){e:{var Ve=d;$e=v,ve=_;var Xe=ne,He=we,lt=Ge=[0];if((at=Ie=[Ie])[0]=0,8>ve[0])ve=7;else{if(!n(Ve,$e[0],"VP8X")){if(je(Ve,$e[0]+4)!=10){ve=3;break e}if(18>ve[0]){ve=7;break e}var rt=je(Ve,$e[0]+8),gt=1+pe(Ve,$e[0]+12);if(2147483648<=gt*(Ve=1+pe(Ve,$e[0]+15))){ve=3;break e}lt!=null&&(lt[0]=rt),Xe!=null&&(Xe[0]=gt),He!=null&&(He[0]=Ve),$e[0]+=18,ve[0]-=18,at[0]=1}ve=0}}if(Ie=Ie[0],Ge=Ge[0],ve!=0)return ve;if($e=!!(2&Ge),!_e&&Ie)return 3;if(F!=null&&(F[0]=!!(16&Ge)),B!=null&&(B[0]=$e),z!=null&&(z[0]=0),B=ne[0],Ge=we[0],Ie&&$e&&V==null){ve=0;break}if(4>_){ve=7;break}if(_e&&Ie||!_e&&!Ie&&!n(d,v[0],"ALPH")){_=[_],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{rt=d,ve=v,_e=_;var at=Ne.gb;Xe=Ne.na,He=Ne.P,lt=Ne.Sa,gt=22,t(rt!=null),t(_e!=null),Ve=ve[0];var an=_e[0];for(t(Xe!=null),t(lt!=null),Xe[0]=null,He[0]=null,lt[0]=0;;){if(ve[0]=Ve,_e[0]=an,8>an){ve=7;break e}var fn=je(rt,Ve+4);if(4294967286<fn){ve=3;break e}var Ht=8+fn+1&-2;if(gt+=Ht,0<at&&gt>at){ve=3;break e}if(!n(rt,Ve,"VP8 ")||!n(rt,Ve,"VP8L")){ve=0;break e}if(an[0]<Ht){ve=7;break e}n(rt,Ve,"ALPH")||(Xe[0]=rt,He[0]=Ve+8,lt[0]=fn),Ve+=Ht,an-=Ht}}if(_=_[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],ve!=0)break}_=[_],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(at=d,ve=v,_e=_,Xe=Ne.gb[0],He=Ne.Ja,lt=Ne.xa,rt=ve[0],Ve=!n(at,rt,"VP8 "),gt=!n(at,rt,"VP8L"),t(at!=null),t(_e!=null),t(He!=null),t(lt!=null),8>_e[0])ve=7;else{if(Ve||gt){if(at=je(at,rt+4),12<=Xe&&at>Xe-12){ve=3;break e}if(De&&at>_e[0]-8){ve=7;break e}He[0]=at,ve[0]+=8,_e[0]-=8,lt[0]=gt}else lt[0]=5<=_e[0]&&at[rt+0]==47&&!(at[rt+4]>>5),He[0]=_e[0];ve=0}if(_=_[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],v=v[0],ve!=0)break;if(4294967286<Ne.Ja)return 3;if(z==null||$e||(z[0]=Ne.xa?2:1),B=[B],Ge=[Ge],Ne.xa){if(5>_){ve=7;break}z=B,De=Ge,$e=F,d==null||5>_?d=0:5<=_&&d[v+0]==47&&!(d[v+4]>>5)?(_e=[0],at=[0],Xe=[0],$(He=new P,d,v,_),dt(He,_e,at,Xe)?(z!=null&&(z[0]=_e[0]),De!=null&&(De[0]=at[0]),$e!=null&&($e[0]=Xe[0]),d=1):d=0):d=0}else{if(10>_){ve=7;break}z=Ge,d==null||10>_||!$c(d,v+3,_-3)?d=0:(De=d[v+0]|d[v+1]<<8|d[v+2]<<16,$e=16383&(d[v+7]<<8|d[v+6]),d=16383&(d[v+9]<<8|d[v+8]),1&De||3<(De>>1&7)||!(De>>4&1)||De>>5>=Ne.Ja||!$e||!d?d=0:(B&&(B[0]=$e),z&&(z[0]=d),d=1))}if(!d||(B=B[0],Ge=Ge[0],Ie&&(ne[0]!=B||we[0]!=Ge)))return 3;V!=null&&(V[0]=Ne,V.offset=v-V.w,t(4294967286>v-V.w),t(V.offset==V.ha-_));break}return ve==0||ve==7&&Ie&&V==null?(F!=null&&(F[0]|=Ne.na!=null&&0<Ne.na.length),A!=null&&(A[0]=B),T!=null&&(T[0]=Ge),0):ve}function Xc(d,v,_){var A=v.width,T=v.height,F=0,B=0,z=A,V=T;if(v.Da=d!=null&&0<d.Da,v.Da&&(z=d.cd,V=d.bd,F=d.v,B=d.j,11>_||(F&=-2,B&=-2),0>F||0>B||0>=z||0>=V||F+z>A||B+V>T))return 0;if(v.v=F,v.j=B,v.va=F+z,v.o=B+V,v.U=z,v.T=V,v.da=d!=null&&0<d.da,v.da){if(!qe(z,V,_=[d.ib],F=[d.hb]))return 0;v.ib=_[0],v.hb=F[0]}return v.ob=d!=null&&d.ob,v.Kb=d==null||!d.Sd,v.da&&(v.ob=v.ib<3*A/4&&v.hb<3*T/4,v.Kb=0),1}function Qc(d){if(d==null)return 2;if(11>d.S){var v=d.f.RGBA;v.fb+=(d.height-1)*v.A,v.A=-v.A}else v=d.f.kb,d=d.height,v.O+=(d-1)*v.fa,v.fa=-v.fa,v.N+=(d-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(d-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(d-1)*v.lb,v.lb=-v.lb);return 0}function Cl(d,v,_,A){if(A==null||0>=d||0>=v)return 2;if(_!=null){if(_.Da){var T=_.cd,F=_.bd,B=-2&_.v,z=-2&_.j;if(0>B||0>z||0>=T||0>=F||B+T>d||z+F>v)return 2;d=T,v=F}if(_.da){if(!qe(d,v,T=[_.ib],F=[_.hb]))return 2;d=T[0],v=F[0]}}A.width=d,A.height=v;e:{var V=A.width,ne=A.height;if(d=A.S,0>=V||0>=ne||!(d>=tu&&13>d))d=2;else{if(0>=A.Rd&&A.sd==null){B=F=T=v=0;var we=(z=V*Bp[d])*ne;if(11>d||(F=(ne+1)/2*(v=(V+1)/2),d==12&&(B=(T=V)*ne)),(ne=s(we+2*F+B))==null){d=1;break e}A.sd=ne,11>d?((V=A.f.RGBA).eb=ne,V.fb=0,V.A=z,V.size=we):((V=A.f.kb).y=ne,V.O=0,V.fa=z,V.Fd=we,V.f=ne,V.N=0+we,V.Ab=v,V.Cd=F,V.ea=ne,V.W=0+we+F,V.Db=v,V.Ed=F,d==12&&(V.F=ne,V.J=0+we+2*F),V.Tc=B,V.lb=T)}if(v=1,T=A.S,F=A.width,B=A.height,T>=tu&&13>T)if(11>T)d=A.f.RGBA,v&=(z=Math.abs(d.A))*(B-1)+F<=d.size,v&=z>=F*Bp[T],v&=d.eb!=null;else{d=A.f.kb,z=(F+1)/2,we=(B+1)/2,V=Math.abs(d.fa),ne=Math.abs(d.Ab);var Ie=Math.abs(d.Db),De=Math.abs(d.lb),Ne=De*(B-1)+F;v&=V*(B-1)+F<=d.Fd,v&=ne*(we-1)+z<=d.Cd,v=(v&=Ie*(we-1)+z<=d.Ed)&V>=F&ne>=z&Ie>=z,v&=d.y!=null,v&=d.f!=null,v&=d.ea!=null,T==12&&(v&=De>=F,v&=Ne<=d.Tc,v&=d.F!=null)}else v=0;d=v?0:2}}return d!=0||_!=null&&_.fd&&(d=Qc(A)),d}var Or=64,ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Al=24,Ll=32,Ao=8,Qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(d){return d},R.Predictor2=function(d,v,_){return v[_+0]},R.Predictor3=function(d,v,_){return v[_+1]},R.Predictor4=function(d,v,_){return v[_-1]},R.Predictor5=function(d,v,_){return Be(Be(d,v[_+1]),v[_+0])},R.Predictor6=function(d,v,_){return Be(d,v[_-1])},R.Predictor7=function(d,v,_){return Be(d,v[_+0])},R.Predictor8=function(d,v,_){return Be(v[_-1],v[_+0])},R.Predictor9=function(d,v,_){return Be(v[_+0],v[_+1])},R.Predictor10=function(d,v,_){return Be(Be(d,v[_-1]),Be(v[_+0],v[_+1]))},R.Predictor11=function(d,v,_){var A=v[_+0];return 0>=st(A>>24&255,d>>24&255,(v=v[_-1])>>24&255)+st(A>>16&255,d>>16&255,v>>16&255)+st(A>>8&255,d>>8&255,v>>8&255)+st(255&A,255&d,255&v)?A:d},R.Predictor12=function(d,v,_){var A=v[_+0];return(We((d>>24&255)+(A>>24&255)-((v=v[_-1])>>24&255))<<24|We((d>>16&255)+(A>>16&255)-(v>>16&255))<<16|We((d>>8&255)+(A>>8&255)-(v>>8&255))<<8|We((255&d)+(255&A)-(255&v)))>>>0},R.Predictor13=function(d,v,_){var A=v[_-1];return(et((d=Be(d,v[_+0]))>>24&255,A>>24&255)<<24|et(d>>16&255,A>>16&255)<<16|et(d>>8&255,A>>8&255)<<8|et(d>>0&255,A>>0&255))>>>0};var qs=R.PredictorAdd0;R.PredictorAdd1=it,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var Wa=R.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var fd,Vi=R.ColorIndexInverseTransform,Pl=R.MapARGB,oa=R.VP8LColorIndexInverseTransformAlpha,di=R.MapAlpha,la=R.VP8LPredictorsAdd=[];la.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Lo,fi,Zr,Ha,ca,hi,Se,ze,Te,ut,bt,Mt,Mn,dn,Po,To,Ar,xs,Io,bs,Ws,_s,en,Gi,Ei,gn,jn,ir,yr=s(511),Yi=s(2041),Ki=s(225),ua=s(767),Zc=0,Tl=Yi,eu=Ki,pi=ua,ei=yr,tu=0,Va=1,Ga=2,Do=3,hd=4,Hf=5,Ip=6,Il=7,Dl=8,Ol=9,Vf=10,Dp=[2,3,7],Kg=[3,3,11],Op=[280,256,256,256,40],wr=[0,1,1,1,0],Br=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Mp=8,Gf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],da=null,Yf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ml=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Rl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ru=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],pd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Qg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ya=[],Ss=[],fa=[],Zg=1,iu=2,Ji=[],ji=[];Ue("UpsampleRgbLinePair",Yt,3),Ue("UpsampleBgrLinePair",On,3),Ue("UpsampleRgbaLinePair",Wi,4),Ue("UpsampleBgraLinePair",Cr,4),Ue("UpsampleArgbLinePair",jr,4),Ue("UpsampleRgba4444LinePair",Zn,2),Ue("UpsampleRgb565LinePair",Qn,2);var W=R.UpsampleRgbLinePair,$l=R.UpsampleBgrLinePair,su=R.UpsampleRgbaLinePair,Ci=R.UpsampleBgraLinePair,Wt=R.UpsampleArgbLinePair,Rp=R.UpsampleRgba4444LinePair,e1=R.UpsampleRgb565LinePair,md=16,Hs=1<<md-1,au=-227,Kf=482,Fp=6,t1=(256<<Fp)-1,$p=0,ha=s(256),n1=s(256),r1=s(256),i1=s(256),s1=s(Kf-au),a1=s(Kf-au);Hi("YuvToRgbRow",Yt,3),Hi("YuvToBgrRow",On,3),Hi("YuvToRgbaRow",Wi,4),Hi("YuvToBgraRow",Cr,4),Hi("YuvToArgbRow",jr,4),Hi("YuvToRgba4444Row",Zn,2),Hi("YuvToRgb565Row",Qn,2);var Vs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gd=[0,2,8],o1=[8,7,6,4,4,2,2,2,1,1,1,1],l1=1;this.WebPDecodeRGBA=function(d,v,_,A,T){var F=Va,B=new Dr,z=new li;B.ba=z,z.S=F,z.width=[z.width],z.height=[z.height];var V=z.width,ne=z.height,we=new bn;if(we==null||d==null)var Ie=2;else t(we!=null),Ie=jl(d,v,_,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ie!=0?V=0:(V!=null&&(V[0]=we.width[0]),ne!=null&&(ne[0]=we.height[0]),V=1),V){z.width=z.width[0],z.height=z.height[0],A!=null&&(A[0]=z.width),T!=null&&(T[0]=z.height);e:{if(A=new pl,(T=new Kc).data=d,T.w=v,T.ha=_,T.kd=1,v=[0],t(T!=null),((d=jl(T.data,T.w,T.ha,null,null,null,v,null,T))==0||d==7)&&v[0]&&(d=4),(v=d)==0){if(t(B!=null),A.data=T.data,A.w=T.w+T.offset,A.ha=T.ha-T.offset,A.put=nr,A.ac=rn,A.bc=Tr,A.ma=B,T.xa){if((d=Ui())==null){B=1;break e}if(function(De,Ne){var Ge=[0],$e=[0],ve=[0];t:for(;;){if(De==null)return 0;if(Ne==null)return De.a=2,0;if(De.l=Ne,De.a=0,$(De.m,Ne.data,Ne.w,Ne.ha),!dt(De.m,Ge,$e,ve)){De.a=3;break t}if(De.xb=iu,Ne.width=Ge[0],Ne.height=$e[0],!Rs(Ge[0],$e[0],1,De,null))break t;return 1}return t(De.a!=0),0}(d,A)){if(A=(v=Cl(A.width,A.height,B.Oa,B.ba))==0){t:{A=d;n:for(;;){if(A==null){A=0;break t}if(t(A.s.yc!=null),t(A.s.Ya!=null),t(0<A.s.Wb),t((_=A.l)!=null),t((T=_.ma)!=null),A.xb!=0){if(A.ca=T.ba,A.tb=T.tb,t(A.ca!=null),!Xc(T.Oa,_,Do)){A.a=2;break n}if(!So(A,_.width)||_.da)break n;if((_.da||Zt(A.ca.S))&&Le(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&Le()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!Oe(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!gs(A,A.V,A.Ba,A.c,A.i,_.o,Bi))break n;T.Dc=A.Ma,A=1;break t}t(A.a!=0),A=0}A=!A}A&&(v=d.a)}else v=d.a}else{if((d=new Mf)==null){B=1;break e}if(d.Fa=T.na,d.P=T.P,d.qc=T.Sa,Bc(d,A)){if((v=Cl(A.width,A.height,B.Oa,B.ba))==0){if(d.Aa=0,_=B.Oa,t((T=d)!=null),_!=null){if(0<(V=0>(V=_.Md)?0:100<V?255:255*V/100)){for(ne=we=0;4>ne;++ne)12>(Ie=T.pb[ne]).lc&&(Ie.ia=V*o1[0>Ie.lc?0:Ie.lc]>>3),we|=Ie.ia;we&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=_.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}Zu(d,A)||(v=d.a)}}else v=d.a}v==0&&B.Oa!=null&&B.Oa.fd&&(v=Qc(B.ba))}B=v}F=B!=0?null:11>F?z.f.RGBA.eb:z.f.kb.y}else F=null;return F};var Bp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(R,ee){for(var ae="",O=0;O<4;O++)ae+=String.fromCharCode(R[ee++]);return ae}function p(R,ee){return(R[ee+0]<<0|R[ee+1]<<8|R[ee+2]<<16)>>>0}function m(R,ee){return(R[ee+0]<<0|R[ee+1]<<8|R[ee+2]<<16|R[ee+3]<<24)>>>0}new c;var w=[0],g=[0],N=[],k=new c,E=e,b=function(R,ee){var ae={},O=0,U=!1,K=0,J=0;if(ae.frames=[],!function(H,re,ce,he){for(var ke=0;ke<he;ke++)if(H[re+ke]!=ce.charCodeAt(ke))return!0;return!1}(R,ee,"RIFF",4)){for(m(R,ee+=4),ee+=8;ee<R.length;){var xe=f(R,ee),ye=m(R,ee+=4);ee+=4;var Q=ye+(1&ye);switch(xe){case"VP8 ":case"VP8L":ae.frames[O]===void 0&&(ae.frames[O]={}),(se=ae.frames[O]).src_off=U?J:ee-8,se.src_size=K+ye+8,O++,U&&(U=!1,K=0,J=0);break;case"VP8X":(se=ae.header={}).feature_flags=R[ee];var $=ee+4;se.canvas_width=1+p(R,$),$+=3,se.canvas_height=1+p(R,$),$+=3;break;case"ALPH":U=!0,K=Q+8,J=ee-8;break;case"ANIM":(se=ae.header).bgcolor=m(R,ee),$=ee+4,se.loop_count=(Ae=R)[(P=$)+0]<<0|Ae[P+1]<<8,$+=2;break;case"ANMF":var q,se;(se=ae.frames[O]={}).offset_x=2*p(R,ee),ee+=3,se.offset_y=2*p(R,ee),ee+=3,se.width=1+p(R,ee),ee+=3,se.height=1+p(R,ee),ee+=3,se.duration=p(R,ee),ee+=3,q=R[ee++],se.dispose=1&q,se.blend=q>>1&1}xe!="ANMF"&&(ee+=Q)}var Ae,P;return ae}}(E,0);b.response=E,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,L=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,w=[S.canvas_height],g=[S.canvas_width];for(var M=0;M<L.length&&L[M].blend!=0;M++);}var Y=L[0],oe=k.WebPDecodeRGBA(E,Y.src_off,Y.src_size,g,w);Y.rgba=oe,Y.imgwidth=g[0],Y.imgheight=w[0];for(var Z=0;Z<g[0]*w[0]*4;Z++)N[Z]=oe[Z];return this.width=g,this.height=w,this.data=N,this}(function(e){var t=function(){return typeof fy=="function"},n=function(w,g,N,k){var E=4,b=a;switch(k){case e.image_compression.FAST:E=1,b=s;break;case e.image_compression.MEDIUM:E=6,b=l;break;case e.image_compression.SLOW:E=9,b=c}w=r(w,g,N,b);var S=fy(w,{level:E});return e.__addimage__.arrayBufferToBinaryString(S)},r=function(w,g,N,k){for(var E,b,S,L=w.length/g,M=new Uint8Array(w.length+L),Y=p(),oe=0;oe<L;oe+=1){if(S=oe*g,E=w.subarray(S,S+g),k)M.set(k(E,N,b),S+oe);else{for(var Z,R=Y.length,ee=[];Z<R;Z+=1)ee[Z]=Y[Z](E,N,b);var ae=m(ee.concat());M.set(ee[ae],S+oe)}b=E}return M},i=function(w){var g=Array.apply([],w);return g.unshift(0),g},s=function(w,g){var N,k=[],E=w.length;k[0]=1;for(var b=0;b<E;b+=1)N=w[b-g]||0,k[b+1]=w[b]-N+256&255;return k},a=function(w,g,N){var k,E=[],b=w.length;E[0]=2;for(var S=0;S<b;S+=1)k=N&&N[S]||0,E[S+1]=w[S]-k+256&255;return E},l=function(w,g,N){var k,E,b=[],S=w.length;b[0]=3;for(var L=0;L<S;L+=1)k=w[L-g]||0,E=N&&N[L]||0,b[L+1]=w[L]+256-(k+E>>>1)&255;return b},c=function(w,g,N){var k,E,b,S,L=[],M=w.length;L[0]=4;for(var Y=0;Y<M;Y+=1)k=w[Y-g]||0,E=N&&N[Y]||0,b=N&&N[Y-g]||0,S=f(k,E,b),L[Y+1]=w[Y]-S+256&255;return L},f=function(w,g,N){if(w===g&&g===N)return w;var k=Math.abs(g-N),E=Math.abs(w-N),b=Math.abs(w+g-N-N);return k<=E&&k<=b?w:E<=b?g:N},p=function(){return[i,s,a,l,c]},m=function(w){var g=w.map(function(N){return N.reduce(function(k,E){return k+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(w,g,N,k){var E,b,S,L,M,Y,oe,Z,R,ee,ae,O,U,K,J,xe=this.decode.FLATE_DECODE,ye="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(S=new bB(w)).imgData,b=S.bits,E=S.colorSpace,M=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){R=(Z=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,ae=new Uint8Array(R*S.colors),ee=new Uint8Array(R);var Q,$=S.pixelBitlength-S.bits;for(K=0,J=0;K<R;K++){for(U=Z[K],Q=0;Q<$;)ae[J++]=U>>>Q&255,Q+=S.bits;ee[K]=U>>>Q&255}}if(S.bits===16){R=(Z=new Uint32Array(S.decodePixels().buffer)).length,ae=new Uint8Array(R*(32/S.pixelBitlength)*S.colors),ee=new Uint8Array(R*(32/S.pixelBitlength)),O=S.colors>1,K=0,J=0;for(var q=0;K<R;)U=Z[K++],ae[J++]=U>>>0&255,O&&(ae[J++]=U>>>16&255,U=Z[K++],ae[J++]=U>>>0&255),ee[q++]=U>>>16&255;b=8}k!==e.image_compression.NONE&&t()?(w=n(ae,S.width*S.colors,S.colors,k),oe=n(ee,S.width,1,k)):(w=ae,oe=ee,xe=void 0)}if(S.colorType===3&&(E=this.color_spaces.INDEXED,Y=S.palette,S.transparency.indexed)){var se=S.transparency.indexed,Ae=0;for(K=0,R=se.length;K<R;++K)Ae+=se[K];if((Ae/=255)===R-1&&se.indexOf(0)!==-1)L=[se.indexOf(0)];else if(Ae!==R){for(Z=S.decodePixels(),ee=new Uint8Array(Z.length),K=0,R=Z.length;K<R;K++)ee[K]=se[Z[K]];oe=n(ee,S.width,1)}}var P=function(H){var re;switch(H){case e.image_compression.FAST:re=11;break;case e.image_compression.MEDIUM:re=13;break;case e.image_compression.SLOW:re=14;break;default:re=12}return re}(k);return xe===this.decode.FLATE_DECODE&&(ye="/Predictor "+P+" "),ye+="/Colors "+M+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(oe&&this.__addimage__.isArrayBuffer(oe)||this.__addimage__.isArrayBufferView(oe))&&(oe=this.__addimage__.arrayBufferToBinaryString(oe)),{alias:N,data:w,index:g,filter:xe,decodeParameters:ye,transparency:L,palette:Y,sMask:oe,predictor:P,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:E}}}})(Ct.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new _B(t),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:a,height:l},p=new Mv(100).encode(f,100);return e.processJPEG.call(this,p,n,r,i)},e.processGIF87A=e.processGIF89A}(Ct.API),ba.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ba.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Tn.log("bit decode error:"+n)}},ba.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},ba.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,c=15&s,f=this.palette[l];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},ba.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ba.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,f=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=f}this.pos+=e}},ba.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,f=(a>>11)/t*255|0,p=i*this.width*4+4*s;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},ba.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},ba.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},ba.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new ba(t,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Mv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Ct.API),Y_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new Y_(t),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Mv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Ct.API),Ct.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,c=0,f=0;f<i;f+=4){var p=r[f],m=r[f+1],w=r[f+2],g=r[f+3];s[l++]=p,s[l++]=m,s[l++]=w,a[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ct.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Rd=Ct.API,Bm=Rd.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,m=t.doKerning!==!1,w=0,g=e.length,N=0,k=l[0]||c,E=[];for(n=0;n<g;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(w=m&&Sn(f[r])==="object"&&!isNaN(parseInt(f[r][N],10))?f[r][N]/p:0,E.push((l[r]||k)/c+w)),N=r;return E},W_=Rd.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Rd.processArabic&&(e=Rd.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Bm.apply(this,arguments).reduce(function(s,a){return s+a},0)},H_=function(e,t,n,r){for(var i=[],s=0,a=e.length,l=0;s!==a&&l+t[s]<n;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+t[s]>r&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},V_=function(e,t,n){n||(n={});var r,i,s,a,l,c,f,p=[],m=[p],w=n.textIndent||0,g=0,N=0,k=e.split(" "),E=Bm.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var b=Array(c).join(" "),S=[];k.map(function(M){(M=M.split(/\s*\n/)).length>1?S=S.concat(M.map(function(Y,oe){return(oe&&Y.length?`
`:"")+Y})):S.push(M[0])}),k=S,c=W_.apply(this,[b,n])}for(s=0,a=k.length;s<a;s++){var L=0;if(r=k[s],c&&r[0]==`
`&&(r=r.substr(1),L=1),w+g+(N=(i=Bm.apply(this,[r,n])).reduce(function(M,Y){return M+Y},0))>t||L){if(N>t){for(l=H_.apply(this,[r,i,t-(w+g),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(M,Y){return M+Y},0)}else p=[r];m.push(p),w=N+c,g=E}else p.push(r),w+=g+N,g=E}return f=c?function(M,Y){return(Y?b:"")+M.join(" ")}:function(M){return M.join(" ")},m.map(f)},Rd.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,f=[];for(l=0,c=r.length;l<c;l++)f=f.concat(V_.apply(this,[r[l],a,s]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=e.__fontmetrics__.compress=function(m){var w,g,N,k,E=["{"];for(var b in m){if(w=m[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof w=="number")w<0?(N=s(w).slice(3),k="-"):(N=s(w).slice(2),k=""),N=k+N.slice(0,-1)+r[N.slice(-1)];else{if(Sn(w)!=="object")throw new Error("Don't know what to do with value type "+Sn(w)+".");N=a(w)}E.push(g+N)}return E.push("}"),E.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,g,N,k,E={},b=1,S=E,L=[],M="",Y="",oe=m.length-1,Z=1;Z<oe;Z+=1)(k=m[Z])=="'"?w?(N=w.join(""),w=void 0):w=[]:w?w.push(k):k=="{"?(L.push([S,N]),S={},N=void 0):k=="}"?((g=L.pop())[0][g[1]]=S,N=void 0,S=g[0]):k=="-"?b=-1:N===void 0?n.hasOwnProperty(k)?(M+=n[k],N=parseInt(M,16)*b,b=1,M=""):M+=k:n.hasOwnProperty(k)?(Y+=n[k],S[N]=parseInt(Y,16)*b,b=1,N=void 0,Y=""):Y+=k;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var w=m.font,g=p.Unicode[w.postScriptName];g&&(w.metadata.Unicode={},w.metadata.Unicode.widths=g.widths,w.metadata.Unicode.kerning=g.kerning);var N=f.Unicode[w.postScriptName];N&&(w.metadata.Unicode.encoding=N,w.encoding=N.codePages[0])}])}(Ct.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Bh(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Ct),function(e){function t(){return(At.canvg?Promise.resolve(At.canvg):sl(()=>import("./index.es-DbjAP8ob.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ct.API.addSvgAsImage=function(n,r,i,s,a,l,c,f){if(isNaN(r)||isNaN(i))throw Tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(m,n,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(w)}).then(function(){g.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,c,f)})}}(),Ct.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Ct.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],f=0,p=0,m=0;function w(N,k){var E,b=!1;for(E=0;E<N.length;E+=1)N[E]===k&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(m=0;m<g;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(Sn(e)==="object"){for(i in e)if(s=e[i],w(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&w(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,k=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?k.push("/"+N+" /"+n[N].value):k.push("/"+N+" "+n[N].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ct.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],m=0,w=s.length;m<w;++m){if(l=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(f[4-l.length],l)}return p.join("")},r=function(s){var a,l,c,f,p,m,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,w=(l=Object.keys(s).sort(function(g,N){return g-N})).length;m<w;m++)a=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+f+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,w=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",N=0;N<w.length;N++)g+=String.fromCharCode(w[N]);var k=f();p({data:g,addLength1:!0,objectId:k}),c("endobj");var E=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var b=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+$d(l.fontName)),c("/FontFile2 "+k+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+$d(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+$d(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,w="",g=0;g<m.length;g++)w+=String.fromCharCode(m[g]);var N=f();p({data:w,addLength1:!0,objectId:N}),c("endobj");var k=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var E=f();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+$d(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=f();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+$d(l.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",c=s.x,f=s.y,p=s.options||{},m=s.mutex||{},w=m.pdfEscape,g=m.activeFontKey,N=m.fonts,k=g,E="",b=0,S="",L=N[k].encoding;if(N[k].encoding!=="Identity-H")return{text:l,x:c,y:f,options:p,mutex:m};for(S=l,k=g,Array.isArray(l)&&(S=l[0]),b=0;b<S.length;b+=1)N[k].metadata.hasOwnProperty("cmap")&&(a=N[k].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),a||S[b].charCodeAt(0)<256&&N[k].metadata.hasOwnProperty("Unicode")?E+=S[b]:E+="";var M="";return parseInt(k.slice(1))<14||L==="WinAnsiEncoding"?M=w(E,k).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(M=n(E,N[k])),m.isHex=!0,{text:M,x:c,y:f,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?l.push([i(Object.assign({},c,{text:a[f][0]})).text,a[f][1],a[f][2]]):l.push(i(Object.assign({},c,{text:a[f]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:a})).text}])}(Ct),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ct.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,l,c,f,p,m=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,L=0;this.__bidiEngine__={};var M=function(O){var U=O.charCodeAt(),K=U>>8,J=k[K];return J!==void 0?m[256*J+(255&U)]:K===252||K===253?"AL":b.test(K)?"L":K===8?"R":"N"},Y=function(O){for(var U,K=0;K<O.length;K++){if((U=M(O.charAt(K)))==="L")return!1;if(U==="R")return!0}return!1},oe=function(O,U,K,J){var xe,ye,Q,$,q=U[J];switch(q){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(q="AN");break;case"AL":S=!0,q="R";break;case"WS":q="N";break;case"CS":J<1||J+1>=U.length||(xe=K[J-1])!=="EN"&&xe!=="AN"||(ye=U[J+1])!=="EN"&&ye!=="AN"?q="N":S&&(ye="AN"),q=ye===xe?ye:"N";break;case"ES":q=(xe=J>0?K[J-1]:"B")==="EN"&&J+1<U.length&&U[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&K[J-1]==="EN"){q="EN";break}if(S){q="N";break}for(Q=J+1,$=U.length;Q<$&&U[Q]==="ET";)Q++;q=Q<$&&U[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for($=U.length,Q=J+1;Q<$&&U[Q]==="NSM";)Q++;if(Q<$){var se=O[J],Ae=se>=1425&&se<=2303||se===64286;if(xe=U[Q],Ae&&(xe==="R"||xe==="AL")){q="R";break}}}q=J<1||(xe=U[J-1])==="B"?"N":K[J-1];break;case"B":S=!1,i=!0,q=L;break;case"S":s=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":q="N"}return q},Z=function(O,U,K){var J=O.split("");return K&&R(J,K,{hiLevel:L}),J.reverse(),U&&U.reverse(),J.join("")},R=function(O,U,K){var J,xe,ye,Q,$,q=-1,se=O.length,Ae=0,P=[],H=L?g:w,re=[];for(S=!1,i=!1,s=!1,xe=0;xe<se;xe++)re[xe]=M(O[xe]);for(ye=0;ye<se;ye++){if($=Ae,P[ye]=oe(O,re,P,ye),J=240&(Ae=H[$][N[P[ye]]]),Ae&=15,U[ye]=Q=H[Ae][5],J>0)if(J===16){for(xe=q;xe<ye;xe++)U[xe]=1;q=-1}else q=-1;if(H[Ae][6])q===-1&&(q=ye);else if(q>-1){for(xe=q;xe<ye;xe++)U[xe]=Q;q=-1}re[ye]==="B"&&(U[ye]=0),K.hiLevel|=Q}s&&function(ce,he,ke){for(var Ee=0;Ee<ke;Ee++)if(ce[Ee]==="S"){he[Ee]=L;for(var te=Ee-1;te>=0&&ce[te]==="WS";te--)he[te]=L}}(re,U,se)},ee=function(O,U,K,J,xe){if(!(xe.hiLevel<O)){if(O===1&&L===1&&!i)return U.reverse(),void(K&&K.reverse());for(var ye,Q,$,q,se=U.length,Ae=0;Ae<se;){if(J[Ae]>=O){for($=Ae+1;$<se&&J[$]>=O;)$++;for(q=Ae,Q=$-1;q<Q;q++,Q--)ye=U[q],U[q]=U[Q],U[Q]=ye,K&&(ye=K[q],K[q]=K[Q],K[Q]=ye);Ae=$}Ae++}}},ae=function(O,U,K){var J=O.split(""),xe={hiLevel:L};return K||(K=[]),R(J,K,xe),function(ye,Q,$){if($.hiLevel!==0&&p)for(var q,se=0;se<ye.length;se++)Q[se]===1&&(q=E.indexOf(ye[se]))>=0&&(ye[se]=E[q+1])}(J,K,xe),ee(2,J,U,K,xe),ee(1,J,U,K,xe),J.join("")};return this.__bidiEngine__.doBidiReorder=function(O,U,K){if(function(xe,ye){if(ye)for(var Q=0;Q<xe.length;Q++)ye[Q]=Q;l===void 0&&(l=Y(xe)),f===void 0&&(f=Y(xe))}(O,U),a||!c||f)if(a&&c&&l^f)L=l?1:0,O=Z(O,U,K);else if(!a&&c&&f)L=l?1:0,O=ae(O,U,K),O=Z(O,U);else if(!a||l||c||f){if(a&&!c&&l^f)O=Z(O,U),l?(L=0,O=ae(O,U,K)):(L=1,O=ae(O,U,K),O=Z(O,U));else if(a&&l&&!c&&f)L=1,O=ae(O,U,K),O=Z(O,U);else if(!a&&!c&&l^f){var J=p;l?(L=1,O=ae(O,U,K),L=0,p=!1,O=ae(O,U,K),p=J):(L=0,O=ae(O,U,K),O=Z(O,U),L=1,p=!1,O=ae(O,U,K),p=J,O=Z(O,U))}}else L=0,O=ae(O,U,K);else L=l?1:0,O=ae(O,U,K);return O},this.__bidiEngine__.setOptions=function(O){O&&(a=O.isInputVisual,c=O.isOutputVisual,l=O.isInputRtl,f=O.isOutputRtl,p=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Ct),Ct.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Tc(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new RB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new SB(this.contents),this.head=new kB(this),this.name=new LB(this),this.cmap=new L6(this),this.toUnicode={},this.hhea=new EB(this),this.maxp=new PB(this),this.hmtx=new TB(this),this.post=new CB(this),this.os2=new jB(this),this.loca=new MB(this),this.glyf=new IB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,f;for(f=[],a=0,l=(c=this.bbox).length;a<l;a++)t=c[a],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,l;for(a=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var $a,Tc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),SB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,l,c,f,p,m,w,g,N,k;for(k in g=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(g)/c),a=Math.floor(m/c),p=16*g-m,(i=new Tc).writeInt(this.scalarType),i.writeShort(g),i.writeShort(m),i.writeShort(a),i.writeShort(p),s=16*g,f=i.pos+s,l=null,N=[],n)for(w=n[k],i.writeString(k),i.writeInt(e(w)),i.writeInt(f),i.writeInt(w.length),N=N.concat(w),k==="head"&&(l=f),f+=w.length;f%4;)N.push(0),f++;return i.write(N),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=P6.call(n);n.length%4;)n.push(0);for(s=new Tc(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),NB={}.hasOwnProperty,bo=function(e,t){for(var n in t)NB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};$a=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var kB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Tc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),K_=function(){function e(t,n){var r,i,s,a,l,c,f,p,m,w,g,N,k,E,b,S,L;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),w=g/2,t.pos+=6,s=function(){var M,Y;for(Y=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)Y.push(t.readUInt16());return Y}(),t.pos+=2,k=function(){var M,Y;for(Y=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)Y.push(t.readUInt16());return Y}(),f=function(){var M,Y;for(Y=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)Y.push(t.readUInt16());return Y}(),p=function(){var M,Y;for(Y=[],c=M=0;0<=w?M<w:M>w;c=0<=w?++M:--M)Y.push(t.readUInt16());return Y}(),i=(this.length-t.pos+this.offset)/2,l=function(){var M,Y;for(Y=[],c=M=0;0<=i?M<i:M>i;c=0<=i?++M:--M)Y.push(t.readUInt16());return Y}(),c=b=0,L=s.length;b<L;c=++b)for(E=s[c],r=S=N=k[c];N<=E?S<=E:S>=E;r=N<=E?++S:--S)p[c]===0?a=r+f[c]:(a=l[p[c]/2+(r-N)-(w-c)]||0)!==0&&(a+=f[c]),this.codeMap[r]=65535&a}t.pos=m}return e.encode=function(t,n){var r,i,s,a,l,c,f,p,m,w,g,N,k,E,b,S,L,M,Y,oe,Z,R,ee,ae,O,U,K,J,xe,ye,Q,$,q,se,Ae,P,H,re,ce,he,ke,Ee,te,le,ue,pe;switch(J=new Tc,a=Object.keys(t).sort(function(je,Oe){return je-Oe}),n){case"macroman":for(k=0,E=function(){var je=[];for(N=0;N<256;++N)je.push(0);return je}(),S={0:0},s={},xe=0,q=a.length;xe<q;xe++)S[te=t[i=a[xe]]]==null&&(S[te]=++k),s[i]={old:t[i],new:S[t[i]]},E[i]=S[t[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(E),{charMap:s,subtable:J.data,maxGlyphID:k+1};case"unicode":for(U=[],m=[],L=0,S={},r={},b=f=null,ye=0,se=a.length;ye<se;ye++)S[Y=t[i=a[ye]]]==null&&(S[Y]=++L),r[i]={old:Y,new:S[Y]},l=S[Y]-i,b!=null&&l===f||(b&&m.push(b),U.push(i),f=l),b=i;for(b&&m.push(b),m.push(65535),U.push(65535),ae=2*(ee=U.length),R=2*Math.pow(Math.log(ee)/Math.LN2,2),w=Math.log(R/2)/Math.LN2,Z=2*ee-R,c=[],oe=[],g=[],N=Q=0,Ae=U.length;Q<Ae;N=++Q){if(O=U[N],p=m[N],O===65535){c.push(0),oe.push(0);break}if(O-(K=r[O].new)>=32768)for(c.push(0),oe.push(2*(g.length+ee-N)),i=$=O;O<=p?$<=p:$>=p;i=O<=p?++$:--$)g.push(r[i].new);else c.push(K-O),oe.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*ee+2*g.length),J.writeUInt16(0),J.writeUInt16(ae),J.writeUInt16(R),J.writeUInt16(w),J.writeUInt16(Z),ke=0,P=m.length;ke<P;ke++)i=m[ke],J.writeUInt16(i);for(J.writeUInt16(0),Ee=0,H=U.length;Ee<H;Ee++)i=U[Ee],J.writeUInt16(i);for(le=0,re=c.length;le<re;le++)l=c[le],J.writeUInt16(l);for(ue=0,ce=oe.length;ue<ce;ue++)M=oe[ue],J.writeUInt16(M);for(pe=0,he=g.length;pe<he;pe++)k=g[pe],J.writeUInt16(k);return{charMap:r,subtable:J.data,maxGlyphID:L+1}}},e}(),L6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new K_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=K_.encode(n,r),(s=new Tc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),EB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),jB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),CB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,f;for(f=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)f.push(n.readUInt32());return f}).call(this)}},t}(),AB=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},LB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,a,l,c,f,p,m,w,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(f={},a=m=0,w=i.length;m<w;a=++m)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new AB(p,s),f[g=s.nameID]==null&&(f[g]=[]),f[s.nameID].push(l);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t}(),PB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),TB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,a,l,c,f;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)m.push(n.readInt16());return m}(),this.widths=(function(){var p,m,w,g;for(g=[],p=0,m=(w=this.metrics).length;p<m;p++)a=w[p],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],f=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)f.push(this.widths.push(i));return f},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),P6=[].slice,IB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,a,l,c,f,p,m,w;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Tc(r.read(s))).readShort(),p=c.readShort(),w=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[n]=l===-1?new OB(c,p,w,f,m):new DB(c,l,p,w,f,m),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,a,l,c,f;for(l=[],a=[],c=0,f=r.length;c<f;c++)s=n[r[c]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),DB=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),OB=function(){function e(t,n,r,i,s){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Tc(P6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),MB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return bo(t,$a),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var c=this.offsets[l],f=this.offsets[l+1]-c;f>0&&(s+=f)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},t}(),RB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,l,c;for(i={},a=0,l=t.length;a<l;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,l,c,f,p,m,w,g,N,k,E,b;for(i in r=L6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),g={0:0},b=r.charMap)g[(c=b[i]).old]=c.new;for(N in w=r.maxGlyphID,a)N in g||(g[N]=w++);return p=function(S){var L,M;for(L in M={},S)M[S[L]]=L;return M}(g),m=Object.keys(p).sort(function(S,L){return S-L}),k=function(){var S,L,M;for(M=[],S=0,L=m.length;S<L;S++)l=m[S],M.push(p[l]);return M}(),s=this.font.glyf.encode(a,k,g),f=this.font.loca.encode(s.offsets,k),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},e}();Ct.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,c,f;for(f=[],l=0,c=n.length;l<c;l++)r=n[l],f.push(t.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();const FB=(e,t,n,r=!1)=>{var Z,R;const i=new Ct("p","mm","a4"),s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),l=r?"#FFFFFF":"#1E2A47",c=r?"#000000":"#F95738",f="helvetica";r||(i.setFillColor(l),i.rect(0,0,s,a,"F"));const p=[...((Z=e.songs)==null?void 0:Z.map(ee=>({...ee,type:"song"})))||[],...((R=e.medleys)==null?void 0:R.map(ee=>({...ee,type:"medley"})))||[]].sort((ee,ae)=>ee.position-ae.position),m=30,w=10,g=s-60,N=p.length>20,k=N?(g-20)/2:g,E=20,b=E+k+20;let S=18,L=w;p.length>30?(S=14,L=8):p.length>25&&(S=16,L=9),i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c);let M=m;if(N){const ee=Math.ceil(p.length/2),ae=p.slice(0,ee),O=p.slice(ee);let U=M;ae.forEach((J,xe)=>{let ye="";if(J.type==="song"){const se=J;se.song&&(ye=se.song.title)}else J.type==="medley"&&(ye=J.name||"Medley");const $=`${String(xe+1).padStart(2,"0")}. ${ye}`,q=i.splitTextToSize($.toUpperCase(),k);i.text(q,E,U),U+=q.length*L});let K=M;O.forEach((J,xe)=>{let ye="";if(J.type==="song"){const se=J;se.song&&(ye=se.song.title)}else J.type==="medley"&&(ye=J.name||"Medley");const $=`${String(ee+xe+1).padStart(2,"0")}. ${ye}`,q=i.splitTextToSize($.toUpperCase(),k);i.text(q,b,K),K+=q.length*L})}else p.forEach((ee,ae)=>{M>a-50&&(i.addPage(),r||(i.setFillColor(l),i.rect(0,0,s,a,"F")),M=m,i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c));let O="";if(ee.type==="song"){const xe=ee;xe.song&&(O=xe.song.title)}else ee.type==="medley"&&(O=ee.name||"Medley");const K=`${String(ae+1).padStart(2,"0")}. ${O}`,J=i.splitTextToSize(K.toUpperCase(),k);i.text(J,E,M),M+=J.length*L});const Y=i.getNumberOfPages();for(let ee=1;ee<=Y;ee++){i.setPage(ee),i.setFont(f,"bold"),i.setFontSize(48),i.setTextColor(c);const ae=(n||"YOUR BAND").toUpperCase();i.text(ae,s-20,m,{angle:-90,align:"left"})}const oe=ee=>new Date(ee).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});if(t){i.setFont(f,"normal"),i.setFontSize(10),i.setTextColor(c);const ee=[t.name||"The Arena",t.location||"Town, Country",oe(t.date)];i.text(ee,s-20,a-30,{align:"right"})}return i},$B=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:s})=>{const[a,l]=C.useState(!0),c=(f=!1)=>{if(!n)return;const m=FB(n,r&&i?{name:r,date:i}:void 0,s,f),g=`${s||"Setlist"} - ${r||"Event"}${f?" (Print)":" (Digital)"}.pdf`;if(f){const N=m.output("blob"),k=URL.createObjectURL(N);window.open(k,"_blank")}else m.save(g)};return h.jsx(h.Fragment,{children:h.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:h.jsx("div",{className:`bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:f=>f.stopPropagation(),children:n&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 border-b border-gray-200 gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[h.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg flex-shrink-0",children:h.jsx(Yr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),h.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:n.name})]}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 print:hidden flex-wrap",children:[h.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-2 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-xs",title:"Descargar PDF Digital",children:[h.jsx(q0,{className:"w-3 h-3"}),"Digital"]}),h.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-2 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs",title:"Descargar PDF para Imprimir",children:[h.jsx(q0,{className:"w-3 h-3"}),"Impresión"]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),h.jsx("button",{onClick:()=>l(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-indigo-600":"bg-gray-200"}`,children:h.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:h.jsx(Ta,{className:"w-6 h-6"})})]})]}),h.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&h.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const f=C.useMemo(()=>n!=null&&n.songs?n.songs.map(g=>{var N;return{...g,type:((N=g.song)==null?void 0:N.type)==="medley"?"medley":"song"}}).sort((g,N)=>g.position-N.position):[],[n==null?void 0:n.songs]),p=f.length,m=p>10,w=m?Math.ceil(p/2):p;return p===0?h.jsx("div",{className:"text-center py-10",children:h.jsx("p",{className:"text-gray-500",children:"Este setlist está vacío."})}):h.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${w}, auto)`,gridAutoFlow:"column",gridTemplateColumns:m?"1fr 1fr":"1fr"},children:f.map((g,N)=>{var k,E,b,S,L,M,Y;return g.type==="medley"?h.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:h.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[h.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[N+1,"."]}),h.jsxs("div",{className:"flex-grow",children:[h.jsx("p",{className:"text-indigo-600 font-bold",children:(k=g.song)==null?void 0:k.title}),h.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((b=(E=g.song)==null?void 0:E.medley_song_ids)==null?void 0:b.length)||0," canciones)"]})]})]})},`medley-${g.id}`):h.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[h.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[N+1,"."]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((S=g.song)==null?void 0:S.title)||"N/A"}),h.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${a&&((L=g.song)!=null&&L.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(M=g.song)==null?void 0:M.artist})]})]},`song-${((Y=g.song)==null?void 0:Y.id)||N}`)})})})()]})]})})})})};function BB({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,s]=C.useState([]),[a,l]=C.useState(!0),[c,f]=C.useState(null),[p,m]=C.useState(!1),[w,g]=C.useState(!1),[N,k]=C.useState("upcoming"),[E,b]=C.useState(null),[S,L]=C.useState(null),[M,Y]=C.useState("");C.useEffect(()=>{oe()},[e]);const oe=async()=>{try{l(!0);const{data:Q,error:$}=await Ze.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if($)throw $;if(Q){const q=await Promise.all(Q.map(async se=>{const{data:Ae,error:P}=await Ze.from("event_members").select("group_member_id, user_id").eq("event_id",se.id);if(P)return console.error("Error loading event members:",P),{...se,members:[]};const H=(Ae==null?void 0:Ae.map(re=>{const ce=r.find(he=>he.id===re.group_member_id);return{group_member_id:re.group_member_id,user_id:re.user_id,member_name:(ce==null?void 0:ce.name)||"Unknown Member",role_in_group:(ce==null?void 0:ce.role_in_group)||"principal"}}))||[];return{...se,members:H}}));s(q)}}catch(Q){console.error("Error fetching events:",Q),Pe.error("Error loading events")}finally{l(!1)}},Z=async Q=>{if(window.confirm("¿Estás seguro de que quieres eliminar este evento?"))try{const{data:$,error:q}=await Ze.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",Q);if(q)throw q;const{error:se}=await Ze.from("events").delete().eq("id",Q);if(se)throw se;$&&$.length>0&&(console.log("Actualizando calendarios después de eliminar evento"),await Promise.all($.filter(Ae=>Ae.group_members.sync_calendar).map(async Ae=>{try{await u6(e,Ae.group_member_id),console.log("Calendario actualizado para miembro:",Ae.group_member_id)}catch(P){console.error("Error actualizando calendario para miembro:",Ae.group_member_id,P)}}))),Pe.success("Evento eliminado correctamente"),oe()}catch($){console.error("Error deleting event:",$),Pe.error("Error al eliminar el evento")}},R=Q=>{f(Q),g(!0)},ee=async Q=>{try{const{data:q,error:se}=await Ze.from("groups").select("name").eq("id",Q.group_id).single();if(se)throw se;Y((q==null?void 0:q.name)||"")}catch{Y("")}const $=Q.setlist;if(!$){console.warn("Se intentó abrir un preview con un setlist undefined");return}if(L({name:Q.name,date:Q.date}),!$){console.warn("Se intentó abrir un preview con un setlist undefined");return}try{const{data:q,error:se}=await Ze.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",$.id).single();if(se)throw se;q&&b(q)}catch(q){console.error("Error al cargar el setlist completo:",q),Pe.error("Error al cargar el setlist")}};if(a)return h.jsx("div",{className:"text-center py-4",children:"Cargando eventos..."});const ae=Q=>{const $=Q.reduce((q,se)=>{const Ae=ln(pu(se.date),"MMMM yyyy");return q[Ae]||(q[Ae]=[]),q[Ae].push(se),q},{});return Object.entries($)},O=Q=>{if(!Q)return"";if(console.log("Location raw:",Q),typeof Q=="object"&&Q!==null)return Q.name||String(Q);if(typeof Q!="string")return String(Q);if(Q.startsWith("{")||Q.startsWith("["))try{const $=JSON.parse(Q);return $.name||$.formatted_address||$.description||String($)}catch($){return console.log("Location parse error:",$),Q}return Q},U=Q=>{if(!Q)return;const $=O(Q);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent($)}`,"_blank")},K=Q=>{const $=Q.members.filter(se=>se.role_in_group==="principal"),q=Q.members.filter(se=>se.role_in_group==="sustituto");return h.jsxs("div",{className:"mt-1.5 space-y-1",children:[h.jsx("div",{className:"flex flex-wrap gap-1",children:$.map(se=>h.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:se.member_name},se.group_member_id))}),q.length>0&&h.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),q.map(se=>h.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:se.member_name},se.group_member_id))]}),Q.location&&h.jsx("div",{className:"flex items-center gap-1 mt-1",children:h.jsxs("button",{onClick:()=>U(Q.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[h.jsx(s0,{className:"w-3 h-3 mr-1"}),h.jsx("span",{className:"underline",children:J(O(Q.location))})]})})]})},J=(Q,$=40)=>{if(!Q)return"";if(Q.includes(",")){const q=Q.split(",")[0];return q.length<=$?q:`${q.slice(0,$)}...`}return Q.length>$?`${Q.slice(0,$)}...`:Q},xe=i.filter(Q=>{const $=pu(Q.date);return w_(Lc($))||x_($)}),ye=i.filter(Q=>{const $=pu(Q.date);return!w_(Lc($))&&!x_($)});return h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Eventos"}),t&&h.jsx(wt,{onClick:()=>m(!0),children:"Añadir Evento"})]}),i.length===0?h.jsxs("div",{className:"text-center py-6 text-gray-500",children:[h.jsx(U0,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),h.jsx("p",{children:"No hay eventos programados"})]}):h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"border-b border-gray-200",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsxs("button",{onClick:()=>k("upcoming"),className:`${N==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[h.jsx("span",{children:"Próximos eventos"}),xe.length>0&&h.jsx("span",{className:`${N==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:xe.length})]}),h.jsxs("button",{onClick:()=>k("past"),className:`${N==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[h.jsx("span",{children:"Eventos pasados"}),ye.length>0&&h.jsx("span",{className:`${N==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:ye.length})]})]})}),h.jsx("div",{className:"mt-4 space-y-6",children:ae(N==="upcoming"?xe:ye).map(([Q,$])=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:Q}),h.jsx("div",{className:"space-y-1",children:$.map(q=>h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:h.jsx("div",{className:"p-3",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[h.jsx("div",{className:"text-lg font-bold text-gray-900",children:ln(pu(q.date),"d")}),h.jsx("div",{className:"text-xs text-gray-500 uppercase",children:ln(pu(q.date),"EEE")})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:q.name}),h.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-0.5",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(z0,{className:"w-3 h-3 mr-1"}),ln(pu(`2000-01-01T${q.time}`),"h:mm a")]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(W0,{className:"w-3 h-3 mr-1"}),q.members.length]}),q.setlist?h.jsxs("div",{className:"flex items-center",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1 text-blue-500"}),h.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>q.setlist&&ee(q),children:q.setlist.name}),h.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var P,H;const se=((P=q.setlist.songs)==null?void 0:P.filter(re=>{var ce,he;return((ce=re.song)==null?void 0:ce.type)==="song"||!((he=re.song)!=null&&he.type)}))||[],Ae=((H=q.setlist.songs)==null?void 0:H.filter(re=>{var ce;return((ce=re.song)==null?void 0:ce.type)==="medley"}))||[];return`(${se.length} canciones${Ae.length>0?`, ${Ae.length} medleys`:""})`})()})]}):h.jsxs("div",{className:"flex items-center",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1 text-gray-300"}),h.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),K(q),q.notes&&h.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:q.notes})]}),t&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>R(q),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:h.jsx(gN,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>Z(q.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:h.jsx(C5,{className:"w-4 h-4"})})]})]})})},q.id))})]},Q))})]})]})}),h.jsx(A_,{isOpen:p,onClose:()=>m(!1),groupId:e,onEventSaved:()=>{oe(),m(!1)},availableDates:n,members:r}),c&&h.jsx(A_,{isOpen:w,onClose:()=>{g(!1),f(null)},groupId:e,event:c,onEventSaved:()=>{oe(),g(!1),f(null)},availableDates:[...n,pu(c.date)],members:r}),E&&h.jsx($B,{isOpen:!!E,onClose:()=>{b(null),L(null),Y("")},setlist:E,eventName:S==null?void 0:S.name,eventDate:S==null?void 0:S.date,bandName:M})]})}function UB({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[h.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Ta,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("p",{className:"text-gray-700 mb-6",children:i}),h.jsxs("div",{className:"flex justify-end space-x-3",children:[h.jsx(wt,{variant:"secondary",onClick:t,children:"Cancelar"}),h.jsx(wt,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function zB({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),Pe.success("URL copiada al portapapeles")};return h.jsxs(Iu,{open:e,onClose:t,className:"relative z-50",children:[h.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),h.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:h.jsxs(Iu.Panel,{className:"mx-auto max-w-md rounded-lg bg-white p-6",children:[h.jsxs(Iu.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[h.jsx(U0,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),h.jsxs("div",{className:"mt-4 space-y-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),h.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[h.jsx("li",{children:"Abre Google Calendar"}),h.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),h.jsx("li",{children:'Selecciona "Desde URL"'}),h.jsx("li",{children:'Pega la URL del calendario y haz clic en "Añadir calendario"'})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),h.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[h.jsx("li",{children:"Abre la aplicación Calendario"}),h.jsx("li",{children:"Ve a Archivo → Nueva suscripción a calendario"}),h.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),h.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[h.jsx("li",{children:"Abre Outlook Calendar"}),h.jsx("li",{children:'Ve a "Añadir calendario" → "Desde Internet"'}),h.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),h.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[h.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2"}),h.jsxs(wt,{onClick:r,variant:"secondary",className:"flex items-center gap-1",children:[h.jsx(HD,{className:"w-4 h-4"}),"Copiar"]})]})]})]}),h.jsx("div",{className:"mt-6 flex justify-end",children:h.jsx(wt,{onClick:t,children:"Cerrar"})})]})})]})}const Ap=()=>{const[e,t]=C.useState(!1),[n,r]=C.useState(null),[i,s]=C.useState(!0),[a,l]=C.useState(!1);C.useEffect(()=>{if(a)return;(async()=>{try{if(console.log("🎵 Checking Spotify auth status..."),console.log("🎵 Is authenticated:",qn.isAuthenticated()),qn.isAuthenticated()){console.log("🎵 Getting user data...");const b=await qn.getCurrentUser();console.log("🎵 User data:",b),r(b),t(!0)}}catch(b){console.error("❌ Error checking Spotify auth status:",b),qn.logout(),t(!1),r(null)}finally{s(!1),l(!0)}})()},[a]),C.useEffect(()=>{const E=async()=>{console.log("🎵 Received Spotify auth event, refreshing status...");try{if(qn.isAuthenticated()){const b=await qn.getCurrentUser();r(b),t(!0)}else t(!1),r(null)}catch(b){console.error("❌ Error refreshing Spotify auth status:",b),qn.logout(),t(!1),r(null)}};return window.addEventListener("spotifyAuthCompleted",E),()=>{window.removeEventListener("spotifyAuthCompleted",E)}},[]);const c=C.useCallback(async()=>{try{console.log("🎵 Starting Spotify login...");const E=await qn.getAuthUrl();console.log("🎵 Got auth URL, redirecting..."),window.location.href=E}catch(E){console.error("❌ Error getting Spotify auth URL:",E),Pe.error(`Error al conectar con Spotify: ${E.message}`)}},[]),f=C.useCallback(()=>{qn.logout(),t(!1),r(null),Pe.success("Desconectado de Spotify")},[]),p=C.useCallback(async E=>{if(!e)throw new Error("No authenticated with Spotify");try{return await qn.searchTracks(E)}catch(b){throw console.error("Error searching tracks:",b),Pe.error("Error al buscar canciones en Spotify"),b}},[e]),m=C.useCallback(async(E,b)=>{if(!e)return Pe.error("Debes conectar con Spotify primero"),null;try{const S=await qn.createPlaylist(`Band Plan - ${E}`,"Setlist generado automáticamente desde Band Plan",!1),L=b.filter(M=>M.id).map(M=>`spotify:track:${M.id}`);return L.length>0&&await qn.addTracksToPlaylist(S.id,L),Pe.success(`Playlist "${S.name}" creada en Spotify`),S.external_urls.spotify}catch(S){return console.error("Error creating playlist:",S),Pe.error("Error al crear playlist en Spotify"),null}},[e]),w=C.useCallback(async E=>{if(!e){Pe.error("Debes conectar con Spotify primero");return}try{await qn.playTrack(E)}catch(b){console.error("Error playing track:",b),Pe.error("Error al reproducir canción. Asegúrate de tener Spotify abierto.")}},[e]),g=C.useCallback(async()=>{if(e)try{await qn.pausePlayback()}catch(E){console.error("Error pausing playback:",E),Pe.error("Error al pausar reproducción")}},[e]),N=C.useCallback(async()=>{if(e)try{await qn.resumePlayback()}catch(E){console.error("Error resuming playback:",E),Pe.error("Error al reanudar reproducción")}},[e]),k=C.useCallback(async()=>{try{if(qn.isAuthenticated()){const E=await qn.getCurrentUser();r(E),t(!0)}else t(!1),r(null)}catch(E){console.error("❌ Error refreshing Spotify auth status:",E),qn.logout(),t(!1),r(null)}},[]);return{isAuthenticated:e,user:n,loading:i,login:c,logout:f,searchTracks:p,createPlaylistFromSetlist:m,playTrack:w,pausePlayback:g,resumePlayback:N,refreshAuthStatus:k}},qB=({className:e="",compact:t=!1})=>{var c,f;const{isAuthenticated:n,user:r,loading:i,login:s,logout:a}=Ap(),l=()=>{console.log("🎵 Resetting Spotify authentication state..."),qn.clearAuthState(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const p=new URL(window.location.href);(p.searchParams.has("code")||p.searchParams.has("state"))&&(p.searchParams.delete("code"),p.searchParams.delete("state"),p.searchParams.delete("error"),window.history.replaceState({},document.title,p.toString())),Pe.success("Estado de Spotify limpiado. Puedes intentar conectar de nuevo.")};return i?h.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[h.jsx(go,{className:"w-4 h-4 animate-spin text-green-500"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Conectando con Spotify..."})]}):n?t?h.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[((c=r==null?void 0:r.images)==null?void 0:c[0])&&h.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),h.jsx("span",{className:"text-sm text-gray-700",children:r==null?void 0:r.display_name}),h.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Desconectar Spotify",children:h.jsx(X2,{className:"w-4 h-4"})})]}):h.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-lg border border-green-200 ${e}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:h.jsx(Yr,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[((f=r==null?void 0:r.images)==null?void 0:f[0])&&h.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),h.jsxs("span",{className:"font-medium text-gray-900",children:["Conectado como ",r==null?void 0:r.display_name]})]}),h.jsx("p",{className:"text-sm text-gray-600",children:"Spotify conectado correctamente"})]})]}),h.jsxs(wt,{onClick:a,variant:"secondary",size:"sm",children:[h.jsx(X2,{className:"w-4 h-4 mr-2"}),"Desconectar"]})]})}):t?h.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm ${e}`,children:[h.jsx(Yr,{className:"w-4 h-4"}),"Conectar Spotify"]}):h.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-lg border border-green-200 ${e}`,children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"bg-green-500 p-3 rounded-full",children:h.jsx(Yr,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Conecta con Spotify"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Conecta tu cuenta de Spotify para acceder a funciones avanzadas como búsqueda de canciones, creación automática de playlists, y reproducción de previews."}),h.jsxs("ul",{className:"text-sm text-gray-600 mb-4 space-y-1",children:[h.jsx("li",{children:"• Búsqueda automática de canciones con datos completos"}),h.jsx("li",{children:"• Crear playlists automáticamente desde tus setlists"}),h.jsx("li",{children:"• Reproducir previews de canciones"}),h.jsx("li",{children:"• Control de reproducción desde la app"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs(wt,{onClick:s,variant:"primary",className:"bg-green-500 hover:bg-green-600 text-white",children:[h.jsx(Yr,{className:"w-4 h-4 mr-2"}),"Conectar con Spotify"]}),h.jsxs(wt,{onClick:l,variant:"secondary",className:"text-gray-600 hover:text-gray-800",title:"Limpiar estado de Spotify si hay problemas",children:[h.jsx(YD,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})})},WB=({onSpotifyTrackSelect:e,onDeezerTrackSelect:t,onManualAdd:n,placeholder:r="Buscar canciones o añadir manualmente...",className:i=""})=>{const{isAuthenticated:s,searchTracks:a,loading:l}=Ap(),[c,f]=C.useState(""),[p,m]=C.useState([]),[w,g]=C.useState([]),[N,k]=C.useState(!1),[E,b]=C.useState(!1),[S,L]=C.useState(null),M=C.useRef(null),Y=C.useRef(null),oe=C.useRef(),Z=c||"";C.useEffect(()=>{const q=se=>{M.current&&!M.current.contains(se.target)&&b(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]),C.useEffect(()=>{if(Z.length<2){m([]),g([]);return}return oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{R(Z)},300),()=>{oe.current&&clearTimeout(oe.current)}},[Z,s]);const R=async q=>{if(k(!0),s)try{const se=await a(q);m(se),b(!0)}catch(se){console.error("Error searching tracks:",se),m([]),b(!0)}else try{const Ae=await(await fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(q)}`)).json();g(Ae.data||[]),b(!0)}catch(se){console.error("Error searching Deezer:",se),g([]),b(!0)}k(!1)},ee=q=>{e(q),f(""),m([]),g([]),b(!1),K()},ae=q=>{t&&t(q),f(""),m([]),g([]),b(!1),K()},O=()=>{n(Z),f(""),m([]),g([]),b(!1),K()},U=q=>{if(S===q.id){K();return}if(!q.preview_url){Pe.error("Preview no disponible para esta canción");return}K(),Y.current&&(Y.current.src=q.preview_url,Y.current.play(),L(q.id),Y.current.onended=()=>{L(null)})},K=()=>{Y.current&&(Y.current.pause(),Y.current.currentTime=0),L(null)},J=q=>{window.open(q.external_urls.spotify,"_blank"),Pe.success("Abriendo en Spotify")},xe=q=>{const se=Math.floor(q/6e4),Ae=Math.floor(q%6e4/1e3);return`${se}:${Ae.toString().padStart(2,"0")}`},ye=q=>{const se=Math.floor(q/60),Ae=q%60;return`${se}:${Ae.toString().padStart(2,"0")}`},Q=q=>{if(S===q.id.toString()){K();return}if(!q.preview){Pe.error("Preview no disponible para esta canción");return}K(),Y.current&&(Y.current.src=q.preview,Y.current.play(),L(q.id.toString()),Y.current.onended=()=>{L(null)})},$=q=>{window.open(q.link,"_blank"),Pe.success("Abriendo en Deezer")};return l?h.jsx("div",{className:`relative ${i}`,children:h.jsxs("div",{className:"relative",children:[h.jsx(Q2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),h.jsx("input",{type:"text",placeholder:"Cargando...",disabled:!0,value:"",readOnly:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-lg"})]})}):h.jsxs("div",{ref:M,className:`relative ${i}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx(Q2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),h.jsx("input",{type:"text",value:Z,onChange:q=>f(q.target.value||""),placeholder:r,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg shadow-sm",onFocus:()=>b(!0)}),N&&h.jsx(go,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),E&&h.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[h.jsxs("div",{onClick:O,className:"p-4 hover:bg-blue-50 cursor-pointer border-b border-gray-100 flex items-center gap-3 bg-blue-25",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:h.jsx(Ig,{className:"w-6 h-6 text-blue-600"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-blue-900",children:"Añadir manualmente"}),h.jsx("p",{className:"text-sm text-blue-600",children:Z?`Crear "${Z}" con formulario`:"Usar formulario manual"})]})]}),s&&p.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100",children:h.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-2",children:[h.jsx(Yr,{className:"w-4 h-4"}),"Resultados de Spotify"]})}),p.map(q=>{var se,Ae;return h.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("img",{src:((se=q.album.images[2])==null?void 0:se.url)||((Ae=q.album.images[0])==null?void 0:Ae.url),alt:q.album.name,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),h.jsx("div",{className:"flex-1 min-w-0",onClick:()=>ee(q),children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("h4",{className:"font-medium text-gray-900 truncate",children:q.name}),h.jsx("p",{className:"text-sm text-gray-600 truncate",children:q.artists.map(P=>P.name).join(", ")}),h.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.album.name})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(z0,{className:"w-3 h-3"}),xe(q.duration_ms)]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(KD,{className:"w-3 h-3"}),q.popularity,"%"]})]})]})}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[q.preview_url&&h.jsx("button",{onClick:P=>{P.stopPropagation(),U(q)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Preview (30s)",children:S===q.id?h.jsx(r_,{className:"w-4 h-4"}):h.jsx(i_,{className:"w-4 h-4"})}),h.jsx("button",{onClick:P=>{P.stopPropagation(),J(q)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Abrir en Spotify",children:h.jsx(J2,{className:"w-4 h-4"})})]})]})},q.id)})]}),!s&&w.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-4 py-2 bg-orange-50 border-b border-orange-100",children:h.jsxs("p",{className:"text-sm text-orange-700 font-medium flex items-center gap-2",children:[h.jsx(Yr,{className:"w-4 h-4"}),"Resultados de Deezer"]})}),w.map(q=>h.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("img",{src:q.album.cover_small||q.album.cover,alt:q.album.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),h.jsx("div",{className:"flex-1 min-w-0",onClick:()=>ae(q),children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("h4",{className:"font-medium text-gray-900 truncate",children:q.title}),h.jsx("p",{className:"text-sm text-gray-600 truncate",children:q.artist.name}),h.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.album.title})]}),h.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(z0,{className:"w-3 h-3"}),ye(q.duration)]})})]})}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[q.preview&&h.jsx("button",{onClick:se=>{se.stopPropagation(),Q(q)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Preview (30s)",children:S===q.id.toString()?h.jsx(r_,{className:"w-4 h-4"}):h.jsx(i_,{className:"w-4 h-4"})}),h.jsx("button",{onClick:se=>{se.stopPropagation(),$(q)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Abrir en Deezer",children:h.jsx(J2,{className:"w-4 h-4"})})]})]})},q.id))]}),s&&p.length===0&&!N&&Z.length>=2&&h.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[h.jsx(Yr,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),h.jsxs("p",{children:['No se encontraron canciones en Spotify para "',Z,'"']})]}),!s&&w.length===0&&!N&&Z.length>=2&&h.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[h.jsx(Yr,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),h.jsxs("p",{children:['No se encontraron canciones en Deezer para "',Z,'"']})]})]}),h.jsx("audio",{ref:Y})]})},J_={title:"",artist:"",duration_minutes:"",key:"",notes:""},X_=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function HB({groupId:e,canManageSongs:t=!0}){const[n,r]=C.useState([]),[i,s]=C.useState(!0),[a,l]=C.useState(!1),[c,f]=C.useState(null),[p,m]=C.useState(J_),[w,g]=C.useState(!1),[N,k]=C.useState(null),[E,b]=C.useState(null),[S,L]=C.useState(""),[M,Y]=C.useState(!1),[oe,Z]=C.useState(null),[R,ee]=C.useState(""),[ae,O]=C.useState(""),[U,K]=C.useState("");Ap();const J=n.filter(te=>{var je;const le=!R||te.title.toLowerCase().includes(R.toLowerCase())||((je=te.artist)==null?void 0:je.toLowerCase().includes(R.toLowerCase())),ue=!ae||te.key===ae,pe=!U||te.type===U;return le&&ue&&pe}),xe=[...new Set(n.map(te=>te.key).filter(Boolean))].sort();C.useEffect(()=>{ye()},[e]);const ye=async()=>{s(!0);const te=await X0(e);te&&r(te),s(!1)},Q=async te=>{const{data:{user:le}}=await Ze.auth.getUser();if(!le){Pe.error("No se pudo obtener la información del usuario");return}const ue=Math.round(te.duration_ms/6e4),pe=`Popularidad: ${te.popularity}% | Álbum: ${te.album.name} (${te.album.release_date.split("-")[0]})`,je={title:te.name,artist:te.artists.map(Oe=>Oe.name).join(", "),duration_minutes:ue.toString(),key:"",notes:pe,group_id:e,created_by:le.id};try{await o0(je),await ye(),Pe.success(`"${te.name}" añadida desde Spotify`)}catch(Oe){console.error("Error creating song from Spotify:",Oe),Pe.error("Error al añadir la canción")}},$=async te=>{const{data:{user:le}}=await Ze.auth.getUser();if(!le){Pe.error("No se pudo obtener la información del usuario");return}const ue=Math.round(te.duration/60),pe=`Álbum: ${te.album.title} | Fuente: Deezer`,je={title:te.title,artist:te.artist.name,duration_minutes:ue.toString(),key:"",notes:pe,group_id:e,created_by:le.id};try{await o0(je),await ye(),Pe.success(`"${te.title}" añadida desde Deezer`)}catch(Oe){console.error("Error creating song from Deezer:",Oe),Pe.error("Error al añadir la canción")}},q=async te=>{if(te.preventDefault(),!p.title.trim()){Pe.error("El título es obligatorio");return}const{data:{user:le}}=await Ze.auth.getUser();if(!le){Pe.error("No se pudo obtener la información del usuario");return}const ue={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:le.id};if(c){const pe=await E_(c.id,ue);pe&&(Pe.success("Canción actualizada correctamente"),r(je=>je.map(Oe=>Oe.id===c.id?pe:Oe)))}else{const pe=await o0(ue);pe&&(Pe.success("Canción creada correctamente"),r(je=>[...je,pe]))}H()},se=te=>{var le;f(te),m({title:te.title,artist:te.artist||"",duration_minutes:((le=te.duration_minutes)==null?void 0:le.toString())||"",key:te.key||"",notes:te.notes||""}),l(!0)},Ae=te=>{k(te),g(!0)},P=async()=>{if(!N)return;console.log("Eliminando canción:",N.id);const te=await L$(N.id);console.log("Resultado de eliminación:",te),te?(Pe.success("Canción eliminada correctamente"),r(le=>le.filter(ue=>ue.id!==N.id))):Pe.error("No se pudo eliminar la canción"),g(!1),k(null)},H=()=>{m(J_),f(null),l(!1)},re=te=>{if(!te)return"-";const le=Math.floor(te/60),ue=te%60;return le>0?`${le}h ${ue}m`:`${ue}m`},ce=te=>{if(!te)return"-";const le=te.match(/Tempo:\s*(\d+)\s*BPM/i);return le?`${le[1]}`:"-"},he=(te,le,ue)=>{b({songId:te,field:le}),L(String(ue||"")),Z(null)},ke=async(te,le)=>{if(S===(te[le]||"")){b(null);return}Y(!0),Z(null);const ue=await E_(te.id,{[le]:le==="duration_minutes"?parseInt(S)||null:S||null});Y(!1),ue?(r(pe=>pe.map(je=>je.id===te.id?{...je,...ue}:je)),b(null)):Z("Error al guardar")},Ee=(te,le,ue)=>{te.key==="Enter"?(te.preventDefault(),ke(le,ue)):te.key==="Escape"&&b(null)};return i?h.jsx("div",{className:"text-center py-8",children:"Cargando canciones..."}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex flex-col gap-4",children:h.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),h.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:h.jsx(qB,{compact:!0})})]})}),t&&h.jsx("div",{className:"mb-6",children:h.jsx(WB,{onSpotifyTrackSelect:Q,onDeezerTrackSelect:$,onManualAdd:te=>{te&&m(le=>({...le,title:te})),l(!0)},className:"w-full"})}),!t&&h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:h.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),a&&t&&h.jsxs("form",{onSubmit:q,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Canción":"Nueva Canción"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(Vn,{label:"Título *",value:p.title,onChange:te=>m({...p,title:te.target.value}),required:!0}),h.jsx(Vn,{label:"Artista",value:p.artist,onChange:te=>m({...p,artist:te.target.value})}),h.jsx(Vn,{label:"Duración (minutos)",type:"number",value:p.duration_minutes,onChange:te=>m({...p,duration_minutes:te.target.value}),min:"1"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),h.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:te=>m({...p,key:te.target.value}),children:X_.map(te=>h.jsx("option",{value:te,children:te||"Sin especificar"},te))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),h.jsx("textarea",{value:p.notes,onChange:te=>m({...p,notes:te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la canción..."})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(wt,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),h.jsx(wt,{type:"button",variant:"secondary",onClick:H,children:"Cancelar"})]})]}),h.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?h.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Añade la primera canción para empezar."}):J.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No se encontraron canciones que coincidan con los filtros aplicados.",h.jsx("button",{onClick:()=>{ee(""),O(""),K("")},className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar filtros"})]}):h.jsxs("div",{className:"overflow-x-auto",children:[h.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[h.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",J.length," de ",n.length," canciones"]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsx(Q2,{className:"w-3 h-3 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Buscar...",value:R,onChange:te=>ee(te.target.value),className:"w-24 px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400 focus:w-32 transition-all"}),h.jsxs("select",{value:ae,onChange:te=>O(te.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[h.jsx("option",{value:"",children:"Clave"}),xe.map(te=>h.jsx("option",{value:te,children:te},te))]}),h.jsxs("select",{value:U,onChange:te=>K(te.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[h.jsx("option",{value:"",children:"Tipo"}),h.jsx("option",{value:"song",children:"Canciones"}),h.jsx("option",{value:"medley",children:"Medleys"})]})]})]})}),h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duración"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BPM"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(te=>h.jsxs("tr",{className:"hover:bg-gray-50",children:[h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(E==null?void 0:E.songId)===te.id&&E.field==="title"?h.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:le=>L(le.target.value),onBlur:()=>ke(te,"title"),onKeyDown:le=>Ee(le,te,"title"),disabled:M}):h.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&he(te.id,"title",te.title),title:"Haz clic para editar",children:te.title}),(E==null?void 0:E.songId)===te.id&&oe&&h.jsx("div",{className:"text-xs text-red-500 mt-1",children:oe})]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===te.id&&E.field==="artist"?h.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:le=>L(le.target.value),onBlur:()=>ke(te,"artist"),onKeyDown:le=>Ee(le,te,"artist"),disabled:M}):h.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&he(te.id,"artist",te.artist||""),title:"Haz clic para editar",children:te.artist||h.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===te.id&&E.field==="duration_minutes"?h.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:S,autoFocus:!0,onChange:le=>L(le.target.value),onBlur:()=>ke(te,"duration_minutes"),onKeyDown:le=>Ee(le,te,"duration_minutes"),disabled:M}):h.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var le;return t&&he(te.id,"duration_minutes",((le=te.duration_minutes)==null?void 0:le.toString())||"")},title:"Haz clic para editar",children:re(te.duration_minutes)})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===te.id&&E.field==="key"?h.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:le=>L(le.target.value),onBlur:()=>ke(te,"key"),onKeyDown:le=>Ee(le,te,"key"),disabled:M,children:X_.map(le=>h.jsx("option",{value:le,children:le||"Sin especificar"},le))}):h.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&he(te.id,"key",te.key||""),title:"Haz clic para editar",children:te.key||h.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:h.jsx("div",{className:"cursor-default",children:ce(te.notes)==="-"?h.jsx("span",{className:"text-gray-400",children:"-"}):h.jsx("span",{className:"font-medium",children:ce(te.notes)})})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>se(te),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),h.jsx("button",{onClick:()=>Ae(te),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},te.id))})]})]})}),w&&N&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),h.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar la canción "',N.title,'"? Esta acción no se puede deshacer.']}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx(wt,{variant:"secondary",onClick:()=>{g(!1),k(null)},children:"Cancelar"}),h.jsx(wt,{variant:"danger",onClick:P,children:"Eliminar"})]})]})})]})}var T6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Q_=ht.createContext&&ht.createContext(T6),VB=["attr","size","title"];function GB(e,t){if(e==null)return{};var n=YB(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function YB(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tg.apply(this,arguments)}function Z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ng(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(n),!0).forEach(function(r){KB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KB(e,t,n){return t=JB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JB(e){var t=XB(e,"string");return typeof t=="symbol"?t:t+""}function XB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I6(e){return e&&e.map((t,n)=>ht.createElement(t.tag,ng({key:n},t.attr),I6(t.child)))}function _o(e){return t=>ht.createElement(QB,tg({attr:ng({},e.attr)},t),I6(e.child))}function QB(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=GB(e,VB),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),ht.createElement("svg",tg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:ng(ng({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ht.createElement("title",null,s),e.children)};return Q_!==void 0?ht.createElement(Q_.Consumer,null,n=>t(n)):t(T6)}function ZB(e){return _o({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function eU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function tU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function nU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function D6(e){return _o({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function rU(e){return _o({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function iU(e){return _o({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function wy(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function e3(e){return _o({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function sU(e){return _o({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function aU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Vg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function X5(e){return"nodeType"in e}function hs(e){var t,n;return e?Pf(e)?e:X5(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Q5(e){const{Document:t}=hs(e);return e instanceof t}function Lp(e){return Pf(e)?!1:e instanceof hs(e).HTMLElement}function O6(e){return e instanceof hs(e).SVGElement}function Tf(e){return e?Pf(e)?e.document:X5(e)?Q5(e)?e:Lp(e)||O6(e)?e.ownerDocument:document:document:document}const yo=Vg?C.useLayoutEffect:C.useEffect;function Z5(e){const t=C.useRef(e);return yo(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function oU(){const e=C.useRef(null),t=C.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=C.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function fp(e,t){t===void 0&&(t=[e]);const n=C.useRef(e);return yo(()=>{n.current!==e&&(n.current=e)},t),n}function Pp(e,t){const n=C.useRef();return C.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function rg(e){const t=Z5(e),n=C.useRef(null),r=C.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function xy(e){const t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}let Rv={};function Tp(e,t){return C.useMemo(()=>{if(t)return t;const n=Rv[e]==null?0:Rv[e]+1;return Rv[e]=n,e+"-"+n},[e,t])}function M6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[c,f]of l){const p=s[c];p!=null&&(s[c]=p+e*f)}return s},{...t})}}const hf=M6(1),ig=M6(-1);function lU(e){return"clientX"in e&&"clientY"in e}function ew(e){if(!e)return!1;const{KeyboardEvent:t}=hs(e.target);return t&&e instanceof t}function cU(e){if(!e)return!1;const{TouchEvent:t}=hs(e.target);return t&&e instanceof t}function by(e){if(cU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return lU(e)?{x:e.clientX,y:e.clientY}:null}const hp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[hp.Translate.toString(e),hp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),t3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uU(e){return e.matches(t3)?e:e.querySelector(t3)}const dU={display:"none"};function fU(e){let{id:t,value:n}=e;return ht.createElement("div",{id:t,style:dU},n)}function hU(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ht.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function pU(){const[e,t]=C.useState("");return{announce:C.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const R6=C.createContext(null);function mU(e){const t=C.useContext(R6);C.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function gU(){const[e]=C.useState(()=>new Set),t=C.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[C.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const vU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function wU(e){let{announcements:t=yU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=vU}=e;const{announce:s,announcement:a}=pU(),l=Tp("DndLiveRegion"),[c,f]=C.useState(!1);if(C.useEffect(()=>{f(!0)},[]),mU(C.useMemo(()=>({onDragStart(m){let{active:w}=m;s(t.onDragStart({active:w}))},onDragMove(m){let{active:w,over:g}=m;t.onDragMove&&s(t.onDragMove({active:w,over:g}))},onDragOver(m){let{active:w,over:g}=m;s(t.onDragOver({active:w,over:g}))},onDragEnd(m){let{active:w,over:g}=m;s(t.onDragEnd({active:w,over:g}))},onDragCancel(m){let{active:w,over:g}=m;s(t.onDragCancel({active:w,over:g}))}}),[s,t])),!c)return null;const p=ht.createElement(ht.Fragment,null,ht.createElement(fU,{id:r,value:i.draggable}),ht.createElement(hU,{id:l,announcement:a}));return n?Cu.createPortal(p,n):p}var Rr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Rr||(Rr={}));function sg(){}function Fv(e,t){return C.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function xU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ma=Object.freeze({x:0,y:0});function bU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _U(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function SU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function NU(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function n3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const kU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=n3(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const f=bU(n3(c),i);s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(_U)};function EU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const c=t.width*t.height,f=e.width*e.height,p=a*l,m=p/(c+f-p);return Number(m.toFixed(4))}return 0}const jU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=EU(l,t);c>0&&i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(SU)};function CU(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function F6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ma}function AU(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const LU=AU(1);function PU(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function TU(e,t,n){const r=PU(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,m=s?e.height/s:e.height;return{width:p,height:m,top:f,right:c+p,bottom:f+m,left:c}}const IU={ignoreTransform:!1};function If(e,t){t===void 0&&(t=IU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=hs(e).getComputedStyle(e);f&&(n=TU(n,f,p))}const{top:r,left:i,width:s,height:a,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:c}}function r3(e){return If(e,{ignoreTransform:!0})}function DU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function OU(e,t){return t===void 0&&(t=hs(e).getComputedStyle(e)),t.position==="fixed"}function MU(e,t){t===void 0&&(t=hs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function tw(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Q5(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Lp(i)||O6(i)||n.includes(i))return n;const s=hs(e).getComputedStyle(i);return i!==e&&MU(i,s)&&n.push(i),OU(i,s)?n:r(i.parentNode)}return e?r(e):n}function $6(e){const[t]=tw(e,1);return t??null}function $v(e){return!Vg||!e?null:Pf(e)?e:X5(e)?Q5(e)||e===Tf(e).scrollingElement?window:Lp(e)?e:null:null}function B6(e){return Pf(e)?e.scrollX:e.scrollLeft}function U6(e){return Pf(e)?e.scrollY:e.scrollTop}function _y(e){return{x:B6(e),y:U6(e)}}var Gr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Gr||(Gr={}));function z6(e){return!Vg||!e?!1:e===document.scrollingElement}function q6(e){const t={x:0,y:0},n=z6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const RU={x:.2,y:.2};function FU(e,t,n,r,i){let{top:s,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=RU);const{isTop:f,isBottom:p,isLeft:m,isRight:w}=q6(e),g={x:0,y:0},N={x:0,y:0},k={height:t.height*i.y,width:t.width*i.x};return!f&&s<=t.top+k.height?(g.y=Gr.Backward,N.y=r*Math.abs((t.top+k.height-s)/k.height)):!p&&c>=t.bottom-k.height&&(g.y=Gr.Forward,N.y=r*Math.abs((t.bottom-k.height-c)/k.height)),!w&&l>=t.right-k.width?(g.x=Gr.Forward,N.x=r*Math.abs((t.right-k.width-l)/k.width)):!m&&a<=t.left+k.width&&(g.x=Gr.Backward,N.x=r*Math.abs((t.left+k.width-a)/k.width)),{direction:g,speed:N}}function $U(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function W6(e){return e.reduce((t,n)=>hf(t,_y(n)),Ma)}function BU(e){return e.reduce((t,n)=>t+B6(n),0)}function UU(e){return e.reduce((t,n)=>t+U6(n),0)}function zU(e,t){if(t===void 0&&(t=If),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);$6(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const qU=[["x",["left","right"],BU],["y",["top","bottom"],UU]];class nw{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=tw(n),i=W6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of qU)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=l(r),p=i[s]-f;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Uh{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function WU(e){const{EventTarget:t}=hs(e);return e instanceof t?e:Tf(e)}function Bv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Xs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Xs||(Xs={}));function i3(e){e.preventDefault()}function HU(e){e.stopPropagation()}var vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(vn||(vn={}));const H6={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},VU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case vn.Right:return{...n,x:n.x+25};case vn.Left:return{...n,x:n.x-25};case vn.Down:return{...n,y:n.y+25};case vn.Up:return{...n,y:n.y-25}}};class rw{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Uh(Tf(n)),this.windowListeners=new Uh(hs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xs.Resize,this.handleCancel),this.windowListeners.add(Xs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&zU(r),n(Ma)}handleKeyDown(t){if(ew(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=H6,coordinateGetter:a=VU,scrollBehavior:l="smooth"}=i,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,p=f?{x:f.left,y:f.top}:Ma;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(t,{active:n,context:r.current,currentCoordinates:p});if(m){const w=ig(m,p),g={x:0,y:0},{scrollableAncestors:N}=r.current;for(const k of N){const E=t.code,{isTop:b,isRight:S,isLeft:L,isBottom:M,maxScroll:Y,minScroll:oe}=q6(k),Z=$U(k),R={x:Math.min(E===vn.Right?Z.right-Z.width/2:Z.right,Math.max(E===vn.Right?Z.left:Z.left+Z.width/2,m.x)),y:Math.min(E===vn.Down?Z.bottom-Z.height/2:Z.bottom,Math.max(E===vn.Down?Z.top:Z.top+Z.height/2,m.y))},ee=E===vn.Right&&!S||E===vn.Left&&!L,ae=E===vn.Down&&!M||E===vn.Up&&!b;if(ee&&R.x!==m.x){const O=k.scrollLeft+w.x,U=E===vn.Right&&O<=Y.x||E===vn.Left&&O>=oe.x;if(U&&!w.y){k.scrollTo({left:O,behavior:l});return}U?g.x=k.scrollLeft-O:g.x=E===vn.Right?k.scrollLeft-Y.x:k.scrollLeft-oe.x,g.x&&k.scrollBy({left:-g.x,behavior:l});break}else if(ae&&R.y!==m.y){const O=k.scrollTop+w.y,U=E===vn.Down&&O<=Y.y||E===vn.Up&&O>=oe.y;if(U&&!w.x){k.scrollTo({top:O,behavior:l});return}U?g.y=k.scrollTop-O:g.y=E===vn.Down?k.scrollTop-Y.y:k.scrollTop-oe.y,g.y&&k.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,hf(ig(m,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rw.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=H6,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function s3(e){return!!(e&&"distance"in e)}function a3(e){return!!(e&&"delay"in e)}class iw{constructor(t,n,r){var i;r===void 0&&(r=WU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Tf(a),this.documentListeners=new Uh(this.document),this.listeners=new Uh(r),this.windowListeners=new Uh(hs(a)),this.initialCoordinates=(i=by(s))!=null?i:Ma,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Xs.Resize,this.handleCancel),this.windowListeners.add(Xs.DragStart,i3),this.windowListeners.add(Xs.VisibilityChange,this.handleCancel),this.windowListeners.add(Xs.ContextMenu,i3),this.documentListeners.add(Xs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(a3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(s3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Xs.Click,HU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xs.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=by(t))!=null?n:Ma,f=ig(i,c);if(!r&&l){if(s3(l)){if(l.tolerance!=null&&Bv(f,l.tolerance))return this.handleCancel();if(Bv(f,l.distance))return this.handleStart()}if(a3(l)&&Bv(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const GU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sw extends iw{constructor(t){const{event:n}=t,r=Tf(n.target);super(t,GU,r)}}sw.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const YU={move:{name:"mousemove"},end:{name:"mouseup"}};var Sy;(function(e){e[e.RightClick=2]="RightClick"})(Sy||(Sy={}));class KU extends iw{constructor(t){super(t,YU,Tf(t.event.target))}}KU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Sy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Uv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class V6 extends iw{constructor(t){super(t,Uv)}static setup(){return window.addEventListener(Uv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Uv.move.name,t)};function t(){}}}V6.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var zh;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(zh||(zh={}));var ag;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ag||(ag={}));function JU(e){let{acceleration:t,activator:n=zh.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=ag.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:p,delta:m,threshold:w}=e;const g=QU({delta:m,disabled:!s}),[N,k]=oU(),E=C.useRef({x:0,y:0}),b=C.useRef({x:0,y:0}),S=C.useMemo(()=>{switch(n){case zh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case zh.DraggableRect:return i}},[n,i,c]),L=C.useRef(null),M=C.useCallback(()=>{const oe=L.current;if(!oe)return;const Z=E.current.x*b.current.x,R=E.current.y*b.current.y;oe.scrollBy(Z,R)},[]),Y=C.useMemo(()=>l===ag.TreeOrder?[...f].reverse():f,[l,f]);C.useEffect(()=>{if(!s||!f.length||!S){k();return}for(const oe of Y){if((r==null?void 0:r(oe))===!1)continue;const Z=f.indexOf(oe),R=p[Z];if(!R)continue;const{direction:ee,speed:ae}=FU(oe,R,S,t,w);for(const O of["x","y"])g[O][ee[O]]||(ae[O]=0,ee[O]=0);if(ae.x>0||ae.y>0){k(),L.current=oe,N(M,a),E.current=ae,b.current=ee;return}}E.current={x:0,y:0},b.current={x:0,y:0},k()},[t,M,r,k,s,a,JSON.stringify(S),JSON.stringify(g),N,f,Y,p,JSON.stringify(w)])}const XU={x:{[Gr.Backward]:!1,[Gr.Forward]:!1},y:{[Gr.Backward]:!1,[Gr.Forward]:!1}};function QU(e){let{delta:t,disabled:n}=e;const r=xy(t);return Pp(i=>{if(n||!r||!i)return XU;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Gr.Backward]:i.x[Gr.Backward]||s.x===-1,[Gr.Forward]:i.x[Gr.Forward]||s.x===1},y:{[Gr.Backward]:i.y[Gr.Backward]||s.y===-1,[Gr.Forward]:i.y[Gr.Forward]||s.y===1}}},[n,t,r])}function ZU(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Pp(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function ez(e,t){return C.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var pp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(pp||(pp={}));var Ny;(function(e){e.Optimized="optimized"})(Ny||(Ny={}));const o3=new Map;function tz(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=C.useState(null),{frequency:l,measure:c,strategy:f}=i,p=C.useRef(e),m=E(),w=fp(m),g=C.useCallback(function(b){b===void 0&&(b=[]),!w.current&&a(S=>S===null?b:S.concat(b.filter(L=>!S.includes(L))))},[w]),N=C.useRef(null),k=Pp(b=>{if(m&&!n)return o3;if(!b||b===o3||p.current!==e||s!=null){const S=new Map;for(let L of e){if(!L)continue;if(s&&s.length>0&&!s.includes(L.id)&&L.rect.current){S.set(L.id,L.rect.current);continue}const M=L.node.current,Y=M?new nw(c(M),M):null;L.rect.current=Y,Y&&S.set(L.id,Y)}return S}return b},[e,s,n,m,c]);return C.useEffect(()=>{p.current=e},[e]),C.useEffect(()=>{m||g()},[n,m]),C.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),C.useEffect(()=>{m||typeof l!="number"||N.current!==null||(N.current=setTimeout(()=>{g(),N.current=null},l))},[l,m,g,...r]),{droppableRects:k,measureDroppableContainers:g,measuringScheduled:s!=null};function E(){switch(f){case pp.Always:return!1;case pp.BeforeDragging:return n;default:return!n}}}function G6(e,t){return Pp(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function nz(e,t){return G6(e,t)}function rz(e){let{callback:t,disabled:n}=e;const r=Z5(t),i=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return C.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Gg(e){let{callback:t,disabled:n}=e;const r=Z5(t),i=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return C.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function iz(e){return new nw(If(e),e)}function l3(e,t,n){t===void 0&&(t=iz);const[r,i]=C.useState(null);function s(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=rz({callback(c){if(e)for(const f of c){const{type:p,target:m}=f;if(p==="childList"&&m instanceof HTMLElement&&m.contains(e)){s();break}}}}),l=Gg({callback:s});return yo(()=>{s(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function sz(e){const t=G6(e);return F6(e,t)}const c3=[];function az(e){const t=C.useRef(e),n=Pp(r=>e?r&&r!==c3&&e&&t.current&&e.parentNode===t.current.parentNode?r:tw(e):c3,[e]);return C.useEffect(()=>{t.current=e},[e]),n}function oz(e){const[t,n]=C.useState(null),r=C.useRef(e),i=C.useCallback(s=>{const a=$v(s.target);a&&n(l=>l?(l.set(a,_y(a)),new Map(l)):null)},[]);return C.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(c=>{const f=$v(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,_y(f)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(c=>{const f=$v(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),C.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>hf(s,a),Ma):W6(e):Ma,[e,t])}function u3(e,t){t===void 0&&(t=[]);const n=C.useRef(null);return C.useEffect(()=>{n.current=null},t),C.useEffect(()=>{const r=e!==Ma;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ig(e,n.current):Ma}function lz(e){C.useEffect(()=>{if(!Vg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function cz(e,t){return C.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function Y6(e){return C.useMemo(()=>e?DU(e):null,[e])}const d3=[];function uz(e,t){t===void 0&&(t=If);const[n]=e,r=Y6(n?hs(n):null),[i,s]=C.useState(d3);function a(){s(()=>e.length?e.map(c=>z6(c)?r:new nw(t(c),c)):d3)}const l=Gg({callback:a});return yo(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),i}function dz(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Lp(t)?t:e}function fz(e){let{measure:t}=e;const[n,r]=C.useState(null),i=C.useCallback(f=>{for(const{target:p}of f)if(Lp(p)){r(m=>{const w=t(p);return m?{...m,width:w.width,height:w.height}:w});break}},[t]),s=Gg({callback:i}),a=C.useCallback(f=>{const p=dz(f);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[l,c]=rg(a);return C.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const hz=[{sensor:sw,options:{}},{sensor:rw,options:{}}],pz={current:{}},f0={draggable:{measure:r3},droppable:{measure:r3,strategy:pp.WhileDragging,frequency:Ny.Optimized},dragOverlay:{measure:If}};class qh extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const mz={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new qh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:f0,measureDroppableContainers:sg,windowRect:null,measuringScheduled:!1},gz={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sg,draggableNodes:new Map,over:null,measureDroppableContainers:sg},Yg=C.createContext(gz),K6=C.createContext(mz);function vz(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new qh}}}function yz(e,t){switch(t.type){case Rr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Rr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Rr.DragEnd:case Rr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Rr.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new qh(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Rr.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new qh(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case Rr.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new qh(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function wz(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=C.useContext(Yg),s=xy(r),a=xy(n==null?void 0:n.id);return C.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!ew(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:c,node:f}=l;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[c.current,f.current]){if(!p)continue;const m=uU(p);if(m){m.focus();break}}})}},[r,t,i,a,s]),null}function xz(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function bz(e){return C.useMemo(()=>({draggable:{...f0.draggable,...e==null?void 0:e.draggable},droppable:{...f0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...f0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function _z(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=C.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;yo(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const p=n(f),m=F6(p,r);if(a||(m.x=0),l||(m.y=0),s.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const w=$6(f);w&&w.scrollBy({top:m.y,left:m.x})}},[t,a,l,r,n])}const J6=C.createContext({...Ma,scaleX:1,scaleY:1});var ac;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ac||(ac={}));const Sz=C.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:c=!0,children:f,sensors:p=hz,collisionDetection:m=jU,measuring:w,modifiers:g,...N}=t;const k=C.useReducer(yz,void 0,vz),[E,b]=k,[S,L]=gU(),[M,Y]=C.useState(ac.Uninitialized),oe=M===ac.Initialized,{draggable:{active:Z,nodes:R,translate:ee},droppable:{containers:ae}}=E,O=Z!=null?R.get(Z):null,U=C.useRef({initial:null,translated:null}),K=C.useMemo(()=>{var bn;return Z!=null?{id:Z,data:(bn=O==null?void 0:O.data)!=null?bn:pz,rect:U}:null},[Z,O]),J=C.useRef(null),[xe,ye]=C.useState(null),[Q,$]=C.useState(null),q=fp(N,Object.values(N)),se=Tp("DndDescribedBy",a),Ae=C.useMemo(()=>ae.getEnabled(),[ae]),P=bz(w),{droppableRects:H,measureDroppableContainers:re,measuringScheduled:ce}=tz(Ae,{dragging:oe,dependencies:[ee.x,ee.y],config:P.droppable}),he=ZU(R,Z),ke=C.useMemo(()=>Q?by(Q):null,[Q]),Ee=li(),te=nz(he,P.draggable.measure);_z({activeNode:Z!=null?R.get(Z):null,config:Ee.layoutShiftCompensation,initialRect:te,measure:P.draggable.measure});const le=l3(he,P.draggable.measure,te),ue=l3(he?he.parentElement:null),pe=C.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:ae,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),je=ae.getNodeFor((n=pe.current.over)==null?void 0:n.id),Oe=fz({measure:P.dragOverlay.measure}),fe=(r=Oe.nodeRef.current)!=null?r:he,G=oe?(i=Oe.rect)!=null?i:le:null,qe=!!(Oe.nodeRef.current&&Oe.rect),Re=sz(qe?null:le),Fe=Y6(fe?hs(fe):null),be=az(oe?je??he:null),Me=uz(be),Be=xz(g,{transform:{x:ee.x-Re.x,y:ee.y-Re.y,scaleX:1,scaleY:1},activatorEvent:Q,active:K,activeNodeRect:le,containerNodeRect:ue,draggingNodeRect:G,over:pe.current.over,overlayNodeRect:Oe.rect,scrollableAncestors:be,scrollableAncestorRects:Me,windowRect:Fe}),We=ke?hf(ke,ee):null,et=oz(be),st=u3(et),it=u3(et,[le]),yt=hf(Be,st),Nt=G?LU(G,Be):null,ft=K&&Nt?m({active:K,collisionRect:Nt,droppableRects:H,droppableContainers:Ae,pointerCoordinates:We}):null,pt=NU(ft,"id"),[tt,In]=C.useState(null),zt=qe?Be:hf(Be,it),Jr=CU(zt,(s=tt==null?void 0:tt.rect)!=null?s:null,le),Qt=C.useRef(null),pn=C.useCallback((bn,Gt)=>{let{sensor:xt,options:Bt}=Gt;if(J.current==null)return;const dr=R.get(J.current);if(!dr)return;const rn=bn.nativeEvent,nr=new xt({active:J.current,activeNode:dr,event:rn,options:Bt,context:pe,onAbort(dt){if(!R.get(dt))return;const{onDragAbort:rr}=q.current,kn={id:dt};rr==null||rr(kn),S({type:"onDragAbort",event:kn})},onPending(dt,Yn,rr,kn){if(!R.get(dt))return;const{onDragPending:En}=q.current,Kn={id:dt,constraint:Yn,initialCoordinates:rr,offset:kn};En==null||En(Kn),S({type:"onDragPending",event:Kn})},onStart(dt){const Yn=J.current;if(Yn==null)return;const rr=R.get(Yn);if(!rr)return;const{onDragStart:kn}=q.current,Ln={activatorEvent:rn,active:{id:Yn,data:rr.data,rect:U}};Cu.unstable_batchedUpdates(()=>{kn==null||kn(Ln),Y(ac.Initializing),b({type:Rr.DragStart,initialCoordinates:dt,active:Yn}),S({type:"onDragStart",event:Ln}),ye(Qt.current),$(rn)})},onMove(dt){b({type:Rr.DragMove,coordinates:dt})},onEnd:Tr(Rr.DragEnd),onCancel:Tr(Rr.DragCancel)});Qt.current=nr;function Tr(dt){return async function(){const{active:rr,collisions:kn,over:Ln,scrollAdjustedTranslate:En}=pe.current;let Kn=null;if(rr&&En){const{cancelDrop:Bi}=q.current;Kn={activatorEvent:rn,active:rr,collisions:kn,delta:En,over:Ln},dt===Rr.DragEnd&&typeof Bi=="function"&&await Promise.resolve(Bi(Kn))&&(dt=Rr.DragCancel)}J.current=null,Cu.unstable_batchedUpdates(()=>{b({type:dt}),Y(ac.Uninitialized),In(null),ye(null),$(null),Qt.current=null;const Bi=dt===Rr.DragEnd?"onDragEnd":"onDragCancel";if(Kn){const ki=q.current[Bi];ki==null||ki(Kn),S({type:Bi,event:Kn})}})}}},[R]),oi=C.useCallback((bn,Gt)=>(xt,Bt)=>{const dr=xt.nativeEvent,rn=R.get(Bt);if(J.current!==null||!rn||dr.dndKit||dr.defaultPrevented)return;const nr={active:rn};bn(xt,Gt.options,nr)===!0&&(dr.dndKit={capturedBy:Gt.sensor},J.current=Bt,pn(xt,Gt))},[R,pn]),Zt=ez(p,oi);lz(p),yo(()=>{le&&M===ac.Initializing&&Y(ac.Initialized)},[le,M]),C.useEffect(()=>{const{onDragMove:bn}=q.current,{active:Gt,activatorEvent:xt,collisions:Bt,over:dr}=pe.current;if(!Gt||!xt)return;const rn={active:Gt,activatorEvent:xt,collisions:Bt,delta:{x:yt.x,y:yt.y},over:dr};Cu.unstable_batchedUpdates(()=>{bn==null||bn(rn),S({type:"onDragMove",event:rn})})},[yt.x,yt.y]),C.useEffect(()=>{const{active:bn,activatorEvent:Gt,collisions:xt,droppableContainers:Bt,scrollAdjustedTranslate:dr}=pe.current;if(!bn||J.current==null||!Gt||!dr)return;const{onDragOver:rn}=q.current,nr=Bt.get(pt),Tr=nr&&nr.rect.current?{id:nr.id,rect:nr.rect.current,data:nr.data,disabled:nr.disabled}:null,dt={active:bn,activatorEvent:Gt,collisions:xt,delta:{x:dr.x,y:dr.y},over:Tr};Cu.unstable_batchedUpdates(()=>{In(Tr),rn==null||rn(dt),S({type:"onDragOver",event:dt})})},[pt]),yo(()=>{pe.current={activatorEvent:Q,active:K,activeNode:he,collisionRect:Nt,collisions:ft,droppableRects:H,draggableNodes:R,draggingNode:fe,draggingNodeRect:G,droppableContainers:ae,over:tt,scrollableAncestors:be,scrollAdjustedTranslate:yt},U.current={initial:G,translated:Nt}},[K,he,ft,Nt,R,fe,G,H,ae,tt,be,yt]),JU({...Ee,delta:ee,draggingRect:Nt,pointerCoordinates:We,scrollableAncestors:be,scrollableAncestorRects:Me});const sa=C.useMemo(()=>({active:K,activeNode:he,activeNodeRect:le,activatorEvent:Q,collisions:ft,containerNodeRect:ue,dragOverlay:Oe,draggableNodes:R,droppableContainers:ae,droppableRects:H,over:tt,measureDroppableContainers:re,scrollableAncestors:be,scrollableAncestorRects:Me,measuringConfiguration:P,measuringScheduled:ce,windowRect:Fe}),[K,he,le,Q,ft,ue,Oe,R,ae,H,tt,re,be,Me,P,ce,Fe]),Dn=C.useMemo(()=>({activatorEvent:Q,activators:Zt,active:K,activeNodeRect:le,ariaDescribedById:{draggable:se},dispatch:b,draggableNodes:R,over:tt,measureDroppableContainers:re}),[Q,Zt,K,le,b,se,R,tt,re]);return ht.createElement(R6.Provider,{value:L},ht.createElement(Yg.Provider,{value:Dn},ht.createElement(K6.Provider,{value:sa},ht.createElement(J6.Provider,{value:Jr},f)),ht.createElement(wz,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ht.createElement(wU,{...l,hiddenTextDescribedById:se}));function li(){const bn=(xe==null?void 0:xe.autoScrollEnabled)===!1,Gt=typeof c=="object"?c.enabled===!1:c===!1,xt=oe&&!bn&&!Gt;return typeof c=="object"?{...c,enabled:xt}:{enabled:xt}}}),Nz=C.createContext(null),f3="button",kz="Draggable";function Ez(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Tp(kz),{activators:a,activatorEvent:l,active:c,activeNodeRect:f,ariaDescribedById:p,draggableNodes:m,over:w}=C.useContext(Yg),{role:g=f3,roleDescription:N="draggable",tabIndex:k=0}=i??{},E=(c==null?void 0:c.id)===t,b=C.useContext(E?J6:Nz),[S,L]=rg(),[M,Y]=rg(),oe=cz(a,t),Z=fp(n);yo(()=>(m.set(t,{id:t,key:s,node:S,activatorNode:M,data:Z}),()=>{const ee=m.get(t);ee&&ee.key===s&&m.delete(t)}),[m,t]);const R=C.useMemo(()=>({role:g,tabIndex:k,"aria-disabled":r,"aria-pressed":E&&g===f3?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[r,g,k,E,N,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:f,attributes:R,isDragging:E,listeners:r?void 0:oe,node:S,over:w,setNodeRef:L,setActivatorNodeRef:Y,transform:b}}function jz(){return C.useContext(K6)}const Cz="Droppable",Az={timeout:25};function Lz(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Tp(Cz),{active:a,dispatch:l,over:c,measureDroppableContainers:f}=C.useContext(Yg),p=C.useRef({disabled:n}),m=C.useRef(!1),w=C.useRef(null),g=C.useRef(null),{disabled:N,updateMeasurementsFor:k,timeout:E}={...Az,...i},b=fp(k??r),S=C.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(b.current)?b.current:[b.current]),g.current=null},E)},[E]),L=Gg({callback:S,disabled:N||!a}),M=C.useCallback((R,ee)=>{L&&(ee&&(L.unobserve(ee),m.current=!1),R&&L.observe(R))},[L]),[Y,oe]=rg(M),Z=fp(t);return C.useEffect(()=>{!L||!Y.current||(L.disconnect(),m.current=!1,L.observe(Y.current))},[Y,L]),C.useEffect(()=>(l({type:Rr.RegisterDroppable,element:{id:r,key:s,disabled:n,node:Y,rect:w,data:Z}}),()=>l({type:Rr.UnregisterDroppable,key:s,id:r})),[r]),C.useEffect(()=>{n!==p.current.disabled&&(l({type:Rr.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:a,rect:w,isOver:(c==null?void 0:c.id)===r,node:Y,over:c,setNodeRef:oe}}function aw(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Pz(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function Um(e){return e!==null&&e>=0}function Tz(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Iz(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const X6=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=aw(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},zm={scaleX:1,scaleY:1},Dz=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const f=s[a];return f?{x:0,y:n<a?f.top+f.height-(l.top+l.height):f.top-l.top,...zm}:null}const c=Oz(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-c,...zm}:i<n&&i>=a?{x:0,y:l.height+c,...zm}:{x:0,y:0,...zm}};function Oz(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Q6="Sortable",Z6=ht.createContext({activeIndex:-1,containerId:Q6,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:X6,disabled:{draggable:!1,droppable:!1}});function Mz(e){let{children:t,id:n,items:r,strategy:i=X6,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:f,measureDroppableContainers:p}=jz(),m=Tp(Q6,n),w=l.rect!==null,g=C.useMemo(()=>r.map(oe=>typeof oe=="object"&&"id"in oe?oe.id:oe),[r]),N=a!=null,k=a?g.indexOf(a.id):-1,E=f?g.indexOf(f.id):-1,b=C.useRef(g),S=!Tz(g,b.current),L=E!==-1&&k===-1||S,M=Iz(s);yo(()=>{S&&N&&p(g)},[S,g,N,p]),C.useEffect(()=>{b.current=g},[g]);const Y=C.useMemo(()=>({activeIndex:k,containerId:m,disabled:M,disableTransforms:L,items:g,overIndex:E,useDragOverlay:w,sortedRects:Pz(g,c),strategy:i}),[k,m,M.draggable,M.droppable,L,g,E,c,w,i]);return ht.createElement(Z6.Provider,{value:Y},t)}const Rz=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return aw(n,r,i).indexOf(t)},Fz=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:f}=e;return!f||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===c},$z={duration:200,easing:"ease"},ek="transform",Bz=hp.Transition.toString({property:ek,duration:0,easing:"linear"}),Uz={roleDescription:"sortable"};function zz(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=C.useState(null),l=C.useRef(n);return yo(()=>{if(!t&&n!==l.current&&r.current){const c=i.current;if(c){const f=If(r.current,{ignoreTransform:!0}),p={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(p.x||p.y)&&a(p)}}n!==l.current&&(l.current=n)},[t,n,r,i]),C.useEffect(()=>{s&&a(null)},[s]),s}function qz(e){let{animateLayoutChanges:t=Fz,attributes:n,disabled:r,data:i,getNewIndex:s=Rz,id:a,strategy:l,resizeObserverConfig:c,transition:f=$z}=e;const{items:p,containerId:m,activeIndex:w,disabled:g,disableTransforms:N,sortedRects:k,overIndex:E,useDragOverlay:b,strategy:S}=C.useContext(Z6),L=Wz(r,g),M=p.indexOf(a),Y=C.useMemo(()=>({sortable:{containerId:m,index:M,items:p},...i}),[m,i,M,p]),oe=C.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:Z,node:R,isOver:ee,setNodeRef:ae}=Lz({id:a,data:Y,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:oe,...c}}),{active:O,activatorEvent:U,activeNodeRect:K,attributes:J,setNodeRef:xe,listeners:ye,isDragging:Q,over:$,setActivatorNodeRef:q,transform:se}=Ez({id:a,data:Y,attributes:{...Uz,...n},disabled:L.draggable}),Ae=aU(ae,xe),P=!!O,H=P&&!N&&Um(w)&&Um(E),re=!b&&Q,ce=re&&H?se:null,ke=H?ce??(l??S)({rects:k,activeNodeRect:K,activeIndex:w,overIndex:E,index:M}):null,Ee=Um(w)&&Um(E)?s({id:a,items:p,activeIndex:w,overIndex:E}):M,te=O==null?void 0:O.id,le=C.useRef({activeId:te,items:p,newIndex:Ee,containerId:m}),ue=p!==le.current.items,pe=t({active:O,containerId:m,isDragging:Q,isSorting:P,id:a,index:M,items:p,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:f,wasDragging:le.current.activeId!=null}),je=zz({disabled:!pe,index:M,node:R,rect:Z});return C.useEffect(()=>{P&&le.current.newIndex!==Ee&&(le.current.newIndex=Ee),m!==le.current.containerId&&(le.current.containerId=m),p!==le.current.items&&(le.current.items=p)},[P,Ee,m,p]),C.useEffect(()=>{if(te===le.current.activeId)return;if(te!=null&&le.current.activeId==null){le.current.activeId=te;return}const fe=setTimeout(()=>{le.current.activeId=te},50);return()=>clearTimeout(fe)},[te]),{active:O,activeIndex:w,attributes:J,data:Y,rect:Z,index:M,newIndex:Ee,items:p,isOver:ee,isSorting:P,isDragging:Q,listeners:ye,node:R,overIndex:E,over:$,setNodeRef:Ae,setActivatorNodeRef:q,setDroppableNodeRef:ae,setDraggableNodeRef:xe,transform:je??ke,transition:Oe()};function Oe(){if(je||ue&&le.current.newIndex===M)return Bz;if(!(re&&!ew(U)||!f)&&(P||pe))return hp.Transition.toString({...f,property:ek})}}function Wz(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}vn.Down,vn.Right,vn.Up,vn.Left;function Hz({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[s,a]=C.useState(""),[l,c]=C.useState([]),[f,p]=C.useState(!1),[m,w]=C.useState(""),g=E=>{c(b=>b.includes(E)?b.filter(S=>S!==E):[...b,E])},N=async()=>{if(l.length<2){Pe.error("Selecciona al menos dos canciones para el medley");return}let E=s.trim();if(E||(E=l.map(S=>r.find(L=>L.id===S)).filter(S=>!!S).map(S=>S.title).join(" | ")),!E){Pe.error("No se pudo generar el nombre del medley.");return}p(!0);try{const b=await A$(n,E,l);b&&(Pe.success("Medley creado con éxito"),i(b),k())}catch(b){console.error("Error creating medley:",b),Pe.error("Error al crear el medley")}finally{p(!1)}},k=()=>{a(""),c([]),w(""),t()};return e?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(Vn,{label:"Nombre del Medley",value:s,onChange:E=>a(E.target.value),placeholder:"Ej: Medley de Rock Clásico",autoFocus:!0}),h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),h.jsxs("div",{className:"border rounded-md p-2",children:[h.jsx(Vn,{placeholder:"Buscar canción para añadir...",value:m,onChange:E=>w(E.target.value),className:"mb-2"}),h.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(E=>E.type==="song").filter(E=>{var b;return E.title.toLowerCase().includes(m.toLowerCase())||((b=E.artist)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))}).map(E=>h.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:h.jsx("div",{children:h.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[h.jsx("input",{type:"checkbox",checked:l.includes(E.id),onChange:()=>g(E.id),className:"rounded"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-medium text-sm truncate",children:E.title}),E.artist&&h.jsx("div",{className:"text-xs text-gray-500 truncate",children:E.artist})]})]})})},E.id))})]})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(wt,{variant:"secondary",onClick:k,disabled:f,children:"Cancelar"}),h.jsx(wt,{variant:"primary",onClick:N,loading:f,disabled:l.length<2,children:"Crear Medley"})]})]})}):null}function Vz({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:s,onMedleyDeleted:a}){const[l,c]=C.useState(!1),[f,p]=C.useState(!1),[m,w]=C.useState(e.title),[g,N]=C.useState(!1),[k,E]=C.useState(!1),[b,S]=C.useState(!1),[L,M]=C.useState(""),[Y,oe]=C.useState([]);C.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const J=await X0(e.group_id);if(J){const xe=J.filter(ye=>{var Q;return((Q=e.medley_song_ids)==null?void 0:Q.includes(ye.id))&&ye.type==="song"});oe(xe)}}})()},[e.medley_song_ids,e.group_id]);const Z=async()=>{if(!m.trim()){Pe.error("El nombre del medley es obligatorio");return}E(!0);try{await O$(e.id,{title:m})&&(Pe.success("Medley actualizado"),s(e.id,m),p(!1))}catch(K){console.error("Error al actualizar el medley:",K),Pe.error("Error al actualizar el medley")}finally{E(!1)}},R=async()=>{E(!0);try{await F$(e.id)&&(Pe.success("Medley eliminado"),a(e.id))}catch(K){console.error("Error al eliminar el medley:",K),Pe.error("Error al eliminar el medley")}finally{E(!1),S(!1)}},ee=async K=>{E(!0);try{await R$(e.id,K)&&(Pe.success("Canción eliminada del medley"),i(e.id,K),oe(xe=>xe.filter(ye=>ye.id!==K)))}catch(J){console.error("Error al eliminar la canción del medley:",J),Pe.error("Error al eliminar la canción del medley")}finally{E(!1)}},ae=async K=>{if(!t.find(xe=>xe.id===K)){Pe.error("No se pudo encontrar la canción seleccionada");return}E(!0);try{const xe=await M$(e.id,K);if(xe){Pe.success("Canción añadida al medley"),r(e.id,K),N(!1),M("");const ye=await X0(e.group_id);if(ye&&xe.medley_song_ids){const Q=ye.filter($=>{var q;return((q=xe.medley_song_ids)==null?void 0:q.includes($.id))&&$.type==="song"});oe(Q)}}}catch(xe){console.error("Error al añadir la canción al medley:",xe),Pe.error("Error al añadir la canción al medley")}finally{E(!1)}},O=e.medley_song_ids?e.medley_song_ids.map(K=>Y.find(J=>J.id===K)).filter(Boolean):[],U=Array.from(new Map(O.map(K=>[K.id,K])).values());return h.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[h.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!l),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(iU,{className:"text-blue-600"}),h.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[h.jsxs("span",{children:[U.length," canciones"]}),l?h.jsx(tU,{}):h.jsx(eU,{})]})]}),l&&h.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:K=>K.stopPropagation(),children:[n&&h.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[h.jsxs(wt,{variant:"secondary",onClick:()=>{p(!f),f&&w(e.title)},children:[h.jsx(D6,{className:"mr-1"}),f?"Cancelar":"Renombrar"]}),!f&&h.jsxs(wt,{variant:"danger",onClick:()=>S(!0),loading:k,children:[h.jsx(sU,{className:"mr-1"}),"Eliminar"]})]}),f&&h.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[h.jsx(Vn,{value:m,onChange:K=>w(K.target.value),placeholder:"Nuevo nombre del medley"}),h.jsx(wt,{onClick:Z,loading:k,children:"Guardar"})]}),!f&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),U.length===0?h.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):h.jsx("ul",{className:"space-y-1",children:U.map(K=>h.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"font-medium text-sm",children:K.title}),K.artist&&h.jsx("span",{className:"text-xs text-gray-500 ml-2",children:K.artist})]}),n&&h.jsx(wt,{variant:"danger",onClick:()=>ee(K.id),loading:k,children:h.jsx(e3,{})})]},K.id))})]}),n&&h.jsx("div",{className:"mt-3",children:g?h.jsxs("div",{className:"border rounded p-2 bg-white",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-sm font-medium",children:"Añadir canción:"}),h.jsx(wt,{variant:"secondary",onClick:()=>{N(!1),M("")},children:h.jsx(e3,{})})]}),h.jsx(Vn,{placeholder:"Buscar canción...",value:L,onChange:K=>M(K.target.value),className:"mb-2"}),h.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(K=>K.type==="song").filter(K=>!U.some(J=>J.id===K.id)).filter(K=>{var J;return K.title.toLowerCase().includes(L.toLowerCase())||((J=K.artist)==null?void 0:J.toLowerCase().includes(L.toLowerCase()))}).map(K=>h.jsxs("button",{onClick:()=>ae(K.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:k,children:[h.jsx("div",{className:"font-medium",children:K.title}),K.artist&&h.jsx("div",{className:"text-xs text-gray-500",children:K.artist})]},K.id)),t.filter(K=>K.type==="song"&&!U.some(J=>J.id===K.id)).length===0&&h.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay más canciones para añadir."})]})]}):h.jsxs(wt,{variant:"primary",onClick:()=>N(!0),children:[h.jsx(wy,{className:"mr-1"}),"Añadir Canción"]})})]})]}),b&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>S(!1),children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:K=>K.stopPropagation(),children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),h.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el medley "',e.title,'"? Esta acción no se puede deshacer.']}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx(wt,{variant:"secondary",onClick:()=>S(!1),disabled:k,children:"Cancelar"}),h.jsx(wt,{variant:"danger",onClick:R,loading:k,children:k?"Eliminando...":"Eliminar"})]})]})})]})}function Gz({isOpen:e,onClose:t,groupId:n,onSetlistCreated:r}){const{isAuthenticated:i}=Ap(),[s,a]=C.useState([]),[l,c]=C.useState(null),[f,p]=C.useState([]),[m,w]=C.useState(!1),[g,N]=C.useState(!1),[k,E]=C.useState(0),[b,S]=C.useState("");C.useEffect(()=>{e&&i&&L()},[e,i]),C.useEffect(()=>{l&&(S(l.name),M(l.id))},[l]);const L=async()=>{w(!0);try{const R=await qn.getUserPlaylists(50);a(R)}catch(R){console.error("Error loading playlists:",R),Pe.error("Error al cargar las playlists")}finally{w(!1)}},M=async R=>{w(!0);try{const ee=await qn.getPlaylistTracks(R,100);p(ee.filter(ae=>ae&&ae.id))}catch(ee){console.error("Error loading playlist tracks:",ee),Pe.error("Error al cargar las canciones de la playlist")}finally{w(!1)}},Y=async()=>{if(!(!l||!f.length)){N(!0),E(0);try{const{data:{user:R}}=await Ze.auth.getUser();if(!R){Pe.error("No se pudo obtener la información del usuario");return}const ee={name:b||l.name,description:`Importado desde Spotify: ${l.name}`,group_id:n,created_by:R.id},ae=await G5(ee);if(!ae){Pe.error("Error al crear el setlist");return}const O=f.length;let U=0;for(let K=0;K<O;K++){const J=f[K];E(Math.round((K+1)/O*100));try{const xe=Math.round(J.duration_ms/6e4),ye={title:J.name,artist:J.artists.map($=>$.name).join(", "),duration_minutes:xe,key:"",notes:`Popularidad: ${J.popularity}% | Álbum: ${J.album.name}`,group_id:n,created_by:R.id},Q=await o0(ye);Q&&(await Q0(ae.id,Q.id,K+1),U++)}catch(xe){console.error(`Error importing track ${J.name}:`,xe)}}E(100),Pe.success(`Setlist "${b}" creado con ${U}/${O} canciones`),r(),t()}catch(R){console.error("Error importing playlist:",R),Pe.error("Error al importar la playlist")}finally{N(!1),E(0)}}},oe=R=>{const ee=Math.floor(R/6e4),ae=Math.floor(R%6e4/1e3);return`${ee}:${ae.toString().padStart(2,"0")}`},Z=()=>{const R=f.reduce((U,K)=>U+K.duration_ms,0),ee=Math.floor(R/6e4),ae=Math.floor(ee/60),O=ee%60;return ae>0?`${ae}h ${O}m`:`${O}m`};return e?i?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Importar Playlist de Spotify"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:g,children:h.jsx(Ta,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:l?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("button",{onClick:()=>{c(null),p([]),S("")},className:"text-blue-600 hover:text-blue-800",disabled:g,children:"← Volver a playlists"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold",children:l.name}),l.description&&h.jsx("p",{className:"text-sm text-gray-600",children:l.description})]}),h.jsx("a",{href:l.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800",children:h.jsx(J2,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del setlist"}),h.jsx("input",{type:"text",value:b,onChange:R=>S(R.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nombre para el nuevo setlist",disabled:g})]}),m?h.jsxs("div",{className:"flex items-center justify-center py-8",children:[h.jsx(go,{className:"w-8 h-8 animate-spin text-blue-500"}),h.jsx("span",{className:"ml-2 text-gray-600",children:"Cargando canciones..."})]}):h.jsxs("div",{children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," canciones • Duración total: ",Z()]})}),h.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:f.map((R,ee)=>{var ae,O;return h.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-gray-100 last:border-b-0",children:[h.jsx("span",{className:"text-sm text-gray-500 w-8",children:ee+1}),h.jsx("img",{src:((ae=R.album.images[2])==null?void 0:ae.url)||((O=R.album.images[0])==null?void 0:O.url),alt:R.album.name,className:"w-10 h-10 rounded object-cover"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-gray-900 truncate",children:R.name}),h.jsx("p",{className:"text-sm text-gray-600 truncate",children:R.artists.map(U=>U.name).join(", ")})]}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[h.jsx(z0,{className:"w-3 h-3 mr-1"}),oe(R.duration_ms)]})]},R.id)})})]})]}):h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-600 mb-4",children:"Selecciona una playlist de Spotify para importar como setlist:"}),m?h.jsxs("div",{className:"flex items-center justify-center py-8",children:[h.jsx(go,{className:"w-8 h-8 animate-spin text-blue-500"}),h.jsx("span",{className:"ml-2 text-gray-600",children:"Cargando playlists..."})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(R=>h.jsx("div",{onClick:()=>c(R),className:"border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-green-400 hover:bg-green-50 transition-colors",children:h.jsxs("div",{className:"flex items-start gap-3",children:[R.images&&R.images.length>0?h.jsx("img",{src:R.images[0].url,alt:R.name,className:"w-16 h-16 rounded object-cover flex-shrink-0"}):h.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:h.jsx(Yr,{className:"w-8 h-8 text-gray-400"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-gray-900 truncate",children:R.name}),R.description&&h.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:R.description})]})]})},R.id))})]})}),h.jsx("div",{className:"border-t p-6",children:g?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-sm text-gray-600",children:["Importando canciones... ",k,"%"]}),h.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(k/100*f.length),"/",f.length]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}):h.jsxs("div",{className:"flex justify-end gap-3",children:[h.jsx(wt,{variant:"secondary",onClick:t,children:"Cancelar"}),l&&f.length>0&&h.jsxs(wt,{variant:"primary",onClick:Y,disabled:!b.trim(),children:[h.jsx(q0,{className:"w-4 h-4 mr-2"}),"Importar ",f.length," canciones"]})]})})]})}):h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Importar Playlist de Spotify"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:h.jsx(Ta,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Yr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Necesitas conectar con Spotify para importar playlists"}),h.jsx(wt,{onClick:t,variant:"primary",children:"Entendido"})]})]})}):null}const h3={name:"",description:"",estimated_duration_minutes:""};function Yz({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:s,onMedleyRenamed:a,onMedleyDeleted:l}){var N,k,E,b;const{attributes:c,listeners:f,setNodeRef:p,transform:m,transition:w}=qz({id:e.id}),g={transform:hp.Transform.toString(m),transition:w};return h.jsxs("div",{ref:p,style:g,...c,className:"flex items-center gap-2 mb-2",children:[t&&h.jsx("div",{...f,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 py-3 px-3 touch-none select-none min-w-[48px] min-h-[48px] flex items-center justify-center rounded-md hover:bg-gray-100 active:bg-gray-200 transition-colors",role:"button","aria-label":"Arrastrar para reordenar",tabIndex:0,children:h.jsx(rU,{className:"text-lg"})}),h.jsx("div",{className:"flex-grow",children:e.type==="song"?h.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm border border-gray-200 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:(N=e.data.song)==null?void 0:N.title}),h.jsxs("p",{className:"text-sm text-gray-500",children:[(k=e.data.song)==null?void 0:k.artist," - ",(E=e.data.song)==null?void 0:E.duration_minutes,"m - Tono: ",(b=e.data.song)==null?void 0:b.key]})]}),t&&h.jsx(wt,{variant:"danger",onClick:()=>r(e.data.setlist_id,e.data.song_id),children:"Eliminar"})]}):h.jsx(Vz,{medley:e.data,availableSongs:n.filter(S=>S.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:s,onMedleyRenamed:a,onMedleyDeleted:l})})]})}function Kz({groupId:e,canManageSetlists:t=!0}){const[n,r]=C.useState([]),[i,s]=C.useState([]),[a,l]=C.useState(!0),[c,f]=C.useState(!1),[p,m]=C.useState(null),[w,g]=C.useState(null),[N,k]=C.useState(h3),[E,b]=C.useState(!1),[S,L]=C.useState(null),[M,Y]=C.useState(!1),[oe,Z]=C.useState(null),[R,ee]=C.useState(""),[ae,O]=C.useState(""),[U,K]=C.useState(!1),[J,xe]=C.useState(!1),{isAuthenticated:ye,createPlaylistFromSetlist:Q,searchTracks:$}=Ap();C.useState(null),C.useState("");const[q,se]=C.useState([]),Ae=xU(Fv(sw,{activationConstraint:{distance:8}}),Fv(V6,{activationConstraint:{delay:200,tolerance:5}}),Fv(rw,{coordinateGetter:(be,{context:{active:Me,droppableRects:Be,droppableContainers:We,collisionRect:et}})=>null}));C.useEffect(()=>{P()},[e]),C.useEffect(()=>{if(w){const be=[];w.songs&&w.songs.forEach(We=>{var st,it,yt,Nt;const et=((st=We.song)==null?void 0:st.type)==="medley";et&&console.log("Processing medley item:",{songId:We.id,songSongId:(it=We.song)==null?void 0:it.id,songTitle:(yt=We.song)==null?void 0:yt.title,songType:(Nt=We.song)==null?void 0:Nt.type,position:We.position}),We.id?be.push({id:We.id,type:et?"medley":"song",position:We.position,data:et?We.song:We}):console.error("Song with undefined ID found:",We)}),w.medleys&&w.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",w.medleys),console.warn('All medleys should be in the songs table with type="medley"')),be.sort((We,et)=>We.position-et.position);const Me=be.map(We=>We.id),Be=Me.filter((We,et)=>Me.indexOf(We)!==et);Be.length>0&&(console.error("Duplicate IDs found in setlistItems:",Be),console.error("All items:",be),console.error("selectedSetlist.songs:",w.songs),console.error("selectedSetlist.medleys:",w.medleys)),console.log("All setlistItems:",be.map(We=>({id:We.id,type:We.type,position:We.position}))),se(be)}else se([])},[w]);const P=async()=>{l(!0);const[be,Me]=await Promise.all([oy(e),X0(e)]);return be&&r(be),Me&&s(Me),l(!1),be},H=async be=>{if(be.preventDefault(),!N.name.trim()){Pe.error("El nombre es obligatorio");return}const{data:{user:Me}}=await Ze.auth.getUser();if(!Me){Pe.error("No se pudo obtener la información del usuario");return}const Be={group_id:e,name:N.name.trim(),description:N.description.trim()||void 0,estimated_duration_minutes:N.estimated_duration_minutes?parseInt(N.estimated_duration_minutes):void 0,created_by:Me.id};if(p){const We=await P$(p.id,Be);We&&(Pe.success("Setlist actualizado correctamente"),r(et=>et.map(st=>st.id===p.id?{...st,...We}:st)),(w==null?void 0:w.id)===p.id&&g(et=>et?{...et,...We}:null))}else{const We=await G5({...Be,name:Be.name});We&&(Pe.success("Setlist creado correctamente"),r(et=>[...et,{...We,songs:[]}]))}le()},re=be=>{var Me;m(be),k({name:be.name,description:be.description||"",estimated_duration_minutes:((Me=be.estimated_duration_minutes)==null?void 0:Me.toString())||""}),f(!0)},ce=be=>{L(be),b(!0)},he=async()=>{if(!S)return;await T$(S.id)?(Pe.success("Setlist eliminado correctamente"),r(Me=>Me.filter(Be=>Be.id!==S.id)),(w==null?void 0:w.id)===S.id&&g(null)):Pe.error("No se pudo eliminar el setlist"),b(!1),L(null)},ke=async(be,Me)=>{if(!w)return;const We=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(st=>st.position)):0)+1,et=await Q0(be,Me,We);if(et){Pe.success("Canción añadida al setlist");const st=i.find(it=>it.id===Me);if(st){const it={...et,position:We,song:st},yt={...w,songs:[...w.songs||[],it]};g(yt),r(Nt=>Nt.map(ft=>ft.id===be?yt:ft))}}else console.error("No se pudo añadir la canción al setlist")},Ee=async(be,Me)=>{var We;if(await I$(be,Me)){Pe.success("Canción eliminada del setlist");const et=w?{...w,songs:(We=w.songs)==null?void 0:We.filter(st=>st.song_id!==Me)}:null;et&&(g(et),r(st=>st.map(it=>it.id===et.id?et:it)))}else Pe.error("No se pudo eliminar la canción del setlist")},te=be=>{const{active:Me,over:Be}=be;if(!Be||Me.id===Be.id||!w)return;const We=q.findIndex(pt=>pt.id===Me.id),et=q.findIndex(pt=>pt.id===Be.id),it=aw(q,We,et).map((pt,tt)=>({id:pt.id,type:pt.type,position:tt+1})),yt=it.map(pt=>{var In;return{...(In=w.songs)==null?void 0:In.find(zt=>zt.id===pt.id),position:pt.position}}),Nt={...w,songs:yt};g(Nt),r(pt=>pt.map(tt=>tt.id===Nt.id?Nt:tt)),console.log("Reordering items:",it);const ft=it.map(pt=>({songId:pt.id,position:pt.position}));D$(w.id,ft).then(pt=>{pt?console.log("Reorder successful"):(Pe.error("No se pudo guardar el orden. Se revertirán los cambios."),P())})},le=()=>{k(h3),m(null),f(!1)},ue=be=>{if(!i)return[];const Me=new Set((be.songs||[]).map(Be=>Be.song_id));return i.filter(Be=>!Me.has(Be.id))},pe=be=>{const Me=n.find(Be=>Be.id===be.id);g(Me||null)},je=(be,Me,Be)=>{if(!w)return;const We={...Be,song:Me},et={...w,medleys:(w.medleys||[]).map(st=>st.id===be?{...st,songs:[...st.songs||[],We].sort((it,yt)=>it.position-yt.position)}:st)};g(et),r(st=>st.map(it=>it.id===et.id?et:it))},Oe=(be,Me)=>{if(!w)return;const Be={...w,medleys:(w.medleys||[]).map(We=>We.id===be?{...We,songs:(We.songs||[]).filter(et=>et.song_id!==Me)}:We)};g(Be),r(We=>We.map(et=>et.id===Be.id?Be:et))},fe=(be,Me)=>{if(!w)return;const Be={...w,medleys:(w.medleys||[]).map(We=>We.id===be?{...We,name:Me}:We)};g(Be),r(We=>We.map(et=>et.id===Be.id?Be:et))},G=be=>{if(!w)return;const Me={...w,medleys:(w.medleys||[]).filter(Be=>Be.id!==be)};g(Me),r(Be=>Be.map(We=>We.id===Me.id?Me:We))},qe=async be=>{if(!w)return;const Be=(w.songs&&w.songs.length>0?Math.max(...w.songs.map(et=>et.position)):0)+1;if(await Q0(w.id,be.id,Be)){Pe.success("Medley creado y añadido al setlist"),await P();const et=await oy(e);if(et){const st=et.find(it=>it.id===w.id);st&&g(st)}}else Pe.error("Medley creado pero no se pudo añadir al setlist")},Re=be=>{Z(be),ee(`${be.name} (copia)`),Y(!0)},Fe=async()=>{if(!oe||!R.trim())return;l(!0),Y(!1),await $$(oe.id,R.trim())?(Pe.success("Setlist duplicado correctamente"),await P()):Pe.error("No se pudo duplicar el setlist"),Z(null),ee(""),l(!1)};return a?h.jsx("div",{className:"text-center py-8",children:"Cargando setlists..."}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&h.jsxs("div",{className:"flex gap-3",children:[h.jsx(wt,{onClick:()=>f(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"}),h.jsxs(wt,{onClick:()=>xe(!0),variant:"secondary",className:`${ye?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,title:ye?"Importar playlist desde Spotify":"Conecta con Spotify para importar playlists",children:[h.jsx(ZB,{className:"mr-2"}),"Importar de Spotify",!ye&&h.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Conectar)"})]})]})]}),!t&&h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:h.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&h.jsxs("form",{onSubmit:H,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(Vn,{label:"Nombre *",value:N.name,onChange:be=>k({...N,name:be.target.value}),required:!0}),h.jsx(Vn,{label:"Duración estimada (minutos)",type:"number",value:N.estimated_duration_minutes,onChange:be=>k({...N,estimated_duration_minutes:be.target.value}),min:"1"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),h.jsx("textarea",{value:N.description,onChange:be=>k({...N,description:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripción breve del setlist..."})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(wt,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),h.jsx(wt,{type:"button",variant:"secondary",onClick:le,children:"Cancelar"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[h.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 lg:hidden",children:"Setlists"}),n.map(be=>{var Me,Be;return h.jsxs("div",{className:`p-4 rounded-lg cursor-pointer transition-all ${(w==null?void 0:w.id)===be.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>pe(be),children:[h.jsx("h4",{className:`font-bold ${(w==null?void 0:w.id)===be.id?"text-white":"text-gray-800"}`,children:be.name}),h.jsxs("p",{className:`text-sm ${(w==null?void 0:w.id)===be.id?"text-blue-100":"text-gray-500"}`,children:[(((Me=be.songs)==null?void 0:Me.length)||0)+(((Be=be.medleys)==null?void 0:Be.length)||0)," items"]})]},be.id)}),n.length===0&&!a&&h.jsx("p",{className:"text-center text-gray-500 py-4",children:"No hay setlists. ¡Crea el primero!"})]}),h.jsx("div",{className:"lg:col-span-2",children:w?h.jsxs("div",{className:"bg-white p-4 lg:p-6 rounded-lg shadow-md",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4 gap-4",children:[h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 truncate",children:w.name}),h.jsx("p",{className:"text-sm text-gray-500 break-words",children:w.description})]}),t&&h.jsxs("div",{className:"flex flex-wrap gap-2 lg:flex-nowrap",children:[h.jsxs(wt,{variant:"primary",onClick:()=>K(!0),children:[h.jsx(wy,{className:"mr-1"})," Crear Medley"]}),h.jsxs(wt,{variant:"secondary",onClick:()=>re(w),children:[h.jsx(D6,{className:"mr-2"})," Editar"]}),h.jsxs(wt,{variant:"secondary",onClick:()=>Re(w),children:[h.jsx(nU,{className:"mr-2"})," Duplicar"]}),h.jsx(wt,{variant:"danger",onClick:()=>ce(w),children:"Eliminar"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 xl:gap-8",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Canciones en el Setlist"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Sz,{sensors:Ae,collisionDetection:kU,onDragEnd:te,children:h.jsx(Mz,{items:q.map(be=>be.id),strategy:Dz,children:q.map((be,Me)=>h.jsx(Yz,{item:be,canManageSetlists:t,songs:i,onRemoveSong:Ee,onSongAddedToMedley:je,onSongRemovedFromMedley:Oe,onMedleyRenamed:fe,onMedleyDeleted:G},`${be.type}-${be.id}-${Me}`))})}),q.length===0&&h.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist está vacío."})]})]}),t&&h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Añadir Canción al Setlist"}),h.jsx(Vn,{placeholder:"Buscar canción...",value:ae,onChange:be=>O(be.target.value),className:"mb-2"}),h.jsxs("div",{className:"space-y-2 max-h-60 lg:max-h-80 overflow-y-auto pr-2",children:[ue(w).filter(be=>{var Me;return be.title.toLowerCase().includes(ae.toLowerCase())||((Me=be.artist)==null?void 0:Me.toLowerCase().includes(ae.toLowerCase()))}).map(be=>h.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"font-medium text-sm",children:[be.type==="medley"&&h.jsx("span",{className:"text-blue-600 mr-1",children:"🎵"}),be.title]}),h.jsx("p",{className:"text-xs text-gray-500",children:be.type==="medley"?"Medley":be.artist})]}),h.jsx(wt,{onClick:()=>ke(w.id,be.id),children:h.jsx(wy,{})})]},be.id)),ue(w).length===0&&h.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya están en este setlist."})]})]})]})]}):h.jsx("div",{className:"text-center py-12 text-gray-500",children:h.jsx("p",{children:"Selecciona un setlist para ver los detalles"})})})]}),E&&S&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminación"}),h.jsxs("p",{className:"text-gray-600 mb-6",children:['¿Estás seguro de que quieres eliminar el setlist "',S.name,'"? Esta acción no se puede deshacer.']}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx(wt,{variant:"secondary",onClick:()=>{b(!1),L(null)},children:"Cancelar"}),h.jsx(wt,{variant:"danger",onClick:he,children:"Eliminar"})]})]})}),M&&oe&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),h.jsx(Vn,{value:R,onChange:be=>ee(be.target.value),className:"mb-6",autoFocus:!0}),h.jsxs("div",{className:"flex gap-3 justify-end",children:[h.jsx(wt,{variant:"secondary",onClick:()=>{Y(!1),Z(null),ee("")},children:"Cancelar"}),h.jsx(wt,{variant:"primary",onClick:Fe,disabled:!R.trim(),children:"Duplicar"})]})]})}),U&&w&&h.jsx(Hz,{isOpen:U,onClose:()=>K(!1),groupId:e,availableSongs:ue(w),onMedleyCreated:be=>{qe(be),K(!1)}}),J&&h.jsx(Gz,{isOpen:J,onClose:()=>xe(!1),groupId:e,onSetlistCreated:()=>{P(),xe(!1)}})]})}function Jz({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0,defaultTab:r="songs"}){const[i,s]=C.useState(r);return C.useEffect(()=>{s(r)},[r]),h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[h.jsx("div",{className:"border-b border-gray-200",children:h.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[h.jsx("button",{onClick:()=>s("songs"),className:`${i==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),h.jsx("button",{onClick:()=>s("setlists"),className:`${i==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),h.jsxs("div",{className:"p-6",children:[i==="songs"&&h.jsx(HB,{groupId:e,canManageSongs:t}),i==="setlists"&&h.jsx(Kz,{groupId:e,canManageSetlists:n})]})]})})}function zv({defaultTab:e}){const{id:t}=DS(),n=Ra(),r=wo(),[i,s]=C.useState(null),[a,l]=C.useState([]),[c,f]=C.useState([]),[p,m]=C.useState(!1),[w,g]=C.useState(!1),[N,k]=C.useState(!1),[E,b]=C.useState(null),[S,L]=C.useState(null),[M,Y]=C.useState(!0),[oe,Z]=C.useState(!1),[R,ee]=C.useState(null),[ae,O]=C.useState(!1),[U,K]=C.useState([]),{user:J}=Ms(),[xe,ye]=C.useState(!1),[Q,$]=C.useState(!1),[q,se]=C.useState(""),Ae=()=>e||(r.pathname.endsWith("/songs")?"songs":r.pathname.endsWith("/setlists")?"setlists":"overview"),[P,H]=C.useState(Ae()),re=fe=>{switch(H(fe),fe){case"songs":n(`/group/${t}/songs`);break;case"setlists":n(`/group/${t}/setlists`);break;case"overview":default:n(`/group/${t}`);break}};C.useEffect(()=>{H(Ae())},[r.pathname,r.search,e]),C.useEffect(()=>{t&&he()},[t,J]),C.useEffect(()=>{t&&J&&ce()},[t,J,a]);const ce=async()=>{if(J)try{const fe=await Fn(()=>Ze.from("users").select("role").eq("id",J.id).single(),"Error checking permissions");fe&&(ee(fe.role),Z(fe.role==="admin"));const G=a.find(qe=>qe.user_id===J.id);ye(!!G),O((G==null?void 0:G.role_in_group)==="principal"||!1),(G==null?void 0:G.role_in_group)==="principal"&&Z(!0)}catch(fe){console.error("Error checking permissions:",fe)}},he=async()=>{try{const fe=await Fn(()=>Ze.from("groups").select("*").eq("id",t).single(),"Error loading group");fe&&s(fe);const G=await Fn(()=>Ze.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",t).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(G){const Re=G.map(Fe=>({...Fe,instruments:(Fe.group_member_roles||[]).filter(be=>be==null?void 0:be.role).map(be=>({id:be.role.id,name:be.role.name}))}));l(Re)}const qe=await Fn(()=>Ze.from("roles").select("*").eq("group_id",t).order("name"),"Error loading roles");qe&&f(qe)}catch(fe){console.error("Error fetching group data:",fe)}finally{Y(!1)}},ke=async fe=>{if(!(!J||!t))try{await Fn(()=>Ze.rpc("link_group_member",{p_member_id:fe,p_user_id:J.id,p_group_id:t}),"Error linking member"),Pe.success("¡Te has vinculado correctamente!"),await he(),await ce()}catch(G){console.error("Error linking member:",G)}},Ee=fe=>{b(fe),g(!0)},te=fe=>{L(fe),k(!0)},le=async()=>{if(S)try{await Fn(()=>Ze.from("group_members").delete().eq("id",S.id),"Error deleting member"),Pe.success("Miembro eliminado correctamente"),k(!1),L(null),he()}catch(fe){console.error("Error deleting member:",fe)}},ue=a.filter(fe=>fe.role_in_group==="principal"),pe=a.filter(fe=>fe.role_in_group==="sustituto"),je=(fe,G)=>h.jsxs("div",{children:[h.jsx("div",{className:"bg-gray-50 px-3 py-2",children:h.jsx("h3",{className:"text-sm font-medium text-gray-700",children:G})}),h.jsx("div",{className:"divide-y",children:fe.map(qe=>h.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h3",{className:"font-medium text-gray-900",children:qe.name}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${qe.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:qe.role_in_group==="principal"?"Principal":"Sustituto"}),!qe.user_id&&h.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),qe.instruments.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:qe.instruments.map((Re,Fe)=>h.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[h.jsx(Yr,{className:"w-3 h-3 mr-1"}),Re.name]},`${qe.id}-${Re.id}-${Fe}`))}),qe.user_id===(J==null?void 0:J.id)&&h.jsx("div",{className:"mt-2 flex items-center",children:h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:qe.sync_calendar,onChange:async()=>{try{await Fn(()=>Ze.from("group_members").update({sync_calendar:!qe.sync_calendar}).eq("id",qe.id),"Error actualizando preferencias de calendario"),Pe.success("Preferencias de calendario actualizadas"),he()}catch(Re){console.error("Error:",Re)}},className:"sr-only peer"}),h.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),h.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),qe.user_id===(J==null?void 0:J.id)&&qe.sync_calendar&&h.jsxs("button",{onClick:()=>Oe(qe.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[h.jsx(U0,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripción al calendario"]})]}),h.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[(R==="admin"||qe.user_id===(J==null?void 0:J.id))&&h.jsx("button",{onClick:()=>Ee(qe),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:h.jsx(gN,{className:"w-4 h-4"})}),(R==="admin"||ae)&&h.jsx("button",{onClick:()=>te(qe),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:h.jsx(C5,{className:"w-4 h-4"})})]})]}),!qe.user_id&&!xe&&h.jsxs(wt,{onClick:()=>ke(qe.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[h.jsx(s_,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},qe.id))})]}),Oe=async fe=>{try{const{data:G,error:qe}=await Ze.rpc("get_group_calendar",{p_group_id:i==null?void 0:i.id,p_member_id:fe});if(qe)throw qe;if(!G)throw new Error("No se pudo generar el calendario");const Re=new Blob([G],{type:"text/calendar"}),Fe=new File([Re],"calendar.ics",{type:"text/calendar"}),{error:be}=await Ze.storage.from("calendars").upload(`${i==null?void 0:i.id}/${fe}/calendar.ics`,Fe,{cacheControl:"0",upsert:!0});if(be)throw console.error("Upload error:",be),be;const{data:{publicUrl:Me}}=await Ze.storage.from("calendars").getPublicUrl(`${i==null?void 0:i.id}/${fe}/calendar.ics`);if(Me)se(Me),$(!0);else throw new Error("No se pudo generar el enlace público")}catch(G){console.error("Error:",G),G.message==="new row violates row-level security policy"?Pe.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):Pe.error("Error al generar el enlace del calendario")}};return M?h.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:h.jsx(go,{className:"w-8 h-8 animate-spin text-indigo-600"})}):i?h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),h.jsx("p",{className:"text-gray-500 mt-1",children:"Gestiona miembros y disponibilidad"})]}),(oe||ae)&&(!xe||R==="admin"||ae)&&h.jsxs(wt,{onClick:()=>m(!0),className:"flex items-center space-x-2",children:[h.jsx(Ig,{className:"w-5 h-5"}),h.jsx("span",{children:R==="admin"||ae?"Añadir Miembro":"Unirse al Grupo"})]})]}),h.jsx("div",{className:"border-b border-gray-200 mb-6",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsxs("button",{onClick:()=>re("overview"),className:`${P==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[h.jsx(U0,{className:"w-4 h-4"}),h.jsx("span",{children:"Vista General"})]}),h.jsxs("button",{onClick:()=>re("songs"),className:`${P==="songs"||P==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[h.jsx(VD,{className:"w-4 h-4"}),h.jsx("span",{children:"Canciones y Setlists"})]})]})}),P==="overview"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[h.jsx("div",{className:"p-4 border-b",children:h.jsx("h2",{className:"text-lg font-semibold",children:"Miembros del Grupo"})}),a.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(s_,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),h.jsxs("p",{className:"text-gray-500",children:["No hay miembros aún. ",oe?'¡Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):h.jsxs("div",{className:"divide-y divide-gray-200",children:[ue.length>0&&je(ue,"Miembros Principales"),pe.length>0&&je(pe,"Miembros Sustitutos")]})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[h.jsx("div",{className:"p-4 border-b",children:h.jsx("h2",{className:"text-lg font-semibold",children:"Disponibilidad"})}),h.jsx("div",{className:"p-4",children:h.jsx(E$,{members:a,onAvailableDatesChange:K,groupName:i.name})})]})]}),i&&t&&h.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:h.jsx(BB,{groupId:t,canManageEvents:R==="admin"||ae,availableDates:U,members:a})})]}),(P==="songs"||P==="setlists")&&i&&t&&h.jsx(Jz,{groupId:t,canManageSongs:R==="admin"||ae,canManageSetlists:R==="admin"||ae,defaultTab:P==="setlists"?"setlists":"songs"}),i&&(oe||ae)&&(!xe||R==="admin"||ae)&&h.jsx(VM,{isOpen:p,onClose:()=>m(!1),groupId:i.id,instruments:c,onMemberAdded:he,isEmptyGroup:a.length===0,userRole:R}),E&&h.jsx(GM,{isOpen:w,onClose:()=>{g(!1),b(null)},member:E,instruments:c,onMemberUpdated:he,userRole:R}),h.jsx(UB,{isOpen:N,onClose:()=>{k(!1),L(null)},onConfirm:le,title:"Eliminar Miembro",message:`¿Estás seguro de que quieres eliminar a ${S==null?void 0:S.name}? Esta acción no se puede deshacer.`}),h.jsx(zB,{isOpen:Q,onClose:()=>$(!1),calendarUrl:q})]}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),h.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a él."})]})}function qm({children:e}){console.log("ProtectedRoute mounted");const{user:t}=Ms(),n=wo();return console.log("ProtectedRoute check:",{user:t,currentPath:n.pathname}),t?h.jsx(h.Fragment,{children:e}):(console.log("No user in ProtectedRoute, redirecting to login"),h.jsx(r7,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0}))}function Xz(){return h.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Política de Privacidad"}),h.jsxs("div",{className:"prose prose-indigo",children:[h.jsxs("p",{className:"mb-4",children:["Última actualización: ",new Date().toLocaleDateString()]}),h.jsxs("section",{className:"mb-8",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Información que Recopilamos"}),h.jsx("p",{children:"Band Manager recopila la siguiente información personal:"}),h.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[h.jsx("li",{children:"Dirección de correo electrónico"}),h.jsx("li",{children:"Nombre"}),h.jsx("li",{children:"Información de perfil de usuario"})]})]}),h.jsxs("section",{className:"mb-8",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),h.jsx("p",{children:"Nuestra aplicación requiere ciertos permisos para funcionar correctamente:"}),h.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la información de tu banda y permitir la colaboración entre miembros."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicación) mejorando así el rendimiento y permitiendo el uso sin conexión."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Cámara (opcional):"})," Solo si decides subir fotos directamente desde la aplicación para tu perfil o contenido de la banda."]})]}),h.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicación. No compartimos ninguna información recopilada a través de estos permisos con terceros."}),h.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a través de la configuración de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicación."})]}),h.jsxs("section",{className:"mb-8",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cómo Utilizamos su Información"}),h.jsx("p",{children:"Utilizamos la información recopilada para:"}),h.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[h.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),h.jsx("li",{children:"Gestionar su cuenta y membresía"}),h.jsx("li",{children:"Permitir la participación en funciones interactivas"}),h.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),h.jsxs("section",{className:"mb-8",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),h.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticación, que implementa estándares de seguridad de la industria para proteger su información personal."})]}),h.jsxs("section",{className:"mb-8",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),h.jsx("p",{children:"Usted tiene derecho a:"}),h.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[h.jsx("li",{children:"Acceder a sus datos personales"}),h.jsx("li",{children:"Corregir datos inexactos"}),h.jsx("li",{children:"Solicitar la eliminación de sus datos"}),h.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),h.jsxs("section",{className:"mb-8",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),h.jsxs("p",{children:["Si tiene preguntas sobre esta Política de Privacidad, puede contactarnos en:",h.jsx("br",{}),h.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function Qz(){console.log("AcceptInvitation component mounted");const[e]=FS(),t=e.get("token"),n=Ra(),{user:r}=Ms(),[i,s]=C.useState(!0),[a,l]=C.useState(null);C.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),Pe.error("Token de invitación no válido"),n("/");return}(async()=>{try{if(!r){const g=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",g),n("/login",{state:{returnTo:g}});return}const{data:p,error:m}=await Ze.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:m}),m)throw m;if(!p||p.length===0){Pe.error("Invitación no encontrada o ya procesada"),n("/");return}const w=p[0];if(console.log("Invitation data:",w),r.email!==w.email){Pe.error("Esta invitación es para otro correo electrónico"),n("/");return}if(!e.get("group_member_id")){const g=new URLSearchParams(e);g.set("group_member_id",w.group_member_id),n(`${location.pathname}?${g.toString()}`,{replace:!0})}l({groupName:w.group_name,role:w.role_in_group}),s(!1)}catch(p){console.error("Error checking invitation:",p),Pe.error(p.message||"Error al verificar la invitación"),n("/")}})()},[t,r,n,e]);const c=async f=>{try{s(!0);const{data:p,error:m}=await Ze.rpc("get_invitation_details",{p_token:t});if(m)throw m;if(!p||p.length===0)throw new Error("Invitación no encontrada");const{group_member_id:w}=p[0],{error:g}=await Ze.rpc("handle_group_invitation",{p_group_member_id:w,p_accept:f});if(g)throw g;Pe.success(f?"Invitación aceptada":"Invitación rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),Pe.error(p.message)}finally{s(!1)}};return i?h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitación..."})]})}):a?h.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[h.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitación a Grupo"}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",h.jsx("strong",{children:a.groupName})]}),h.jsxs("p",{className:"text-gray-600",children:["Rol: ",h.jsx("span",{className:"capitalize",children:a.role})]})]}),h.jsxs("div",{className:"flex justify-center space-x-4",children:[h.jsx(wt,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),h.jsx(wt,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function Zz(){const[e,t]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),a=async l=>{l.preventDefault(),s(!0),r("");const{error:c}=await Ze.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});s(!1),r(c?"Error: "+c.message:"¡Revisa tu correo para continuar el proceso!")};return h.jsx("div",{className:"max-w-md mx-auto mt-16",children:h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"¿Olvidaste tu contraseña?"}),h.jsxs("form",{onSubmit:a,className:"space-y-6",children:[h.jsx(Vn,{label:"Email",type:"email",value:e,onChange:l=>t(l.target.value),required:!0,placeholder:"tu@email.com"}),h.jsx(wt,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&h.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),h.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:h.jsx(Ec,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function eq(){const[e,t]=C.useState(""),[n,r]=C.useState(""),[i,s]=C.useState(!1),[a,l]=C.useState(!1),[c,f]=C.useState(!1),p=Ra(),m=wo();C.useEffect(()=>{(async()=>{var N;console.log("Verificando autenticación para reset de contraseña");try{const{data:k}=await Ze.auth.getSession(),E=new URLSearchParams(m.search),b=E.get("token"),S=E.get("type"),L=(N=m.state)==null?void 0:N.resetCode,M=localStorage.getItem("recovery_token");if(console.log("Verificando tokens de recuperación:",{urlToken:(b==null?void 0:b.substring(0,10))+"..."||"No presente",stateResetCode:L?"Presente":"No presente",storedToken:M?"Presente":"No presente",type:S}),console.log("Sesión activa:",!!k.session),b&&S==="recovery")console.log("Token de recuperación válido detectado en URL"),f(!0);else if(L){console.log("Código de recuperación detectado en state"),f(!0);try{await Ze.auth.verifyOtp({token_hash:L,type:"recovery"})}catch(Y){console.warn("Error al verificar OTP con resetCode:",Y)}}else if(M){console.log("Token de recuperación encontrado en localStorage"),f(!0),localStorage.removeItem("recovery_token");try{await Ze.auth.verifyOtp({token_hash:M,type:"recovery"})}catch(Y){console.warn("Error al verificar OTP con storedToken:",Y)}}else k.session?(console.log("Sesión activa detectada, permitiendo reset de contraseña"),f(!0)):a||(console.log("No hay token de recuperación válido ni sesión activa"),p("/login"))}catch(k){console.error("Error al verificar autenticación:",k),p("/login")}})()},[m,p,a]);const w=async g=>{g.preventDefault(),s(!0),r("");try{const{error:N}=await Ze.auth.updateUser({password:e});if(N)throw N;l(!0),r("¡Contraseña actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(N){r("Error: "+N.message)}finally{s(!1)}};return h.jsx("div",{className:"max-w-md mx-auto mt-16",children:h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contraseña"}),c?h.jsxs(h.Fragment,{children:[h.jsxs("form",{onSubmit:w,className:"space-y-6",children:[h.jsx(Vn,{label:"Nueva contraseña",type:"password",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"••••••••"}),h.jsx(wt,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contraseña"})]}),n&&h.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):h.jsxs("div",{className:"py-6 text-center",children:[h.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:h.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),h.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperación..."}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automáticamente, solicita un",h.jsx(Ec,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}function tq(){const{setUser:e,setSession:t}=Ms(),[n,r]=C.useState(new Set);C.useEffect(()=>{const s=new URLSearchParams(window.location.search),a=s.get("token"),l=s.get("type"),c=window.location.hash,f=s.get("code"),p=s.get("state"),m=s.get("error");if(console.log("App: Verificando parámetros en URL:",{token:a?a.substring(0,10)+"...":null,type:l,hash:c.length>0?c.substring(0,20)+"...":null,spotifyCode:f?f.substring(0,10)+"...":null,spotifyState:p?p.substring(0,10)+"...":null,spotifyError:m,fullURL:window.location.href,searchParams:window.location.search,hasSpotifyParams:!!(f&&p)}),m){console.log("❌ Spotify auth error:",m),Pe.error(`Error de autenticación de Spotify: ${m}`);const w=new URL(window.location.href);w.searchParams.delete("error"),window.history.replaceState({},document.title,w.toString())}else if(f&&p){const w=`${f.substring(0,10)}-${p.substring(0,10)}`;n.has(w)?console.log("🎵 Callback already processed, skipping:",w):(console.log("✅ Procesando autenticación de Spotify...",w),console.log("🎵 Spotify Code:",f.substring(0,10)+"..."),console.log("🎵 Spotify State:",p.substring(0,10)+"..."),console.log("🎵 Full URL:",window.location.href),r(g=>new Set([...g,w])),console.log("🎵 About to call handleSpotifyAuth..."),i(f,p))}else f||p?console.log("⚠️ Spotify params parciales:",{spotifyCode:!!f,spotifyState:!!p}):a&&l==="recovery"&&window.location.pathname!=="/reset-password"?(console.log("App: Token PKCE de recuperación detectado, redirigiendo a /reset-password"),window.location.replace(`/reset-password?token=${a}&type=${l}`)):c.includes("access_token=")&&c.includes("type=recovery")&&window.location.pathname!=="/reset-password"&&(console.log("App: Token hash de recuperación detectado, redirigiendo a /reset-password"),window.location.replace("/reset-password"+c))},[]);const i=async(s,a)=>{try{console.log("🎵 App: Iniciando autenticación de Spotify..."),console.log("🎵 App: Code length:",s==null?void 0:s.length),console.log("🎵 App: State length:",a==null?void 0:a.length);const l=new URL(window.location.href);l.searchParams.delete("code"),l.searchParams.delete("state"),window.history.replaceState({},document.title,l.toString()),console.log("🎵 App: URL cleared, calling spotifyService.handleAuthCallback...");const c=await qn.handleAuthCallback(s,a);if(console.log("🎵 App: handleAuthCallback returned:",c),c){console.log("🎵 App: Autenticación exitosa");const f=await qn.getCurrentUser();Pe.success(`¡Conectado a Spotify como ${f.display_name}!`),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"));const p=localStorage.getItem("spotify_return_url");if(console.log("🎵 Return URL saved:",p),p){const m=new URL(p),w=new URL(window.location.href);if(m.pathname!==w.pathname){console.log("🎵 Redirecting back to:",p),localStorage.removeItem("spotify_return_url"),window.location.href=p;return}else localStorage.removeItem("spotify_return_url")}}else console.log("❌ App: Error en autenticación"),qn.clearAuthState(),Pe.error("Error al conectar con Spotify. Inténtalo de nuevo.")}catch(l){if(console.error("❌ App: Error en callback de Spotify:",l),qn.clearAuthState(),l.message.includes("State mismatch")){console.log("🎵 State mismatch detected, clearing all and refreshing..."),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const c=new URL(window.location.href);c.searchParams.delete("code"),c.searchParams.delete("state"),c.searchParams.delete("error"),window.history.replaceState({},document.title,c.toString()),r(new Set),Pe.error("Error de autenticación de Spotify. Los parámetros han sido limpiados. Puedes intentar conectar de nuevo.")}else Pe.error(`Error al autenticar con Spotify: ${l.message}`)}};return C.useEffect(()=>{console.log("App mounted"),Ze.auth.getSession().then(({data:{session:a}})=>{console.log("Initial session:",a),t(a),e((a==null?void 0:a.user)??null)});const{data:{subscription:s}}=Ze.auth.onAuthStateChange((a,l)=>{console.log("Auth state changed:",l),t(l),e((l==null?void 0:l.user)??null)});return()=>s.unsubscribe()},[e,t]),h.jsx(h7,{children:h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx(XD,{}),h.jsx("main",{className:"container mx-auto px-4 py-8",children:h.jsxs(s7,{children:[h.jsx(_a,{path:"/login",element:h.jsx(QD,{})}),h.jsx(_a,{path:"/register",element:h.jsx(ZD,{})}),h.jsx(_a,{path:"/forgot-password",element:h.jsx(Zz,{})}),h.jsx(_a,{path:"/reset-password",element:h.jsx(eq,{})}),h.jsx(_a,{path:"/accept-invitation",element:h.jsx(Qz,{})}),h.jsx(_a,{path:"/",element:h.jsx(qm,{children:h.jsx(HM,{})})}),h.jsx(_a,{path:"/group/:id",element:h.jsx(qm,{children:h.jsx(zv,{})})}),h.jsx(_a,{path:"/group/:id/songs",element:h.jsx(qm,{children:h.jsx(zv,{defaultTab:"songs"})})}),h.jsx(_a,{path:"/group/:id/setlists",element:h.jsx(qm,{children:h.jsx(zv,{defaultTab:"setlists"})})}),h.jsx(_a,{path:"/privacy-policy",element:h.jsx(Xz,{})})]})}),h.jsx(aT,{position:"top-right"})]})})}jS(document.getElementById("root")).render(h.jsx(C.StrictMode,{children:h.jsx(tq,{})}));export{Sn as _,ii as c,p3 as g};
