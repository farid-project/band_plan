function J8(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function X8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var w3={exports:{}},pg={},b3={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=Symbol.for("react.element"),Q8=Symbol.for("react.portal"),Z8=Symbol.for("react.fragment"),eA=Symbol.for("react.strict_mode"),tA=Symbol.for("react.profiler"),nA=Symbol.for("react.provider"),rA=Symbol.for("react.context"),iA=Symbol.for("react.forward_ref"),sA=Symbol.for("react.suspense"),aA=Symbol.for("react.memo"),oA=Symbol.for("react.lazy"),xw=Symbol.iterator;function lA(e){return e===null||typeof e!="object"?null:(e=xw&&e[xw]||e["@@iterator"],typeof e=="function"?e:null)}var _3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S3=Object.assign,N3={};function Af(e,t,n){this.props=e,this.context=t,this.refs=N3,this.updater=n||_3}Af.prototype.isReactComponent={};Af.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Af.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j3(){}j3.prototype=Af.prototype;function Ly(e,t,n){this.props=e,this.context=t,this.refs=N3,this.updater=n||_3}var Py=Ly.prototype=new j3;Py.constructor=Ly;S3(Py,Af.prototype);Py.isPureReactComponent=!0;var ww=Array.isArray,k3=Object.prototype.hasOwnProperty,Ty={current:null},E3={key:!0,ref:!0,__self:!0,__source:!0};function C3(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)k3.call(t,r)&&!E3.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ep,type:e,key:s,ref:a,props:i,_owner:Ty.current}}function cA(e,t){return{$$typeof:Ep,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function My(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ep}function uA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bw=/\/+/g;function V1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uA(""+e.key):t.toString(36)}function r0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ep:case Q8:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+V1(a,0):r,ww(i)?(n="",e!=null&&(n=e.replace(bw,"$&/")+"/"),r0(i,t,n,"",function(f){return f})):i!=null&&(My(i)&&(i=cA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(bw,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",ww(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+V1(s,l);a+=r0(s,t,n,c,i)}else if(c=lA(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+V1(s,l++),a+=r0(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function jm(e,t,n){if(e==null)return e;var r=[],i=0;return r0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function dA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ui={current:null},i0={transition:null},fA={ReactCurrentDispatcher:Ui,ReactCurrentBatchConfig:i0,ReactCurrentOwner:Ty};function A3(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:jm,forEach:function(e,t,n){jm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jm(e,function(){t++}),t},toArray:function(e){return jm(e,function(t){return t})||[]},only:function(e){if(!My(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};an.Component=Af;an.Fragment=Z8;an.Profiler=tA;an.PureComponent=Ly;an.StrictMode=eA;an.Suspense=sA;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fA;an.act=A3;an.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=S3({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Ty.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k3.call(t,c)&&!E3.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Ep,type:e.type,key:i,ref:s,props:r,_owner:a}};an.createContext=function(e){return e={$$typeof:rA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nA,_context:e},e.Consumer=e};an.createElement=C3;an.createFactory=function(e){var t=C3.bind(null,e);return t.type=e,t};an.createRef=function(){return{current:null}};an.forwardRef=function(e){return{$$typeof:iA,render:e}};an.isValidElement=My;an.lazy=function(e){return{$$typeof:oA,_payload:{_status:-1,_result:e},_init:dA}};an.memo=function(e,t){return{$$typeof:aA,type:e,compare:t===void 0?null:t}};an.startTransition=function(e){var t=i0.transition;i0.transition={};try{e()}finally{i0.transition=t}};an.unstable_act=A3;an.useCallback=function(e,t){return Ui.current.useCallback(e,t)};an.useContext=function(e){return Ui.current.useContext(e)};an.useDebugValue=function(){};an.useDeferredValue=function(e){return Ui.current.useDeferredValue(e)};an.useEffect=function(e,t){return Ui.current.useEffect(e,t)};an.useId=function(){return Ui.current.useId()};an.useImperativeHandle=function(e,t,n){return Ui.current.useImperativeHandle(e,t,n)};an.useInsertionEffect=function(e,t){return Ui.current.useInsertionEffect(e,t)};an.useLayoutEffect=function(e,t){return Ui.current.useLayoutEffect(e,t)};an.useMemo=function(e,t){return Ui.current.useMemo(e,t)};an.useReducer=function(e,t,n){return Ui.current.useReducer(e,t,n)};an.useRef=function(e){return Ui.current.useRef(e)};an.useState=function(e){return Ui.current.useState(e)};an.useSyncExternalStore=function(e,t,n){return Ui.current.useSyncExternalStore(e,t,n)};an.useTransition=function(){return Ui.current.useTransition()};an.version="18.3.1";b3.exports=an;var k=b3.exports;const yt=x3(k),Jv=J8({__proto__:null,default:yt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA=k,pA=Symbol.for("react.element"),mA=Symbol.for("react.fragment"),gA=Object.prototype.hasOwnProperty,vA=hA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yA={key:!0,ref:!0,__self:!0,__source:!0};function L3(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gA.call(t,r)&&!yA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:pA,type:e,key:s,ref:a,props:i,_owner:vA.current}}pg.Fragment=mA;pg.jsx=L3;pg.jsxs=L3;w3.exports=pg;var u=w3.exports,P3={exports:{}},Fs={},T3={exports:{}},M3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,F){var ne=P.length;P.push(F);e:for(;0<ne;){var be=ne-1>>>1,T=P[be];if(0<i(T,F))P[be]=F,P[ne]=T,ne=be;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var F=P[0],ne=P.pop();if(ne!==F){P[0]=ne;e:for(var be=0,T=P.length,H=T>>>1;be<H;){var Z=2*(be+1)-1,se=P[Z],ce=Z+1,je=P[ce];if(0>i(se,ne))ce<T&&0>i(je,se)?(P[be]=je,P[ce]=ne,be=ce):(P[be]=se,P[Z]=ne,be=Z);else if(ce<T&&0>i(je,ne))P[be]=je,P[ce]=ne,be=ce;else break e}}return F}function i(P,F){var ne=P.sortIndex-F.sortIndex;return ne!==0?ne:P.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,m=null,x=3,g=!1,N=!1,j=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(P){for(var F=n(f);F!==null;){if(F.callback===null)r(f);else if(F.startTime<=P)r(f),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(f)}}function O(P){if(j=!1,A(P),!N)if(n(c)!==null)N=!0,he(K);else{var F=n(f);F!==null&&G(O,F.startTime-P)}}function K(P,F){N=!1,j&&(j=!1,b($),$=-1),g=!0;var ne=x;try{for(A(F),m=n(c);m!==null&&(!(m.expirationTime>F)||P&&!R());){var be=m.callback;if(typeof be=="function"){m.callback=null,x=m.priorityLevel;var T=be(m.expirationTime<=F);F=e.unstable_now(),typeof T=="function"?m.callback=T:m===n(c)&&r(c),A(F)}else r(c);m=n(c)}if(m!==null)var H=!0;else{var Z=n(f);Z!==null&&G(O,Z.startTime-F),H=!1}return H}finally{m=null,x=ne,g=!1}}var ie=!1,W=null,$=-1,oe=5,le=-1;function R(){return!(e.unstable_now()-le<oe)}function q(){if(W!==null){var P=e.unstable_now();le=P;var F=!0;try{F=W(!0,P)}finally{F?J():(ie=!1,W=null)}}else ie=!1}var J;if(typeof S=="function")J=function(){S(q)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,fe=B.port2;B.port1.onmessage=q,J=function(){fe.postMessage(null)}}else J=function(){E(q,0)};function he(P){W=P,ie||(ie=!0,J())}function G(P,F){$=E(function(){P(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){N||g||(N=!0,he(K))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(x){case 1:case 2:case 3:var F=3;break;default:F=x}var ne=x;x=F;try{return P()}finally{x=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ne=x;x=P;try{return F()}finally{x=ne}},e.unstable_scheduleCallback=function(P,F,ne){var be=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?be+ne:be):ne=be,P){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=ne+T,P={id:p++,callback:F,priorityLevel:P,startTime:ne,expirationTime:T,sortIndex:-1},ne>be?(P.sortIndex=ne,t(f,P),n(c)===null&&P===n(f)&&(j?(b($),$=-1):j=!0,G(O,ne-be))):(P.sortIndex=T,t(c,P),N||g||(N=!0,he(K))),P},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(P){var F=x;return function(){var ne=x;x=F;try{return P.apply(this,arguments)}finally{x=ne}}}})(M3);T3.exports=M3;var xA=T3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA=k,Rs=xA;function ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D3=new Set,Zh={};function Hu(e,t){yf(e,t),yf(e+"Capture",t)}function yf(e,t){for(Zh[e]=t,e=0;e<t.length;e++)D3.add(t[e])}var nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xv=Object.prototype.hasOwnProperty,bA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_w={},Sw={};function _A(e){return Xv.call(Sw,e)?!0:Xv.call(_w,e)?!1:bA.test(e)?Sw[e]=!0:(_w[e]=!0,!1)}function SA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NA(e,t,n,r){if(t===null||typeof t>"u"||SA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qi(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fi[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fi[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fi[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fi[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fi[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fi[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fi[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fi[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fi[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dy=/[\-:]([a-z])/g;function Iy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dy,Iy);fi[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dy,Iy);fi[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dy,Iy);fi[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fi[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});fi.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fi[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oy(e,t,n,r){var i=fi.hasOwnProperty(t)?fi[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NA(t,n,i,r)&&(n=null),r||i===null?_A(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ll=wA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,km=Symbol.for("react.element"),Wd=Symbol.for("react.portal"),Hd=Symbol.for("react.fragment"),Ry=Symbol.for("react.strict_mode"),Qv=Symbol.for("react.profiler"),I3=Symbol.for("react.provider"),O3=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),Zv=Symbol.for("react.suspense"),e2=Symbol.for("react.suspense_list"),$y=Symbol.for("react.memo"),sc=Symbol.for("react.lazy"),R3=Symbol.for("react.offscreen"),Nw=Symbol.iterator;function hh(e){return e===null||typeof e!="object"?null:(e=Nw&&e[Nw]||e["@@iterator"],typeof e=="function"?e:null)}var gr=Object.assign,G1;function Ch(e){if(G1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);G1=t&&t[1]||""}return`
`+G1+e}var Y1=!1;function K1(e,t){if(!e||Y1)return"";Y1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Y1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ch(e):""}function jA(e){switch(e.tag){case 5:return Ch(e.type);case 16:return Ch("Lazy");case 13:return Ch("Suspense");case 19:return Ch("SuspenseList");case 0:case 2:case 15:return e=K1(e.type,!1),e;case 11:return e=K1(e.type.render,!1),e;case 1:return e=K1(e.type,!0),e;default:return""}}function t2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hd:return"Fragment";case Wd:return"Portal";case Qv:return"Profiler";case Ry:return"StrictMode";case Zv:return"Suspense";case e2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O3:return(e.displayName||"Context")+".Consumer";case I3:return(e._context.displayName||"Context")+".Provider";case Fy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $y:return t=e.displayName||null,t!==null?t:t2(e.type)||"Memo";case sc:t=e._payload,e=e._init;try{return t2(e(t))}catch{}}return null}function kA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return t2(t);case 8:return t===Ry?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function F3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EA(e){var t=F3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Em(e){e._valueTracker||(e._valueTracker=EA(e))}function $3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=F3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function N0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function n2(e,t){var n=t.checked;return gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Lc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function B3(e,t){t=t.checked,t!=null&&Oy(e,"checked",t,!1)}function r2(e,t){B3(e,t);var n=Lc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?i2(e,t.type,n):t.hasOwnProperty("defaultValue")&&i2(e,t.type,Lc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function i2(e,t,n){(t!=="number"||N0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ah=Array.isArray;function rf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Lc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function s2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ct(91));return gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ew(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ct(92));if(Ah(n)){if(1<n.length)throw Error(ct(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Lc(n)}}function z3(e,t){var n=Lc(t.value),r=Lc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Cw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function U3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?U3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cm,q3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cm=Cm||document.createElement("div"),Cm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ep(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CA=["Webkit","ms","Moz","O"];Object.keys(Dh).forEach(function(e){CA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dh[t]=Dh[e]})});function W3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dh.hasOwnProperty(e)&&Dh[e]?(""+t).trim():t+"px"}function H3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=W3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var AA=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o2(e,t){if(t){if(AA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ct(62))}}function l2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c2=null;function By(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var u2=null,sf=null,af=null;function Aw(e){if(e=Lp(e)){if(typeof u2!="function")throw Error(ct(280));var t=e.stateNode;t&&(t=xg(t),u2(e.stateNode,e.type,t))}}function V3(e){sf?af?af.push(e):af=[e]:sf=e}function G3(){if(sf){var e=sf,t=af;if(af=sf=null,Aw(e),t)for(e=0;e<t.length;e++)Aw(t[e])}}function Y3(e,t){return e(t)}function K3(){}var J1=!1;function J3(e,t,n){if(J1)return e(t,n);J1=!0;try{return Y3(e,t,n)}finally{J1=!1,(sf!==null||af!==null)&&(K3(),G3())}}function tp(e,t){var n=e.stateNode;if(n===null)return null;var r=xg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ct(231,t,typeof n));return n}var d2=!1;if(nl)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){d2=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{d2=!1}function LA(e,t,n,r,i,s,a,l,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Ih=!1,j0=null,k0=!1,f2=null,PA={onError:function(e){Ih=!0,j0=e}};function TA(e,t,n,r,i,s,a,l,c){Ih=!1,j0=null,LA.apply(PA,arguments)}function MA(e,t,n,r,i,s,a,l,c){if(TA.apply(this,arguments),Ih){if(Ih){var f=j0;Ih=!1,j0=null}else throw Error(ct(198));k0||(k0=!0,f2=f)}}function Vu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function X3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lw(e){if(Vu(e)!==e)throw Error(ct(188))}function DA(e){var t=e.alternate;if(!t){if(t=Vu(e),t===null)throw Error(ct(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lw(i),e;if(s===r)return Lw(i),t;s=s.sibling}throw Error(ct(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(ct(189))}}if(n.alternate!==r)throw Error(ct(190))}if(n.tag!==3)throw Error(ct(188));return n.stateNode.current===n?e:t}function Q3(e){return e=DA(e),e!==null?Z3(e):null}function Z3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Z3(e);if(t!==null)return t;e=e.sibling}return null}var e4=Rs.unstable_scheduleCallback,Pw=Rs.unstable_cancelCallback,IA=Rs.unstable_shouldYield,OA=Rs.unstable_requestPaint,Er=Rs.unstable_now,RA=Rs.unstable_getCurrentPriorityLevel,zy=Rs.unstable_ImmediatePriority,t4=Rs.unstable_UserBlockingPriority,E0=Rs.unstable_NormalPriority,FA=Rs.unstable_LowPriority,n4=Rs.unstable_IdlePriority,mg=null,vo=null;function $A(e){if(vo&&typeof vo.onCommitFiberRoot=="function")try{vo.onCommitFiberRoot(mg,e,void 0,(e.current.flags&128)===128)}catch{}}var Oa=Math.clz32?Math.clz32:UA,BA=Math.log,zA=Math.LN2;function UA(e){return e>>>=0,e===0?32:31-(BA(e)/zA|0)|0}var Am=64,Lm=4194304;function Lh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function C0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Lh(l):(s&=a,s!==0&&(r=Lh(s)))}else a=n&~i,a!==0?r=Lh(a):s!==0&&(r=Lh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Oa(t),i=1<<n,r|=e[n],t&=~i;return r}function qA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Oa(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=qA(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function h2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function r4(){var e=Am;return Am<<=1,!(Am&4194240)&&(Am=64),e}function X1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Oa(t),e[t]=n}function HA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Oa(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Uy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Oa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ln=0;function i4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var s4,qy,a4,o4,l4,p2=!1,Pm=[],wc=null,bc=null,_c=null,np=new Map,rp=new Map,cc=[],VA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tw(e,t){switch(e){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":_c=null;break;case"pointerover":case"pointerout":np.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(t.pointerId)}}function mh(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Lp(t),t!==null&&qy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function GA(e,t,n,r,i){switch(t){case"focusin":return wc=mh(wc,e,t,n,r,i),!0;case"dragenter":return bc=mh(bc,e,t,n,r,i),!0;case"mouseover":return _c=mh(_c,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return np.set(s,mh(np.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rp.set(s,mh(rp.get(s)||null,e,t,n,r,i)),!0}return!1}function c4(e){var t=Cu(e.target);if(t!==null){var n=Vu(t);if(n!==null){if(t=n.tag,t===13){if(t=X3(n),t!==null){e.blockedOn=t,l4(e.priority,function(){a4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function s0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=m2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);c2=r,n.target.dispatchEvent(r),c2=null}else return t=Lp(n),t!==null&&qy(t),e.blockedOn=n,!1;t.shift()}return!0}function Mw(e,t,n){s0(e)&&n.delete(t)}function YA(){p2=!1,wc!==null&&s0(wc)&&(wc=null),bc!==null&&s0(bc)&&(bc=null),_c!==null&&s0(_c)&&(_c=null),np.forEach(Mw),rp.forEach(Mw)}function gh(e,t){e.blockedOn===t&&(e.blockedOn=null,p2||(p2=!0,Rs.unstable_scheduleCallback(Rs.unstable_NormalPriority,YA)))}function ip(e){function t(i){return gh(i,e)}if(0<Pm.length){gh(Pm[0],e);for(var n=1;n<Pm.length;n++){var r=Pm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wc!==null&&gh(wc,e),bc!==null&&gh(bc,e),_c!==null&&gh(_c,e),np.forEach(t),rp.forEach(t),n=0;n<cc.length;n++)r=cc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cc.length&&(n=cc[0],n.blockedOn===null);)c4(n),n.blockedOn===null&&cc.shift()}var of=ll.ReactCurrentBatchConfig,A0=!0;function KA(e,t,n,r){var i=Ln,s=of.transition;of.transition=null;try{Ln=1,Wy(e,t,n,r)}finally{Ln=i,of.transition=s}}function JA(e,t,n,r){var i=Ln,s=of.transition;of.transition=null;try{Ln=4,Wy(e,t,n,r)}finally{Ln=i,of.transition=s}}function Wy(e,t,n,r){if(A0){var i=m2(e,t,n,r);if(i===null)ov(e,t,r,L0,n),Tw(e,r);else if(GA(i,e,t,n,r))r.stopPropagation();else if(Tw(e,r),t&4&&-1<VA.indexOf(e)){for(;i!==null;){var s=Lp(i);if(s!==null&&s4(s),s=m2(e,t,n,r),s===null&&ov(e,t,r,L0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ov(e,t,r,null,n)}}var L0=null;function m2(e,t,n,r){if(L0=null,e=By(r),e=Cu(e),e!==null)if(t=Vu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=X3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return L0=e,null}function u4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RA()){case zy:return 1;case t4:return 4;case E0:case FA:return 16;case n4:return 536870912;default:return 16}default:return 16}}var pc=null,Hy=null,a0=null;function d4(){if(a0)return a0;var e,t=Hy,n=t.length,r,i="value"in pc?pc.value:pc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return a0=i.slice(e,1<r?1-r:void 0)}function o0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tm(){return!0}function Dw(){return!1}function $s(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tm:Dw,this.isPropagationStopped=Dw,this}return gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tm)},persist:function(){},isPersistent:Tm}),t}var Lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vy=$s(Lf),Ap=gr({},Lf,{view:0,detail:0}),XA=$s(Ap),Q1,Z1,vh,gg=gr({},Ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vh&&(vh&&e.type==="mousemove"?(Q1=e.screenX-vh.screenX,Z1=e.screenY-vh.screenY):Z1=Q1=0,vh=e),Q1)},movementY:function(e){return"movementY"in e?e.movementY:Z1}}),Iw=$s(gg),QA=gr({},gg,{dataTransfer:0}),ZA=$s(QA),eL=gr({},Ap,{relatedTarget:0}),ev=$s(eL),tL=gr({},Lf,{animationName:0,elapsedTime:0,pseudoElement:0}),nL=$s(tL),rL=gr({},Lf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iL=$s(rL),sL=gr({},Lf,{data:0}),Ow=$s(sL),aL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lL[e])?!!t[e]:!1}function Gy(){return cL}var uL=gr({},Ap,{key:function(e){if(e.key){var t=aL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=o0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gy,charCode:function(e){return e.type==="keypress"?o0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?o0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dL=$s(uL),fL=gr({},gg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rw=$s(fL),hL=gr({},Ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gy}),pL=$s(hL),mL=gr({},Lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),gL=$s(mL),vL=gr({},gg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yL=$s(vL),xL=[9,13,27,32],Yy=nl&&"CompositionEvent"in window,Oh=null;nl&&"documentMode"in document&&(Oh=document.documentMode);var wL=nl&&"TextEvent"in window&&!Oh,f4=nl&&(!Yy||Oh&&8<Oh&&11>=Oh),Fw=" ",$w=!1;function h4(e,t){switch(e){case"keyup":return xL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vd=!1;function bL(e,t){switch(e){case"compositionend":return p4(t);case"keypress":return t.which!==32?null:($w=!0,Fw);case"textInput":return e=t.data,e===Fw&&$w?null:e;default:return null}}function _L(e,t){if(Vd)return e==="compositionend"||!Yy&&h4(e,t)?(e=d4(),a0=Hy=pc=null,Vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return f4&&t.locale!=="ko"?null:t.data;default:return null}}var SL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SL[e.type]:t==="textarea"}function m4(e,t,n,r){V3(r),t=P0(t,"onChange"),0<t.length&&(n=new Vy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rh=null,sp=null;function NL(e){k4(e,0)}function vg(e){var t=Kd(e);if($3(t))return e}function jL(e,t){if(e==="change")return t}var g4=!1;if(nl){var tv;if(nl){var nv="oninput"in document;if(!nv){var zw=document.createElement("div");zw.setAttribute("oninput","return;"),nv=typeof zw.oninput=="function"}tv=nv}else tv=!1;g4=tv&&(!document.documentMode||9<document.documentMode)}function Uw(){Rh&&(Rh.detachEvent("onpropertychange",v4),sp=Rh=null)}function v4(e){if(e.propertyName==="value"&&vg(sp)){var t=[];m4(t,sp,e,By(e)),J3(NL,t)}}function kL(e,t,n){e==="focusin"?(Uw(),Rh=t,sp=n,Rh.attachEvent("onpropertychange",v4)):e==="focusout"&&Uw()}function EL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vg(sp)}function CL(e,t){if(e==="click")return vg(t)}function AL(e,t){if(e==="input"||e==="change")return vg(t)}function LL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fa=typeof Object.is=="function"?Object.is:LL;function ap(e,t){if(Fa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xv.call(t,i)||!Fa(e[i],t[i]))return!1}return!0}function qw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ww(e,t){var n=qw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qw(n)}}function y4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?y4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x4(){for(var e=window,t=N0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=N0(e.document)}return t}function Ky(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PL(e){var t=x4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&y4(n.ownerDocument.documentElement,n)){if(r!==null&&Ky(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Ww(n,s);var a=Ww(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TL=nl&&"documentMode"in document&&11>=document.documentMode,Gd=null,g2=null,Fh=null,v2=!1;function Hw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;v2||Gd==null||Gd!==N0(r)||(r=Gd,"selectionStart"in r&&Ky(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fh&&ap(Fh,r)||(Fh=r,r=P0(g2,"onSelect"),0<r.length&&(t=new Vy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gd)))}function Mm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yd={animationend:Mm("Animation","AnimationEnd"),animationiteration:Mm("Animation","AnimationIteration"),animationstart:Mm("Animation","AnimationStart"),transitionend:Mm("Transition","TransitionEnd")},rv={},w4={};nl&&(w4=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function yg(e){if(rv[e])return rv[e];if(!Yd[e])return e;var t=Yd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in w4)return rv[e]=t[n];return e}var b4=yg("animationend"),_4=yg("animationiteration"),S4=yg("animationstart"),N4=yg("transitionend"),j4=new Map,Vw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oc(e,t){j4.set(e,t),Hu(t,[e])}for(var iv=0;iv<Vw.length;iv++){var sv=Vw[iv],ML=sv.toLowerCase(),DL=sv[0].toUpperCase()+sv.slice(1);Oc(ML,"on"+DL)}Oc(b4,"onAnimationEnd");Oc(_4,"onAnimationIteration");Oc(S4,"onAnimationStart");Oc("dblclick","onDoubleClick");Oc("focusin","onFocus");Oc("focusout","onBlur");Oc(N4,"onTransitionEnd");yf("onMouseEnter",["mouseout","mouseover"]);yf("onMouseLeave",["mouseout","mouseover"]);yf("onPointerEnter",["pointerout","pointerover"]);yf("onPointerLeave",["pointerout","pointerover"]);Hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function Gw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,MA(r,t,void 0,e),e.currentTarget=null}function k4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Gw(i,l,f),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Gw(i,l,f),s=c}}}if(k0)throw e=f2,k0=!1,f2=null,e}function Yn(e,t){var n=t[_2];n===void 0&&(n=t[_2]=new Set);var r=e+"__bubble";n.has(r)||(E4(t,e,2,!1),n.add(r))}function av(e,t,n){var r=0;t&&(r|=4),E4(n,e,r,t)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function op(e){if(!e[Dm]){e[Dm]=!0,D3.forEach(function(n){n!=="selectionchange"&&(IL.has(n)||av(n,!1,e),av(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dm]||(t[Dm]=!0,av("selectionchange",!1,t))}}function E4(e,t,n,r){switch(u4(t)){case 1:var i=KA;break;case 4:i=JA;break;default:i=Wy}n=i.bind(null,t,n,e),i=void 0,!d2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ov(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Cu(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}J3(function(){var f=s,p=By(n),m=[];e:{var x=j4.get(e);if(x!==void 0){var g=Vy,N=e;switch(e){case"keypress":if(o0(n)===0)break e;case"keydown":case"keyup":g=dL;break;case"focusin":N="focus",g=ev;break;case"focusout":N="blur",g=ev;break;case"beforeblur":case"afterblur":g=ev;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Iw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ZA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=pL;break;case b4:case _4:case S4:g=nL;break;case N4:g=gL;break;case"scroll":g=XA;break;case"wheel":g=yL;break;case"copy":case"cut":case"paste":g=iL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Rw}var j=(t&4)!==0,E=!j&&e==="scroll",b=j?x!==null?x+"Capture":null:x;j=[];for(var S=f,A;S!==null;){A=S;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,b!==null&&(O=tp(S,b),O!=null&&j.push(lp(S,O,A)))),E)break;S=S.return}0<j.length&&(x=new g(x,N,null,n,p),m.push({event:x,listeners:j}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",x&&n!==c2&&(N=n.relatedTarget||n.fromElement)&&(Cu(N)||N[rl]))break e;if((g||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,g?(N=n.relatedTarget||n.toElement,g=f,N=N?Cu(N):null,N!==null&&(E=Vu(N),N!==E||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=f),g!==N)){if(j=Iw,O="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(j=Rw,O="onPointerLeave",b="onPointerEnter",S="pointer"),E=g==null?x:Kd(g),A=N==null?x:Kd(N),x=new j(O,S+"leave",g,n,p),x.target=E,x.relatedTarget=A,O=null,Cu(p)===f&&(j=new j(b,S+"enter",N,n,p),j.target=A,j.relatedTarget=E,O=j),E=O,g&&N)t:{for(j=g,b=N,S=0,A=j;A;A=Id(A))S++;for(A=0,O=b;O;O=Id(O))A++;for(;0<S-A;)j=Id(j),S--;for(;0<A-S;)b=Id(b),A--;for(;S--;){if(j===b||b!==null&&j===b.alternate)break t;j=Id(j),b=Id(b)}j=null}else j=null;g!==null&&Yw(m,x,g,j,!1),N!==null&&E!==null&&Yw(m,E,N,j,!0)}}e:{if(x=f?Kd(f):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var K=jL;else if(Bw(x))if(g4)K=AL;else{K=EL;var ie=kL}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(K=CL);if(K&&(K=K(e,f))){m4(m,K,n,p);break e}ie&&ie(e,x,f),e==="focusout"&&(ie=x._wrapperState)&&ie.controlled&&x.type==="number"&&i2(x,"number",x.value)}switch(ie=f?Kd(f):window,e){case"focusin":(Bw(ie)||ie.contentEditable==="true")&&(Gd=ie,g2=f,Fh=null);break;case"focusout":Fh=g2=Gd=null;break;case"mousedown":v2=!0;break;case"contextmenu":case"mouseup":case"dragend":v2=!1,Hw(m,n,p);break;case"selectionchange":if(TL)break;case"keydown":case"keyup":Hw(m,n,p)}var W;if(Yy)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Vd?h4(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(f4&&n.locale!=="ko"&&(Vd||$!=="onCompositionStart"?$==="onCompositionEnd"&&Vd&&(W=d4()):(pc=p,Hy="value"in pc?pc.value:pc.textContent,Vd=!0)),ie=P0(f,$),0<ie.length&&($=new Ow($,e,null,n,p),m.push({event:$,listeners:ie}),W?$.data=W:(W=p4(n),W!==null&&($.data=W)))),(W=wL?bL(e,n):_L(e,n))&&(f=P0(f,"onBeforeInput"),0<f.length&&(p=new Ow("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=W))}k4(m,t)})}function lp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function P0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tp(e,n),s!=null&&r.unshift(lp(e,s,i)),s=tp(e,t),s!=null&&r.push(lp(e,s,i))),e=e.return}return r}function Id(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yw(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=tp(n,s),c!=null&&a.unshift(lp(n,c,l))):i||(c=tp(n,s),c!=null&&a.push(lp(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var OL=/\r\n?/g,RL=/\u0000|\uFFFD/g;function Kw(e){return(typeof e=="string"?e:""+e).replace(OL,`
`).replace(RL,"")}function Im(e,t,n){if(t=Kw(t),Kw(e)!==t&&n)throw Error(ct(425))}function T0(){}var y2=null,x2=null;function w2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var b2=typeof setTimeout=="function"?setTimeout:void 0,FL=typeof clearTimeout=="function"?clearTimeout:void 0,Jw=typeof Promise=="function"?Promise:void 0,$L=typeof queueMicrotask=="function"?queueMicrotask:typeof Jw<"u"?function(e){return Jw.resolve(null).then(e).catch(BL)}:b2;function BL(e){setTimeout(function(){throw e})}function lv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ip(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ip(t)}function Sc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pf=Math.random().toString(36).slice(2),fo="__reactFiber$"+Pf,cp="__reactProps$"+Pf,rl="__reactContainer$"+Pf,_2="__reactEvents$"+Pf,zL="__reactListeners$"+Pf,UL="__reactHandles$"+Pf;function Cu(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rl]||n[fo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xw(e);e!==null;){if(n=e[fo])return n;e=Xw(e)}return t}e=n,n=e.parentNode}return null}function Lp(e){return e=e[fo]||e[rl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ct(33))}function xg(e){return e[cp]||null}var S2=[],Jd=-1;function Rc(e){return{current:e}}function Jn(e){0>Jd||(e.current=S2[Jd],S2[Jd]=null,Jd--)}function Hn(e,t){Jd++,S2[Jd]=e.current,e.current=t}var Pc={},Ci=Rc(Pc),us=Rc(!1),$u=Pc;function xf(e,t){var n=e.type.contextTypes;if(!n)return Pc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ds(e){return e=e.childContextTypes,e!=null}function M0(){Jn(us),Jn(Ci)}function Qw(e,t,n){if(Ci.current!==Pc)throw Error(ct(168));Hn(Ci,t),Hn(us,n)}function C4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ct(108,kA(e)||"Unknown",i));return gr({},n,r)}function D0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pc,$u=Ci.current,Hn(Ci,e),Hn(us,us.current),!0}function Zw(e,t,n){var r=e.stateNode;if(!r)throw Error(ct(169));n?(e=C4(e,t,$u),r.__reactInternalMemoizedMergedChildContext=e,Jn(us),Jn(Ci),Hn(Ci,e)):Jn(us),Hn(us,n)}var Jo=null,wg=!1,cv=!1;function A4(e){Jo===null?Jo=[e]:Jo.push(e)}function qL(e){wg=!0,A4(e)}function Fc(){if(!cv&&Jo!==null){cv=!0;var e=0,t=Ln;try{var n=Jo;for(Ln=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Jo=null,wg=!1}catch(i){throw Jo!==null&&(Jo=Jo.slice(e+1)),e4(zy,Fc),i}finally{Ln=t,cv=!1}}return null}var Xd=[],Qd=0,I0=null,O0=0,ta=[],na=0,Bu=null,Qo=1,Zo="";function xu(e,t){Xd[Qd++]=O0,Xd[Qd++]=I0,I0=e,O0=t}function L4(e,t,n){ta[na++]=Qo,ta[na++]=Zo,ta[na++]=Bu,Bu=e;var r=Qo;e=Zo;var i=32-Oa(r)-1;r&=~(1<<i),n+=1;var s=32-Oa(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qo=1<<32-Oa(t)+i|n<<i|r,Zo=s+e}else Qo=1<<s|n<<i|r,Zo=e}function Jy(e){e.return!==null&&(xu(e,1),L4(e,1,0))}function Xy(e){for(;e===I0;)I0=Xd[--Qd],Xd[Qd]=null,O0=Xd[--Qd],Xd[Qd]=null;for(;e===Bu;)Bu=ta[--na],ta[na]=null,Zo=ta[--na],ta[na]=null,Qo=ta[--na],ta[na]=null}var Os=null,Ds=null,ar=!1,Da=null;function P4(e,t){var n=ra(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eb(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Os=e,Ds=Sc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Os=e,Ds=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bu!==null?{id:Qo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ra(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Os=e,Ds=null,!0):!1;default:return!1}}function N2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function j2(e){if(ar){var t=Ds;if(t){var n=t;if(!eb(e,t)){if(N2(e))throw Error(ct(418));t=Sc(n.nextSibling);var r=Os;t&&eb(e,t)?P4(r,n):(e.flags=e.flags&-4097|2,ar=!1,Os=e)}}else{if(N2(e))throw Error(ct(418));e.flags=e.flags&-4097|2,ar=!1,Os=e}}}function tb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Os=e}function Om(e){if(e!==Os)return!1;if(!ar)return tb(e),ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!w2(e.type,e.memoizedProps)),t&&(t=Ds)){if(N2(e))throw T4(),Error(ct(418));for(;t;)P4(e,t),t=Sc(t.nextSibling)}if(tb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ds=Sc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ds=null}}else Ds=Os?Sc(e.stateNode.nextSibling):null;return!0}function T4(){for(var e=Ds;e;)e=Sc(e.nextSibling)}function wf(){Ds=Os=null,ar=!1}function Qy(e){Da===null?Da=[e]:Da.push(e)}var WL=ll.ReactCurrentBatchConfig;function yh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ct(309));var r=n.stateNode}if(!r)throw Error(ct(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(ct(284));if(!n._owner)throw Error(ct(290,e))}return e}function Rm(e,t){throw e=Object.prototype.toString.call(t),Error(ct(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nb(e){var t=e._init;return t(e._payload)}function M4(e){function t(b,S){if(e){var A=b.deletions;A===null?(b.deletions=[S],b.flags|=16):A.push(S)}}function n(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=Ec(b,S),b.index=0,b.sibling=null,b}function s(b,S,A){return b.index=A,e?(A=b.alternate,A!==null?(A=A.index,A<S?(b.flags|=2,S):A):(b.flags|=2,S)):(b.flags|=1048576,S)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,S,A,O){return S===null||S.tag!==6?(S=gv(A,b.mode,O),S.return=b,S):(S=i(S,A),S.return=b,S)}function c(b,S,A,O){var K=A.type;return K===Hd?p(b,S,A.props.children,O,A.key):S!==null&&(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sc&&nb(K)===S.type)?(O=i(S,A.props),O.ref=yh(b,S,A),O.return=b,O):(O=p0(A.type,A.key,A.props,null,b.mode,O),O.ref=yh(b,S,A),O.return=b,O)}function f(b,S,A,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=vv(A,b.mode,O),S.return=b,S):(S=i(S,A.children||[]),S.return=b,S)}function p(b,S,A,O,K){return S===null||S.tag!==7?(S=Du(A,b.mode,O,K),S.return=b,S):(S=i(S,A),S.return=b,S)}function m(b,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=gv(""+S,b.mode,A),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case km:return A=p0(S.type,S.key,S.props,null,b.mode,A),A.ref=yh(b,null,S),A.return=b,A;case Wd:return S=vv(S,b.mode,A),S.return=b,S;case sc:var O=S._init;return m(b,O(S._payload),A)}if(Ah(S)||hh(S))return S=Du(S,b.mode,A,null),S.return=b,S;Rm(b,S)}return null}function x(b,S,A,O){var K=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return K!==null?null:l(b,S,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case km:return A.key===K?c(b,S,A,O):null;case Wd:return A.key===K?f(b,S,A,O):null;case sc:return K=A._init,x(b,S,K(A._payload),O)}if(Ah(A)||hh(A))return K!==null?null:p(b,S,A,O,null);Rm(b,A)}return null}function g(b,S,A,O,K){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(A)||null,l(S,b,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case km:return b=b.get(O.key===null?A:O.key)||null,c(S,b,O,K);case Wd:return b=b.get(O.key===null?A:O.key)||null,f(S,b,O,K);case sc:var ie=O._init;return g(b,S,A,ie(O._payload),K)}if(Ah(O)||hh(O))return b=b.get(A)||null,p(S,b,O,K,null);Rm(S,O)}return null}function N(b,S,A,O){for(var K=null,ie=null,W=S,$=S=0,oe=null;W!==null&&$<A.length;$++){W.index>$?(oe=W,W=null):oe=W.sibling;var le=x(b,W,A[$],O);if(le===null){W===null&&(W=oe);break}e&&W&&le.alternate===null&&t(b,W),S=s(le,S,$),ie===null?K=le:ie.sibling=le,ie=le,W=oe}if($===A.length)return n(b,W),ar&&xu(b,$),K;if(W===null){for(;$<A.length;$++)W=m(b,A[$],O),W!==null&&(S=s(W,S,$),ie===null?K=W:ie.sibling=W,ie=W);return ar&&xu(b,$),K}for(W=r(b,W);$<A.length;$++)oe=g(W,b,$,A[$],O),oe!==null&&(e&&oe.alternate!==null&&W.delete(oe.key===null?$:oe.key),S=s(oe,S,$),ie===null?K=oe:ie.sibling=oe,ie=oe);return e&&W.forEach(function(R){return t(b,R)}),ar&&xu(b,$),K}function j(b,S,A,O){var K=hh(A);if(typeof K!="function")throw Error(ct(150));if(A=K.call(A),A==null)throw Error(ct(151));for(var ie=K=null,W=S,$=S=0,oe=null,le=A.next();W!==null&&!le.done;$++,le=A.next()){W.index>$?(oe=W,W=null):oe=W.sibling;var R=x(b,W,le.value,O);if(R===null){W===null&&(W=oe);break}e&&W&&R.alternate===null&&t(b,W),S=s(R,S,$),ie===null?K=R:ie.sibling=R,ie=R,W=oe}if(le.done)return n(b,W),ar&&xu(b,$),K;if(W===null){for(;!le.done;$++,le=A.next())le=m(b,le.value,O),le!==null&&(S=s(le,S,$),ie===null?K=le:ie.sibling=le,ie=le);return ar&&xu(b,$),K}for(W=r(b,W);!le.done;$++,le=A.next())le=g(W,b,$,le.value,O),le!==null&&(e&&le.alternate!==null&&W.delete(le.key===null?$:le.key),S=s(le,S,$),ie===null?K=le:ie.sibling=le,ie=le);return e&&W.forEach(function(q){return t(b,q)}),ar&&xu(b,$),K}function E(b,S,A,O){if(typeof A=="object"&&A!==null&&A.type===Hd&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case km:e:{for(var K=A.key,ie=S;ie!==null;){if(ie.key===K){if(K=A.type,K===Hd){if(ie.tag===7){n(b,ie.sibling),S=i(ie,A.props.children),S.return=b,b=S;break e}}else if(ie.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sc&&nb(K)===ie.type){n(b,ie.sibling),S=i(ie,A.props),S.ref=yh(b,ie,A),S.return=b,b=S;break e}n(b,ie);break}else t(b,ie);ie=ie.sibling}A.type===Hd?(S=Du(A.props.children,b.mode,O,A.key),S.return=b,b=S):(O=p0(A.type,A.key,A.props,null,b.mode,O),O.ref=yh(b,S,A),O.return=b,b=O)}return a(b);case Wd:e:{for(ie=A.key;S!==null;){if(S.key===ie)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){n(b,S.sibling),S=i(S,A.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else t(b,S);S=S.sibling}S=vv(A,b.mode,O),S.return=b,b=S}return a(b);case sc:return ie=A._init,E(b,S,ie(A._payload),O)}if(Ah(A))return N(b,S,A,O);if(hh(A))return j(b,S,A,O);Rm(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(n(b,S.sibling),S=i(S,A),S.return=b,b=S):(n(b,S),S=gv(A,b.mode,O),S.return=b,b=S),a(b)):n(b,S)}return E}var bf=M4(!0),D4=M4(!1),R0=Rc(null),F0=null,Zd=null,Zy=null;function e5(){Zy=Zd=F0=null}function t5(e){var t=R0.current;Jn(R0),e._currentValue=t}function k2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function lf(e,t){F0=e,Zy=Zd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cs=!0),e.firstContext=null)}function oa(e){var t=e._currentValue;if(Zy!==e)if(e={context:e,memoizedValue:t,next:null},Zd===null){if(F0===null)throw Error(ct(308));Zd=e,F0.dependencies={lanes:0,firstContext:e}}else Zd=Zd.next=e;return t}var Au=null;function n5(e){Au===null?Au=[e]:Au.push(e)}function I4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,n5(t)):(n.next=i.next,i.next=n),t.interleaved=n,il(e,r)}function il(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ac=!1;function r5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,il(e,n)}return i=r.interleaved,i===null?(t.next=t,n5(r)):(t.next=i.next,i.next=t),r.interleaved=t,il(e,n)}function l0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uy(e,n)}}function rb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $0(e,t,n,r){var i=e.updateQueue;ac=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,p=f=c=null,l=s;do{var x=l.lane,g=l.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,j=l;switch(x=t,g=n,j.tag){case 1:if(N=j.payload,typeof N=="function"){m=N.call(g,m,x);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,x=typeof N=="function"?N.call(g,m,x):N,x==null)break e;m=gr({},m,x);break e;case 2:ac=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,x=i.effects,x===null?i.effects=[l]:x.push(l))}else g={eventTime:g,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=g,c=m):p=p.next=g,a|=x;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;x=l,l=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Uu|=a,e.lanes=a,e.memoizedState=m}}function ib(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ct(191,i));i.call(r)}}}var Pp={},yo=Rc(Pp),up=Rc(Pp),dp=Rc(Pp);function Lu(e){if(e===Pp)throw Error(ct(174));return e}function i5(e,t){switch(Hn(dp,t),Hn(up,e),Hn(yo,Pp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:a2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=a2(t,e)}Jn(yo),Hn(yo,t)}function _f(){Jn(yo),Jn(up),Jn(dp)}function R4(e){Lu(dp.current);var t=Lu(yo.current),n=a2(t,e.type);t!==n&&(Hn(up,e),Hn(yo,n))}function s5(e){up.current===e&&(Jn(yo),Jn(up))}var hr=Rc(0);function B0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uv=[];function a5(){for(var e=0;e<uv.length;e++)uv[e]._workInProgressVersionPrimary=null;uv.length=0}var c0=ll.ReactCurrentDispatcher,dv=ll.ReactCurrentBatchConfig,zu=0,mr=null,zr=null,Jr=null,z0=!1,$h=!1,fp=0,HL=0;function wi(){throw Error(ct(321))}function o5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fa(e[n],t[n]))return!1;return!0}function l5(e,t,n,r,i,s){if(zu=s,mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,c0.current=e===null||e.memoizedState===null?KL:JL,e=n(r,i),$h){s=0;do{if($h=!1,fp=0,25<=s)throw Error(ct(301));s+=1,Jr=zr=null,t.updateQueue=null,c0.current=XL,e=n(r,i)}while($h)}if(c0.current=U0,t=zr!==null&&zr.next!==null,zu=0,Jr=zr=mr=null,z0=!1,t)throw Error(ct(300));return e}function c5(){var e=fp!==0;return fp=0,e}function co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?mr.memoizedState=Jr=e:Jr=Jr.next=e,Jr}function la(){if(zr===null){var e=mr.alternate;e=e!==null?e.memoizedState:null}else e=zr.next;var t=Jr===null?mr.memoizedState:Jr.next;if(t!==null)Jr=t,zr=e;else{if(e===null)throw Error(ct(310));zr=e,e={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},Jr===null?mr.memoizedState=Jr=e:Jr=Jr.next=e}return Jr}function hp(e,t){return typeof t=="function"?t(e):t}function fv(e){var t=la(),n=t.queue;if(n===null)throw Error(ct(311));n.lastRenderedReducer=e;var r=zr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,f=s;do{var p=f.lane;if((zu&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,mr.lanes|=p,Uu|=p}f=f.next}while(f!==null&&f!==s);c===null?a=r:c.next=l,Fa(r,t.memoizedState)||(cs=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,mr.lanes|=s,Uu|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function hv(e){var t=la(),n=t.queue;if(n===null)throw Error(ct(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Fa(s,t.memoizedState)||(cs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function F4(){}function $4(e,t){var n=mr,r=la(),i=t(),s=!Fa(r.memoizedState,i);if(s&&(r.memoizedState=i,cs=!0),r=r.queue,u5(U4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Jr!==null&&Jr.memoizedState.tag&1){if(n.flags|=2048,pp(9,z4.bind(null,n,r,i,t),void 0,null),ti===null)throw Error(ct(349));zu&30||B4(n,t,i)}return i}function B4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function z4(e,t,n,r){t.value=n,t.getSnapshot=r,q4(t)&&W4(e)}function U4(e,t,n){return n(function(){q4(t)&&W4(e)})}function q4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fa(e,n)}catch{return!0}}function W4(e){var t=il(e,1);t!==null&&Ra(t,e,1,-1)}function sb(e){var t=co();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:e},t.queue=e,e=e.dispatch=YL.bind(null,mr,e),[t.memoizedState,e]}function pp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function H4(){return la().memoizedState}function u0(e,t,n,r){var i=co();mr.flags|=e,i.memoizedState=pp(1|t,n,void 0,r===void 0?null:r)}function bg(e,t,n,r){var i=la();r=r===void 0?null:r;var s=void 0;if(zr!==null){var a=zr.memoizedState;if(s=a.destroy,r!==null&&o5(r,a.deps)){i.memoizedState=pp(t,n,s,r);return}}mr.flags|=e,i.memoizedState=pp(1|t,n,s,r)}function ab(e,t){return u0(8390656,8,e,t)}function u5(e,t){return bg(2048,8,e,t)}function V4(e,t){return bg(4,2,e,t)}function G4(e,t){return bg(4,4,e,t)}function Y4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K4(e,t,n){return n=n!=null?n.concat([e]):null,bg(4,4,Y4.bind(null,t,e),n)}function d5(){}function J4(e,t){var n=la();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&o5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function X4(e,t){var n=la();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&o5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Q4(e,t,n){return zu&21?(Fa(n,t)||(n=r4(),mr.lanes|=n,Uu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cs=!0),e.memoizedState=n)}function VL(e,t){var n=Ln;Ln=n!==0&&4>n?n:4,e(!0);var r=dv.transition;dv.transition={};try{e(!1),t()}finally{Ln=n,dv.transition=r}}function Z4(){return la().memoizedState}function GL(e,t,n){var r=kc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eS(e))tS(t,n);else if(n=I4(e,t,n,r),n!==null){var i=Bi();Ra(n,e,r,i),nS(n,t,r)}}function YL(e,t,n){var r=kc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eS(e))tS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Fa(l,a)){var c=t.interleaved;c===null?(i.next=i,n5(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=I4(e,t,i,r),n!==null&&(i=Bi(),Ra(n,e,r,i),nS(n,t,r))}}function eS(e){var t=e.alternate;return e===mr||t!==null&&t===mr}function tS(e,t){$h=z0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uy(e,n)}}var U0={readContext:oa,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},KL={readContext:oa,useCallback:function(e,t){return co().memoizedState=[e,t===void 0?null:t],e},useContext:oa,useEffect:ab,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,u0(4194308,4,Y4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return u0(4194308,4,e,t)},useInsertionEffect:function(e,t){return u0(4,2,e,t)},useMemo:function(e,t){var n=co();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=co();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=GL.bind(null,mr,e),[r.memoizedState,e]},useRef:function(e){var t=co();return e={current:e},t.memoizedState=e},useState:sb,useDebugValue:d5,useDeferredValue:function(e){return co().memoizedState=e},useTransition:function(){var e=sb(!1),t=e[0];return e=VL.bind(null,e[1]),co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mr,i=co();if(ar){if(n===void 0)throw Error(ct(407));n=n()}else{if(n=t(),ti===null)throw Error(ct(349));zu&30||B4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ab(U4.bind(null,r,s,e),[e]),r.flags|=2048,pp(9,z4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=co(),t=ti.identifierPrefix;if(ar){var n=Zo,r=Qo;n=(r&~(1<<32-Oa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=fp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=HL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JL={readContext:oa,useCallback:J4,useContext:oa,useEffect:u5,useImperativeHandle:K4,useInsertionEffect:V4,useLayoutEffect:G4,useMemo:X4,useReducer:fv,useRef:H4,useState:function(){return fv(hp)},useDebugValue:d5,useDeferredValue:function(e){var t=la();return Q4(t,zr.memoizedState,e)},useTransition:function(){var e=fv(hp)[0],t=la().memoizedState;return[e,t]},useMutableSource:F4,useSyncExternalStore:$4,useId:Z4,unstable_isNewReconciler:!1},XL={readContext:oa,useCallback:J4,useContext:oa,useEffect:u5,useImperativeHandle:K4,useInsertionEffect:V4,useLayoutEffect:G4,useMemo:X4,useReducer:hv,useRef:H4,useState:function(){return hv(hp)},useDebugValue:d5,useDeferredValue:function(e){var t=la();return zr===null?t.memoizedState=e:Q4(t,zr.memoizedState,e)},useTransition:function(){var e=hv(hp)[0],t=la().memoizedState;return[e,t]},useMutableSource:F4,useSyncExternalStore:$4,useId:Z4,unstable_isNewReconciler:!1};function La(e,t){if(e&&e.defaultProps){t=gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function E2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _g={isMounted:function(e){return(e=e._reactInternals)?Vu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bi(),i=kc(e),s=el(r,i);s.payload=t,n!=null&&(s.callback=n),t=Nc(e,s,i),t!==null&&(Ra(t,e,i,r),l0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bi(),i=kc(e),s=el(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Nc(e,s,i),t!==null&&(Ra(t,e,i,r),l0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bi(),r=kc(e),i=el(n,r);i.tag=2,t!=null&&(i.callback=t),t=Nc(e,i,r),t!==null&&(Ra(t,e,r,n),l0(t,e,r))}};function ob(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!ap(n,r)||!ap(i,s):!0}function rS(e,t,n){var r=!1,i=Pc,s=t.contextType;return typeof s=="object"&&s!==null?s=oa(s):(i=ds(t)?$u:Ci.current,r=t.contextTypes,s=(r=r!=null)?xf(e,i):Pc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_g,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function lb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_g.enqueueReplaceState(t,t.state,null)}function C2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},r5(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=oa(s):(s=ds(t)?$u:Ci.current,i.context=xf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(E2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_g.enqueueReplaceState(i,i.state,null),$0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Sf(e,t){try{var n="",r=t;do n+=jA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function pv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function A2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var QL=typeof WeakMap=="function"?WeakMap:Map;function iS(e,t,n){n=el(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){W0||(W0=!0,$2=r),A2(e,t)},n}function sS(e,t,n){n=el(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){A2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){A2(e,t),typeof r!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function cb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new QL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=fP.bind(null,e,t,n),t.then(e,e))}function ub(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function db(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=el(-1,1),t.tag=2,Nc(n,t,1))),n.lanes|=1),e)}var ZL=ll.ReactCurrentOwner,cs=!1;function Fi(e,t,n,r){t.child=e===null?D4(t,null,n,r):bf(t,e.child,n,r)}function fb(e,t,n,r,i){n=n.render;var s=t.ref;return lf(t,i),r=l5(e,t,n,r,s,i),n=c5(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sl(e,t,i)):(ar&&n&&Jy(t),t.flags|=1,Fi(e,t,r,i),t.child)}function hb(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!x5(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,aS(e,t,s,r,i)):(e=p0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ap,n(a,r)&&e.ref===t.ref)return sl(e,t,i)}return t.flags|=1,e=Ec(s,r),e.ref=t.ref,e.return=t,t.child=e}function aS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ap(s,r)&&e.ref===t.ref)if(cs=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(cs=!0);else return t.lanes=e.lanes,sl(e,t,i)}return L2(e,t,n,r,i)}function oS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hn(tf,Ms),Ms|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Hn(tf,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Hn(tf,Ms),Ms|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Hn(tf,Ms),Ms|=r;return Fi(e,t,i,n),t.child}function lS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function L2(e,t,n,r,i){var s=ds(n)?$u:Ci.current;return s=xf(t,s),lf(t,i),n=l5(e,t,n,r,s,i),r=c5(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sl(e,t,i)):(ar&&r&&Jy(t),t.flags|=1,Fi(e,t,n,i),t.child)}function pb(e,t,n,r,i){if(ds(n)){var s=!0;D0(t)}else s=!1;if(lf(t,i),t.stateNode===null)d0(e,t),rS(t,n,r),C2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=oa(f):(f=ds(n)?$u:Ci.current,f=xf(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==f)&&lb(t,a,r,f),ac=!1;var x=t.memoizedState;a.state=x,$0(t,r,a,i),c=t.memoizedState,l!==r||x!==c||us.current||ac?(typeof p=="function"&&(E2(t,n,p,r),c=t.memoizedState),(l=ac||ob(t,n,l,r,x,c,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,O4(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:La(t.type,l),a.props=f,m=t.pendingProps,x=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=oa(c):(c=ds(n)?$u:Ci.current,c=xf(t,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||x!==c)&&lb(t,a,r,c),ac=!1,x=t.memoizedState,a.state=x,$0(t,r,a,i);var N=t.memoizedState;l!==m||x!==N||us.current||ac?(typeof g=="function"&&(E2(t,n,g,r),N=t.memoizedState),(f=ac||ob(t,n,f,r,x,N,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),a.props=r,a.state=N,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return P2(e,t,n,r,s,i)}function P2(e,t,n,r,i,s){lS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Zw(t,n,!1),sl(e,t,s);r=t.stateNode,ZL.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=bf(t,e.child,null,s),t.child=bf(t,null,l,s)):Fi(e,t,l,s),t.memoizedState=r.state,i&&Zw(t,n,!0),t.child}function cS(e){var t=e.stateNode;t.pendingContext?Qw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qw(e,t.context,!1),i5(e,t.containerInfo)}function mb(e,t,n,r,i){return wf(),Qy(i),t.flags|=256,Fi(e,t,n,r),t.child}var T2={dehydrated:null,treeContext:null,retryLane:0};function M2(e){return{baseLanes:e,cachePool:null,transitions:null}}function uS(e,t,n){var r=t.pendingProps,i=hr.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Hn(hr,i&1),e===null)return j2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=jg(a,r,0,null),e=Du(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=M2(n),t.memoizedState=T2,e):f5(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return eP(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ec(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ec(l,s):(s=Du(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?M2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=T2,r}return s=e.child,e=s.sibling,r=Ec(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function f5(e,t){return t=jg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fm(e,t,n,r){return r!==null&&Qy(r),bf(t,e.child,null,n),e=f5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eP(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=pv(Error(ct(422))),Fm(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=jg({mode:"visible",children:r.children},i,0,null),s=Du(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&bf(t,e.child,null,a),t.child.memoizedState=M2(a),t.memoizedState=T2,s);if(!(t.mode&1))return Fm(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(ct(419)),r=pv(s,r,void 0),Fm(e,t,a,r)}if(l=(a&e.childLanes)!==0,cs||l){if(r=ti,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,il(e,i),Ra(r,e,i,-1))}return y5(),r=pv(Error(ct(421))),Fm(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=hP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ds=Sc(i.nextSibling),Os=t,ar=!0,Da=null,e!==null&&(ta[na++]=Qo,ta[na++]=Zo,ta[na++]=Bu,Qo=e.id,Zo=e.overflow,Bu=t),t=f5(t,r.children),t.flags|=4096,t)}function gb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),k2(e.return,t,n)}function mv(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dS(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fi(e,t,r.children,n),r=hr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gb(e,n,t);else if(e.tag===19)gb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Hn(hr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&B0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),mv(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&B0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}mv(t,!0,n,null,s);break;case"together":mv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function d0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Uu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ct(153));if(t.child!==null){for(e=t.child,n=Ec(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ec(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tP(e,t,n){switch(t.tag){case 3:cS(t),wf();break;case 5:R4(t);break;case 1:ds(t.type)&&D0(t);break;case 4:i5(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Hn(R0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Hn(hr,hr.current&1),t.flags|=128,null):n&t.child.childLanes?uS(e,t,n):(Hn(hr,hr.current&1),e=sl(e,t,n),e!==null?e.sibling:null);Hn(hr,hr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hn(hr,hr.current),r)break;return null;case 22:case 23:return t.lanes=0,oS(e,t,n)}return sl(e,t,n)}var fS,D2,hS,pS;fS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};D2=function(){};hS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Lu(yo.current);var s=null;switch(n){case"input":i=n2(e,i),r=n2(e,r),s=[];break;case"select":i=gr({},i,{value:void 0}),r=gr({},r,{value:void 0}),s=[];break;case"textarea":i=s2(e,i),r=s2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=T0)}o2(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Zh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Zh.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Yn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};pS=function(e,t,n,r){n!==r&&(t.flags|=4)};function xh(e,t){if(!ar)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nP(e,t,n){var r=t.pendingProps;switch(Xy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(t),null;case 1:return ds(t.type)&&M0(),bi(t),null;case 3:return r=t.stateNode,_f(),Jn(us),Jn(Ci),a5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Om(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Da!==null&&(U2(Da),Da=null))),D2(e,t),bi(t),null;case 5:s5(t);var i=Lu(dp.current);if(n=t.type,e!==null&&t.stateNode!=null)hS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ct(166));return bi(t),null}if(e=Lu(yo.current),Om(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[fo]=t,r[cp]=s,e=(t.mode&1)!==0,n){case"dialog":Yn("cancel",r),Yn("close",r);break;case"iframe":case"object":case"embed":Yn("load",r);break;case"video":case"audio":for(i=0;i<Ph.length;i++)Yn(Ph[i],r);break;case"source":Yn("error",r);break;case"img":case"image":case"link":Yn("error",r),Yn("load",r);break;case"details":Yn("toggle",r);break;case"input":jw(r,s),Yn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yn("invalid",r);break;case"textarea":Ew(r,s),Yn("invalid",r)}o2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Im(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Im(r.textContent,l,e),i=["children",""+l]):Zh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Yn("scroll",r)}switch(n){case"input":Em(r),kw(r,s,!0);break;case"textarea":Em(r),Cw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=T0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=U3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[fo]=t,e[cp]=r,fS(e,t,!1,!1),t.stateNode=e;e:{switch(a=l2(n,r),n){case"dialog":Yn("cancel",e),Yn("close",e),i=r;break;case"iframe":case"object":case"embed":Yn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ph.length;i++)Yn(Ph[i],e);i=r;break;case"source":Yn("error",e),i=r;break;case"img":case"image":case"link":Yn("error",e),Yn("load",e),i=r;break;case"details":Yn("toggle",e),i=r;break;case"input":jw(e,r),i=n2(e,r),Yn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=gr({},r,{value:void 0}),Yn("invalid",e);break;case"textarea":Ew(e,r),i=s2(e,r),Yn("invalid",e);break;default:i=r}o2(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?H3(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&q3(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ep(e,c):typeof c=="number"&&ep(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Yn("scroll",e):c!=null&&Oy(e,s,c,a))}switch(n){case"input":Em(e),kw(e,r,!1);break;case"textarea":Em(e),Cw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Lc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?rf(e,!!r.multiple,s,!1):r.defaultValue!=null&&rf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=T0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bi(t),null;case 6:if(e&&t.stateNode!=null)pS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ct(166));if(n=Lu(dp.current),Lu(yo.current),Om(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(s=r.nodeValue!==n)&&(e=Os,e!==null))switch(e.tag){case 3:Im(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Im(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fo]=t,t.stateNode=r}return bi(t),null;case 13:if(Jn(hr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ar&&Ds!==null&&t.mode&1&&!(t.flags&128))T4(),wf(),t.flags|=98560,s=!1;else if(s=Om(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ct(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ct(317));s[fo]=t}else wf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bi(t),s=!1}else Da!==null&&(U2(Da),Da=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||hr.current&1?qr===0&&(qr=3):y5())),t.updateQueue!==null&&(t.flags|=4),bi(t),null);case 4:return _f(),D2(e,t),e===null&&op(t.stateNode.containerInfo),bi(t),null;case 10:return t5(t.type._context),bi(t),null;case 17:return ds(t.type)&&M0(),bi(t),null;case 19:if(Jn(hr),s=t.memoizedState,s===null)return bi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)xh(s,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=B0(e),a!==null){for(t.flags|=128,xh(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Hn(hr,hr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Er()>Nf&&(t.flags|=128,r=!0,xh(s,!1),t.lanes=4194304)}else{if(!r)if(e=B0(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ar)return bi(t),null}else 2*Er()-s.renderingStartTime>Nf&&n!==1073741824&&(t.flags|=128,r=!0,xh(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Er(),t.sibling=null,n=hr.current,Hn(hr,r?n&1|2:n&1),t):(bi(t),null);case 22:case 23:return v5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ms&1073741824&&(bi(t),t.subtreeFlags&6&&(t.flags|=8192)):bi(t),null;case 24:return null;case 25:return null}throw Error(ct(156,t.tag))}function rP(e,t){switch(Xy(t),t.tag){case 1:return ds(t.type)&&M0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _f(),Jn(us),Jn(Ci),a5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return s5(t),null;case 13:if(Jn(hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ct(340));wf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jn(hr),null;case 4:return _f(),null;case 10:return t5(t.type._context),null;case 22:case 23:return v5(),null;case 24:return null;default:return null}}var $m=!1,ki=!1,iP=typeof WeakSet=="function"?WeakSet:Set,xt=null;function ef(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){br(e,t,r)}else n.current=null}function I2(e,t,n){try{n()}catch(r){br(e,t,r)}}var vb=!1;function sP(e,t){if(y2=A0,e=x4(),Ky(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,p=0,m=e,x=null;t:for(;;){for(var g;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)x=m,m=g;for(;;){if(m===e)break t;if(x===n&&++f===i&&(l=a),x===s&&++p===r&&(c=a),(g=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(x2={focusedElem:e,selectionRange:n},A0=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,E=N.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?j:La(t.type,j),E);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ct(163))}}catch(O){br(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return N=vb,vb=!1,N}function Bh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&I2(t,n,s)}i=i.next}while(i!==r)}}function Sg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function O2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mS(e){var t=e.alternate;t!==null&&(e.alternate=null,mS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fo],delete t[cp],delete t[_2],delete t[zL],delete t[UL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gS(e){return e.tag===5||e.tag===3||e.tag===4}function yb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function R2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=T0));else if(r!==4&&(e=e.child,e!==null))for(R2(e,t,n),e=e.sibling;e!==null;)R2(e,t,n),e=e.sibling}function F2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(F2(e,t,n),e=e.sibling;e!==null;)F2(e,t,n),e=e.sibling}var li=null,Ta=!1;function Zl(e,t,n){for(n=n.child;n!==null;)vS(e,t,n),n=n.sibling}function vS(e,t,n){if(vo&&typeof vo.onCommitFiberUnmount=="function")try{vo.onCommitFiberUnmount(mg,n)}catch{}switch(n.tag){case 5:ki||ef(n,t);case 6:var r=li,i=Ta;li=null,Zl(e,t,n),li=r,Ta=i,li!==null&&(Ta?(e=li,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):li.removeChild(n.stateNode));break;case 18:li!==null&&(Ta?(e=li,n=n.stateNode,e.nodeType===8?lv(e.parentNode,n):e.nodeType===1&&lv(e,n),ip(e)):lv(li,n.stateNode));break;case 4:r=li,i=Ta,li=n.stateNode.containerInfo,Ta=!0,Zl(e,t,n),li=r,Ta=i;break;case 0:case 11:case 14:case 15:if(!ki&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&I2(n,t,a),i=i.next}while(i!==r)}Zl(e,t,n);break;case 1:if(!ki&&(ef(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){br(n,t,l)}Zl(e,t,n);break;case 21:Zl(e,t,n);break;case 22:n.mode&1?(ki=(r=ki)||n.memoizedState!==null,Zl(e,t,n),ki=r):Zl(e,t,n);break;default:Zl(e,t,n)}}function xb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iP),t.forEach(function(r){var i=pP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ka(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:li=l.stateNode,Ta=!1;break e;case 3:li=l.stateNode.containerInfo,Ta=!0;break e;case 4:li=l.stateNode.containerInfo,Ta=!0;break e}l=l.return}if(li===null)throw Error(ct(160));vS(s,a,i),li=null,Ta=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){br(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yS(t,e),t=t.sibling}function yS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ka(t,e),oo(e),r&4){try{Bh(3,e,e.return),Sg(3,e)}catch(j){br(e,e.return,j)}try{Bh(5,e,e.return)}catch(j){br(e,e.return,j)}}break;case 1:ka(t,e),oo(e),r&512&&n!==null&&ef(n,n.return);break;case 5:if(ka(t,e),oo(e),r&512&&n!==null&&ef(n,n.return),e.flags&32){var i=e.stateNode;try{ep(i,"")}catch(j){br(e,e.return,j)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&B3(i,s),l2(l,a);var f=l2(l,s);for(a=0;a<c.length;a+=2){var p=c[a],m=c[a+1];p==="style"?H3(i,m):p==="dangerouslySetInnerHTML"?q3(i,m):p==="children"?ep(i,m):Oy(i,p,m,f)}switch(l){case"input":r2(i,s);break;case"textarea":z3(i,s);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?rf(i,!!s.multiple,g,!1):x!==!!s.multiple&&(s.defaultValue!=null?rf(i,!!s.multiple,s.defaultValue,!0):rf(i,!!s.multiple,s.multiple?[]:"",!1))}i[cp]=s}catch(j){br(e,e.return,j)}}break;case 6:if(ka(t,e),oo(e),r&4){if(e.stateNode===null)throw Error(ct(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(j){br(e,e.return,j)}}break;case 3:if(ka(t,e),oo(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ip(t.containerInfo)}catch(j){br(e,e.return,j)}break;case 4:ka(t,e),oo(e);break;case 13:ka(t,e),oo(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(m5=Er())),r&4&&xb(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ki=(f=ki)||p,ka(t,e),ki=f):ka(t,e),oo(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(xt=e,p=e.child;p!==null;){for(m=xt=p;xt!==null;){switch(x=xt,g=x.child,x.tag){case 0:case 11:case 14:case 15:Bh(4,x,x.return);break;case 1:ef(x,x.return);var N=x.stateNode;if(typeof N.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(j){br(r,n,j)}}break;case 5:ef(x,x.return);break;case 22:if(x.memoizedState!==null){bb(m);continue}}g!==null?(g.return=x,xt=g):bb(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=W3("display",a))}catch(j){br(e,e.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(j){br(e,e.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ka(t,e),oo(e),r&4&&xb(e);break;case 21:break;default:ka(t,e),oo(e)}}function oo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gS(n)){var r=n;break e}n=n.return}throw Error(ct(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ep(i,""),r.flags&=-33);var s=yb(e);F2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=yb(e);R2(e,l,a);break;default:throw Error(ct(161))}}catch(c){br(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aP(e,t,n){xt=e,xS(e)}function xS(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||$m;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||ki;l=$m;var f=ki;if($m=a,(ki=c)&&!f)for(xt=i;xt!==null;)a=xt,c=a.child,a.tag===22&&a.memoizedState!==null?_b(i):c!==null?(c.return=a,xt=c):_b(i);for(;s!==null;)xt=s,xS(s),s=s.sibling;xt=i,$m=l,ki=f}wb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):wb(e)}}function wb(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ki||Sg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ki)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:La(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ib(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ib(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ip(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ct(163))}ki||t.flags&512&&O2(t)}catch(x){br(t,t.return,x)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function bb(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function _b(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Sg(4,t)}catch(c){br(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){br(t,i,c)}}var s=t.return;try{O2(t)}catch(c){br(t,s,c)}break;case 5:var a=t.return;try{O2(t)}catch(c){br(t,a,c)}}}catch(c){br(t,t.return,c)}if(t===e){xt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,xt=l;break}xt=t.return}}var oP=Math.ceil,q0=ll.ReactCurrentDispatcher,h5=ll.ReactCurrentOwner,ia=ll.ReactCurrentBatchConfig,pn=0,ti=null,Or=null,ui=0,Ms=0,tf=Rc(0),qr=0,mp=null,Uu=0,Ng=0,p5=0,zh=null,os=null,m5=0,Nf=1/0,Ko=null,W0=!1,$2=null,jc=null,Bm=!1,mc=null,H0=0,Uh=0,B2=null,f0=-1,h0=0;function Bi(){return pn&6?Er():f0!==-1?f0:f0=Er()}function kc(e){return e.mode&1?pn&2&&ui!==0?ui&-ui:WL.transition!==null?(h0===0&&(h0=r4()),h0):(e=Ln,e!==0||(e=window.event,e=e===void 0?16:u4(e.type)),e):1}function Ra(e,t,n,r){if(50<Uh)throw Uh=0,B2=null,Error(ct(185));Cp(e,n,r),(!(pn&2)||e!==ti)&&(e===ti&&(!(pn&2)&&(Ng|=n),qr===4&&uc(e,ui)),fs(e,r),n===1&&pn===0&&!(t.mode&1)&&(Nf=Er()+500,wg&&Fc()))}function fs(e,t){var n=e.callbackNode;WA(e,t);var r=C0(e,e===ti?ui:0);if(r===0)n!==null&&Pw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pw(n),t===1)e.tag===0?qL(Sb.bind(null,e)):A4(Sb.bind(null,e)),$L(function(){!(pn&6)&&Fc()}),n=null;else{switch(i4(r)){case 1:n=zy;break;case 4:n=t4;break;case 16:n=E0;break;case 536870912:n=n4;break;default:n=E0}n=ES(n,wS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wS(e,t){if(f0=-1,h0=0,pn&6)throw Error(ct(327));var n=e.callbackNode;if(cf()&&e.callbackNode!==n)return null;var r=C0(e,e===ti?ui:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=V0(e,r);else{t=r;var i=pn;pn|=2;var s=_S();(ti!==e||ui!==t)&&(Ko=null,Nf=Er()+500,Mu(e,t));do try{uP();break}catch(l){bS(e,l)}while(!0);e5(),q0.current=s,pn=i,Or!==null?t=0:(ti=null,ui=0,t=qr)}if(t!==0){if(t===2&&(i=h2(e),i!==0&&(r=i,t=z2(e,i))),t===1)throw n=mp,Mu(e,0),uc(e,r),fs(e,Er()),n;if(t===6)uc(e,r);else{if(i=e.current.alternate,!(r&30)&&!lP(i)&&(t=V0(e,r),t===2&&(s=h2(e),s!==0&&(r=s,t=z2(e,s))),t===1))throw n=mp,Mu(e,0),uc(e,r),fs(e,Er()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ct(345));case 2:wu(e,os,Ko);break;case 3:if(uc(e,r),(r&130023424)===r&&(t=m5+500-Er(),10<t)){if(C0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Bi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=b2(wu.bind(null,e,os,Ko),t);break}wu(e,os,Ko);break;case 4:if(uc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Oa(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oP(r/1960))-r,10<r){e.timeoutHandle=b2(wu.bind(null,e,os,Ko),r);break}wu(e,os,Ko);break;case 5:wu(e,os,Ko);break;default:throw Error(ct(329))}}}return fs(e,Er()),e.callbackNode===n?wS.bind(null,e):null}function z2(e,t){var n=zh;return e.current.memoizedState.isDehydrated&&(Mu(e,t).flags|=256),e=V0(e,t),e!==2&&(t=os,os=n,t!==null&&U2(t)),e}function U2(e){os===null?os=e:os.push.apply(os,e)}function lP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Fa(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function uc(e,t){for(t&=~p5,t&=~Ng,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Oa(t),r=1<<n;e[n]=-1,t&=~r}}function Sb(e){if(pn&6)throw Error(ct(327));cf();var t=C0(e,0);if(!(t&1))return fs(e,Er()),null;var n=V0(e,t);if(e.tag!==0&&n===2){var r=h2(e);r!==0&&(t=r,n=z2(e,r))}if(n===1)throw n=mp,Mu(e,0),uc(e,t),fs(e,Er()),n;if(n===6)throw Error(ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,os,Ko),fs(e,Er()),null}function g5(e,t){var n=pn;pn|=1;try{return e(t)}finally{pn=n,pn===0&&(Nf=Er()+500,wg&&Fc())}}function qu(e){mc!==null&&mc.tag===0&&!(pn&6)&&cf();var t=pn;pn|=1;var n=ia.transition,r=Ln;try{if(ia.transition=null,Ln=1,e)return e()}finally{Ln=r,ia.transition=n,pn=t,!(pn&6)&&Fc()}}function v5(){Ms=tf.current,Jn(tf)}function Mu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,FL(n)),Or!==null)for(n=Or.return;n!==null;){var r=n;switch(Xy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&M0();break;case 3:_f(),Jn(us),Jn(Ci),a5();break;case 5:s5(r);break;case 4:_f();break;case 13:Jn(hr);break;case 19:Jn(hr);break;case 10:t5(r.type._context);break;case 22:case 23:v5()}n=n.return}if(ti=e,Or=e=Ec(e.current,null),ui=Ms=t,qr=0,mp=null,p5=Ng=Uu=0,os=zh=null,Au!==null){for(t=0;t<Au.length;t++)if(n=Au[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Au=null}return e}function bS(e,t){do{var n=Or;try{if(e5(),c0.current=U0,z0){for(var r=mr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}z0=!1}if(zu=0,Jr=zr=mr=null,$h=!1,fp=0,h5.current=null,n===null||n.return===null){qr=1,mp=t,Or=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=ui,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=ub(a);if(g!==null){g.flags&=-257,db(g,a,l,s,t),g.mode&1&&cb(s,f,t),t=g,c=f;var N=t.updateQueue;if(N===null){var j=new Set;j.add(c),t.updateQueue=j}else N.add(c);break e}else{if(!(t&1)){cb(s,f,t),y5();break e}c=Error(ct(426))}}else if(ar&&l.mode&1){var E=ub(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),db(E,a,l,s,t),Qy(Sf(c,l));break e}}s=c=Sf(c,l),qr!==4&&(qr=2),zh===null?zh=[s]:zh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=iS(s,c,t);rb(s,b);break e;case 1:l=c;var S=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(jc===null||!jc.has(A)))){s.flags|=65536,t&=-t,s.lanes|=t;var O=sS(s,l,t);rb(s,O);break e}}s=s.return}while(s!==null)}NS(n)}catch(K){t=K,Or===n&&n!==null&&(Or=n=n.return);continue}break}while(!0)}function _S(){var e=q0.current;return q0.current=U0,e===null?U0:e}function y5(){(qr===0||qr===3||qr===2)&&(qr=4),ti===null||!(Uu&268435455)&&!(Ng&268435455)||uc(ti,ui)}function V0(e,t){var n=pn;pn|=2;var r=_S();(ti!==e||ui!==t)&&(Ko=null,Mu(e,t));do try{cP();break}catch(i){bS(e,i)}while(!0);if(e5(),pn=n,q0.current=r,Or!==null)throw Error(ct(261));return ti=null,ui=0,qr}function cP(){for(;Or!==null;)SS(Or)}function uP(){for(;Or!==null&&!IA();)SS(Or)}function SS(e){var t=kS(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,t===null?NS(e):Or=t,h5.current=null}function NS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=rP(n,t),n!==null){n.flags&=32767,Or=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Or=null;return}}else if(n=nP(n,t,Ms),n!==null){Or=n;return}if(t=t.sibling,t!==null){Or=t;return}Or=t=e}while(t!==null);qr===0&&(qr=5)}function wu(e,t,n){var r=Ln,i=ia.transition;try{ia.transition=null,Ln=1,dP(e,t,n,r)}finally{ia.transition=i,Ln=r}return null}function dP(e,t,n,r){do cf();while(mc!==null);if(pn&6)throw Error(ct(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ct(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(HA(e,s),e===ti&&(Or=ti=null,ui=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bm||(Bm=!0,ES(E0,function(){return cf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ia.transition,ia.transition=null;var a=Ln;Ln=1;var l=pn;pn|=4,h5.current=null,sP(e,n),yS(n,e),PL(x2),A0=!!y2,x2=y2=null,e.current=n,aP(n),OA(),pn=l,Ln=a,ia.transition=s}else e.current=n;if(Bm&&(Bm=!1,mc=e,H0=i),s=e.pendingLanes,s===0&&(jc=null),$A(n.stateNode),fs(e,Er()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(W0)throw W0=!1,e=$2,$2=null,e;return H0&1&&e.tag!==0&&cf(),s=e.pendingLanes,s&1?e===B2?Uh++:(Uh=0,B2=e):Uh=0,Fc(),null}function cf(){if(mc!==null){var e=i4(H0),t=ia.transition,n=Ln;try{if(ia.transition=null,Ln=16>e?16:e,mc===null)var r=!1;else{if(e=mc,mc=null,H0=0,pn&6)throw Error(ct(331));var i=pn;for(pn|=4,xt=e.current;xt!==null;){var s=xt,a=s.child;if(xt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(xt=f;xt!==null;){var p=xt;switch(p.tag){case 0:case 11:case 15:Bh(8,p,s)}var m=p.child;if(m!==null)m.return=p,xt=m;else for(;xt!==null;){p=xt;var x=p.sibling,g=p.return;if(mS(p),p===f){xt=null;break}if(x!==null){x.return=g,xt=x;break}xt=g}}}var N=s.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var E=j.sibling;j.sibling=null,j=E}while(j!==null)}}xt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,xt=a;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bh(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,xt=b;break e}xt=s.return}}var S=e.current;for(xt=S;xt!==null;){a=xt;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,xt=A;else e:for(a=S;xt!==null;){if(l=xt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sg(9,l)}}catch(K){br(l,l.return,K)}if(l===a){xt=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,xt=O;break e}xt=l.return}}if(pn=i,Fc(),vo&&typeof vo.onPostCommitFiberRoot=="function")try{vo.onPostCommitFiberRoot(mg,e)}catch{}r=!0}return r}finally{Ln=n,ia.transition=t}}return!1}function Nb(e,t,n){t=Sf(n,t),t=iS(e,t,1),e=Nc(e,t,1),t=Bi(),e!==null&&(Cp(e,1,t),fs(e,t))}function br(e,t,n){if(e.tag===3)Nb(e,e,n);else for(;t!==null;){if(t.tag===3){Nb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jc===null||!jc.has(r))){e=Sf(n,e),e=sS(t,e,1),t=Nc(t,e,1),e=Bi(),t!==null&&(Cp(t,1,e),fs(t,e));break}}t=t.return}}function fP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Bi(),e.pingedLanes|=e.suspendedLanes&n,ti===e&&(ui&n)===n&&(qr===4||qr===3&&(ui&130023424)===ui&&500>Er()-m5?Mu(e,0):p5|=n),fs(e,t)}function jS(e,t){t===0&&(e.mode&1?(t=Lm,Lm<<=1,!(Lm&130023424)&&(Lm=4194304)):t=1);var n=Bi();e=il(e,t),e!==null&&(Cp(e,t,n),fs(e,n))}function hP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jS(e,n)}function pP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ct(314))}r!==null&&r.delete(t),jS(e,n)}var kS;kS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||us.current)cs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return cs=!1,tP(e,t,n);cs=!!(e.flags&131072)}else cs=!1,ar&&t.flags&1048576&&L4(t,O0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;d0(e,t),e=t.pendingProps;var i=xf(t,Ci.current);lf(t,n),i=l5(null,t,r,e,i,n);var s=c5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ds(r)?(s=!0,D0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,r5(t),i.updater=_g,t.stateNode=i,i._reactInternals=t,C2(t,r,e,n),t=P2(null,t,r,!0,s,n)):(t.tag=0,ar&&s&&Jy(t),Fi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(d0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=gP(r),e=La(r,e),i){case 0:t=L2(null,t,r,e,n);break e;case 1:t=pb(null,t,r,e,n);break e;case 11:t=fb(null,t,r,e,n);break e;case 14:t=hb(null,t,r,La(r.type,e),n);break e}throw Error(ct(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:La(r,i),L2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:La(r,i),pb(e,t,r,i,n);case 3:e:{if(cS(t),e===null)throw Error(ct(387));r=t.pendingProps,s=t.memoizedState,i=s.element,O4(e,t),$0(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Sf(Error(ct(423)),t),t=mb(e,t,r,n,i);break e}else if(r!==i){i=Sf(Error(ct(424)),t),t=mb(e,t,r,n,i);break e}else for(Ds=Sc(t.stateNode.containerInfo.firstChild),Os=t,ar=!0,Da=null,n=D4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wf(),r===i){t=sl(e,t,n);break e}Fi(e,t,r,n)}t=t.child}return t;case 5:return R4(t),e===null&&j2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,w2(r,i)?a=null:s!==null&&w2(r,s)&&(t.flags|=32),lS(e,t),Fi(e,t,a,n),t.child;case 6:return e===null&&j2(t),null;case 13:return uS(e,t,n);case 4:return i5(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bf(t,null,r,n):Fi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:La(r,i),fb(e,t,r,i,n);case 7:return Fi(e,t,t.pendingProps,n),t.child;case 8:return Fi(e,t,t.pendingProps.children,n),t.child;case 12:return Fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Hn(R0,r._currentValue),r._currentValue=a,s!==null)if(Fa(s.value,a)){if(s.children===i.children&&!us.current){t=sl(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=el(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),k2(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ct(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),k2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Fi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,lf(t,n),i=oa(i),r=r(i),t.flags|=1,Fi(e,t,r,n),t.child;case 14:return r=t.type,i=La(r,t.pendingProps),i=La(r.type,i),hb(e,t,r,i,n);case 15:return aS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:La(r,i),d0(e,t),t.tag=1,ds(r)?(e=!0,D0(t)):e=!1,lf(t,n),rS(t,r,i),C2(t,r,i,n),P2(null,t,r,!0,e,n);case 19:return dS(e,t,n);case 22:return oS(e,t,n)}throw Error(ct(156,t.tag))};function ES(e,t){return e4(e,t)}function mP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,t,n,r){return new mP(e,t,n,r)}function x5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gP(e){if(typeof e=="function")return x5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fy)return 11;if(e===$y)return 14}return 2}function Ec(e,t){var n=e.alternate;return n===null?(n=ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function p0(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")x5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Hd:return Du(n.children,i,s,t);case Ry:a=8,i|=8;break;case Qv:return e=ra(12,n,t,i|2),e.elementType=Qv,e.lanes=s,e;case Zv:return e=ra(13,n,t,i),e.elementType=Zv,e.lanes=s,e;case e2:return e=ra(19,n,t,i),e.elementType=e2,e.lanes=s,e;case R3:return jg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I3:a=10;break e;case O3:a=9;break e;case Fy:a=11;break e;case $y:a=14;break e;case sc:a=16,r=null;break e}throw Error(ct(130,e==null?e:typeof e,""))}return t=ra(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Du(e,t,n,r){return e=ra(7,e,r,t),e.lanes=n,e}function jg(e,t,n,r){return e=ra(22,e,r,t),e.elementType=R3,e.lanes=n,e.stateNode={isHidden:!1},e}function gv(e,t,n){return e=ra(6,e,null,t),e.lanes=n,e}function vv(e,t,n){return t=ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=X1(0),this.expirationTimes=X1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function w5(e,t,n,r,i,s,a,l,c){return e=new vP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ra(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},r5(s),e}function yP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function CS(e){if(!e)return Pc;e=e._reactInternals;e:{if(Vu(e)!==e||e.tag!==1)throw Error(ct(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ct(171))}if(e.tag===1){var n=e.type;if(ds(n))return C4(e,n,t)}return t}function AS(e,t,n,r,i,s,a,l,c){return e=w5(n,r,!0,e,i,s,a,l,c),e.context=CS(null),n=e.current,r=Bi(),i=kc(n),s=el(r,i),s.callback=t??null,Nc(n,s,i),e.current.lanes=i,Cp(e,i,r),fs(e,r),e}function kg(e,t,n,r){var i=t.current,s=Bi(),a=kc(i);return n=CS(n),t.context===null?t.context=n:t.pendingContext=n,t=el(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Nc(i,t,a),e!==null&&(Ra(e,i,a,s),l0(e,i,a)),a}function G0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function b5(e,t){jb(e,t),(e=e.alternate)&&jb(e,t)}function xP(){return null}var LS=typeof reportError=="function"?reportError:function(e){console.error(e)};function _5(e){this._internalRoot=e}Eg.prototype.render=_5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ct(409));kg(e,t,null,null)};Eg.prototype.unmount=_5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qu(function(){kg(null,e,null,null)}),t[rl]=null}};function Eg(e){this._internalRoot=e}Eg.prototype.unstable_scheduleHydration=function(e){if(e){var t=o4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cc.length&&t!==0&&t<cc[n].priority;n++);cc.splice(n,0,e),n===0&&c4(e)}};function S5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kb(){}function wP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=G0(a);s.call(f)}}var a=AS(t,r,e,0,null,!1,!1,"",kb);return e._reactRootContainer=a,e[rl]=a.current,op(e.nodeType===8?e.parentNode:e),qu(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=G0(c);l.call(f)}}var c=w5(e,0,!1,null,null,!1,!1,"",kb);return e._reactRootContainer=c,e[rl]=c.current,op(e.nodeType===8?e.parentNode:e),qu(function(){kg(t,c,n,r)}),c}function Ag(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=G0(a);l.call(c)}}kg(t,a,e,i)}else a=wP(n,t,e,i,r);return G0(a)}s4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Lh(t.pendingLanes);n!==0&&(Uy(t,n|1),fs(t,Er()),!(pn&6)&&(Nf=Er()+500,Fc()))}break;case 13:qu(function(){var r=il(e,1);if(r!==null){var i=Bi();Ra(r,e,1,i)}}),b5(e,1)}};qy=function(e){if(e.tag===13){var t=il(e,134217728);if(t!==null){var n=Bi();Ra(t,e,134217728,n)}b5(e,134217728)}};a4=function(e){if(e.tag===13){var t=kc(e),n=il(e,t);if(n!==null){var r=Bi();Ra(n,e,t,r)}b5(e,t)}};o4=function(){return Ln};l4=function(e,t){var n=Ln;try{return Ln=e,t()}finally{Ln=n}};u2=function(e,t,n){switch(t){case"input":if(r2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xg(r);if(!i)throw Error(ct(90));$3(r),r2(r,i)}}}break;case"textarea":z3(e,n);break;case"select":t=n.value,t!=null&&rf(e,!!n.multiple,t,!1)}};Y3=g5;K3=qu;var bP={usingClientEntryPoint:!1,Events:[Lp,Kd,xg,V3,G3,g5]},wh={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_P={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Q3(e),e===null?null:e.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||xP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{mg=zm.inject(_P),vo=zm}catch{}}Fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bP;Fs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S5(t))throw Error(ct(200));return yP(e,t,null,n)};Fs.createRoot=function(e,t){if(!S5(e))throw Error(ct(299));var n=!1,r="",i=LS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=w5(e,1,!1,null,null,n,!1,r,i),e[rl]=t.current,op(e.nodeType===8?e.parentNode:e),new _5(t)};Fs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ct(188)):(e=Object.keys(e).join(","),Error(ct(268,e)));return e=Q3(t),e=e===null?null:e.stateNode,e};Fs.flushSync=function(e){return qu(e)};Fs.hydrate=function(e,t,n){if(!Cg(t))throw Error(ct(200));return Ag(null,e,t,!0,n)};Fs.hydrateRoot=function(e,t,n){if(!S5(e))throw Error(ct(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=LS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=AS(t,null,e,1,n??null,i,!1,s,a),e[rl]=t.current,op(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Eg(t)};Fs.render=function(e,t,n){if(!Cg(t))throw Error(ct(200));return Ag(null,e,t,!1,n)};Fs.unmountComponentAtNode=function(e){if(!Cg(e))throw Error(ct(40));return e._reactRootContainer?(qu(function(){Ag(null,null,e,!1,function(){e._reactRootContainer=null,e[rl]=null})}),!0):!1};Fs.unstable_batchedUpdates=g5;Fs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Cg(n))throw Error(ct(200));if(e==null||e._reactInternals===void 0)throw Error(ct(38));return Ag(e,t,n,!1,r)};Fs.version="18.3.1-next-f1338f8080-20240426";function PS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PS)}catch(e){console.error(e)}}PS(),P3.exports=Fs;var Pu=P3.exports,TS,Eb=Pu;TS=Eb.createRoot,Eb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(){return gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gp.apply(this,arguments)}var gc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gc||(gc={}));const Cb="popstate";function SP(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return q2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Y0(i)}return jP(t,n,null,e)}function Pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function MS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NP(){return Math.random().toString(36).substr(2,8)}function Ab(e,t){return{usr:e.state,key:e.key,idx:t}}function q2(e,t,n,r){return n===void 0&&(n=null),gp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tf(t):t,{state:n,key:t&&t.key||r||NP()})}function Y0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Tf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function jP(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=gc.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(gp({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=gc.Pop;let E=p(),b=E==null?null:E-f;f=E,c&&c({action:l,location:j.location,delta:b})}function x(E,b){l=gc.Push;let S=q2(j.location,E,b);f=p()+1;let A=Ab(S,f),O=j.createHref(S);try{a.pushState(A,"",O)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(O)}s&&c&&c({action:l,location:j.location,delta:1})}function g(E,b){l=gc.Replace;let S=q2(j.location,E,b);f=p();let A=Ab(S,f),O=j.createHref(S);a.replaceState(A,"",O),s&&c&&c({action:l,location:j.location,delta:0})}function N(E){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof E=="string"?E:Y0(E);return S=S.replace(/ $/,"%20"),Pr(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let j={get action(){return l},get location(){return e(i,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Cb,m),c=E,()=>{i.removeEventListener(Cb,m),c=null}},createHref(E){return t(i,E)},createURL:N,encodeLocation(E){let b=N(E);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:x,replace:g,go(E){return a.go(E)}};return j}var Lb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lb||(Lb={}));function kP(e,t,n){return n===void 0&&(n="/"),EP(e,t,n,!1)}function EP(e,t,n,r){let i=typeof t=="string"?Tf(t):t,s=N5(i.pathname||"/",n);if(s==null)return null;let a=DS(e);CP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=$P(s);l=RP(a[c],f,r)}return l}function DS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Pr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Cc([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Pr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),DS(s.children,t,p,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:IP(f,s.index),routesMeta:p})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of IS(s.path))i(s,a,c)}),t}function IS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=IS(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function CP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:OP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const AP=/^:[\w-]+$/,LP=3,PP=2,TP=1,MP=10,DP=-2,Pb=e=>e==="*";function IP(e,t){let n=e.split("/"),r=n.length;return n.some(Pb)&&(r+=DP),t&&(r+=PP),n.filter(i=>!Pb(i)).reduce((i,s)=>i+(AP.test(s)?LP:s===""?TP:MP),r)}function OP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function RP(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=Tb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),x=c.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=Tb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Cc([s,m.pathname]),pathnameBase:qP(Cc([s,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(s=Cc([s,m.pathnameBase]))}return a}function Tb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:x,isOptional:g}=p;if(x==="*"){let j=l[m]||"";a=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const N=l[m];return g&&!N?f[x]=void 0:f[x]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:e}}function FP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),MS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function $P(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return MS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function N5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function BP(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Tf(e):e;return{pathname:n?n.startsWith("/")?n:zP(n,t):t,search:WP(r),hash:HP(i)}}function zP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function j5(e,t){let n=UP(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Tf(e):(i=gp({},e),Pr(!i.pathname||!i.pathname.includes("?"),yv("?","pathname","search",i)),Pr(!i.pathname||!i.pathname.includes("#"),yv("#","pathname","hash",i)),Pr(!i.search||!i.search.includes("#"),yv("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}l=m>=0?t[m]:"/"}let c=BP(i,l),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const Cc=e=>e.join("/").replace(/\/\/+/g,"/"),qP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const OS=["post","put","patch","delete"];new Set(OS);const GP=["get",...OS];new Set(GP);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vp.apply(this,arguments)}const E5=k.createContext(null),YP=k.createContext(null),$c=k.createContext(null),Lg=k.createContext(null),cl=k.createContext({outlet:null,matches:[],isDataRoute:!1}),RS=k.createContext(null);function KP(e,t){let{relative:n}=t===void 0?{}:t;Mf()||Pr(!1);let{basename:r,navigator:i}=k.useContext($c),{hash:s,pathname:a,search:l}=BS(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Cc([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Mf(){return k.useContext(Lg)!=null}function ua(){return Mf()||Pr(!1),k.useContext(Lg).location}function FS(e){k.useContext($c).static||k.useLayoutEffect(e)}function da(){let{isDataRoute:e}=k.useContext(cl);return e?l7():JP()}function JP(){Mf()||Pr(!1);let e=k.useContext(E5),{basename:t,future:n,navigator:r}=k.useContext($c),{matches:i}=k.useContext(cl),{pathname:s}=ua(),a=JSON.stringify(j5(i,n.v7_relativeSplatPath)),l=k.useRef(!1);return FS(()=>{l.current=!0}),k.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let m=k5(f,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Cc([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,a,s,e])}function $S(){let{matches:e}=k.useContext(cl),t=e[e.length-1];return t?t.params:{}}function BS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext($c),{matches:i}=k.useContext(cl),{pathname:s}=ua(),a=JSON.stringify(j5(i,r.v7_relativeSplatPath));return k.useMemo(()=>k5(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function XP(e,t){return QP(e,t)}function QP(e,t,n,r){Mf()||Pr(!1);let{navigator:i}=k.useContext($c),{matches:s}=k.useContext(cl),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=ua(),p;if(t){var m;let E=typeof t=="string"?Tf(t):t;c==="/"||(m=E.pathname)!=null&&m.startsWith(c)||Pr(!1),p=E}else p=f;let x=p.pathname||"/",g=x;if(c!=="/"){let E=c.replace(/^\//,"").split("/");g="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=kP(e,{pathname:g}),j=r7(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Cc([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Cc([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return t&&j?k.createElement(Lg.Provider,{value:{location:vp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:gc.Pop}},j):j}function ZP(){let e=o7(),t=VP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const e7=k.createElement(ZP,null);class t7 extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(cl.Provider,{value:this.props.routeContext},k.createElement(RS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n7(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(E5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(cl.Provider,{value:t},r)}function r7(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Pr(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:x,errors:g}=n,N=m.route.loader&&x[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||N){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,x)=>{let g,N=!1,j=null,E=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||e7,c&&(f<0&&x===0?(N=!0,E=null):f===x&&(N=!0,E=m.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,x+1)),S=()=>{let A;return g?A=j:N?A=E:m.route.Component?A=k.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=p,k.createElement(n7,{match:m,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?k.createElement(t7,{location:n.location,revalidation:n.revalidation,component:j,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var zS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zS||{}),K0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(K0||{});function i7(e){let t=k.useContext(E5);return t||Pr(!1),t}function s7(e){let t=k.useContext(YP);return t||Pr(!1),t}function a7(e){let t=k.useContext(cl);return t||Pr(!1),t}function US(e){let t=a7(),n=t.matches[t.matches.length-1];return n.route.id||Pr(!1),n.route.id}function o7(){var e;let t=k.useContext(RS),n=s7(K0.UseRouteError),r=US(K0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function l7(){let{router:e}=i7(zS.UseNavigateStable),t=US(K0.UseNavigateStable),n=k.useRef(!1);return FS(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,vp({fromRouteId:t},s)))},[e,t])}const Mb={};function c7(e,t){Mb[t]||(Mb[t]=!0,console.warn(t))}const Db=(e,t,n)=>c7(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function u7(e,t){e!=null&&e.v7_startTransition||Db("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Db("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function d7(e){let{to:t,replace:n,state:r,relative:i}=e;Mf()||Pr(!1);let{future:s,static:a}=k.useContext($c),{matches:l}=k.useContext(cl),{pathname:c}=ua(),f=da(),p=k5(t,j5(l,s.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(p);return k.useEffect(()=>f(JSON.parse(m),{replace:n,state:r,relative:i}),[f,m,i,n,r]),null}function Ps(e){Pr(!1)}function f7(e){let{basename:t="/",children:n=null,location:r,navigationType:i=gc.Pop,navigator:s,static:a=!1,future:l}=e;Mf()&&Pr(!1);let c=t.replace(/^\/*/,"/"),f=k.useMemo(()=>({basename:c,navigator:s,static:a,future:vp({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=Tf(r));let{pathname:p="/",search:m="",hash:x="",state:g=null,key:N="default"}=r,j=k.useMemo(()=>{let E=N5(p,c);return E==null?null:{location:{pathname:E,search:m,hash:x,state:g,key:N},navigationType:i}},[c,p,m,x,g,N,i]);return j==null?null:k.createElement($c.Provider,{value:f},k.createElement(Lg.Provider,{children:n,value:j}))}function h7(e){let{children:t,location:n}=e;return XP(W2(t),n)}new Promise(()=>{});function W2(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let s=[...t,i];if(r.type===k.Fragment){n.push.apply(n,W2(r.props.children,s));return}r.type!==Ps&&Pr(!1),!r.props.index||!r.props.children||Pr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=W2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H2.apply(this,arguments)}function p7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function m7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function g7(e,t){return e.button===0&&(!t||t==="_self")&&!m7(e)}function V2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function v7(e,t){let n=V2(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const y7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x7="6";try{window.__reactRouterVersion=x7}catch{}const w7="startTransition",Ib=Jv[w7];function b7(e){let{basename:t,children:n,future:r,window:i}=e,s=k.useRef();s.current==null&&(s.current=SP({window:i,v5Compat:!0}));let a=s.current,[l,c]=k.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=k.useCallback(m=>{f&&Ib?Ib(()=>c(m)):c(m)},[c,f]);return k.useLayoutEffect(()=>a.listen(p),[a,p]),k.useEffect(()=>u7(r),[r]),k.createElement(f7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const _7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ac=k.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:m}=t,x=p7(t,y7),{basename:g}=k.useContext($c),N,j=!1;if(typeof f=="string"&&S7.test(f)&&(N=f,_7))try{let A=new URL(window.location.href),O=f.startsWith("//")?new URL(A.protocol+f):new URL(f),K=N5(O.pathname,g);O.origin===A.origin&&K!=null?f=K+O.search+O.hash:j=!0}catch{}let E=KP(f,{relative:i}),b=N7(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:m});function S(A){r&&r(A),A.defaultPrevented||b(A)}return k.createElement("a",H2({},x,{href:N||E,onClick:j||s?r:S,ref:n,target:c}))});var Ob;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ob||(Ob={}));var Rb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rb||(Rb={}));function N7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=da(),f=ua(),p=BS(e,{relative:a});return k.useCallback(m=>{if(g7(m,n)){m.preventDefault();let x=r!==void 0?r:Y0(f)===Y0(p);c(e,{replace:x,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[f,c,p,r,i,n,e,s,a,l])}function qS(e){let t=k.useRef(V2(e)),n=k.useRef(!1),r=ua(),i=k.useMemo(()=>v7(r.search,n.current?null:t.current),[r.search]),s=da(),a=k.useCallback((l,c)=>{const f=V2(typeof l=="function"?l(i):l);n.current=!0,s("?"+f,c)},[s,i]);return[i,a]}let j7={data:""},k7=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||j7,E7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,C7=/\/\*[^]*?\*\/|  +/g,Fb=/\n+/g,dc=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?dc(a,s):s+"{"+dc(a,s[1]=="k"?"":t)+"}":typeof a=="object"?r+=dc(a,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=dc.p?dc.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Vo={},WS=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+WS(e[n]);return t}return e},A7=(e,t,n,r,i)=>{let s=WS(e),a=Vo[s]||(Vo[s]=(c=>{let f=0,p=11;for(;f<c.length;)p=101*p+c.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Vo[a]){let c=s!==e?e:(f=>{let p,m,x=[{}];for(;p=E7.exec(f.replace(C7,""));)p[4]?x.shift():p[3]?(m=p[3].replace(Fb," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][p[1]]=p[2].replace(Fb," ").trim();return x[0]})(e);Vo[a]=dc(i?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Vo.g?Vo.g:null;return n&&(Vo.g=Vo[a]),((c,f,p,m)=>{m?f.data=f.data.replace(m,c):f.data.indexOf(c)===-1&&(f.data=p?c+f.data:f.data+c)})(Vo[a],t,r,l),a},L7=(e,t,n)=>e.reduce((r,i,s)=>{let a=t[s];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":dc(l,""):l===!1?"":l}return r+i+(a??"")},"");function Pg(e){let t=this||{},n=e.call?e(t.p):e;return A7(n.unshift?n.raw?L7(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,k7(t.target),t.g,t.o,t.k)}let HS,G2,Y2;Pg.bind({g:1});let al=Pg.bind({k:1});function P7(e,t,n,r){dc.p=t,HS=e,G2=n,Y2=r}function Bc(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:G2&&G2()},l),n.o=/ *go\d+/.test(c),l.className=Pg.apply(n,r)+(c?" "+c:"");let f=e;return e[0]&&(f=l.as||e,delete l.as),Y2&&f[0]&&Y2(l),HS(f,l)}return i}}var T7=e=>typeof e=="function",J0=(e,t)=>T7(e)?e(t):e,M7=(()=>{let e=0;return()=>(++e).toString()})(),VS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),D7=20,m0=new Map,I7=1e3,$b=e=>{if(m0.has(e))return;let t=setTimeout(()=>{m0.delete(e),Gu({type:4,toastId:e})},I7);m0.set(e,t)},O7=e=>{let t=m0.get(e);t&&clearTimeout(t)},K2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,D7)};case 1:return t.toast.id&&O7(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?K2(e,{type:1,toast:n}):K2(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?$b(r):e.toasts.forEach(s=>{$b(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},g0=[],v0={toasts:[],pausedAt:void 0},Gu=e=>{v0=K2(v0,e),g0.forEach(t=>{t(v0)})},R7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},F7=(e={})=>{let[t,n]=k.useState(v0);k.useEffect(()=>(g0.push(n),()=>{let i=g0.indexOf(n);i>-1&&g0.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var s,a;return{...e,...e[i.type],...i,duration:i.duration||((s=e[i.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||R7[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:r}},$7=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||M7()}),Tp=e=>(t,n)=>{let r=$7(t,e,n);return Gu({type:2,toast:r}),r.id},Le=(e,t)=>Tp("blank")(e,t);Le.error=Tp("error");Le.success=Tp("success");Le.loading=Tp("loading");Le.custom=Tp("custom");Le.dismiss=e=>{Gu({type:3,toastId:e})};Le.remove=e=>Gu({type:4,toastId:e});Le.promise=(e,t,n)=>{let r=Le.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(Le.success(J0(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Le.error(J0(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var B7=(e,t)=>{Gu({type:1,toast:{id:e,height:t}})},z7=()=>{Gu({type:5,time:Date.now()})},U7=e=>{let{toasts:t,pausedAt:n}=F7(e);k.useEffect(()=>{if(n)return;let s=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Le.dismiss(l.id);return}return setTimeout(()=>Le.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=k.useCallback(()=>{n&&Gu({type:6,time:Date.now()})},[n]),i=k.useCallback((s,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:f}=a||{},p=t.filter(g=>(g.position||f)===(s.position||f)&&g.height),m=p.findIndex(g=>g.id===s.id),x=p.filter((g,N)=>N<m&&g.visible).length;return p.filter(g=>g.visible).slice(...l?[x+1]:[0,x]).reduce((g,N)=>g+(N.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:B7,startPause:z7,endPause:r,calculateOffset:i}}},q7=al`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,W7=al`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,H7=al`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,V7=Bc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${q7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${W7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${H7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,G7=al`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Y7=Bc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${G7} 1s linear infinite;
`,K7=al`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,J7=al`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,X7=Bc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${K7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${J7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Q7=Bc("div")`
  position: absolute;
`,Z7=Bc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,eT=al`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tT=Bc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${eT} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,nT=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?k.createElement(tT,null,t):t:n==="blank"?null:k.createElement(Z7,null,k.createElement(Y7,{...r}),n!=="loading"&&k.createElement(Q7,null,n==="error"?k.createElement(V7,{...r}):k.createElement(X7,{...r})))},rT=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,iT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,sT="0%{opacity:0;} 100%{opacity:1;}",aT="0%{opacity:1;} 100%{opacity:0;}",oT=Bc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,lT=Bc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,cT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=VS()?[sT,aT]:[rT(n),iT(n)];return{animation:t?`${al(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${al(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},uT=k.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?cT(e.position||t||"top-center",e.visible):{opacity:0},s=k.createElement(nT,{toast:e}),a=k.createElement(lT,{...e.ariaProps},J0(e.message,e));return k.createElement(oT,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:a}):k.createElement(k.Fragment,null,s,a))});P7(k.createElement);var dT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=k.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return k.createElement("div",{ref:s,className:t,style:n},i)},fT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:VS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},hT=Pg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Um=16,pT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=U7(n);return k.createElement("div",{style:{position:"fixed",zIndex:9999,top:Um,left:Um,right:Um,bottom:Um,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(f=>{let p=f.position||t,m=c.calculateOffset(f,{reverseOrder:e,gutter:r,defaultPosition:t}),x=fT(p,m);return k.createElement(dT,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?hT:"",style:x},f.type==="custom"?J0(f.message,f):i?i(f):k.createElement(uT,{toast:f,position:p}))}))};const mT="modulepreload",gT=function(e){return"/"+e},Bb={},ol=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=gT(c),c in Bb)return;Bb[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":mT,f||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((x,g)=>{m.addEventListener("load",x),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},vT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Df);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class C5 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class yT extends C5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class xT extends C5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class wT extends C5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var J2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(J2||(J2={}));var bT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class _T{constructor(t,{headers:n={},customFetch:r,region:i=J2.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=vT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return bT(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f}).catch(N=>{throw new yT(N)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new xT(p);if(!p.ok)throw new wT(p);let x=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield p.json():x==="application/octet-stream"?g=yield p.blob():x==="text/event-stream"?g=p:x==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var ls={},A5={},Tg={},Mp={},Mg={},Dg={},ST=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jf=ST();const NT=jf.fetch,GS=jf.fetch.bind(jf),YS=jf.Headers,jT=jf.Request,kT=jf.Response,Df=Object.freeze(Object.defineProperty({__proto__:null,Headers:YS,Request:jT,Response:kT,default:GS,fetch:NT},Symbol.toStringTag,{value:"Module"})),ET=X8(Df);var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});class CT extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Ig.default=CT;var KS=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dg,"__esModule",{value:!0});const AT=KS(ET),LT=KS(Ig);let PT=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=AT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,l,c;let f=null,p=null,m=null,x=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=b:p=JSON.parse(b))}const j=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),E=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");j&&E&&E.length>1&&(m=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,x=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const j=await s.text();try{f=JSON.parse(j),Array.isArray(f)&&s.status===404&&(p=[],f=null,x=200,g="OK")}catch{s.status===404&&j===""?(x=204,g="No Content"):f={message:j}}if(f&&this.isMaybeSingle&&(!((c=f==null?void 0:f.details)===null||c===void 0)&&c.includes("0 rows"))&&(f=null,x=200,g="OK"),f&&this.shouldThrowOnError)throw new LT.default(f)}return{error:f,data:p,count:m,status:x,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,l,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};Dg.default=PT;var TT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mg,"__esModule",{value:!0});const MT=TT(Dg);let DT=class extends MT.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${f}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Mg.default=DT;var IT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mp,"__esModule",{value:!0});const OT=IT(Mg);let RT=class extends OT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Mp.default=RT;var FT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tg,"__esModule",{value:!0});const bh=FT(Mp);let $T=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new bh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new bh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(c.length>0){const f=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new bh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new bh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new bh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Tg.default=$T;var Og={},Rg={};Object.defineProperty(Rg,"__esModule",{value:!0});Rg.version=void 0;Rg.version="0.0.0-automated";Object.defineProperty(Og,"__esModule",{value:!0});Og.DEFAULT_HEADERS=void 0;const BT=Rg;Og.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${BT.version}`};var JS=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(A5,"__esModule",{value:!0});const zT=JS(Tg),UT=JS(Mp),qT=Og;let WT=class XS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},qT.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new zT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new XS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=Object.assign({},this.headers);return s&&(f.Prefer=`count=${s}`),new UT.default({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};A5.default=WT;var If=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});ls.PostgrestError=ls.PostgrestBuilder=ls.PostgrestTransformBuilder=ls.PostgrestFilterBuilder=ls.PostgrestQueryBuilder=ls.PostgrestClient=void 0;const QS=If(A5);ls.PostgrestClient=QS.default;const ZS=If(Tg);ls.PostgrestQueryBuilder=ZS.default;const eN=If(Mp);ls.PostgrestFilterBuilder=eN.default;const tN=If(Mg);ls.PostgrestTransformBuilder=tN.default;const nN=If(Dg);ls.PostgrestBuilder=nN.default;const rN=If(Ig);ls.PostgrestError=rN.default;var HT=ls.default={PostgrestClient:QS.default,PostgrestQueryBuilder:ZS.default,PostgrestFilterBuilder:eN.default,PostgrestTransformBuilder:tN.default,PostgrestBuilder:nN.default,PostgrestError:rN.default};const{PostgrestClient:VT,PostgrestQueryBuilder:xq,PostgrestFilterBuilder:wq,PostgrestTransformBuilder:bq,PostgrestBuilder:_q}=HT,GT="2.10.7",YT={"X-Client-Info":`realtime-js/${GT}`},KT="1.0.0",iN=1e4,JT=1e3;var uf;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(uf||(uf={}));var Ts;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ts||(Ts={}));var Ma;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ma||(Ma={}));var X2;(function(e){e.websocket="websocket"})(X2||(X2={}));var ju;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ju||(ju={}));class XT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:f}}}class sN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(qn||(qn={}));const zb=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=QT(a,e,t,i),s),{})},QT=(e,t,n,r)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?aN(s,a):Q2(a)},aN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return nM(t,n)}switch(e){case qn.bool:return ZT(t);case qn.float4:case qn.float8:case qn.int2:case qn.int4:case qn.int8:case qn.numeric:case qn.oid:return eM(t);case qn.json:case qn.jsonb:return tM(t);case qn.timestamp:return rM(t);case qn.abstime:case qn.date:case qn.daterange:case qn.int4range:case qn.int8range:case qn.money:case qn.reltime:case qn.text:case qn.time:case qn.timestamptz:case qn.timetz:case qn.tsrange:case qn.tstzrange:return Q2(t);default:return Q2(t)}},Q2=e=>e,ZT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},eM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},tM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},nM=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>aN(t,l))}return e},rM=e=>typeof e=="string"?e.replace(" ","T"):e,oN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class xv{constructor(t,n,r={},i=iN){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ub;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ub||(Ub={}));class qh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=qh.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=qh.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(s,(f,p)=>{a[f]||(c[f]=p)}),this.map(a,(f,p)=>{const m=s[f];if(m){const x=p.map(E=>E.presence_ref),g=m.map(E=>E.presence_ref),N=p.filter(E=>g.indexOf(E.presence_ref)<0),j=m.filter(E=>x.indexOf(E.presence_ref)<0);N.length>0&&(l[f]=N),j.length>0&&(c[f]=j)}else l[f]=p}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var f;const p=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(c),p.length>0){const m=t[l].map(g=>g.presence_ref),x=p.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...x)}r(l,p,c)}),this.map(a,(l,c)=>{let f=t[l];if(!f)return;const p=c.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),t[l]=f,i(l,f,c),f.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qb||(qb={}));var Wb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wb||(Wb={}));var Hb;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Hb||(Hb={}));class L5{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xv(this,Ma.join,this.params,this.timeout),this.rejoinTimer=new sN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ma.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new qh(this),this.broadcastEndpointURL=oN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},f={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const x=this.bindings.postgres_changes,g=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,N=[];for(let j=0;j<g;j++){const E=x[j],{filter:{event:b,schema:S,table:A,filter:O}}=E,K=p&&p[j];if(K&&K.event===b&&K.schema===S&&K.table===A&&K.filter===O)N.push(Object.assign(Object.assign({},E),{id:K.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ts.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ma.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new xv(this,Ma.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new xv(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:f,join:p}=Ma;if(r&&[l,c,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let x=this._onMessage(a,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var N,j,E;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((E=(j=g.filter)===null||j===void 0?void 0:j.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(g=>g.callback(x,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var N,j,E,b,S,A;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const O=g.id,K=(N=g.filter)===null||N===void 0?void 0:N.event;return O&&((j=n.ids)===null||j===void 0?void 0:j.includes(O))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const O=(S=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return O==="*"||O===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof x=="object"&&"ids"in x){const N=x.data,{schema:j,table:E,commit_timestamp:b,type:S,errors:A}=N;x=Object.assign(Object.assign({},{schema:j,table:E,commit_timestamp:b,eventType:S,new:{},old:{},errors:A}),this._getPayloadRecords(N))}g.callback(x,r)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&L5.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ma.close,{},t)}_onError(t){this._on(Ma.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=zb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=zb(t.columns,t.old_record)),n}}const iM=()=>{},sM=typeof WebSocket<"u",aM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class oM{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=YT,this.params={},this.timeout=iN,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=iM,this.conn=null,this.sendBuffer=[],this.serializer=new XT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>ol(async()=>{const{default:c}=await Promise.resolve().then(()=>Df);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${X2.websocket}`,this.httpEndpoint=oN(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(sM){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new lM(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ol(async()=>{const{default:t}=await import("./browser-_JALKFtr.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case uf.connecting:return ju.Connecting;case uf.open:return ju.Open;case uf.closing:return ju.Closing;default:return ju.Closed}}isConnected(){return this.connectionState()===ju.Open}channel(t,n={config:{}}){const r=new L5(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Ma.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:KT}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ma.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(JT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([aM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class lM{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=uf.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class P5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class cM extends P5{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Z2 extends P5{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var uM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const lN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Df);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},dM=()=>uM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ol(()=>Promise.resolve().then(()=>Df),void 0)).Response:Response}),ey=e=>{if(Array.isArray(e))return e.map(n=>ey(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=ey(r)}),t};var Yu=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const wv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fM=(e,t,n)=>Yu(void 0,void 0,void 0,function*(){const r=yield dM();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new cM(wv(i),e.status||500))}).catch(i=>{t(new Z2(wv(i),i))}):t(new Z2(wv(e),e))}),hM=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Dp(e,t,n,r,i,s){return Yu(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,hM(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>fM(c,l,r))})})}function X0(e,t,n,r){return Yu(this,void 0,void 0,function*(){return Dp(e,"GET",t,n,r)})}function oc(e,t,n,r,i){return Yu(this,void 0,void 0,function*(){return Dp(e,"POST",t,r,i,n)})}function pM(e,t,n,r,i){return Yu(this,void 0,void 0,function*(){return Dp(e,"PUT",t,r,i,n)})}function mM(e,t,n,r){return Yu(this,void 0,void 0,function*(){return Dp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cN(e,t,n,r,i){return Yu(this,void 0,void 0,function*(){return Dp(e,"DELETE",t,r,i,n)})}var as=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const gM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vM{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=lN(i)}uploadOrUpdate(t,n,r,i){return as(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Vb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:s,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),x=yield m.json();return m.ok?{data:{path:f,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(s){if(Kr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return as(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Vb.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:p}),x=yield m.json();return m.ok?{data:{path:s,fullPath:x.Key},error:null}:{data:null,error:x}}catch(c){if(Kr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return as(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield oc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new P5("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}update(t,n,r){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return as(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return as(this,void 0,void 0,function*(){try{return{data:{path:(yield oc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return as(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield oc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return as(this,void 0,void 0,function*(){try{const i=yield oc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}download(t,n){return as(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield X0(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Kr(l))return{data:null,error:l};throw l}})}info(t){return as(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield X0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ey(r),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}exists(t){return as(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield mM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kr(r)&&r instanceof Z2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(t){return as(this,void 0,void 0,function*(){try{return{data:yield cN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}list(t,n,r){return as(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},gM),n),{prefix:t||""});return{data:yield oc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const yM="2.7.1",xM={"X-Client-Info":`storage-js/${yM}`};var Od=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class wM{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},xM),n),this.fetch=lN(r)}listBuckets(){return Od(this,void 0,void 0,function*(){try{return{data:yield X0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Kr(t))return{data:null,error:t};throw t}})}getBucket(t){return Od(this,void 0,void 0,function*(){try{return{data:yield X0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Od(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Od(this,void 0,void 0,function*(){try{return{data:yield pM(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Od(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Od(this,void 0,void 0,function*(){try{return{data:yield cN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}}class bM extends wM{constructor(t,n={},r){super(t,n,r)}from(t){return new vM(this.url,this.headers,t,this.fetch)}}const _M="2.46.1";let Th="";typeof Deno<"u"?Th="deno":typeof document<"u"?Th="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Th="react-native":Th="node";const SM={"X-Client-Info":`supabase-js-${Th}/${_M}`},NM={headers:SM},jM={schema:"public"},kM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},EM={};var CM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const AM=e=>{let t;return e?t=e:typeof fetch>"u"?t=GS:t=fetch,(...n)=>t(...n)},LM=()=>typeof Headers>"u"?YS:Headers,PM=(e,t,n)=>{const r=AM(n),i=LM();return(s,a)=>CM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var TM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};function MM(e){return e.replace(/\/$/,"")}function DM(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:l,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},f),s),accessToken:()=>TM(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const uN="2.65.1",IM="http://localhost:9999",OM="supabase.auth.token",RM={"X-Client-Info":`gotrue-js/${uN}`},Gb=10,ty="X-Supabase-Api-Version",dN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function FM(e){return Math.round(Date.now()/1e3)+e}function $M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Aa=()=>typeof document<"u",gu={tested:!1,writable:!1},Wh=()=>{if(!Aa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gu.tested)return gu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gu.tested=!0,gu.writable=!0}catch{gu.tested=!0,gu.writable=!1}return gu.writable};function bv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const fN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ol(async()=>{const{default:r}=await Promise.resolve().then(()=>Df);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},BM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hN=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},qm=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wm=async(e,t)=>{await e.removeItem(t)};function zM(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,l,c,f,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)a=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),f=t.indexOf(e.charAt(p++)),r=a<<2|l>>4,i=(l&15)<<4|c>>2,s=(c&3)<<6|f,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),f!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Fg{constructor(){this.promise=new Fg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Fg.promiseConstructor=Promise;function Yb(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(zM(r))}async function UM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qM(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function WM(e){return("0"+e.toString(16)).substr(-2)}function HM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,WM).join("")}async function VM(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function GM(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function YM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await VM(e);return GM(n)}async function Rd(e,t,n=!1){const r=HM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await hN(e,`${t}-code-verifier`,i);const s=await YM(r);return[s,r===s?"plain":"s256"]}const KM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JM(e){const t=e.headers.get(ty);if(!t||!t.match(KM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class T5 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function en(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class XM extends T5{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function QM(e){return en(e)&&e.name==="AuthApiError"}class pN extends T5{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ku extends T5{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class rc extends Ku{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZM(e){return en(e)&&e.name==="AuthSessionMissingError"}class _v extends Ku{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hm extends Ku{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Vm extends Ku{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kb extends Ku{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ny extends Ku{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Sv(e){return en(e)&&e.name==="AuthRetryableFetchError"}class Jb extends Ku{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var eD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const bu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tD=[502,503,504];async function Xb(e){var t;if(!BM(e))throw new ny(bu(e),0);if(tD.includes(e.status))throw new ny(bu(e),e.status);let n;try{n=await e.json()}catch(s){throw new pN(bu(s),s)}let r;const i=JM(e);if(i&&i.getTime()>=dN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Jb(bu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new rc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Jb(bu(n),e.status,n.weak_password.reasons);throw new XM(bu(n),e.status||500,r)}const nD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function cn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[ty]||(s[ty]=dN["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await rD(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function rD(e,t,n,r,i,s){const a=nD(t,r,i,s);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new ny(bu(c),0)}if(l.ok||await Xb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Xb(c)}}function ic(e){var t;let n=null;oD(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=FM(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Qb(e){const t=ic(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function iD(e){return{data:e,error:null}}function sD(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=eD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function aD(e){return e}function oD(e){return e.access_token&&e.refresh_token&&e.expires_in}var lD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class cD{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=fN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await cn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await cn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=lD(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await cn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:sD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(en(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fc})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,l,c;try{const f={nextPage:null,lastPage:0,total:0},p=await cn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:aD});if(p.error)throw p.error;const m=await p.json(),x=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const j=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);f[`${E}Page`]=j}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(en(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){try{return await cn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fc})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await cn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await cn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(en(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}}}const uD={getItem:e=>Wh()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Wh()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Wh()&&globalThis.localStorage.removeItem(e)}};function Zb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function dD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fd={debug:!!(globalThis&&Wh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class fD extends mN{}async function hD(e,t,n){Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new fD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Fd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}dD();const pD={url:IM,storageKey:OM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},_h=30*1e3,e_=3;async function t_(e,t,n){return await n()}class yp{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yp.nextInstanceID,yp.nextInstanceID+=1,this.instanceID>0&&Aa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},pD),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=fN(i.fetch),this.lock=i.lock||t_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Aa()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=hD:this.lock=t_,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Wh()?this.storage=uD:(this.memoryStorage={},this.storage=Zb(this.memoryStorage)):(this.memoryStorage={},this.storage=Zb(this.memoryStorage)),Aa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Aa()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return en(t)?{error:t}:{error:new pN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ic}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:p,password:m,options:x}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await Rd(this.storage,this.storageKey)),s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:m,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:g,code_challenge_method:N},xform:ic})}else if("phone"in t){const{phone:p,password:m,options:x}=t;s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(i=x==null?void 0:x.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ic})}else throw new Hm("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:l}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qb})}else if("phone"in t){const{phone:s,password:a,options:l}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qb})}else throw new Hm("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _v}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await qm(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ic});if(await Wm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new _v}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(en(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,l=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ic}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _v}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:l,options:c}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Rd(this.storage,this.storageKey));const{error:m}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:f,error:p}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Hm("You must provide either an email or phone number.")}catch(l){if(en(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await cn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ic});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(en(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Rd(this.storage,this.storageKey)),await cn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:iD})}catch(s){if(en(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new rc;const{error:i}=await cn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:l}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Hm("You must provide either an email or phone number and a type")}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await qm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,p))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fc}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rc}:await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:fc})})}catch(n){if(en(n))return ZM(n)&&(await this._removeSession(),await Wm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new rc;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Rd(this.storage,this.storageKey));const{data:f,error:p}=await cn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:fc});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Yb(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Yb(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(en(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new rc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!Aa())throw new Vm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Vm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Kb("Not a valid PKCE flow url.");const n=bv(window.location.href);if(t){if(!n.code)throw new Kb("No code detected.");const{data:S,error:A}=await this._exchangeCodeForSession(n.code);if(A)throw A;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Vm(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:f}=n;if(!s||!l||!a||!f)throw new Vm("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let x=p+m;c&&(x=parseInt(c));const g=x-p;g*1e3<=_h&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const N=x-m;p-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,x,p):p-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,x,p);const{data:j,error:E}=await this._getUser(s);if(E)throw E;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:x,refresh_token:a,token_type:f,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(en(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=bv(window.location.href);return!!(Aa()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=bv(window.location.href),n=await qm(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(QM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Wm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=$M(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Rd(this.storage,this.storageKey,!0));try{return await cn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(en(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,c,f,p;const{data:m,error:x}=s;if(x)throw x;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await cn(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Aa()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(en(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await cn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qM(async i=>(i>0&&await UM(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await cn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ic})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Sv(s)&&Date.now()+a-r<_h})}catch(r){if(this._debug(n,"error",r),en(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Aa()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await qm(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+Gb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Gb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Sv(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new rc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Fg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new rc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),en(s)){const a={session:null,error:s};return Sv(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await hN(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Wm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Aa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_h);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/_h);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${_h}ms, refresh threshold is ${e_} ticks`),i<=e_&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof mN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Aa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Rd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await cn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:f}=await cn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:l}=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(en(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(en(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}yp.nextInstanceID=0;const mD=yp;class gD extends mD{constructor(t){super(t)}}var vD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class yD{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=MM(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:jM,realtime:EM,auth:Object.assign(Object.assign({},kM),{storageKey:c}),global:NM},p=DM(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=PM(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new VT(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new _T(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new bM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return vD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:l,debug:c},f,p){var m;const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gD({url:this.authUrl,headers:Object.assign(Object.assign({},x),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:l,debug:c,fetch:p,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(t){return new oM(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xD=(e,t,n)=>new yD(e,t,n),wD="https://vrzgwnchqdxwgennshmu.supabase.co",bD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",Xe=xD(wD,bD,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:window.location.origin}}),_D={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",VITE_SUPABASE_URL:"https://vrzgwnchqdxwgennshmu.supabase.co"},n_=e=>{let t;const n=new Set,r=(p,m)=>{const x=typeof p=="function"?p(t):p;if(!Object.is(x,t)){const g=t;t=m??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(N=>N(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(_D?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,c);return c},SD=e=>e?n_(e):n_;var gN={exports:{}},vN={},yN={exports:{}},xN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=k;function ND(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jD=typeof Object.is=="function"?Object.is:ND,kD=kf.useState,ED=kf.useEffect,CD=kf.useLayoutEffect,AD=kf.useDebugValue;function LD(e,t){var n=t(),r=kD({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return CD(function(){i.value=n,i.getSnapshot=t,Nv(i)&&s({inst:i})},[e,n,t]),ED(function(){return Nv(i)&&s({inst:i}),e(function(){Nv(i)&&s({inst:i})})},[e]),AD(n),n}function Nv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jD(e,n)}catch{return!0}}function PD(e,t){return t()}var TD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?PD:LD;xN.useSyncExternalStore=kf.useSyncExternalStore!==void 0?kf.useSyncExternalStore:TD;yN.exports=xN;var MD=yN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g=k,DD=MD;function ID(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OD=typeof Object.is=="function"?Object.is:ID,RD=DD.useSyncExternalStore,FD=$g.useRef,$D=$g.useEffect,BD=$g.useMemo,zD=$g.useDebugValue;vN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=FD(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=BD(function(){function c(g){if(!f){if(f=!0,p=g,g=r(g),i!==void 0&&a.hasValue){var N=a.value;if(i(N,g))return m=N}return m=g}if(N=m,OD(p,g))return N;var j=r(g);return i!==void 0&&i(N,j)?N:(p=g,m=j)}var f=!1,p,m,x=n===void 0?null:n;return[function(){return c(t())},x===null?void 0:function(){return c(x())}]},[t,n,r,i]);var l=RD(e,s[0],s[1]);return $D(function(){a.hasValue=!0,a.value=l},[l]),zD(l),l};gN.exports=vN;var UD=gN.exports;const qD=x3(UD),wN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",VITE_SUPABASE_URL:"https://vrzgwnchqdxwgennshmu.supabase.co"},{useDebugValue:WD}=yt,{useSyncExternalStoreWithSelector:HD}=qD;let r_=!1;const VD=e=>e;function GD(e,t=VD,n){(wN?"production":void 0)!=="production"&&n&&!r_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),r_=!0);const r=HD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return WD(r),r}const i_=e=>{(wN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?SD(e):e,n=(r,i)=>GD(t,r,i);return Object.assign(n,t),n},YD=e=>e?i_(e):i_,Zr=YD(e=>({user:null,session:null,loading:!0,setUser:t=>{e({user:t})},setSession:t=>{e({session:t})},signOut:async()=>{try{await Xe.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Bn=(e,t)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...f},p)=>k.createElement("svg",{ref:p,...KD,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${JD(e)}`,l].join(" "),...f},[...t.map(([m,x])=>k.createElement(m,x)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Bn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Bn("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Bn("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Bn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Bn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Bn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Bn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Bn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Bn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=Bn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=Bn("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Bn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Bn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Bn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=Bn("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Bn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Bn("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Bn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Bn("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=Bn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Bn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=Bn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=Bn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Bn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Bn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Bn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Bn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function nI(){const[e,t]=k.useState([]),[n,r]=k.useState(!1),i=da(),{user:s}=Zr(),[a,l]=k.useState(null);k.useEffect(()=>{if(s)return c(),f(),()=>{a&&a.unsubscribe()}},[s]);const c=async()=>{const{data:m,error:x}=await Xe.from("notifications").select("*").eq("user_id",s==null?void 0:s.id).eq("read",!1).order("created_at",{ascending:!1});if(x){console.error("Error fetching notifications:",x);return}t(m||[])},f=async()=>{try{a&&await a.unsubscribe();const m=Xe.channel(`notifications:${s==null?void 0:s.id}`,{config:{broadcast:{self:!0}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},x=>{const g=x.new;t(N=>[g,...N]),Le.custom(N=>u.jsxs("div",{className:`${N.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[u.jsx(s_,{className:"h-6 w-6 text-indigo-500"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:g.title}),u.jsx("p",{className:"text-sm text-gray-500",children:g.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},x=>{t(g=>g.map(N=>N.id===x.new.id?x.new:N))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},x=>{t(g=>g.filter(N=>N.id!==x.old.id))}),await m.subscribe(),l(m)}catch(m){console.error("Error al configurar suscripcin en tiempo real:",m)}},p=async(m,x)=>{try{const{error:g}=await Xe.rpc("handle_group_invitation",{p_group_member_id:m.data.group_member_id,p_accept:x});if(g)throw g;await Xe.from("notifications").update({read:!0}).eq("id",m.id),t(N=>N.filter(j=>j.id!==m.id)),Le.success(x?"Invitacin aceptada":"Invitacin rechazada"),x&&i(`/group/${m.data.group_id}`)}catch(g){Le.error(g.message)}};return u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[u.jsx(s_,{className:"w-6 h-6"}),e.length>0&&u.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&u.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:u.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?u.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(m=>u.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:m.title}),u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.message}),m.type==="group_invitation"&&u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>p(m,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),u.jsx("button",{onClick:()=>p(m,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},m.id))})})]})}function rI(){const{user:e,signOut:t}=Zr(),n=da(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return u.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:u.jsx("div",{className:"container mx-auto px-4",children:u.jsxs("div",{className:"flex items-center justify-between h-16",children:[u.jsxs(Ac,{to:"/",className:"flex items-center space-x-2 min-w-0",children:[u.jsx(tI,{className:"h-6 w-6 sm:h-8 sm:w-8 flex-shrink-0"}),u.jsx("span",{className:"font-bold text-lg sm:text-xl truncate",children:"Band Manager"})]}),u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0",children:[e&&u.jsx(nI,{}),e?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-xs sm:text-sm hidden md:block truncate max-w-32 lg:max-w-none",children:e.email}),u.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[u.jsx(iy,{className:"h-4 w-4 sm:h-5 sm:w-5"}),u.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]}):u.jsxs("div",{className:"flex space-x-2 sm:space-x-4",children:[u.jsx(Ac,{to:"/login",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Login"}),u.jsx(Ac,{to:"/register",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Register"}),!1]})]})]})})})}function Xn({label:e,error:t,className:n="",...r}){return u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),u.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&u.jsx("p",{className:"text-sm text-red-600",children:t})]})}function vt({children:e,loading:t,variant:n="primary",fullWidth:r,size:i="md",className:s="",...a}){const l="flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={sm:"px-2 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},f={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return u.jsxs("button",{className:`${l} ${c[i]} ${f[n]} ${r?"w-full":""} ${s}`,disabled:t,...a,children:[t&&u.jsx(sa,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function iI(){var x;const[e,t]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(!1),a=da(),c=(x=ua().state)==null?void 0:x.returnTo,{user:f,setUser:p}=Zr();k.useEffect(()=>{if(f){let g=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){const N=new URL(c,window.location.origin),j=N.searchParams.get("code"),E=N.searchParams.get("state"),b=N.searchParams.get("error");j&&E?g=`/?code=${j}&state=${E}`:b?g=`/?error=${b}`:g=N.pathname}a(g,{replace:!0})}},[f,c,a]);const m=async g=>{g.preventDefault(),s(!0);try{const{data:N,error:j}=await Xe.auth.signInWithPassword({email:e,password:n});if(j)throw j;p(N.user),Le.success("Successfully logged in!");let E=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){const b=new URL(c,window.location.origin),S=b.searchParams.get("code"),A=b.searchParams.get("state"),O=b.searchParams.get("error");S&&A?E=`/?code=${S}&state=${A}`:O?E=`/?error=${O}`:E=b.pathname}a(E,{replace:!0})}catch(N){Le.error(N.message||"Failed to login")}finally{s(!1)}};return f?null:u.jsx("div",{className:"max-w-md mx-auto mt-16",children:u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),u.jsxs("form",{onSubmit:m,className:"space-y-6",children:[u.jsx(Xn,{label:"Email",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"your@email.com"}),u.jsx(Xn,{label:"Password",type:"password",value:n,onChange:g=>r(g.target.value),required:!0,placeholder:""}),u.jsx(vt,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),u.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:u.jsx(Ac,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"Olvidaste tu contrasea?"})}),u.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",u.jsx(Ac,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function sI(){const[e]=qS(),t=e.get("email");e.get("token");const[n,r]=k.useState(t||""),[i,s]=k.useState(""),[a,l]=k.useState(""),[c,f]=k.useState(!1),p=da(),{user:m}=Zr();k.useEffect(()=>{m&&p("/")},[m,p]);const x=async g=>{g.preventDefault(),f(!0);try{const{data:N,error:j}=await Xe.auth.signUp({email:n,password:i,options:{data:{name:a,role:"user"}}});if(j)throw j;if(N.user){const{data:E,error:b}=await Xe.rpc("create_new_user",{user_id:N.user.id,user_email:n,user_name:a,user_role:"user"});if(b)throw b;Le.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(N){console.error("Registration error:",N),N.message.includes("User already registered")?Le.error("This email is already registered. Please try logging in instead."):N.message.includes("rate limit")?Le.error("Too many registration attempts. Please try again in a few minutes."):Le.error("Registration failed. Please try again.")}finally{f(!1)}};return m?null:u.jsx("div",{className:"max-w-md mx-auto mt-16",children:u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),u.jsxs("form",{onSubmit:x,className:"space-y-6",children:[u.jsx(Xn,{label:"Name",type:"text",value:a,onChange:g=>l(g.target.value),required:!0,placeholder:"John Doe"}),u.jsx(Xn,{label:"Email",type:"email",value:n,onChange:g=>r(g.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),u.jsx(Xn,{label:"Password",type:"password",value:i,onChange:g=>s(g.target.value),required:!0,placeholder:"",minLength:6}),u.jsx(vt,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),u.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",u.jsx(Ac,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var aI=Object.defineProperty,oI=(e,t,n)=>t in e?aI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kv=(e,t,n)=>(oI(e,typeof t!="symbol"?t+"":t,n),n);let lI=class{constructor(){kv(this,"current",this.detect()),kv(this,"handoffState","pending"),kv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ou=new lI;function zg(e){return Ou.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Ug(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function zc(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ug(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=zc();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function D5(){let[e]=k.useState(zc);return k.useEffect(()=>()=>e.dispose(),[e]),e}let zi=(e,t)=>{Ou.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function Ju(e){let t=k.useRef(e);return zi(()=>{t.current=e},[e]),t}let pr=function(e){let t=Ju(e);return yt.useCallback((...n)=>t.current(...n),[t])},cI=k.createContext(void 0);function uI(){return k.useContext(cI)}function sy(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Tc(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Tc),r}var Z0=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Z0||{}),yc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(yc||{});function fa(){let e=fI();return k.useCallback(t=>dI({mergeRefs:e,...t}),[e])}function dI({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??hI;let c=NN(t,e);if(s)return Gm(c,n,r,a,l);let f=i??0;if(f&2){let{static:p=!1,...m}=c;if(p)return Gm(m,n,r,a,l)}if(f&1){let{unmount:p=!0,...m}=c;return Tc(p?0:1,{0(){return null},1(){return Gm({...m,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Gm(c,n,r,a,l)}function Gm(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=Ev(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let x=!1,g=[];for(let[N,j]of Object.entries(t))typeof j=="boolean"&&(x=!0),j===!0&&g.push(N.replace(/([A-Z])/g,E=>`-${E.toLowerCase()}`));if(x){m["data-headlessui-state"]=g.join(" ");for(let N of g)m[`data-${N}`]=""}}if(s===k.Fragment&&(Object.keys(_u(c)).length>0||Object.keys(_u(m)).length>0))if(!k.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(_u(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(_u(c)).concat(Object.keys(_u(m))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=p.props,g=x==null?void 0:x.className,N=typeof g=="function"?(...b)=>sy(g(...b),c.className):sy(g,c.className),j=N?{className:N}:{},E=NN(p.props,_u(Ev(c,["ref"])));for(let b in m)b in E&&delete m[b];return k.cloneElement(p,Object.assign({},E,m,f,{ref:i(pI(p),f.ref)},j))}return k.createElement(s,Object.assign({},Ev(c,["ref"]),s!==k.Fragment&&f,s!==k.Fragment&&m),p)}function fI(){let e=k.useRef([]),t=k.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function hI(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function NN(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function ps(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function _u(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ev(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function pI(e){return yt.version.split(".")[0]>="19"?e.props.ref:e.ref}let mI="span";var eg=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(eg||{});function gI(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return fa()({ourProps:s,theirProps:i,slot:{},defaultTag:mI,name:"Hidden"})}let ay=ps(gI),jN=Symbol();function vI(e,t=!0){return Object.assign(e,{[jN]:t})}function _o(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=pr(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[jN]))?void 0:n}let I5=k.createContext(null);I5.displayName="DescriptionContext";function kN(){let e=k.useContext(I5);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,kN),t}return e}function yI(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let r=pr(s=>(t(a=>[...a,s]),()=>t(a=>{let l=a.slice(),c=l.indexOf(s);return c!==-1&&l.splice(c,1),l}))),i=k.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return yt.createElement(I5.Provider,{value:i},n.children)},[t])]}let xI="p";function wI(e,t){let n=k.useId(),r=uI(),{id:i=`headlessui-description-${n}`,...s}=e,a=kN(),l=_o(t);zi(()=>a.register(i),[i,a.register]);let c=r||!1,f=k.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),p={ref:l,...a.props,id:i};return fa()({ourProps:p,theirProps:s,slot:f,defaultTag:xI,name:a.name||"Description"})}let bI=ps(wI),_I=Object.assign(bI,{});var EN=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(EN||{});let SI=k.createContext(()=>{});function NI({value:e,children:t}){return yt.createElement(SI.Provider,{value:e},t)}let jI=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function CN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=t[i].call(n,...s);a&&(n=a,r.forEach(l=>l()))}}}function AN(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let kI=new jI(()=>CN(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Of(e,t){let n=kI.get(t),r=k.useId(),i=AN(n);if(zi(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let oy=new Map,Vh=new Map;function u_(e){var t;let n=(t=Vh.get(e))!=null?t:0;return Vh.set(e,n+1),n!==0?()=>d_(e):(oy.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>d_(e))}function d_(e){var t;let n=(t=Vh.get(e))!=null?t:1;if(n===1?Vh.delete(e):Vh.set(e,n-1),n!==1)return;let r=oy.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,oy.delete(e))}function EI(e,{allowed:t,disallowed:n}={}){let r=Of(e,"inert-others");zi(()=>{var i,s;if(!r)return;let a=zc();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(u_(c));let l=(s=t==null?void 0:t())!=null?s:[];for(let c of l){if(!c)continue;let f=zg(c);if(!f)continue;let p=c.parentElement;for(;p&&p!==f.body;){for(let m of p.children)l.some(x=>m.contains(x))||a.add(u_(m));p=p.parentElement}}return a.dispose},[r,t,n])}function CI(e,t,n){let r=Ju(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});k.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let s=zc();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[t,r,e])}let tg=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),AI=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Xo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Xo||{}),ly=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ly||{}),LI=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(LI||{});function PI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(tg)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function TI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(AI)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var LN=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(LN||{});function MI(e,t=0){var n;return e===((n=zg(e))==null?void 0:n.body)?!1:Tc(t,{0(){return e.matches(tg)},1(){let r=e;for(;r!==null;){if(r.matches(tg))return!0;r=r.parentElement}return!1}})}var DI=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(DI||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function tl(e){e==null||e.focus({preventScroll:!0})}let II=["textarea","input"].join(",");function OI(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,II))!=null?n:!1}function RI(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Gh(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?RI(e):e:t&64?TI(e):PI(e);i.length>0&&a.length>1&&(a=a.filter(g=>!i.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===g:N===g))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,m=a.length,x;do{if(p>=m||p+m<=0)return 0;let g=c+p;if(t&16)g=(g+m)%m;else{if(g<0)return 3;if(g>=m)return 1}x=a[g],x==null||x.focus(f),p+=l}while(x!==s.activeElement);return t&6&&OI(x)&&x.select(),2}function PN(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function FI(){return/Android/gi.test(window.navigator.userAgent)}function $I(){return PN()||FI()}function Sh(e,t,n,r){let i=Ju(n);k.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function TN(e,t,n,r){let i=Ju(n);k.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const f_=30;function BI(e,t,n){let r=Of(e,"outside-click"),i=Ju(n),s=k.useCallback(function(c,f){if(c.defaultPrevented)return;let p=f(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let m=function x(g){return typeof g=="function"?x(g()):Array.isArray(g)||g instanceof Set?g:[g]}(t);for(let x of m)if(x!==null&&(x.contains(p)||c.composed&&c.composedPath().includes(x)))return;return!MI(p,LN.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),a=k.useRef(null);Sh(r,"pointerdown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),Sh(r,"mousedown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),Sh(r,"click",c=>{$I()||a.current&&(s(c,()=>a.current),a.current=null)},!0);let l=k.useRef({x:0,y:0});Sh(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),Sh(r,"touchend",c=>{let f={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=f_||Math.abs(f.y-l.current.y)>=f_))return s(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),TN(r,"blur",c=>s(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ip(...e){return k.useMemo(()=>zg(...e),[...e])}function MN(e,t,n,r){let i=Ju(n);k.useEffect(()=>{e=e??window;function s(a){i.current(a)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function zI(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function UI(){return PN()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=zc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),p=e.querySelector(f);p&&!r(p)&&(a=p)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function qI(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function WI(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Tu=CN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:zc(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:WI(n)},i=[UI(),zI(),qI()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Tu.subscribe(()=>{let e=Tu.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Tu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Tu.dispatch("TEARDOWN",n)}});function HI(e,t,n=()=>({containers:[]})){let r=AN(Tu),i=t?r.get(t):void 0,s=i?i.count>0:!1;return zi(()=>{if(!(!t||!e))return Tu.dispatch("PUSH",t,n),()=>Tu.dispatch("POP",t,n)},[e,t]),s}function VI(e,t,n=()=>[document.body]){let r=Of(e,"scroll-lock");HI(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function GI(e=0){let[t,n]=k.useState(e),r=k.useCallback(c=>n(c),[t]),i=k.useCallback(c=>n(f=>f|c),[t]),s=k.useCallback(c=>(t&c)===c,[t]),a=k.useCallback(c=>n(f=>f&~c),[n]),l=k.useCallback(c=>n(f=>f^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:l}}var YI={},h_,p_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((h_=process==null?void 0:YI)==null?void 0:h_.NODE_ENV)==="test"&&typeof((p_=Element==null?void 0:Element.prototype)==null?void 0:p_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var KI=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(KI||{});function JI(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function XI(e,t,n,r){let[i,s]=k.useState(n),{hasFlag:a,addFlag:l,removeFlag:c}=GI(e&&i?3:0),f=k.useRef(!1),p=k.useRef(!1),m=D5();return zi(()=>{var x;if(e){if(n&&s(!0),!t){n&&l(3);return}return(x=r==null?void 0:r.start)==null||x.call(r,n),QI(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){p.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var g;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,c(7),n||s(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,m]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function QI(e,{prepare:t,run:n,done:r,inFlight:i}){let s=zc();return eO(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(ZI(e,r))})}),s.dispose}function ZI(e,t){var n,r;let i=zc();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{s||t()}),i.dispose)}function eO(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function O5(e,t){let n=k.useRef([]),r=pr(e);k.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}let qg=k.createContext(null);qg.displayName="OpenClosedContext";var Ia=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ia||{});function Wg(){return k.useContext(qg)}function tO({value:e,children:t}){return yt.createElement(qg.Provider,{value:e},t)}function nO({children:e}){return yt.createElement(qg.Provider,{value:null},e)}function rO(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let hc=[];rO(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||hc[0]===t.target)return;let n=t.target;n=n.closest(tg),hc.unshift(n??t.target),hc=hc.filter(r=>r!=null&&r.isConnected),hc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function DN(e){let t=pr(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ug(()=>{n.current&&t()})}),[t])}function iO(){let e=typeof document>"u";return"useSyncExternalStore"in Jv?(t=>t.useSyncExternalStore)(Jv)(()=>()=>{},()=>!1,()=>!e):!1}function Op(){let e=iO(),[t,n]=k.useState(Ou.isHandoffComplete);return t&&Ou.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>Ou.handoff(),[]),e?!1:t}let IN=k.createContext(!1);function sO(){return k.useContext(IN)}function m_(e){return yt.createElement(IN.Provider,{value:e.force},e.children)}function aO(e){let t=sO(),n=k.useContext(RN),r=Ip(e),[i,s]=k.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(Ou.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return k.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),k.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),i}let ON=k.Fragment,oO=ps(function(e,t){let n=e,r=k.useRef(null),i=_o(vI(m=>{r.current=m}),t),s=Ip(r),a=aO(r),[l]=k.useState(()=>{var m;return Ou.isServer?null:(m=s==null?void 0:s.createElement("div"))!=null?m:null}),c=k.useContext(cy),f=Op();zi(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),zi(()=>{if(l&&c)return c.register(l)},[c,l]),DN(()=>{var m;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let p=fa();return f?!a||!l?null:Pu.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:ON,name:"Portal"}),l):null});function lO(e,t){let n=_o(t),{enabled:r=!0,...i}=e,s=fa();return r?yt.createElement(oO,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:ON,name:"Portal"})}let cO=k.Fragment,RN=k.createContext(null);function uO(e,t){let{target:n,...r}=e,i={ref:_o(t)},s=fa();return yt.createElement(RN.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:cO,name:"Popover.Group"}))}let cy=k.createContext(null);function dO(){let e=k.useContext(cy),t=k.useRef([]),n=pr(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=pr(s=>{let a=t.current.indexOf(s);a!==-1&&t.current.splice(a,1),e&&e.unregister(s)}),i=k.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,k.useMemo(()=>function({children:s}){return yt.createElement(cy.Provider,{value:i},s)},[i])]}let fO=ps(lO),FN=ps(uO),hO=Object.assign(fO,{Group:FN});function pO(e,t=typeof document<"u"?document.defaultView:null,n){let r=Of(e,"escape");MN(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===EN.Escape&&n(i))})}function mO(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=k.useState((e=t==null?void 0:t.matches)!=null?e:!1);return zi(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function gO({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Ip(n),i=pr(()=>{var s,a;let l=[];for(let c of e)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||l.some(f=>c.contains(f))||l.push(c));return l});return{resolveContainers:i,contains:pr(s=>i().some(a=>a.contains(s)))}}let $N=k.createContext(null);function g_({children:e,node:t}){let[n,r]=k.useState(null),i=BN(t??n);return yt.createElement($N.Provider,{value:i},e,i===null&&yt.createElement(ay,{features:eg.Hidden,ref:s=>{var a,l;if(s){for(let c of(l=(a=zg(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(s)){r(c);break}}}}))}function BN(e=null){var t;return(t=k.useContext($N))!=null?t:e}function R5(){let e=k.useRef(!1);return zi(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Mh=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Mh||{});function vO(){let e=k.useRef(0);return TN(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function zN(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let yO="div";var ku=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ku||{});function xO(e,t){let n=k.useRef(null),r=_o(n,t),{initialFocus:i,initialFocusFallback:s,containers:a,features:l=15,...c}=e;Op()||(l=0);let f=Ip(n);SO(l,{ownerDocument:f});let p=NO(l,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:s});jO(l,{ownerDocument:f,container:n,containers:a,previousActiveElement:p});let m=vO(),x=pr(S=>{let A=n.current;A&&(O=>O())(()=>{Tc(m.current,{[Mh.Forwards]:()=>{Gh(A,Xo.First,{skipElements:[S.relatedTarget,s]})},[Mh.Backwards]:()=>{Gh(A,Xo.Last,{skipElements:[S.relatedTarget,s]})}})})}),g=Of(!!(l&2),"focus-trap#tab-lock"),N=D5(),j=k.useRef(!1),E={ref:r,onKeyDown(S){S.key=="Tab"&&(j.current=!0,N.requestAnimationFrame(()=>{j.current=!1}))},onBlur(S){if(!(l&4))return;let A=zN(a);n.current instanceof HTMLElement&&A.add(n.current);let O=S.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(UN(A,O)||(j.current?Gh(n.current,Tc(m.current,{[Mh.Forwards]:()=>Xo.Next,[Mh.Backwards]:()=>Xo.Previous})|Xo.WrapAround,{relativeTo:S.target}):S.target instanceof HTMLElement&&tl(S.target)))}},b=fa();return yt.createElement(yt.Fragment,null,g&&yt.createElement(ay,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:eg.Focusable}),b({ourProps:E,theirProps:c,defaultTag:yO,name:"FocusTrap"}),g&&yt.createElement(ay,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:eg.Focusable}))}let wO=ps(xO),bO=Object.assign(wO,{features:ku});function _O(e=!0){let t=k.useRef(hc.slice());return O5(([n],[r])=>{r===!0&&n===!1&&Ug(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=hc.slice())},[e,hc,t]),pr(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function SO(e,{ownerDocument:t}){let n=!!(e&8),r=_O(n);O5(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&tl(r())},[n]),DN(()=>{n&&tl(r())})}function NO(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=k.useRef(null),a=Of(!!(e&1),"focus-trap#initial-focus"),l=R5();return O5(()=>{if(e===0)return;if(!a){i!=null&&i.current&&tl(i.current);return}let c=n.current;c&&Ug(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){s.current=f;return}}else if(c.contains(f)){s.current=f;return}if(r!=null&&r.current)tl(r.current);else{if(e&16){if(Gh(c,Xo.First|Xo.AutoFocus)!==ly.Error)return}else if(Gh(c,Xo.First)!==ly.Error)return;if(i!=null&&i.current&&(tl(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,a,e]),s}function jO(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=R5(),a=!!(e&4);MN(t==null?void 0:t.defaultView,"focus",l=>{if(!a||!s.current)return;let c=zN(r);n.current instanceof HTMLElement&&c.add(n.current);let f=i.current;if(!f)return;let p=l.target;p&&p instanceof HTMLElement?UN(c,p)?(i.current=p,tl(p)):(l.preventDefault(),l.stopPropagation(),tl(f)):tl(i.current)},!0)}function UN(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function qN(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:HN)!==k.Fragment||yt.Children.count(e.children)===1}let Hg=k.createContext(null);Hg.displayName="TransitionContext";var kO=(e=>(e.Visible="visible",e.Hidden="hidden",e))(kO||{});function EO(){let e=k.useContext(Hg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function CO(){let e=k.useContext(Vg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Vg=k.createContext(null);Vg.displayName="NestingContext";function Gg(e){return"children"in e?Gg(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function WN(e,t){let n=Ju(e),r=k.useRef([]),i=R5(),s=D5(),a=pr((g,N=yc.Hidden)=>{let j=r.current.findIndex(({el:E})=>E===g);j!==-1&&(Tc(N,{[yc.Unmount](){r.current.splice(j,1)},[yc.Hidden](){r.current[j].state="hidden"}}),s.microTask(()=>{var E;!Gg(r)&&i.current&&((E=n.current)==null||E.call(n))}))}),l=pr(g=>{let N=r.current.find(({el:j})=>j===g);return N?N.state!=="visible"&&(N.state="visible"):r.current.push({el:g,state:"visible"}),()=>a(g,yc.Unmount)}),c=k.useRef([]),f=k.useRef(Promise.resolve()),p=k.useRef({enter:[],leave:[]}),m=pr((g,N,j)=>{c.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([E])=>E!==g)),t==null||t.chains.current[N].push([g,new Promise(E=>{c.current.push(E)})]),t==null||t.chains.current[N].push([g,new Promise(E=>{Promise.all(p.current[N].map(([b,S])=>S)).then(()=>E())})]),N==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>j(N)):j(N)}),x=pr((g,N,j)=>{Promise.all(p.current[N].splice(0).map(([E,b])=>b)).then(()=>{var E;(E=c.current.shift())==null||E()}).then(()=>j(N))});return k.useMemo(()=>({children:r,register:l,unregister:a,onStart:m,onStop:x,wait:f,chains:p}),[l,a,r,m,x,p,f])}let HN=k.Fragment,VN=Z0.RenderStrategy;function AO(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:f,enterFrom:p,enterTo:m,entered:x,leave:g,leaveFrom:N,leaveTo:j,...E}=e,[b,S]=k.useState(null),A=k.useRef(null),O=qN(e),K=_o(...O?[A,t,S]:t===null?[]:[t]),ie=(n=E.unmount)==null||n?yc.Unmount:yc.Hidden,{show:W,appear:$,initial:oe}=EO(),[le,R]=k.useState(W?"visible":"hidden"),q=CO(),{register:J,unregister:B}=q;zi(()=>J(A),[J,A]),zi(()=>{if(ie===yc.Hidden&&A.current){if(W&&le!=="visible"){R("visible");return}return Tc(le,{hidden:()=>B(A),visible:()=>J(A)})}},[le,A,J,B,W,ie]);let fe=Op();zi(()=>{if(O&&fe&&le==="visible"&&A.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[A,le,fe,O]);let he=oe&&!$,G=$&&W&&oe,P=k.useRef(!1),F=WN(()=>{P.current||(R("hidden"),B(A))},q),ne=pr(je=>{P.current=!0;let ke=je?"enter":"leave";F.onStart(A,ke,ee=>{ee==="enter"?s==null||s():ee==="leave"&&(l==null||l())})}),be=pr(je=>{let ke=je?"enter":"leave";P.current=!1,F.onStop(A,ke,ee=>{ee==="enter"?a==null||a():ee==="leave"&&(c==null||c())}),ke==="leave"&&!Gg(F)&&(R("hidden"),B(A))});k.useEffect(()=>{O&&i||(ne(W),be(W))},[W,O,i]);let T=!(!i||!O||!fe||he),[,H]=XI(T,b,W,{start:ne,end:be}),Z=_u({ref:K,className:((r=sy(E.className,G&&f,G&&p,H.enter&&f,H.enter&&H.closed&&p,H.enter&&!H.closed&&m,H.leave&&g,H.leave&&!H.closed&&N,H.leave&&H.closed&&j,!H.transition&&W&&x))==null?void 0:r.trim())||void 0,...JI(H)}),se=0;le==="visible"&&(se|=Ia.Open),le==="hidden"&&(se|=Ia.Closed),H.enter&&(se|=Ia.Opening),H.leave&&(se|=Ia.Closing);let ce=fa();return yt.createElement(Vg.Provider,{value:F},yt.createElement(tO,{value:se},ce({ourProps:Z,theirProps:E,defaultTag:HN,features:VN,visible:le==="visible",name:"Transition.Child"})))}function LO(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,a=k.useRef(null),l=qN(e),c=_o(...l?[a,t]:t===null?[]:[t]);Op();let f=Wg();if(n===void 0&&f!==null&&(n=(f&Ia.Open)===Ia.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=k.useState(n?"visible":"hidden"),x=WN(()=>{n||m("hidden")}),[g,N]=k.useState(!0),j=k.useRef([n]);zi(()=>{g!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),N(!1))},[j,n]);let E=k.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);zi(()=>{n?m("visible"):!Gg(x)&&a.current!==null&&m("hidden")},[n,x]);let b={unmount:i},S=pr(()=>{var K;g&&N(!1),(K=e.beforeEnter)==null||K.call(e)}),A=pr(()=>{var K;g&&N(!1),(K=e.beforeLeave)==null||K.call(e)}),O=fa();return yt.createElement(Vg.Provider,{value:x},yt.createElement(Hg.Provider,{value:E},O({ourProps:{...b,as:k.Fragment,children:yt.createElement(GN,{ref:c,...b,...s,beforeEnter:S,beforeLeave:A})},theirProps:{},defaultTag:k.Fragment,features:VN,visible:p==="visible",name:"Transition"})))}function PO(e,t){let n=k.useContext(Hg)!==null,r=Wg()!==null;return yt.createElement(yt.Fragment,null,!n&&r?yt.createElement(uy,{ref:t,...e}):yt.createElement(GN,{ref:t,...e}))}let uy=ps(LO),GN=ps(AO),F5=ps(PO),TO=Object.assign(uy,{Child:F5,Root:uy});var MO=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(MO||{}),DO=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(DO||{});let IO={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},$5=k.createContext(null);$5.displayName="DialogContext";function Yg(e){let t=k.useContext($5);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yg),n}return t}function OO(e,t){return Tc(t.type,IO,e,t)}let v_=ps(function(e,t){let n=k.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:p=!1,...m}=e,x=k.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(x.current||(x.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=Wg();i===void 0&&g!==null&&(i=(g&Ia.Open)===Ia.Open);let N=k.useRef(null),j=_o(N,t),E=Ip(N),b=i?0:1,[S,A]=k.useReducer(OO,{titleId:null,descriptionId:null,panelRef:k.createRef()}),O=pr(()=>s(!1)),K=pr(be=>A({type:0,id:be})),ie=Op()?b===0:!1,[W,$]=dO(),oe={get current(){var be;return(be=S.panelRef.current)!=null?be:N.current}},le=BN(),{resolveContainers:R}=gO({mainTreeNode:le,portals:W,defaultContainers:[oe]}),q=g!==null?(g&Ia.Closing)===Ia.Closing:!1;EI(f||q?!1:ie,{allowed:pr(()=>{var be,T;return[(T=(be=N.current)==null?void 0:be.closest("[data-headlessui-portal]"))!=null?T:null]}),disallowed:pr(()=>{var be;return[(be=le==null?void 0:le.closest("body > *:not(#headlessui-portal-root)"))!=null?be:null]})}),BI(ie,R,be=>{be.preventDefault(),O()}),pO(ie,E==null?void 0:E.defaultView,be=>{be.preventDefault(),be.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),O()}),VI(f||q?!1:ie,E,R),CI(ie,N,O);let[J,B]=yI(),fe=k.useMemo(()=>[{dialogState:b,close:O,setTitleId:K,unmount:p},S],[b,S,O,K,p]),he=k.useMemo(()=>({open:b===0}),[b]),G={ref:j,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:b===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":J,unmount:p},P=!mO(),F=ku.None;ie&&!f&&(F|=ku.RestoreFocus,F|=ku.TabLock,c&&(F|=ku.AutoFocus),P&&(F|=ku.InitialFocus));let ne=fa();return yt.createElement(nO,null,yt.createElement(m_,{force:!0},yt.createElement(hO,null,yt.createElement($5.Provider,{value:fe},yt.createElement(FN,{target:N},yt.createElement(m_,{force:!1},yt.createElement(B,{slot:he},yt.createElement($,null,yt.createElement(bO,{initialFocus:a,initialFocusFallback:N,containers:R,features:F},yt.createElement(NI,{value:O},ne({ourProps:G,theirProps:m,slot:he,defaultTag:RO,features:FO,visible:b===0,name:"Dialog"})))))))))))}),RO="div",FO=Z0.RenderStrategy|Z0.Static;function $O(e,t){let{transition:n=!1,open:r,...i}=e,s=Wg(),a=e.hasOwnProperty("open")||s!==null,l=e.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?yt.createElement(g_,null,yt.createElement(TO,{show:r,transition:n,unmount:i.unmount},yt.createElement(v_,{ref:t,...i}))):yt.createElement(g_,null,yt.createElement(v_,{ref:t,open:r,...i}))}let BO="div";function zO(e,t){let n=k.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:a,unmount:l},c]=Yg("Dialog.Panel"),f=_o(t,c.panelRef),p=k.useMemo(()=>({open:a===0}),[a]),m=pr(E=>{E.stopPropagation()}),x={ref:f,id:r,onClick:m},g=i?F5:k.Fragment,N=i?{unmount:l}:{},j=fa();return yt.createElement(g,{...N},j({ourProps:x,theirProps:s,slot:p,defaultTag:BO,name:"Dialog.Panel"}))}let UO="div";function qO(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=Yg("Dialog.Backdrop"),a=k.useMemo(()=>({open:i===0}),[i]),l={ref:t,"aria-hidden":!0},c=n?F5:k.Fragment,f=n?{unmount:s}:{},p=fa();return yt.createElement(c,{...f},p({ourProps:l,theirProps:r,slot:a,defaultTag:UO,name:"Dialog.Backdrop"}))}let WO="h2";function HO(e,t){let n=k.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:a}]=Yg("Dialog.Title"),l=_o(t);k.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=k.useMemo(()=>({open:s===0}),[s]),f={ref:l,id:r};return fa()({ourProps:f,theirProps:i,slot:c,defaultTag:WO,name:"Dialog.Title"})}let VO=ps($O),GO=ps(zO);ps(qO);let YO=ps(HO),Ru=Object.assign(VO,{Panel:GO,Title:YO,Description:_I});const KO=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,s]=k.useState(""),[a,l]=k.useState(!1);k.useState([]);const c=async f=>{if(f.preventDefault(),!!i.trim())try{l(!0);const{error:p}=await Xe.from("groups").insert([{name:i.trim()}]);if(p)throw p;Le.success("Grupo creado exitosamente"),n(),t(),s("")}catch(p){console.error("Error:",p),Le.error("Error al crear el grupo")}finally{l(!1)}};return u.jsx(Ru,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:u.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[u.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),u.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-4 sm:p-6 mx-4 max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"absolute right-4 top-4",children:u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:u.jsx(aa,{className:"w-6 h-6"})})}),u.jsx(Ru.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),u.jsxs("form",{onSubmit:c,children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),u.jsx("input",{type:"text",id:"name",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[u.jsx(vt,{type:"button",variant:"secondary",onClick:t,disabled:a,fullWidth:!0,className:"sm:w-auto",children:"Cancelar"}),u.jsx(vt,{type:"submit",loading:a,fullWidth:!0,className:"sm:w-auto",children:"Crear Grupo"})]})]})]})]})})},JO=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,s]=k.useState(""),[a,l]=k.useState(!1),c=async f=>{if(f.preventDefault(),i!==r.name){Le.error("El nombre del grupo no coincide");return}try{l(!0);const{error:p}=await Xe.from("groups").delete().eq("id",r.id);if(p)throw p;Le.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),Le.error("Error al eliminar el grupo")}finally{l(!1),s("")}};return u.jsx(Ru,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:u.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[u.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),u.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[u.jsx("div",{className:"absolute right-4 top-4",children:u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:u.jsx(aa,{className:"w-6 h-6"})})}),u.jsx(Ru.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),u.jsx("div",{className:"mb-4",children:u.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta accin no se puede deshacer. Para confirmar, escribe el nombre del grupo:",u.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),u.jsxs("form",{onSubmit:c,children:[u.jsx("div",{className:"mb-4",children:u.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx(vt,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),u.jsx(vt,{type:"submit",loading:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function Nn({className:e="",width:t="100%",height:n="1rem",rounded:r=!1,count:i=1}){const s=Array.from({length:i},(a,l)=>u.jsx("div",{className:`
        animate-pulse bg-gray-200 
        ${r?"rounded-full":"rounded"} 
        ${e}
        ${i>1&&l<i-1?"mb-2":""}
      `,style:{width:t,height:n}},l));return i===1?s[0]:u.jsx("div",{children:s})}function XO({rows:e=5}){return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 bg-gray-50 rounded-lg",children:[u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"})]}),Array.from({length:e},(t,n)=>u.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 border-b",children:[u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsx(Nn,{height:"1rem"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Nn,{width:"3rem",height:"1rem"}),u.jsx(Nn,{width:"4rem",height:"1rem"})]})]},n))]})}function YN({count:e=3}){return u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:e},(t,n)=>u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx(Nn,{height:"1.5rem",className:"mb-4"}),u.jsx(Nn,{height:"1rem",className:"mb-2"}),u.jsx(Nn,{height:"1rem",width:"70%",className:"mb-4"}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(Nn,{width:"4rem",height:"1rem"}),u.jsx(Nn,{width:"3rem",height:"1rem"})]})]},n))})}function QO({count:e=3}){return u.jsx("div",{className:"space-y-4",children:Array.from({length:e},(t,n)=>u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx(Nn,{height:"1.5rem",width:"60%",className:"mb-2"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Nn,{height:"1rem",width:"8rem"}),u.jsx(Nn,{height:"1rem",width:"6rem"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Nn,{width:"3rem",height:"2rem"}),u.jsx(Nn,{width:"3rem",height:"2rem"})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Nn,{height:"1rem",width:"10rem"}),u.jsx(Nn,{height:"1rem",width:"8rem"})]})]},n))})}function ZO({count:e=4}){return u.jsx("div",{className:"space-y-3",children:Array.from({length:e},(t,n)=>u.jsx("div",{className:"p-3 hover:bg-gray-50 border-b",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Nn,{height:"1.25rem",width:"8rem"}),u.jsx(Nn,{height:"1rem",width:"4rem"})]}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.jsx(Nn,{height:"1.5rem",width:"5rem"}),u.jsx(Nn,{height:"1.5rem",width:"6rem"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Nn,{width:"3rem",height:"1.5rem"}),u.jsx(Nn,{width:"4rem",height:"1.5rem"})]})]})},n))})}function eR(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[i,s]=k.useState(!1),{user:a}=Zr(),l=da(),[c,f]=k.useState(!1),[p,m]=k.useState(null),[x,g]=k.useState(!1),[N,j]=k.useState("");k.useEffect(()=>{(async()=>{a&&await E()})()},[a]);const E=async()=>{if(a)try{r(!0);const{data:O,error:K}=await Xe.from("users").select("role").eq("id",a.id).single();if(K)throw K;const ie=(O==null?void 0:O.role)==="admin";if(f(ie),ie){const{data:J,error:B}=await Xe.from("groups").select("*").order("created_at",{ascending:!1});if(B)throw B;const{data:fe,error:he}=await Xe.from("group_members").select("group_id").eq("user_id",a.id);if(he)throw he;const G=new Set((fe==null?void 0:fe.map(F=>F.group_id))||[]),P=await Promise.all((J||[]).map(async F=>{const{data:ne}=await Xe.from("group_members").select("id").eq("group_id",F.id).eq("role_in_group","principal"),{data:be}=await Xe.from("group_members").select("id").eq("group_id",F.id).eq("role_in_group","sustituto");return{...F,userRole:G.has(F.id)?"member":"none",principal_count:(ne==null?void 0:ne.length)||0,sustituto_count:(be==null?void 0:be.length)||0}}));t(P);return}const{data:W,error:$}=await Xe.from("group_members").select("group_id").eq("user_id",a.id);if($)throw $;const oe=new Set((W==null?void 0:W.map(J=>J.group_id))||[]),{data:le,error:R}=await Xe.from("groups").select("*").or(`created_by.eq.${a.id},id.in.(${Array.from(oe).join(",")})`).order("created_at",{ascending:!1});if(R)throw R;const q=await Promise.all((le||[]).map(async J=>{const{data:B}=await Xe.from("group_members").select("id").eq("group_id",J.id).eq("role_in_group","principal"),{data:fe}=await Xe.from("group_members").select("id").eq("group_id",J.id).eq("role_in_group","sustituto");return{...J,userRole:oe.has(J.id)?"member":"none",principal_count:(B==null?void 0:B.length)||0,sustituto_count:(fe==null?void 0:fe.length)||0}}));t(q)}catch(O){console.error("Error fetching groups:",O),Le.error("Error al cargar los grupos"),t([])}finally{r(!1)}},b=O=>{l(`/group/${O}`)},S=(O,K)=>{O.stopPropagation(),m(K),g(!0)},A=()=>{const O=e.filter($=>$.name.toLowerCase().includes(N.toLowerCase())),K=O.filter($=>$.created_by===(a==null?void 0:a.id)),ie=O.filter($=>$.userRole==="member"&&$.created_by!==(a==null?void 0:a.id)),W=c?O.filter($=>$.userRole==="none"&&$.created_by!==(a==null?void 0:a.id)&&!ie.some(oe=>oe.id===$.id)):[];return{created:K,member:ie,other:W}};return u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),u.jsxs(vt,{onClick:()=>s(!0),className:"flex items-center space-x-2",children:[u.jsx(Bg,{className:"w-5 h-5"}),u.jsx("span",{children:"Crear Grupo"})]})]}),u.jsx("div",{className:"mb-6",children:u.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:N,onChange:O=>j(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{className:"h-7 w-48 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),u.jsx(YN,{count:6})]}):e.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Iu,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),u.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. Crea uno para empezar!"})]}):u.jsxs("div",{className:"space-y-8",children:[A().created.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A().created.map(O=>u.jsx(Cv,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>b(O.id)},O.id))})]}),A().member.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A().member.map(O=>u.jsx(Cv,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>b(O.id)},O.id))})]}),c&&A().other.length>0&&u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A().other.map(O=>u.jsx(Cv,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>b(O.id)},O.id))})]})]}),u.jsx(KO,{isOpen:i,onClose:()=>s(!1),onGroupCreated:E,isAdmin:c}),p&&u.jsx(JO,{isOpen:x,onClose:()=>{g(!1),m(null)},onGroupDeleted:E,group:p})]})}const Cv=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>u.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[u.jsx(Iu,{className:"w-5 h-5 text-indigo-600 mr-1"}),u.jsx("span",{className:"font-medium",children:e.principal_count}),u.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),u.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[u.jsx(Iu,{className:"w-5 h-5 text-orange-600 mr-1"}),u.jsx("span",{className:"font-medium",children:e.sustituto_count}),u.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&u.jsx("button",{onClick:s=>r(s,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:u.jsx(M5,{className:"w-5 h-5"})})]})]}),u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&u.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&u.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&u.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function tR({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:s,userRole:a}){const[l,c]=k.useState(""),[f,p]=k.useState(""),[m,x]=k.useState("principal"),[g,N]=k.useState([]),[j,E]=k.useState(""),[b,S]=k.useState(!1),[A,O]=k.useState(!1),[K,ie]=k.useState([]),[W,$]=k.useState(!1),{user:oe}=Zr(),le=()=>{c(""),p(""),x("principal"),N([]),E(""),S(!1),ie([])},R=async()=>{if(oe)try{const{data:G,error:P}=await Xe.from("users").select("name, email").eq("id",oe.id).single();if(P)throw P;G&&(c(G.name||""),p(G.email||""))}catch(G){console.error("Error fetching user info:",G)}},q=async()=>{var G;if(oe)try{const{data:P,error:F}=await Xe.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",oe.id);if(F)throw F;$(((G=P==null?void 0:P[0])==null?void 0:G.role_in_group)==="principal")}catch(P){console.error("Error checking principal status:",P),$(!1)}},J=async()=>{try{const{data:G,error:P}=await Xe.from("roles").select("*").eq("group_id",n).order("name");if(P)throw P;ie(G||[])}catch(G){console.error("Error loading roles:",G),Le.error("Error al cargar los roles")}};if(k.useEffect(()=>{e&&J()},[e]),k.useEffect(()=>{e||le()},[e]),k.useEffect(()=>{oe&&(q(),a==="user"&&!W?R():(c(""),p("")))},[oe,a,W]),!e||!oe)return null;const B=()=>{if(!j.trim()){Le.error("Por favor ingresa un nombre para el rol");return}if(K.some(ne=>ne.name.toLowerCase()===j.trim().toLowerCase())){Le.error("Este rol ya existe en el grupo");return}const P=`new-${Date.now()}`,F={id:P,name:j.trim(),isNew:!0,group_id:n};ie([...K,F]),N([...g,P]),E(""),S(!1),Le.success("Rol aadido y seleccionado")},fe=async G=>{if(G.preventDefault(),!l.trim()){Le.error("Por favor ingresa un nombre");return}const P=f.trim()?"registered":"local";if(g.length===0){Le.error("Por favor selecciona al menos un rol");return}O(!0);try{const F=g.filter(H=>!H.startsWith("new-")),ne=K.filter(H=>"isNew"in H&&H.isNew&&g.includes(H.id)).map(H=>({name:H.name,group_id:n})),{data:be,error:T}=await Xe.rpc("add_group_member_flexible",{p_group_id:n,p_name:l,p_email:P==="registered"?f.toLowerCase().trim():null,p_role:s?"principal":m,p_user_id:a==="user"&&!W?oe.id:null,p_instruments:F,p_new_instruments:ne.map(H=>H.name),p_member_type:P});if(T)throw T;if(P==="registered"&&be.invitation)try{const{invitation:H}=be;if(console.log("Datos de invitacin:",H),!H||!H.token)throw new Error("No se recibieron los datos de invitacin correctamente");const{error:Z}=await Xe.functions.invoke("send-invitation-email",{body:{email:H.email,token:H.token,userExists:H.userExists,groupName:H.groupName,groupMemberId:H.groupMemberId}});if(Z)throw console.error("Error sending invitation email:",Z),new Error(`Error al enviar la invitacin: ${Z.message}`);Le.success(`Miembro aadido e invitacin enviada a ${f}`)}catch(H){console.error("Error sending invitation:",H),Le.error(`Error al enviar la invitacin: ${H.message||"Error desconocido"}`,{icon:"",duration:5e3})}else Le.success(`${l} aadido al grupo como miembro local`);i(),t(),le()}catch(F){console.error("Error adding member:",F),Le.error(F.message||"Error al aadir miembro")}finally{O(!1)}},he=a==="user"&&!W;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[u.jsx("h2",{className:"text-xl font-semibold",children:he?"Unirse al Grupo":"Aadir Miembro"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:fe,className:"p-6 space-y-4",children:[u.jsx(Xn,{label:"Nombre",value:l,onChange:G=>c(G.target.value),required:!0,placeholder:"Ingresa el nombre del miembro",disabled:he}),u.jsxs("div",{children:[u.jsx(Xn,{label:"Email (opcional)",type:"email",value:f,onChange:G=>p(G.target.value),required:!1,placeholder:"Ingresa el email para enviar invitacin",disabled:he}),u.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[" ",u.jsx("strong",{children:"Con email:"})," Recibir invitacin y podr acceder a la app",u.jsx("br",{})," ",u.jsx("strong",{children:"Sin email:"})," Solo para organizacin interna del grupo"]})]}),!s&&a==="admin"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),u.jsxs("select",{value:m,onChange:G=>x(G.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[u.jsx("option",{value:"principal",children:"Principal"}),u.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roles/Instrumentos"}),!b&&(a==="admin"||s||W)&&u.jsxs(vt,{type:"button",variant:"secondary",onClick:()=>S(!0),className:"text-sm py-1",children:[u.jsx(Bg,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),b&&u.jsxs("div",{className:"flex gap-2 mb-3",children:[u.jsx(Xn,{label:"",value:j,onChange:G=>E(G.target.value),placeholder:"Enter instrument name",className:"flex-1"}),u.jsxs("div",{className:"flex gap-2 mt-1",children:[u.jsx(vt,{type:"button",onClick:B,className:"whitespace-nowrap",children:"Add"}),u.jsx(vt,{type:"button",variant:"secondary",onClick:()=>{S(!1),E("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:K.length===0?u.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Aade uno arriba."}):K.map(G=>u.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:g.includes(G.id),onChange:P=>{P.target.checked?N([...g,G.id]):N(g.filter(F=>F!==G.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),u.jsxs("span",{className:"flex items-center capitalize",children:[u.jsx(ei,{className:"w-3 h-3 mr-1"}),G.name,"isNew"in G&&u.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},G.id))})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[u.jsx(vt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),u.jsx(vt,{type:"submit",loading:A,children:he?"Unirse al Grupo":"Aadir Miembro"})]})]})]})})}function nR({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:s}){const[a,l]=k.useState(n.name),[c,f]=k.useState(n.role_in_group),[p,m]=k.useState([]),[x,g]=k.useState(!1),{user:N}=Zr();if(k.useEffect(()=>{n&&(l(n.name),f(n.role_in_group),m(n.instruments.map(b=>b.id)))},[n]),!e||!N)return null;const j=s==="admin"||n.user_id===N.id,E=async b=>{if(b.preventDefault(),!j){Le.error("You do not have permission to edit this member");return}if(!a.trim()){Le.error("Please enter a member name");return}if(p.length===0){Le.error("Please select at least one role");return}g(!0);try{const{error:S}=await Xe.from("group_members").update({name:a.trim(),role_in_group:c}).eq("id",n.id);if(S)throw S;const{error:A}=await Xe.from("group_member_roles").delete().eq("group_member_id",n.id);if(A)throw A;const{error:O}=await Xe.from("group_member_roles").insert(p.map(K=>({group_member_id:n.id,role_id:K,created_by:N.id})));if(O)throw O;Le.success("Member updated successfully!"),i(),t()}catch(S){console.error("Error updating member:",S),Le.error(S.message||"Failed to update member")}finally{g(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:x,children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[u.jsx(Xn,{label:"Name",value:a,onChange:b=>l(b.target.value),required:!0,placeholder:"Enter member name",disabled:!j}),s==="admin"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),u.jsxs("select",{value:c,onChange:b=>f(b.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!j,children:[u.jsx("option",{value:"principal",children:"Principal"}),u.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(b=>u.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:p.includes(b.id),onChange:S=>{S.target.checked?m([...p,b.id]):m(p.filter(A=>A!==b.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:x||!j}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(ei,{className:"w-3 h-3 mr-1"}),b.name]})]},b.id))})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[u.jsx(vt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),j&&u.jsx(vt,{type:"submit",loading:x,children:"Save Changes"})]})]})]})})}const y_=3,rR=1e3;async function Wn(e,t="An error occurred"){let n=0;for(;n<y_;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===y_)return console.error(t,r),Le.error(t),null;await new Promise(i=>setTimeout(i,rR*n))}return null}function hn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function hs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function $i(e,t){const n=hn(e);return isNaN(t)?hs(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ca(e,t){const n=hn(e);if(isNaN(t))return hs(e,NaN);if(!t)return n;const r=n.getDate(),i=hs(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const B5=6048e5,iR=864e5,KN=6e4,JN=36e5;let sR={};function Rp(){return sR}function wo(e,t){var l,c,f,p;const n=Rp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=hn(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Wu(e){return wo(e,{weekStartsOn:1})}function XN(e){const t=hn(e),n=t.getFullYear(),r=hs(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Wu(r),s=hs(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Wu(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Mc(e){const t=hn(e);return t.setHours(0,0,0,0),t}function ng(e){const t=hn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function mo(e,t){const n=Mc(e),r=Mc(t),i=+n-ng(n),s=+r-ng(r);return Math.round((i-s)/iR)}function aR(e){const t=XN(e),n=hs(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wu(n)}function dy(e,t){const n=t*7;return $i(e,n)}function oR(e,t){return ca(e,t*12)}function lR(e){let t;return e.forEach(function(n){const r=hn(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function cR(e){let t;return e.forEach(n=>{const r=hn(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function uR(e){return hs(e,Date.now())}function _r(e,t){const n=Mc(e),r=Mc(t);return+n==+r}function z5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dR(e){if(!z5(e)&&typeof e!="number")return!1;const t=hn(e);return!isNaN(Number(t))}function bp(e,t){const n=hn(e),r=hn(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function fR(e,t,n){const r=wo(e,n),i=wo(t,n),s=+r-ng(r),a=+i-ng(i);return Math.round((s-a)/B5)}function Ef(e){const t=hn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function di(e){const t=hn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function QN(e){const t=hn(e),n=hs(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function U5(e,t){var l,c,f,p;const n=Rp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=hn(e),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function ZN(e){return U5(e,{weekStartsOn:1})}const hR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pR=(e,t,n)=>{let r;const i=hR[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function df(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const mR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yR={date:df({formats:mR,defaultWidth:"full"}),time:df({formats:gR,defaultWidth:"full"}),dateTime:df({formats:vR,defaultWidth:"full"})},xR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wR=(e,t,n,r)=>xR[e];function ho(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const bR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_R={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},SR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},NR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ER=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},CR={ordinalNumber:ER,era:ho({values:bR,defaultWidth:"wide"}),quarter:ho({values:_R,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ho({values:SR,defaultWidth:"wide"}),day:ho({values:NR,defaultWidth:"wide"}),dayPeriod:ho({values:jR,defaultWidth:"wide",formattingValues:kR,defaultFormattingWidth:"wide"})};function po(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?LR(l,m=>m.test(a)):AR(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(a.length);return{value:f,rest:p}}}function AR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function LR(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function e6(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(i.length);return{value:a,rest:l}}}const PR=/^(\d+)(th|st|nd|rd)?/i,TR=/\d+/i,MR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},DR={any:[/^b/i,/^(a|c)/i]},IR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OR={any:[/1/i,/2/i,/3/i,/4/i]},RR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$R={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qR={ordinalNumber:e6({matchPattern:PR,parsePattern:TR,valueCallback:e=>parseInt(e,10)}),era:po({matchPatterns:MR,defaultMatchWidth:"wide",parsePatterns:DR,defaultParseWidth:"any"}),quarter:po({matchPatterns:IR,defaultMatchWidth:"wide",parsePatterns:OR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:po({matchPatterns:RR,defaultMatchWidth:"wide",parsePatterns:FR,defaultParseWidth:"any"}),day:po({matchPatterns:$R,defaultMatchWidth:"wide",parsePatterns:BR,defaultParseWidth:"any"}),dayPeriod:po({matchPatterns:zR,defaultMatchWidth:"any",parsePatterns:UR,defaultParseWidth:"any"})},t6={code:"en-US",formatDistance:pR,formatLong:yR,formatRelative:wR,localize:CR,match:qR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function WR(e){const t=hn(e);return mo(t,QN(t))+1}function n6(e){const t=hn(e),n=+Wu(t)-+aR(t);return Math.round(n/B5)+1}function r6(e,t){var p,m,x,g;const n=hn(e),r=n.getFullYear(),i=Rp(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(x=i.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,a=hs(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=wo(a,t),c=hs(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const f=wo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function HR(e,t){var l,c,f,p;const n=Rp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,i=r6(e,t),s=hs(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),wo(s,t)}function i6(e,t){const n=hn(e),r=+wo(n,t)-+HR(n,t);return Math.round(r/B5)+1}function Cn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ec={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Cn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Cn(n+1,2)},d(e,t){return Cn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Cn(e.getHours()%12||12,t.length)},H(e,t){return Cn(e.getHours(),t.length)},m(e,t){return Cn(e.getMinutes(),t.length)},s(e,t){return Cn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Cn(i,t.length)}},$d={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},x_={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ec.y(e,t)},Y:function(e,t,n,r){const i=r6(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Cn(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Cn(s,t.length)},R:function(e,t){const n=XN(e);return Cn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Cn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Cn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Cn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ec.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Cn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=i6(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Cn(i,t.length)},I:function(e,t,n){const r=n6(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Cn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ec.d(e,t)},D:function(e,t,n){const r=WR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Cn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Cn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Cn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Cn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=$d.noon:r===0?i=$d.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=$d.evening:r>=12?i=$d.afternoon:r>=4?i=$d.morning:i=$d.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ec.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ec.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ec.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ec.s(e,t)},S:function(e,t){return ec.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return b_(r);case"XXXX":case"XX":return Su(r);case"XXXXX":case"XXX":default:return Su(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return b_(r);case"xxxx":case"xx":return Su(r);case"xxxxx":case"xxx":default:return Su(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w_(r,":");case"OOOO":default:return"GMT"+Su(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w_(r,":");case"zzzz":default:return"GMT"+Su(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Cn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Cn(r,t.length)}};function w_(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Cn(s,2)}function b_(e,t){return e%60===0?(e>0?"-":"+")+Cn(Math.abs(e)/60,2):Su(e,t)}function Su(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Cn(Math.trunc(r/60),2),s=Cn(r%60,2);return n+i+t+s}const __=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},s6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},VR=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return __(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",__(r,t)).replace("{{time}}",s6(i,t))},GR={p:s6,P:VR},YR=/^D+$/,KR=/^Y+$/,JR=["D","DD","YY","YYYY"];function XR(e){return YR.test(e)}function QR(e){return KR.test(e)}function ZR(e,t,n){const r=e9(e,t,n);if(console.warn(r),JR.includes(e))throw new RangeError(r)}function e9(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const t9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,n9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,r9=/^'([^]*?)'?$/,i9=/''/g,s9=/[a-zA-Z]/;function Kt(e,t,n){var p,m,x,g,N,j,E,b;const r=Rp(),i=(n==null?void 0:n.locale)??r.locale??t6,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(x=r.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((j=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:j.weekStartsOn)??r.weekStartsOn??((b=(E=r.locale)==null?void 0:E.options)==null?void 0:b.weekStartsOn)??0,l=hn(e);if(!dR(l))throw new RangeError("Invalid time value");let c=t.match(n9).map(S=>{const A=S[0];if(A==="p"||A==="P"){const O=GR[A];return O(S,i.formatLong)}return S}).join("").match(t9).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const A=S[0];if(A==="'")return{isToken:!1,value:a9(S)};if(x_[A])return{isToken:!0,value:S};if(A.match(s9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const f={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const A=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&QR(A)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&XR(A))&&ZR(A,t,String(e));const O=x_[A[0]];return O(l,A,i.localize,f)}).join("")}function a9(e){const t=e.match(r9);return t?t[1].replace(i9,"'"):e}function o9(e){const t=hn(e),n=t.getFullYear(),r=t.getMonth(),i=hs(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function l9(e){return Math.trunc(+hn(e)/1e3)}function c9(e){const t=hn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function u9(e,t){return fR(c9(e),di(e),t)+1}function ff(e,t){const n=hn(e),r=hn(t);return n.getTime()>r.getTime()}function a6(e,t){const n=hn(e),r=hn(t);return+n<+r}function S_(e){return+hn(e)>Date.now()}function q5(e,t){const n=hn(e),r=hn(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function d9(e,t){const n=hn(e),r=hn(t);return n.getFullYear()===r.getFullYear()}function N_(e){return _r(e,uR(e))}function Av(e,t){return $i(e,-t)}function vu(e,t){const r=m9(e);let i;if(r.date){const c=g9(r.date,2);i=v9(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=y9(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=x9(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(s+a+l)}const Ym={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},f9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,p9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m9(e){const t={},n=e.split(Ym.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Ym.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ym.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Ym.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function g9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function v9(e,t){if(t===null)return new Date(NaN);const n=e.match(f9);if(!n)return new Date(NaN);const r=!!n[4],i=Nh(n[1]),s=Nh(n[2])-1,a=Nh(n[3]),l=Nh(n[4]),c=Nh(n[5])-1;if(r)return N9(t,l,c)?w9(t,l,c):new Date(NaN);{const f=new Date(0);return!_9(t,s,a)||!S9(t,i)?new Date(NaN):(f.setUTCFullYear(t,s,Math.max(i,a)),f)}}function Nh(e){return e?parseInt(e):1}function y9(e){const t=e.match(h9);if(!t)return NaN;const n=Lv(t[1]),r=Lv(t[2]),i=Lv(t[3]);return j9(n,r,i)?n*JN+r*KN+i*1e3:NaN}function Lv(e){return e&&parseFloat(e.replace(",","."))||0}function x9(e){if(e==="Z")return 0;const t=e.match(p9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return k9(r,i)?n*(r*JN+i*KN):NaN}function w9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const b9=[31,null,31,30,31,30,31,31,30,31,30,31];function o6(e){return e%400===0||e%4===0&&e%100!==0}function _9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(b9[t]||(o6(e)?29:28))}function S9(e,t){return t>=1&&t<=(o6(e)?366:365)}function N9(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function j9(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function k9(e,t){return t>=0&&t<=59}function Pv(e,t){const n=hn(e),r=n.getFullYear(),i=n.getDate(),s=hs(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const a=o9(s);return n.setMonth(t,Math.min(i,a)),n}function j_(e,t){const n=hn(e);return isNaN(+n)?hs(e,NaN):(n.setFullYear(t),n)}function Km(e,t){return ca(e,-t)}const E9={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},C9=(e,t,n)=>{let r;const i=E9[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},A9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},L9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},P9={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},T9={date:df({formats:A9,defaultWidth:"full"}),time:df({formats:L9,defaultWidth:"full"}),dateTime:df({formats:P9,defaultWidth:"full"})},M9={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},D9={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},I9=(e,t,n,r)=>t.getHours()!==1?D9[e]:M9[e],O9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},R9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},F9={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},$9={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},B9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},z9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},U9=(e,t)=>Number(e)+"",q9={ordinalNumber:U9,era:ho({values:O9,defaultWidth:"wide"}),quarter:ho({values:R9,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:ho({values:F9,defaultWidth:"wide"}),day:ho({values:$9,defaultWidth:"wide"}),dayPeriod:ho({values:B9,defaultWidth:"wide",formattingValues:z9,defaultFormattingWidth:"wide"})},W9=/^(\d+)()?/i,H9=/\d+/i,V9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},G9={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},Y9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},K9={any:[/1/i,/2/i,/3/i,/4/i]},J9={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},X9={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Q9={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},Z9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},eF={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},tF={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},nF={ordinalNumber:e6({matchPattern:W9,parsePattern:H9,valueCallback:function(e){return parseInt(e,10)}}),era:po({matchPatterns:V9,defaultMatchWidth:"wide",parsePatterns:G9,defaultParseWidth:"any"}),quarter:po({matchPatterns:Y9,defaultMatchWidth:"wide",parsePatterns:K9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:po({matchPatterns:J9,defaultMatchWidth:"wide",parsePatterns:X9,defaultParseWidth:"any"}),day:po({matchPatterns:Q9,defaultMatchWidth:"wide",parsePatterns:Z9,defaultParseWidth:"any"}),dayPeriod:po({matchPatterns:eF,defaultMatchWidth:"any",parsePatterns:tF,defaultParseWidth:"any"})},uo={code:"es",formatDistance:C9,formatLong:T9,formatRelative:I9,localize:q9,match:nF,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Ft=function(){return Ft=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ft.apply(this,arguments)};function rF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function l6(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Fp(e){return e.mode==="multiple"}function $p(e){return e.mode==="range"}function Kg(e){return e.mode==="single"}var iF={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function sF(e,t){return Kt(e,"LLLL y",t)}function aF(e,t){return Kt(e,"d",t)}function oF(e,t){return Kt(e,"LLLL",t)}function lF(e){return"".concat(e)}function cF(e,t){return Kt(e,"cccccc",t)}function uF(e,t){return Kt(e,"yyyy",t)}var dF=Object.freeze({__proto__:null,formatCaption:sF,formatDay:aF,formatMonthCaption:oF,formatWeekNumber:lF,formatWeekdayName:cF,formatYearCaption:uF}),fF=function(e,t,n){return Kt(e,"do MMMM (EEEE)",n)},hF=function(){return"Month: "},pF=function(){return"Go to next month"},mF=function(){return"Go to previous month"},gF=function(e,t){return Kt(e,"cccc",t)},vF=function(e){return"Week n. ".concat(e)},yF=function(){return"Year: "},xF=Object.freeze({__proto__:null,labelDay:fF,labelMonthDropdown:hF,labelNext:pF,labelPrevious:mF,labelWeekNumber:vF,labelWeekday:gF,labelYearDropdown:yF});function wF(){var e="buttons",t=iF,n=t6,r={},i={},s=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:dF,labels:xF,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:l,mode:"default"}}function bF(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,s=e.fromDate,a=e.toDate;return r?s=di(r):t&&(s=new Date(t,0,1)),i?a=Ef(i):n&&(a=new Date(n,11,31)),{fromDate:s?Mc(s):void 0,toDate:a?Mc(a):void 0}}var c6=k.createContext(void 0);function _F(e){var t,n=e.initialProps,r=wF(),i=bF(n),s=i.fromDate,a=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!a)&&(l="buttons");var c;(Kg(n)||Fp(n)||$p(n))&&(c=n.onSelect);var f=Ft(Ft(Ft({},r),n),{captionLayout:l,classNames:Ft(Ft({},r.classNames),n.classNames),components:Ft({},n.components),formatters:Ft(Ft({},r.formatters),n.formatters),fromDate:s,labels:Ft(Ft({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ft(Ft({},r.modifiers),n.modifiers),modifiersClassNames:Ft(Ft({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Ft(Ft({},r.styles),n.styles),toDate:a});return u.jsx(c6.Provider,{value:f,children:e.children})}function Vn(){var e=k.useContext(c6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function u6(e){var t=Vn(),n=t.locale,r=t.classNames,i=t.styles,s=t.formatters.formatCaption;return u.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function SF(e){return u.jsx("svg",Ft({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:u.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function d6(e){var t,n,r=e.onChange,i=e.value,s=e.children,a=e.caption,l=e.className,c=e.style,f=Vn(),p=(n=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:SF;return u.jsxs("div",{className:l,style:c,children:[u.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),u.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:i,onChange:r,children:s}),u.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[a,u.jsx(p,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function NF(e){var t,n=Vn(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,f=n.components,p=n.labels.labelMonthDropdown;if(!r)return u.jsx(u.Fragment,{});if(!i)return u.jsx(u.Fragment,{});var m=[];if(d9(r,i))for(var x=di(r),g=r.getMonth();g<=i.getMonth();g++)m.push(Pv(x,g));else for(var x=di(new Date),g=0;g<=11;g++)m.push(Pv(x,g));var N=function(E){var b=Number(E.target.value),S=Pv(di(e.displayMonth),b);e.onChange(S)},j=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:d6;return u.jsx(j,{name:"months","aria-label":p(),className:c.dropdown_month,style:s.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(E){return u.jsx("option",{value:E.getMonth(),children:l(E,{locale:a})},E.getMonth())})})}function jF(e){var t,n=e.displayMonth,r=Vn(),i=r.fromDate,s=r.toDate,a=r.locale,l=r.styles,c=r.classNames,f=r.components,p=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,x=[];if(!i)return u.jsx(u.Fragment,{});if(!s)return u.jsx(u.Fragment,{});for(var g=i.getFullYear(),N=s.getFullYear(),j=g;j<=N;j++)x.push(j_(QN(new Date),j));var E=function(S){var A=j_(di(n),Number(S.target.value));e.onChange(A)},b=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:d6;return u.jsx(b,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:E,value:n.getFullYear(),caption:p(n,{locale:a}),children:x.map(function(S){return u.jsx("option",{value:S.getFullYear(),children:p(S,{locale:a})},S.getFullYear())})})}function kF(e,t){var n=k.useState(e),r=n[0],i=n[1],s=t===void 0?r:t;return[s,i]}function EF(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,s=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&bp(s,i)<0){var f=-1*(c-1);i=ca(s,f)}return a&&bp(i,a)<0&&(i=a),di(i)}function CF(){var e=Vn(),t=EF(e),n=kF(t,e.month),r=n[0],i=n[1],s=function(a){var l;if(!e.disableNavigation){var c=di(a);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function AF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=di(e),s=di(ca(i,r)),a=bp(s,i),l=[],c=0;c<a;c++){var f=ca(i,c);l.push(f)}return n&&(l=l.reverse()),l}function LF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=di(e);if(!n)return ca(l,a);var c=bp(n,e);if(!(c<s))return ca(l,a)}}function PF(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=di(e);if(!n)return ca(l,-a);var c=bp(l,n);if(!(c<=0))return ca(l,-a)}}var f6=k.createContext(void 0);function TF(e){var t=Vn(),n=CF(),r=n[0],i=n[1],s=AF(r,t),a=LF(r,t),l=PF(r,t),c=function(m){return s.some(function(x){return q5(m,x)})},f=function(m,x){c(m)||(x&&a6(m,x)?i(ca(m,1+t.numberOfMonths*-1)):i(m))},p={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:f,previousMonth:l,nextMonth:a,isDateDisplayed:c};return u.jsx(f6.Provider,{value:p,children:e.children})}function Bp(){var e=k.useContext(f6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function k_(e){var t,n=Vn(),r=n.classNames,i=n.styles,s=n.components,a=Bp().goToMonth,l=function(p){a(ca(p,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:u6,f=u.jsx(c,{id:e.id,displayMonth:e.displayMonth});return u.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[u.jsx("div",{className:r.vhidden,children:f}),u.jsx(NF,{onChange:l,displayMonth:e.displayMonth}),u.jsx(jF,{onChange:l,displayMonth:e.displayMonth})]})}function MF(e){return u.jsx("svg",Ft({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:u.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function DF(e){return u.jsx("svg",Ft({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:u.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var rg=k.forwardRef(function(e,t){var n=Vn(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var a=s.join(" "),l=Ft(Ft({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),u.jsx("button",Ft({},e,{ref:t,type:"button",className:a,style:l}))});function IF(e){var t,n,r=Vn(),i=r.dir,s=r.locale,a=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,p=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return u.jsx(u.Fragment,{});var x=f(e.previousMonth,{locale:s}),g=[a.nav_button,a.nav_button_previous].join(" "),N=p(e.nextMonth,{locale:s}),j=[a.nav_button,a.nav_button_next].join(" "),E=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:DF,b=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:MF;return u.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&u.jsx(rg,{name:"previous-month","aria-label":x,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?u.jsx(E,{className:a.nav_icon,style:l.nav_icon}):u.jsx(b,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&u.jsx(rg,{name:"next-month","aria-label":N,className:j,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?u.jsx(b,{className:a.nav_icon,style:l.nav_icon}):u.jsx(E,{className:a.nav_icon,style:l.nav_icon})})]})}function E_(e){var t=Vn().numberOfMonths,n=Bp(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(N){return q5(e.displayMonth,N)}),c=l===0,f=l===a.length-1,p=t>1&&(c||!f),m=t>1&&(f||!c),x=function(){r&&s(r)},g=function(){i&&s(i)};return u.jsx(IF,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:x,onNextClick:g})}function OF(e){var t,n=Vn(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:u6,f;return i?f=u.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?f=u.jsx(k_,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?f=u.jsxs(u.Fragment,{children:[u.jsx(k_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),u.jsx(E_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=u.jsxs(u.Fragment,{children:[u.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),u.jsx(E_,{displayMonth:e.displayMonth,id:e.id})]}),u.jsx("div",{className:r.caption,style:s.caption,children:f})}function RF(e){var t=Vn(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?u.jsx("tfoot",{className:i,style:r.tfoot,children:u.jsx("tr",{children:u.jsx("td",{colSpan:8,children:n})})}):u.jsx(u.Fragment,{})}function FF(e,t,n){for(var r=n?Wu(new Date):wo(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var a=$i(r,s);i.push(a)}return i}function $F(){var e=Vn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,f=FF(i,s,a);return u.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&u.jsx("td",{style:n.head_cell,className:t.head_cell}),f.map(function(p,m){return u.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:l(p,{locale:i})},m)})]})}function BF(){var e,t=Vn(),n=t.classNames,r=t.styles,i=t.components,s=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:$F;return u.jsx("thead",{style:r.head,className:n.head,children:u.jsx(s,{})})}function zF(e){var t=Vn(),n=t.locale,r=t.formatters.formatDay;return u.jsx(u.Fragment,{children:r(e.date,{locale:n})})}var W5=k.createContext(void 0);function UF(e){if(!Fp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return u.jsx(W5.Provider,{value:t,children:e.children})}return u.jsx(qF,{initialProps:e.initialProps,children:e.children})}function qF(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,s=t.max,a=function(f,p,m){var x,g;(x=t.onDayClick)===null||x===void 0||x.call(t,f,p,m);var N=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var j=!!(!p.selected&&s&&(r==null?void 0:r.length)===s);if(!j){var E=r?l6([],r):[];if(p.selected){var b=E.findIndex(function(S){return _r(f,S)});E.splice(b,1)}else E.push(f);(g=t.onSelect)===null||g===void 0||g.call(t,E,f,p,m)}}},l={disabled:[]};r&&l.disabled.push(function(f){var p=s&&r.length>s-1,m=r.some(function(x){return _r(x,f)});return!!(p&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return u.jsx(W5.Provider,{value:c,children:n})}function H5(){var e=k.useContext(W5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function WF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?_r(i,e)&&_r(r,e)?void 0:_r(i,e)?{from:i,to:void 0}:_r(r,e)?void 0:ff(r,e)?{from:e,to:i}:{from:r,to:e}:i?ff(e,i)?{from:i,to:e}:{from:e,to:i}:r?a6(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var V5=k.createContext(void 0);function HF(e){if(!$p(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return u.jsx(V5.Provider,{value:t,children:e.children})}return u.jsx(VF,{initialProps:e.initialProps,children:e.children})}function VF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},s=i.from,a=i.to,l=t.min,c=t.max,f=function(g,N,j){var E,b;(E=t.onDayClick)===null||E===void 0||E.call(t,g,N,j);var S=WF(g,r);(b=t.onSelect)===null||b===void 0||b.call(t,S,g,N,j)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(p.range_start=[s],a?(p.range_end=[a],_r(s,a)||(p.range_middle=[{after:s,before:a}])):p.range_end=[s]):a&&(p.range_start=[a],p.range_end=[a]),l&&(s&&!a&&p.disabled.push({after:Av(s,l-1),before:$i(s,l-1)}),s&&a&&p.disabled.push({after:s,before:$i(s,l-1)}),!s&&a&&p.disabled.push({after:Av(a,l-1),before:$i(a,l-1)})),c){if(s&&!a&&(p.disabled.push({before:$i(s,-c+1)}),p.disabled.push({after:$i(s,c-1)})),s&&a){var m=mo(a,s)+1,x=c-m;p.disabled.push({before:Av(s,x)}),p.disabled.push({after:$i(a,x)})}!s&&a&&(p.disabled.push({before:$i(a,-c+1)}),p.disabled.push({after:$i(a,c-1)}))}return u.jsx(V5.Provider,{value:{selected:r,onDayClick:f,modifiers:p},children:n})}function G5(){var e=k.useContext(V5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function y0(e){return Array.isArray(e)?l6([],e):e!==void 0?[e]:[]}function GF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=y0(i)}),t}var $a;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})($a||($a={}));var YF=$a.Selected,Go=$a.Disabled,KF=$a.Hidden,JF=$a.Today,Tv=$a.RangeEnd,Mv=$a.RangeMiddle,Dv=$a.RangeStart,XF=$a.Outside;function QF(e,t,n){var r,i=(r={},r[YF]=y0(e.selected),r[Go]=y0(e.disabled),r[KF]=y0(e.hidden),r[JF]=[e.today],r[Tv]=[],r[Mv]=[],r[Dv]=[],r[XF]=[],r);return e.fromDate&&i[Go].push({before:e.fromDate}),e.toDate&&i[Go].push({after:e.toDate}),Fp(e)?i[Go]=i[Go].concat(t.modifiers[Go]):$p(e)&&(i[Go]=i[Go].concat(n.modifiers[Go]),i[Dv]=n.modifiers[Dv],i[Mv]=n.modifiers[Mv],i[Tv]=n.modifiers[Tv]),i}var h6=k.createContext(void 0);function ZF(e){var t=Vn(),n=H5(),r=G5(),i=QF(t,n,r),s=GF(t.modifiers),a=Ft(Ft({},i),s);return u.jsx(h6.Provider,{value:a,children:e.children})}function p6(){var e=k.useContext(h6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function e$(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function t$(e){return!!(e&&typeof e=="object"&&"from"in e)}function n$(e){return!!(e&&typeof e=="object"&&"after"in e)}function r$(e){return!!(e&&typeof e=="object"&&"before"in e)}function i$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function s$(e,t){var n,r=t.from,i=t.to;if(r&&i){var s=mo(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=mo(e,r)>=0&&mo(i,e)>=0;return a}return i?_r(i,e):r?_r(r,e):!1}function a$(e){return z5(e)}function o$(e){return Array.isArray(e)&&e.every(z5)}function l$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(a$(n))return _r(e,n);if(o$(n))return n.includes(e);if(t$(n))return s$(e,n);if(i$(n))return n.dayOfWeek.includes(e.getDay());if(e$(n)){var r=mo(n.before,e),i=mo(n.after,e),s=r>0,a=i<0,l=ff(n.before,n.after);return l?a&&s:s||a}return n$(n)?mo(e,n.after)>0:r$(n)?mo(n.before,e)>0:typeof n=="function"?n(e):!1})}function Y5(e,t,n){var r=Object.keys(t).reduce(function(s,a){var l=t[a];return l$(e,l)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!q5(e,n)&&(i.outside=!0),i}function c$(e,t){for(var n=di(e[0]),r=Ef(e[e.length-1]),i,s,a=n;a<=r;){var l=Y5(a,t),c=!l.disabled&&!l.hidden;if(!c){a=$i(a,1);continue}if(l.selected)return a;l.today&&!s&&(s=a),i||(i=a),a=$i(a,1)}return s||i}var u$=365;function m6(e,t){var n=t.moveBy,r=t.direction,i=t.context,s=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=i.weekStartsOn,f=i.fromDate,p=i.toDate,m=i.locale,x={day:$i,week:dy,month:ca,year:oR,startOfWeek:function(E){return i.ISOWeek?Wu(E):wo(E,{locale:m,weekStartsOn:c})},endOfWeek:function(E){return i.ISOWeek?ZN(E):U5(E,{locale:m,weekStartsOn:c})}},g=x[n](e,r==="after"?1:-1);r==="before"&&f?g=lR([f,g]):r==="after"&&p&&(g=cR([p,g]));var N=!0;if(s){var j=Y5(g,s);N=!j.disabled&&!j.hidden}return N?g:l.count>u$?l.lastFocused:m6(g,{moveBy:n,direction:r,context:i,modifiers:s,retry:Ft(Ft({},l),{count:l.count+1})})}var g6=k.createContext(void 0);function d$(e){var t=Bp(),n=p6(),r=k.useState(),i=r[0],s=r[1],a=k.useState(),l=a[0],c=a[1],f=c$(t.displayMonths,n),p=i??(l&&t.isDateDisplayed(l))?l:f,m=function(){c(i),s(void 0)},x=function(E){s(E)},g=Vn(),N=function(E,b){if(i){var S=m6(i,{moveBy:E,direction:b,context:g,modifiers:n});_r(i,S)||(t.goToDate(S,i),x(S))}},j={focusedDay:i,focusTarget:p,blur:m,focus:x,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return u.jsx(g6.Provider,{value:j,children:e.children})}function K5(){var e=k.useContext(g6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function f$(e,t){var n=p6(),r=Y5(e,n,t);return r}var J5=k.createContext(void 0);function h$(e){if(!Kg(e.initialProps)){var t={selected:void 0};return u.jsx(J5.Provider,{value:t,children:e.children})}return u.jsx(p$,{initialProps:e.initialProps,children:e.children})}function p$(e){var t=e.initialProps,n=e.children,r=function(s,a,l){var c,f,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,a,l),a.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,s,a,l);return}(p=t.onSelect)===null||p===void 0||p.call(t,s,s,a,l)},i={selected:t.selected,onDayClick:r};return u.jsx(J5.Provider,{value:i,children:n})}function v6(){var e=k.useContext(J5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function m$(e,t){var n=Vn(),r=v6(),i=H5(),s=G5(),a=K5(),l=a.focusDayAfter,c=a.focusDayBefore,f=a.focusWeekAfter,p=a.focusWeekBefore,m=a.blur,x=a.focus,g=a.focusMonthBefore,N=a.focusMonthAfter,j=a.focusYearBefore,E=a.focusYearAfter,b=a.focusStartOfWeek,S=a.focusEndOfWeek,A=function(G){var P,F,ne,be;Kg(n)?(P=r.onDayClick)===null||P===void 0||P.call(r,e,t,G):Fp(n)?(F=i.onDayClick)===null||F===void 0||F.call(i,e,t,G):$p(n)?(ne=s.onDayClick)===null||ne===void 0||ne.call(s,e,t,G):(be=n.onDayClick)===null||be===void 0||be.call(n,e,t,G)},O=function(G){var P;x(e),(P=n.onDayFocus)===null||P===void 0||P.call(n,e,t,G)},K=function(G){var P;m(),(P=n.onDayBlur)===null||P===void 0||P.call(n,e,t,G)},ie=function(G){var P;(P=n.onDayMouseEnter)===null||P===void 0||P.call(n,e,t,G)},W=function(G){var P;(P=n.onDayMouseLeave)===null||P===void 0||P.call(n,e,t,G)},$=function(G){var P;(P=n.onDayPointerEnter)===null||P===void 0||P.call(n,e,t,G)},oe=function(G){var P;(P=n.onDayPointerLeave)===null||P===void 0||P.call(n,e,t,G)},le=function(G){var P;(P=n.onDayTouchCancel)===null||P===void 0||P.call(n,e,t,G)},R=function(G){var P;(P=n.onDayTouchEnd)===null||P===void 0||P.call(n,e,t,G)},q=function(G){var P;(P=n.onDayTouchMove)===null||P===void 0||P.call(n,e,t,G)},J=function(G){var P;(P=n.onDayTouchStart)===null||P===void 0||P.call(n,e,t,G)},B=function(G){var P;(P=n.onDayKeyUp)===null||P===void 0||P.call(n,e,t,G)},fe=function(G){var P;switch(G.key){case"ArrowLeft":G.preventDefault(),G.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":G.preventDefault(),G.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":G.preventDefault(),G.stopPropagation(),f();break;case"ArrowUp":G.preventDefault(),G.stopPropagation(),p();break;case"PageUp":G.preventDefault(),G.stopPropagation(),G.shiftKey?j():g();break;case"PageDown":G.preventDefault(),G.stopPropagation(),G.shiftKey?E():N();break;case"Home":G.preventDefault(),G.stopPropagation(),b();break;case"End":G.preventDefault(),G.stopPropagation(),S();break}(P=n.onDayKeyDown)===null||P===void 0||P.call(n,e,t,G)},he={onClick:A,onFocus:O,onBlur:K,onKeyDown:fe,onKeyUp:B,onMouseEnter:ie,onMouseLeave:W,onPointerEnter:$,onPointerLeave:oe,onTouchCancel:le,onTouchEnd:R,onTouchMove:q,onTouchStart:J};return he}function g$(){var e=Vn(),t=v6(),n=H5(),r=G5(),i=Kg(e)?t.selected:Fp(e)?n.selected:$p(e)?r.selected:void 0;return i}function v$(e){return Object.values($a).includes(e)}function y$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(v$(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function x$(e,t){var n=Ft({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Ft(Ft({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function w$(e,t,n){var r,i,s,a=Vn(),l=K5(),c=f$(e,t),f=m$(e,c),p=g$(),m=!!(a.onDayClick||a.mode!=="default");k.useEffect(function(){var ie;c.outside||l.focusedDay&&m&&_r(l.focusedDay,e)&&((ie=n.current)===null||ie===void 0||ie.focus())},[l.focusedDay,e,n,m,c.outside]);var x=y$(a,c).join(" "),g=x$(a,c),N=!!(c.outside&&!a.showOutsideDays||c.hidden),j=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:zF,E=u.jsx(j,{date:e,displayMonth:t,activeModifiers:c}),b={style:g,className:x,children:E,role:"gridcell"},S=l.focusTarget&&_r(l.focusTarget,e)&&!c.outside,A=l.focusedDay&&_r(l.focusedDay,e),O=Ft(Ft(Ft({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=A||S?0:-1,r)),f),K={isButton:m,isHidden:N,activeModifiers:c,selectedDays:p,buttonProps:O,divProps:b};return K}function b$(e){var t=k.useRef(null),n=w$(e.date,e.displayMonth,t);return n.isHidden?u.jsx("div",{role:"gridcell"}):n.isButton?u.jsx(rg,Ft({name:"day",ref:t},n.buttonProps)):u.jsx("div",Ft({},n.divProps))}function _$(e){var t=e.number,n=e.dates,r=Vn(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,p=f(Number(t),{locale:l});if(!i)return u.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:p});var m=c(Number(t),{locale:l}),x=function(g){i(t,n,g)};return u.jsx(rg,{name:"week-number","aria-label":m,className:a.weeknumber,style:s.weeknumber,onClick:x,children:p})}function S$(e){var t,n,r=Vn(),i=r.styles,s=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:b$,f=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:_$,p;return a&&(p=u.jsx("td",{className:s.cell,style:i.cell,children:u.jsx(f,{number:e.weekNumber,dates:e.dates})})),u.jsxs("tr",{className:s.row,style:i.row,children:[p,e.dates.map(function(m){return u.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:u.jsx(c,{displayMonth:e.displayMonth,date:m})},l9(m))})]})}function C_(e,t,n){for(var r=n!=null&&n.ISOWeek?ZN(t):U5(t,n),i=n!=null&&n.ISOWeek?Wu(e):wo(e,n),s=mo(r,i),a=[],l=0;l<=s;l++)a.push($i(i,l));var c=a.reduce(function(f,p){var m=n!=null&&n.ISOWeek?n6(p):i6(p,n),x=f.find(function(g){return g.weekNumber===m});return x?(x.dates.push(p),f):(f.push({weekNumber:m,dates:[p]}),f)},[]);return c}function N$(e,t){var n=C_(di(e),Ef(e),t);if(t!=null&&t.useFixedWeeks){var r=u9(e,t);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=dy(s,6-r),l=C_(dy(s,1),a,t);n.push.apply(n,l)}}return n}function j$(e){var t,n,r,i=Vn(),s=i.locale,a=i.classNames,l=i.styles,c=i.hideHead,f=i.fixedWeeks,p=i.components,m=i.weekStartsOn,x=i.firstWeekContainsDate,g=i.ISOWeek,N=N$(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:g,locale:s,weekStartsOn:m,firstWeekContainsDate:x}),j=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:BF,E=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:S$,b=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:RF;return u.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&u.jsx(j,{}),u.jsx("tbody",{className:a.tbody,style:l.tbody,children:N.map(function(S){return u.jsx(E,{displayMonth:e.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),u.jsx(b,{displayMonth:e.displayMonth})]})}function k$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var E$=k$()?k.useLayoutEffect:k.useEffect,Iv=!1,C$=0;function A_(){return"react-day-picker-".concat(++C$)}function A$(e){var t,n=e??(Iv?A_():null),r=k.useState(n),i=r[0],s=r[1];return E$(function(){i===null&&s(A_())},[]),k.useEffect(function(){Iv===!1&&(Iv=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function L$(e){var t,n,r=Vn(),i=r.dir,s=r.classNames,a=r.styles,l=r.components,c=Bp().displayMonths,f=A$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[s.month],x=a.month,g=e.displayIndex===0,N=e.displayIndex===c.length-1,j=!g&&!N;i==="rtl"&&(t=[g,N],N=t[0],g=t[1]),g&&(m.push(s.caption_start),x=Ft(Ft({},x),a.caption_start)),N&&(m.push(s.caption_end),x=Ft(Ft({},x),a.caption_end)),j&&(m.push(s.caption_between),x=Ft(Ft({},x),a.caption_between));var E=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:OF;return u.jsxs("div",{className:m.join(" "),style:x,children:[u.jsx(E,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),u.jsx(j$,{id:p,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function P$(e){var t=Vn(),n=t.classNames,r=t.styles;return u.jsx("div",{className:n.months,style:r.months,children:e.children})}function T$(e){var t,n,r=e.initialProps,i=Vn(),s=K5(),a=Bp(),l=k.useState(!1),c=l[0],f=l[1];k.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),f(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var m=Ft(Ft({},i.styles.root),i.style),x=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,j){var E;return Ft(Ft({},N),(E={},E[j]=r[j],E))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:P$;return u.jsx("div",Ft({className:p.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},x,{children:u.jsx(g,{children:a.displayMonths.map(function(N,j){return u.jsx(L$,{displayIndex:j,displayMonth:N},j)})})}))}function M$(e){var t=e.children,n=rF(e,["children"]);return u.jsx(_F,{initialProps:n,children:u.jsx(TF,{children:u.jsx(h$,{initialProps:n,children:u.jsx(UF,{initialProps:n,children:u.jsx(HF,{initialProps:n,children:u.jsx(ZF,{children:u.jsx(d$,{children:t})})})})})})})}function D$(e){return u.jsx(M$,Ft({},e,{children:u.jsx(T$,{initialProps:e})}))}function An(e){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}var Ei=Uint8Array,Is=Uint16Array,X5=Int32Array,Jg=new Ei([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xg=new Ei([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fy=new Ei([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y6=function(e,t){for(var n=new Is(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new X5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},x6=y6(Jg,2),w6=x6.b,hy=x6.r;w6[28]=258,hy[258]=28;var b6=y6(Xg,0),I$=b6.b,L_=b6.r,py=new Is(32768);for(var Kn=0;Kn<32768;++Kn){var tc=(Kn&43690)>>1|(Kn&21845)<<1;tc=(tc&52428)>>2|(tc&13107)<<2,tc=(tc&61680)>>4|(tc&3855)<<4,py[Kn]=((tc&65280)>>8|(tc&255)<<8)>>1}var xo=function(e,t,n){for(var r=e.length,i=0,s=new Is(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new Is(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Is(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var f=i<<4|e[i],p=t-e[i],m=a[e[i]-1]++<<p,x=m|(1<<p)-1;m<=x;++m)l[py[m]>>c]=f}else for(l=new Is(r),i=0;i<r;++i)e[i]&&(l[i]=py[a[e[i]-1]++]>>15-e[i]);return l},Dc=new Ei(288);for(var Kn=0;Kn<144;++Kn)Dc[Kn]=8;for(var Kn=144;Kn<256;++Kn)Dc[Kn]=9;for(var Kn=256;Kn<280;++Kn)Dc[Kn]=7;for(var Kn=280;Kn<288;++Kn)Dc[Kn]=8;var _p=new Ei(32);for(var Kn=0;Kn<32;++Kn)_p[Kn]=5;var O$=xo(Dc,9,0),R$=xo(Dc,9,1),F$=xo(_p,5,0),$$=xo(_p,5,1),Ov=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ea=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Rv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Q5=function(e){return(e+7)/8|0},_6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ei(e.subarray(t,n))},B$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pa=function(e,t,n){var r=new Error(t||B$[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Pa),!n)throw r;return r},z$=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Ei(0);var a=!n,l=a||t.i!=2,c=t.i;a&&(n=new Ei(i*3));var f=function(_e){var Re=n.length;if(_e>Re){var Fe=new Ei(Math.max(Re*2,_e));Fe.set(n),n=Fe}},p=t.f||0,m=t.p||0,x=t.b||0,g=t.l,N=t.d,j=t.m,E=t.n,b=i*8;do{if(!g){p=Ea(e,m,1);var S=Ea(e,m+1,3);if(m+=3,S)if(S==1)g=R$,N=$$,j=9,E=5;else if(S==2){var ie=Ea(e,m,31)+257,W=Ea(e,m+10,15)+4,$=ie+Ea(e,m+5,31)+1;m+=14;for(var oe=new Ei($),le=new Ei(19),R=0;R<W;++R)le[fy[R]]=Ea(e,m+R*3,7);m+=W*3;for(var q=Ov(le),J=(1<<q)-1,B=xo(le,q,1),R=0;R<$;){var fe=B[Ea(e,m,J)];m+=fe&15;var A=fe>>4;if(A<16)oe[R++]=A;else{var he=0,G=0;for(A==16?(G=3+Ea(e,m,3),m+=2,he=oe[R-1]):A==17?(G=3+Ea(e,m,7),m+=3):A==18&&(G=11+Ea(e,m,127),m+=7);G--;)oe[R++]=he}}var P=oe.subarray(0,ie),F=oe.subarray(ie);j=Ov(P),E=Ov(F),g=xo(P,j,1),N=xo(F,E,1)}else Pa(1);else{var A=Q5(m)+4,O=e[A-4]|e[A-3]<<8,K=A+O;if(K>i){c&&Pa(0);break}l&&f(x+O),n.set(e.subarray(A,K),x),t.b=x+=O,t.p=m=K*8,t.f=p;continue}if(m>b){c&&Pa(0);break}}l&&f(x+131072);for(var ne=(1<<j)-1,be=(1<<E)-1,T=m;;T=m){var he=g[Rv(e,m)&ne],H=he>>4;if(m+=he&15,m>b){c&&Pa(0);break}if(he||Pa(2),H<256)n[x++]=H;else if(H==256){T=m,g=null;break}else{var Z=H-254;if(H>264){var R=H-257,se=Jg[R];Z=Ea(e,m,(1<<se)-1)+w6[R],m+=se}var ce=N[Rv(e,m)&be],je=ce>>4;ce||Pa(3),m+=ce&15;var F=I$[je];if(je>3){var se=Xg[je];F+=Rv(e,m)&(1<<se)-1,m+=se}if(m>b){c&&Pa(0);break}l&&f(x+131072);var ke=x+Z;if(x<F){var ee=s-F,Se=Math.min(F,ke);for(ee+x<0&&Pa(3);x<Se;++x)n[x]=r[ee+x]}for(;x<ke;++x)n[x]=n[x-F]}}t.l=g,t.p=T,t.b=x,t.f=p,g&&(p=1,t.m=j,t.d=N,t.n=E)}while(!p);return x!=n.length&&a?_6(n,0,x):n.subarray(0,x)},Yo=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},jh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Fv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:N6,l:0};if(i==1){var a=new Ei(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(K,ie){return K.f-ie.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],f=0,p=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=n[n[f].f<n[m].f?f++:m++],c=n[f!=p&&n[f].f<n[m].f?f++:m++],n[p++]={s:-1,f:l.f+c.f,l,r:c};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var g=new Is(x+1),N=my(n[p-1],g,0);if(N>t){var r=0,j=0,E=N-t,b=1<<E;for(s.sort(function(ie,W){return g[W.s]-g[ie.s]||ie.f-W.f});r<i;++r){var S=s[r].s;if(g[S]>t)j+=b-(1<<N-g[S]),g[S]=t;else break}for(j>>=E;j>0;){var A=s[r].s;g[A]<t?j-=1<<t-g[A]++-1:++r}for(;r>=0&&j;--r){var O=s[r].s;g[O]==t&&(--g[O],++j)}N=t}return{t:new Ei(g),l:N}},my=function(e,t,n){return e.s==-1?Math.max(my(e.l,t,n+1),my(e.r,t,n+1)):t[e.s]=n},P_=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Is(++t),r=0,i=e[0],s=1,a=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:n.subarray(0,r),n:t}},kh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},S6=function(e,t,n){var r=n.length,i=Q5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},T_=function(e,t,n,r,i,s,a,l,c,f,p){Yo(t,p++,n),++i[256];for(var m=Fv(i,15),x=m.t,g=m.l,N=Fv(s,15),j=N.t,E=N.l,b=P_(x),S=b.c,A=b.n,O=P_(j),K=O.c,ie=O.n,W=new Is(19),$=0;$<S.length;++$)++W[S[$]&31];for(var $=0;$<K.length;++$)++W[K[$]&31];for(var oe=Fv(W,7),le=oe.t,R=oe.l,q=19;q>4&&!le[fy[q-1]];--q);var J=f+5<<3,B=kh(i,Dc)+kh(s,_p)+a,fe=kh(i,x)+kh(s,j)+a+14+3*q+kh(W,le)+2*W[16]+3*W[17]+7*W[18];if(c>=0&&J<=B&&J<=fe)return S6(t,p,e.subarray(c,c+f));var he,G,P,F;if(Yo(t,p,1+(fe<B)),p+=2,fe<B){he=xo(x,g,0),G=x,P=xo(j,E,0),F=j;var ne=xo(le,R,0);Yo(t,p,A-257),Yo(t,p+5,ie-1),Yo(t,p+10,q-4),p+=14;for(var $=0;$<q;++$)Yo(t,p+3*$,le[fy[$]]);p+=3*q;for(var be=[S,K],T=0;T<2;++T)for(var H=be[T],$=0;$<H.length;++$){var Z=H[$]&31;Yo(t,p,ne[Z]),p+=le[Z],Z>15&&(Yo(t,p,H[$]>>5&127),p+=H[$]>>12)}}else he=O$,G=Dc,P=F$,F=_p;for(var $=0;$<l;++$){var se=r[$];if(se>255){var Z=se>>18&31;jh(t,p,he[Z+257]),p+=G[Z+257],Z>7&&(Yo(t,p,se>>23&31),p+=Jg[Z]);var ce=se&31;jh(t,p,P[ce]),p+=F[ce],ce>3&&(jh(t,p,se>>5&8191),p+=Xg[ce])}else jh(t,p,he[se]),p+=G[se]}return jh(t,p,he[256]),p+G[256]},U$=new X5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),N6=new Ei(0),q$=function(e,t,n,r,i,s){var a=s.z||e.length,l=new Ei(r+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(r,l.length-i),f=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=U$[t-1],x=m>>13,g=m&8191,N=(1<<n)-1,j=s.p||new Is(32768),E=s.h||new Is(N+1),b=Math.ceil(n/3),S=2*b,A=function(Ge){return(e[Ge]^e[Ge+1]<<b^e[Ge+2]<<S)&N},O=new X5(25e3),K=new Is(288),ie=new Is(32),W=0,$=0,oe=s.i||0,le=0,R=s.w||0,q=0;oe+2<a;++oe){var J=A(oe),B=oe&32767,fe=E[J];if(j[B]=fe,E[J]=B,R<=oe){var he=a-oe;if((W>7e3||le>24576)&&(he>423||!f)){p=T_(e,c,0,O,K,ie,$,le,q,oe-q,p),le=W=$=0,q=oe;for(var G=0;G<286;++G)K[G]=0;for(var G=0;G<30;++G)ie[G]=0}var P=2,F=0,ne=g,be=B-fe&32767;if(he>2&&J==A(oe-be))for(var T=Math.min(x,he)-1,H=Math.min(32767,oe),Z=Math.min(258,he);be<=H&&--ne&&B!=fe;){if(e[oe+P]==e[oe+P-be]){for(var se=0;se<Z&&e[oe+se]==e[oe+se-be];++se);if(se>P){if(P=se,F=be,se>T)break;for(var ce=Math.min(be,se-2),je=0,G=0;G<ce;++G){var ke=oe-be+G&32767,ee=j[ke],Se=ke-ee&32767;Se>je&&(je=Se,fe=ke)}}}B=fe,fe=j[B],be+=B-fe&32767}if(F){O[le++]=268435456|hy[P]<<18|L_[F];var _e=hy[P]&31,Re=L_[F]&31;$+=Jg[_e]+Xg[Re],++K[257+_e],++ie[Re],R=oe+P,++W}else O[le++]=e[oe],++K[e[oe]]}}for(oe=Math.max(oe,R);oe<a;++oe)O[le++]=e[oe],++K[e[oe]];p=T_(e,c,f,O,K,ie,$,le,q,oe-q,p),f||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=E,s.p=j,s.i=oe,s.w=R)}else{for(var oe=s.w||0;oe<a+f;oe+=65535){var Fe=oe+65535;Fe>=a&&(c[p/8|0]=f,Fe=a),p=S6(c,p+1,e.subarray(oe,Fe))}s.i=a}return _6(l,0,r+Q5(p)+i)},j6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},W$=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Ei(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return q$(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},k6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},H$=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=j6();i.p(t.dictionary),k6(e,2,i.d())}},V$=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Pa(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Pa(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function gy(e,t){t||(t={});var n=j6();n.p(e);var r=W$(e,t,t.dictionary?6:2,4);return H$(r,t),k6(r,r.length-4,n.d()),r}function G$(e,t){return z$(e.subarray(V$(e,t),-4),{i:2},t,t)}var Y$=typeof TextDecoder<"u"&&new TextDecoder,K$=0;try{Y$.decode(N6,{stream:!0}),K$=1}catch{}var It=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $v(){It.console&&typeof It.console.log=="function"&&It.console.log.apply(It.console,arguments)}var $n={log:$v,warn:function(e){It.console&&(typeof It.console.warn=="function"?It.console.warn.apply(It.console,arguments):$v.call(null,arguments))},error:function(e){It.console&&(typeof It.console.error=="function"?It.console.error.apply(It.console,arguments):$v(e))}};function Bv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Nu(r.response,t,n)},r.onerror=function(){$n.error("could not download file")},r.send()}function M_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Jm(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Yh,vy,Nu=It.saveAs||((typeof window>"u"?"undefined":An(window))!=="object"||window!==It?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=It.URL||It.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?M_(i.href)?Bv(e,t,n):Jm(i,i.target="_blank"):Jm(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Jm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(M_(e))Bv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Jm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:An(s)!=="object"&&($n.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return Bv(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(It.HTMLElement)||It.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":An(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(e)}else{var c=It.URL||It.webkitURL,f=c.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function E6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+l+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zv(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=_i(n,r,i,s,t[0],7,-680876936),s=_i(s,n,r,i,t[1],12,-389564586),i=_i(i,s,n,r,t[2],17,606105819),r=_i(r,i,s,n,t[3],22,-1044525330),n=_i(n,r,i,s,t[4],7,-176418897),s=_i(s,n,r,i,t[5],12,1200080426),i=_i(i,s,n,r,t[6],17,-1473231341),r=_i(r,i,s,n,t[7],22,-45705983),n=_i(n,r,i,s,t[8],7,1770035416),s=_i(s,n,r,i,t[9],12,-1958414417),i=_i(i,s,n,r,t[10],17,-42063),r=_i(r,i,s,n,t[11],22,-1990404162),n=_i(n,r,i,s,t[12],7,1804603682),s=_i(s,n,r,i,t[13],12,-40341101),i=_i(i,s,n,r,t[14],17,-1502002290),n=Si(n,r=_i(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Si(s,n,r,i,t[6],9,-1069501632),i=Si(i,s,n,r,t[11],14,643717713),r=Si(r,i,s,n,t[0],20,-373897302),n=Si(n,r,i,s,t[5],5,-701558691),s=Si(s,n,r,i,t[10],9,38016083),i=Si(i,s,n,r,t[15],14,-660478335),r=Si(r,i,s,n,t[4],20,-405537848),n=Si(n,r,i,s,t[9],5,568446438),s=Si(s,n,r,i,t[14],9,-1019803690),i=Si(i,s,n,r,t[3],14,-187363961),r=Si(r,i,s,n,t[8],20,1163531501),n=Si(n,r,i,s,t[13],5,-1444681467),s=Si(s,n,r,i,t[2],9,-51403784),i=Si(i,s,n,r,t[7],14,1735328473),n=Ni(n,r=Si(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Ni(s,n,r,i,t[8],11,-2022574463),i=Ni(i,s,n,r,t[11],16,1839030562),r=Ni(r,i,s,n,t[14],23,-35309556),n=Ni(n,r,i,s,t[1],4,-1530992060),s=Ni(s,n,r,i,t[4],11,1272893353),i=Ni(i,s,n,r,t[7],16,-155497632),r=Ni(r,i,s,n,t[10],23,-1094730640),n=Ni(n,r,i,s,t[13],4,681279174),s=Ni(s,n,r,i,t[0],11,-358537222),i=Ni(i,s,n,r,t[3],16,-722521979),r=Ni(r,i,s,n,t[6],23,76029189),n=Ni(n,r,i,s,t[9],4,-640364487),s=Ni(s,n,r,i,t[12],11,-421815835),i=Ni(i,s,n,r,t[15],16,530742520),n=ji(n,r=Ni(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ji(s,n,r,i,t[7],10,1126891415),i=ji(i,s,n,r,t[14],15,-1416354905),r=ji(r,i,s,n,t[5],21,-57434055),n=ji(n,r,i,s,t[12],6,1700485571),s=ji(s,n,r,i,t[3],10,-1894986606),i=ji(i,s,n,r,t[10],15,-1051523),r=ji(r,i,s,n,t[1],21,-2054922799),n=ji(n,r,i,s,t[8],6,1873313359),s=ji(s,n,r,i,t[15],10,-30611744),i=ji(i,s,n,r,t[6],15,-1560198380),r=ji(r,i,s,n,t[13],21,1309151649),n=ji(n,r,i,s,t[4],6,-145523070),s=ji(s,n,r,i,t[11],10,-1120210379),i=ji(i,s,n,r,t[2],15,718787259),r=ji(r,i,s,n,t[9],21,-343485551),e[0]=xc(n,e[0]),e[1]=xc(r,e[1]),e[2]=xc(i,e[2]),e[3]=xc(s,e[3])}function Qg(e,t,n,r,i,s){return t=xc(xc(t,e),xc(r,s)),xc(t<<i|t>>>32-i,n)}function _i(e,t,n,r,i,s,a){return Qg(t&n|~t&r,e,t,i,s,a)}function Si(e,t,n,r,i,s,a){return Qg(t&r|n&~r,e,t,i,s,a)}function Ni(e,t,n,r,i,s,a){return Qg(t^n^r,e,t,i,s,a)}function ji(e,t,n,r,i,s,a){return Qg(n^(t|~r),e,t,i,s,a)}function C6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)zv(r,J$(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(zv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,zv(r,i),r}function J$(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Yh=It.atob.bind(It),vy=It.btoa.bind(It);var D_="0123456789abcdef".split("");function X$(e){for(var t="",n=0;n<4;n++)t+=D_[e>>8*n+4&15]+D_[e>>8*n&15];return t}function Q$(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function yy(e){return C6(e).map(Q$).join("")}var Z$=function(e){for(var t=0;t<e.length;t++)e[t]=X$(e[t]);return e.join("")}(C6("hello"))!="5d41402abc4b2a76b9719d911017c592";function xc(e,t){if(Z$){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function xy(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var f=0;for(c=0;c<256;c++){var p=l[c];f=(f+p+a.charCodeAt(c))%256,l[c]=l[f],l[f]=p}n=e,r=l}else l=r;var m=t.length,x=0,g=0,N="";for(c=0;c<m;c++)g=(g+(p=l[x=(x+1)%256]))%256,l[x]=l[g],l[g]=p,a=l[(l[x]+l[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var I_={print:4,modify:8,copy:16,"annot-forms":32};function Ud(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(I_.perm!==void 0)throw new Error("Invalid permission: "+l);i+=I_[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=yy(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=xy(this.encryptionKey,this.padding)}function qd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function O_(e){if(An(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(l){It.console&&$n.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ig(e){if(!(this instanceof ig))return new ig(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function A6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Eu(e,t,n,r,i){if(!(this instanceof Eu))return new Eu(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,A6.call(this,r,i)}function nf(e,t,n,r,i){if(!(this instanceof nf))return new nf(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,A6.call(this,r,i)}function Dt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,c=16,f="S",p=null;An(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),f=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,x={},g={internal:{},__private__:{}};g.__private__.PubSub=O_;var N="1.3",j=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(w){N=w};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var b=g.__private__.getPageFormat=function(w){return E[w]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},A=S.COMPAT;function O(){this.saveGraphicsState(),te(new gt(qe,0,0,-qe,0,Hs()*qe).toString()+" cm"),this.setFontSize(this.getFontSize()/qe),f="n",A=S.ADVANCED}function K(){this.restoreGraphicsState(),f="S",A=S.COMPAT}var ie=g.__private__.combineFontStyleAndFontWeight=function(w,D){if(w=="bold"&&D=="normal"||w=="bold"&&D==400||w=="normal"&&D=="italic"||w=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(w=D==400||D==="normal"?w==="italic"?"italic":"normal":D!=700&&D!=="bold"||w!=="normal"?(D==700?"bold":D)+""+w:"bold"),w};g.advancedAPI=function(w){var D=A===S.COMPAT;return D&&O.call(this),typeof w!="function"||(w(this),D&&K.call(this)),this},g.compatAPI=function(w){var D=A===S.ADVANCED;return D&&K.call(this),typeof w!="function"||(w(this),D&&O.call(this)),this},g.isAdvancedAPI=function(){return A===S.ADVANCED};var W,$=function(w){if(A!==S.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},oe=g.roundToPrecision=g.__private__.roundToPrecision=function(w,D){var ae=t||D;if(isNaN(w)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ae).replace(/0+$/,"")};W=g.hpf=g.__private__.hpf=typeof c=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(w,c)}:c==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(w,16)};var le=g.f2=g.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return oe(w,2)},R=g.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return oe(w,3)},q=g.scale=g.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return A===S.COMPAT?w*qe:A===S.ADVANCED?w:void 0},J=function(w){return A===S.COMPAT?Hs()-w:A===S.ADVANCED?w:void 0},B=function(w){return q(J(w))};g.__private__.setPrecision=g.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(t=parseInt(w,10))};var fe,he="00000000000000000000000000000000",G=g.__private__.getFileId=function(){return he},P=g.__private__.setFileId=function(w){return he=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Wr=new Ud(p.userPermissions,p.userPassword,p.ownerPassword,he)),he};g.setFileId=function(w){return P(w),this},g.getFileId=function(){return G()};var F=g.__private__.convertDateToPDFDate=function(w){var D=w.getTimezoneOffset(),ae=D<0?"+":"-",ve=Math.floor(Math.abs(D/60)),Te=Math.abs(D%60),ze=[ae,Z(ve),"'",Z(Te),"'"].join("");return["D:",w.getFullYear(),Z(w.getMonth()+1),Z(w.getDate()),Z(w.getHours()),Z(w.getMinutes()),Z(w.getSeconds()),ze].join("")},ne=g.__private__.convertPDFDateToDate=function(w){var D=parseInt(w.substr(2,4),10),ae=parseInt(w.substr(6,2),10)-1,ve=parseInt(w.substr(8,2),10),Te=parseInt(w.substr(10,2),10),ze=parseInt(w.substr(12,2),10),it=parseInt(w.substr(14,2),10);return new Date(D,ae,ve,Te,ze,it,0)},be=g.__private__.setCreationDate=function(w){var D;if(w===void 0&&(w=new Date),w instanceof Date)D=F(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=w}return fe=D},T=g.__private__.getCreationDate=function(w){var D=fe;return w==="jsDate"&&(D=ne(fe)),D};g.setCreationDate=function(w){return be(w),this},g.getCreationDate=function(w){return T(w)};var H,Z=g.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},se=g.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ce=0,je=[],ke=[],ee=0,Se=[],_e=[],Re=!1,Fe=ke,Ge=function(){ce=0,ee=0,ke=[],je=[],Se=[],Ai=Tn(),vs=Tn()};g.__private__.setCustomOutputDestination=function(w){Re=!0,Fe=w};var pe=function(w){Re||(Fe=w)};g.__private__.resetCustomOutputDestination=function(){Re=!1,Fe=ke};var te=g.__private__.out=function(w){return w=w.toString(),ee+=w.length+1,Fe.push(w),Fe},et=g.__private__.write=function(w){return te(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},He=g.__private__.getArrayBuffer=function(w){for(var D=w.length,ae=new ArrayBuffer(D),ve=new Uint8Array(ae);D--;)ve[D]=w.charCodeAt(D);return ae},Ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ve};var Qe=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(w){return Qe=A===S.ADVANCED?w/qe:w,this};var at,Ae=g.__private__.getFontSize=g.getFontSize=function(){return A===S.COMPAT?Qe:Qe*qe},de=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(w){return de=w,this},g.__private__.getR2L=g.getR2L=function(){return de};var me,ge=g.__private__.setZoomMode=function(w){var D=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))at=w;else if(isNaN(w)){if(D.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');at=w}else at=parseInt(w,10)};g.__private__.getZoomMode=function(){return at};var $e,We=g.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');me=w};g.__private__.getPageMode=function(){return me};var Ke=g.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');$e=w};g.__private__.getLayoutMode=function(){return $e},g.__private__.setDisplayMode=g.setDisplayMode=function(w,D,ae){return ge(w),Ke(D),We(ae),this};var Me={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(w){if(Object.keys(Me).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Me[w]},g.__private__.getDocumentProperties=function(){return Me},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(w){for(var D in Me)Me.hasOwnProperty(D)&&w[D]&&(Me[D]=w[D]);return this},g.__private__.setDocumentProperty=function(w,D){if(Object.keys(Me).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Me[w]=D};var rt,qe,At,lt,Bt,St={},Ct={},mn=[],Pt={},Qn={},Et={},or={},un=null,qt=0,_t=[],Wt=new O_(g),wn=e.hotfixes||[],rn={},lr={},Rr=[],gt=function w(D,ae,ve,Te,ze,it){if(!(this instanceof w))return new w(D,ae,ve,Te,ze,it);isNaN(D)&&(D=1),isNaN(ae)&&(ae=0),isNaN(ve)&&(ve=0),isNaN(Te)&&(Te=1),isNaN(ze)&&(ze=0),isNaN(it)&&(it=0),this._matrix=[D,ae,ve,Te,ze,it]};Object.defineProperty(gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(W).join(w)},gt.prototype.multiply=function(w){var D=w.sx*this.sx+w.shy*this.shx,ae=w.sx*this.shy+w.shy*this.sy,ve=w.shx*this.sx+w.sy*this.shx,Te=w.shx*this.shy+w.sy*this.sy,ze=w.tx*this.sx+w.ty*this.shx+this.tx,it=w.tx*this.shy+w.ty*this.sy+this.ty;return new gt(D,ae,ve,Te,ze,it)},gt.prototype.decompose=function(){var w=this.sx,D=this.shy,ae=this.shx,ve=this.sy,Te=this.tx,ze=this.ty,it=Math.sqrt(w*w+D*D),pt=(w/=it)*ae+(D/=it)*ve;ae-=w*pt,ve-=D*pt;var kt=Math.sqrt(ae*ae+ve*ve);return pt/=kt,w*(ve/=kt)<D*(ae/=kt)&&(w=-w,D=-D,pt=-pt,it=-it),{scale:new gt(it,0,0,kt,0,0),translate:new gt(1,0,0,1,Te,ze),rotate:new gt(w,D,-D,w,0,0),skew:new gt(1,0,pt,1,0,0)}},gt.prototype.toString=function(w){return this.join(" ")},gt.prototype.inversed=function(){var w=this.sx,D=this.shy,ae=this.shx,ve=this.sy,Te=this.tx,ze=this.ty,it=1/(w*ve-D*ae),pt=ve*it,kt=-D*it,zt=-ae*it,Rt=w*it;return new gt(pt,kt,zt,Rt,-pt*Te-zt*ze,-kt*Te-Rt*ze)},gt.prototype.applyToPoint=function(w){var D=w.x*this.sx+w.y*this.shx+this.tx,ae=w.x*this.shy+w.y*this.sy+this.ty;return new $r(D,ae)},gt.prototype.applyToRectangle=function(w){var D=this.applyToPoint(w),ae=this.applyToPoint(new $r(w.x+w.w,w.y+w.h));return new Qc(D.x,D.y,ae.x-D.x,ae.y-D.y)},gt.prototype.clone=function(){var w=this.sx,D=this.shy,ae=this.shx,ve=this.sy,Te=this.tx,ze=this.ty;return new gt(w,D,ae,ve,Te,ze)},g.Matrix=gt;var Zn=g.matrixMult=function(w,D){return D.multiply(w)},cr=new gt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=cr;var Pn=function(w,D){if(!Qn[w]){var ae=(D instanceof Eu?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);D.id=ae,Qn[w]=ae,Pt[ae]=D,Wt.publish("addPattern",D)}};g.ShadingPattern=Eu,g.TilingPattern=nf,g.addShadingPattern=function(w,D){return $("addShadingPattern()"),Pn(w,D),this},g.beginTilingPattern=function(w){$("beginTilingPattern()"),bs(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},g.endTilingPattern=function(w,D){$("endTilingPattern()"),D.stream=_e[H].join(`
`),Pn(w,D),Wt.publish("endTilingPattern",D),Rr.pop().restore()};var Rn=g.__private__.newObject=function(){var w=Tn();return er(w,!0),w},Tn=g.__private__.newObjectDeferred=function(){return ce++,je[ce]=function(){return ee},ce},er=function(w,D){return D=typeof D=="boolean"&&D,je[w]=ee,D&&te(w+" 0 obj"),w},Wi=g.__private__.newAdditionalObject=function(){var w={objId:Tn(),content:""};return Se.push(w),w},Ai=Tn(),vs=Tn(),ys=g.__private__.decodeColorString=function(w){var D=w.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length===5&&(D[4]==="k"||D[4]==="K")&&(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var ae=parseFloat(D[0]);D=[ae,ae,ae,"r"]}for(var ve="#",Te=0;Te<3;Te++)ve+=("0"+Math.floor(255*parseFloat(D[Te])).toString(16)).slice(-2);return ve},xs=g.__private__.encodeColorString=function(w){var D;typeof w=="string"&&(w={ch1:w});var ae=w.ch1,ve=w.ch2,Te=w.ch3,ze=w.ch4,it=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var pt=new E6(ae);if(pt.ok)ae=pt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var kt=parseInt(ae.substr(1),16);ae=kt>>16&255,ve=kt>>8&255,Te=255&kt}if(ve===void 0||ze===void 0&&ae===ve&&ve===Te)if(typeof ae=="string")D=ae+" "+it[0];else switch(w.precision){case 2:D=le(ae/255)+" "+it[0];break;case 3:default:D=R(ae/255)+" "+it[0]}else if(ze===void 0||An(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return D=["1.","1.","1.",it[1]].join(" ");if(typeof ae=="string")D=[ae,ve,Te,it[1]].join(" ");else switch(w.precision){case 2:D=[le(ae/255),le(ve/255),le(Te/255),it[1]].join(" ");break;default:case 3:D=[R(ae/255),R(ve/255),R(Te/255),it[1]].join(" ")}}else if(typeof ae=="string")D=[ae,ve,Te,ze,it[2]].join(" ");else switch(w.precision){case 2:D=[le(ae),le(ve),le(Te),le(ze),it[2]].join(" ");break;case 3:default:D=[R(ae),R(ve),R(Te),R(ze),it[2]].join(" ")}return D},ws=g.__private__.getFilters=function(){return a},Hi=g.__private__.putStream=function(w){var D=(w=w||{}).data||"",ae=w.filters||ws(),ve=w.alreadyAppliedFilters||[],Te=w.addLength1||!1,ze=D.length,it=w.objectId,pt=function(Tr){return Tr};if(p!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(pt=Wr.encryptor(it,0));var kt={};ae===!0&&(ae=["FlateEncode"]);var zt=w.additionalKeyValues||[],Rt=(kt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(D,ae):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(kt.data.length!==0&&(zt.push({key:"Length",value:kt.data.length}),Te===!0&&zt.push({key:"Length1",value:ze})),Rt.length!=0)if(Rt.split("/").length-1==1)zt.push({key:"Filter",value:Rt});else{zt.push({key:"Filter",value:"["+Rt+"]"});for(var tn=0;tn<zt.length;tn+=1)if(zt[tn].key==="DecodeParms"){for(var zn=[],rr=0;rr<kt.reverseChain.split("/").length-1;rr+=1)zn.push("null");zn.push(zt[tn].value),zt[tn].value="["+zn.join(" ")+"]"}}te("<<");for(var ir=0;ir<zt.length;ir++)te("/"+zt[ir].key+" "+zt[ir].value);te(">>"),kt.data.length!==0&&(te("stream"),te(pt(kt.data)),te("endstream"))},Bs=g.__private__.putPage=function(w){var D=w.number,ae=w.data,ve=w.objId,Te=w.contentsObjId;er(ve,!0),te("<</Type /Page"),te("/Parent "+w.rootDictionaryObjId+" 0 R"),te("/Resources "+w.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(W(w.mediaBox.bottomLeftX))+" "+parseFloat(W(w.mediaBox.bottomLeftY))+" "+W(w.mediaBox.topRightX)+" "+W(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&te("/CropBox ["+W(w.cropBox.bottomLeftX)+" "+W(w.cropBox.bottomLeftY)+" "+W(w.cropBox.topRightX)+" "+W(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&te("/BleedBox ["+W(w.bleedBox.bottomLeftX)+" "+W(w.bleedBox.bottomLeftY)+" "+W(w.bleedBox.topRightX)+" "+W(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&te("/TrimBox ["+W(w.trimBox.bottomLeftX)+" "+W(w.trimBox.bottomLeftY)+" "+W(w.trimBox.topRightX)+" "+W(w.trimBox.topRightY)+"]"),w.artBox!==null&&te("/ArtBox ["+W(w.artBox.bottomLeftX)+" "+W(w.artBox.bottomLeftY)+" "+W(w.artBox.topRightX)+" "+W(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&te("/UserUnit "+w.userUnit),Wt.publish("putPage",{objId:ve,pageContext:_t[D],pageNumber:D,page:ae}),te("/Contents "+Te+" 0 R"),te(">>"),te("endobj");var ze=ae.join(`
`);return A===S.ADVANCED&&(ze+=`
Q`),er(Te,!0),Hi({data:ze,filters:ws(),objectId:Te}),te("endobj"),ve},jo=g.__private__.putPages=function(){var w,D,ae=[];for(w=1;w<=qt;w++)_t[w].objId=Tn(),_t[w].contentsObjId=Tn();for(w=1;w<=qt;w++)ae.push(Bs({number:w,data:_e[w],objId:_t[w].objId,contentsObjId:_t[w].contentsObjId,mediaBox:_t[w].mediaBox,cropBox:_t[w].cropBox,bleedBox:_t[w].bleedBox,trimBox:_t[w].trimBox,artBox:_t[w].artBox,userUnit:_t[w].userUnit,rootDictionaryObjId:Ai,resourceDictionaryObjId:vs}));er(Ai,!0),te("<</Type /Pages");var ve="/Kids [";for(D=0;D<qt;D++)ve+=ae[D]+" 0 R ";te(ve+"]"),te("/Count "+qt),te(">>"),te("endobj"),Wt.publish("postPutPages")},ul=function(w){Wt.publish("putFont",{font:w,out:te,newObject:Rn,putStream:Hi}),w.isAlreadyPutted!==!0&&(w.objectNumber=Rn(),te("<<"),te("/Type /Font"),te("/BaseFont /"+qd(w.postScriptName)),te("/Subtype /Type1"),typeof w.encoding=="string"&&te("/Encoding /"+w.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},dl=function(){for(var w in St)St.hasOwnProperty(w)&&(m===!1||m===!0&&x.hasOwnProperty(w))&&ul(St[w])},fl=function(w){w.objectNumber=Rn();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[W(w.x),W(w.y),W(w.x+w.width),W(w.y+w.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ae=w.pages[1].join(`
`);Hi({data:ae,additionalKeyValues:D,objectId:w.objectNumber}),te("endobj")},ha=function(){for(var w in rn)rn.hasOwnProperty(w)&&fl(rn[w])},Qu=function(w,D){var ae,ve=[],Te=1/(D-1);for(ae=0;ae<1;ae+=Te)ve.push(ae);if(ve.push(1),w[0].offset!=0){var ze={offset:0,color:w[0].color};w.unshift(ze)}if(w[w.length-1].offset!=1){var it={offset:1,color:w[w.length-1].color};w.push(it)}for(var pt="",kt=0,zt=0;zt<ve.length;zt++){for(ae=ve[zt];ae>w[kt+1].offset;)kt++;var Rt=w[kt].offset,tn=(ae-Rt)/(w[kt+1].offset-Rt),zn=w[kt].color,rr=w[kt+1].color;pt+=se(Math.round((1-tn)*zn[0]+tn*rr[0]).toString(16))+se(Math.round((1-tn)*zn[1]+tn*rr[1]).toString(16))+se(Math.round((1-tn)*zn[2]+tn*rr[2]).toString(16))}return pt.trim()},hl=function(w,D){D||(D=21);var ae=Rn(),ve=Qu(w.colors,D),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+D+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hi({data:ve,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),te("endobj"),w.objectNumber=Rn(),te("<< /ShadingType "+w.type),te("/ColorSpace /DeviceRGB");var ze="/Coords ["+W(parseFloat(w.coords[0]))+" "+W(parseFloat(w.coords[1]))+" ";w.type===2?ze+=W(parseFloat(w.coords[2]))+" "+W(parseFloat(w.coords[3])):ze+=W(parseFloat(w.coords[2]))+" "+W(parseFloat(w.coords[3]))+" "+W(parseFloat(w.coords[4]))+" "+W(parseFloat(w.coords[5])),te(ze+="]"),w.matrix&&te("/Matrix ["+w.matrix.toString()+"]"),te("/Function "+ae+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Bf=function(w,D){var ae=Tn(),ve=Rn();D.push({resourcesOid:ae,objectOid:ve}),w.objectNumber=ve;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+w.boundingBox.map(W).join(" ")+"]"}),Te.push({key:"XStep",value:W(w.xStep)}),Te.push({key:"YStep",value:W(w.yStep)}),Te.push({key:"Resources",value:ae+" 0 R"}),w.matrix&&Te.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Hi({data:w.stream,additionalKeyValues:Te,objectId:w.objectNumber}),te("endobj")},pl=function(w){var D;for(D in Pt)Pt.hasOwnProperty(D)&&(Pt[D]instanceof Eu?hl(Pt[D]):Pt[D]instanceof nf&&Bf(Pt[D],w))},Zu=function(w){for(var D in w.objectNumber=Rn(),te("<<"),w)switch(D){case"opacity":te("/ca "+le(w[D]));break;case"stroke-opacity":te("/CA "+le(w[D]))}te(">>"),te("endobj")},ed=function(){var w;for(w in Et)Et.hasOwnProperty(w)&&Zu(Et[w])},ml=function(){for(var w in te("/XObject <<"),rn)rn.hasOwnProperty(w)&&rn[w].objectNumber>=0&&te("/"+w+" "+rn[w].objectNumber+" 0 R");Wt.publish("putXobjectDict"),te(">>")},td=function(){Wr.oid=Rn(),te("<<"),te("/Filter /Standard"),te("/V "+Wr.v),te("/R "+Wr.r),te("/U <"+Wr.toHexString(Wr.U)+">"),te("/O <"+Wr.toHexString(Wr.O)+">"),te("/P "+Wr.P),te(">>"),te("endobj")},nd=function(){for(var w in te("/Font <<"),St)St.hasOwnProperty(w)&&(m===!1||m===!0&&x.hasOwnProperty(w))&&te("/"+w+" "+St[w].objectNumber+" 0 R");te(">>")},zf=function(){if(Object.keys(Pt).length>0){for(var w in te("/Shading <<"),Pt)Pt.hasOwnProperty(w)&&Pt[w]instanceof Eu&&Pt[w].objectNumber>=0&&te("/"+w+" "+Pt[w].objectNumber+" 0 R");Wt.publish("putShadingPatternDict"),te(">>")}},gl=function(w){if(Object.keys(Pt).length>0){for(var D in te("/Pattern <<"),Pt)Pt.hasOwnProperty(D)&&Pt[D]instanceof g.TilingPattern&&Pt[D].objectNumber>=0&&Pt[D].objectNumber<w&&te("/"+D+" "+Pt[D].objectNumber+" 0 R");Wt.publish("putTilingPatternDict"),te(">>")}},Uf=function(){if(Object.keys(Et).length>0){var w;for(w in te("/ExtGState <<"),Et)Et.hasOwnProperty(w)&&Et[w].objectNumber>=0&&te("/"+w+" "+Et[w].objectNumber+" 0 R");Wt.publish("putGStateDict"),te(">>")}},tr=function(w){er(w.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),nd(),zf(),gl(w.objectOid),Uf(),ml(),te(">>"),te("endobj")},Uc=function(){var w=[];dl(),ed(),ha(),pl(w),Wt.publish("putResources"),w.forEach(tr),tr({resourcesOid:vs,objectOid:Number.MAX_SAFE_INTEGER}),Wt.publish("postPutResources")},qc=function(){Wt.publish("putAdditionalObjects");for(var w=0;w<Se.length;w++){var D=Se[w];er(D.objId,!0),te(D.content),te("endobj")}Wt.publish("postPutAdditionalObjects")},vl=function(w){Ct[w.fontName]=Ct[w.fontName]||{},Ct[w.fontName][w.fontStyle]=w.id},Wc=function(w,D,ae,ve,Te){var ze={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:w,fontName:D,fontStyle:ae,encoding:ve,isStandardFont:Te||!1,metadata:{}};return Wt.publish("addFont",{font:ze,instance:this}),St[ze.id]=ze,vl(ze),ze.id},rd=function(w){for(var D=0,ae=Ve.length;D<ae;D++){var ve=Wc.call(this,w[D][0],w[D][1],w[D][2],Ve[D][3],!0);m===!1&&(x[ve]=!0);var Te=w[D][0].split("-");vl({id:ve,fontName:Te[0],fontStyle:Te[1]||""})}Wt.publish("addFonts",{fonts:St,dictionary:Ct})},hi=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(ve){var D=ve.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var ae="Error in function "+D.split(`
`)[0].split("<")[0]+": "+ve.message;if(!It.console)throw new Error(ae);It.console.error(ae,ve),It.alert&&alert(ae)}},w.foo.bar=w,w.foo},ko=function(w,D){var ae,ve,Te,ze,it,pt,kt,zt,Rt;if(Te=(D=D||{}).sourceEncoding||"Unicode",it=D.outputEncoding,(D.autoencode||it)&&St[rt].metadata&&St[rt].metadata[Te]&&St[rt].metadata[Te].encoding&&(ze=St[rt].metadata[Te].encoding,!it&&St[rt].encoding&&(it=St[rt].encoding),!it&&ze.codePages&&(it=ze.codePages[0]),typeof it=="string"&&(it=ze[it]),it)){for(kt=!1,pt=[],ae=0,ve=w.length;ae<ve;ae++)(zt=it[w.charCodeAt(ae)])?pt.push(String.fromCharCode(zt)):pt.push(w[ae]),pt[ae].charCodeAt(0)>>8&&(kt=!0);w=pt.join("")}for(ae=w.length;kt===void 0&&ae!==0;)w.charCodeAt(ae-1)>>8&&(kt=!0),ae--;if(!kt)return w;for(pt=D.noBOM?[]:[254,255],ae=0,ve=w.length;ae<ve;ae++){if((Rt=(zt=w.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Rt),pt.push(zt-(Rt<<8))}return String.fromCharCode.apply(void 0,pt)},pi=g.__private__.pdfEscape=g.pdfEscape=function(w,D){return ko(w,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yl=g.__private__.beginPage=function(w){_e[++qt]=[],_t[qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},id(qt),pe(_e[H])},Hc=function(w,D){var ae,ve,Te;switch(n=D||n,typeof w=="string"&&(ae=b(w.toLowerCase()),Array.isArray(ae)&&(ve=ae[0],Te=ae[1])),Array.isArray(w)&&(ve=w[0]*qe,Te=w[1]*qe),isNaN(ve)&&(ve=i[0],Te=i[1]),(ve>14400||Te>14400)&&($n.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Te=Math.min(14400,Te)),i=[ve,Te],n.substr(0,1)){case"l":Te>ve&&(i=[Te,ve]);break;case"p":ve>Te&&(i=[Te,ve])}yl(i),ud(Jc),te(nr),Nl!==0&&te(Nl+" J"),Fr!==0&&te(Fr+" j"),Wt.publish("addPage",{pageNumber:qt})},Vc=function(w){w>0&&w<=qt&&(_e.splice(w,1),_t.splice(w,1),qt--,H>qt&&(H=qt),this.setPage(H))},id=function(w){w>0&&w<=qt&&(H=w)},sd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return _e.length-1},xl=function(w,D,ae){var ve,Te=void 0;return ae=ae||{},w=w!==void 0?w:St[rt].fontName,D=D!==void 0?D:St[rt].fontStyle,ve=w.toLowerCase(),Ct[ve]!==void 0&&Ct[ve][D]!==void 0?Te=Ct[ve][D]:Ct[w]!==void 0&&Ct[w][D]!==void 0?Te=Ct[w][D]:ae.disableWarning===!1&&$n.warn("Unable to look up font label for font '"+w+"', '"+D+"'. Refer to getFontList() for available fonts."),Te||ae.noFallback||(Te=Ct.times[D])==null&&(Te=Ct.times.normal),Te},Gc=g.__private__.putInfo=function(){var w=Rn(),D=function(ve){return ve};for(var ae in p!==null&&(D=Wr.encryptor(w,0)),te("<<"),te("/Producer ("+pi(D("jsPDF "+Dt.version))+")"),Me)Me.hasOwnProperty(ae)&&Me[ae]&&te("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+pi(D(Me[ae]))+")");te("/CreationDate ("+pi(D(fe))+")"),te(">>"),te("endobj")},zs=g.__private__.putCatalog=function(w){var D=(w=w||{}).rootDictionaryObjId||Ai;switch(Rn(),te("<<"),te("/Type /Catalog"),te("/Pages "+D+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+at;ae.substr(ae.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&te("/OpenAction [3 0 R /XYZ null null "+le(at)+"]")}switch($e||($e="continuous"),$e){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}me&&te("/PageMode /"+me),Wt.publish("putCatalog"),te(">>"),te("endobj")},ad=g.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(ce+1)),te("/Root "+ce+" 0 R"),te("/Info "+(ce-1)+" 0 R"),p!==null&&te("/Encrypt "+Wr.oid+" 0 R"),te("/ID [ <"+he+"> <"+he+"> ]"),te(">>")},od=g.__private__.putHeader=function(){te("%PDF-"+N),te("%")},qf=g.__private__.putXRef=function(){var w="0000000000";te("xref"),te("0 "+(ce+1)),te("0000000000 65535 f ");for(var D=1;D<=ce;D++)typeof je[D]=="function"?te((w+je[D]()).slice(-10)+" 00000 n "):je[D]!==void 0?te((w+je[D]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Us=g.__private__.buildDocument=function(){Ge(),pe(ke),Wt.publish("buildDocument"),od(),jo(),qc(),Uc(),p!==null&&td(),Gc(),zs();var w=ee;return qf(),ad(),te("startxref"),te(""+w),te("%%EOF"),pe(_e[H]),ke.join(`
`)},Eo=g.__private__.getBlob=function(w){return new Blob([He(w)],{type:"application/pdf"})},Co=g.output=g.__private__.output=hi(function(w,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",w){case void 0:return Us();case"save":g.save(D.filename);break;case"arraybuffer":return He(Us());case"blob":return Eo(Us());case"bloburi":case"bloburl":if(It.URL!==void 0&&typeof It.URL.createObjectURL=="function")return It.URL&&It.URL.createObjectURL(Eo(Us()))||void 0;$n.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",ve=Us();try{ae=vy(ve)}catch{ae=vy(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+D.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(Te=D.pdfObjectUrl,ze="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",pt=It.open();return pt!==null&&pt.document.write(it),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',zt=It.open();if(zt!==null){zt.document.write(kt);var Rt=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=D.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rt.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(It)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',zn=It.open();if(zn!==null&&(zn.document.write(tn),zn.document.title=D.filename),zn||typeof safari>"u")return zn;break;case"datauri":case"dataurl":return It.document.location.href=this.output("datauristring",D);default:return null}}),Yc=function(w){return Array.isArray(wn)===!0&&wn.indexOf(w)>-1};switch(r){case"pt":qe=1;break;case"mm":qe=72/25.4;break;case"cm":qe=72/2.54;break;case"in":qe=72;break;case"px":qe=Yc("px_scaling")==1?.75:96/72;break;case"pc":case"em":qe=12;break;case"ex":qe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);qe=r}var Wr=null;be(),P();var Wf=function(w){return p!==null?Wr.encryptor(w,0):function(D){return D}},ld=g.__private__.getPageInfo=g.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_t[w].objId,pageNumber:w,pageContext:_t[w]}},Ot=g.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in _t)if(_t[D].objId===w)break;return ld(D)},Hf=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:_t[H].objId,pageNumber:H,pageContext:_t[H]}};g.addPage=function(){return Hc.apply(this,arguments),this},g.setPage=function(){return id.apply(this,arguments),pe.call(this,_e[H]),this},g.insertPage=function(w){return this.addPage(),this.movePage(H,w),this},g.movePage=function(w,D){var ae,ve;if(w>D){ae=_e[w],ve=_t[w];for(var Te=w;Te>D;Te--)_e[Te]=_e[Te-1],_t[Te]=_t[Te-1];_e[D]=ae,_t[D]=ve,this.setPage(D)}else if(w<D){ae=_e[w],ve=_t[w];for(var ze=w;ze<D;ze++)_e[ze]=_e[ze+1],_t[ze]=_t[ze+1];_e[D]=ae,_t[D]=ve,this.setPage(D)}return this},g.deletePage=function(){return Vc.apply(this,arguments),this},g.__private__.text=g.text=function(w,D,ae,ve,Te){var ze,it,pt,kt,zt,Rt,tn,zn,rr,ir=(ve=ve||{}).scope||this;if(typeof w=="number"&&typeof D=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Tr=ae;ae=D,D=w,w=Tr}if(arguments[3]instanceof gt?($("The transform parameter of text() with a Matrix value"),rr=Te):(pt=arguments[4],kt=arguments[5],An(tn=arguments[3])==="object"&&tn!==null||(typeof pt=="string"&&(kt=pt,pt=null),typeof tn=="string"&&(kt=tn,tn=null),typeof tn=="number"&&(pt=tn,tn=null),ve={flags:tn,angle:pt,align:kt})),isNaN(D)||isNaN(ae)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return ir;var Mr="",Yi=!1,Fn=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:Ao,Ki=ir.internal.scaleFactor;function Va(_n){return _n=_n.split("	").join(Array(ve.TabLen||9).join(" ")),pi(_n,tn)}function El(_n){for(var Mn,ur=_n.concat(),Sr=[],Qi=ur.length;Qi--;)typeof(Mn=ur.shift())=="string"?Sr.push(Mn):Array.isArray(_n)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?Sr.push(Mn[0]):Sr.push([Mn[0],Mn[1],Mn[2]]);return Sr}function Cl(_n,Mn){var ur;if(typeof _n=="string")ur=Mn(_n)[0];else if(Array.isArray(_n)){for(var Sr,Qi,Zi=_n.concat(),va=[],nu=Zi.length;nu--;)typeof(Sr=Zi.shift())=="string"?va.push(Mn(Sr)[0]):Array.isArray(Sr)&&typeof Sr[0]=="string"&&(Qi=Mn(Sr[0],Sr[1],Sr[2]),va.push([Qi[0],Qi[1],Qi[2]]));ur=va}return ur}var Al=!1,eu=!0;if(typeof w=="string")Al=!0;else if(Array.isArray(w)){var tu=w.concat();it=[];for(var Ll,Br=tu.length;Br--;)(typeof(Ll=tu.shift())!="string"||Array.isArray(Ll)&&typeof Ll[0]!="string")&&(eu=!1);Al=eu}if(Al===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var _s=Qe/ir.internal.scaleFactor,Pl=_s*(Fn-1);switch(ve.baseline){case"bottom":ae-=Pl;break;case"top":ae+=_s-Pl;break;case"hanging":ae+=_s-2*Pl;break;case"middle":ae+=_s/2-Pl}if((Rt=ve.maxWidth||0)>0&&(typeof w=="string"?w=ir.splitTextToSize(w,Rt):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(_n,Mn){return _n.concat(ir.splitTextToSize(Mn,Rt))},[]))),ze={text:w,x:D,y:ae,options:ve,mutex:{pdfEscape:pi,activeFontKey:rt,fonts:St,activeFontSize:Qe}},Wt.publish("preProcessText",ze),w=ze.text,pt=(ve=ze.options).angle,!(rr instanceof gt)&&pt&&typeof pt=="number"){pt*=Math.PI/180,ve.rotationDirection===0&&(pt=-pt),A===S.ADVANCED&&(pt=-pt);var Tl=Math.cos(pt),Po=Math.sin(pt);rr=new gt(Tl,Po,-Po,Tl,0,0)}else pt&&pt instanceof gt&&(rr=pt);A!==S.ADVANCED||rr||(rr=cr),(zt=ve.charSpace||Lo)!==void 0&&(Mr+=W(q(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(zn=ve.horizontalScale)!==void 0&&(Mr+=W(100*zn)+` Tz
`),ve.lang;var ri=-1,Vs=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Ga=ir.internal.getCurrentPageInfo().pageContext;switch(Vs){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var gd=Ga.usedRenderingMode!==void 0?Ga.usedRenderingMode:-1;ri!==-1?Mr+=ri+` Tr
`:gd!==-1&&(Mr+=`0 Tr
`),ri!==-1&&(Ga.usedRenderingMode=ri),kt=ve.align||"left";var Ji,Ml=Qe*Fn,pa=ir.internal.pageSize.getWidth(),mi=St[rt];zt=ve.charSpace||Lo,Rt=ve.maxWidth||0,tn=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var ma=[],To=function(_n){return ir.getStringUnitWidth(_n,{font:mi,charSpace:zt,fontSize:Qe,doKerning:!1})*Qe/Ki};if(Object.prototype.toString.call(w)==="[object Array]"){var gi;it=El(w),kt!=="left"&&(Ji=it.map(To));var ii,Ya=0;if(kt==="right"){D-=Ji[0],w=[],Br=it.length;for(var ga=0;ga<Br;ga++)ga===0?(ii=Vi(D),gi=ni(ae)):(ii=q(Ya-Ji[ga]),gi=-Ml),w.push([it[ga],ii,gi]),Ya=Ji[ga]}else if(kt==="center"){D-=Ji[0]/2,w=[],Br=it.length;for(var vi=0;vi<Br;vi++)vi===0?(ii=Vi(D),gi=ni(ae)):(ii=q((Ya-Ji[vi])/2),gi=-Ml),w.push([it[vi],ii,gi]),Ya=Ji[vi]}else if(kt==="left"){w=[],Br=it.length;for(var Ee=0;Ee<Br;Ee++)w.push(it[Ee])}else if(kt==="justify"&&mi.encoding==="Identity-H"){w=[],Br=it.length,Rt=Rt!==0?Rt:pa;for(var Ue=0,De=0;De<Br;De++)if(gi=De===0?ni(ae):-Ml,ii=De===0?Vi(D):Ue,De<Br-1){var mt=q((Rt-Ji[De])/(it[De].split(" ").length-1)),Nt=it[De].split(" ");w.push([Nt[0]+" ",ii,gi]),Ue=0;for(var Ht=1;Ht<Nt.length;Ht++){var Un=(To(Nt[Ht-1]+" "+Nt[Ht])-To(Nt[Ht]))*Ki+mt;Ht==Nt.length-1?w.push([Nt[Ht],Un,0]):w.push([Nt[Ht]+" ",Un,0]),Ue-=Un}}else w.push([it[De],ii,gi]);w.push(["",Ue,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Br=it.length,Rt=Rt!==0?Rt:pa,De=0;De<Br;De++)gi=De===0?ni(ae):-Ml,ii=De===0?Vi(D):0,De<Br-1?ma.push(W(q((Rt-Ji[De])/(it[De].split(" ").length-1)))):ma.push(0),w.push([it[De],ii,gi])}}var vn=typeof ve.R2L=="boolean"?ve.R2L:de;vn===!0&&(w=Cl(w,function(_n,Mn,ur){return[_n.split("").reverse().join(""),Mn,ur]})),ze={text:w,x:D,y:ae,options:ve,mutex:{pdfEscape:pi,activeFontKey:rt,fonts:St,activeFontSize:Qe}},Wt.publish("postProcessText",ze),w=ze.text,Yi=ze.mutex.isHex||!1;var Mo=St[rt].encoding;Mo!=="WinAnsiEncoding"&&Mo!=="StandardEncoding"||(w=Cl(w,function(_n,Mn,ur){return[Va(_n),Mn,ur]})),it=El(w),w=[];for(var Do,Dr,Ss,Io=0,Ns=1,Gs=Array.isArray(it[0])?Ns:Io,js="",on=function(_n,Mn,ur){var Sr="";return ur instanceof gt?(ur=typeof ve.angle=="number"?Zn(ur,new gt(1,0,0,1,_n,Mn)):Zn(new gt(1,0,0,1,_n,Mn),ur),A===S.ADVANCED&&(ur=Zn(new gt(1,0,0,-1,0,0),ur)),Sr=ur.join(" ")+` Tm
`):Sr=W(_n)+" "+W(Mn)+` Td
`,Sr},Xi=0;Xi<it.length;Xi++){switch(js="",Gs){case Ns:Ss=(Yi?"<":"(")+it[Xi][0]+(Yi?">":")"),Do=parseFloat(it[Xi][1]),Dr=parseFloat(it[Xi][2]);break;case Io:Ss=(Yi?"<":"(")+it[Xi]+(Yi?">":")"),Do=Vi(D),Dr=ni(ae)}ma!==void 0&&ma[Xi]!==void 0&&(js=ma[Xi]+` Tw
`),Xi===0?w.push(js+on(Do,Dr,rr)+Ss):Gs===Io?w.push(js+Ss):Gs===Ns&&w.push(js+on(Do,Dr,rr)+Ss)}w=Gs===Io?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Li=`BT
/`;return Li+=rt+" "+Qe+` Tf
`,Li+=W(Qe*Fn)+` TL
`,Li+=Wa+`
`,Li+=Mr,Li+=w,te(Li+="ET"),x[rt]=!0,ir};var Vf=g.__private__.clip=g.clip=function(w){return te(w==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Vf("evenodd")},g.__private__.discardPath=g.discardPath=function(){return te("n"),this};var qs=g.__private__.isValidStyle=function(w){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(D=!0),D};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(w){return qs(w)&&(f=w),this};var cd=g.__private__.getStyle=g.getStyle=function(w){var D=f;switch(w){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=w}return D},wl=g.close=function(){return te("h"),this};g.stroke=function(){return te("S"),this},g.fill=function(w){return bl("f",w),this},g.fillEvenOdd=function(w){return bl("f*",w),this},g.fillStroke=function(w){return bl("B",w),this},g.fillStrokeEvenOdd=function(w){return bl("B*",w),this};var bl=function(w,D){An(D)==="object"?Yf(D,w):te(w)},Kc=function(w){w===null||A===S.ADVANCED&&w===void 0||(w=cd(w),te(w))};function Gf(w,D,ae,ve,Te){var ze=new nf(D||this.boundingBox,ae||this.xStep,ve||this.yStep,this.gState,Te||this.matrix);ze.stream=this.stream;var it=w+"$$"+this.cloneIndex+++"$$";return Pn(it,ze),ze}var Yf=function(w,D){var ae=Qn[w.key],ve=Pt[ae];if(ve instanceof Eu)te("q"),te(Kf(D)),ve.gState&&g.setGState(ve.gState),te(w.matrix.toString()+" cm"),te("/"+ae+" sh"),te("Q");else if(ve instanceof nf){var Te=new gt(1,0,0,-1,0,Hs());w.matrix&&(Te=Te.multiply(w.matrix||cr),ae=Gf.call(ve,w.key,w.boundingBox,w.xStep,w.yStep,Te).id),te("q"),te("/Pattern cs"),te("/"+ae+" scn"),ve.gState&&g.setGState(ve.gState),te(D),te("Q")}},Kf=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},bn=g.moveTo=function(w,D){return te(W(q(w))+" "+W(B(D))+" m"),this},dn=g.lineTo=function(w,D){return te(W(q(w))+" "+W(B(D))+" l"),this},qa=g.curveTo=function(w,D,ae,ve,Te,ze){return te([W(q(w)),W(B(D)),W(q(ae)),W(B(ve)),W(q(Te)),W(B(ze)),"c"].join(" ")),this};g.__private__.line=g.line=function(w,D,ae,ve,Te){if(isNaN(w)||isNaN(D)||isNaN(ae)||isNaN(ve)||!qs(Te))throw new Error("Invalid arguments passed to jsPDF.line");return A===S.COMPAT?this.lines([[ae-w,ve-D]],w,D,[1,1],Te||"S"):this.lines([[ae-w,ve-D]],w,D,[1,1]).stroke()},g.__private__.lines=g.lines=function(w,D,ae,ve,Te,ze){var it,pt,kt,zt,Rt,tn,zn,rr,ir,Tr,Mr,Yi;if(typeof w=="number"&&(Yi=ae,ae=D,D=w,w=Yi),ve=ve||[1,1],ze=ze||!1,isNaN(D)||isNaN(ae)||!Array.isArray(w)||!Array.isArray(ve)||!qs(Te)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(bn(D,ae),it=ve[0],pt=ve[1],zt=w.length,Tr=D,Mr=ae,kt=0;kt<zt;kt++)(Rt=w[kt]).length===2?(Tr=Rt[0]*it+Tr,Mr=Rt[1]*pt+Mr,dn(Tr,Mr)):(tn=Rt[0]*it+Tr,zn=Rt[1]*pt+Mr,rr=Rt[2]*it+Tr,ir=Rt[3]*pt+Mr,Tr=Rt[4]*it+Tr,Mr=Rt[5]*pt+Mr,qa(tn,zn,rr,ir,Tr,Mr));return ze&&wl(),Kc(Te),this},g.path=function(w){for(var D=0;D<w.length;D++){var ae=w[D],ve=ae.c;switch(ae.op){case"m":bn(ve[0],ve[1]);break;case"l":dn(ve[0],ve[1]);break;case"c":qa.apply(this,ve);break;case"h":wl()}}return this},g.__private__.rect=g.rect=function(w,D,ae,ve,Te){if(isNaN(w)||isNaN(D)||isNaN(ae)||isNaN(ve)||!qs(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return A===S.COMPAT&&(ve=-ve),te([W(q(w)),W(B(D)),W(q(ae)),W(q(ve)),"re"].join(" ")),Kc(Te),this},g.__private__.triangle=g.triangle=function(w,D,ae,ve,Te,ze,it){if(isNaN(w)||isNaN(D)||isNaN(ae)||isNaN(ve)||isNaN(Te)||isNaN(ze)||!qs(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-w,ve-D],[Te-ae,ze-ve],[w-Te,D-ze]],w,D,[1,1],it,!0),this},g.__private__.roundedRect=g.roundedRect=function(w,D,ae,ve,Te,ze,it){if(isNaN(w)||isNaN(D)||isNaN(ae)||isNaN(ve)||isNaN(Te)||isNaN(ze)||!qs(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*ae),ze=Math.min(ze,.5*ve),this.lines([[ae-2*Te,0],[Te*pt,0,Te,ze-ze*pt,Te,ze],[0,ve-2*ze],[0,ze*pt,-Te*pt,ze,-Te,ze],[2*Te-ae,0],[-Te*pt,0,-Te,-ze*pt,-Te,-ze],[0,2*ze-ve],[0,-ze*pt,Te*pt,-ze,Te,-ze]],w+Te,D,[1,1],it,!0),this},g.__private__.ellipse=g.ellipse=function(w,D,ae,ve,Te){if(isNaN(w)||isNaN(D)||isNaN(ae)||isNaN(ve)||!qs(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*ae,it=4/3*(Math.SQRT2-1)*ve;return bn(w+ae,D),qa(w+ae,D-it,w+ze,D-ve,w,D-ve),qa(w-ze,D-ve,w-ae,D-it,w-ae,D),qa(w-ae,D+it,w-ze,D+ve,w,D+ve),qa(w+ze,D+ve,w+ae,D+it,w+ae,D),Kc(Te),this},g.__private__.circle=g.circle=function(w,D,ae,ve){if(isNaN(w)||isNaN(D)||isNaN(ae)||!qs(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,D,ae,ae,ve)},g.setFont=function(w,D,ae){return ae&&(D=ie(D,ae)),rt=xl(w,D,{disableWarning:!1}),this};var Jf=g.__private__.getFont=g.getFont=function(){return St[xl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var w,D,ae={};for(w in Ct)if(Ct.hasOwnProperty(w))for(D in ae[w]=[],Ct[w])Ct[w].hasOwnProperty(D)&&ae[w].push(D);return ae},g.addFont=function(w,D,ae,ve,Te){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(ae=ie(ae,ve)),Te=Te||"Identity-H",Wc.call(this,w,D,ae,Te)};var Ao,Jc=e.lineWidth||.200025,_l=g.__private__.getLineWidth=g.getLineWidth=function(){return Jc},ud=g.__private__.setLineWidth=g.setLineWidth=function(w){return Jc=w,te(W(q(w))+" w"),this};g.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(w,D){if(w=w||[],D=D||0,isNaN(D)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ae){return W(q(ae))}).join(" "),D=W(q(D)),te("["+w+"] "+D+" d"),this};var Xc=g.__private__.getLineHeight=g.getLineHeight=function(){return Qe*Ao};g.__private__.getLineHeight=g.getLineHeight=function(){return Qe*Ao};var dd=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Ao=w),this},vr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Ao};dd(e.lineHeight);var Vi=g.__private__.getHorizontalCoordinate=function(w){return q(w)},ni=g.__private__.getVerticalCoordinate=function(w){return A===S.ADVANCED?w:_t[H].mediaBox.topRightY-_t[H].mediaBox.bottomLeftY-q(w)},fd=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(w){return W(Vi(w))},Ws=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(w){return W(ni(w))},nr=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ys(nr)},g.__private__.setStrokeColor=g.setDrawColor=function(w,D,ae,ve){return nr=xs({ch1:w,ch2:D,ch3:ae,ch4:ve,pdfColorType:"draw",precision:2}),te(nr),this};var Sl=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ys(Sl)},g.__private__.setFillColor=g.setFillColor=function(w,D,ae,ve){return Sl=xs({ch1:w,ch2:D,ch3:ae,ch4:ve,pdfColorType:"fill",precision:2}),te(Sl),this};var Wa=e.textColor||"0 g",hd=g.__private__.getTextColor=g.getTextColor=function(){return ys(Wa)};g.__private__.setTextColor=g.setTextColor=function(w,D,ae,ve){return Wa=xs({ch1:w,ch2:D,ch3:ae,ch4:ve,pdfColorType:"text",precision:3}),this};var Lo=e.charSpace,pd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Lo||0)};g.__private__.setCharSpace=g.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Lo=w,this};var Nl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(w){var D=g.CapJoinStyles[w];if(D===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=D,te(D+" J"),this};var Fr=0;g.__private__.setLineJoin=g.setLineJoin=function(w){var D=g.CapJoinStyles[w];if(D===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fr=D,te(D+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(W(q(w))+" M"),this},g.GState=ig,g.setGState=function(w){(w=typeof w=="string"?Et[or[w]]:md(null,w)).equals(un)||(te("/"+w.id+" gs"),un=w)};var md=function(w,D){if(!w||!or[w]){var ae=!1;for(var ve in Et)if(Et.hasOwnProperty(ve)&&Et[ve].equals(D)){ae=!0;break}if(ae)D=Et[ve];else{var Te="GS"+(Object.keys(Et).length+1).toString(10);Et[Te]=D,D.id=Te}return w&&(or[w]=D.id),Wt.publish("addGState",D),D}};g.addGState=function(w,D){return md(w,D),this},g.saveGraphicsState=function(){return te("q"),mn.push({key:rt,size:Qe,color:Wa}),this},g.restoreGraphicsState=function(){te("Q");var w=mn.pop();return rt=w.key,Qe=w.size,Wa=w.color,un=null,this},g.setCurrentTransformationMatrix=function(w){return te(w.toString()+" cm"),this},g.comment=function(w){return te("#"+w),this};var $r=function(w,D){var ae=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(ze){isNaN(ze)||(ae=parseFloat(ze))}});var ve=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(ze){isNaN(ze)||(ve=parseFloat(ze))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(ze){Te=ze.toString()}}),this},Qc=function(w,D,ae,ve){$r.call(this,w,D),this.type="rect";var Te=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(it){isNaN(it)||(Te=parseFloat(it))}});var ze=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(it){isNaN(it)||(ze=parseFloat(it))}}),this},jl=function(){this.page=qt,this.currentPage=H,this.pages=_e.slice(0),this.pagesContext=_t.slice(0),this.x=At,this.y=lt,this.matrix=Bt,this.width=gn(H),this.height=Hs(H),this.outputDestination=Fe,this.id="",this.objectNumber=-1};jl.prototype.restore=function(){qt=this.page,H=this.currentPage,_t=this.pagesContext,_e=this.pages,At=this.x,lt=this.y,Bt=this.matrix,Gi(H,this.width),Zc(H,this.height),Fe=this.outputDestination};var bs=function(w,D,ae,ve,Te){Rr.push(new jl),qt=H=0,_e=[],At=w,lt=D,Bt=Te,yl([ae,ve])},kl=function(w){if(lr[w])Rr.pop().restore();else{var D=new jl,ae="Xo"+(Object.keys(rn).length+1).toString(10);D.id=ae,lr[w]=ae,rn[ae]=D,Wt.publish("addFormObject",D),Rr.pop().restore()}};for(var Ha in g.beginFormObject=function(w,D,ae,ve,Te){return bs(w,D,ae,ve,Te),this},g.endFormObject=function(w){return kl(w),this},g.doFormObject=function(w,D){var ae=rn[lr[w]];return te("q"),te(D.toString()+" cm"),te("/"+ae.id+" Do"),te("Q"),this},g.getFormObject=function(w){var D=rn[lr[w]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},g.save=function(w,D){return w=w||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(Nu(Eo(Us()),w),typeof Nu.unload=="function"&&It.setTimeout&&setTimeout(Nu.unload,911),this):new Promise(function(ae,ve){try{var Te=Nu(Eo(Us()),w);typeof Nu.unload=="function"&&It.setTimeout&&setTimeout(Nu.unload,911),ae(Te)}catch(ze){ve(ze.message)}})},Dt.API)Dt.API.hasOwnProperty(Ha)&&(Ha==="events"&&Dt.API.events.length?function(w,D){var ae,ve,Te;for(Te=D.length-1;Te!==-1;Te--)ae=D[Te][0],ve=D[Te][1],w.subscribe.apply(w,[ae].concat(typeof ve=="function"?[ve]:ve))}(Wt,Dt.API.events):g[Ha]=Dt.API[Ha]);var gn=g.getPageWidth=function(w){return(_t[w=w||H].mediaBox.topRightX-_t[w].mediaBox.bottomLeftX)/qe},Gi=g.setPageWidth=function(w,D){_t[w].mediaBox.topRightX=D*qe+_t[w].mediaBox.bottomLeftX},Hs=g.getPageHeight=function(w){return(_t[w=w||H].mediaBox.topRightY-_t[w].mediaBox.bottomLeftY)/qe},Zc=g.setPageHeight=function(w,D){_t[w].mediaBox.topRightY=D*qe+_t[w].mediaBox.bottomLeftY};return g.internal={pdfEscape:pi,getStyle:cd,getFont:Jf,getFontSize:Ae,getCharSpace:pd,getTextColor:hd,getLineHeight:Xc,getLineHeightFactor:vr,getLineWidth:_l,write:et,getHorizontalCoordinate:Vi,getVerticalCoordinate:ni,getCoordinateString:fd,getVerticalCoordinateString:Ws,collections:{},newObject:Rn,newAdditionalObject:Wi,newObjectDeferred:Tn,newObjectDeferredBegin:er,getFilters:ws,putStream:Hi,events:Wt,scaleFactor:qe,pageSize:{getWidth:function(){return gn(H)},setWidth:function(w){Gi(H,w)},getHeight:function(){return Hs(H)},setHeight:function(w){Zc(H,w)}},encryptionOptions:p,encryption:Wr,getEncryptor:Wf,output:Co,getNumberOfPages:sd,pages:_e,out:te,f2:le,f3:R,getPageInfo:ld,getPageInfoByObjId:Ot,getCurrentPageInfo:Hf,getPDFVersion:j,Point:$r,Rectangle:Qc,Matrix:gt,hasHotfix:Yc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return gn(H)},set:function(w){Gi(H,w)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Hs(H)},set:function(w){Zc(H,w)},enumerable:!0,configurable:!0}),rd.call(g,Ve),rt="F1",Hc(i,n),Wt.publish("initialized"),g}Ud.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Ud.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ud.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Ud.prototype.processOwnerPassword=function(e,t){return xy(yy(t).substr(0,5),e)},Ud.prototype.encryptor=function(e,t){var n=yy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return xy(n,r)}},ig.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||An(e)!==An(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Dt.API={events:[]},Dt.version="3.0.1";var wr=Dt.API,Z5=1,Xu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vt=function(e){return e.toFixed(2)},nc=function(e){return e.toFixed(5)};wr.__acroform__={};var ms=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},R_=function(e){return e*Z5},lo=function(e){var t=new P6,n=bt.internal.getHeight(e)||0,r=bt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Vt(r)),Number(Vt(n))],t},eB=wr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},tB=wr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},nB=wr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Cr=wr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return nB(e,t-1)},Ar=wr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return eB(e,t-1)},Lr=wr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tB(e,t-1)},rB=wr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Vt(c.lowerLeft_X)),Number(Vt(c.lowerLeft_Y)),Number(Vt(c.upperRight_X)),Number(Vt(c.upperRight_Y))]},iB=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=wy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Vt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=lo(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},wy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,a=bt.internal.getHeight(e)||0;a=a<0?-a:a;var l=bt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(R,q,J){if(R+1<i.length){var B=q+" "+i[R+1][0];return Xm(B,e,J).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var f,p,m=Xm("3",e,s).height,x=e.multiline?a-s:(a-m)/2,g=x+=2,N=0,j=0,E=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Xm(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",S=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var O=!1;if(i[A].length!==1&&E!==i[A].length-1){if((m+2)*(S+2)+2>a)continue e;b+=i[A][E],O=!0,j=A,A--}else{b=(b+=i[A][E]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var K=parseInt(A),ie=c(K,b,s),W=A>=i.length-1;if(ie&&!W){b+=" ",E=0;continue}if(ie||W){if(W)j=K;else if(e.multiline&&(m+2)*(S+2)+2>a)continue e}else{if(!e.multiline||(m+2)*(S+2)+2>a)continue e;j=K}}for(var $="",oe=N;oe<=j;oe++){var le=i[oe];if(e.multiline){if(oe===j){$+=le[E]+" ",E=(E+1)%le.length;continue}if(oe===N){$+=le[le.length-1]+" ";continue}}$+=le[0]+" "}switch($=$.substr($.length-1)==" "?$.substr(0,$.length-1):$,p=Xm($,e,s).width,e.textAlign){case"right":f=l-p-2;break;case"center":f=(l-p)/2;break;case"left":default:f=2}t+=Vt(f)+" "+Vt(g)+` Td
`,t+="("+Xu($)+`) Tj
`,t+=-Vt(f)+` 0 Td
`,g=-(s+2),p=0,N=O?j:j+1,S++,b=""}break}return r.text=t,r.fontSize=s,r},Xm=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},sB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aB=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},oB=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),An(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},lB=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(za.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(sB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Z5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new T6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&aB(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],f=l.Rect;if(l.Rect&&(l.Rect=rB(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=bt.createDefaultAppearanceStream(l),An(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=iB(l);c.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var g=l.appearanceStreamContent[x];if(m+="/"+x+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var N=g[a];typeof N=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&oB(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},L6=wr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),An(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Xu(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Uv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xu(r(e))+")"},go=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};go.prototype.toString=function(){return this.objId+" 0 R"},go.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},go.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:L6(i,this.objId,this.scope)}):i instanceof go?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var P6=function(){go.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ms(P6,go);var T6=function(){go.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Xu(n(e))+")"}},set:function(n){e=n}})};ms(T6,go);var za=function e(){go.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Cr(t,3)},set:function(b){b?this.F=Ar(t,3):this.F=Lr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof sg)return;s="FieldObject"+e.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Xu(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Z5:f},set:function(b){f=b}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(b){p=b}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof sg||this instanceof Fu))return Uv(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=b}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Xr?x:Uv(x,this.objId,this.scope)},set:function(b){b=b.toString(),x=this instanceof Xr?b:b.substr(0,1)==="("?Bd(b.substr(1,b.length-2)):Bd(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Bd(x.substr(1,x.length-1)):x},set:function(b){b=b.toString(),x=this instanceof Xr?"/"+b:b}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Xr?g:Uv(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof Xr?b:b.substr(0,1)==="("?Bd(b.substr(1,b.length-2)):Bd(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Bd(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof Xr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(b){b=!!b,j=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(b){N=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,1)},set:function(b){b?this.Ff=Ar(this.Ff,1):this.Ff=Lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,2)},set:function(b){b?this.Ff=Ar(this.Ff,2):this.Ff=Lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,3)},set:function(b){b?this.Ff=Ar(this.Ff,3):this.Ff=Lr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');E=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(E){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};ms(za,go);var hf=function(){za.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return L6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var c,f=[];c=a.exec(s);)f.push(c[l]);return f}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,18)},set:function(n){n?this.Ff=Ar(this.Ff,18):this.Ff=Lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ar(this.Ff,19):this.Ff=Lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,20)},set:function(n){n?(this.Ff=Ar(this.Ff,20),t.sort()):this.Ff=Lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,22)},set:function(n){n?this.Ff=Ar(this.Ff,22):this.Ff=Lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,23)},set:function(n){n?this.Ff=Ar(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,27)},set:function(n){n?this.Ff=Ar(this.Ff,27):this.Ff=Lr(this.Ff,27)}}),this.hasAppearanceStream=!1};ms(hf,za);var pf=function(){hf.call(this),this.fontName="helvetica",this.combo=!1};ms(pf,hf);var mf=function(){pf.call(this),this.combo=!0};ms(mf,pf);var x0=function(){mf.call(this),this.edit=!0};ms(x0,mf);var Xr=function(){za.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,15)},set:function(n){n?this.Ff=Ar(this.Ff,15):this.Ff=Lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,16)},set:function(n){n?this.Ff=Ar(this.Ff,16):this.Ff=Lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,17)},set:function(n){n?this.Ff=Ar(this.Ff,17):this.Ff=Lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,26)},set:function(n){n?this.Ff=Ar(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Xu(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){An(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ms(Xr,za);var w0=function(){Xr.call(this),this.pushButton=!0};ms(w0,Xr);var gf=function(){Xr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ms(gf,Xr);var sg=function(){var e,t;za.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Xu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){An(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ms(sg,za),gf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},gf.prototype.createOption=function(e){var t=new sg;return t.Parent=this,t.optionName=e,this.Kids.push(t),cB.call(this.scope,t),t};var b0=function(){Xr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};ms(b0,Xr);var Fu=function(){za.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,13)},set:function(t){t?this.Ff=Ar(this.Ff,13):this.Ff=Lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,21)},set:function(t){t?this.Ff=Ar(this.Ff,21):this.Ff=Lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,23)},set:function(t){t?this.Ff=Ar(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,24)},set:function(t){t?this.Ff=Ar(this.Ff,24):this.Ff=Lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,25)},set:function(t){t?this.Ff=Ar(this.Ff,25):this.Ff=Lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,26)},set:function(t){t?this.Ff=Ar(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ms(Fu,za);var _0=function(){Fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,14)},set:function(e){e?this.Ff=Ar(this.Ff,14):this.Ff=Lr(this.Ff,14)}}),this.password=!0};ms(_0,Fu);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=lo(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=wy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Vt(bt.internal.getWidth(e))+" "+Vt(bt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Vt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=lo(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=bt.internal.getHeight(e),a=bt.internal.getWidth(e),l=wy(e,e.caption);return i.push("1 g"),i.push("0 0 "+Vt(a)+" "+Vt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Vt(a-1)+" "+Vt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Vt(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=lo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(bt.internal.getWidth(e))+" "+Vt(bt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=bt.RadioButton.Circle.YesNormal,t.D[e]=bt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=lo(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=bt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+nc(bt.internal.getWidth(e)/2)+" "+nc(bt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=lo(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*bt.internal.Bezier_C).toFixed(5)),a=Number((r*bt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nc(bt.internal.getWidth(e)/2)+" "+nc(bt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+nc(bt.internal.getWidth(e)/2)+" "+nc(bt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=lo(e);t.scope=e.scope;var n=[],r=bt.internal.getWidth(e)<=bt.internal.getHeight(e)?bt.internal.getWidth(e)/4:bt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*bt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nc(bt.internal.getWidth(e)/2)+" "+nc(bt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=bt.RadioButton.Cross.YesNormal,t.D[e]=bt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=lo(e);t.scope=e.scope;var n=[],r=bt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Vt(bt.internal.getWidth(e)-2)+" "+Vt(bt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Vt(r.x1.x)+" "+Vt(r.x1.y)+" m"),n.push(Vt(r.x2.x)+" "+Vt(r.x2.y)+" l"),n.push(Vt(r.x4.x)+" "+Vt(r.x4.y)+" m"),n.push(Vt(r.x3.x)+" "+Vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=lo(e);t.scope=e.scope;var n=bt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Vt(bt.internal.getWidth(e))+" "+Vt(bt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Vt(bt.internal.getWidth(e)-2)+" "+Vt(bt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Vt(n.x1.x)+" "+Vt(n.x1.y)+" m"),r.push(Vt(n.x2.x)+" "+Vt(n.x2.y)+" l"),r.push(Vt(n.x4.x)+" "+Vt(n.x4.y)+" m"),r.push(Vt(n.x3.x)+" "+Vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=lo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(bt.internal.getWidth(e))+" "+Vt(bt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};bt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=bt.internal.getWidth(e),n=bt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},bt.internal.getWidth=function(e){var t=0;return An(e)==="object"&&(t=R_(e.Rect[2])),t},bt.internal.getHeight=function(e){var t=0;return An(e)==="object"&&(t=R_(e.Rect[3])),t};var cB=wr.addField=function(e){if(lB(this,e),!(e instanceof za))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};wr.AcroFormChoiceField=hf,wr.AcroFormListBox=pf,wr.AcroFormComboBox=mf,wr.AcroFormEditBox=x0,wr.AcroFormButton=Xr,wr.AcroFormPushButton=w0,wr.AcroFormRadioButton=gf,wr.AcroFormCheckBox=b0,wr.AcroFormTextField=Fu,wr.AcroFormPasswordField=_0,wr.AcroFormAppearance=bt,wr.AcroForm={ChoiceField:hf,ListBox:pf,ComboBox:mf,EditBox:x0,Button:Xr,PushButton:w0,RadioButton:gf,CheckBox:b0,TextField:Fu,PasswordField:_0,Appearance:bt},Dt.AcroForm={ChoiceField:hf,ListBox:pf,ComboBox:mf,EditBox:x0,Button:Xr,PushButton:w0,RadioButton:gf,CheckBox:b0,TextField:Fu,PasswordField:_0,Appearance:bt};function M6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(R,q){var J,B,fe,he,G,P=t;if((q=q||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(ie(R))for(G in n)for(fe=n[G],J=0;J<fe.length;J+=1){for(he=!0,B=0;B<fe[J].length;B+=1)if(fe[J][B]!==void 0&&fe[J][B]!==R[B]){he=!1;break}if(he===!0){P=G;break}}else for(G in n)for(fe=n[G],J=0;J<fe.length;J+=1){for(he=!0,B=0;B<fe[J].length;B+=1)if(fe[J][B]!==void 0&&fe[J][B]!==R.charCodeAt(B)){he=!1;break}if(he===!0){P=G;break}}return P===t&&q!==t&&(P=q),P},i=function R(q){for(var J=this.internal.write,B=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:q.width}),he.push({key:"Height",value:q.height}),q.colorSpace===E.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===E.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)){for(var G="",P=0,F=q.transparency.length;P<F;P++)G+=q.transparency[P]+" "+q.transparency[P]+" ";he.push({key:"Mask",value:"["+G+"]"})}q.sMask!==void 0&&he.push({key:"SMask",value:q.objectId+1+" 0 R"});var ne=q.filter!==void 0?["/"+q.filter]:void 0;if(B({data:q.data,additionalKeyValues:he,alreadyAppliedFilters:ne,objectId:q.objectId}),J("endobj"),"sMask"in q&&q.sMask!==void 0){var be="/Predictor "+q.predictor+" /Colors 1 /BitsPerComponent "+q.bitsPerComponent+" /Columns "+q.width,T={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:q.bitsPerComponent,decodeParameters:be,data:q.sMask};"filter"in q&&(T.filter=q.filter),R.call(this,T)}if(q.colorSpace===E.INDEXED){var H=this.internal.newObject();B({data:$(new Uint8Array(q.palette)),objectId:H}),J("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var q in R)i.call(this,R[q])},a=function(){var R,q=this.internal.collections.addImage_images,J=this.internal.write;for(var B in q)J("/I"+(R=q[B]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(R){return typeof e["process"+R.toUpperCase()]=="function"},m=function(R){return An(R)==="object"&&R.nodeType===1},x=function(R,q){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var J=""+R.getAttribute("src");if(J.indexOf("data:image/")===0)return Yh(unescape(J).split("base64,").pop());var B=e.loadFile(J,!0);if(B!==void 0)return B}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var fe;switch(q){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;case"JPEG":case"JPG":default:fe="image/jpeg"}return Yh(R.toDataURL(fe,1).split("base64,").pop())}},g=function(R){var q=this.internal.collections.addImage_images;if(q){for(var J in q)if(R===q[J].alias)return q[J]}},N=function(R,q,J){return R||q||(R=-96,q=-96),R<0&&(R=-1*J.width*72/R/this.internal.scaleFactor),q<0&&(q=-1*J.height*72/q/this.internal.scaleFactor),R===0&&(R=q*J.width/J.height),q===0&&(q=R*J.height/J.width),[R,q]},j=function(R,q,J,B,fe,he){var G=N.call(this,J,B,fe),P=this.internal.getCoordinateString,F=this.internal.getVerticalCoordinateString,ne=c.call(this);if(J=G[0],B=G[1],ne[fe.index]=fe,he){he*=Math.PI/180;var be=Math.cos(he),T=Math.sin(he),H=function(se){return se.toFixed(4)},Z=[H(be),H(T),H(-1*T),H(be),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,P(R),F(q+B),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([P(J),"0","0",P(B),"0","0","cm"].join(" "))):this.internal.write([P(J),"0","0",P(B),P(R),F(q+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},E=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(R){var q,J,B=0;if(typeof R=="string")for(J=R.length,q=0;q<J;q++)B=(B<<5)-B+R.charCodeAt(q),B|=0;else if(ie(R))for(J=R.byteLength/2,q=0;q<J;q++)B=(B<<5)-B+R[q],B|=0;return B},A=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var q=!0;return R.length===0&&(q=!1),R.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(q=!1),q},O=e.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var q=R.indexOf(",");return q<0?null:R.substring(0,q).trim().endsWith("base64")?R.substring(q+1):null},K=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return K()&&R instanceof ArrayBuffer};var ie=e.__addimage__.isArrayBufferView=function(R){return K()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},W=e.__addimage__.binaryStringToUint8Array=function(R){for(var q=R.length,J=new Uint8Array(q),B=0;B<q;B++)J[B]=R.charCodeAt(B);return J},$=e.__addimage__.arrayBufferToBinaryString=function(R){for(var q="",J=ie(R)?R:new Uint8Array(R),B=0;B<J.length;B+=8192)q+=String.fromCharCode.apply(null,J.subarray(B,B+8192));return q};e.addImage=function(){var R,q,J,B,fe,he,G,P,F;if(typeof arguments[1]=="number"?(q=t,J=arguments[1],B=arguments[2],fe=arguments[3],he=arguments[4],G=arguments[5],P=arguments[6],F=arguments[7]):(q=arguments[1],J=arguments[2],B=arguments[3],fe=arguments[4],he=arguments[5],G=arguments[6],P=arguments[7],F=arguments[8]),An(R=arguments[0])==="object"&&!m(R)&&"imageData"in R){var ne=R;R=ne.imageData,q=ne.format||q||t,J=ne.x||J||0,B=ne.y||B||0,fe=ne.w||ne.width||fe,he=ne.h||ne.height||he,G=ne.alias||G,P=ne.compression||P,F=ne.rotation||ne.angle||F}var be=this.internal.getFilters();if(P===void 0&&be.indexOf("FlateEncode")!==-1&&(P="SLOW"),isNaN(J)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=oe.call(this,R,q,G,P);return j.call(this,J,B,fe,he,T,F),this};var oe=function(R,q,J,B){var fe,he,G;if(typeof R=="string"&&r(R)===t){R=unescape(R);var P=le(R,!1);(P!==""||(P=e.loadFile(R,!0))!==void 0)&&(R=P)}if(m(R)&&(R=x(R,q)),q=r(R,q),!p(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((G=J)==null||G.length===0)&&(J=function(F){return typeof F=="string"||ie(F)?S(F):ie(F.data)?S(F.data):null}(R)),(fe=g.call(this,J))||(K()&&(R instanceof Uint8Array||q==="RGBA"||(he=R,R=W(R))),fe=this["process"+q.toUpperCase()](R,f.call(this),J,function(F){return F&&typeof F=="string"&&(F=F.toUpperCase()),F in e.image_compression?F:b.NONE}(B),he)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},le=e.__addimage__.convertBase64ToBinaryString=function(R,q){q=typeof q!="boolean"||q;var J,B="";if(typeof R=="string"){var fe;J=(fe=O(R))!==null&&fe!==void 0?fe:R;try{B=Yh(J)}catch(he){if(q)throw A(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};e.getImageProperties=function(R){var q,J,B="";if(m(R)&&(R=x(R)),typeof R=="string"&&r(R)===t&&((B=le(R,!1))===""&&(B=e.loadFile(R)||""),R=B),J=r(R),!p(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!K()||R instanceof Uint8Array||(R=W(R)),!(q=this["process"+J.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=J,q}})(Dt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Dt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,p=!1,m=0;m<f.length&&!p;m++)switch((r=f[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var x=0;x<f.length;x++){r=f[x];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(j.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(b(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(b(S))+") >>",j.content=s;var A=j.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(j.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ie=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ie+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:f(r),w:c(n+i),h:f(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,l,c=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(f*p)}else l=c,a=f;return this.text(n,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,l,a,s),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Dt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},l=e.__arabicParser__.isArabicEndLetter=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(j){return a(j)&&i.indexOf(j.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(j){var E=0,b=n,S="",A=0;for(E=0;E<j.length;E+=1)b[j.charCodeAt(E)]!==void 0?(A++,typeof(b=b[j.charCodeAt(E)])=="number"&&(S+=String.fromCharCode(b),b=n,A=0),E===j.length-1&&(b=n,S+=j.charAt(E-(A-1)),E-=A-1,A=0)):(b=n,S+=j.charAt(E-A),E-=A,A=0);return S};e.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&r[j.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(j,E,b){return a(j)?s(j)===!1?-1:!f(j)||!a(E)&&!a(b)||!a(b)&&l(E)||l(j)&&!a(E)||l(j)&&c(E)||l(j)&&l(E)?0:p(j)&&a(E)&&!l(E)&&a(b)&&f(b)?3:l(j)||!a(b)?1:2:-1},g=function(j){var E=0,b=0,S=0,A="",O="",K="",ie=(j=j||"").split("\\s+"),W=[];for(E=0;E<ie.length;E+=1){for(W.push(""),b=0;b<ie[E].length;b+=1)A=ie[E][b],O=ie[E][b-1],K=ie[E][b+1],a(A)?(S=x(A,O,K),W[E]+=S!==-1?String.fromCharCode(t[A.charCodeAt(0)][S]):A):W[E]+=A;W[E]=m(W[E])}return W.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var j,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(E)){var S=0;for(b=[],S=0;S<E.length;S+=1)Array.isArray(E[S])?b.push([g(E[S][0]),E[S][1],E[S][2]]):b.push([g(E[S])]);j=b}else j=g(E);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};e.events.push(["preProcessText",N])}(Dt.API),Dt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Dt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(j){c=j}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(j){N=j}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),x=f.scaleFactor||this.internal.scaleFactor,g=0,N=0,j=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=f.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(A,O){return A.concat(E.splitTextToSize(O,b))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)g<(j=this.getStringUnitWidth(c[S],{font:m})*p)&&(g=j);return g!==0&&(N=c.length),{w:g/=x,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,g&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,f,p,m,x){if(r.call(this),!p)throw new Error("No data for PDF table.");var g,N,j,E,b=[],S=[],A=[],O={},K={},ie=[],W=[],$=(x=x||{}).autoSize||!1,oe=x.printHeaders!==!1,le=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,R=x.margins||Object.assign({width:this.getPageWidth()},t),q=typeof x.padding=="number"?x.padding:3,J=x.headerBackgroundColor||"#c8c8c8",B=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=oe,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=B,this.setFontSize(le),m==null)S=b=Object.keys(p[0]),A=b.map(function(){return"left"});else if(Array.isArray(m)&&An(m[0])==="object")for(b=m.map(function(ne){return ne.name}),S=m.map(function(ne){return ne.prompt||ne.name||""}),A=m.map(function(ne){return ne.align||"left"}),g=0;g<m.length;g+=1)K[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(S=b=m,A=b.map(function(){return"left"}));if($||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<b.length;g+=1){for(O[E=b[g]]=p.map(function(ne){return ne[E]}),this.setFont(void 0,"bold"),ie.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=O[E],this.setFont(void 0,"normal"),j=0;j<N.length;j+=1)ie.push(this.getTextDimensions(N[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[E]=Math.max.apply(null,ie)+q+q,ie=[]}if(oe){var fe={};for(g=0;g<b.length;g+=1)fe[b[g]]={},fe[b[g]].text=S[g],fe[b[g]].align=A[g];var he=l.call(this,fe,K);W=b.map(function(ne){return new s(c,f,K[ne],he,fe[ne].text,void 0,fe[ne].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var G=m.reduce(function(ne,be){return ne[be.name]=be.align,ne},{});for(g=0;g<p.length;g+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:g,data:p[g]},this);var P=l.call(this,p[g],K);for(j=0;j<b.length;j+=1){var F=p[g][b[j]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:g,col:j,data:F},this),a.call(this,new s(c,f,K[b[j]],P,F,g+2,G[b[j]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var l=function(c,f){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[g]-p-p)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/x+p+p},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){p=this.internal.__cell__.tableHeaderRow[g].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,x.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(N)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),n=!1}}(Dt.API);var D6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},I6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],by=M6(I6),O6=[100,200,300,400,500,600,700,800,900],uB=M6(O6);function _y(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return D6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof by[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function F_(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var dB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B_(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function fB(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},dB,n.genericFontFamilies||{}),s=null,a=null,l=0;l<t.length;++l)if(i[(s=_y(t[l])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+B_(s)+"' and default family '"+r+"'.");if(a=function(c,f){if(f[c])return f[c];var p=by[c],m=p<=by.normal?-1:1,x=F_(f,I6,p,m);if(!x)throw new Error("Could not find a matching font-stretch value for "+c);return x}(s.stretch,a),a=function(c,f){if(f[c])return f[c];for(var p=D6[c],m=0;m<p.length;++m)if(f[p[m]])return f[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var p=uB[c],m=F_(f,O6,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+B_(s)+"'.");return a}function z_(e){return e.trimLeft()}function hB(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function pB(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Qm,U_,q_,qv=["times"];(function(e){var t,n,r,i,s,a,l,c,f,p=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new a,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new a,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,f=new p}]);var m=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=T;Object.defineProperty(this,"pdf",{get:function(){return H}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(pe){Z=!!pe}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(pe){se=!!pe}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(pe){isNaN(pe)||(ce=pe)}});var je=0;Object.defineProperty(this,"posY",{get:function(){return je},set:function(pe){isNaN(pe)||(je=pe)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(pe){var te;typeof pe=="number"?te=[pe,pe,pe,pe]:((te=new Array(4))[0]=pe[0],te[1]=pe.length>=2?pe[1]:te[0],te[2]=pe.length>=3?pe[2]:te[0],te[3]=pe.length>=4?pe[3]:te[1]),f.margin=te}});var ke=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ke},set:function(pe){ke=pe}});var ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return ee},set:function(pe){ee=pe}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(pe){Se=pe}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(pe){pe instanceof p&&(f=pe)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(pe){f.path=pe}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(pe){_e=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var te;te=x(pe),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var te=x(pe);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var Re=null;function Fe(pe,te){if(Re===null){var et=function(He){var Ve=[];return Object.keys(He).forEach(function(Qe){He[Qe].forEach(function(at){var Ae=null;switch(at){case"bold":Ae={family:Qe,weight:"bold"};break;case"italic":Ae={family:Qe,style:"italic"};break;case"bolditalic":Ae={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":Ae={family:Qe}}Ae!==null&&(Ae.ref={name:Qe,style:at},Ve.push(Ae))})}),Ve}(pe.getFontList());Re=function(He){for(var Ve={},Qe=0;Qe<He.length;++Qe){var at=_y(He[Qe]),Ae=at.family,de=at.stretch,me=at.style,ge=at.weight;Ve[Ae]=Ve[Ae]||{},Ve[Ae][de]=Ve[Ae][de]||{},Ve[Ae][de][me]=Ve[Ae][de][me]||{},Ve[Ae][de][me][ge]=at}return Ve}(et.concat(te))}return Re}var Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(pe){Re=null,Ge=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var te;if(this.ctx.font=pe,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var et=te[1];te[2];var He=te[3],Ve=te[4];te[5];var Qe=te[6],at=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ve)[2];Ve=Math.floor(at==="px"?parseFloat(Ve)*this.pdf.internal.scaleFactor:at==="em"?parseFloat(Ve)*this.pdf.getFontSize():parseFloat(Ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ve);var Ae=function(Me){var rt,qe,At=[],lt=Me.trim();if(lt==="")return qv;if(lt in $_)return[$_[lt]];for(;lt!=="";){switch(qe=null,rt=(lt=z_(lt)).charAt(0)){case'"':case"'":qe=hB(lt.substring(1),rt);break;default:qe=pB(lt)}if(qe===null||(At.push(qe[0]),(lt=z_(qe[1]))!==""&&lt.charAt(0)!==","))return qv;lt=lt.replace(/^,/,"")}return At}(Qe);if(this.fontFaces){var de=fB(Fe(this.pdf,this.fontFaces),Ae.map(function(Me){return{family:Me,stretch:"normal",weight:He,style:et}}));this.pdf.setFont(de.ref.name,de.ref.style)}else{var me="";(He==="bold"||parseInt(He,10)>=700||et==="bold")&&(me="bold"),et==="italic"&&(me+="italic"),me.length===0&&(me="normal");for(var ge="",$e={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<Ae.length;We++){if(this.pdf.internal.getFont(Ae[We],me,{noFallback:!0,disableWarning:!0})!==void 0){ge=Ae[We];break}if(me==="bolditalic"&&this.pdf.internal.getFont(Ae[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ge=Ae[We],me="bold";else if(this.pdf.internal.getFont(Ae[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ge=Ae[We],me="normal";break}}if(ge===""){for(var Ke=0;Ke<Ae.length;Ke++)if($e[Ae[Ke]]){ge=$e[Ae[Ke]];break}}ge=ge===""?"Times":ge,this.pdf.setFont(ge,me)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};m.prototype.setLineDash=function(T){this.lineDash=T},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){O.call(this,"fill",!1)},m.prototype.stroke=function(){O.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(T,H){if(isNaN(T)||isNaN(H))throw $n.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new a(T,H));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(T,H)},m.prototype.closePath=function(){var T=new a(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&An(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){T=new a(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(T.x,T.y)},m.prototype.lineTo=function(T,H){if(isNaN(T)||isNaN(H))throw $n.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new a(T,H));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},m.prototype.quadraticCurveTo=function(T,H,Z,se){if(isNaN(Z)||isNaN(se)||isNaN(T)||isNaN(H))throw $n.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new a(Z,se)),je=this.ctx.transform.applyToPoint(new a(T,H));this.path.push({type:"qct",x1:je.x,y1:je.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new a(ce.x,ce.y)},m.prototype.bezierCurveTo=function(T,H,Z,se,ce,je){if(isNaN(ce)||isNaN(je)||isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se))throw $n.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ke=this.ctx.transform.applyToPoint(new a(ce,je)),ee=this.ctx.transform.applyToPoint(new a(T,H)),Se=this.ctx.transform.applyToPoint(new a(Z,se));this.path.push({type:"bct",x1:ee.x,y1:ee.y,x2:Se.x,y2:Se.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new a(ke.x,ke.y)},m.prototype.arc=function(T,H,Z,se,ce,je){if(isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se)||isNaN(ce))throw $n.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(je=!!je,!this.ctx.transform.isIdentity){var ke=this.ctx.transform.applyToPoint(new a(T,H));T=ke.x,H=ke.y;var ee=this.ctx.transform.applyToPoint(new a(0,Z)),Se=this.ctx.transform.applyToPoint(new a(0,0));Z=Math.sqrt(Math.pow(ee.x-Se.x,2)+Math.pow(ee.y-Se.y,2))}Math.abs(ce-se)>=2*Math.PI&&(se=0,ce=2*Math.PI),this.path.push({type:"arc",x:T,y:H,radius:Z,startAngle:se,endAngle:ce,counterclockwise:je})},m.prototype.arcTo=function(T,H,Z,se,ce){throw new Error("arcTo not implemented.")},m.prototype.rect=function(T,H,Z,se){if(isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se))throw $n.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,H),this.lineTo(T+Z,H),this.lineTo(T+Z,H+se),this.lineTo(T,H+se),this.lineTo(T,H),this.lineTo(T+Z,H),this.lineTo(T,H)},m.prototype.fillRect=function(T,H,Z,se){if(isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se))throw $n.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,H,Z,se),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},m.prototype.strokeRect=function(T,H,Z,se){if(isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se))throw $n.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(T,H,Z,se),this.stroke())},m.prototype.clearRect=function(T,H,Z,se){if(isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se))throw $n.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,H,Z,se))},m.prototype.save=function(T){T=typeof T!="boolean"||T;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},m.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(H),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(T){var H,Z,se,ce;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))H=0,Z=0,se=0,ce=0;else{var je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(je!==null)H=parseInt(je[1]),Z=parseInt(je[2]),se=parseInt(je[3]),ce=1;else if((je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)H=parseInt(je[1]),Z=parseInt(je[2]),se=parseInt(je[3]),ce=parseFloat(je[4]);else{if(ce=1,typeof T=="string"&&T.charAt(0)!=="#"){var ke=new E6(T);T=ke.ok?ke.toHex():"#000000"}T.length===4?(H=T.substring(1,2),H+=H,Z=T.substring(2,3),Z+=Z,se=T.substring(3,4),se+=se):(H=T.substring(1,3),Z=T.substring(3,5),se=T.substring(5,7)),H=parseInt(H,16),Z=parseInt(Z,16),se=parseInt(se,16)}}return{r:H,g:Z,b:se,a:ce,style:T}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(T,H,Z,se){if(isNaN(H)||isNaN(Z)||typeof T!="string")throw $n.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!g.call(this)){var ce=P(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;q.call(this,{text:T,x:H,y:Z,scale:je,angle:ce,align:this.textAlign,maxWidth:se})}},m.prototype.strokeText=function(T,H,Z,se){if(isNaN(H)||isNaN(Z)||typeof T!="string")throw $n.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){se=isNaN(se)?void 0:se;var ce=P(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;q.call(this,{text:T,x:H,y:Z,scale:je,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:se})}},m.prototype.measureText=function(T){if(typeof T!="string")throw $n.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Z=this.pdf.internal.scaleFactor,se=H.internal.getFontSize(),ce=H.getStringUnitWidth(T)*se/H.internal.scaleFactor,je=function(ke){var ee=(ke=ke||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ee}}),this};return new je({width:ce*=Math.round(96*Z/72*1e4)/1e4})},m.prototype.scale=function(T,H){if(isNaN(T)||isNaN(H))throw $n.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(T,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},m.prototype.rotate=function(T){if(isNaN(T))throw $n.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},m.prototype.translate=function(T,H){if(isNaN(T)||isNaN(H))throw $n.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,T,H);this.ctx.transform=this.ctx.transform.multiply(Z)},m.prototype.transform=function(T,H,Z,se,ce,je){if(isNaN(T)||isNaN(H)||isNaN(Z)||isNaN(se)||isNaN(ce)||isNaN(je))throw $n.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ke=new c(T,H,Z,se,ce,je);this.ctx.transform=this.ctx.transform.multiply(ke)},m.prototype.setTransform=function(T,H,Z,se,ce,je){T=isNaN(T)?1:T,H=isNaN(H)?0:H,Z=isNaN(Z)?0:Z,se=isNaN(se)?1:se,ce=isNaN(ce)?0:ce,je=isNaN(je)?0:je,this.ctx.transform=new c(T,H,Z,se,ce,je)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(T,H,Z,se,ce,je,ke,ee,Se){var _e=this.pdf.getImageProperties(T),Re=1,Fe=1,Ge=1,pe=1;se!==void 0&&ee!==void 0&&(Ge=ee/se,pe=Se/ce,Re=_e.width/se*ee/se,Fe=_e.height/ce*Se/ce),je===void 0&&(je=H,ke=Z,H=0,Z=0),se!==void 0&&ee===void 0&&(ee=se,Se=ce),se===void 0&&ee===void 0&&(ee=_e.width,Se=_e.height);for(var te,et=this.ctx.transform.decompose(),He=P(et.rotate.shx),Ve=new c,Qe=(Ve=(Ve=(Ve=Ve.multiply(et.translate)).multiply(et.skew)).multiply(et.scale)).applyToRectangle(new l(je-H*Ge,ke-Z*pe,se*Re,ce*Fe)),at=E.call(this,Qe),Ae=[],de=0;de<at.length;de+=1)Ae.indexOf(at[de])===-1&&Ae.push(at[de]);if(A(Ae),this.autoPaging)for(var me=Ae[0],ge=Ae[Ae.length-1],$e=me;$e<ge+1;$e++){this.pdf.setPage($e);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ke=$e===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=$e===1?0:Me+($e-2)*rt;if(this.ctx.clip_path.length!==0){var At=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(te,this.posX+this.margin[3],-qe+Ke+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=At}var lt=JSON.parse(JSON.stringify(Qe));lt=S([lt],this.posX+this.margin[3],-qe+Ke+this.ctx.prevPageLastElemOffset)[0];var Bt=($e>me||$e<ge)&&j.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,rt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,He),Bt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,He)};var E=function(T,H,Z){var se=[];H=H||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":se.push(Math.floor((T.y+ce)/Z)+1);break;case"arc":se.push(Math.floor((T.y+ce-T.radius)/Z)+1),se.push(Math.floor((T.y+ce+T.radius)/Z)+1);break;case"qct":var je=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);se.push(Math.floor((je.y+ce)/Z)+1),se.push(Math.floor((je.y+je.h+ce)/Z)+1);break;case"bct":var ke=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);se.push(Math.floor((ke.y+ce)/Z)+1),se.push(Math.floor((ke.y+ke.h+ce)/Z)+1);break;case"rect":se.push(Math.floor((T.y+ce)/Z)+1),se.push(Math.floor((T.y+T.h+ce)/Z)+1)}for(var ee=0;ee<se.length;ee+=1)for(;this.pdf.internal.getNumberOfPages()<se[ee];)b.call(this);return se},b=function(){var T=this.fillStyle,H=this.strokeStyle,Z=this.font,se=this.lineCap,ce=this.lineWidth,je=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=H,this.font=Z,this.lineCap=se,this.lineWidth=ce,this.lineJoin=je},S=function(T,H,Z){for(var se=0;se<T.length;se++)switch(T[se].type){case"bct":T[se].x2+=H,T[se].y2+=Z;case"qct":T[se].x1+=H,T[se].y1+=Z;case"mt":case"lt":case"arc":default:T[se].x+=H,T[se].y+=Z}return T},A=function(T){return T.sort(function(H,Z){return H-Z})},O=function(T,H){for(var Z,se,ce=this.fillStyle,je=this.strokeStyle,ke=this.lineCap,ee=this.lineWidth,Se=Math.abs(ee*this.ctx.transform.scaleX),_e=this.lineJoin,Re=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),Ge=[],pe=0;pe<Fe.length;pe++)if(Fe[pe].x!==void 0)for(var te=E.call(this,Fe[pe]),et=0;et<te.length;et+=1)Ge.indexOf(te[et])===-1&&Ge.push(te[et]);for(var He=0;He<Ge.length;He++)for(;this.pdf.internal.getNumberOfPages()<Ge[He];)b.call(this);if(A(Ge),this.autoPaging)for(var Ve=Ge[0],Qe=Ge[Ge.length-1],at=Ve;at<Qe+1;at++){this.pdf.setPage(at),this.fillStyle=ce,this.strokeStyle=je,this.lineCap=ke,this.lineWidth=Se,this.lineJoin=_e;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],de=at===1?this.posY+this.margin[0]:this.margin[0],me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=at===1?0:me+(at-2)*ge;if(this.ctx.clip_path.length!==0){var We=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-$e+de+this.ctx.prevPageLastElemOffset),K.call(this,T,!0),this.path=We}if(se=JSON.parse(JSON.stringify(Re)),this.path=S(se,this.posX+this.margin[3],-$e+de+this.ctx.prevPageLastElemOffset),H===!1||at===0){var Ke=(at>Ve||at<Qe)&&j.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,ge,null).clip().discardPath()),K.call(this,T,H),Ke&&this.pdf.restoreGraphicsState()}this.lineWidth=ee}else this.lineWidth=Se,K.call(this,T,H),this.lineWidth=ee;this.path=Re},K=function(T,H){if((T!=="stroke"||H||!N.call(this))&&(T==="stroke"||H||!g.call(this))){for(var Z,se,ce=[],je=this.path,ke=0;ke<je.length;ke++){var ee=je[ke];switch(ee.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:ee,deltas:[],abs:[]});break;case"lt":var Se=ce.length;if(je[ke-1]&&!isNaN(je[ke-1].x)&&(Z=[ee.x-je[ke-1].x,ee.y-je[ke-1].y],Se>0)){for(;Se>=0;Se--)if(ce[Se-1].close!==!0&&ce[Se-1].begin!==!0){ce[Se-1].deltas.push(Z),ce[Se-1].abs.push(ee);break}}break;case"bct":Z=[ee.x1-je[ke-1].x,ee.y1-je[ke-1].y,ee.x2-je[ke-1].x,ee.y2-je[ke-1].y,ee.x-je[ke-1].x,ee.y-je[ke-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var _e=je[ke-1].x+2/3*(ee.x1-je[ke-1].x),Re=je[ke-1].y+2/3*(ee.y1-je[ke-1].y),Fe=ee.x+2/3*(ee.x1-ee.x),Ge=ee.y+2/3*(ee.y1-ee.y),pe=ee.x,te=ee.y;Z=[_e-je[ke-1].x,Re-je[ke-1].y,Fe-je[ke-1].x,Ge-je[ke-1].y,pe-je[ke-1].x,te-je[ke-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(ee)}}se=H?null:T==="stroke"?"stroke":"fill";for(var et=!1,He=0;He<ce.length;He++)if(ce[He].arc)for(var Ve=ce[He].abs,Qe=0;Qe<Ve.length;Qe++){var at=Ve[Qe];at.type==="arc"?$.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,H,!et):J.call(this,at.x,at.y),et=!0}else if(ce[He].close===!0)this.pdf.internal.out("h"),et=!1;else if(ce[He].begin!==!0){var Ae=ce[He].start.x,de=ce[He].start.y;B.call(this,ce[He].deltas,Ae,de),et=!0}se&&oe.call(this,se),H&&le.call(this)}},ie=function(T){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-Z;case"top":return T+H-Z;case"hanging":return T+H-2*Z;case"middle":return T+H/2-Z;case"ideographic":return T;case"alphabetic":default:return T}},W=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(H,Z){this.colorStops.push([H,Z])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var $=function(T,H,Z,se,ce,je,ke,ee,Se){for(var _e=he.call(this,Z,se,ce,je),Re=0;Re<_e.length;Re++){var Fe=_e[Re];Re===0&&(Se?R.call(this,Fe.x1+T,Fe.y1+H):J.call(this,Fe.x1+T,Fe.y1+H)),fe.call(this,T,H,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}ee?le.call(this):oe.call(this,ke)},oe=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(T,H){this.pdf.internal.out(n(T)+" "+r(H)+" m")},q=function(T){var H;switch(T.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Z=this.pdf.getTextDimensions(T.text),se=ie.call(this,T.y),ce=W.call(this,se)-Z.h,je=this.ctx.transform.applyToPoint(new a(T.x,se)),ke=this.ctx.transform.decompose(),ee=new c;ee=(ee=(ee=ee.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale);for(var Se,_e,Re,Fe=this.ctx.transform.applyToRectangle(new l(T.x,se,Z.w,Z.h)),Ge=ee.applyToRectangle(new l(T.x,ce,Z.w,Z.h)),pe=E.call(this,Ge),te=[],et=0;et<pe.length;et+=1)te.indexOf(pe[et])===-1&&te.push(pe[et]);if(A(te),this.autoPaging)for(var He=te[0],Ve=te[te.length-1],Qe=He;Qe<Ve+1;Qe++){this.pdf.setPage(Qe);var at=Qe===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[2],me=de-this.margin[0],ge=this.pdf.internal.pageSize.width-this.margin[1],$e=ge-this.margin[3],We=Qe===1?0:Ae+(Qe-2)*me;if(this.ctx.clip_path.length!==0){var Ke=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Se,this.posX+this.margin[3],-1*We+at),K.call(this,"fill",!0),this.path=Ke}var Me=S([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-We+at+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*T.scale),Re=this.lineWidth,this.lineWidth=Re*T.scale);var rt=this.autoPaging!=="text";if(rt||Me.y+Me.h<=de){if(rt||Me.y>=at&&Me.x<=ge){var qe=rt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||ge-Me.x)[0],At=S([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-We+at+this.ctx.prevPageLastElemOffset)[0],lt=rt&&(Qe>He||Qe<Ve)&&j.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,me,null).clip().discardPath()),this.pdf.text(qe,At.x,At.y,{angle:T.angle,align:H,renderingMode:T.renderingMode}),lt&&this.pdf.restoreGraphicsState()}}else Me.y<de&&(this.ctx.prevPageLastElemOffset+=de-Me.y);T.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)}else T.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*T.scale),Re=this.lineWidth,this.lineWidth=Re*T.scale),this.pdf.text(T.text,je.x+this.posX,je.y+this.posY,{angle:T.angle,align:H,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)},J=function(T,H,Z,se){Z=Z||0,se=se||0,this.pdf.internal.out(n(T+Z)+" "+r(H+se)+" l")},B=function(T,H,Z){return this.pdf.lines(T,H,Z,null,null)},fe=function(T,H,Z,se,ce,je,ke,ee){this.pdf.internal.out([t(i(Z+T)),t(s(se+H)),t(i(ce+T)),t(s(je+H)),t(i(ke+T)),t(s(ee+H)),"c"].join(" "))},he=function(T,H,Z,se){for(var ce=2*Math.PI,je=Math.PI/2;H>Z;)H-=ce;var ke=Math.abs(Z-H);ke<ce&&se&&(ke=ce-ke);for(var ee=[],Se=se?-1:1,_e=H;ke>1e-5;){var Re=_e+Se*Math.min(ke,je);ee.push(G.call(this,T,_e,Re)),ke-=Math.abs(Re-_e),_e=Re}return ee},G=function(T,H,Z){var se=(Z-H)/2,ce=T*Math.cos(se),je=T*Math.sin(se),ke=ce,ee=-je,Se=ke*ke+ee*ee,_e=Se+ke*ce+ee*je,Re=4/3*(Math.sqrt(2*Se*_e)-_e)/(ke*je-ee*ce),Fe=ke-Re*ee,Ge=ee+Re*ke,pe=Fe,te=-Ge,et=se+H,He=Math.cos(et),Ve=Math.sin(et);return{x1:T*Math.cos(H),y1:T*Math.sin(H),x2:Fe*He-Ge*Ve,y2:Fe*Ve+Ge*He,x3:pe*He-te*Ve,y3:pe*Ve+te*He,x4:T*Math.cos(Z),y4:T*Math.sin(Z)}},P=function(T){return 180*T/Math.PI},F=function(T,H,Z,se,ce,je){var ke=T+.5*(Z-T),ee=H+.5*(se-H),Se=ce+.5*(Z-ce),_e=je+.5*(se-je),Re=Math.min(T,ce,ke,Se),Fe=Math.max(T,ce,ke,Se),Ge=Math.min(H,je,ee,_e),pe=Math.max(H,je,ee,_e);return new l(Re,Ge,Fe-Re,pe-Ge)},ne=function(T,H,Z,se,ce,je,ke,ee){var Se,_e,Re,Fe,Ge,pe,te,et,He,Ve,Qe,at,Ae,de,me=Z-T,ge=se-H,$e=ce-Z,We=je-se,Ke=ke-ce,Me=ee-je;for(_e=0;_e<41;_e++)He=(te=(Re=T+(Se=_e/40)*me)+Se*((Ge=Z+Se*$e)-Re))+Se*(Ge+Se*(ce+Se*Ke-Ge)-te),Ve=(et=(Fe=H+Se*ge)+Se*((pe=se+Se*We)-Fe))+Se*(pe+Se*(je+Se*Me-pe)-et),_e==0?(Qe=He,at=Ve,Ae=He,de=Ve):(Qe=Math.min(Qe,He),at=Math.min(at,Ve),Ae=Math.max(Ae,He),de=Math.max(de,Ve));return new l(Math.round(Qe),Math.round(at),Math.round(Ae-Qe),Math.round(de-at))},be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,H,Z=(T=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:H}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Dt.API),function(e){var t=function(s){var a,l,c,f,p,m,x,g,N,j;for(l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(j=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)-(x=p%85))/85)%85,l.push(m+33,x+33,g+33,N+33,j+33)):l.push(122);return function(E,b){for(var S=b;S>0;S--)E.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,f,p,m=String,x="length",g=255,N="charCodeAt",j="slice",E="replace";for(s[j](-2),s=s[j](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],f=0,p=(s+=a="uuuuu"[j](s[x]%5||5))[x];p>f;f+=5)l=52200625*(s[N](f)-33)+614125*(s[N](f+1)-33)+7225*(s[N](f+2)-33)+85*(s[N](f+3)-33)+(s[N](f+4)-33),c.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(b,S){for(var A=S;A>0;A--)b.pop()}(c,a[x]),m.fromCharCode.apply(m,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=gy(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Dt.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,f,p){var m=new XMLHttpRequest,x=0,g=function(N){var j=N.length,E=[],b=String.fromCharCode;for(x=0;x<j;x+=1)E.push(b(255&N.charCodeAt(x)));return E.join("")};if(m.open("GET",c,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?p(g(this.responseText)):p(void 0)}),m.send(null),f&&m.status===200)return g(m.responseText)}(i,s,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Dt.API),function(e){function t(){return(It.html2canvas?Promise.resolve(It.html2canvas):ol(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(It.DOMPurify?Promise.resolve(It.DOMPurify):ol(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=An(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),x=f.firstChild;x;x=x.nextSibling)p!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||m.appendChild(c(x,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var x=0;x<f.length;++x){var g=f[x],N=g.src.find(function(j){return j.format==="truetype"});N&&c.addFont(N.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,p){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,f),m}).then(f,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(f,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,l,c){if(An(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var g,N=0,j=0;if(x.hasOwnProperty(m))N=x[m][1]/p,j=x[m][0]/p;else try{N=c[1],j=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",j>N&&(g=j,j=N,N=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>j&&(g=j,j=N,N=g)}return{width:j,height:N,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(_y):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(e){return q_=e,this.internal.events.subscribe("postPutResources",function(){Qm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),U_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qm!==void 0&&U_!==void 0&&this.internal.out("/Names <</JavaScript "+Qm+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var m=n.internal.newObject();p.push(m);var x=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Dt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,l){var c,f=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(m){for(var x,g=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,j={width:0,height:0,numcomponents:1},E=4;E<N;E+=2){if(E+=g,t.indexOf(m.charCodeAt(E+1))!==-1){x=256*m.charCodeAt(E+5)+m.charCodeAt(E+6),j={width:256*m.charCodeAt(E+7)+m.charCodeAt(E+8),height:x,numcomponents:m.charCodeAt(E+9)};break}g=256*m.charCodeAt(E+2)+m.charCodeAt(E+3)}return j}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}}(Dt.API);var zd,Zm,W_,H_,V_,mB=function(){var e,t,n;function r(s){var a,l,c,f,p,m,x,g,N,j,E,b,S,A;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),N=(function(){var O,K;for(K=[],O=0;O<4;++O)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*p/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,b=0;0<=a?b<a:b>a;0<=a?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((j=c-this.transparency.indexed.length)>0)for(S=0;0<=j?S<j:S>j;0<=j?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":x=(E=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,x)),this.text[g]=String.fromCharCode.apply(String,E.slice(x+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(A=this.colorType)===4||A===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,x,g,N){var j,E,b,S,A,O,K,ie,W,$,oe,le,R,q,J,B,fe,he,G,P,F,ne=Math.ceil((f.width-m)/g),be=Math.ceil((f.height-x)/N),T=f.width==ne&&f.height==be;for(q=a*ne,le=T?l:new Uint8Array(q*be),O=s.length,R=0,E=0;R<be&&c<O;){switch(s[c++]){case 0:for(S=fe=0;fe<q;S=fe+=1)le[E++]=s[c++];break;case 1:for(S=he=0;he<q;S=he+=1)j=s[c++],A=S<a?0:le[E-a],le[E++]=(j+A)%256;break;case 2:for(S=G=0;G<q;S=G+=1)j=s[c++],b=(S-S%a)/a,J=R&&le[(R-1)*q+b*a+S%a],le[E++]=(J+j)%256;break;case 3:for(S=P=0;P<q;S=P+=1)j=s[c++],b=(S-S%a)/a,A=S<a?0:le[E-a],J=R&&le[(R-1)*q+b*a+S%a],le[E++]=(j+Math.floor((A+J)/2))%256;break;case 4:for(S=F=0;F<q;S=F+=1)j=s[c++],b=(S-S%a)/a,A=S<a?0:le[E-a],R===0?J=B=0:(J=le[(R-1)*q+b*a+S%a],B=b&&le[(R-1)*q+(b-1)*a+S%a]),K=A+J-B,ie=Math.abs(K-A),$=Math.abs(K-J),oe=Math.abs(K-B),W=ie<=$&&ie<=oe?A:$<=oe?J:B,le[E++]=(j+W)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!T){var H=((x+R*N)*f.width+m)*a,Z=R*q;for(S=0;S<ne;S+=1){for(var se=0;se<a;se+=1)l[H++]=le[Z++];H+=(g-1)*a}}R++}}return s=G$(s),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,c,f,p,m,x,g;for(l=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+l.length),c=0,s=0,a=m=0,x=l.length;m<x;a=m+=3)f[c++]=l[a],f[c++]=l[a+1],f[c++]=l[a+2],f[c++]=(g=p[s++])!=null?g:255;return f},r.prototype.copyToImageData=function(s,a){var l,c,f,p,m,x,g,N,j,E,b;if(c=this.colors,j=null,l=this.hasAlphaChannel,this.palette.length&&(j=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(f=s.data||s).length,m=j||a,p=x=0,c===1)for(;p<N;)g=j?4*a[p/4]:x,E=m[g++],f[p++]=E,f[p++]=E,f[p++]=E,f[p++]=l?m[g++]:255,x=g;else for(;p<N;)g=j?4*a[p/4]:x,f[p++]=m[g++],f[p++]=m[g++],f[p++]=m[g++],f[p++]=l?m[g++]:255,x=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(It)==="[object Window]"){try{t=It.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,c,f,p,m,x,g;if(this.animation){for(g=[],l=p=0,m=(x=this.animation.frames).length;p<m;l=++p)a=x[l],c=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,f),a.imageData=c,g.push(a.image=e(c));return g}},r.prototype.renderFrame=function(s,a){var l,c,f;return l=(c=this.animation.frames)[a],f=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,c,f,p,m,x=this;return l=0,m=this.animation,f=m.numFrames,c=m.frames,p=m.numPlays,(a=function(){var g,N;if(g=l++%f,N=c[g],x.renderFrame(s,g),f>1&&l/f<p)return x.animation._timeout=setTimeout(a,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function gB(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=a,t+=3*a);var f=!0,p=[],m=0,x=null,g=0,N=null;for(this.width=n,this.height=r;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=e[t++];m=e[t++]|e[t++]<<8,x=e[t++],!(1&j)&&(x=null),g=j>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var E=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,A=e[t++]|e[t++]<<8,O=e[t++],K=O>>6&1,ie=1<<(7&O)+1,W=l,$=c,oe=!1;O>>7&&(oe=!0,W=t,$=ie,t+=3*ie);var le=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}p.push({x:E,y:b,width:S,height:A,has_local_palette:oe,palette_offset:W,palette_size:$,data_offset:le,data_length:t-le,transparent_index:x,interlaced:!!K,delay:m,disposal:g});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(q){if(q<0||q>=p.length)throw new Error("Frame index out of range.");return p[q]},this.decodeAndBlitFrameBGRA=function(q,J){var B=this.frameInfo(q),fe=B.width*B.height,he=new Uint8Array(fe);G_(e,B.data_offset,he,fe);var G=B.palette_offset,P=B.transparent_index;P===null&&(P=256);var F=B.width,ne=n-F,be=F,T=4*(B.y*n+B.x),H=4*((B.y+B.height)*n+B.x),Z=T,se=4*ne;B.interlaced===!0&&(se+=4*n*7);for(var ce=8,je=0,ke=he.length;je<ke;++je){var ee=he[je];if(be===0&&(be=F,(Z+=se)>=H&&(se=4*ne+4*n*(ce-1),Z=T+(F+ne)*(ce<<1),ce>>=1)),ee===P)Z+=4;else{var Se=e[G+3*ee],_e=e[G+3*ee+1],Re=e[G+3*ee+2];J[Z++]=Re,J[Z++]=_e,J[Z++]=Se,J[Z++]=255}--be}},this.decodeAndBlitFrameRGBA=function(q,J){var B=this.frameInfo(q),fe=B.width*B.height,he=new Uint8Array(fe);G_(e,B.data_offset,he,fe);var G=B.palette_offset,P=B.transparent_index;P===null&&(P=256);var F=B.width,ne=n-F,be=F,T=4*(B.y*n+B.x),H=4*((B.y+B.height)*n+B.x),Z=T,se=4*ne;B.interlaced===!0&&(se+=4*n*7);for(var ce=8,je=0,ke=he.length;je<ke;++je){var ee=he[je];if(be===0&&(be=F,(Z+=se)>=H&&(se=4*ne+4*n*(ce-1),Z=T+(F+ne)*(ce<<1),ce>>=1)),ee===P)Z+=4;else{var Se=e[G+3*ee],_e=e[G+3*ee+1],Re=e[G+3*ee+2];J[Z++]=Se,J[Z++]=_e,J[Z++]=Re,J[Z++]=255}--be}}}function G_(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,l=a+1,c=i+1,f=(1<<c)-1,p=0,m=0,x=0,g=e[t++],N=new Int32Array(4096),j=null;;){for(;p<16&&g!==0;)m|=e[t++]<<p,p+=8,g===1?g=e[t++]:--g;if(p<c)break;var E=m&f;if(m>>=c,p-=c,E!==s){if(E===a)break;for(var b=E<l?E:j,S=0,A=b;A>s;)A=N[A]>>8,++S;var O=A;if(x+S+(b!==E?1:0)>r)return void $n.log("Warning, gif stream longer than expected.");n[x++]=O;var K=x+=S;for(b!==E&&(n[x++]=O),A=b;S--;)A=N[A],n[--K]=255&A,A>>=8;j!==null&&l<4096&&(N[l++]=j<<8|O,l>=f+1&&c<12&&(++c,f=f<<1|1)),j=E}else l=a+1,f=(1<<(c=i+1))-1,j=null}return x!==r&&$n.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Wv(e){var t,n,r,i,s,a=Math.floor,l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(65535),x=new Array(65535),g=new Array(64),N=new Array(64),j=[],E=0,b=7,S=new Array(64),A=new Array(64),O=new Array(64),K=new Array(256),ie=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],$=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(T,H){for(var Z=0,se=0,ce=new Array,je=1;je<=16;je++){for(var ke=1;ke<=T[je];ke++)ce[H[se]]=[],ce[H[se]][0]=Z,ce[H[se]][1]=je,se++,Z++;Z*=2}return ce}function G(T){for(var H=T[0],Z=T[1]-1;Z>=0;)H&1<<Z&&(E|=1<<b),Z--,--b<0&&(E==255?(P(255),P(0)):P(E),b=7,E=0)}function P(T){j.push(T)}function F(T){P(T>>8&255),P(255&T)}function ne(T,H,Z,se,ce){for(var je,ke=ce[0],ee=ce[240],Se=function(Ve,Qe){var at,Ae,de,me,ge,$e,We,Ke,Me,rt,qe=0;for(Me=0;Me<8;++Me){at=Ve[qe],Ae=Ve[qe+1],de=Ve[qe+2],me=Ve[qe+3],ge=Ve[qe+4],$e=Ve[qe+5],We=Ve[qe+6];var At=at+(Ke=Ve[qe+7]),lt=at-Ke,Bt=Ae+We,St=Ae-We,Ct=de+$e,mn=de-$e,Pt=me+ge,Qn=me-ge,Et=At+Pt,or=At-Pt,un=Bt+Ct,qt=Bt-Ct;Ve[qe]=Et+un,Ve[qe+4]=Et-un;var _t=.707106781*(qt+or);Ve[qe+2]=or+_t,Ve[qe+6]=or-_t;var Wt=.382683433*((Et=Qn+mn)-(qt=St+lt)),wn=.5411961*Et+Wt,rn=1.306562965*qt+Wt,lr=.707106781*(un=mn+St),Rr=lt+lr,gt=lt-lr;Ve[qe+5]=gt+wn,Ve[qe+3]=gt-wn,Ve[qe+1]=Rr+rn,Ve[qe+7]=Rr-rn,qe+=8}for(qe=0,Me=0;Me<8;++Me){at=Ve[qe],Ae=Ve[qe+8],de=Ve[qe+16],me=Ve[qe+24],ge=Ve[qe+32],$e=Ve[qe+40],We=Ve[qe+48];var Zn=at+(Ke=Ve[qe+56]),cr=at-Ke,Pn=Ae+We,Rn=Ae-We,Tn=de+$e,er=de-$e,Wi=me+ge,Ai=me-ge,vs=Zn+Wi,ys=Zn-Wi,xs=Pn+Tn,ws=Pn-Tn;Ve[qe]=vs+xs,Ve[qe+32]=vs-xs;var Hi=.707106781*(ws+ys);Ve[qe+16]=ys+Hi,Ve[qe+48]=ys-Hi;var Bs=.382683433*((vs=Ai+er)-(ws=Rn+cr)),jo=.5411961*vs+Bs,ul=1.306562965*ws+Bs,dl=.707106781*(xs=er+Rn),fl=cr+dl,ha=cr-dl;Ve[qe+40]=ha+jo,Ve[qe+24]=ha-jo,Ve[qe+8]=fl+ul,Ve[qe+56]=fl-ul,qe++}for(Me=0;Me<64;++Me)rt=Ve[Me]*Qe[Me],g[Me]=rt>0?rt+.5|0:rt-.5|0;return g}(T,H),_e=0;_e<64;++_e)N[W[_e]]=Se[_e];var Re=N[0]-Z;Z=N[0],Re==0?G(se[0]):(G(se[x[je=32767+Re]]),G(m[je]));for(var Fe=63;Fe>0&&N[Fe]==0;)Fe--;if(Fe==0)return G(ke),Z;for(var Ge,pe=1;pe<=Fe;){for(var te=pe;N[pe]==0&&pe<=Fe;)++pe;var et=pe-te;if(et>=16){Ge=et>>4;for(var He=1;He<=Ge;++He)G(ee);et&=15}je=32767+N[pe],G(ce[(et<<4)+x[je]]),G(m[je]),pe++}return Fe!=63&&G(ke),Z}function be(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(H){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var ce=a((Z[se]*H+50)/100);ce=Math.min(Math.max(ce,1),255),l[W[se]]=ce}for(var je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ke=0;ke<64;ke++){var ee=a((je[ke]*H+50)/100);ee=Math.min(Math.max(ee,1),255),c[W[ke]]=ee}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Re=0;Re<8;Re++)for(var Fe=0;Fe<8;Fe++)f[_e]=1/(l[W[_e]]*Se[Re]*Se[Fe]*8),p[_e]=1/(c[W[_e]]*Se[Re]*Se[Fe]*8),_e++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,H){H&&be(H),j=new Array,E=0,b=7,F(65496),F(65504),F(16),P(74),P(70),P(73),P(70),P(0),P(1),P(1),P(0),F(1),F(1),P(0),P(0),function(){F(65499),F(132),P(0);for(var Ae=0;Ae<64;Ae++)P(l[Ae]);P(1);for(var de=0;de<64;de++)P(c[de])}(),function(Ae,de){F(65472),F(17),P(8),F(de),F(Ae),P(3),P(1),P(17),P(0),P(2),P(17),P(1),P(3),P(17),P(1)}(T.width,T.height),function(){F(65476),F(418),P(0);for(var Ae=0;Ae<16;Ae++)P($[Ae+1]);for(var de=0;de<=11;de++)P(oe[de]);P(16);for(var me=0;me<16;me++)P(le[me+1]);for(var ge=0;ge<=161;ge++)P(R[ge]);P(1);for(var $e=0;$e<16;$e++)P(q[$e+1]);for(var We=0;We<=11;We++)P(J[We]);P(17);for(var Ke=0;Ke<16;Ke++)P(B[Ke+1]);for(var Me=0;Me<=161;Me++)P(fe[Me])}(),F(65498),F(12),P(3),P(1),P(0),P(2),P(17),P(3),P(17),P(0),P(63),P(0);var Z=0,se=0,ce=0;E=0,b=7,this.encode.displayName="_encode_";for(var je,ke,ee,Se,_e,Re,Fe,Ge,pe,te=T.data,et=T.width,He=T.height,Ve=4*et,Qe=0;Qe<He;){for(je=0;je<Ve;){for(_e=Ve*Qe+je,Fe=-1,Ge=0,pe=0;pe<64;pe++)Re=_e+(Ge=pe>>3)*Ve+(Fe=4*(7&pe)),Qe+Ge>=He&&(Re-=Ve*(Qe+1+Ge-He)),je+Fe>=Ve&&(Re-=je+Fe-Ve+4),ke=te[Re++],ee=te[Re++],Se=te[Re++],S[pe]=(ie[ke]+ie[ee+256>>0]+ie[Se+512>>0]>>16)-128,A[pe]=(ie[ke+768>>0]+ie[ee+1024>>0]+ie[Se+1280>>0]>>16)-128,O[pe]=(ie[ke+1280>>0]+ie[ee+1536>>0]+ie[Se+1792>>0]>>16)-128;Z=ne(S,f,Z,t,r),se=ne(A,p,se,n,i),ce=ne(O,p,ce,n,i),je+=32}Qe+=8}if(b>=0){var at=[];at[1]=b+1,at[0]=(1<<b+1)-1,G(at)}return F(65497),new Uint8Array(j)},e=e||50,function(){for(var T=String.fromCharCode,H=0;H<256;H++)K[H]=T(H)}(),t=he($,oe),n=he(q,J),r=he(le,R),i=he(B,fe),function(){for(var T=1,H=2,Z=1;Z<=15;Z++){for(var se=T;se<H;se++)x[32767+se]=Z,m[32767+se]=[],m[32767+se][1]=Z,m[32767+se][0]=se;for(var ce=-(H-1);ce<=-T;ce++)x[32767+ce]=Z,m[32767+ce]=[],m[32767+ce][1]=Z,m[32767+ce][0]=H-1+ce;T<<=1,H<<=1}}(),function(){for(var T=0;T<256;T++)ie[T]=19595*T,ie[T+256>>0]=38470*T,ie[T+512>>0]=7471*T+32768,ie[T+768>>0]=-11059*T,ie[T+1024>>0]=-21709*T,ie[T+1280>>0]=32768*T+8421375,ie[T+1536>>0]=-27439*T,ie[T+1792>>0]=-5329*T}(),be(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ca(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y_(e){function t($){if(!$)throw Error("assert :P")}function n($,oe,le){for(var R=0;4>R;R++)if($[oe+R]!=le.charCodeAt(R))return!0;return!1}function r($,oe,le,R,q){for(var J=0;J<q;J++)$[oe+J]=le[R+J]}function i($,oe,le,R){for(var q=0;q<R;q++)$[oe+q]=le}function s($){return new Int32Array($)}function a($,oe){for(var le=[],R=0;R<$;R++)le.push(new oe);return le}function l($,oe){var le=[];return function R(q,J,B){for(var fe=B[J],he=0;he<fe&&(q.push(B.length>J+1?[]:new oe),!(B.length<J+1));he++)R(q[he],J+1,B)}(le,0,$),le}var c=function(){var $=this;function oe(h,v){for(var _=1<<v-1>>>0;h&_;)_>>>=1;return _?(h&_-1)+_:h}function le(h,v,_,L,M){t(!(L%_));do h[v+(L-=_)]=M;while(0<L)}function R(h,v,_,L,M){if(t(2328>=M),512>=M)var z=s(512);else if((z=s(M))==null)return 0;return function(U,V,X,re,we,Ie){var Oe,Ce,Ze=V,Be=1<<X,xe=s(16),Ne=s(16);for(t(we!=0),t(re!=null),t(U!=null),t(0<X),Ce=0;Ce<we;++Ce){if(15<re[Ce])return 0;++xe[re[Ce]]}if(xe[0]==we)return 0;for(Ne[1]=0,Oe=1;15>Oe;++Oe){if(xe[Oe]>1<<Oe)return 0;Ne[Oe+1]=Ne[Oe]+xe[Oe]}for(Ce=0;Ce<we;++Ce)Oe=re[Ce],0<re[Ce]&&(Ie[Ne[Oe]++]=Ce);if(Ne[15]==1)return(re=new q).g=0,re.value=Ie[0],le(U,Ze,1,Be,re),Be;var Je,st=-1,Ye=Be-1,ht=0,ut=1,wt=1,dt=1<<X;for(Ce=0,Oe=1,we=2;Oe<=X;++Oe,we<<=1){if(ut+=wt<<=1,0>(wt-=xe[Oe]))return 0;for(;0<xe[Oe];--xe[Oe])(re=new q).g=Oe,re.value=Ie[Ce++],le(U,Ze+ht,we,dt,re),ht=oe(ht,Oe)}for(Oe=X+1,we=2;15>=Oe;++Oe,we<<=1){if(ut+=wt<<=1,0>(wt-=xe[Oe]))return 0;for(;0<xe[Oe];--xe[Oe]){if(re=new q,(ht&Ye)!=st){for(Ze+=dt,Je=1<<(st=Oe)-X;15>st&&!(0>=(Je-=xe[st]));)++st,Je<<=1;Be+=dt=1<<(Je=st-X),U[V+(st=ht&Ye)].g=Je+X,U[V+st].value=Ze-V-st}re.g=Oe-X,re.value=Ie[Ce++],le(U,Ze+(ht>>X),we,dt,re),ht=oe(ht,Oe)}}return ut!=2*Ne[15]-1?0:Be}(h,v,_,L,M,z)}function q(){this.value=this.g=0}function J(){this.value=this.g=0}function B(){this.G=a(5,q),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Br,J)}function fe(h,v,_,L){t(h!=null),t(v!=null),t(2147483648>L),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=_,h.Jd=v,h.Yc=_+L,h.Zc=4<=L?_+L-4+1:_,je(h)}function he(h,v){for(var _=0;0<v--;)_|=ee(h,128)<<v;return _}function G(h,v){var _=he(h,v);return ke(h)?-_:_}function P(h,v,_,L){var M,z=0;for(t(h!=null),t(v!=null),t(4294967288>L),h.Sb=L,h.Ra=0,h.u=0,h.h=0,4<L&&(L=4),M=0;M<L;++M)z+=v[_+M]<<8*M;h.Ra=z,h.bb=L,h.oa=v,h.pa=_}function F(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Tl-8>>>0,++h.bb,h.u-=8;Z(h)&&(h.h=1,h.u=0)}function ne(h,v){if(t(0<=v),!h.h&&v<=Pl){var _=H(h)&_s[v];return h.u+=v,F(h),_}return h.h=1,h.u=0}function be(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(h){return h.Ra>>>(h.u&Tl-1)>>>0}function Z(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Tl}function se(h,v){h.u=v,h.h=Z(h)}function ce(h){h.u>=Po&&(t(h.u>=Po),F(h))}function je(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ke(h){return he(h,1)}function ee(h,v){var _=h.Ca;0>h.b&&je(h);var L=h.b,M=_*v>>>8,z=(h.I>>>L>M)+0;for(z?(_-=M,h.I-=M+1<<L>>>0):_=M+1,L=_,M=0;256<=L;)M+=8,L>>=8;return L=7^M+ri[L],h.b-=L,h.Ca=(_<<L)-1,z}function Se(h,v,_){h[v+0]=_>>24&255,h[v+1]=_>>16&255,h[v+2]=_>>8&255,h[v+3]=_>>0&255}function _e(h,v){return h[v+0]<<0|h[v+1]<<8}function Re(h,v){return _e(h,v)|h[v+2]<<16}function Fe(h,v){return _e(h,v)|_e(h,v+2)<<16}function Ge(h,v){var _=1<<v;return t(h!=null),t(0<v),h.X=s(_),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function pe(h,v){t(h!=null),t(v!=null),t(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function et(h,v,_,L){t(_!=null),t(L!=null);var M=_[0],z=L[0];return M==0&&(M=(h*z+v/2)/v),z==0&&(z=(v*M+h/2)/h),0>=M||0>=z?0:(_[0]=M,L[0]=z,1)}function He(h,v){return h+(1<<v)-1>>>v}function Ve(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Qe(h,v){$[v]=function(_,L,M,z,U,V,X){var re;for(re=0;re<U;++re){var we=$[h](V[X+re-1],M,z+re);V[X+re]=Ve(_[L+re],we)}}}function at(){this.ud=this.hd=this.jd=0}function Ae(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function de(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function me(h,v){return de(h+(h-v+.5>>1))}function ge(h,v,_){return Math.abs(v-_)-Math.abs(h-_)}function $e(h,v,_,L,M,z,U){for(L=z[U-1],_=0;_<M;++_)z[U+_]=L=Ve(h[v+_],L)}function We(h,v,_,L,M){var z;for(z=0;z<_;++z){var U=h[v+z],V=U>>8&255,X=16711935&(X=(X=16711935&U)+((V<<16)+V));L[M+z]=(4278255360&U)+X>>>0}}function Ke(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function Me(h,v,_,L,M,z){var U;for(U=0;U<L;++U){var V=v[_+U],X=V>>>8,re=V,we=255&(we=(we=V>>>16)+((h.jd<<24>>24)*(X<<24>>24)>>>5));re=255&(re=(re=re+((h.hd<<24>>24)*(X<<24>>24)>>>5))+((h.ud<<24>>24)*(we<<24>>24)>>>5)),M[z+U]=(4278255360&V)+(we<<16)+re}}function rt(h,v,_,L,M){$[v]=function(z,U,V,X,re,we,Ie,Oe,Ce){for(X=Ie;X<Oe;++X)for(Ie=0;Ie<Ce;++Ie)re[we++]=M(V[L(z[U++])])},$[h]=function(z,U,V,X,re,we,Ie){var Oe=8>>z.b,Ce=z.Ea,Ze=z.K[0],Be=z.w;if(8>Oe)for(z=(1<<z.b)-1,Be=(1<<Oe)-1;U<V;++U){var xe,Ne=0;for(xe=0;xe<Ce;++xe)xe&z||(Ne=L(X[re++])),we[Ie++]=M(Ze[Ne&Be]),Ne>>=Oe}else $["VP8LMapColor"+_](X,re,Ze,Be,we,Ie,U,V,Ce)}}function qe(h,v,_,L,M){for(_=v+_;v<_;){var z=h[v++];L[M++]=z>>16&255,L[M++]=z>>8&255,L[M++]=z>>0&255}}function At(h,v,_,L,M){for(_=v+_;v<_;){var z=h[v++];L[M++]=z>>16&255,L[M++]=z>>8&255,L[M++]=z>>0&255,L[M++]=z>>24&255}}function lt(h,v,_,L,M){for(_=v+_;v<_;){var z=(U=h[v++])>>16&240|U>>12&15,U=U>>0&240|U>>28&15;L[M++]=z,L[M++]=U}}function Bt(h,v,_,L,M){for(_=v+_;v<_;){var z=(U=h[v++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;L[M++]=z,L[M++]=U}}function St(h,v,_,L,M){for(_=v+_;v<_;){var z=h[v++];L[M++]=z>>0&255,L[M++]=z>>8&255,L[M++]=z>>16&255}}function Ct(h,v,_,L,M,z){if(z==0)for(_=v+_;v<_;)Se(L,((z=h[v++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),M+=32;else r(L,M,h,v,_)}function mn(h,v){$[v][0]=$[h+"0"],$[v][1]=$[h+"1"],$[v][2]=$[h+"2"],$[v][3]=$[h+"3"],$[v][4]=$[h+"4"],$[v][5]=$[h+"5"],$[v][6]=$[h+"6"],$[v][7]=$[h+"7"],$[v][8]=$[h+"8"],$[v][9]=$[h+"9"],$[v][10]=$[h+"10"],$[v][11]=$[h+"11"],$[v][12]=$[h+"12"],$[v][13]=$[h+"13"],$[v][14]=$[h+"0"],$[v][15]=$[h+"0"]}function Pt(h){return h==Il||h==Ol||h==Rl||h==Qf}function Qn(){this.eb=[],this.size=this.A=this.fb=0}function Et(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function or(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qn,this.f.kb=new Et,this.sd=null}function un(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _t(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Wt(h,v){var _=h.T,L=v.ba.f.RGBA,M=L.eb,z=L.fb+h.ka*L.A,U=Pi[v.ba.S],V=h.y,X=h.O,re=h.f,we=h.N,Ie=h.ea,Oe=h.W,Ce=v.cc,Ze=v.dc,Be=v.Mc,xe=v.Nc,Ne=h.ka,Je=h.ka+h.T,st=h.U,Ye=st+1>>1;for(Ne==0?U(V,X,null,null,re,we,Ie,Oe,re,we,Ie,Oe,M,z,null,null,st):(U(v.ec,v.fc,V,X,Ce,Ze,Be,xe,re,we,Ie,Oe,M,z-L.A,M,z,st),++_);Ne+2<Je;Ne+=2)Ce=re,Ze=we,Be=Ie,xe=Oe,we+=h.Rc,Oe+=h.Rc,z+=2*L.A,U(V,(X+=2*h.fa)-h.fa,V,X,Ce,Ze,Be,xe,re,we,Ie,Oe,M,z-L.A,M,z,st);return X+=h.fa,h.j+Je<h.o?(r(v.ec,v.fc,V,X,st),r(v.cc,v.dc,re,we,Ye),r(v.Mc,v.Nc,Ie,Oe,Ye),_--):1&Je||U(V,X,null,null,re,we,Ie,Oe,re,we,Ie,Oe,M,z+L.A,null,null,st),_}function wn(h,v,_){var L=h.F,M=[h.J];if(L!=null){var z=h.U,U=v.ba.S,V=U==vd||U==Rl;v=v.ba.f.RGBA;var X=[0],re=h.ka;X[0]=h.T,h.Kb&&(re==0?--X[0]:(--re,M[0]-=h.width),h.j+h.ka+h.T==h.o&&(X[0]=h.o-h.j-re));var we=v.eb;re=v.fb+re*v.A,h=Mn(L,M[0],h.width,z,X,we,re+(V?0:3),v.A),t(_==X),h&&Pt(U)&&Li(we,re,V,z,X,v.A)}return 0}function rn(h){var v=h.ma,_=v.ba.S,L=11>_,M=_==Ka||_==Oo||_==vd||_==Xf||_==12||Pt(_);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!eu(v.Oa,h,M?11:12))return 0;if(M&&Pt(_)&&it(),h.da)alert("todo:use_scaling");else{if(L){if(v.Ib=_t,h.Kb){if(_=h.U+1>>1,v.memory=s(h.U+2*_),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+_,v.Ib=Wt,it()}}else alert("todo:EmitYUV");M&&(v.Jb=wn,L&&Te())}if(L&&!Xp){for(h=0;256>h;++h)wa[h]=89858*(h-128)+Ys>>xd,d1[h]=-22014*(h-128)+Ys,u1[h]=-45773*(h-128),c1[h]=113618*(h-128)+Ys>>xd;for(h=cu;h<th;++h)v=76283*(h-16)+Ys>>xd,f1[h-cu]=Fn(v,255),h1[h-cu]=Fn(v+8>>4,15);Xp=1}return 1}function lr(h){var v=h.ma,_=h.U,L=h.T;return t(!(1&h.ka)),0>=_||0>=L?0:(_=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,_),v.Dc+=_,1)}function Rr(h){h.ma.memory=null}function gt(h,v,_,L){return ne(h,8)!=47?0:(v[0]=ne(h,14)+1,_[0]=ne(h,14)+1,L[0]=ne(h,1),ne(h,3)!=0?0:!h.h)}function Zn(h,v){if(4>h)return h+1;var _=h-2>>1;return(2+(1&h)<<_)+ne(v,_)+1}function cr(h,v){return 120<v?v-120:1<=(_=((_=r1[v-1])>>4)*h+(8-(15&_)))?_:1;var _}function Pn(h,v,_){var L=H(_),M=h[v+=255&L].g-8;return 0<M&&(se(_,_.u+8),L=H(_),v+=h[v].value,v+=L&(1<<M)-1),se(_,_.u+h[v].g),h[v].value}function Rn(h,v,_){return _.g+=h.g,_.value+=h.value<<v>>>0,t(8>=_.g),h.g}function Tn(h,v,_){var L=h.xc;return t((v=L==0?0:h.vc[h.md*(_>>L)+(v>>L)])<h.Wb),h.Ya[v]}function er(h,v,_,L){var M=h.ab,z=h.c*v,U=h.C;v=U+v;var V=_,X=L;for(L=h.Ta,_=h.Ua;0<M--;){var re=h.gc[M],we=U,Ie=v,Oe=V,Ce=X,Ze=(X=L,V=_,re.Ea);switch(t(we<Ie),t(Ie<=re.nc),re.hc){case 2:gd(Oe,Ce,(Ie-we)*Ze,X,V);break;case 0:var Be=we,xe=Ie,Ne=X,Je=V,st=(dt=re).Ea;Be==0&&(Vs(Oe,Ce,null,null,1,Ne,Je),$e(Oe,Ce+1,0,0,st-1,Ne,Je+1),Ce+=st,Je+=st,++Be);for(var Ye=1<<dt.b,ht=Ye-1,ut=He(st,dt.b),wt=dt.K,dt=dt.w+(Be>>dt.b)*ut;Be<xe;){var fn=wt,yn=dt,Zt=1;for(Ga(Oe,Ce,Ne,Je-st,1,Ne,Je);Zt<st;){var Ut=(Zt&~ht)+Ye;Ut>st&&(Ut=st),(0,ma[fn[yn++]>>8&15])(Oe,Ce+ +Zt,Ne,Je+Zt-st,Ut-Zt,Ne,Je+Zt),Zt=Ut}Ce+=st,Je+=st,++Be&ht||(dt+=ut)}Ie!=re.nc&&r(X,V-Ze,X,V+(Ie-we-1)*Ze,Ze);break;case 1:for(Ze=Oe,xe=Ce,st=(Oe=re.Ea)-(Je=Oe&~(Ne=(Ce=1<<re.b)-1)),Be=He(Oe,re.b),Ye=re.K,re=re.w+(we>>re.b)*Be;we<Ie;){for(ht=Ye,ut=re,wt=new at,dt=xe+Je,fn=xe+Oe;xe<dt;)Ke(ht[ut++],wt),To(wt,Ze,xe,Ce,X,V),xe+=Ce,V+=Ce;xe<fn&&(Ke(ht[ut++],wt),To(wt,Ze,xe,st,X,V),xe+=st,V+=st),++we&Ne||(re+=Be)}break;case 3:if(Oe==X&&Ce==V&&0<re.b){for(xe=X,Oe=Ze=V+(Ie-we)*Ze-(Je=(Ie-we)*He(re.Ea,re.b)),Ce=X,Ne=V,Be=[],Je=(st=Je)-1;0<=Je;--Je)Be[Je]=Ce[Ne+Je];for(Je=st-1;0<=Je;--Je)xe[Oe+Je]=Be[Je];Ji(re,we,Ie,X,Ze,X,V)}else Ji(re,we,Ie,Oe,Ce,X,V)}V=L,X=_}X!=_&&r(L,_,V,X,z)}function Wi(h,v){var _=h.V,L=h.Ba+h.c*h.C,M=v-h.C;if(t(v<=h.l.o),t(16>=M),0<M){var z=h.l,U=h.Ta,V=h.Ua,X=z.width;if(er(h,M,_,L),M=V=[V],t((_=h.C)<(L=v)),t(z.v<z.va),L>z.o&&(L=z.o),_<z.j){var re=z.j-_;_=z.j,M[0]+=re*X}if(_>=L?_=0:(M[0]+=4*z.v,z.ka=_-z.j,z.U=z.va-z.v,z.T=L-_,_=1),_){if(V=V[0],11>(_=h.ca).S){var we=_.f.RGBA,Ie=(L=_.S,M=z.U,z=z.T,re=we.eb,we.A),Oe=z;for(we=we.fb+h.Ma*we.A;0<Oe--;){var Ce=U,Ze=V,Be=M,xe=re,Ne=we;switch(L){case iu:gi(Ce,Ze,Be,xe,Ne);break;case Ka:ii(Ce,Ze,Be,xe,Ne);break;case Il:ii(Ce,Ze,Be,xe,Ne),Li(xe,Ne,0,Be,1,0);break;case Ja:vi(Ce,Ze,Be,xe,Ne);break;case Oo:Ct(Ce,Ze,Be,xe,Ne,1);break;case Ol:Ct(Ce,Ze,Be,xe,Ne,1),Li(xe,Ne,0,Be,1,0);break;case vd:Ct(Ce,Ze,Be,xe,Ne,0);break;case Rl:Ct(Ce,Ze,Be,xe,Ne,0),Li(xe,Ne,1,Be,1,0);break;case Xf:Ya(Ce,Ze,Be,xe,Ne);break;case Qf:Ya(Ce,Ze,Be,xe,Ne),_n(xe,Ne,Be,1,0);break;case Hp:ga(Ce,Ze,Be,xe,Ne);break;default:t(0)}V+=X,we+=Ie}h.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=_.height)}}h.C=v,t(h.C<=h.i)}function Ai(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var _=h.Ya[v].G,L=h.Ya[v].H;if(0<_[1][L[1]+0].g||0<_[2][L[2]+0].g||0<_[3][L[3]+0].g)return 0}return 1}function vs(h,v,_,L,M,z){if(h.Z!=0){var U=h.qd,V=h.rd;for(t(es[h.Z]!=null);v<_;++v)es[h.Z](U,V,L,M,L,M,z),U=L,V=M,M+=z;h.qd=U,h.rd=V}}function ys(h,v){var _=h.l.ma,L=_.Z==0||_.Z==1?h.l.j:h.C;if(L=h.C<L?L:h.C,t(v<=h.l.o),v>L){var M=h.l.width,z=_.ca,U=_.tb+M*L,V=h.V,X=h.Ba+h.c*L,re=h.gc;t(h.ab==1),t(re[0].hc==3),pa(re[0],L,v,V,X,z,U),vs(_,L,v,z,U,M)}h.C=h.Ma=v}function xs(h,v,_,L,M,z,U){var V=h.$/L,X=h.$%L,re=h.m,we=h.s,Ie=_+h.$,Oe=Ie;M=_+L*M;var Ce=_+L*z,Ze=280+we.ua,Be=h.Pb?V:16777216,xe=0<we.ua?we.Wa:null,Ne=we.wc,Je=Ie<Ce?Tn(we,X,V):null;t(h.C<z),t(Ce<=M);var st=!1;e:for(;;){for(;st||Ie<Ce;){var Ye=0;if(V>=Be){var ht=Ie-_;t((Be=h).Pb),Be.wd=Be.m,Be.xd=ht,0<Be.s.ua&&pe(Be.s.Wa,Be.s.vb),Be=V+Yp}if(X&Ne||(Je=Tn(we,X,V)),t(Je!=null),Je.Qb&&(v[Ie]=Je.qb,st=!0),!st)if(ce(re),Je.jc){Ye=re,ht=v;var ut=Ie,wt=Je.pd[H(Ye)&Br-1];t(Je.jc),256>wt.g?(se(Ye,Ye.u+wt.g),ht[ut]=wt.value,Ye=0):(se(Ye,Ye.u+wt.g-256),t(256<=wt.value),Ye=wt.value),Ye==0&&(st=!0)}else Ye=Pn(Je.G[0],Je.H[0],re);if(re.h)break;if(st||256>Ye){if(!st)if(Je.nd)v[Ie]=(Je.qb|Ye<<8)>>>0;else{if(ce(re),st=Pn(Je.G[1],Je.H[1],re),ce(re),ht=Pn(Je.G[2],Je.H[2],re),ut=Pn(Je.G[3],Je.H[3],re),re.h)break;v[Ie]=(ut<<24|st<<16|Ye<<8|ht)>>>0}if(st=!1,++Ie,++X>=L&&(X=0,++V,U!=null&&V<=z&&!(V%16)&&U(h,V),xe!=null))for(;Oe<Ie;)Ye=v[Oe++],xe.X[(506832829*Ye&4294967295)>>>xe.Mb]=Ye}else if(280>Ye){if(Ye=Zn(Ye-256,re),ht=Pn(Je.G[4],Je.H[4],re),ce(re),ht=cr(L,ht=Zn(ht,re)),re.h)break;if(Ie-_<ht||M-Ie<Ye)break e;for(ut=0;ut<Ye;++ut)v[Ie+ut]=v[Ie+ut-ht];for(Ie+=Ye,X+=Ye;X>=L;)X-=L,++V,U!=null&&V<=z&&!(V%16)&&U(h,V);if(t(Ie<=M),X&Ne&&(Je=Tn(we,X,V)),xe!=null)for(;Oe<Ie;)Ye=v[Oe++],xe.X[(506832829*Ye&4294967295)>>>xe.Mb]=Ye}else{if(!(Ye<Ze))break e;for(st=Ye-280,t(xe!=null);Oe<Ie;)Ye=v[Oe++],xe.X[(506832829*Ye&4294967295)>>>xe.Mb]=Ye;Ye=Ie,t(!(st>>>(ht=xe).Xa)),v[Ye]=ht.X[st],st=!0}st||t(re.h==Z(re))}if(h.Pb&&re.h&&Ie<M)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&pe(h.s.vb,h.s.Wa);else{if(re.h)break e;U!=null&&U(h,V>z?z:V),h.a=0,h.$=Ie-_}return 1}return h.a=3,0}function ws(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,t(h!=null)}function Hi(){var h=new kl;return h==null?null:(h.a=0,h.xb=ou,mn("Predictor","VP8LPredictors"),mn("Predictor","VP8LPredictors_C"),mn("PredictorAdd","VP8LPredictorsAdd"),mn("PredictorAdd","VP8LPredictorsAdd_C"),gd=We,To=Me,gi=qe,ii=At,Ya=lt,ga=Bt,vi=St,$.VP8LMapColor32b=Ml,$.VP8LMapColor8b=mi,h)}function Bs(h,v,_,L,M){var z=1,U=[h],V=[v],X=L.m,re=L.s,we=null,Ie=0;e:for(;;){if(_)for(;z&&ne(X,1);){var Oe=U,Ce=V,Ze=L,Be=1,xe=Ze.m,Ne=Ze.gc[Ze.ab],Je=ne(xe,2);if(Ze.Oc&1<<Je)z=0;else{switch(Ze.Oc|=1<<Je,Ne.hc=Je,Ne.Ea=Oe[0],Ne.nc=Ce[0],Ne.K=[null],++Ze.ab,t(4>=Ze.ab),Je){case 0:case 1:Ne.b=ne(xe,3)+2,Be=Bs(He(Ne.Ea,Ne.b),He(Ne.nc,Ne.b),0,Ze,Ne.K),Ne.K=Ne.K[0];break;case 3:var st,Ye=ne(xe,8)+1,ht=16<Ye?0:4<Ye?1:2<Ye?2:3;if(Oe[0]=He(Ne.Ea,ht),Ne.b=ht,st=Be=Bs(Ye,1,0,Ze,Ne.K)){var ut,wt=Ye,dt=Ne,fn=1<<(8>>dt.b),yn=s(fn);if(yn==null)st=0;else{var Zt=dt.K[0],Ut=dt.w;for(yn[0]=dt.K[0][0],ut=1;ut<1*wt;++ut)yn[ut]=Ve(Zt[Ut+ut],yn[ut-1]);for(;ut<4*fn;++ut)yn[ut]=0;dt.K[0]=null,dt.K[0]=yn,st=1}}Be=st;break;case 2:break;default:t(0)}z=Be}}if(U=U[0],V=V[0],z&&ne(X,1)&&!(z=1<=(Ie=ne(X,4))&&11>=Ie)){L.a=3;break e}var jn;if(jn=z)t:{var kn,$t,yr,ai=L,nn=U,Vr=V,xn=Ie,sr=_,oi=ai.m,dr=ai.s,Gn=[null],Gr=1,Dn=0,ts=i1[xn];n:for(;;){if(sr&&ne(oi,1)){var Ir=ne(oi,3)+2,ba=He(nn,Ir),Ro=He(Vr,Ir),Qa=ba*Ro;if(!Bs(ba,Ro,0,ai,Gn))break n;for(Gn=Gn[0],dr.xc=Ir,kn=0;kn<Qa;++kn){var Za=Gn[kn]>>8&65535;Gn[kn]=Za,Za>=Gr&&(Gr=Za+1)}}if(oi.h)break n;for($t=0;5>$t;++$t){var In=Gp[$t];!$t&&0<xn&&(In+=1<<xn),Dn<In&&(Dn=In)}var bd=a(Gr*ts,q),Zp=Gr,em=a(Zp,B);if(em==null)var eo=null;else t(65536>=Zp),eo=em;var uu=s(Dn);if(eo==null||uu==null||bd==null){ai.a=1;break n}var _d=bd;for(kn=yr=0;kn<Gr;++kn){var Mi=eo[kn],Fo=Mi.G,Ul=Mi.H,tm=0,Sd=1,nh=0;for($t=0;5>$t;++$t){In=Gp[$t],Fo[$t]=_d,Ul[$t]=yr,!$t&&0<xn&&(In+=1<<xn);i:{var ql,rh=In,Wl=ai,Hl=uu,nm=_d,rm=yr,Vl=0,to=Wl.m,im=ne(to,1);if(i(Hl,0,0,rh),im){var sm=ne(to,1)+1,g1=ne(to,1),ih=ne(to,g1==0?1:8);Hl[ih]=1,sm==2&&(Hl[ih=ne(to,8)]=1);var Nd=1}else{var jd=s(19),sh=ne(to,4)+4;if(19<sh){Wl.a=3;var Gl=0;break i}for(ql=0;ql<sh;++ql)jd[Hr[ql]]=ne(to,3);var ah=void 0,$o=void 0,Yt=Wl,v1=jd,kd=rh,Yl=Hl,Ed=0,no=Yt.m,am=8,Di=a(128,q);r:for(;R(Di,0,7,v1,19);){if(ne(no,1)){var y1=2+2*ne(no,3);if((ah=2+ne(no,y1))>kd)break r}else ah=kd;for($o=0;$o<kd&&ah--;){ce(no);var du=Di[0+(127&H(no))];se(no,no.u+du.g);var ro=du.value;if(16>ro)Yl[$o++]=ro,ro!=0&&(am=ro);else{var om=ro==16,oh=ro-16,Ii=n1[oh],_a=ne(no,Vp[oh])+Ii;if($o+_a>kd)break r;for(var lh=om?am:0;0<_a--;)Yl[$o++]=lh}}Ed=1;break r}Ed||(Yt.a=3),Nd=Ed}(Nd=Nd&&!to.h)&&(Vl=R(nm,rm,8,Hl,rh)),Nd&&Vl!=0?Gl=Vl:(Wl.a=3,Gl=0)}if(Gl==0)break n;if(Sd&&Nr[$t]==1&&(Sd=_d[yr].g==0),tm+=_d[yr].g,yr+=Gl,3>=$t){var Kl,Jl=uu[0];for(Kl=1;Kl<In;++Kl)uu[Kl]>Jl&&(Jl=uu[Kl]);nh+=Jl}}if(Mi.nd=Sd,Mi.Qb=0,Sd&&(Mi.qb=(Fo[3][Ul[3]+0].value<<24|Fo[1][Ul[1]+0].value<<16|Fo[2][Ul[2]+0].value)>>>0,tm==0&&256>Fo[0][Ul[0]+0].value&&(Mi.Qb=1,Mi.qb+=Fo[0][Ul[0]+0].value<<8)),Mi.jc=!Mi.Qb&&6>nh,Mi.jc){var fu,Es=Mi;for(fu=0;fu<Br;++fu){var Sa=fu,Js=Es.pd[Sa],Xl=Es.G[0][Es.H[0]+Sa];256<=Xl.value?(Js.g=Xl.g+256,Js.value=Xl.value):(Js.g=0,Js.value=0,Sa>>=Rn(Xl,8,Js),Sa>>=Rn(Es.G[1][Es.H[1]+Sa],16,Js),Sa>>=Rn(Es.G[2][Es.H[2]+Sa],0,Js),Rn(Es.G[3][Es.H[3]+Sa],24,Js))}}}dr.vc=Gn,dr.Wb=Gr,dr.Ya=eo,dr.yc=bd,jn=1;break t}jn=0}if(!(z=jn)){L.a=3;break e}if(0<Ie){if(re.ua=1<<Ie,!Ge(re.Wa,Ie)){L.a=1,z=0;break e}}else re.ua=0;var Xs=L,lm=U,io=V,Cd=Xs.s,Ad=Cd.xc;if(Xs.c=lm,Xs.i=io,Cd.md=He(lm,Ad),Cd.wc=Ad==0?-1:(1<<Ad)-1,_){L.xb=a1;break e}if((we=s(U*V))==null){L.a=1,z=0;break e}z=(z=xs(L,we,0,U,V,V,null))&&!X.h;break e}return z?(M!=null?M[0]=we:(t(we==null),t(_)),L.$=0,_||ws(re)):ws(re),z}function jo(h,v){var _=h.c*h.i,L=_+v+16*v;return t(h.c<=v),h.V=s(L),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+_+v,1)}function ul(h,v){var _=h.C,L=v-_,M=h.V,z=h.Ba+h.c*_;for(t(v<=h.l.o);0<L;){var U=16<L?16:L,V=h.l.ma,X=h.l.width,re=X*U,we=V.ca,Ie=V.tb+X*_,Oe=h.Ta,Ce=h.Ua;er(h,U,M,z),ur(Oe,Ce,we,Ie,re),vs(V,_,_+U,we,Ie,X),L-=U,M+=U*h.c,_+=U}t(_==v),h.C=h.Ma=v}function dl(){this.ub=this.yd=this.td=this.Rb=0}function fl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ha(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Qu(){this.Yb=function(){var h=[];return function v(_,L,M){for(var z=M[L],U=0;U<z&&(_.push(M.length>L+1?[]:0),!(M.length<L+1));U++)v(_[U],L+1,M)}(h,0,[3,11]),h}()}function hl(){this.jb=s(3),this.Wc=l([4,8],Qu),this.Xc=l([4,17],Qu)}function Bf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function pl(){this.ld=this.La=this.dd=this.tc=0}function Zu(){this.Na=this.la=0}function ed(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ml(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function td(){this.uc=this.M=this.Nb=0,this.wa=Array(new pl),this.Y=0,this.ya=Array(new ml),this.aa=0,this.l=new gl}function nd(){this.y=s(16),this.f=s(8),this.ea=s(8)}function zf(){this.cb=this.a=0,this.sc="",this.m=new be,this.Od=new dl,this.Kc=new fl,this.ed=new Bf,this.Qa=new ha,this.Ic=this.$c=this.Aa=0,this.D=new td,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,be),this.ia=0,this.pb=a(4,ed),this.Pa=new hl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nd),this.Hd=0,this.rb=Array(new Zu),this.sb=0,this.wa=Array(new pl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ml),this.L=this.aa=0,this.gd=l([4,2],pl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uf(){var h=new zf;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ya||(ya=vl)),h}function tr(h,v,_){return h.a==0&&(h.a=v,h.sc=_,h.cb=0),0}function Uc(h,v,_){return 3<=_&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function qc(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return tr(h,2,"null VP8Io passed to VP8GetHeaders()");var _=v.data,L=v.w,M=v.ha;if(4>M)return tr(h,7,"Truncated header.");var z=_[L+0]|_[L+1]<<8|_[L+2]<<16,U=h.Od;if(U.Rb=!(1&z),U.td=z>>1&7,U.yd=z>>4&1,U.ub=z>>5,3<U.td)return tr(h,3,"Incorrect keyframe parameters.");if(!U.yd)return tr(h,4,"Frame not displayable.");L+=3,M-=3;var V=h.Kc;if(U.Rb){if(7>M)return tr(h,7,"cannot parse picture header");if(!Uc(_,L,M))return tr(h,3,"Bad code word");V.c=16383&(_[L+4]<<8|_[L+3]),V.Td=_[L+4]>>6,V.i=16383&(_[L+6]<<8|_[L+5]),V.Ud=_[L+6]>>6,L+=7,M-=7,h.za=V.c+15>>4,h.Ub=V.i+15>>4,v.width=V.c,v.height=V.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((z=h.Pa).jb,0,255,z.jb.length),t((z=h.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,i(z.Zb,0,0,z.Zb.length),i(z.Lb,0,0,z.Lb)}if(U.ub>M)return tr(h,7,"bad partition length");fe(z=h.m,_,L,U.ub),L+=U.ub,M-=U.ub,U.Rb&&(V.Ld=ke(z),V.Kd=ke(z)),V=h.Qa;var X,re=h.Pa;if(t(z!=null),t(V!=null),V.Cb=ke(z),V.Cb){if(V.Bb=ke(z),ke(z)){for(V.Fb=ke(z),X=0;4>X;++X)V.Zb[X]=ke(z)?G(z,7):0;for(X=0;4>X;++X)V.Lb[X]=ke(z)?G(z,6):0}if(V.Bb)for(X=0;3>X;++X)re.jb[X]=ke(z)?he(z,8):255}else V.Bb=0;if(z.Ka)return tr(h,3,"cannot parse segment header");if((V=h.ed).zd=ke(z),V.Tb=he(z,6),V.wb=he(z,3),V.Pc=ke(z),V.Pc&&ke(z)){for(re=0;4>re;++re)ke(z)&&(V.vd[re]=G(z,6));for(re=0;4>re;++re)ke(z)&&(V.od[re]=G(z,6))}if(h.L=V.Tb==0?0:V.zd?1:2,z.Ka)return tr(h,3,"cannot parse filter header");var we=M;if(M=X=L,L=X+we,V=we,h.Xb=(1<<he(h.m,2))-1,we<3*(re=h.Xb))_=7;else{for(X+=3*re,V-=3*re,we=0;we<re;++we){var Ie=_[M+0]|_[M+1]<<8|_[M+2]<<16;Ie>V&&(Ie=V),fe(h.Jc[+we],_,X,Ie),X+=Ie,V-=Ie,M+=3}fe(h.Jc[+re],_,X,V),_=X<L?0:5}if(_!=0)return tr(h,_,"cannot parse partitions");for(_=he(X=h.m,7),M=ke(X)?G(X,4):0,L=ke(X)?G(X,4):0,V=ke(X)?G(X,4):0,re=ke(X)?G(X,4):0,X=ke(X)?G(X,4):0,we=h.Qa,Ie=0;4>Ie;++Ie){if(we.Cb){var Oe=we.Zb[Ie];we.Fb||(Oe+=_)}else{if(0<Ie){h.pb[Ie]=h.pb[0];continue}Oe=_}var Ce=h.pb[Ie];Ce.Sc[0]=Zf[Fn(Oe+M,127)],Ce.Sc[1]=su[Fn(Oe+0,127)],Ce.Eb[0]=2*Zf[Fn(Oe+L,127)],Ce.Eb[1]=101581*su[Fn(Oe+V,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Zf[Fn(Oe+re,117)],Ce.Qc[1]=su[Fn(Oe+X,127)],Ce.lc=Oe+X}if(!U.Rb)return tr(h,4,"Not a key frame.");for(ke(z),U=h.Pa,_=0;4>_;++_){for(M=0;8>M;++M)for(L=0;3>L;++L)for(V=0;11>V;++V)re=ee(z,Bl[_][M][L][V])?he(z,8):au[_][M][L][V],U.Wc[_][M].Yb[L][V]=re;for(M=0;17>M;++M)U.Xc[_][M]=U.Wc[_][s1[M]]}return h.kc=ke(z),h.kc&&(h.Bd=he(z,8)),h.cb=1}function vl(h,v,_,L,M,z,U){var V=v[M].Yb[_];for(_=0;16>M;++M){if(!ee(h,V[_+0]))return M;for(;!ee(h,V[_+1]);)if(V=v[++M].Yb[0],_=0,M==16)return 16;var X=v[M+1].Yb;if(ee(h,V[_+2])){var re=h,we=0;if(ee(re,(Oe=V)[(Ie=_)+3]))if(ee(re,Oe[Ie+6])){for(V=0,Ie=2*(we=ee(re,Oe[Ie+8]))+(Oe=ee(re,Oe[Ie+9+we])),we=0,Oe=eh[Ie];Oe[V];++V)we+=we+ee(re,Oe[V]);we+=3+(8<<Ie)}else ee(re,Oe[Ie+7])?(we=7+2*ee(re,165),we+=ee(re,145)):we=5+ee(re,159);else we=ee(re,Oe[Ie+4])?3+ee(re,Oe[Ie+5]):2;V=X[2]}else we=1,V=X[1];X=U+Fl[M],0>(re=h).b&&je(re);var Ie,Oe=re.b,Ce=(Ie=re.Ca>>1)-(re.I>>Oe)>>31;--re.b,re.Ca+=Ce,re.Ca|=1,re.I-=(Ie+1&Ce)<<Oe,z[X]=((we^Ce)-Ce)*L[(0<M)+0]}return 16}function Wc(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function rd(h,v){if(h==null)return 0;if(v==null)return tr(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!qc(h,v))return 0;if(t(h.cb),v.ac==null||v.ac(v)){v.ob&&(h.L=0);var _=wd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=v.v-_>>4,h.zb=v.j-_>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+_>>4,h.Hb=v.va+15+_>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var L=h.ed;for(_=0;4>_;++_){var M;if(h.Qa.Cb){var z=h.Qa.Lb[_];h.Qa.Fb||(z+=L.Tb)}else z=L.Tb;for(M=0;1>=M;++M){var U=h.gd[_][M],V=z;if(L.Pc&&(V+=L.vd[0],M&&(V+=L.od[0])),0<(V=0>V?0:63<V?63:V)){var X=V;0<L.wb&&(X=4<L.wb?X>>2:X>>1)>9-L.wb&&(X=9-L.wb),1>X&&(X=1),U.dd=X,U.tc=2*V+X,U.ld=40<=V?2:15<=V?1:0}else U.tc=0;U.La=M}}}_=0}else tr(h,6,"Frame setup failed"),_=h.a;if(_=_==0){if(_){h.$c=0,0<h.Aa||(h.Ic=m1);e:{_=h.Ic,L=4*(X=h.za);var re=32*X,we=X+1,Ie=0<h.L?X*(0<h.Aa?2:1):0,Oe=(h.Aa==2?2:1)*X;if((U=L+832+(M=3*(16*_+wd[h.L])/2*re)+(z=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=U)_=0;else{if(U>h.Vb){if(h.Vb=0,h.Ec=s(U),h.Fc=0,h.Ec==null){_=tr(h,1,"no memory during frame initialization.");break e}h.Vb=U}U=h.Ec,V=h.Fc,h.Ac=U,h.Bc=V,V+=L,h.Gd=a(re,nd),h.Hd=0,h.rb=a(we+1,Zu),h.sb=1,h.wa=Ie?a(Ie,pl):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=X),t(!0),h.oc=U,h.pc=V,V+=832,h.ya=a(Oe,ml),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=X),h.R=16*X,h.B=8*X,X=(re=wd[h.L])*h.R,re=re/2*h.B,h.sa=U,h.ta=V+X,h.qa=h.sa,h.ra=h.ta+16*_*h.R+re,h.Ha=h.qa,h.Ia=h.ra+8*_*h.B+re,h.$c=0,V+=M,h.mb=z?U:null,h.nb=z?V:null,t(V+z<=h.Fc+h.Vb),Wc(h),i(h.Ac,h.Bc,0,L),_=1}}if(_){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!nu){for(_=-255;255>=_;++_)Sr[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Qi[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)Zi[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)va[255+_]=0>_?0:255<_?255:_;nu=1}Ee=Gc,Ue=Vc,mt=id,Nt=sd,Ht=xl,De=Hc,Un=Sl,vn=Wa,Mo=pd,Do=Nl,Dr=hd,Ss=Lo,Io=Fr,Ns=md,Gs=vr,js=Vi,on=ni,Xi=fd,ks[0]=qs,ks[1]=ad,ks[2]=Hf,ks[3]=Vf,ks[4]=cd,ks[5]=bl,ks[6]=wl,ks[7]=Kc,ks[8]=Yf,ks[9]=Gf,Xa[0]=Yc,Xa[1]=qf,Xa[2]=Us,Xa[3]=Eo,Xa[4]=Wr,Xa[5]=Wf,Xa[6]=ld,xa[0]=qa,xa[1]=od,xa[2]=Kf,xa[3]=bn,xa[4]=Ao,xa[5]=Jf,xa[6]=Jc,_=1}else _=0}_&&(_=function(Ce,Ze){for(Ce.M=0;Ce.M<Ce.Va;++Ce.M){var Be,xe=Ce.Jc[Ce.M&Ce.Xb],Ne=Ce.m,Je=Ce;for(Be=0;Be<Je.za;++Be){var st=Ne,Ye=Je,ht=Ye.Ac,ut=Ye.Bc+4*Be,wt=Ye.zc,dt=Ye.ya[Ye.aa+Be];if(Ye.Qa.Bb?dt.$b=ee(st,Ye.Pa.jb[0])?2+ee(st,Ye.Pa.jb[2]):ee(st,Ye.Pa.jb[1]):dt.$b=0,Ye.kc&&(dt.Ad=ee(st,Ye.Bd)),dt.Za=!ee(st,145)+0,dt.Za){var fn=dt.Ob,yn=0;for(Ye=0;4>Ye;++Ye){var Zt,Ut=wt[0+Ye];for(Zt=0;4>Zt;++Zt){Ut=yd[ht[ut+Zt]][Ut];for(var jn=$l[ee(st,Ut[0])];0<jn;)jn=$l[2*jn+ee(st,Ut[jn])];Ut=-jn,ht[ut+Zt]=Ut}r(fn,yn,ht,ut,4),yn+=4,wt[0+Ye]=Ut}}else Ut=ee(st,156)?ee(st,128)?1:3:ee(st,163)?2:0,dt.Ob[0]=Ut,i(ht,ut,Ut,4),i(wt,0,Ut,4);dt.Dd=ee(st,142)?ee(st,114)?ee(st,183)?1:3:2:0}if(Je.m.Ka)return tr(Ce,7,"Premature end-of-partition0 encountered.");for(;Ce.ja<Ce.za;++Ce.ja){if(Je=xe,st=(Ne=Ce).rb[Ne.sb-1],ht=Ne.rb[Ne.sb+Ne.ja],Be=Ne.ya[Ne.aa+Ne.ja],ut=Ne.kc?Be.Ad:0)st.la=ht.la=0,Be.Za||(st.Na=ht.Na=0),Be.Hc=0,Be.Gc=0,Be.ia=0;else{var kn,$t;if(st=ht,ht=Je,ut=Ne.Pa.Xc,wt=Ne.ya[Ne.aa+Ne.ja],dt=Ne.pb[wt.$b],Ye=wt.ad,fn=0,yn=Ne.rb[Ne.sb-1],Ut=Zt=0,i(Ye,fn,0,384),wt.Za)var yr=0,ai=ut[3];else{jn=s(16);var nn=st.Na+yn.Na;if(nn=ya(ht,ut[1],nn,dt.Eb,0,jn,0),st.Na=yn.Na=(0<nn)+0,1<nn)Ee(jn,0,Ye,fn);else{var Vr=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)Ye[fn+jn]=Vr}yr=1,ai=ut[0]}var xn=15&st.la,sr=15&yn.la;for(jn=0;4>jn;++jn){var oi=1&sr;for(Vr=$t=0;4>Vr;++Vr)xn=xn>>1|(oi=(nn=ya(ht,ai,nn=oi+(1&xn),dt.Sc,yr,Ye,fn))>yr)<<7,$t=$t<<2|(3<nn?3:1<nn?2:Ye[fn+0]!=0),fn+=16;xn>>=4,sr=sr>>1|oi<<7,Zt=(Zt<<8|$t)>>>0}for(ai=xn,yr=sr>>4,kn=0;4>kn;kn+=2){for($t=0,xn=st.la>>4+kn,sr=yn.la>>4+kn,jn=0;2>jn;++jn){for(oi=1&sr,Vr=0;2>Vr;++Vr)nn=oi+(1&xn),xn=xn>>1|(oi=0<(nn=ya(ht,ut[2],nn,dt.Qc,0,Ye,fn)))<<3,$t=$t<<2|(3<nn?3:1<nn?2:Ye[fn+0]!=0),fn+=16;xn>>=2,sr=sr>>1|oi<<5}Ut|=$t<<4*kn,ai|=xn<<4<<kn,yr|=(240&sr)<<kn}st.la=ai,yn.la=yr,wt.Hc=Zt,wt.Gc=Ut,wt.ia=43690&Ut?0:dt.ia,ut=!(Zt|Ut)}if(0<Ne.L&&(Ne.wa[Ne.Y+Ne.ja]=Ne.gd[Be.$b][Be.Za],Ne.wa[Ne.Y+Ne.ja].La|=!ut),Je.Ka)return tr(Ce,7,"Premature end-of-file encountered.")}if(Wc(Ce),Ne=Ze,Je=1,Be=(xe=Ce).D,st=0<xe.L&&xe.M>=xe.zb&&xe.M<=xe.Va,xe.Aa==0)e:{if(Be.M=xe.M,Be.uc=st,Cl(xe,Be),Je=1,Be=($t=xe.D).Nb,st=(Ut=wd[xe.L])*xe.R,ht=Ut/2*xe.B,jn=16*Be*xe.R,Vr=8*Be*xe.B,ut=xe.sa,wt=xe.ta-st+jn,dt=xe.qa,Ye=xe.ra-ht+Vr,fn=xe.Ha,yn=xe.Ia-ht+Vr,sr=(xn=$t.M)==0,Zt=xn>=xe.Va-1,xe.Aa==2&&Cl(xe,$t),$t.uc)for(oi=(nn=xe).D.M,t(nn.D.uc),$t=nn.yb;$t<nn.Hb;++$t){yr=$t,ai=oi;var dr=(Gn=(In=nn).D).Nb;kn=In.R;var Gn=Gn.wa[Gn.Y+yr],Gr=In.sa,Dn=In.ta+16*dr*kn+16*yr,ts=Gn.dd,Ir=Gn.tc;if(Ir!=0)if(t(3<=Ir),In.L==1)0<yr&&js(Gr,Dn,kn,Ir+4),Gn.La&&Xi(Gr,Dn,kn,Ir),0<ai&&Gs(Gr,Dn,kn,Ir+4),Gn.La&&on(Gr,Dn,kn,Ir);else{var ba=In.B,Ro=In.qa,Qa=In.ra+8*dr*ba+8*yr,Za=In.Ha,In=In.Ia+8*dr*ba+8*yr;dr=Gn.ld,0<yr&&(vn(Gr,Dn,kn,Ir+4,ts,dr),Do(Ro,Qa,Za,In,ba,Ir+4,ts,dr)),Gn.La&&(Ss(Gr,Dn,kn,Ir,ts,dr),Ns(Ro,Qa,Za,In,ba,Ir,ts,dr)),0<ai&&(Un(Gr,Dn,kn,Ir+4,ts,dr),Mo(Ro,Qa,Za,In,ba,Ir+4,ts,dr)),Gn.La&&(Dr(Gr,Dn,kn,Ir,ts,dr),Io(Ro,Qa,Za,In,ba,Ir,ts,dr))}}if(xe.ia&&alert("todo:DitherRow"),Ne.put!=null){if($t=16*xn,xn=16*(xn+1),sr?(Ne.y=xe.sa,Ne.O=xe.ta+jn,Ne.f=xe.qa,Ne.N=xe.ra+Vr,Ne.ea=xe.Ha,Ne.W=xe.Ia+Vr):($t-=Ut,Ne.y=ut,Ne.O=wt,Ne.f=dt,Ne.N=Ye,Ne.ea=fn,Ne.W=yn),Zt||(xn-=Ut),xn>Ne.o&&(xn=Ne.o),Ne.F=null,Ne.J=null,xe.Fa!=null&&0<xe.Fa.length&&$t<xn&&(Ne.J=Zc(xe,Ne,$t,xn-$t),Ne.F=xe.mb,Ne.F==null&&Ne.F.length==0)){Je=tr(xe,3,"Could not decode alpha data.");break e}$t<Ne.j&&(Ut=Ne.j-$t,$t=Ne.j,t(!(1&Ut)),Ne.O+=xe.R*Ut,Ne.N+=xe.B*(Ut>>1),Ne.W+=xe.B*(Ut>>1),Ne.F!=null&&(Ne.J+=Ne.width*Ut)),$t<xn&&(Ne.O+=Ne.v,Ne.N+=Ne.v>>1,Ne.W+=Ne.v>>1,Ne.F!=null&&(Ne.J+=Ne.v),Ne.ka=$t-Ne.j,Ne.U=Ne.va-Ne.v,Ne.T=xn-$t,Je=Ne.put(Ne))}Be+1!=xe.Ic||Zt||(r(xe.sa,xe.ta-st,ut,wt+16*xe.R,st),r(xe.qa,xe.ra-ht,dt,Ye+8*xe.B,ht),r(xe.Ha,xe.Ia-ht,fn,yn+8*xe.B,ht))}if(!Je)return tr(Ce,6,"Output aborted.")}return 1}(h,v)),v.bc!=null&&v.bc(v),_&=1}return _?(h.cb=0,_):0}function hi(h,v,_,L,M){M=h[v+_+32*L]+(M>>3),h[v+_+32*L]=-256&M?0>M?0:255:M}function ko(h,v,_,L,M,z){hi(h,v,0,_,L+M),hi(h,v,1,_,L+z),hi(h,v,2,_,L-z),hi(h,v,3,_,L-M)}function pi(h){return(20091*h>>16)+h}function yl(h,v,_,L){var M,z=0,U=s(16);for(M=0;4>M;++M){var V=h[v+0]+h[v+8],X=h[v+0]-h[v+8],re=(35468*h[v+4]>>16)-pi(h[v+12]),we=pi(h[v+4])+(35468*h[v+12]>>16);U[z+0]=V+we,U[z+1]=X+re,U[z+2]=X-re,U[z+3]=V-we,z+=4,v++}for(M=z=0;4>M;++M)V=(h=U[z+0]+4)+U[z+8],X=h-U[z+8],re=(35468*U[z+4]>>16)-pi(U[z+12]),hi(_,L,0,0,V+(we=pi(U[z+4])+(35468*U[z+12]>>16))),hi(_,L,1,0,X+re),hi(_,L,2,0,X-re),hi(_,L,3,0,V-we),z++,L+=32}function Hc(h,v,_,L){var M=h[v+0]+4,z=35468*h[v+4]>>16,U=pi(h[v+4]),V=35468*h[v+1]>>16;ko(_,L,0,M+U,h=pi(h[v+1]),V),ko(_,L,1,M+z,h,V),ko(_,L,2,M-z,h,V),ko(_,L,3,M-U,h,V)}function Vc(h,v,_,L,M){yl(h,v,_,L),M&&yl(h,v+16,_,L+4)}function id(h,v,_,L){Ue(h,v+0,_,L,1),Ue(h,v+32,_,L+128,1)}function sd(h,v,_,L){var M;for(h=h[v+0]+4,M=0;4>M;++M)for(v=0;4>v;++v)hi(_,L,v,M,h)}function xl(h,v,_,L){h[v+0]&&Nt(h,v+0,_,L),h[v+16]&&Nt(h,v+16,_,L+4),h[v+32]&&Nt(h,v+32,_,L+128),h[v+48]&&Nt(h,v+48,_,L+128+4)}function Gc(h,v,_,L){var M,z=s(16);for(M=0;4>M;++M){var U=h[v+0+M]+h[v+12+M],V=h[v+4+M]+h[v+8+M],X=h[v+4+M]-h[v+8+M],re=h[v+0+M]-h[v+12+M];z[0+M]=U+V,z[8+M]=U-V,z[4+M]=re+X,z[12+M]=re-X}for(M=0;4>M;++M)U=(h=z[0+4*M]+3)+z[3+4*M],V=z[1+4*M]+z[2+4*M],X=z[1+4*M]-z[2+4*M],re=h-z[3+4*M],_[L+0]=U+V>>3,_[L+16]=re+X>>3,_[L+32]=U-V>>3,_[L+48]=re-X>>3,L+=64}function zs(h,v,_){var L,M=v-32,z=yi,U=255-h[M-1];for(L=0;L<_;++L){var V,X=z,re=U+h[v-1];for(V=0;V<_;++V)h[v+V]=X[re+h[M+V]];v+=32}}function ad(h,v){zs(h,v,4)}function od(h,v){zs(h,v,8)}function qf(h,v){zs(h,v,16)}function Us(h,v){var _;for(_=0;16>_;++_)r(h,v+32*_,h,v-32,16)}function Eo(h,v){var _;for(_=16;0<_;--_)i(h,v,h[v-1],16),v+=32}function Co(h,v,_){var L;for(L=0;16>L;++L)i(v,_+32*L,h,16)}function Yc(h,v){var _,L=16;for(_=0;16>_;++_)L+=h[v-1+32*_]+h[v+_-32];Co(L>>5,h,v)}function Wr(h,v){var _,L=8;for(_=0;16>_;++_)L+=h[v-1+32*_];Co(L>>4,h,v)}function Wf(h,v){var _,L=8;for(_=0;16>_;++_)L+=h[v+_-32];Co(L>>4,h,v)}function ld(h,v){Co(128,h,v)}function Ot(h,v,_){return h+2*v+_+2>>2}function Hf(h,v){var _,L=v-32;for(L=new Uint8Array([Ot(h[L-1],h[L+0],h[L+1]),Ot(h[L+0],h[L+1],h[L+2]),Ot(h[L+1],h[L+2],h[L+3]),Ot(h[L+2],h[L+3],h[L+4])]),_=0;4>_;++_)r(h,v+32*_,L,0,L.length)}function Vf(h,v){var _=h[v-1],L=h[v-1+32],M=h[v-1+64],z=h[v-1+96];Se(h,v+0,16843009*Ot(h[v-1-32],_,L)),Se(h,v+32,16843009*Ot(_,L,M)),Se(h,v+64,16843009*Ot(L,M,z)),Se(h,v+96,16843009*Ot(M,z,z))}function qs(h,v){var _,L=4;for(_=0;4>_;++_)L+=h[v+_-32]+h[v-1+32*_];for(L>>=3,_=0;4>_;++_)i(h,v+32*_,L,4)}function cd(h,v){var _=h[v-1+0],L=h[v-1+32],M=h[v-1+64],z=h[v-1-32],U=h[v+0-32],V=h[v+1-32],X=h[v+2-32],re=h[v+3-32];h[v+0+96]=Ot(L,M,h[v-1+96]),h[v+1+96]=h[v+0+64]=Ot(_,L,M),h[v+2+96]=h[v+1+64]=h[v+0+32]=Ot(z,_,L),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=Ot(U,z,_),h[v+3+64]=h[v+2+32]=h[v+1+0]=Ot(V,U,z),h[v+3+32]=h[v+2+0]=Ot(X,V,U),h[v+3+0]=Ot(re,X,V)}function wl(h,v){var _=h[v+1-32],L=h[v+2-32],M=h[v+3-32],z=h[v+4-32],U=h[v+5-32],V=h[v+6-32],X=h[v+7-32];h[v+0+0]=Ot(h[v+0-32],_,L),h[v+1+0]=h[v+0+32]=Ot(_,L,M),h[v+2+0]=h[v+1+32]=h[v+0+64]=Ot(L,M,z),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=Ot(M,z,U),h[v+3+32]=h[v+2+64]=h[v+1+96]=Ot(z,U,V),h[v+3+64]=h[v+2+96]=Ot(U,V,X),h[v+3+96]=Ot(V,X,X)}function bl(h,v){var _=h[v-1+0],L=h[v-1+32],M=h[v-1+64],z=h[v-1-32],U=h[v+0-32],V=h[v+1-32],X=h[v+2-32],re=h[v+3-32];h[v+0+0]=h[v+1+64]=z+U+1>>1,h[v+1+0]=h[v+2+64]=U+V+1>>1,h[v+2+0]=h[v+3+64]=V+X+1>>1,h[v+3+0]=X+re+1>>1,h[v+0+96]=Ot(M,L,_),h[v+0+64]=Ot(L,_,z),h[v+0+32]=h[v+1+96]=Ot(_,z,U),h[v+1+32]=h[v+2+96]=Ot(z,U,V),h[v+2+32]=h[v+3+96]=Ot(U,V,X),h[v+3+32]=Ot(V,X,re)}function Kc(h,v){var _=h[v+0-32],L=h[v+1-32],M=h[v+2-32],z=h[v+3-32],U=h[v+4-32],V=h[v+5-32],X=h[v+6-32],re=h[v+7-32];h[v+0+0]=_+L+1>>1,h[v+1+0]=h[v+0+64]=L+M+1>>1,h[v+2+0]=h[v+1+64]=M+z+1>>1,h[v+3+0]=h[v+2+64]=z+U+1>>1,h[v+0+32]=Ot(_,L,M),h[v+1+32]=h[v+0+96]=Ot(L,M,z),h[v+2+32]=h[v+1+96]=Ot(M,z,U),h[v+3+32]=h[v+2+96]=Ot(z,U,V),h[v+3+64]=Ot(U,V,X),h[v+3+96]=Ot(V,X,re)}function Gf(h,v){var _=h[v-1+0],L=h[v-1+32],M=h[v-1+64],z=h[v-1+96];h[v+0+0]=_+L+1>>1,h[v+2+0]=h[v+0+32]=L+M+1>>1,h[v+2+32]=h[v+0+64]=M+z+1>>1,h[v+1+0]=Ot(_,L,M),h[v+3+0]=h[v+1+32]=Ot(L,M,z),h[v+3+32]=h[v+1+64]=Ot(M,z,z),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=z}function Yf(h,v){var _=h[v-1+0],L=h[v-1+32],M=h[v-1+64],z=h[v-1+96],U=h[v-1-32],V=h[v+0-32],X=h[v+1-32],re=h[v+2-32];h[v+0+0]=h[v+2+32]=_+U+1>>1,h[v+0+32]=h[v+2+64]=L+_+1>>1,h[v+0+64]=h[v+2+96]=M+L+1>>1,h[v+0+96]=z+M+1>>1,h[v+3+0]=Ot(V,X,re),h[v+2+0]=Ot(U,V,X),h[v+1+0]=h[v+3+32]=Ot(_,U,V),h[v+1+32]=h[v+3+64]=Ot(L,_,U),h[v+1+64]=h[v+3+96]=Ot(M,L,_),h[v+1+96]=Ot(z,M,L)}function Kf(h,v){var _;for(_=0;8>_;++_)r(h,v+32*_,h,v-32,8)}function bn(h,v){var _;for(_=0;8>_;++_)i(h,v,h[v-1],8),v+=32}function dn(h,v,_){var L;for(L=0;8>L;++L)i(v,_+32*L,h,8)}function qa(h,v){var _,L=8;for(_=0;8>_;++_)L+=h[v+_-32]+h[v-1+32*_];dn(L>>4,h,v)}function Jf(h,v){var _,L=4;for(_=0;8>_;++_)L+=h[v+_-32];dn(L>>3,h,v)}function Ao(h,v){var _,L=4;for(_=0;8>_;++_)L+=h[v-1+32*_];dn(L>>3,h,v)}function Jc(h,v){dn(128,h,v)}function _l(h,v,_){var L=h[v-_],M=h[v+0],z=3*(M-L)+Dl[1020+h[v-2*_]-h[v+_]],U=ru[112+(z+4>>3)];h[v-_]=yi[255+L+ru[112+(z+3>>3)]],h[v+0]=yi[255+M-U]}function ud(h,v,_,L){var M=h[v+0],z=h[v+_];return si[255+h[v-2*_]-h[v-_]]>L||si[255+z-M]>L}function Xc(h,v,_,L){return 4*si[255+h[v-_]-h[v+0]]+si[255+h[v-2*_]-h[v+_]]<=L}function dd(h,v,_,L,M){var z=h[v-3*_],U=h[v-2*_],V=h[v-_],X=h[v+0],re=h[v+_],we=h[v+2*_],Ie=h[v+3*_];return 4*si[255+V-X]+si[255+U-re]>L?0:si[255+h[v-4*_]-z]<=M&&si[255+z-U]<=M&&si[255+U-V]<=M&&si[255+Ie-we]<=M&&si[255+we-re]<=M&&si[255+re-X]<=M}function vr(h,v,_,L){var M=2*L+1;for(L=0;16>L;++L)Xc(h,v+L,_,M)&&_l(h,v+L,_)}function Vi(h,v,_,L){var M=2*L+1;for(L=0;16>L;++L)Xc(h,v+L*_,1,M)&&_l(h,v+L*_,1)}function ni(h,v,_,L){var M;for(M=3;0<M;--M)vr(h,v+=4*_,_,L)}function fd(h,v,_,L){var M;for(M=3;0<M;--M)Vi(h,v+=4,_,L)}function Ws(h,v,_,L,M,z,U,V){for(z=2*z+1;0<M--;){if(dd(h,v,_,z,U))if(ud(h,v,_,V))_l(h,v,_);else{var X=h,re=v,we=_,Ie=X[re-2*we],Oe=X[re-we],Ce=X[re+0],Ze=X[re+we],Be=X[re+2*we],xe=27*(Je=Dl[1020+3*(Ce-Oe)+Dl[1020+Ie-Ze]])+63>>7,Ne=18*Je+63>>7,Je=9*Je+63>>7;X[re-3*we]=yi[255+X[re-3*we]+Je],X[re-2*we]=yi[255+Ie+Ne],X[re-we]=yi[255+Oe+xe],X[re+0]=yi[255+Ce-xe],X[re+we]=yi[255+Ze-Ne],X[re+2*we]=yi[255+Be-Je]}v+=L}}function nr(h,v,_,L,M,z,U,V){for(z=2*z+1;0<M--;){if(dd(h,v,_,z,U))if(ud(h,v,_,V))_l(h,v,_);else{var X=h,re=v,we=_,Ie=X[re-we],Oe=X[re+0],Ce=X[re+we],Ze=ru[112+((Be=3*(Oe-Ie))+4>>3)],Be=ru[112+(Be+3>>3)],xe=Ze+1>>1;X[re-2*we]=yi[255+X[re-2*we]+xe],X[re-we]=yi[255+Ie+Be],X[re+0]=yi[255+Oe-Ze],X[re+we]=yi[255+Ce-xe]}v+=L}}function Sl(h,v,_,L,M,z){Ws(h,v,_,1,16,L,M,z)}function Wa(h,v,_,L,M,z){Ws(h,v,1,_,16,L,M,z)}function hd(h,v,_,L,M,z){var U;for(U=3;0<U;--U)nr(h,v+=4*_,_,1,16,L,M,z)}function Lo(h,v,_,L,M,z){var U;for(U=3;0<U;--U)nr(h,v+=4,1,_,16,L,M,z)}function pd(h,v,_,L,M,z,U,V){Ws(h,v,M,1,8,z,U,V),Ws(_,L,M,1,8,z,U,V)}function Nl(h,v,_,L,M,z,U,V){Ws(h,v,1,M,8,z,U,V),Ws(_,L,1,M,8,z,U,V)}function Fr(h,v,_,L,M,z,U,V){nr(h,v+4*M,M,1,8,z,U,V),nr(_,L+4*M,M,1,8,z,U,V)}function md(h,v,_,L,M,z,U,V){nr(h,v+4,1,M,8,z,U,V),nr(_,L+4,1,M,8,z,U,V)}function $r(){this.ba=new or,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Qc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bs(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new q}function kl(){this.xb=this.a=0,this.l=new gl,this.ca=new or,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bs,this.ab=0,this.gc=a(4,jl),this.Oc=0}function Ha(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new gl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gn(h,v,_,L,M,z,U){for(h=h==null?0:h[v+0],v=0;v<U;++v)M[z+v]=h+_[L+v]&255,h=M[z+v]}function Gi(h,v,_,L,M,z,U){var V;if(h==null)gn(null,null,_,L,M,z,U);else for(V=0;V<U;++V)M[z+V]=h[v+V]+_[L+V]&255}function Hs(h,v,_,L,M,z,U){if(h==null)gn(null,null,_,L,M,z,U);else{var V,X=h[v+0],re=X,we=X;for(V=0;V<U;++V)re=we+(X=h[v+V])-re,we=_[L+V]+(-256&re?0>re?0:255:re)&255,re=X,M[z+V]=we}}function Zc(h,v,_,L){var M=v.width,z=v.o;if(t(h!=null&&v!=null),0>_||0>=L||_+L>z)return null;if(!h.Cc){if(h.ga==null){var U;if(h.ga=new Ha,(U=h.ga==null)||(U=v.width*v.o,t(h.Gb.length==0),h.Gb=s(U),h.Uc=0,h.Gb==null?U=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,U=1),U=!U),!U){U=h.ga;var V=h.Fa,X=h.P,re=h.qc,we=h.mb,Ie=h.nb,Oe=X+1,Ce=re-1,Ze=U.l;if(t(V!=null&&we!=null&&v!=null),es[0]=null,es[1]=gn,es[2]=Gi,es[3]=Hs,U.ca=we,U.tb=Ie,U.c=v.width,U.i=v.height,t(0<U.c&&0<U.i),1>=re)v=0;else if(U.$a=V[X+0]>>0&3,U.Z=V[X+0]>>2&3,U.Lc=V[X+0]>>4&3,X=V[X+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||X)v=0;else if(Ze.put=lr,Ze.ac=rn,Ze.bc=Rr,Ze.ma=U,Ze.width=v.width,Ze.height=v.height,Ze.Da=v.Da,Ze.v=v.v,Ze.va=v.va,Ze.j=v.j,Ze.o=v.o,U.$a)e:{t(U.$a==1),v=Hi();t:for(;;){if(v==null){v=0;break e}if(t(U!=null),U.mc=v,v.c=U.c,v.i=U.i,v.l=U.l,v.l.ma=U,v.l.width=U.c,v.l.height=U.i,v.a=0,P(v.m,V,Oe,Ce),!Bs(U.c,U.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Ai(v.s)?(U.ic=1,V=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(V),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(U.ic=0,v=jo(v,U.c)),!v))break t;v=1;break e}U.mc=null,v=0}else v=Ce>=U.c*U.i;U=!v}if(U)return null;h.ga.Lc!=1?h.Ga=0:L=z-_}t(h.ga!=null),t(_+L<=z);e:{if(v=(V=h.ga).c,z=V.l.o,V.$a==0){if(Oe=h.rc,Ce=h.Vc,Ze=h.Fa,X=h.P+1+_*v,re=h.mb,we=h.nb+_*v,t(X<=h.P+h.qc),V.Z!=0)for(t(es[V.Z]!=null),U=0;U<L;++U)es[V.Z](Oe,Ce,Ze,X,re,we,v),Oe=re,Ce=we,we+=v,X+=v;else for(U=0;U<L;++U)r(re,we,Ze,X,v),Oe=re,Ce=we,we+=v,X+=v;h.rc=Oe,h.Vc=Ce}else{if(t(V.mc!=null),v=_+L,t((U=V.mc)!=null),t(v<=U.i),U.C>=v)v=1;else if(V.ic||Te(),V.ic){V=U.V,Oe=U.Ba,Ce=U.c;var Be=U.i,xe=(Ze=1,X=U.$/Ce,re=U.$%Ce,we=U.m,Ie=U.s,U.$),Ne=Ce*Be,Je=Ce*v,st=Ie.wc,Ye=xe<Je?Tn(Ie,re,X):null;t(xe<=Ne),t(v<=Be),t(Ai(Ie));t:for(;;){for(;!we.h&&xe<Je;){if(re&st||(Ye=Tn(Ie,re,X)),t(Ye!=null),ce(we),256>(Be=Pn(Ye.G[0],Ye.H[0],we)))V[Oe+xe]=Be,++xe,++re>=Ce&&(re=0,++X<=v&&!(X%16)&&ys(U,X));else{if(!(280>Be)){Ze=0;break t}Be=Zn(Be-256,we);var ht,ut=Pn(Ye.G[4],Ye.H[4],we);if(ce(we),!(xe>=(ut=cr(Ce,ut=Zn(ut,we)))&&Ne-xe>=Be)){Ze=0;break t}for(ht=0;ht<Be;++ht)V[Oe+xe+ht]=V[Oe+xe+ht-ut];for(xe+=Be,re+=Be;re>=Ce;)re-=Ce,++X<=v&&!(X%16)&&ys(U,X);xe<Je&&re&st&&(Ye=Tn(Ie,re,X))}t(we.h==Z(we))}ys(U,X>v?v:X);break t}!Ze||we.h&&xe<Ne?(Ze=0,U.a=we.h?5:3):U.$=xe,v=Ze}else v=xs(U,U.V,U.Ba,U.c,U.i,v,ul);if(!v){L=0;break e}}_+L>=z&&(h.Cc=1),L=1}if(!L)return null;if(h.Cc&&((L=h.ga)!=null&&(L.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+_*M}function w(h,v,_,L,M,z){for(;0<M--;){var U,V=h,X=v+(_?1:0),re=h,we=v+(_?0:3);for(U=0;U<L;++U){var Ie=re[we+4*U];Ie!=255&&(Ie*=32897,V[X+4*U+0]=V[X+4*U+0]*Ie>>23,V[X+4*U+1]=V[X+4*U+1]*Ie>>23,V[X+4*U+2]=V[X+4*U+2]*Ie>>23)}v+=z}}function D(h,v,_,L,M){for(;0<L--;){var z;for(z=0;z<_;++z){var U=h[v+2*z+0],V=15&(re=h[v+2*z+1]),X=4369*V,re=(240&re|re>>4)*X>>16;h[v+2*z+0]=(240&U|U>>4)*X>>16&240|(15&U|U<<4)*X>>16>>4&15,h[v+2*z+1]=240&re|V}v+=M}}function ae(h,v,_,L,M,z,U,V){var X,re,we=255;for(re=0;re<M;++re){for(X=0;X<L;++X){var Ie=h[v+X];z[U+4*X]=Ie,we&=Ie}v+=_,U+=V}return we!=255}function ve(h,v,_,L,M){var z;for(z=0;z<M;++z)_[L+z]=h[v+z]>>8}function Te(){Li=w,_n=D,Mn=ae,ur=ve}function ze(h,v,_){$[h]=function(L,M,z,U,V,X,re,we,Ie,Oe,Ce,Ze,Be,xe,Ne,Je,st){var Ye,ht=st-1>>1,ut=V[X+0]|re[we+0]<<16,wt=Ie[Oe+0]|Ce[Ze+0]<<16;t(L!=null);var dt=3*ut+wt+131074>>2;for(v(L[M+0],255&dt,dt>>16,Be,xe),z!=null&&(dt=3*wt+ut+131074>>2,v(z[U+0],255&dt,dt>>16,Ne,Je)),Ye=1;Ye<=ht;++Ye){var fn=V[X+Ye]|re[we+Ye]<<16,yn=Ie[Oe+Ye]|Ce[Ze+Ye]<<16,Zt=ut+fn+wt+yn+524296,Ut=Zt+2*(fn+wt)>>3;dt=Ut+ut>>1,ut=(Zt=Zt+2*(ut+yn)>>3)+fn>>1,v(L[M+2*Ye-1],255&dt,dt>>16,Be,xe+(2*Ye-1)*_),v(L[M+2*Ye-0],255&ut,ut>>16,Be,xe+(2*Ye-0)*_),z!=null&&(dt=Zt+wt>>1,ut=Ut+yn>>1,v(z[U+2*Ye-1],255&dt,dt>>16,Ne,Je+(2*Ye-1)*_),v(z[U+2*Ye+0],255&ut,ut>>16,Ne,Je+(2*Ye+0)*_)),ut=fn,wt=yn}1&st||(dt=3*ut+wt+131074>>2,v(L[M+st-1],255&dt,dt>>16,Be,xe+(st-1)*_),z!=null&&(dt=3*wt+ut+131074>>2,v(z[U+st-1],255&dt,dt>>16,Ne,Je+(st-1)*_)))}}function it(){Pi[iu]=Y,Pi[Ka]=lu,Pi[Ja]=zl,Pi[Oo]=Ti,Pi[vd]=Qt,Pi[Xf]=Kp,Pi[Hp]=o1,Pi[Il]=lu,Pi[Ol]=Ti,Pi[Rl]=Qt,Pi[Qf]=Kp}function pt(h){return h&~l1?0>h?0:255:h>>Jp}function kt(h,v){return pt((19077*h>>8)+(26149*v>>8)-14234)}function zt(h,v,_){return pt((19077*h>>8)-(6419*v>>8)-(13320*_>>8)+8708)}function Rt(h,v){return pt((19077*h>>8)+(33050*v>>8)-17685)}function tn(h,v,_,L,M){L[M+0]=kt(h,_),L[M+1]=zt(h,v,_),L[M+2]=Rt(h,v)}function zn(h,v,_,L,M){L[M+0]=Rt(h,v),L[M+1]=zt(h,v,_),L[M+2]=kt(h,_)}function rr(h,v,_,L,M){var z=zt(h,v,_);v=z<<3&224|Rt(h,v)>>3,L[M+0]=248&kt(h,_)|z>>5,L[M+1]=v}function ir(h,v,_,L,M){var z=240&Rt(h,v)|15;L[M+0]=240&kt(h,_)|zt(h,v,_)>>4,L[M+1]=z}function Tr(h,v,_,L,M){L[M+0]=255,tn(h,v,_,L,M+1)}function Mr(h,v,_,L,M){zn(h,v,_,L,M),L[M+3]=255}function Yi(h,v,_,L,M){tn(h,v,_,L,M),L[M+3]=255}function Fn(h,v){return 0>h?0:h>v?v:h}function Ki(h,v,_){$[h]=function(L,M,z,U,V,X,re,we,Ie){for(var Oe=we+(-2&Ie)*_;we!=Oe;)v(L[M+0],z[U+0],V[X+0],re,we),v(L[M+1],z[U+0],V[X+0],re,we+_),M+=2,++U,++X,we+=2*_;1&Ie&&v(L[M+0],z[U+0],V[X+0],re,we)}}function Va(h,v,_){return _==0?h==0?v==0?6:5:v==0?4:0:_}function El(h,v,_,L,M){switch(h>>>30){case 3:Ue(v,_,L,M,0);break;case 2:De(v,_,L,M);break;case 1:Nt(v,_,L,M)}}function Cl(h,v){var _,L,M=v.M,z=v.Nb,U=h.oc,V=h.pc+40,X=h.oc,re=h.pc+584,we=h.oc,Ie=h.pc+600;for(_=0;16>_;++_)U[V+32*_-1]=129;for(_=0;8>_;++_)X[re+32*_-1]=129,we[Ie+32*_-1]=129;for(0<M?U[V-1-32]=X[re-1-32]=we[Ie-1-32]=129:(i(U,V-32-1,127,21),i(X,re-32-1,127,9),i(we,Ie-32-1,127,9)),L=0;L<h.za;++L){var Oe=v.ya[v.aa+L];if(0<L){for(_=-1;16>_;++_)r(U,V+32*_-4,U,V+32*_+12,4);for(_=-1;8>_;++_)r(X,re+32*_-4,X,re+32*_+4,4),r(we,Ie+32*_-4,we,Ie+32*_+4,4)}var Ce=h.Gd,Ze=h.Hd+L,Be=Oe.ad,xe=Oe.Hc;if(0<M&&(r(U,V-32,Ce[Ze].y,0,16),r(X,re-32,Ce[Ze].f,0,8),r(we,Ie-32,Ce[Ze].ea,0,8)),Oe.Za){var Ne=U,Je=V-32+16;for(0<M&&(L>=h.za-1?i(Ne,Je,Ce[Ze].y[15],4):r(Ne,Je,Ce[Ze+1].y,0,4)),_=0;4>_;_++)Ne[Je+128+_]=Ne[Je+256+_]=Ne[Je+384+_]=Ne[Je+0+_];for(_=0;16>_;++_,xe<<=2)Ne=U,Je=V+Ks[_],ks[Oe.Ob[_]](Ne,Je),El(xe,Be,16*+_,Ne,Je)}else if(Ne=Va(L,M,Oe.Ob[0]),Xa[Ne](U,V),xe!=0)for(_=0;16>_;++_,xe<<=2)El(xe,Be,16*+_,U,V+Ks[_]);for(_=Oe.Gc,Ne=Va(L,M,Oe.Dd),xa[Ne](X,re),xa[Ne](we,Ie),xe=Be,Ne=X,Je=re,255&(Oe=_>>0)&&(170&Oe?mt(xe,256,Ne,Je):Ht(xe,256,Ne,Je)),Oe=we,xe=Ie,255&(_>>=8)&&(170&_?mt(Be,320,Oe,xe):Ht(Be,320,Oe,xe)),M<h.Ub-1&&(r(Ce[Ze].y,0,U,V+480,16),r(Ce[Ze].f,0,X,re+224,8),r(Ce[Ze].ea,0,we,Ie+224,8)),_=8*z*h.B,Ce=h.sa,Ze=h.ta+16*L+16*z*h.R,Be=h.qa,Oe=h.ra+8*L+_,xe=h.Ha,Ne=h.Ia+8*L+_,_=0;16>_;++_)r(Ce,Ze+_*h.R,U,V+32*_,16);for(_=0;8>_;++_)r(Be,Oe+_*h.B,X,re+32*_,8),r(xe,Ne+_*h.B,we,Ie+32*_,8)}}function Al(h,v,_,L,M,z,U,V,X){var re=[0],we=[0],Ie=0,Oe=X!=null?X.kd:0,Ce=X??new Qc;if(h==null||12>_)return 7;Ce.data=h,Ce.w=v,Ce.ha=_,v=[v],_=[_],Ce.gb=[Ce.gb];e:{var Ze=v,Be=_,xe=Ce.gb;if(t(h!=null),t(Be!=null),t(xe!=null),xe[0]=0,12<=Be[0]&&!n(h,Ze[0],"RIFF")){if(n(h,Ze[0]+8,"WEBP")){xe=3;break e}var Ne=Fe(h,Ze[0]+4);if(12>Ne||4294967286<Ne){xe=3;break e}if(Oe&&Ne>Be[0]-8){xe=7;break e}xe[0]=Ne,Ze[0]+=12,Be[0]-=12}xe=0}if(xe!=0)return xe;for(Ne=0<Ce.gb[0],_=_[0];;){e:{var Je=h;Be=v,xe=_;var st=re,Ye=we,ht=Ze=[0];if((dt=Ie=[Ie])[0]=0,8>xe[0])xe=7;else{if(!n(Je,Be[0],"VP8X")){if(Fe(Je,Be[0]+4)!=10){xe=3;break e}if(18>xe[0]){xe=7;break e}var ut=Fe(Je,Be[0]+8),wt=1+Re(Je,Be[0]+12);if(2147483648<=wt*(Je=1+Re(Je,Be[0]+15))){xe=3;break e}ht!=null&&(ht[0]=ut),st!=null&&(st[0]=wt),Ye!=null&&(Ye[0]=Je),Be[0]+=18,xe[0]-=18,dt[0]=1}xe=0}}if(Ie=Ie[0],Ze=Ze[0],xe!=0)return xe;if(Be=!!(2&Ze),!Ne&&Ie)return 3;if(z!=null&&(z[0]=!!(16&Ze)),U!=null&&(U[0]=Be),V!=null&&(V[0]=0),U=re[0],Ze=we[0],Ie&&Be&&X==null){xe=0;break}if(4>_){xe=7;break}if(Ne&&Ie||!Ne&&!Ie&&!n(h,v[0],"ALPH")){_=[_],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{ut=h,xe=v,Ne=_;var dt=Ce.gb;st=Ce.na,Ye=Ce.P,ht=Ce.Sa,wt=22,t(ut!=null),t(Ne!=null),Je=xe[0];var fn=Ne[0];for(t(st!=null),t(ht!=null),st[0]=null,Ye[0]=null,ht[0]=0;;){if(xe[0]=Je,Ne[0]=fn,8>fn){xe=7;break e}var yn=Fe(ut,Je+4);if(4294967286<yn){xe=3;break e}var Zt=8+yn+1&-2;if(wt+=Zt,0<dt&&wt>dt){xe=3;break e}if(!n(ut,Je,"VP8 ")||!n(ut,Je,"VP8L")){xe=0;break e}if(fn[0]<Zt){xe=7;break e}n(ut,Je,"ALPH")||(st[0]=ut,Ye[0]=Je+8,ht[0]=yn),Je+=Zt,fn-=Zt}}if(_=_[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],xe!=0)break}_=[_],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(dt=h,xe=v,Ne=_,st=Ce.gb[0],Ye=Ce.Ja,ht=Ce.xa,ut=xe[0],Je=!n(dt,ut,"VP8 "),wt=!n(dt,ut,"VP8L"),t(dt!=null),t(Ne!=null),t(Ye!=null),t(ht!=null),8>Ne[0])xe=7;else{if(Je||wt){if(dt=Fe(dt,ut+4),12<=st&&dt>st-12){xe=3;break e}if(Oe&&dt>Ne[0]-8){xe=7;break e}Ye[0]=dt,xe[0]+=8,Ne[0]-=8,ht[0]=wt}else ht[0]=5<=Ne[0]&&dt[ut+0]==47&&!(dt[ut+4]>>5),Ye[0]=Ne[0];xe=0}if(_=_[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],v=v[0],xe!=0)break;if(4294967286<Ce.Ja)return 3;if(V==null||Be||(V[0]=Ce.xa?2:1),U=[U],Ze=[Ze],Ce.xa){if(5>_){xe=7;break}V=U,Oe=Ze,Be=z,h==null||5>_?h=0:5<=_&&h[v+0]==47&&!(h[v+4]>>5)?(Ne=[0],dt=[0],st=[0],P(Ye=new T,h,v,_),gt(Ye,Ne,dt,st)?(V!=null&&(V[0]=Ne[0]),Oe!=null&&(Oe[0]=dt[0]),Be!=null&&(Be[0]=st[0]),h=1):h=0):h=0}else{if(10>_){xe=7;break}V=Ze,h==null||10>_||!Uc(h,v+3,_-3)?h=0:(Oe=h[v+0]|h[v+1]<<8|h[v+2]<<16,Be=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ce.Ja||!Be||!h?h=0:(U&&(U[0]=Be),V&&(V[0]=h),h=1))}if(!h||(U=U[0],Ze=Ze[0],Ie&&(re[0]!=U||we[0]!=Ze)))return 3;X!=null&&(X[0]=Ce,X.offset=v-X.w,t(4294967286>v-X.w),t(X.offset==X.ha-_));break}return xe==0||xe==7&&Ie&&X==null?(z!=null&&(z[0]|=Ce.na!=null&&0<Ce.na.length),L!=null&&(L[0]=U),M!=null&&(M[0]=Ze),0):xe}function eu(h,v,_){var L=v.width,M=v.height,z=0,U=0,V=L,X=M;if(v.Da=h!=null&&0<h.Da,v.Da&&(V=h.cd,X=h.bd,z=h.v,U=h.j,11>_||(z&=-2,U&=-2),0>z||0>U||0>=V||0>=X||z+V>L||U+X>M))return 0;if(v.v=z,v.j=U,v.va=z+V,v.o=U+X,v.U=V,v.T=X,v.da=h!=null&&0<h.da,v.da){if(!et(V,X,_=[h.ib],z=[h.hb]))return 0;v.ib=_[0],v.hb=z[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*L/4&&v.hb<3*M/4,v.Kb=0),1}function tu(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function Ll(h,v,_,L){if(L==null||0>=h||0>=v)return 2;if(_!=null){if(_.Da){var M=_.cd,z=_.bd,U=-2&_.v,V=-2&_.j;if(0>U||0>V||0>=M||0>=z||U+M>h||V+z>v)return 2;h=M,v=z}if(_.da){if(!et(h,v,M=[_.ib],z=[_.hb]))return 2;h=M[0],v=z[0]}}L.width=h,L.height=v;e:{var X=L.width,re=L.height;if(h=L.S,0>=X||0>=re||!(h>=iu&&13>h))h=2;else{if(0>=L.Rd&&L.sd==null){U=z=M=v=0;var we=(V=X*Qp[h])*re;if(11>h||(z=(re+1)/2*(v=(X+1)/2),h==12&&(U=(M=X)*re)),(re=s(we+2*z+U))==null){h=1;break e}L.sd=re,11>h?((X=L.f.RGBA).eb=re,X.fb=0,X.A=V,X.size=we):((X=L.f.kb).y=re,X.O=0,X.fa=V,X.Fd=we,X.f=re,X.N=0+we,X.Ab=v,X.Cd=z,X.ea=re,X.W=0+we+z,X.Db=v,X.Ed=z,h==12&&(X.F=re,X.J=0+we+2*z),X.Tc=U,X.lb=M)}if(v=1,M=L.S,z=L.width,U=L.height,M>=iu&&13>M)if(11>M)h=L.f.RGBA,v&=(V=Math.abs(h.A))*(U-1)+z<=h.size,v&=V>=z*Qp[M],v&=h.eb!=null;else{h=L.f.kb,V=(z+1)/2,we=(U+1)/2,X=Math.abs(h.fa),re=Math.abs(h.Ab);var Ie=Math.abs(h.Db),Oe=Math.abs(h.lb),Ce=Oe*(U-1)+z;v&=X*(U-1)+z<=h.Fd,v&=re*(we-1)+V<=h.Cd,v=(v&=Ie*(we-1)+V<=h.Ed)&X>=z&re>=V&Ie>=V,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,M==12&&(v&=Oe>=z,v&=Ce<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||_!=null&&_.fd&&(h=tu(L)),h}var Br=64,_s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pl=24,Tl=32,Po=8,ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(h){return h},$.Predictor2=function(h,v,_){return v[_+0]},$.Predictor3=function(h,v,_){return v[_+1]},$.Predictor4=function(h,v,_){return v[_-1]},$.Predictor5=function(h,v,_){return Ae(Ae(h,v[_+1]),v[_+0])},$.Predictor6=function(h,v,_){return Ae(h,v[_-1])},$.Predictor7=function(h,v,_){return Ae(h,v[_+0])},$.Predictor8=function(h,v,_){return Ae(v[_-1],v[_+0])},$.Predictor9=function(h,v,_){return Ae(v[_+0],v[_+1])},$.Predictor10=function(h,v,_){return Ae(Ae(h,v[_-1]),Ae(v[_+0],v[_+1]))},$.Predictor11=function(h,v,_){var L=v[_+0];return 0>=ge(L>>24&255,h>>24&255,(v=v[_-1])>>24&255)+ge(L>>16&255,h>>16&255,v>>16&255)+ge(L>>8&255,h>>8&255,v>>8&255)+ge(255&L,255&h,255&v)?L:h},$.Predictor12=function(h,v,_){var L=v[_+0];return(de((h>>24&255)+(L>>24&255)-((v=v[_-1])>>24&255))<<24|de((h>>16&255)+(L>>16&255)-(v>>16&255))<<16|de((h>>8&255)+(L>>8&255)-(v>>8&255))<<8|de((255&h)+(255&L)-(255&v)))>>>0},$.Predictor13=function(h,v,_){var L=v[_-1];return(me((h=Ae(h,v[_+0]))>>24&255,L>>24&255)<<24|me(h>>16&255,L>>16&255)<<16|me(h>>8&255,L>>8&255)<<8|me(h>>0&255,L>>0&255))>>>0};var Vs=$.PredictorAdd0;$.PredictorAdd1=$e,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var Ga=$.PredictorAdd2;rt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),rt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var gd,Ji=$.ColorIndexInverseTransform,Ml=$.MapARGB,pa=$.VP8LColorIndexInverseTransformAlpha,mi=$.MapAlpha,ma=$.VP8LPredictorsAdd=[];ma.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var To,gi,ii,Ya,ga,vi,Ee,Ue,De,mt,Nt,Ht,Un,vn,Mo,Do,Dr,Ss,Io,Ns,Gs,js,on,Xi,Li,_n,Mn,ur,Sr=s(511),Qi=s(2041),Zi=s(225),va=s(767),nu=0,Dl=Qi,ru=Zi,yi=va,si=Sr,iu=0,Ka=1,Ja=2,Oo=3,vd=4,Xf=5,Hp=6,Il=7,Ol=8,Rl=9,Qf=10,Vp=[2,3,7],n1=[3,3,11],Gp=[280,256,256,256,40],Nr=[0,1,1,1,0],Hr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],r1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],i1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yp=8,Zf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],su=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ya=null,eh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$l=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],au=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],s1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xa=[],ks=[],xa=[],a1=1,ou=2,es=[],Pi=[];ze("UpsampleRgbLinePair",tn,3),ze("UpsampleBgrLinePair",zn,3),ze("UpsampleRgbaLinePair",Yi,4),ze("UpsampleBgraLinePair",Mr,4),ze("UpsampleArgbLinePair",Tr,4),ze("UpsampleRgba4444LinePair",ir,2),ze("UpsampleRgb565LinePair",rr,2);var Y=$.UpsampleRgbLinePair,zl=$.UpsampleBgrLinePair,lu=$.UpsampleRgbaLinePair,Ti=$.UpsampleBgraLinePair,Qt=$.UpsampleArgbLinePair,Kp=$.UpsampleRgba4444LinePair,o1=$.UpsampleRgb565LinePair,xd=16,Ys=1<<xd-1,cu=-227,th=482,Jp=6,l1=(256<<Jp)-1,Xp=0,wa=s(256),c1=s(256),u1=s(256),d1=s(256),f1=s(th-cu),h1=s(th-cu);Ki("YuvToRgbRow",tn,3),Ki("YuvToBgrRow",zn,3),Ki("YuvToRgbaRow",Yi,4),Ki("YuvToBgraRow",Mr,4),Ki("YuvToArgbRow",Tr,4),Ki("YuvToRgba4444Row",ir,2),Ki("YuvToRgb565Row",rr,2);var Ks=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wd=[0,2,8],p1=[8,7,6,4,4,2,2,2,1,1,1,1],m1=1;this.WebPDecodeRGBA=function(h,v,_,L,M){var z=Ka,U=new $r,V=new or;U.ba=V,V.S=z,V.width=[V.width],V.height=[V.height];var X=V.width,re=V.height,we=new un;if(we==null||h==null)var Ie=2;else t(we!=null),Ie=Al(h,v,_,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ie!=0?X=0:(X!=null&&(X[0]=we.width[0]),re!=null&&(re[0]=we.height[0]),X=1),X){V.width=V.width[0],V.height=V.height[0],L!=null&&(L[0]=V.width),M!=null&&(M[0]=V.height);e:{if(L=new gl,(M=new Qc).data=h,M.w=v,M.ha=_,M.kd=1,v=[0],t(M!=null),((h=Al(M.data,M.w,M.ha,null,null,null,v,null,M))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(t(U!=null),L.data=M.data,L.w=M.w+M.offset,L.ha=M.ha-M.offset,L.put=lr,L.ac=rn,L.bc=Rr,L.ma=U,M.xa){if((h=Hi())==null){U=1;break e}if(function(Oe,Ce){var Ze=[0],Be=[0],xe=[0];t:for(;;){if(Oe==null)return 0;if(Ce==null)return Oe.a=2,0;if(Oe.l=Ce,Oe.a=0,P(Oe.m,Ce.data,Ce.w,Ce.ha),!gt(Oe.m,Ze,Be,xe)){Oe.a=3;break t}if(Oe.xb=ou,Ce.width=Ze[0],Ce.height=Be[0],!Bs(Ze[0],Be[0],1,Oe,null))break t;return 1}return t(Oe.a!=0),0}(h,L)){if(L=(v=Ll(L.width,L.height,U.Oa,U.ba))==0){t:{L=h;n:for(;;){if(L==null){L=0;break t}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((_=L.l)!=null),t((M=_.ma)!=null),L.xb!=0){if(L.ca=M.ba,L.tb=M.tb,t(L.ca!=null),!eu(M.Oa,_,Oo)){L.a=2;break n}if(!jo(L,_.width)||_.da)break n;if((_.da||Pt(L.ca.S))&&Te(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Te()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!Ge(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!xs(L,L.V,L.Ba,L.c,L.i,_.o,Wi))break n;M.Dc=L.Ma,L=1;break t}t(L.a!=0),L=0}L=!L}L&&(v=h.a)}else v=h.a}else{if((h=new Uf)==null){U=1;break e}if(h.Fa=M.na,h.P=M.P,h.qc=M.Sa,qc(h,L)){if((v=Ll(L.width,L.height,U.Oa,U.ba))==0){if(h.Aa=0,_=U.Oa,t((M=h)!=null),_!=null){if(0<(X=0>(X=_.Md)?0:100<X?255:255*X/100)){for(re=we=0;4>re;++re)12>(Ie=M.pb[re]).lc&&(Ie.ia=X*p1[0>Ie.lc?0:Ie.lc]>>3),we|=Ie.ia;we&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=_.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}rd(h,L)||(v=h.a)}}else v=h.a}v==0&&U.Oa!=null&&U.Oa.fd&&(v=tu(U.ba))}U=v}z=U!=0?null:11>z?V.f.RGBA.eb:V.f.kb.y}else z=null;return z};var Qp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f($,oe){for(var le="",R=0;R<4;R++)le+=String.fromCharCode($[oe++]);return le}function p($,oe){return($[oe+0]<<0|$[oe+1]<<8|$[oe+2]<<16)>>>0}function m($,oe){return($[oe+0]<<0|$[oe+1]<<8|$[oe+2]<<16|$[oe+3]<<24)>>>0}new c;var x=[0],g=[0],N=[],j=new c,E=e,b=function($,oe){var le={},R=0,q=!1,J=0,B=0;if(le.frames=[],!function(H,Z,se,ce){for(var je=0;je<ce;je++)if(H[Z+je]!=se.charCodeAt(je))return!0;return!1}($,oe,"RIFF",4)){for(m($,oe+=4),oe+=8;oe<$.length;){var fe=f($,oe),he=m($,oe+=4);oe+=4;var G=he+(1&he);switch(fe){case"VP8 ":case"VP8L":le.frames[R]===void 0&&(le.frames[R]={}),(ne=le.frames[R]).src_off=q?B:oe-8,ne.src_size=J+he+8,R++,q&&(q=!1,J=0,B=0);break;case"VP8X":(ne=le.header={}).feature_flags=$[oe];var P=oe+4;ne.canvas_width=1+p($,P),P+=3,ne.canvas_height=1+p($,P),P+=3;break;case"ALPH":q=!0,J=G+8,B=oe-8;break;case"ANIM":(ne=le.header).bgcolor=m($,oe),P=oe+4,ne.loop_count=(be=$)[(T=P)+0]<<0|be[T+1]<<8,P+=2;break;case"ANMF":var F,ne;(ne=le.frames[R]={}).offset_x=2*p($,oe),oe+=3,ne.offset_y=2*p($,oe),oe+=3,ne.width=1+p($,oe),oe+=3,ne.height=1+p($,oe),oe+=3,ne.duration=p($,oe),oe+=3,F=$[oe++],ne.dispose=1&F,ne.blend=F>>1&1}fe!="ANMF"&&(oe+=G)}var be,T;return le}}(E,0);b.response=E,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,A=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,x=[S.canvas_height],g=[S.canvas_width];for(var O=0;O<A.length&&A[O].blend!=0;O++);}var K=A[0],ie=j.WebPDecodeRGBA(E,K.src_off,K.src_size,g,x);K.rgba=ie,K.imgwidth=g[0],K.imgheight=x[0];for(var W=0;W<g[0]*x[0]*4;W++)N[W]=ie[W];return this.width=g,this.height=x,this.data=N,this}(function(e){var t=function(){return typeof gy=="function"},n=function(x,g,N,j){var E=4,b=a;switch(j){case e.image_compression.FAST:E=1,b=s;break;case e.image_compression.MEDIUM:E=6,b=l;break;case e.image_compression.SLOW:E=9,b=c}x=r(x,g,N,b);var S=gy(x,{level:E});return e.__addimage__.arrayBufferToBinaryString(S)},r=function(x,g,N,j){for(var E,b,S,A=x.length/g,O=new Uint8Array(x.length+A),K=p(),ie=0;ie<A;ie+=1){if(S=ie*g,E=x.subarray(S,S+g),j)O.set(j(E,N,b),S+ie);else{for(var W,$=K.length,oe=[];W<$;W+=1)oe[W]=K[W](E,N,b);var le=m(oe.concat());O.set(oe[le],S+ie)}b=E}return O},i=function(x){var g=Array.apply([],x);return g.unshift(0),g},s=function(x,g){var N,j=[],E=x.length;j[0]=1;for(var b=0;b<E;b+=1)N=x[b-g]||0,j[b+1]=x[b]-N+256&255;return j},a=function(x,g,N){var j,E=[],b=x.length;E[0]=2;for(var S=0;S<b;S+=1)j=N&&N[S]||0,E[S+1]=x[S]-j+256&255;return E},l=function(x,g,N){var j,E,b=[],S=x.length;b[0]=3;for(var A=0;A<S;A+=1)j=x[A-g]||0,E=N&&N[A]||0,b[A+1]=x[A]+256-(j+E>>>1)&255;return b},c=function(x,g,N){var j,E,b,S,A=[],O=x.length;A[0]=4;for(var K=0;K<O;K+=1)j=x[K-g]||0,E=N&&N[K]||0,b=N&&N[K-g]||0,S=f(j,E,b),A[K+1]=x[K]-S+256&255;return A},f=function(x,g,N){if(x===g&&g===N)return x;var j=Math.abs(g-N),E=Math.abs(x-N),b=Math.abs(x+g-N-N);return j<=E&&j<=b?x:E<=b?g:N},p=function(){return[i,s,a,l,c]},m=function(x){var g=x.map(function(N){return N.reduce(function(j,E){return j+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(x,g,N,j){var E,b,S,A,O,K,ie,W,$,oe,le,R,q,J,B,fe=this.decode.FLATE_DECODE,he="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(S=new mB(x)).imgData,b=S.bits,E=S.colorSpace,O=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){$=(W=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,le=new Uint8Array($*S.colors),oe=new Uint8Array($);var G,P=S.pixelBitlength-S.bits;for(J=0,B=0;J<$;J++){for(q=W[J],G=0;G<P;)le[B++]=q>>>G&255,G+=S.bits;oe[J]=q>>>G&255}}if(S.bits===16){$=(W=new Uint32Array(S.decodePixels().buffer)).length,le=new Uint8Array($*(32/S.pixelBitlength)*S.colors),oe=new Uint8Array($*(32/S.pixelBitlength)),R=S.colors>1,J=0,B=0;for(var F=0;J<$;)q=W[J++],le[B++]=q>>>0&255,R&&(le[B++]=q>>>16&255,q=W[J++],le[B++]=q>>>0&255),oe[F++]=q>>>16&255;b=8}j!==e.image_compression.NONE&&t()?(x=n(le,S.width*S.colors,S.colors,j),ie=n(oe,S.width,1,j)):(x=le,ie=oe,fe=void 0)}if(S.colorType===3&&(E=this.color_spaces.INDEXED,K=S.palette,S.transparency.indexed)){var ne=S.transparency.indexed,be=0;for(J=0,$=ne.length;J<$;++J)be+=ne[J];if((be/=255)===$-1&&ne.indexOf(0)!==-1)A=[ne.indexOf(0)];else if(be!==$){for(W=S.decodePixels(),oe=new Uint8Array(W.length),J=0,$=W.length;J<$;J++)oe[J]=ne[W[J]];ie=n(oe,S.width,1)}}var T=function(H){var Z;switch(H){case e.image_compression.FAST:Z=11;break;case e.image_compression.MEDIUM:Z=13;break;case e.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(j);return fe===this.decode.FLATE_DECODE&&(he="/Predictor "+T+" "),he+="/Colors "+O+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(ie&&this.__addimage__.isArrayBuffer(ie)||this.__addimage__.isArrayBufferView(ie))&&(ie=this.__addimage__.arrayBufferToBinaryString(ie)),{alias:N,data:x,index:g,filter:fe,decodeParameters:he,transparency:A,palette:K,sMask:ie,predictor:T,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:E}}}})(Dt.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new gB(t),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:a,height:l},p=new Wv(100).encode(f,100);return e.processJPEG.call(this,p,n,r,i)},e.processGIF87A=e.processGIF89A}(Dt.API),Ca.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ca.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){$n.log("bit decode error:"+n)}},Ca.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Ca.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,c=15&s,f=this.palette[l];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Ca.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Ca.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,f=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=f}this.pos+=e}},Ca.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,f=(a>>11)/t*255|0,p=i*this.width*4+4*s;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},Ca.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Ca.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},Ca.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new Ca(t,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Wv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Dt.API),Y_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new Y_(t),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new Wv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Dt.API),Dt.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,c=0,f=0;f<i;f+=4){var p=r[f],m=r[f+1],x=r[f+2],g=r[f+3];s[l++]=p,s[l++]=m,s[l++]=x,a[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Dt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zd=Dt.API,Zm=zd.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,m=t.doKerning!==!1,x=0,g=e.length,N=0,j=l[0]||c,E=[];for(n=0;n<g;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(x=m&&An(f[r])==="object"&&!isNaN(parseInt(f[r][N],10))?f[r][N]/p:0,E.push((l[r]||j)/c+x)),N=r;return E},W_=zd.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return zd.processArabic&&(e=zd.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Zm.apply(this,arguments).reduce(function(s,a){return s+a},0)},H_=function(e,t,n,r){for(var i=[],s=0,a=e.length,l=0;s!==a&&l+t[s]<n;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+t[s]>r&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},V_=function(e,t,n){n||(n={});var r,i,s,a,l,c,f,p=[],m=[p],x=n.textIndent||0,g=0,N=0,j=e.split(" "),E=Zm.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?j[0].length+2:n.lineIndent||0){var b=Array(c).join(" "),S=[];j.map(function(O){(O=O.split(/\s*\n/)).length>1?S=S.concat(O.map(function(K,ie){return(ie&&K.length?`
`:"")+K})):S.push(O[0])}),j=S,c=W_.apply(this,[b,n])}for(s=0,a=j.length;s<a;s++){var A=0;if(r=j[s],c&&r[0]==`
`&&(r=r.substr(1),A=1),x+g+(N=(i=Zm.apply(this,[r,n])).reduce(function(O,K){return O+K},0))>t||A){if(N>t){for(l=H_.apply(this,[r,i,t-(x+g),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(O,K){return O+K},0)}else p=[r];m.push(p),x=N+c,g=E}else p.push(r),x+=g+N,g=E}return f=c?function(O,K){return(K?b:"")+O.join(" ")}:function(O){return O.join(" ")},m.map(f)},zd.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,f=[];for(l=0,c=r.length;l<c;l++)f=f.concat(V_.apply(this,[r[l],a,s]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=e.__fontmetrics__.compress=function(m){var x,g,N,j,E=["{"];for(var b in m){if(x=m[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof x=="number")x<0?(N=s(x).slice(3),j="-"):(N=s(x).slice(2),j=""),N=j+N.slice(0,-1)+r[N.slice(-1)];else{if(An(x)!=="object")throw new Error("Don't know what to do with value type "+An(x)+".");N=a(x)}E.push(g+N)}return E.push("}"),E.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,g,N,j,E={},b=1,S=E,A=[],O="",K="",ie=m.length-1,W=1;W<ie;W+=1)(j=m[W])=="'"?x?(N=x.join(""),x=void 0):x=[]:x?x.push(j):j=="{"?(A.push([S,N]),S={},N=void 0):j=="}"?((g=A.pop())[0][g[1]]=S,N=void 0,S=g[0]):j=="-"?b=-1:N===void 0?n.hasOwnProperty(j)?(O+=n[j],N=parseInt(O,16)*b,b=1,O=""):O+=j:n.hasOwnProperty(j)?(K+=n[j],S[N]=parseInt(K,16)*b,b=1,N=void 0,K=""):K+=j;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var x=m.font,g=p.Unicode[x.postScriptName];g&&(x.metadata.Unicode={},x.metadata.Unicode.widths=g.widths,x.metadata.Unicode.kerning=g.kerning);var N=f.Unicode[x.postScriptName];N&&(x.metadata.Unicode.encoding=N,x.encoding=N.codePages[0])}])}(Dt.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Yh(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Dt),function(e){function t(){return(It.canvg?Promise.resolve(It.canvg):ol(()=>import("./index.es-C0XPhwoA.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Dt.API.addSvgAsImage=function(n,r,i,s,a,l,c,f){if(isNaN(r)||isNaN(i))throw $n.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw $n.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(m,n,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(x)}).then(function(){g.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,c,f)})}}(),Dt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Dt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],f=0,p=0,m=0;function x(N,j){var E,b=!1;for(E=0;E<N.length;E+=1)N[E]===j&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(m=0;m<g;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(An(e)==="object"){for(i in e)if(s=e[i],x(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&x(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,j=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?j.push("/"+N+" /"+n[N].value):j.push("/"+N+" "+n[N].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Dt.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],m=0,x=s.length;m<x;++m){if(l=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(f[4-l.length],l)}return p.join("")},r=function(s){var a,l,c,f,p,m,x;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,x=(l=Object.keys(s).sort(function(g,N){return g-N})).length;m<x;m++)a=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+f+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",N=0;N<x.length;N++)g+=String.fromCharCode(x[N]);var j=f();p({data:g,addLength1:!0,objectId:j}),c("endobj");var E=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var b=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+qd(l.fontName)),c("/FontFile2 "+j+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+qd(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+qd(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,x="",g=0;g<m.length;g++)x+=String.fromCharCode(m[g]);var N=f();p({data:x,addLength1:!0,objectId:N}),c("endobj");var j=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var E=f();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+qd(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=f();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+qd(l.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",c=s.x,f=s.y,p=s.options||{},m=s.mutex||{},x=m.pdfEscape,g=m.activeFontKey,N=m.fonts,j=g,E="",b=0,S="",A=N[j].encoding;if(N[j].encoding!=="Identity-H")return{text:l,x:c,y:f,options:p,mutex:m};for(S=l,j=g,Array.isArray(l)&&(S=l[0]),b=0;b<S.length;b+=1)N[j].metadata.hasOwnProperty("cmap")&&(a=N[j].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),a||S[b].charCodeAt(0)<256&&N[j].metadata.hasOwnProperty("Unicode")?E+=S[b]:E+="";var O="";return parseInt(j.slice(1))<14||A==="WinAnsiEncoding"?O=x(E,j).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(O=n(E,N[j])),m.isHex=!0,{text:O,x:c,y:f,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?l.push([i(Object.assign({},c,{text:a[f][0]})).text,a[f][1],a[f][2]]):l.push(i(Object.assign({},c,{text:a[f]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Dt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,l,c,f,p,m=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,A=0;this.__bidiEngine__={};var O=function(R){var q=R.charCodeAt(),J=q>>8,B=j[J];return B!==void 0?m[256*B+(255&q)]:J===252||J===253?"AL":b.test(J)?"L":J===8?"R":"N"},K=function(R){for(var q,J=0;J<R.length;J++){if((q=O(R.charAt(J)))==="L")return!1;if(q==="R")return!0}return!1},ie=function(R,q,J,B){var fe,he,G,P,F=q[B];switch(F){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(F="AN");break;case"AL":S=!0,F="R";break;case"WS":F="N";break;case"CS":B<1||B+1>=q.length||(fe=J[B-1])!=="EN"&&fe!=="AN"||(he=q[B+1])!=="EN"&&he!=="AN"?F="N":S&&(he="AN"),F=he===fe?he:"N";break;case"ES":F=(fe=B>0?J[B-1]:"B")==="EN"&&B+1<q.length&&q[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&J[B-1]==="EN"){F="EN";break}if(S){F="N";break}for(G=B+1,P=q.length;G<P&&q[G]==="ET";)G++;F=G<P&&q[G]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(P=q.length,G=B+1;G<P&&q[G]==="NSM";)G++;if(G<P){var ne=R[B],be=ne>=1425&&ne<=2303||ne===64286;if(fe=q[G],be&&(fe==="R"||fe==="AL")){F="R";break}}}F=B<1||(fe=q[B-1])==="B"?"N":J[B-1];break;case"B":S=!1,i=!0,F=A;break;case"S":s=!0,F="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":F="N"}return F},W=function(R,q,J){var B=R.split("");return J&&$(B,J,{hiLevel:A}),B.reverse(),q&&q.reverse(),B.join("")},$=function(R,q,J){var B,fe,he,G,P,F=-1,ne=R.length,be=0,T=[],H=A?g:x,Z=[];for(S=!1,i=!1,s=!1,fe=0;fe<ne;fe++)Z[fe]=O(R[fe]);for(he=0;he<ne;he++){if(P=be,T[he]=ie(R,Z,T,he),B=240&(be=H[P][N[T[he]]]),be&=15,q[he]=G=H[be][5],B>0)if(B===16){for(fe=F;fe<he;fe++)q[fe]=1;F=-1}else F=-1;if(H[be][6])F===-1&&(F=he);else if(F>-1){for(fe=F;fe<he;fe++)q[fe]=G;F=-1}Z[he]==="B"&&(q[he]=0),J.hiLevel|=G}s&&function(se,ce,je){for(var ke=0;ke<je;ke++)if(se[ke]==="S"){ce[ke]=A;for(var ee=ke-1;ee>=0&&se[ee]==="WS";ee--)ce[ee]=A}}(Z,q,ne)},oe=function(R,q,J,B,fe){if(!(fe.hiLevel<R)){if(R===1&&A===1&&!i)return q.reverse(),void(J&&J.reverse());for(var he,G,P,F,ne=q.length,be=0;be<ne;){if(B[be]>=R){for(P=be+1;P<ne&&B[P]>=R;)P++;for(F=be,G=P-1;F<G;F++,G--)he=q[F],q[F]=q[G],q[G]=he,J&&(he=J[F],J[F]=J[G],J[G]=he);be=P}be++}}},le=function(R,q,J){var B=R.split(""),fe={hiLevel:A};return J||(J=[]),$(B,J,fe),function(he,G,P){if(P.hiLevel!==0&&p)for(var F,ne=0;ne<he.length;ne++)G[ne]===1&&(F=E.indexOf(he[ne]))>=0&&(he[ne]=E[F+1])}(B,J,fe),oe(2,B,q,J,fe),oe(1,B,q,J,fe),B.join("")};return this.__bidiEngine__.doBidiReorder=function(R,q,J){if(function(fe,he){if(he)for(var G=0;G<fe.length;G++)he[G]=G;l===void 0&&(l=K(fe)),f===void 0&&(f=K(fe))}(R,q),a||!c||f)if(a&&c&&l^f)A=l?1:0,R=W(R,q,J);else if(!a&&c&&f)A=l?1:0,R=le(R,q,J),R=W(R,q);else if(!a||l||c||f){if(a&&!c&&l^f)R=W(R,q),l?(A=0,R=le(R,q,J)):(A=1,R=le(R,q,J),R=W(R,q));else if(a&&l&&!c&&f)A=1,R=le(R,q,J),R=W(R,q);else if(!a&&!c&&l^f){var B=p;l?(A=1,R=le(R,q,J),A=0,p=!1,R=le(R,q,J),p=B):(A=0,R=le(R,q,J),R=W(R,q),A=1,p=!1,R=le(R,q,J),p=B,R=W(R,q))}}else A=0,R=le(R,q,J);else A=l?1:0,R=le(R,q,J);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,f=R.isOutputRtl,p=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ic(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new PB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new vB(this.contents),this.head=new xB(this),this.name=new NB(this),this.cmap=new R6(this),this.toUnicode={},this.hhea=new wB(this),this.maxp=new jB(this),this.hmtx=new kB(this),this.post=new _B(this),this.os2=new bB(this),this.loca=new LB(this),this.glyf=new EB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,f;for(f=[],a=0,l=(c=this.bbox).length;a<l;a++)t=c[a],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,l;for(a=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ua,Ic=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),vB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,l,c,f,p,m,x,g,N,j;for(j in g=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(g)/c),a=Math.floor(m/c),p=16*g-m,(i=new Ic).writeInt(this.scalarType),i.writeShort(g),i.writeShort(m),i.writeShort(a),i.writeShort(p),s=16*g,f=i.pos+s,l=null,N=[],n)for(x=n[j],i.writeString(j),i.writeInt(e(x)),i.writeInt(f),i.writeInt(x.length),N=N.concat(x),j==="head"&&(l=f),f+=x.length;f%4;)N.push(0),f++;return i.write(N),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=F6.call(n);n.length%4;)n.push(0);for(s=new Ic(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),yB={}.hasOwnProperty,So=function(e,t){for(var n in t)yB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ua=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var xB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Ic).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),K_=function(){function e(t,n){var r,i,s,a,l,c,f,p,m,x,g,N,j,E,b,S,A;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),x=g/2,t.pos+=6,s=function(){var O,K;for(K=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)K.push(t.readUInt16());return K}(),t.pos+=2,j=function(){var O,K;for(K=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)K.push(t.readUInt16());return K}(),f=function(){var O,K;for(K=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)K.push(t.readUInt16());return K}(),p=function(){var O,K;for(K=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)K.push(t.readUInt16());return K}(),i=(this.length-t.pos+this.offset)/2,l=function(){var O,K;for(K=[],c=O=0;0<=i?O<i:O>i;c=0<=i?++O:--O)K.push(t.readUInt16());return K}(),c=b=0,A=s.length;b<A;c=++b)for(E=s[c],r=S=N=j[c];N<=E?S<=E:S>=E;r=N<=E?++S:--S)p[c]===0?a=r+f[c]:(a=l[p[c]/2+(r-N)-(x-c)]||0)!==0&&(a+=f[c]),this.codeMap[r]=65535&a}t.pos=m}return e.encode=function(t,n){var r,i,s,a,l,c,f,p,m,x,g,N,j,E,b,S,A,O,K,ie,W,$,oe,le,R,q,J,B,fe,he,G,P,F,ne,be,T,H,Z,se,ce,je,ke,ee,Se,_e,Re;switch(B=new Ic,a=Object.keys(t).sort(function(Fe,Ge){return Fe-Ge}),n){case"macroman":for(j=0,E=function(){var Fe=[];for(N=0;N<256;++N)Fe.push(0);return Fe}(),S={0:0},s={},fe=0,F=a.length;fe<F;fe++)S[ee=t[i=a[fe]]]==null&&(S[ee]=++j),s[i]={old:t[i],new:S[t[i]]},E[i]=S[t[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(E),{charMap:s,subtable:B.data,maxGlyphID:j+1};case"unicode":for(q=[],m=[],A=0,S={},r={},b=f=null,he=0,ne=a.length;he<ne;he++)S[K=t[i=a[he]]]==null&&(S[K]=++A),r[i]={old:K,new:S[K]},l=S[K]-i,b!=null&&l===f||(b&&m.push(b),q.push(i),f=l),b=i;for(b&&m.push(b),m.push(65535),q.push(65535),le=2*(oe=q.length),$=2*Math.pow(Math.log(oe)/Math.LN2,2),x=Math.log($/2)/Math.LN2,W=2*oe-$,c=[],ie=[],g=[],N=G=0,be=q.length;G<be;N=++G){if(R=q[N],p=m[N],R===65535){c.push(0),ie.push(0);break}if(R-(J=r[R].new)>=32768)for(c.push(0),ie.push(2*(g.length+oe-N)),i=P=R;R<=p?P<=p:P>=p;i=R<=p?++P:--P)g.push(r[i].new);else c.push(J-R),ie.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*oe+2*g.length),B.writeUInt16(0),B.writeUInt16(le),B.writeUInt16($),B.writeUInt16(x),B.writeUInt16(W),je=0,T=m.length;je<T;je++)i=m[je],B.writeUInt16(i);for(B.writeUInt16(0),ke=0,H=q.length;ke<H;ke++)i=q[ke],B.writeUInt16(i);for(Se=0,Z=c.length;Se<Z;Se++)l=c[Se],B.writeUInt16(l);for(_e=0,se=ie.length;_e<se;_e++)O=ie[_e],B.writeUInt16(O);for(Re=0,ce=g.length;Re<ce;Re++)j=g[Re],B.writeUInt16(j);return{charMap:r,subtable:B.data,maxGlyphID:A+1}}},e}(),R6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new K_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=K_.encode(n,r),(s=new Ic).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),wB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),bB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),_B=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,f;for(f=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)f.push(n.readUInt32());return f}).call(this)}},t}(),SB=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},NB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,a,l,c,f,p,m,x,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(f={},a=m=0,x=i.length;m<x;a=++m)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new SB(p,s),f[g=s.nameID]==null&&(f[g]=[]),f[s.nameID].push(l);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t}(),jB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),kB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,a,l,c,f;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)m.push(n.readInt16());return m}(),this.widths=(function(){var p,m,x,g;for(g=[],p=0,m=(x=this.metrics).length;p<m;p++)a=x[p],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],f=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)f.push(this.widths.push(i));return f},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),F6=[].slice,EB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,a,l,c,f,p,m,x;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Ic(r.read(s))).readShort(),p=c.readShort(),x=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[n]=l===-1?new AB(c,p,x,f,m):new CB(c,l,p,x,f,m),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,a,l,c,f;for(l=[],a=[],c=0,f=r.length;c<f;c++)s=n[r[c]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),CB=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),AB=function(){function e(t,n,r,i,s){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Ic(F6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),LB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,Ua),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var c=this.offsets[l],f=this.offsets[l+1]-c;f>0&&(s+=f)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},t}(),PB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,l,c;for(i={},a=0,l=t.length;a<l;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,l,c,f,p,m,x,g,N,j,E,b;for(i in r=R6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),g={0:0},b=r.charMap)g[(c=b[i]).old]=c.new;for(N in x=r.maxGlyphID,a)N in g||(g[N]=x++);return p=function(S){var A,O;for(A in O={},S)O[S[A]]=A;return O}(g),m=Object.keys(p).sort(function(S,A){return S-A}),j=function(){var S,A,O;for(O=[],S=0,A=m.length;S<A;S++)l=m[S],O.push(p[l]);return O}(),s=this.font.glyf.encode(a,j,g),f=this.font.loca.encode(s.offsets,j),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},e}();Dt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,c,f;for(f=[],l=0,c=n.length;l<c;l++)r=n[l],f.push(t.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();function TB({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){var at;const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para das seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualizacin de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para das con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los das seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=$S(),[s,a]=k.useState(void 0),[l,c]=k.useState(!0),[f,p]=k.useState(!1),[m,x]=k.useState(null),[g,N]=k.useState(!1),[j,E]=k.useState([]),[b,S]=k.useState([]),[A,O]=k.useState([]),[K,ie]=k.useState([]),{user:W}=Zr(),[$,oe]=k.useState(new Date),[le,R]=k.useState(new Set),[q,J]=k.useState(new Map),B=Ae=>Kt(Ae,"yyyy-MM"),fe=k.useDeferredValue(q),he=k.useMemo(()=>{const Ae=[],de=new Set;return fe.forEach(me=>{me.forEach(ge=>{const $e=ge.memberId;de.has($e)||(de.add($e),Ae.push({...ge,dates:[]}))})}),Ae.forEach(me=>{const ge=[];fe.forEach($e=>{const We=$e.find(Ke=>Ke.memberId===me.memberId);We&&ge.push(...We.dates)}),me.dates=ge}),Ae},[fe]);k.useEffect(()=>{W&&(Z(),ke($),ce(),se(),je())},[W,i]),k.useEffect(()=>{if(!W)return;const Ae=B($);le.has(Ae)||ke($);const de=new Date($.getFullYear(),$.getMonth()-1,1),me=new Date($.getFullYear(),$.getMonth()+1,1),ge=B(de),$e=B(me),We=setTimeout(()=>{le.has(ge)||ke(de),le.has($e)||ke(me)},500);return()=>clearTimeout(We)},[$,W,le.size]);const G=k.useMemo(()=>{const Ae=new Map;return he.forEach(de=>{const me=new Set;de.dates.forEach(ge=>{me.add(Kt(ge,"yyyy-MM-dd"))}),Ae.set(de.userId,me)}),Ae},[he]),P=k.useMemo(()=>{const Ae=new Map,de=new Map;return b.forEach(me=>{Ae.has(me.user_id)||Ae.set(me.user_id,new Set),Ae.get(me.user_id).add(Kt(new Date(me.date),"yyyy-MM-dd"))}),K.forEach(me=>{de.has(me.user_id)||de.set(me.user_id,new Set),de.get(me.user_id).add(Kt(new Date(me.date),"yyyy-MM-dd"))}),{groupEvents:Ae,externalEvents:de}},[b,K]),F=k.useMemo(()=>{const Ae=new Map,de=new Set;return G.forEach(me=>{me.forEach(ge=>de.add(ge))}),de.forEach(me=>{const ge=e.filter($e=>{var We,Ke,Me;if($e.user_id){const rt=((We=G.get($e.user_id))==null?void 0:We.has(me))??!1,qe=((Ke=P.groupEvents.get($e.user_id))==null?void 0:Ke.has(me))??!1,At=((Me=P.externalEvents.get($e.user_id))==null?void 0:Me.has(me))??!1;return rt&&!qe&&!At}else{const rt=he.find(At=>At.memberId===$e.id);return(rt==null?void 0:rt.dates.some(At=>Kt(At,"yyyy-MM-dd")===me))??!1}});Ae.set(me,ge)}),Ae},[e,G,P,he]),ne=k.useCallback(Ae=>{const de=Kt(Ae,"yyyy-MM-dd");return F.get(de)||[]},[F]),be=k.useMemo(()=>{const Ae=new Map,de=e.filter(ge=>ge.role_in_group==="principal"),me=new Set;return de.forEach(ge=>{ge.instruments.forEach($e=>{me.add($e.id)})}),F.forEach((ge,$e)=>{const We=ge.filter(Me=>Me.role_in_group==="sustituto"),Ke=Array.from(me).every(Me=>ge.some(qe=>qe.role_in_group==="principal"&&qe.instruments.some(At=>At.id===Me))?!0:We.some(At=>At.instruments.some(lt=>lt.id===Me)));Ae.set($e,Ke)}),Ae},[e,F]),T=k.useCallback(Ae=>{const de=Kt(Ae,"yyyy-MM-dd");return be.get(de)??!1},[be]),H=k.useMemo(()=>{if(!t)return[];if(e.filter(me=>me.role_in_group==="principal").length===0)return[];const de=[];return be.forEach((me,ge)=>{me&&de.push(new Date(ge))}),de.sort((me,ge)=>me.getTime()-ge.getTime())},[e,be,t]);k.useEffect(()=>{t&&H.length>=0&&(E(H),t(H))},[H,t]),k.useEffect(()=>{t&&t(j)},[j,t]);const Z=k.useCallback(async()=>{const Ae=await Wn(async()=>await Xe.from("users").select("role").eq("id",W==null?void 0:W.id).single(),"Error checking admin status");Ae&&N(Ae.role==="admin")},[W==null?void 0:W.id]),se=async()=>{const Ae=await Wn(async()=>await Xe.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(Ae){const de=[];Ae.forEach(me=>{var ge;(ge=me.event_members)==null||ge.forEach($e=>{de.push({event_id:me.id,date:me.date,user_id:$e.user_id,name:me.name,group_id:me.group_id})})}),S(de)}},ce=async()=>{const Ae=await Wn(async()=>await Xe.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(Ae){const de=Ae.map(me=>({event_id:me.id,date:me.date,user_id:"",name:me.name,group_id:me.group_id}));O(de)}},je=async()=>{const Ae=await Xe.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(Ae.error){console.error("Error al obtener eventos externos:",Ae.error);return}const de=Ae.data||[],me=[];de.forEach(ge=>{var $e;($e=ge.event_members)==null||$e.forEach(We=>{me.push({user_id:We.user_id,date:ge.date})})}),ie(me)},ke=async Ae=>{if(!i)return;const de=B(Ae);if(!le.has(de)){le.size===0&&c(!0);try{const me=e.filter(Me=>Me.user_id!==null).map(Me=>Me.user_id),ge=e.filter(Me=>Me.user_id===null).map(Me=>Me.id),$e=Kt(di(Ae),"yyyy-MM-dd"),We=Kt(Ef(Ae),"yyyy-MM-dd"),Ke=await Wn(async()=>{if(me.length===0&&ge.length===0)return[];let Me=Xe.from("member_availability").select("user_id, group_member_id, date").gte("date",$e).lte("date",We);const rt=[];return me.length>0&&rt.push(`user_id.in.(${me.join(",")})`),ge.length>0&&rt.push(`group_member_id.in.(${ge.join(",")})`),rt.length>0&&(Me=Me.or(rt.join(","))),Me.order("date")},`Error fetching availabilities for ${de}`);if(Ke){const Me=e.map(rt=>{const qe=Ke.filter(lt=>rt.user_id&&lt.user_id===rt.user_id||!rt.user_id&&lt.group_member_id===rt.id);return{userId:rt.user_id,memberId:rt.id,memberName:rt.name||"Unknown Member",memberType:rt.member_type||"registered",dates:qe.map(lt=>new Date(lt.date)),instruments:rt.instruments||[],roleInBand:rt.role_in_group||"principal"}});J(rt=>new Map(rt.set(de,Me))),R(rt=>new Set(rt.add(de)))}}catch(me){console.error(`Error fetching availabilities for ${de}:`,me),Le.error(`Error al obtener las disponibilidades de ${de}`)}finally{c(!1)}}},ee=Ae=>A.filter(de=>_r(new Date(de.date),Ae)),Se=()=>{const Ae=e.find(de=>de.user_id===(W==null?void 0:W.id));return g||(Ae==null?void 0:Ae.role_in_group)==="principal"},[_e,Re]=k.useState(!1),Fe=k.useRef(null),Ge=async(Ae=!1)=>{try{const de=window.scrollY;return Ae?Re(!0):p(!0),await new Promise(me=>setTimeout(me,50)),await Promise.all([ke($),se(),ce(),je()]),window.scrollTo(0,de),Ae||Le.success("Calendario actualizado correctamente"),!0}catch(de){return console.error("Error al actualizar datos del calendario:",de),Ae||Le.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{Ae||p(!1),Re(!1)},500)}},pe=async Ae=>{var We,Ke;if(!W){Le.error("Debes iniciar sesin para gestionar la disponibilidad");return}if(f)return;p(!0);const de=m||((We=e.find(Me=>Me.user_id===W.id))==null?void 0:We.id),me=e.find(Me=>Me.id===de);if(!me){Le.error("Miembro no encontrado"),p(!1);return}const ge=e.find(Me=>Me.user_id===W.id);if(!(g||(ge==null?void 0:ge.role_in_group)==="principal"||me.user_id===W.id)){Le.error("No tienes permisos para gestionar esta disponibilidad"),p(!1);return}if(me.user_id&&b.some(rt=>rt.user_id===me.user_id&&_r(new Date(rt.date),Ae))){Le.error("No puedes cambiar la disponibilidad en fechas con eventos programados"),p(!1);return}try{const Me=(Ke=he.find(qe=>qe.memberId===me.id))==null?void 0:Ke.dates.some(qe=>_r(qe,Ae)),rt=Kt(Ae,"yyyy-MM-dd");if(Me)try{let qe;if(me.user_id?qe=await Xe.from("member_availability").delete().eq("user_id",me.user_id).eq("date",rt):qe=await Xe.from("member_availability").delete().eq("group_member_id",me.id).eq("date",rt),qe.error){console.error("Error al eliminar disponibilidad:",qe.error),Le.error("Hubo un problema al guardar"),p(!1);return}a(Ae),Le.success(`Fecha ${Kt(Ae,"dd/MM/yyyy")} eliminada de la disponibilidad`);const At=B(Ae);J(lt=>{const Bt=new Map(lt);let St=Bt.get(At);if(!St)return ke(Ae),lt;const Ct=St.map(mn=>{if(mn.memberId===me.id){const Pt=mn.dates.filter(Qn=>!_r(Qn,Ae));return{...mn,dates:Pt}}return mn});return Bt.set(At,Ct),Bt})}catch(qe){console.error("Error inesperado al eliminar disponibilidad:",qe),Le.error("Ha ocurrido un error al procesar tu solicitud")}else try{let qe;if(me.user_id?qe=await Xe.from("member_availability").insert([{user_id:me.user_id,date:rt}]):qe=await Xe.from("member_availability").insert([{group_member_id:me.id,date:rt}]),qe.error){console.error("Error al insertar disponibilidad:",qe.error),Le.error("Hubo un problema al guardar"),p(!1);return}a(Ae),Le.success(`Fecha ${Kt(Ae,"dd/MM/yyyy")} aadida a la disponibilidad`);const At=B(Ae);J(lt=>{const Bt=new Map(lt);let St=Bt.get(At);if(!St)return ke(Ae),lt;const Ct=St.map(mn=>{if(mn.memberId===me.id){const Pt=[...mn.dates,Ae];return{...mn,dates:Pt}}return mn});return Bt.set(At,Ct),Bt})}catch(qe){console.error("Error inesperado al aadir disponibilidad:",qe),Le.error("Ha ocurrido un error al procesar tu solicitud")}}catch(Me){console.error("Error en handleDayClick:",Me),Le.error("Ha ocurrido un error al procesar tu solicitud")}finally{p(!1)}},te=k.useMemo(()=>{const Ae=new Map,de=new Set;return G.forEach(me=>{me.forEach(ge=>de.add(ge))}),P.groupEvents.forEach(me=>{me.forEach(ge=>de.add(ge))}),de.forEach(me=>{const ge=F.get(me)||[],$e=e.filter(Me=>{var rt;return Me.user_id&&((rt=P.groupEvents.get(Me.user_id))==null?void 0:rt.has(me))}),We=new Set(ge.map(Me=>Me.id)),Ke=[...ge];$e.forEach(Me=>{We.has(Me.id)||(Ke.push(Me),We.add(Me.id))}),Ae.set(me,Ke)}),Ae},[e,F,P]),et=k.useCallback(Ae=>{const de=Kt(Ae,"yyyy-MM-dd");return te.get(de)||[]},[te]),He=Ae=>{var Pt,Qn;const{date:de}=Ae,me=Kt(de,"yyyy-MM-dd"),ge=et(de),$e=ne(de),We=m||((Pt=e.find(Et=>Et.user_id===(W==null?void 0:W.id)))==null?void 0:Pt.id),Ke=e.find(Et=>Et.id===We),Me=ge.some(Et=>Et.id===We),rt=(Ke==null?void 0:Ke.user_id)&&((Qn=P.externalEvents.get(Ke.user_id))==null?void 0:Qn.has(me))||!1,qe=ge.filter(Et=>Et.id!==We),At=qe.length,lt=qe.filter(Et=>{var or;return Et.user_id&&((or=P.externalEvents.get(Et.user_id))==null?void 0:or.has(me))}).length,Bt=T(de),St=ee(de),Ct=St.length>0,mn=rt||lt>0;return u.jsxs("div",{className:`day-content ${Bt?"group-available":""} ${Ct?"has-event":""} ${mn?"has-external-events":""} ${s&&_r(de,s)?"selected-day":""}`,children:[u.jsx("span",{className:`${s&&_r(de,s)?"text-indigo-900 font-bold":""}`,children:de.getDate()}),(Me||At>0||Ct)&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"availability-dots",children:[Me&&u.jsx("div",{className:`availability-dot you ${rt?"border border-orange-500 bg-orange-200":""}`}),qe.slice(0,3).map((Et,or)=>{const un=K.some(qt=>qt.user_id===Et.user_id&&_r(new Date(qt.date),de));return u.jsx("div",{className:`availability-dot others ${un?"border border-orange-500 bg-orange-200":""}`},or)})]}),u.jsxs("div",{className:"day-tooltip",children:[u.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[Kt(de,"MMMM d, yyyy"),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[Bt&&u.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),Ct&&u.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:St.length>1?`${St[0].name} y ${St.length-1} ms`:St[0].name}),mn&&u.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[lt+(rt?1:0)," miembro(s) con eventos externos"]})]})]}),ge.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),ge.map(Et=>{var qt,_t,Wt;const or=$e.some(wn=>wn.id===Et.id),un=Et.user_id&&((qt=P.externalEvents.get(Et.user_id))==null?void 0:qt.has(me))||!1;return u.jsx("div",{className:`tooltip-member ${Et.id===(m||((_t=e.find(wn=>wn.user_id===(W==null?void 0:W.id)))==null?void 0:_t.id))?"you":"other"}`,children:u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between w-full",children:[u.jsx("span",{className:"font-medium",children:Et.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[Et.role_in_group==="sustituto"&&u.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),or&&!un&&u.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),un&&u.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),Et.id===(m||((Wt=e.find(wn=>wn.user_id===(W==null?void 0:W.id)))==null?void 0:Wt.id))&&u.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"T"})]})]}),Et.instruments.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Et.instruments.map((wn,rn)=>u.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[u.jsx(ei,{className:"w-3 h-3 mr-1"}),wn.name,rn<Et.instruments.length-1&&", "]},`${Et.id}-${wn.id}-${rn}`))})]})},Et.id)})]})]})]})]})},Ve=()=>{const de=H.filter(Ke=>ee(Ke).length===0).sort((Ke,Me)=>Ke.getTime()-Me.getTime()).reduce((Ke,Me)=>{const rt=Kt(Me,"MMMM yyyy",{locale:uo});Ke[rt]||(Ke[rt]={withPrincipals:[],withSubstitutes:[]});const qe=et(Me);return e.filter(lt=>lt.role_in_group==="principal").filter(lt=>!qe.some(Bt=>Bt.user_id===lt.user_id)).length===0?Ke[rt].withPrincipals.push(Me):Ke[rt].withSubstitutes.push(Me),Ke},{});let me=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(de).length===0?me+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(de).forEach(([Ke,Me])=>{me+=`${Ke.toUpperCase()}
`,Me.withPrincipals.length>0&&(me+=`Fechas con miembros principales:
`,me+=Me.withPrincipals.map(rt=>`${Kt(rt,"d(EEE)",{locale:uo})}`).join(", "),me+=`

`),Me.withSubstitutes.length>0&&(me+=`Fechas con sustitutos:
`,me+=Me.withSubstitutes.map(rt=>`${Kt(rt,"d(EEE)",{locale:uo})}`).join(", "),me+=`

`),me+=`
`});const ge=new Blob([me],{type:"text/plain;charset=utf-8"}),$e=window.URL.createObjectURL(ge),We=document.createElement("a");We.href=$e,We.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${Kt(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(We),We.click(),document.body.removeChild(We),window.URL.revokeObjectURL($e)},Qe=()=>{const Ae=new Date;Ae.setHours(0,0,0,0);const me=H.filter(lt=>lt>=Ae).filter(lt=>ee(lt).length===0).sort((lt,Bt)=>lt.getTime()-Bt.getTime()).reduce((lt,Bt)=>{const St=Kt(Bt,"MMMM yyyy",{locale:uo});lt[St]||(lt[St]={withPrincipals:[],withSubstitutes:[]});const Ct=et(Bt);return e.filter(Pt=>Pt.role_in_group==="principal").filter(Pt=>!Ct.some(Qn=>Qn.user_id===Pt.user_id)).length===0?lt[St].withPrincipals.push(Bt):lt[St].withSubstitutes.push(Bt),lt},{}),ge=new Dt("p","mm","a4"),$e=ge.internal.pageSize.getWidth(),We=ge.internal.pageSize.getHeight(),Ke=25;let Me=Ke;if(ge.setFontSize(24),ge.setFont("helvetica","light"),ge.setTextColor(40,40,40),ge.text(n,Ke,Me),Me+=12,ge.setFontSize(11),ge.setFont("helvetica","normal"),ge.setTextColor(120,120,120),ge.text("FECHAS DISPONIBLES",Ke,Me),Me+=6,ge.setFontSize(9),ge.setTextColor(160,160,160),ge.text(Kt(new Date,"dd MMMM yyyy",{locale:uo}),Ke,Me),Me+=8,ge.setDrawColor(230,230,230),ge.setLineWidth(.3),ge.line(Ke,Me,$e-Ke,Me),Me+=20,Object.keys(me).length===0)ge.setFontSize(12),ge.setFont("helvetica","normal"),ge.setTextColor(120,120,120),ge.text("No hay fechas disponibles prximas.",Ke,Me);else{Object.entries(me).forEach(([St,Ct],mn)=>{if(Me>We-80&&(ge.addPage(),Me=Ke+40),ge.setFontSize(14),ge.setFont("helvetica","normal"),ge.setTextColor(60,60,60),ge.text(St.charAt(0).toUpperCase()+St.slice(1),Ke,Me),Me+=12,Ct.withPrincipals.length>0){const Pt=Ct.withPrincipals.map(Et=>Kt(Et,"d (EEE)",{locale:uo})).join("  ");ge.setFontSize(18),ge.setFont("helvetica","light"),ge.setTextColor(40,40,40);const Qn=ge.splitTextToSize(Pt,$e-2*Ke);ge.text(Qn,Ke,Me),Me+=Qn.length*8+2,ge.setFontSize(8),ge.setFont("helvetica","normal"),ge.setTextColor(100,180,100),ge.text("FORMACIN COMPLETA",Ke,Me),Me+=8}if(Ct.withSubstitutes.length>0){Ct.withPrincipals.length>0&&(Me+=4);const Pt=Ct.withSubstitutes.map(Et=>Kt(Et,"d (EEE)",{locale:uo})).join("  ");ge.setFontSize(14),ge.setFont("helvetica","light"),ge.setTextColor(120,120,120);const Qn=ge.splitTextToSize(Pt,$e-2*Ke);ge.text(Qn,Ke,Me),Me+=Qn.length*6+2,ge.setFontSize(8),ge.setFont("helvetica","normal"),ge.setTextColor(180,140,100),ge.text("CON SUSTITUTOS",Ke,Me),Me+=8}mn<Object.keys(me).length-1?(Me+=8,ge.setDrawColor(245,245,245),ge.setLineWidth(.2),ge.line(Ke,Me,$e-Ke,Me),Me+=16):Me+=12}),Me+=15,ge.setFontSize(9),ge.setFont("helvetica","normal"),ge.setTextColor(160,160,160);const lt=Object.values(me).reduce((St,Ct)=>St+Ct.withPrincipals.length,0),Bt=Object.values(me).reduce((St,Ct)=>St+Ct.withSubstitutes.length,0);(lt>0||Bt>0)&&ge.text(`${lt+Bt} fechas disponibles`,Ke,We-25)}const rt=ge.internal.pages.length-1;for(let lt=1;lt<=rt;lt++)ge.setPage(lt),ge.setFontSize(8),ge.setFont("helvetica","normal"),ge.setTextColor(200,200,200),rt>1&&ge.text(`${lt}`,$e-Ke,We-15);const qe=ge.output("blob"),At=URL.createObjectURL(qe);window.open(At,"_blank"),setTimeout(()=>{URL.revokeObjectURL(At)},1e3)};return l?u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx(sa,{className:"w-6 h-6 animate-spin text-indigo-600"})}):u.jsxs("div",{className:"space-y-6",children:[(g||Se())&&e.length>0&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),u.jsxs("div",{className:"relative w-full max-w-xs",children:[u.jsx("select",{id:"member-select",value:m||((at=e.find(Ae=>Ae.user_id===(W==null?void 0:W.id)))==null?void 0:at.id)||"",onChange:Ae=>{const de=e.find(me=>me.user_id===(W==null?void 0:W.id));x(Ae.target.value===(de==null?void 0:de.id)?null:Ae.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(Ae=>u.jsxs("option",{value:Ae.id,children:[Ae.name," ",Ae.user_id===(W==null?void 0:W.id)?"(T)":""," ",Ae.user_id?"":"(Local)"]},Ae.id))}),u.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:u.jsx(XD,{className:"h-4 w-4"})})]})]}),u.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),u.jsxs("div",{ref:Fe,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[u.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${f||_e?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[u.jsx("div",{className:"absolute inset-0 bg-black/20"}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[u.jsx(sa,{className:"w-6 h-6 animate-spin text-indigo-600"}),u.jsx("span",{children:"Actualizando calendario..."})]})]}),u.jsx(D$,{mode:"single",selected:s,month:$,onSelect:a,onDayClick:pe,onMonthChange:Ae=>{oe(Ae)},modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:He},weekStartsOn:1,locale:uo})]}),u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),u.jsxs("button",{onClick:Ae=>{Ae.preventDefault(),Ge()},disabled:f,className:`px-3 py-1 text-sm ${f?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[u.jsx("span",{className:"mr-1",children:f?"...":""}),f?"Actualizando...":"Actualizar"]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[u.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[u.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[u.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[u.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[u.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),u.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[u.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:""}),u.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),u.jsx("div",{className:"flex justify-between items-center",children:u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("button",{onClick:Qe,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[u.jsx(ZD,{className:"w-4 h-4 mr-2"}),"Ver PDF"]}),u.jsxs("button",{onClick:Ve,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[u.jsx(Q0,{className:"w-4 h-4 mr-2"}),"Descargar TXT"]})]})})]})}function MB({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r}){const i=t.filter(l=>{const c=e.find(f=>f.id===l.memberId);return(c==null?void 0:c.role_in_group)==="principal"}),s=t.filter(l=>{const c=e.find(f=>f.id===l.memberId);return(c==null?void 0:c.role_in_group)==="sustituto"}),a=(l,c)=>u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-700",children:c}),l.map(f=>{const p=e.find(N=>N.id===f.memberId);if(!p)return null;!f.wasInitiallyAvailable&&f.isBusyInOtherEvent;const m=f.isBusyInOtherEvent&&!f.selected;let x="bg-gray-50 hover:bg-gray-100",g=null;return f.isBusyInOtherEvent?(x="bg-gray-100",g=u.jsxs("span",{className:"inline-flex items-center text-xs text-gray-700 bg-gray-200 px-2 py-0.5 rounded-full",children:[u.jsx(jv,{className:"w-3 h-3 mr-1"}),"Ocupado en otro evento"]})):f.wasInitiallyAvailable||(x="bg-orange-50 hover:bg-orange-100",g=u.jsxs("span",{className:"inline-flex items-center text-xs text-orange-700 bg-orange-100 px-2 py-0.5 rounded-full",children:[u.jsx(jv,{className:"w-3 h-3 mr-1"}),"No disponible"]})),u.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${x} ${m?"opacity-60":""}`,children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("input",{type:"checkbox",checked:f.selected,onChange:N=>n(f.memberId,N.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${m?"opacity-50 cursor-not-allowed":""}`,disabled:m,title:f.isBusyInOtherEvent?"Este miembro est ocupado en otro evento":""}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`font-medium ${m?"text-gray-500":"text-gray-900"}`,children:p.name}),g]}),u.jsxs("div",{className:`flex items-center text-sm ${m?"text-gray-400":"text-gray-500"}`,children:[u.jsx(ei,{className:"w-3 h-3 mr-1"}),p.instruments.map(N=>N.name).join(", ")]})]})]})},f.memberId)})]});return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Puedes seleccionar miembros que no estaban disponibles. Al guardar, se aadir automticamente esta fecha a su disponibilidad."})]}),u.jsxs("div",{className:"space-y-6",children:[a(i,"Miembros Principales"),s.length>0&&a(s,"Sustitutos")]}),r&&u.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[u.jsx(jv,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),u.jsx("p",{children:"Por favor, asegrate de que todos los instrumentos estn cubiertos por los miembros seleccionados. Si un miembro principal no est disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var ag={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ag.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",m=1,x=2,g=4,N=1,j=2,E=1,b=2,S=4,A=8,O=16,K=32,ie=64,W=128,$=256,oe=512,le=30,R="...",q=800,J=16,B=1,fe=2,he=3,G=1/0,P=9007199254740991,F=17976931348623157e292,ne=NaN,be=4294967295,T=be-1,H=be>>>1,Z=[["ary",W],["bind",E],["bindKey",b],["curry",A],["curryRight",O],["flip",oe],["partial",K],["partialRight",ie],["rearg",$]],se="[object Arguments]",ce="[object Array]",je="[object AsyncFunction]",ke="[object Boolean]",ee="[object Date]",Se="[object DOMException]",_e="[object Error]",Re="[object Function]",Fe="[object GeneratorFunction]",Ge="[object Map]",pe="[object Number]",te="[object Null]",et="[object Object]",He="[object Promise]",Ve="[object Proxy]",Qe="[object RegExp]",at="[object Set]",Ae="[object String]",de="[object Symbol]",me="[object Undefined]",ge="[object WeakMap]",$e="[object WeakSet]",We="[object ArrayBuffer]",Ke="[object DataView]",Me="[object Float32Array]",rt="[object Float64Array]",qe="[object Int8Array]",At="[object Int16Array]",lt="[object Int32Array]",Bt="[object Uint8Array]",St="[object Uint8ClampedArray]",Ct="[object Uint16Array]",mn="[object Uint32Array]",Pt=/\b__p \+= '';/g,Qn=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,or=/&(?:amp|lt|gt|quot|#39);/g,un=/[&<>"']/g,qt=RegExp(or.source),_t=RegExp(un.source),Wt=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rr=/^\w*$/,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/[\\^$.*+?()[\]{}|]/g,cr=RegExp(Zn.source),Pn=/^\s+/,Rn=/\s/,Tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,Wi=/,? & /,Ai=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vs=/[()=,{}\[\]\/\s]/,ys=/\\(\\)?/g,xs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ws=/\w*$/,Hi=/^[-+]0x[0-9a-f]+$/i,Bs=/^0b[01]+$/i,jo=/^\[object .+?Constructor\]$/,ul=/^0o[0-7]+$/i,dl=/^(?:0|[1-9]\d*)$/,fl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ha=/($^)/,Qu=/['\n\r\u2028\u2029\\]/g,hl="\\ud800-\\udfff",Bf="\\u0300-\\u036f",pl="\\ufe20-\\ufe2f",Zu="\\u20d0-\\u20ff",ed=Bf+pl+Zu,ml="\\u2700-\\u27bf",td="a-z\\xdf-\\xf6\\xf8-\\xff",nd="\\xac\\xb1\\xd7\\xf7",zf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gl="\\u2000-\\u206f",Uf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tr="A-Z\\xc0-\\xd6\\xd8-\\xde",Uc="\\ufe0e\\ufe0f",qc=nd+zf+gl+Uf,vl="[']",Wc="["+hl+"]",rd="["+qc+"]",hi="["+ed+"]",ko="\\d+",pi="["+ml+"]",yl="["+td+"]",Hc="[^"+hl+qc+ko+ml+td+tr+"]",Vc="\\ud83c[\\udffb-\\udfff]",id="(?:"+hi+"|"+Vc+")",sd="[^"+hl+"]",xl="(?:\\ud83c[\\udde6-\\uddff]){2}",Gc="[\\ud800-\\udbff][\\udc00-\\udfff]",zs="["+tr+"]",ad="\\u200d",od="(?:"+yl+"|"+Hc+")",qf="(?:"+zs+"|"+Hc+")",Us="(?:"+vl+"(?:d|ll|m|re|s|t|ve))?",Eo="(?:"+vl+"(?:D|LL|M|RE|S|T|VE))?",Co=id+"?",Yc="["+Uc+"]?",Wr="(?:"+ad+"(?:"+[sd,xl,Gc].join("|")+")"+Yc+Co+")*",Wf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ld="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ot=Yc+Co+Wr,Hf="(?:"+[pi,xl,Gc].join("|")+")"+Ot,Vf="(?:"+[sd+hi+"?",hi,xl,Gc,Wc].join("|")+")",qs=RegExp(vl,"g"),cd=RegExp(hi,"g"),wl=RegExp(Vc+"(?="+Vc+")|"+Vf+Ot,"g"),bl=RegExp([zs+"?"+yl+"+"+Us+"(?="+[rd,zs,"$"].join("|")+")",qf+"+"+Eo+"(?="+[rd,zs+od,"$"].join("|")+")",zs+"?"+od+"+"+Us,zs+"+"+Eo,ld,Wf,ko,Hf].join("|"),"g"),Kc=RegExp("["+ad+hl+ed+Uc+"]"),Gf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kf=-1,bn={};bn[Me]=bn[rt]=bn[qe]=bn[At]=bn[lt]=bn[Bt]=bn[St]=bn[Ct]=bn[mn]=!0,bn[se]=bn[ce]=bn[We]=bn[ke]=bn[Ke]=bn[ee]=bn[_e]=bn[Re]=bn[Ge]=bn[pe]=bn[et]=bn[Qe]=bn[at]=bn[Ae]=bn[ge]=!1;var dn={};dn[se]=dn[ce]=dn[We]=dn[Ke]=dn[ke]=dn[ee]=dn[Me]=dn[rt]=dn[qe]=dn[At]=dn[lt]=dn[Ge]=dn[pe]=dn[et]=dn[Qe]=dn[at]=dn[Ae]=dn[de]=dn[Bt]=dn[St]=dn[Ct]=dn[mn]=!0,dn[_e]=dn[Re]=dn[ge]=!1;var qa={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Jf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ao={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_l=parseFloat,ud=parseInt,Xc=typeof ci=="object"&&ci&&ci.Object===Object&&ci,dd=typeof self=="object"&&self&&self.Object===Object&&self,vr=Xc||dd||Function("return this")(),Vi=t&&!t.nodeType&&t,ni=Vi&&!0&&e&&!e.nodeType&&e,fd=ni&&ni.exports===Vi,Ws=fd&&Xc.process,nr=function(){try{var Ee=ni&&ni.require&&ni.require("util").types;return Ee||Ws&&Ws.binding&&Ws.binding("util")}catch{}}(),Sl=nr&&nr.isArrayBuffer,Wa=nr&&nr.isDate,hd=nr&&nr.isMap,Lo=nr&&nr.isRegExp,pd=nr&&nr.isSet,Nl=nr&&nr.isTypedArray;function Fr(Ee,Ue,De){switch(De.length){case 0:return Ee.call(Ue);case 1:return Ee.call(Ue,De[0]);case 2:return Ee.call(Ue,De[0],De[1]);case 3:return Ee.call(Ue,De[0],De[1],De[2])}return Ee.apply(Ue,De)}function md(Ee,Ue,De,mt){for(var Nt=-1,Ht=Ee==null?0:Ee.length;++Nt<Ht;){var Un=Ee[Nt];Ue(mt,Un,De(Un),Ee)}return mt}function $r(Ee,Ue){for(var De=-1,mt=Ee==null?0:Ee.length;++De<mt&&Ue(Ee[De],De,Ee)!==!1;);return Ee}function Qc(Ee,Ue){for(var De=Ee==null?0:Ee.length;De--&&Ue(Ee[De],De,Ee)!==!1;);return Ee}function jl(Ee,Ue){for(var De=-1,mt=Ee==null?0:Ee.length;++De<mt;)if(!Ue(Ee[De],De,Ee))return!1;return!0}function bs(Ee,Ue){for(var De=-1,mt=Ee==null?0:Ee.length,Nt=0,Ht=[];++De<mt;){var Un=Ee[De];Ue(Un,De,Ee)&&(Ht[Nt++]=Un)}return Ht}function kl(Ee,Ue){var De=Ee==null?0:Ee.length;return!!De&&it(Ee,Ue,0)>-1}function Ha(Ee,Ue,De){for(var mt=-1,Nt=Ee==null?0:Ee.length;++mt<Nt;)if(De(Ue,Ee[mt]))return!0;return!1}function gn(Ee,Ue){for(var De=-1,mt=Ee==null?0:Ee.length,Nt=Array(mt);++De<mt;)Nt[De]=Ue(Ee[De],De,Ee);return Nt}function Gi(Ee,Ue){for(var De=-1,mt=Ue.length,Nt=Ee.length;++De<mt;)Ee[Nt+De]=Ue[De];return Ee}function Hs(Ee,Ue,De,mt){var Nt=-1,Ht=Ee==null?0:Ee.length;for(mt&&Ht&&(De=Ee[++Nt]);++Nt<Ht;)De=Ue(De,Ee[Nt],Nt,Ee);return De}function Zc(Ee,Ue,De,mt){var Nt=Ee==null?0:Ee.length;for(mt&&Nt&&(De=Ee[--Nt]);Nt--;)De=Ue(De,Ee[Nt],Nt,Ee);return De}function w(Ee,Ue){for(var De=-1,mt=Ee==null?0:Ee.length;++De<mt;)if(Ue(Ee[De],De,Ee))return!0;return!1}var D=Rt("length");function ae(Ee){return Ee.split("")}function ve(Ee){return Ee.match(Ai)||[]}function Te(Ee,Ue,De){var mt;return De(Ee,function(Nt,Ht,Un){if(Ue(Nt,Ht,Un))return mt=Ht,!1}),mt}function ze(Ee,Ue,De,mt){for(var Nt=Ee.length,Ht=De+(mt?1:-1);mt?Ht--:++Ht<Nt;)if(Ue(Ee[Ht],Ht,Ee))return Ht;return-1}function it(Ee,Ue,De){return Ue===Ue?Ji(Ee,Ue,De):ze(Ee,kt,De)}function pt(Ee,Ue,De,mt){for(var Nt=De-1,Ht=Ee.length;++Nt<Ht;)if(mt(Ee[Nt],Ue))return Nt;return-1}function kt(Ee){return Ee!==Ee}function zt(Ee,Ue){var De=Ee==null?0:Ee.length;return De?ir(Ee,Ue)/De:ne}function Rt(Ee){return function(Ue){return Ue==null?n:Ue[Ee]}}function tn(Ee){return function(Ue){return Ee==null?n:Ee[Ue]}}function zn(Ee,Ue,De,mt,Nt){return Nt(Ee,function(Ht,Un,vn){De=mt?(mt=!1,Ht):Ue(De,Ht,Un,vn)}),De}function rr(Ee,Ue){var De=Ee.length;for(Ee.sort(Ue);De--;)Ee[De]=Ee[De].value;return Ee}function ir(Ee,Ue){for(var De,mt=-1,Nt=Ee.length;++mt<Nt;){var Ht=Ue(Ee[mt]);Ht!==n&&(De=De===n?Ht:De+Ht)}return De}function Tr(Ee,Ue){for(var De=-1,mt=Array(Ee);++De<Ee;)mt[De]=Ue(De);return mt}function Mr(Ee,Ue){return gn(Ue,function(De){return[De,Ee[De]]})}function Yi(Ee){return Ee&&Ee.slice(0,ma(Ee)+1).replace(Pn,"")}function Fn(Ee){return function(Ue){return Ee(Ue)}}function Ki(Ee,Ue){return gn(Ue,function(De){return Ee[De]})}function Va(Ee,Ue){return Ee.has(Ue)}function El(Ee,Ue){for(var De=-1,mt=Ee.length;++De<mt&&it(Ue,Ee[De],0)>-1;);return De}function Cl(Ee,Ue){for(var De=Ee.length;De--&&it(Ue,Ee[De],0)>-1;);return De}function Al(Ee,Ue){for(var De=Ee.length,mt=0;De--;)Ee[De]===Ue&&++mt;return mt}var eu=tn(qa),tu=tn(Jf);function Ll(Ee){return"\\"+Jc[Ee]}function Br(Ee,Ue){return Ee==null?n:Ee[Ue]}function _s(Ee){return Kc.test(Ee)}function Pl(Ee){return Gf.test(Ee)}function Tl(Ee){for(var Ue,De=[];!(Ue=Ee.next()).done;)De.push(Ue.value);return De}function Po(Ee){var Ue=-1,De=Array(Ee.size);return Ee.forEach(function(mt,Nt){De[++Ue]=[Nt,mt]}),De}function ri(Ee,Ue){return function(De){return Ee(Ue(De))}}function Vs(Ee,Ue){for(var De=-1,mt=Ee.length,Nt=0,Ht=[];++De<mt;){var Un=Ee[De];(Un===Ue||Un===p)&&(Ee[De]=p,Ht[Nt++]=De)}return Ht}function Ga(Ee){var Ue=-1,De=Array(Ee.size);return Ee.forEach(function(mt){De[++Ue]=mt}),De}function gd(Ee){var Ue=-1,De=Array(Ee.size);return Ee.forEach(function(mt){De[++Ue]=[mt,mt]}),De}function Ji(Ee,Ue,De){for(var mt=De-1,Nt=Ee.length;++mt<Nt;)if(Ee[mt]===Ue)return mt;return-1}function Ml(Ee,Ue,De){for(var mt=De+1;mt--;)if(Ee[mt]===Ue)return mt;return mt}function pa(Ee){return _s(Ee)?gi(Ee):D(Ee)}function mi(Ee){return _s(Ee)?ii(Ee):ae(Ee)}function ma(Ee){for(var Ue=Ee.length;Ue--&&Rn.test(Ee.charAt(Ue)););return Ue}var To=tn(Ao);function gi(Ee){for(var Ue=wl.lastIndex=0;wl.test(Ee);)++Ue;return Ue}function ii(Ee){return Ee.match(wl)||[]}function Ya(Ee){return Ee.match(bl)||[]}var ga=function Ee(Ue){Ue=Ue==null?vr:vi.defaults(vr.Object(),Ue,vi.pick(vr,Yf));var De=Ue.Array,mt=Ue.Date,Nt=Ue.Error,Ht=Ue.Function,Un=Ue.Math,vn=Ue.Object,Mo=Ue.RegExp,Do=Ue.String,Dr=Ue.TypeError,Ss=De.prototype,Io=Ht.prototype,Ns=vn.prototype,Gs=Ue["__core-js_shared__"],js=Io.toString,on=Ns.hasOwnProperty,Xi=0,Li=function(){var o=/[^.]+$/.exec(Gs&&Gs.keys&&Gs.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),_n=Ns.toString,Mn=js.call(vn),ur=vr._,Sr=Mo("^"+js.call(on).replace(Zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=fd?Ue.Buffer:n,Zi=Ue.Symbol,va=Ue.Uint8Array,nu=Qi?Qi.allocUnsafe:n,Dl=ri(vn.getPrototypeOf,vn),ru=vn.create,yi=Ns.propertyIsEnumerable,si=Ss.splice,iu=Zi?Zi.isConcatSpreadable:n,Ka=Zi?Zi.iterator:n,Ja=Zi?Zi.toStringTag:n,Oo=function(){try{var o=hu(vn,"defineProperty");return o({},"",{}),o}catch{}}(),vd=Ue.clearTimeout!==vr.clearTimeout&&Ue.clearTimeout,Xf=mt&&mt.now!==vr.Date.now&&mt.now,Hp=Ue.setTimeout!==vr.setTimeout&&Ue.setTimeout,Il=Un.ceil,Ol=Un.floor,Rl=vn.getOwnPropertySymbols,Qf=Qi?Qi.isBuffer:n,Vp=Ue.isFinite,n1=Ss.join,Gp=ri(vn.keys,vn),Nr=Un.max,Hr=Un.min,r1=mt.now,i1=Ue.parseInt,Yp=Un.random,Zf=Ss.reverse,su=hu(Ue,"DataView"),ya=hu(Ue,"Map"),eh=hu(Ue,"Promise"),Fl=hu(Ue,"Set"),$l=hu(Ue,"WeakMap"),au=hu(vn,"create"),yd=$l&&new $l,Bl={},s1=pu(su),Xa=pu(ya),ks=pu(eh),xa=pu(Fl),a1=pu($l),ou=Zi?Zi.prototype:n,es=ou?ou.valueOf:n,Pi=ou?ou.toString:n;function Y(o){if(xr(o)&&!Gt(o)&&!(o instanceof Qt)){if(o instanceof Ti)return o;if(on.call(o,"__wrapped__"))return Fx(o)}return new Ti(o)}var zl=function(){function o(){}return function(d){if(!fr(d))return{};if(ru)return ru(d);o.prototype=d;var y=new o;return o.prototype=n,y}}();function lu(){}function Ti(o,d){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}Y.templateSettings={escape:Wt,evaluate:wn,interpolate:rn,variable:"",imports:{_:Y}},Y.prototype=lu.prototype,Y.prototype.constructor=Y,Ti.prototype=zl(lu.prototype),Ti.prototype.constructor=Ti;function Qt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function Kp(){var o=new Qt(this.__wrapped__);return o.__actions__=ns(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=ns(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=ns(this.__views__),o}function o1(){if(this.__filtered__){var o=new Qt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function xd(){var o=this.__wrapped__.value(),d=this.__dir__,y=Gt(o),C=d<0,I=y?o.length:0,Q=Sj(0,I,this.__views__),ue=Q.start,ye=Q.end,Pe=ye-ue,tt=C?ye:ue-1,nt=this.__iteratees__,ot=nt.length,ft=0,jt=Hr(Pe,this.__takeCount__);if(!y||!C&&I==Pe&&jt==Pe)return fu(o,this.__actions__);var Tt=[];e:for(;Pe--&&ft<jt;){tt+=d;for(var Xt=-1,Mt=o[tt];++Xt<ot;){var sn=nt[Xt],ln=sn.iteratee,As=sn.type,Ri=ln(Mt);if(As==fe)Mt=Ri;else if(!Ri){if(As==B)continue e;break e}}Tt[ft++]=Mt}return Tt}Qt.prototype=zl(lu.prototype),Qt.prototype.constructor=Qt;function Ys(o){var d=-1,y=o==null?0:o.length;for(this.clear();++d<y;){var C=o[d];this.set(C[0],C[1])}}function cu(){this.__data__=au?au(null):{},this.size=0}function th(o){var d=this.has(o)&&delete this.__data__[o];return this.size-=d?1:0,d}function Jp(o){var d=this.__data__;if(au){var y=d[o];return y===c?n:y}return on.call(d,o)?d[o]:n}function l1(o){var d=this.__data__;return au?d[o]!==n:on.call(d,o)}function Xp(o,d){var y=this.__data__;return this.size+=this.has(o)?0:1,y[o]=au&&d===n?c:d,this}Ys.prototype.clear=cu,Ys.prototype.delete=th,Ys.prototype.get=Jp,Ys.prototype.has=l1,Ys.prototype.set=Xp;function wa(o){var d=-1,y=o==null?0:o.length;for(this.clear();++d<y;){var C=o[d];this.set(C[0],C[1])}}function c1(){this.__data__=[],this.size=0}function u1(o){var d=this.__data__,y=xe(d,o);if(y<0)return!1;var C=d.length-1;return y==C?d.pop():si.call(d,y,1),--this.size,!0}function d1(o){var d=this.__data__,y=xe(d,o);return y<0?n:d[y][1]}function f1(o){return xe(this.__data__,o)>-1}function h1(o,d){var y=this.__data__,C=xe(y,o);return C<0?(++this.size,y.push([o,d])):y[C][1]=d,this}wa.prototype.clear=c1,wa.prototype.delete=u1,wa.prototype.get=d1,wa.prototype.has=f1,wa.prototype.set=h1;function Ks(o){var d=-1,y=o==null?0:o.length;for(this.clear();++d<y;){var C=o[d];this.set(C[0],C[1])}}function wd(){this.size=0,this.__data__={hash:new Ys,map:new(ya||wa),string:new Ys}}function p1(o){var d=mm(this,o).delete(o);return this.size-=d?1:0,d}function m1(o){return mm(this,o).get(o)}function Qp(o){return mm(this,o).has(o)}function h(o,d){var y=mm(this,o),C=y.size;return y.set(o,d),this.size+=y.size==C?0:1,this}Ks.prototype.clear=wd,Ks.prototype.delete=p1,Ks.prototype.get=m1,Ks.prototype.has=Qp,Ks.prototype.set=h;function v(o){var d=-1,y=o==null?0:o.length;for(this.__data__=new Ks;++d<y;)this.add(o[d])}function _(o){return this.__data__.set(o,c),this}function L(o){return this.__data__.has(o)}v.prototype.add=v.prototype.push=_,v.prototype.has=L;function M(o){var d=this.__data__=new wa(o);this.size=d.size}function z(){this.__data__=new wa,this.size=0}function U(o){var d=this.__data__,y=d.delete(o);return this.size=d.size,y}function V(o){return this.__data__.get(o)}function X(o){return this.__data__.has(o)}function re(o,d){var y=this.__data__;if(y instanceof wa){var C=y.__data__;if(!ya||C.length<i-1)return C.push([o,d]),this.size=++y.size,this;y=this.__data__=new Ks(C)}return y.set(o,d),this.size=y.size,this}M.prototype.clear=z,M.prototype.delete=U,M.prototype.get=V,M.prototype.has=X,M.prototype.set=re;function we(o,d){var y=Gt(o),C=!y&&mu(o),I=!y&&!C&&Ql(o),Q=!y&&!C&&!I&&Md(o),ue=y||C||I||Q,ye=ue?Tr(o.length,Do):[],Pe=ye.length;for(var tt in o)(d||on.call(o,tt))&&!(ue&&(tt=="length"||I&&(tt=="offset"||tt=="parent")||Q&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||Uo(tt,Pe)))&&ye.push(tt);return ye}function Ie(o){var d=o.length;return d?o[Gl(0,d-1)]:n}function Oe(o,d){return gm(ns(o),ut(d,0,o.length))}function Ce(o){return gm(ns(o))}function Ze(o,d,y){(y!==n&&!Na(o[d],y)||y===n&&!(d in o))&&Ye(o,d,y)}function Be(o,d,y){var C=o[d];(!(on.call(o,d)&&Na(C,y))||y===n&&!(d in o))&&Ye(o,d,y)}function xe(o,d){for(var y=o.length;y--;)if(Na(o[y][0],d))return y;return-1}function Ne(o,d,y,C){return Ut(o,function(I,Q,ue){d(C,I,y(I),ue)}),C}function Je(o,d){return o&&so(d,Yr(d),o)}function st(o,d){return o&&so(d,is(d),o)}function Ye(o,d,y){d=="__proto__"&&Oo?Oo(o,d,{configurable:!0,enumerable:!0,value:y,writable:!0}):o[d]=y}function ht(o,d){for(var y=-1,C=d.length,I=De(C),Q=o==null;++y<C;)I[y]=Q?n:R1(o,d[y]);return I}function ut(o,d,y){return o===o&&(y!==n&&(o=o<=y?o:y),d!==n&&(o=o>=d?o:d)),o}function wt(o,d,y,C,I,Q){var ue,ye=d&m,Pe=d&x,tt=d&g;if(y&&(ue=I?y(o,C,I,Q):y(o)),ue!==n)return ue;if(!fr(o))return o;var nt=Gt(o);if(nt){if(ue=jj(o),!ye)return ns(o,ue)}else{var ot=xi(o),ft=ot==Re||ot==Fe;if(Ql(o))return Ad(o,ye);if(ot==et||ot==se||ft&&!I){if(ue=Pe||ft?{}:Ax(o),!ye)return Pe?pj(o,st(ue,o)):hj(o,Je(ue,o))}else{if(!dn[ot])return I?o:{};ue=kj(o,ot,ye)}}Q||(Q=new M);var jt=Q.get(o);if(jt)return jt;Q.set(o,ue),iw(o)?o.forEach(function(Mt){ue.add(wt(Mt,d,y,Mt,o,Q))}):nw(o)&&o.forEach(function(Mt,sn){ue.set(sn,wt(Mt,d,y,sn,o,Q))});var Tt=tt?Pe?S1:_1:Pe?is:Yr,Xt=nt?n:Tt(o);return $r(Xt||o,function(Mt,sn){Xt&&(sn=Mt,Mt=o[sn]),Be(ue,sn,wt(Mt,d,y,sn,o,Q))}),ue}function dt(o){var d=Yr(o);return function(y){return fn(y,o,d)}}function fn(o,d,y){var C=y.length;if(o==null)return!C;for(o=vn(o);C--;){var I=y[C],Q=d[I],ue=o[I];if(ue===n&&!(I in o)||!Q(ue))return!1}return!0}function yn(o,d,y){if(typeof o!="function")throw new Dr(a);return dh(function(){o.apply(n,y)},d)}function Zt(o,d,y,C){var I=-1,Q=kl,ue=!0,ye=o.length,Pe=[],tt=d.length;if(!ye)return Pe;y&&(d=gn(d,Fn(y))),C?(Q=Ha,ue=!1):d.length>=i&&(Q=Va,ue=!1,d=new v(d));e:for(;++I<ye;){var nt=o[I],ot=y==null?nt:y(nt);if(nt=C||nt!==0?nt:0,ue&&ot===ot){for(var ft=tt;ft--;)if(d[ft]===ot)continue e;Pe.push(nt)}else Q(d,ot,C)||Pe.push(nt)}return Pe}var Ut=mx(sr),jn=mx(oi,!0);function kn(o,d){var y=!0;return Ut(o,function(C,I,Q){return y=!!d(C,I,Q),y}),y}function $t(o,d,y){for(var C=-1,I=o.length;++C<I;){var Q=o[C],ue=d(Q);if(ue!=null&&(ye===n?ue===ue&&!Cs(ue):y(ue,ye)))var ye=ue,Pe=Q}return Pe}function yr(o,d,y,C){var I=o.length;for(y=Jt(y),y<0&&(y=-y>I?0:I+y),C=C===n||C>I?I:Jt(C),C<0&&(C+=I),C=y>C?0:aw(C);y<C;)o[y++]=d;return o}function ai(o,d){var y=[];return Ut(o,function(C,I,Q){d(C,I,Q)&&y.push(C)}),y}function nn(o,d,y,C,I){var Q=-1,ue=o.length;for(y||(y=Cj),I||(I=[]);++Q<ue;){var ye=o[Q];d>0&&y(ye)?d>1?nn(ye,d-1,y,C,I):Gi(I,ye):C||(I[I.length]=ye)}return I}var Vr=gx(),xn=gx(!0);function sr(o,d){return o&&Vr(o,d,Yr)}function oi(o,d){return o&&xn(o,d,Yr)}function dr(o,d){return bs(d,function(y){return qo(o[y])})}function Gn(o,d){d=Xs(d,o);for(var y=0,C=d.length;o!=null&&y<C;)o=o[ao(d[y++])];return y&&y==C?o:n}function Gr(o,d,y){var C=d(o);return Gt(o)?C:Gi(C,y(o))}function Dn(o){return o==null?o===n?me:te:Ja&&Ja in vn(o)?_j(o):Ij(o)}function ts(o,d){return o>d}function Ir(o,d){return o!=null&&on.call(o,d)}function ba(o,d){return o!=null&&d in vn(o)}function Ro(o,d,y){return o>=Hr(d,y)&&o<Nr(d,y)}function Qa(o,d,y){for(var C=y?Ha:kl,I=o[0].length,Q=o.length,ue=Q,ye=De(Q),Pe=1/0,tt=[];ue--;){var nt=o[ue];ue&&d&&(nt=gn(nt,Fn(d))),Pe=Hr(nt.length,Pe),ye[ue]=!y&&(d||I>=120&&nt.length>=120)?new v(ue&&nt):n}nt=o[0];var ot=-1,ft=ye[0];e:for(;++ot<I&&tt.length<Pe;){var jt=nt[ot],Tt=d?d(jt):jt;if(jt=y||jt!==0?jt:0,!(ft?Va(ft,Tt):C(tt,Tt,y))){for(ue=Q;--ue;){var Xt=ye[ue];if(!(Xt?Va(Xt,Tt):C(o[ue],Tt,y)))continue e}ft&&ft.push(Tt),tt.push(jt)}}return tt}function Za(o,d,y,C){return sr(o,function(I,Q,ue){d(C,y(I),Q,ue)}),C}function In(o,d,y){d=Xs(d,o),o=Mx(o,d);var C=o==null?o:o[ao(Qs(d))];return C==null?n:Fr(C,o,y)}function bd(o){return xr(o)&&Dn(o)==se}function Zp(o){return xr(o)&&Dn(o)==We}function em(o){return xr(o)&&Dn(o)==ee}function eo(o,d,y,C,I){return o===d?!0:o==null||d==null||!xr(o)&&!xr(d)?o!==o&&d!==d:uu(o,d,y,C,eo,I)}function uu(o,d,y,C,I,Q){var ue=Gt(o),ye=Gt(d),Pe=ue?ce:xi(o),tt=ye?ce:xi(d);Pe=Pe==se?et:Pe,tt=tt==se?et:tt;var nt=Pe==et,ot=tt==et,ft=Pe==tt;if(ft&&Ql(o)){if(!Ql(d))return!1;ue=!0,nt=!1}if(ft&&!nt)return Q||(Q=new M),ue||Md(o)?kx(o,d,y,C,I,Q):wj(o,d,Pe,y,C,I,Q);if(!(y&N)){var jt=nt&&on.call(o,"__wrapped__"),Tt=ot&&on.call(d,"__wrapped__");if(jt||Tt){var Xt=jt?o.value():o,Mt=Tt?d.value():d;return Q||(Q=new M),I(Xt,Mt,y,C,Q)}}return ft?(Q||(Q=new M),bj(o,d,y,C,I,Q)):!1}function _d(o){return xr(o)&&xi(o)==Ge}function Mi(o,d,y,C){var I=y.length,Q=I,ue=!C;if(o==null)return!Q;for(o=vn(o);I--;){var ye=y[I];if(ue&&ye[2]?ye[1]!==o[ye[0]]:!(ye[0]in o))return!1}for(;++I<Q;){ye=y[I];var Pe=ye[0],tt=o[Pe],nt=ye[1];if(ue&&ye[2]){if(tt===n&&!(Pe in o))return!1}else{var ot=new M;if(C)var ft=C(tt,nt,Pe,o,d,ot);if(!(ft===n?eo(nt,tt,N|j,C,ot):ft))return!1}}return!0}function Fo(o){if(!fr(o)||Lj(o))return!1;var d=qo(o)?Sr:jo;return d.test(pu(o))}function Ul(o){return xr(o)&&Dn(o)==Qe}function tm(o){return xr(o)&&xi(o)==at}function Sd(o){return xr(o)&&_m(o.length)&&!!bn[Dn(o)]}function nh(o){return typeof o=="function"?o:o==null?ss:typeof o=="object"?Gt(o)?rm(o[0],o[1]):nm(o):vw(o)}function ql(o){if(!uh(o))return Gp(o);var d=[];for(var y in vn(o))on.call(o,y)&&y!="constructor"&&d.push(y);return d}function rh(o){if(!fr(o))return Dj(o);var d=uh(o),y=[];for(var C in o)C=="constructor"&&(d||!on.call(o,C))||y.push(C);return y}function Wl(o,d){return o<d}function Hl(o,d){var y=-1,C=rs(o)?De(o.length):[];return Ut(o,function(I,Q,ue){C[++y]=d(I,Q,ue)}),C}function nm(o){var d=j1(o);return d.length==1&&d[0][2]?Px(d[0][0],d[0][1]):function(y){return y===o||Mi(y,o,d)}}function rm(o,d){return E1(o)&&Lx(d)?Px(ao(o),d):function(y){var C=R1(y,o);return C===n&&C===d?F1(y,o):eo(d,C,N|j)}}function Vl(o,d,y,C,I){o!==d&&Vr(d,function(Q,ue){if(I||(I=new M),fr(Q))to(o,d,ue,y,Vl,C,I);else{var ye=C?C(A1(o,ue),Q,ue+"",o,d,I):n;ye===n&&(ye=Q),Ze(o,ue,ye)}},is)}function to(o,d,y,C,I,Q,ue){var ye=A1(o,y),Pe=A1(d,y),tt=ue.get(Pe);if(tt){Ze(o,y,tt);return}var nt=Q?Q(ye,Pe,y+"",o,d,ue):n,ot=nt===n;if(ot){var ft=Gt(Pe),jt=!ft&&Ql(Pe),Tt=!ft&&!jt&&Md(Pe);nt=Pe,ft||jt||Tt?Gt(ye)?nt=ye:jr(ye)?nt=ns(ye):jt?(ot=!1,nt=Ad(Pe,!0)):Tt?(ot=!1,nt=dx(Pe,!0)):nt=[]:fh(Pe)||mu(Pe)?(nt=ye,mu(ye)?nt=ow(ye):(!fr(ye)||qo(ye))&&(nt=Ax(Pe))):ot=!1}ot&&(ue.set(Pe,nt),I(nt,Pe,C,Q,ue),ue.delete(Pe)),Ze(o,y,nt)}function im(o,d){var y=o.length;if(y)return d+=d<0?y:0,Uo(d,y)?o[d]:n}function sm(o,d,y){d.length?d=gn(d,function(Q){return Gt(Q)?function(ue){return Gn(ue,Q.length===1?Q[0]:Q)}:Q}):d=[ss];var C=-1;d=gn(d,Fn(Lt()));var I=Hl(o,function(Q,ue,ye){var Pe=gn(d,function(tt){return tt(Q)});return{criteria:Pe,index:++C,value:Q}});return rr(I,function(Q,ue){return fj(Q,ue,y)})}function g1(o,d){return ih(o,d,function(y,C){return F1(o,C)})}function ih(o,d,y){for(var C=-1,I=d.length,Q={};++C<I;){var ue=d[C],ye=Gn(o,ue);y(ye,ue)&&Yl(Q,Xs(ue,o),ye)}return Q}function Nd(o){return function(d){return Gn(d,o)}}function jd(o,d,y,C){var I=C?pt:it,Q=-1,ue=d.length,ye=o;for(o===d&&(d=ns(d)),y&&(ye=gn(o,Fn(y)));++Q<ue;)for(var Pe=0,tt=d[Q],nt=y?y(tt):tt;(Pe=I(ye,nt,Pe,C))>-1;)ye!==o&&si.call(ye,Pe,1),si.call(o,Pe,1);return o}function sh(o,d){for(var y=o?d.length:0,C=y-1;y--;){var I=d[y];if(y==C||I!==Q){var Q=I;Uo(I)?si.call(o,I,1):lh(o,I)}}return o}function Gl(o,d){return o+Ol(Yp()*(d-o+1))}function ah(o,d,y,C){for(var I=-1,Q=Nr(Il((d-o)/(y||1)),0),ue=De(Q);Q--;)ue[C?Q:++I]=o,o+=y;return ue}function $o(o,d){var y="";if(!o||d<1||d>P)return y;do d%2&&(y+=o),d=Ol(d/2),d&&(o+=o);while(d);return y}function Yt(o,d){return L1(Tx(o,d,ss),o+"")}function v1(o){return Ie(Dd(o))}function kd(o,d){var y=Dd(o);return gm(y,ut(d,0,y.length))}function Yl(o,d,y,C){if(!fr(o))return o;d=Xs(d,o);for(var I=-1,Q=d.length,ue=Q-1,ye=o;ye!=null&&++I<Q;){var Pe=ao(d[I]),tt=y;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return o;if(I!=ue){var nt=ye[Pe];tt=C?C(nt,Pe,ye):n,tt===n&&(tt=fr(nt)?nt:Uo(d[I+1])?[]:{})}Be(ye,Pe,tt),ye=ye[Pe]}return o}var Ed=yd?function(o,d){return yd.set(o,d),o}:ss,no=Oo?function(o,d){return Oo(o,"toString",{configurable:!0,enumerable:!1,value:B1(d),writable:!0})}:ss;function am(o){return gm(Dd(o))}function Di(o,d,y){var C=-1,I=o.length;d<0&&(d=-d>I?0:I+d),y=y>I?I:y,y<0&&(y+=I),I=d>y?0:y-d>>>0,d>>>=0;for(var Q=De(I);++C<I;)Q[C]=o[C+d];return Q}function y1(o,d){var y;return Ut(o,function(C,I,Q){return y=d(C,I,Q),!y}),!!y}function du(o,d,y){var C=0,I=o==null?C:o.length;if(typeof d=="number"&&d===d&&I<=H){for(;C<I;){var Q=C+I>>>1,ue=o[Q];ue!==null&&!Cs(ue)&&(y?ue<=d:ue<d)?C=Q+1:I=Q}return I}return ro(o,d,ss,y)}function ro(o,d,y,C){var I=0,Q=o==null?0:o.length;if(Q===0)return 0;d=y(d);for(var ue=d!==d,ye=d===null,Pe=Cs(d),tt=d===n;I<Q;){var nt=Ol((I+Q)/2),ot=y(o[nt]),ft=ot!==n,jt=ot===null,Tt=ot===ot,Xt=Cs(ot);if(ue)var Mt=C||Tt;else tt?Mt=Tt&&(C||ft):ye?Mt=Tt&&ft&&(C||!jt):Pe?Mt=Tt&&ft&&!jt&&(C||!Xt):jt||Xt?Mt=!1:Mt=C?ot<=d:ot<d;Mt?I=nt+1:Q=nt}return Hr(Q,T)}function om(o,d){for(var y=-1,C=o.length,I=0,Q=[];++y<C;){var ue=o[y],ye=d?d(ue):ue;if(!y||!Na(ye,Pe)){var Pe=ye;Q[I++]=ue===0?0:ue}}return Q}function oh(o){return typeof o=="number"?o:Cs(o)?ne:+o}function Ii(o){if(typeof o=="string")return o;if(Gt(o))return gn(o,Ii)+"";if(Cs(o))return Pi?Pi.call(o):"";var d=o+"";return d=="0"&&1/o==-G?"-0":d}function _a(o,d,y){var C=-1,I=kl,Q=o.length,ue=!0,ye=[],Pe=ye;if(y)ue=!1,I=Ha;else if(Q>=i){var tt=d?null:yj(o);if(tt)return Ga(tt);ue=!1,I=Va,Pe=new v}else Pe=d?[]:ye;e:for(;++C<Q;){var nt=o[C],ot=d?d(nt):nt;if(nt=y||nt!==0?nt:0,ue&&ot===ot){for(var ft=Pe.length;ft--;)if(Pe[ft]===ot)continue e;d&&Pe.push(ot),ye.push(nt)}else I(Pe,ot,y)||(Pe!==ye&&Pe.push(ot),ye.push(nt))}return ye}function lh(o,d){return d=Xs(d,o),o=Mx(o,d),o==null||delete o[ao(Qs(d))]}function Kl(o,d,y,C){return Yl(o,d,y(Gn(o,d)),C)}function Jl(o,d,y,C){for(var I=o.length,Q=C?I:-1;(C?Q--:++Q<I)&&d(o[Q],Q,o););return y?Di(o,C?0:Q,C?Q+1:I):Di(o,C?Q+1:0,C?I:Q)}function fu(o,d){var y=o;return y instanceof Qt&&(y=y.value()),Hs(d,function(C,I){return I.func.apply(I.thisArg,Gi([C],I.args))},y)}function Es(o,d,y){var C=o.length;if(C<2)return C?_a(o[0]):[];for(var I=-1,Q=De(C);++I<C;)for(var ue=o[I],ye=-1;++ye<C;)ye!=I&&(Q[I]=Zt(Q[I]||ue,o[ye],d,y));return _a(nn(Q,1),d,y)}function Sa(o,d,y){for(var C=-1,I=o.length,Q=d.length,ue={};++C<I;){var ye=C<Q?d[C]:n;y(ue,o[C],ye)}return ue}function Js(o){return jr(o)?o:[]}function Xl(o){return typeof o=="function"?o:ss}function Xs(o,d){return Gt(o)?o:E1(o,d)?[o]:Rx(En(o))}var lm=Yt;function io(o,d,y){var C=o.length;return y=y===n?C:y,!d&&y>=C?o:Di(o,d,y)}var Cd=vd||function(o){return vr.clearTimeout(o)};function Ad(o,d){if(d)return o.slice();var y=o.length,C=nu?nu(y):new o.constructor(y);return o.copy(C),C}function x1(o){var d=new o.constructor(o.byteLength);return new va(d).set(new va(o)),d}function cj(o,d){var y=d?x1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.byteLength)}function uj(o){var d=new o.constructor(o.source,ws.exec(o));return d.lastIndex=o.lastIndex,d}function dj(o){return es?vn(es.call(o)):{}}function dx(o,d){var y=d?x1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.length)}function fx(o,d){if(o!==d){var y=o!==n,C=o===null,I=o===o,Q=Cs(o),ue=d!==n,ye=d===null,Pe=d===d,tt=Cs(d);if(!ye&&!tt&&!Q&&o>d||Q&&ue&&Pe&&!ye&&!tt||C&&ue&&Pe||!y&&Pe||!I)return 1;if(!C&&!Q&&!tt&&o<d||tt&&y&&I&&!C&&!Q||ye&&y&&I||!ue&&I||!Pe)return-1}return 0}function fj(o,d,y){for(var C=-1,I=o.criteria,Q=d.criteria,ue=I.length,ye=y.length;++C<ue;){var Pe=fx(I[C],Q[C]);if(Pe){if(C>=ye)return Pe;var tt=y[C];return Pe*(tt=="desc"?-1:1)}}return o.index-d.index}function hx(o,d,y,C){for(var I=-1,Q=o.length,ue=y.length,ye=-1,Pe=d.length,tt=Nr(Q-ue,0),nt=De(Pe+tt),ot=!C;++ye<Pe;)nt[ye]=d[ye];for(;++I<ue;)(ot||I<Q)&&(nt[y[I]]=o[I]);for(;tt--;)nt[ye++]=o[I++];return nt}function px(o,d,y,C){for(var I=-1,Q=o.length,ue=-1,ye=y.length,Pe=-1,tt=d.length,nt=Nr(Q-ye,0),ot=De(nt+tt),ft=!C;++I<nt;)ot[I]=o[I];for(var jt=I;++Pe<tt;)ot[jt+Pe]=d[Pe];for(;++ue<ye;)(ft||I<Q)&&(ot[jt+y[ue]]=o[I++]);return ot}function ns(o,d){var y=-1,C=o.length;for(d||(d=De(C));++y<C;)d[y]=o[y];return d}function so(o,d,y,C){var I=!y;y||(y={});for(var Q=-1,ue=d.length;++Q<ue;){var ye=d[Q],Pe=C?C(y[ye],o[ye],ye,y,o):n;Pe===n&&(Pe=o[ye]),I?Ye(y,ye,Pe):Be(y,ye,Pe)}return y}function hj(o,d){return so(o,k1(o),d)}function pj(o,d){return so(o,Ex(o),d)}function cm(o,d){return function(y,C){var I=Gt(y)?md:Ne,Q=d?d():{};return I(y,o,Lt(C,2),Q)}}function Ld(o){return Yt(function(d,y){var C=-1,I=y.length,Q=I>1?y[I-1]:n,ue=I>2?y[2]:n;for(Q=o.length>3&&typeof Q=="function"?(I--,Q):n,ue&&Oi(y[0],y[1],ue)&&(Q=I<3?n:Q,I=1),d=vn(d);++C<I;){var ye=y[C];ye&&o(d,ye,C,Q)}return d})}function mx(o,d){return function(y,C){if(y==null)return y;if(!rs(y))return o(y,C);for(var I=y.length,Q=d?I:-1,ue=vn(y);(d?Q--:++Q<I)&&C(ue[Q],Q,ue)!==!1;);return y}}function gx(o){return function(d,y,C){for(var I=-1,Q=vn(d),ue=C(d),ye=ue.length;ye--;){var Pe=ue[o?ye:++I];if(y(Q[Pe],Pe,Q)===!1)break}return d}}function mj(o,d,y){var C=d&E,I=ch(o);function Q(){var ue=this&&this!==vr&&this instanceof Q?I:o;return ue.apply(C?y:this,arguments)}return Q}function vx(o){return function(d){d=En(d);var y=_s(d)?mi(d):n,C=y?y[0]:d.charAt(0),I=y?io(y,1).join(""):d.slice(1);return C[o]()+I}}function Pd(o){return function(d){return Hs(mw(pw(d).replace(qs,"")),o,"")}}function ch(o){return function(){var d=arguments;switch(d.length){case 0:return new o;case 1:return new o(d[0]);case 2:return new o(d[0],d[1]);case 3:return new o(d[0],d[1],d[2]);case 4:return new o(d[0],d[1],d[2],d[3]);case 5:return new o(d[0],d[1],d[2],d[3],d[4]);case 6:return new o(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new o(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var y=zl(o.prototype),C=o.apply(y,d);return fr(C)?C:y}}function gj(o,d,y){var C=ch(o);function I(){for(var Q=arguments.length,ue=De(Q),ye=Q,Pe=Td(I);ye--;)ue[ye]=arguments[ye];var tt=Q<3&&ue[0]!==Pe&&ue[Q-1]!==Pe?[]:Vs(ue,Pe);if(Q-=tt.length,Q<y)return _x(o,d,um,I.placeholder,n,ue,tt,n,n,y-Q);var nt=this&&this!==vr&&this instanceof I?C:o;return Fr(nt,this,ue)}return I}function yx(o){return function(d,y,C){var I=vn(d);if(!rs(d)){var Q=Lt(y,3);d=Yr(d),y=function(ye){return Q(I[ye],ye,I)}}var ue=o(d,y,C);return ue>-1?I[Q?d[ue]:ue]:n}}function xx(o){return zo(function(d){var y=d.length,C=y,I=Ti.prototype.thru;for(o&&d.reverse();C--;){var Q=d[C];if(typeof Q!="function")throw new Dr(a);if(I&&!ue&&pm(Q)=="wrapper")var ue=new Ti([],!0)}for(C=ue?C:y;++C<y;){Q=d[C];var ye=pm(Q),Pe=ye=="wrapper"?N1(Q):n;Pe&&C1(Pe[0])&&Pe[1]==(W|A|K|$)&&!Pe[4].length&&Pe[9]==1?ue=ue[pm(Pe[0])].apply(ue,Pe[3]):ue=Q.length==1&&C1(Q)?ue[ye]():ue.thru(Q)}return function(){var tt=arguments,nt=tt[0];if(ue&&tt.length==1&&Gt(nt))return ue.plant(nt).value();for(var ot=0,ft=y?d[ot].apply(this,tt):nt;++ot<y;)ft=d[ot].call(this,ft);return ft}})}function um(o,d,y,C,I,Q,ue,ye,Pe,tt){var nt=d&W,ot=d&E,ft=d&b,jt=d&(A|O),Tt=d&oe,Xt=ft?n:ch(o);function Mt(){for(var sn=arguments.length,ln=De(sn),As=sn;As--;)ln[As]=arguments[As];if(jt)var Ri=Td(Mt),Ls=Al(ln,Ri);if(C&&(ln=hx(ln,C,I,jt)),Q&&(ln=px(ln,Q,ue,jt)),sn-=Ls,jt&&sn<tt){var kr=Vs(ln,Ri);return _x(o,d,um,Mt.placeholder,y,ln,kr,ye,Pe,tt-sn)}var ja=ot?y:this,Ho=ft?ja[o]:o;return sn=ln.length,ye?ln=Oj(ln,ye):Tt&&sn>1&&ln.reverse(),nt&&Pe<sn&&(ln.length=Pe),this&&this!==vr&&this instanceof Mt&&(Ho=Xt||ch(Ho)),Ho.apply(ja,ln)}return Mt}function wx(o,d){return function(y,C){return Za(y,o,d(C),{})}}function dm(o,d){return function(y,C){var I;if(y===n&&C===n)return d;if(y!==n&&(I=y),C!==n){if(I===n)return C;typeof y=="string"||typeof C=="string"?(y=Ii(y),C=Ii(C)):(y=oh(y),C=oh(C)),I=o(y,C)}return I}}function w1(o){return zo(function(d){return d=gn(d,Fn(Lt())),Yt(function(y){var C=this;return o(d,function(I){return Fr(I,C,y)})})})}function fm(o,d){d=d===n?" ":Ii(d);var y=d.length;if(y<2)return y?$o(d,o):d;var C=$o(d,Il(o/pa(d)));return _s(d)?io(mi(C),0,o).join(""):C.slice(0,o)}function vj(o,d,y,C){var I=d&E,Q=ch(o);function ue(){for(var ye=-1,Pe=arguments.length,tt=-1,nt=C.length,ot=De(nt+Pe),ft=this&&this!==vr&&this instanceof ue?Q:o;++tt<nt;)ot[tt]=C[tt];for(;Pe--;)ot[tt++]=arguments[++ye];return Fr(ft,I?y:this,ot)}return ue}function bx(o){return function(d,y,C){return C&&typeof C!="number"&&Oi(d,y,C)&&(y=C=n),d=Wo(d),y===n?(y=d,d=0):y=Wo(y),C=C===n?d<y?1:-1:Wo(C),ah(d,y,C,o)}}function hm(o){return function(d,y){return typeof d=="string"&&typeof y=="string"||(d=Zs(d),y=Zs(y)),o(d,y)}}function _x(o,d,y,C,I,Q,ue,ye,Pe,tt){var nt=d&A,ot=nt?ue:n,ft=nt?n:ue,jt=nt?Q:n,Tt=nt?n:Q;d|=nt?K:ie,d&=~(nt?ie:K),d&S||(d&=~(E|b));var Xt=[o,d,I,jt,ot,Tt,ft,ye,Pe,tt],Mt=y.apply(n,Xt);return C1(o)&&Dx(Mt,Xt),Mt.placeholder=C,Ix(Mt,o,d)}function b1(o){var d=Un[o];return function(y,C){if(y=Zs(y),C=C==null?0:Hr(Jt(C),292),C&&Vp(y)){var I=(En(y)+"e").split("e"),Q=d(I[0]+"e"+(+I[1]+C));return I=(En(Q)+"e").split("e"),+(I[0]+"e"+(+I[1]-C))}return d(y)}}var yj=Fl&&1/Ga(new Fl([,-0]))[1]==G?function(o){return new Fl(o)}:q1;function Sx(o){return function(d){var y=xi(d);return y==Ge?Po(d):y==at?gd(d):Mr(d,o(d))}}function Bo(o,d,y,C,I,Q,ue,ye){var Pe=d&b;if(!Pe&&typeof o!="function")throw new Dr(a);var tt=C?C.length:0;if(tt||(d&=~(K|ie),C=I=n),ue=ue===n?ue:Nr(Jt(ue),0),ye=ye===n?ye:Jt(ye),tt-=I?I.length:0,d&ie){var nt=C,ot=I;C=I=n}var ft=Pe?n:N1(o),jt=[o,d,y,C,I,nt,ot,Q,ue,ye];if(ft&&Mj(jt,ft),o=jt[0],d=jt[1],y=jt[2],C=jt[3],I=jt[4],ye=jt[9]=jt[9]===n?Pe?0:o.length:Nr(jt[9]-tt,0),!ye&&d&(A|O)&&(d&=~(A|O)),!d||d==E)var Tt=mj(o,d,y);else d==A||d==O?Tt=gj(o,d,ye):(d==K||d==(E|K))&&!I.length?Tt=vj(o,d,y,C):Tt=um.apply(n,jt);var Xt=ft?Ed:Dx;return Ix(Xt(Tt,jt),o,d)}function Nx(o,d,y,C){return o===n||Na(o,Ns[y])&&!on.call(C,y)?d:o}function jx(o,d,y,C,I,Q){return fr(o)&&fr(d)&&(Q.set(d,o),Vl(o,d,n,jx,Q),Q.delete(d)),o}function xj(o){return fh(o)?n:o}function kx(o,d,y,C,I,Q){var ue=y&N,ye=o.length,Pe=d.length;if(ye!=Pe&&!(ue&&Pe>ye))return!1;var tt=Q.get(o),nt=Q.get(d);if(tt&&nt)return tt==d&&nt==o;var ot=-1,ft=!0,jt=y&j?new v:n;for(Q.set(o,d),Q.set(d,o);++ot<ye;){var Tt=o[ot],Xt=d[ot];if(C)var Mt=ue?C(Xt,Tt,ot,d,o,Q):C(Tt,Xt,ot,o,d,Q);if(Mt!==n){if(Mt)continue;ft=!1;break}if(jt){if(!w(d,function(sn,ln){if(!Va(jt,ln)&&(Tt===sn||I(Tt,sn,y,C,Q)))return jt.push(ln)})){ft=!1;break}}else if(!(Tt===Xt||I(Tt,Xt,y,C,Q))){ft=!1;break}}return Q.delete(o),Q.delete(d),ft}function wj(o,d,y,C,I,Q,ue){switch(y){case Ke:if(o.byteLength!=d.byteLength||o.byteOffset!=d.byteOffset)return!1;o=o.buffer,d=d.buffer;case We:return!(o.byteLength!=d.byteLength||!Q(new va(o),new va(d)));case ke:case ee:case pe:return Na(+o,+d);case _e:return o.name==d.name&&o.message==d.message;case Qe:case Ae:return o==d+"";case Ge:var ye=Po;case at:var Pe=C&N;if(ye||(ye=Ga),o.size!=d.size&&!Pe)return!1;var tt=ue.get(o);if(tt)return tt==d;C|=j,ue.set(o,d);var nt=kx(ye(o),ye(d),C,I,Q,ue);return ue.delete(o),nt;case de:if(es)return es.call(o)==es.call(d)}return!1}function bj(o,d,y,C,I,Q){var ue=y&N,ye=_1(o),Pe=ye.length,tt=_1(d),nt=tt.length;if(Pe!=nt&&!ue)return!1;for(var ot=Pe;ot--;){var ft=ye[ot];if(!(ue?ft in d:on.call(d,ft)))return!1}var jt=Q.get(o),Tt=Q.get(d);if(jt&&Tt)return jt==d&&Tt==o;var Xt=!0;Q.set(o,d),Q.set(d,o);for(var Mt=ue;++ot<Pe;){ft=ye[ot];var sn=o[ft],ln=d[ft];if(C)var As=ue?C(ln,sn,ft,d,o,Q):C(sn,ln,ft,o,d,Q);if(!(As===n?sn===ln||I(sn,ln,y,C,Q):As)){Xt=!1;break}Mt||(Mt=ft=="constructor")}if(Xt&&!Mt){var Ri=o.constructor,Ls=d.constructor;Ri!=Ls&&"constructor"in o&&"constructor"in d&&!(typeof Ri=="function"&&Ri instanceof Ri&&typeof Ls=="function"&&Ls instanceof Ls)&&(Xt=!1)}return Q.delete(o),Q.delete(d),Xt}function zo(o){return L1(Tx(o,n,zx),o+"")}function _1(o){return Gr(o,Yr,k1)}function S1(o){return Gr(o,is,Ex)}var N1=yd?function(o){return yd.get(o)}:q1;function pm(o){for(var d=o.name+"",y=Bl[d],C=on.call(Bl,d)?y.length:0;C--;){var I=y[C],Q=I.func;if(Q==null||Q==o)return I.name}return d}function Td(o){var d=on.call(Y,"placeholder")?Y:o;return d.placeholder}function Lt(){var o=Y.iteratee||z1;return o=o===z1?nh:o,arguments.length?o(arguments[0],arguments[1]):o}function mm(o,d){var y=o.__data__;return Aj(d)?y[typeof d=="string"?"string":"hash"]:y.map}function j1(o){for(var d=Yr(o),y=d.length;y--;){var C=d[y],I=o[C];d[y]=[C,I,Lx(I)]}return d}function hu(o,d){var y=Br(o,d);return Fo(y)?y:n}function _j(o){var d=on.call(o,Ja),y=o[Ja];try{o[Ja]=n;var C=!0}catch{}var I=_n.call(o);return C&&(d?o[Ja]=y:delete o[Ja]),I}var k1=Rl?function(o){return o==null?[]:(o=vn(o),bs(Rl(o),function(d){return yi.call(o,d)}))}:W1,Ex=Rl?function(o){for(var d=[];o;)Gi(d,k1(o)),o=Dl(o);return d}:W1,xi=Dn;(su&&xi(new su(new ArrayBuffer(1)))!=Ke||ya&&xi(new ya)!=Ge||eh&&xi(eh.resolve())!=He||Fl&&xi(new Fl)!=at||$l&&xi(new $l)!=ge)&&(xi=function(o){var d=Dn(o),y=d==et?o.constructor:n,C=y?pu(y):"";if(C)switch(C){case s1:return Ke;case Xa:return Ge;case ks:return He;case xa:return at;case a1:return ge}return d});function Sj(o,d,y){for(var C=-1,I=y.length;++C<I;){var Q=y[C],ue=Q.size;switch(Q.type){case"drop":o+=ue;break;case"dropRight":d-=ue;break;case"take":d=Hr(d,o+ue);break;case"takeRight":o=Nr(o,d-ue);break}}return{start:o,end:d}}function Nj(o){var d=o.match(er);return d?d[1].split(Wi):[]}function Cx(o,d,y){d=Xs(d,o);for(var C=-1,I=d.length,Q=!1;++C<I;){var ue=ao(d[C]);if(!(Q=o!=null&&y(o,ue)))break;o=o[ue]}return Q||++C!=I?Q:(I=o==null?0:o.length,!!I&&_m(I)&&Uo(ue,I)&&(Gt(o)||mu(o)))}function jj(o){var d=o.length,y=new o.constructor(d);return d&&typeof o[0]=="string"&&on.call(o,"index")&&(y.index=o.index,y.input=o.input),y}function Ax(o){return typeof o.constructor=="function"&&!uh(o)?zl(Dl(o)):{}}function kj(o,d,y){var C=o.constructor;switch(d){case We:return x1(o);case ke:case ee:return new C(+o);case Ke:return cj(o,y);case Me:case rt:case qe:case At:case lt:case Bt:case St:case Ct:case mn:return dx(o,y);case Ge:return new C;case pe:case Ae:return new C(o);case Qe:return uj(o);case at:return new C;case de:return dj(o)}}function Ej(o,d){var y=d.length;if(!y)return o;var C=y-1;return d[C]=(y>1?"& ":"")+d[C],d=d.join(y>2?", ":" "),o.replace(Tn,`{
/* [wrapped with `+d+`] */
`)}function Cj(o){return Gt(o)||mu(o)||!!(iu&&o&&o[iu])}function Uo(o,d){var y=typeof o;return d=d??P,!!d&&(y=="number"||y!="symbol"&&dl.test(o))&&o>-1&&o%1==0&&o<d}function Oi(o,d,y){if(!fr(y))return!1;var C=typeof d;return(C=="number"?rs(y)&&Uo(d,y.length):C=="string"&&d in y)?Na(y[d],o):!1}function E1(o,d){if(Gt(o))return!1;var y=typeof o;return y=="number"||y=="symbol"||y=="boolean"||o==null||Cs(o)?!0:Rr.test(o)||!lr.test(o)||d!=null&&o in vn(d)}function Aj(o){var d=typeof o;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?o!=="__proto__":o===null}function C1(o){var d=pm(o),y=Y[d];if(typeof y!="function"||!(d in Qt.prototype))return!1;if(o===y)return!0;var C=N1(y);return!!C&&o===C[0]}function Lj(o){return!!Li&&Li in o}var Pj=Gs?qo:H1;function uh(o){var d=o&&o.constructor,y=typeof d=="function"&&d.prototype||Ns;return o===y}function Lx(o){return o===o&&!fr(o)}function Px(o,d){return function(y){return y==null?!1:y[o]===d&&(d!==n||o in vn(y))}}function Tj(o){var d=wm(o,function(C){return y.size===f&&y.clear(),C}),y=d.cache;return d}function Mj(o,d){var y=o[1],C=d[1],I=y|C,Q=I<(E|b|W),ue=C==W&&y==A||C==W&&y==$&&o[7].length<=d[8]||C==(W|$)&&d[7].length<=d[8]&&y==A;if(!(Q||ue))return o;C&E&&(o[2]=d[2],I|=y&E?0:S);var ye=d[3];if(ye){var Pe=o[3];o[3]=Pe?hx(Pe,ye,d[4]):ye,o[4]=Pe?Vs(o[3],p):d[4]}return ye=d[5],ye&&(Pe=o[5],o[5]=Pe?px(Pe,ye,d[6]):ye,o[6]=Pe?Vs(o[5],p):d[6]),ye=d[7],ye&&(o[7]=ye),C&W&&(o[8]=o[8]==null?d[8]:Hr(o[8],d[8])),o[9]==null&&(o[9]=d[9]),o[0]=d[0],o[1]=I,o}function Dj(o){var d=[];if(o!=null)for(var y in vn(o))d.push(y);return d}function Ij(o){return _n.call(o)}function Tx(o,d,y){return d=Nr(d===n?o.length-1:d,0),function(){for(var C=arguments,I=-1,Q=Nr(C.length-d,0),ue=De(Q);++I<Q;)ue[I]=C[d+I];I=-1;for(var ye=De(d+1);++I<d;)ye[I]=C[I];return ye[d]=y(ue),Fr(o,this,ye)}}function Mx(o,d){return d.length<2?o:Gn(o,Di(d,0,-1))}function Oj(o,d){for(var y=o.length,C=Hr(d.length,y),I=ns(o);C--;){var Q=d[C];o[C]=Uo(Q,y)?I[Q]:n}return o}function A1(o,d){if(!(d==="constructor"&&typeof o[d]=="function")&&d!="__proto__")return o[d]}var Dx=Ox(Ed),dh=Hp||function(o,d){return vr.setTimeout(o,d)},L1=Ox(no);function Ix(o,d,y){var C=d+"";return L1(o,Ej(C,Rj(Nj(C),y)))}function Ox(o){var d=0,y=0;return function(){var C=r1(),I=J-(C-y);if(y=C,I>0){if(++d>=q)return arguments[0]}else d=0;return o.apply(n,arguments)}}function gm(o,d){var y=-1,C=o.length,I=C-1;for(d=d===n?C:d;++y<d;){var Q=Gl(y,I),ue=o[Q];o[Q]=o[y],o[y]=ue}return o.length=d,o}var Rx=Tj(function(o){var d=[];return o.charCodeAt(0)===46&&d.push(""),o.replace(gt,function(y,C,I,Q){d.push(I?Q.replace(ys,"$1"):C||y)}),d});function ao(o){if(typeof o=="string"||Cs(o))return o;var d=o+"";return d=="0"&&1/o==-G?"-0":d}function pu(o){if(o!=null){try{return js.call(o)}catch{}try{return o+""}catch{}}return""}function Rj(o,d){return $r(Z,function(y){var C="_."+y[0];d&y[1]&&!kl(o,C)&&o.push(C)}),o.sort()}function Fx(o){if(o instanceof Qt)return o.clone();var d=new Ti(o.__wrapped__,o.__chain__);return d.__actions__=ns(o.__actions__),d.__index__=o.__index__,d.__values__=o.__values__,d}function Fj(o,d,y){(y?Oi(o,d,y):d===n)?d=1:d=Nr(Jt(d),0);var C=o==null?0:o.length;if(!C||d<1)return[];for(var I=0,Q=0,ue=De(Il(C/d));I<C;)ue[Q++]=Di(o,I,I+=d);return ue}function $j(o){for(var d=-1,y=o==null?0:o.length,C=0,I=[];++d<y;){var Q=o[d];Q&&(I[C++]=Q)}return I}function Bj(){var o=arguments.length;if(!o)return[];for(var d=De(o-1),y=arguments[0],C=o;C--;)d[C-1]=arguments[C];return Gi(Gt(y)?ns(y):[y],nn(d,1))}var zj=Yt(function(o,d){return jr(o)?Zt(o,nn(d,1,jr,!0)):[]}),Uj=Yt(function(o,d){var y=Qs(d);return jr(y)&&(y=n),jr(o)?Zt(o,nn(d,1,jr,!0),Lt(y,2)):[]}),qj=Yt(function(o,d){var y=Qs(d);return jr(y)&&(y=n),jr(o)?Zt(o,nn(d,1,jr,!0),n,y):[]});function Wj(o,d,y){var C=o==null?0:o.length;return C?(d=y||d===n?1:Jt(d),Di(o,d<0?0:d,C)):[]}function Hj(o,d,y){var C=o==null?0:o.length;return C?(d=y||d===n?1:Jt(d),d=C-d,Di(o,0,d<0?0:d)):[]}function Vj(o,d){return o&&o.length?Jl(o,Lt(d,3),!0,!0):[]}function Gj(o,d){return o&&o.length?Jl(o,Lt(d,3),!0):[]}function Yj(o,d,y,C){var I=o==null?0:o.length;return I?(y&&typeof y!="number"&&Oi(o,d,y)&&(y=0,C=I),yr(o,d,y,C)):[]}function $x(o,d,y){var C=o==null?0:o.length;if(!C)return-1;var I=y==null?0:Jt(y);return I<0&&(I=Nr(C+I,0)),ze(o,Lt(d,3),I)}function Bx(o,d,y){var C=o==null?0:o.length;if(!C)return-1;var I=C-1;return y!==n&&(I=Jt(y),I=y<0?Nr(C+I,0):Hr(I,C-1)),ze(o,Lt(d,3),I,!0)}function zx(o){var d=o==null?0:o.length;return d?nn(o,1):[]}function Kj(o){var d=o==null?0:o.length;return d?nn(o,G):[]}function Jj(o,d){var y=o==null?0:o.length;return y?(d=d===n?1:Jt(d),nn(o,d)):[]}function Xj(o){for(var d=-1,y=o==null?0:o.length,C={};++d<y;){var I=o[d];C[I[0]]=I[1]}return C}function Ux(o){return o&&o.length?o[0]:n}function Qj(o,d,y){var C=o==null?0:o.length;if(!C)return-1;var I=y==null?0:Jt(y);return I<0&&(I=Nr(C+I,0)),it(o,d,I)}function Zj(o){var d=o==null?0:o.length;return d?Di(o,0,-1):[]}var ek=Yt(function(o){var d=gn(o,Js);return d.length&&d[0]===o[0]?Qa(d):[]}),tk=Yt(function(o){var d=Qs(o),y=gn(o,Js);return d===Qs(y)?d=n:y.pop(),y.length&&y[0]===o[0]?Qa(y,Lt(d,2)):[]}),nk=Yt(function(o){var d=Qs(o),y=gn(o,Js);return d=typeof d=="function"?d:n,d&&y.pop(),y.length&&y[0]===o[0]?Qa(y,n,d):[]});function rk(o,d){return o==null?"":n1.call(o,d)}function Qs(o){var d=o==null?0:o.length;return d?o[d-1]:n}function ik(o,d,y){var C=o==null?0:o.length;if(!C)return-1;var I=C;return y!==n&&(I=Jt(y),I=I<0?Nr(C+I,0):Hr(I,C-1)),d===d?Ml(o,d,I):ze(o,kt,I,!0)}function sk(o,d){return o&&o.length?im(o,Jt(d)):n}var ak=Yt(qx);function qx(o,d){return o&&o.length&&d&&d.length?jd(o,d):o}function ok(o,d,y){return o&&o.length&&d&&d.length?jd(o,d,Lt(y,2)):o}function lk(o,d,y){return o&&o.length&&d&&d.length?jd(o,d,n,y):o}var ck=zo(function(o,d){var y=o==null?0:o.length,C=ht(o,d);return sh(o,gn(d,function(I){return Uo(I,y)?+I:I}).sort(fx)),C});function uk(o,d){var y=[];if(!(o&&o.length))return y;var C=-1,I=[],Q=o.length;for(d=Lt(d,3);++C<Q;){var ue=o[C];d(ue,C,o)&&(y.push(ue),I.push(C))}return sh(o,I),y}function P1(o){return o==null?o:Zf.call(o)}function dk(o,d,y){var C=o==null?0:o.length;return C?(y&&typeof y!="number"&&Oi(o,d,y)?(d=0,y=C):(d=d==null?0:Jt(d),y=y===n?C:Jt(y)),Di(o,d,y)):[]}function fk(o,d){return du(o,d)}function hk(o,d,y){return ro(o,d,Lt(y,2))}function pk(o,d){var y=o==null?0:o.length;if(y){var C=du(o,d);if(C<y&&Na(o[C],d))return C}return-1}function mk(o,d){return du(o,d,!0)}function gk(o,d,y){return ro(o,d,Lt(y,2),!0)}function vk(o,d){var y=o==null?0:o.length;if(y){var C=du(o,d,!0)-1;if(Na(o[C],d))return C}return-1}function yk(o){return o&&o.length?om(o):[]}function xk(o,d){return o&&o.length?om(o,Lt(d,2)):[]}function wk(o){var d=o==null?0:o.length;return d?Di(o,1,d):[]}function bk(o,d,y){return o&&o.length?(d=y||d===n?1:Jt(d),Di(o,0,d<0?0:d)):[]}function _k(o,d,y){var C=o==null?0:o.length;return C?(d=y||d===n?1:Jt(d),d=C-d,Di(o,d<0?0:d,C)):[]}function Sk(o,d){return o&&o.length?Jl(o,Lt(d,3),!1,!0):[]}function Nk(o,d){return o&&o.length?Jl(o,Lt(d,3)):[]}var jk=Yt(function(o){return _a(nn(o,1,jr,!0))}),kk=Yt(function(o){var d=Qs(o);return jr(d)&&(d=n),_a(nn(o,1,jr,!0),Lt(d,2))}),Ek=Yt(function(o){var d=Qs(o);return d=typeof d=="function"?d:n,_a(nn(o,1,jr,!0),n,d)});function Ck(o){return o&&o.length?_a(o):[]}function Ak(o,d){return o&&o.length?_a(o,Lt(d,2)):[]}function Lk(o,d){return d=typeof d=="function"?d:n,o&&o.length?_a(o,n,d):[]}function T1(o){if(!(o&&o.length))return[];var d=0;return o=bs(o,function(y){if(jr(y))return d=Nr(y.length,d),!0}),Tr(d,function(y){return gn(o,Rt(y))})}function Wx(o,d){if(!(o&&o.length))return[];var y=T1(o);return d==null?y:gn(y,function(C){return Fr(d,n,C)})}var Pk=Yt(function(o,d){return jr(o)?Zt(o,d):[]}),Tk=Yt(function(o){return Es(bs(o,jr))}),Mk=Yt(function(o){var d=Qs(o);return jr(d)&&(d=n),Es(bs(o,jr),Lt(d,2))}),Dk=Yt(function(o){var d=Qs(o);return d=typeof d=="function"?d:n,Es(bs(o,jr),n,d)}),Ik=Yt(T1);function Ok(o,d){return Sa(o||[],d||[],Be)}function Rk(o,d){return Sa(o||[],d||[],Yl)}var Fk=Yt(function(o){var d=o.length,y=d>1?o[d-1]:n;return y=typeof y=="function"?(o.pop(),y):n,Wx(o,y)});function Hx(o){var d=Y(o);return d.__chain__=!0,d}function $k(o,d){return d(o),o}function vm(o,d){return d(o)}var Bk=zo(function(o){var d=o.length,y=d?o[0]:0,C=this.__wrapped__,I=function(Q){return ht(Q,o)};return d>1||this.__actions__.length||!(C instanceof Qt)||!Uo(y)?this.thru(I):(C=C.slice(y,+y+(d?1:0)),C.__actions__.push({func:vm,args:[I],thisArg:n}),new Ti(C,this.__chain__).thru(function(Q){return d&&!Q.length&&Q.push(n),Q}))});function zk(){return Hx(this)}function Uk(){return new Ti(this.value(),this.__chain__)}function qk(){this.__values__===n&&(this.__values__=sw(this.value()));var o=this.__index__>=this.__values__.length,d=o?n:this.__values__[this.__index__++];return{done:o,value:d}}function Wk(){return this}function Hk(o){for(var d,y=this;y instanceof lu;){var C=Fx(y);C.__index__=0,C.__values__=n,d?I.__wrapped__=C:d=C;var I=C;y=y.__wrapped__}return I.__wrapped__=o,d}function Vk(){var o=this.__wrapped__;if(o instanceof Qt){var d=o;return this.__actions__.length&&(d=new Qt(this)),d=d.reverse(),d.__actions__.push({func:vm,args:[P1],thisArg:n}),new Ti(d,this.__chain__)}return this.thru(P1)}function Gk(){return fu(this.__wrapped__,this.__actions__)}var Yk=cm(function(o,d,y){on.call(o,y)?++o[y]:Ye(o,y,1)});function Kk(o,d,y){var C=Gt(o)?jl:kn;return y&&Oi(o,d,y)&&(d=n),C(o,Lt(d,3))}function Jk(o,d){var y=Gt(o)?bs:ai;return y(o,Lt(d,3))}var Xk=yx($x),Qk=yx(Bx);function Zk(o,d){return nn(ym(o,d),1)}function eE(o,d){return nn(ym(o,d),G)}function tE(o,d,y){return y=y===n?1:Jt(y),nn(ym(o,d),y)}function Vx(o,d){var y=Gt(o)?$r:Ut;return y(o,Lt(d,3))}function Gx(o,d){var y=Gt(o)?Qc:jn;return y(o,Lt(d,3))}var nE=cm(function(o,d,y){on.call(o,y)?o[y].push(d):Ye(o,y,[d])});function rE(o,d,y,C){o=rs(o)?o:Dd(o),y=y&&!C?Jt(y):0;var I=o.length;return y<0&&(y=Nr(I+y,0)),Sm(o)?y<=I&&o.indexOf(d,y)>-1:!!I&&it(o,d,y)>-1}var iE=Yt(function(o,d,y){var C=-1,I=typeof d=="function",Q=rs(o)?De(o.length):[];return Ut(o,function(ue){Q[++C]=I?Fr(d,ue,y):In(ue,d,y)}),Q}),sE=cm(function(o,d,y){Ye(o,y,d)});function ym(o,d){var y=Gt(o)?gn:Hl;return y(o,Lt(d,3))}function aE(o,d,y,C){return o==null?[]:(Gt(d)||(d=d==null?[]:[d]),y=C?n:y,Gt(y)||(y=y==null?[]:[y]),sm(o,d,y))}var oE=cm(function(o,d,y){o[y?0:1].push(d)},function(){return[[],[]]});function lE(o,d,y){var C=Gt(o)?Hs:zn,I=arguments.length<3;return C(o,Lt(d,4),y,I,Ut)}function cE(o,d,y){var C=Gt(o)?Zc:zn,I=arguments.length<3;return C(o,Lt(d,4),y,I,jn)}function uE(o,d){var y=Gt(o)?bs:ai;return y(o,bm(Lt(d,3)))}function dE(o){var d=Gt(o)?Ie:v1;return d(o)}function fE(o,d,y){(y?Oi(o,d,y):d===n)?d=1:d=Jt(d);var C=Gt(o)?Oe:kd;return C(o,d)}function hE(o){var d=Gt(o)?Ce:am;return d(o)}function pE(o){if(o==null)return 0;if(rs(o))return Sm(o)?pa(o):o.length;var d=xi(o);return d==Ge||d==at?o.size:ql(o).length}function mE(o,d,y){var C=Gt(o)?w:y1;return y&&Oi(o,d,y)&&(d=n),C(o,Lt(d,3))}var gE=Yt(function(o,d){if(o==null)return[];var y=d.length;return y>1&&Oi(o,d[0],d[1])?d=[]:y>2&&Oi(d[0],d[1],d[2])&&(d=[d[0]]),sm(o,nn(d,1),[])}),xm=Xf||function(){return vr.Date.now()};function vE(o,d){if(typeof d!="function")throw new Dr(a);return o=Jt(o),function(){if(--o<1)return d.apply(this,arguments)}}function Yx(o,d,y){return d=y?n:d,d=o&&d==null?o.length:d,Bo(o,W,n,n,n,n,d)}function Kx(o,d){var y;if(typeof d!="function")throw new Dr(a);return o=Jt(o),function(){return--o>0&&(y=d.apply(this,arguments)),o<=1&&(d=n),y}}var M1=Yt(function(o,d,y){var C=E;if(y.length){var I=Vs(y,Td(M1));C|=K}return Bo(o,C,d,y,I)}),Jx=Yt(function(o,d,y){var C=E|b;if(y.length){var I=Vs(y,Td(Jx));C|=K}return Bo(d,C,o,y,I)});function Xx(o,d,y){d=y?n:d;var C=Bo(o,A,n,n,n,n,n,d);return C.placeholder=Xx.placeholder,C}function Qx(o,d,y){d=y?n:d;var C=Bo(o,O,n,n,n,n,n,d);return C.placeholder=Qx.placeholder,C}function Zx(o,d,y){var C,I,Q,ue,ye,Pe,tt=0,nt=!1,ot=!1,ft=!0;if(typeof o!="function")throw new Dr(a);d=Zs(d)||0,fr(y)&&(nt=!!y.leading,ot="maxWait"in y,Q=ot?Nr(Zs(y.maxWait)||0,d):Q,ft="trailing"in y?!!y.trailing:ft);function jt(kr){var ja=C,Ho=I;return C=I=n,tt=kr,ue=o.apply(Ho,ja),ue}function Tt(kr){return tt=kr,ye=dh(sn,d),nt?jt(kr):ue}function Xt(kr){var ja=kr-Pe,Ho=kr-tt,yw=d-ja;return ot?Hr(yw,Q-Ho):yw}function Mt(kr){var ja=kr-Pe,Ho=kr-tt;return Pe===n||ja>=d||ja<0||ot&&Ho>=Q}function sn(){var kr=xm();if(Mt(kr))return ln(kr);ye=dh(sn,Xt(kr))}function ln(kr){return ye=n,ft&&C?jt(kr):(C=I=n,ue)}function As(){ye!==n&&Cd(ye),tt=0,C=Pe=I=ye=n}function Ri(){return ye===n?ue:ln(xm())}function Ls(){var kr=xm(),ja=Mt(kr);if(C=arguments,I=this,Pe=kr,ja){if(ye===n)return Tt(Pe);if(ot)return Cd(ye),ye=dh(sn,d),jt(Pe)}return ye===n&&(ye=dh(sn,d)),ue}return Ls.cancel=As,Ls.flush=Ri,Ls}var yE=Yt(function(o,d){return yn(o,1,d)}),xE=Yt(function(o,d,y){return yn(o,Zs(d)||0,y)});function wE(o){return Bo(o,oe)}function wm(o,d){if(typeof o!="function"||d!=null&&typeof d!="function")throw new Dr(a);var y=function(){var C=arguments,I=d?d.apply(this,C):C[0],Q=y.cache;if(Q.has(I))return Q.get(I);var ue=o.apply(this,C);return y.cache=Q.set(I,ue)||Q,ue};return y.cache=new(wm.Cache||Ks),y}wm.Cache=Ks;function bm(o){if(typeof o!="function")throw new Dr(a);return function(){var d=arguments;switch(d.length){case 0:return!o.call(this);case 1:return!o.call(this,d[0]);case 2:return!o.call(this,d[0],d[1]);case 3:return!o.call(this,d[0],d[1],d[2])}return!o.apply(this,d)}}function bE(o){return Kx(2,o)}var _E=lm(function(o,d){d=d.length==1&&Gt(d[0])?gn(d[0],Fn(Lt())):gn(nn(d,1),Fn(Lt()));var y=d.length;return Yt(function(C){for(var I=-1,Q=Hr(C.length,y);++I<Q;)C[I]=d[I].call(this,C[I]);return Fr(o,this,C)})}),D1=Yt(function(o,d){var y=Vs(d,Td(D1));return Bo(o,K,n,d,y)}),ew=Yt(function(o,d){var y=Vs(d,Td(ew));return Bo(o,ie,n,d,y)}),SE=zo(function(o,d){return Bo(o,$,n,n,n,d)});function NE(o,d){if(typeof o!="function")throw new Dr(a);return d=d===n?d:Jt(d),Yt(o,d)}function jE(o,d){if(typeof o!="function")throw new Dr(a);return d=d==null?0:Nr(Jt(d),0),Yt(function(y){var C=y[d],I=io(y,0,d);return C&&Gi(I,C),Fr(o,this,I)})}function kE(o,d,y){var C=!0,I=!0;if(typeof o!="function")throw new Dr(a);return fr(y)&&(C="leading"in y?!!y.leading:C,I="trailing"in y?!!y.trailing:I),Zx(o,d,{leading:C,maxWait:d,trailing:I})}function EE(o){return Yx(o,1)}function CE(o,d){return D1(Xl(d),o)}function AE(){if(!arguments.length)return[];var o=arguments[0];return Gt(o)?o:[o]}function LE(o){return wt(o,g)}function PE(o,d){return d=typeof d=="function"?d:n,wt(o,g,d)}function TE(o){return wt(o,m|g)}function ME(o,d){return d=typeof d=="function"?d:n,wt(o,m|g,d)}function DE(o,d){return d==null||fn(o,d,Yr(d))}function Na(o,d){return o===d||o!==o&&d!==d}var IE=hm(ts),OE=hm(function(o,d){return o>=d}),mu=bd(function(){return arguments}())?bd:function(o){return xr(o)&&on.call(o,"callee")&&!yi.call(o,"callee")},Gt=De.isArray,RE=Sl?Fn(Sl):Zp;function rs(o){return o!=null&&_m(o.length)&&!qo(o)}function jr(o){return xr(o)&&rs(o)}function FE(o){return o===!0||o===!1||xr(o)&&Dn(o)==ke}var Ql=Qf||H1,$E=Wa?Fn(Wa):em;function BE(o){return xr(o)&&o.nodeType===1&&!fh(o)}function zE(o){if(o==null)return!0;if(rs(o)&&(Gt(o)||typeof o=="string"||typeof o.splice=="function"||Ql(o)||Md(o)||mu(o)))return!o.length;var d=xi(o);if(d==Ge||d==at)return!o.size;if(uh(o))return!ql(o).length;for(var y in o)if(on.call(o,y))return!1;return!0}function UE(o,d){return eo(o,d)}function qE(o,d,y){y=typeof y=="function"?y:n;var C=y?y(o,d):n;return C===n?eo(o,d,n,y):!!C}function I1(o){if(!xr(o))return!1;var d=Dn(o);return d==_e||d==Se||typeof o.message=="string"&&typeof o.name=="string"&&!fh(o)}function WE(o){return typeof o=="number"&&Vp(o)}function qo(o){if(!fr(o))return!1;var d=Dn(o);return d==Re||d==Fe||d==je||d==Ve}function tw(o){return typeof o=="number"&&o==Jt(o)}function _m(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=P}function fr(o){var d=typeof o;return o!=null&&(d=="object"||d=="function")}function xr(o){return o!=null&&typeof o=="object"}var nw=hd?Fn(hd):_d;function HE(o,d){return o===d||Mi(o,d,j1(d))}function VE(o,d,y){return y=typeof y=="function"?y:n,Mi(o,d,j1(d),y)}function GE(o){return rw(o)&&o!=+o}function YE(o){if(Pj(o))throw new Nt(s);return Fo(o)}function KE(o){return o===null}function JE(o){return o==null}function rw(o){return typeof o=="number"||xr(o)&&Dn(o)==pe}function fh(o){if(!xr(o)||Dn(o)!=et)return!1;var d=Dl(o);if(d===null)return!0;var y=on.call(d,"constructor")&&d.constructor;return typeof y=="function"&&y instanceof y&&js.call(y)==Mn}var O1=Lo?Fn(Lo):Ul;function XE(o){return tw(o)&&o>=-P&&o<=P}var iw=pd?Fn(pd):tm;function Sm(o){return typeof o=="string"||!Gt(o)&&xr(o)&&Dn(o)==Ae}function Cs(o){return typeof o=="symbol"||xr(o)&&Dn(o)==de}var Md=Nl?Fn(Nl):Sd;function QE(o){return o===n}function ZE(o){return xr(o)&&xi(o)==ge}function eC(o){return xr(o)&&Dn(o)==$e}var tC=hm(Wl),nC=hm(function(o,d){return o<=d});function sw(o){if(!o)return[];if(rs(o))return Sm(o)?mi(o):ns(o);if(Ka&&o[Ka])return Tl(o[Ka]());var d=xi(o),y=d==Ge?Po:d==at?Ga:Dd;return y(o)}function Wo(o){if(!o)return o===0?o:0;if(o=Zs(o),o===G||o===-G){var d=o<0?-1:1;return d*F}return o===o?o:0}function Jt(o){var d=Wo(o),y=d%1;return d===d?y?d-y:d:0}function aw(o){return o?ut(Jt(o),0,be):0}function Zs(o){if(typeof o=="number")return o;if(Cs(o))return ne;if(fr(o)){var d=typeof o.valueOf=="function"?o.valueOf():o;o=fr(d)?d+"":d}if(typeof o!="string")return o===0?o:+o;o=Yi(o);var y=Bs.test(o);return y||ul.test(o)?ud(o.slice(2),y?2:8):Hi.test(o)?ne:+o}function ow(o){return so(o,is(o))}function rC(o){return o?ut(Jt(o),-P,P):o===0?o:0}function En(o){return o==null?"":Ii(o)}var iC=Ld(function(o,d){if(uh(d)||rs(d)){so(d,Yr(d),o);return}for(var y in d)on.call(d,y)&&Be(o,y,d[y])}),lw=Ld(function(o,d){so(d,is(d),o)}),Nm=Ld(function(o,d,y,C){so(d,is(d),o,C)}),sC=Ld(function(o,d,y,C){so(d,Yr(d),o,C)}),aC=zo(ht);function oC(o,d){var y=zl(o);return d==null?y:Je(y,d)}var lC=Yt(function(o,d){o=vn(o);var y=-1,C=d.length,I=C>2?d[2]:n;for(I&&Oi(d[0],d[1],I)&&(C=1);++y<C;)for(var Q=d[y],ue=is(Q),ye=-1,Pe=ue.length;++ye<Pe;){var tt=ue[ye],nt=o[tt];(nt===n||Na(nt,Ns[tt])&&!on.call(o,tt))&&(o[tt]=Q[tt])}return o}),cC=Yt(function(o){return o.push(n,jx),Fr(cw,n,o)});function uC(o,d){return Te(o,Lt(d,3),sr)}function dC(o,d){return Te(o,Lt(d,3),oi)}function fC(o,d){return o==null?o:Vr(o,Lt(d,3),is)}function hC(o,d){return o==null?o:xn(o,Lt(d,3),is)}function pC(o,d){return o&&sr(o,Lt(d,3))}function mC(o,d){return o&&oi(o,Lt(d,3))}function gC(o){return o==null?[]:dr(o,Yr(o))}function vC(o){return o==null?[]:dr(o,is(o))}function R1(o,d,y){var C=o==null?n:Gn(o,d);return C===n?y:C}function yC(o,d){return o!=null&&Cx(o,d,Ir)}function F1(o,d){return o!=null&&Cx(o,d,ba)}var xC=wx(function(o,d,y){d!=null&&typeof d.toString!="function"&&(d=_n.call(d)),o[d]=y},B1(ss)),wC=wx(function(o,d,y){d!=null&&typeof d.toString!="function"&&(d=_n.call(d)),on.call(o,d)?o[d].push(y):o[d]=[y]},Lt),bC=Yt(In);function Yr(o){return rs(o)?we(o):ql(o)}function is(o){return rs(o)?we(o,!0):rh(o)}function _C(o,d){var y={};return d=Lt(d,3),sr(o,function(C,I,Q){Ye(y,d(C,I,Q),C)}),y}function SC(o,d){var y={};return d=Lt(d,3),sr(o,function(C,I,Q){Ye(y,I,d(C,I,Q))}),y}var NC=Ld(function(o,d,y){Vl(o,d,y)}),cw=Ld(function(o,d,y,C){Vl(o,d,y,C)}),jC=zo(function(o,d){var y={};if(o==null)return y;var C=!1;d=gn(d,function(Q){return Q=Xs(Q,o),C||(C=Q.length>1),Q}),so(o,S1(o),y),C&&(y=wt(y,m|x|g,xj));for(var I=d.length;I--;)lh(y,d[I]);return y});function kC(o,d){return uw(o,bm(Lt(d)))}var EC=zo(function(o,d){return o==null?{}:g1(o,d)});function uw(o,d){if(o==null)return{};var y=gn(S1(o),function(C){return[C]});return d=Lt(d),ih(o,y,function(C,I){return d(C,I[0])})}function CC(o,d,y){d=Xs(d,o);var C=-1,I=d.length;for(I||(I=1,o=n);++C<I;){var Q=o==null?n:o[ao(d[C])];Q===n&&(C=I,Q=y),o=qo(Q)?Q.call(o):Q}return o}function AC(o,d,y){return o==null?o:Yl(o,d,y)}function LC(o,d,y,C){return C=typeof C=="function"?C:n,o==null?o:Yl(o,d,y,C)}var dw=Sx(Yr),fw=Sx(is);function PC(o,d,y){var C=Gt(o),I=C||Ql(o)||Md(o);if(d=Lt(d,4),y==null){var Q=o&&o.constructor;I?y=C?new Q:[]:fr(o)?y=qo(Q)?zl(Dl(o)):{}:y={}}return(I?$r:sr)(o,function(ue,ye,Pe){return d(y,ue,ye,Pe)}),y}function TC(o,d){return o==null?!0:lh(o,d)}function MC(o,d,y){return o==null?o:Kl(o,d,Xl(y))}function DC(o,d,y,C){return C=typeof C=="function"?C:n,o==null?o:Kl(o,d,Xl(y),C)}function Dd(o){return o==null?[]:Ki(o,Yr(o))}function IC(o){return o==null?[]:Ki(o,is(o))}function OC(o,d,y){return y===n&&(y=d,d=n),y!==n&&(y=Zs(y),y=y===y?y:0),d!==n&&(d=Zs(d),d=d===d?d:0),ut(Zs(o),d,y)}function RC(o,d,y){return d=Wo(d),y===n?(y=d,d=0):y=Wo(y),o=Zs(o),Ro(o,d,y)}function FC(o,d,y){if(y&&typeof y!="boolean"&&Oi(o,d,y)&&(d=y=n),y===n&&(typeof d=="boolean"?(y=d,d=n):typeof o=="boolean"&&(y=o,o=n)),o===n&&d===n?(o=0,d=1):(o=Wo(o),d===n?(d=o,o=0):d=Wo(d)),o>d){var C=o;o=d,d=C}if(y||o%1||d%1){var I=Yp();return Hr(o+I*(d-o+_l("1e-"+((I+"").length-1))),d)}return Gl(o,d)}var $C=Pd(function(o,d,y){return d=d.toLowerCase(),o+(y?hw(d):d)});function hw(o){return $1(En(o).toLowerCase())}function pw(o){return o=En(o),o&&o.replace(fl,eu).replace(cd,"")}function BC(o,d,y){o=En(o),d=Ii(d);var C=o.length;y=y===n?C:ut(Jt(y),0,C);var I=y;return y-=d.length,y>=0&&o.slice(y,I)==d}function zC(o){return o=En(o),o&&_t.test(o)?o.replace(un,tu):o}function UC(o){return o=En(o),o&&cr.test(o)?o.replace(Zn,"\\$&"):o}var qC=Pd(function(o,d,y){return o+(y?"-":"")+d.toLowerCase()}),WC=Pd(function(o,d,y){return o+(y?" ":"")+d.toLowerCase()}),HC=vx("toLowerCase");function VC(o,d,y){o=En(o),d=Jt(d);var C=d?pa(o):0;if(!d||C>=d)return o;var I=(d-C)/2;return fm(Ol(I),y)+o+fm(Il(I),y)}function GC(o,d,y){o=En(o),d=Jt(d);var C=d?pa(o):0;return d&&C<d?o+fm(d-C,y):o}function YC(o,d,y){o=En(o),d=Jt(d);var C=d?pa(o):0;return d&&C<d?fm(d-C,y)+o:o}function KC(o,d,y){return y||d==null?d=0:d&&(d=+d),i1(En(o).replace(Pn,""),d||0)}function JC(o,d,y){return(y?Oi(o,d,y):d===n)?d=1:d=Jt(d),$o(En(o),d)}function XC(){var o=arguments,d=En(o[0]);return o.length<3?d:d.replace(o[1],o[2])}var QC=Pd(function(o,d,y){return o+(y?"_":"")+d.toLowerCase()});function ZC(o,d,y){return y&&typeof y!="number"&&Oi(o,d,y)&&(d=y=n),y=y===n?be:y>>>0,y?(o=En(o),o&&(typeof d=="string"||d!=null&&!O1(d))&&(d=Ii(d),!d&&_s(o))?io(mi(o),0,y):o.split(d,y)):[]}var e8=Pd(function(o,d,y){return o+(y?" ":"")+$1(d)});function t8(o,d,y){return o=En(o),y=y==null?0:ut(Jt(y),0,o.length),d=Ii(d),o.slice(y,y+d.length)==d}function n8(o,d,y){var C=Y.templateSettings;y&&Oi(o,d,y)&&(d=n),o=En(o),d=Nm({},d,C,Nx);var I=Nm({},d.imports,C.imports,Nx),Q=Yr(I),ue=Ki(I,Q),ye,Pe,tt=0,nt=d.interpolate||ha,ot="__p += '",ft=Mo((d.escape||ha).source+"|"+nt.source+"|"+(nt===rn?xs:ha).source+"|"+(d.evaluate||ha).source+"|$","g"),jt="//# sourceURL="+(on.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kf+"]")+`
`;o.replace(ft,function(Mt,sn,ln,As,Ri,Ls){return ln||(ln=As),ot+=o.slice(tt,Ls).replace(Qu,Ll),sn&&(ye=!0,ot+=`' +
__e(`+sn+`) +
'`),Ri&&(Pe=!0,ot+=`';
`+Ri+`;
__p += '`),ln&&(ot+=`' +
((__t = (`+ln+`)) == null ? '' : __t) +
'`),tt=Ls+Mt.length,Mt}),ot+=`';
`;var Tt=on.call(d,"variable")&&d.variable;if(!Tt)ot=`with (obj) {
`+ot+`
}
`;else if(vs.test(Tt))throw new Nt(l);ot=(Pe?ot.replace(Pt,""):ot).replace(Qn,"$1").replace(Et,"$1;"),ot="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var Xt=gw(function(){return Ht(Q,jt+"return "+ot).apply(n,ue)});if(Xt.source=ot,I1(Xt))throw Xt;return Xt}function r8(o){return En(o).toLowerCase()}function i8(o){return En(o).toUpperCase()}function s8(o,d,y){if(o=En(o),o&&(y||d===n))return Yi(o);if(!o||!(d=Ii(d)))return o;var C=mi(o),I=mi(d),Q=El(C,I),ue=Cl(C,I)+1;return io(C,Q,ue).join("")}function a8(o,d,y){if(o=En(o),o&&(y||d===n))return o.slice(0,ma(o)+1);if(!o||!(d=Ii(d)))return o;var C=mi(o),I=Cl(C,mi(d))+1;return io(C,0,I).join("")}function o8(o,d,y){if(o=En(o),o&&(y||d===n))return o.replace(Pn,"");if(!o||!(d=Ii(d)))return o;var C=mi(o),I=El(C,mi(d));return io(C,I).join("")}function l8(o,d){var y=le,C=R;if(fr(d)){var I="separator"in d?d.separator:I;y="length"in d?Jt(d.length):y,C="omission"in d?Ii(d.omission):C}o=En(o);var Q=o.length;if(_s(o)){var ue=mi(o);Q=ue.length}if(y>=Q)return o;var ye=y-pa(C);if(ye<1)return C;var Pe=ue?io(ue,0,ye).join(""):o.slice(0,ye);if(I===n)return Pe+C;if(ue&&(ye+=Pe.length-ye),O1(I)){if(o.slice(ye).search(I)){var tt,nt=Pe;for(I.global||(I=Mo(I.source,En(ws.exec(I))+"g")),I.lastIndex=0;tt=I.exec(nt);)var ot=tt.index;Pe=Pe.slice(0,ot===n?ye:ot)}}else if(o.indexOf(Ii(I),ye)!=ye){var ft=Pe.lastIndexOf(I);ft>-1&&(Pe=Pe.slice(0,ft))}return Pe+C}function c8(o){return o=En(o),o&&qt.test(o)?o.replace(or,To):o}var u8=Pd(function(o,d,y){return o+(y?" ":"")+d.toUpperCase()}),$1=vx("toUpperCase");function mw(o,d,y){return o=En(o),d=y?n:d,d===n?Pl(o)?Ya(o):ve(o):o.match(d)||[]}var gw=Yt(function(o,d){try{return Fr(o,n,d)}catch(y){return I1(y)?y:new Nt(y)}}),d8=zo(function(o,d){return $r(d,function(y){y=ao(y),Ye(o,y,M1(o[y],o))}),o});function f8(o){var d=o==null?0:o.length,y=Lt();return o=d?gn(o,function(C){if(typeof C[1]!="function")throw new Dr(a);return[y(C[0]),C[1]]}):[],Yt(function(C){for(var I=-1;++I<d;){var Q=o[I];if(Fr(Q[0],this,C))return Fr(Q[1],this,C)}})}function h8(o){return dt(wt(o,m))}function B1(o){return function(){return o}}function p8(o,d){return o==null||o!==o?d:o}var m8=xx(),g8=xx(!0);function ss(o){return o}function z1(o){return nh(typeof o=="function"?o:wt(o,m))}function v8(o){return nm(wt(o,m))}function y8(o,d){return rm(o,wt(d,m))}var x8=Yt(function(o,d){return function(y){return In(y,o,d)}}),w8=Yt(function(o,d){return function(y){return In(o,y,d)}});function U1(o,d,y){var C=Yr(d),I=dr(d,C);y==null&&!(fr(d)&&(I.length||!C.length))&&(y=d,d=o,o=this,I=dr(d,Yr(d)));var Q=!(fr(y)&&"chain"in y)||!!y.chain,ue=qo(o);return $r(I,function(ye){var Pe=d[ye];o[ye]=Pe,ue&&(o.prototype[ye]=function(){var tt=this.__chain__;if(Q||tt){var nt=o(this.__wrapped__),ot=nt.__actions__=ns(this.__actions__);return ot.push({func:Pe,args:arguments,thisArg:o}),nt.__chain__=tt,nt}return Pe.apply(o,Gi([this.value()],arguments))})}),o}function b8(){return vr._===this&&(vr._=ur),this}function q1(){}function _8(o){return o=Jt(o),Yt(function(d){return im(d,o)})}var S8=w1(gn),N8=w1(jl),j8=w1(w);function vw(o){return E1(o)?Rt(ao(o)):Nd(o)}function k8(o){return function(d){return o==null?n:Gn(o,d)}}var E8=bx(),C8=bx(!0);function W1(){return[]}function H1(){return!1}function A8(){return{}}function L8(){return""}function P8(){return!0}function T8(o,d){if(o=Jt(o),o<1||o>P)return[];var y=be,C=Hr(o,be);d=Lt(d),o-=be;for(var I=Tr(C,d);++y<o;)d(y);return I}function M8(o){return Gt(o)?gn(o,ao):Cs(o)?[o]:ns(Rx(En(o)))}function D8(o){var d=++Xi;return En(o)+d}var I8=dm(function(o,d){return o+d},0),O8=b1("ceil"),R8=dm(function(o,d){return o/d},1),F8=b1("floor");function $8(o){return o&&o.length?$t(o,ss,ts):n}function B8(o,d){return o&&o.length?$t(o,Lt(d,2),ts):n}function z8(o){return zt(o,ss)}function U8(o,d){return zt(o,Lt(d,2))}function q8(o){return o&&o.length?$t(o,ss,Wl):n}function W8(o,d){return o&&o.length?$t(o,Lt(d,2),Wl):n}var H8=dm(function(o,d){return o*d},1),V8=b1("round"),G8=dm(function(o,d){return o-d},0);function Y8(o){return o&&o.length?ir(o,ss):0}function K8(o,d){return o&&o.length?ir(o,Lt(d,2)):0}return Y.after=vE,Y.ary=Yx,Y.assign=iC,Y.assignIn=lw,Y.assignInWith=Nm,Y.assignWith=sC,Y.at=aC,Y.before=Kx,Y.bind=M1,Y.bindAll=d8,Y.bindKey=Jx,Y.castArray=AE,Y.chain=Hx,Y.chunk=Fj,Y.compact=$j,Y.concat=Bj,Y.cond=f8,Y.conforms=h8,Y.constant=B1,Y.countBy=Yk,Y.create=oC,Y.curry=Xx,Y.curryRight=Qx,Y.debounce=Zx,Y.defaults=lC,Y.defaultsDeep=cC,Y.defer=yE,Y.delay=xE,Y.difference=zj,Y.differenceBy=Uj,Y.differenceWith=qj,Y.drop=Wj,Y.dropRight=Hj,Y.dropRightWhile=Vj,Y.dropWhile=Gj,Y.fill=Yj,Y.filter=Jk,Y.flatMap=Zk,Y.flatMapDeep=eE,Y.flatMapDepth=tE,Y.flatten=zx,Y.flattenDeep=Kj,Y.flattenDepth=Jj,Y.flip=wE,Y.flow=m8,Y.flowRight=g8,Y.fromPairs=Xj,Y.functions=gC,Y.functionsIn=vC,Y.groupBy=nE,Y.initial=Zj,Y.intersection=ek,Y.intersectionBy=tk,Y.intersectionWith=nk,Y.invert=xC,Y.invertBy=wC,Y.invokeMap=iE,Y.iteratee=z1,Y.keyBy=sE,Y.keys=Yr,Y.keysIn=is,Y.map=ym,Y.mapKeys=_C,Y.mapValues=SC,Y.matches=v8,Y.matchesProperty=y8,Y.memoize=wm,Y.merge=NC,Y.mergeWith=cw,Y.method=x8,Y.methodOf=w8,Y.mixin=U1,Y.negate=bm,Y.nthArg=_8,Y.omit=jC,Y.omitBy=kC,Y.once=bE,Y.orderBy=aE,Y.over=S8,Y.overArgs=_E,Y.overEvery=N8,Y.overSome=j8,Y.partial=D1,Y.partialRight=ew,Y.partition=oE,Y.pick=EC,Y.pickBy=uw,Y.property=vw,Y.propertyOf=k8,Y.pull=ak,Y.pullAll=qx,Y.pullAllBy=ok,Y.pullAllWith=lk,Y.pullAt=ck,Y.range=E8,Y.rangeRight=C8,Y.rearg=SE,Y.reject=uE,Y.remove=uk,Y.rest=NE,Y.reverse=P1,Y.sampleSize=fE,Y.set=AC,Y.setWith=LC,Y.shuffle=hE,Y.slice=dk,Y.sortBy=gE,Y.sortedUniq=yk,Y.sortedUniqBy=xk,Y.split=ZC,Y.spread=jE,Y.tail=wk,Y.take=bk,Y.takeRight=_k,Y.takeRightWhile=Sk,Y.takeWhile=Nk,Y.tap=$k,Y.throttle=kE,Y.thru=vm,Y.toArray=sw,Y.toPairs=dw,Y.toPairsIn=fw,Y.toPath=M8,Y.toPlainObject=ow,Y.transform=PC,Y.unary=EE,Y.union=jk,Y.unionBy=kk,Y.unionWith=Ek,Y.uniq=Ck,Y.uniqBy=Ak,Y.uniqWith=Lk,Y.unset=TC,Y.unzip=T1,Y.unzipWith=Wx,Y.update=MC,Y.updateWith=DC,Y.values=Dd,Y.valuesIn=IC,Y.without=Pk,Y.words=mw,Y.wrap=CE,Y.xor=Tk,Y.xorBy=Mk,Y.xorWith=Dk,Y.zip=Ik,Y.zipObject=Ok,Y.zipObjectDeep=Rk,Y.zipWith=Fk,Y.entries=dw,Y.entriesIn=fw,Y.extend=lw,Y.extendWith=Nm,U1(Y,Y),Y.add=I8,Y.attempt=gw,Y.camelCase=$C,Y.capitalize=hw,Y.ceil=O8,Y.clamp=OC,Y.clone=LE,Y.cloneDeep=TE,Y.cloneDeepWith=ME,Y.cloneWith=PE,Y.conformsTo=DE,Y.deburr=pw,Y.defaultTo=p8,Y.divide=R8,Y.endsWith=BC,Y.eq=Na,Y.escape=zC,Y.escapeRegExp=UC,Y.every=Kk,Y.find=Xk,Y.findIndex=$x,Y.findKey=uC,Y.findLast=Qk,Y.findLastIndex=Bx,Y.findLastKey=dC,Y.floor=F8,Y.forEach=Vx,Y.forEachRight=Gx,Y.forIn=fC,Y.forInRight=hC,Y.forOwn=pC,Y.forOwnRight=mC,Y.get=R1,Y.gt=IE,Y.gte=OE,Y.has=yC,Y.hasIn=F1,Y.head=Ux,Y.identity=ss,Y.includes=rE,Y.indexOf=Qj,Y.inRange=RC,Y.invoke=bC,Y.isArguments=mu,Y.isArray=Gt,Y.isArrayBuffer=RE,Y.isArrayLike=rs,Y.isArrayLikeObject=jr,Y.isBoolean=FE,Y.isBuffer=Ql,Y.isDate=$E,Y.isElement=BE,Y.isEmpty=zE,Y.isEqual=UE,Y.isEqualWith=qE,Y.isError=I1,Y.isFinite=WE,Y.isFunction=qo,Y.isInteger=tw,Y.isLength=_m,Y.isMap=nw,Y.isMatch=HE,Y.isMatchWith=VE,Y.isNaN=GE,Y.isNative=YE,Y.isNil=JE,Y.isNull=KE,Y.isNumber=rw,Y.isObject=fr,Y.isObjectLike=xr,Y.isPlainObject=fh,Y.isRegExp=O1,Y.isSafeInteger=XE,Y.isSet=iw,Y.isString=Sm,Y.isSymbol=Cs,Y.isTypedArray=Md,Y.isUndefined=QE,Y.isWeakMap=ZE,Y.isWeakSet=eC,Y.join=rk,Y.kebabCase=qC,Y.last=Qs,Y.lastIndexOf=ik,Y.lowerCase=WC,Y.lowerFirst=HC,Y.lt=tC,Y.lte=nC,Y.max=$8,Y.maxBy=B8,Y.mean=z8,Y.meanBy=U8,Y.min=q8,Y.minBy=W8,Y.stubArray=W1,Y.stubFalse=H1,Y.stubObject=A8,Y.stubString=L8,Y.stubTrue=P8,Y.multiply=H8,Y.nth=sk,Y.noConflict=b8,Y.noop=q1,Y.now=xm,Y.pad=VC,Y.padEnd=GC,Y.padStart=YC,Y.parseInt=KC,Y.random=FC,Y.reduce=lE,Y.reduceRight=cE,Y.repeat=JC,Y.replace=XC,Y.result=CC,Y.round=V8,Y.runInContext=Ee,Y.sample=dE,Y.size=pE,Y.snakeCase=QC,Y.some=mE,Y.sortedIndex=fk,Y.sortedIndexBy=hk,Y.sortedIndexOf=pk,Y.sortedLastIndex=mk,Y.sortedLastIndexBy=gk,Y.sortedLastIndexOf=vk,Y.startCase=e8,Y.startsWith=t8,Y.subtract=G8,Y.sum=Y8,Y.sumBy=K8,Y.template=n8,Y.times=T8,Y.toFinite=Wo,Y.toInteger=Jt,Y.toLength=aw,Y.toLower=r8,Y.toNumber=Zs,Y.toSafeInteger=rC,Y.toString=En,Y.toUpper=i8,Y.trim=s8,Y.trimEnd=a8,Y.trimStart=o8,Y.truncate=l8,Y.unescape=c8,Y.uniqueId=D8,Y.upperCase=u8,Y.upperFirst=$1,Y.each=Vx,Y.eachRight=Gx,Y.first=Ux,U1(Y,function(){var o={};return sr(Y,function(d,y){on.call(Y.prototype,y)||(o[y]=d)}),o}(),{chain:!1}),Y.VERSION=r,$r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){Y[o].placeholder=Y}),$r(["drop","take"],function(o,d){Qt.prototype[o]=function(y){y=y===n?1:Nr(Jt(y),0);var C=this.__filtered__&&!d?new Qt(this):this.clone();return C.__filtered__?C.__takeCount__=Hr(y,C.__takeCount__):C.__views__.push({size:Hr(y,be),type:o+(C.__dir__<0?"Right":"")}),C},Qt.prototype[o+"Right"]=function(y){return this.reverse()[o](y).reverse()}}),$r(["filter","map","takeWhile"],function(o,d){var y=d+1,C=y==B||y==he;Qt.prototype[o]=function(I){var Q=this.clone();return Q.__iteratees__.push({iteratee:Lt(I,3),type:y}),Q.__filtered__=Q.__filtered__||C,Q}}),$r(["head","last"],function(o,d){var y="take"+(d?"Right":"");Qt.prototype[o]=function(){return this[y](1).value()[0]}}),$r(["initial","tail"],function(o,d){var y="drop"+(d?"":"Right");Qt.prototype[o]=function(){return this.__filtered__?new Qt(this):this[y](1)}}),Qt.prototype.compact=function(){return this.filter(ss)},Qt.prototype.find=function(o){return this.filter(o).head()},Qt.prototype.findLast=function(o){return this.reverse().find(o)},Qt.prototype.invokeMap=Yt(function(o,d){return typeof o=="function"?new Qt(this):this.map(function(y){return In(y,o,d)})}),Qt.prototype.reject=function(o){return this.filter(bm(Lt(o)))},Qt.prototype.slice=function(o,d){o=Jt(o);var y=this;return y.__filtered__&&(o>0||d<0)?new Qt(y):(o<0?y=y.takeRight(-o):o&&(y=y.drop(o)),d!==n&&(d=Jt(d),y=d<0?y.dropRight(-d):y.take(d-o)),y)},Qt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Qt.prototype.toArray=function(){return this.take(be)},sr(Qt.prototype,function(o,d){var y=/^(?:filter|find|map|reject)|While$/.test(d),C=/^(?:head|last)$/.test(d),I=Y[C?"take"+(d=="last"?"Right":""):d],Q=C||/^find/.test(d);I&&(Y.prototype[d]=function(){var ue=this.__wrapped__,ye=C?[1]:arguments,Pe=ue instanceof Qt,tt=ye[0],nt=Pe||Gt(ue),ot=function(sn){var ln=I.apply(Y,Gi([sn],ye));return C&&ft?ln[0]:ln};nt&&y&&typeof tt=="function"&&tt.length!=1&&(Pe=nt=!1);var ft=this.__chain__,jt=!!this.__actions__.length,Tt=Q&&!ft,Xt=Pe&&!jt;if(!Q&&nt){ue=Xt?ue:new Qt(this);var Mt=o.apply(ue,ye);return Mt.__actions__.push({func:vm,args:[ot],thisArg:n}),new Ti(Mt,ft)}return Tt&&Xt?o.apply(this,ye):(Mt=this.thru(ot),Tt?C?Mt.value()[0]:Mt.value():Mt)})}),$r(["pop","push","shift","sort","splice","unshift"],function(o){var d=Ss[o],y=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",C=/^(?:pop|shift)$/.test(o);Y.prototype[o]=function(){var I=arguments;if(C&&!this.__chain__){var Q=this.value();return d.apply(Gt(Q)?Q:[],I)}return this[y](function(ue){return d.apply(Gt(ue)?ue:[],I)})}}),sr(Qt.prototype,function(o,d){var y=Y[d];if(y){var C=y.name+"";on.call(Bl,C)||(Bl[C]=[]),Bl[C].push({name:d,func:y})}}),Bl[um(n,b).name]=[{name:"wrapper",func:n}],Qt.prototype.clone=Kp,Qt.prototype.reverse=o1,Qt.prototype.value=xd,Y.prototype.at=Bk,Y.prototype.chain=zk,Y.prototype.commit=Uk,Y.prototype.next=qk,Y.prototype.plant=Hk,Y.prototype.reverse=Vk,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Gk,Y.prototype.first=Y.prototype.head,Ka&&(Y.prototype[Ka]=Wk),Y},vi=ga();ni?((ni.exports=vi)._=vi,Vi._=vi):vr._=vi}).call(ci)})(ag,ag.exports);var DB=ag.exports;async function $6(e,t){try{const{data:n,error:r}=await Xe.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r){if(console.error("Error en RPC get_group_calendar:",r),r.code==="42501"){console.warn("Error de permisos RLS en calendarios, continuando sin generar calendario");return}throw r}if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,s="calendar.ics",a=new Blob([i],{type:"text/calendar;charset=utf-8"}),l=new File([a],s,{type:"text/calendar;charset=utf-8"}),{error:c}=await Xe.storage.from("calendars").upload(`${e}/${t}/${s}`,l,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:f}}=Xe.storage.from("calendars").getPublicUrl(`${e}/${t}/${s}`),p=`${f}?v=${Date.now()}`,{error:m}=await Xe.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(m)throw m}catch(n){throw console.error("Error updating calendar:",n),n}}async function Cf(e){return Wn(async()=>{const{data:t,error:n}=await Xe.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function Kh(e){const t={...e,type:e.type||"song"};return Wn(async()=>{const{data:n,error:r}=await Xe.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la cancin")}async function IB(e,t,n){const{data:{user:r}}=await Xe.auth.getUser();if(!r)return Le.error("No se pudo obtener la informacin del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return Wn(async()=>{const{data:s,error:a}=await Xe.from("songs").insert(i).select().single();return{data:s,error:a}},"Error al crear el medley")}async function J_(e,t){return Wn(async()=>{const{data:n,error:r}=await Xe.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la cancin")}async function OB(e){try{const{error:t}=await Xe.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la cancin:",t),Le.error("Error al eliminar la cancin"),!1):!0}catch(t){return console.error("Error al eliminar la cancin:",t),Le.error("Error al eliminar la cancin"),!1}}async function Sy(e){return Wn(async()=>{const{data:t,error:n}=await Xe.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function X_(e){return Wn(async()=>{const{data:t,error:n}=await Xe.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function ex(e){return Wn(async()=>{const{data:t,error:n}=await Xe.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function RB(e,t){return Wn(async()=>{const{data:n,error:r}=await Xe.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function FB(e){try{const{error:t}=await Xe.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),Le.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),Le.error("Error al eliminar el setlist"),!1}}async function og(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await Xe.auth.getUser();if(!r)return console.error("No se pudo obtener la informacin del usuario"),Le.error("No se pudo obtener la informacin del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:s,error:a}=await Xe.from("setlist_songs").insert(i).select().single();return a?(console.error("Error de Supabase al aadir la cancin al setlist:",a),console.error("Cdigo de error:",a.code),console.error("Mensaje de error:",a.message),console.error("Detalles:",a.details),Le.error(`Error al aadir la cancin al setlist: ${a.message}`),null):(console.log("Cancin aadida exitosamente:",s),s)}catch(r){return console.error("Error general al aadir la cancin al setlist:",r),Le.error("Error al aadir la cancin al setlist"),null}}async function $B(e,t){try{const{error:n,count:r}=await Xe.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la cancin del setlist:",n),Le.error("Error al eliminar la cancin del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la cancin del setlist:",n),Le.error("Error al eliminar la cancin del setlist"),!1}}async function BB(e,t){try{const{error:n}=await Xe.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),Le.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),Le.error("Error al reordenar las canciones del setlist"),!1}}async function Q_(e,t){return await Wn(async()=>{const{data:r,error:i}=await Xe.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function zB(e,t){return Wn(async()=>{const{data:n,error:r}=await Xe.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function UB(e,t){try{const{data:n,error:r}=await Xe.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Le.error("Error al obtener el medley"),null;const s=[...n.medley_song_ids||[],t],{data:a,error:l}=await Xe.from("songs").update({medley_song_ids:s}).eq("id",e).select().single();return l?(console.error("Error al aadir la cancin al medley:",l),Le.error("Error al aadir la cancin al medley"),null):a}catch(n){return console.error("Error al aadir la cancin al medley:",n),Le.error("Error al aadir la cancin al medley"),null}}async function qB(e,t){try{const{data:n,error:r}=await Xe.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Le.error("Error al obtener el medley"),!1;const s=(n.medley_song_ids||[]).filter(l=>l!==t),{error:a}=await Xe.from("songs").update({medley_song_ids:s}).eq("id",e);return a?(console.error("Error al eliminar la cancin del medley:",a),Le.error("Error al eliminar la cancin del medley"),!1):!0}catch(n){return console.error("Error al eliminar la cancin del medley:",n),Le.error("Error al eliminar la cancin del medley"),!1}}async function WB(e){try{const{error:t}=await Xe.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),Le.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),Le.error("Error al eliminar el medley"),!1}}async function HB(e,t){try{const n=await X_(e);if(!n)return Le.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await Xe.auth.getUser();if(!r)return Le.error("No se pudo obtener la informacin del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},s=await ex(i);if(!s)return Le.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const a=n.songs.map(l=>og(s.id,l.song_id,l.position));await Promise.all(a)}return await X_(s.id)}catch(n){return console.error("Error al duplicar el setlist:",n),Le.error("Error al duplicar el setlist"),null}}let yu=null;function Z_({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:s,availableDates:a,members:l}){var Se;const[c,f]=k.useState(""),[p,m]=k.useState(""),[x,g]=k.useState(""),[N,j]=k.useState(""),[E,b]=k.useState(!1),[S,A]=k.useState([]),[O,K]=k.useState(!1),{user:ie}=Zr(),[W,$]=k.useState(""),[oe,le]=k.useState([]),[R,q]=k.useState(null),[J,B]=k.useState(!1),[fe,he]=k.useState([]),[G,P]=k.useState([]),[F,ne]=k.useState("");k.useEffect(()=>{var _e,Re;if(i){if(f(i.name),m(i.date),g(i.time),j(i.notes||""),i.location){if(typeof i.location=="string")$(i.location),q({display_name:i.location,lat:"",lon:"",type:"",class:""});else if(typeof i.location=="object"&&i.location!==null){const Fe=i.location;Fe.display_name?($(Fe.display_name),q(Fe)):Fe.name&&($(Fe.name),q({display_name:Fe.name,lat:((_e=Fe.coordinates)==null?void 0:_e.lat)||"",lon:((Re=Fe.coordinates)==null?void 0:Re.lon)||"",type:"",class:""}))}}else $(""),q(null);ne(i.setlist_id||""),be()}else if(r){const Fe=Kt(r,"yyyy-MM-dd");m(Fe),g("20:00"),ne(""),T(Fe)}},[i,r]),k.useEffect(()=>{e&&(async()=>{const[Re,Fe]=await Promise.all([Xe.from("events").select("*").eq("group_id",n),Sy(n)]);he(Re.data||[]),P(Fe||[])})()},[e,n]);const be=async()=>{if(i)try{const _e=await Wn(()=>Xe.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),Re=await Wn(()=>Xe.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),Fe=await Wn(()=>Xe.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(_e){const Ge=new Set((Re==null?void 0:Re.map(He=>He.user_id))||[]),pe=new Set;Fe==null||Fe.forEach(He=>{var Ve;(Ve=He.event_members)==null||Ve.forEach(Qe=>{pe.add(Qe.user_id)})});const te=new Set(_e.map(He=>He.group_member_id)),et=l.map(He=>{const Ve=He.user_id?Ge.has(He.user_id):!0,Qe=He.user_id?pe.has(He.user_id):!1,at=te.has(He.id);return{memberId:He.id,userId:He.user_id,selected:at,isAvailable:at||Ve&&!Qe,isBusyInOtherEvent:Qe,wasInitiallyAvailable:Ve,sync_calendar:He.sync_calendar||!1}});A(et)}}catch(_e){console.error("Error loading event members:",_e)}},T=async(_e,Re)=>{try{const Fe=await Wn(()=>Xe.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",_e),"Error loading external events"),Ge=new Set;Fe==null||Fe.forEach(He=>{var Ve;(Ve=He.event_members)==null||Ve.forEach(Qe=>{Ge.add(Qe.user_id)})});const pe=await Wn(()=>Xe.from("member_availability").select("user_id").eq("date",_e),"Error loading member availability"),te=new Set((pe==null?void 0:pe.map(He=>He.user_id))||[]),et=l.map(He=>{const Ve=He.user_id?te.has(He.user_id):!0,Qe=He.user_id?Ge.has(He.user_id):!1,at=Ve&&!Qe;return{memberId:He.id,userId:He.user_id,selected:Re?Re.includes(He.id):He.role_in_group==="principal"&&at,isAvailable:at,isBusyInOtherEvent:Qe,wasInitiallyAvailable:Ve,sync_calendar:He.sync_calendar||!1}});A(et)}catch(Fe){console.error("Error loading available members:",Fe)}};k.useEffect(()=>{H()},[S]);const H=()=>{const _e=l.filter(Ge=>Ge.role_in_group==="principal"),Re=S.filter(Ge=>Ge.selected).map(Ge=>Ge.memberId),Fe=new Set;return _e.forEach(Ge=>{Re.includes(Ge.id)||Ge.instruments.forEach(pe=>{S.filter(et=>et.selected).some(et=>{const He=l.find(Ve=>Ve.id===et.memberId);return He==null?void 0:He.instruments.some(Ve=>Ve.id===pe.id)})||Fe.add(pe.name)})}),K(Fe.size>0),Fe},Z=(_e,Re)=>{A(Fe=>Fe.map(Ge=>Ge.memberId===_e?{...Ge,selected:Re}:Ge))},se=async _e=>{if(!_e.trim()){le([]);return}yu&&yu.abort(),yu=new AbortController,B(!0);try{const Ge=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(_e)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:yu.signal})).json()).sort((pe,te)=>{const et=pe.display_name.toLowerCase().includes("madrid")||pe.display_name.toLowerCase().includes("espaa"),He=te.display_name.toLowerCase().includes("madrid")||te.display_name.toLowerCase().includes("espaa");return et&&!He?-1:!et&&He?1:0});le(Ge)}catch(Re){Re.name!=="AbortError"&&(console.error("Error searching locations:",Re),Le.error("Error al buscar ubicaciones"))}finally{B(!1),yu=null}};k.useEffect(()=>()=>{yu&&yu.abort()},[]);const ce=yt.useCallback(DB.debounce(_e=>{se(_e)},300),[]),je=_e=>{const Re=_e.target.value;if($(Re),le([]),!Re.trim()){le([]);return}ce(Re)},ke=async()=>{try{if(!c||!p){Le.error("Por favor completa los campos requeridos");return}b(!0);const _e={group_id:n,name:c.trim(),date:p,time:x,datetime:(()=>{const Fe=new Date(`${p}T${x}`),Ge=-Fe.getTimezoneOffset();return new Date(Fe.getTime()-Ge*60*1e3).toISOString().replace("Z",VB(Ge))})(),notes:N.trim()||null,created_by:ie.id,location:R?R.display_name:W};let Re;if(i){const{data:Fe,error:Ge}=await Xe.from("events").update(_e).eq("id",i.id).select().single();if(Ge)throw Ge;Re=i.id}else{const{data:Fe,error:Ge}=await Xe.from("events").insert([_e]).select().single();if(Ge)throw Ge;Re=Fe.id}if(Re){i&&await Xe.from("event_members").delete().eq("event_id",Re);const Fe=S.filter(pe=>pe.selected).map(pe=>({event_id:Re,group_member_id:pe.memberId,user_id:pe.userId,created_by:ie.id}));if(Fe.length>0){const{error:pe}=await Xe.from("event_members").insert(Fe);if(pe)throw pe}const Ge=S.filter(pe=>pe.selected&&pe.userId&&!pe.wasInitiallyAvailable).map(pe=>({user_id:pe.userId,date:p}));if(Ge.length>0){const{data:pe}=await Xe.from("member_availability").select("user_id, date").in("user_id",Ge.map(He=>He.user_id)).eq("date",p),te=new Set((pe||[]).map(He=>`${He.user_id}-${He.date}`)),et=Ge.filter(He=>!te.has(`${He.user_id}-${He.date}`));if(et.length>0){const{error:He}=await Xe.from("member_availability").insert(et);He&&console.error("Error adding availability:",He)}}try{await Promise.all(S.filter(pe=>pe.selected&&pe.sync_calendar&&pe.userId).map(async pe=>{try{return await $6(n,pe.memberId)}catch{return null}}))}catch{}F?await Q_(Re,F):i!=null&&i.setlist_id&&await Q_(Re,null)}b(!1),s&&s(),t(),Le.success(i?"Evento actualizado":"Evento creado")}catch(_e){b(!1),console.error("Error saving event:",_e),Le.error("Error al guardar el evento")}},ee=_e=>{const Re=new Date;Re.setHours(0,0,0,0);const Fe=new Set(a.map(pe=>Kt(pe,"yyyy-MM-dd"))),Ge=new Set(fe.map(pe=>Kt(new Date(pe.date),"yyyy-MM-dd")));return _e.filter(pe=>{const te=Kt(pe,"yyyy-MM-dd"),et=pe>=Re;return Fe.has(te)&&!Ge.has(te)&&et}).sort((pe,te)=>pe.getTime()-te.getTime())};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[u.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsxs("form",{onSubmit:ke,className:"p-4 space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsx(Xn,{label:"Event Name",value:c,onChange:_e=>f(_e.target.value),required:!0,placeholder:"Enter event name"}),u.jsx(Xn,{label:"Time",type:"time",value:x,onChange:_e=>g(_e.target.value),required:!0})]}),!i&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),u.jsxs("select",{value:p,onChange:_e=>{m(_e.target.value),T(_e.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[u.jsx("option",{value:"",disabled:!0,children:"Select a date"}),ee(a).map((_e,Re)=>{const Fe=Kt(_e,"yyyy-MM-dd");return u.jsx("option",{value:Fe,children:Kt(_e,"EEEE, d MMMM yyyy",{locale:uo})},Re)})]})]}),i&&u.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:u.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",Kt(new Date(i.date),"EEEE, d MMMM yyyy",{locale:uo})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),u.jsxs("select",{value:F,onChange:_e=>ne(_e.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[u.jsx("option",{value:"",children:"Sin setlist"}),G.map(_e=>{var Re;return u.jsxs("option",{value:_e.id,children:[_e.name," (",((Re=_e.songs)==null?void 0:Re.length)||0," canciones)"]},_e.id)})]}),F&&u.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(Se=G.find(_e=>_e.id===F))==null?void 0:Se.name]})})]}),p&&u.jsx(MB,{members:l,selectedMembers:S,onMemberSelectionChange:Z,validationError:O}),u.jsxs("div",{className:"relative space-y-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicacin"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Hh,{className:"h-5 w-5 text-gray-400"})}),u.jsx(Xn,{value:W,onChange:je,className:"pl-10 pr-10",placeholder:"Buscar ubicacin..."}),W&&u.jsx("button",{type:"button",onClick:()=>{$(""),q(null),le([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u.jsx(aa,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),J&&u.jsx("div",{className:"flex items-center justify-center p-4",children:u.jsx(sa,{className:"h-6 w-6 animate-spin text-primary"})}),oe.length>0&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:oe.map((_e,Re)=>u.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{q(_e),$(_e.display_name),le([])},children:[u.jsx(Hh,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-sm font-medium text-gray-900",children:_e.display_name.split(",")[0]}),u.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:_e.display_name.split(",").slice(1).join(",").trim()})]})]},Re))}),R&&u.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Hh,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"block text-sm font-medium text-gray-900",children:R!=null&&R.display_name&&typeof R.display_name=="string"&&R.display_name.includes(",")?R.display_name.split(",")[0]:(R==null?void 0:R.display_name)||"Unknown location"}),u.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:R!=null&&R.display_name&&typeof R.display_name=="string"&&R.display_name.includes(",")?R.display_name.split(",").slice(1).join(",").trim():""})]}),u.jsx("button",{type:"button",onClick:()=>{q(null),$("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:u.jsx(aa,{className:"h-5 w-5"})})]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),u.jsx("textarea",{value:N,onChange:_e=>j(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[u.jsx(vt,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),u.jsx(vt,{onClick:ke,disabled:E,className:"w-full",children:E?u.jsxs(u.Fragment,{children:[u.jsx(sa,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function VB(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}const GB=(e,t,n,r=!1)=>{var W,$;const i=new Dt("p","mm","a4"),s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),l=r?"#FFFFFF":"#1E2A47",c=r?"#000000":"#F95738",f="helvetica";r||(i.setFillColor(l),i.rect(0,0,s,a,"F"));const p=[...((W=e.songs)==null?void 0:W.map(oe=>({...oe,type:"song"})))||[],...(($=e.medleys)==null?void 0:$.map(oe=>({...oe,type:"medley"})))||[]].sort((oe,le)=>oe.position-le.position),m=30,x=10,g=s-60,N=p.length>20,j=N?(g-20)/2:g,E=20,b=E+j+20;let S=18,A=x;p.length>30?(S=14,A=8):p.length>25&&(S=16,A=9),i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c);let O=m;if(N){const oe=Math.ceil(p.length/2),le=p.slice(0,oe),R=p.slice(oe);let q=O;le.forEach((B,fe)=>{let he="";if(B.type==="song"){const ne=B;ne.song&&(he=ne.song.title)}else B.type==="medley"&&(he=B.name||"Medley");const P=`${String(fe+1).padStart(2,"0")}. ${he}`,F=i.splitTextToSize(P.toUpperCase(),j);i.text(F,E,q),q+=F.length*A});let J=O;R.forEach((B,fe)=>{let he="";if(B.type==="song"){const ne=B;ne.song&&(he=ne.song.title)}else B.type==="medley"&&(he=B.name||"Medley");const P=`${String(oe+fe+1).padStart(2,"0")}. ${he}`,F=i.splitTextToSize(P.toUpperCase(),j);i.text(F,b,J),J+=F.length*A})}else p.forEach((oe,le)=>{O>a-50&&(i.addPage(),r||(i.setFillColor(l),i.rect(0,0,s,a,"F")),O=m,i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c));let R="";if(oe.type==="song"){const fe=oe;fe.song&&(R=fe.song.title)}else oe.type==="medley"&&(R=oe.name||"Medley");const J=`${String(le+1).padStart(2,"0")}. ${R}`,B=i.splitTextToSize(J.toUpperCase(),j);i.text(B,E,O),O+=B.length*A});const K=i.getNumberOfPages();for(let oe=1;oe<=K;oe++){i.setPage(oe),i.setFont(f,"bold"),i.setFontSize(48),i.setTextColor(c);const le=(n||"YOUR BAND").toUpperCase();i.text(le,s-20,m,{angle:-90,align:"left"})}const ie=oe=>new Date(oe).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});if(t){i.setFont(f,"normal"),i.setFontSize(10),i.setTextColor(c);const oe=[t.name||"The Arena",t.location||"Town, Country",ie(t.date)];i.text(oe,s-20,a-30,{align:"right"})}return i},YB=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:s})=>{const[a,l]=k.useState(!0),c=(f=!1)=>{if(!n)return;const m=GB(n,r&&i?{name:r,date:i}:void 0,s,f),g=`${s||"Setlist"} - ${r||"Event"}${f?" (Print)":" (Digital)"}.pdf`;if(f){const N=m.output("blob"),j=URL.createObjectURL(N);window.open(j,"_blank")}else m.save(g)};return u.jsx(u.Fragment,{children:u.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:u.jsx("div",{className:`bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:f=>f.stopPropagation(),children:n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 border-b border-gray-200 gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[u.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg flex-shrink-0",children:u.jsx(ei,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),u.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:n.name})]}),u.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 print:hidden flex-wrap",children:[u.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-2 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-xs",title:"Descargar PDF Digital",children:[u.jsx(Q0,{className:"w-3 h-3"}),"Digital"]}),u.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-2 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs",title:"Descargar PDF para Imprimir",children:[u.jsx(Q0,{className:"w-3 h-3"}),"Impresin"]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),u.jsx("button",{onClick:()=>l(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-indigo-600":"bg-gray-200"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx(aa,{className:"w-6 h-6"})})]})]}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&u.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const f=k.useMemo(()=>n!=null&&n.songs?n.songs.map(g=>{var N;return{...g,type:((N=g.song)==null?void 0:N.type)==="medley"?"medley":"song"}}).sort((g,N)=>g.position-N.position):[],[n==null?void 0:n.songs]),p=f.length,m=p>10,x=m?Math.ceil(p/2):p;return p===0?u.jsx("div",{className:"text-center py-10",children:u.jsx("p",{className:"text-gray-500",children:"Este setlist est vaco."})}):u.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${x}, auto)`,gridAutoFlow:"column",gridTemplateColumns:m?"1fr 1fr":"1fr"},children:f.map((g,N)=>{var j,E,b,S,A,O,K;return g.type==="medley"?u.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:u.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[u.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[N+1,"."]}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"text-indigo-600 font-bold",children:(j=g.song)==null?void 0:j.title}),u.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((b=(E=g.song)==null?void 0:E.medley_song_ids)==null?void 0:b.length)||0," canciones)"]})]})]})},`medley-${g.id}`):u.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[u.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[N+1,"."]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((S=g.song)==null?void 0:S.title)||"N/A"}),u.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${a&&((A=g.song)!=null&&A.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(O=g.song)==null?void 0:O.artist})]})]},`song-${((K=g.song)==null?void 0:K.id)||N}`)})})})()]})]})})})})};function Sp({table:e,filter:t,event:n="*",onInsert:r,onUpdate:i,onDelete:s,onChange:a,enabled:l=!0}){const c=k.useRef(null);return k.useEffect(()=>{if(!l)return;const f=`realtime-${e}-${t||"all"}`;return c.current=Xe.channel(f).on("postgres_changes",{event:n,schema:"public",table:e,...t&&{filter:t}},p=>{p.eventType==="INSERT"&&r?r(p):p.eventType==="UPDATE"&&i?i(p):p.eventType==="DELETE"&&s&&s(p),a&&a(p)}).subscribe(),()=>{c.current&&(c.current.unsubscribe(),c.current=null)}},[e,t,n,r,i,s,a,l]),{unsubscribe:()=>{c.current&&(c.current.unsubscribe(),c.current=null)}}}function KB({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,s]=k.useState([]),[a,l]=k.useState(!0),[c,f]=k.useState(null),[p,m]=k.useState(!1),[x,g]=k.useState(!1),[N,j]=k.useState("upcoming"),[E,b]=k.useState(null),[S,A]=k.useState(null),[O,K]=k.useState("");k.useEffect(()=>{ie()},[e]),Sp({table:"events",filter:`group_id=eq.${e}`,onInsert:()=>{ie(),Le.success("Nuevo evento aadido en tiempo real")},onUpdate:()=>{ie()},onDelete:G=>{s(P=>P.filter(F=>F.id!==G.old.id)),Le.success("Evento eliminado en tiempo real")},enabled:!!e});const ie=async()=>{try{l(!0);const{data:G,error:P}=await Xe.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if(P)throw P;if(G){const F=await Promise.all(G.map(async ne=>{const{data:be,error:T}=await Xe.from("event_members").select("group_member_id, user_id").eq("event_id",ne.id);if(T)return console.error("Error loading event members:",T),{...ne,members:[]};const H=(be==null?void 0:be.map(Z=>{const se=r.find(ce=>ce.id===Z.group_member_id);return{group_member_id:Z.group_member_id,user_id:Z.user_id,member_name:(se==null?void 0:se.name)||"Unknown Member",role_in_group:(se==null?void 0:se.role_in_group)||"principal"}}))||[];return{...ne,members:H}}));s(F)}}catch(G){console.error("Error fetching events:",G),Le.error("Error loading events")}finally{l(!1)}},W=async G=>{if(window.confirm("Ests seguro de que quieres eliminar este evento?"))try{const{data:P,error:F}=await Xe.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",G);if(F)throw F;const{error:ne}=await Xe.from("events").delete().eq("id",G);if(ne)throw ne;P&&P.length>0&&await Promise.all(P.filter(be=>be.group_members.sync_calendar).map(async be=>{try{await $6(e,be.group_member_id)}catch{}})),Le.success("Evento eliminado correctamente"),ie()}catch(P){console.error("Error deleting event:",P),Le.error("Error al eliminar el evento")}},$=G=>{f(G),g(!0)},oe=async G=>{try{const{data:F,error:ne}=await Xe.from("groups").select("name").eq("id",G.group_id).single();if(ne)throw ne;K((F==null?void 0:F.name)||"")}catch{K("")}const P=G.setlist;if(P&&(A({name:G.name,date:G.date}),!!P))try{const{data:F,error:ne}=await Xe.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",P.id).single();if(ne)throw ne;F&&b(F)}catch(F){console.error("Error al cargar el setlist completo:",F),Le.error("Error al cargar el setlist")}};if(a)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{className:"h-8 w-32 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-36 bg-gray-200 animate-pulse rounded"})]}),u.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[u.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"})]}),u.jsx(QO,{count:4})]});const le=G=>{const P=G.reduce((F,ne)=>{const be=Kt(vu(ne.date),"MMMM yyyy");return F[be]||(F[be]=[]),F[be].push(ne),F},{});return Object.entries(P)},R=G=>{if(!G)return"";if(typeof G=="object"&&G!==null)return G.name||String(G);if(typeof G!="string")return String(G);if(G.startsWith("{")||G.startsWith("["))try{const P=JSON.parse(G);return P.name||P.formatted_address||P.description||String(P)}catch{return G}return G},q=G=>{if(!G)return;const P=R(G);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(P)}`,"_blank")},J=G=>{const P=G.members.filter(ne=>ne.role_in_group==="principal"),F=G.members.filter(ne=>ne.role_in_group==="sustituto");return u.jsxs("div",{className:"mt-1.5 space-y-1",children:[u.jsx("div",{className:"flex flex-wrap gap-1",children:P.map(ne=>u.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:ne.member_name},ne.group_member_id))}),F.length>0&&u.jsxs("div",{className:"flex flex-wrap gap-1",children:[u.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),F.map(ne=>u.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:ne.member_name},ne.group_member_id))]}),G.location&&u.jsx("div",{className:"flex items-center gap-1 mt-1",children:u.jsxs("button",{onClick:()=>q(G.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[u.jsx(Hh,{className:"w-3 h-3 mr-1"}),u.jsx("span",{className:"underline",children:B(R(G.location))})]})})]})},B=(G,P=40)=>{if(!G)return"";if(G.includes(",")){const F=G.split(",")[0];return F.length<=P?F:`${F.slice(0,P)}...`}return G.length>P?`${G.slice(0,P)}...`:G},fe=i.filter(G=>{const P=vu(G.date);return S_(Mc(P))||N_(P)}),he=i.filter(G=>{const P=vu(G.date);return!S_(Mc(P))&&!N_(P)});return u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:u.jsxs("div",{className:"p-3 sm:p-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[u.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Eventos"}),t&&u.jsx(vt,{onClick:()=>m(!0),size:"sm",className:"w-full sm:w-auto",children:"Aadir Evento"})]}),i.length===0?u.jsxs("div",{className:"text-center py-6 text-gray-500",children:[u.jsx(vc,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),u.jsx("p",{children:"No hay eventos programados"})]}):u.jsxs("div",{className:"mt-4",children:[u.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:u.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[u.jsxs("button",{onClick:()=>j("upcoming"),className:`${N==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[u.jsx("span",{className:"hidden sm:inline",children:"Prximos eventos"}),u.jsx("span",{className:"sm:hidden",children:"Prximos"}),fe.length>0&&u.jsx("span",{className:`${N==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:fe.length})]}),u.jsxs("button",{onClick:()=>j("past"),className:`${N==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[u.jsx("span",{className:"hidden sm:inline",children:"Eventos pasados"}),u.jsx("span",{className:"sm:hidden",children:"Pasados"}),he.length>0&&u.jsx("span",{className:`${N==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:he.length})]})]})}),u.jsx("div",{className:"mt-4 space-y-6",children:le(N==="upcoming"?fe:he).map(([G,P])=>u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:G}),u.jsx("div",{className:"space-y-1",children:P.map(F=>u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:u.jsx("div",{className:"p-3",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[u.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-gray-900",children:Kt(vu(F.date),"d")}),u.jsx("div",{className:"text-xs text-gray-500 uppercase",children:Kt(vu(F.date),"EEE")})]}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:F.name}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs text-gray-500 mt-0.5",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(xp,{className:"w-3 h-3 mr-1"}),Kt(vu(`2000-01-01T${F.time}`),"h:mm a")]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Iu,{className:"w-3 h-3 mr-1"}),F.members.length]}),F.setlist?u.jsxs("div",{className:"flex items-center",children:[u.jsx(ei,{className:"w-3 h-3 mr-1 text-blue-500"}),u.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>F.setlist&&oe(F),children:F.setlist.name}),u.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var T,H;const ne=((T=F.setlist.songs)==null?void 0:T.filter(Z=>{var se,ce;return((se=Z.song)==null?void 0:se.type)==="song"||!((ce=Z.song)!=null&&ce.type)}))||[],be=((H=F.setlist.songs)==null?void 0:H.filter(Z=>{var se;return((se=Z.song)==null?void 0:se.type)==="medley"}))||[];return`(${ne.length} canciones${be.length>0?`, ${be.length} medleys`:""})`})()})]}):u.jsxs("div",{className:"flex items-center",children:[u.jsx(ei,{className:"w-3 h-3 mr-1 text-gray-300"}),u.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),J(F),F.notes&&u.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:F.notes})]}),t&&u.jsxs("div",{className:"flex items-center gap-1 mt-2 sm:mt-0",children:[u.jsx("button",{onClick:()=>$(F),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:u.jsx(_N,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),u.jsx("button",{onClick:()=>W(F.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:u.jsx(M5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})})},F.id))})]},G))})]})]})}),u.jsx(Z_,{isOpen:p,onClose:()=>m(!1),groupId:e,onEventSaved:()=>{ie(),m(!1)},availableDates:n,members:r}),c&&u.jsx(Z_,{isOpen:x,onClose:()=>{g(!1),f(null)},groupId:e,event:c,onEventSaved:()=>{ie(),g(!1),f(null)},availableDates:[...n,vu(c.date)],members:r}),E&&u.jsx(YB,{isOpen:!!E,onClose:()=>{b(null),A(null),K("")},setlist:E,eventName:S==null?void 0:S.name,eventDate:S==null?void 0:S.date,bandName:O})]})}function JB({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[u.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("p",{className:"text-gray-700 mb-6",children:i}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx(vt,{variant:"secondary",onClick:t,children:"Cancelar"}),u.jsx(vt,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function XB({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),Le.success("URL copiada al portapapeles")};return u.jsxs(Ru,{open:e,onClose:t,className:"relative z-50",children:[u.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),u.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:u.jsxs(Ru.Panel,{className:"mx-auto max-w-md w-full sm:max-w-lg rounded-lg bg-white p-4 sm:p-6 max-h-[90vh] overflow-y-auto",children:[u.jsxs(Ru.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[u.jsx(vc,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),u.jsxs("div",{className:"mt-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),u.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[u.jsx("li",{children:"Abre Google Calendar"}),u.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),u.jsx("li",{children:'Selecciona "Desde URL"'}),u.jsx("li",{children:'Pega la URL del calendario y haz clic en "Aadir calendario"'})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),u.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[u.jsx("li",{children:"Abre la aplicacin Calendario"}),u.jsx("li",{children:"Ve a Archivo  Nueva suscripcin a calendario"}),u.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),u.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[u.jsx("li",{children:"Abre Outlook Calendar"}),u.jsx("li",{children:'Ve a "Aadir calendario"  "Desde Internet"'}),u.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),u.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[u.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[u.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2 min-w-0"}),u.jsxs(vt,{onClick:r,variant:"secondary",size:"sm",className:"flex items-center justify-center gap-1 w-full sm:w-auto",children:[u.jsx(QD,{className:"w-4 h-4"}),u.jsx("span",{className:"sm:hidden",children:"Copiar URL"}),u.jsx("span",{className:"hidden sm:inline",children:"Copiar"})]})]})]})]}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx(vt,{onClick:t,children:"Cerrar"})})]})})]})}class QB{constructor(){this.clientId="2f84f95d5e0943afb6e72b6758adedd3",this.redirectUri=this.getRedirectUri(),this.scopes=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-modify-playback-state","user-read-playback-state","streaming"].join(" "),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.loadTokensFromStorage(),this.subscribeToAuthChanges()}getRedirectUri(){const t=window.location.hostname,n=window.location.protocol,r=window.location.port;let i;if(t==="localhost"||t==="127.0.0.1"){const s=r?`:${r}`:"";i=`${n}//${t}${s}/spotify/callback`}else i=`${n}//${t}/spotify/callback`;return console.log(" Auto-detected redirect URI:",i),i}async getAuthUrl(){this.isProcessingAuth||(localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"));const t=this.generateRandomString(16),n=this.generateRandomString(128);localStorage.setItem("spotify_return_url",window.location.href),localStorage.setItem("spotify_auth_state",t),localStorage.setItem("spotify_code_verifier",n);const r=await this.generateCodeChallenge(n);return`https://accounts.spotify.com/authorize?${new URLSearchParams({response_type:"code",client_id:this.clientId,scope:this.scopes,redirect_uri:this.redirectUri,state:t,code_challenge_method:"S256",code_challenge:r}).toString()}`}async handleAuthCallback(t,n){if(this.isProcessingAuth)return console.log(" Already processing auth, skipping..."),!1;console.log(" SpotifyService: Starting handleAuthCallback..."),this.isProcessingAuth=!0;try{const r=localStorage.getItem("spotify_auth_state"),i=localStorage.getItem("spotify_code_verifier");if(console.log(" SpotifyService: Auth callback data:",{receivedState:n?n.substring(0,10)+"...":"NULL",storedState:r?r.substring(0,10)+"...":"NULL",hasCodeVerifier:!!i,codeLength:t==null?void 0:t.length,receivedStateLength:n==null?void 0:n.length,storedStateLength:r==null?void 0:r.length,statesMatch:n===r}),!r)throw console.error(" No stored state found"),new Error("No stored state found");if(n!==r)throw console.error(" State mismatch:",{received:n,stored:r,receivedLength:n==null?void 0:n.length,storedLength:r==null?void 0:r.length,match:n===r}),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),new Error("State mismatch - auth state was corrupted. Please try connecting to Spotify again.");if(!i)throw console.error(" Code verifier not found"),new Error("Code verifier not found");console.log(" SpotifyService: All validations passed, making token request...");const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:this.redirectUri,client_id:this.clientId,code_verifier:i})});if(console.log(" SpotifyService: Token request response status:",s.status),!s.ok){const l=await s.text();throw console.error(" SpotifyService: Token request failed:",s.status,l),new Error(`Failed to exchange code for tokens: ${s.status} ${l}`)}console.log(" SpotifyService: Token request successful, parsing response...");const a=await s.json();return console.log(" SpotifyService: Token data received:",{hasAccessToken:!!a.access_token,hasRefreshToken:!!a.refresh_token,expiresIn:a.expires_in}),this.accessToken=a.access_token,this.refreshToken=a.refresh_token,this.tokenExpiry=Date.now()+a.expires_in*1e3,console.log(" SpotifyService: Tokens stored in memory, saving to storage..."),await this.saveTokensToStorage(),console.log(" SpotifyService: Tokens saved to storage, cleaning up..."),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log(" SpotifyService: Auth callback completed successfully!"),!0}catch(r){return console.error("Error in Spotify auth callback:",r),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),!1}finally{this.isProcessingAuth=!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken,client_id:this.clientId})});if(!t.ok)throw new Error("Failed to refresh access token");const n=await t.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,n.refresh_token&&(this.refreshToken=n.refresh_token),this.saveTokensToStorage(),!0}catch(t){return console.error("Error refreshing access token:",t),this.logout(),!1}}async ensureValidToken(){return this.accessToken?this.tokenExpiry&&Date.now()>=this.tokenExpiry-6e4?await this.refreshAccessToken():!0:!1}async apiRequest(t,n={}){if(!await this.ensureValidToken())throw new Error("No valid Spotify token available");const r=await fetch(`https://api.spotify.com/v1${t}`,{...n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",...n.headers}});if(!r.ok){if(r.status===401&&await this.refreshAccessToken())return this.apiRequest(t,n);throw new Error(`Spotify API error: ${r.status} ${r.statusText}`)}return r.headers.get("content-length")==="0"||r.status===204?null:r.json()}async getCurrentUser(){return this.apiRequest("/me")}async searchTracks(t,n=20){const r=new URLSearchParams({q:t,type:"track",limit:n.toString()});return(await this.apiRequest(`/search?${r}`)).tracks.items}async getTrack(t){return this.apiRequest(`/tracks/${t}`)}async getAudioFeatures(t){return this.apiRequest(`/audio-features/${t}`)}async createPlaylist(t,n,r=!1){const i=await this.getCurrentUser();return this.apiRequest(`/users/${i.id}/playlists`,{method:"POST",body:JSON.stringify({name:t,description:n,public:r})})}async addTracksToPlaylist(t,n){await this.apiRequest(`/playlists/${t}/tracks`,{method:"POST",body:JSON.stringify({uris:n})})}async playTrack(t,n){const r={uris:[t]};n&&(r.device_id=n),await this.apiRequest("/me/player/play",{method:"PUT",body:JSON.stringify(r)})}async pausePlayback(){await this.apiRequest("/me/player/pause",{method:"PUT"})}async resumePlayback(){await this.apiRequest("/me/player/play",{method:"PUT"})}async getPlaybackState(){try{return await this.apiRequest("/me/player")}catch{return null}}async getUserPlaylists(t=50){return(await this.apiRequest(`/me/playlists?limit=${t}`)).items.map(r=>({id:r.id,name:r.name,description:r.description||"",external_urls:r.external_urls,images:r.images||[],tracks:r.tracks||{total:0}}))}async getPlaylistTracks(t,n=100){return(await this.apiRequest(`/playlists/${t}/tracks?limit=${n}`)).items.map(i=>i.track)}isAuthenticated(){return!!(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}async logout(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,await this.clearTokensFromStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),console.log(" Spotify logout completed - tokens cleared from all sources")}clearAuthState(){console.log(" Clearing Spotify auth state manually"),this.isProcessingAuth=!1,localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}async generateCodeChallenge(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(r)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}generateRandomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((i,s)=>i+n[s%n.length],"")}async saveTokensToStorage(){console.log(" saveTokensToStorage: Starting...");const{user:t}=Zr.getState();if(console.log(" saveTokensToStorage: User check:",{hasUser:!!t,userId:t==null?void 0:t.id}),!t){console.log(" saveTokensToStorage: No user, falling back to localStorage"),this.saveTokensToLocalStorage();return}try{console.log(" saveTokensToStorage: Attempting database save...");const{error:n}=await Xe.from("spotify_tokens").upsert({user_id:t.id,access_token:this.accessToken,refresh_token:this.refreshToken,expires_at:new Date(this.tokenExpiry).toISOString()},{onConflict:"user_id"});if(n)throw console.error(" saveTokensToStorage: Database error:",n),n;console.log(" Spotify tokens saved to database")}catch(n){console.error("Error saving tokens to database:",n),console.log(" saveTokensToStorage: Falling back to localStorage due to error"),this.saveTokensToLocalStorage()}}async loadTokensFromStorage(){const{user:t}=Zr.getState();if(!t){this.loadTokensFromLocalStorage();return}try{const{data:n,error:r}=await Xe.from("spotify_tokens").select("*").eq("user_id",t.id).single();if(r||!n){this.loadTokensFromLocalStorage();return}this.accessToken=n.access_token,this.refreshToken=n.refresh_token,this.tokenExpiry=new Date(n.expires_at).getTime(),this.saveTokensToLocalStorage(),console.log(" Spotify tokens loaded from database")}catch(n){console.error("Error loading tokens from database:",n),this.loadTokensFromLocalStorage()}}saveTokensToLocalStorage(){var i;console.log(" SpotifyService: Saving tokens to storage...",{hasAccessToken:!!this.accessToken,hasRefreshToken:!!this.refreshToken,hasTokenExpiry:!!this.tokenExpiry,accessTokenLength:(i=this.accessToken)==null?void 0:i.length,tokenExpiry:this.tokenExpiry}),this.accessToken&&(localStorage.setItem("spotify_access_token",this.accessToken),console.log(" Access token saved to localStorage")),this.refreshToken&&(localStorage.setItem("spotify_refresh_token",this.refreshToken),console.log(" Refresh token saved to localStorage")),this.tokenExpiry&&(localStorage.setItem("spotify_token_expiry",this.tokenExpiry.toString()),console.log(" Token expiry saved to localStorage"));const t=localStorage.getItem("spotify_access_token"),n=localStorage.getItem("spotify_refresh_token"),r=localStorage.getItem("spotify_token_expiry");console.log(" Verification - tokens in localStorage:",{hasAccessToken:!!t,hasRefreshToken:!!n,hasTokenExpiry:!!r,accessTokenMatches:t===this.accessToken,refreshTokenMatches:n===this.refreshToken})}loadTokensFromLocalStorage(){this.accessToken=localStorage.getItem("spotify_access_token"),this.refreshToken=localStorage.getItem("spotify_refresh_token");const t=localStorage.getItem("spotify_token_expiry");this.tokenExpiry=t?parseInt(t):null}async clearTokensFromStorage(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry");const{user:t}=Zr.getState();if(t)try{const{error:n}=await Xe.from("spotify_tokens").delete().eq("user_id",t.id);n?console.error("Error deleting Spotify tokens from database:",n):console.log(" Spotify tokens deleted from database")}catch(n){console.error("Error clearing Spotify tokens from database:",n)}}subscribeToAuthChanges(){Zr.subscribe(t=>{t.user&&!this.accessToken?this.loadTokensFromStorage():!t.user&&this.accessToken&&this.logout()})}async refreshTokensFromDatabase(){const{user:t}=Zr.getState();if(!t)return!1;if(!this.accessToken&&!localStorage.getItem("spotify_access_token"))return console.log(" User appears to have logged out, skipping database refresh"),!1;try{const{data:n,error:r}=await Xe.from("spotify_tokens").select("*").eq("user_id",t.id).single();if(r||!n)return!1;const i=new Date(n.expires_at).getTime();if(!this.accessToken||n.access_token!==this.accessToken||i!==this.tokenExpiry){const s=this.isAuthenticated();return this.accessToken=n.access_token,this.refreshToken=n.refresh_token,this.tokenExpiry=i,this.saveTokensToLocalStorage(),console.log(" Spotify tokens refreshed from database"),!s&&this.isAuthenticated()?(console.log(" Authentication state changed, dispatching event"),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"))):console.log(" Tokens updated but auth state unchanged, no event dispatched"),!0}return!1}catch(n){return console.error("Error refreshing tokens from database:",n),!1}}}const On=new QB,zp=()=>{const[e,t]=k.useState(!1),[n,r]=k.useState(null),[i,s]=k.useState(!0),[a,l]=k.useState(!1),[c,f]=k.useState(!1);k.useEffect(()=>{if(a)return;(async()=>{if(c){console.log(" Already checking auth, skipping...");return}f(!0);try{if(console.log(" Checking Spotify auth status..."),await On.refreshTokensFromDatabase(),console.log(" Is authenticated:",On.isAuthenticated()),On.isAuthenticated()){console.log(" Getting user data...");const A=await On.getCurrentUser();console.log(" User data:",A),r(A),t(!0)}else r(null),t(!1)}catch(A){console.error(" Error checking Spotify auth status:",A),await On.logout(),t(!1),r(null)}finally{s(!1),l(!0),f(!1)}})()},[a]),k.useEffect(()=>{const S=async()=>{if(c){console.log(" Already checking auth, ignoring event...");return}console.log(" useSpotify: Received Spotify auth event, refreshing status..."),f(!0);try{if(console.log(" useSpotify: Checking if authenticated:",On.isAuthenticated()),On.isAuthenticated())if(!n||!e){console.log(" useSpotify: Getting current user...");const A=await On.getCurrentUser();console.log(" useSpotify: User data received:",A==null?void 0:A.display_name),r(A),t(!0)}else console.log(" useSpotify: User already set, skipping fetch");else console.log(" useSpotify: Not authenticated, clearing state"),t(!1),r(null)}catch(A){console.error(" useSpotify: Error refreshing Spotify auth status:",A),await On.logout(),t(!1),r(null)}finally{f(!1)}};return console.log(" useSpotify: Adding event listener for spotifyAuthCompleted"),window.addEventListener("spotifyAuthCompleted",S),()=>{console.log(" useSpotify: Removing event listener for spotifyAuthCompleted"),window.removeEventListener("spotifyAuthCompleted",S)}},[]);const p=k.useCallback(async()=>{try{console.log(" Starting Spotify login...");const S=await On.getAuthUrl();console.log(" Got auth URL, redirecting..."),window.location.href=S}catch(S){console.error(" Error getting Spotify auth URL:",S),Le.error(`Error al conectar con Spotify: ${S.message}`)}},[]),m=k.useCallback(async()=>{await On.logout(),t(!1),r(null),Le.success("Desconectado de Spotify")},[]),x=k.useCallback(async S=>{if(!e)throw new Error("No authenticated with Spotify");try{return await On.searchTracks(S)}catch(A){throw console.error("Error searching tracks:",A),Le.error("Error al buscar canciones en Spotify"),A}},[e]),g=k.useCallback(async(S,A)=>{if(!e)return Le.error("Debes conectar con Spotify primero"),null;try{const O=await On.createPlaylist(`Band Plan - ${S}`,"Setlist generado automticamente desde Band Plan",!1),K=A.filter(ie=>ie.id).map(ie=>`spotify:track:${ie.id}`);return K.length>0&&await On.addTracksToPlaylist(O.id,K),Le.success(`Playlist "${O.name}" creada en Spotify`),O.external_urls.spotify}catch(O){return console.error("Error creating playlist:",O),Le.error("Error al crear playlist en Spotify"),null}},[e]),N=k.useCallback(async S=>{if(!e){Le.error("Debes conectar con Spotify primero");return}try{await On.playTrack(S)}catch(A){console.error("Error playing track:",A),Le.error("Error al reproducir cancin. Asegrate de tener Spotify abierto.")}},[e]),j=k.useCallback(async()=>{if(e)try{await On.pausePlayback()}catch(S){console.error("Error pausing playback:",S),Le.error("Error al pausar reproduccin")}},[e]),E=k.useCallback(async()=>{if(e)try{await On.resumePlayback()}catch(S){console.error("Error resuming playback:",S),Le.error("Error al reanudar reproduccin")}},[e]),b=k.useCallback(async()=>{try{if(On.isAuthenticated()){const S=await On.getCurrentUser();r(S),t(!0)}else t(!1),r(null)}catch(S){console.error(" Error refreshing Spotify auth status:",S),On.logout(),t(!1),r(null)}},[]);return{isAuthenticated:e,user:n,loading:i,login:p,logout:m,searchTracks:x,createPlaylistFromSetlist:g,playTrack:N,pausePlayback:j,resumePlayback:E,refreshAuthStatus:b}},ZB=({className:e="",compact:t=!1})=>{var p,m;const{isAuthenticated:n,user:r,loading:i,login:s,logout:a,refreshAuthStatus:l}=zp(),c=()=>{console.log(" Resetting Spotify authentication state..."),On.clearAuthState(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const x=new URL(window.location.href);(x.searchParams.has("code")||x.searchParams.has("state"))&&(x.searchParams.delete("code"),x.searchParams.delete("state"),x.searchParams.delete("error"),window.history.replaceState({},document.title,x.toString())),Le.success("Estado de Spotify limpiado. Puedes intentar conectar de nuevo.")},f=()=>{console.log(" Manual refresh requested"),l()};return i?u.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[u.jsx(sa,{className:"w-4 h-4 animate-spin text-green-500"}),u.jsx("span",{className:"text-sm text-gray-600",children:"Conectando con Spotify..."})]}):n?t?u.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[((p=r==null?void 0:r.images)==null?void 0:p[0])&&u.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),u.jsx("span",{className:"text-sm text-gray-700",children:r==null?void 0:r.display_name}),u.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Desconectar Spotify",children:u.jsx(iy,{className:"w-4 h-4"})})]}):u.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-3 sm:p-4 rounded-lg border border-green-200 ${e}`,children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[u.jsx("div",{className:"bg-green-500 p-2 rounded-full flex-shrink-0",children:u.jsx(ei,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[((m=r==null?void 0:r.images)==null?void 0:m[0])&&u.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full flex-shrink-0"}),u.jsxs("span",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:["Conectado como ",r==null?void 0:r.display_name]})]}),u.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Spotify conectado correctamente"})]})]}),u.jsxs(vt,{onClick:a,variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:[u.jsx(iy,{className:"w-4 h-4 mr-2"}),"Desconectar"]})]})}):t?u.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm ${e}`,children:[u.jsx(ei,{className:"w-4 h-4"}),"Conectar Spotify"]}):u.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 ${e}`,children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[u.jsx("div",{className:"bg-green-500 p-2 sm:p-3 rounded-full flex-shrink-0",children:u.jsx(ei,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"Conecta con Spotify"}),u.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Conecta tu cuenta de Spotify para acceder a funciones avanzadas como bsqueda de canciones, creacin automtica de playlists, y reproduccin de previews."}),u.jsxs("ul",{className:"text-xs sm:text-sm text-gray-600 mb-4 space-y-1",children:[u.jsx("li",{children:" Bsqueda automtica de canciones con datos completos"}),u.jsx("li",{children:" Crear playlists automticamente desde tus setlists"}),u.jsx("li",{children:" Reproducir previews de canciones"}),u.jsx("li",{children:" Control de reproduccin desde la app"})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[u.jsxs(vt,{onClick:s,variant:"primary",className:"bg-green-500 hover:bg-green-600 text-white w-full sm:w-auto",size:"sm",children:[u.jsx(ei,{className:"w-4 h-4 mr-2"}),"Conectar con Spotify"]}),u.jsxs(vt,{onClick:f,variant:"secondary",className:"text-blue-600 hover:text-blue-800 w-full sm:w-auto",title:"Actualizar estado de autenticacin",size:"sm",children:[u.jsx(l_,{className:"w-4 h-4 mr-2"}),"Refrescar"]}),u.jsxs(vt,{onClick:c,variant:"secondary",className:"text-gray-600 hover:text-gray-800 w-full sm:w-auto",title:"Limpiar estado de Spotify si hay problemas",size:"sm",children:[u.jsx(l_,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})})},ez=({onSpotifyTrackSelect:e,onDeezerTrackSelect:t,onManualAdd:n,placeholder:r="Buscar canciones o aadir manualmente...",className:i=""})=>{const{isAuthenticated:s,searchTracks:a,loading:l}=zp(),[c,f]=k.useState(""),[p,m]=k.useState([]),[x,g]=k.useState([]),[N,j]=k.useState(!1),[E,b]=k.useState(!1),[S,A]=k.useState(null),O=k.useRef(null),K=k.useRef(null),ie=k.useRef(),W=c||"";k.useEffect(()=>{const F=ne=>{O.current&&!O.current.contains(ne.target)&&b(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]),k.useEffect(()=>{if(W.length<2){m([]),g([]);return}return ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{$(W)},300),()=>{ie.current&&clearTimeout(ie.current)}},[W,s]);const $=async F=>{if(j(!0),s)try{const ne=await a(F);m(ne),b(!0)}catch(ne){console.error("Error searching tracks:",ne),m([]),b(!0)}else try{const be=await(await fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(F)}`)).json();g(be.data||[]),b(!0)}catch(ne){console.error("Error searching Deezer:",ne),g([]),b(!0)}j(!1)},oe=F=>{e(F),f(""),m([]),g([]),b(!1),J()},le=F=>{t&&t(F),f(""),m([]),g([]),b(!1),J()},R=()=>{n(W),f(""),m([]),g([]),b(!1),J()},q=F=>{if(S===F.id){J();return}if(!F.preview_url){Le.error("Preview no disponible para esta cancin");return}J(),K.current&&(K.current.src=F.preview_url,K.current.play(),A(F.id),K.current.onended=()=>{A(null)})},J=()=>{K.current&&(K.current.pause(),K.current.currentTime=0),A(null)},B=F=>{window.open(F.external_urls.spotify,"_blank"),Le.success("Abriendo en Spotify")},fe=F=>{const ne=Math.floor(F/6e4),be=Math.floor(F%6e4/1e3);return`${ne}:${be.toString().padStart(2,"0")}`},he=F=>{const ne=Math.floor(F/60),be=F%60;return`${ne}:${be.toString().padStart(2,"0")}`},G=F=>{if(S===F.id.toString()){J();return}if(!F.preview){Le.error("Preview no disponible para esta cancin");return}J(),K.current&&(K.current.src=F.preview,K.current.play(),A(F.id.toString()),K.current.onended=()=>{A(null)})},P=F=>{window.open(F.link,"_blank"),Le.success("Abriendo en Deezer")};return l?u.jsx("div",{className:`relative ${i}`,children:u.jsxs("div",{className:"relative",children:[u.jsx(wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Cargando...",disabled:!0,value:"",readOnly:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-lg"})]})}):u.jsxs("div",{ref:O,className:`relative ${i}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx(wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",value:W,onChange:F=>f(F.target.value||""),placeholder:r,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg shadow-sm",onFocus:()=>b(!0)}),N&&u.jsx(sa,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),E&&u.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[u.jsxs("div",{onClick:R,className:"p-4 hover:bg-blue-50 cursor-pointer border-b border-gray-100 flex items-center gap-3 bg-blue-25",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:u.jsx(Bg,{className:"w-6 h-6 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-blue-900",children:"Aadir manualmente"}),u.jsx("p",{className:"text-sm text-blue-600",children:W?`Crear "${W}" con formulario`:"Usar formulario manual"})]})]}),s&&p.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100",children:u.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-2",children:[u.jsx(ei,{className:"w-4 h-4"}),"Resultados de Spotify"]})}),p.map(F=>{var ne,be;return u.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("img",{src:((ne=F.album.images[2])==null?void 0:ne.url)||((be=F.album.images[0])==null?void 0:be.url),alt:F.album.name,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),u.jsx("div",{className:"flex-1 min-w-0",onClick:()=>oe(F),children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:"font-medium text-gray-900 truncate",children:F.name}),u.jsx("p",{className:"text-sm text-gray-600 truncate",children:F.artists.map(T=>T.name).join(", ")}),u.jsx("p",{className:"text-xs text-gray-500 truncate",children:F.album.name})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(xp,{className:"w-3 h-3"}),fe(F.duration_ms)]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(SN,{className:"w-3 h-3"}),F.popularity,"%"]})]})]})}),u.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[F.preview_url&&u.jsx("button",{onClick:T=>{T.stopPropagation(),q(F)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Preview (30s)",children:S===F.id?u.jsx(a_,{className:"w-4 h-4"}):u.jsx(o_,{className:"w-4 h-4"})}),u.jsx("button",{onClick:T=>{T.stopPropagation(),B(F)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Abrir en Spotify",children:u.jsx(ry,{className:"w-4 h-4"})})]})]})},F.id)})]}),!s&&x.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"px-4 py-2 bg-orange-50 border-b border-orange-100",children:u.jsxs("p",{className:"text-sm text-orange-700 font-medium flex items-center gap-2",children:[u.jsx(ei,{className:"w-4 h-4"}),"Resultados de Deezer"]})}),x.map(F=>u.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("img",{src:F.album.cover_small||F.album.cover,alt:F.album.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),u.jsx("div",{className:"flex-1 min-w-0",onClick:()=>le(F),children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:"font-medium text-gray-900 truncate",children:F.title}),u.jsx("p",{className:"text-sm text-gray-600 truncate",children:F.artist.name}),u.jsx("p",{className:"text-xs text-gray-500 truncate",children:F.album.title})]}),u.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(xp,{className:"w-3 h-3"}),he(F.duration)]})})]})}),u.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[F.preview&&u.jsx("button",{onClick:ne=>{ne.stopPropagation(),G(F)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Preview (30s)",children:S===F.id.toString()?u.jsx(a_,{className:"w-4 h-4"}):u.jsx(o_,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ne=>{ne.stopPropagation(),P(F)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Abrir en Deezer",children:u.jsx(ry,{className:"w-4 h-4"})})]})]})},F.id))]}),s&&p.length===0&&!N&&W.length>=2&&u.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[u.jsx(ei,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),u.jsxs("p",{children:['No se encontraron canciones en Spotify para "',W,'"']})]}),!s&&x.length===0&&!N&&W.length>=2&&u.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[u.jsx(ei,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),u.jsxs("p",{children:['No se encontraron canciones en Deezer para "',W,'"']})]})]}),u.jsx("audio",{ref:K})]})},e3={title:"",artist:"",duration_minutes:"",key:"",notes:""},t3=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function tz({groupId:e,canManageSongs:t=!0}){const[n,r]=k.useState([]),[i,s]=k.useState(!0),[a,l]=k.useState(!1),[c,f]=k.useState(null),[p,m]=k.useState(e3),[x,g]=k.useState(!1),[N,j]=k.useState(null),[E,b]=k.useState(null),[S,A]=k.useState(""),[O,K]=k.useState(!1),[ie,W]=k.useState(null),[$,oe]=k.useState(""),[le,R]=k.useState(""),[q,J]=k.useState("");zp();const B=n.filter(ee=>{var Fe;const Se=!$||ee.title.toLowerCase().includes($.toLowerCase())||((Fe=ee.artist)==null?void 0:Fe.toLowerCase().includes($.toLowerCase())),_e=!le||ee.key===le,Re=!q||ee.type===q;return Se&&_e&&Re}),fe=[...new Set(n.map(ee=>ee.key).filter(Boolean))].sort();k.useEffect(()=>{he()},[e]),Sp({table:"songs",filter:`group_id=eq.${e}`,onInsert:ee=>{r(Se=>[...Se,ee.new]),Le.success("Nueva cancin aadida en tiempo real")},onUpdate:ee=>{r(Se=>Se.map(_e=>_e.id===ee.new.id?ee.new:_e))},onDelete:ee=>{r(Se=>Se.filter(_e=>_e.id!==ee.old.id)),Le.success("Cancin eliminada en tiempo real")},enabled:!!e});const he=async()=>{s(!0);const ee=await Cf(e);ee&&r(ee),s(!1)},G=async ee=>{const{data:{user:Se}}=await Xe.auth.getUser();if(!Se){Le.error("No se pudo obtener la informacin del usuario");return}const _e=Math.round(ee.duration_ms/6e4),Re=`Popularidad: ${ee.popularity}% | lbum: ${ee.album.name} (${ee.album.release_date.split("-")[0]})`,Fe={title:ee.name,artist:ee.artists.map(Ge=>Ge.name).join(", "),duration_minutes:_e.toString(),key:"",notes:Re,group_id:e,created_by:Se.id};try{await Kh(Fe),await he(),Le.success(`"${ee.name}" aadida desde Spotify`)}catch(Ge){console.error("Error creating song from Spotify:",Ge),Le.error("Error al aadir la cancin")}},P=async ee=>{const{data:{user:Se}}=await Xe.auth.getUser();if(!Se){Le.error("No se pudo obtener la informacin del usuario");return}const _e=Math.round(ee.duration/60),Re=`lbum: ${ee.album.title} | Fuente: Deezer`,Fe={title:ee.title,artist:ee.artist.name,duration_minutes:_e.toString(),key:"",notes:Re,group_id:e,created_by:Se.id};try{await Kh(Fe),await he(),Le.success(`"${ee.title}" aadida desde Deezer`)}catch(Ge){console.error("Error creating song from Deezer:",Ge),Le.error("Error al aadir la cancin")}},F=async ee=>{if(ee.preventDefault(),!p.title.trim()){Le.error("El ttulo es obligatorio");return}const{data:{user:Se}}=await Xe.auth.getUser();if(!Se){Le.error("No se pudo obtener la informacin del usuario");return}const _e={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:Se.id};if(c){const Re=await J_(c.id,_e);Re&&(Le.success("Cancin actualizada correctamente"),r(Fe=>Fe.map(Ge=>Ge.id===c.id?Re:Ge)))}else{const Re=await Kh(_e);Re&&(Le.success("Cancin creada correctamente"),r(Fe=>[...Fe,Re]))}H()},ne=ee=>{var Se;f(ee),m({title:ee.title,artist:ee.artist||"",duration_minutes:((Se=ee.duration_minutes)==null?void 0:Se.toString())||"",key:ee.key||"",notes:ee.notes||""}),l(!0)},be=ee=>{j(ee),g(!0)},T=async()=>{if(!N)return;console.log("Eliminando cancin:",N.id);const ee=await OB(N.id);console.log("Resultado de eliminacin:",ee),ee?(Le.success("Cancin eliminada correctamente"),r(Se=>Se.filter(_e=>_e.id!==N.id))):Le.error("No se pudo eliminar la cancin"),g(!1),j(null)},H=()=>{m(e3),f(null),l(!1)},Z=ee=>{if(!ee)return"-";const Se=Math.floor(ee/60),_e=ee%60;return Se>0?`${Se}h ${_e}m`:`${_e}m`},se=ee=>{if(!ee)return"-";const Se=ee.match(/Tempo:\s*(\d+)\s*BPM/i);return Se?`${Se[1]}`:"-"},ce=(ee,Se,_e)=>{b({songId:ee,field:Se}),A(String(_e||"")),W(null)},je=async(ee,Se)=>{if(S===(ee[Se]||"")){b(null);return}K(!0),W(null);const _e=await J_(ee.id,{[Se]:Se==="duration_minutes"?parseInt(S)||null:S||null});K(!1),_e?(r(Re=>Re.map(Fe=>Fe.id===ee.id?{...Fe,..._e}:Fe)),b(null)):W("Error al guardar")},ke=(ee,Se,_e)=>{ee.key==="Enter"?(ee.preventDefault(),je(Se,_e)):ee.key==="Escape"&&b(null)};return i?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex flex-col gap-4",children:u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[u.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsx(XO,{rows:8})})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex flex-col gap-4",children:u.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),u.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:u.jsx(ZB,{compact:!0})})]})}),t&&u.jsx("div",{className:"mb-6",children:u.jsx(ez,{onSpotifyTrackSelect:G,onDeezerTrackSelect:P,onManualAdd:ee=>{ee&&m(Se=>({...Se,title:ee})),l(!0)},className:"w-full"})}),!t&&u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:u.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),a&&t&&u.jsxs("form",{onSubmit:F,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Cancin":"Nueva Cancin"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(Xn,{label:"Ttulo *",value:p.title,onChange:ee=>m({...p,title:ee.target.value}),required:!0}),u.jsx(Xn,{label:"Artista",value:p.artist,onChange:ee=>m({...p,artist:ee.target.value})}),u.jsx(Xn,{label:"Duracin (minutos)",type:"number",value:p.duration_minutes,onChange:ee=>m({...p,duration_minutes:ee.target.value}),min:"1"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),u.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:ee=>m({...p,key:ee.target.value}),children:t3.map(ee=>u.jsx("option",{value:ee,children:ee||"Sin especificar"},ee))})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),u.jsx("textarea",{value:p.notes,onChange:ee=>m({...p,notes:ee.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la cancin..."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(vt,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),u.jsx(vt,{type:"button",variant:"secondary",onClick:H,children:"Cancelar"})]})]}),u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Aade la primera cancin para empezar."}):B.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No se encontraron canciones que coincidan con los filtros aplicados.",u.jsx("button",{onClick:()=>{oe(""),R(""),J("")},className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar filtros"})]}):u.jsxs("div",{className:"overflow-x-auto",children:[u.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[u.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",B.length," de ",n.length," canciones"]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(wp,{className:"w-3 h-3 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Buscar...",value:$,onChange:ee=>oe(ee.target.value),className:"w-20 sm:w-24 px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400 focus:w-28 sm:focus:w-32 transition-all"})]}),u.jsxs("select",{value:le,onChange:ee=>R(ee.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[u.jsx("option",{value:"",children:"Clave"}),fe.map(ee=>u.jsx("option",{value:ee,children:ee},ee))]}),u.jsxs("select",{value:q,onChange:ee=>J(ee.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[u.jsx("option",{value:"",children:"Tipo"}),u.jsx("option",{value:"song",children:"Canciones"}),u.jsx("option",{value:"medley",children:"Medleys"})]})]})]})}),u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ttulo"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duracin"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BPM"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(ee=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(E==null?void 0:E.songId)===ee.id&&E.field==="title"?u.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:Se=>A(Se.target.value),onBlur:()=>je(ee,"title"),onKeyDown:Se=>ke(Se,ee,"title"),disabled:O}):u.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&ce(ee.id,"title",ee.title),title:"Haz clic para editar",children:ee.title}),(E==null?void 0:E.songId)===ee.id&&ie&&u.jsx("div",{className:"text-xs text-red-500 mt-1",children:ie})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===ee.id&&E.field==="artist"?u.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:Se=>A(Se.target.value),onBlur:()=>je(ee,"artist"),onKeyDown:Se=>ke(Se,ee,"artist"),disabled:O}):u.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&ce(ee.id,"artist",ee.artist||""),title:"Haz clic para editar",children:ee.artist||u.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===ee.id&&E.field==="duration_minutes"?u.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:S,autoFocus:!0,onChange:Se=>A(Se.target.value),onBlur:()=>je(ee,"duration_minutes"),onKeyDown:Se=>ke(Se,ee,"duration_minutes"),disabled:O}):u.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var Se;return t&&ce(ee.id,"duration_minutes",((Se=ee.duration_minutes)==null?void 0:Se.toString())||"")},title:"Haz clic para editar",children:Z(ee.duration_minutes)})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===ee.id&&E.field==="key"?u.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:Se=>A(Se.target.value),onBlur:()=>je(ee,"key"),onKeyDown:Se=>ke(Se,ee,"key"),disabled:O,children:t3.map(Se=>u.jsx("option",{value:Se,children:Se||"Sin especificar"},Se))}):u.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&ce(ee.id,"key",ee.key||""),title:"Haz clic para editar",children:ee.key||u.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:u.jsx("div",{className:"cursor-default",children:se(ee.notes)==="-"?u.jsx("span",{className:"text-gray-400",children:"-"}):u.jsx("span",{className:"font-medium",children:se(ee.notes)})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>ne(ee),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),u.jsx("button",{onClick:()=>be(ee),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},ee.id))})]})]})}),x&&N&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar la cancin "',N.title,'"? Esta accin no se puede deshacer.']}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(vt,{variant:"secondary",onClick:()=>{g(!1),j(null)},children:"Cancelar"}),u.jsx(vt,{variant:"danger",onClick:T,children:"Eliminar"})]})]})})]})}var B6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n3=yt.createContext&&yt.createContext(B6),nz=["attr","size","title"];function rz(e,t){if(e==null)return{};var n=iz(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function iz(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lg.apply(this,arguments)}function r3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(n),!0).forEach(function(r){sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sz(e,t,n){return t=az(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function az(e){var t=oz(e,"string");return typeof t=="symbol"?t:t+""}function oz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z6(e){return e&&e.map((t,n)=>yt.createElement(t.tag,cg({key:n},t.attr),z6(t.child)))}function No(e){return t=>yt.createElement(lz,lg({attr:cg({},e.attr)},t),z6(e.child))}function lz(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=rz(e,nz),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),yt.createElement("svg",lg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:cg(cg({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&yt.createElement("title",null,s),e.children)};return n3!==void 0?yt.createElement(n3.Consumer,null,n=>t(n)):t(B6)}function i3(e){return No({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function cz(e){return No({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function uz(e){return No({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function dz(e){return No({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function U6(e){return No({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function fz(e){return No({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function hz(e){return No({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function Ny(e){return No({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function s3(e){return No({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function pz(e){return No({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function mz(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Zg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function tx(e){return"nodeType"in e}function gs(e){var t,n;return e?Rf(e)?e:tx(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function nx(e){const{Document:t}=gs(e);return e instanceof t}function Up(e){return Rf(e)?!1:e instanceof gs(e).HTMLElement}function q6(e){return e instanceof gs(e).SVGElement}function Ff(e){return e?Rf(e)?e.document:tx(e)?nx(e)?e:Up(e)||q6(e)?e.ownerDocument:document:document:document}const bo=Zg?k.useLayoutEffect:k.useEffect;function rx(e){const t=k.useRef(e);return bo(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function gz(){const e=k.useRef(null),t=k.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=k.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Np(e,t){t===void 0&&(t=[e]);const n=k.useRef(e);return bo(()=>{n.current!==e&&(n.current=e)},t),n}function qp(e,t){const n=k.useRef();return k.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ug(e){const t=rx(e),n=k.useRef(null),r=k.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function jy(e){const t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}let Hv={};function Wp(e,t){return k.useMemo(()=>{if(t)return t;const n=Hv[e]==null?0:Hv[e]+1;return Hv[e]=n,e+"-"+n},[e,t])}function W6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[c,f]of l){const p=s[c];p!=null&&(s[c]=p+e*f)}return s},{...t})}}const vf=W6(1),dg=W6(-1);function vz(e){return"clientX"in e&&"clientY"in e}function ix(e){if(!e)return!1;const{KeyboardEvent:t}=gs(e.target);return t&&e instanceof t}function yz(e){if(!e)return!1;const{TouchEvent:t}=gs(e.target);return t&&e instanceof t}function ky(e){if(yz(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return vz(e)?{x:e.clientX,y:e.clientY}:null}const jp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[jp.Translate.toString(e),jp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),a3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xz(e){return e.matches(a3)?e:e.querySelector(a3)}const wz={display:"none"};function bz(e){let{id:t,value:n}=e;return yt.createElement("div",{id:t,style:wz},n)}function _z(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return yt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Sz(){const[e,t]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const H6=k.createContext(null);function Nz(e){const t=k.useContext(H6);k.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function jz(){const[e]=k.useState(()=>new Set),t=k.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[k.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const kz={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ez={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Cz(e){let{announcements:t=Ez,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=kz}=e;const{announce:s,announcement:a}=Sz(),l=Wp("DndLiveRegion"),[c,f]=k.useState(!1);if(k.useEffect(()=>{f(!0)},[]),Nz(k.useMemo(()=>({onDragStart(m){let{active:x}=m;s(t.onDragStart({active:x}))},onDragMove(m){let{active:x,over:g}=m;t.onDragMove&&s(t.onDragMove({active:x,over:g}))},onDragOver(m){let{active:x,over:g}=m;s(t.onDragOver({active:x,over:g}))},onDragEnd(m){let{active:x,over:g}=m;s(t.onDragEnd({active:x,over:g}))},onDragCancel(m){let{active:x,over:g}=m;s(t.onDragCancel({active:x,over:g}))}}),[s,t])),!c)return null;const p=yt.createElement(yt.Fragment,null,yt.createElement(bz,{id:r,value:i.draggable}),yt.createElement(_z,{id:l,announcement:a}));return n?Pu.createPortal(p,n):p}var Ur;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ur||(Ur={}));function fg(){}function Vv(e,t){return k.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Az(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ba=Object.freeze({x:0,y:0});function Lz(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pz(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Tz(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Mz(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function o3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Dz=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=o3(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const f=Lz(o3(c),i);s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(Pz)};function Iz(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const c=t.width*t.height,f=e.width*e.height,p=a*l,m=p/(c+f-p);return Number(m.toFixed(4))}return 0}const Oz=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=Iz(l,t);c>0&&i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(Tz)};function Rz(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function V6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ba}function Fz(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const $z=Fz(1);function Bz(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function zz(e,t,n){const r=Bz(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,m=s?e.height/s:e.height;return{width:p,height:m,top:f,right:c+p,bottom:f+m,left:c}}const Uz={ignoreTransform:!1};function $f(e,t){t===void 0&&(t=Uz);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=gs(e).getComputedStyle(e);f&&(n=zz(n,f,p))}const{top:r,left:i,width:s,height:a,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:c}}function l3(e){return $f(e,{ignoreTransform:!0})}function qz(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Wz(e,t){return t===void 0&&(t=gs(e).getComputedStyle(e)),t.position==="fixed"}function Hz(e,t){t===void 0&&(t=gs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function sx(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(nx(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Up(i)||q6(i)||n.includes(i))return n;const s=gs(e).getComputedStyle(i);return i!==e&&Hz(i,s)&&n.push(i),Wz(i,s)?n:r(i.parentNode)}return e?r(e):n}function G6(e){const[t]=sx(e,1);return t??null}function Gv(e){return!Zg||!e?null:Rf(e)?e:tx(e)?nx(e)||e===Ff(e).scrollingElement?window:Up(e)?e:null:null}function Y6(e){return Rf(e)?e.scrollX:e.scrollLeft}function K6(e){return Rf(e)?e.scrollY:e.scrollTop}function Ey(e){return{x:Y6(e),y:K6(e)}}var Qr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Qr||(Qr={}));function J6(e){return!Zg||!e?!1:e===document.scrollingElement}function X6(e){const t={x:0,y:0},n=J6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const Vz={x:.2,y:.2};function Gz(e,t,n,r,i){let{top:s,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=Vz);const{isTop:f,isBottom:p,isLeft:m,isRight:x}=X6(e),g={x:0,y:0},N={x:0,y:0},j={height:t.height*i.y,width:t.width*i.x};return!f&&s<=t.top+j.height?(g.y=Qr.Backward,N.y=r*Math.abs((t.top+j.height-s)/j.height)):!p&&c>=t.bottom-j.height&&(g.y=Qr.Forward,N.y=r*Math.abs((t.bottom-j.height-c)/j.height)),!x&&l>=t.right-j.width?(g.x=Qr.Forward,N.x=r*Math.abs((t.right-j.width-l)/j.width)):!m&&a<=t.left+j.width&&(g.x=Qr.Backward,N.x=r*Math.abs((t.left+j.width-a)/j.width)),{direction:g,speed:N}}function Yz(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Q6(e){return e.reduce((t,n)=>vf(t,Ey(n)),Ba)}function Kz(e){return e.reduce((t,n)=>t+Y6(n),0)}function Jz(e){return e.reduce((t,n)=>t+K6(n),0)}function Xz(e,t){if(t===void 0&&(t=$f),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);G6(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Qz=[["x",["left","right"],Kz],["y",["top","bottom"],Jz]];class ax{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sx(n),i=Q6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of Qz)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=l(r),p=i[s]-f;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jh{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Zz(e){const{EventTarget:t}=gs(e);return e instanceof t?e:Ff(e)}function Yv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ea;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ea||(ea={}));function c3(e){e.preventDefault()}function eU(e){e.stopPropagation()}var Sn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Sn||(Sn={}));const Z6={start:[Sn.Space,Sn.Enter],cancel:[Sn.Esc],end:[Sn.Space,Sn.Enter,Sn.Tab]},tU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Sn.Right:return{...n,x:n.x+25};case Sn.Left:return{...n,x:n.x-25};case Sn.Down:return{...n,y:n.y+25};case Sn.Up:return{...n,y:n.y-25}}};class ox{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Jh(Ff(n)),this.windowListeners=new Jh(gs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ea.Resize,this.handleCancel),this.windowListeners.add(ea.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ea.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Xz(r),n(Ba)}handleKeyDown(t){if(ix(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=Z6,coordinateGetter:a=tU,scrollBehavior:l="smooth"}=i,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,p=f?{x:f.left,y:f.top}:Ba;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(t,{active:n,context:r.current,currentCoordinates:p});if(m){const x=dg(m,p),g={x:0,y:0},{scrollableAncestors:N}=r.current;for(const j of N){const E=t.code,{isTop:b,isRight:S,isLeft:A,isBottom:O,maxScroll:K,minScroll:ie}=X6(j),W=Yz(j),$={x:Math.min(E===Sn.Right?W.right-W.width/2:W.right,Math.max(E===Sn.Right?W.left:W.left+W.width/2,m.x)),y:Math.min(E===Sn.Down?W.bottom-W.height/2:W.bottom,Math.max(E===Sn.Down?W.top:W.top+W.height/2,m.y))},oe=E===Sn.Right&&!S||E===Sn.Left&&!A,le=E===Sn.Down&&!O||E===Sn.Up&&!b;if(oe&&$.x!==m.x){const R=j.scrollLeft+x.x,q=E===Sn.Right&&R<=K.x||E===Sn.Left&&R>=ie.x;if(q&&!x.y){j.scrollTo({left:R,behavior:l});return}q?g.x=j.scrollLeft-R:g.x=E===Sn.Right?j.scrollLeft-K.x:j.scrollLeft-ie.x,g.x&&j.scrollBy({left:-g.x,behavior:l});break}else if(le&&$.y!==m.y){const R=j.scrollTop+x.y,q=E===Sn.Down&&R<=K.y||E===Sn.Up&&R>=ie.y;if(q&&!x.x){j.scrollTo({top:R,behavior:l});return}q?g.y=j.scrollTop-R:g.y=E===Sn.Down?j.scrollTop-K.y:j.scrollTop-ie.y,g.y&&j.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,vf(dg(m,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ox.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Z6,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function u3(e){return!!(e&&"distance"in e)}function d3(e){return!!(e&&"delay"in e)}class lx{constructor(t,n,r){var i;r===void 0&&(r=Zz(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Ff(a),this.documentListeners=new Jh(this.document),this.listeners=new Jh(r),this.windowListeners=new Jh(gs(a)),this.initialCoordinates=(i=ky(s))!=null?i:Ba,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ea.Resize,this.handleCancel),this.windowListeners.add(ea.DragStart,c3),this.windowListeners.add(ea.VisibilityChange,this.handleCancel),this.windowListeners.add(ea.ContextMenu,c3),this.documentListeners.add(ea.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(d3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(u3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ea.Click,eU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ea.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=ky(t))!=null?n:Ba,f=dg(i,c);if(!r&&l){if(u3(l)){if(l.tolerance!=null&&Yv(f,l.tolerance))return this.handleCancel();if(Yv(f,l.distance))return this.handleStart()}if(d3(l)&&Yv(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Sn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const nU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cx extends lx{constructor(t){const{event:n}=t,r=Ff(n.target);super(t,nU,r)}}cx.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const rU={move:{name:"mousemove"},end:{name:"mouseup"}};var Cy;(function(e){e[e.RightClick=2]="RightClick"})(Cy||(Cy={}));class iU extends lx{constructor(t){super(t,rU,Ff(t.event.target))}}iU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Cy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Kv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ej extends lx{constructor(t){super(t,Kv)}static setup(){return window.addEventListener(Kv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Kv.move.name,t)};function t(){}}}ej.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Xh;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xh||(Xh={}));var hg;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(hg||(hg={}));function sU(e){let{acceleration:t,activator:n=Xh.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=hg.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:p,delta:m,threshold:x}=e;const g=oU({delta:m,disabled:!s}),[N,j]=gz(),E=k.useRef({x:0,y:0}),b=k.useRef({x:0,y:0}),S=k.useMemo(()=>{switch(n){case Xh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Xh.DraggableRect:return i}},[n,i,c]),A=k.useRef(null),O=k.useCallback(()=>{const ie=A.current;if(!ie)return;const W=E.current.x*b.current.x,$=E.current.y*b.current.y;ie.scrollBy(W,$)},[]),K=k.useMemo(()=>l===hg.TreeOrder?[...f].reverse():f,[l,f]);k.useEffect(()=>{if(!s||!f.length||!S){j();return}for(const ie of K){if((r==null?void 0:r(ie))===!1)continue;const W=f.indexOf(ie),$=p[W];if(!$)continue;const{direction:oe,speed:le}=Gz(ie,$,S,t,x);for(const R of["x","y"])g[R][oe[R]]||(le[R]=0,oe[R]=0);if(le.x>0||le.y>0){j(),A.current=ie,N(O,a),E.current=le,b.current=oe;return}}E.current={x:0,y:0},b.current={x:0,y:0},j()},[t,O,r,j,s,a,JSON.stringify(S),JSON.stringify(g),N,f,K,p,JSON.stringify(x)])}const aU={x:{[Qr.Backward]:!1,[Qr.Forward]:!1},y:{[Qr.Backward]:!1,[Qr.Forward]:!1}};function oU(e){let{delta:t,disabled:n}=e;const r=jy(t);return qp(i=>{if(n||!r||!i)return aU;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Qr.Backward]:i.x[Qr.Backward]||s.x===-1,[Qr.Forward]:i.x[Qr.Forward]||s.x===1},y:{[Qr.Backward]:i.y[Qr.Backward]||s.y===-1,[Qr.Forward]:i.y[Qr.Forward]||s.y===1}}},[n,t,r])}function lU(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return qp(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function cU(e,t){return k.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var kp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(kp||(kp={}));var Ay;(function(e){e.Optimized="optimized"})(Ay||(Ay={}));const f3=new Map;function uU(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=k.useState(null),{frequency:l,measure:c,strategy:f}=i,p=k.useRef(e),m=E(),x=Np(m),g=k.useCallback(function(b){b===void 0&&(b=[]),!x.current&&a(S=>S===null?b:S.concat(b.filter(A=>!S.includes(A))))},[x]),N=k.useRef(null),j=qp(b=>{if(m&&!n)return f3;if(!b||b===f3||p.current!==e||s!=null){const S=new Map;for(let A of e){if(!A)continue;if(s&&s.length>0&&!s.includes(A.id)&&A.rect.current){S.set(A.id,A.rect.current);continue}const O=A.node.current,K=O?new ax(c(O),O):null;A.rect.current=K,K&&S.set(A.id,K)}return S}return b},[e,s,n,m,c]);return k.useEffect(()=>{p.current=e},[e]),k.useEffect(()=>{m||g()},[n,m]),k.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),k.useEffect(()=>{m||typeof l!="number"||N.current!==null||(N.current=setTimeout(()=>{g(),N.current=null},l))},[l,m,g,...r]),{droppableRects:j,measureDroppableContainers:g,measuringScheduled:s!=null};function E(){switch(f){case kp.Always:return!1;case kp.BeforeDragging:return n;default:return!n}}}function tj(e,t){return qp(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function dU(e,t){return tj(e,t)}function fU(e){let{callback:t,disabled:n}=e;const r=rx(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function e1(e){let{callback:t,disabled:n}=e;const r=rx(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function hU(e){return new ax($f(e),e)}function h3(e,t,n){t===void 0&&(t=hU);const[r,i]=k.useState(null);function s(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=fU({callback(c){if(e)for(const f of c){const{type:p,target:m}=f;if(p==="childList"&&m instanceof HTMLElement&&m.contains(e)){s();break}}}}),l=e1({callback:s});return bo(()=>{s(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function pU(e){const t=tj(e);return V6(e,t)}const p3=[];function mU(e){const t=k.useRef(e),n=qp(r=>e?r&&r!==p3&&e&&t.current&&e.parentNode===t.current.parentNode?r:sx(e):p3,[e]);return k.useEffect(()=>{t.current=e},[e]),n}function gU(e){const[t,n]=k.useState(null),r=k.useRef(e),i=k.useCallback(s=>{const a=Gv(s.target);a&&n(l=>l?(l.set(a,Ey(a)),new Map(l)):null)},[]);return k.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(c=>{const f=Gv(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Ey(f)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(c=>{const f=Gv(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),k.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>vf(s,a),Ba):Q6(e):Ba,[e,t])}function m3(e,t){t===void 0&&(t=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},t),k.useEffect(()=>{const r=e!==Ba;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?dg(e,n.current):Ba}function vU(e){k.useEffect(()=>{if(!Zg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function yU(e,t){return k.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function nj(e){return k.useMemo(()=>e?qz(e):null,[e])}const g3=[];function xU(e,t){t===void 0&&(t=$f);const[n]=e,r=nj(n?gs(n):null),[i,s]=k.useState(g3);function a(){s(()=>e.length?e.map(c=>J6(c)?r:new ax(t(c),c)):g3)}const l=e1({callback:a});return bo(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),i}function wU(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Up(t)?t:e}function bU(e){let{measure:t}=e;const[n,r]=k.useState(null),i=k.useCallback(f=>{for(const{target:p}of f)if(Up(p)){r(m=>{const x=t(p);return m?{...m,width:x.width,height:x.height}:x});break}},[t]),s=e1({callback:i}),a=k.useCallback(f=>{const p=wU(f);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[l,c]=ug(a);return k.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const _U=[{sensor:cx,options:{}},{sensor:ox,options:{}}],SU={current:{}},S0={draggable:{measure:l3},droppable:{measure:l3,strategy:kp.WhileDragging,frequency:Ay.Optimized},dragOverlay:{measure:$f}};class Qh extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const NU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:S0,measureDroppableContainers:fg,windowRect:null,measuringScheduled:!1},jU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fg,draggableNodes:new Map,over:null,measureDroppableContainers:fg},t1=k.createContext(jU),rj=k.createContext(NU);function kU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qh}}}function EU(e,t){switch(t.type){case Ur.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ur.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ur.DragEnd:case Ur.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ur.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Qh(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Ur.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Qh(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case Ur.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Qh(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function CU(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=k.useContext(t1),s=jy(r),a=jy(n==null?void 0:n.id);return k.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!ix(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:c,node:f}=l;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[c.current,f.current]){if(!p)continue;const m=xz(p);if(m){m.focus();break}}})}},[r,t,i,a,s]),null}function AU(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function LU(e){return k.useMemo(()=>({draggable:{...S0.draggable,...e==null?void 0:e.draggable},droppable:{...S0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...S0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function PU(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=k.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;bo(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const p=n(f),m=V6(p,r);if(a||(m.x=0),l||(m.y=0),s.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=G6(f);x&&x.scrollBy({top:m.y,left:m.x})}},[t,a,l,r,n])}const ij=k.createContext({...Ba,scaleX:1,scaleY:1});var lc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(lc||(lc={}));const TU=k.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:c=!0,children:f,sensors:p=_U,collisionDetection:m=Oz,measuring:x,modifiers:g,...N}=t;const j=k.useReducer(EU,void 0,kU),[E,b]=j,[S,A]=jz(),[O,K]=k.useState(lc.Uninitialized),ie=O===lc.Initialized,{draggable:{active:W,nodes:$,translate:oe},droppable:{containers:le}}=E,R=W!=null?$.get(W):null,q=k.useRef({initial:null,translated:null}),J=k.useMemo(()=>{var un;return W!=null?{id:W,data:(un=R==null?void 0:R.data)!=null?un:SU,rect:q}:null},[W,R]),B=k.useRef(null),[fe,he]=k.useState(null),[G,P]=k.useState(null),F=Np(N,Object.values(N)),ne=Wp("DndDescribedBy",a),be=k.useMemo(()=>le.getEnabled(),[le]),T=LU(x),{droppableRects:H,measureDroppableContainers:Z,measuringScheduled:se}=uU(be,{dragging:ie,dependencies:[oe.x,oe.y],config:T.droppable}),ce=lU($,W),je=k.useMemo(()=>G?ky(G):null,[G]),ke=or(),ee=dU(ce,T.draggable.measure);PU({activeNode:W!=null?$.get(W):null,config:ke.layoutShiftCompensation,initialRect:ee,measure:T.draggable.measure});const Se=h3(ce,T.draggable.measure,ee),_e=h3(ce?ce.parentElement:null),Re=k.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:$,draggingNode:null,draggingNodeRect:null,droppableContainers:le,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Fe=le.getNodeFor((n=Re.current.over)==null?void 0:n.id),Ge=bU({measure:T.dragOverlay.measure}),pe=(r=Ge.nodeRef.current)!=null?r:ce,te=ie?(i=Ge.rect)!=null?i:Se:null,et=!!(Ge.nodeRef.current&&Ge.rect),He=pU(et?null:Se),Ve=nj(pe?gs(pe):null),Qe=mU(ie?Fe??ce:null),at=xU(Qe),Ae=AU(g,{transform:{x:oe.x-He.x,y:oe.y-He.y,scaleX:1,scaleY:1},activatorEvent:G,active:J,activeNodeRect:Se,containerNodeRect:_e,draggingNodeRect:te,over:Re.current.over,overlayNodeRect:Ge.rect,scrollableAncestors:Qe,scrollableAncestorRects:at,windowRect:Ve}),de=je?vf(je,oe):null,me=gU(Qe),ge=m3(me),$e=m3(me,[Se]),We=vf(Ae,ge),Ke=te?$z(te,Ae):null,Me=J&&Ke?m({active:J,collisionRect:Ke,droppableRects:H,droppableContainers:be,pointerCoordinates:de}):null,rt=Mz(Me,"id"),[qe,At]=k.useState(null),lt=et?Ae:vf(Ae,$e),Bt=Rz(lt,(s=qe==null?void 0:qe.rect)!=null?s:null,Se),St=k.useRef(null),Ct=k.useCallback((un,qt)=>{let{sensor:_t,options:Wt}=qt;if(B.current==null)return;const wn=$.get(B.current);if(!wn)return;const rn=un.nativeEvent,lr=new _t({active:B.current,activeNode:wn,event:rn,options:Wt,context:Re,onAbort(gt){if(!$.get(gt))return;const{onDragAbort:cr}=F.current,Pn={id:gt};cr==null||cr(Pn),S({type:"onDragAbort",event:Pn})},onPending(gt,Zn,cr,Pn){if(!$.get(gt))return;const{onDragPending:Tn}=F.current,er={id:gt,constraint:Zn,initialCoordinates:cr,offset:Pn};Tn==null||Tn(er),S({type:"onDragPending",event:er})},onStart(gt){const Zn=B.current;if(Zn==null)return;const cr=$.get(Zn);if(!cr)return;const{onDragStart:Pn}=F.current,Rn={activatorEvent:rn,active:{id:Zn,data:cr.data,rect:q}};Pu.unstable_batchedUpdates(()=>{Pn==null||Pn(Rn),K(lc.Initializing),b({type:Ur.DragStart,initialCoordinates:gt,active:Zn}),S({type:"onDragStart",event:Rn}),he(St.current),P(rn)})},onMove(gt){b({type:Ur.DragMove,coordinates:gt})},onEnd:Rr(Ur.DragEnd),onCancel:Rr(Ur.DragCancel)});St.current=lr;function Rr(gt){return async function(){const{active:cr,collisions:Pn,over:Rn,scrollAdjustedTranslate:Tn}=Re.current;let er=null;if(cr&&Tn){const{cancelDrop:Wi}=F.current;er={activatorEvent:rn,active:cr,collisions:Pn,delta:Tn,over:Rn},gt===Ur.DragEnd&&typeof Wi=="function"&&await Promise.resolve(Wi(er))&&(gt=Ur.DragCancel)}B.current=null,Pu.unstable_batchedUpdates(()=>{b({type:gt}),K(lc.Uninitialized),At(null),he(null),P(null),St.current=null;const Wi=gt===Ur.DragEnd?"onDragEnd":"onDragCancel";if(er){const Ai=F.current[Wi];Ai==null||Ai(er),S({type:Wi,event:er})}})}}},[$]),mn=k.useCallback((un,qt)=>(_t,Wt)=>{const wn=_t.nativeEvent,rn=$.get(Wt);if(B.current!==null||!rn||wn.dndKit||wn.defaultPrevented)return;const lr={active:rn};un(_t,qt.options,lr)===!0&&(wn.dndKit={capturedBy:qt.sensor},B.current=Wt,Ct(_t,qt))},[$,Ct]),Pt=cU(p,mn);vU(p),bo(()=>{Se&&O===lc.Initializing&&K(lc.Initialized)},[Se,O]),k.useEffect(()=>{const{onDragMove:un}=F.current,{active:qt,activatorEvent:_t,collisions:Wt,over:wn}=Re.current;if(!qt||!_t)return;const rn={active:qt,activatorEvent:_t,collisions:Wt,delta:{x:We.x,y:We.y},over:wn};Pu.unstable_batchedUpdates(()=>{un==null||un(rn),S({type:"onDragMove",event:rn})})},[We.x,We.y]),k.useEffect(()=>{const{active:un,activatorEvent:qt,collisions:_t,droppableContainers:Wt,scrollAdjustedTranslate:wn}=Re.current;if(!un||B.current==null||!qt||!wn)return;const{onDragOver:rn}=F.current,lr=Wt.get(rt),Rr=lr&&lr.rect.current?{id:lr.id,rect:lr.rect.current,data:lr.data,disabled:lr.disabled}:null,gt={active:un,activatorEvent:qt,collisions:_t,delta:{x:wn.x,y:wn.y},over:Rr};Pu.unstable_batchedUpdates(()=>{At(Rr),rn==null||rn(gt),S({type:"onDragOver",event:gt})})},[rt]),bo(()=>{Re.current={activatorEvent:G,active:J,activeNode:ce,collisionRect:Ke,collisions:Me,droppableRects:H,draggableNodes:$,draggingNode:pe,draggingNodeRect:te,droppableContainers:le,over:qe,scrollableAncestors:Qe,scrollAdjustedTranslate:We},q.current={initial:te,translated:Ke}},[J,ce,Me,Ke,$,pe,te,H,le,qe,Qe,We]),sU({...ke,delta:oe,draggingRect:Ke,pointerCoordinates:de,scrollableAncestors:Qe,scrollableAncestorRects:at});const Qn=k.useMemo(()=>({active:J,activeNode:ce,activeNodeRect:Se,activatorEvent:G,collisions:Me,containerNodeRect:_e,dragOverlay:Ge,draggableNodes:$,droppableContainers:le,droppableRects:H,over:qe,measureDroppableContainers:Z,scrollableAncestors:Qe,scrollableAncestorRects:at,measuringConfiguration:T,measuringScheduled:se,windowRect:Ve}),[J,ce,Se,G,Me,_e,Ge,$,le,H,qe,Z,Qe,at,T,se,Ve]),Et=k.useMemo(()=>({activatorEvent:G,activators:Pt,active:J,activeNodeRect:Se,ariaDescribedById:{draggable:ne},dispatch:b,draggableNodes:$,over:qe,measureDroppableContainers:Z}),[G,Pt,J,Se,b,ne,$,qe,Z]);return yt.createElement(H6.Provider,{value:A},yt.createElement(t1.Provider,{value:Et},yt.createElement(rj.Provider,{value:Qn},yt.createElement(ij.Provider,{value:Bt},f)),yt.createElement(CU,{disabled:(l==null?void 0:l.restoreFocus)===!1})),yt.createElement(Cz,{...l,hiddenTextDescribedById:ne}));function or(){const un=(fe==null?void 0:fe.autoScrollEnabled)===!1,qt=typeof c=="object"?c.enabled===!1:c===!1,_t=ie&&!un&&!qt;return typeof c=="object"?{...c,enabled:_t}:{enabled:_t}}}),MU=k.createContext(null),v3="button",DU="Draggable";function IU(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Wp(DU),{activators:a,activatorEvent:l,active:c,activeNodeRect:f,ariaDescribedById:p,draggableNodes:m,over:x}=k.useContext(t1),{role:g=v3,roleDescription:N="draggable",tabIndex:j=0}=i??{},E=(c==null?void 0:c.id)===t,b=k.useContext(E?ij:MU),[S,A]=ug(),[O,K]=ug(),ie=yU(a,t),W=Np(n);bo(()=>(m.set(t,{id:t,key:s,node:S,activatorNode:O,data:W}),()=>{const oe=m.get(t);oe&&oe.key===s&&m.delete(t)}),[m,t]);const $=k.useMemo(()=>({role:g,tabIndex:j,"aria-disabled":r,"aria-pressed":E&&g===v3?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[r,g,j,E,N,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:f,attributes:$,isDragging:E,listeners:r?void 0:ie,node:S,over:x,setNodeRef:A,setActivatorNodeRef:K,transform:b}}function OU(){return k.useContext(rj)}const RU="Droppable",FU={timeout:25};function $U(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Wp(RU),{active:a,dispatch:l,over:c,measureDroppableContainers:f}=k.useContext(t1),p=k.useRef({disabled:n}),m=k.useRef(!1),x=k.useRef(null),g=k.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:E}={...FU,...i},b=Np(j??r),S=k.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(b.current)?b.current:[b.current]),g.current=null},E)},[E]),A=e1({callback:S,disabled:N||!a}),O=k.useCallback(($,oe)=>{A&&(oe&&(A.unobserve(oe),m.current=!1),$&&A.observe($))},[A]),[K,ie]=ug(O),W=Np(t);return k.useEffect(()=>{!A||!K.current||(A.disconnect(),m.current=!1,A.observe(K.current))},[K,A]),k.useEffect(()=>(l({type:Ur.RegisterDroppable,element:{id:r,key:s,disabled:n,node:K,rect:x,data:W}}),()=>l({type:Ur.UnregisterDroppable,key:s,id:r})),[r]),k.useEffect(()=>{n!==p.current.disabled&&(l({type:Ur.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:a,rect:x,isOver:(c==null?void 0:c.id)===r,node:K,over:c,setNodeRef:ie}}function ux(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function BU(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function e0(e){return e!==null&&e>=0}function zU(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function UU(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const sj=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=ux(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},t0={scaleX:1,scaleY:1},qU=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const f=s[a];return f?{x:0,y:n<a?f.top+f.height-(l.top+l.height):f.top-l.top,...t0}:null}const c=WU(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-c,...t0}:i<n&&i>=a?{x:0,y:l.height+c,...t0}:{x:0,y:0,...t0}};function WU(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const aj="Sortable",oj=yt.createContext({activeIndex:-1,containerId:aj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:sj,disabled:{draggable:!1,droppable:!1}});function HU(e){let{children:t,id:n,items:r,strategy:i=sj,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:f,measureDroppableContainers:p}=OU(),m=Wp(aj,n),x=l.rect!==null,g=k.useMemo(()=>r.map(ie=>typeof ie=="object"&&"id"in ie?ie.id:ie),[r]),N=a!=null,j=a?g.indexOf(a.id):-1,E=f?g.indexOf(f.id):-1,b=k.useRef(g),S=!zU(g,b.current),A=E!==-1&&j===-1||S,O=UU(s);bo(()=>{S&&N&&p(g)},[S,g,N,p]),k.useEffect(()=>{b.current=g},[g]);const K=k.useMemo(()=>({activeIndex:j,containerId:m,disabled:O,disableTransforms:A,items:g,overIndex:E,useDragOverlay:x,sortedRects:BU(g,c),strategy:i}),[j,m,O.draggable,O.droppable,A,g,E,c,x,i]);return yt.createElement(oj.Provider,{value:K},t)}const VU=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return ux(n,r,i).indexOf(t)},GU=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:f}=e;return!f||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===c},YU={duration:200,easing:"ease"},lj="transform",KU=jp.Transition.toString({property:lj,duration:0,easing:"linear"}),JU={roleDescription:"sortable"};function XU(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=k.useState(null),l=k.useRef(n);return bo(()=>{if(!t&&n!==l.current&&r.current){const c=i.current;if(c){const f=$f(r.current,{ignoreTransform:!0}),p={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(p.x||p.y)&&a(p)}}n!==l.current&&(l.current=n)},[t,n,r,i]),k.useEffect(()=>{s&&a(null)},[s]),s}function QU(e){let{animateLayoutChanges:t=GU,attributes:n,disabled:r,data:i,getNewIndex:s=VU,id:a,strategy:l,resizeObserverConfig:c,transition:f=YU}=e;const{items:p,containerId:m,activeIndex:x,disabled:g,disableTransforms:N,sortedRects:j,overIndex:E,useDragOverlay:b,strategy:S}=k.useContext(oj),A=ZU(r,g),O=p.indexOf(a),K=k.useMemo(()=>({sortable:{containerId:m,index:O,items:p},...i}),[m,i,O,p]),ie=k.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:W,node:$,isOver:oe,setNodeRef:le}=$U({id:a,data:K,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:ie,...c}}),{active:R,activatorEvent:q,activeNodeRect:J,attributes:B,setNodeRef:fe,listeners:he,isDragging:G,over:P,setActivatorNodeRef:F,transform:ne}=IU({id:a,data:K,attributes:{...JU,...n},disabled:A.draggable}),be=mz(le,fe),T=!!R,H=T&&!N&&e0(x)&&e0(E),Z=!b&&G,se=Z&&H?ne:null,je=H?se??(l??S)({rects:j,activeNodeRect:J,activeIndex:x,overIndex:E,index:O}):null,ke=e0(x)&&e0(E)?s({id:a,items:p,activeIndex:x,overIndex:E}):O,ee=R==null?void 0:R.id,Se=k.useRef({activeId:ee,items:p,newIndex:ke,containerId:m}),_e=p!==Se.current.items,Re=t({active:R,containerId:m,isDragging:G,isSorting:T,id:a,index:O,items:p,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:f,wasDragging:Se.current.activeId!=null}),Fe=XU({disabled:!Re,index:O,node:$,rect:W});return k.useEffect(()=>{T&&Se.current.newIndex!==ke&&(Se.current.newIndex=ke),m!==Se.current.containerId&&(Se.current.containerId=m),p!==Se.current.items&&(Se.current.items=p)},[T,ke,m,p]),k.useEffect(()=>{if(ee===Se.current.activeId)return;if(ee!=null&&Se.current.activeId==null){Se.current.activeId=ee;return}const pe=setTimeout(()=>{Se.current.activeId=ee},50);return()=>clearTimeout(pe)},[ee]),{active:R,activeIndex:x,attributes:B,data:K,rect:W,index:O,newIndex:ke,items:p,isOver:oe,isSorting:T,isDragging:G,listeners:he,node:$,overIndex:E,over:P,setNodeRef:be,setActivatorNodeRef:F,setDroppableNodeRef:le,setDraggableNodeRef:fe,transform:Fe??je,transition:Ge()};function Ge(){if(Fe||_e&&Se.current.newIndex===O)return KU;if(!(Z&&!ix(q)||!f)&&(T||Re))return jp.Transition.toString({...f,property:lj})}}function ZU(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}Sn.Down,Sn.Right,Sn.Up,Sn.Left;function eq({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[s,a]=k.useState(""),[l,c]=k.useState([]),[f,p]=k.useState(!1),[m,x]=k.useState(""),g=E=>{c(b=>b.includes(E)?b.filter(S=>S!==E):[...b,E])},N=async()=>{if(l.length<2){Le.error("Selecciona al menos dos canciones para el medley");return}let E=s.trim();if(E||(E=l.map(S=>r.find(A=>A.id===S)).filter(S=>!!S).map(S=>S.title).join(" | ")),!E){Le.error("No se pudo generar el nombre del medley.");return}p(!0);try{const b=await IB(n,E,l);b&&(Le.success("Medley creado con xito"),i(b),j())}catch(b){console.error("Error creating medley:",b),Le.error("Error al crear el medley")}finally{p(!1)}},j=()=>{a(""),c([]),x(""),t()};return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Xn,{label:"Nombre del Medley",value:s,onChange:E=>a(E.target.value),placeholder:"Ej: Medley de Rock Clsico",autoFocus:!0}),u.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),u.jsxs("div",{className:"border rounded-md p-2",children:[u.jsx(Xn,{placeholder:"Buscar cancin para aadir...",value:m,onChange:E=>x(E.target.value),className:"mb-2"}),u.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(E=>E.type==="song").filter(E=>{var b;return E.title.toLowerCase().includes(m.toLowerCase())||((b=E.artist)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))}).map(E=>u.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:u.jsx("div",{children:u.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[u.jsx("input",{type:"checkbox",checked:l.includes(E.id),onChange:()=>g(E.id),className:"rounded"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-sm truncate",children:E.title}),E.artist&&u.jsx("div",{className:"text-xs text-gray-500 truncate",children:E.artist})]})]})})},E.id))})]})]}),u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx(vt,{variant:"secondary",onClick:j,disabled:f,children:"Cancelar"}),u.jsx(vt,{variant:"primary",onClick:N,loading:f,disabled:l.length<2,children:"Crear Medley"})]})]})}):null}function tq({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:s,onMedleyDeleted:a}){const[l,c]=k.useState(!1),[f,p]=k.useState(!1),[m,x]=k.useState(e.title),[g,N]=k.useState(!1),[j,E]=k.useState(!1),[b,S]=k.useState(!1),[A,O]=k.useState(""),[K,ie]=k.useState([]);k.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const B=await Cf(e.group_id);if(B){const fe=B.filter(he=>{var G;return((G=e.medley_song_ids)==null?void 0:G.includes(he.id))&&he.type==="song"});ie(fe)}}})()},[e.medley_song_ids,e.group_id]);const W=async()=>{if(!m.trim()){Le.error("El nombre del medley es obligatorio");return}E(!0);try{await zB(e.id,{title:m})&&(Le.success("Medley actualizado"),s(e.id,m),p(!1))}catch(J){console.error("Error al actualizar el medley:",J),Le.error("Error al actualizar el medley")}finally{E(!1)}},$=async()=>{E(!0);try{await WB(e.id)&&(Le.success("Medley eliminado"),a(e.id))}catch(J){console.error("Error al eliminar el medley:",J),Le.error("Error al eliminar el medley")}finally{E(!1),S(!1)}},oe=async J=>{E(!0);try{await qB(e.id,J)&&(Le.success("Cancin eliminada del medley"),i(e.id,J),ie(fe=>fe.filter(he=>he.id!==J)))}catch(B){console.error("Error al eliminar la cancin del medley:",B),Le.error("Error al eliminar la cancin del medley")}finally{E(!1)}},le=async J=>{if(!t.find(fe=>fe.id===J)){Le.error("No se pudo encontrar la cancin seleccionada");return}E(!0);try{const fe=await UB(e.id,J);if(fe){Le.success("Cancin aadida al medley"),r(e.id,J),N(!1),O("");const he=await Cf(e.group_id);if(he&&fe.medley_song_ids){const G=he.filter(P=>{var F;return((F=fe.medley_song_ids)==null?void 0:F.includes(P.id))&&P.type==="song"});ie(G)}}}catch(fe){console.error("Error al aadir la cancin al medley:",fe),Le.error("Error al aadir la cancin al medley")}finally{E(!1)}},R=e.medley_song_ids?e.medley_song_ids.map(J=>K.find(B=>B.id===J)).filter(Boolean):[],q=Array.from(new Map(R.map(J=>[J.id,J])).values());return u.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[u.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!l),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(hz,{className:"text-blue-600"}),u.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[u.jsxs("span",{children:[q.length," canciones"]}),l?u.jsx(uz,{}):u.jsx(cz,{})]})]}),l&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:J=>J.stopPropagation(),children:[n&&u.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[u.jsxs(vt,{variant:"secondary",onClick:()=>{p(!f),f&&x(e.title)},children:[u.jsx(U6,{className:"mr-1"}),f?"Cancelar":"Renombrar"]}),!f&&u.jsxs(vt,{variant:"danger",onClick:()=>S(!0),loading:j,children:[u.jsx(pz,{className:"mr-1"}),"Eliminar"]})]}),f&&u.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[u.jsx(Xn,{value:m,onChange:J=>x(J.target.value),placeholder:"Nuevo nombre del medley"}),u.jsx(vt,{onClick:W,loading:j,children:"Guardar"})]}),!f&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),q.length===0?u.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):u.jsx("ul",{className:"space-y-1",children:q.map(J=>u.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"font-medium text-sm",children:J.title}),J.artist&&u.jsx("span",{className:"text-xs text-gray-500 ml-2",children:J.artist})]}),n&&u.jsx(vt,{variant:"danger",onClick:()=>oe(J.id),loading:j,children:u.jsx(s3,{})})]},J.id))})]}),n&&u.jsx("div",{className:"mt-3",children:g?u.jsxs("div",{className:"border rounded p-2 bg-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium",children:"Aadir cancin:"}),u.jsx(vt,{variant:"secondary",onClick:()=>{N(!1),O("")},children:u.jsx(s3,{})})]}),u.jsx(Xn,{placeholder:"Buscar cancin...",value:A,onChange:J=>O(J.target.value),className:"mb-2"}),u.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(J=>J.type==="song").filter(J=>!q.some(B=>B.id===J.id)).filter(J=>{var B;return J.title.toLowerCase().includes(A.toLowerCase())||((B=J.artist)==null?void 0:B.toLowerCase().includes(A.toLowerCase()))}).map(J=>u.jsxs("button",{onClick:()=>le(J.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:j,children:[u.jsx("div",{className:"font-medium",children:J.title}),J.artist&&u.jsx("div",{className:"text-xs text-gray-500",children:J.artist})]},J.id)),t.filter(J=>J.type==="song"&&!q.some(B=>B.id===J.id)).length===0&&u.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay ms canciones para aadir."})]})]}):u.jsxs(vt,{variant:"primary",onClick:()=>N(!0),children:[u.jsx(Ny,{className:"mr-1"}),"Aadir Cancin"]})})]})]}),b&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>S(!1),children:u.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:J=>J.stopPropagation(),children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar el medley "',e.title,'"? Esta accin no se puede deshacer.']}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(vt,{variant:"secondary",onClick:()=>S(!1),disabled:j,children:"Cancelar"}),u.jsx(vt,{variant:"danger",onClick:$,loading:j,children:j?"Eliminando...":"Eliminar"})]})]})})]})}function nq({isOpen:e,onClose:t,groupId:n,onSetlistCreated:r}){const{isAuthenticated:i}=zp(),[s,a]=k.useState([]),[l,c]=k.useState(null),[f,p]=k.useState([]),[m,x]=k.useState([]),[g,N]=k.useState(!1),[j,E]=k.useState(!1),[b,S]=k.useState(0),[A,O]=k.useState(""),[K,ie]=k.useState("");k.useEffect(()=>{e&&i&&(W(),$())},[e,i,n]),k.useEffect(()=>{l&&(O(l.name),oe(l.id))},[l]);const W=async()=>{N(!0);try{const P=await On.getUserPlaylists(50);a(P)}catch(P){console.error("Error loading playlists:",P),Le.error("Error al cargar las playlists")}finally{N(!1)}},$=async()=>{try{const P=await Cf(n);x(P)}catch(P){console.error("Error loading existing songs:",P)}},oe=async P=>{N(!0);try{const ne=(await On.getPlaylistTracks(P,100)).filter(be=>be&&be.id).map(be=>({track:be,isSelected:!0,existsInPool:m.some(T=>{var H,Z;return T.title.toLowerCase()===be.name.toLowerCase()&&((H=T.artist)==null?void 0:H.toLowerCase())===((Z=be.artists[0])==null?void 0:Z.name.toLowerCase())})}));p(ne)}catch(F){console.error("Error loading playlist tracks:",F),Le.error("Error al cargar las canciones de la playlist")}finally{N(!1)}},le=P=>{p(F=>F.map((ne,be)=>be===P?{...ne,isSelected:!ne.isSelected}:ne))},R=()=>{p(P=>P.map(F=>({...F,isSelected:!0})))},q=()=>{p(P=>P.map(F=>({...F,isSelected:!1})))},J=async()=>{if(!l||!f.length)return;const P=f.filter(F=>F.isSelected);if(P.length===0){Le.error("Selecciona al menos una cancin para importar");return}E(!0),S(0);try{const{data:{user:F}}=await Xe.auth.getUser();if(!F){Le.error("No se pudo obtener la informacin del usuario");return}const ne={name:A||l.name,description:`Importado desde Spotify: ${l.name}`,group_id:n,created_by:F.id},be=await ex(ne);if(!be){Le.error("Error al crear el setlist");return}const T=P.length;let H=0,Z=0;for(let se=0;se<T;se++){const ce=P[se],{track:je}=ce;S(Math.round((se+1)/T*100));try{let ke;const ee=m.find(Se=>{var _e,Re;return Se.title.toLowerCase()===je.name.toLowerCase()&&((_e=Se.artist)==null?void 0:_e.toLowerCase())===((Re=je.artists[0])==null?void 0:Re.name.toLowerCase())});if(ee)ke=ee.id;else{const Se=Math.round(je.duration_ms/6e4),_e=`Popularidad: ${je.popularity}% | lbum: ${je.album.name}`,Re={title:je.name,artist:je.artists.map(Ge=>Ge.name).join(", "),duration_minutes:Se,key:"",notes:_e,group_id:n,created_by:F.id},Fe=await Kh(Re);if(!Fe)continue;ke=Fe.id,Z++}await og(be.id,ke,se+1),H++}catch(ke){console.error(`Error importing track ${je.name}:`,ke)}}S(100),Le.success(`Setlist "${A}" creado con ${H}/${T} canciones. ${Z} nuevas canciones aadidas al pool.`),r(),t()}catch(F){console.error("Error importing playlist:",F),Le.error("Error al importar la playlist")}finally{E(!1),S(0)}},B=P=>{const F=Math.floor(P/6e4),ne=Math.floor(P%6e4/1e3);return`${F}:${ne.toString().padStart(2,"0")}`},fe=()=>{const F=f.filter(H=>H.isSelected).reduce((H,Z)=>H+Z.track.duration_ms,0),ne=Math.floor(F/6e4),be=Math.floor(ne/60),T=ne%60;return be>0?`${be}h ${T}m`:`${T}m`},he=f.filter(P=>{var F;return P.track.name.toLowerCase().includes(K.toLowerCase())||((F=P.track.artists[0])==null?void 0:F.name.toLowerCase().includes(K.toLowerCase()))}),G=f.filter(P=>P.isSelected).length;return e?i?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b",children:[u.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",disabled:j,children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-3 sm:p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:l?u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 mb-4 sm:mb-6",children:[u.jsx("button",{onClick:()=>{c(null),p([]),O(""),ie("")},className:"text-blue-600 hover:text-blue-800 text-sm sm:text-base self-start",disabled:j,children:" Volver a playlists"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold truncate",children:l.name}),l.description&&u.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2",children:l.description}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:[G," de ",f.length," canciones seleccionadas"]})]}),u.jsx("a",{href:l.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 p-1",title:"Abrir en Spotify",children:u.jsx(ry,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),u.jsxs("div",{className:"mb-4 sm:mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del setlist"}),u.jsx("input",{type:"text",value:A,onChange:P=>O(P.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nombre para el nuevo setlist",disabled:j})]}),g?u.jsxs("div",{className:"flex items-center justify-center py-8",children:[u.jsx(sa,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),u.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando canciones..."})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4",children:[u.jsx("div",{className:"bg-gray-50 rounded-lg px-3 py-2",children:u.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:[G," canciones seleccionadas  ",fe()]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(vt,{variant:"secondary",size:"sm",onClick:R,children:"Seleccionar todo"}),u.jsx(vt,{variant:"secondary",size:"sm",onClick:q,children:"Deseleccionar todo"})]})]}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:"Buscar canciones...",value:K,onChange:P=>ie(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),u.jsx("div",{className:"max-h-64 sm:max-h-96 overflow-y-auto border border-gray-200 rounded-lg bg-gray-50",children:he.map((P,F)=>{var be,T;const ne=f.findIndex(H=>H===P);return u.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-white border-b border-gray-100 last:border-b-0 transition-colors ${P.isSelected?"bg-green-50 border-green-100":"hover:bg-gray-50"}`,children:[u.jsx("input",{type:"checkbox",checked:P.isSelected,onChange:()=>le(ne),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),u.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-6 sm:w-8 text-center",children:ne+1}),u.jsx("img",{src:((be=P.track.album.images[2])==null?void 0:be.url)||((T=P.track.album.images[0])==null?void 0:T.url),alt:P.track.album.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded object-cover flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium text-xs sm:text-sm text-gray-900 truncate",children:P.track.name}),u.jsx("p",{className:"text-xs text-gray-600 truncate",children:P.track.artists.map(H=>H.name).join(", ")})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[P.existsInPool&&u.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"En pool"}),u.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 flex-shrink-0",children:[u.jsx(xp,{className:"w-3 h-3 mr-1"}),B(P.track.duration_ms)]})]})]},`${P.track.id}-${ne}`)})})]})]}):u.jsxs("div",{children:[u.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Selecciona una playlist de Spotify para importar como setlist:"}),g?u.jsxs("div",{className:"flex items-center justify-center py-8",children:[u.jsx(sa,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),u.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando playlists..."})]}):u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(P=>{var F;return u.jsx("div",{onClick:()=>c(P),className:"border border-gray-200 rounded-lg p-3 sm:p-4 cursor-pointer hover:border-green-400 hover:bg-green-50 hover:shadow-md transition-all duration-200",children:u.jsxs("div",{className:"flex items-start gap-3",children:[P.images&&P.images.length>0?u.jsx("img",{src:P.images[0].url,alt:P.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded object-cover flex-shrink-0"}):u.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:u.jsx(ei,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:P.name}),P.description&&u.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2",children:P.description}),u.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[((F=P.tracks)==null?void 0:F.total)||0," canciones"]})]})]})},P.id)})})]})}),u.jsx("div",{className:"border-t p-3 sm:p-6",children:j?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Importando canciones... ",b,"%"]}),u.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:[Math.round(b/100*G),"/",G]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}):u.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[u.jsx(vt,{variant:"secondary",onClick:t,size:"sm",className:"w-full sm:w-auto",children:"Cancelar"}),l&&G>0&&u.jsxs(vt,{variant:"primary",onClick:J,disabled:!A.trim(),size:"sm",className:"w-full sm:w-auto",children:[u.jsx(Q0,{className:"w-4 h-4 mr-2"}),u.jsxs("span",{className:"hidden sm:inline",children:["Importar ",G," canciones"]}),u.jsxs("span",{className:"sm:hidden",children:["Importar (",G,")"]})]})]})})]})}):u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"text-center py-6 sm:py-8",children:[u.jsx(ei,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4"}),u.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Necesitas conectar con Spotify para importar playlists"}),u.jsx(vt,{onClick:t,variant:"primary",size:"sm",className:"w-full sm:w-auto",children:"Entendido"})]})]})}):null}function rq({isOpen:e,onClose:t,groupId:n,setlistId:r,onSongsAdded:i}){const[s,a]=k.useState([]),[l,c]=k.useState(null),[f,p]=k.useState([]),[m,x]=k.useState([]),[g,N]=k.useState([]),[j,E]=k.useState(!1),[b,S]=k.useState(!1),[A,O]=k.useState("");k.useEffect(()=>{e&&(K(),ie())},[e,n,r]);const K=async()=>{E(!0);try{const B=await On.getUserPlaylists();a(B)}catch(B){console.error("Error loading playlists:",B),Le.error("Error al cargar las playlist de Spotify")}finally{E(!1)}},ie=async()=>{try{const B=await Cf(n);x(B);const{data:fe}=await Xe.from("setlist_songs").select(`
          song:songs (*)
        `).eq("setlist_id",r);fe&&N(fe.map(he=>he.song).filter(Boolean))}catch(B){console.error("Error loading existing songs:",B)}},W=async B=>{E(!0),c(B);try{const he=(await On.getPlaylistTracks(B.id)).map(G=>({track:G,isSelected:!0,existsInPool:m.some(P=>{var F,ne;return P.title.toLowerCase()===G.name.toLowerCase()&&((F=P.artist)==null?void 0:F.toLowerCase())===((ne=G.artists[0])==null?void 0:ne.name.toLowerCase())}),existsInSetlist:g.some(P=>{var F,ne;return P.title.toLowerCase()===G.name.toLowerCase()&&((F=P.artist)==null?void 0:F.toLowerCase())===((ne=G.artists[0])==null?void 0:ne.name.toLowerCase())})}));p(he)}catch(fe){console.error("Error loading playlist tracks:",fe),Le.error("Error al cargar las canciones de la playlist")}finally{E(!1)}},$=B=>{p(fe=>fe.map((he,G)=>G===B?{...he,isSelected:!he.isSelected}:he))},oe=()=>{p(B=>B.map(fe=>({...fe,isSelected:!0})))},le=()=>{p(B=>B.map(fe=>({...fe,isSelected:!1})))},R=async()=>{var fe,he;const B=f.filter(G=>G.isSelected&&!G.existsInSetlist);if(B.length===0){Le.info("No hay canciones nuevas para aadir al setlist");return}S(!0);try{let G=0,P=0;for(const F of B){const{track:ne}=F;let be;const T=m.find(Z=>{var se,ce;return Z.title.toLowerCase()===ne.name.toLowerCase()&&((se=Z.artist)==null?void 0:se.toLowerCase())===((ce=ne.artists[0])==null?void 0:ce.name.toLowerCase())});if(T)be=T.id;else{const{data:{user:Z}}=await Xe.auth.getUser();if(!Z)continue;be=(await Kh({title:ne.name,artist:((fe=ne.artists[0])==null?void 0:fe.name)||"",duration_minutes:Math.round(ne.duration_ms/6e4),key:"",notes:`Importado desde Spotify: ${l==null?void 0:l.name}`,group_id:n,created_by:Z.id})).id,G++}const{data:H}=await Xe.from("setlist_songs").select("id").eq("setlist_id",r).eq("song_id",be).single();if(!H){const{data:Z}=await Xe.from("setlist_songs").select("position").eq("setlist_id",r).order("position",{ascending:!1}).limit(1).single(),se=((Z==null?void 0:Z.position)||0)+1;await Xe.from("setlist_songs").insert({setlist_id:r,song_id:be,position:se,created_by:(he=(await Xe.auth.getUser()).data.user)==null?void 0:he.id}),P++}}Le.success(`Sincronizacin completada! ${G} canciones aadidas al pool, ${P} al setlist`),i(),t()}catch(G){console.error("Error syncing tracks:",G),Le.error("Error al sincronizar las canciones")}finally{S(!1)}},q=f.filter(B=>{var fe;return B.track.name.toLowerCase().includes(A.toLowerCase())||((fe=B.track.artists[0])==null?void 0:fe.name.toLowerCase().includes(A.toLowerCase()))}),J=f.filter(B=>B.isSelected&&!B.existsInSetlist).length;return e?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Sincronizar desde Spotify"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:u.jsx(aa,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:l?u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:()=>{c(null),p([])},className:"text-indigo-600 hover:text-indigo-700 text-sm mb-2",children:" Volver a playlists"}),u.jsx("h3",{className:"text-lg font-medium",children:l.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[J," canciones seleccionadas para aadir"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(vt,{variant:"secondary",size:"sm",onClick:oe,children:"Seleccionar todo"}),u.jsx(vt,{variant:"secondary",size:"sm",onClick:le,children:"Deseleccionar todo"})]})]}),u.jsxs("div",{className:"relative mb-4",children:[u.jsx(wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),u.jsx("input",{type:"text",placeholder:"Buscar canciones...",value:A,onChange:B=>O(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),j?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx(sa,{className:"w-8 h-8 animate-spin text-indigo-600"})}):u.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:q.map((B,fe)=>{var G;const he=f.findIndex(P=>P===B);return u.jsxs("div",{className:`flex items-center p-3 rounded-lg border ${B.existsInSetlist?"bg-gray-100 border-gray-200":B.isSelected?"bg-indigo-50 border-indigo-200":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[u.jsx("input",{type:"checkbox",checked:B.isSelected,onChange:()=>$(he),disabled:B.existsInSetlist,className:"mr-3 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),((G=B.track.album.images)==null?void 0:G[0])&&u.jsx("img",{src:B.track.album.images[0].url,alt:B.track.album.name,className:"w-12 h-12 rounded-lg mr-3 object-cover"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium truncate",children:B.track.name}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:B.track.artists.map(P=>P.name).join(", ")})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[B.existsInPool&&u.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"En pool"}),B.existsInSetlist&&u.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"En setlist"}),u.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(B.track.duration_ms/6e4),"min"]})]})]},`${B.track.id}-${he}`)})})]}):u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-lg font-medium mb-4",children:"Selecciona una playlist"}),j?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx(sa,{className:"w-8 h-8 animate-spin text-indigo-600"})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(B=>{var fe;return u.jsxs("button",{onClick:()=>W(B),className:"p-4 border rounded-lg hover:bg-gray-50 text-left transition-colors",children:[((fe=B.images)==null?void 0:fe[0])&&u.jsx("img",{src:B.images[0].url,alt:B.name,className:"w-16 h-16 rounded-lg mb-3 object-cover"}),u.jsx("h4",{className:"font-medium truncate",children:B.name}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:B.description})]},B.id)})})]})}),l&&u.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t bg-gray-50",children:[u.jsx(vt,{variant:"secondary",onClick:t,children:"Cancelar"}),u.jsx(vt,{onClick:R,disabled:J===0||b,children:b?u.jsxs(u.Fragment,{children:[u.jsx(sa,{className:"w-4 h-4 animate-spin mr-2"}),"Sincronizando..."]}):`Sincronizar ${J} canciones`})]})]})}):null}const y3={name:"",description:"",estimated_duration_minutes:""};function iq({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:s,onMedleyRenamed:a,onMedleyDeleted:l}){var N,j,E,b;const{attributes:c,listeners:f,setNodeRef:p,transform:m,transition:x}=QU({id:e.id}),g={transform:jp.Transform.toString(m),transition:x};return u.jsxs("div",{ref:p,style:g,...c,className:"flex items-center gap-2 mb-2",children:[t&&u.jsx("div",{...f,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 py-2 px-2 sm:py-3 sm:px-3 touch-none select-none min-w-[40px] min-h-[40px] sm:min-w-[48px] sm:min-h-[48px] flex items-center justify-center rounded-md hover:bg-gray-100 active:bg-gray-200 transition-colors",role:"button","aria-label":"Arrastrar para reordenar",tabIndex:0,children:u.jsx(fz,{className:"text-lg"})}),u.jsx("div",{className:"flex-grow",children:e.type==="song"?u.jsxs("div",{className:"bg-white p-2 sm:p-3 rounded-md shadow-sm border border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(N=e.data.song)==null?void 0:N.title}),u.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:[(j=e.data.song)==null?void 0:j.artist," - ",(E=e.data.song)==null?void 0:E.duration_minutes,"m - Tono: ",(b=e.data.song)==null?void 0:b.key]})]}),t&&u.jsx(vt,{variant:"danger",size:"sm",onClick:()=>r(e.data.setlist_id,e.data.song_id),className:"w-full sm:w-auto",children:"Eliminar"})]}):u.jsx(tq,{medley:e.data,availableSongs:n.filter(S=>S.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:s,onMedleyRenamed:a,onMedleyDeleted:l})})]})}function sq({groupId:e,canManageSetlists:t=!0}){const[n,r]=k.useState([]),[i,s]=k.useState([]),[a,l]=k.useState(!0),[c,f]=k.useState(!1),[p,m]=k.useState(null),[x,g]=k.useState(null),[N,j]=k.useState(y3),[E,b]=k.useState(!1),[S,A]=k.useState(null),[O,K]=k.useState(!1),[ie,W]=k.useState(null),[$,oe]=k.useState(""),[le,R]=k.useState(""),[q,J]=k.useState(!1),[B,fe]=k.useState(!1),[he,G]=k.useState(!1),{isAuthenticated:P,createPlaylistFromSetlist:F,searchTracks:ne}=zp();k.useState(null),k.useState("");const[be,T]=k.useState([]),H=Az(Vv(cx,{activationConstraint:{distance:8}}),Vv(ej,{activationConstraint:{delay:200,tolerance:5}}),Vv(ox,{coordinateGetter:(de,{context:{active:me,droppableRects:ge,droppableContainers:$e,collisionRect:We}})=>null}));k.useEffect(()=>{Z()},[e]),Sp({table:"setlists",filter:`group_id=eq.${e}`,onInsert:de=>{r(me=>[...me,{...de.new,songs:[]}]),Le.success("Nuevo setlist aadido en tiempo real")},onUpdate:de=>{const me=de.new;r(ge=>ge.map($e=>$e.id===me.id?{...$e,...me}:$e)),(x==null?void 0:x.id)===me.id&&g(ge=>ge?{...ge,...me}:null)},onDelete:de=>{r(me=>me.filter(ge=>ge.id!==de.old.id)),(x==null?void 0:x.id)===de.old.id&&g(null),Le.success("Setlist eliminado en tiempo real")},enabled:!!e}),Sp({table:"setlist_songs",onInsert:de=>{const me=de.new;(x==null?void 0:x.id)===me.setlist_id&&se()},onUpdate:de=>{const me=de.new;(x==null?void 0:x.id)===me.setlist_id&&se()},onDelete:de=>{const me=de.old;(x==null?void 0:x.id)===me.setlist_id&&se()},enabled:!!x}),k.useEffect(()=>{if(x){const de=[];x.songs&&x.songs.forEach($e=>{var Ke,Me,rt,qe;const We=((Ke=$e.song)==null?void 0:Ke.type)==="medley";We&&console.log("Processing medley item:",{songId:$e.id,songSongId:(Me=$e.song)==null?void 0:Me.id,songTitle:(rt=$e.song)==null?void 0:rt.title,songType:(qe=$e.song)==null?void 0:qe.type,position:$e.position}),$e.id?de.push({id:$e.id,type:We?"medley":"song",position:$e.position,data:We?$e.song:$e}):console.error("Song with undefined ID found:",$e)}),x.medleys&&x.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",x.medleys),console.warn('All medleys should be in the songs table with type="medley"')),de.sort(($e,We)=>$e.position-We.position);const me=de.map($e=>$e.id),ge=me.filter(($e,We)=>me.indexOf($e)!==We);ge.length>0&&(console.error("Duplicate IDs found in setlistItems:",ge),console.error("All items:",de),console.error("selectedSetlist.songs:",x.songs),console.error("selectedSetlist.medleys:",x.medleys)),console.log("All setlistItems:",de.map($e=>({id:$e.id,type:$e.type,position:$e.position}))),T(de)}else T([])},[x]);const Z=async()=>{l(!0);const[de,me]=await Promise.all([Sy(e),Cf(e)]);return de&&r(de),me&&s(me),l(!1),de},se=async()=>{const de=await Z();if(de&&x){const me=de.find(ge=>ge.id===x.id);if(me){const ge={...me,songs:(me.songs||[]).sort(($e,We)=>$e.position-We.position),medleys:(me.medleys||[]).sort(($e,We)=>$e.position-We.position)};g(ge)}else g(null)}},ce=async de=>{if(de.preventDefault(),!N.name.trim()){Le.error("El nombre es obligatorio");return}const{data:{user:me}}=await Xe.auth.getUser();if(!me){Le.error("No se pudo obtener la informacin del usuario");return}const ge={group_id:e,name:N.name.trim(),description:N.description.trim()||void 0,estimated_duration_minutes:N.estimated_duration_minutes?parseInt(N.estimated_duration_minutes):void 0,created_by:me.id};if(p){const $e=await RB(p.id,ge);$e&&(Le.success("Setlist actualizado correctamente"),r(We=>We.map(Ke=>Ke.id===p.id?{...Ke,...$e}:Ke)),(x==null?void 0:x.id)===p.id&&g(We=>We?{...We,...$e}:null))}else{const $e=await ex({...ge,name:ge.name});$e&&(Le.success("Setlist creado correctamente"),r(We=>[...We,{...$e,songs:[]}]))}Fe()},je=de=>{var me;m(de),j({name:de.name,description:de.description||"",estimated_duration_minutes:((me=de.estimated_duration_minutes)==null?void 0:me.toString())||""}),f(!0)},ke=de=>{A(de),b(!0)},ee=async()=>{if(!S)return;await FB(S.id)?(Le.success("Setlist eliminado correctamente"),r(me=>me.filter(ge=>ge.id!==S.id)),(x==null?void 0:x.id)===S.id&&g(null)):Le.error("No se pudo eliminar el setlist"),b(!1),A(null)},Se=async(de,me)=>{if(!x)return;const $e=(x.songs&&x.songs.length>0?Math.max(...x.songs.map(Ke=>Ke.position)):0)+1,We=await og(de,me,$e);if(We){Le.success("Cancin aadida al setlist");const Ke=i.find(Me=>Me.id===me);if(Ke){const Me={...We,position:$e,song:Ke},rt={...x,songs:[...x.songs||[],Me]};g(rt),r(qe=>qe.map(At=>At.id===de?rt:At))}}else console.error("No se pudo aadir la cancin al setlist")},_e=async(de,me)=>{var $e;if(await $B(de,me)){Le.success("Cancin eliminada del setlist");const We=x?{...x,songs:($e=x.songs)==null?void 0:$e.filter(Ke=>Ke.song_id!==me)}:null;We&&(g(We),r(Ke=>Ke.map(Me=>Me.id===We.id?We:Me)))}else Le.error("No se pudo eliminar la cancin del setlist")},Re=de=>{const{active:me,over:ge}=de;if(!ge||me.id===ge.id||!x)return;const $e=be.findIndex(lt=>lt.id===me.id),We=be.findIndex(lt=>lt.id===ge.id),Me=ux(be,$e,We).map((lt,Bt)=>({id:lt.id,type:lt.type,position:Bt+1})),rt=Me.map(lt=>{var St;return{...(St=x.songs)==null?void 0:St.find(Ct=>Ct.id===lt.id),position:lt.position}}),qe={...x,songs:rt};g(qe),r(lt=>lt.map(Bt=>Bt.id===qe.id?qe:Bt)),console.log("Reordering items:",Me);const At=Me.map(lt=>({songId:lt.id,position:lt.position}));BB(x.id,At).then(lt=>{lt?console.log("Reorder successful"):(Le.error("No se pudo guardar el orden. Se revertirn los cambios."),Z())})},Fe=()=>{j(y3),m(null),f(!1)},Ge=de=>{if(!i)return[];const me=new Set((de.songs||[]).map(ge=>ge.song_id));return i.filter(ge=>!me.has(ge.id))},pe=de=>{const me=n.find(ge=>ge.id===de.id);g(me||null)},te=(de,me,ge)=>{if(!x)return;const $e={...ge,song:me},We={...x,medleys:(x.medleys||[]).map(Ke=>Ke.id===de?{...Ke,songs:[...Ke.songs||[],$e].sort((Me,rt)=>Me.position-rt.position)}:Ke)};g(We),r(Ke=>Ke.map(Me=>Me.id===We.id?We:Me))},et=(de,me)=>{if(!x)return;const ge={...x,medleys:(x.medleys||[]).map($e=>$e.id===de?{...$e,songs:($e.songs||[]).filter(We=>We.song_id!==me)}:$e)};g(ge),r($e=>$e.map(We=>We.id===ge.id?ge:We))},He=(de,me)=>{if(!x)return;const ge={...x,medleys:(x.medleys||[]).map($e=>$e.id===de?{...$e,name:me}:$e)};g(ge),r($e=>$e.map(We=>We.id===ge.id?ge:We))},Ve=de=>{if(!x)return;const me={...x,medleys:(x.medleys||[]).filter(ge=>ge.id!==de)};g(me),r(ge=>ge.map($e=>$e.id===me.id?me:$e))},Qe=async de=>{if(!x)return;const ge=(x.songs&&x.songs.length>0?Math.max(...x.songs.map(We=>We.position)):0)+1;if(await og(x.id,de.id,ge)){Le.success("Medley creado y aadido al setlist"),await Z();const We=await Sy(e);if(We){const Ke=We.find(Me=>Me.id===x.id);Ke&&g(Ke)}}else Le.error("Medley creado pero no se pudo aadir al setlist")},at=de=>{W(de),oe(`${de.name} (copia)`),K(!0)},Ae=async()=>{if(!ie||!$.trim())return;l(!0),K(!1),await HB(ie.id,$.trim())?(Le.success("Setlist duplicado correctamente"),await Z()):Le.error("No se pudo duplicar el setlist"),W(null),oe(""),l(!1)};return a?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{className:"h-8 w-40 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),u.jsx(YN,{count:4})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&u.jsxs("div",{className:"flex gap-3",children:[u.jsx(vt,{onClick:()=>f(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"}),u.jsxs(vt,{onClick:()=>fe(!0),variant:"secondary",className:`${P?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,title:P?"Importar playlist desde Spotify":"Conecta con Spotify para importar playlists",children:[u.jsx(i3,{className:"mr-2"}),"Importar de Spotify",!P&&u.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Conectar)"})]})]})]}),!t&&u.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:u.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&u.jsxs("form",{onSubmit:ce,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx(Xn,{label:"Nombre *",value:N.name,onChange:de=>j({...N,name:de.target.value}),required:!0}),u.jsx(Xn,{label:"Duracin estimada (minutos)",type:"number",value:N.estimated_duration_minutes,onChange:de=>j({...N,estimated_duration_minutes:de.target.value}),min:"1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),u.jsx("textarea",{value:N.description,onChange:de=>j({...N,description:de.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripcin breve del setlist..."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(vt,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),u.jsx(vt,{type:"button",variant:"secondary",onClick:Fe,children:"Cancelar"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[u.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 lg:hidden",children:"Setlists"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-3",children:n.map(de=>{var me,ge;return u.jsxs("div",{className:`p-3 sm:p-4 rounded-lg cursor-pointer transition-all ${(x==null?void 0:x.id)===de.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>pe(de),children:[u.jsx("h4",{className:`font-bold text-sm sm:text-base truncate ${(x==null?void 0:x.id)===de.id?"text-white":"text-gray-800"}`,children:de.name}),u.jsxs("p",{className:`text-xs sm:text-sm ${(x==null?void 0:x.id)===de.id?"text-blue-100":"text-gray-500"}`,children:[(((me=de.songs)==null?void 0:me.length)||0)+(((ge=de.medleys)==null?void 0:ge.length)||0)," items"]})]},de.id)})}),n.length===0&&!a&&u.jsx("p",{className:"text-center text-gray-500 py-4 text-sm",children:"No hay setlists. Crea el primero!"})]}),u.jsx("div",{className:"lg:col-span-2",children:x?u.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 rounded-lg shadow-md",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4 gap-3 sm:gap-4",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 truncate",children:x.name}),u.jsx("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:x.description})]}),t&&u.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 w-full sm:w-auto lg:flex-nowrap",children:[u.jsxs(vt,{variant:"primary",onClick:()=>J(!0),size:"sm",className:"w-full sm:w-auto",children:[u.jsx(Ny,{className:"mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Crear Medley"}),u.jsx("span",{className:"sm:hidden",children:"Medley"})]}),P&&u.jsxs(vt,{variant:"secondary",onClick:()=>G(!0),size:"sm",className:"w-full sm:w-auto",children:[u.jsx(i3,{className:"mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Sincronizar Spotify"}),u.jsx("span",{className:"sm:hidden",children:"Spotify"})]}),u.jsxs(vt,{variant:"secondary",onClick:()=>je(x),size:"sm",className:"w-full sm:w-auto",children:[u.jsx(U6,{className:"mr-2"})," Editar"]}),u.jsxs(vt,{variant:"secondary",onClick:()=>at(x),size:"sm",className:"w-full sm:w-auto",children:[u.jsx(dz,{className:"mr-2"})," Duplicar"]}),u.jsx(vt,{variant:"danger",onClick:()=>ke(x),size:"sm",className:"w-full sm:w-auto",children:"Eliminar"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6 xl:gap-8",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Canciones en el Setlist"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(TU,{sensors:H,collisionDetection:Dz,onDragEnd:Re,children:u.jsx(HU,{items:be.map(de=>de.id),strategy:qU,children:be.map((de,me)=>u.jsx(iq,{item:de,canManageSetlists:t,songs:i,onRemoveSong:_e,onSongAddedToMedley:te,onSongRemovedFromMedley:et,onMedleyRenamed:He,onMedleyDeleted:Ve},`${de.type}-${de.id}-${me}`))})}),be.length===0&&u.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist est vaco."})]})]}),t&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Aadir Cancin al Setlist"}),u.jsx(Xn,{placeholder:"Buscar cancin...",value:le,onChange:de=>R(de.target.value),className:"mb-2"}),u.jsxs("div",{className:"space-y-2 max-h-48 sm:max-h-60 lg:max-h-80 overflow-y-auto pr-1 sm:pr-2",children:[Ge(x).filter(de=>{var me;return de.title.toLowerCase().includes(le.toLowerCase())||((me=de.artist)==null?void 0:me.toLowerCase().includes(le.toLowerCase()))}).map(de=>u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded-md gap-2",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("p",{className:"font-medium text-xs sm:text-sm truncate",children:[de.type==="medley"&&u.jsx("span",{className:"text-blue-600 mr-1",children:""}),de.title]}),u.jsx("p",{className:"text-xs text-gray-500 truncate",children:de.type==="medley"?"Medley":de.artist})]}),u.jsx(vt,{onClick:()=>Se(x.id,de.id),size:"sm",className:"w-full sm:w-auto",children:u.jsx(Ny,{})})]},de.id)),Ge(x).length===0&&u.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya estn en este setlist."})]})]})]})]}):u.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 bg-white rounded-lg",children:u.jsx("p",{className:"text-sm sm:text-base",children:"Selecciona un setlist para ver los detalles"})})})]}),E&&S&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),u.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar el setlist "',S.name,'"? Esta accin no se puede deshacer.']}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[u.jsx(vt,{variant:"secondary",onClick:()=>{b(!1),A(null)},fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Cancelar"}),u.jsx(vt,{variant:"danger",onClick:ee,fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Eliminar"})]})]})}),O&&ie&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),u.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),u.jsx(Xn,{value:$,onChange:de=>oe(de.target.value),className:"mb-6",autoFocus:!0}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(vt,{variant:"secondary",onClick:()=>{K(!1),W(null),oe("")},children:"Cancelar"}),u.jsx(vt,{variant:"primary",onClick:Ae,disabled:!$.trim(),children:"Duplicar"})]})]})}),q&&x&&u.jsx(eq,{isOpen:q,onClose:()=>J(!1),groupId:e,availableSongs:Ge(x),onMedleyCreated:de=>{Qe(de),J(!1)}}),B&&u.jsx(nq,{isOpen:B,onClose:()=>fe(!1),groupId:e,onSetlistCreated:()=>{Z(),fe(!1)}}),he&&x&&u.jsx(rq,{isOpen:he,onClose:()=>G(!1),groupId:e,setlistId:x.id,onSongsAdded:()=>{Z(),G(!1)}})]})}function aq({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0,defaultTab:r="songs"}){const[i,s]=k.useState(r);return k.useEffect(()=>{s(r)},[r]),u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[u.jsx("div",{className:"border-b border-gray-200",children:u.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[u.jsx("button",{onClick:()=>s("songs"),className:`${i==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),u.jsx("button",{onClick:()=>s("setlists"),className:`${i==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),u.jsxs("div",{className:"p-6",children:[i==="songs"&&u.jsx(tz,{groupId:e,canManageSongs:t}),i==="setlists"&&u.jsx(sq,{groupId:e,canManageSetlists:n})]})]})})}function oq({groupId:e,members:t}){const[n,r]=k.useState([]),[i,s]=k.useState([]),[a,l]=k.useState(!0);k.useEffect(()=>{c()},[e]);const c=async()=>{l(!0);try{const N=t.map(O=>O.user_id).filter(Boolean),{data:j,error:E}=await Xe.from("member_availability").select("*").in("user_id",N).gte("date",Kt(Km(new Date,6),"yyyy-MM-dd"));if(E)throw E;const b=(j==null?void 0:j.map(O=>{const K=t.find(ie=>ie.user_id===O.user_id);return{...O,member_name:(K==null?void 0:K.name)||"Unknown"}}))||[];r(b);const{data:S,error:A}=await Xe.from("events").select(`
          *,
          event_members (
            group_member_id,
            user_id
          )
        `).eq("group_id",e).order("date",{ascending:!1});if(A)throw A;s(S||[])}catch(N){console.error("Error fetching statistics data:",N)}finally{l(!1)}},f=k.useMemo(()=>{const N=new Date,j=new Map;n.forEach(W=>{const $=W.member_name||"Unknown";j.set($,(j.get($)||0)+1)});const E=n.length,b=t.length>0?E/t.length:0;let S="N/A",A="N/A",O=0,K=1/0;if(j.size>0)for(const[W,$]of j.entries())$>O&&(O=$,S=W),$<K&&(K=$,A=W);const ie=n.filter(W=>ff(new Date(W.date),N)).length;return{totalAvailableDays:E,averageAvailabilityPerMember:b,mostAvailableMember:S,leastAvailableMember:A,upcomingAvailableDays:ie}},[n,t]),p=k.useMemo(()=>{const N=new Date,j=di(N),E=Ef(N),b=di(Km(N,1)),S=Ef(Km(N,1)),A=i.length,O=i.filter(J=>ff(new Date(J.date),N)).length,K=i.filter(J=>{const B=new Date(J.date);return B>=j&&B<=E}).length,ie=i.filter(J=>{const B=new Date(J.date);return B>=b&&B<=S}).length,W=Km(N,6),oe=`${(i.filter(J=>ff(new Date(J.date),W)).length/6).toFixed(1)} eventos/mes`,le=new Map;i.forEach(J=>{const B=J.location||"Sin ubicacin";le.set(B,(le.get(B)||0)+1)});let R="N/A",q=0;for(const[J,B]of le.entries())B>q&&(q=B,R=J);return{totalEvents:A,upcomingEvents:O,averageEventFrequency:oe,mostCommonLocation:R,eventsThisMonth:K,eventsLastMonth:ie}},[i]),m=k.useMemo(()=>{const N=new Map;return t.forEach(j=>{const E=n.filter(b=>b.member_name===j.name).length;N.set(j.name,E)}),Array.from(N.entries()).sort((j,E)=>E[1]-j[1]).slice(0,10)},[t,n]),x=k.useMemo(()=>{const N=new Map;return t.forEach(j=>{N.set(j.name,0)}),i.forEach(j=>{j.event_members&&j.event_members.length>0&&j.event_members.forEach(E=>{const b=t.find(S=>S.id===E.group_member_id);if(b){const S=N.get(b.name)||0;N.set(b.name,S+1)}})}),Array.from(N.entries()).sort((j,E)=>E[1]-j[1]).slice(0,10)},[t,i]);if(a)return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((N,j)=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsx("div",{className:"h-6 w-24 bg-gray-200 animate-pulse rounded mb-2"}),u.jsx("div",{className:"h-8 w-16 bg-gray-200 animate-pulse rounded"})]},j))}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded mb-4"}),u.jsx("div",{className:"space-y-3",children:[...Array(5)].map((N,j)=>u.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"},j))})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded mb-4"}),u.jsx("div",{className:"space-y-3",children:[...Array(5)].map((N,j)=>u.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"},j))})]})]})]});const g=({icon:N,title:j,value:E,subtitle:b,color:S="indigo"})=>u.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`p-2 rounded-lg bg-${S}-100`,children:u.jsx(N,{className:`w-6 h-6 text-${S}-600`})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:j}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E}),b&&u.jsx("p",{className:"text-sm text-gray-500",children:b})]})]})});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(g,{icon:Iu,title:"Miembros Activos",value:t.length,color:"blue"}),u.jsx(g,{icon:vc,title:"Das Disponibles",value:f.upcomingAvailableDays,subtitle:"prximos",color:"green"}),u.jsx(g,{icon:SN,title:"Eventos Prximos",value:p.upcomingEvents,color:"purple"}),u.jsx(g,{icon:xp,title:"Eventos Este Mes",value:p.eventsThisMonth,subtitle:`vs ${p.eventsLastMonth} el mes pasado`,color:"orange"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx(vc,{className:"w-5 h-5 text-indigo-600 mr-2"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estadsticas de Disponibilidad"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Total das marcados:"}),u.jsx("span",{className:"font-medium",children:f.totalAvailableDays})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Promedio por miembro:"}),u.jsxs("span",{className:"font-medium",children:[f.averageAvailabilityPerMember.toFixed(1)," das"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Ms disponible:"}),u.jsx("span",{className:"font-medium text-green-600",children:f.mostAvailableMember})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Menos disponible:"}),u.jsx("span",{className:"font-medium text-orange-600",children:f.leastAvailableMember})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx(bN,{className:"w-5 h-5 text-indigo-600 mr-2"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estadsticas de Eventos"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Total eventos:"}),u.jsx("span",{className:"font-medium",children:p.totalEvents})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Frecuencia promedio:"}),u.jsx("span",{className:"font-medium",children:p.averageEventFrequency})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Ubicacin ms comn:"}),u.jsxs("span",{className:"font-medium flex items-center",children:[u.jsx(Hh,{className:"w-4 h-4 mr-1"}),p.mostCommonLocation]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Tendencia mensual:"}),u.jsxs("span",{className:`font-medium ${p.eventsThisMonth>=p.eventsLastMonth?"text-green-600":"text-red-600"}`,children:[p.eventsThisMonth>=p.eventsLastMonth?"":"",p.eventsThisMonth>=p.eventsLastMonth?" Creciente":" Decreciente"]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx(vc,{className:"w-5 h-5 text-indigo-600 mr-2"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Disponibilidad por Miembro"}),u.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"(ltimos 6 meses)"})]}),m.length>0?u.jsx("div",{className:"space-y-3",children:m.map(([N,j],E)=>{const b=Math.max(...m.map(([,A])=>A)),S=b>0?j/b*100:0;return u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-24 text-sm text-gray-600 truncate",title:N,children:N}),u.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:`h-2 rounded-full ${E===0?"bg-green-500":E===1?"bg-blue-500":E===2?"bg-purple-500":"bg-gray-400"}`,style:{width:`${S}%`}})}),u.jsxs("div",{className:"text-sm font-medium text-gray-700 w-12 text-right",children:[j," das"]})]},N)})}):u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(vc,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),u.jsx("p",{children:"No hay datos de disponibilidad"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx(Iu,{className:"w-5 h-5 text-purple-600 mr-2"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Participacin en Eventos"}),u.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"(todos los eventos)"})]}),x.length>0?u.jsx("div",{className:"space-y-3",children:x.map(([N,j],E)=>{const b=Math.max(...x.map(([,A])=>A)),S=b>0?j/b*100:0;return u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-24 text-sm text-gray-600 truncate",title:N,children:N}),u.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:`h-2 rounded-full ${E===0?"bg-purple-500":E===1?"bg-pink-500":E===2?"bg-orange-500":"bg-gray-400"}`,style:{width:`${S}%`}})}),u.jsxs("div",{className:"text-sm font-medium text-gray-700 w-16 text-right",children:[j," evento",j!==1?"s":""]})]},N)})}):u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(Iu,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),u.jsx("p",{children:"No hay datos de eventos disponibles"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen de Actividad Reciente"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.upcomingAvailableDays}),u.jsx("div",{className:"text-sm text-green-700",children:"Das disponibles prximos"})]}),u.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.upcomingEvents}),u.jsx("div",{className:"text-sm text-blue-700",children:"Eventos programados"})]}),u.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.length}),u.jsx("div",{className:"text-sm text-purple-700",children:"Miembros en el grupo"})]})]})]})]})}function n0({defaultTab:e}){const{id:t}=$S(),n=da(),r=ua(),[i,s]=k.useState(null),[a,l]=k.useState([]),[c,f]=k.useState([]),[p,m]=k.useState(!1),[x,g]=k.useState(!1),[N,j]=k.useState(!1),[E,b]=k.useState(null),[S,A]=k.useState(null),[O,K]=k.useState(!0),[ie,W]=k.useState(!1),[$,oe]=k.useState(null),[le,R]=k.useState(!1),[q,J]=k.useState([]),{user:B}=Zr(),[fe,he]=k.useState(!1),[G,P]=k.useState(!1),[F,ne]=k.useState(""),be=()=>e||(r.pathname.endsWith("/songs")?"songs":r.pathname.endsWith("/setlists")?"setlists":r.pathname.endsWith("/statistics")?"statistics":"overview"),[T,H]=k.useState(be()),Z=pe=>{switch(H(pe),pe){case"songs":n(`/group/${t}/songs`);break;case"setlists":n(`/group/${t}/setlists`);break;case"statistics":n(`/group/${t}/statistics`);break;case"overview":default:n(`/group/${t}`);break}};k.useEffect(()=>{H(be())},[r.pathname,r.search,e]),k.useEffect(()=>{t&&ce()},[t,B]),k.useEffect(()=>{t&&B&&se()},[t,B,a]),Sp({table:"group_members",filter:`group_id=eq.${t}`,onInsert:()=>{ce(),Le.success("Nuevo miembro aadido en tiempo real")},onUpdate:()=>{ce()},onDelete:()=>{ce(),Le.success("Miembro eliminado en tiempo real")},enabled:!!t});const se=async()=>{if(B)try{const pe=await Wn(()=>Xe.from("users").select("role").eq("id",B.id).single(),"Error checking permissions");pe&&(oe(pe.role),W(pe.role==="admin"));const te=a.find(et=>et.user_id===B.id);he(!!te),R((te==null?void 0:te.role_in_group)==="principal"||!1),(te==null?void 0:te.role_in_group)==="principal"&&W(!0)}catch(pe){console.error("Error checking permissions:",pe)}},ce=async()=>{try{const pe=await Wn(()=>Xe.from("groups").select("*").eq("id",t).single(),"Error loading group");pe&&s(pe);const te=await Wn(()=>Xe.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",t).order("member_type",{ascending:!0}).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(te){const He=te.map(Ve=>({...Ve,instruments:(Ve.group_member_roles||[]).filter(Qe=>Qe==null?void 0:Qe.role).map(Qe=>({id:Qe.role.id,name:Qe.role.name}))}));l(He)}const et=await Wn(()=>Xe.from("roles").select("*").eq("group_id",t).order("name"),"Error loading roles");et&&f(et)}catch(pe){console.error("Error fetching group data:",pe)}finally{K(!1)}},je=async pe=>{if(!(!B||!t))try{await Wn(()=>Xe.rpc("link_group_member",{p_member_id:pe,p_user_id:B.id,p_group_id:t}),"Error linking member"),Le.success("Te has vinculado correctamente!"),await ce(),await se()}catch(te){console.error("Error linking member:",te)}},ke=pe=>{b(pe),g(!0)},ee=pe=>{A(pe),j(!0)},Se=async()=>{if(S)try{await Wn(()=>Xe.from("group_members").delete().eq("id",S.id),"Error deleting member"),Le.success("Miembro eliminado correctamente"),j(!1),A(null),ce()}catch(pe){console.error("Error deleting member:",pe)}},_e=a.filter(pe=>pe.role_in_group==="principal"),Re=a.filter(pe=>pe.role_in_group==="sustituto"),Fe=(pe,te)=>u.jsxs("div",{children:[u.jsx("div",{className:"bg-gray-50 px-3 py-2",children:u.jsx("h3",{className:"text-sm font-medium text-gray-700",children:te})}),u.jsx("div",{className:"divide-y",children:pe.map(et=>u.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base",children:et.name}),u.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${et.member_type==="local"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:et.member_type==="local"?" Local":et.member_type==="registered"?" Registrado":" Miembro"}),u.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${et.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:et.role_in_group==="principal"?"Principal":"Sustituto"}),(!et.member_type||et.member_type==="registered")&&!et.user_id&&u.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),(!et.member_type||et.member_type==="registered")&&et.email&&u.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[" ",et.email]}),et.instruments.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:et.instruments.map((He,Ve)=>u.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[u.jsx(ei,{className:"w-3 h-3 mr-1"}),He.name]},`${et.id}-${He.id}-${Ve}`))}),et.user_id===(B==null?void 0:B.id)&&u.jsx("div",{className:"mt-2 flex items-center",children:u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:et.sync_calendar,onChange:async()=>{try{await Wn(()=>Xe.from("group_members").update({sync_calendar:!et.sync_calendar}).eq("id",et.id),"Error actualizando preferencias de calendario"),Le.success("Preferencias de calendario actualizadas"),ce()}catch(He){console.error("Error updating calendar preferences:",He)}},className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),u.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),et.user_id===(B==null?void 0:B.id)&&et.sync_calendar&&u.jsxs("button",{onClick:()=>Ge(et.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[u.jsx(vc,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripcin al calendario"]})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-2 sm:ml-4",children:[($==="admin"||et.user_id===(B==null?void 0:B.id))&&u.jsx("button",{onClick:()=>ke(et),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:u.jsx(_N,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),($==="admin"||le)&&u.jsx("button",{onClick:()=>ee(et),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:u.jsx(M5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),!et.user_id&&!fe&&u.jsxs(vt,{onClick:()=>je(et.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[u.jsx(c_,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},et.id))})]}),Ge=async pe=>{try{const{data:te,error:et}=await Xe.rpc("get_group_calendar",{p_group_id:i==null?void 0:i.id,p_member_id:pe});if(et)throw et;if(!te)throw new Error("No se pudo generar el calendario");const He=new Blob([te],{type:"text/calendar"}),Ve=new File([He],"calendar.ics",{type:"text/calendar"}),{error:Qe}=await Xe.storage.from("calendars").upload(`${i==null?void 0:i.id}/${pe}/calendar.ics`,Ve,{cacheControl:"0",upsert:!0});if(Qe)throw Qe;const{data:{publicUrl:at}}=await Xe.storage.from("calendars").getPublicUrl(`${i==null?void 0:i.id}/${pe}/calendar.ics`);if(at)ne(at),P(!0);else throw new Error("No se pudo generar el enlace pblico")}catch(te){console.error("Error generating calendar subscription URL:",te),te.message==="new row violates row-level security policy"?Le.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):Le.error("Error al generar el enlace del calendario")}};return O?u.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded mb-2"}),u.jsx("div",{className:"h-4 w-64 bg-gray-200 animate-pulse rounded"})]}),u.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),u.jsx("div",{className:"border-b border-gray-200",children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2 space-y-6",children:u.jsxs("div",{className:"bg-white shadow rounded-lg",children:[u.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:u.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded"})}),u.jsx(ZO,{count:6})]})}),u.jsxs("div",{className:"bg-white shadow rounded-lg",children:[u.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:u.jsx("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded"})}),u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded"}),u.jsx("div",{className:"h-10 w-full bg-gray-200 animate-pulse rounded"})]})})]})]})]}):i?u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:i.name}),u.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Gestiona miembros y disponibilidad"})]}),(ie||le)&&(!fe||$==="admin"||le)&&u.jsxs(vt,{onClick:()=>m(!0),className:"flex items-center justify-center space-x-2 w-full sm:w-auto",size:"sm",children:[u.jsx(Bg,{className:"w-4 h-4 sm:w-5 sm:h-5"}),u.jsx("span",{className:"hidden sm:inline",children:$==="admin"||le?"Aadir Miembro":"Unirse al Grupo"}),u.jsx("span",{className:"sm:hidden",children:"Aadir"})]})]}),u.jsx("div",{className:"border-b border-gray-200 mb-6 overflow-x-auto",children:u.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[u.jsxs("button",{onClick:()=>Z("overview"),className:`${T==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[u.jsx(vc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Vista General"}),u.jsx("span",{className:"sm:hidden",children:"Vista"})]}),u.jsxs("button",{onClick:()=>Z("songs"),className:`${T==="songs"||T==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[u.jsx(eI,{className:"w-3 h-3 sm:w-4 sm:h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Canciones y Setlists"}),u.jsx("span",{className:"sm:hidden",children:"Msica"})]}),u.jsxs("button",{onClick:()=>Z("statistics"),className:`${T==="statistics"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[u.jsx(bN,{className:"w-3 h-3 sm:w-4 sm:h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Estadsticas"}),u.jsx("span",{className:"sm:hidden",children:"Stats"})]})]})}),T==="overview"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[u.jsx("div",{className:"p-3 sm:p-4 border-b",children:u.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Miembros del Grupo"})}),a.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(c_,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),u.jsxs("p",{className:"text-gray-500",children:["No hay miembros an. ",ie?'Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):u.jsxs("div",{className:"divide-y divide-gray-200",children:[_e.length>0&&Fe(_e,"Miembros Principales"),Re.length>0&&Fe(Re,"Miembros Sustitutos")]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[u.jsx("div",{className:"p-3 sm:p-4 border-b",children:u.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Disponibilidad"})}),u.jsx("div",{className:"p-2 sm:p-4",children:u.jsx(TB,{members:a,onAvailableDatesChange:J,groupName:i.name})})]})]}),i&&t&&u.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:u.jsx(KB,{groupId:t,canManageEvents:$==="admin"||le,availableDates:q,members:a})})]}),(T==="songs"||T==="setlists")&&i&&t&&u.jsx(aq,{groupId:t,canManageSongs:$==="admin"||le,canManageSetlists:$==="admin"||le,defaultTab:T==="setlists"?"setlists":"songs"}),T==="statistics"&&i&&t&&u.jsx(oq,{groupId:t,members:a}),i&&(ie||le)&&(!fe||$==="admin"||le)&&u.jsx(tR,{isOpen:p,onClose:()=>m(!1),groupId:i.id,instruments:c,onMemberAdded:ce,isEmptyGroup:a.length===0,userRole:$}),E&&u.jsx(nR,{isOpen:x,onClose:()=>{g(!1),b(null)},member:E,instruments:c,onMemberUpdated:ce,userRole:$}),u.jsx(JB,{isOpen:N,onClose:()=>{j(!1),A(null)},onConfirm:Se,title:"Eliminar Miembro",message:`Ests seguro de que quieres eliminar a ${S==null?void 0:S.name}? Esta accin no se puede deshacer.`}),u.jsx(XB,{isOpen:G,onClose:()=>P(!1),calendarUrl:F})]}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a l."})]})}function Eh({children:e}){const{user:t}=Zr(),n=ua();return t?u.jsx(u.Fragment,{children:e}):u.jsx(d7,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0})}function lq(){return u.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Poltica de Privacidad"}),u.jsxs("div",{className:"prose prose-indigo",children:[u.jsxs("p",{className:"mb-4",children:["ltima actualizacin: ",new Date().toLocaleDateString()]}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Informacin que Recopilamos"}),u.jsx("p",{children:"Band Manager recopila la siguiente informacin personal:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsx("li",{children:"Direccin de correo electrnico"}),u.jsx("li",{children:"Nombre"}),u.jsx("li",{children:"Informacin de perfil de usuario"})]})]}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),u.jsx("p",{children:"Nuestra aplicacin requiere ciertos permisos para funcionar correctamente:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la informacin de tu banda y permitir la colaboracin entre miembros."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicacin) mejorando as el rendimiento y permitiendo el uso sin conexin."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Cmara (opcional):"})," Solo si decides subir fotos directamente desde la aplicacin para tu perfil o contenido de la banda."]})]}),u.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicacin. No compartimos ninguna informacin recopilada a travs de estos permisos con terceros."}),u.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a travs de la configuracin de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicacin."})]}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cmo Utilizamos su Informacin"}),u.jsx("p",{children:"Utilizamos la informacin recopilada para:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),u.jsx("li",{children:"Gestionar su cuenta y membresa"}),u.jsx("li",{children:"Permitir la participacin en funciones interactivas"}),u.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),u.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticacin, que implementa estndares de seguridad de la industria para proteger su informacin personal."})]}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),u.jsx("p",{children:"Usted tiene derecho a:"}),u.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[u.jsx("li",{children:"Acceder a sus datos personales"}),u.jsx("li",{children:"Corregir datos inexactos"}),u.jsx("li",{children:"Solicitar la eliminacin de sus datos"}),u.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),u.jsxs("p",{children:["Si tiene preguntas sobre esta Poltica de Privacidad, puede contactarnos en:",u.jsx("br",{}),u.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function cq(){console.log("AcceptInvitation component mounted");const[e]=qS(),t=e.get("token"),n=da(),{user:r}=Zr(),[i,s]=k.useState(!0),[a,l]=k.useState(null);k.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),Le.error("Token de invitacin no vlido"),n("/");return}(async()=>{try{if(!r){const g=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",g),n("/login",{state:{returnTo:g}});return}const{data:p,error:m}=await Xe.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:m}),m)throw m;if(!p||p.length===0){Le.error("Invitacin no encontrada o ya procesada"),n("/");return}const x=p[0];if(console.log("Invitation data:",x),r.email!==x.email){Le.error("Esta invitacin es para otro correo electrnico"),n("/");return}if(!e.get("group_member_id")){const g=new URLSearchParams(e);g.set("group_member_id",x.group_member_id),n(`${location.pathname}?${g.toString()}`,{replace:!0})}l({groupName:x.group_name,role:x.role_in_group}),s(!1)}catch(p){console.error("Error checking invitation:",p),Le.error(p.message||"Error al verificar la invitacin"),n("/")}})()},[t,r,n,e]);const c=async f=>{try{s(!0);const{data:p,error:m}=await Xe.rpc("get_invitation_details",{p_token:t});if(m)throw m;if(!p||p.length===0)throw new Error("Invitacin no encontrada");const{group_member_id:x}=p[0],{error:g}=await Xe.rpc("handle_group_invitation",{p_group_member_id:x,p_accept:f});if(g)throw g;Le.success(f?"Invitacin aceptada":"Invitacin rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),Le.error(p.message)}finally{s(!1)}};return i?u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),u.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitacin..."})]})}):a?u.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitacin a Grupo"}),u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",u.jsx("strong",{children:a.groupName})]}),u.jsxs("p",{className:"text-gray-600",children:["Rol: ",u.jsx("span",{className:"capitalize",children:a.role})]})]}),u.jsxs("div",{className:"flex justify-center space-x-4",children:[u.jsx(vt,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),u.jsx(vt,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function uq(){const[e,t]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(!1),a=async l=>{l.preventDefault(),s(!0),r("");const{error:c}=await Xe.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});s(!1),r(c?"Error: "+c.message:"Revisa tu correo para continuar el proceso!")};return u.jsx("div",{className:"max-w-md mx-auto mt-16",children:u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Olvidaste tu contrasea?"}),u.jsxs("form",{onSubmit:a,className:"space-y-6",children:[u.jsx(Xn,{label:"Email",type:"email",value:e,onChange:l=>t(l.target.value),required:!0,placeholder:"tu@email.com"}),u.jsx(vt,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&u.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),u.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:u.jsx(Ac,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function dq(){const[e,t]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(!1),[a,l]=k.useState(!1),[c,f]=k.useState(!1),p=da(),m=ua();k.useEffect(()=>{(async()=>{var N;try{const{data:j}=await Xe.auth.getSession(),E=new URLSearchParams(m.search),b=E.get("token"),S=E.get("type"),A=(N=m.state)==null?void 0:N.resetCode,O=localStorage.getItem("recovery_token");if(b&&S==="recovery")f(!0);else if(A){f(!0);try{await Xe.auth.verifyOtp({token_hash:A,type:"recovery"})}catch{}}else if(O){f(!0),localStorage.removeItem("recovery_token");try{await Xe.auth.verifyOtp({token_hash:O,type:"recovery"})}catch{}}else j.session?f(!0):a||p("/login")}catch(j){console.error("Error al verificar autenticacin:",j),p("/login")}})()},[m,p,a]);const x=async g=>{g.preventDefault(),s(!0),r("");try{const{error:N}=await Xe.auth.updateUser({password:e});if(N)throw N;l(!0),r("Contrasea actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(N){r("Error: "+N.message)}finally{s(!1)}};return u.jsx("div",{className:"max-w-md mx-auto mt-16",children:u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[u.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contrasea"}),c?u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:x,className:"space-y-6",children:[u.jsx(Xn,{label:"Nueva contrasea",type:"password",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:""}),u.jsx(vt,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contrasea"})]}),n&&u.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):u.jsxs("div",{className:"py-6 text-center",children:[u.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:u.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),u.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperacin..."}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automticamente, solicita un",u.jsx(Ac,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}const fq=()=>{const e=ua(),t=da(),[n,r]=k.useState(!0);return k.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(e.search),a=s.get("code"),l=s.get("state"),c=s.get("error");if(console.log(" SpotifyCallback: Processing callback...",{hasCode:!!a,hasState:!!l,error:c}),c){console.error(" Spotify auth error:",c),Le.error(`Error de autenticacin de Spotify: ${c}`),t("/");return}if(!a||!l){console.error(" Missing code or state parameters"),Le.error("Parmetros de autenticacin faltantes"),t("/");return}if(await On.handleAuthCallback(a,l)){console.log(" Spotify authentication successful");const p=await On.getCurrentUser();Le.success(`Conectado a Spotify como ${p.display_name}!`),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"));const m=localStorage.getItem("spotify_return_url");m?(localStorage.removeItem("spotify_return_url"),window.location.href=m):t("/")}else console.error(" Spotify authentication failed"),Le.error("Error al conectar con Spotify. Intntalo de nuevo."),t("/")}catch(s){console.error(" Error in Spotify callback:",s),s.message.includes("State mismatch")?(On.clearAuthState(),Le.error("Error de autenticacin de Spotify. Los parmetros han sido limpiados. Puedes intentar conectar de nuevo.")):Le.error(`Error al autenticar con Spotify: ${s.message}`),t("/")}finally{r(!1)}})()},[e.search,t]),n?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Conectando con Spotify..."}),u.jsx("p",{className:"text-gray-600",children:"Por favor espera mientras procesamos tu autenticacin"})]})}):null};function hq(){const{setUser:e,setSession:t}=Zr(),n=ua();return k.useEffect(()=>{const r=new URLSearchParams(n.search),i=r.get("token"),s=r.get("type"),a=n.hash;i&&s==="recovery"&&n.pathname!=="/reset-password"?window.location.replace(`/reset-password?token=${i}&type=${s}`):a.includes("access_token=")&&a.includes("type=recovery")&&n.pathname!=="/reset-password"&&window.location.replace("/reset-password"+a)},[n.search,n.pathname]),k.useEffect(()=>{Xe.auth.getSession().then(({data:{session:i}})=>{t(i),e((i==null?void 0:i.user)??null)});const{data:{subscription:r}}=Xe.auth.onAuthStateChange((i,s)=>{t(s),e((s==null?void 0:s.user)??null)});return()=>r.unsubscribe()},[e,t]),u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(rI,{}),u.jsx("main",{className:"container mx-auto px-4 py-8",children:u.jsxs(h7,{children:[u.jsx(Ps,{path:"/login",element:u.jsx(iI,{})}),u.jsx(Ps,{path:"/register",element:u.jsx(sI,{})}),u.jsx(Ps,{path:"/forgot-password",element:u.jsx(uq,{})}),u.jsx(Ps,{path:"/reset-password",element:u.jsx(dq,{})}),u.jsx(Ps,{path:"/accept-invitation",element:u.jsx(cq,{})}),u.jsx(Ps,{path:"/",element:u.jsx(Eh,{children:u.jsx(eR,{})})}),u.jsx(Ps,{path:"/group/:id",element:u.jsx(Eh,{children:u.jsx(n0,{})})}),u.jsx(Ps,{path:"/group/:id/songs",element:u.jsx(Eh,{children:u.jsx(n0,{defaultTab:"songs"})})}),u.jsx(Ps,{path:"/group/:id/setlists",element:u.jsx(Eh,{children:u.jsx(n0,{defaultTab:"setlists"})})}),u.jsx(Ps,{path:"/group/:id/statistics",element:u.jsx(Eh,{children:u.jsx(n0,{defaultTab:"statistics"})})}),u.jsx(Ps,{path:"/privacy-policy",element:u.jsx(lq,{})}),u.jsx(Ps,{path:"/spotify/callback",element:u.jsx(fq,{})})]})}),u.jsx(pT,{position:"top-right"})]})}function pq(){return u.jsx(b7,{children:u.jsx(hq,{})})}TS(document.getElementById("root")).render(u.jsx(k.StrictMode,{children:u.jsx(pq,{})}));export{An as _,ci as c,x3 as g};
