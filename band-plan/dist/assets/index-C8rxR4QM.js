function KC(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var x3={exports:{}},hg={},w3={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=Symbol.for("react.element"),XC=Symbol.for("react.portal"),QC=Symbol.for("react.fragment"),ZC=Symbol.for("react.strict_mode"),eA=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),iA=Symbol.for("react.suspense"),sA=Symbol.for("react.memo"),aA=Symbol.for("react.lazy"),xw=Symbol.iterator;function oA(e){return e===null||typeof e!="object"?null:(e=xw&&e[xw]||e["@@iterator"],typeof e=="function"?e:null)}var b3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_3=Object.assign,S3={};function Cf(e,t,n){this.props=e,this.context=t,this.refs=S3,this.updater=n||b3}Cf.prototype.isReactComponent={};Cf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N3(){}N3.prototype=Cf.prototype;function Ly(e,t,n){this.props=e,this.context=t,this.refs=S3,this.updater=n||b3}var Py=Ly.prototype=new N3;Py.constructor=Ly;_3(Py,Cf.prototype);Py.isPureReactComponent=!0;var ww=Array.isArray,j3=Object.prototype.hasOwnProperty,Ty={current:null},k3={key:!0,ref:!0,__self:!0,__source:!0};function E3(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)j3.call(t,r)&&!k3.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Np,type:e,key:s,ref:a,props:i,_owner:Ty.current}}function lA(e,t){return{$$typeof:Np,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function My(e){return typeof e=="object"&&e!==null&&e.$$typeof===Np}function cA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bw=/\/+/g;function H1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cA(""+e.key):t.toString(36)}function e0(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Np:case XC:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+H1(a,0):r,ww(i)?(n="",e!=null&&(n=e.replace(bw,"$&/")+"/"),e0(i,t,n,"",function(f){return f})):i!=null&&(My(i)&&(i=lA(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(bw,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",ww(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+H1(s,l);a+=e0(s,t,n,c,i)}else if(c=oA(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+H1(s,l++),a+=e0(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function _m(e,t,n){if(e==null)return e;var r=[],i=0;return e0(e,r,"","",function(s){return t.call(n,s,i++)}),r}function uA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zi={current:null},t0={transition:null},dA={ReactCurrentDispatcher:zi,ReactCurrentBatchConfig:t0,ReactCurrentOwner:Ty};function C3(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:_m,forEach:function(e,t,n){_m(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _m(e,function(){t++}),t},toArray:function(e){return _m(e,function(t){return t})||[]},only:function(e){if(!My(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};an.Component=Cf;an.Fragment=QC;an.Profiler=eA;an.PureComponent=Ly;an.StrictMode=ZC;an.Suspense=iA;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA;an.act=C3;an.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_3({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Ty.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j3.call(t,c)&&!k3.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Np,type:e.type,key:i,ref:s,props:r,_owner:a}};an.createContext=function(e){return e={$$typeof:nA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tA,_context:e},e.Consumer=e};an.createElement=E3;an.createFactory=function(e){var t=E3.bind(null,e);return t.type=e,t};an.createRef=function(){return{current:null}};an.forwardRef=function(e){return{$$typeof:rA,render:e}};an.isValidElement=My;an.lazy=function(e){return{$$typeof:aA,_payload:{_status:-1,_result:e},_init:uA}};an.memo=function(e,t){return{$$typeof:sA,type:e,compare:t===void 0?null:t}};an.startTransition=function(e){var t=t0.transition;t0.transition={};try{e()}finally{t0.transition=t}};an.unstable_act=C3;an.useCallback=function(e,t){return zi.current.useCallback(e,t)};an.useContext=function(e){return zi.current.useContext(e)};an.useDebugValue=function(){};an.useDeferredValue=function(e){return zi.current.useDeferredValue(e)};an.useEffect=function(e,t){return zi.current.useEffect(e,t)};an.useId=function(){return zi.current.useId()};an.useImperativeHandle=function(e,t,n){return zi.current.useImperativeHandle(e,t,n)};an.useInsertionEffect=function(e,t){return zi.current.useInsertionEffect(e,t)};an.useLayoutEffect=function(e,t){return zi.current.useLayoutEffect(e,t)};an.useMemo=function(e,t){return zi.current.useMemo(e,t)};an.useReducer=function(e,t,n){return zi.current.useReducer(e,t,n)};an.useRef=function(e){return zi.current.useRef(e)};an.useState=function(e){return zi.current.useState(e)};an.useSyncExternalStore=function(e,t,n){return zi.current.useSyncExternalStore(e,t,n)};an.useTransition=function(){return zi.current.useTransition()};an.version="18.3.1";w3.exports=an;var k=w3.exports;const vt=y3(k),Kv=KC({__proto__:null,default:vt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA=k,hA=Symbol.for("react.element"),pA=Symbol.for("react.fragment"),mA=Object.prototype.hasOwnProperty,gA=fA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vA={key:!0,ref:!0,__self:!0,__source:!0};function A3(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)mA.call(t,r)&&!vA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:hA,type:e,key:s,ref:a,props:i,_owner:gA.current}}hg.Fragment=pA;hg.jsx=A3;hg.jsxs=A3;x3.exports=hg;var d=x3.exports,L3={exports:{}},Fs={},P3={exports:{}},T3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,z){var oe=F.length;F.push(z);e:for(;0<oe;){var Le=oe-1>>>1,P=F[Le];if(0<i(P,z))F[Le]=z,F[oe]=P,oe=Le;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],oe=F.pop();if(oe!==z){F[0]=oe;e:for(var Le=0,P=F.length,V=P>>>1;Le<V;){var ne=2*(Le+1)-1,le=F[ne],de=ne+1,Ae=F[de];if(0>i(le,oe))de<P&&0>i(Ae,le)?(F[Le]=Ae,F[de]=oe,Le=de):(F[Le]=le,F[ne]=oe,Le=ne);else if(de<P&&0>i(Ae,oe))F[Le]=Ae,F[de]=oe,Le=de;else break e}}return z}function i(F,z){var oe=F.sortIndex-z.sortIndex;return oe!==0?oe:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,m=null,x=3,g=!1,N=!1,j=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var z=n(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=F)r(f),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(f)}}function O(F){if(j=!1,A(F),!N)if(n(c)!==null)N=!0,me(G);else{var z=n(f);z!==null&&X(O,z.startTime-F)}}function G(F,z){N=!1,j&&(j=!1,b(M),M=-1),g=!0;var oe=x;try{for(A(z),m=n(c);m!==null&&(!(m.expirationTime>z)||F&&!R());){var Le=m.callback;if(typeof Le=="function"){m.callback=null,x=m.priorityLevel;var P=Le(m.expirationTime<=z);z=e.unstable_now(),typeof P=="function"?m.callback=P:m===n(c)&&r(c),A(z)}else r(c);m=n(c)}if(m!==null)var V=!0;else{var ne=n(f);ne!==null&&X(O,ne.startTime-z),V=!1}return V}finally{m=null,x=oe,g=!1}}var ie=!1,q=null,M=-1,re=5,ae=-1;function R(){return!(e.unstable_now()-ae<re)}function U(){if(q!==null){var F=e.unstable_now();ae=F;var z=!0;try{z=q(!0,F)}finally{z?Y():(ie=!1,q=null)}}else ie=!1}var Y;if(typeof S=="function")Y=function(){S(U)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,xe=K.port2;K.port1.onmessage=U,Y=function(){xe.postMessage(null)}}else Y=function(){E(U,0)};function me(F){q=F,ie||(ie=!0,Y())}function X(F,z){M=E(function(){F(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){N||g||(N=!0,me(G))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(x){case 1:case 2:case 3:var z=3;break;default:z=x}var oe=x;x=z;try{return F()}finally{x=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var oe=x;x=F;try{return z()}finally{x=oe}},e.unstable_scheduleCallback=function(F,z,oe){var Le=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Le+oe:Le):oe=Le,F){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=oe+P,F={id:p++,callback:z,priorityLevel:F,startTime:oe,expirationTime:P,sortIndex:-1},oe>Le?(F.sortIndex=oe,t(f,F),n(c)===null&&F===n(f)&&(j?(b(M),M=-1):j=!0,X(O,oe-Le))):(F.sortIndex=P,t(c,F),N||g||(N=!0,me(G))),F},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(F){var z=x;return function(){var oe=x;x=z;try{return F.apply(this,arguments)}finally{x=oe}}}})(T3);P3.exports=T3;var yA=P3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA=k,Rs=yA;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M3=new Set,Xh={};function Hu(e,t){yf(e,t),yf(e+"Capture",t)}function yf(e,t){for(Xh[e]=t,e=0;e<t.length;e++)M3.add(t[e])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jv=Object.prototype.hasOwnProperty,wA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_w={},Sw={};function bA(e){return Jv.call(Sw,e)?!0:Jv.call(_w,e)?!1:wA.test(e)?Sw[e]=!0:(_w[e]=!0,!1)}function _A(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SA(e,t,n,r){if(t===null||typeof t>"u"||_A(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qi(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fi[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fi[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fi[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fi[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fi[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fi[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fi[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fi[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fi[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Dy=/[\-:]([a-z])/g;function Iy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Dy,Iy);fi[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Dy,Iy);fi[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Dy,Iy);fi[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fi[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});fi.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fi[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oy(e,t,n,r){var i=fi.hasOwnProperty(t)?fi[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SA(t,n,i,r)&&(n=null),r||i===null?bA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ll=xA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sm=Symbol.for("react.element"),Wd=Symbol.for("react.portal"),Hd=Symbol.for("react.fragment"),Ry=Symbol.for("react.strict_mode"),Xv=Symbol.for("react.profiler"),D3=Symbol.for("react.provider"),I3=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),Qv=Symbol.for("react.suspense"),Zv=Symbol.for("react.suspense_list"),$y=Symbol.for("react.memo"),sc=Symbol.for("react.lazy"),O3=Symbol.for("react.offscreen"),Nw=Symbol.iterator;function fh(e){return e===null||typeof e!="object"?null:(e=Nw&&e[Nw]||e["@@iterator"],typeof e=="function"?e:null)}var gr=Object.assign,V1;function Eh(e){if(V1===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V1=t&&t[1]||""}return`
`+V1+e}var G1=!1;function Y1(e,t){if(!e||G1)return"";G1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{G1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Eh(e):""}function NA(e){switch(e.tag){case 5:return Eh(e.type);case 16:return Eh("Lazy");case 13:return Eh("Suspense");case 19:return Eh("SuspenseList");case 0:case 2:case 15:return e=Y1(e.type,!1),e;case 11:return e=Y1(e.type.render,!1),e;case 1:return e=Y1(e.type,!0),e;default:return""}}function e2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hd:return"Fragment";case Wd:return"Portal";case Xv:return"Profiler";case Ry:return"StrictMode";case Qv:return"Suspense";case Zv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case I3:return(e.displayName||"Context")+".Consumer";case D3:return(e._context.displayName||"Context")+".Provider";case Fy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $y:return t=e.displayName||null,t!==null?t:e2(e.type)||"Memo";case sc:t=e._payload,e=e._init;try{return e2(e(t))}catch{}}return null}function jA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e2(t);case 8:return t===Ry?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function R3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kA(e){var t=R3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nm(e){e._valueTracker||(e._valueTracker=kA(e))}function F3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=R3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function t2(e,t){var n=t.checked;return gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Lc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $3(e,t){t=t.checked,t!=null&&Oy(e,"checked",t,!1)}function n2(e,t){$3(e,t);var n=Lc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?r2(e,t.type,n):t.hasOwnProperty("defaultValue")&&r2(e,t.type,Lc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function r2(e,t,n){(t!=="number"||_0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ch=Array.isArray;function rf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Lc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function i2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ew(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(lt(92));if(Ch(n)){if(1<n.length)throw Error(lt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Lc(n)}}function B3(e,t){var n=Lc(t.value),r=Lc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Cw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function U3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?U3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jm,z3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jm=jm||document.createElement("div"),jm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Mh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EA=["Webkit","ms","Moz","O"];Object.keys(Mh).forEach(function(e){EA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mh[t]=Mh[e]})});function q3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Mh.hasOwnProperty(e)&&Mh[e]?(""+t).trim():t+"px"}function W3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var CA=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a2(e,t){if(t){if(CA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function o2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l2=null;function By(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var c2=null,sf=null,af=null;function Aw(e){if(e=Ep(e)){if(typeof c2!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=yg(t),c2(e.stateNode,e.type,t))}}function H3(e){sf?af?af.push(e):af=[e]:sf=e}function V3(){if(sf){var e=sf,t=af;if(af=sf=null,Aw(e),t)for(e=0;e<t.length;e++)Aw(t[e])}}function G3(e,t){return e(t)}function Y3(){}var K1=!1;function K3(e,t,n){if(K1)return e(t,n);K1=!0;try{return G3(e,t,n)}finally{K1=!1,(sf!==null||af!==null)&&(Y3(),V3())}}function Zh(e,t){var n=e.stateNode;if(n===null)return null;var r=yg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(lt(231,t,typeof n));return n}var u2=!1;if(tl)try{var hh={};Object.defineProperty(hh,"passive",{get:function(){u2=!0}}),window.addEventListener("test",hh,hh),window.removeEventListener("test",hh,hh)}catch{u2=!1}function AA(e,t,n,r,i,s,a,l,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Dh=!1,S0=null,N0=!1,d2=null,LA={onError:function(e){Dh=!0,S0=e}};function PA(e,t,n,r,i,s,a,l,c){Dh=!1,S0=null,AA.apply(LA,arguments)}function TA(e,t,n,r,i,s,a,l,c){if(PA.apply(this,arguments),Dh){if(Dh){var f=S0;Dh=!1,S0=null}else throw Error(lt(198));N0||(N0=!0,d2=f)}}function Vu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function J3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lw(e){if(Vu(e)!==e)throw Error(lt(188))}function MA(e){var t=e.alternate;if(!t){if(t=Vu(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lw(i),e;if(s===r)return Lw(i),t;s=s.sibling}throw Error(lt(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(lt(189))}}if(n.alternate!==r)throw Error(lt(190))}if(n.tag!==3)throw Error(lt(188));return n.stateNode.current===n?e:t}function X3(e){return e=MA(e),e!==null?Q3(e):null}function Q3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Q3(e);if(t!==null)return t;e=e.sibling}return null}var Z3=Rs.unstable_scheduleCallback,Pw=Rs.unstable_cancelCallback,DA=Rs.unstable_shouldYield,IA=Rs.unstable_requestPaint,Er=Rs.unstable_now,OA=Rs.unstable_getCurrentPriorityLevel,Uy=Rs.unstable_ImmediatePriority,e4=Rs.unstable_UserBlockingPriority,j0=Rs.unstable_NormalPriority,RA=Rs.unstable_LowPriority,t4=Rs.unstable_IdlePriority,pg=null,go=null;function FA(e){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(pg,e,void 0,(e.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:UA,$A=Math.log,BA=Math.LN2;function UA(e){return e>>>=0,e===0?32:31-($A(e)/BA|0)|0}var km=64,Em=4194304;function Ah(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function k0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Ah(l):(s&=a,s!==0&&(r=Ah(s)))}else a=n&~i,a!==0?r=Ah(a):s!==0&&(r=Ah(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Da(t),i=1<<n,r|=e[n],t&=~i;return r}function zA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Da(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=zA(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function f2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n4(){var e=km;return km<<=1,!(km&4194240)&&(km=64),e}function J1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Da(t),e[t]=n}function WA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Da(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function zy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Da(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ln=0;function r4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i4,qy,s4,a4,o4,h2=!1,Cm=[],wc=null,bc=null,_c=null,ep=new Map,tp=new Map,cc=[],HA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tw(e,t){switch(e){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":_c=null;break;case"pointerover":case"pointerout":ep.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tp.delete(t.pointerId)}}function ph(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ep(t),t!==null&&qy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function VA(e,t,n,r,i){switch(t){case"focusin":return wc=ph(wc,e,t,n,r,i),!0;case"dragenter":return bc=ph(bc,e,t,n,r,i),!0;case"mouseover":return _c=ph(_c,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ep.set(s,ph(ep.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,tp.set(s,ph(tp.get(s)||null,e,t,n,r,i)),!0}return!1}function l4(e){var t=Cu(e.target);if(t!==null){var n=Vu(t);if(n!==null){if(t=n.tag,t===13){if(t=J3(n),t!==null){e.blockedOn=t,o4(e.priority,function(){s4(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function n0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=p2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);l2=r,n.target.dispatchEvent(r),l2=null}else return t=Ep(n),t!==null&&qy(t),e.blockedOn=n,!1;t.shift()}return!0}function Mw(e,t,n){n0(e)&&n.delete(t)}function GA(){h2=!1,wc!==null&&n0(wc)&&(wc=null),bc!==null&&n0(bc)&&(bc=null),_c!==null&&n0(_c)&&(_c=null),ep.forEach(Mw),tp.forEach(Mw)}function mh(e,t){e.blockedOn===t&&(e.blockedOn=null,h2||(h2=!0,Rs.unstable_scheduleCallback(Rs.unstable_NormalPriority,GA)))}function np(e){function t(i){return mh(i,e)}if(0<Cm.length){mh(Cm[0],e);for(var n=1;n<Cm.length;n++){var r=Cm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wc!==null&&mh(wc,e),bc!==null&&mh(bc,e),_c!==null&&mh(_c,e),ep.forEach(t),tp.forEach(t),n=0;n<cc.length;n++)r=cc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cc.length&&(n=cc[0],n.blockedOn===null);)l4(n),n.blockedOn===null&&cc.shift()}var of=ll.ReactCurrentBatchConfig,E0=!0;function YA(e,t,n,r){var i=Ln,s=of.transition;of.transition=null;try{Ln=1,Wy(e,t,n,r)}finally{Ln=i,of.transition=s}}function KA(e,t,n,r){var i=Ln,s=of.transition;of.transition=null;try{Ln=4,Wy(e,t,n,r)}finally{Ln=i,of.transition=s}}function Wy(e,t,n,r){if(E0){var i=p2(e,t,n,r);if(i===null)av(e,t,r,C0,n),Tw(e,r);else if(VA(i,e,t,n,r))r.stopPropagation();else if(Tw(e,r),t&4&&-1<HA.indexOf(e)){for(;i!==null;){var s=Ep(i);if(s!==null&&i4(s),s=p2(e,t,n,r),s===null&&av(e,t,r,C0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else av(e,t,r,null,n)}}var C0=null;function p2(e,t,n,r){if(C0=null,e=By(r),e=Cu(e),e!==null)if(t=Vu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=J3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return C0=e,null}function c4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OA()){case Uy:return 1;case e4:return 4;case j0:case RA:return 16;case t4:return 536870912;default:return 16}default:return 16}}var pc=null,Hy=null,r0=null;function u4(){if(r0)return r0;var e,t=Hy,n=t.length,r,i="value"in pc?pc.value:pc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return r0=i.slice(e,1<r?1-r:void 0)}function i0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Am(){return!0}function Dw(){return!1}function $s(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Am:Dw,this.isPropagationStopped=Dw,this}return gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Am)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Am)},persist:function(){},isPersistent:Am}),t}var Af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vy=$s(Af),kp=gr({},Af,{view:0,detail:0}),JA=$s(kp),X1,Q1,gh,mg=gr({},kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gh&&(gh&&e.type==="mousemove"?(X1=e.screenX-gh.screenX,Q1=e.screenY-gh.screenY):Q1=X1=0,gh=e),X1)},movementY:function(e){return"movementY"in e?e.movementY:Q1}}),Iw=$s(mg),XA=gr({},mg,{dataTransfer:0}),QA=$s(XA),ZA=gr({},kp,{relatedTarget:0}),Z1=$s(ZA),eL=gr({},Af,{animationName:0,elapsedTime:0,pseudoElement:0}),tL=$s(eL),nL=gr({},Af,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rL=$s(nL),iL=gr({},Af,{data:0}),Ow=$s(iL),sL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oL[e])?!!t[e]:!1}function Gy(){return lL}var cL=gr({},kp,{key:function(e){if(e.key){var t=sL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=i0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gy,charCode:function(e){return e.type==="keypress"?i0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?i0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uL=$s(cL),dL=gr({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rw=$s(dL),fL=gr({},kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gy}),hL=$s(fL),pL=gr({},Af,{propertyName:0,elapsedTime:0,pseudoElement:0}),mL=$s(pL),gL=gr({},mg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vL=$s(gL),yL=[9,13,27,32],Yy=tl&&"CompositionEvent"in window,Ih=null;tl&&"documentMode"in document&&(Ih=document.documentMode);var xL=tl&&"TextEvent"in window&&!Ih,d4=tl&&(!Yy||Ih&&8<Ih&&11>=Ih),Fw=" ",$w=!1;function f4(e,t){switch(e){case"keyup":return yL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vd=!1;function wL(e,t){switch(e){case"compositionend":return h4(t);case"keypress":return t.which!==32?null:($w=!0,Fw);case"textInput":return e=t.data,e===Fw&&$w?null:e;default:return null}}function bL(e,t){if(Vd)return e==="compositionend"||!Yy&&f4(e,t)?(e=u4(),r0=Hy=pc=null,Vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d4&&t.locale!=="ko"?null:t.data;default:return null}}var _L={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_L[e.type]:t==="textarea"}function p4(e,t,n,r){H3(r),t=A0(t,"onChange"),0<t.length&&(n=new Vy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Oh=null,rp=null;function SL(e){j4(e,0)}function gg(e){var t=Kd(e);if(F3(t))return e}function NL(e,t){if(e==="change")return t}var m4=!1;if(tl){var ev;if(tl){var tv="oninput"in document;if(!tv){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),tv=typeof Uw.oninput=="function"}ev=tv}else ev=!1;m4=ev&&(!document.documentMode||9<document.documentMode)}function zw(){Oh&&(Oh.detachEvent("onpropertychange",g4),rp=Oh=null)}function g4(e){if(e.propertyName==="value"&&gg(rp)){var t=[];p4(t,rp,e,By(e)),K3(SL,t)}}function jL(e,t,n){e==="focusin"?(zw(),Oh=t,rp=n,Oh.attachEvent("onpropertychange",g4)):e==="focusout"&&zw()}function kL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gg(rp)}function EL(e,t){if(e==="click")return gg(t)}function CL(e,t){if(e==="input"||e==="change")return gg(t)}function AL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ra=typeof Object.is=="function"?Object.is:AL;function ip(e,t){if(Ra(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jv.call(t,i)||!Ra(e[i],t[i]))return!1}return!0}function qw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ww(e,t){var n=qw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qw(n)}}function v4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?v4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function y4(){for(var e=window,t=_0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_0(e.document)}return t}function Ky(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LL(e){var t=y4(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&v4(n.ownerDocument.documentElement,n)){if(r!==null&&Ky(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Ww(n,s);var a=Ww(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var PL=tl&&"documentMode"in document&&11>=document.documentMode,Gd=null,m2=null,Rh=null,g2=!1;function Hw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g2||Gd==null||Gd!==_0(r)||(r=Gd,"selectionStart"in r&&Ky(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rh&&ip(Rh,r)||(Rh=r,r=A0(m2,"onSelect"),0<r.length&&(t=new Vy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gd)))}function Lm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yd={animationend:Lm("Animation","AnimationEnd"),animationiteration:Lm("Animation","AnimationIteration"),animationstart:Lm("Animation","AnimationStart"),transitionend:Lm("Transition","TransitionEnd")},nv={},x4={};tl&&(x4=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function vg(e){if(nv[e])return nv[e];if(!Yd[e])return e;var t=Yd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in x4)return nv[e]=t[n];return e}var w4=vg("animationend"),b4=vg("animationiteration"),_4=vg("animationstart"),S4=vg("transitionend"),N4=new Map,Vw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oc(e,t){N4.set(e,t),Hu(t,[e])}for(var rv=0;rv<Vw.length;rv++){var iv=Vw[rv],TL=iv.toLowerCase(),ML=iv[0].toUpperCase()+iv.slice(1);Oc(TL,"on"+ML)}Oc(w4,"onAnimationEnd");Oc(b4,"onAnimationIteration");Oc(_4,"onAnimationStart");Oc("dblclick","onDoubleClick");Oc("focusin","onFocus");Oc("focusout","onBlur");Oc(S4,"onTransitionEnd");yf("onMouseEnter",["mouseout","mouseover"]);yf("onMouseLeave",["mouseout","mouseover"]);yf("onPointerEnter",["pointerout","pointerover"]);yf("onPointerLeave",["pointerout","pointerover"]);Hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lh));function Gw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,TA(r,t,void 0,e),e.currentTarget=null}function j4(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Gw(i,l,f),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Gw(i,l,f),s=c}}}if(N0)throw e=d2,N0=!1,d2=null,e}function Yn(e,t){var n=t[b2];n===void 0&&(n=t[b2]=new Set);var r=e+"__bubble";n.has(r)||(k4(t,e,2,!1),n.add(r))}function sv(e,t,n){var r=0;t&&(r|=4),k4(n,e,r,t)}var Pm="_reactListening"+Math.random().toString(36).slice(2);function sp(e){if(!e[Pm]){e[Pm]=!0,M3.forEach(function(n){n!=="selectionchange"&&(DL.has(n)||sv(n,!1,e),sv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pm]||(t[Pm]=!0,sv("selectionchange",!1,t))}}function k4(e,t,n,r){switch(c4(t)){case 1:var i=YA;break;case 4:i=KA;break;default:i=Wy}n=i.bind(null,t,n,e),i=void 0,!u2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function av(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Cu(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}K3(function(){var f=s,p=By(n),m=[];e:{var x=N4.get(e);if(x!==void 0){var g=Vy,N=e;switch(e){case"keypress":if(i0(n)===0)break e;case"keydown":case"keyup":g=uL;break;case"focusin":N="focus",g=Z1;break;case"focusout":N="blur",g=Z1;break;case"beforeblur":case"afterblur":g=Z1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Iw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=QA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=hL;break;case w4:case b4:case _4:g=tL;break;case S4:g=mL;break;case"scroll":g=JA;break;case"wheel":g=vL;break;case"copy":case"cut":case"paste":g=rL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Rw}var j=(t&4)!==0,E=!j&&e==="scroll",b=j?x!==null?x+"Capture":null:x;j=[];for(var S=f,A;S!==null;){A=S;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,b!==null&&(O=Zh(S,b),O!=null&&j.push(ap(S,O,A)))),E)break;S=S.return}0<j.length&&(x=new g(x,N,null,n,p),m.push({event:x,listeners:j}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",x&&n!==l2&&(N=n.relatedTarget||n.fromElement)&&(Cu(N)||N[nl]))break e;if((g||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,g?(N=n.relatedTarget||n.toElement,g=f,N=N?Cu(N):null,N!==null&&(E=Vu(N),N!==E||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=f),g!==N)){if(j=Iw,O="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(j=Rw,O="onPointerLeave",b="onPointerEnter",S="pointer"),E=g==null?x:Kd(g),A=N==null?x:Kd(N),x=new j(O,S+"leave",g,n,p),x.target=E,x.relatedTarget=A,O=null,Cu(p)===f&&(j=new j(b,S+"enter",N,n,p),j.target=A,j.relatedTarget=E,O=j),E=O,g&&N)t:{for(j=g,b=N,S=0,A=j;A;A=Id(A))S++;for(A=0,O=b;O;O=Id(O))A++;for(;0<S-A;)j=Id(j),S--;for(;0<A-S;)b=Id(b),A--;for(;S--;){if(j===b||b!==null&&j===b.alternate)break t;j=Id(j),b=Id(b)}j=null}else j=null;g!==null&&Yw(m,x,g,j,!1),N!==null&&E!==null&&Yw(m,E,N,j,!0)}}e:{if(x=f?Kd(f):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var G=NL;else if(Bw(x))if(m4)G=CL;else{G=kL;var ie=jL}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(G=EL);if(G&&(G=G(e,f))){p4(m,G,n,p);break e}ie&&ie(e,x,f),e==="focusout"&&(ie=x._wrapperState)&&ie.controlled&&x.type==="number"&&r2(x,"number",x.value)}switch(ie=f?Kd(f):window,e){case"focusin":(Bw(ie)||ie.contentEditable==="true")&&(Gd=ie,m2=f,Rh=null);break;case"focusout":Rh=m2=Gd=null;break;case"mousedown":g2=!0;break;case"contextmenu":case"mouseup":case"dragend":g2=!1,Hw(m,n,p);break;case"selectionchange":if(PL)break;case"keydown":case"keyup":Hw(m,n,p)}var q;if(Yy)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Vd?f4(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(d4&&n.locale!=="ko"&&(Vd||M!=="onCompositionStart"?M==="onCompositionEnd"&&Vd&&(q=u4()):(pc=p,Hy="value"in pc?pc.value:pc.textContent,Vd=!0)),ie=A0(f,M),0<ie.length&&(M=new Ow(M,e,null,n,p),m.push({event:M,listeners:ie}),q?M.data=q:(q=h4(n),q!==null&&(M.data=q)))),(q=xL?wL(e,n):bL(e,n))&&(f=A0(f,"onBeforeInput"),0<f.length&&(p=new Ow("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=q))}j4(m,t)})}function ap(e,t,n){return{instance:e,listener:t,currentTarget:n}}function A0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zh(e,n),s!=null&&r.unshift(ap(e,s,i)),s=Zh(e,t),s!=null&&r.push(ap(e,s,i))),e=e.return}return r}function Id(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yw(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=Zh(n,s),c!=null&&a.unshift(ap(n,c,l))):i||(c=Zh(n,s),c!=null&&a.push(ap(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var IL=/\r\n?/g,OL=/\u0000|\uFFFD/g;function Kw(e){return(typeof e=="string"?e:""+e).replace(IL,`
`).replace(OL,"")}function Tm(e,t,n){if(t=Kw(t),Kw(e)!==t&&n)throw Error(lt(425))}function L0(){}var v2=null,y2=null;function x2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var w2=typeof setTimeout=="function"?setTimeout:void 0,RL=typeof clearTimeout=="function"?clearTimeout:void 0,Jw=typeof Promise=="function"?Promise:void 0,FL=typeof queueMicrotask=="function"?queueMicrotask:typeof Jw<"u"?function(e){return Jw.resolve(null).then(e).catch($L)}:w2;function $L(e){setTimeout(function(){throw e})}function ov(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),np(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);np(t)}function Sc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Lf=Math.random().toString(36).slice(2),uo="__reactFiber$"+Lf,op="__reactProps$"+Lf,nl="__reactContainer$"+Lf,b2="__reactEvents$"+Lf,BL="__reactListeners$"+Lf,UL="__reactHandles$"+Lf;function Cu(e){var t=e[uo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nl]||n[uo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xw(e);e!==null;){if(n=e[uo])return n;e=Xw(e)}return t}e=n,n=e.parentNode}return null}function Ep(e){return e=e[uo]||e[nl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function yg(e){return e[op]||null}var _2=[],Jd=-1;function Rc(e){return{current:e}}function Jn(e){0>Jd||(e.current=_2[Jd],_2[Jd]=null,Jd--)}function Hn(e,t){Jd++,_2[Jd]=e.current,e.current=t}var Pc={},Ci=Rc(Pc),us=Rc(!1),$u=Pc;function xf(e,t){var n=e.type.contextTypes;if(!n)return Pc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ds(e){return e=e.childContextTypes,e!=null}function P0(){Jn(us),Jn(Ci)}function Qw(e,t,n){if(Ci.current!==Pc)throw Error(lt(168));Hn(Ci,t),Hn(us,n)}function E4(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(lt(108,jA(e)||"Unknown",i));return gr({},n,r)}function T0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pc,$u=Ci.current,Hn(Ci,e),Hn(us,us.current),!0}function Zw(e,t,n){var r=e.stateNode;if(!r)throw Error(lt(169));n?(e=E4(e,t,$u),r.__reactInternalMemoizedMergedChildContext=e,Jn(us),Jn(Ci),Hn(Ci,e)):Jn(us),Hn(us,n)}var Ko=null,xg=!1,lv=!1;function C4(e){Ko===null?Ko=[e]:Ko.push(e)}function zL(e){xg=!0,C4(e)}function Fc(){if(!lv&&Ko!==null){lv=!0;var e=0,t=Ln;try{var n=Ko;for(Ln=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ko=null,xg=!1}catch(i){throw Ko!==null&&(Ko=Ko.slice(e+1)),Z3(Uy,Fc),i}finally{Ln=t,lv=!1}}return null}var Xd=[],Qd=0,M0=null,D0=0,ta=[],na=0,Bu=null,Xo=1,Qo="";function xu(e,t){Xd[Qd++]=D0,Xd[Qd++]=M0,M0=e,D0=t}function A4(e,t,n){ta[na++]=Xo,ta[na++]=Qo,ta[na++]=Bu,Bu=e;var r=Xo;e=Qo;var i=32-Da(r)-1;r&=~(1<<i),n+=1;var s=32-Da(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xo=1<<32-Da(t)+i|n<<i|r,Qo=s+e}else Xo=1<<s|n<<i|r,Qo=e}function Jy(e){e.return!==null&&(xu(e,1),A4(e,1,0))}function Xy(e){for(;e===M0;)M0=Xd[--Qd],Xd[Qd]=null,D0=Xd[--Qd],Xd[Qd]=null;for(;e===Bu;)Bu=ta[--na],ta[na]=null,Qo=ta[--na],ta[na]=null,Xo=ta[--na],ta[na]=null}var Os=null,Ds=null,ar=!1,Ta=null;function L4(e,t){var n=ra(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eb(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Os=e,Ds=Sc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Os=e,Ds=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bu!==null?{id:Xo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ra(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Os=e,Ds=null,!0):!1;default:return!1}}function S2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function N2(e){if(ar){var t=Ds;if(t){var n=t;if(!eb(e,t)){if(S2(e))throw Error(lt(418));t=Sc(n.nextSibling);var r=Os;t&&eb(e,t)?L4(r,n):(e.flags=e.flags&-4097|2,ar=!1,Os=e)}}else{if(S2(e))throw Error(lt(418));e.flags=e.flags&-4097|2,ar=!1,Os=e}}}function tb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Os=e}function Mm(e){if(e!==Os)return!1;if(!ar)return tb(e),ar=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!x2(e.type,e.memoizedProps)),t&&(t=Ds)){if(S2(e))throw P4(),Error(lt(418));for(;t;)L4(e,t),t=Sc(t.nextSibling)}if(tb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ds=Sc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ds=null}}else Ds=Os?Sc(e.stateNode.nextSibling):null;return!0}function P4(){for(var e=Ds;e;)e=Sc(e.nextSibling)}function wf(){Ds=Os=null,ar=!1}function Qy(e){Ta===null?Ta=[e]:Ta.push(e)}var qL=ll.ReactCurrentBatchConfig;function vh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(lt(309));var r=n.stateNode}if(!r)throw Error(lt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(lt(284));if(!n._owner)throw Error(lt(290,e))}return e}function Dm(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nb(e){var t=e._init;return t(e._payload)}function T4(e){function t(b,S){if(e){var A=b.deletions;A===null?(b.deletions=[S],b.flags|=16):A.push(S)}}function n(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=Ec(b,S),b.index=0,b.sibling=null,b}function s(b,S,A){return b.index=A,e?(A=b.alternate,A!==null?(A=A.index,A<S?(b.flags|=2,S):A):(b.flags|=2,S)):(b.flags|=1048576,S)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,S,A,O){return S===null||S.tag!==6?(S=mv(A,b.mode,O),S.return=b,S):(S=i(S,A),S.return=b,S)}function c(b,S,A,O){var G=A.type;return G===Hd?p(b,S,A.props.children,O,A.key):S!==null&&(S.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===sc&&nb(G)===S.type)?(O=i(S,A.props),O.ref=vh(b,S,A),O.return=b,O):(O=d0(A.type,A.key,A.props,null,b.mode,O),O.ref=vh(b,S,A),O.return=b,O)}function f(b,S,A,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=gv(A,b.mode,O),S.return=b,S):(S=i(S,A.children||[]),S.return=b,S)}function p(b,S,A,O,G){return S===null||S.tag!==7?(S=Du(A,b.mode,O,G),S.return=b,S):(S=i(S,A),S.return=b,S)}function m(b,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=mv(""+S,b.mode,A),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sm:return A=d0(S.type,S.key,S.props,null,b.mode,A),A.ref=vh(b,null,S),A.return=b,A;case Wd:return S=gv(S,b.mode,A),S.return=b,S;case sc:var O=S._init;return m(b,O(S._payload),A)}if(Ch(S)||fh(S))return S=Du(S,b.mode,A,null),S.return=b,S;Dm(b,S)}return null}function x(b,S,A,O){var G=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return G!==null?null:l(b,S,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Sm:return A.key===G?c(b,S,A,O):null;case Wd:return A.key===G?f(b,S,A,O):null;case sc:return G=A._init,x(b,S,G(A._payload),O)}if(Ch(A)||fh(A))return G!==null?null:p(b,S,A,O,null);Dm(b,A)}return null}function g(b,S,A,O,G){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(A)||null,l(S,b,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Sm:return b=b.get(O.key===null?A:O.key)||null,c(S,b,O,G);case Wd:return b=b.get(O.key===null?A:O.key)||null,f(S,b,O,G);case sc:var ie=O._init;return g(b,S,A,ie(O._payload),G)}if(Ch(O)||fh(O))return b=b.get(A)||null,p(S,b,O,G,null);Dm(S,O)}return null}function N(b,S,A,O){for(var G=null,ie=null,q=S,M=S=0,re=null;q!==null&&M<A.length;M++){q.index>M?(re=q,q=null):re=q.sibling;var ae=x(b,q,A[M],O);if(ae===null){q===null&&(q=re);break}e&&q&&ae.alternate===null&&t(b,q),S=s(ae,S,M),ie===null?G=ae:ie.sibling=ae,ie=ae,q=re}if(M===A.length)return n(b,q),ar&&xu(b,M),G;if(q===null){for(;M<A.length;M++)q=m(b,A[M],O),q!==null&&(S=s(q,S,M),ie===null?G=q:ie.sibling=q,ie=q);return ar&&xu(b,M),G}for(q=r(b,q);M<A.length;M++)re=g(q,b,M,A[M],O),re!==null&&(e&&re.alternate!==null&&q.delete(re.key===null?M:re.key),S=s(re,S,M),ie===null?G=re:ie.sibling=re,ie=re);return e&&q.forEach(function(R){return t(b,R)}),ar&&xu(b,M),G}function j(b,S,A,O){var G=fh(A);if(typeof G!="function")throw Error(lt(150));if(A=G.call(A),A==null)throw Error(lt(151));for(var ie=G=null,q=S,M=S=0,re=null,ae=A.next();q!==null&&!ae.done;M++,ae=A.next()){q.index>M?(re=q,q=null):re=q.sibling;var R=x(b,q,ae.value,O);if(R===null){q===null&&(q=re);break}e&&q&&R.alternate===null&&t(b,q),S=s(R,S,M),ie===null?G=R:ie.sibling=R,ie=R,q=re}if(ae.done)return n(b,q),ar&&xu(b,M),G;if(q===null){for(;!ae.done;M++,ae=A.next())ae=m(b,ae.value,O),ae!==null&&(S=s(ae,S,M),ie===null?G=ae:ie.sibling=ae,ie=ae);return ar&&xu(b,M),G}for(q=r(b,q);!ae.done;M++,ae=A.next())ae=g(q,b,M,ae.value,O),ae!==null&&(e&&ae.alternate!==null&&q.delete(ae.key===null?M:ae.key),S=s(ae,S,M),ie===null?G=ae:ie.sibling=ae,ie=ae);return e&&q.forEach(function(U){return t(b,U)}),ar&&xu(b,M),G}function E(b,S,A,O){if(typeof A=="object"&&A!==null&&A.type===Hd&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Sm:e:{for(var G=A.key,ie=S;ie!==null;){if(ie.key===G){if(G=A.type,G===Hd){if(ie.tag===7){n(b,ie.sibling),S=i(ie,A.props.children),S.return=b,b=S;break e}}else if(ie.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===sc&&nb(G)===ie.type){n(b,ie.sibling),S=i(ie,A.props),S.ref=vh(b,ie,A),S.return=b,b=S;break e}n(b,ie);break}else t(b,ie);ie=ie.sibling}A.type===Hd?(S=Du(A.props.children,b.mode,O,A.key),S.return=b,b=S):(O=d0(A.type,A.key,A.props,null,b.mode,O),O.ref=vh(b,S,A),O.return=b,b=O)}return a(b);case Wd:e:{for(ie=A.key;S!==null;){if(S.key===ie)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){n(b,S.sibling),S=i(S,A.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else t(b,S);S=S.sibling}S=gv(A,b.mode,O),S.return=b,b=S}return a(b);case sc:return ie=A._init,E(b,S,ie(A._payload),O)}if(Ch(A))return N(b,S,A,O);if(fh(A))return j(b,S,A,O);Dm(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(n(b,S.sibling),S=i(S,A),S.return=b,b=S):(n(b,S),S=mv(A,b.mode,O),S.return=b,b=S),a(b)):n(b,S)}return E}var bf=T4(!0),M4=T4(!1),I0=Rc(null),O0=null,Zd=null,Zy=null;function e5(){Zy=Zd=O0=null}function t5(e){var t=I0.current;Jn(I0),e._currentValue=t}function j2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function lf(e,t){O0=e,Zy=Zd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cs=!0),e.firstContext=null)}function sa(e){var t=e._currentValue;if(Zy!==e)if(e={context:e,memoizedValue:t,next:null},Zd===null){if(O0===null)throw Error(lt(308));Zd=e,O0.dependencies={lanes:0,firstContext:e}}else Zd=Zd.next=e;return t}var Au=null;function n5(e){Au===null?Au=[e]:Au.push(e)}function D4(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,n5(t)):(n.next=i.next,i.next=n),t.interleaved=n,rl(e,r)}function rl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ac=!1;function r5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I4(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,rl(e,n)}return i=r.interleaved,i===null?(t.next=t,n5(r)):(t.next=i.next,i.next=t),r.interleaved=t,rl(e,n)}function s0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zy(e,n)}}function rb(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function R0(e,t,n,r){var i=e.updateQueue;ac=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,p=f=c=null,l=s;do{var x=l.lane,g=l.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=e,j=l;switch(x=t,g=n,j.tag){case 1:if(N=j.payload,typeof N=="function"){m=N.call(g,m,x);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,x=typeof N=="function"?N.call(g,m,x):N,x==null)break e;m=gr({},m,x);break e;case 2:ac=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,x=i.effects,x===null?i.effects=[l]:x.push(l))}else g={eventTime:g,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=g,c=m):p=p.next=g,a|=x;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;x=l,l=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);zu|=a,e.lanes=a,e.memoizedState=m}}function ib(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(lt(191,i));i.call(r)}}}var Cp={},vo=Rc(Cp),lp=Rc(Cp),cp=Rc(Cp);function Lu(e){if(e===Cp)throw Error(lt(174));return e}function i5(e,t){switch(Hn(cp,t),Hn(lp,e),Hn(vo,Cp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:s2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=s2(t,e)}Jn(vo),Hn(vo,t)}function _f(){Jn(vo),Jn(lp),Jn(cp)}function O4(e){Lu(cp.current);var t=Lu(vo.current),n=s2(t,e.type);t!==n&&(Hn(lp,e),Hn(vo,n))}function s5(e){lp.current===e&&(Jn(vo),Jn(lp))}var hr=Rc(0);function F0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cv=[];function a5(){for(var e=0;e<cv.length;e++)cv[e]._workInProgressVersionPrimary=null;cv.length=0}var a0=ll.ReactCurrentDispatcher,uv=ll.ReactCurrentBatchConfig,Uu=0,mr=null,Ur=null,Jr=null,$0=!1,Fh=!1,up=0,WL=0;function wi(){throw Error(lt(321))}function o5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ra(e[n],t[n]))return!1;return!0}function l5(e,t,n,r,i,s){if(Uu=s,mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,a0.current=e===null||e.memoizedState===null?YL:KL,e=n(r,i),Fh){s=0;do{if(Fh=!1,up=0,25<=s)throw Error(lt(301));s+=1,Jr=Ur=null,t.updateQueue=null,a0.current=JL,e=n(r,i)}while(Fh)}if(a0.current=B0,t=Ur!==null&&Ur.next!==null,Uu=0,Jr=Ur=mr=null,$0=!1,t)throw Error(lt(300));return e}function c5(){var e=up!==0;return up=0,e}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?mr.memoizedState=Jr=e:Jr=Jr.next=e,Jr}function aa(){if(Ur===null){var e=mr.alternate;e=e!==null?e.memoizedState:null}else e=Ur.next;var t=Jr===null?mr.memoizedState:Jr.next;if(t!==null)Jr=t,Ur=e;else{if(e===null)throw Error(lt(310));Ur=e,e={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Jr===null?mr.memoizedState=Jr=e:Jr=Jr.next=e}return Jr}function dp(e,t){return typeof t=="function"?t(e):t}function dv(e){var t=aa(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=Ur,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,f=s;do{var p=f.lane;if((Uu&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,mr.lanes|=p,zu|=p}f=f.next}while(f!==null&&f!==s);c===null?a=r:c.next=l,Ra(r,t.memoizedState)||(cs=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,mr.lanes|=s,zu|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fv(e){var t=aa(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Ra(s,t.memoizedState)||(cs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function R4(){}function F4(e,t){var n=mr,r=aa(),i=t(),s=!Ra(r.memoizedState,i);if(s&&(r.memoizedState=i,cs=!0),r=r.queue,u5(U4.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Jr!==null&&Jr.memoizedState.tag&1){if(n.flags|=2048,fp(9,B4.bind(null,n,r,i,t),void 0,null),ti===null)throw Error(lt(349));Uu&30||$4(n,t,i)}return i}function $4(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function B4(e,t,n,r){t.value=n,t.getSnapshot=r,z4(t)&&q4(e)}function U4(e,t,n){return n(function(){z4(t)&&q4(e)})}function z4(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ra(e,n)}catch{return!0}}function q4(e){var t=rl(e,1);t!==null&&Ia(t,e,1,-1)}function sb(e){var t=lo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dp,lastRenderedState:e},t.queue=e,e=e.dispatch=GL.bind(null,mr,e),[t.memoizedState,e]}function fp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function W4(){return aa().memoizedState}function o0(e,t,n,r){var i=lo();mr.flags|=e,i.memoizedState=fp(1|t,n,void 0,r===void 0?null:r)}function wg(e,t,n,r){var i=aa();r=r===void 0?null:r;var s=void 0;if(Ur!==null){var a=Ur.memoizedState;if(s=a.destroy,r!==null&&o5(r,a.deps)){i.memoizedState=fp(t,n,s,r);return}}mr.flags|=e,i.memoizedState=fp(1|t,n,s,r)}function ab(e,t){return o0(8390656,8,e,t)}function u5(e,t){return wg(2048,8,e,t)}function H4(e,t){return wg(4,2,e,t)}function V4(e,t){return wg(4,4,e,t)}function G4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y4(e,t,n){return n=n!=null?n.concat([e]):null,wg(4,4,G4.bind(null,t,e),n)}function d5(){}function K4(e,t){var n=aa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&o5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function J4(e,t){var n=aa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&o5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function X4(e,t,n){return Uu&21?(Ra(n,t)||(n=n4(),mr.lanes|=n,zu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cs=!0),e.memoizedState=n)}function HL(e,t){var n=Ln;Ln=n!==0&&4>n?n:4,e(!0);var r=uv.transition;uv.transition={};try{e(!1),t()}finally{Ln=n,uv.transition=r}}function Q4(){return aa().memoizedState}function VL(e,t,n){var r=kc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z4(e))eS(t,n);else if(n=D4(e,t,n,r),n!==null){var i=Bi();Ia(n,e,r,i),tS(n,t,r)}}function GL(e,t,n){var r=kc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z4(e))eS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Ra(l,a)){var c=t.interleaved;c===null?(i.next=i,n5(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=D4(e,t,i,r),n!==null&&(i=Bi(),Ia(n,e,r,i),tS(n,t,r))}}function Z4(e){var t=e.alternate;return e===mr||t!==null&&t===mr}function eS(e,t){Fh=$0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zy(e,n)}}var B0={readContext:sa,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},YL={readContext:sa,useCallback:function(e,t){return lo().memoizedState=[e,t===void 0?null:t],e},useContext:sa,useEffect:ab,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,o0(4194308,4,G4.bind(null,t,e),n)},useLayoutEffect:function(e,t){return o0(4194308,4,e,t)},useInsertionEffect:function(e,t){return o0(4,2,e,t)},useMemo:function(e,t){var n=lo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=lo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=VL.bind(null,mr,e),[r.memoizedState,e]},useRef:function(e){var t=lo();return e={current:e},t.memoizedState=e},useState:sb,useDebugValue:d5,useDeferredValue:function(e){return lo().memoizedState=e},useTransition:function(){var e=sb(!1),t=e[0];return e=HL.bind(null,e[1]),lo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mr,i=lo();if(ar){if(n===void 0)throw Error(lt(407));n=n()}else{if(n=t(),ti===null)throw Error(lt(349));Uu&30||$4(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ab(U4.bind(null,r,s,e),[e]),r.flags|=2048,fp(9,B4.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=lo(),t=ti.identifierPrefix;if(ar){var n=Qo,r=Xo;n=(r&~(1<<32-Da(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=up++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=WL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KL={readContext:sa,useCallback:K4,useContext:sa,useEffect:u5,useImperativeHandle:Y4,useInsertionEffect:H4,useLayoutEffect:V4,useMemo:J4,useReducer:dv,useRef:W4,useState:function(){return dv(dp)},useDebugValue:d5,useDeferredValue:function(e){var t=aa();return X4(t,Ur.memoizedState,e)},useTransition:function(){var e=dv(dp)[0],t=aa().memoizedState;return[e,t]},useMutableSource:R4,useSyncExternalStore:F4,useId:Q4,unstable_isNewReconciler:!1},JL={readContext:sa,useCallback:K4,useContext:sa,useEffect:u5,useImperativeHandle:Y4,useInsertionEffect:H4,useLayoutEffect:V4,useMemo:J4,useReducer:fv,useRef:W4,useState:function(){return fv(dp)},useDebugValue:d5,useDeferredValue:function(e){var t=aa();return Ur===null?t.memoizedState=e:X4(t,Ur.memoizedState,e)},useTransition:function(){var e=fv(dp)[0],t=aa().memoizedState;return[e,t]},useMutableSource:R4,useSyncExternalStore:F4,useId:Q4,unstable_isNewReconciler:!1};function Ca(e,t){if(e&&e.defaultProps){t=gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function k2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bg={isMounted:function(e){return(e=e._reactInternals)?Vu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bi(),i=kc(e),s=Zo(r,i);s.payload=t,n!=null&&(s.callback=n),t=Nc(e,s,i),t!==null&&(Ia(t,e,i,r),s0(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bi(),i=kc(e),s=Zo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Nc(e,s,i),t!==null&&(Ia(t,e,i,r),s0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bi(),r=kc(e),i=Zo(n,r);i.tag=2,t!=null&&(i.callback=t),t=Nc(e,i,r),t!==null&&(Ia(t,e,r,n),s0(t,e,r))}};function ob(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!ip(n,r)||!ip(i,s):!0}function nS(e,t,n){var r=!1,i=Pc,s=t.contextType;return typeof s=="object"&&s!==null?s=sa(s):(i=ds(t)?$u:Ci.current,r=t.contextTypes,s=(r=r!=null)?xf(e,i):Pc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function lb(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bg.enqueueReplaceState(t,t.state,null)}function E2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},r5(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=sa(s):(s=ds(t)?$u:Ci.current,i.context=xf(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(k2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&bg.enqueueReplaceState(i,i.state,null),R0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Sf(e,t){try{var n="",r=t;do n+=NA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function hv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function C2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var XL=typeof WeakMap=="function"?WeakMap:Map;function rS(e,t,n){n=Zo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){z0||(z0=!0,F2=r),C2(e,t)},n}function iS(e,t,n){n=Zo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){C2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){C2(e,t),typeof r!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function cb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new XL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=dP.bind(null,e,t,n),t.then(e,e))}function ub(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function db(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zo(-1,1),t.tag=2,Nc(n,t,1))),n.lanes|=1),e)}var QL=ll.ReactCurrentOwner,cs=!1;function Fi(e,t,n,r){t.child=e===null?M4(t,null,n,r):bf(t,e.child,n,r)}function fb(e,t,n,r,i){n=n.render;var s=t.ref;return lf(t,i),r=l5(e,t,n,r,s,i),n=c5(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,il(e,t,i)):(ar&&n&&Jy(t),t.flags|=1,Fi(e,t,r,i),t.child)}function hb(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!x5(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,sS(e,t,s,r,i)):(e=d0(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ip,n(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,e=Ec(s,r),e.ref=t.ref,e.return=t,t.child=e}function sS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ip(s,r)&&e.ref===t.ref)if(cs=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(cs=!0);else return t.lanes=e.lanes,il(e,t,i)}return A2(e,t,n,r,i)}function aS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hn(tf,Ms),Ms|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Hn(tf,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Hn(tf,Ms),Ms|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Hn(tf,Ms),Ms|=r;return Fi(e,t,i,n),t.child}function oS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function A2(e,t,n,r,i){var s=ds(n)?$u:Ci.current;return s=xf(t,s),lf(t,i),n=l5(e,t,n,r,s,i),r=c5(),e!==null&&!cs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,il(e,t,i)):(ar&&r&&Jy(t),t.flags|=1,Fi(e,t,n,i),t.child)}function pb(e,t,n,r,i){if(ds(n)){var s=!0;T0(t)}else s=!1;if(lf(t,i),t.stateNode===null)l0(e,t),nS(t,n,r),E2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=sa(f):(f=ds(n)?$u:Ci.current,f=xf(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==f)&&lb(t,a,r,f),ac=!1;var x=t.memoizedState;a.state=x,R0(t,r,a,i),c=t.memoizedState,l!==r||x!==c||us.current||ac?(typeof p=="function"&&(k2(t,n,p,r),c=t.memoizedState),(l=ac||ob(t,n,l,r,x,c,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,I4(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Ca(t.type,l),a.props=f,m=t.pendingProps,x=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=sa(c):(c=ds(n)?$u:Ci.current,c=xf(t,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||x!==c)&&lb(t,a,r,c),ac=!1,x=t.memoizedState,a.state=x,R0(t,r,a,i);var N=t.memoizedState;l!==m||x!==N||us.current||ac?(typeof g=="function"&&(k2(t,n,g,r),N=t.memoizedState),(f=ac||ob(t,n,f,r,x,N,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),a.props=r,a.state=N,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return L2(e,t,n,r,s,i)}function L2(e,t,n,r,i,s){oS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Zw(t,n,!1),il(e,t,s);r=t.stateNode,QL.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=bf(t,e.child,null,s),t.child=bf(t,null,l,s)):Fi(e,t,l,s),t.memoizedState=r.state,i&&Zw(t,n,!0),t.child}function lS(e){var t=e.stateNode;t.pendingContext?Qw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qw(e,t.context,!1),i5(e,t.containerInfo)}function mb(e,t,n,r,i){return wf(),Qy(i),t.flags|=256,Fi(e,t,n,r),t.child}var P2={dehydrated:null,treeContext:null,retryLane:0};function T2(e){return{baseLanes:e,cachePool:null,transitions:null}}function cS(e,t,n){var r=t.pendingProps,i=hr.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Hn(hr,i&1),e===null)return N2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ng(a,r,0,null),e=Du(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=T2(n),t.memoizedState=P2,e):f5(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return ZL(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ec(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ec(l,s):(s=Du(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?T2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=P2,r}return s=e.child,e=s.sibling,r=Ec(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function f5(e,t){return t=Ng({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Im(e,t,n,r){return r!==null&&Qy(r),bf(t,e.child,null,n),e=f5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ZL(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=hv(Error(lt(422))),Im(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ng({mode:"visible",children:r.children},i,0,null),s=Du(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&bf(t,e.child,null,a),t.child.memoizedState=T2(a),t.memoizedState=P2,s);if(!(t.mode&1))return Im(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(lt(419)),r=hv(s,r,void 0),Im(e,t,a,r)}if(l=(a&e.childLanes)!==0,cs||l){if(r=ti,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rl(e,i),Ia(r,e,i,-1))}return y5(),r=hv(Error(lt(421))),Im(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fP.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ds=Sc(i.nextSibling),Os=t,ar=!0,Ta=null,e!==null&&(ta[na++]=Xo,ta[na++]=Qo,ta[na++]=Bu,Xo=e.id,Qo=e.overflow,Bu=t),t=f5(t,r.children),t.flags|=4096,t)}function gb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),j2(e.return,t,n)}function pv(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function uS(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fi(e,t,r.children,n),r=hr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gb(e,n,t);else if(e.tag===19)gb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Hn(hr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&F0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),pv(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&F0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}pv(t,!0,n,null,s);break;case"together":pv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function l0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function il(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,n=Ec(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ec(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function eP(e,t,n){switch(t.tag){case 3:lS(t),wf();break;case 5:O4(t);break;case 1:ds(t.type)&&T0(t);break;case 4:i5(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Hn(I0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Hn(hr,hr.current&1),t.flags|=128,null):n&t.child.childLanes?cS(e,t,n):(Hn(hr,hr.current&1),e=il(e,t,n),e!==null?e.sibling:null);Hn(hr,hr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return uS(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hn(hr,hr.current),r)break;return null;case 22:case 23:return t.lanes=0,aS(e,t,n)}return il(e,t,n)}var dS,M2,fS,hS;dS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};M2=function(){};fS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Lu(vo.current);var s=null;switch(n){case"input":i=t2(e,i),r=t2(e,r),s=[];break;case"select":i=gr({},i,{value:void 0}),r=gr({},r,{value:void 0}),s=[];break;case"textarea":i=i2(e,i),r=i2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=L0)}a2(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Xh.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Xh.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Yn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}};hS=function(e,t,n,r){n!==r&&(t.flags|=4)};function yh(e,t){if(!ar)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tP(e,t,n){var r=t.pendingProps;switch(Xy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(t),null;case 1:return ds(t.type)&&P0(),bi(t),null;case 3:return r=t.stateNode,_f(),Jn(us),Jn(Ci),a5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Mm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ta!==null&&(U2(Ta),Ta=null))),M2(e,t),bi(t),null;case 5:s5(t);var i=Lu(cp.current);if(n=t.type,e!==null&&t.stateNode!=null)fS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(lt(166));return bi(t),null}if(e=Lu(vo.current),Mm(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[uo]=t,r[op]=s,e=(t.mode&1)!==0,n){case"dialog":Yn("cancel",r),Yn("close",r);break;case"iframe":case"object":case"embed":Yn("load",r);break;case"video":case"audio":for(i=0;i<Lh.length;i++)Yn(Lh[i],r);break;case"source":Yn("error",r);break;case"img":case"image":case"link":Yn("error",r),Yn("load",r);break;case"details":Yn("toggle",r);break;case"input":jw(r,s),Yn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yn("invalid",r);break;case"textarea":Ew(r,s),Yn("invalid",r)}a2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Tm(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Tm(r.textContent,l,e),i=["children",""+l]):Xh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Yn("scroll",r)}switch(n){case"input":Nm(r),kw(r,s,!0);break;case"textarea":Nm(r),Cw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=L0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=U3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[uo]=t,e[op]=r,dS(e,t,!1,!1),t.stateNode=e;e:{switch(a=o2(n,r),n){case"dialog":Yn("cancel",e),Yn("close",e),i=r;break;case"iframe":case"object":case"embed":Yn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lh.length;i++)Yn(Lh[i],e);i=r;break;case"source":Yn("error",e),i=r;break;case"img":case"image":case"link":Yn("error",e),Yn("load",e),i=r;break;case"details":Yn("toggle",e),i=r;break;case"input":jw(e,r),i=t2(e,r),Yn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=gr({},r,{value:void 0}),Yn("invalid",e);break;case"textarea":Ew(e,r),i=i2(e,r),Yn("invalid",e);break;default:i=r}a2(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?W3(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&z3(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Qh(e,c):typeof c=="number"&&Qh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Yn("scroll",e):c!=null&&Oy(e,s,c,a))}switch(n){case"input":Nm(e),kw(e,r,!1);break;case"textarea":Nm(e),Cw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Lc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?rf(e,!!r.multiple,s,!1):r.defaultValue!=null&&rf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=L0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bi(t),null;case 6:if(e&&t.stateNode!=null)hS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(lt(166));if(n=Lu(cp.current),Lu(vo.current),Mm(t)){if(r=t.stateNode,n=t.memoizedProps,r[uo]=t,(s=r.nodeValue!==n)&&(e=Os,e!==null))switch(e.tag){case 3:Tm(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tm(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[uo]=t,t.stateNode=r}return bi(t),null;case 13:if(Jn(hr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ar&&Ds!==null&&t.mode&1&&!(t.flags&128))P4(),wf(),t.flags|=98560,s=!1;else if(s=Mm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(lt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(lt(317));s[uo]=t}else wf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bi(t),s=!1}else Ta!==null&&(U2(Ta),Ta=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||hr.current&1?qr===0&&(qr=3):y5())),t.updateQueue!==null&&(t.flags|=4),bi(t),null);case 4:return _f(),M2(e,t),e===null&&sp(t.stateNode.containerInfo),bi(t),null;case 10:return t5(t.type._context),bi(t),null;case 17:return ds(t.type)&&P0(),bi(t),null;case 19:if(Jn(hr),s=t.memoizedState,s===null)return bi(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)yh(s,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=F0(e),a!==null){for(t.flags|=128,yh(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Hn(hr,hr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Er()>Nf&&(t.flags|=128,r=!0,yh(s,!1),t.lanes=4194304)}else{if(!r)if(e=F0(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ar)return bi(t),null}else 2*Er()-s.renderingStartTime>Nf&&n!==1073741824&&(t.flags|=128,r=!0,yh(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Er(),t.sibling=null,n=hr.current,Hn(hr,r?n&1|2:n&1),t):(bi(t),null);case 22:case 23:return v5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ms&1073741824&&(bi(t),t.subtreeFlags&6&&(t.flags|=8192)):bi(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function nP(e,t){switch(Xy(t),t.tag){case 1:return ds(t.type)&&P0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _f(),Jn(us),Jn(Ci),a5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return s5(t),null;case 13:if(Jn(hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));wf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jn(hr),null;case 4:return _f(),null;case 10:return t5(t.type._context),null;case 22:case 23:return v5(),null;case 24:return null;default:return null}}var Om=!1,ki=!1,rP=typeof WeakSet=="function"?WeakSet:Set,yt=null;function ef(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){br(e,t,r)}else n.current=null}function D2(e,t,n){try{n()}catch(r){br(e,t,r)}}var vb=!1;function iP(e,t){if(v2=E0,e=y4(),Ky(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,f=0,p=0,m=e,x=null;t:for(;;){for(var g;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)x=m,m=g;for(;;){if(m===e)break t;if(x===n&&++f===i&&(l=a),x===s&&++p===r&&(c=a),(g=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(y2={focusedElem:e,selectionRange:n},E0=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){t=yt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,E=N.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ca(t.type,j),E);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(O){br(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return N=vb,vb=!1,N}function $h(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&D2(t,n,s)}i=i.next}while(i!==r)}}function _g(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function I2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pS(e){var t=e.alternate;t!==null&&(e.alternate=null,pS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[uo],delete t[op],delete t[b2],delete t[BL],delete t[UL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mS(e){return e.tag===5||e.tag===3||e.tag===4}function yb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function O2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=L0));else if(r!==4&&(e=e.child,e!==null))for(O2(e,t,n),e=e.sibling;e!==null;)O2(e,t,n),e=e.sibling}function R2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(R2(e,t,n),e=e.sibling;e!==null;)R2(e,t,n),e=e.sibling}var li=null,La=!1;function Zl(e,t,n){for(n=n.child;n!==null;)gS(e,t,n),n=n.sibling}function gS(e,t,n){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(pg,n)}catch{}switch(n.tag){case 5:ki||ef(n,t);case 6:var r=li,i=La;li=null,Zl(e,t,n),li=r,La=i,li!==null&&(La?(e=li,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):li.removeChild(n.stateNode));break;case 18:li!==null&&(La?(e=li,n=n.stateNode,e.nodeType===8?ov(e.parentNode,n):e.nodeType===1&&ov(e,n),np(e)):ov(li,n.stateNode));break;case 4:r=li,i=La,li=n.stateNode.containerInfo,La=!0,Zl(e,t,n),li=r,La=i;break;case 0:case 11:case 14:case 15:if(!ki&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&D2(n,t,a),i=i.next}while(i!==r)}Zl(e,t,n);break;case 1:if(!ki&&(ef(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){br(n,t,l)}Zl(e,t,n);break;case 21:Zl(e,t,n);break;case 22:n.mode&1?(ki=(r=ki)||n.memoizedState!==null,Zl(e,t,n),ki=r):Zl(e,t,n);break;default:Zl(e,t,n)}}function xb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rP),t.forEach(function(r){var i=hP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Na(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:li=l.stateNode,La=!1;break e;case 3:li=l.stateNode.containerInfo,La=!0;break e;case 4:li=l.stateNode.containerInfo,La=!0;break e}l=l.return}if(li===null)throw Error(lt(160));gS(s,a,i),li=null,La=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){br(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vS(t,e),t=t.sibling}function vS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Na(t,e),ao(e),r&4){try{$h(3,e,e.return),_g(3,e)}catch(j){br(e,e.return,j)}try{$h(5,e,e.return)}catch(j){br(e,e.return,j)}}break;case 1:Na(t,e),ao(e),r&512&&n!==null&&ef(n,n.return);break;case 5:if(Na(t,e),ao(e),r&512&&n!==null&&ef(n,n.return),e.flags&32){var i=e.stateNode;try{Qh(i,"")}catch(j){br(e,e.return,j)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&$3(i,s),o2(l,a);var f=o2(l,s);for(a=0;a<c.length;a+=2){var p=c[a],m=c[a+1];p==="style"?W3(i,m):p==="dangerouslySetInnerHTML"?z3(i,m):p==="children"?Qh(i,m):Oy(i,p,m,f)}switch(l){case"input":n2(i,s);break;case"textarea":B3(i,s);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?rf(i,!!s.multiple,g,!1):x!==!!s.multiple&&(s.defaultValue!=null?rf(i,!!s.multiple,s.defaultValue,!0):rf(i,!!s.multiple,s.multiple?[]:"",!1))}i[op]=s}catch(j){br(e,e.return,j)}}break;case 6:if(Na(t,e),ao(e),r&4){if(e.stateNode===null)throw Error(lt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(j){br(e,e.return,j)}}break;case 3:if(Na(t,e),ao(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{np(t.containerInfo)}catch(j){br(e,e.return,j)}break;case 4:Na(t,e),ao(e);break;case 13:Na(t,e),ao(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(m5=Er())),r&4&&xb(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(ki=(f=ki)||p,Na(t,e),ki=f):Na(t,e),ao(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(yt=e,p=e.child;p!==null;){for(m=yt=p;yt!==null;){switch(x=yt,g=x.child,x.tag){case 0:case 11:case 14:case 15:$h(4,x,x.return);break;case 1:ef(x,x.return);var N=x.stateNode;if(typeof N.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(j){br(r,n,j)}}break;case 5:ef(x,x.return);break;case 22:if(x.memoizedState!==null){bb(m);continue}}g!==null?(g.return=x,yt=g):bb(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=q3("display",a))}catch(j){br(e,e.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(j){br(e,e.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Na(t,e),ao(e),r&4&&xb(e);break;case 21:break;default:Na(t,e),ao(e)}}function ao(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mS(n)){var r=n;break e}n=n.return}throw Error(lt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qh(i,""),r.flags&=-33);var s=yb(e);R2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=yb(e);O2(e,l,a);break;default:throw Error(lt(161))}}catch(c){br(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sP(e,t,n){yt=e,yS(e)}function yS(e,t,n){for(var r=(e.mode&1)!==0;yt!==null;){var i=yt,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Om;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||ki;l=Om;var f=ki;if(Om=a,(ki=c)&&!f)for(yt=i;yt!==null;)a=yt,c=a.child,a.tag===22&&a.memoizedState!==null?_b(i):c!==null?(c.return=a,yt=c):_b(i);for(;s!==null;)yt=s,yS(s),s=s.sibling;yt=i,Om=l,ki=f}wb(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,yt=s):wb(e)}}function wb(e){for(;yt!==null;){var t=yt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ki||_g(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ki)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ca(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ib(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ib(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&np(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}ki||t.flags&512&&I2(t)}catch(x){br(t,t.return,x)}}if(t===e){yt=null;break}if(n=t.sibling,n!==null){n.return=t.return,yt=n;break}yt=t.return}}function bb(e){for(;yt!==null;){var t=yt;if(t===e){yt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,yt=n;break}yt=t.return}}function _b(e){for(;yt!==null;){var t=yt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_g(4,t)}catch(c){br(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){br(t,i,c)}}var s=t.return;try{I2(t)}catch(c){br(t,s,c)}break;case 5:var a=t.return;try{I2(t)}catch(c){br(t,a,c)}}}catch(c){br(t,t.return,c)}if(t===e){yt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,yt=l;break}yt=t.return}}var aP=Math.ceil,U0=ll.ReactCurrentDispatcher,h5=ll.ReactCurrentOwner,ia=ll.ReactCurrentBatchConfig,pn=0,ti=null,Or=null,ui=0,Ms=0,tf=Rc(0),qr=0,hp=null,zu=0,Sg=0,p5=0,Bh=null,os=null,m5=0,Nf=1/0,Yo=null,z0=!1,F2=null,jc=null,Rm=!1,mc=null,q0=0,Uh=0,$2=null,c0=-1,u0=0;function Bi(){return pn&6?Er():c0!==-1?c0:c0=Er()}function kc(e){return e.mode&1?pn&2&&ui!==0?ui&-ui:qL.transition!==null?(u0===0&&(u0=n4()),u0):(e=Ln,e!==0||(e=window.event,e=e===void 0?16:c4(e.type)),e):1}function Ia(e,t,n,r){if(50<Uh)throw Uh=0,$2=null,Error(lt(185));jp(e,n,r),(!(pn&2)||e!==ti)&&(e===ti&&(!(pn&2)&&(Sg|=n),qr===4&&uc(e,ui)),fs(e,r),n===1&&pn===0&&!(t.mode&1)&&(Nf=Er()+500,xg&&Fc()))}function fs(e,t){var n=e.callbackNode;qA(e,t);var r=k0(e,e===ti?ui:0);if(r===0)n!==null&&Pw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pw(n),t===1)e.tag===0?zL(Sb.bind(null,e)):C4(Sb.bind(null,e)),FL(function(){!(pn&6)&&Fc()}),n=null;else{switch(r4(r)){case 1:n=Uy;break;case 4:n=e4;break;case 16:n=j0;break;case 536870912:n=t4;break;default:n=j0}n=kS(n,xS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xS(e,t){if(c0=-1,u0=0,pn&6)throw Error(lt(327));var n=e.callbackNode;if(cf()&&e.callbackNode!==n)return null;var r=k0(e,e===ti?ui:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=W0(e,r);else{t=r;var i=pn;pn|=2;var s=bS();(ti!==e||ui!==t)&&(Yo=null,Nf=Er()+500,Mu(e,t));do try{cP();break}catch(l){wS(e,l)}while(!0);e5(),U0.current=s,pn=i,Or!==null?t=0:(ti=null,ui=0,t=qr)}if(t!==0){if(t===2&&(i=f2(e),i!==0&&(r=i,t=B2(e,i))),t===1)throw n=hp,Mu(e,0),uc(e,r),fs(e,Er()),n;if(t===6)uc(e,r);else{if(i=e.current.alternate,!(r&30)&&!oP(i)&&(t=W0(e,r),t===2&&(s=f2(e),s!==0&&(r=s,t=B2(e,s))),t===1))throw n=hp,Mu(e,0),uc(e,r),fs(e,Er()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(lt(345));case 2:wu(e,os,Yo);break;case 3:if(uc(e,r),(r&130023424)===r&&(t=m5+500-Er(),10<t)){if(k0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Bi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=w2(wu.bind(null,e,os,Yo),t);break}wu(e,os,Yo);break;case 4:if(uc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Da(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aP(r/1960))-r,10<r){e.timeoutHandle=w2(wu.bind(null,e,os,Yo),r);break}wu(e,os,Yo);break;case 5:wu(e,os,Yo);break;default:throw Error(lt(329))}}}return fs(e,Er()),e.callbackNode===n?xS.bind(null,e):null}function B2(e,t){var n=Bh;return e.current.memoizedState.isDehydrated&&(Mu(e,t).flags|=256),e=W0(e,t),e!==2&&(t=os,os=n,t!==null&&U2(t)),e}function U2(e){os===null?os=e:os.push.apply(os,e)}function oP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ra(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function uc(e,t){for(t&=~p5,t&=~Sg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Da(t),r=1<<n;e[n]=-1,t&=~r}}function Sb(e){if(pn&6)throw Error(lt(327));cf();var t=k0(e,0);if(!(t&1))return fs(e,Er()),null;var n=W0(e,t);if(e.tag!==0&&n===2){var r=f2(e);r!==0&&(t=r,n=B2(e,r))}if(n===1)throw n=hp,Mu(e,0),uc(e,t),fs(e,Er()),n;if(n===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,os,Yo),fs(e,Er()),null}function g5(e,t){var n=pn;pn|=1;try{return e(t)}finally{pn=n,pn===0&&(Nf=Er()+500,xg&&Fc())}}function qu(e){mc!==null&&mc.tag===0&&!(pn&6)&&cf();var t=pn;pn|=1;var n=ia.transition,r=Ln;try{if(ia.transition=null,Ln=1,e)return e()}finally{Ln=r,ia.transition=n,pn=t,!(pn&6)&&Fc()}}function v5(){Ms=tf.current,Jn(tf)}function Mu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,RL(n)),Or!==null)for(n=Or.return;n!==null;){var r=n;switch(Xy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&P0();break;case 3:_f(),Jn(us),Jn(Ci),a5();break;case 5:s5(r);break;case 4:_f();break;case 13:Jn(hr);break;case 19:Jn(hr);break;case 10:t5(r.type._context);break;case 22:case 23:v5()}n=n.return}if(ti=e,Or=e=Ec(e.current,null),ui=Ms=t,qr=0,hp=null,p5=Sg=zu=0,os=Bh=null,Au!==null){for(t=0;t<Au.length;t++)if(n=Au[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Au=null}return e}function wS(e,t){do{var n=Or;try{if(e5(),a0.current=B0,$0){for(var r=mr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$0=!1}if(Uu=0,Jr=Ur=mr=null,Fh=!1,up=0,h5.current=null,n===null||n.return===null){qr=1,hp=t,Or=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=ui,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=ub(a);if(g!==null){g.flags&=-257,db(g,a,l,s,t),g.mode&1&&cb(s,f,t),t=g,c=f;var N=t.updateQueue;if(N===null){var j=new Set;j.add(c),t.updateQueue=j}else N.add(c);break e}else{if(!(t&1)){cb(s,f,t),y5();break e}c=Error(lt(426))}}else if(ar&&l.mode&1){var E=ub(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),db(E,a,l,s,t),Qy(Sf(c,l));break e}}s=c=Sf(c,l),qr!==4&&(qr=2),Bh===null?Bh=[s]:Bh.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=rS(s,c,t);rb(s,b);break e;case 1:l=c;var S=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(jc===null||!jc.has(A)))){s.flags|=65536,t&=-t,s.lanes|=t;var O=iS(s,l,t);rb(s,O);break e}}s=s.return}while(s!==null)}SS(n)}catch(G){t=G,Or===n&&n!==null&&(Or=n=n.return);continue}break}while(!0)}function bS(){var e=U0.current;return U0.current=B0,e===null?B0:e}function y5(){(qr===0||qr===3||qr===2)&&(qr=4),ti===null||!(zu&268435455)&&!(Sg&268435455)||uc(ti,ui)}function W0(e,t){var n=pn;pn|=2;var r=bS();(ti!==e||ui!==t)&&(Yo=null,Mu(e,t));do try{lP();break}catch(i){wS(e,i)}while(!0);if(e5(),pn=n,U0.current=r,Or!==null)throw Error(lt(261));return ti=null,ui=0,qr}function lP(){for(;Or!==null;)_S(Or)}function cP(){for(;Or!==null&&!DA();)_S(Or)}function _S(e){var t=jS(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,t===null?SS(e):Or=t,h5.current=null}function SS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nP(n,t),n!==null){n.flags&=32767,Or=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Or=null;return}}else if(n=tP(n,t,Ms),n!==null){Or=n;return}if(t=t.sibling,t!==null){Or=t;return}Or=t=e}while(t!==null);qr===0&&(qr=5)}function wu(e,t,n){var r=Ln,i=ia.transition;try{ia.transition=null,Ln=1,uP(e,t,n,r)}finally{ia.transition=i,Ln=r}return null}function uP(e,t,n,r){do cf();while(mc!==null);if(pn&6)throw Error(lt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(WA(e,s),e===ti&&(Or=ti=null,ui=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rm||(Rm=!0,kS(j0,function(){return cf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ia.transition,ia.transition=null;var a=Ln;Ln=1;var l=pn;pn|=4,h5.current=null,iP(e,n),vS(n,e),LL(y2),E0=!!v2,y2=v2=null,e.current=n,sP(n),IA(),pn=l,Ln=a,ia.transition=s}else e.current=n;if(Rm&&(Rm=!1,mc=e,q0=i),s=e.pendingLanes,s===0&&(jc=null),FA(n.stateNode),fs(e,Er()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(z0)throw z0=!1,e=F2,F2=null,e;return q0&1&&e.tag!==0&&cf(),s=e.pendingLanes,s&1?e===$2?Uh++:(Uh=0,$2=e):Uh=0,Fc(),null}function cf(){if(mc!==null){var e=r4(q0),t=ia.transition,n=Ln;try{if(ia.transition=null,Ln=16>e?16:e,mc===null)var r=!1;else{if(e=mc,mc=null,q0=0,pn&6)throw Error(lt(331));var i=pn;for(pn|=4,yt=e.current;yt!==null;){var s=yt,a=s.child;if(yt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(yt=f;yt!==null;){var p=yt;switch(p.tag){case 0:case 11:case 15:$h(8,p,s)}var m=p.child;if(m!==null)m.return=p,yt=m;else for(;yt!==null;){p=yt;var x=p.sibling,g=p.return;if(pS(p),p===f){yt=null;break}if(x!==null){x.return=g,yt=x;break}yt=g}}}var N=s.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var E=j.sibling;j.sibling=null,j=E}while(j!==null)}}yt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,yt=a;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$h(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,yt=b;break e}yt=s.return}}var S=e.current;for(yt=S;yt!==null;){a=yt;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,yt=A;else e:for(a=S;yt!==null;){if(l=yt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_g(9,l)}}catch(G){br(l,l.return,G)}if(l===a){yt=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,yt=O;break e}yt=l.return}}if(pn=i,Fc(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(pg,e)}catch{}r=!0}return r}finally{Ln=n,ia.transition=t}}return!1}function Nb(e,t,n){t=Sf(n,t),t=rS(e,t,1),e=Nc(e,t,1),t=Bi(),e!==null&&(jp(e,1,t),fs(e,t))}function br(e,t,n){if(e.tag===3)Nb(e,e,n);else for(;t!==null;){if(t.tag===3){Nb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jc===null||!jc.has(r))){e=Sf(n,e),e=iS(t,e,1),t=Nc(t,e,1),e=Bi(),t!==null&&(jp(t,1,e),fs(t,e));break}}t=t.return}}function dP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Bi(),e.pingedLanes|=e.suspendedLanes&n,ti===e&&(ui&n)===n&&(qr===4||qr===3&&(ui&130023424)===ui&&500>Er()-m5?Mu(e,0):p5|=n),fs(e,t)}function NS(e,t){t===0&&(e.mode&1?(t=Em,Em<<=1,!(Em&130023424)&&(Em=4194304)):t=1);var n=Bi();e=rl(e,t),e!==null&&(jp(e,t,n),fs(e,n))}function fP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),NS(e,n)}function hP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(lt(314))}r!==null&&r.delete(t),NS(e,n)}var jS;jS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||us.current)cs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return cs=!1,eP(e,t,n);cs=!!(e.flags&131072)}else cs=!1,ar&&t.flags&1048576&&A4(t,D0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;l0(e,t),e=t.pendingProps;var i=xf(t,Ci.current);lf(t,n),i=l5(null,t,r,e,i,n);var s=c5();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ds(r)?(s=!0,T0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,r5(t),i.updater=bg,t.stateNode=i,i._reactInternals=t,E2(t,r,e,n),t=L2(null,t,r,!0,s,n)):(t.tag=0,ar&&s&&Jy(t),Fi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(l0(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=mP(r),e=Ca(r,e),i){case 0:t=A2(null,t,r,e,n);break e;case 1:t=pb(null,t,r,e,n);break e;case 11:t=fb(null,t,r,e,n);break e;case 14:t=hb(null,t,r,Ca(r.type,e),n);break e}throw Error(lt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ca(r,i),A2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ca(r,i),pb(e,t,r,i,n);case 3:e:{if(lS(t),e===null)throw Error(lt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,I4(e,t),R0(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Sf(Error(lt(423)),t),t=mb(e,t,r,n,i);break e}else if(r!==i){i=Sf(Error(lt(424)),t),t=mb(e,t,r,n,i);break e}else for(Ds=Sc(t.stateNode.containerInfo.firstChild),Os=t,ar=!0,Ta=null,n=M4(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wf(),r===i){t=il(e,t,n);break e}Fi(e,t,r,n)}t=t.child}return t;case 5:return O4(t),e===null&&N2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,x2(r,i)?a=null:s!==null&&x2(r,s)&&(t.flags|=32),oS(e,t),Fi(e,t,a,n),t.child;case 6:return e===null&&N2(t),null;case 13:return cS(e,t,n);case 4:return i5(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bf(t,null,r,n):Fi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ca(r,i),fb(e,t,r,i,n);case 7:return Fi(e,t,t.pendingProps,n),t.child;case 8:return Fi(e,t,t.pendingProps.children,n),t.child;case 12:return Fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Hn(I0,r._currentValue),r._currentValue=a,s!==null)if(Ra(s.value,a)){if(s.children===i.children&&!us.current){t=il(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Zo(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),j2(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(lt(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),j2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Fi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,lf(t,n),i=sa(i),r=r(i),t.flags|=1,Fi(e,t,r,n),t.child;case 14:return r=t.type,i=Ca(r,t.pendingProps),i=Ca(r.type,i),hb(e,t,r,i,n);case 15:return sS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ca(r,i),l0(e,t),t.tag=1,ds(r)?(e=!0,T0(t)):e=!1,lf(t,n),nS(t,r,i),E2(t,r,i,n),L2(null,t,r,!0,e,n);case 19:return uS(e,t,n);case 22:return aS(e,t,n)}throw Error(lt(156,t.tag))};function kS(e,t){return Z3(e,t)}function pP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,t,n,r){return new pP(e,t,n,r)}function x5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mP(e){if(typeof e=="function")return x5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fy)return 11;if(e===$y)return 14}return 2}function Ec(e,t){var n=e.alternate;return n===null?(n=ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function d0(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")x5(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Hd:return Du(n.children,i,s,t);case Ry:a=8,i|=8;break;case Xv:return e=ra(12,n,t,i|2),e.elementType=Xv,e.lanes=s,e;case Qv:return e=ra(13,n,t,i),e.elementType=Qv,e.lanes=s,e;case Zv:return e=ra(19,n,t,i),e.elementType=Zv,e.lanes=s,e;case O3:return Ng(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D3:a=10;break e;case I3:a=9;break e;case Fy:a=11;break e;case $y:a=14;break e;case sc:a=16,r=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=ra(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Du(e,t,n,r){return e=ra(7,e,r,t),e.lanes=n,e}function Ng(e,t,n,r){return e=ra(22,e,r,t),e.elementType=O3,e.lanes=n,e.stateNode={isHidden:!1},e}function mv(e,t,n){return e=ra(6,e,null,t),e.lanes=n,e}function gv(e,t,n){return t=ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J1(0),this.expirationTimes=J1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function w5(e,t,n,r,i,s,a,l,c){return e=new gP(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ra(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},r5(s),e}function vP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ES(e){if(!e)return Pc;e=e._reactInternals;e:{if(Vu(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var n=e.type;if(ds(n))return E4(e,n,t)}return t}function CS(e,t,n,r,i,s,a,l,c){return e=w5(n,r,!0,e,i,s,a,l,c),e.context=ES(null),n=e.current,r=Bi(),i=kc(n),s=Zo(r,i),s.callback=t??null,Nc(n,s,i),e.current.lanes=i,jp(e,i,r),fs(e,r),e}function jg(e,t,n,r){var i=t.current,s=Bi(),a=kc(i);return n=ES(n),t.context===null?t.context=n:t.pendingContext=n,t=Zo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Nc(i,t,a),e!==null&&(Ia(e,i,a,s),s0(e,i,a)),a}function H0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function b5(e,t){jb(e,t),(e=e.alternate)&&jb(e,t)}function yP(){return null}var AS=typeof reportError=="function"?reportError:function(e){console.error(e)};function _5(e){this._internalRoot=e}kg.prototype.render=_5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));jg(e,t,null,null)};kg.prototype.unmount=_5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qu(function(){jg(null,e,null,null)}),t[nl]=null}};function kg(e){this._internalRoot=e}kg.prototype.unstable_scheduleHydration=function(e){if(e){var t=a4();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cc.length&&t!==0&&t<cc[n].priority;n++);cc.splice(n,0,e),n===0&&l4(e)}};function S5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Eg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kb(){}function xP(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=H0(a);s.call(f)}}var a=CS(t,r,e,0,null,!1,!1,"",kb);return e._reactRootContainer=a,e[nl]=a.current,sp(e.nodeType===8?e.parentNode:e),qu(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=H0(c);l.call(f)}}var c=w5(e,0,!1,null,null,!1,!1,"",kb);return e._reactRootContainer=c,e[nl]=c.current,sp(e.nodeType===8?e.parentNode:e),qu(function(){jg(t,c,n,r)}),c}function Cg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=H0(a);l.call(c)}}jg(t,a,e,i)}else a=xP(n,t,e,i,r);return H0(a)}i4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ah(t.pendingLanes);n!==0&&(zy(t,n|1),fs(t,Er()),!(pn&6)&&(Nf=Er()+500,Fc()))}break;case 13:qu(function(){var r=rl(e,1);if(r!==null){var i=Bi();Ia(r,e,1,i)}}),b5(e,1)}};qy=function(e){if(e.tag===13){var t=rl(e,134217728);if(t!==null){var n=Bi();Ia(t,e,134217728,n)}b5(e,134217728)}};s4=function(e){if(e.tag===13){var t=kc(e),n=rl(e,t);if(n!==null){var r=Bi();Ia(n,e,t,r)}b5(e,t)}};a4=function(){return Ln};o4=function(e,t){var n=Ln;try{return Ln=e,t()}finally{Ln=n}};c2=function(e,t,n){switch(t){case"input":if(n2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=yg(r);if(!i)throw Error(lt(90));F3(r),n2(r,i)}}}break;case"textarea":B3(e,n);break;case"select":t=n.value,t!=null&&rf(e,!!n.multiple,t,!1)}};G3=g5;Y3=qu;var wP={usingClientEntryPoint:!1,Events:[Ep,Kd,yg,H3,V3,g5]},xh={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bP={bundleType:xh.bundleType,version:xh.version,rendererPackageName:xh.rendererPackageName,rendererConfig:xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=X3(e),e===null?null:e.stateNode},findFiberByHostInstance:xh.findFiberByHostInstance||yP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fm.isDisabled&&Fm.supportsFiber)try{pg=Fm.inject(bP),go=Fm}catch{}}Fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wP;Fs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S5(t))throw Error(lt(200));return vP(e,t,null,n)};Fs.createRoot=function(e,t){if(!S5(e))throw Error(lt(299));var n=!1,r="",i=AS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=w5(e,1,!1,null,null,n,!1,r,i),e[nl]=t.current,sp(e.nodeType===8?e.parentNode:e),new _5(t)};Fs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=X3(t),e=e===null?null:e.stateNode,e};Fs.flushSync=function(e){return qu(e)};Fs.hydrate=function(e,t,n){if(!Eg(t))throw Error(lt(200));return Cg(null,e,t,!0,n)};Fs.hydrateRoot=function(e,t,n){if(!S5(e))throw Error(lt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=AS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=CS(t,null,e,1,n??null,i,!1,s,a),e[nl]=t.current,sp(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new kg(t)};Fs.render=function(e,t,n){if(!Eg(t))throw Error(lt(200));return Cg(null,e,t,!1,n)};Fs.unmountComponentAtNode=function(e){if(!Eg(e))throw Error(lt(40));return e._reactRootContainer?(qu(function(){Cg(null,null,e,!1,function(){e._reactRootContainer=null,e[nl]=null})}),!0):!1};Fs.unstable_batchedUpdates=g5;Fs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Eg(n))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return Cg(e,t,n,!1,r)};Fs.version="18.3.1-next-f1338f8080-20240426";function LS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LS)}catch(e){console.error(e)}}LS(),L3.exports=Fs;var Pu=L3.exports,PS,Eb=Pu;PS=Eb.createRoot,Eb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pp.apply(this,arguments)}var gc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gc||(gc={}));const Cb="popstate";function _P(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return z2("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:V0(i)}return NP(t,n,null,e)}function Pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function TS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SP(){return Math.random().toString(36).substr(2,8)}function Ab(e,t){return{usr:e.state,key:e.key,idx:t}}function z2(e,t,n,r){return n===void 0&&(n=null),pp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pf(t):t,{state:n,key:t&&t.key||r||SP()})}function V0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Pf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function NP(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=gc.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(pp({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){l=gc.Pop;let E=p(),b=E==null?null:E-f;f=E,c&&c({action:l,location:j.location,delta:b})}function x(E,b){l=gc.Push;let S=z2(j.location,E,b);f=p()+1;let A=Ab(S,f),O=j.createHref(S);try{a.pushState(A,"",O)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(O)}s&&c&&c({action:l,location:j.location,delta:1})}function g(E,b){l=gc.Replace;let S=z2(j.location,E,b);f=p();let A=Ab(S,f),O=j.createHref(S);a.replaceState(A,"",O),s&&c&&c({action:l,location:j.location,delta:0})}function N(E){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof E=="string"?E:V0(E);return S=S.replace(/ $/,"%20"),Pr(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let j={get action(){return l},get location(){return e(i,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Cb,m),c=E,()=>{i.removeEventListener(Cb,m),c=null}},createHref(E){return t(i,E)},createURL:N,encodeLocation(E){let b=N(E);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:x,replace:g,go(E){return a.go(E)}};return j}var Lb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lb||(Lb={}));function jP(e,t,n){return n===void 0&&(n="/"),kP(e,t,n,!1)}function kP(e,t,n,r){let i=typeof t=="string"?Pf(t):t,s=N5(i.pathname||"/",n);if(s==null)return null;let a=MS(e);EP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=FP(s);l=OP(a[c],f,r)}return l}function MS(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Pr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Cc([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(Pr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),MS(s.children,t,p,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:DP(f,s.index),routesMeta:p})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of DS(s.path))i(s,a,c)}),t}function DS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=DS(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function EP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CP=/^:[\w-]+$/,AP=3,LP=2,PP=1,TP=10,MP=-2,Pb=e=>e==="*";function DP(e,t){let n=e.split("/"),r=n.length;return n.some(Pb)&&(r+=MP),t&&(r+=LP),n.filter(i=>!Pb(i)).reduce((i,s)=>i+(CP.test(s)?AP:s===""?PP:TP),r)}function IP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function OP(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=Tb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),x=c.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=Tb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Cc([s,m.pathname]),pathnameBase:zP(Cc([s,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(s=Cc([s,m.pathnameBase]))}return a}function Tb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=RP(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:x,isOptional:g}=p;if(x==="*"){let j=l[m]||"";a=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const N=l[m];return g&&!N?f[x]=void 0:f[x]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:e}}function RP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),TS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function FP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return TS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function N5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function $P(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Pf(e):e;return{pathname:n?n.startsWith("/")?n:BP(n,t):t,search:qP(r),hash:WP(i)}}function BP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function j5(e,t){let n=UP(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k5(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Pf(e):(i=pp({},e),Pr(!i.pathname||!i.pathname.includes("?"),vv("?","pathname","search",i)),Pr(!i.pathname||!i.pathname.includes("#"),vv("#","pathname","hash",i)),Pr(!i.search||!i.search.includes("#"),vv("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}l=m>=0?t[m]:"/"}let c=$P(i,l),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const Cc=e=>e.join("/").replace(/\/\/+/g,"/"),zP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function HP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IS=["post","put","patch","delete"];new Set(IS);const VP=["get",...IS];new Set(VP);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mp.apply(this,arguments)}const E5=k.createContext(null),GP=k.createContext(null),$c=k.createContext(null),Ag=k.createContext(null),cl=k.createContext({outlet:null,matches:[],isDataRoute:!1}),OS=k.createContext(null);function YP(e,t){let{relative:n}=t===void 0?{}:t;Tf()||Pr(!1);let{basename:r,navigator:i}=k.useContext($c),{hash:s,pathname:a,search:l}=$S(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Cc([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Tf(){return k.useContext(Ag)!=null}function la(){return Tf()||Pr(!1),k.useContext(Ag).location}function RS(e){k.useContext($c).static||k.useLayoutEffect(e)}function ca(){let{isDataRoute:e}=k.useContext(cl);return e?o7():KP()}function KP(){Tf()||Pr(!1);let e=k.useContext(E5),{basename:t,future:n,navigator:r}=k.useContext($c),{matches:i}=k.useContext(cl),{pathname:s}=la(),a=JSON.stringify(j5(i,n.v7_relativeSplatPath)),l=k.useRef(!1);return RS(()=>{l.current=!0}),k.useCallback(function(f,p){if(p===void 0&&(p={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let m=k5(f,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Cc([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,a,s,e])}function FS(){let{matches:e}=k.useContext(cl),t=e[e.length-1];return t?t.params:{}}function $S(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext($c),{matches:i}=k.useContext(cl),{pathname:s}=la(),a=JSON.stringify(j5(i,r.v7_relativeSplatPath));return k.useMemo(()=>k5(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function JP(e,t){return XP(e,t)}function XP(e,t,n,r){Tf()||Pr(!1);let{navigator:i}=k.useContext($c),{matches:s}=k.useContext(cl),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=la(),p;if(t){var m;let E=typeof t=="string"?Pf(t):t;c==="/"||(m=E.pathname)!=null&&m.startsWith(c)||Pr(!1),p=E}else p=f;let x=p.pathname||"/",g=x;if(c!=="/"){let E=c.replace(/^\//,"").split("/");g="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=jP(e,{pathname:g}),j=n7(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Cc([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Cc([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return t&&j?k.createElement(Ag.Provider,{value:{location:mp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:gc.Pop}},j):j}function QP(){let e=a7(),t=HP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const ZP=k.createElement(QP,null);class e7 extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(cl.Provider,{value:this.props.routeContext},k.createElement(OS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function t7(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(E5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(cl.Provider,{value:t},r)}function n7(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Pr(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:x,errors:g}=n,N=m.route.loader&&x[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||N){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,x)=>{let g,N=!1,j=null,E=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||ZP,c&&(f<0&&x===0?(N=!0,E=null):f===x&&(N=!0,E=m.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,x+1)),S=()=>{let A;return g?A=j:N?A=E:m.route.Component?A=k.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=p,k.createElement(t7,{match:m,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?k.createElement(e7,{location:n.location,revalidation:n.revalidation,component:j,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var BS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BS||{}),G0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(G0||{});function r7(e){let t=k.useContext(E5);return t||Pr(!1),t}function i7(e){let t=k.useContext(GP);return t||Pr(!1),t}function s7(e){let t=k.useContext(cl);return t||Pr(!1),t}function US(e){let t=s7(),n=t.matches[t.matches.length-1];return n.route.id||Pr(!1),n.route.id}function a7(){var e;let t=k.useContext(OS),n=i7(G0.UseRouteError),r=US(G0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function o7(){let{router:e}=r7(BS.UseNavigateStable),t=US(G0.UseNavigateStable),n=k.useRef(!1);return RS(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,mp({fromRouteId:t},s)))},[e,t])}const Mb={};function l7(e,t){Mb[t]||(Mb[t]=!0,console.warn(t))}const Db=(e,t,n)=>l7(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function c7(e,t){e!=null&&e.v7_startTransition||Db("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&Db("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function u7(e){let{to:t,replace:n,state:r,relative:i}=e;Tf()||Pr(!1);let{future:s,static:a}=k.useContext($c),{matches:l}=k.useContext(cl),{pathname:c}=la(),f=ca(),p=k5(t,j5(l,s.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(p);return k.useEffect(()=>f(JSON.parse(m),{replace:n,state:r,relative:i}),[f,m,i,n,r]),null}function Ps(e){Pr(!1)}function d7(e){let{basename:t="/",children:n=null,location:r,navigationType:i=gc.Pop,navigator:s,static:a=!1,future:l}=e;Tf()&&Pr(!1);let c=t.replace(/^\/*/,"/"),f=k.useMemo(()=>({basename:c,navigator:s,static:a,future:mp({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=Pf(r));let{pathname:p="/",search:m="",hash:x="",state:g=null,key:N="default"}=r,j=k.useMemo(()=>{let E=N5(p,c);return E==null?null:{location:{pathname:E,search:m,hash:x,state:g,key:N},navigationType:i}},[c,p,m,x,g,N,i]);return j==null?null:k.createElement($c.Provider,{value:f},k.createElement(Ag.Provider,{children:n,value:j}))}function f7(e){let{children:t,location:n}=e;return JP(q2(t),n)}new Promise(()=>{});function q2(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let s=[...t,i];if(r.type===k.Fragment){n.push.apply(n,q2(r.props.children,s));return}r.type!==Ps&&Pr(!1),!r.props.index||!r.props.children||Pr(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=q2(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W2.apply(this,arguments)}function h7(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function p7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m7(e,t){return e.button===0&&(!t||t==="_self")&&!p7(e)}function H2(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function g7(e,t){let n=H2(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const v7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],y7="6";try{window.__reactRouterVersion=y7}catch{}const x7="startTransition",Ib=Kv[x7];function w7(e){let{basename:t,children:n,future:r,window:i}=e,s=k.useRef();s.current==null&&(s.current=_P({window:i,v5Compat:!0}));let a=s.current,[l,c]=k.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=k.useCallback(m=>{f&&Ib?Ib(()=>c(m)):c(m)},[c,f]);return k.useLayoutEffect(()=>a.listen(p),[a,p]),k.useEffect(()=>c7(r),[r]),k.createElement(d7,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const b7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ac=k.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:m}=t,x=h7(t,v7),{basename:g}=k.useContext($c),N,j=!1;if(typeof f=="string"&&_7.test(f)&&(N=f,b7))try{let A=new URL(window.location.href),O=f.startsWith("//")?new URL(A.protocol+f):new URL(f),G=N5(O.pathname,g);O.origin===A.origin&&G!=null?f=G+O.search+O.hash:j=!0}catch{}let E=YP(f,{relative:i}),b=S7(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:i,viewTransition:m});function S(A){r&&r(A),A.defaultPrevented||b(A)}return k.createElement("a",W2({},x,{href:N||E,onClick:j||s?r:S,ref:n,target:c}))});var Ob;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ob||(Ob={}));var Rb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rb||(Rb={}));function S7(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=ca(),f=la(),p=$S(e,{relative:a});return k.useCallback(m=>{if(m7(m,n)){m.preventDefault();let x=r!==void 0?r:V0(f)===V0(p);c(e,{replace:x,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[f,c,p,r,i,n,e,s,a,l])}function zS(e){let t=k.useRef(H2(e)),n=k.useRef(!1),r=la(),i=k.useMemo(()=>g7(r.search,n.current?null:t.current),[r.search]),s=ca(),a=k.useCallback((l,c)=>{const f=H2(typeof l=="function"?l(i):l);n.current=!0,s("?"+f,c)},[s,i]);return[i,a]}let N7={data:""},j7=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||N7,k7=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,E7=/\/\*[^]*?\*\/|  +/g,Fb=/\n+/g,dc=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+a+";":r+=s[1]=="f"?dc(a,s):s+"{"+dc(a,s[1]=="k"?"":t)+"}":typeof a=="object"?r+=dc(a,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=dc.p?dc.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Ho={},qS=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+qS(e[n]);return t}return e},C7=(e,t,n,r,i)=>{let s=qS(e),a=Ho[s]||(Ho[s]=(c=>{let f=0,p=11;for(;f<c.length;)p=101*p+c.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Ho[a]){let c=s!==e?e:(f=>{let p,m,x=[{}];for(;p=k7.exec(f.replace(E7,""));)p[4]?x.shift():p[3]?(m=p[3].replace(Fb," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][p[1]]=p[2].replace(Fb," ").trim();return x[0]})(e);Ho[a]=dc(i?{["@keyframes "+a]:c}:c,n?"":"."+a)}let l=n&&Ho.g?Ho.g:null;return n&&(Ho.g=Ho[a]),((c,f,p,m)=>{m?f.data=f.data.replace(m,c):f.data.indexOf(c)===-1&&(f.data=p?c+f.data:f.data+c)})(Ho[a],t,r,l),a},A7=(e,t,n)=>e.reduce((r,i,s)=>{let a=t[s];if(a&&a.call){let l=a(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":dc(l,""):l===!1?"":l}return r+i+(a??"")},"");function Lg(e){let t=this||{},n=e.call?e(t.p):e;return C7(n.unshift?n.raw?A7(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,j7(t.target),t.g,t.o,t.k)}let WS,V2,G2;Lg.bind({g:1});let sl=Lg.bind({k:1});function L7(e,t,n,r){dc.p=t,WS=e,V2=n,G2=r}function Bc(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let l=Object.assign({},s),c=l.className||i.className;n.p=Object.assign({theme:V2&&V2()},l),n.o=/ *go\d+/.test(c),l.className=Lg.apply(n,r)+(c?" "+c:"");let f=e;return e[0]&&(f=l.as||e,delete l.as),G2&&f[0]&&G2(l),WS(f,l)}return i}}var P7=e=>typeof e=="function",Y0=(e,t)=>P7(e)?e(t):e,T7=(()=>{let e=0;return()=>(++e).toString()})(),HS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),M7=20,f0=new Map,D7=1e3,$b=e=>{if(f0.has(e))return;let t=setTimeout(()=>{f0.delete(e),Gu({type:4,toastId:e})},D7);f0.set(e,t)},I7=e=>{let t=f0.get(e);t&&clearTimeout(t)},Y2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,M7)};case 1:return t.toast.id&&I7(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?Y2(e,{type:1,toast:n}):Y2(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?$b(r):e.toasts.forEach(s=>{$b(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},h0=[],p0={toasts:[],pausedAt:void 0},Gu=e=>{p0=Y2(p0,e),h0.forEach(t=>{t(p0)})},O7={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R7=(e={})=>{let[t,n]=k.useState(p0);k.useEffect(()=>(h0.push(n),()=>{let i=h0.indexOf(n);i>-1&&h0.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var s,a;return{...e,...e[i.type],...i,duration:i.duration||((s=e[i.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||O7[i.type],style:{...e.style,...(a=e[i.type])==null?void 0:a.style,...i.style}}});return{...t,toasts:r}},F7=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||T7()}),Ap=e=>(t,n)=>{let r=F7(t,e,n);return Gu({type:2,toast:r}),r.id},Te=(e,t)=>Ap("blank")(e,t);Te.error=Ap("error");Te.success=Ap("success");Te.loading=Ap("loading");Te.custom=Ap("custom");Te.dismiss=e=>{Gu({type:3,toastId:e})};Te.remove=e=>Gu({type:4,toastId:e});Te.promise=(e,t,n)=>{let r=Te.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(Te.success(Y0(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Te.error(Y0(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var $7=(e,t)=>{Gu({type:1,toast:{id:e,height:t}})},B7=()=>{Gu({type:5,time:Date.now()})},U7=e=>{let{toasts:t,pausedAt:n}=R7(e);k.useEffect(()=>{if(n)return;let s=Date.now(),a=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(c<0){l.visible&&Te.dismiss(l.id);return}return setTimeout(()=>Te.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=k.useCallback(()=>{n&&Gu({type:6,time:Date.now()})},[n]),i=k.useCallback((s,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:f}=a||{},p=t.filter(g=>(g.position||f)===(s.position||f)&&g.height),m=p.findIndex(g=>g.id===s.id),x=p.filter((g,N)=>N<m&&g.visible).length;return p.filter(g=>g.visible).slice(...l?[x+1]:[0,x]).reduce((g,N)=>g+(N.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:$7,startPause:B7,endPause:r,calculateOffset:i}}},z7=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,q7=sl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W7=sl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,H7=Bc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${z7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${q7} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${W7} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,V7=sl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,G7=Bc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${V7} 1s linear infinite;
`,Y7=sl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,K7=sl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,J7=Bc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Y7} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${K7} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,X7=Bc("div")`
  position: absolute;
`,Q7=Bc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Z7=sl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,eT=Bc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Z7} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tT=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?k.createElement(eT,null,t):t:n==="blank"?null:k.createElement(Q7,null,k.createElement(G7,{...r}),n!=="loading"&&k.createElement(X7,null,n==="error"?k.createElement(H7,{...r}):k.createElement(J7,{...r})))},nT=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,iT="0%{opacity:0;} 100%{opacity:1;}",sT="0%{opacity:1;} 100%{opacity:0;}",aT=Bc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,oT=Bc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,lT=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=HS()?[iT,sT]:[nT(n),rT(n)];return{animation:t?`${sl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sl(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},cT=k.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?lT(e.position||t||"top-center",e.visible):{opacity:0},s=k.createElement(tT,{toast:e}),a=k.createElement(oT,{...e.ariaProps},Y0(e.message,e));return k.createElement(aT,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:s,message:a}):k.createElement(k.Fragment,null,s,a))});L7(k.createElement);var uT=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let s=k.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return k.createElement("div",{ref:s,className:t,style:n},i)},dT=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:HS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},fT=Lg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$m=16,hT=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:a})=>{let{toasts:l,handlers:c}=U7(n);return k.createElement("div",{style:{position:"fixed",zIndex:9999,top:$m,left:$m,right:$m,bottom:$m,pointerEvents:"none",...s},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(f=>{let p=f.position||t,m=c.calculateOffset(f,{reverseOrder:e,gutter:r,defaultPosition:t}),x=dT(p,m);return k.createElement(uT,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?fT:"",style:x},f.type==="custom"?Y0(f.message,f):i?i(f):k.createElement(cT,{toast:f,position:p}))}))};const pT="modulepreload",mT=function(e){return"/"+e},Bb={},al=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=mT(c),c in Bb)return;Bb[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":pT,f||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((x,g)=>{m.addEventListener("load",x),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},gT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Mf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class C5 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class vT extends C5{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class yT extends C5{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class xT extends C5{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var K2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(K2||(K2={}));var wT=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class bT{constructor(t,{headers:n={},customFetch:r,region:i=K2.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=gT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return wT(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f}).catch(N=>{throw new vT(N)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new yT(p);if(!p.ok)throw new xT(p);let x=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield p.json():x==="application/octet-stream"?g=yield p.blob():x==="text/event-stream"?g=p:x==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var ls={},A5={},Pg={},Lp={},Tg={},Mg={},_T=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jf=_T();const ST=jf.fetch,VS=jf.fetch.bind(jf),GS=jf.Headers,NT=jf.Request,jT=jf.Response,Mf=Object.freeze(Object.defineProperty({__proto__:null,Headers:GS,Request:NT,Response:jT,default:VS,fetch:ST},Symbol.toStringTag,{value:"Module"})),kT=JC(Mf);var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});class ET extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Dg.default=ET;var YS=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mg,"__esModule",{value:!0});const CT=YS(kT),AT=YS(Dg);let LT=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=CT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,l,c;let f=null,p=null,m=null,x=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=b:p=JSON.parse(b))}const j=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),E=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");j&&E&&E.length>1&&(m=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,x=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const j=await s.text();try{f=JSON.parse(j),Array.isArray(f)&&s.status===404&&(p=[],f=null,x=200,g="OK")}catch{s.status===404&&j===""?(x=204,g="No Content"):f={message:j}}if(f&&this.isMaybeSingle&&(!((c=f==null?void 0:f.details)===null||c===void 0)&&c.includes("0 rows"))&&(f=null,x=200,g="OK"),f&&this.shouldThrowOnError)throw new AT.default(f)}return{error:f,data:p,count:m,status:x,statusText:g}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,l,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};Mg.default=LT;var PT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tg,"__esModule",{value:!0});const TT=PT(Mg);let MT=class extends TT.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${f}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Tg.default=MT;var DT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lp,"__esModule",{value:!0});const IT=DT(Tg);let OT=class extends IT.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Lp.default=OT;var RT=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pg,"__esModule",{value:!0});const wh=RT(Lp);let FT=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new wh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new wh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(c.length>0){const f=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new wh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new wh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new wh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Pg.default=FT;var Ig={},Og={};Object.defineProperty(Og,"__esModule",{value:!0});Og.version=void 0;Og.version="0.0.0-automated";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.DEFAULT_HEADERS=void 0;const $T=Og;Ig.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${$T.version}`};var KS=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(A5,"__esModule",{value:!0});const BT=KS(Pg),UT=KS(Lp),zT=Ig;let qT=class JS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},zT.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new BT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new JS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=Object.assign({},this.headers);return s&&(f.Prefer=`count=${s}`),new UT.default({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};A5.default=qT;var Df=ci&&ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});ls.PostgrestError=ls.PostgrestBuilder=ls.PostgrestTransformBuilder=ls.PostgrestFilterBuilder=ls.PostgrestQueryBuilder=ls.PostgrestClient=void 0;const XS=Df(A5);ls.PostgrestClient=XS.default;const QS=Df(Pg);ls.PostgrestQueryBuilder=QS.default;const ZS=Df(Lp);ls.PostgrestFilterBuilder=ZS.default;const eN=Df(Tg);ls.PostgrestTransformBuilder=eN.default;const tN=Df(Mg);ls.PostgrestBuilder=tN.default;const nN=Df(Dg);ls.PostgrestError=nN.default;var WT=ls.default={PostgrestClient:XS.default,PostgrestQueryBuilder:QS.default,PostgrestFilterBuilder:ZS.default,PostgrestTransformBuilder:eN.default,PostgrestBuilder:tN.default,PostgrestError:nN.default};const{PostgrestClient:HT,PostgrestQueryBuilder:yq,PostgrestFilterBuilder:xq,PostgrestTransformBuilder:wq,PostgrestBuilder:bq}=WT,VT="2.10.7",GT={"X-Client-Info":`realtime-js/${VT}`},YT="1.0.0",rN=1e4,KT=1e3;var uf;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(uf||(uf={}));var Ts;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ts||(Ts={}));var Pa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Pa||(Pa={}));var J2;(function(e){e.websocket="websocket"})(J2||(J2={}));var ju;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ju||(ju={}));class JT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:f}}}class iN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(zn||(zn={}));const Ub=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=XT(a,e,t,i),s),{})},XT=(e,t,n,r)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?sN(s,a):X2(a)},sN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return tM(t,n)}switch(e){case zn.bool:return QT(t);case zn.float4:case zn.float8:case zn.int2:case zn.int4:case zn.int8:case zn.numeric:case zn.oid:return ZT(t);case zn.json:case zn.jsonb:return eM(t);case zn.timestamp:return nM(t);case zn.abstime:case zn.date:case zn.daterange:case zn.int4range:case zn.int8range:case zn.money:case zn.reltime:case zn.text:case zn.time:case zn.timestamptz:case zn.timetz:case zn.tsrange:case zn.tstzrange:return X2(t);default:return X2(t)}},X2=e=>e,QT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ZT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tM=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>sN(t,l))}return e},nM=e=>typeof e=="string"?e.replace(" ","T"):e,aN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class yv{constructor(t,n,r={},i=rN){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zb||(zb={}));class zh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zh.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=zh.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zh.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(s,(f,p)=>{a[f]||(c[f]=p)}),this.map(a,(f,p)=>{const m=s[f];if(m){const x=p.map(E=>E.presence_ref),g=m.map(E=>E.presence_ref),N=p.filter(E=>g.indexOf(E.presence_ref)<0),j=m.filter(E=>x.indexOf(E.presence_ref)<0);N.length>0&&(l[f]=N),j.length>0&&(c[f]=j)}else l[f]=p}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var f;const p=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(c),p.length>0){const m=t[l].map(g=>g.presence_ref),x=p.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...x)}r(l,p,c)}),this.map(a,(l,c)=>{let f=t[l];if(!f)return;const p=c.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),t[l]=f,i(l,f,c),f.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qb||(qb={}));var Wb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wb||(Wb={}));var Hb;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Hb||(Hb={}));class L5{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yv(this,Pa.join,this.params,this.timeout),this.rejoinTimer=new iN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pa.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new zh(this),this.broadcastEndpointURL=aN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},f={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const x=this.bindings.postgres_changes,g=(m=x==null?void 0:x.length)!==null&&m!==void 0?m:0,N=[];for(let j=0;j<g;j++){const E=x[j],{filter:{event:b,schema:S,table:A,filter:O}}=E,G=p&&p[j];if(G&&G.event===b&&G.schema===S&&G.table===A&&G.filter===O)N.push(Object.assign(Object.assign({},E),{id:G.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ts.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pa.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new yv(this,Pa.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yv(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:f,join:p}=Pa;if(r&&[l,c,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let x=this._onMessage(a,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var N,j,E;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((E=(j=g.filter)===null||j===void 0?void 0:j.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(g=>g.callback(x,r)):(s=this.bindings[a])===null||s===void 0||s.filter(g=>{var N,j,E,b,S,A;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const O=g.id,G=(N=g.filter)===null||N===void 0?void 0:N.event;return O&&((j=n.ids)===null||j===void 0?void 0:j.includes(O))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const O=(S=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return O==="*"||O===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof x=="object"&&"ids"in x){const N=x.data,{schema:j,table:E,commit_timestamp:b,type:S,errors:A}=N;x=Object.assign(Object.assign({},{schema:j,table:E,commit_timestamp:b,eventType:S,new:{},old:{},errors:A}),this._getPayloadRecords(N))}g.callback(x,r)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&L5.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Pa.close,{},t)}_onError(t){this._on(Pa.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ub(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ub(t.columns,t.old_record)),n}}const rM=()=>{},iM=typeof WebSocket<"u",sM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aM{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=GT,this.params={},this.timeout=rN,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=rM,this.conn=null,this.sendBuffer=[],this.serializer=new JT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>al(async()=>{const{default:c}=await Promise.resolve().then(()=>Mf);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${J2.websocket}`,this.httpEndpoint=aN(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new iN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(iM){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new oM(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),al(async()=>{const{default:t}=await import("./browser-OuD9p3H8.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case uf.connecting:return ju.Connecting;case uf.open:return ju.Open;case uf.closing:return ju.Closing;default:return ju.Closed}}isConnected(){return this.connectionState()===ju.Open}channel(t,n={config:{}}){const r=new L5(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Pa.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YT}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Pa.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(KT,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([sM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class oM{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=uf.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class P5 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class lM extends P5{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Q2 extends P5{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var cM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const oN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Mf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},uM=()=>cM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield al(()=>Promise.resolve().then(()=>Mf),void 0)).Response:Response}),Z2=e=>{if(Array.isArray(e))return e.map(n=>Z2(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Z2(r)}),t};var Yu=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const xv=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dM=(e,t,n)=>Yu(void 0,void 0,void 0,function*(){const r=yield uM();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new lM(xv(i),e.status||500))}).catch(i=>{t(new Q2(xv(i),i))}):t(new Q2(xv(e),e))}),fM=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Pp(e,t,n,r,i,s){return Yu(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,fM(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>dM(c,l,r))})})}function K0(e,t,n,r){return Yu(this,void 0,void 0,function*(){return Pp(e,"GET",t,n,r)})}function oc(e,t,n,r,i){return Yu(this,void 0,void 0,function*(){return Pp(e,"POST",t,r,i,n)})}function hM(e,t,n,r,i){return Yu(this,void 0,void 0,function*(){return Pp(e,"PUT",t,r,i,n)})}function pM(e,t,n,r){return Yu(this,void 0,void 0,function*(){return Pp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lN(e,t,n,r,i){return Yu(this,void 0,void 0,function*(){return Pp(e,"DELETE",t,r,i,n)})}var as=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const mM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gM{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=oN(i)}uploadOrUpdate(t,n,r,i){return as(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Vb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:s,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),x=yield m.json();return m.ok?{data:{path:f,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(s){if(Kr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return as(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:Vb.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:p}),x=yield m.json();return m.ok?{data:{path:s,fullPath:x.Key},error:null}:{data:null,error:x}}catch(c){if(Kr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return as(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield oc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new P5("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}update(t,n,r){return as(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return as(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return as(this,void 0,void 0,function*(){try{return{data:{path:(yield oc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return as(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield oc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return as(this,void 0,void 0,function*(){try{const i=yield oc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}download(t,n){return as(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield K0(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Kr(l))return{data:null,error:l};throw l}})}info(t){return as(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield K0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Z2(r),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}exists(t){return as(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield pM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kr(r)&&r instanceof Q2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(t){return as(this,void 0,void 0,function*(){try{return{data:yield lN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}list(t,n,r){return as(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},mM),n),{prefix:t||""});return{data:yield oc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Kr(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const vM="2.7.1",yM={"X-Client-Info":`storage-js/${vM}`};var Od=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class xM{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},yM),n),this.fetch=oN(r)}listBuckets(){return Od(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Kr(t))return{data:null,error:t};throw t}})}getBucket(t){return Od(this,void 0,void 0,function*(){try{return{data:yield K0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Od(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Od(this,void 0,void 0,function*(){try{return{data:yield hM(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Od(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Od(this,void 0,void 0,function*(){try{return{data:yield lN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Kr(n))return{data:null,error:n};throw n}})}}class wM extends xM{constructor(t,n={},r){super(t,n,r)}from(t){return new gM(this.url,this.headers,t,this.fetch)}}const bM="2.46.1";let Ph="";typeof Deno<"u"?Ph="deno":typeof document<"u"?Ph="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ph="react-native":Ph="node";const _M={"X-Client-Info":`supabase-js-${Ph}/${bM}`},SM={headers:_M},NM={schema:"public"},jM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kM={};var EM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};const CM=e=>{let t;return e?t=e:typeof fetch>"u"?t=VS:t=fetch,(...n)=>t(...n)},AM=()=>typeof Headers>"u"?GS:Headers,LM=(e,t,n)=>{const r=CM(n),i=AM();return(s,a)=>EM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var PM=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};function TM(e){return e.replace(/\/$/,"")}function MM(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:l,realtime:c,global:f}=t,p={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},f),s),accessToken:()=>PM(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const cN="2.65.1",DM="http://localhost:9999",IM="supabase.auth.token",OM={"X-Client-Info":`gotrue-js/${cN}`},Gb=10,ey="X-Supabase-Api-Version",uN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function RM(e){return Math.round(Date.now()/1e3)+e}function FM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ea=()=>typeof document<"u",gu={tested:!1,writable:!1},qh=()=>{if(!Ea())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gu.tested)return gu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gu.tested=!0,gu.writable=!0}catch{gu.tested=!0,gu.writable=!1}return gu.writable};function wv(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const dN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>Mf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},$M=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fN=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Bm=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Um=async(e,t)=>{await e.removeItem(t)};function BM(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,l,c,f,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)a=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),f=t.indexOf(e.charAt(p++)),r=a<<2|l>>4,i=(l&15)<<4|c>>2,s=(c&3)<<6|f,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),f!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Rg{constructor(){this.promise=new Rg.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Rg.promiseConstructor=Promise;function Yb(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(BM(r))}async function UM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zM(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function qM(e){return("0"+e.toString(16)).substr(-2)}function WM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,qM).join("")}async function HM(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function VM(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function GM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await HM(e);return VM(n)}async function Rd(e,t,n=!1){const r=WM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await fN(e,`${t}-code-verifier`,i);const s=await GM(r);return[s,r===s?"plain":"s256"]}const YM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KM(e){const t=e.headers.get(ey);if(!t||!t.match(YM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class T5 extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function en(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class JM extends T5{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function XM(e){return en(e)&&e.name==="AuthApiError"}class hN extends T5{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ku extends T5{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class rc extends Ku{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function QM(e){return en(e)&&e.name==="AuthSessionMissingError"}class bv extends Ku{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zm extends Ku{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qm extends Ku{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kb extends Ku{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ty extends Ku{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function _v(e){return en(e)&&e.name==="AuthRetryableFetchError"}class Jb extends Ku{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var ZM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const bu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eD=[502,503,504];async function Xb(e){var t;if(!$M(e))throw new ty(bu(e),0);if(eD.includes(e.status))throw new ty(bu(e),e.status);let n;try{n=await e.json()}catch(s){throw new hN(bu(s),s)}let r;const i=KM(e);if(i&&i.getTime()>=uN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Jb(bu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new rc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Jb(bu(n),e.status,n.weak_password.reasons);throw new JM(bu(n),e.status||500,r)}const tD=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function cn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[ey]||(s[ey]=uN["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await nD(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function nD(e,t,n,r,i,s){const a=tD(t,r,i,s);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new ty(bu(c),0)}if(l.ok||await Xb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Xb(c)}}function ic(e){var t;let n=null;aD(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=RM(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Qb(e){const t=ic(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rD(e){return{data:e,error:null}}function iD(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=ZM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function sD(e){return e}function aD(e){return e.access_token&&e.refresh_token&&e.expires_in}var oD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class lD{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=dN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await cn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(en(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await cn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=oD(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await cn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:iD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(en(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await cn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fc})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,l,c;try{const f={nextPage:null,lastPage:0,total:0},p=await cn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:sD});if(p.error)throw p.error;const m=await p.json(),x=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const j=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);f[`${E}Page`]=j}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(en(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){try{return await cn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fc})}catch(n){if(en(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await cn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:fc})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await cn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(en(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await cn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}}}const cD={getItem:e=>qh()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{qh()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{qh()&&globalThis.localStorage.removeItem(e)}};function Zb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function uD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fd={debug:!!(globalThis&&qh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dD extends pN{}async function fD(e,t,n){Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Fd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}uD();const hD={url:DM,storageKey:IM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},bh=30*1e3,e_=3;async function t_(e,t,n){return await n()}class gp{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gp.nextInstanceID,gp.nextInstanceID+=1,this.instanceID>0&&Ea()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},hD),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new lD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=dN(i.fetch),this.lock=i.lock||t_,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ea()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=fD:this.lock=t_,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:qh()?this.storage=cD:(this.memoryStorage={},this.storage=Zb(this.memoryStorage)):(this.memoryStorage={},this.storage=Zb(this.memoryStorage)),Ea()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=Ea()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return en(t)?{error:t}:{error:new hN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:ic}),{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:p,password:m,options:x}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await Rd(this.storage,this.storageKey)),s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:m,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:g,code_challenge_method:N},xform:ic})}else if("phone"in t){const{phone:p,password:m,options:x}=t;s=await cn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(i=x==null?void 0:x.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ic})}else throw new zm("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(en(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:l}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qb})}else if("phone"in t){const{phone:s,password:a,options:l}=t;n=await cn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qb})}else throw new zm("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Bm(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await cn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ic});if(await Um(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new bv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(en(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,l=await cn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ic}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new bv}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:l,options:c}=t;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Rd(this.storage,this.storageKey));const{error:m}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:f,error:p}=await cn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new zm("You must provide either an email or phone number.")}catch(l){if(en(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await cn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ic});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(en(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Rd(this.storage,this.storageKey)),await cn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:rD})}catch(s){if(en(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new rc;const{error:i}=await cn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(en(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:l}=await cn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new zm("You must provide either an email or phone number and a type")}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Bm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,p))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fc}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rc}:await cn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:fc})})}catch(n){if(en(n))return QM(n)&&(await this._removeSession(),await Um(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new rc;const a=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Rd(this.storage,this.storageKey));const{data:f,error:p}=await cn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:fc});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(en(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return Yb(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Yb(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(en(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new rc;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(en(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!Ea())throw new qm("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new qm("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Kb("Not a valid PKCE flow url.");const n=wv(window.location.href);if(t){if(!n.code)throw new Kb("No code detected.");const{data:S,error:A}=await this._exchangeCodeForSession(n.code);if(A)throw A;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new qm(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:f}=n;if(!s||!l||!a||!f)throw new qm("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let x=p+m;c&&(x=parseInt(c));const g=x-p;g*1e3<=bh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const N=x-m;p-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,x,p):p-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,x,p);const{data:j,error:E}=await this._getUser(s);if(E)throw E;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:x,refresh_token:a,token_type:f,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(en(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=wv(window.location.href);return!!(Ea()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=wv(window.location.href),n=await Bm(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(XM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Um(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=FM(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Rd(this.storage,this.storageKey,!0));try{return await cn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(en(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(en(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,c,f,p;const{data:m,error:x}=s;if(x)throw x;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await cn(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Ea()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(en(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await cn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await zM(async i=>(i>0&&await UM(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await cn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ic})),(i,s)=>{const a=200*Math.pow(2,i);return s&&_v(s)&&Date.now()+a-r<bh})}catch(r){if(this._debug(n,"error",r),en(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ea()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Bm(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+Gb;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Gb}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),_v(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new rc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Rg;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new rc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),en(s)){const a={session:null,error:s};return _v(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fN(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Um(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ea()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/bh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${bh}ms, refresh threshold is ${e_} ticks`),i<=e_&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ea()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Rd(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await cn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:f}=await cn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(en(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:l}=await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(en(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await cn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(en(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}gp.nextInstanceID=0;const pD=gp;class mD extends pD{constructor(t){super(t)}}var gD=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(p){try{f(r.next(p))}catch(m){a(m)}}function c(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(l,c)}f((r=r.apply(e,t||[])).next())})};class vD{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=TM(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:NM,realtime:kM,auth:Object.assign(Object.assign({},jM),{storageKey:c}),global:SM},p=MM(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=LM(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new HT(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new bT(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new wM(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return gD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:l,debug:c},f,p){var m;const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mD({url:this.authUrl,headers:Object.assign(Object.assign({},x),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:l,debug:c,fetch:p,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(t){return new aM(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yD=(e,t,n)=>new vD(e,t,n),xD="https://vrzgwnchqdxwgennshmu.supabase.co",wD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",et=yD(xD,wD,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:window.location.origin}}),bD={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173/spotify/callback",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",VITE_SUPABASE_URL:"https://vrzgwnchqdxwgennshmu.supabase.co"},n_=e=>{let t;const n=new Set,r=(p,m)=>{const x=typeof p=="function"?p(t):p;if(!Object.is(x,t)){const g=t;t=m??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(N=>N(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(bD?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,c);return c},_D=e=>e?n_(e):n_;var mN={exports:{}},gN={},vN={exports:{}},yN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=k;function SD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ND=typeof Object.is=="function"?Object.is:SD,jD=kf.useState,kD=kf.useEffect,ED=kf.useLayoutEffect,CD=kf.useDebugValue;function AD(e,t){var n=t(),r=jD({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return ED(function(){i.value=n,i.getSnapshot=t,Sv(i)&&s({inst:i})},[e,n,t]),kD(function(){return Sv(i)&&s({inst:i}),e(function(){Sv(i)&&s({inst:i})})},[e]),CD(n),n}function Sv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ND(e,n)}catch{return!0}}function LD(e,t){return t()}var PD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?LD:AD;yN.useSyncExternalStore=kf.useSyncExternalStore!==void 0?kf.useSyncExternalStore:PD;vN.exports=yN;var TD=vN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=k,MD=TD;function DD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ID=typeof Object.is=="function"?Object.is:DD,OD=MD.useSyncExternalStore,RD=Fg.useRef,FD=Fg.useEffect,$D=Fg.useMemo,BD=Fg.useDebugValue;gN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=RD(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=$D(function(){function c(g){if(!f){if(f=!0,p=g,g=r(g),i!==void 0&&a.hasValue){var N=a.value;if(i(N,g))return m=N}return m=g}if(N=m,ID(p,g))return N;var j=r(g);return i!==void 0&&i(N,j)?N:(p=g,m=j)}var f=!1,p,m,x=n===void 0?null:n;return[function(){return c(t())},x===null?void 0:function(){return c(x())}]},[t,n,r,i]);var l=OD(e,s[0],s[1]);return FD(function(){a.hasValue=!0,a.value=l},[l]),BD(l),l};mN.exports=gN;var UD=mN.exports;const zD=y3(UD),xN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LASTFM_API_KEY:"d3640056096deab975e1baced497df72",VITE_SPOTIFY_CLIENT_ID:"2f84f95d5e0943afb6e72b6758adedd3",VITE_SPOTIFY_REDIRECT_URI:"http://127.0.0.1:5173/spotify/callback",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",VITE_SUPABASE_URL:"https://vrzgwnchqdxwgennshmu.supabase.co"},{useDebugValue:qD}=vt,{useSyncExternalStoreWithSelector:WD}=zD;let r_=!1;const HD=e=>e;function VD(e,t=HD,n){(xN?"production":void 0)!=="production"&&n&&!r_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),r_=!0);const r=WD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return qD(r),r}const i_=e=>{(xN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?_D(e):e,n=(r,i)=>VD(t,r,i);return Object.assign(n,t),n},GD=e=>e?i_(e):i_,Zr=GD(e=>({user:null,session:null,loading:!0,setUser:t=>{e({user:t})},setSession:t=>{e({session:t})},signOut:async()=>{try{await et.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$n=(e,t)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...f},p)=>k.createElement("svg",{ref:p,...YD,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${KD(e)}`,l].join(" "),...f},[...t.map(([m,x])=>k.createElement(m,x)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=$n("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=$n("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=$n("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=$n("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=$n("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=$n("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=$n("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=$n("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=$n("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=$n("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=$n("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=$n("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=$n("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=$n("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=$n("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=$n("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=$n("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=$n("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=$n("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=$n("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=$n("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=$n("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=$n("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=$n("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=$n("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=$n("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=$n("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function tI(){const[e,t]=k.useState([]),[n,r]=k.useState(!1),i=ca(),{user:s}=Zr(),[a,l]=k.useState(null);k.useEffect(()=>{if(s)return c(),f(),()=>{a&&a.unsubscribe()}},[s]);const c=async()=>{const{data:m,error:x}=await et.from("notifications").select("*").eq("user_id",s==null?void 0:s.id).eq("read",!1).order("created_at",{ascending:!1});if(x){console.error("Error fetching notifications:",x);return}t(m||[])},f=async()=>{try{a&&await a.unsubscribe();const m=et.channel(`notifications:${s==null?void 0:s.id}`,{config:{broadcast:{self:!0}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},x=>{const g=x.new;t(N=>[g,...N]),Te.custom(N=>d.jsxs("div",{className:`${N.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[d.jsx(s_,{className:"h-6 w-6 text-indigo-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:g.title}),d.jsx("p",{className:"text-sm text-gray-500",children:g.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},x=>{t(g=>g.map(N=>N.id===x.new.id?x.new:N))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${s==null?void 0:s.id}`},x=>{t(g=>g.filter(N=>N.id!==x.old.id))}),await m.subscribe(),l(m)}catch(m){console.error("Error al configurar suscripcin en tiempo real:",m)}},p=async(m,x)=>{try{const{error:g}=await et.rpc("handle_group_invitation",{p_group_member_id:m.data.group_member_id,p_accept:x});if(g)throw g;await et.from("notifications").update({read:!0}).eq("id",m.id),t(N=>N.filter(j=>j.id!==m.id)),Te.success(x?"Invitacin aceptada":"Invitacin rechazada"),x&&i(`/group/${m.data.group_id}`)}catch(g){Te.error(g.message)}};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[d.jsx(s_,{className:"w-6 h-6"}),e.length>0&&d.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:d.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?d.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(m=>d.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:m.title}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.message}),m.type==="group_invitation"&&d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>p(m,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),d.jsx("button",{onClick:()=>p(m,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},m.id))})})]})}function nI(){const{user:e,signOut:t}=Zr(),n=ca(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return d.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs(Ac,{to:"/",className:"flex items-center space-x-2 min-w-0",children:[d.jsx(eI,{className:"h-6 w-6 sm:h-8 sm:w-8 flex-shrink-0"}),d.jsx("span",{className:"font-bold text-lg sm:text-xl truncate",children:"Band Manager"})]}),d.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0",children:[e&&d.jsx(tI,{}),e?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-xs sm:text-sm hidden md:block truncate max-w-32 lg:max-w-none",children:e.email}),d.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[d.jsx(ry,{className:"h-4 w-4 sm:h-5 sm:w-5"}),d.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]}):d.jsxs("div",{className:"flex space-x-2 sm:space-x-4",children:[d.jsx(Ac,{to:"/login",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Login"}),d.jsx(Ac,{to:"/register",className:"hover:text-indigo-200 transition-colors text-sm sm:text-base",children:"Register"}),!1]})]})]})})})}function Xn({label:e,error:t,className:n="",...r}){return d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),d.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&d.jsx("p",{className:"text-sm text-red-600",children:t})]})}function _t({children:e,loading:t,variant:n="primary",fullWidth:r,size:i="md",className:s="",...a}){const l="flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={sm:"px-2 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},f={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return d.jsxs("button",{className:`${l} ${c[i]} ${f[n]} ${r?"w-full":""} ${s}`,disabled:t,...a,children:[t&&d.jsx(ol,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function rI(){var x;const[e,t]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(!1),a=ca(),c=(x=la().state)==null?void 0:x.returnTo,{user:f,setUser:p}=Zr();k.useEffect(()=>{if(f){let g=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){const N=new URL(c,window.location.origin),j=N.searchParams.get("code"),E=N.searchParams.get("state"),b=N.searchParams.get("error");j&&E?g=`/?code=${j}&state=${E}`:b?g=`/?error=${b}`:g=N.pathname}a(g,{replace:!0})}},[f,c,a]);const m=async g=>{g.preventDefault(),s(!0);try{const{data:N,error:j}=await et.auth.signInWithPassword({email:e,password:n});if(j)throw j;p(N.user),Te.success("Successfully logged in!");let E=c||"/";if(c&&(c.includes("code=")||c.includes("state="))){const b=new URL(c,window.location.origin),S=b.searchParams.get("code"),A=b.searchParams.get("state"),O=b.searchParams.get("error");S&&A?E=`/?code=${S}&state=${A}`:O?E=`/?error=${O}`:E=b.pathname}a(E,{replace:!0})}catch(N){Te.error(N.message||"Failed to login")}finally{s(!1)}};return f?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsx(Xn,{label:"Email",type:"email",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:"your@email.com"}),d.jsx(Xn,{label:"Password",type:"password",value:n,onChange:g=>r(g.target.value),required:!0,placeholder:""}),d.jsx(_t,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Ac,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"Olvidaste tu contrasea?"})}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",d.jsx(Ac,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function iI(){const[e]=zS(),t=e.get("email");e.get("token");const[n,r]=k.useState(t||""),[i,s]=k.useState(""),[a,l]=k.useState(""),[c,f]=k.useState(!1),p=ca(),{user:m}=Zr();k.useEffect(()=>{m&&p("/")},[m,p]);const x=async g=>{g.preventDefault(),f(!0);try{const{data:N,error:j}=await et.auth.signUp({email:n,password:i,options:{data:{name:a,role:"user"}}});if(j)throw j;if(N.user){const{data:E,error:b}=await et.rpc("create_new_user",{user_id:N.user.id,user_email:n,user_name:a,user_role:"user"});if(b)throw b;Te.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(N){console.error("Registration error:",N),N.message.includes("User already registered")?Te.error("This email is already registered. Please try logging in instead."):N.message.includes("rate limit")?Te.error("Too many registration attempts. Please try again in a few minutes."):Te.error("Registration failed. Please try again.")}finally{f(!1)}};return m?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),d.jsxs("form",{onSubmit:x,className:"space-y-6",children:[d.jsx(Xn,{label:"Name",type:"text",value:a,onChange:g=>l(g.target.value),required:!0,placeholder:"John Doe"}),d.jsx(Xn,{label:"Email",type:"email",value:n,onChange:g=>r(g.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),d.jsx(Xn,{label:"Password",type:"password",value:i,onChange:g=>s(g.target.value),required:!0,placeholder:"",minLength:6}),d.jsx(_t,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),d.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",d.jsx(Ac,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var sI=Object.defineProperty,aI=(e,t,n)=>t in e?sI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jv=(e,t,n)=>(aI(e,typeof t!="symbol"?t+"":t,n),n);let oI=class{constructor(){jv(this,"current",this.detect()),jv(this,"handoffState","pending"),jv(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ou=new oI;function Bg(e){return Ou.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Ug(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Uc(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ug(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Uc();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function D5(){let[e]=k.useState(Uc);return k.useEffect(()=>()=>e.dispose(),[e]),e}let Ui=(e,t)=>{Ou.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function Ju(e){let t=k.useRef(e);return Ui(()=>{t.current=e},[e]),t}let pr=function(e){let t=Ju(e);return vt.useCallback((...n)=>t.current(...n),[t])},lI=k.createContext(void 0);function cI(){return k.useContext(lI)}function sy(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Tc(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Tc),r}var X0=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(X0||{}),yc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(yc||{});function ua(){let e=dI();return k.useCallback(t=>uI({mergeRefs:e,...t}),[e])}function uI({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??fI;let c=SN(t,e);if(s)return Wm(c,n,r,a,l);let f=i??0;if(f&2){let{static:p=!1,...m}=c;if(p)return Wm(m,n,r,a,l)}if(f&1){let{unmount:p=!0,...m}=c;return Tc(p?0:1,{0(){return null},1(){return Wm({...m,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Wm(c,n,r,a,l)}function Wm(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=kv(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},p=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let x=!1,g=[];for(let[N,j]of Object.entries(t))typeof j=="boolean"&&(x=!0),j===!0&&g.push(N.replace(/([A-Z])/g,E=>`-${E.toLowerCase()}`));if(x){m["data-headlessui-state"]=g.join(" ");for(let N of g)m[`data-${N}`]=""}}if(s===k.Fragment&&(Object.keys(_u(c)).length>0||Object.keys(_u(m)).length>0))if(!k.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(_u(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(_u(c)).concat(Object.keys(_u(m))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=p.props,g=x==null?void 0:x.className,N=typeof g=="function"?(...b)=>sy(g(...b),c.className):sy(g,c.className),j=N?{className:N}:{},E=SN(p.props,_u(kv(c,["ref"])));for(let b in m)b in E&&delete m[b];return k.cloneElement(p,Object.assign({},E,m,f,{ref:i(hI(p),f.ref)},j))}return k.createElement(s,Object.assign({},kv(c,["ref"]),s!==k.Fragment&&f,s!==k.Fragment&&m),p)}function dI(){let e=k.useRef([]),t=k.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function fI(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function SN(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function ps(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function _u(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function kv(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function hI(e){return vt.version.split(".")[0]>="19"?e.props.ref:e.ref}let pI="span";var Q0=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Q0||{});function mI(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return ua()({ourProps:s,theirProps:i,slot:{},defaultTag:pI,name:"Hidden"})}let ay=ps(mI),NN=Symbol();function gI(e,t=!0){return Object.assign(e,{[NN]:t})}function bo(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=pr(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[NN]))?void 0:n}let I5=k.createContext(null);I5.displayName="DescriptionContext";function jN(){let e=k.useContext(I5);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,jN),t}return e}function vI(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let r=pr(s=>(t(a=>[...a,s]),()=>t(a=>{let l=a.slice(),c=l.indexOf(s);return c!==-1&&l.splice(c,1),l}))),i=k.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return vt.createElement(I5.Provider,{value:i},n.children)},[t])]}let yI="p";function xI(e,t){let n=k.useId(),r=cI(),{id:i=`headlessui-description-${n}`,...s}=e,a=jN(),l=bo(t);Ui(()=>a.register(i),[i,a.register]);let c=r||!1,f=k.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),p={ref:l,...a.props,id:i};return ua()({ourProps:p,theirProps:s,slot:f,defaultTag:yI,name:a.name||"Description"})}let wI=ps(xI),bI=Object.assign(wI,{});var kN=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(kN||{});let _I=k.createContext(()=>{});function SI({value:e,children:t}){return vt.createElement(_I.Provider,{value:e},t)}let NI=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function EN(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=t[i].call(n,...s);a&&(n=a,r.forEach(l=>l()))}}}function CN(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let jI=new NI(()=>EN(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function If(e,t){let n=jI.get(t),r=k.useId(),i=CN(n);if(Ui(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let oy=new Map,Hh=new Map;function u_(e){var t;let n=(t=Hh.get(e))!=null?t:0;return Hh.set(e,n+1),n!==0?()=>d_(e):(oy.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>d_(e))}function d_(e){var t;let n=(t=Hh.get(e))!=null?t:1;if(n===1?Hh.delete(e):Hh.set(e,n-1),n!==1)return;let r=oy.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,oy.delete(e))}function kI(e,{allowed:t,disallowed:n}={}){let r=If(e,"inert-others");Ui(()=>{var i,s;if(!r)return;let a=Uc();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&a.add(u_(c));let l=(s=t==null?void 0:t())!=null?s:[];for(let c of l){if(!c)continue;let f=Bg(c);if(!f)continue;let p=c.parentElement;for(;p&&p!==f.body;){for(let m of p.children)l.some(x=>m.contains(x))||a.add(u_(m));p=p.parentElement}}return a.dispose},[r,t,n])}function EI(e,t,n){let r=Ju(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});k.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let s=Uc();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[t,r,e])}let Z0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),CI=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Jo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Jo||{}),ly=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ly||{}),AI=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(AI||{});function LI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Z0)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function PI(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(CI)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var AN=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(AN||{});function TI(e,t=0){var n;return e===((n=Bg(e))==null?void 0:n.body)?!1:Tc(t,{0(){return e.matches(Z0)},1(){let r=e;for(;r!==null;){if(r.matches(Z0))return!0;r=r.parentElement}return!1}})}var MI=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(MI||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function el(e){e==null||e.focus({preventScroll:!0})}let DI=["textarea","input"].join(",");function II(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,DI))!=null?n:!1}function OI(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Vh(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?OI(e):e:t&64?PI(e):LI(e);i.length>0&&a.length>1&&(a=a.filter(g=>!i.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===g:N===g))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,m=a.length,x;do{if(p>=m||p+m<=0)return 0;let g=c+p;if(t&16)g=(g+m)%m;else{if(g<0)return 3;if(g>=m)return 1}x=a[g],x==null||x.focus(f),p+=l}while(x!==s.activeElement);return t&6&&II(x)&&x.select(),2}function LN(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function RI(){return/Android/gi.test(window.navigator.userAgent)}function FI(){return LN()||RI()}function _h(e,t,n,r){let i=Ju(n);k.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return document.addEventListener(t,s,r),()=>document.removeEventListener(t,s,r)},[e,t,r])}function PN(e,t,n,r){let i=Ju(n);k.useEffect(()=>{if(!e)return;function s(a){i.current(a)}return window.addEventListener(t,s,r),()=>window.removeEventListener(t,s,r)},[e,t,r])}const f_=30;function $I(e,t,n){let r=If(e,"outside-click"),i=Ju(n),s=k.useCallback(function(c,f){if(c.defaultPrevented)return;let p=f(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let m=function x(g){return typeof g=="function"?x(g()):Array.isArray(g)||g instanceof Set?g:[g]}(t);for(let x of m)if(x!==null&&(x.contains(p)||c.composed&&c.composedPath().includes(x)))return;return!TI(p,AN.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),a=k.useRef(null);_h(r,"pointerdown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),_h(r,"mousedown",c=>{var f,p;a.current=((p=(f=c.composedPath)==null?void 0:f.call(c))==null?void 0:p[0])||c.target},!0),_h(r,"click",c=>{FI()||a.current&&(s(c,()=>a.current),a.current=null)},!0);let l=k.useRef({x:0,y:0});_h(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),_h(r,"touchend",c=>{let f={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=f_||Math.abs(f.y-l.current.y)>=f_))return s(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),PN(r,"blur",c=>s(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Tp(...e){return k.useMemo(()=>Bg(...e),[...e])}function TN(e,t,n,r){let i=Ju(n);k.useEffect(()=>{e=e??window;function s(a){i.current(a)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}function BI(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,e-i);n.style(r,"paddingRight",`${s}px`)}}}function UI(){return LN()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Uc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:f}=new URL(c.href),p=e.querySelector(f);p&&!r(p)&&(a=p)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;s!==c&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function zI(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function qI(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Tu=EN(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Uc(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:qI(n)},i=[UI(),BI(),zI()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Tu.subscribe(()=>{let e=Tu.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Tu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Tu.dispatch("TEARDOWN",n)}});function WI(e,t,n=()=>({containers:[]})){let r=CN(Tu),i=t?r.get(t):void 0,s=i?i.count>0:!1;return Ui(()=>{if(!(!t||!e))return Tu.dispatch("PUSH",t,n),()=>Tu.dispatch("POP",t,n)},[e,t]),s}function HI(e,t,n=()=>[document.body]){let r=If(e,"scroll-lock");WI(r,t,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function VI(e=0){let[t,n]=k.useState(e),r=k.useCallback(c=>n(c),[t]),i=k.useCallback(c=>n(f=>f|c),[t]),s=k.useCallback(c=>(t&c)===c,[t]),a=k.useCallback(c=>n(f=>f&~c),[n]),l=k.useCallback(c=>n(f=>f^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:l}}var GI={},h_,p_;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((h_=process==null?void 0:GI)==null?void 0:h_.NODE_ENV)==="test"&&typeof((p_=Element==null?void 0:Element.prototype)==null?void 0:p_.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var YI=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(YI||{});function KI(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function JI(e,t,n,r){let[i,s]=k.useState(n),{hasFlag:a,addFlag:l,removeFlag:c}=VI(e&&i?3:0),f=k.useRef(!1),p=k.useRef(!1),m=D5();return Ui(()=>{var x;if(e){if(n&&s(!0),!t){n&&l(3);return}return(x=r==null?void 0:r.start)==null||x.call(r,n),XI(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){p.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var g;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,c(7),n||s(!1),(g=r==null?void 0:r.end)==null||g.call(r,n))}})}},[e,n,t,m]),e?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function XI(e,{prepare:t,run:n,done:r,inFlight:i}){let s=Uc();return ZI(e,{prepare:t,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(QI(e,r))})}),s.dispose}function QI(e,t){var n,r;let i=Uc();if(!e)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),i.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{s||t()}),i.dispose)}function ZI(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function O5(e,t){let n=k.useRef([]),r=pr(e);k.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}let zg=k.createContext(null);zg.displayName="OpenClosedContext";var Ma=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ma||{});function qg(){return k.useContext(zg)}function eO({value:e,children:t}){return vt.createElement(zg.Provider,{value:e},t)}function tO({children:e}){return vt.createElement(zg.Provider,{value:null},e)}function nO(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let hc=[];nO(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||hc[0]===t.target)return;let n=t.target;n=n.closest(Z0),hc.unshift(n??t.target),hc=hc.filter(r=>r!=null&&r.isConnected),hc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function MN(e){let t=pr(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ug(()=>{n.current&&t()})}),[t])}function rO(){let e=typeof document>"u";return"useSyncExternalStore"in Kv?(t=>t.useSyncExternalStore)(Kv)(()=>()=>{},()=>!1,()=>!e):!1}function Mp(){let e=rO(),[t,n]=k.useState(Ou.isHandoffComplete);return t&&Ou.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>Ou.handoff(),[]),e?!1:t}let DN=k.createContext(!1);function iO(){return k.useContext(DN)}function m_(e){return vt.createElement(DN.Provider,{value:e.force},e.children)}function sO(e){let t=iO(),n=k.useContext(ON),r=Tp(e),[i,s]=k.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(Ou.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return k.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),k.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),i}let IN=k.Fragment,aO=ps(function(e,t){let n=e,r=k.useRef(null),i=bo(gI(m=>{r.current=m}),t),s=Tp(r),a=sO(r),[l]=k.useState(()=>{var m;return Ou.isServer?null:(m=s==null?void 0:s.createElement("div"))!=null?m:null}),c=k.useContext(cy),f=Mp();Ui(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Ui(()=>{if(l&&c)return c.register(l)},[c,l]),MN(()=>{var m;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let p=ua();return f?!a||!l?null:Pu.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:IN,name:"Portal"}),l):null});function oO(e,t){let n=bo(t),{enabled:r=!0,...i}=e,s=ua();return r?vt.createElement(aO,{...i,ref:n}):s({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:IN,name:"Portal"})}let lO=k.Fragment,ON=k.createContext(null);function cO(e,t){let{target:n,...r}=e,i={ref:bo(t)},s=ua();return vt.createElement(ON.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:lO,name:"Popover.Group"}))}let cy=k.createContext(null);function uO(){let e=k.useContext(cy),t=k.useRef([]),n=pr(s=>(t.current.push(s),e&&e.register(s),()=>r(s))),r=pr(s=>{let a=t.current.indexOf(s);a!==-1&&t.current.splice(a,1),e&&e.unregister(s)}),i=k.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,k.useMemo(()=>function({children:s}){return vt.createElement(cy.Provider,{value:i},s)},[i])]}let dO=ps(oO),RN=ps(cO),fO=Object.assign(dO,{Group:RN});function hO(e,t=typeof document<"u"?document.defaultView:null,n){let r=If(e,"escape");TN(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===kN.Escape&&n(i))})}function pO(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=k.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ui(()=>{if(!t)return;function i(s){r(s.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function mO({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Tp(n),i=pr(()=>{var s,a;let l=[];for(let c of e)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||l.some(f=>c.contains(f))||l.push(c));return l});return{resolveContainers:i,contains:pr(s=>i().some(a=>a.contains(s)))}}let FN=k.createContext(null);function g_({children:e,node:t}){let[n,r]=k.useState(null),i=$N(t??n);return vt.createElement(FN.Provider,{value:i},e,i===null&&vt.createElement(ay,{features:Q0.Hidden,ref:s=>{var a,l;if(s){for(let c of(l=(a=Bg(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(s)){r(c);break}}}}))}function $N(e=null){var t;return(t=k.useContext(FN))!=null?t:e}function R5(){let e=k.useRef(!1);return Ui(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Th=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Th||{});function gO(){let e=k.useRef(0);return PN(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function BN(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let vO="div";var ku=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ku||{});function yO(e,t){let n=k.useRef(null),r=bo(n,t),{initialFocus:i,initialFocusFallback:s,containers:a,features:l=15,...c}=e;Mp()||(l=0);let f=Tp(n);_O(l,{ownerDocument:f});let p=SO(l,{ownerDocument:f,container:n,initialFocus:i,initialFocusFallback:s});NO(l,{ownerDocument:f,container:n,containers:a,previousActiveElement:p});let m=gO(),x=pr(S=>{let A=n.current;A&&(O=>O())(()=>{Tc(m.current,{[Th.Forwards]:()=>{Vh(A,Jo.First,{skipElements:[S.relatedTarget,s]})},[Th.Backwards]:()=>{Vh(A,Jo.Last,{skipElements:[S.relatedTarget,s]})}})})}),g=If(!!(l&2),"focus-trap#tab-lock"),N=D5(),j=k.useRef(!1),E={ref:r,onKeyDown(S){S.key=="Tab"&&(j.current=!0,N.requestAnimationFrame(()=>{j.current=!1}))},onBlur(S){if(!(l&4))return;let A=BN(a);n.current instanceof HTMLElement&&A.add(n.current);let O=S.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(UN(A,O)||(j.current?Vh(n.current,Tc(m.current,{[Th.Forwards]:()=>Jo.Next,[Th.Backwards]:()=>Jo.Previous})|Jo.WrapAround,{relativeTo:S.target}):S.target instanceof HTMLElement&&el(S.target)))}},b=ua();return vt.createElement(vt.Fragment,null,g&&vt.createElement(ay,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Q0.Focusable}),b({ourProps:E,theirProps:c,defaultTag:vO,name:"FocusTrap"}),g&&vt.createElement(ay,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Q0.Focusable}))}let xO=ps(yO),wO=Object.assign(xO,{features:ku});function bO(e=!0){let t=k.useRef(hc.slice());return O5(([n],[r])=>{r===!0&&n===!1&&Ug(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=hc.slice())},[e,hc,t]),pr(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function _O(e,{ownerDocument:t}){let n=!!(e&8),r=bO(n);O5(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&el(r())},[n]),MN(()=>{n&&el(r())})}function SO(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let s=k.useRef(null),a=If(!!(e&1),"focus-trap#initial-focus"),l=R5();return O5(()=>{if(e===0)return;if(!a){i!=null&&i.current&&el(i.current);return}let c=n.current;c&&Ug(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){s.current=f;return}}else if(c.contains(f)){s.current=f;return}if(r!=null&&r.current)el(r.current);else{if(e&16){if(Vh(c,Jo.First|Jo.AutoFocus)!==ly.Error)return}else if(Vh(c,Jo.First)!==ly.Error)return;if(i!=null&&i.current&&(el(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=t==null?void 0:t.activeElement})},[i,a,e]),s}function NO(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let s=R5(),a=!!(e&4);TN(t==null?void 0:t.defaultView,"focus",l=>{if(!a||!s.current)return;let c=BN(r);n.current instanceof HTMLElement&&c.add(n.current);let f=i.current;if(!f)return;let p=l.target;p&&p instanceof HTMLElement?UN(c,p)?(i.current=p,el(p)):(l.preventDefault(),l.stopPropagation(),el(f)):el(i.current)},!0)}function UN(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function zN(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:WN)!==k.Fragment||vt.Children.count(e.children)===1}let Wg=k.createContext(null);Wg.displayName="TransitionContext";var jO=(e=>(e.Visible="visible",e.Hidden="hidden",e))(jO||{});function kO(){let e=k.useContext(Wg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function EO(){let e=k.useContext(Hg);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Hg=k.createContext(null);Hg.displayName="NestingContext";function Vg(e){return"children"in e?Vg(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function qN(e,t){let n=Ju(e),r=k.useRef([]),i=R5(),s=D5(),a=pr((g,N=yc.Hidden)=>{let j=r.current.findIndex(({el:E})=>E===g);j!==-1&&(Tc(N,{[yc.Unmount](){r.current.splice(j,1)},[yc.Hidden](){r.current[j].state="hidden"}}),s.microTask(()=>{var E;!Vg(r)&&i.current&&((E=n.current)==null||E.call(n))}))}),l=pr(g=>{let N=r.current.find(({el:j})=>j===g);return N?N.state!=="visible"&&(N.state="visible"):r.current.push({el:g,state:"visible"}),()=>a(g,yc.Unmount)}),c=k.useRef([]),f=k.useRef(Promise.resolve()),p=k.useRef({enter:[],leave:[]}),m=pr((g,N,j)=>{c.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([E])=>E!==g)),t==null||t.chains.current[N].push([g,new Promise(E=>{c.current.push(E)})]),t==null||t.chains.current[N].push([g,new Promise(E=>{Promise.all(p.current[N].map(([b,S])=>S)).then(()=>E())})]),N==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>j(N)):j(N)}),x=pr((g,N,j)=>{Promise.all(p.current[N].splice(0).map(([E,b])=>b)).then(()=>{var E;(E=c.current.shift())==null||E()}).then(()=>j(N))});return k.useMemo(()=>({children:r,register:l,unregister:a,onStart:m,onStop:x,wait:f,chains:p}),[l,a,r,m,x,p,f])}let WN=k.Fragment,HN=X0.RenderStrategy;function CO(e,t){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:f,enterFrom:p,enterTo:m,entered:x,leave:g,leaveFrom:N,leaveTo:j,...E}=e,[b,S]=k.useState(null),A=k.useRef(null),O=zN(e),G=bo(...O?[A,t,S]:t===null?[]:[t]),ie=(n=E.unmount)==null||n?yc.Unmount:yc.Hidden,{show:q,appear:M,initial:re}=kO(),[ae,R]=k.useState(q?"visible":"hidden"),U=EO(),{register:Y,unregister:K}=U;Ui(()=>Y(A),[Y,A]),Ui(()=>{if(ie===yc.Hidden&&A.current){if(q&&ae!=="visible"){R("visible");return}return Tc(ae,{hidden:()=>K(A),visible:()=>Y(A)})}},[ae,A,Y,K,q,ie]);let xe=Mp();Ui(()=>{if(O&&xe&&ae==="visible"&&A.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[A,ae,xe,O]);let me=re&&!M,X=M&&q&&re,F=k.useRef(!1),z=qN(()=>{F.current||(R("hidden"),K(A))},U),oe=pr(Ae=>{F.current=!0;let Ee=Ae?"enter":"leave";z.onStart(A,Ee,Z=>{Z==="enter"?s==null||s():Z==="leave"&&(l==null||l())})}),Le=pr(Ae=>{let Ee=Ae?"enter":"leave";F.current=!1,z.onStop(A,Ee,Z=>{Z==="enter"?a==null||a():Z==="leave"&&(c==null||c())}),Ee==="leave"&&!Vg(z)&&(R("hidden"),K(A))});k.useEffect(()=>{O&&i||(oe(q),Le(q))},[q,O,i]);let P=!(!i||!O||!xe||me),[,V]=JI(P,b,q,{start:oe,end:Le}),ne=_u({ref:G,className:((r=sy(E.className,X&&f,X&&p,V.enter&&f,V.enter&&V.closed&&p,V.enter&&!V.closed&&m,V.leave&&g,V.leave&&!V.closed&&N,V.leave&&V.closed&&j,!V.transition&&q&&x))==null?void 0:r.trim())||void 0,...KI(V)}),le=0;ae==="visible"&&(le|=Ma.Open),ae==="hidden"&&(le|=Ma.Closed),V.enter&&(le|=Ma.Opening),V.leave&&(le|=Ma.Closing);let de=ua();return vt.createElement(Hg.Provider,{value:z},vt.createElement(eO,{value:le},de({ourProps:ne,theirProps:E,defaultTag:WN,features:HN,visible:ae==="visible",name:"Transition.Child"})))}function AO(e,t){let{show:n,appear:r=!1,unmount:i=!0,...s}=e,a=k.useRef(null),l=zN(e),c=bo(...l?[a,t]:t===null?[]:[t]);Mp();let f=qg();if(n===void 0&&f!==null&&(n=(f&Ma.Open)===Ma.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=k.useState(n?"visible":"hidden"),x=qN(()=>{n||m("hidden")}),[g,N]=k.useState(!0),j=k.useRef([n]);Ui(()=>{g!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),N(!1))},[j,n]);let E=k.useMemo(()=>({show:n,appear:r,initial:g}),[n,r,g]);Ui(()=>{n?m("visible"):!Vg(x)&&a.current!==null&&m("hidden")},[n,x]);let b={unmount:i},S=pr(()=>{var G;g&&N(!1),(G=e.beforeEnter)==null||G.call(e)}),A=pr(()=>{var G;g&&N(!1),(G=e.beforeLeave)==null||G.call(e)}),O=ua();return vt.createElement(Hg.Provider,{value:x},vt.createElement(Wg.Provider,{value:E},O({ourProps:{...b,as:k.Fragment,children:vt.createElement(VN,{ref:c,...b,...s,beforeEnter:S,beforeLeave:A})},theirProps:{},defaultTag:k.Fragment,features:HN,visible:p==="visible",name:"Transition"})))}function LO(e,t){let n=k.useContext(Wg)!==null,r=qg()!==null;return vt.createElement(vt.Fragment,null,!n&&r?vt.createElement(uy,{ref:t,...e}):vt.createElement(VN,{ref:t,...e}))}let uy=ps(AO),VN=ps(CO),F5=ps(LO),PO=Object.assign(uy,{Child:F5,Root:uy});var TO=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(TO||{}),MO=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(MO||{});let DO={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},$5=k.createContext(null);$5.displayName="DialogContext";function Gg(e){let t=k.useContext($5);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Gg),n}return t}function IO(e,t){return Tc(t.type,DO,e,t)}let v_=ps(function(e,t){let n=k.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:f=!1,unmount:p=!1,...m}=e,x=k.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(x.current||(x.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=qg();i===void 0&&g!==null&&(i=(g&Ma.Open)===Ma.Open);let N=k.useRef(null),j=bo(N,t),E=Tp(N),b=i?0:1,[S,A]=k.useReducer(IO,{titleId:null,descriptionId:null,panelRef:k.createRef()}),O=pr(()=>s(!1)),G=pr(Le=>A({type:0,id:Le})),ie=Mp()?b===0:!1,[q,M]=uO(),re={get current(){var Le;return(Le=S.panelRef.current)!=null?Le:N.current}},ae=$N(),{resolveContainers:R}=mO({mainTreeNode:ae,portals:q,defaultContainers:[re]}),U=g!==null?(g&Ma.Closing)===Ma.Closing:!1;kI(f||U?!1:ie,{allowed:pr(()=>{var Le,P;return[(P=(Le=N.current)==null?void 0:Le.closest("[data-headlessui-portal]"))!=null?P:null]}),disallowed:pr(()=>{var Le;return[(Le=ae==null?void 0:ae.closest("body > *:not(#headlessui-portal-root)"))!=null?Le:null]})}),$I(ie,R,Le=>{Le.preventDefault(),O()}),hO(ie,E==null?void 0:E.defaultView,Le=>{Le.preventDefault(),Le.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),O()}),HI(f||U?!1:ie,E,R),EI(ie,N,O);let[Y,K]=vI(),xe=k.useMemo(()=>[{dialogState:b,close:O,setTitleId:G,unmount:p},S],[b,S,O,G,p]),me=k.useMemo(()=>({open:b===0}),[b]),X={ref:j,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:b===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":Y,unmount:p},F=!pO(),z=ku.None;ie&&!f&&(z|=ku.RestoreFocus,z|=ku.TabLock,c&&(z|=ku.AutoFocus),F&&(z|=ku.InitialFocus));let oe=ua();return vt.createElement(tO,null,vt.createElement(m_,{force:!0},vt.createElement(fO,null,vt.createElement($5.Provider,{value:xe},vt.createElement(RN,{target:N},vt.createElement(m_,{force:!1},vt.createElement(K,{slot:me},vt.createElement(M,null,vt.createElement(wO,{initialFocus:a,initialFocusFallback:N,containers:R,features:z},vt.createElement(SI,{value:O},oe({ourProps:X,theirProps:m,slot:me,defaultTag:OO,features:RO,visible:b===0,name:"Dialog"})))))))))))}),OO="div",RO=X0.RenderStrategy|X0.Static;function FO(e,t){let{transition:n=!1,open:r,...i}=e,s=qg(),a=e.hasOwnProperty("open")||s!==null,l=e.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?vt.createElement(g_,null,vt.createElement(PO,{show:r,transition:n,unmount:i.unmount},vt.createElement(v_,{ref:t,...i}))):vt.createElement(g_,null,vt.createElement(v_,{ref:t,open:r,...i}))}let $O="div";function BO(e,t){let n=k.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=e,[{dialogState:a,unmount:l},c]=Gg("Dialog.Panel"),f=bo(t,c.panelRef),p=k.useMemo(()=>({open:a===0}),[a]),m=pr(E=>{E.stopPropagation()}),x={ref:f,id:r,onClick:m},g=i?F5:k.Fragment,N=i?{unmount:l}:{},j=ua();return vt.createElement(g,{...N},j({ourProps:x,theirProps:s,slot:p,defaultTag:$O,name:"Dialog.Panel"}))}let UO="div";function zO(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:s}]=Gg("Dialog.Backdrop"),a=k.useMemo(()=>({open:i===0}),[i]),l={ref:t,"aria-hidden":!0},c=n?F5:k.Fragment,f=n?{unmount:s}:{},p=ua();return vt.createElement(c,{...f},p({ourProps:l,theirProps:r,slot:a,defaultTag:UO,name:"Dialog.Backdrop"}))}let qO="h2";function WO(e,t){let n=k.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:s,setTitleId:a}]=Gg("Dialog.Title"),l=bo(t);k.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=k.useMemo(()=>({open:s===0}),[s]),f={ref:l,id:r};return ua()({ourProps:f,theirProps:i,slot:c,defaultTag:qO,name:"Dialog.Title"})}let HO=ps(FO),VO=ps(BO);ps(zO);let GO=ps(WO),Ru=Object.assign(HO,{Panel:VO,Title:GO,Description:bI});const YO=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,s]=k.useState(""),[a,l]=k.useState(!1);k.useState([]);const c=async f=>{if(f.preventDefault(),!!i.trim())try{l(!0);const{error:p}=await et.from("groups").insert([{name:i.trim()}]);if(p)throw p;Te.success("Grupo creado exitosamente"),n(),t(),s("")}catch(p){console.error("Error:",p),Te.error("Error al crear el grupo")}finally{l(!1)}};return d.jsx(Ru,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-4 sm:p-6 mx-4 max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Oa,{className:"w-6 h-6"})})}),d.jsx(Ru.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),d.jsxs("form",{onSubmit:c,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),d.jsx("input",{type:"text",id:"name",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,disabled:a,fullWidth:!0,className:"sm:w-auto",children:"Cancelar"}),d.jsx(_t,{type:"submit",loading:a,fullWidth:!0,className:"sm:w-auto",children:"Crear Grupo"})]})]})]})]})})},KO=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,s]=k.useState(""),[a,l]=k.useState(!1),c=async f=>{if(f.preventDefault(),i!==r.name){Te.error("El nombre del grupo no coincide");return}try{l(!0);const{error:p}=await et.from("groups").delete().eq("id",r.id);if(p)throw p;Te.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),Te.error("Error al eliminar el grupo")}finally{l(!1),s("")}};return d.jsx(Ru,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Oa,{className:"w-6 h-6"})})}),d.jsx(Ru.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta accin no se puede deshacer. Para confirmar, escribe el nombre del grupo:",d.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),d.jsxs("form",{onSubmit:c,children:[d.jsx("div",{className:"mb-4",children:d.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,disabled:a,children:"Cancelar"}),d.jsx(_t,{type:"submit",loading:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function Nn({className:e="",width:t="100%",height:n="1rem",rounded:r=!1,count:i=1}){const s=Array.from({length:i},(a,l)=>d.jsx("div",{className:`
        animate-pulse bg-gray-200 
        ${r?"rounded-full":"rounded"} 
        ${e}
        ${i>1&&l<i-1?"mb-2":""}
      `,style:{width:t,height:n}},l));return i===1?s[0]:d.jsx("div",{children:s})}function JO({rows:e=5}){return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 bg-gray-50 rounded-lg",children:[d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"})]}),Array.from({length:e},(t,n)=>d.jsxs("div",{className:"grid grid-cols-6 gap-4 p-4 border-b",children:[d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsx(Nn,{height:"1rem"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Nn,{width:"3rem",height:"1rem"}),d.jsx(Nn,{width:"4rem",height:"1rem"})]})]},n))]})}function GN({count:e=3}){return d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:e},(t,n)=>d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx(Nn,{height:"1.5rem",className:"mb-4"}),d.jsx(Nn,{height:"1rem",className:"mb-2"}),d.jsx(Nn,{height:"1rem",width:"70%",className:"mb-4"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Nn,{width:"4rem",height:"1rem"}),d.jsx(Nn,{width:"3rem",height:"1rem"})]})]},n))})}function XO({count:e=3}){return d.jsx("div",{className:"space-y-4",children:Array.from({length:e},(t,n)=>d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx(Nn,{height:"1.5rem",width:"60%",className:"mb-2"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(Nn,{height:"1rem",width:"8rem"}),d.jsx(Nn,{height:"1rem",width:"6rem"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Nn,{width:"3rem",height:"2rem"}),d.jsx(Nn,{width:"3rem",height:"2rem"})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(Nn,{height:"1rem",width:"10rem"}),d.jsx(Nn,{height:"1rem",width:"8rem"})]})]},n))})}function QO({count:e=4}){return d.jsx("div",{className:"space-y-3",children:Array.from({length:e},(t,n)=>d.jsx("div",{className:"p-3 hover:bg-gray-50 border-b",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(Nn,{height:"1.25rem",width:"8rem"}),d.jsx(Nn,{height:"1rem",width:"4rem"})]}),d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx(Nn,{height:"1.5rem",width:"5rem"}),d.jsx(Nn,{height:"1.5rem",width:"6rem"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Nn,{width:"3rem",height:"1.5rem"}),d.jsx(Nn,{width:"4rem",height:"1.5rem"})]})]})},n))})}function ZO(){const[e,t]=k.useState([]),[n,r]=k.useState(!0),[i,s]=k.useState(!1),{user:a}=Zr(),l=ca(),[c,f]=k.useState(!1),[p,m]=k.useState(null),[x,g]=k.useState(!1),[N,j]=k.useState("");k.useEffect(()=>{(async()=>{a&&await E()})()},[a]);const E=async()=>{if(a)try{r(!0);const{data:O,error:G}=await et.from("users").select("role").eq("id",a.id).single();if(G)throw G;const ie=(O==null?void 0:O.role)==="admin";if(f(ie),ie){const{data:Y,error:K}=await et.from("groups").select("*").order("created_at",{ascending:!1});if(K)throw K;const{data:xe,error:me}=await et.from("group_members").select("group_id").eq("user_id",a.id);if(me)throw me;const X=new Set((xe==null?void 0:xe.map(z=>z.group_id))||[]),F=await Promise.all((Y||[]).map(async z=>{const{data:oe}=await et.from("group_members").select("id").eq("group_id",z.id).eq("role_in_group","principal"),{data:Le}=await et.from("group_members").select("id").eq("group_id",z.id).eq("role_in_group","sustituto");return{...z,userRole:X.has(z.id)?"member":"none",principal_count:(oe==null?void 0:oe.length)||0,sustituto_count:(Le==null?void 0:Le.length)||0}}));t(F);return}const{data:q,error:M}=await et.from("group_members").select("group_id").eq("user_id",a.id);if(M)throw M;const re=new Set((q==null?void 0:q.map(Y=>Y.group_id))||[]),{data:ae,error:R}=await et.from("groups").select("*").or(`created_by.eq.${a.id},id.in.(${Array.from(re).join(",")})`).order("created_at",{ascending:!1});if(R)throw R;const U=await Promise.all((ae||[]).map(async Y=>{const{data:K}=await et.from("group_members").select("id").eq("group_id",Y.id).eq("role_in_group","principal"),{data:xe}=await et.from("group_members").select("id").eq("group_id",Y.id).eq("role_in_group","sustituto");return{...Y,userRole:re.has(Y.id)?"member":"none",principal_count:(K==null?void 0:K.length)||0,sustituto_count:(xe==null?void 0:xe.length)||0}}));t(U)}catch(O){console.error("Error fetching groups:",O),Te.error("Error al cargar los grupos"),t([])}finally{r(!1)}},b=O=>{l(`/group/${O}`)},S=(O,G)=>{O.stopPropagation(),m(G),g(!0)},A=()=>{const O=e.filter(M=>M.name.toLowerCase().includes(N.toLowerCase())),G=O.filter(M=>M.created_by===(a==null?void 0:a.id)),ie=O.filter(M=>M.userRole==="member"&&M.created_by!==(a==null?void 0:a.id)),q=c?O.filter(M=>M.userRole==="none"&&M.created_by!==(a==null?void 0:a.id)&&!ie.some(re=>re.id===M.id)):[];return{created:G,member:ie,other:q}};return d.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),d.jsxs(_t,{onClick:()=>s(!0),className:"flex items-center space-x-2",children:[d.jsx($g,{className:"w-5 h-5"}),d.jsx("span",{children:"Crear Grupo"})]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:N,onChange:O=>j(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-7 w-48 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx(GN,{count:6})]}):e.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Iu,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. Crea uno para empezar!"})]}):d.jsxs("div",{className:"space-y-8",children:[A().created.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A().created.map(O=>d.jsx(Ev,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>b(O.id)},O.id))})]}),A().member.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A().member.map(O=>d.jsx(Ev,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>b(O.id)},O.id))})]}),c&&A().other.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A().other.map(O=>d.jsx(Ev,{group:O,user:a,isAdmin:c,onDelete:S,onClick:()=>b(O.id)},O.id))})]})]}),d.jsx(YO,{isOpen:i,onClose:()=>s(!1),onGroupCreated:E,isAdmin:c}),p&&d.jsx(KO,{isOpen:x,onClose:()=>{g(!1),m(null)},onGroupDeleted:E,group:p})]})}const Ev=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>d.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[d.jsx(Iu,{className:"w-5 h-5 text-indigo-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.principal_count}),d.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[d.jsx(Iu,{className:"w-5 h-5 text-orange-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.sustituto_count}),d.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&d.jsx("button",{onClick:s=>r(s,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:d.jsx(M5,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function eR({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:s,userRole:a}){const[l,c]=k.useState(""),[f,p]=k.useState(""),[m,x]=k.useState("principal"),[g,N]=k.useState([]),[j,E]=k.useState(""),[b,S]=k.useState(!1),[A,O]=k.useState(!1),[G,ie]=k.useState([]),[q,M]=k.useState(!1),{user:re}=Zr(),ae=()=>{c(""),p(""),x("principal"),N([]),E(""),S(!1),ie([])},R=async()=>{if(re)try{const{data:X,error:F}=await et.from("users").select("name, email").eq("id",re.id).single();if(F)throw F;X&&(c(X.name||""),p(X.email||""))}catch(X){console.error("Error fetching user info:",X)}},U=async()=>{var X;if(re)try{const{data:F,error:z}=await et.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",re.id);if(z)throw z;M(((X=F==null?void 0:F[0])==null?void 0:X.role_in_group)==="principal")}catch(F){console.error("Error checking principal status:",F),M(!1)}},Y=async()=>{try{const{data:X,error:F}=await et.from("roles").select("*").eq("group_id",n).order("name");if(F)throw F;ie(X||[])}catch(X){console.error("Error loading roles:",X),Te.error("Error al cargar los roles")}};if(k.useEffect(()=>{e&&Y()},[e]),k.useEffect(()=>{e||ae()},[e]),k.useEffect(()=>{re&&(U(),a==="user"&&!q?R():(c(""),p("")))},[re,a,q]),!e||!re)return null;const K=()=>{if(!j.trim()){Te.error("Por favor ingresa un nombre para el rol");return}if(G.some(oe=>oe.name.toLowerCase()===j.trim().toLowerCase())){Te.error("Este rol ya existe en el grupo");return}const F=`new-${Date.now()}`,z={id:F,name:j.trim(),isNew:!0,group_id:n};ie([...G,z]),N([...g,F]),E(""),S(!1),Te.success("Rol aadido y seleccionado")},xe=async X=>{if(X.preventDefault(),!l.trim()){Te.error("Por favor ingresa un nombre");return}const F=f.trim()?"registered":"local";if(g.length===0){Te.error("Por favor selecciona al menos un rol");return}O(!0);try{const z=g.filter(V=>!V.startsWith("new-")),oe=G.filter(V=>"isNew"in V&&V.isNew&&g.includes(V.id)).map(V=>({name:V.name,group_id:n})),{data:Le,error:P}=await et.rpc("add_group_member_flexible",{p_group_id:n,p_name:l,p_email:F==="registered"?f.toLowerCase().trim():null,p_role:s?"principal":m,p_user_id:a==="user"&&!q?re.id:null,p_instruments:z,p_new_instruments:oe.map(V=>V.name),p_member_type:F});if(P)throw P;if(F==="registered"&&Le.invitation)try{const{invitation:V}=Le;if(console.log("Datos de invitacin:",V),!V||!V.token)throw new Error("No se recibieron los datos de invitacin correctamente");const{error:ne}=await et.functions.invoke("send-invitation-email",{body:{email:V.email,token:V.token,userExists:V.userExists,groupName:V.groupName,groupMemberId:V.groupMemberId}});if(ne)throw console.error("Error sending invitation email:",ne),new Error(`Error al enviar la invitacin: ${ne.message}`);Te.success(`Miembro aadido e invitacin enviada a ${f}`)}catch(V){console.error("Error sending invitation:",V),Te.error(`Error al enviar la invitacin: ${V.message||"Error desconocido"}`,{icon:"",duration:5e3})}else Te.success(`${l} aadido al grupo como miembro local`);i(),t(),ae()}catch(z){console.error("Error adding member:",z),Te.error(z.message||"Error al aadir miembro")}finally{O(!1)}},me=a==="user"&&!q;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:me?"Unirse al Grupo":"Aadir Miembro"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Oa,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:xe,className:"p-6 space-y-4",children:[d.jsx(Xn,{label:"Nombre",value:l,onChange:X=>c(X.target.value),required:!0,placeholder:"Ingresa el nombre del miembro",disabled:me}),d.jsxs("div",{children:[d.jsx(Xn,{label:"Email (opcional)",type:"email",value:f,onChange:X=>p(X.target.value),required:!1,placeholder:"Ingresa el email para enviar invitacin",disabled:me}),d.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[" ",d.jsx("strong",{children:"Con email:"})," Recibir invitacin y podr acceder a la app",d.jsx("br",{})," ",d.jsx("strong",{children:"Sin email:"})," Solo para organizacin interna del grupo"]})]}),!s&&a==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:m,onChange:X=>x(X.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roles/Instrumentos"}),!b&&(a==="admin"||s||q)&&d.jsxs(_t,{type:"button",variant:"secondary",onClick:()=>S(!0),className:"text-sm py-1",children:[d.jsx($g,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),b&&d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsx(Xn,{label:"",value:j,onChange:X=>E(X.target.value),placeholder:"Enter instrument name",className:"flex-1"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx(_t,{type:"button",onClick:K,className:"whitespace-nowrap",children:"Add"}),d.jsx(_t,{type:"button",variant:"secondary",onClick:()=>{S(!1),E("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:G.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Aade uno arriba."}):G.map(X=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:g.includes(X.id),onChange:F=>{F.target.checked?N([...g,X.id]):N(g.filter(z=>z!==X.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),d.jsxs("span",{className:"flex items-center capitalize",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),X.name,"isNew"in X&&d.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},X.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(_t,{type:"submit",loading:A,children:me?"Unirse al Grupo":"Aadir Miembro"})]})]})]})})}function tR({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:s}){const[a,l]=k.useState(n.name),[c,f]=k.useState(n.role_in_group),[p,m]=k.useState([]),[x,g]=k.useState(!1),{user:N}=Zr();if(k.useEffect(()=>{n&&(l(n.name),f(n.role_in_group),m(n.instruments.map(b=>b.id)))},[n]),!e||!N)return null;const j=s==="admin"||n.user_id===N.id,E=async b=>{if(b.preventDefault(),!j){Te.error("You do not have permission to edit this member");return}if(!a.trim()){Te.error("Please enter a member name");return}if(p.length===0){Te.error("Please select at least one role");return}g(!0);try{const{error:S}=await et.from("group_members").update({name:a.trim(),role_in_group:c}).eq("id",n.id);if(S)throw S;const{error:A}=await et.from("group_member_roles").delete().eq("group_member_id",n.id);if(A)throw A;const{error:O}=await et.from("group_member_roles").insert(p.map(G=>({group_member_id:n.id,role_id:G,created_by:N.id})));if(O)throw O;Te.success("Member updated successfully!"),i(),t()}catch(S){console.error("Error updating member:",S),Te.error(S.message||"Failed to update member")}finally{g(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:x,children:d.jsx(Oa,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[d.jsx(Xn,{label:"Name",value:a,onChange:b=>l(b.target.value),required:!0,placeholder:"Enter member name",disabled:!j}),s==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:c,onChange:b=>f(b.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!j,children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(b=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:p.includes(b.id),onChange:S=>{S.target.checked?m([...p,b.id]):m(p.filter(A=>A!==b.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:x||!j}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),b.name]})]},b.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),j&&d.jsx(_t,{type:"submit",loading:x,children:"Save Changes"})]})]})]})})}const y_=3,nR=1e3;async function Wn(e,t="An error occurred"){let n=0;for(;n<y_;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===y_)return console.error(t,r),Te.error(t),null;await new Promise(i=>setTimeout(i,nR*n))}return null}function hn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function hs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function $i(e,t){const n=hn(e);return isNaN(t)?hs(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function oa(e,t){const n=hn(e);if(isNaN(t))return hs(e,NaN);if(!t)return n;const r=n.getDate(),i=hs(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const B5=6048e5,rR=864e5,YN=6e4,KN=36e5;let iR={};function Dp(){return iR}function xo(e,t){var l,c,f,p;const n=Dp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=hn(e),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Wu(e){return xo(e,{weekStartsOn:1})}function JN(e){const t=hn(e),n=t.getFullYear(),r=hs(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Wu(r),s=hs(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Wu(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Mc(e){const t=hn(e);return t.setHours(0,0,0,0),t}function eg(e){const t=hn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function po(e,t){const n=Mc(e),r=Mc(t),i=+n-eg(n),s=+r-eg(r);return Math.round((i-s)/rR)}function sR(e){const t=JN(e),n=hs(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wu(n)}function dy(e,t){const n=t*7;return $i(e,n)}function aR(e,t){return oa(e,t*12)}function oR(e){let t;return e.forEach(function(n){const r=hn(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function lR(e){let t;return e.forEach(n=>{const r=hn(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function cR(e){return hs(e,Date.now())}function _r(e,t){const n=Mc(e),r=Mc(t);return+n==+r}function U5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function uR(e){if(!U5(e)&&typeof e!="number")return!1;const t=hn(e);return!isNaN(Number(t))}function yp(e,t){const n=hn(e),r=hn(t),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function dR(e,t,n){const r=xo(e,n),i=xo(t,n),s=+r-eg(r),a=+i-eg(i);return Math.round((s-a)/B5)}function Ef(e){const t=hn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function di(e){const t=hn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function XN(e){const t=hn(e),n=hs(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function z5(e,t){var l,c,f,p;const n=Dp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,i=hn(e),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function QN(e){return z5(e,{weekStartsOn:1})}const fR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hR=(e,t,n)=>{let r;const i=fR[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function df(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const pR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vR={date:df({formats:pR,defaultWidth:"full"}),time:df({formats:mR,defaultWidth:"full"}),dateTime:df({formats:gR,defaultWidth:"full"})},yR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xR=(e,t,n,r)=>yR[e];function fo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;i=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const wR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_R={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},NR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kR=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ER={ordinalNumber:kR,era:fo({values:wR,defaultWidth:"wide"}),quarter:fo({values:bR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fo({values:_R,defaultWidth:"wide"}),day:fo({values:SR,defaultWidth:"wide"}),dayPeriod:fo({values:NR,defaultWidth:"wide",formattingValues:jR,defaultFormattingWidth:"wide"})};function ho(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?AR(l,m=>m.test(a)):CR(l,m=>m.test(a));let f;f=e.valueCallback?e.valueCallback(c):c,f=n.valueCallback?n.valueCallback(f):f;const p=t.slice(a.length);return{value:f,rest:p}}}function CR(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function AR(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function ZN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(i.length);return{value:a,rest:l}}}const LR=/^(\d+)(th|st|nd|rd)?/i,PR=/\d+/i,TR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MR={any:[/^b/i,/^(a|c)/i]},DR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IR={any:[/1/i,/2/i,/3/i,/4/i]},OR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},RR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$R={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zR={ordinalNumber:ZN({matchPattern:LR,parsePattern:PR,valueCallback:e=>parseInt(e,10)}),era:ho({matchPatterns:TR,defaultMatchWidth:"wide",parsePatterns:MR,defaultParseWidth:"any"}),quarter:ho({matchPatterns:DR,defaultMatchWidth:"wide",parsePatterns:IR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:OR,defaultMatchWidth:"wide",parsePatterns:RR,defaultParseWidth:"any"}),day:ho({matchPatterns:FR,defaultMatchWidth:"wide",parsePatterns:$R,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:BR,defaultMatchWidth:"any",parsePatterns:UR,defaultParseWidth:"any"})},e6={code:"en-US",formatDistance:hR,formatLong:vR,formatRelative:xR,localize:ER,match:zR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qR(e){const t=hn(e);return po(t,XN(t))+1}function t6(e){const t=hn(e),n=+Wu(t)-+sR(t);return Math.round(n/B5)+1}function n6(e,t){var p,m,x,g;const n=hn(e),r=n.getFullYear(),i=Dp(),s=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(x=i.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,a=hs(e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=xo(a,t),c=hs(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const f=xo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function WR(e,t){var l,c,f,p;const n=Dp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,i=n6(e,t),s=hs(e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),xo(s,t)}function r6(e,t){const n=hn(e),r=+xo(n,t)-+WR(n,t);return Math.round(r/B5)+1}function Cn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ec={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Cn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Cn(n+1,2)},d(e,t){return Cn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Cn(e.getHours()%12||12,t.length)},H(e,t){return Cn(e.getHours(),t.length)},m(e,t){return Cn(e.getMinutes(),t.length)},s(e,t){return Cn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Cn(i,t.length)}},$d={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},x_={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ec.y(e,t)},Y:function(e,t,n,r){const i=n6(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Cn(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Cn(s,t.length)},R:function(e,t){const n=JN(e);return Cn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Cn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Cn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Cn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ec.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Cn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=r6(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Cn(i,t.length)},I:function(e,t,n){const r=t6(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Cn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ec.d(e,t)},D:function(e,t,n){const r=qR(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Cn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Cn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Cn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Cn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=$d.noon:r===0?i=$d.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=$d.evening:r>=12?i=$d.afternoon:r>=4?i=$d.morning:i=$d.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ec.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ec.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ec.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ec.s(e,t)},S:function(e,t){return ec.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return b_(r);case"XXXX":case"XX":return Su(r);case"XXXXX":case"XXX":default:return Su(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return b_(r);case"xxxx":case"xx":return Su(r);case"xxxxx":case"xxx":default:return Su(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w_(r,":");case"OOOO":default:return"GMT"+Su(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w_(r,":");case"zzzz":default:return"GMT"+Su(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Cn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Cn(r,t.length)}};function w_(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Cn(s,2)}function b_(e,t){return e%60===0?(e>0?"-":"+")+Cn(Math.abs(e)/60,2):Su(e,t)}function Su(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Cn(Math.trunc(r/60),2),s=Cn(r%60,2);return n+i+t+s}const __=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},i6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},HR=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return __(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",__(r,t)).replace("{{time}}",i6(i,t))},VR={p:i6,P:HR},GR=/^D+$/,YR=/^Y+$/,KR=["D","DD","YY","YYYY"];function JR(e){return GR.test(e)}function XR(e){return YR.test(e)}function QR(e,t,n){const r=ZR(e,t,n);if(console.warn(r),KR.includes(e))throw new RangeError(r)}function ZR(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const e9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,t9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,n9=/^'([^]*?)'?$/,r9=/''/g,i9=/[a-zA-Z]/;function Kt(e,t,n){var p,m,x,g,N,j,E,b;const r=Dp(),i=(n==null?void 0:n.locale)??r.locale??e6,s=(n==null?void 0:n.firstWeekContainsDate)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(x=r.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((j=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:j.weekStartsOn)??r.weekStartsOn??((b=(E=r.locale)==null?void 0:E.options)==null?void 0:b.weekStartsOn)??0,l=hn(e);if(!uR(l))throw new RangeError("Invalid time value");let c=t.match(t9).map(S=>{const A=S[0];if(A==="p"||A==="P"){const O=VR[A];return O(S,i.formatLong)}return S}).join("").match(e9).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const A=S[0];if(A==="'")return{isToken:!1,value:s9(S)};if(x_[A])return{isToken:!0,value:S};if(A.match(i9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const f={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const A=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&XR(A)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&JR(A))&&QR(A,t,String(e));const O=x_[A[0]];return O(l,A,i.localize,f)}).join("")}function s9(e){const t=e.match(n9);return t?t[1].replace(r9,"'"):e}function a9(e){const t=hn(e),n=t.getFullYear(),r=t.getMonth(),i=hs(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function o9(e){return Math.trunc(+hn(e)/1e3)}function l9(e){const t=hn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function c9(e,t){return dR(l9(e),di(e),t)+1}function ff(e,t){const n=hn(e),r=hn(t);return n.getTime()>r.getTime()}function s6(e,t){const n=hn(e),r=hn(t);return+n<+r}function S_(e){return+hn(e)>Date.now()}function q5(e,t){const n=hn(e),r=hn(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function u9(e,t){const n=hn(e),r=hn(t);return n.getFullYear()===r.getFullYear()}function N_(e){return _r(e,cR(e))}function Cv(e,t){return $i(e,-t)}function vu(e,t){const r=p9(e);let i;if(r.date){const c=m9(r.date,2);i=g9(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=v9(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=y9(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+a),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(s+a+l)}const Hm={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},d9=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,f9=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,h9=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p9(e){const t={},n=e.split(Hm.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Hm.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Hm.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Hm.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function m9(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function g9(e,t){if(t===null)return new Date(NaN);const n=e.match(d9);if(!n)return new Date(NaN);const r=!!n[4],i=Sh(n[1]),s=Sh(n[2])-1,a=Sh(n[3]),l=Sh(n[4]),c=Sh(n[5])-1;if(r)return S9(t,l,c)?x9(t,l,c):new Date(NaN);{const f=new Date(0);return!b9(t,s,a)||!_9(t,i)?new Date(NaN):(f.setUTCFullYear(t,s,Math.max(i,a)),f)}}function Sh(e){return e?parseInt(e):1}function v9(e){const t=e.match(f9);if(!t)return NaN;const n=Av(t[1]),r=Av(t[2]),i=Av(t[3]);return N9(n,r,i)?n*KN+r*YN+i*1e3:NaN}function Av(e){return e&&parseFloat(e.replace(",","."))||0}function y9(e){if(e==="Z")return 0;const t=e.match(h9);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return j9(r,i)?n*(r*KN+i*YN):NaN}function x9(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const w9=[31,null,31,30,31,30,31,31,30,31,30,31];function a6(e){return e%400===0||e%4===0&&e%100!==0}function b9(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(w9[t]||(a6(e)?29:28))}function _9(e,t){return t>=1&&t<=(a6(e)?366:365)}function S9(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function N9(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function j9(e,t){return t>=0&&t<=59}function Lv(e,t){const n=hn(e),r=n.getFullYear(),i=n.getDate(),s=hs(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const a=a9(s);return n.setMonth(t,Math.min(i,a)),n}function j_(e,t){const n=hn(e);return isNaN(+n)?hs(e,NaN):(n.setFullYear(t),n)}function Vm(e,t){return oa(e,-t)}const k9={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},E9=(e,t,n)=>{let r;const i=k9[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},C9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},A9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},L9={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P9={date:df({formats:C9,defaultWidth:"full"}),time:df({formats:A9,defaultWidth:"full"}),dateTime:df({formats:L9,defaultWidth:"full"})},T9={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},M9={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},D9=(e,t,n,r)=>t.getHours()!==1?M9[e]:T9[e],I9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},O9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},R9={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},F9={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},$9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},B9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},U9=(e,t)=>Number(e)+"",z9={ordinalNumber:U9,era:fo({values:I9,defaultWidth:"wide"}),quarter:fo({values:O9,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:fo({values:R9,defaultWidth:"wide"}),day:fo({values:F9,defaultWidth:"wide"}),dayPeriod:fo({values:$9,defaultWidth:"wide",formattingValues:B9,defaultFormattingWidth:"wide"})},q9=/^(\d+)()?/i,W9=/\d+/i,H9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},V9={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},G9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Y9={any:[/1/i,/2/i,/3/i,/4/i]},K9={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},J9={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},X9={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},Q9={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Z9={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},eF={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},tF={ordinalNumber:ZN({matchPattern:q9,parsePattern:W9,valueCallback:function(e){return parseInt(e,10)}}),era:ho({matchPatterns:H9,defaultMatchWidth:"wide",parsePatterns:V9,defaultParseWidth:"any"}),quarter:ho({matchPatterns:G9,defaultMatchWidth:"wide",parsePatterns:Y9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:K9,defaultMatchWidth:"wide",parsePatterns:J9,defaultParseWidth:"any"}),day:ho({matchPatterns:X9,defaultMatchWidth:"wide",parsePatterns:Q9,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:Z9,defaultMatchWidth:"any",parsePatterns:eF,defaultParseWidth:"any"})},co={code:"es",formatDistance:E9,formatLong:P9,formatRelative:D9,localize:z9,match:tF,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Ft=function(){return Ft=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ft.apply(this,arguments)};function nF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function o6(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Ip(e){return e.mode==="multiple"}function Op(e){return e.mode==="range"}function Yg(e){return e.mode==="single"}var rF={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function iF(e,t){return Kt(e,"LLLL y",t)}function sF(e,t){return Kt(e,"d",t)}function aF(e,t){return Kt(e,"LLLL",t)}function oF(e){return"".concat(e)}function lF(e,t){return Kt(e,"cccccc",t)}function cF(e,t){return Kt(e,"yyyy",t)}var uF=Object.freeze({__proto__:null,formatCaption:iF,formatDay:sF,formatMonthCaption:aF,formatWeekNumber:oF,formatWeekdayName:lF,formatYearCaption:cF}),dF=function(e,t,n){return Kt(e,"do MMMM (EEEE)",n)},fF=function(){return"Month: "},hF=function(){return"Go to next month"},pF=function(){return"Go to previous month"},mF=function(e,t){return Kt(e,"cccc",t)},gF=function(e){return"Week n. ".concat(e)},vF=function(){return"Year: "},yF=Object.freeze({__proto__:null,labelDay:dF,labelMonthDropdown:fF,labelNext:hF,labelPrevious:pF,labelWeekNumber:gF,labelWeekday:mF,labelYearDropdown:vF});function xF(){var e="buttons",t=rF,n=e6,r={},i={},s=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:uF,labels:yF,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:l,mode:"default"}}function wF(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,s=e.fromDate,a=e.toDate;return r?s=di(r):t&&(s=new Date(t,0,1)),i?a=Ef(i):n&&(a=new Date(n,11,31)),{fromDate:s?Mc(s):void 0,toDate:a?Mc(a):void 0}}var l6=k.createContext(void 0);function bF(e){var t,n=e.initialProps,r=xF(),i=wF(n),s=i.fromDate,a=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!a)&&(l="buttons");var c;(Yg(n)||Ip(n)||Op(n))&&(c=n.onSelect);var f=Ft(Ft(Ft({},r),n),{captionLayout:l,classNames:Ft(Ft({},r.classNames),n.classNames),components:Ft({},n.components),formatters:Ft(Ft({},r.formatters),n.formatters),fromDate:s,labels:Ft(Ft({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ft(Ft({},r.modifiers),n.modifiers),modifiersClassNames:Ft(Ft({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Ft(Ft({},r.styles),n.styles),toDate:a});return d.jsx(l6.Provider,{value:f,children:e.children})}function Vn(){var e=k.useContext(l6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function c6(e){var t=Vn(),n=t.locale,r=t.classNames,i=t.styles,s=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function _F(e){return d.jsx("svg",Ft({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function u6(e){var t,n,r=e.onChange,i=e.value,s=e.children,a=e.caption,l=e.className,c=e.style,f=Vn(),p=(n=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:_F;return d.jsxs("div",{className:l,style:c,children:[d.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:i,onChange:r,children:s}),d.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[a,d.jsx(p,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function SF(e){var t,n=Vn(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,f=n.components,p=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});var m=[];if(u9(r,i))for(var x=di(r),g=r.getMonth();g<=i.getMonth();g++)m.push(Lv(x,g));else for(var x=di(new Date),g=0;g<=11;g++)m.push(Lv(x,g));var N=function(E){var b=Number(E.target.value),S=Lv(di(e.displayMonth),b);e.onChange(S)},j=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:u6;return d.jsx(j,{name:"months","aria-label":p(),className:c.dropdown_month,style:s.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(E){return d.jsx("option",{value:E.getMonth(),children:l(E,{locale:a})},E.getMonth())})})}function NF(e){var t,n=e.displayMonth,r=Vn(),i=r.fromDate,s=r.toDate,a=r.locale,l=r.styles,c=r.classNames,f=r.components,p=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,x=[];if(!i)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});for(var g=i.getFullYear(),N=s.getFullYear(),j=g;j<=N;j++)x.push(j_(XN(new Date),j));var E=function(S){var A=j_(di(n),Number(S.target.value));e.onChange(A)},b=(t=f==null?void 0:f.Dropdown)!==null&&t!==void 0?t:u6;return d.jsx(b,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:E,value:n.getFullYear(),caption:p(n,{locale:a}),children:x.map(function(S){return d.jsx("option",{value:S.getFullYear(),children:p(S,{locale:a})},S.getFullYear())})})}function jF(e,t){var n=k.useState(e),r=n[0],i=n[1],s=t===void 0?r:t;return[s,i]}function kF(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,s=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&yp(s,i)<0){var f=-1*(c-1);i=oa(s,f)}return a&&yp(i,a)<0&&(i=a),di(i)}function EF(){var e=Vn(),t=kF(e),n=jF(t,e.month),r=n[0],i=n[1],s=function(a){var l;if(!e.disableNavigation){var c=di(a);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function CF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=di(e),s=di(oa(i,r)),a=yp(s,i),l=[],c=0;c<a;c++){var f=oa(i,c);l.push(f)}return n&&(l=l.reverse()),l}function AF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=di(e);if(!n)return oa(l,a);var c=yp(n,e);if(!(c<s))return oa(l,a)}}function LF(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,a=r?s:1,l=di(e);if(!n)return oa(l,-a);var c=yp(l,n);if(!(c<=0))return oa(l,-a)}}var d6=k.createContext(void 0);function PF(e){var t=Vn(),n=EF(),r=n[0],i=n[1],s=CF(r,t),a=AF(r,t),l=LF(r,t),c=function(m){return s.some(function(x){return q5(m,x)})},f=function(m,x){c(m)||(x&&s6(m,x)?i(oa(m,1+t.numberOfMonths*-1)):i(m))},p={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:f,previousMonth:l,nextMonth:a,isDateDisplayed:c};return d.jsx(d6.Provider,{value:p,children:e.children})}function Rp(){var e=k.useContext(d6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function k_(e){var t,n=Vn(),r=n.classNames,i=n.styles,s=n.components,a=Rp().goToMonth,l=function(p){a(oa(p,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:c6,f=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:f}),d.jsx(SF,{onChange:l,displayMonth:e.displayMonth}),d.jsx(NF,{onChange:l,displayMonth:e.displayMonth})]})}function TF(e){return d.jsx("svg",Ft({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function MF(e){return d.jsx("svg",Ft({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var tg=k.forwardRef(function(e,t){var n=Vn(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var a=s.join(" "),l=Ft(Ft({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),d.jsx("button",Ft({},e,{ref:t,type:"button",className:a,style:l}))});function DF(e){var t,n,r=Vn(),i=r.dir,s=r.locale,a=r.classNames,l=r.styles,c=r.labels,f=c.labelPrevious,p=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var x=f(e.previousMonth,{locale:s}),g=[a.nav_button,a.nav_button_previous].join(" "),N=p(e.nextMonth,{locale:s}),j=[a.nav_button,a.nav_button_next].join(" "),E=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:MF,b=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:TF;return d.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&d.jsx(tg,{name:"previous-month","aria-label":x,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?d.jsx(E,{className:a.nav_icon,style:l.nav_icon}):d.jsx(b,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&d.jsx(tg,{name:"next-month","aria-label":N,className:j,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?d.jsx(b,{className:a.nav_icon,style:l.nav_icon}):d.jsx(E,{className:a.nav_icon,style:l.nav_icon})})]})}function E_(e){var t=Vn().numberOfMonths,n=Rp(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(N){return q5(e.displayMonth,N)}),c=l===0,f=l===a.length-1,p=t>1&&(c||!f),m=t>1&&(f||!c),x=function(){r&&s(r)},g=function(){i&&s(i)};return d.jsx(DF,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:x,onNextClick:g})}function IF(e){var t,n=Vn(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:c6,f;return i?f=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?f=d.jsx(k_,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?f=d.jsxs(d.Fragment,{children:[d.jsx(k_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(E_,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(E_,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:s.caption,children:f})}function OF(e){var t=Vn(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?d.jsx("tfoot",{className:i,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function RF(e,t,n){for(var r=n?Wu(new Date):xo(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var a=$i(r,s);i.push(a)}return i}function FF(){var e=Vn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,f=RF(i,s,a);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),f.map(function(p,m){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:l(p,{locale:i})},m)})]})}function $F(){var e,t=Vn(),n=t.classNames,r=t.styles,i=t.components,s=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:FF;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(s,{})})}function BF(e){var t=Vn(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var W5=k.createContext(void 0);function UF(e){if(!Ip(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx(W5.Provider,{value:t,children:e.children})}return d.jsx(zF,{initialProps:e.initialProps,children:e.children})}function zF(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,s=t.max,a=function(f,p,m){var x,g;(x=t.onDayClick)===null||x===void 0||x.call(t,f,p,m);var N=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var j=!!(!p.selected&&s&&(r==null?void 0:r.length)===s);if(!j){var E=r?o6([],r):[];if(p.selected){var b=E.findIndex(function(S){return _r(f,S)});E.splice(b,1)}else E.push(f);(g=t.onSelect)===null||g===void 0||g.call(t,E,f,p,m)}}},l={disabled:[]};r&&l.disabled.push(function(f){var p=s&&r.length>s-1,m=r.some(function(x){return _r(x,f)});return!!(p&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return d.jsx(W5.Provider,{value:c,children:n})}function H5(){var e=k.useContext(W5);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function qF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?_r(i,e)&&_r(r,e)?void 0:_r(i,e)?{from:i,to:void 0}:_r(r,e)?void 0:ff(r,e)?{from:e,to:i}:{from:r,to:e}:i?ff(e,i)?{from:i,to:e}:{from:e,to:i}:r?s6(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var V5=k.createContext(void 0);function WF(e){if(!Op(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(V5.Provider,{value:t,children:e.children})}return d.jsx(HF,{initialProps:e.initialProps,children:e.children})}function HF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},s=i.from,a=i.to,l=t.min,c=t.max,f=function(g,N,j){var E,b;(E=t.onDayClick)===null||E===void 0||E.call(t,g,N,j);var S=qF(g,r);(b=t.onSelect)===null||b===void 0||b.call(t,S,g,N,j)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(p.range_start=[s],a?(p.range_end=[a],_r(s,a)||(p.range_middle=[{after:s,before:a}])):p.range_end=[s]):a&&(p.range_start=[a],p.range_end=[a]),l&&(s&&!a&&p.disabled.push({after:Cv(s,l-1),before:$i(s,l-1)}),s&&a&&p.disabled.push({after:s,before:$i(s,l-1)}),!s&&a&&p.disabled.push({after:Cv(a,l-1),before:$i(a,l-1)})),c){if(s&&!a&&(p.disabled.push({before:$i(s,-c+1)}),p.disabled.push({after:$i(s,c-1)})),s&&a){var m=po(a,s)+1,x=c-m;p.disabled.push({before:Cv(s,x)}),p.disabled.push({after:$i(a,x)})}!s&&a&&(p.disabled.push({before:$i(a,-c+1)}),p.disabled.push({after:$i(a,c-1)}))}return d.jsx(V5.Provider,{value:{selected:r,onDayClick:f,modifiers:p},children:n})}function G5(){var e=k.useContext(V5);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function m0(e){return Array.isArray(e)?o6([],e):e!==void 0?[e]:[]}function VF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=m0(i)}),t}var Fa;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Fa||(Fa={}));var GF=Fa.Selected,Vo=Fa.Disabled,YF=Fa.Hidden,KF=Fa.Today,Pv=Fa.RangeEnd,Tv=Fa.RangeMiddle,Mv=Fa.RangeStart,JF=Fa.Outside;function XF(e,t,n){var r,i=(r={},r[GF]=m0(e.selected),r[Vo]=m0(e.disabled),r[YF]=m0(e.hidden),r[KF]=[e.today],r[Pv]=[],r[Tv]=[],r[Mv]=[],r[JF]=[],r);return e.fromDate&&i[Vo].push({before:e.fromDate}),e.toDate&&i[Vo].push({after:e.toDate}),Ip(e)?i[Vo]=i[Vo].concat(t.modifiers[Vo]):Op(e)&&(i[Vo]=i[Vo].concat(n.modifiers[Vo]),i[Mv]=n.modifiers[Mv],i[Tv]=n.modifiers[Tv],i[Pv]=n.modifiers[Pv]),i}var f6=k.createContext(void 0);function QF(e){var t=Vn(),n=H5(),r=G5(),i=XF(t,n,r),s=VF(t.modifiers),a=Ft(Ft({},i),s);return d.jsx(f6.Provider,{value:a,children:e.children})}function h6(){var e=k.useContext(f6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function ZF(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function e$(e){return!!(e&&typeof e=="object"&&"from"in e)}function t$(e){return!!(e&&typeof e=="object"&&"after"in e)}function n$(e){return!!(e&&typeof e=="object"&&"before"in e)}function r$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function i$(e,t){var n,r=t.from,i=t.to;if(r&&i){var s=po(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=po(e,r)>=0&&po(i,e)>=0;return a}return i?_r(i,e):r?_r(r,e):!1}function s$(e){return U5(e)}function a$(e){return Array.isArray(e)&&e.every(U5)}function o$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(s$(n))return _r(e,n);if(a$(n))return n.includes(e);if(e$(n))return i$(e,n);if(r$(n))return n.dayOfWeek.includes(e.getDay());if(ZF(n)){var r=po(n.before,e),i=po(n.after,e),s=r>0,a=i<0,l=ff(n.before,n.after);return l?a&&s:s||a}return t$(n)?po(e,n.after)>0:n$(n)?po(n.before,e)>0:typeof n=="function"?n(e):!1})}function Y5(e,t,n){var r=Object.keys(t).reduce(function(s,a){var l=t[a];return o$(e,l)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!q5(e,n)&&(i.outside=!0),i}function l$(e,t){for(var n=di(e[0]),r=Ef(e[e.length-1]),i,s,a=n;a<=r;){var l=Y5(a,t),c=!l.disabled&&!l.hidden;if(!c){a=$i(a,1);continue}if(l.selected)return a;l.today&&!s&&(s=a),i||(i=a),a=$i(a,1)}return s||i}var c$=365;function p6(e,t){var n=t.moveBy,r=t.direction,i=t.context,s=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=i.weekStartsOn,f=i.fromDate,p=i.toDate,m=i.locale,x={day:$i,week:dy,month:oa,year:aR,startOfWeek:function(E){return i.ISOWeek?Wu(E):xo(E,{locale:m,weekStartsOn:c})},endOfWeek:function(E){return i.ISOWeek?QN(E):z5(E,{locale:m,weekStartsOn:c})}},g=x[n](e,r==="after"?1:-1);r==="before"&&f?g=oR([f,g]):r==="after"&&p&&(g=lR([p,g]));var N=!0;if(s){var j=Y5(g,s);N=!j.disabled&&!j.hidden}return N?g:l.count>c$?l.lastFocused:p6(g,{moveBy:n,direction:r,context:i,modifiers:s,retry:Ft(Ft({},l),{count:l.count+1})})}var m6=k.createContext(void 0);function u$(e){var t=Rp(),n=h6(),r=k.useState(),i=r[0],s=r[1],a=k.useState(),l=a[0],c=a[1],f=l$(t.displayMonths,n),p=i??(l&&t.isDateDisplayed(l))?l:f,m=function(){c(i),s(void 0)},x=function(E){s(E)},g=Vn(),N=function(E,b){if(i){var S=p6(i,{moveBy:E,direction:b,context:g,modifiers:n});_r(i,S)||(t.goToDate(S,i),x(S))}},j={focusedDay:i,focusTarget:p,blur:m,focus:x,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return d.jsx(m6.Provider,{value:j,children:e.children})}function K5(){var e=k.useContext(m6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function d$(e,t){var n=h6(),r=Y5(e,n,t);return r}var J5=k.createContext(void 0);function f$(e){if(!Yg(e.initialProps)){var t={selected:void 0};return d.jsx(J5.Provider,{value:t,children:e.children})}return d.jsx(h$,{initialProps:e.initialProps,children:e.children})}function h$(e){var t=e.initialProps,n=e.children,r=function(s,a,l){var c,f,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,a,l),a.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,s,a,l);return}(p=t.onSelect)===null||p===void 0||p.call(t,s,s,a,l)},i={selected:t.selected,onDayClick:r};return d.jsx(J5.Provider,{value:i,children:n})}function g6(){var e=k.useContext(J5);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function p$(e,t){var n=Vn(),r=g6(),i=H5(),s=G5(),a=K5(),l=a.focusDayAfter,c=a.focusDayBefore,f=a.focusWeekAfter,p=a.focusWeekBefore,m=a.blur,x=a.focus,g=a.focusMonthBefore,N=a.focusMonthAfter,j=a.focusYearBefore,E=a.focusYearAfter,b=a.focusStartOfWeek,S=a.focusEndOfWeek,A=function(X){var F,z,oe,Le;Yg(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,X):Ip(n)?(z=i.onDayClick)===null||z===void 0||z.call(i,e,t,X):Op(n)?(oe=s.onDayClick)===null||oe===void 0||oe.call(s,e,t,X):(Le=n.onDayClick)===null||Le===void 0||Le.call(n,e,t,X)},O=function(X){var F;x(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,X)},G=function(X){var F;m(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,X)},ie=function(X){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,X)},q=function(X){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,X)},M=function(X){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,X)},re=function(X){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,X)},ae=function(X){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,X)},R=function(X){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,X)},U=function(X){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,X)},Y=function(X){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,X)},K=function(X){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,X)},xe=function(X){var F;switch(X.key){case"ArrowLeft":X.preventDefault(),X.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":X.preventDefault(),X.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":X.preventDefault(),X.stopPropagation(),f();break;case"ArrowUp":X.preventDefault(),X.stopPropagation(),p();break;case"PageUp":X.preventDefault(),X.stopPropagation(),X.shiftKey?j():g();break;case"PageDown":X.preventDefault(),X.stopPropagation(),X.shiftKey?E():N();break;case"Home":X.preventDefault(),X.stopPropagation(),b();break;case"End":X.preventDefault(),X.stopPropagation(),S();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,X)},me={onClick:A,onFocus:O,onBlur:G,onKeyDown:xe,onKeyUp:K,onMouseEnter:ie,onMouseLeave:q,onPointerEnter:M,onPointerLeave:re,onTouchCancel:ae,onTouchEnd:R,onTouchMove:U,onTouchStart:Y};return me}function m$(){var e=Vn(),t=g6(),n=H5(),r=G5(),i=Yg(e)?t.selected:Ip(e)?n.selected:Op(e)?r.selected:void 0;return i}function g$(e){return Object.values(Fa).includes(e)}function v$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(g$(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function y$(e,t){var n=Ft({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Ft(Ft({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function x$(e,t,n){var r,i,s,a=Vn(),l=K5(),c=d$(e,t),f=p$(e,c),p=m$(),m=!!(a.onDayClick||a.mode!=="default");k.useEffect(function(){var ie;c.outside||l.focusedDay&&m&&_r(l.focusedDay,e)&&((ie=n.current)===null||ie===void 0||ie.focus())},[l.focusedDay,e,n,m,c.outside]);var x=v$(a,c).join(" "),g=y$(a,c),N=!!(c.outside&&!a.showOutsideDays||c.hidden),j=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:BF,E=d.jsx(j,{date:e,displayMonth:t,activeModifiers:c}),b={style:g,className:x,children:E,role:"gridcell"},S=l.focusTarget&&_r(l.focusTarget,e)&&!c.outside,A=l.focusedDay&&_r(l.focusedDay,e),O=Ft(Ft(Ft({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=A||S?0:-1,r)),f),G={isButton:m,isHidden:N,activeModifiers:c,selectedDays:p,buttonProps:O,divProps:b};return G}function w$(e){var t=k.useRef(null),n=x$(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(tg,Ft({name:"day",ref:t},n.buttonProps)):d.jsx("div",Ft({},n.divProps))}function b$(e){var t=e.number,n=e.dates,r=Vn(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,f=r.formatters.formatWeekNumber,p=f(Number(t),{locale:l});if(!i)return d.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:p});var m=c(Number(t),{locale:l}),x=function(g){i(t,n,g)};return d.jsx(tg,{name:"week-number","aria-label":m,className:a.weeknumber,style:s.weeknumber,onClick:x,children:p})}function _$(e){var t,n,r=Vn(),i=r.styles,s=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:w$,f=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:b$,p;return a&&(p=d.jsx("td",{className:s.cell,style:i.cell,children:d.jsx(f,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:s.row,style:i.row,children:[p,e.dates.map(function(m){return d.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:m})},o9(m))})]})}function C_(e,t,n){for(var r=n!=null&&n.ISOWeek?QN(t):z5(t,n),i=n!=null&&n.ISOWeek?Wu(e):xo(e,n),s=po(r,i),a=[],l=0;l<=s;l++)a.push($i(i,l));var c=a.reduce(function(f,p){var m=n!=null&&n.ISOWeek?t6(p):r6(p,n),x=f.find(function(g){return g.weekNumber===m});return x?(x.dates.push(p),f):(f.push({weekNumber:m,dates:[p]}),f)},[]);return c}function S$(e,t){var n=C_(di(e),Ef(e),t);if(t!=null&&t.useFixedWeeks){var r=c9(e,t);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=dy(s,6-r),l=C_(dy(s,1),a,t);n.push.apply(n,l)}}return n}function N$(e){var t,n,r,i=Vn(),s=i.locale,a=i.classNames,l=i.styles,c=i.hideHead,f=i.fixedWeeks,p=i.components,m=i.weekStartsOn,x=i.firstWeekContainsDate,g=i.ISOWeek,N=S$(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:g,locale:s,weekStartsOn:m,firstWeekContainsDate:x}),j=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:$F,E=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:_$,b=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:OF;return d.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(j,{}),d.jsx("tbody",{className:a.tbody,style:l.tbody,children:N.map(function(S){return d.jsx(E,{displayMonth:e.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),d.jsx(b,{displayMonth:e.displayMonth})]})}function j$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var k$=j$()?k.useLayoutEffect:k.useEffect,Dv=!1,E$=0;function A_(){return"react-day-picker-".concat(++E$)}function C$(e){var t,n=e??(Dv?A_():null),r=k.useState(n),i=r[0],s=r[1];return k$(function(){i===null&&s(A_())},[]),k.useEffect(function(){Dv===!1&&(Dv=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function A$(e){var t,n,r=Vn(),i=r.dir,s=r.classNames,a=r.styles,l=r.components,c=Rp().displayMonths,f=C$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[s.month],x=a.month,g=e.displayIndex===0,N=e.displayIndex===c.length-1,j=!g&&!N;i==="rtl"&&(t=[g,N],N=t[0],g=t[1]),g&&(m.push(s.caption_start),x=Ft(Ft({},x),a.caption_start)),N&&(m.push(s.caption_end),x=Ft(Ft({},x),a.caption_end)),j&&(m.push(s.caption_between),x=Ft(Ft({},x),a.caption_between));var E=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:IF;return d.jsxs("div",{className:m.join(" "),style:x,children:[d.jsx(E,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(N$,{id:p,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function L$(e){var t=Vn(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function P$(e){var t,n,r=e.initialProps,i=Vn(),s=K5(),a=Rp(),l=k.useState(!1),c=l[0],f=l[1];k.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),f(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var m=Ft(Ft({},i.styles.root),i.style),x=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,j){var E;return Ft(Ft({},N),(E={},E[j]=r[j],E))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:L$;return d.jsx("div",Ft({className:p.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},x,{children:d.jsx(g,{children:a.displayMonths.map(function(N,j){return d.jsx(A$,{displayIndex:j,displayMonth:N},j)})})}))}function T$(e){var t=e.children,n=nF(e,["children"]);return d.jsx(bF,{initialProps:n,children:d.jsx(PF,{children:d.jsx(f$,{initialProps:n,children:d.jsx(UF,{initialProps:n,children:d.jsx(WF,{initialProps:n,children:d.jsx(QF,{children:d.jsx(u$,{children:t})})})})})})})}function M$(e){return d.jsx(T$,Ft({},e,{children:d.jsx(P$,{initialProps:e})}))}function An(e){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(e)}var Ei=Uint8Array,Is=Uint16Array,X5=Int32Array,Kg=new Ei([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jg=new Ei([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fy=new Ei([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v6=function(e,t){for(var n=new Is(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new X5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},y6=v6(Kg,2),x6=y6.b,hy=y6.r;x6[28]=258,hy[258]=28;var w6=v6(Jg,0),D$=w6.b,L_=w6.r,py=new Is(32768);for(var Kn=0;Kn<32768;++Kn){var tc=(Kn&43690)>>1|(Kn&21845)<<1;tc=(tc&52428)>>2|(tc&13107)<<2,tc=(tc&61680)>>4|(tc&3855)<<4,py[Kn]=((tc&65280)>>8|(tc&255)<<8)>>1}var yo=function(e,t,n){for(var r=e.length,i=0,s=new Is(t);i<r;++i)e[i]&&++s[e[i]-1];var a=new Is(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(n){l=new Is(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var f=i<<4|e[i],p=t-e[i],m=a[e[i]-1]++<<p,x=m|(1<<p)-1;m<=x;++m)l[py[m]>>c]=f}else for(l=new Is(r),i=0;i<r;++i)e[i]&&(l[i]=py[a[e[i]-1]++]>>15-e[i]);return l},Dc=new Ei(288);for(var Kn=0;Kn<144;++Kn)Dc[Kn]=8;for(var Kn=144;Kn<256;++Kn)Dc[Kn]=9;for(var Kn=256;Kn<280;++Kn)Dc[Kn]=7;for(var Kn=280;Kn<288;++Kn)Dc[Kn]=8;var xp=new Ei(32);for(var Kn=0;Kn<32;++Kn)xp[Kn]=5;var I$=yo(Dc,9,0),O$=yo(Dc,9,1),R$=yo(xp,5,0),F$=yo(xp,5,1),Iv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ja=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Ov=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Q5=function(e){return(e+7)/8|0},b6=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ei(e.subarray(t,n))},$$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Aa=function(e,t,n){var r=new Error(t||$$[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Aa),!n)throw r;return r},B$=function(e,t,n,r){var i=e.length,s=0;if(!i||t.f&&!t.l)return n||new Ei(0);var a=!n,l=a||t.i!=2,c=t.i;a&&(n=new Ei(i*3));var f=function(_e){var Re=n.length;if(_e>Re){var $e=new Ei(Math.max(Re*2,_e));$e.set(n),n=$e}},p=t.f||0,m=t.p||0,x=t.b||0,g=t.l,N=t.d,j=t.m,E=t.n,b=i*8;do{if(!g){p=ja(e,m,1);var S=ja(e,m+1,3);if(m+=3,S)if(S==1)g=O$,N=F$,j=9,E=5;else if(S==2){var ie=ja(e,m,31)+257,q=ja(e,m+10,15)+4,M=ie+ja(e,m+5,31)+1;m+=14;for(var re=new Ei(M),ae=new Ei(19),R=0;R<q;++R)ae[fy[R]]=ja(e,m+R*3,7);m+=q*3;for(var U=Iv(ae),Y=(1<<U)-1,K=yo(ae,U,1),R=0;R<M;){var xe=K[ja(e,m,Y)];m+=xe&15;var A=xe>>4;if(A<16)re[R++]=A;else{var me=0,X=0;for(A==16?(X=3+ja(e,m,3),m+=2,me=re[R-1]):A==17?(X=3+ja(e,m,7),m+=3):A==18&&(X=11+ja(e,m,127),m+=7);X--;)re[R++]=me}}var F=re.subarray(0,ie),z=re.subarray(ie);j=Iv(F),E=Iv(z),g=yo(F,j,1),N=yo(z,E,1)}else Aa(1);else{var A=Q5(m)+4,O=e[A-4]|e[A-3]<<8,G=A+O;if(G>i){c&&Aa(0);break}l&&f(x+O),n.set(e.subarray(A,G),x),t.b=x+=O,t.p=m=G*8,t.f=p;continue}if(m>b){c&&Aa(0);break}}l&&f(x+131072);for(var oe=(1<<j)-1,Le=(1<<E)-1,P=m;;P=m){var me=g[Ov(e,m)&oe],V=me>>4;if(m+=me&15,m>b){c&&Aa(0);break}if(me||Aa(2),V<256)n[x++]=V;else if(V==256){P=m,g=null;break}else{var ne=V-254;if(V>264){var R=V-257,le=Kg[R];ne=ja(e,m,(1<<le)-1)+x6[R],m+=le}var de=N[Ov(e,m)&Le],Ae=de>>4;de||Aa(3),m+=de&15;var z=D$[Ae];if(Ae>3){var le=Jg[Ae];z+=Ov(e,m)&(1<<le)-1,m+=le}if(m>b){c&&Aa(0);break}l&&f(x+131072);var Ee=x+ne;if(x<z){var Z=s-z,ke=Math.min(z,Ee);for(Z+x<0&&Aa(3);x<ke;++x)n[x]=r[Z+x]}for(;x<Ee;++x)n[x]=n[x-z]}}t.l=g,t.p=P,t.b=x,t.f=p,g&&(p=1,t.m=j,t.d=N,t.n=E)}while(!p);return x!=n.length&&a?b6(n,0,x):n.subarray(0,x)},Go=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Nh=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Rv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return{t:S6,l:0};if(i==1){var a=new Ei(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(G,ie){return G.f-ie.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],f=0,p=1,m=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=n[n[f].f<n[m].f?f++:m++],c=n[f!=p&&n[f].f<n[m].f?f++:m++],n[p++]={s:-1,f:l.f+c.f,l,r:c};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var g=new Is(x+1),N=my(n[p-1],g,0);if(N>t){var r=0,j=0,E=N-t,b=1<<E;for(s.sort(function(ie,q){return g[q.s]-g[ie.s]||ie.f-q.f});r<i;++r){var S=s[r].s;if(g[S]>t)j+=b-(1<<N-g[S]),g[S]=t;else break}for(j>>=E;j>0;){var A=s[r].s;g[A]<t?j-=1<<t-g[A]++-1:++r}for(;r>=0&&j;--r){var O=s[r].s;g[O]==t&&(--g[O],++j)}N=t}return{t:new Ei(g),l:N}},my=function(e,t,n){return e.s==-1?Math.max(my(e.l,t,n+1),my(e.r,t,n+1)):t[e.s]=n},P_=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Is(++t),r=0,i=e[0],s=1,a=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:n.subarray(0,r),n:t}},jh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},_6=function(e,t,n){var r=n.length,i=Q5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=n[s];return(i+4+r)*8},T_=function(e,t,n,r,i,s,a,l,c,f,p){Go(t,p++,n),++i[256];for(var m=Rv(i,15),x=m.t,g=m.l,N=Rv(s,15),j=N.t,E=N.l,b=P_(x),S=b.c,A=b.n,O=P_(j),G=O.c,ie=O.n,q=new Is(19),M=0;M<S.length;++M)++q[S[M]&31];for(var M=0;M<G.length;++M)++q[G[M]&31];for(var re=Rv(q,7),ae=re.t,R=re.l,U=19;U>4&&!ae[fy[U-1]];--U);var Y=f+5<<3,K=jh(i,Dc)+jh(s,xp)+a,xe=jh(i,x)+jh(s,j)+a+14+3*U+jh(q,ae)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&Y<=K&&Y<=xe)return _6(t,p,e.subarray(c,c+f));var me,X,F,z;if(Go(t,p,1+(xe<K)),p+=2,xe<K){me=yo(x,g,0),X=x,F=yo(j,E,0),z=j;var oe=yo(ae,R,0);Go(t,p,A-257),Go(t,p+5,ie-1),Go(t,p+10,U-4),p+=14;for(var M=0;M<U;++M)Go(t,p+3*M,ae[fy[M]]);p+=3*U;for(var Le=[S,G],P=0;P<2;++P)for(var V=Le[P],M=0;M<V.length;++M){var ne=V[M]&31;Go(t,p,oe[ne]),p+=ae[ne],ne>15&&(Go(t,p,V[M]>>5&127),p+=V[M]>>12)}}else me=I$,X=Dc,F=R$,z=xp;for(var M=0;M<l;++M){var le=r[M];if(le>255){var ne=le>>18&31;Nh(t,p,me[ne+257]),p+=X[ne+257],ne>7&&(Go(t,p,le>>23&31),p+=Kg[ne]);var de=le&31;Nh(t,p,F[de]),p+=z[de],de>3&&(Nh(t,p,le>>5&8191),p+=Jg[de])}else Nh(t,p,me[le]),p+=X[le]}return Nh(t,p,me[256]),p+X[256]},U$=new X5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),S6=new Ei(0),z$=function(e,t,n,r,i,s){var a=s.z||e.length,l=new Ei(r+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(r,l.length-i),f=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=U$[t-1],x=m>>13,g=m&8191,N=(1<<n)-1,j=s.p||new Is(32768),E=s.h||new Is(N+1),b=Math.ceil(n/3),S=2*b,A=function(Ge){return(e[Ge]^e[Ge+1]<<b^e[Ge+2]<<S)&N},O=new X5(25e3),G=new Is(288),ie=new Is(32),q=0,M=0,re=s.i||0,ae=0,R=s.w||0,U=0;re+2<a;++re){var Y=A(re),K=re&32767,xe=E[Y];if(j[K]=xe,E[Y]=K,R<=re){var me=a-re;if((q>7e3||ae>24576)&&(me>423||!f)){p=T_(e,c,0,O,G,ie,M,ae,U,re-U,p),ae=q=M=0,U=re;for(var X=0;X<286;++X)G[X]=0;for(var X=0;X<30;++X)ie[X]=0}var F=2,z=0,oe=g,Le=K-xe&32767;if(me>2&&Y==A(re-Le))for(var P=Math.min(x,me)-1,V=Math.min(32767,re),ne=Math.min(258,me);Le<=V&&--oe&&K!=xe;){if(e[re+F]==e[re+F-Le]){for(var le=0;le<ne&&e[re+le]==e[re+le-Le];++le);if(le>F){if(F=le,z=Le,le>P)break;for(var de=Math.min(Le,le-2),Ae=0,X=0;X<de;++X){var Ee=re-Le+X&32767,Z=j[Ee],ke=Ee-Z&32767;ke>Ae&&(Ae=ke,xe=Ee)}}}K=xe,xe=j[K],Le+=K-xe&32767}if(z){O[ae++]=268435456|hy[F]<<18|L_[z];var _e=hy[F]&31,Re=L_[z]&31;M+=Kg[_e]+Jg[Re],++G[257+_e],++ie[Re],R=re+F,++q}else O[ae++]=e[re],++G[e[re]]}}for(re=Math.max(re,R);re<a;++re)O[ae++]=e[re],++G[e[re]];p=T_(e,c,f,O,G,ie,M,ae,U,re-U,p),f||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=E,s.p=j,s.i=re,s.w=R)}else{for(var re=s.w||0;re<a+f;re+=65535){var $e=re+65535;$e>=a&&(c[p/8|0]=f,$e=a),p=_6(c,p+1,e.subarray(re,$e))}s.i=a}return b6(l,0,r+Q5(p)+i)},N6=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,s=n.length|0,a=0;a!=s;){for(var l=Math.min(a+2655,s);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},q$=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Ei(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return z$(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},j6=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},W$=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=N6();i.p(t.dictionary),j6(e,2,i.d())}},H$=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Aa(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Aa(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function gy(e,t){t||(t={});var n=N6();n.p(e);var r=q$(e,t,t.dictionary?6:2,4);return W$(r,t),j6(r,r.length-4,n.d()),r}function V$(e,t){return B$(e.subarray(H$(e,t),-4),{i:2},t,t)}var G$=typeof TextDecoder<"u"&&new TextDecoder,Y$=0;try{G$.decode(S6,{stream:!0}),Y$=1}catch{}var It=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Fv(){It.console&&typeof It.console.log=="function"&&It.console.log.apply(It.console,arguments)}var Fn={log:Fv,warn:function(e){It.console&&(typeof It.console.warn=="function"?It.console.warn.apply(It.console,arguments):Fv.call(null,arguments))},error:function(e){It.console&&(typeof It.console.error=="function"?It.console.error.apply(It.console,arguments):Fv(e))}};function $v(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Nu(r.response,t,n)},r.onerror=function(){Fn.error("could not download file")},r.send()}function M_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Gm(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Gh,vy,Nu=It.saveAs||((typeof window>"u"?"undefined":An(window))!=="object"||window!==It?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=It.URL||It.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?M_(i.href)?$v(e,t,n):Gm(i,i.target="_blank"):Gm(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Gm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(M_(e))$v(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Gm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:An(s)!=="object"&&(Fn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return $v(e,t,n);var i=e.type==="application/octet-stream",s=/constructor/i.test(It.HTMLElement)||It.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":An(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},l.readAsDataURL(e)}else{var c=It.URL||It.webkitURL,f=c.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function k6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,a=i.exec(e);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+l+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Bv(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n=_i(n,r,i,s,t[0],7,-680876936),s=_i(s,n,r,i,t[1],12,-389564586),i=_i(i,s,n,r,t[2],17,606105819),r=_i(r,i,s,n,t[3],22,-1044525330),n=_i(n,r,i,s,t[4],7,-176418897),s=_i(s,n,r,i,t[5],12,1200080426),i=_i(i,s,n,r,t[6],17,-1473231341),r=_i(r,i,s,n,t[7],22,-45705983),n=_i(n,r,i,s,t[8],7,1770035416),s=_i(s,n,r,i,t[9],12,-1958414417),i=_i(i,s,n,r,t[10],17,-42063),r=_i(r,i,s,n,t[11],22,-1990404162),n=_i(n,r,i,s,t[12],7,1804603682),s=_i(s,n,r,i,t[13],12,-40341101),i=_i(i,s,n,r,t[14],17,-1502002290),n=Si(n,r=_i(r,i,s,n,t[15],22,1236535329),i,s,t[1],5,-165796510),s=Si(s,n,r,i,t[6],9,-1069501632),i=Si(i,s,n,r,t[11],14,643717713),r=Si(r,i,s,n,t[0],20,-373897302),n=Si(n,r,i,s,t[5],5,-701558691),s=Si(s,n,r,i,t[10],9,38016083),i=Si(i,s,n,r,t[15],14,-660478335),r=Si(r,i,s,n,t[4],20,-405537848),n=Si(n,r,i,s,t[9],5,568446438),s=Si(s,n,r,i,t[14],9,-1019803690),i=Si(i,s,n,r,t[3],14,-187363961),r=Si(r,i,s,n,t[8],20,1163531501),n=Si(n,r,i,s,t[13],5,-1444681467),s=Si(s,n,r,i,t[2],9,-51403784),i=Si(i,s,n,r,t[7],14,1735328473),n=Ni(n,r=Si(r,i,s,n,t[12],20,-1926607734),i,s,t[5],4,-378558),s=Ni(s,n,r,i,t[8],11,-2022574463),i=Ni(i,s,n,r,t[11],16,1839030562),r=Ni(r,i,s,n,t[14],23,-35309556),n=Ni(n,r,i,s,t[1],4,-1530992060),s=Ni(s,n,r,i,t[4],11,1272893353),i=Ni(i,s,n,r,t[7],16,-155497632),r=Ni(r,i,s,n,t[10],23,-1094730640),n=Ni(n,r,i,s,t[13],4,681279174),s=Ni(s,n,r,i,t[0],11,-358537222),i=Ni(i,s,n,r,t[3],16,-722521979),r=Ni(r,i,s,n,t[6],23,76029189),n=Ni(n,r,i,s,t[9],4,-640364487),s=Ni(s,n,r,i,t[12],11,-421815835),i=Ni(i,s,n,r,t[15],16,530742520),n=ji(n,r=Ni(r,i,s,n,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ji(s,n,r,i,t[7],10,1126891415),i=ji(i,s,n,r,t[14],15,-1416354905),r=ji(r,i,s,n,t[5],21,-57434055),n=ji(n,r,i,s,t[12],6,1700485571),s=ji(s,n,r,i,t[3],10,-1894986606),i=ji(i,s,n,r,t[10],15,-1051523),r=ji(r,i,s,n,t[1],21,-2054922799),n=ji(n,r,i,s,t[8],6,1873313359),s=ji(s,n,r,i,t[15],10,-30611744),i=ji(i,s,n,r,t[6],15,-1560198380),r=ji(r,i,s,n,t[13],21,1309151649),n=ji(n,r,i,s,t[4],6,-145523070),s=ji(s,n,r,i,t[11],10,-1120210379),i=ji(i,s,n,r,t[2],15,718787259),r=ji(r,i,s,n,t[9],21,-343485551),e[0]=xc(n,e[0]),e[1]=xc(r,e[1]),e[2]=xc(i,e[2]),e[3]=xc(s,e[3])}function Xg(e,t,n,r,i,s){return t=xc(xc(t,e),xc(r,s)),xc(t<<i|t>>>32-i,n)}function _i(e,t,n,r,i,s,a){return Xg(t&n|~t&r,e,t,i,s,a)}function Si(e,t,n,r,i,s,a){return Xg(t&r|n&~r,e,t,i,s,a)}function Ni(e,t,n,r,i,s,a){return Xg(t^n^r,e,t,i,s,a)}function ji(e,t,n,r,i,s,a){return Xg(n^(t|~r),e,t,i,s,a)}function E6(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Bv(r,K$(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Bv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Bv(r,i),r}function K$(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Gh=It.atob.bind(It),vy=It.btoa.bind(It);var D_="0123456789abcdef".split("");function J$(e){for(var t="",n=0;n<4;n++)t+=D_[e>>8*n+4&15]+D_[e>>8*n&15];return t}function X$(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function yy(e){return E6(e).map(X$).join("")}var Q$=function(e){for(var t=0;t<e.length;t++)e[t]=J$(e[t]);return e.join("")}(E6("hello"))!="5d41402abc4b2a76b9719d911017c592";function xc(e,t){if(Q$){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function xy(e,t){var n,r,i,s;if(e!==n){for(var a=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var f=0;for(c=0;c<256;c++){var p=l[c];f=(f+p+a.charCodeAt(c))%256,l[c]=l[f],l[f]=p}n=e,r=l}else l=r;var m=t.length,x=0,g=0,N="";for(c=0;c<m;c++)g=(g+(p=l[x=(x+1)%256]))%256,l[x]=l[g],l[g]=p,a=l[(l[x]+l[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^a);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var I_={print:4,modify:8,copy:16,"annot-forms":32};function zd(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(I_.perm!==void 0)throw new Error("Invalid permission: "+l);i+=I_[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=yy(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=xy(this.encryptionKey,this.padding)}function qd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function O_(e){if(An(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var s=Math.random().toString(35);return t[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[n]){var a=t[n][s];try{a[0].apply(e,r)}catch(l){It.console&&Fn.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ng(e){if(!(this instanceof ng))return new ng(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function C6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Eu(e,t,n,r,i){if(!(this instanceof Eu))return new Eu(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,C6.call(this,r,i)}function nf(e,t,n,r,i){if(!(this instanceof nf))return new nf(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,C6.call(this,r,i)}function Dt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],l=1,c=16,f="S",p=null;An(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),f=e.defaultPathOperation||"S"),a=e.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var m=e.putOnlyUsedFonts||!1,x={},g={internal:{},__private__:{}};g.__private__.PubSub=O_;var N="1.3",j=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(w){N=w};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var b=g.__private__.getPageFormat=function(w){return E[w]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},A=S.COMPAT;function O(){this.saveGraphicsState(),ee(new gt(Ue,0,0,-Ue,0,Hs()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),f="n",A=S.ADVANCED}function G(){this.restoreGraphicsState(),f="S",A=S.COMPAT}var ie=g.__private__.combineFontStyleAndFontWeight=function(w,D){if(w=="bold"&&D=="normal"||w=="bold"&&D==400||w=="normal"&&D=="italic"||w=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(w=D==400||D==="normal"?w==="italic"?"italic":"normal":D!=700&&D!=="bold"||w!=="normal"?(D==700?"bold":D)+""+w:"bold"),w};g.advancedAPI=function(w){var D=A===S.COMPAT;return D&&O.call(this),typeof w!="function"||(w(this),D&&G.call(this)),this},g.compatAPI=function(w){var D=A===S.ADVANCED;return D&&G.call(this),typeof w!="function"||(w(this),D&&O.call(this)),this},g.isAdvancedAPI=function(){return A===S.ADVANCED};var q,M=function(w){if(A!==S.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},re=g.roundToPrecision=g.__private__.roundToPrecision=function(w,D){var se=t||D;if(isNaN(w)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(se).replace(/0+$/,"")};q=g.hpf=g.__private__.hpf=typeof c=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return re(w,c)}:c==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return re(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return re(w,16)};var ae=g.f2=g.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return re(w,2)},R=g.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return re(w,3)},U=g.scale=g.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return A===S.COMPAT?w*Ue:A===S.ADVANCED?w:void 0},Y=function(w){return A===S.COMPAT?Hs()-w:A===S.ADVANCED?w:void 0},K=function(w){return U(Y(w))};g.__private__.setPrecision=g.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(t=parseInt(w,10))};var xe,me="00000000000000000000000000000000",X=g.__private__.getFileId=function(){return me},F=g.__private__.setFileId=function(w){return me=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Wr=new zd(p.userPermissions,p.userPassword,p.ownerPassword,me)),me};g.setFileId=function(w){return F(w),this},g.getFileId=function(){return X()};var z=g.__private__.convertDateToPDFDate=function(w){var D=w.getTimezoneOffset(),se=D<0?"+":"-",pe=Math.floor(Math.abs(D/60)),Me=Math.abs(D%60),ze=[se,ne(pe),"'",ne(Me),"'"].join("");return["D:",w.getFullYear(),ne(w.getMonth()+1),ne(w.getDate()),ne(w.getHours()),ne(w.getMinutes()),ne(w.getSeconds()),ze].join("")},oe=g.__private__.convertPDFDateToDate=function(w){var D=parseInt(w.substr(2,4),10),se=parseInt(w.substr(6,2),10)-1,pe=parseInt(w.substr(8,2),10),Me=parseInt(w.substr(10,2),10),ze=parseInt(w.substr(12,2),10),tt=parseInt(w.substr(14,2),10);return new Date(D,se,pe,Me,ze,tt,0)},Le=g.__private__.setCreationDate=function(w){var D;if(w===void 0&&(w=new Date),w instanceof Date)D=z(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=w}return xe=D},P=g.__private__.getCreationDate=function(w){var D=xe;return w==="jsDate"&&(D=oe(xe)),D};g.setCreationDate=function(w){return Le(w),this},g.getCreationDate=function(w){return P(w)};var V,ne=g.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},le=g.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},de=0,Ae=[],Ee=[],Z=0,ke=[],_e=[],Re=!1,$e=Ee,Ge=function(){de=0,Z=0,Ee=[],Ae=[],ke=[],Ai=Tn(),vs=Tn()};g.__private__.setCustomOutputDestination=function(w){Re=!0,$e=w};var fe=function(w){Re||($e=w)};g.__private__.resetCustomOutputDestination=function(){Re=!1,$e=Ee};var ee=g.__private__.out=function(w){return w=w.toString(),Z+=w.length+1,$e.push(w),$e},Xe=g.__private__.write=function(w){return ee(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},We=g.__private__.getArrayBuffer=function(w){for(var D=w.length,se=new ArrayBuffer(D),pe=new Uint8Array(se);D--;)pe[D]=w.charCodeAt(D);return se},He=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return He};var Ke=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(w){return Ke=A===S.ADVANCED?w/Ue:w,this};var be,ce=g.__private__.getFontSize=g.getFontSize=function(){return A===S.COMPAT?Ke:Ke*Ue},Ne=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(w){return Ne=w,this},g.__private__.getR2L=g.getR2L=function(){return Ne};var he,ve=g.__private__.setZoomMode=function(w){var D=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))be=w;else if(isNaN(w)){if(D.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');be=w}else be=parseInt(w,10)};g.__private__.getZoomMode=function(){return be};var rt,ot=g.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');he=w};g.__private__.getPageMode=function(){return he};var it=g.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');rt=w};g.__private__.getLayoutMode=function(){return rt},g.__private__.setDisplayMode=g.setDisplayMode=function(w,D,se){return ve(w),it(D),ot(se),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(w){if(Object.keys(Fe).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[w]},g.__private__.getDocumentProperties=function(){return Fe},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(w){for(var D in Fe)Fe.hasOwnProperty(D)&&w[D]&&(Fe[D]=w[D]);return this},g.__private__.setDocumentProperty=function(w,D){if(Object.keys(Fe).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[w]=D};var st,Ue,Ct,ut,Gt,jt={},At={},mn=[],Pt={},Qn={},Et={},or={},un=null,zt=0,bt=[],qt=new O_(g),wn=e.hotfixes||[],rn={},lr={},Rr=[],gt=function w(D,se,pe,Me,ze,tt){if(!(this instanceof w))return new w(D,se,pe,Me,ze,tt);isNaN(D)&&(D=1),isNaN(se)&&(se=0),isNaN(pe)&&(pe=0),isNaN(Me)&&(Me=1),isNaN(ze)&&(ze=0),isNaN(tt)&&(tt=0),this._matrix=[D,se,pe,Me,ze,tt]};Object.defineProperty(gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(w)},gt.prototype.multiply=function(w){var D=w.sx*this.sx+w.shy*this.shx,se=w.sx*this.shy+w.shy*this.sy,pe=w.shx*this.sx+w.sy*this.shx,Me=w.shx*this.shy+w.sy*this.sy,ze=w.tx*this.sx+w.ty*this.shx+this.tx,tt=w.tx*this.shy+w.ty*this.sy+this.ty;return new gt(D,se,pe,Me,ze,tt)},gt.prototype.decompose=function(){var w=this.sx,D=this.shy,se=this.shx,pe=this.sy,Me=this.tx,ze=this.ty,tt=Math.sqrt(w*w+D*D),pt=(w/=tt)*se+(D/=tt)*pe;se-=w*pt,pe-=D*pt;var kt=Math.sqrt(se*se+pe*pe);return pt/=kt,w*(pe/=kt)<D*(se/=kt)&&(w=-w,D=-D,pt=-pt,tt=-tt),{scale:new gt(tt,0,0,kt,0,0),translate:new gt(1,0,0,1,Me,ze),rotate:new gt(w,D,-D,w,0,0),skew:new gt(1,0,pt,1,0,0)}},gt.prototype.toString=function(w){return this.join(" ")},gt.prototype.inversed=function(){var w=this.sx,D=this.shy,se=this.shx,pe=this.sy,Me=this.tx,ze=this.ty,tt=1/(w*pe-D*se),pt=pe*tt,kt=-D*tt,Bt=-se*tt,Rt=w*tt;return new gt(pt,kt,Bt,Rt,-pt*Me-Bt*ze,-kt*Me-Rt*ze)},gt.prototype.applyToPoint=function(w){var D=w.x*this.sx+w.y*this.shx+this.tx,se=w.x*this.shy+w.y*this.sy+this.ty;return new $r(D,se)},gt.prototype.applyToRectangle=function(w){var D=this.applyToPoint(w),se=this.applyToPoint(new $r(w.x+w.w,w.y+w.h));return new Qc(D.x,D.y,se.x-D.x,se.y-D.y)},gt.prototype.clone=function(){var w=this.sx,D=this.shy,se=this.shx,pe=this.sy,Me=this.tx,ze=this.ty;return new gt(w,D,se,pe,Me,ze)},g.Matrix=gt;var Zn=g.matrixMult=function(w,D){return D.multiply(w)},cr=new gt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=cr;var Pn=function(w,D){if(!Qn[w]){var se=(D instanceof Eu?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);D.id=se,Qn[w]=se,Pt[se]=D,qt.publish("addPattern",D)}};g.ShadingPattern=Eu,g.TilingPattern=nf,g.addShadingPattern=function(w,D){return M("addShadingPattern()"),Pn(w,D),this},g.beginTilingPattern=function(w){M("beginTilingPattern()"),bs(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},g.endTilingPattern=function(w,D){M("endTilingPattern()"),D.stream=_e[V].join(`
`),Pn(w,D),qt.publish("endTilingPattern",D),Rr.pop().restore()};var On=g.__private__.newObject=function(){var w=Tn();return er(w,!0),w},Tn=g.__private__.newObjectDeferred=function(){return de++,Ae[de]=function(){return Z},de},er=function(w,D){return D=typeof D=="boolean"&&D,Ae[w]=Z,D&&ee(w+" 0 obj"),w},Wi=g.__private__.newAdditionalObject=function(){var w={objId:Tn(),content:""};return ke.push(w),w},Ai=Tn(),vs=Tn(),ys=g.__private__.decodeColorString=function(w){var D=w.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length===5&&(D[4]==="k"||D[4]==="K")&&(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var se=parseFloat(D[0]);D=[se,se,se,"r"]}for(var pe="#",Me=0;Me<3;Me++)pe+=("0"+Math.floor(255*parseFloat(D[Me])).toString(16)).slice(-2);return pe},xs=g.__private__.encodeColorString=function(w){var D;typeof w=="string"&&(w={ch1:w});var se=w.ch1,pe=w.ch2,Me=w.ch3,ze=w.ch4,tt=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var pt=new k6(se);if(pt.ok)se=pt.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var kt=parseInt(se.substr(1),16);se=kt>>16&255,pe=kt>>8&255,Me=255&kt}if(pe===void 0||ze===void 0&&se===pe&&pe===Me)if(typeof se=="string")D=se+" "+tt[0];else switch(w.precision){case 2:D=ae(se/255)+" "+tt[0];break;case 3:default:D=R(se/255)+" "+tt[0]}else if(ze===void 0||An(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return D=["1.","1.","1.",tt[1]].join(" ");if(typeof se=="string")D=[se,pe,Me,tt[1]].join(" ");else switch(w.precision){case 2:D=[ae(se/255),ae(pe/255),ae(Me/255),tt[1]].join(" ");break;default:case 3:D=[R(se/255),R(pe/255),R(Me/255),tt[1]].join(" ")}}else if(typeof se=="string")D=[se,pe,Me,ze,tt[2]].join(" ");else switch(w.precision){case 2:D=[ae(se),ae(pe),ae(Me),ae(ze),tt[2]].join(" ");break;case 3:default:D=[R(se),R(pe),R(Me),R(ze),tt[2]].join(" ")}return D},ws=g.__private__.getFilters=function(){return a},Hi=g.__private__.putStream=function(w){var D=(w=w||{}).data||"",se=w.filters||ws(),pe=w.alreadyAppliedFilters||[],Me=w.addLength1||!1,ze=D.length,tt=w.objectId,pt=function(Tr){return Tr};if(p!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(pt=Wr.encryptor(tt,0));var kt={};se===!0&&(se=["FlateEncode"]);var Bt=w.additionalKeyValues||[],Rt=(kt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(D,se):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(kt.data.length!==0&&(Bt.push({key:"Length",value:kt.data.length}),Me===!0&&Bt.push({key:"Length1",value:ze})),Rt.length!=0)if(Rt.split("/").length-1==1)Bt.push({key:"Filter",value:Rt});else{Bt.push({key:"Filter",value:"["+Rt+"]"});for(var tn=0;tn<Bt.length;tn+=1)if(Bt[tn].key==="DecodeParms"){for(var Bn=[],rr=0;rr<kt.reverseChain.split("/").length-1;rr+=1)Bn.push("null");Bn.push(Bt[tn].value),Bt[tn].value="["+Bn.join(" ")+"]"}}ee("<<");for(var ir=0;ir<Bt.length;ir++)ee("/"+Bt[ir].key+" "+Bt[ir].value);ee(">>"),kt.data.length!==0&&(ee("stream"),ee(pt(kt.data)),ee("endstream"))},Bs=g.__private__.putPage=function(w){var D=w.number,se=w.data,pe=w.objId,Me=w.contentsObjId;er(pe,!0),ee("<</Type /Page"),ee("/Parent "+w.rootDictionaryObjId+" 0 R"),ee("/Resources "+w.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(q(w.mediaBox.bottomLeftX))+" "+parseFloat(q(w.mediaBox.bottomLeftY))+" "+q(w.mediaBox.topRightX)+" "+q(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&ee("/CropBox ["+q(w.cropBox.bottomLeftX)+" "+q(w.cropBox.bottomLeftY)+" "+q(w.cropBox.topRightX)+" "+q(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&ee("/BleedBox ["+q(w.bleedBox.bottomLeftX)+" "+q(w.bleedBox.bottomLeftY)+" "+q(w.bleedBox.topRightX)+" "+q(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&ee("/TrimBox ["+q(w.trimBox.bottomLeftX)+" "+q(w.trimBox.bottomLeftY)+" "+q(w.trimBox.topRightX)+" "+q(w.trimBox.topRightY)+"]"),w.artBox!==null&&ee("/ArtBox ["+q(w.artBox.bottomLeftX)+" "+q(w.artBox.bottomLeftY)+" "+q(w.artBox.topRightX)+" "+q(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&ee("/UserUnit "+w.userUnit),qt.publish("putPage",{objId:pe,pageContext:bt[D],pageNumber:D,page:se}),ee("/Contents "+Me+" 0 R"),ee(">>"),ee("endobj");var ze=se.join(`
`);return A===S.ADVANCED&&(ze+=`
Q`),er(Me,!0),Hi({data:ze,filters:ws(),objectId:Me}),ee("endobj"),pe},No=g.__private__.putPages=function(){var w,D,se=[];for(w=1;w<=zt;w++)bt[w].objId=Tn(),bt[w].contentsObjId=Tn();for(w=1;w<=zt;w++)se.push(Bs({number:w,data:_e[w],objId:bt[w].objId,contentsObjId:bt[w].contentsObjId,mediaBox:bt[w].mediaBox,cropBox:bt[w].cropBox,bleedBox:bt[w].bleedBox,trimBox:bt[w].trimBox,artBox:bt[w].artBox,userUnit:bt[w].userUnit,rootDictionaryObjId:Ai,resourceDictionaryObjId:vs}));er(Ai,!0),ee("<</Type /Pages");var pe="/Kids [";for(D=0;D<zt;D++)pe+=se[D]+" 0 R ";ee(pe+"]"),ee("/Count "+zt),ee(">>"),ee("endobj"),qt.publish("postPutPages")},ul=function(w){qt.publish("putFont",{font:w,out:ee,newObject:On,putStream:Hi}),w.isAlreadyPutted!==!0&&(w.objectNumber=On(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+qd(w.postScriptName)),ee("/Subtype /Type1"),typeof w.encoding=="string"&&ee("/Encoding /"+w.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},dl=function(){for(var w in jt)jt.hasOwnProperty(w)&&(m===!1||m===!0&&x.hasOwnProperty(w))&&ul(jt[w])},fl=function(w){w.objectNumber=On();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[q(w.x),q(w.y),q(w.x+w.width),q(w.y+w.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var se=w.pages[1].join(`
`);Hi({data:se,additionalKeyValues:D,objectId:w.objectNumber}),ee("endobj")},da=function(){for(var w in rn)rn.hasOwnProperty(w)&&fl(rn[w])},Qu=function(w,D){var se,pe=[],Me=1/(D-1);for(se=0;se<1;se+=Me)pe.push(se);if(pe.push(1),w[0].offset!=0){var ze={offset:0,color:w[0].color};w.unshift(ze)}if(w[w.length-1].offset!=1){var tt={offset:1,color:w[w.length-1].color};w.push(tt)}for(var pt="",kt=0,Bt=0;Bt<pe.length;Bt++){for(se=pe[Bt];se>w[kt+1].offset;)kt++;var Rt=w[kt].offset,tn=(se-Rt)/(w[kt+1].offset-Rt),Bn=w[kt].color,rr=w[kt+1].color;pt+=le(Math.round((1-tn)*Bn[0]+tn*rr[0]).toString(16))+le(Math.round((1-tn)*Bn[1]+tn*rr[1]).toString(16))+le(Math.round((1-tn)*Bn[2]+tn*rr[2]).toString(16))}return pt.trim()},hl=function(w,D){D||(D=21);var se=On(),pe=Qu(w.colors,D),Me=[];Me.push({key:"FunctionType",value:"0"}),Me.push({key:"Domain",value:"[0.0 1.0]"}),Me.push({key:"Size",value:"["+D+"]"}),Me.push({key:"BitsPerSample",value:"8"}),Me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hi({data:pe,additionalKeyValues:Me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),ee("endobj"),w.objectNumber=On(),ee("<< /ShadingType "+w.type),ee("/ColorSpace /DeviceRGB");var ze="/Coords ["+q(parseFloat(w.coords[0]))+" "+q(parseFloat(w.coords[1]))+" ";w.type===2?ze+=q(parseFloat(w.coords[2]))+" "+q(parseFloat(w.coords[3])):ze+=q(parseFloat(w.coords[2]))+" "+q(parseFloat(w.coords[3]))+" "+q(parseFloat(w.coords[4]))+" "+q(parseFloat(w.coords[5])),ee(ze+="]"),w.matrix&&ee("/Matrix ["+w.matrix.toString()+"]"),ee("/Function "+se+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},$f=function(w,D){var se=Tn(),pe=On();D.push({resourcesOid:se,objectOid:pe}),w.objectNumber=pe;var Me=[];Me.push({key:"Type",value:"/Pattern"}),Me.push({key:"PatternType",value:"1"}),Me.push({key:"PaintType",value:"1"}),Me.push({key:"TilingType",value:"1"}),Me.push({key:"BBox",value:"["+w.boundingBox.map(q).join(" ")+"]"}),Me.push({key:"XStep",value:q(w.xStep)}),Me.push({key:"YStep",value:q(w.yStep)}),Me.push({key:"Resources",value:se+" 0 R"}),w.matrix&&Me.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Hi({data:w.stream,additionalKeyValues:Me,objectId:w.objectNumber}),ee("endobj")},pl=function(w){var D;for(D in Pt)Pt.hasOwnProperty(D)&&(Pt[D]instanceof Eu?hl(Pt[D]):Pt[D]instanceof nf&&$f(Pt[D],w))},Zu=function(w){for(var D in w.objectNumber=On(),ee("<<"),w)switch(D){case"opacity":ee("/ca "+ae(w[D]));break;case"stroke-opacity":ee("/CA "+ae(w[D]))}ee(">>"),ee("endobj")},ed=function(){var w;for(w in Et)Et.hasOwnProperty(w)&&Zu(Et[w])},ml=function(){for(var w in ee("/XObject <<"),rn)rn.hasOwnProperty(w)&&rn[w].objectNumber>=0&&ee("/"+w+" "+rn[w].objectNumber+" 0 R");qt.publish("putXobjectDict"),ee(">>")},td=function(){Wr.oid=On(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Wr.v),ee("/R "+Wr.r),ee("/U <"+Wr.toHexString(Wr.U)+">"),ee("/O <"+Wr.toHexString(Wr.O)+">"),ee("/P "+Wr.P),ee(">>"),ee("endobj")},nd=function(){for(var w in ee("/Font <<"),jt)jt.hasOwnProperty(w)&&(m===!1||m===!0&&x.hasOwnProperty(w))&&ee("/"+w+" "+jt[w].objectNumber+" 0 R");ee(">>")},Bf=function(){if(Object.keys(Pt).length>0){for(var w in ee("/Shading <<"),Pt)Pt.hasOwnProperty(w)&&Pt[w]instanceof Eu&&Pt[w].objectNumber>=0&&ee("/"+w+" "+Pt[w].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),ee(">>")}},gl=function(w){if(Object.keys(Pt).length>0){for(var D in ee("/Pattern <<"),Pt)Pt.hasOwnProperty(D)&&Pt[D]instanceof g.TilingPattern&&Pt[D].objectNumber>=0&&Pt[D].objectNumber<w&&ee("/"+D+" "+Pt[D].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),ee(">>")}},Uf=function(){if(Object.keys(Et).length>0){var w;for(w in ee("/ExtGState <<"),Et)Et.hasOwnProperty(w)&&Et[w].objectNumber>=0&&ee("/"+w+" "+Et[w].objectNumber+" 0 R");qt.publish("putGStateDict"),ee(">>")}},tr=function(w){er(w.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),nd(),Bf(),gl(w.objectOid),Uf(),ml(),ee(">>"),ee("endobj")},zc=function(){var w=[];dl(),ed(),da(),pl(w),qt.publish("putResources"),w.forEach(tr),tr({resourcesOid:vs,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources")},qc=function(){qt.publish("putAdditionalObjects");for(var w=0;w<ke.length;w++){var D=ke[w];er(D.objId,!0),ee(D.content),ee("endobj")}qt.publish("postPutAdditionalObjects")},vl=function(w){At[w.fontName]=At[w.fontName]||{},At[w.fontName][w.fontStyle]=w.id},Wc=function(w,D,se,pe,Me){var ze={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:w,fontName:D,fontStyle:se,encoding:pe,isStandardFont:Me||!1,metadata:{}};return qt.publish("addFont",{font:ze,instance:this}),jt[ze.id]=ze,vl(ze),ze.id},rd=function(w){for(var D=0,se=He.length;D<se;D++){var pe=Wc.call(this,w[D][0],w[D][1],w[D][2],He[D][3],!0);m===!1&&(x[pe]=!0);var Me=w[D][0].split("-");vl({id:pe,fontName:Me[0],fontStyle:Me[1]||""})}qt.publish("addFonts",{fonts:jt,dictionary:At})},hi=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(pe){var D=pe.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var se="Error in function "+D.split(`
`)[0].split("<")[0]+": "+pe.message;if(!It.console)throw new Error(se);It.console.error(se,pe),It.alert&&alert(se)}},w.foo.bar=w,w.foo},jo=function(w,D){var se,pe,Me,ze,tt,pt,kt,Bt,Rt;if(Me=(D=D||{}).sourceEncoding||"Unicode",tt=D.outputEncoding,(D.autoencode||tt)&&jt[st].metadata&&jt[st].metadata[Me]&&jt[st].metadata[Me].encoding&&(ze=jt[st].metadata[Me].encoding,!tt&&jt[st].encoding&&(tt=jt[st].encoding),!tt&&ze.codePages&&(tt=ze.codePages[0]),typeof tt=="string"&&(tt=ze[tt]),tt)){for(kt=!1,pt=[],se=0,pe=w.length;se<pe;se++)(Bt=tt[w.charCodeAt(se)])?pt.push(String.fromCharCode(Bt)):pt.push(w[se]),pt[se].charCodeAt(0)>>8&&(kt=!0);w=pt.join("")}for(se=w.length;kt===void 0&&se!==0;)w.charCodeAt(se-1)>>8&&(kt=!0),se--;if(!kt)return w;for(pt=D.noBOM?[]:[254,255],se=0,pe=w.length;se<pe;se++){if((Rt=(Bt=w.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Rt),pt.push(Bt-(Rt<<8))}return String.fromCharCode.apply(void 0,pt)},pi=g.__private__.pdfEscape=g.pdfEscape=function(w,D){return jo(w,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yl=g.__private__.beginPage=function(w){_e[++zt]=[],bt[zt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},id(zt),fe(_e[V])},Hc=function(w,D){var se,pe,Me;switch(n=D||n,typeof w=="string"&&(se=b(w.toLowerCase()),Array.isArray(se)&&(pe=se[0],Me=se[1])),Array.isArray(w)&&(pe=w[0]*Ue,Me=w[1]*Ue),isNaN(pe)&&(pe=i[0],Me=i[1]),(pe>14400||Me>14400)&&(Fn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Me=Math.min(14400,Me)),i=[pe,Me],n.substr(0,1)){case"l":Me>pe&&(i=[Me,pe]);break;case"p":pe>Me&&(i=[Me,pe])}yl(i),ud(Jc),ee(nr),Nl!==0&&ee(Nl+" J"),Fr!==0&&ee(Fr+" j"),qt.publish("addPage",{pageNumber:zt})},Vc=function(w){w>0&&w<=zt&&(_e.splice(w,1),bt.splice(w,1),zt--,V>zt&&(V=zt),this.setPage(V))},id=function(w){w>0&&w<=zt&&(V=w)},sd=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return _e.length-1},xl=function(w,D,se){var pe,Me=void 0;return se=se||{},w=w!==void 0?w:jt[st].fontName,D=D!==void 0?D:jt[st].fontStyle,pe=w.toLowerCase(),At[pe]!==void 0&&At[pe][D]!==void 0?Me=At[pe][D]:At[w]!==void 0&&At[w][D]!==void 0?Me=At[w][D]:se.disableWarning===!1&&Fn.warn("Unable to look up font label for font '"+w+"', '"+D+"'. Refer to getFontList() for available fonts."),Me||se.noFallback||(Me=At.times[D])==null&&(Me=At.times.normal),Me},Gc=g.__private__.putInfo=function(){var w=On(),D=function(pe){return pe};for(var se in p!==null&&(D=Wr.encryptor(w,0)),ee("<<"),ee("/Producer ("+pi(D("jsPDF "+Dt.version))+")"),Fe)Fe.hasOwnProperty(se)&&Fe[se]&&ee("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+pi(D(Fe[se]))+")");ee("/CreationDate ("+pi(D(xe))+")"),ee(">>"),ee("endobj")},Us=g.__private__.putCatalog=function(w){var D=(w=w||{}).rootDictionaryObjId||Ai;switch(On(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+D+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+be;se.substr(se.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+ae(be)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}he&&ee("/PageMode /"+he),qt.publish("putCatalog"),ee(">>"),ee("endobj")},ad=g.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(de+1)),ee("/Root "+de+" 0 R"),ee("/Info "+(de-1)+" 0 R"),p!==null&&ee("/Encrypt "+Wr.oid+" 0 R"),ee("/ID [ <"+me+"> <"+me+"> ]"),ee(">>")},od=g.__private__.putHeader=function(){ee("%PDF-"+N),ee("%")},zf=g.__private__.putXRef=function(){var w="0000000000";ee("xref"),ee("0 "+(de+1)),ee("0000000000 65535 f ");for(var D=1;D<=de;D++)typeof Ae[D]=="function"?ee((w+Ae[D]()).slice(-10)+" 00000 n "):Ae[D]!==void 0?ee((w+Ae[D]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},zs=g.__private__.buildDocument=function(){Ge(),fe(Ee),qt.publish("buildDocument"),od(),No(),qc(),zc(),p!==null&&td(),Gc(),Us();var w=Z;return zf(),ad(),ee("startxref"),ee(""+w),ee("%%EOF"),fe(_e[V]),Ee.join(`
`)},ko=g.__private__.getBlob=function(w){return new Blob([We(w)],{type:"application/pdf"})},Eo=g.output=g.__private__.output=hi(function(w,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",w){case void 0:return zs();case"save":g.save(D.filename);break;case"arraybuffer":return We(zs());case"blob":return ko(zs());case"bloburi":case"bloburl":if(It.URL!==void 0&&typeof It.URL.createObjectURL=="function")return It.URL&&It.URL.createObjectURL(ko(zs()))||void 0;Fn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",pe=zs();try{se=vy(pe)}catch{se=vy(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+D.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var Me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(Me=D.pdfObjectUrl,ze="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Me+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",pt=It.open();return pt!==null&&pt.document.write(tt),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(It)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',Bt=It.open();if(Bt!==null){Bt.document.write(kt);var Rt=this;Bt.document.documentElement.querySelector("#pdfViewer").onload=function(){Bt.document.title=D.filename,Bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rt.output("bloburl"))}}return Bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(It)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',Bn=It.open();if(Bn!==null&&(Bn.document.write(tn),Bn.document.title=D.filename),Bn||typeof safari>"u")return Bn;break;case"datauri":case"dataurl":return It.document.location.href=this.output("datauristring",D);default:return null}}),Yc=function(w){return Array.isArray(wn)===!0&&wn.indexOf(w)>-1};switch(r){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=Yc("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ue=r}var Wr=null;Le(),F();var qf=function(w){return p!==null?Wr.encryptor(w,0):function(D){return D}},ld=g.__private__.getPageInfo=g.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:bt[w].objId,pageNumber:w,pageContext:bt[w]}},Ot=g.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in bt)if(bt[D].objId===w)break;return ld(D)},Wf=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:bt[V].objId,pageNumber:V,pageContext:bt[V]}};g.addPage=function(){return Hc.apply(this,arguments),this},g.setPage=function(){return id.apply(this,arguments),fe.call(this,_e[V]),this},g.insertPage=function(w){return this.addPage(),this.movePage(V,w),this},g.movePage=function(w,D){var se,pe;if(w>D){se=_e[w],pe=bt[w];for(var Me=w;Me>D;Me--)_e[Me]=_e[Me-1],bt[Me]=bt[Me-1];_e[D]=se,bt[D]=pe,this.setPage(D)}else if(w<D){se=_e[w],pe=bt[w];for(var ze=w;ze<D;ze++)_e[ze]=_e[ze+1],bt[ze]=bt[ze+1];_e[D]=se,bt[D]=pe,this.setPage(D)}return this},g.deletePage=function(){return Vc.apply(this,arguments),this},g.__private__.text=g.text=function(w,D,se,pe,Me){var ze,tt,pt,kt,Bt,Rt,tn,Bn,rr,ir=(pe=pe||{}).scope||this;if(typeof w=="number"&&typeof D=="number"&&(typeof se=="string"||Array.isArray(se))){var Tr=se;se=D,D=w,w=Tr}if(arguments[3]instanceof gt?(M("The transform parameter of text() with a Matrix value"),rr=Me):(pt=arguments[4],kt=arguments[5],An(tn=arguments[3])==="object"&&tn!==null||(typeof pt=="string"&&(kt=pt,pt=null),typeof tn=="string"&&(kt=tn,tn=null),typeof tn=="number"&&(pt=tn,tn=null),pe={flags:tn,angle:pt,align:kt})),isNaN(D)||isNaN(se)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return ir;var Mr="",Yi=!1,Rn=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:Co,Ki=ir.internal.scaleFactor;function Ha(_n){return _n=_n.split("	").join(Array(pe.TabLen||9).join(" ")),pi(_n,tn)}function El(_n){for(var Mn,ur=_n.concat(),Sr=[],Qi=ur.length;Qi--;)typeof(Mn=ur.shift())=="string"?Sr.push(Mn):Array.isArray(_n)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?Sr.push(Mn[0]):Sr.push([Mn[0],Mn[1],Mn[2]]);return Sr}function Cl(_n,Mn){var ur;if(typeof _n=="string")ur=Mn(_n)[0];else if(Array.isArray(_n)){for(var Sr,Qi,Zi=_n.concat(),ma=[],nu=Zi.length;nu--;)typeof(Sr=Zi.shift())=="string"?ma.push(Mn(Sr)[0]):Array.isArray(Sr)&&typeof Sr[0]=="string"&&(Qi=Mn(Sr[0],Sr[1],Sr[2]),ma.push([Qi[0],Qi[1],Qi[2]]));ur=ma}return ur}var Al=!1,eu=!0;if(typeof w=="string")Al=!0;else if(Array.isArray(w)){var tu=w.concat();tt=[];for(var Ll,Br=tu.length;Br--;)(typeof(Ll=tu.shift())!="string"||Array.isArray(Ll)&&typeof Ll[0]!="string")&&(eu=!1);Al=eu}if(Al===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var _s=Ke/ir.internal.scaleFactor,Pl=_s*(Rn-1);switch(pe.baseline){case"bottom":se-=Pl;break;case"top":se+=_s-Pl;break;case"hanging":se+=_s-2*Pl;break;case"middle":se+=_s/2-Pl}if((Rt=pe.maxWidth||0)>0&&(typeof w=="string"?w=ir.splitTextToSize(w,Rt):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(_n,Mn){return _n.concat(ir.splitTextToSize(Mn,Rt))},[]))),ze={text:w,x:D,y:se,options:pe,mutex:{pdfEscape:pi,activeFontKey:st,fonts:jt,activeFontSize:Ke}},qt.publish("preProcessText",ze),w=ze.text,pt=(pe=ze.options).angle,!(rr instanceof gt)&&pt&&typeof pt=="number"){pt*=Math.PI/180,pe.rotationDirection===0&&(pt=-pt),A===S.ADVANCED&&(pt=-pt);var Tl=Math.cos(pt),Lo=Math.sin(pt);rr=new gt(Tl,Lo,-Lo,Tl,0,0)}else pt&&pt instanceof gt&&(rr=pt);A!==S.ADVANCED||rr||(rr=cr),(Bt=pe.charSpace||Ao)!==void 0&&(Mr+=q(U(Bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Bn=pe.horizontalScale)!==void 0&&(Mr+=q(100*Bn)+` Tz
`),pe.lang;var ri=-1,Vs=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Va=ir.internal.getCurrentPageInfo().pageContext;switch(Vs){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var gd=Va.usedRenderingMode!==void 0?Va.usedRenderingMode:-1;ri!==-1?Mr+=ri+` Tr
`:gd!==-1&&(Mr+=`0 Tr
`),ri!==-1&&(Va.usedRenderingMode=ri),kt=pe.align||"left";var Ji,Ml=Ke*Rn,fa=ir.internal.pageSize.getWidth(),mi=jt[st];Bt=pe.charSpace||Ao,Rt=pe.maxWidth||0,tn=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var ha=[],Po=function(_n){return ir.getStringUnitWidth(_n,{font:mi,charSpace:Bt,fontSize:Ke,doKerning:!1})*Ke/Ki};if(Object.prototype.toString.call(w)==="[object Array]"){var gi;tt=El(w),kt!=="left"&&(Ji=tt.map(Po));var ii,Ga=0;if(kt==="right"){D-=Ji[0],w=[],Br=tt.length;for(var pa=0;pa<Br;pa++)pa===0?(ii=Vi(D),gi=ni(se)):(ii=U(Ga-Ji[pa]),gi=-Ml),w.push([tt[pa],ii,gi]),Ga=Ji[pa]}else if(kt==="center"){D-=Ji[0]/2,w=[],Br=tt.length;for(var vi=0;vi<Br;vi++)vi===0?(ii=Vi(D),gi=ni(se)):(ii=U((Ga-Ji[vi])/2),gi=-Ml),w.push([tt[vi],ii,gi]),Ga=Ji[vi]}else if(kt==="left"){w=[],Br=tt.length;for(var je=0;je<Br;je++)w.push(tt[je])}else if(kt==="justify"&&mi.encoding==="Identity-H"){w=[],Br=tt.length,Rt=Rt!==0?Rt:fa;for(var qe=0,De=0;De<Br;De++)if(gi=De===0?ni(se):-Ml,ii=De===0?Vi(D):qe,De<Br-1){var mt=U((Rt-Ji[De])/(tt[De].split(" ").length-1)),St=tt[De].split(" ");w.push([St[0]+" ",ii,gi]),qe=0;for(var Wt=1;Wt<St.length;Wt++){var Un=(Po(St[Wt-1]+" "+St[Wt])-Po(St[Wt]))*Ki+mt;Wt==St.length-1?w.push([St[Wt],Un,0]):w.push([St[Wt]+" ",Un,0]),qe-=Un}}else w.push([tt[De],ii,gi]);w.push(["",qe,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Br=tt.length,Rt=Rt!==0?Rt:fa,De=0;De<Br;De++)gi=De===0?ni(se):-Ml,ii=De===0?Vi(D):0,De<Br-1?ha.push(q(U((Rt-Ji[De])/(tt[De].split(" ").length-1)))):ha.push(0),w.push([tt[De],ii,gi])}}var vn=typeof pe.R2L=="boolean"?pe.R2L:Ne;vn===!0&&(w=Cl(w,function(_n,Mn,ur){return[_n.split("").reverse().join(""),Mn,ur]})),ze={text:w,x:D,y:se,options:pe,mutex:{pdfEscape:pi,activeFontKey:st,fonts:jt,activeFontSize:Ke}},qt.publish("postProcessText",ze),w=ze.text,Yi=ze.mutex.isHex||!1;var To=jt[st].encoding;To!=="WinAnsiEncoding"&&To!=="StandardEncoding"||(w=Cl(w,function(_n,Mn,ur){return[Ha(_n),Mn,ur]})),tt=El(w),w=[];for(var Mo,Dr,Ss,Do=0,Ns=1,Gs=Array.isArray(tt[0])?Ns:Do,js="",on=function(_n,Mn,ur){var Sr="";return ur instanceof gt?(ur=typeof pe.angle=="number"?Zn(ur,new gt(1,0,0,1,_n,Mn)):Zn(new gt(1,0,0,1,_n,Mn),ur),A===S.ADVANCED&&(ur=Zn(new gt(1,0,0,-1,0,0),ur)),Sr=ur.join(" ")+` Tm
`):Sr=q(_n)+" "+q(Mn)+` Td
`,Sr},Xi=0;Xi<tt.length;Xi++){switch(js="",Gs){case Ns:Ss=(Yi?"<":"(")+tt[Xi][0]+(Yi?">":")"),Mo=parseFloat(tt[Xi][1]),Dr=parseFloat(tt[Xi][2]);break;case Do:Ss=(Yi?"<":"(")+tt[Xi]+(Yi?">":")"),Mo=Vi(D),Dr=ni(se)}ha!==void 0&&ha[Xi]!==void 0&&(js=ha[Xi]+` Tw
`),Xi===0?w.push(js+on(Mo,Dr,rr)+Ss):Gs===Do?w.push(js+Ss):Gs===Ns&&w.push(js+on(Mo,Dr,rr)+Ss)}w=Gs===Do?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Li=`BT
/`;return Li+=st+" "+Ke+` Tf
`,Li+=q(Ke*Rn)+` TL
`,Li+=qa+`
`,Li+=Mr,Li+=w,ee(Li+="ET"),x[st]=!0,ir};var Hf=g.__private__.clip=g.clip=function(w){return ee(w==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Hf("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ee("n"),this};var qs=g.__private__.isValidStyle=function(w){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(D=!0),D};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(w){return qs(w)&&(f=w),this};var cd=g.__private__.getStyle=g.getStyle=function(w){var D=f;switch(w){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=w}return D},wl=g.close=function(){return ee("h"),this};g.stroke=function(){return ee("S"),this},g.fill=function(w){return bl("f",w),this},g.fillEvenOdd=function(w){return bl("f*",w),this},g.fillStroke=function(w){return bl("B",w),this},g.fillStrokeEvenOdd=function(w){return bl("B*",w),this};var bl=function(w,D){An(D)==="object"?Gf(D,w):ee(w)},Kc=function(w){w===null||A===S.ADVANCED&&w===void 0||(w=cd(w),ee(w))};function Vf(w,D,se,pe,Me){var ze=new nf(D||this.boundingBox,se||this.xStep,pe||this.yStep,this.gState,Me||this.matrix);ze.stream=this.stream;var tt=w+"$$"+this.cloneIndex+++"$$";return Pn(tt,ze),ze}var Gf=function(w,D){var se=Qn[w.key],pe=Pt[se];if(pe instanceof Eu)ee("q"),ee(Yf(D)),pe.gState&&g.setGState(pe.gState),ee(w.matrix.toString()+" cm"),ee("/"+se+" sh"),ee("Q");else if(pe instanceof nf){var Me=new gt(1,0,0,-1,0,Hs());w.matrix&&(Me=Me.multiply(w.matrix||cr),se=Vf.call(pe,w.key,w.boundingBox,w.xStep,w.yStep,Me).id),ee("q"),ee("/Pattern cs"),ee("/"+se+" scn"),pe.gState&&g.setGState(pe.gState),ee(D),ee("Q")}},Yf=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},bn=g.moveTo=function(w,D){return ee(q(U(w))+" "+q(K(D))+" m"),this},dn=g.lineTo=function(w,D){return ee(q(U(w))+" "+q(K(D))+" l"),this},za=g.curveTo=function(w,D,se,pe,Me,ze){return ee([q(U(w)),q(K(D)),q(U(se)),q(K(pe)),q(U(Me)),q(K(ze)),"c"].join(" ")),this};g.__private__.line=g.line=function(w,D,se,pe,Me){if(isNaN(w)||isNaN(D)||isNaN(se)||isNaN(pe)||!qs(Me))throw new Error("Invalid arguments passed to jsPDF.line");return A===S.COMPAT?this.lines([[se-w,pe-D]],w,D,[1,1],Me||"S"):this.lines([[se-w,pe-D]],w,D,[1,1]).stroke()},g.__private__.lines=g.lines=function(w,D,se,pe,Me,ze){var tt,pt,kt,Bt,Rt,tn,Bn,rr,ir,Tr,Mr,Yi;if(typeof w=="number"&&(Yi=se,se=D,D=w,w=Yi),pe=pe||[1,1],ze=ze||!1,isNaN(D)||isNaN(se)||!Array.isArray(w)||!Array.isArray(pe)||!qs(Me)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(bn(D,se),tt=pe[0],pt=pe[1],Bt=w.length,Tr=D,Mr=se,kt=0;kt<Bt;kt++)(Rt=w[kt]).length===2?(Tr=Rt[0]*tt+Tr,Mr=Rt[1]*pt+Mr,dn(Tr,Mr)):(tn=Rt[0]*tt+Tr,Bn=Rt[1]*pt+Mr,rr=Rt[2]*tt+Tr,ir=Rt[3]*pt+Mr,Tr=Rt[4]*tt+Tr,Mr=Rt[5]*pt+Mr,za(tn,Bn,rr,ir,Tr,Mr));return ze&&wl(),Kc(Me),this},g.path=function(w){for(var D=0;D<w.length;D++){var se=w[D],pe=se.c;switch(se.op){case"m":bn(pe[0],pe[1]);break;case"l":dn(pe[0],pe[1]);break;case"c":za.apply(this,pe);break;case"h":wl()}}return this},g.__private__.rect=g.rect=function(w,D,se,pe,Me){if(isNaN(w)||isNaN(D)||isNaN(se)||isNaN(pe)||!qs(Me))throw new Error("Invalid arguments passed to jsPDF.rect");return A===S.COMPAT&&(pe=-pe),ee([q(U(w)),q(K(D)),q(U(se)),q(U(pe)),"re"].join(" ")),Kc(Me),this},g.__private__.triangle=g.triangle=function(w,D,se,pe,Me,ze,tt){if(isNaN(w)||isNaN(D)||isNaN(se)||isNaN(pe)||isNaN(Me)||isNaN(ze)||!qs(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-w,pe-D],[Me-se,ze-pe],[w-Me,D-ze]],w,D,[1,1],tt,!0),this},g.__private__.roundedRect=g.roundedRect=function(w,D,se,pe,Me,ze,tt){if(isNaN(w)||isNaN(D)||isNaN(se)||isNaN(pe)||isNaN(Me)||isNaN(ze)||!qs(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Me=Math.min(Me,.5*se),ze=Math.min(ze,.5*pe),this.lines([[se-2*Me,0],[Me*pt,0,Me,ze-ze*pt,Me,ze],[0,pe-2*ze],[0,ze*pt,-Me*pt,ze,-Me,ze],[2*Me-se,0],[-Me*pt,0,-Me,-ze*pt,-Me,-ze],[0,2*ze-pe],[0,-ze*pt,Me*pt,-ze,Me,-ze]],w+Me,D,[1,1],tt,!0),this},g.__private__.ellipse=g.ellipse=function(w,D,se,pe,Me){if(isNaN(w)||isNaN(D)||isNaN(se)||isNaN(pe)||!qs(Me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*se,tt=4/3*(Math.SQRT2-1)*pe;return bn(w+se,D),za(w+se,D-tt,w+ze,D-pe,w,D-pe),za(w-ze,D-pe,w-se,D-tt,w-se,D),za(w-se,D+tt,w-ze,D+pe,w,D+pe),za(w+ze,D+pe,w+se,D+tt,w+se,D),Kc(Me),this},g.__private__.circle=g.circle=function(w,D,se,pe){if(isNaN(w)||isNaN(D)||isNaN(se)||!qs(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,D,se,se,pe)},g.setFont=function(w,D,se){return se&&(D=ie(D,se)),st=xl(w,D,{disableWarning:!1}),this};var Kf=g.__private__.getFont=g.getFont=function(){return jt[xl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var w,D,se={};for(w in At)if(At.hasOwnProperty(w))for(D in se[w]=[],At[w])At[w].hasOwnProperty(D)&&se[w].push(D);return se},g.addFont=function(w,D,se,pe,Me){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Me=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(se=ie(se,pe)),Me=Me||"Identity-H",Wc.call(this,w,D,se,Me)};var Co,Jc=e.lineWidth||.200025,_l=g.__private__.getLineWidth=g.getLineWidth=function(){return Jc},ud=g.__private__.setLineWidth=g.setLineWidth=function(w){return Jc=w,ee(q(U(w))+" w"),this};g.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(w,D){if(w=w||[],D=D||0,isNaN(D)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(se){return q(U(se))}).join(" "),D=q(U(D)),ee("["+w+"] "+D+" d"),this};var Xc=g.__private__.getLineHeight=g.getLineHeight=function(){return Ke*Co};g.__private__.getLineHeight=g.getLineHeight=function(){return Ke*Co};var dd=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Co=w),this},vr=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Co};dd(e.lineHeight);var Vi=g.__private__.getHorizontalCoordinate=function(w){return U(w)},ni=g.__private__.getVerticalCoordinate=function(w){return A===S.ADVANCED?w:bt[V].mediaBox.topRightY-bt[V].mediaBox.bottomLeftY-U(w)},fd=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(w){return q(Vi(w))},Ws=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(w){return q(ni(w))},nr=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ys(nr)},g.__private__.setStrokeColor=g.setDrawColor=function(w,D,se,pe){return nr=xs({ch1:w,ch2:D,ch3:se,ch4:pe,pdfColorType:"draw",precision:2}),ee(nr),this};var Sl=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ys(Sl)},g.__private__.setFillColor=g.setFillColor=function(w,D,se,pe){return Sl=xs({ch1:w,ch2:D,ch3:se,ch4:pe,pdfColorType:"fill",precision:2}),ee(Sl),this};var qa=e.textColor||"0 g",hd=g.__private__.getTextColor=g.getTextColor=function(){return ys(qa)};g.__private__.setTextColor=g.setTextColor=function(w,D,se,pe){return qa=xs({ch1:w,ch2:D,ch3:se,ch4:pe,pdfColorType:"text",precision:3}),this};var Ao=e.charSpace,pd=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Ao||0)};g.__private__.setCharSpace=g.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ao=w,this};var Nl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(w){var D=g.CapJoinStyles[w];if(D===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=D,ee(D+" J"),this};var Fr=0;g.__private__.setLineJoin=g.setLineJoin=function(w){var D=g.CapJoinStyles[w];if(D===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fr=D,ee(D+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(q(U(w))+" M"),this},g.GState=ng,g.setGState=function(w){(w=typeof w=="string"?Et[or[w]]:md(null,w)).equals(un)||(ee("/"+w.id+" gs"),un=w)};var md=function(w,D){if(!w||!or[w]){var se=!1;for(var pe in Et)if(Et.hasOwnProperty(pe)&&Et[pe].equals(D)){se=!0;break}if(se)D=Et[pe];else{var Me="GS"+(Object.keys(Et).length+1).toString(10);Et[Me]=D,D.id=Me}return w&&(or[w]=D.id),qt.publish("addGState",D),D}};g.addGState=function(w,D){return md(w,D),this},g.saveGraphicsState=function(){return ee("q"),mn.push({key:st,size:Ke,color:qa}),this},g.restoreGraphicsState=function(){ee("Q");var w=mn.pop();return st=w.key,Ke=w.size,qa=w.color,un=null,this},g.setCurrentTransformationMatrix=function(w){return ee(w.toString()+" cm"),this},g.comment=function(w){return ee("#"+w),this};var $r=function(w,D){var se=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(ze){isNaN(ze)||(se=parseFloat(ze))}});var pe=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(ze){isNaN(ze)||(pe=parseFloat(ze))}});var Me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Me},set:function(ze){Me=ze.toString()}}),this},Qc=function(w,D,se,pe){$r.call(this,w,D),this.type="rect";var Me=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Me},set:function(tt){isNaN(tt)||(Me=parseFloat(tt))}});var ze=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(tt){isNaN(tt)||(ze=parseFloat(tt))}}),this},jl=function(){this.page=zt,this.currentPage=V,this.pages=_e.slice(0),this.pagesContext=bt.slice(0),this.x=Ct,this.y=ut,this.matrix=Gt,this.width=gn(V),this.height=Hs(V),this.outputDestination=$e,this.id="",this.objectNumber=-1};jl.prototype.restore=function(){zt=this.page,V=this.currentPage,bt=this.pagesContext,_e=this.pages,Ct=this.x,ut=this.y,Gt=this.matrix,Gi(V,this.width),Zc(V,this.height),$e=this.outputDestination};var bs=function(w,D,se,pe,Me){Rr.push(new jl),zt=V=0,_e=[],Ct=w,ut=D,Gt=Me,yl([se,pe])},kl=function(w){if(lr[w])Rr.pop().restore();else{var D=new jl,se="Xo"+(Object.keys(rn).length+1).toString(10);D.id=se,lr[w]=se,rn[se]=D,qt.publish("addFormObject",D),Rr.pop().restore()}};for(var Wa in g.beginFormObject=function(w,D,se,pe,Me){return bs(w,D,se,pe,Me),this},g.endFormObject=function(w){return kl(w),this},g.doFormObject=function(w,D){var se=rn[lr[w]];return ee("q"),ee(D.toString()+" cm"),ee("/"+se.id+" Do"),ee("Q"),this},g.getFormObject=function(w){var D=rn[lr[w]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},g.save=function(w,D){return w=w||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(Nu(ko(zs()),w),typeof Nu.unload=="function"&&It.setTimeout&&setTimeout(Nu.unload,911),this):new Promise(function(se,pe){try{var Me=Nu(ko(zs()),w);typeof Nu.unload=="function"&&It.setTimeout&&setTimeout(Nu.unload,911),se(Me)}catch(ze){pe(ze.message)}})},Dt.API)Dt.API.hasOwnProperty(Wa)&&(Wa==="events"&&Dt.API.events.length?function(w,D){var se,pe,Me;for(Me=D.length-1;Me!==-1;Me--)se=D[Me][0],pe=D[Me][1],w.subscribe.apply(w,[se].concat(typeof pe=="function"?[pe]:pe))}(qt,Dt.API.events):g[Wa]=Dt.API[Wa]);var gn=g.getPageWidth=function(w){return(bt[w=w||V].mediaBox.topRightX-bt[w].mediaBox.bottomLeftX)/Ue},Gi=g.setPageWidth=function(w,D){bt[w].mediaBox.topRightX=D*Ue+bt[w].mediaBox.bottomLeftX},Hs=g.getPageHeight=function(w){return(bt[w=w||V].mediaBox.topRightY-bt[w].mediaBox.bottomLeftY)/Ue},Zc=g.setPageHeight=function(w,D){bt[w].mediaBox.topRightY=D*Ue+bt[w].mediaBox.bottomLeftY};return g.internal={pdfEscape:pi,getStyle:cd,getFont:Kf,getFontSize:ce,getCharSpace:pd,getTextColor:hd,getLineHeight:Xc,getLineHeightFactor:vr,getLineWidth:_l,write:Xe,getHorizontalCoordinate:Vi,getVerticalCoordinate:ni,getCoordinateString:fd,getVerticalCoordinateString:Ws,collections:{},newObject:On,newAdditionalObject:Wi,newObjectDeferred:Tn,newObjectDeferredBegin:er,getFilters:ws,putStream:Hi,events:qt,scaleFactor:Ue,pageSize:{getWidth:function(){return gn(V)},setWidth:function(w){Gi(V,w)},getHeight:function(){return Hs(V)},setHeight:function(w){Zc(V,w)}},encryptionOptions:p,encryption:Wr,getEncryptor:qf,output:Eo,getNumberOfPages:sd,pages:_e,out:ee,f2:ae,f3:R,getPageInfo:ld,getPageInfoByObjId:Ot,getCurrentPageInfo:Wf,getPDFVersion:j,Point:$r,Rectangle:Qc,Matrix:gt,hasHotfix:Yc},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return gn(V)},set:function(w){Gi(V,w)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Hs(V)},set:function(w){Zc(V,w)},enumerable:!0,configurable:!0}),rd.call(g,He),st="F1",Hc(i,n),qt.publish("initialized"),g}zd.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},zd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zd.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},zd.prototype.processOwnerPassword=function(e,t){return xy(yy(t).substr(0,5),e)},zd.prototype.encryptor=function(e,t){var n=yy(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return xy(n,r)}},ng.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||An(e)!==An(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Dt.API={events:[]},Dt.version="3.0.1";var wr=Dt.API,Z5=1,Xu=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ht=function(e){return e.toFixed(2)},nc=function(e){return e.toFixed(5)};wr.__acroform__={};var ms=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},R_=function(e){return e*Z5},oo=function(e){var t=new L6,n=wt.internal.getHeight(e)||0,r=wt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ht(r)),Number(Ht(n))],t},Z$=wr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},eB=wr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},tB=wr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Cr=wr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return tB(e,t-1)},Ar=wr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Z$(e,t-1)},Lr=wr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eB(e,t-1)},nB=wr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],s=e[1],a=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Ht(c.lowerLeft_X)),Number(Ht(c.lowerLeft_Y)),Number(Ht(c.upperRight_X)),Number(Ht(c.upperRight_Y))]},rB=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=wy(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Ht(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=oo(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},wy=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,a=wt.internal.getHeight(e)||0;a=a<0?-a:a;var l=wt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(R,U,Y){if(R+1<i.length){var K=U+" "+i[R+1][0];return Ym(K,e,Y).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var f,p,m=Ym("3",e,s).height,x=e.multiline?a-s:(a-m)/2,g=x+=2,N=0,j=0,E=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ym(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",S=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var O=!1;if(i[A].length!==1&&E!==i[A].length-1){if((m+2)*(S+2)+2>a)continue e;b+=i[A][E],O=!0,j=A,A--}else{b=(b+=i[A][E]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var G=parseInt(A),ie=c(G,b,s),q=A>=i.length-1;if(ie&&!q){b+=" ",E=0;continue}if(ie||q){if(q)j=G;else if(e.multiline&&(m+2)*(S+2)+2>a)continue e}else{if(!e.multiline||(m+2)*(S+2)+2>a)continue e;j=G}}for(var M="",re=N;re<=j;re++){var ae=i[re];if(e.multiline){if(re===j){M+=ae[E]+" ",E=(E+1)%ae.length;continue}if(re===N){M+=ae[ae.length-1]+" ";continue}}M+=ae[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,p=Ym(M,e,s).width,e.textAlign){case"right":f=l-p-2;break;case"center":f=(l-p)/2;break;case"left":default:f=2}t+=Ht(f)+" "+Ht(g)+` Td
`,t+="("+Xu(M)+`) Tj
`,t+=-Ht(f)+` 0 Td
`,g=-(s+2),p=0,N=O?j:j+1,S++,b=""}break}return r.text=t,r.fontSize=s,r},Ym=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},iB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},sB=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},aB=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),An(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},oB=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ba.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(iB)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Z5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new P6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&sB(s,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],f=l.Rect;if(l.Rect&&(l.Rect=nB(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=wt.createDefaultAppearanceStream(l),An(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=rB(l);c.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var m="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var g=l.appearanceStreamContent[x];if(m+="/"+x+" ",m+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var N=g[a];typeof N=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(i,l)),m+="/"+a+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&aB(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},A6=wr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),An(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Xu(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Uv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xu(r(e))+")"},mo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mo.prototype.toString=function(){return this.objId+" 0 R"},mo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},mo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:A6(i,this.objId,this.scope)}):i instanceof mo?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var L6=function(){mo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ms(L6,mo);var P6=function(){mo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Xu(n(e))+")"}},set:function(n){e=n}})};ms(P6,mo);var Ba=function e(){mo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Cr(t,3)},set:function(b){b?this.F=Ar(t,3):this.F=Lr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof rg)return;s="FieldObject"+e.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Xu(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Z5:f},set:function(b){f=b}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(b){p=b}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof rg||this instanceof Fu))return Uv(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=b}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Xr?x:Uv(x,this.objId,this.scope)},set:function(b){b=b.toString(),x=this instanceof Xr?b:b.substr(0,1)==="("?Bd(b.substr(1,b.length-2)):Bd(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Bd(x.substr(1,x.length-1)):x},set:function(b){b=b.toString(),x=this instanceof Xr?"/"+b:b}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Xr?g:Uv(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof Xr?b:b.substr(0,1)==="("?Bd(b.substr(1,b.length-2)):Bd(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xr?Bd(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof Xr?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(b){b=!!b,j=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(b){N=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,1)},set:function(b){b?this.Ff=Ar(this.Ff,1):this.Ff=Lr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,2)},set:function(b){b?this.Ff=Ar(this.Ff,2):this.Ff=Lr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,3)},set:function(b){b?this.Ff=Ar(this.Ff,3):this.Ff=Lr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');E=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(E){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};ms(Ba,mo);var hf=function(){Ba.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return A6(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,a,l){l||(l=1);for(var c,f=[];c=a.exec(s);)f.push(c[l]);return f}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,18)},set:function(n){n?this.Ff=Ar(this.Ff,18):this.Ff=Lr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ar(this.Ff,19):this.Ff=Lr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,20)},set:function(n){n?(this.Ff=Ar(this.Ff,20),t.sort()):this.Ff=Lr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,22)},set:function(n){n?this.Ff=Ar(this.Ff,22):this.Ff=Lr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,23)},set:function(n){n?this.Ff=Ar(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,27)},set:function(n){n?this.Ff=Ar(this.Ff,27):this.Ff=Lr(this.Ff,27)}}),this.hasAppearanceStream=!1};ms(hf,Ba);var pf=function(){hf.call(this),this.fontName="helvetica",this.combo=!1};ms(pf,hf);var mf=function(){pf.call(this),this.combo=!0};ms(mf,pf);var g0=function(){mf.call(this),this.edit=!0};ms(g0,mf);var Xr=function(){Ba.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,15)},set:function(n){n?this.Ff=Ar(this.Ff,15):this.Ff=Lr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,16)},set:function(n){n?this.Ff=Ar(this.Ff,16):this.Ff=Lr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,17)},set:function(n){n?this.Ff=Ar(this.Ff,17):this.Ff=Lr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,26)},set:function(n){n?this.Ff=Ar(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Xu(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){An(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ms(Xr,Ba);var v0=function(){Xr.call(this),this.pushButton=!0};ms(v0,Xr);var gf=function(){Xr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ms(gf,Xr);var rg=function(){var e,t;Ba.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Xu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){An(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ms(rg,Ba),gf.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},gf.prototype.createOption=function(e){var t=new rg;return t.Parent=this,t.optionName=e,this.Kids.push(t),lB.call(this.scope,t),t};var y0=function(){Xr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};ms(y0,Xr);var Fu=function(){Ba.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,13)},set:function(t){t?this.Ff=Ar(this.Ff,13):this.Ff=Lr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,21)},set:function(t){t?this.Ff=Ar(this.Ff,21):this.Ff=Lr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,23)},set:function(t){t?this.Ff=Ar(this.Ff,23):this.Ff=Lr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,24)},set:function(t){t?this.Ff=Ar(this.Ff,24):this.Ff=Lr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,25)},set:function(t){t?this.Ff=Ar(this.Ff,25):this.Ff=Lr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,26)},set:function(t){t?this.Ff=Ar(this.Ff,26):this.Ff=Lr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ms(Fu,Ba);var x0=function(){Fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Cr(this.Ff,14)},set:function(e){e?this.Ff=Ar(this.Ff,14):this.Ff=Lr(this.Ff,14)}}),this.password=!0};ms(x0,Fu);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=wy(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ht(wt.internal.getWidth(e))+" "+Ht(wt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ht(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=wt.internal.getHeight(e),a=wt.internal.getWidth(e),l=wy(e,e.caption);return i.push("1 g"),i.push("0 0 "+Ht(a)+" "+Ht(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ht(a-1)+" "+Ht(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Ht(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ht(wt.internal.getWidth(e))+" "+Ht(wt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Circle.YesNormal,t.D[e]=wt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=wt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+nc(wt.internal.getWidth(e)/2)+" "+nc(wt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*wt.internal.Bezier_C).toFixed(5)),a=Number((r*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nc(wt.internal.getWidth(e)/2)+" "+nc(wt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+nc(wt.internal.getWidth(e)/2)+" "+nc(wt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=wt.internal.getWidth(e)<=wt.internal.getHeight(e)?wt.internal.getWidth(e)/4:wt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+nc(wt.internal.getWidth(e)/2)+" "+nc(wt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=wt.RadioButton.Cross.YesNormal,t.D[e]=wt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=oo(e);t.scope=e.scope;var n=[],r=wt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ht(wt.internal.getWidth(e)-2)+" "+Ht(wt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ht(r.x1.x)+" "+Ht(r.x1.y)+" m"),n.push(Ht(r.x2.x)+" "+Ht(r.x2.y)+" l"),n.push(Ht(r.x4.x)+" "+Ht(r.x4.y)+" m"),n.push(Ht(r.x3.x)+" "+Ht(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=wt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ht(wt.internal.getWidth(e))+" "+Ht(wt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ht(wt.internal.getWidth(e)-2)+" "+Ht(wt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ht(n.x1.x)+" "+Ht(n.x1.y)+" m"),r.push(Ht(n.x2.x)+" "+Ht(n.x2.y)+" l"),r.push(Ht(n.x4.x)+" "+Ht(n.x4.y)+" m"),r.push(Ht(n.x3.x)+" "+Ht(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=oo(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ht(wt.internal.getWidth(e))+" "+Ht(wt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};wt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=wt.internal.getWidth(e),n=wt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},wt.internal.getWidth=function(e){var t=0;return An(e)==="object"&&(t=R_(e.Rect[2])),t},wt.internal.getHeight=function(e){var t=0;return An(e)==="object"&&(t=R_(e.Rect[3])),t};var lB=wr.addField=function(e){if(oB(this,e),!(e instanceof Ba))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};wr.AcroFormChoiceField=hf,wr.AcroFormListBox=pf,wr.AcroFormComboBox=mf,wr.AcroFormEditBox=g0,wr.AcroFormButton=Xr,wr.AcroFormPushButton=v0,wr.AcroFormRadioButton=gf,wr.AcroFormCheckBox=y0,wr.AcroFormTextField=Fu,wr.AcroFormPasswordField=x0,wr.AcroFormAppearance=wt,wr.AcroForm={ChoiceField:hf,ListBox:pf,ComboBox:mf,EditBox:g0,Button:Xr,PushButton:v0,RadioButton:gf,CheckBox:y0,TextField:Fu,PasswordField:x0,Appearance:wt},Dt.AcroForm={ChoiceField:hf,ListBox:pf,ComboBox:mf,EditBox:g0,Button:Xr,PushButton:v0,RadioButton:gf,CheckBox:y0,TextField:Fu,PasswordField:x0,Appearance:wt};function T6(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(R,U){var Y,K,xe,me,X,F=t;if((U=U||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(ie(R))for(X in n)for(xe=n[X],Y=0;Y<xe.length;Y+=1){for(me=!0,K=0;K<xe[Y].length;K+=1)if(xe[Y][K]!==void 0&&xe[Y][K]!==R[K]){me=!1;break}if(me===!0){F=X;break}}else for(X in n)for(xe=n[X],Y=0;Y<xe.length;Y+=1){for(me=!0,K=0;K<xe[Y].length;K+=1)if(xe[Y][K]!==void 0&&xe[Y][K]!==R.charCodeAt(K)){me=!1;break}if(me===!0){F=X;break}}return F===t&&U!==t&&(F=U),F},i=function R(U){for(var Y=this.internal.write,K=this.internal.putStream,xe=(0,this.internal.getFilters)();xe.indexOf("FlateEncode")!==-1;)xe.splice(xe.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var me=[];if(me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Image"}),me.push({key:"Width",value:U.width}),me.push({key:"Height",value:U.height}),U.colorSpace===E.INDEXED?me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(me.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===E.DEVICE_CMYK&&me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),me.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&me.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)){for(var X="",F=0,z=U.transparency.length;F<z;F++)X+=U.transparency[F]+" "+U.transparency[F]+" ";me.push({key:"Mask",value:"["+X+"]"})}U.sMask!==void 0&&me.push({key:"SMask",value:U.objectId+1+" 0 R"});var oe=U.filter!==void 0?["/"+U.filter]:void 0;if(K({data:U.data,additionalKeyValues:me,alreadyAppliedFilters:oe,objectId:U.objectId}),Y("endobj"),"sMask"in U&&U.sMask!==void 0){var Le="/Predictor "+U.predictor+" /Colors 1 /BitsPerComponent "+U.bitsPerComponent+" /Columns "+U.width,P={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:U.bitsPerComponent,decodeParameters:Le,data:U.sMask};"filter"in U&&(P.filter=U.filter),R.call(this,P)}if(U.colorSpace===E.INDEXED){var V=this.internal.newObject();K({data:M(new Uint8Array(U.palette)),objectId:V}),Y("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var U in R)i.call(this,R[U])},a=function(){var R,U=this.internal.collections.addImage_images,Y=this.internal.write;for(var K in U)Y("/I"+(R=U[K]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(R){return typeof e["process"+R.toUpperCase()]=="function"},m=function(R){return An(R)==="object"&&R.nodeType===1},x=function(R,U){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var Y=""+R.getAttribute("src");if(Y.indexOf("data:image/")===0)return Gh(unescape(Y).split("base64,").pop());var K=e.loadFile(Y,!0);if(K!==void 0)return K}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var xe;switch(U){case"PNG":xe="image/png";break;case"WEBP":xe="image/webp";break;case"JPEG":case"JPG":default:xe="image/jpeg"}return Gh(R.toDataURL(xe,1).split("base64,").pop())}},g=function(R){var U=this.internal.collections.addImage_images;if(U){for(var Y in U)if(R===U[Y].alias)return U[Y]}},N=function(R,U,Y){return R||U||(R=-96,U=-96),R<0&&(R=-1*Y.width*72/R/this.internal.scaleFactor),U<0&&(U=-1*Y.height*72/U/this.internal.scaleFactor),R===0&&(R=U*Y.width/Y.height),U===0&&(U=R*Y.height/Y.width),[R,U]},j=function(R,U,Y,K,xe,me){var X=N.call(this,Y,K,xe),F=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,oe=c.call(this);if(Y=X[0],K=X[1],oe[xe.index]=xe,me){me*=Math.PI/180;var Le=Math.cos(me),P=Math.sin(me),V=function(le){return le.toFixed(4)},ne=[V(Le),V(P),V(-1*P),V(Le),0,0,"cm"]}this.internal.write("q"),me?(this.internal.write([1,"0","0",1,F(R),z(U+K),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([F(Y),"0","0",F(K),"0","0","cm"].join(" "))):this.internal.write([F(Y),"0","0",F(K),F(R),z(U+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+xe.index+" Do"),this.internal.write("Q")},E=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=e.__addimage__.sHashCode=function(R){var U,Y,K=0;if(typeof R=="string")for(Y=R.length,U=0;U<Y;U++)K=(K<<5)-K+R.charCodeAt(U),K|=0;else if(ie(R))for(Y=R.byteLength/2,U=0;U<Y;U++)K=(K<<5)-K+R[U],K|=0;return K},A=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var U=!0;return R.length===0&&(U=!1),R.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(U=!1),U},O=e.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var U=R.indexOf(",");return U<0?null:R.substring(0,U).trim().endsWith("base64")?R.substring(U+1):null},G=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return G()&&R instanceof ArrayBuffer};var ie=e.__addimage__.isArrayBufferView=function(R){return G()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},q=e.__addimage__.binaryStringToUint8Array=function(R){for(var U=R.length,Y=new Uint8Array(U),K=0;K<U;K++)Y[K]=R.charCodeAt(K);return Y},M=e.__addimage__.arrayBufferToBinaryString=function(R){for(var U="",Y=ie(R)?R:new Uint8Array(R),K=0;K<Y.length;K+=8192)U+=String.fromCharCode.apply(null,Y.subarray(K,K+8192));return U};e.addImage=function(){var R,U,Y,K,xe,me,X,F,z;if(typeof arguments[1]=="number"?(U=t,Y=arguments[1],K=arguments[2],xe=arguments[3],me=arguments[4],X=arguments[5],F=arguments[6],z=arguments[7]):(U=arguments[1],Y=arguments[2],K=arguments[3],xe=arguments[4],me=arguments[5],X=arguments[6],F=arguments[7],z=arguments[8]),An(R=arguments[0])==="object"&&!m(R)&&"imageData"in R){var oe=R;R=oe.imageData,U=oe.format||U||t,Y=oe.x||Y||0,K=oe.y||K||0,xe=oe.w||oe.width||xe,me=oe.h||oe.height||me,X=oe.alias||X,F=oe.compression||F,z=oe.rotation||oe.angle||z}var Le=this.internal.getFilters();if(F===void 0&&Le.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(Y)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=re.call(this,R,U,X,F);return j.call(this,Y,K,xe,me,P,z),this};var re=function(R,U,Y,K){var xe,me,X;if(typeof R=="string"&&r(R)===t){R=unescape(R);var F=ae(R,!1);(F!==""||(F=e.loadFile(R,!0))!==void 0)&&(R=F)}if(m(R)&&(R=x(R,U)),U=r(R,U),!p(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((X=Y)==null||X.length===0)&&(Y=function(z){return typeof z=="string"||ie(z)?S(z):ie(z.data)?S(z.data):null}(R)),(xe=g.call(this,Y))||(G()&&(R instanceof Uint8Array||U==="RGBA"||(me=R,R=q(R))),xe=this["process"+U.toUpperCase()](R,f.call(this),Y,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:b.NONE}(K),me)),!xe)throw new Error("An unknown error occurred whilst processing the image.");return xe},ae=e.__addimage__.convertBase64ToBinaryString=function(R,U){U=typeof U!="boolean"||U;var Y,K="";if(typeof R=="string"){var xe;Y=(xe=O(R))!==null&&xe!==void 0?xe:R;try{K=Gh(Y)}catch(me){if(U)throw A(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(R){var U,Y,K="";if(m(R)&&(R=x(R)),typeof R=="string"&&r(R)===t&&((K=ae(R,!1))===""&&(K=e.loadFile(R)||""),R=K),Y=r(R),!p(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!G()||R instanceof Uint8Array||(R=q(R)),!(U=this["process"+Y.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=Y,U}})(Dt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Dt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,s,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),f=n.pageContext.annotations,p=!1,m=0;m<f.length&&!p;m++)switch((r=f[m]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var x=0;x<f.length;x++){r=f[x];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(j.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+g(b(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(b(S))+") >>",j.content=s;var A=j.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(j.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(N(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var G=this.annotations._nameMap[r.options.name];r.options.pageNumber=G.page,r.options.top=G.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ie=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ie+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,s,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:f(r),w:c(n+i),h:f(r+s)},options:a,type:"link"})},e.textWithLink=function(n,r,i,s){var a,l,c=this.getTextWidth(n),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var p=this.splitTextToSize(n,l).length;a=Math.ceil(f*p)}else l=c,a=f;return this.text(n,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,l,a,s),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Dt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},l=e.__arabicParser__.isArabicEndLetter=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(j){return a(j)&&i.indexOf(j.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(j){return a(j)&&s(j)&&t[j.charCodeAt(0)].length==4},m=e.__arabicParser__.resolveLigatures=function(j){var E=0,b=n,S="",A=0;for(E=0;E<j.length;E+=1)b[j.charCodeAt(E)]!==void 0?(A++,typeof(b=b[j.charCodeAt(E)])=="number"&&(S+=String.fromCharCode(b),b=n,A=0),E===j.length-1&&(b=n,S+=j.charAt(E-(A-1)),E-=A-1,A=0)):(b=n,S+=j.charAt(E-A),E-=A,A=0);return S};e.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&r[j.charCodeAt(0)]!==void 0};var x=e.__arabicParser__.getCorrectForm=function(j,E,b){return a(j)?s(j)===!1?-1:!f(j)||!a(E)&&!a(b)||!a(b)&&l(E)||l(j)&&!a(E)||l(j)&&c(E)||l(j)&&l(E)?0:p(j)&&a(E)&&!l(E)&&a(b)&&f(b)?3:l(j)||!a(b)?1:2:-1},g=function(j){var E=0,b=0,S=0,A="",O="",G="",ie=(j=j||"").split("\\s+"),q=[];for(E=0;E<ie.length;E+=1){for(q.push(""),b=0;b<ie[E].length;b+=1)A=ie[E][b],O=ie[E][b-1],G=ie[E][b+1],a(A)?(S=x(A,O,G),q[E]+=S!==-1?String.fromCharCode(t[A.charCodeAt(0)][S]):A):q[E]+=A;q[E]=m(q[E])}return q.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var j,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(E)){var S=0;for(b=[],S=0;S<E.length;S+=1)Array.isArray(E[S])?b.push([g(E[S][0]),E[S][1],E[S][2]]):b.push([g(E[S])]);j=b}else j=g(E);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};e.events.push(["preProcessText",N])}(Dt.API),Dt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Dt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(j){c=j}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(j){N=j}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),x=f.scaleFactor||this.internal.scaleFactor,g=0,N=0,j=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=f.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(A,O){return A.concat(E.splitTextToSize(O,b))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)g<(j=this.getStringUnitWidth(c[S],{font:m})*p)&&(g=j);return g!==0&&(N=c.length),{w:g/=x,h:Math.max((N*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/x,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,g&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,f,p,m,x){if(r.call(this),!p)throw new Error("No data for PDF table.");var g,N,j,E,b=[],S=[],A=[],O={},G={},ie=[],q=[],M=(x=x||{}).autoSize||!1,re=x.printHeaders!==!1,ae=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,R=x.margins||Object.assign({width:this.getPageWidth()},t),U=typeof x.padding=="number"?x.padding:3,Y=x.headerBackgroundColor||"#c8c8c8",K=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=re,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=ae,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=K,this.setFontSize(ae),m==null)S=b=Object.keys(p[0]),A=b.map(function(){return"left"});else if(Array.isArray(m)&&An(m[0])==="object")for(b=m.map(function(oe){return oe.name}),S=m.map(function(oe){return oe.prompt||oe.name||""}),A=m.map(function(oe){return oe.align||"left"}),g=0;g<m.length;g+=1)G[m[g].name]=m[g].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(S=b=m,A=b.map(function(){return"left"}));if(M||Array.isArray(m)&&typeof m[0]=="string")for(g=0;g<b.length;g+=1){for(O[E=b[g]]=p.map(function(oe){return oe[E]}),this.setFont(void 0,"bold"),ie.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=O[E],this.setFont(void 0,"normal"),j=0;j<N.length;j+=1)ie.push(this.getTextDimensions(N[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[E]=Math.max.apply(null,ie)+U+U,ie=[]}if(re){var xe={};for(g=0;g<b.length;g+=1)xe[b[g]]={},xe[b[g]].text=S[g],xe[b[g]].align=A[g];var me=l.call(this,xe,G);q=b.map(function(oe){return new s(c,f,G[oe],me,xe[oe].text,void 0,xe[oe].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var X=m.reduce(function(oe,Le){return oe[Le.name]=Le.align,oe},{});for(g=0;g<p.length;g+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:g,data:p[g]},this);var F=l.call(this,p[g],G);for(j=0;j<b.length;j+=1){var z=p[g][b[j]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:g,col:j,data:z},this),a.call(this,new s(c,f,G[b[j]],F,z,g+2,X[b[j]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var l=function(c,f){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[g]-p-p)},this).map(function(g){return this.getLineHeightFactor()*g.length*m/x+p+p},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){p=this.internal.__cell__.tableHeaderRow[g].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,x.push(p)),p.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(N)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),n=!1}}(Dt.API);var M6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},D6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],by=T6(D6),I6=[100,200,300,400,500,600,700,800,900],cB=T6(I6);function _y(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return M6[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof by[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function F_(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var uB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function B_(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function dB(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},uB,n.genericFontFamilies||{}),s=null,a=null,l=0;l<t.length;++l)if(i[(s=_y(t[l])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){a=e[s.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+B_(s)+"' and default family '"+r+"'.");if(a=function(c,f){if(f[c])return f[c];var p=by[c],m=p<=by.normal?-1:1,x=F_(f,D6,p,m);if(!x)throw new Error("Could not find a matching font-stretch value for "+c);return x}(s.stretch,a),a=function(c,f){if(f[c])return f[c];for(var p=M6[c],m=0;m<p.length;++m)if(f[p[m]])return f[p[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var p=cB[c],m=F_(f,I6,p,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+B_(s)+"'.");return a}function U_(e){return e.trimLeft()}function fB(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function hB(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Km,z_,q_,zv=["times"];(function(e){var t,n,r,i,s,a,l,c,f,p=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new m(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,f=new p}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=P;Object.defineProperty(this,"pdf",{get:function(){return V}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(fe){ne=!!fe}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(fe){le=!!fe}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(fe){isNaN(fe)||(de=fe)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(fe){isNaN(fe)||(Ae=fe)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(fe){var ee;typeof fe=="number"?ee=[fe,fe,fe,fe]:((ee=new Array(4))[0]=fe[0],ee[1]=fe.length>=2?fe[1]:ee[0],ee[2]=fe.length>=3?fe[2]:ee[0],ee[3]=fe.length>=4?fe[3]:ee[1]),f.margin=ee}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(fe){Ee=fe}});var Z=0;Object.defineProperty(this,"lastBreak",{get:function(){return Z},set:function(fe){Z=fe}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(fe){ke=fe}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(fe){fe instanceof p&&(f=fe)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(fe){f.path=fe}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(fe){_e=fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(fe){var ee;ee=x(fe),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(fe){var ee=x(fe);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(fe){["butt","round","square"].indexOf(fe)!==-1&&(this.ctx.lineCap=fe,this.pdf.setLineCap(fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(fe){isNaN(fe)||(this.ctx.lineWidth=fe,this.pdf.setLineWidth(fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(fe){["bevel","round","miter"].indexOf(fe)!==-1&&(this.ctx.lineJoin=fe,this.pdf.setLineJoin(fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(fe){isNaN(fe)||(this.ctx.miterLimit=fe,this.pdf.setMiterLimit(fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(fe){this.ctx.textBaseline=fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(fe){["right","end","center","left","start"].indexOf(fe)!==-1&&(this.ctx.textAlign=fe)}});var Re=null;function $e(fe,ee){if(Re===null){var Xe=function(We){var He=[];return Object.keys(We).forEach(function(Ke){We[Ke].forEach(function(be){var ce=null;switch(be){case"bold":ce={family:Ke,weight:"bold"};break;case"italic":ce={family:Ke,style:"italic"};break;case"bolditalic":ce={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":ce={family:Ke}}ce!==null&&(ce.ref={name:Ke,style:be},He.push(ce))})}),He}(fe.getFontList());Re=function(We){for(var He={},Ke=0;Ke<We.length;++Ke){var be=_y(We[Ke]),ce=be.family,Ne=be.stretch,he=be.style,ve=be.weight;He[ce]=He[ce]||{},He[ce][Ne]=He[ce][Ne]||{},He[ce][Ne][he]=He[ce][Ne][he]||{},He[ce][Ne][he][ve]=be}return He}(Xe.concat(ee))}return Re}var Ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ge},set:function(fe){Re=null,Ge=fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(fe){var ee;if(this.ctx.font=fe,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(fe))!==null){var Xe=ee[1];ee[2];var We=ee[3],He=ee[4];ee[5];var Ke=ee[6],be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(He)[2];He=Math.floor(be==="px"?parseFloat(He)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(He)*this.pdf.getFontSize():parseFloat(He)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(He);var ce=function(Fe){var st,Ue,Ct=[],ut=Fe.trim();if(ut==="")return zv;if(ut in $_)return[$_[ut]];for(;ut!=="";){switch(Ue=null,st=(ut=U_(ut)).charAt(0)){case'"':case"'":Ue=fB(ut.substring(1),st);break;default:Ue=hB(ut)}if(Ue===null||(Ct.push(Ue[0]),(ut=U_(Ue[1]))!==""&&ut.charAt(0)!==","))return zv;ut=ut.replace(/^,/,"")}return Ct}(Ke);if(this.fontFaces){var Ne=dB($e(this.pdf,this.fontFaces),ce.map(function(Fe){return{family:Fe,stretch:"normal",weight:We,style:Xe}}));this.pdf.setFont(Ne.ref.name,Ne.ref.style)}else{var he="";(We==="bold"||parseInt(We,10)>=700||Xe==="bold")&&(he="bold"),Xe==="italic"&&(he+="italic"),he.length===0&&(he="normal");for(var ve="",rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<ce.length;ot++){if(this.pdf.internal.getFont(ce[ot],he,{noFallback:!0,disableWarning:!0})!==void 0){ve=ce[ot];break}if(he==="bolditalic"&&this.pdf.internal.getFont(ce[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ve=ce[ot],he="bold";else if(this.pdf.internal.getFont(ce[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ve=ce[ot],he="normal";break}}if(ve===""){for(var it=0;it<ce.length;it++)if(rt[ce[it]]){ve=rt[ce[it]];break}}ve=ve===""?"Times":ve,this.pdf.setFont(ve,he)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(fe){this.ctx.globalCompositeOperation=fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(fe){this.ctx.globalAlpha=fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(fe){this.ctx.lineDashOffset=fe,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(fe){this.ctx.lineDash=fe,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(fe){this.ctx.ignoreClearRect=!!fe}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){O.call(this,"fill",!1)},m.prototype.stroke=function(){O.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new a(P,V));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(P,V)},m.prototype.closePath=function(){var P=new a(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&An(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){P=new a(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.lineTo=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new a(P,V));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(ne.x,ne.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,V,ne,le){if(isNaN(ne)||isNaN(le)||isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new a(ne,le)),Ae=this.ctx.transform.applyToPoint(new a(P,V));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:de.x,y:de.y}),this.ctx.lastPoint=new a(de.x,de.y)},m.prototype.bezierCurveTo=function(P,V,ne,le,de,Ae){if(isNaN(de)||isNaN(Ae)||isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new a(de,Ae)),Z=this.ctx.transform.applyToPoint(new a(P,V)),ke=this.ctx.transform.applyToPoint(new a(ne,le));this.path.push({type:"bct",x1:Z.x,y1:Z.y,x2:ke.x,y2:ke.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new a(Ee.x,Ee.y)},m.prototype.arc=function(P,V,ne,le,de,Ae){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le)||isNaN(de))throw Fn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new a(P,V));P=Ee.x,V=Ee.y;var Z=this.ctx.transform.applyToPoint(new a(0,ne)),ke=this.ctx.transform.applyToPoint(new a(0,0));ne=Math.sqrt(Math.pow(Z.x-ke.x,2)+Math.pow(Z.y-ke.y,2))}Math.abs(de-le)>=2*Math.PI&&(le=0,de=2*Math.PI),this.path.push({type:"arc",x:P,y:V,radius:ne,startAngle:le,endAngle:de,counterclockwise:Ae})},m.prototype.arcTo=function(P,V,ne,le,de){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,V),this.lineTo(P+ne,V),this.lineTo(P+ne,V+le),this.lineTo(P,V+le),this.lineTo(P,V),this.lineTo(P+ne,V),this.lineTo(P,V)},m.prototype.fillRect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,V,ne,le),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},m.prototype.strokeRect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(P,V,ne,le),this.stroke())},m.prototype.clearRect=function(P,V,ne,le){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le))throw Fn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,V,ne,le))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(V),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(P){var V,ne,le,de;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))V=0,ne=0,le=0,de=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(Ae!==null)V=parseInt(Ae[1]),ne=parseInt(Ae[2]),le=parseInt(Ae[3]),de=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)V=parseInt(Ae[1]),ne=parseInt(Ae[2]),le=parseInt(Ae[3]),de=parseFloat(Ae[4]);else{if(de=1,typeof P=="string"&&P.charAt(0)!=="#"){var Ee=new k6(P);P=Ee.ok?Ee.toHex():"#000000"}P.length===4?(V=P.substring(1,2),V+=V,ne=P.substring(2,3),ne+=ne,le=P.substring(3,4),le+=le):(V=P.substring(1,3),ne=P.substring(3,5),le=P.substring(5,7)),V=parseInt(V,16),ne=parseInt(ne,16),le=parseInt(le,16)}}return{r:V,g:ne,b:le,a:de,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,V,ne,le){if(isNaN(V)||isNaN(ne)||typeof P!="string")throw Fn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!g.call(this)){var de=F(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;U.call(this,{text:P,x:V,y:ne,scale:Ae,angle:de,align:this.textAlign,maxWidth:le})}},m.prototype.strokeText=function(P,V,ne,le){if(isNaN(V)||isNaN(ne)||typeof P!="string")throw Fn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){le=isNaN(le)?void 0:le;var de=F(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;U.call(this,{text:P,x:V,y:ne,scale:Ae,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:le})}},m.prototype.measureText=function(P){if(typeof P!="string")throw Fn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,ne=this.pdf.internal.scaleFactor,le=V.internal.getFontSize(),de=V.getStringUnitWidth(P)*le/V.internal.scaleFactor,Ae=function(Ee){var Z=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Z}}),this};return new Ae({width:de*=Math.round(96*ne/72*1e4)/1e4})},m.prototype.scale=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new c(P,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},m.prototype.rotate=function(P){if(isNaN(P))throw Fn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.translate=function(P,V){if(isNaN(P)||isNaN(V))throw Fn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new c(1,0,0,1,P,V);this.ctx.transform=this.ctx.transform.multiply(ne)},m.prototype.transform=function(P,V,ne,le,de,Ae){if(isNaN(P)||isNaN(V)||isNaN(ne)||isNaN(le)||isNaN(de)||isNaN(Ae))throw Fn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new c(P,V,ne,le,de,Ae);this.ctx.transform=this.ctx.transform.multiply(Ee)},m.prototype.setTransform=function(P,V,ne,le,de,Ae){P=isNaN(P)?1:P,V=isNaN(V)?0:V,ne=isNaN(ne)?0:ne,le=isNaN(le)?1:le,de=isNaN(de)?0:de,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new c(P,V,ne,le,de,Ae)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,V,ne,le,de,Ae,Ee,Z,ke){var _e=this.pdf.getImageProperties(P),Re=1,$e=1,Ge=1,fe=1;le!==void 0&&Z!==void 0&&(Ge=Z/le,fe=ke/de,Re=_e.width/le*Z/le,$e=_e.height/de*ke/de),Ae===void 0&&(Ae=V,Ee=ne,V=0,ne=0),le!==void 0&&Z===void 0&&(Z=le,ke=de),le===void 0&&Z===void 0&&(Z=_e.width,ke=_e.height);for(var ee,Xe=this.ctx.transform.decompose(),We=F(Xe.rotate.shx),He=new c,Ke=(He=(He=(He=He.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale)).applyToRectangle(new l(Ae-V*Ge,Ee-ne*fe,le*Re,de*$e)),be=E.call(this,Ke),ce=[],Ne=0;Ne<be.length;Ne+=1)ce.indexOf(be[Ne])===-1&&ce.push(be[Ne]);if(A(ce),this.autoPaging)for(var he=ce[0],ve=ce[ce.length-1],rt=he;rt<ve+1;rt++){this.pdf.setPage(rt);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=rt===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=rt===1?0:Fe+(rt-2)*st;if(this.ctx.clip_path.length!==0){var Ct=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ee,this.posX+this.margin[3],-Ue+it+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=Ct}var ut=JSON.parse(JSON.stringify(Ke));ut=S([ut],this.posX+this.margin[3],-Ue+it+this.ctx.prevPageLastElemOffset)[0];var Gt=(rt>he||rt<ve)&&j.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,st,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ut.x,ut.y,ut.w,ut.h,null,null,We),Gt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,We)};var E=function(P,V,ne){var le=[];V=V||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":le.push(Math.floor((P.y+de)/ne)+1);break;case"arc":le.push(Math.floor((P.y+de-P.radius)/ne)+1),le.push(Math.floor((P.y+de+P.radius)/ne)+1);break;case"qct":var Ae=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);le.push(Math.floor((Ae.y+de)/ne)+1),le.push(Math.floor((Ae.y+Ae.h+de)/ne)+1);break;case"bct":var Ee=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);le.push(Math.floor((Ee.y+de)/ne)+1),le.push(Math.floor((Ee.y+Ee.h+de)/ne)+1);break;case"rect":le.push(Math.floor((P.y+de)/ne)+1),le.push(Math.floor((P.y+P.h+de)/ne)+1)}for(var Z=0;Z<le.length;Z+=1)for(;this.pdf.internal.getNumberOfPages()<le[Z];)b.call(this);return le},b=function(){var P=this.fillStyle,V=this.strokeStyle,ne=this.font,le=this.lineCap,de=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=V,this.font=ne,this.lineCap=le,this.lineWidth=de,this.lineJoin=Ae},S=function(P,V,ne){for(var le=0;le<P.length;le++)switch(P[le].type){case"bct":P[le].x2+=V,P[le].y2+=ne;case"qct":P[le].x1+=V,P[le].y1+=ne;case"mt":case"lt":case"arc":default:P[le].x+=V,P[le].y+=ne}return P},A=function(P){return P.sort(function(V,ne){return V-ne})},O=function(P,V){for(var ne,le,de=this.fillStyle,Ae=this.strokeStyle,Ee=this.lineCap,Z=this.lineWidth,ke=Math.abs(Z*this.ctx.transform.scaleX),_e=this.lineJoin,Re=JSON.parse(JSON.stringify(this.path)),$e=JSON.parse(JSON.stringify(this.path)),Ge=[],fe=0;fe<$e.length;fe++)if($e[fe].x!==void 0)for(var ee=E.call(this,$e[fe]),Xe=0;Xe<ee.length;Xe+=1)Ge.indexOf(ee[Xe])===-1&&Ge.push(ee[Xe]);for(var We=0;We<Ge.length;We++)for(;this.pdf.internal.getNumberOfPages()<Ge[We];)b.call(this);if(A(Ge),this.autoPaging)for(var He=Ge[0],Ke=Ge[Ge.length-1],be=He;be<Ke+1;be++){this.pdf.setPage(be),this.fillStyle=de,this.strokeStyle=Ae,this.lineCap=Ee,this.lineWidth=ke,this.lineJoin=_e;var ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=be===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=be===1?0:he+(be-2)*ve;if(this.ctx.clip_path.length!==0){var ot=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ne,this.posX+this.margin[3],-rt+Ne+this.ctx.prevPageLastElemOffset),G.call(this,P,!0),this.path=ot}if(le=JSON.parse(JSON.stringify(Re)),this.path=S(le,this.posX+this.margin[3],-rt+Ne+this.ctx.prevPageLastElemOffset),V===!1||be===0){var it=(be>He||be<Ke)&&j.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,ve,null).clip().discardPath()),G.call(this,P,V),it&&this.pdf.restoreGraphicsState()}this.lineWidth=Z}else this.lineWidth=ke,G.call(this,P,V),this.lineWidth=Z;this.path=Re},G=function(P,V){if((P!=="stroke"||V||!N.call(this))&&(P==="stroke"||V||!g.call(this))){for(var ne,le,de=[],Ae=this.path,Ee=0;Ee<Ae.length;Ee++){var Z=Ae[Ee];switch(Z.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Z,deltas:[],abs:[]});break;case"lt":var ke=de.length;if(Ae[Ee-1]&&!isNaN(Ae[Ee-1].x)&&(ne=[Z.x-Ae[Ee-1].x,Z.y-Ae[Ee-1].y],ke>0)){for(;ke>=0;ke--)if(de[ke-1].close!==!0&&de[ke-1].begin!==!0){de[ke-1].deltas.push(ne),de[ke-1].abs.push(Z);break}}break;case"bct":ne=[Z.x1-Ae[Ee-1].x,Z.y1-Ae[Ee-1].y,Z.x2-Ae[Ee-1].x,Z.y2-Ae[Ee-1].y,Z.x-Ae[Ee-1].x,Z.y-Ae[Ee-1].y],de[de.length-1].deltas.push(ne);break;case"qct":var _e=Ae[Ee-1].x+2/3*(Z.x1-Ae[Ee-1].x),Re=Ae[Ee-1].y+2/3*(Z.y1-Ae[Ee-1].y),$e=Z.x+2/3*(Z.x1-Z.x),Ge=Z.y+2/3*(Z.y1-Z.y),fe=Z.x,ee=Z.y;ne=[_e-Ae[Ee-1].x,Re-Ae[Ee-1].y,$e-Ae[Ee-1].x,Ge-Ae[Ee-1].y,fe-Ae[Ee-1].x,ee-Ae[Ee-1].y],de[de.length-1].deltas.push(ne);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Z)}}le=V?null:P==="stroke"?"stroke":"fill";for(var Xe=!1,We=0;We<de.length;We++)if(de[We].arc)for(var He=de[We].abs,Ke=0;Ke<He.length;Ke++){var be=He[Ke];be.type==="arc"?M.call(this,be.x,be.y,be.radius,be.startAngle,be.endAngle,be.counterclockwise,void 0,V,!Xe):Y.call(this,be.x,be.y),Xe=!0}else if(de[We].close===!0)this.pdf.internal.out("h"),Xe=!1;else if(de[We].begin!==!0){var ce=de[We].start.x,Ne=de[We].start.y;K.call(this,de[We].deltas,ce,Ne),Xe=!0}le&&re.call(this,le),V&&ae.call(this)}},ie=function(P){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-ne;case"top":return P+V-ne;case"hanging":return P+V-2*ne;case"middle":return P+V/2-ne;case"ideographic":return P;case"alphabetic":default:return P}},q=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(V,ne){this.colorStops.push([V,ne])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(P,V,ne,le,de,Ae,Ee,Z,ke){for(var _e=me.call(this,ne,le,de,Ae),Re=0;Re<_e.length;Re++){var $e=_e[Re];Re===0&&(ke?R.call(this,$e.x1+P,$e.y1+V):Y.call(this,$e.x1+P,$e.y1+V)),xe.call(this,P,V,$e.x2,$e.y2,$e.x3,$e.y3,$e.x4,$e.y4)}Z?ae.call(this):re.call(this,Ee)},re=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ae=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(P,V){this.pdf.internal.out(n(P)+" "+r(V)+" m")},U=function(P){var V;switch(P.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var ne=this.pdf.getTextDimensions(P.text),le=ie.call(this,P.y),de=q.call(this,le)-ne.h,Ae=this.ctx.transform.applyToPoint(new a(P.x,le)),Ee=this.ctx.transform.decompose(),Z=new c;Z=(Z=(Z=Z.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var ke,_e,Re,$e=this.ctx.transform.applyToRectangle(new l(P.x,le,ne.w,ne.h)),Ge=Z.applyToRectangle(new l(P.x,de,ne.w,ne.h)),fe=E.call(this,Ge),ee=[],Xe=0;Xe<fe.length;Xe+=1)ee.indexOf(fe[Xe])===-1&&ee.push(fe[Xe]);if(A(ee),this.autoPaging)for(var We=ee[0],He=ee[ee.length-1],Ke=We;Ke<He+1;Ke++){this.pdf.setPage(Ke);var be=Ke===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[2],he=Ne-this.margin[0],ve=this.pdf.internal.pageSize.width-this.margin[1],rt=ve-this.margin[3],ot=Ke===1?0:ce+(Ke-2)*he;if(this.ctx.clip_path.length!==0){var it=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ke,this.posX+this.margin[3],-1*ot+be),G.call(this,"fill",!0),this.path=it}var Fe=S([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-ot+be+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*P.scale),Re=this.lineWidth,this.lineWidth=Re*P.scale);var st=this.autoPaging!=="text";if(st||Fe.y+Fe.h<=Ne){if(st||Fe.y>=be&&Fe.x<=ve){var Ue=st?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ve-Fe.x)[0],Ct=S([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-ot+be+this.ctx.prevPageLastElemOffset)[0],ut=st&&(Ke>We||Ke<He)&&j.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,he,null).clip().discardPath()),this.pdf.text(Ue,Ct.x,Ct.y,{angle:P.angle,align:V,renderingMode:P.renderingMode}),ut&&this.pdf.restoreGraphicsState()}}else Fe.y<Ne&&(this.ctx.prevPageLastElemOffset+=Ne-Fe.y);P.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)}else P.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*P.scale),Re=this.lineWidth,this.lineWidth=Re*P.scale),this.pdf.text(P.text,Ae.x+this.posX,Ae.y+this.posY,{angle:P.angle,align:V,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Re)},Y=function(P,V,ne,le){ne=ne||0,le=le||0,this.pdf.internal.out(n(P+ne)+" "+r(V+le)+" l")},K=function(P,V,ne){return this.pdf.lines(P,V,ne,null,null)},xe=function(P,V,ne,le,de,Ae,Ee,Z){this.pdf.internal.out([t(i(ne+P)),t(s(le+V)),t(i(de+P)),t(s(Ae+V)),t(i(Ee+P)),t(s(Z+V)),"c"].join(" "))},me=function(P,V,ne,le){for(var de=2*Math.PI,Ae=Math.PI/2;V>ne;)V-=de;var Ee=Math.abs(ne-V);Ee<de&&le&&(Ee=de-Ee);for(var Z=[],ke=le?-1:1,_e=V;Ee>1e-5;){var Re=_e+ke*Math.min(Ee,Ae);Z.push(X.call(this,P,_e,Re)),Ee-=Math.abs(Re-_e),_e=Re}return Z},X=function(P,V,ne){var le=(ne-V)/2,de=P*Math.cos(le),Ae=P*Math.sin(le),Ee=de,Z=-Ae,ke=Ee*Ee+Z*Z,_e=ke+Ee*de+Z*Ae,Re=4/3*(Math.sqrt(2*ke*_e)-_e)/(Ee*Ae-Z*de),$e=Ee-Re*Z,Ge=Z+Re*Ee,fe=$e,ee=-Ge,Xe=le+V,We=Math.cos(Xe),He=Math.sin(Xe);return{x1:P*Math.cos(V),y1:P*Math.sin(V),x2:$e*We-Ge*He,y2:$e*He+Ge*We,x3:fe*We-ee*He,y3:fe*He+ee*We,x4:P*Math.cos(ne),y4:P*Math.sin(ne)}},F=function(P){return 180*P/Math.PI},z=function(P,V,ne,le,de,Ae){var Ee=P+.5*(ne-P),Z=V+.5*(le-V),ke=de+.5*(ne-de),_e=Ae+.5*(le-Ae),Re=Math.min(P,de,Ee,ke),$e=Math.max(P,de,Ee,ke),Ge=Math.min(V,Ae,Z,_e),fe=Math.max(V,Ae,Z,_e);return new l(Re,Ge,$e-Re,fe-Ge)},oe=function(P,V,ne,le,de,Ae,Ee,Z){var ke,_e,Re,$e,Ge,fe,ee,Xe,We,He,Ke,be,ce,Ne,he=ne-P,ve=le-V,rt=de-ne,ot=Ae-le,it=Ee-de,Fe=Z-Ae;for(_e=0;_e<41;_e++)We=(ee=(Re=P+(ke=_e/40)*he)+ke*((Ge=ne+ke*rt)-Re))+ke*(Ge+ke*(de+ke*it-Ge)-ee),He=(Xe=($e=V+ke*ve)+ke*((fe=le+ke*ot)-$e))+ke*(fe+ke*(Ae+ke*Fe-fe)-Xe),_e==0?(Ke=We,be=He,ce=We,Ne=He):(Ke=Math.min(Ke,We),be=Math.min(be,He),ce=Math.max(ce,We),Ne=Math.max(Ne,He));return new l(Math.round(Ke),Math.round(be),Math.round(ce-Ke),Math.round(Ne-be))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,V,ne=(P=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:V}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Dt.API),function(e){var t=function(s){var a,l,c,f,p,m,x,g,N,j;for(l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(p=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(p=((p=((p=((p=(p-(j=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)-(x=p%85))/85)%85,l.push(m+33,x+33,g+33,N+33,j+33)):l.push(122);return function(E,b){for(var S=b;S>0;S--)E.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var a,l,c,f,p,m=String,x="length",g=255,N="charCodeAt",j="slice",E="replace";for(s[j](-2),s=s[j](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],f=0,p=(s+=a="uuuuu"[j](s[x]%5||5))[x];p>f;f+=5)l=52200625*(s[N](f)-33)+614125*(s[N](f+1)-33)+7225*(s[N](f+2)-33)+85*(s[N](f+3)-33)+(s[N](f+4)-33),c.push(g&l>>24,g&l>>16,g&l>>8,g&l);return function(b,S){for(var A=S;A>0;A--)b.pop()}(c,a[x]),m.fromCharCode.apply(m,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},i=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return s=(a=gy(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};e.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(Dt.API),function(e){e.loadFile=function(t,n,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,f,p){var m=new XMLHttpRequest,x=0,g=function(N){var j=N.length,E=[],b=String.fromCharCode;for(x=0;x<j;x+=1)E.push(b(255&N.charCodeAt(x)));return E.join("")};if(m.open("GET",c,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?p(g(this.responseText)):p(void 0)}),m.send(null),f&&m.status===200)return g(m.responseText)}(i,s,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Dt.API),function(e){function t(){return(It.html2canvas?Promise.resolve(It.html2canvas):al(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(It.DOMPurify?Promise.resolve(It.DOMPurify):al(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=An(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),x=f.firstChild;x;x=x.nextSibling)p!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||m.appendChild(c(x,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var x=0;x<f.length;++x){var g=f[x],N=g.src.find(function(j){return j.format==="truetype"});N&&c.addFont(N.url,g.ref.name,g.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,p){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,f),m}).then(f,p).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=c.call(f,a,l);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,l,c){if(An(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+c).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var g,N=0,j=0;if(x.hasOwnProperty(m))N=x[m][1]/p,j=x[m][0]/p;else try{N=c[1],j=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",j>N&&(g=j,j=N,N=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",N>j&&(g=j,j=N,N=g)}return{width:j,height:N,unit:l,k:p,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(_y):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(e){return q_=e,this.internal.events.subscribe("postPutResources",function(){Km=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Km+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Km!==void 0&&z_!==void 0&&this.internal.out("/Names <</JavaScript "+Km+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],l=r.exec(a);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var m=n.internal.newObject();p.push(m);var x=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Dt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,s,a,l){var c,f=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(m){for(var x,g=256*m.charCodeAt(4)+m.charCodeAt(5),N=m.length,j={width:0,height:0,numcomponents:1},E=4;E<N;E+=2){if(E+=g,t.indexOf(m.charCodeAt(E+1))!==-1){x=256*m.charCodeAt(E+5)+m.charCodeAt(E+6),j={width:256*m.charCodeAt(E+7)+m.charCodeAt(E+8),height:x,numcomponents:m.charCodeAt(E+9)};break}g=256*m.charCodeAt(E+2)+m.charCodeAt(E+3)}return j}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}}(Dt.API);var Ud,Jm,W_,H_,V_,pB=function(){var e,t,n;function r(s){var a,l,c,f,p,m,x,g,N,j,E,b,S,A;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),N=(function(){var O,G;for(G=[],O=0;O<4;++O)G.push(String.fromCharCode(this.data[this.pos++]));return G}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*p/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,b=0;0<=a?b<a:b>a;0<=a?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((j=c-this.transparency.indexed.length)>0)for(S=0;0<=j?S<j:S>j;0<=j?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":x=(E=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,x)),this.text[g]=String.fromCharCode.apply(String,E.slice(x+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(A=this.colorType)===4||A===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,l;for(l=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,x,g,N){var j,E,b,S,A,O,G,ie,q,M,re,ae,R,U,Y,K,xe,me,X,F,z,oe=Math.ceil((f.width-m)/g),Le=Math.ceil((f.height-x)/N),P=f.width==oe&&f.height==Le;for(U=a*oe,ae=P?l:new Uint8Array(U*Le),O=s.length,R=0,E=0;R<Le&&c<O;){switch(s[c++]){case 0:for(S=xe=0;xe<U;S=xe+=1)ae[E++]=s[c++];break;case 1:for(S=me=0;me<U;S=me+=1)j=s[c++],A=S<a?0:ae[E-a],ae[E++]=(j+A)%256;break;case 2:for(S=X=0;X<U;S=X+=1)j=s[c++],b=(S-S%a)/a,Y=R&&ae[(R-1)*U+b*a+S%a],ae[E++]=(Y+j)%256;break;case 3:for(S=F=0;F<U;S=F+=1)j=s[c++],b=(S-S%a)/a,A=S<a?0:ae[E-a],Y=R&&ae[(R-1)*U+b*a+S%a],ae[E++]=(j+Math.floor((A+Y)/2))%256;break;case 4:for(S=z=0;z<U;S=z+=1)j=s[c++],b=(S-S%a)/a,A=S<a?0:ae[E-a],R===0?Y=K=0:(Y=ae[(R-1)*U+b*a+S%a],K=b&&ae[(R-1)*U+(b-1)*a+S%a]),G=A+Y-K,ie=Math.abs(G-A),M=Math.abs(G-Y),re=Math.abs(G-K),q=ie<=M&&ie<=re?A:M<=re?Y:K,ae[E++]=(j+q)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var V=((x+R*N)*f.width+m)*a,ne=R*U;for(S=0;S<oe;S+=1){for(var le=0;le<a;le+=1)l[V++]=ae[ne++];V+=(g-1)*a}}R++}}return s=V$(s),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},r.prototype.decodePalette=function(){var s,a,l,c,f,p,m,x,g;for(l=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+l.length),c=0,s=0,a=m=0,x=l.length;m<x;a=m+=3)f[c++]=l[a],f[c++]=l[a+1],f[c++]=l[a+2],f[c++]=(g=p[s++])!=null?g:255;return f},r.prototype.copyToImageData=function(s,a){var l,c,f,p,m,x,g,N,j,E,b;if(c=this.colors,j=null,l=this.hasAlphaChannel,this.palette.length&&(j=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),N=(f=s.data||s).length,m=j||a,p=x=0,c===1)for(;p<N;)g=j?4*a[p/4]:x,E=m[g++],f[p++]=E,f[p++]=E,f[p++]=E,f[p++]=l?m[g++]:255,x=g;else for(;p<N;)g=j?4*a[p/4]:x,f[p++]=m[g++],f[p++]=m[g++],f[p++]=m[g++],f[p++]=l?m[g++]:255,x=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(It)==="[object Window]"){try{t=It.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var a;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,l,c,f,p,m,x,g;if(this.animation){for(g=[],l=p=0,m=(x=this.animation.frames).length;p<m;l=++p)a=x[l],c=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,f),a.imageData=c,g.push(a.image=e(c));return g}},r.prototype.renderFrame=function(s,a){var l,c,f;return l=(c=this.animation.frames)[a],f=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),l.blendOp===0&&s.clearRect(l.xOffset,l.yOffset,l.width,l.height),s.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(s){var a,l,c,f,p,m,x=this;return l=0,m=this.animation,f=m.numFrames,c=m.frames,p=m.numPlays,(a=function(){var g,N;if(g=l++%f,N=c[g],x.renderFrame(s,g),f>1&&l/f<p)return x.animation._timeout=setTimeout(a,N.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,l;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function mB(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;s&&(l=t,c=a,t+=3*a);var f=!0,p=[],m=0,x=null,g=0,N=null;for(this.width=n,this.height=r;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=e[t++];m=e[t++]|e[t++]<<8,x=e[t++],!(1&j)&&(x=null),g=j>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var E=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,A=e[t++]|e[t++]<<8,O=e[t++],G=O>>6&1,ie=1<<(7&O)+1,q=l,M=c,re=!1;O>>7&&(re=!0,q=t,M=ie,t+=3*ie);var ae=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}p.push({x:E,y:b,width:S,height:A,has_local_palette:re,palette_offset:q,palette_size:M,data_offset:ae,data_length:t-ae,transparent_index:x,interlaced:!!G,delay:m,disposal:g});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return N},this.frameInfo=function(U){if(U<0||U>=p.length)throw new Error("Frame index out of range.");return p[U]},this.decodeAndBlitFrameBGRA=function(U,Y){var K=this.frameInfo(U),xe=K.width*K.height,me=new Uint8Array(xe);G_(e,K.data_offset,me,xe);var X=K.palette_offset,F=K.transparent_index;F===null&&(F=256);var z=K.width,oe=n-z,Le=z,P=4*(K.y*n+K.x),V=4*((K.y+K.height)*n+K.x),ne=P,le=4*oe;K.interlaced===!0&&(le+=4*n*7);for(var de=8,Ae=0,Ee=me.length;Ae<Ee;++Ae){var Z=me[Ae];if(Le===0&&(Le=z,(ne+=le)>=V&&(le=4*oe+4*n*(de-1),ne=P+(z+oe)*(de<<1),de>>=1)),Z===F)ne+=4;else{var ke=e[X+3*Z],_e=e[X+3*Z+1],Re=e[X+3*Z+2];Y[ne++]=Re,Y[ne++]=_e,Y[ne++]=ke,Y[ne++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(U,Y){var K=this.frameInfo(U),xe=K.width*K.height,me=new Uint8Array(xe);G_(e,K.data_offset,me,xe);var X=K.palette_offset,F=K.transparent_index;F===null&&(F=256);var z=K.width,oe=n-z,Le=z,P=4*(K.y*n+K.x),V=4*((K.y+K.height)*n+K.x),ne=P,le=4*oe;K.interlaced===!0&&(le+=4*n*7);for(var de=8,Ae=0,Ee=me.length;Ae<Ee;++Ae){var Z=me[Ae];if(Le===0&&(Le=z,(ne+=le)>=V&&(le=4*oe+4*n*(de-1),ne=P+(z+oe)*(de<<1),de>>=1)),Z===F)ne+=4;else{var ke=e[X+3*Z],_e=e[X+3*Z+1],Re=e[X+3*Z+2];Y[ne++]=ke,Y[ne++]=_e,Y[ne++]=Re,Y[ne++]=255}--Le}}}function G_(e,t,n,r){for(var i=e[t++],s=1<<i,a=s+1,l=a+1,c=i+1,f=(1<<c)-1,p=0,m=0,x=0,g=e[t++],N=new Int32Array(4096),j=null;;){for(;p<16&&g!==0;)m|=e[t++]<<p,p+=8,g===1?g=e[t++]:--g;if(p<c)break;var E=m&f;if(m>>=c,p-=c,E!==s){if(E===a)break;for(var b=E<l?E:j,S=0,A=b;A>s;)A=N[A]>>8,++S;var O=A;if(x+S+(b!==E?1:0)>r)return void Fn.log("Warning, gif stream longer than expected.");n[x++]=O;var G=x+=S;for(b!==E&&(n[x++]=O),A=b;S--;)A=N[A],n[--G]=255&A,A>>=8;j!==null&&l<4096&&(N[l++]=j<<8|O,l>=f+1&&c<12&&(++c,f=f<<1|1)),j=E}else l=a+1,f=(1<<(c=i+1))-1,j=null}return x!==r&&Fn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function qv(e){var t,n,r,i,s,a=Math.floor,l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(64),m=new Array(65535),x=new Array(65535),g=new Array(64),N=new Array(64),j=[],E=0,b=7,S=new Array(64),A=new Array(64),O=new Array(64),G=new Array(256),ie=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],xe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function me(P,V){for(var ne=0,le=0,de=new Array,Ae=1;Ae<=16;Ae++){for(var Ee=1;Ee<=P[Ae];Ee++)de[V[le]]=[],de[V[le]][0]=ne,de[V[le]][1]=Ae,le++,ne++;ne*=2}return de}function X(P){for(var V=P[0],ne=P[1]-1;ne>=0;)V&1<<ne&&(E|=1<<b),ne--,--b<0&&(E==255?(F(255),F(0)):F(E),b=7,E=0)}function F(P){j.push(P)}function z(P){F(P>>8&255),F(255&P)}function oe(P,V,ne,le,de){for(var Ae,Ee=de[0],Z=de[240],ke=function(He,Ke){var be,ce,Ne,he,ve,rt,ot,it,Fe,st,Ue=0;for(Fe=0;Fe<8;++Fe){be=He[Ue],ce=He[Ue+1],Ne=He[Ue+2],he=He[Ue+3],ve=He[Ue+4],rt=He[Ue+5],ot=He[Ue+6];var Ct=be+(it=He[Ue+7]),ut=be-it,Gt=ce+ot,jt=ce-ot,At=Ne+rt,mn=Ne-rt,Pt=he+ve,Qn=he-ve,Et=Ct+Pt,or=Ct-Pt,un=Gt+At,zt=Gt-At;He[Ue]=Et+un,He[Ue+4]=Et-un;var bt=.707106781*(zt+or);He[Ue+2]=or+bt,He[Ue+6]=or-bt;var qt=.382683433*((Et=Qn+mn)-(zt=jt+ut)),wn=.5411961*Et+qt,rn=1.306562965*zt+qt,lr=.707106781*(un=mn+jt),Rr=ut+lr,gt=ut-lr;He[Ue+5]=gt+wn,He[Ue+3]=gt-wn,He[Ue+1]=Rr+rn,He[Ue+7]=Rr-rn,Ue+=8}for(Ue=0,Fe=0;Fe<8;++Fe){be=He[Ue],ce=He[Ue+8],Ne=He[Ue+16],he=He[Ue+24],ve=He[Ue+32],rt=He[Ue+40],ot=He[Ue+48];var Zn=be+(it=He[Ue+56]),cr=be-it,Pn=ce+ot,On=ce-ot,Tn=Ne+rt,er=Ne-rt,Wi=he+ve,Ai=he-ve,vs=Zn+Wi,ys=Zn-Wi,xs=Pn+Tn,ws=Pn-Tn;He[Ue]=vs+xs,He[Ue+32]=vs-xs;var Hi=.707106781*(ws+ys);He[Ue+16]=ys+Hi,He[Ue+48]=ys-Hi;var Bs=.382683433*((vs=Ai+er)-(ws=On+cr)),No=.5411961*vs+Bs,ul=1.306562965*ws+Bs,dl=.707106781*(xs=er+On),fl=cr+dl,da=cr-dl;He[Ue+40]=da+No,He[Ue+24]=da-No,He[Ue+8]=fl+ul,He[Ue+56]=fl-ul,Ue++}for(Fe=0;Fe<64;++Fe)st=He[Fe]*Ke[Fe],g[Fe]=st>0?st+.5|0:st-.5|0;return g}(P,V),_e=0;_e<64;++_e)N[q[_e]]=ke[_e];var Re=N[0]-ne;ne=N[0],Re==0?X(le[0]):(X(le[x[Ae=32767+Re]]),X(m[Ae]));for(var $e=63;$e>0&&N[$e]==0;)$e--;if($e==0)return X(Ee),ne;for(var Ge,fe=1;fe<=$e;){for(var ee=fe;N[fe]==0&&fe<=$e;)++fe;var Xe=fe-ee;if(Xe>=16){Ge=Xe>>4;for(var We=1;We<=Ge;++We)X(Z);Xe&=15}Ae=32767+N[fe],X(de[(Xe<<4)+x[Ae]]),X(m[Ae]),fe++}return $e!=63&&X(Ee),ne}function Le(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(V){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var de=a((ne[le]*V+50)/100);de=Math.min(Math.max(de,1),255),l[q[le]]=de}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var Z=a((Ae[Ee]*V+50)/100);Z=Math.min(Math.max(Z,1),255),c[q[Ee]]=Z}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Re=0;Re<8;Re++)for(var $e=0;$e<8;$e++)f[_e]=1/(l[q[_e]]*ke[Re]*ke[$e]*8),p[_e]=1/(c[q[_e]]*ke[Re]*ke[$e]*8),_e++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,V){V&&Le(V),j=new Array,E=0,b=7,z(65496),z(65504),z(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),z(1),z(1),F(0),F(0),function(){z(65499),z(132),F(0);for(var ce=0;ce<64;ce++)F(l[ce]);F(1);for(var Ne=0;Ne<64;Ne++)F(c[Ne])}(),function(ce,Ne){z(65472),z(17),F(8),z(Ne),z(ce),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(P.width,P.height),function(){z(65476),z(418),F(0);for(var ce=0;ce<16;ce++)F(M[ce+1]);for(var Ne=0;Ne<=11;Ne++)F(re[Ne]);F(16);for(var he=0;he<16;he++)F(ae[he+1]);for(var ve=0;ve<=161;ve++)F(R[ve]);F(1);for(var rt=0;rt<16;rt++)F(U[rt+1]);for(var ot=0;ot<=11;ot++)F(Y[ot]);F(17);for(var it=0;it<16;it++)F(K[it+1]);for(var Fe=0;Fe<=161;Fe++)F(xe[Fe])}(),z(65498),z(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var ne=0,le=0,de=0;E=0,b=7,this.encode.displayName="_encode_";for(var Ae,Ee,Z,ke,_e,Re,$e,Ge,fe,ee=P.data,Xe=P.width,We=P.height,He=4*Xe,Ke=0;Ke<We;){for(Ae=0;Ae<He;){for(_e=He*Ke+Ae,$e=-1,Ge=0,fe=0;fe<64;fe++)Re=_e+(Ge=fe>>3)*He+($e=4*(7&fe)),Ke+Ge>=We&&(Re-=He*(Ke+1+Ge-We)),Ae+$e>=He&&(Re-=Ae+$e-He+4),Ee=ee[Re++],Z=ee[Re++],ke=ee[Re++],S[fe]=(ie[Ee]+ie[Z+256>>0]+ie[ke+512>>0]>>16)-128,A[fe]=(ie[Ee+768>>0]+ie[Z+1024>>0]+ie[ke+1280>>0]>>16)-128,O[fe]=(ie[Ee+1280>>0]+ie[Z+1536>>0]+ie[ke+1792>>0]>>16)-128;ne=oe(S,f,ne,t,r),le=oe(A,p,le,n,i),de=oe(O,p,de,n,i),Ae+=32}Ke+=8}if(b>=0){var be=[];be[1]=b+1,be[0]=(1<<b+1)-1,X(be)}return z(65497),new Uint8Array(j)},e=e||50,function(){for(var P=String.fromCharCode,V=0;V<256;V++)G[V]=P(V)}(),t=me(M,re),n=me(U,Y),r=me(ae,R),i=me(K,xe),function(){for(var P=1,V=2,ne=1;ne<=15;ne++){for(var le=P;le<V;le++)x[32767+le]=ne,m[32767+le]=[],m[32767+le][1]=ne,m[32767+le][0]=le;for(var de=-(V-1);de<=-P;de++)x[32767+de]=ne,m[32767+de]=[],m[32767+de][1]=ne,m[32767+de][0]=V-1+de;P<<=1,V<<=1}}(),function(){for(var P=0;P<256;P++)ie[P]=19595*P,ie[P+256>>0]=38470*P,ie[P+512>>0]=7471*P+32768,ie[P+768>>0]=-11059*P,ie[P+1024>>0]=-21709*P,ie[P+1280>>0]=32768*P+8421375,ie[P+1536>>0]=-27439*P,ie[P+1792>>0]=-5329*P}(),Le(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ka(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y_(e){function t(M){if(!M)throw Error("assert :P")}function n(M,re,ae){for(var R=0;4>R;R++)if(M[re+R]!=ae.charCodeAt(R))return!0;return!1}function r(M,re,ae,R,U){for(var Y=0;Y<U;Y++)M[re+Y]=ae[R+Y]}function i(M,re,ae,R){for(var U=0;U<R;U++)M[re+U]=ae}function s(M){return new Int32Array(M)}function a(M,re){for(var ae=[],R=0;R<M;R++)ae.push(new re);return ae}function l(M,re){var ae=[];return function R(U,Y,K){for(var xe=K[Y],me=0;me<xe&&(U.push(K.length>Y+1?[]:new re),!(K.length<Y+1));me++)R(U[me],Y+1,K)}(ae,0,M),ae}var c=function(){var M=this;function re(h,v){for(var _=1<<v-1>>>0;h&_;)_>>>=1;return _?(h&_-1)+_:h}function ae(h,v,_,L,T){t(!(L%_));do h[v+(L-=_)]=T;while(0<L)}function R(h,v,_,L,T){if(t(2328>=T),512>=T)var $=s(512);else if(($=s(T))==null)return 0;return function(B,W,J,te,we,Ie){var Oe,Ce,Je=W,Be=1<<J,ye=s(16),Se=s(16);for(t(we!=0),t(te!=null),t(B!=null),t(0<J),Ce=0;Ce<we;++Ce){if(15<te[Ce])return 0;++ye[te[Ce]]}if(ye[0]==we)return 0;for(Se[1]=0,Oe=1;15>Oe;++Oe){if(ye[Oe]>1<<Oe)return 0;Se[Oe+1]=Se[Oe]+ye[Oe]}for(Ce=0;Ce<we;++Ce)Oe=te[Ce],0<te[Ce]&&(Ie[Se[Oe]++]=Ce);if(Se[15]==1)return(te=new U).g=0,te.value=Ie[0],ae(B,Je,1,Be,te),Be;var Ye,nt=-1,Ve=Be-1,ht=0,ct=1,xt=1,dt=1<<J;for(Ce=0,Oe=1,we=2;Oe<=J;++Oe,we<<=1){if(ct+=xt<<=1,0>(xt-=ye[Oe]))return 0;for(;0<ye[Oe];--ye[Oe])(te=new U).g=Oe,te.value=Ie[Ce++],ae(B,Je+ht,we,dt,te),ht=re(ht,Oe)}for(Oe=J+1,we=2;15>=Oe;++Oe,we<<=1){if(ct+=xt<<=1,0>(xt-=ye[Oe]))return 0;for(;0<ye[Oe];--ye[Oe]){if(te=new U,(ht&Ve)!=nt){for(Je+=dt,Ye=1<<(nt=Oe)-J;15>nt&&!(0>=(Ye-=ye[nt]));)++nt,Ye<<=1;Be+=dt=1<<(Ye=nt-J),B[W+(nt=ht&Ve)].g=Ye+J,B[W+nt].value=Je-W-nt}te.g=Oe-J,te.value=Ie[Ce++],ae(B,Je+(ht>>J),we,dt,te),ht=re(ht,Oe)}}return ct!=2*Se[15]-1?0:Be}(h,v,_,L,T,$)}function U(){this.value=this.g=0}function Y(){this.value=this.g=0}function K(){this.G=a(5,U),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Br,Y)}function xe(h,v,_,L){t(h!=null),t(v!=null),t(2147483648>L),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=_,h.Jd=v,h.Yc=_+L,h.Zc=4<=L?_+L-4+1:_,Ae(h)}function me(h,v){for(var _=0;0<v--;)_|=Z(h,128)<<v;return _}function X(h,v){var _=me(h,v);return Ee(h)?-_:_}function F(h,v,_,L){var T,$=0;for(t(h!=null),t(v!=null),t(4294967288>L),h.Sb=L,h.Ra=0,h.u=0,h.h=0,4<L&&(L=4),T=0;T<L;++T)$+=v[_+T]<<8*T;h.Ra=$,h.bb=L,h.oa=v,h.pa=_}function z(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Tl-8>>>0,++h.bb,h.u-=8;ne(h)&&(h.h=1,h.u=0)}function oe(h,v){if(t(0<=v),!h.h&&v<=Pl){var _=V(h)&_s[v];return h.u+=v,z(h),_}return h.h=1,h.u=0}function Le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(h){return h.Ra>>>(h.u&Tl-1)>>>0}function ne(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Tl}function le(h,v){h.u=v,h.h=ne(h)}function de(h){h.u>=Lo&&(t(h.u>=Lo),z(h))}function Ae(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ee(h){return me(h,1)}function Z(h,v){var _=h.Ca;0>h.b&&Ae(h);var L=h.b,T=_*v>>>8,$=(h.I>>>L>T)+0;for($?(_-=T,h.I-=T+1<<L>>>0):_=T+1,L=_,T=0;256<=L;)T+=8,L>>=8;return L=7^T+ri[L],h.b-=L,h.Ca=(_<<L)-1,$}function ke(h,v,_){h[v+0]=_>>24&255,h[v+1]=_>>16&255,h[v+2]=_>>8&255,h[v+3]=_>>0&255}function _e(h,v){return h[v+0]<<0|h[v+1]<<8}function Re(h,v){return _e(h,v)|h[v+2]<<16}function $e(h,v){return _e(h,v)|_e(h,v+2)<<16}function Ge(h,v){var _=1<<v;return t(h!=null),t(0<v),h.X=s(_),h.X==null?0:(h.Mb=32-v,h.Xa=v,1)}function fe(h,v){t(h!=null),t(v!=null),t(h.Xa==v.Xa),r(v.X,0,h.X,0,1<<v.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function Xe(h,v,_,L){t(_!=null),t(L!=null);var T=_[0],$=L[0];return T==0&&(T=(h*$+v/2)/v),$==0&&($=(v*T+h/2)/h),0>=T||0>=$?0:(_[0]=T,L[0]=$,1)}function We(h,v){return h+(1<<v)-1>>>v}function He(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Ke(h,v){M[v]=function(_,L,T,$,B,W,J){var te;for(te=0;te<B;++te){var we=M[h](W[J+te-1],T,$+te);W[J+te]=He(_[L+te],we)}}}function be(){this.ud=this.hd=this.jd=0}function ce(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function Ne(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function he(h,v){return Ne(h+(h-v+.5>>1))}function ve(h,v,_){return Math.abs(v-_)-Math.abs(h-_)}function rt(h,v,_,L,T,$,B){for(L=$[B-1],_=0;_<T;++_)$[B+_]=L=He(h[v+_],L)}function ot(h,v,_,L,T){var $;for($=0;$<_;++$){var B=h[v+$],W=B>>8&255,J=16711935&(J=(J=16711935&B)+((W<<16)+W));L[T+$]=(4278255360&B)+J>>>0}}function it(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function Fe(h,v,_,L,T,$){var B;for(B=0;B<L;++B){var W=v[_+B],J=W>>>8,te=W,we=255&(we=(we=W>>>16)+((h.jd<<24>>24)*(J<<24>>24)>>>5));te=255&(te=(te=te+((h.hd<<24>>24)*(J<<24>>24)>>>5))+((h.ud<<24>>24)*(we<<24>>24)>>>5)),T[$+B]=(4278255360&W)+(we<<16)+te}}function st(h,v,_,L,T){M[v]=function($,B,W,J,te,we,Ie,Oe,Ce){for(J=Ie;J<Oe;++J)for(Ie=0;Ie<Ce;++Ie)te[we++]=T(W[L($[B++])])},M[h]=function($,B,W,J,te,we,Ie){var Oe=8>>$.b,Ce=$.Ea,Je=$.K[0],Be=$.w;if(8>Oe)for($=(1<<$.b)-1,Be=(1<<Oe)-1;B<W;++B){var ye,Se=0;for(ye=0;ye<Ce;++ye)ye&$||(Se=L(J[te++])),we[Ie++]=T(Je[Se&Be]),Se>>=Oe}else M["VP8LMapColor"+_](J,te,Je,Be,we,Ie,B,W,Ce)}}function Ue(h,v,_,L,T){for(_=v+_;v<_;){var $=h[v++];L[T++]=$>>16&255,L[T++]=$>>8&255,L[T++]=$>>0&255}}function Ct(h,v,_,L,T){for(_=v+_;v<_;){var $=h[v++];L[T++]=$>>16&255,L[T++]=$>>8&255,L[T++]=$>>0&255,L[T++]=$>>24&255}}function ut(h,v,_,L,T){for(_=v+_;v<_;){var $=(B=h[v++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;L[T++]=$,L[T++]=B}}function Gt(h,v,_,L,T){for(_=v+_;v<_;){var $=(B=h[v++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;L[T++]=$,L[T++]=B}}function jt(h,v,_,L,T){for(_=v+_;v<_;){var $=h[v++];L[T++]=$>>0&255,L[T++]=$>>8&255,L[T++]=$>>16&255}}function At(h,v,_,L,T,$){if($==0)for(_=v+_;v<_;)ke(L,(($=h[v++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),T+=32;else r(L,T,h,v,_)}function mn(h,v){M[v][0]=M[h+"0"],M[v][1]=M[h+"1"],M[v][2]=M[h+"2"],M[v][3]=M[h+"3"],M[v][4]=M[h+"4"],M[v][5]=M[h+"5"],M[v][6]=M[h+"6"],M[v][7]=M[h+"7"],M[v][8]=M[h+"8"],M[v][9]=M[h+"9"],M[v][10]=M[h+"10"],M[v][11]=M[h+"11"],M[v][12]=M[h+"12"],M[v][13]=M[h+"13"],M[v][14]=M[h+"0"],M[v][15]=M[h+"0"]}function Pt(h){return h==Il||h==Ol||h==Rl||h==Xf}function Qn(){this.eb=[],this.size=this.A=this.fb=0}function Et(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function or(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qn,this.f.kb=new Et,this.sd=null}function un(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function qt(h,v){var _=h.T,L=v.ba.f.RGBA,T=L.eb,$=L.fb+h.ka*L.A,B=Pi[v.ba.S],W=h.y,J=h.O,te=h.f,we=h.N,Ie=h.ea,Oe=h.W,Ce=v.cc,Je=v.dc,Be=v.Mc,ye=v.Nc,Se=h.ka,Ye=h.ka+h.T,nt=h.U,Ve=nt+1>>1;for(Se==0?B(W,J,null,null,te,we,Ie,Oe,te,we,Ie,Oe,T,$,null,null,nt):(B(v.ec,v.fc,W,J,Ce,Je,Be,ye,te,we,Ie,Oe,T,$-L.A,T,$,nt),++_);Se+2<Ye;Se+=2)Ce=te,Je=we,Be=Ie,ye=Oe,we+=h.Rc,Oe+=h.Rc,$+=2*L.A,B(W,(J+=2*h.fa)-h.fa,W,J,Ce,Je,Be,ye,te,we,Ie,Oe,T,$-L.A,T,$,nt);return J+=h.fa,h.j+Ye<h.o?(r(v.ec,v.fc,W,J,nt),r(v.cc,v.dc,te,we,Ve),r(v.Mc,v.Nc,Ie,Oe,Ve),_--):1&Ye||B(W,J,null,null,te,we,Ie,Oe,te,we,Ie,Oe,T,$+L.A,null,null,nt),_}function wn(h,v,_){var L=h.F,T=[h.J];if(L!=null){var $=h.U,B=v.ba.S,W=B==vd||B==Rl;v=v.ba.f.RGBA;var J=[0],te=h.ka;J[0]=h.T,h.Kb&&(te==0?--J[0]:(--te,T[0]-=h.width),h.j+h.ka+h.T==h.o&&(J[0]=h.o-h.j-te));var we=v.eb;te=v.fb+te*v.A,h=Mn(L,T[0],h.width,$,J,we,te+(W?0:3),v.A),t(_==J),h&&Pt(B)&&Li(we,te,W,$,J,v.A)}return 0}function rn(h){var v=h.ma,_=v.ba.S,L=11>_,T=_==Ya||_==Io||_==vd||_==Jf||_==12||Pt(_);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!eu(v.Oa,h,T?11:12))return 0;if(T&&Pt(_)&&tt(),h.da)alert("todo:use_scaling");else{if(L){if(v.Ib=bt,h.Kb){if(_=h.U+1>>1,v.memory=s(h.U+2*_),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+_,v.Ib=qt,tt()}}else alert("todo:EmitYUV");T&&(v.Jb=wn,L&&Me())}if(L&&!Yp){for(h=0;256>h;++h)ya[h]=89858*(h-128)+Ys>>xd,u1[h]=-22014*(h-128)+Ys,c1[h]=-45773*(h-128),l1[h]=113618*(h-128)+Ys>>xd;for(h=cu;h<eh;++h)v=76283*(h-16)+Ys>>xd,d1[h-cu]=Rn(v,255),f1[h-cu]=Rn(v+8>>4,15);Yp=1}return 1}function lr(h){var v=h.ma,_=h.U,L=h.T;return t(!(1&h.ka)),0>=_||0>=L?0:(_=v.Ib(h,v),v.Jb!=null&&v.Jb(h,v,_),v.Dc+=_,1)}function Rr(h){h.ma.memory=null}function gt(h,v,_,L){return oe(h,8)!=47?0:(v[0]=oe(h,14)+1,_[0]=oe(h,14)+1,L[0]=oe(h,1),oe(h,3)!=0?0:!h.h)}function Zn(h,v){if(4>h)return h+1;var _=h-2>>1;return(2+(1&h)<<_)+oe(v,_)+1}function cr(h,v){return 120<v?v-120:1<=(_=((_=n1[v-1])>>4)*h+(8-(15&_)))?_:1;var _}function Pn(h,v,_){var L=V(_),T=h[v+=255&L].g-8;return 0<T&&(le(_,_.u+8),L=V(_),v+=h[v].value,v+=L&(1<<T)-1),le(_,_.u+h[v].g),h[v].value}function On(h,v,_){return _.g+=h.g,_.value+=h.value<<v>>>0,t(8>=_.g),h.g}function Tn(h,v,_){var L=h.xc;return t((v=L==0?0:h.vc[h.md*(_>>L)+(v>>L)])<h.Wb),h.Ya[v]}function er(h,v,_,L){var T=h.ab,$=h.c*v,B=h.C;v=B+v;var W=_,J=L;for(L=h.Ta,_=h.Ua;0<T--;){var te=h.gc[T],we=B,Ie=v,Oe=W,Ce=J,Je=(J=L,W=_,te.Ea);switch(t(we<Ie),t(Ie<=te.nc),te.hc){case 2:gd(Oe,Ce,(Ie-we)*Je,J,W);break;case 0:var Be=we,ye=Ie,Se=J,Ye=W,nt=(dt=te).Ea;Be==0&&(Vs(Oe,Ce,null,null,1,Se,Ye),rt(Oe,Ce+1,0,0,nt-1,Se,Ye+1),Ce+=nt,Ye+=nt,++Be);for(var Ve=1<<dt.b,ht=Ve-1,ct=We(nt,dt.b),xt=dt.K,dt=dt.w+(Be>>dt.b)*ct;Be<ye;){var fn=xt,yn=dt,Zt=1;for(Va(Oe,Ce,Se,Ye-nt,1,Se,Ye);Zt<nt;){var Ut=(Zt&~ht)+Ve;Ut>nt&&(Ut=nt),(0,ha[fn[yn++]>>8&15])(Oe,Ce+ +Zt,Se,Ye+Zt-nt,Ut-Zt,Se,Ye+Zt),Zt=Ut}Ce+=nt,Ye+=nt,++Be&ht||(dt+=ct)}Ie!=te.nc&&r(J,W-Je,J,W+(Ie-we-1)*Je,Je);break;case 1:for(Je=Oe,ye=Ce,nt=(Oe=te.Ea)-(Ye=Oe&~(Se=(Ce=1<<te.b)-1)),Be=We(Oe,te.b),Ve=te.K,te=te.w+(we>>te.b)*Be;we<Ie;){for(ht=Ve,ct=te,xt=new be,dt=ye+Ye,fn=ye+Oe;ye<dt;)it(ht[ct++],xt),Po(xt,Je,ye,Ce,J,W),ye+=Ce,W+=Ce;ye<fn&&(it(ht[ct++],xt),Po(xt,Je,ye,nt,J,W),ye+=nt,W+=nt),++we&Se||(te+=Be)}break;case 3:if(Oe==J&&Ce==W&&0<te.b){for(ye=J,Oe=Je=W+(Ie-we)*Je-(Ye=(Ie-we)*We(te.Ea,te.b)),Ce=J,Se=W,Be=[],Ye=(nt=Ye)-1;0<=Ye;--Ye)Be[Ye]=Ce[Se+Ye];for(Ye=nt-1;0<=Ye;--Ye)ye[Oe+Ye]=Be[Ye];Ji(te,we,Ie,J,Je,J,W)}else Ji(te,we,Ie,Oe,Ce,J,W)}W=L,J=_}J!=_&&r(L,_,W,J,$)}function Wi(h,v){var _=h.V,L=h.Ba+h.c*h.C,T=v-h.C;if(t(v<=h.l.o),t(16>=T),0<T){var $=h.l,B=h.Ta,W=h.Ua,J=$.width;if(er(h,T,_,L),T=W=[W],t((_=h.C)<(L=v)),t($.v<$.va),L>$.o&&(L=$.o),_<$.j){var te=$.j-_;_=$.j,T[0]+=te*J}if(_>=L?_=0:(T[0]+=4*$.v,$.ka=_-$.j,$.U=$.va-$.v,$.T=L-_,_=1),_){if(W=W[0],11>(_=h.ca).S){var we=_.f.RGBA,Ie=(L=_.S,T=$.U,$=$.T,te=we.eb,we.A),Oe=$;for(we=we.fb+h.Ma*we.A;0<Oe--;){var Ce=B,Je=W,Be=T,ye=te,Se=we;switch(L){case iu:gi(Ce,Je,Be,ye,Se);break;case Ya:ii(Ce,Je,Be,ye,Se);break;case Il:ii(Ce,Je,Be,ye,Se),Li(ye,Se,0,Be,1,0);break;case Ka:vi(Ce,Je,Be,ye,Se);break;case Io:At(Ce,Je,Be,ye,Se,1);break;case Ol:At(Ce,Je,Be,ye,Se,1),Li(ye,Se,0,Be,1,0);break;case vd:At(Ce,Je,Be,ye,Se,0);break;case Rl:At(Ce,Je,Be,ye,Se,0),Li(ye,Se,1,Be,1,0);break;case Jf:Ga(Ce,Je,Be,ye,Se);break;case Xf:Ga(Ce,Je,Be,ye,Se),_n(ye,Se,Be,1,0);break;case zp:pa(Ce,Je,Be,ye,Se);break;default:t(0)}W+=J,we+=Ie}h.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=_.height)}}h.C=v,t(h.C<=h.i)}function Ai(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var _=h.Ya[v].G,L=h.Ya[v].H;if(0<_[1][L[1]+0].g||0<_[2][L[2]+0].g||0<_[3][L[3]+0].g)return 0}return 1}function vs(h,v,_,L,T,$){if(h.Z!=0){var B=h.qd,W=h.rd;for(t(es[h.Z]!=null);v<_;++v)es[h.Z](B,W,L,T,L,T,$),B=L,W=T,T+=$;h.qd=B,h.rd=W}}function ys(h,v){var _=h.l.ma,L=_.Z==0||_.Z==1?h.l.j:h.C;if(L=h.C<L?L:h.C,t(v<=h.l.o),v>L){var T=h.l.width,$=_.ca,B=_.tb+T*L,W=h.V,J=h.Ba+h.c*L,te=h.gc;t(h.ab==1),t(te[0].hc==3),fa(te[0],L,v,W,J,$,B),vs(_,L,v,$,B,T)}h.C=h.Ma=v}function xs(h,v,_,L,T,$,B){var W=h.$/L,J=h.$%L,te=h.m,we=h.s,Ie=_+h.$,Oe=Ie;T=_+L*T;var Ce=_+L*$,Je=280+we.ua,Be=h.Pb?W:16777216,ye=0<we.ua?we.Wa:null,Se=we.wc,Ye=Ie<Ce?Tn(we,J,W):null;t(h.C<$),t(Ce<=T);var nt=!1;e:for(;;){for(;nt||Ie<Ce;){var Ve=0;if(W>=Be){var ht=Ie-_;t((Be=h).Pb),Be.wd=Be.m,Be.xd=ht,0<Be.s.ua&&fe(Be.s.Wa,Be.s.vb),Be=W+Hp}if(J&Se||(Ye=Tn(we,J,W)),t(Ye!=null),Ye.Qb&&(v[Ie]=Ye.qb,nt=!0),!nt)if(de(te),Ye.jc){Ve=te,ht=v;var ct=Ie,xt=Ye.pd[V(Ve)&Br-1];t(Ye.jc),256>xt.g?(le(Ve,Ve.u+xt.g),ht[ct]=xt.value,Ve=0):(le(Ve,Ve.u+xt.g-256),t(256<=xt.value),Ve=xt.value),Ve==0&&(nt=!0)}else Ve=Pn(Ye.G[0],Ye.H[0],te);if(te.h)break;if(nt||256>Ve){if(!nt)if(Ye.nd)v[Ie]=(Ye.qb|Ve<<8)>>>0;else{if(de(te),nt=Pn(Ye.G[1],Ye.H[1],te),de(te),ht=Pn(Ye.G[2],Ye.H[2],te),ct=Pn(Ye.G[3],Ye.H[3],te),te.h)break;v[Ie]=(ct<<24|nt<<16|Ve<<8|ht)>>>0}if(nt=!1,++Ie,++J>=L&&(J=0,++W,B!=null&&W<=$&&!(W%16)&&B(h,W),ye!=null))for(;Oe<Ie;)Ve=v[Oe++],ye.X[(506832829*Ve&4294967295)>>>ye.Mb]=Ve}else if(280>Ve){if(Ve=Zn(Ve-256,te),ht=Pn(Ye.G[4],Ye.H[4],te),de(te),ht=cr(L,ht=Zn(ht,te)),te.h)break;if(Ie-_<ht||T-Ie<Ve)break e;for(ct=0;ct<Ve;++ct)v[Ie+ct]=v[Ie+ct-ht];for(Ie+=Ve,J+=Ve;J>=L;)J-=L,++W,B!=null&&W<=$&&!(W%16)&&B(h,W);if(t(Ie<=T),J&Se&&(Ye=Tn(we,J,W)),ye!=null)for(;Oe<Ie;)Ve=v[Oe++],ye.X[(506832829*Ve&4294967295)>>>ye.Mb]=Ve}else{if(!(Ve<Je))break e;for(nt=Ve-280,t(ye!=null);Oe<Ie;)Ve=v[Oe++],ye.X[(506832829*Ve&4294967295)>>>ye.Mb]=Ve;Ve=Ie,t(!(nt>>>(ht=ye).Xa)),v[Ve]=ht.X[nt],nt=!0}nt||t(te.h==ne(te))}if(h.Pb&&te.h&&Ie<T)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&fe(h.s.vb,h.s.Wa);else{if(te.h)break e;B!=null&&B(h,W>$?$:W),h.a=0,h.$=Ie-_}return 1}return h.a=3,0}function ws(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;v!=null&&(v.X=null),h.vb=null,t(h!=null)}function Hi(){var h=new kl;return h==null?null:(h.a=0,h.xb=ou,mn("Predictor","VP8LPredictors"),mn("Predictor","VP8LPredictors_C"),mn("PredictorAdd","VP8LPredictorsAdd"),mn("PredictorAdd","VP8LPredictorsAdd_C"),gd=ot,Po=Fe,gi=Ue,ii=Ct,Ga=ut,pa=Gt,vi=jt,M.VP8LMapColor32b=Ml,M.VP8LMapColor8b=mi,h)}function Bs(h,v,_,L,T){var $=1,B=[h],W=[v],J=L.m,te=L.s,we=null,Ie=0;e:for(;;){if(_)for(;$&&oe(J,1);){var Oe=B,Ce=W,Je=L,Be=1,ye=Je.m,Se=Je.gc[Je.ab],Ye=oe(ye,2);if(Je.Oc&1<<Ye)$=0;else{switch(Je.Oc|=1<<Ye,Se.hc=Ye,Se.Ea=Oe[0],Se.nc=Ce[0],Se.K=[null],++Je.ab,t(4>=Je.ab),Ye){case 0:case 1:Se.b=oe(ye,3)+2,Be=Bs(We(Se.Ea,Se.b),We(Se.nc,Se.b),0,Je,Se.K),Se.K=Se.K[0];break;case 3:var nt,Ve=oe(ye,8)+1,ht=16<Ve?0:4<Ve?1:2<Ve?2:3;if(Oe[0]=We(Se.Ea,ht),Se.b=ht,nt=Be=Bs(Ve,1,0,Je,Se.K)){var ct,xt=Ve,dt=Se,fn=1<<(8>>dt.b),yn=s(fn);if(yn==null)nt=0;else{var Zt=dt.K[0],Ut=dt.w;for(yn[0]=dt.K[0][0],ct=1;ct<1*xt;++ct)yn[ct]=He(Zt[Ut+ct],yn[ct-1]);for(;ct<4*fn;++ct)yn[ct]=0;dt.K[0]=null,dt.K[0]=yn,nt=1}}Be=nt;break;case 2:break;default:t(0)}$=Be}}if(B=B[0],W=W[0],$&&oe(J,1)&&!($=1<=(Ie=oe(J,4))&&11>=Ie)){L.a=3;break e}var jn;if(jn=$)t:{var kn,$t,yr,ai=L,nn=B,Vr=W,xn=Ie,sr=_,oi=ai.m,dr=ai.s,Gn=[null],Gr=1,Dn=0,ts=r1[xn];n:for(;;){if(sr&&oe(oi,1)){var Ir=oe(oi,3)+2,xa=We(nn,Ir),Oo=We(Vr,Ir),Xa=xa*Oo;if(!Bs(xa,Oo,0,ai,Gn))break n;for(Gn=Gn[0],dr.xc=Ir,kn=0;kn<Xa;++kn){var Qa=Gn[kn]>>8&65535;Gn[kn]=Qa,Qa>=Gr&&(Gr=Qa+1)}}if(oi.h)break n;for($t=0;5>$t;++$t){var In=Wp[$t];!$t&&0<xn&&(In+=1<<xn),Dn<In&&(Dn=In)}var bd=a(Gr*ts,U),Jp=Gr,Xp=a(Jp,K);if(Xp==null)var Za=null;else t(65536>=Jp),Za=Xp;var uu=s(Dn);if(Za==null||uu==null||bd==null){ai.a=1;break n}var _d=bd;for(kn=yr=0;kn<Gr;++kn){var Mi=Za[kn],Ro=Mi.G,zl=Mi.H,Qp=0,Sd=1,th=0;for($t=0;5>$t;++$t){In=Wp[$t],Ro[$t]=_d,zl[$t]=yr,!$t&&0<xn&&(In+=1<<xn);i:{var ql,nh=In,Wl=ai,Hl=uu,Zp=_d,em=yr,Vl=0,eo=Wl.m,tm=oe(eo,1);if(i(Hl,0,0,nh),tm){var nm=oe(eo,1)+1,m1=oe(eo,1),rh=oe(eo,m1==0?1:8);Hl[rh]=1,nm==2&&(Hl[rh=oe(eo,8)]=1);var Nd=1}else{var jd=s(19),ih=oe(eo,4)+4;if(19<ih){Wl.a=3;var Gl=0;break i}for(ql=0;ql<ih;++ql)jd[Hr[ql]]=oe(eo,3);var sh=void 0,Fo=void 0,Yt=Wl,g1=jd,kd=nh,Yl=Hl,Ed=0,to=Yt.m,rm=8,Di=a(128,U);r:for(;R(Di,0,7,g1,19);){if(oe(to,1)){var v1=2+2*oe(to,3);if((sh=2+oe(to,v1))>kd)break r}else sh=kd;for(Fo=0;Fo<kd&&sh--;){de(to);var du=Di[0+(127&V(to))];le(to,to.u+du.g);var no=du.value;if(16>no)Yl[Fo++]=no,no!=0&&(rm=no);else{var im=no==16,ah=no-16,Ii=t1[ah],wa=oe(to,qp[ah])+Ii;if(Fo+wa>kd)break r;for(var oh=im?rm:0;0<wa--;)Yl[Fo++]=oh}}Ed=1;break r}Ed||(Yt.a=3),Nd=Ed}(Nd=Nd&&!eo.h)&&(Vl=R(Zp,em,8,Hl,nh)),Nd&&Vl!=0?Gl=Vl:(Wl.a=3,Gl=0)}if(Gl==0)break n;if(Sd&&Nr[$t]==1&&(Sd=_d[yr].g==0),Qp+=_d[yr].g,yr+=Gl,3>=$t){var Kl,Jl=uu[0];for(Kl=1;Kl<In;++Kl)uu[Kl]>Jl&&(Jl=uu[Kl]);th+=Jl}}if(Mi.nd=Sd,Mi.Qb=0,Sd&&(Mi.qb=(Ro[3][zl[3]+0].value<<24|Ro[1][zl[1]+0].value<<16|Ro[2][zl[2]+0].value)>>>0,Qp==0&&256>Ro[0][zl[0]+0].value&&(Mi.Qb=1,Mi.qb+=Ro[0][zl[0]+0].value<<8)),Mi.jc=!Mi.Qb&&6>th,Mi.jc){var fu,Es=Mi;for(fu=0;fu<Br;++fu){var ba=fu,Js=Es.pd[ba],Xl=Es.G[0][Es.H[0]+ba];256<=Xl.value?(Js.g=Xl.g+256,Js.value=Xl.value):(Js.g=0,Js.value=0,ba>>=On(Xl,8,Js),ba>>=On(Es.G[1][Es.H[1]+ba],16,Js),ba>>=On(Es.G[2][Es.H[2]+ba],0,Js),On(Es.G[3][Es.H[3]+ba],24,Js))}}}dr.vc=Gn,dr.Wb=Gr,dr.Ya=Za,dr.yc=bd,jn=1;break t}jn=0}if(!($=jn)){L.a=3;break e}if(0<Ie){if(te.ua=1<<Ie,!Ge(te.Wa,Ie)){L.a=1,$=0;break e}}else te.ua=0;var Xs=L,sm=B,ro=W,Cd=Xs.s,Ad=Cd.xc;if(Xs.c=sm,Xs.i=ro,Cd.md=We(sm,Ad),Cd.wc=Ad==0?-1:(1<<Ad)-1,_){L.xb=s1;break e}if((we=s(B*W))==null){L.a=1,$=0;break e}$=($=xs(L,we,0,B,W,W,null))&&!J.h;break e}return $?(T!=null?T[0]=we:(t(we==null),t(_)),L.$=0,_||ws(te)):ws(te),$}function No(h,v){var _=h.c*h.i,L=_+v+16*v;return t(h.c<=v),h.V=s(L),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+_+v,1)}function ul(h,v){var _=h.C,L=v-_,T=h.V,$=h.Ba+h.c*_;for(t(v<=h.l.o);0<L;){var B=16<L?16:L,W=h.l.ma,J=h.l.width,te=J*B,we=W.ca,Ie=W.tb+J*_,Oe=h.Ta,Ce=h.Ua;er(h,B,T,$),ur(Oe,Ce,we,Ie,te),vs(W,_,_+B,we,Ie,J),L-=B,T+=B*h.c,_+=B}t(_==v),h.C=h.Ma=v}function dl(){this.ub=this.yd=this.td=this.Rb=0}function fl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function da(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Qu(){this.Yb=function(){var h=[];return function v(_,L,T){for(var $=T[L],B=0;B<$&&(_.push(T.length>L+1?[]:0),!(T.length<L+1));B++)v(_[B],L+1,T)}(h,0,[3,11]),h}()}function hl(){this.jb=s(3),this.Wc=l([4,8],Qu),this.Xc=l([4,17],Qu)}function $f(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function pl(){this.ld=this.La=this.dd=this.tc=0}function Zu(){this.Na=this.la=0}function ed(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ml(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function td(){this.uc=this.M=this.Nb=0,this.wa=Array(new pl),this.Y=0,this.ya=Array(new ml),this.aa=0,this.l=new gl}function nd(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Bf(){this.cb=this.a=0,this.sc="",this.m=new Le,this.Od=new dl,this.Kc=new fl,this.ed=new $f,this.Qa=new da,this.Ic=this.$c=this.Aa=0,this.D=new td,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Le),this.ia=0,this.pb=a(4,ed),this.Pa=new hl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nd),this.Hd=0,this.rb=Array(new Zu),this.sb=0,this.wa=Array(new pl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ml),this.L=this.aa=0,this.gd=l([4,2],pl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uf(){var h=new Bf;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,ga||(ga=vl)),h}function tr(h,v,_){return h.a==0&&(h.a=v,h.sc=_,h.cb=0),0}function zc(h,v,_){return 3<=_&&h[v+0]==157&&h[v+1]==1&&h[v+2]==42}function qc(h,v){if(h==null)return 0;if(h.a=0,h.sc="OK",v==null)return tr(h,2,"null VP8Io passed to VP8GetHeaders()");var _=v.data,L=v.w,T=v.ha;if(4>T)return tr(h,7,"Truncated header.");var $=_[L+0]|_[L+1]<<8|_[L+2]<<16,B=h.Od;if(B.Rb=!(1&$),B.td=$>>1&7,B.yd=$>>4&1,B.ub=$>>5,3<B.td)return tr(h,3,"Incorrect keyframe parameters.");if(!B.yd)return tr(h,4,"Frame not displayable.");L+=3,T-=3;var W=h.Kc;if(B.Rb){if(7>T)return tr(h,7,"cannot parse picture header");if(!zc(_,L,T))return tr(h,3,"Bad code word");W.c=16383&(_[L+4]<<8|_[L+3]),W.Td=_[L+4]>>6,W.i=16383&(_[L+6]<<8|_[L+5]),W.Ud=_[L+6]>>6,L+=7,T-=7,h.za=W.c+15>>4,h.Ub=W.i+15>>4,v.width=W.c,v.height=W.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i(($=h.Pa).jb,0,255,$.jb.length),t(($=h.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(B.ub>T)return tr(h,7,"bad partition length");xe($=h.m,_,L,B.ub),L+=B.ub,T-=B.ub,B.Rb&&(W.Ld=Ee($),W.Kd=Ee($)),W=h.Qa;var J,te=h.Pa;if(t($!=null),t(W!=null),W.Cb=Ee($),W.Cb){if(W.Bb=Ee($),Ee($)){for(W.Fb=Ee($),J=0;4>J;++J)W.Zb[J]=Ee($)?X($,7):0;for(J=0;4>J;++J)W.Lb[J]=Ee($)?X($,6):0}if(W.Bb)for(J=0;3>J;++J)te.jb[J]=Ee($)?me($,8):255}else W.Bb=0;if($.Ka)return tr(h,3,"cannot parse segment header");if((W=h.ed).zd=Ee($),W.Tb=me($,6),W.wb=me($,3),W.Pc=Ee($),W.Pc&&Ee($)){for(te=0;4>te;++te)Ee($)&&(W.vd[te]=X($,6));for(te=0;4>te;++te)Ee($)&&(W.od[te]=X($,6))}if(h.L=W.Tb==0?0:W.zd?1:2,$.Ka)return tr(h,3,"cannot parse filter header");var we=T;if(T=J=L,L=J+we,W=we,h.Xb=(1<<me(h.m,2))-1,we<3*(te=h.Xb))_=7;else{for(J+=3*te,W-=3*te,we=0;we<te;++we){var Ie=_[T+0]|_[T+1]<<8|_[T+2]<<16;Ie>W&&(Ie=W),xe(h.Jc[+we],_,J,Ie),J+=Ie,W-=Ie,T+=3}xe(h.Jc[+te],_,J,W),_=J<L?0:5}if(_!=0)return tr(h,_,"cannot parse partitions");for(_=me(J=h.m,7),T=Ee(J)?X(J,4):0,L=Ee(J)?X(J,4):0,W=Ee(J)?X(J,4):0,te=Ee(J)?X(J,4):0,J=Ee(J)?X(J,4):0,we=h.Qa,Ie=0;4>Ie;++Ie){if(we.Cb){var Oe=we.Zb[Ie];we.Fb||(Oe+=_)}else{if(0<Ie){h.pb[Ie]=h.pb[0];continue}Oe=_}var Ce=h.pb[Ie];Ce.Sc[0]=Qf[Rn(Oe+T,127)],Ce.Sc[1]=su[Rn(Oe+0,127)],Ce.Eb[0]=2*Qf[Rn(Oe+L,127)],Ce.Eb[1]=101581*su[Rn(Oe+W,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Qf[Rn(Oe+te,117)],Ce.Qc[1]=su[Rn(Oe+J,127)],Ce.lc=Oe+J}if(!B.Rb)return tr(h,4,"Not a key frame.");for(Ee($),B=h.Pa,_=0;4>_;++_){for(T=0;8>T;++T)for(L=0;3>L;++L)for(W=0;11>W;++W)te=Z($,Bl[_][T][L][W])?me($,8):au[_][T][L][W],B.Wc[_][T].Yb[L][W]=te;for(T=0;17>T;++T)B.Xc[_][T]=B.Wc[_][i1[T]]}return h.kc=Ee($),h.kc&&(h.Bd=me($,8)),h.cb=1}function vl(h,v,_,L,T,$,B){var W=v[T].Yb[_];for(_=0;16>T;++T){if(!Z(h,W[_+0]))return T;for(;!Z(h,W[_+1]);)if(W=v[++T].Yb[0],_=0,T==16)return 16;var J=v[T+1].Yb;if(Z(h,W[_+2])){var te=h,we=0;if(Z(te,(Oe=W)[(Ie=_)+3]))if(Z(te,Oe[Ie+6])){for(W=0,Ie=2*(we=Z(te,Oe[Ie+8]))+(Oe=Z(te,Oe[Ie+9+we])),we=0,Oe=Zf[Ie];Oe[W];++W)we+=we+Z(te,Oe[W]);we+=3+(8<<Ie)}else Z(te,Oe[Ie+7])?(we=7+2*Z(te,165),we+=Z(te,145)):we=5+Z(te,159);else we=Z(te,Oe[Ie+4])?3+Z(te,Oe[Ie+5]):2;W=J[2]}else we=1,W=J[1];J=B+Fl[T],0>(te=h).b&&Ae(te);var Ie,Oe=te.b,Ce=(Ie=te.Ca>>1)-(te.I>>Oe)>>31;--te.b,te.Ca+=Ce,te.Ca|=1,te.I-=(Ie+1&Ce)<<Oe,$[J]=((we^Ce)-Ce)*L[(0<T)+0]}return 16}function Wc(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function rd(h,v){if(h==null)return 0;if(v==null)return tr(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!qc(h,v))return 0;if(t(h.cb),v.ac==null||v.ac(v)){v.ob&&(h.L=0);var _=wd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=v.v-_>>4,h.zb=v.j-_>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+_>>4,h.Hb=v.va+15+_>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var L=h.ed;for(_=0;4>_;++_){var T;if(h.Qa.Cb){var $=h.Qa.Lb[_];h.Qa.Fb||($+=L.Tb)}else $=L.Tb;for(T=0;1>=T;++T){var B=h.gd[_][T],W=$;if(L.Pc&&(W+=L.vd[0],T&&(W+=L.od[0])),0<(W=0>W?0:63<W?63:W)){var J=W;0<L.wb&&(J=4<L.wb?J>>2:J>>1)>9-L.wb&&(J=9-L.wb),1>J&&(J=1),B.dd=J,B.tc=2*W+J,B.ld=40<=W?2:15<=W?1:0}else B.tc=0;B.La=T}}}_=0}else tr(h,6,"Frame setup failed"),_=h.a;if(_=_==0){if(_){h.$c=0,0<h.Aa||(h.Ic=p1);e:{_=h.Ic,L=4*(J=h.za);var te=32*J,we=J+1,Ie=0<h.L?J*(0<h.Aa?2:1):0,Oe=(h.Aa==2?2:1)*J;if((B=L+832+(T=3*(16*_+wd[h.L])/2*te)+($=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=B)_=0;else{if(B>h.Vb){if(h.Vb=0,h.Ec=s(B),h.Fc=0,h.Ec==null){_=tr(h,1,"no memory during frame initialization.");break e}h.Vb=B}B=h.Ec,W=h.Fc,h.Ac=B,h.Bc=W,W+=L,h.Gd=a(te,nd),h.Hd=0,h.rb=a(we+1,Zu),h.sb=1,h.wa=Ie?a(Ie,pl):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=J),t(!0),h.oc=B,h.pc=W,W+=832,h.ya=a(Oe,ml),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=J),h.R=16*J,h.B=8*J,J=(te=wd[h.L])*h.R,te=te/2*h.B,h.sa=B,h.ta=W+J,h.qa=h.sa,h.ra=h.ta+16*_*h.R+te,h.Ha=h.qa,h.Ia=h.ra+8*_*h.B+te,h.$c=0,W+=T,h.mb=$?B:null,h.nb=$?W:null,t(W+$<=h.Fc+h.Vb),Wc(h),i(h.Ac,h.Bc,0,L),_=1}}if(_){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!nu){for(_=-255;255>=_;++_)Sr[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Qi[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)Zi[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)ma[255+_]=0>_?0:255<_?255:_;nu=1}je=Gc,qe=Vc,mt=id,St=sd,Wt=xl,De=Hc,Un=Sl,vn=qa,To=pd,Mo=Nl,Dr=hd,Ss=Ao,Do=Fr,Ns=md,Gs=vr,js=Vi,on=ni,Xi=fd,ks[0]=qs,ks[1]=ad,ks[2]=Wf,ks[3]=Hf,ks[4]=cd,ks[5]=bl,ks[6]=wl,ks[7]=Kc,ks[8]=Gf,ks[9]=Vf,Ja[0]=Yc,Ja[1]=zf,Ja[2]=zs,Ja[3]=ko,Ja[4]=Wr,Ja[5]=qf,Ja[6]=ld,va[0]=za,va[1]=od,va[2]=Yf,va[3]=bn,va[4]=Co,va[5]=Kf,va[6]=Jc,_=1}else _=0}_&&(_=function(Ce,Je){for(Ce.M=0;Ce.M<Ce.Va;++Ce.M){var Be,ye=Ce.Jc[Ce.M&Ce.Xb],Se=Ce.m,Ye=Ce;for(Be=0;Be<Ye.za;++Be){var nt=Se,Ve=Ye,ht=Ve.Ac,ct=Ve.Bc+4*Be,xt=Ve.zc,dt=Ve.ya[Ve.aa+Be];if(Ve.Qa.Bb?dt.$b=Z(nt,Ve.Pa.jb[0])?2+Z(nt,Ve.Pa.jb[2]):Z(nt,Ve.Pa.jb[1]):dt.$b=0,Ve.kc&&(dt.Ad=Z(nt,Ve.Bd)),dt.Za=!Z(nt,145)+0,dt.Za){var fn=dt.Ob,yn=0;for(Ve=0;4>Ve;++Ve){var Zt,Ut=xt[0+Ve];for(Zt=0;4>Zt;++Zt){Ut=yd[ht[ct+Zt]][Ut];for(var jn=$l[Z(nt,Ut[0])];0<jn;)jn=$l[2*jn+Z(nt,Ut[jn])];Ut=-jn,ht[ct+Zt]=Ut}r(fn,yn,ht,ct,4),yn+=4,xt[0+Ve]=Ut}}else Ut=Z(nt,156)?Z(nt,128)?1:3:Z(nt,163)?2:0,dt.Ob[0]=Ut,i(ht,ct,Ut,4),i(xt,0,Ut,4);dt.Dd=Z(nt,142)?Z(nt,114)?Z(nt,183)?1:3:2:0}if(Ye.m.Ka)return tr(Ce,7,"Premature end-of-partition0 encountered.");for(;Ce.ja<Ce.za;++Ce.ja){if(Ye=ye,nt=(Se=Ce).rb[Se.sb-1],ht=Se.rb[Se.sb+Se.ja],Be=Se.ya[Se.aa+Se.ja],ct=Se.kc?Be.Ad:0)nt.la=ht.la=0,Be.Za||(nt.Na=ht.Na=0),Be.Hc=0,Be.Gc=0,Be.ia=0;else{var kn,$t;if(nt=ht,ht=Ye,ct=Se.Pa.Xc,xt=Se.ya[Se.aa+Se.ja],dt=Se.pb[xt.$b],Ve=xt.ad,fn=0,yn=Se.rb[Se.sb-1],Ut=Zt=0,i(Ve,fn,0,384),xt.Za)var yr=0,ai=ct[3];else{jn=s(16);var nn=nt.Na+yn.Na;if(nn=ga(ht,ct[1],nn,dt.Eb,0,jn,0),nt.Na=yn.Na=(0<nn)+0,1<nn)je(jn,0,Ve,fn);else{var Vr=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)Ve[fn+jn]=Vr}yr=1,ai=ct[0]}var xn=15&nt.la,sr=15&yn.la;for(jn=0;4>jn;++jn){var oi=1&sr;for(Vr=$t=0;4>Vr;++Vr)xn=xn>>1|(oi=(nn=ga(ht,ai,nn=oi+(1&xn),dt.Sc,yr,Ve,fn))>yr)<<7,$t=$t<<2|(3<nn?3:1<nn?2:Ve[fn+0]!=0),fn+=16;xn>>=4,sr=sr>>1|oi<<7,Zt=(Zt<<8|$t)>>>0}for(ai=xn,yr=sr>>4,kn=0;4>kn;kn+=2){for($t=0,xn=nt.la>>4+kn,sr=yn.la>>4+kn,jn=0;2>jn;++jn){for(oi=1&sr,Vr=0;2>Vr;++Vr)nn=oi+(1&xn),xn=xn>>1|(oi=0<(nn=ga(ht,ct[2],nn,dt.Qc,0,Ve,fn)))<<3,$t=$t<<2|(3<nn?3:1<nn?2:Ve[fn+0]!=0),fn+=16;xn>>=2,sr=sr>>1|oi<<5}Ut|=$t<<4*kn,ai|=xn<<4<<kn,yr|=(240&sr)<<kn}nt.la=ai,yn.la=yr,xt.Hc=Zt,xt.Gc=Ut,xt.ia=43690&Ut?0:dt.ia,ct=!(Zt|Ut)}if(0<Se.L&&(Se.wa[Se.Y+Se.ja]=Se.gd[Be.$b][Be.Za],Se.wa[Se.Y+Se.ja].La|=!ct),Ye.Ka)return tr(Ce,7,"Premature end-of-file encountered.")}if(Wc(Ce),Se=Je,Ye=1,Be=(ye=Ce).D,nt=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(Be.M=ye.M,Be.uc=nt,Cl(ye,Be),Ye=1,Be=($t=ye.D).Nb,nt=(Ut=wd[ye.L])*ye.R,ht=Ut/2*ye.B,jn=16*Be*ye.R,Vr=8*Be*ye.B,ct=ye.sa,xt=ye.ta-nt+jn,dt=ye.qa,Ve=ye.ra-ht+Vr,fn=ye.Ha,yn=ye.Ia-ht+Vr,sr=(xn=$t.M)==0,Zt=xn>=ye.Va-1,ye.Aa==2&&Cl(ye,$t),$t.uc)for(oi=(nn=ye).D.M,t(nn.D.uc),$t=nn.yb;$t<nn.Hb;++$t){yr=$t,ai=oi;var dr=(Gn=(In=nn).D).Nb;kn=In.R;var Gn=Gn.wa[Gn.Y+yr],Gr=In.sa,Dn=In.ta+16*dr*kn+16*yr,ts=Gn.dd,Ir=Gn.tc;if(Ir!=0)if(t(3<=Ir),In.L==1)0<yr&&js(Gr,Dn,kn,Ir+4),Gn.La&&Xi(Gr,Dn,kn,Ir),0<ai&&Gs(Gr,Dn,kn,Ir+4),Gn.La&&on(Gr,Dn,kn,Ir);else{var xa=In.B,Oo=In.qa,Xa=In.ra+8*dr*xa+8*yr,Qa=In.Ha,In=In.Ia+8*dr*xa+8*yr;dr=Gn.ld,0<yr&&(vn(Gr,Dn,kn,Ir+4,ts,dr),Mo(Oo,Xa,Qa,In,xa,Ir+4,ts,dr)),Gn.La&&(Ss(Gr,Dn,kn,Ir,ts,dr),Ns(Oo,Xa,Qa,In,xa,Ir,ts,dr)),0<ai&&(Un(Gr,Dn,kn,Ir+4,ts,dr),To(Oo,Xa,Qa,In,xa,Ir+4,ts,dr)),Gn.La&&(Dr(Gr,Dn,kn,Ir,ts,dr),Do(Oo,Xa,Qa,In,xa,Ir,ts,dr))}}if(ye.ia&&alert("todo:DitherRow"),Se.put!=null){if($t=16*xn,xn=16*(xn+1),sr?(Se.y=ye.sa,Se.O=ye.ta+jn,Se.f=ye.qa,Se.N=ye.ra+Vr,Se.ea=ye.Ha,Se.W=ye.Ia+Vr):($t-=Ut,Se.y=ct,Se.O=xt,Se.f=dt,Se.N=Ve,Se.ea=fn,Se.W=yn),Zt||(xn-=Ut),xn>Se.o&&(xn=Se.o),Se.F=null,Se.J=null,ye.Fa!=null&&0<ye.Fa.length&&$t<xn&&(Se.J=Zc(ye,Se,$t,xn-$t),Se.F=ye.mb,Se.F==null&&Se.F.length==0)){Ye=tr(ye,3,"Could not decode alpha data.");break e}$t<Se.j&&(Ut=Se.j-$t,$t=Se.j,t(!(1&Ut)),Se.O+=ye.R*Ut,Se.N+=ye.B*(Ut>>1),Se.W+=ye.B*(Ut>>1),Se.F!=null&&(Se.J+=Se.width*Ut)),$t<xn&&(Se.O+=Se.v,Se.N+=Se.v>>1,Se.W+=Se.v>>1,Se.F!=null&&(Se.J+=Se.v),Se.ka=$t-Se.j,Se.U=Se.va-Se.v,Se.T=xn-$t,Ye=Se.put(Se))}Be+1!=ye.Ic||Zt||(r(ye.sa,ye.ta-nt,ct,xt+16*ye.R,nt),r(ye.qa,ye.ra-ht,dt,Ve+8*ye.B,ht),r(ye.Ha,ye.Ia-ht,fn,yn+8*ye.B,ht))}if(!Ye)return tr(Ce,6,"Output aborted.")}return 1}(h,v)),v.bc!=null&&v.bc(v),_&=1}return _?(h.cb=0,_):0}function hi(h,v,_,L,T){T=h[v+_+32*L]+(T>>3),h[v+_+32*L]=-256&T?0>T?0:255:T}function jo(h,v,_,L,T,$){hi(h,v,0,_,L+T),hi(h,v,1,_,L+$),hi(h,v,2,_,L-$),hi(h,v,3,_,L-T)}function pi(h){return(20091*h>>16)+h}function yl(h,v,_,L){var T,$=0,B=s(16);for(T=0;4>T;++T){var W=h[v+0]+h[v+8],J=h[v+0]-h[v+8],te=(35468*h[v+4]>>16)-pi(h[v+12]),we=pi(h[v+4])+(35468*h[v+12]>>16);B[$+0]=W+we,B[$+1]=J+te,B[$+2]=J-te,B[$+3]=W-we,$+=4,v++}for(T=$=0;4>T;++T)W=(h=B[$+0]+4)+B[$+8],J=h-B[$+8],te=(35468*B[$+4]>>16)-pi(B[$+12]),hi(_,L,0,0,W+(we=pi(B[$+4])+(35468*B[$+12]>>16))),hi(_,L,1,0,J+te),hi(_,L,2,0,J-te),hi(_,L,3,0,W-we),$++,L+=32}function Hc(h,v,_,L){var T=h[v+0]+4,$=35468*h[v+4]>>16,B=pi(h[v+4]),W=35468*h[v+1]>>16;jo(_,L,0,T+B,h=pi(h[v+1]),W),jo(_,L,1,T+$,h,W),jo(_,L,2,T-$,h,W),jo(_,L,3,T-B,h,W)}function Vc(h,v,_,L,T){yl(h,v,_,L),T&&yl(h,v+16,_,L+4)}function id(h,v,_,L){qe(h,v+0,_,L,1),qe(h,v+32,_,L+128,1)}function sd(h,v,_,L){var T;for(h=h[v+0]+4,T=0;4>T;++T)for(v=0;4>v;++v)hi(_,L,v,T,h)}function xl(h,v,_,L){h[v+0]&&St(h,v+0,_,L),h[v+16]&&St(h,v+16,_,L+4),h[v+32]&&St(h,v+32,_,L+128),h[v+48]&&St(h,v+48,_,L+128+4)}function Gc(h,v,_,L){var T,$=s(16);for(T=0;4>T;++T){var B=h[v+0+T]+h[v+12+T],W=h[v+4+T]+h[v+8+T],J=h[v+4+T]-h[v+8+T],te=h[v+0+T]-h[v+12+T];$[0+T]=B+W,$[8+T]=B-W,$[4+T]=te+J,$[12+T]=te-J}for(T=0;4>T;++T)B=(h=$[0+4*T]+3)+$[3+4*T],W=$[1+4*T]+$[2+4*T],J=$[1+4*T]-$[2+4*T],te=h-$[3+4*T],_[L+0]=B+W>>3,_[L+16]=te+J>>3,_[L+32]=B-W>>3,_[L+48]=te-J>>3,L+=64}function Us(h,v,_){var L,T=v-32,$=yi,B=255-h[T-1];for(L=0;L<_;++L){var W,J=$,te=B+h[v-1];for(W=0;W<_;++W)h[v+W]=J[te+h[T+W]];v+=32}}function ad(h,v){Us(h,v,4)}function od(h,v){Us(h,v,8)}function zf(h,v){Us(h,v,16)}function zs(h,v){var _;for(_=0;16>_;++_)r(h,v+32*_,h,v-32,16)}function ko(h,v){var _;for(_=16;0<_;--_)i(h,v,h[v-1],16),v+=32}function Eo(h,v,_){var L;for(L=0;16>L;++L)i(v,_+32*L,h,16)}function Yc(h,v){var _,L=16;for(_=0;16>_;++_)L+=h[v-1+32*_]+h[v+_-32];Eo(L>>5,h,v)}function Wr(h,v){var _,L=8;for(_=0;16>_;++_)L+=h[v-1+32*_];Eo(L>>4,h,v)}function qf(h,v){var _,L=8;for(_=0;16>_;++_)L+=h[v+_-32];Eo(L>>4,h,v)}function ld(h,v){Eo(128,h,v)}function Ot(h,v,_){return h+2*v+_+2>>2}function Wf(h,v){var _,L=v-32;for(L=new Uint8Array([Ot(h[L-1],h[L+0],h[L+1]),Ot(h[L+0],h[L+1],h[L+2]),Ot(h[L+1],h[L+2],h[L+3]),Ot(h[L+2],h[L+3],h[L+4])]),_=0;4>_;++_)r(h,v+32*_,L,0,L.length)}function Hf(h,v){var _=h[v-1],L=h[v-1+32],T=h[v-1+64],$=h[v-1+96];ke(h,v+0,16843009*Ot(h[v-1-32],_,L)),ke(h,v+32,16843009*Ot(_,L,T)),ke(h,v+64,16843009*Ot(L,T,$)),ke(h,v+96,16843009*Ot(T,$,$))}function qs(h,v){var _,L=4;for(_=0;4>_;++_)L+=h[v+_-32]+h[v-1+32*_];for(L>>=3,_=0;4>_;++_)i(h,v+32*_,L,4)}function cd(h,v){var _=h[v-1+0],L=h[v-1+32],T=h[v-1+64],$=h[v-1-32],B=h[v+0-32],W=h[v+1-32],J=h[v+2-32],te=h[v+3-32];h[v+0+96]=Ot(L,T,h[v-1+96]),h[v+1+96]=h[v+0+64]=Ot(_,L,T),h[v+2+96]=h[v+1+64]=h[v+0+32]=Ot($,_,L),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=Ot(B,$,_),h[v+3+64]=h[v+2+32]=h[v+1+0]=Ot(W,B,$),h[v+3+32]=h[v+2+0]=Ot(J,W,B),h[v+3+0]=Ot(te,J,W)}function wl(h,v){var _=h[v+1-32],L=h[v+2-32],T=h[v+3-32],$=h[v+4-32],B=h[v+5-32],W=h[v+6-32],J=h[v+7-32];h[v+0+0]=Ot(h[v+0-32],_,L),h[v+1+0]=h[v+0+32]=Ot(_,L,T),h[v+2+0]=h[v+1+32]=h[v+0+64]=Ot(L,T,$),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=Ot(T,$,B),h[v+3+32]=h[v+2+64]=h[v+1+96]=Ot($,B,W),h[v+3+64]=h[v+2+96]=Ot(B,W,J),h[v+3+96]=Ot(W,J,J)}function bl(h,v){var _=h[v-1+0],L=h[v-1+32],T=h[v-1+64],$=h[v-1-32],B=h[v+0-32],W=h[v+1-32],J=h[v+2-32],te=h[v+3-32];h[v+0+0]=h[v+1+64]=$+B+1>>1,h[v+1+0]=h[v+2+64]=B+W+1>>1,h[v+2+0]=h[v+3+64]=W+J+1>>1,h[v+3+0]=J+te+1>>1,h[v+0+96]=Ot(T,L,_),h[v+0+64]=Ot(L,_,$),h[v+0+32]=h[v+1+96]=Ot(_,$,B),h[v+1+32]=h[v+2+96]=Ot($,B,W),h[v+2+32]=h[v+3+96]=Ot(B,W,J),h[v+3+32]=Ot(W,J,te)}function Kc(h,v){var _=h[v+0-32],L=h[v+1-32],T=h[v+2-32],$=h[v+3-32],B=h[v+4-32],W=h[v+5-32],J=h[v+6-32],te=h[v+7-32];h[v+0+0]=_+L+1>>1,h[v+1+0]=h[v+0+64]=L+T+1>>1,h[v+2+0]=h[v+1+64]=T+$+1>>1,h[v+3+0]=h[v+2+64]=$+B+1>>1,h[v+0+32]=Ot(_,L,T),h[v+1+32]=h[v+0+96]=Ot(L,T,$),h[v+2+32]=h[v+1+96]=Ot(T,$,B),h[v+3+32]=h[v+2+96]=Ot($,B,W),h[v+3+64]=Ot(B,W,J),h[v+3+96]=Ot(W,J,te)}function Vf(h,v){var _=h[v-1+0],L=h[v-1+32],T=h[v-1+64],$=h[v-1+96];h[v+0+0]=_+L+1>>1,h[v+2+0]=h[v+0+32]=L+T+1>>1,h[v+2+32]=h[v+0+64]=T+$+1>>1,h[v+1+0]=Ot(_,L,T),h[v+3+0]=h[v+1+32]=Ot(L,T,$),h[v+3+32]=h[v+1+64]=Ot(T,$,$),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=$}function Gf(h,v){var _=h[v-1+0],L=h[v-1+32],T=h[v-1+64],$=h[v-1+96],B=h[v-1-32],W=h[v+0-32],J=h[v+1-32],te=h[v+2-32];h[v+0+0]=h[v+2+32]=_+B+1>>1,h[v+0+32]=h[v+2+64]=L+_+1>>1,h[v+0+64]=h[v+2+96]=T+L+1>>1,h[v+0+96]=$+T+1>>1,h[v+3+0]=Ot(W,J,te),h[v+2+0]=Ot(B,W,J),h[v+1+0]=h[v+3+32]=Ot(_,B,W),h[v+1+32]=h[v+3+64]=Ot(L,_,B),h[v+1+64]=h[v+3+96]=Ot(T,L,_),h[v+1+96]=Ot($,T,L)}function Yf(h,v){var _;for(_=0;8>_;++_)r(h,v+32*_,h,v-32,8)}function bn(h,v){var _;for(_=0;8>_;++_)i(h,v,h[v-1],8),v+=32}function dn(h,v,_){var L;for(L=0;8>L;++L)i(v,_+32*L,h,8)}function za(h,v){var _,L=8;for(_=0;8>_;++_)L+=h[v+_-32]+h[v-1+32*_];dn(L>>4,h,v)}function Kf(h,v){var _,L=4;for(_=0;8>_;++_)L+=h[v+_-32];dn(L>>3,h,v)}function Co(h,v){var _,L=4;for(_=0;8>_;++_)L+=h[v-1+32*_];dn(L>>3,h,v)}function Jc(h,v){dn(128,h,v)}function _l(h,v,_){var L=h[v-_],T=h[v+0],$=3*(T-L)+Dl[1020+h[v-2*_]-h[v+_]],B=ru[112+($+4>>3)];h[v-_]=yi[255+L+ru[112+($+3>>3)]],h[v+0]=yi[255+T-B]}function ud(h,v,_,L){var T=h[v+0],$=h[v+_];return si[255+h[v-2*_]-h[v-_]]>L||si[255+$-T]>L}function Xc(h,v,_,L){return 4*si[255+h[v-_]-h[v+0]]+si[255+h[v-2*_]-h[v+_]]<=L}function dd(h,v,_,L,T){var $=h[v-3*_],B=h[v-2*_],W=h[v-_],J=h[v+0],te=h[v+_],we=h[v+2*_],Ie=h[v+3*_];return 4*si[255+W-J]+si[255+B-te]>L?0:si[255+h[v-4*_]-$]<=T&&si[255+$-B]<=T&&si[255+B-W]<=T&&si[255+Ie-we]<=T&&si[255+we-te]<=T&&si[255+te-J]<=T}function vr(h,v,_,L){var T=2*L+1;for(L=0;16>L;++L)Xc(h,v+L,_,T)&&_l(h,v+L,_)}function Vi(h,v,_,L){var T=2*L+1;for(L=0;16>L;++L)Xc(h,v+L*_,1,T)&&_l(h,v+L*_,1)}function ni(h,v,_,L){var T;for(T=3;0<T;--T)vr(h,v+=4*_,_,L)}function fd(h,v,_,L){var T;for(T=3;0<T;--T)Vi(h,v+=4,_,L)}function Ws(h,v,_,L,T,$,B,W){for($=2*$+1;0<T--;){if(dd(h,v,_,$,B))if(ud(h,v,_,W))_l(h,v,_);else{var J=h,te=v,we=_,Ie=J[te-2*we],Oe=J[te-we],Ce=J[te+0],Je=J[te+we],Be=J[te+2*we],ye=27*(Ye=Dl[1020+3*(Ce-Oe)+Dl[1020+Ie-Je]])+63>>7,Se=18*Ye+63>>7,Ye=9*Ye+63>>7;J[te-3*we]=yi[255+J[te-3*we]+Ye],J[te-2*we]=yi[255+Ie+Se],J[te-we]=yi[255+Oe+ye],J[te+0]=yi[255+Ce-ye],J[te+we]=yi[255+Je-Se],J[te+2*we]=yi[255+Be-Ye]}v+=L}}function nr(h,v,_,L,T,$,B,W){for($=2*$+1;0<T--;){if(dd(h,v,_,$,B))if(ud(h,v,_,W))_l(h,v,_);else{var J=h,te=v,we=_,Ie=J[te-we],Oe=J[te+0],Ce=J[te+we],Je=ru[112+((Be=3*(Oe-Ie))+4>>3)],Be=ru[112+(Be+3>>3)],ye=Je+1>>1;J[te-2*we]=yi[255+J[te-2*we]+ye],J[te-we]=yi[255+Ie+Be],J[te+0]=yi[255+Oe-Je],J[te+we]=yi[255+Ce-ye]}v+=L}}function Sl(h,v,_,L,T,$){Ws(h,v,_,1,16,L,T,$)}function qa(h,v,_,L,T,$){Ws(h,v,1,_,16,L,T,$)}function hd(h,v,_,L,T,$){var B;for(B=3;0<B;--B)nr(h,v+=4*_,_,1,16,L,T,$)}function Ao(h,v,_,L,T,$){var B;for(B=3;0<B;--B)nr(h,v+=4,1,_,16,L,T,$)}function pd(h,v,_,L,T,$,B,W){Ws(h,v,T,1,8,$,B,W),Ws(_,L,T,1,8,$,B,W)}function Nl(h,v,_,L,T,$,B,W){Ws(h,v,1,T,8,$,B,W),Ws(_,L,1,T,8,$,B,W)}function Fr(h,v,_,L,T,$,B,W){nr(h,v+4*T,T,1,8,$,B,W),nr(_,L+4*T,T,1,8,$,B,W)}function md(h,v,_,L,T,$,B,W){nr(h,v+4,1,T,8,$,B,W),nr(_,L+4,1,T,8,$,B,W)}function $r(){this.ba=new or,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Qc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bs(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new U}function kl(){this.xb=this.a=0,this.l=new gl,this.ca=new or,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bs,this.ab=0,this.gc=a(4,jl),this.Oc=0}function Wa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new gl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gn(h,v,_,L,T,$,B){for(h=h==null?0:h[v+0],v=0;v<B;++v)T[$+v]=h+_[L+v]&255,h=T[$+v]}function Gi(h,v,_,L,T,$,B){var W;if(h==null)gn(null,null,_,L,T,$,B);else for(W=0;W<B;++W)T[$+W]=h[v+W]+_[L+W]&255}function Hs(h,v,_,L,T,$,B){if(h==null)gn(null,null,_,L,T,$,B);else{var W,J=h[v+0],te=J,we=J;for(W=0;W<B;++W)te=we+(J=h[v+W])-te,we=_[L+W]+(-256&te?0>te?0:255:te)&255,te=J,T[$+W]=we}}function Zc(h,v,_,L){var T=v.width,$=v.o;if(t(h!=null&&v!=null),0>_||0>=L||_+L>$)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new Wa,(B=h.ga==null)||(B=v.width*v.o,t(h.Gb.length==0),h.Gb=s(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var W=h.Fa,J=h.P,te=h.qc,we=h.mb,Ie=h.nb,Oe=J+1,Ce=te-1,Je=B.l;if(t(W!=null&&we!=null&&v!=null),es[0]=null,es[1]=gn,es[2]=Gi,es[3]=Hs,B.ca=we,B.tb=Ie,B.c=v.width,B.i=v.height,t(0<B.c&&0<B.i),1>=te)v=0;else if(B.$a=W[J+0]>>0&3,B.Z=W[J+0]>>2&3,B.Lc=W[J+0]>>4&3,J=W[J+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||J)v=0;else if(Je.put=lr,Je.ac=rn,Je.bc=Rr,Je.ma=B,Je.width=v.width,Je.height=v.height,Je.Da=v.Da,Je.v=v.v,Je.va=v.va,Je.j=v.j,Je.o=v.o,B.$a)e:{t(B.$a==1),v=Hi();t:for(;;){if(v==null){v=0;break e}if(t(B!=null),B.mc=v,v.c=B.c,v.i=B.i,v.l=B.l,v.l.ma=B,v.l.width=B.c,v.l.height=B.i,v.a=0,F(v.m,W,Oe,Ce),!Bs(B.c,B.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Ai(v.s)?(B.ic=1,W=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(W),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(B.ic=0,v=No(v,B.c)),!v))break t;v=1;break e}B.mc=null,v=0}else v=Ce>=B.c*B.i;B=!v}if(B)return null;h.ga.Lc!=1?h.Ga=0:L=$-_}t(h.ga!=null),t(_+L<=$);e:{if(v=(W=h.ga).c,$=W.l.o,W.$a==0){if(Oe=h.rc,Ce=h.Vc,Je=h.Fa,J=h.P+1+_*v,te=h.mb,we=h.nb+_*v,t(J<=h.P+h.qc),W.Z!=0)for(t(es[W.Z]!=null),B=0;B<L;++B)es[W.Z](Oe,Ce,Je,J,te,we,v),Oe=te,Ce=we,we+=v,J+=v;else for(B=0;B<L;++B)r(te,we,Je,J,v),Oe=te,Ce=we,we+=v,J+=v;h.rc=Oe,h.Vc=Ce}else{if(t(W.mc!=null),v=_+L,t((B=W.mc)!=null),t(v<=B.i),B.C>=v)v=1;else if(W.ic||Me(),W.ic){W=B.V,Oe=B.Ba,Ce=B.c;var Be=B.i,ye=(Je=1,J=B.$/Ce,te=B.$%Ce,we=B.m,Ie=B.s,B.$),Se=Ce*Be,Ye=Ce*v,nt=Ie.wc,Ve=ye<Ye?Tn(Ie,te,J):null;t(ye<=Se),t(v<=Be),t(Ai(Ie));t:for(;;){for(;!we.h&&ye<Ye;){if(te&nt||(Ve=Tn(Ie,te,J)),t(Ve!=null),de(we),256>(Be=Pn(Ve.G[0],Ve.H[0],we)))W[Oe+ye]=Be,++ye,++te>=Ce&&(te=0,++J<=v&&!(J%16)&&ys(B,J));else{if(!(280>Be)){Je=0;break t}Be=Zn(Be-256,we);var ht,ct=Pn(Ve.G[4],Ve.H[4],we);if(de(we),!(ye>=(ct=cr(Ce,ct=Zn(ct,we)))&&Se-ye>=Be)){Je=0;break t}for(ht=0;ht<Be;++ht)W[Oe+ye+ht]=W[Oe+ye+ht-ct];for(ye+=Be,te+=Be;te>=Ce;)te-=Ce,++J<=v&&!(J%16)&&ys(B,J);ye<Ye&&te&nt&&(Ve=Tn(Ie,te,J))}t(we.h==ne(we))}ys(B,J>v?v:J);break t}!Je||we.h&&ye<Se?(Je=0,B.a=we.h?5:3):B.$=ye,v=Je}else v=xs(B,B.V,B.Ba,B.c,B.i,v,ul);if(!v){L=0;break e}}_+L>=$&&(h.Cc=1),L=1}if(!L)return null;if(h.Cc&&((L=h.ga)!=null&&(L.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+_*T}function w(h,v,_,L,T,$){for(;0<T--;){var B,W=h,J=v+(_?1:0),te=h,we=v+(_?0:3);for(B=0;B<L;++B){var Ie=te[we+4*B];Ie!=255&&(Ie*=32897,W[J+4*B+0]=W[J+4*B+0]*Ie>>23,W[J+4*B+1]=W[J+4*B+1]*Ie>>23,W[J+4*B+2]=W[J+4*B+2]*Ie>>23)}v+=$}}function D(h,v,_,L,T){for(;0<L--;){var $;for($=0;$<_;++$){var B=h[v+2*$+0],W=15&(te=h[v+2*$+1]),J=4369*W,te=(240&te|te>>4)*J>>16;h[v+2*$+0]=(240&B|B>>4)*J>>16&240|(15&B|B<<4)*J>>16>>4&15,h[v+2*$+1]=240&te|W}v+=T}}function se(h,v,_,L,T,$,B,W){var J,te,we=255;for(te=0;te<T;++te){for(J=0;J<L;++J){var Ie=h[v+J];$[B+4*J]=Ie,we&=Ie}v+=_,B+=W}return we!=255}function pe(h,v,_,L,T){var $;for($=0;$<T;++$)_[L+$]=h[v+$]>>8}function Me(){Li=w,_n=D,Mn=se,ur=pe}function ze(h,v,_){M[h]=function(L,T,$,B,W,J,te,we,Ie,Oe,Ce,Je,Be,ye,Se,Ye,nt){var Ve,ht=nt-1>>1,ct=W[J+0]|te[we+0]<<16,xt=Ie[Oe+0]|Ce[Je+0]<<16;t(L!=null);var dt=3*ct+xt+131074>>2;for(v(L[T+0],255&dt,dt>>16,Be,ye),$!=null&&(dt=3*xt+ct+131074>>2,v($[B+0],255&dt,dt>>16,Se,Ye)),Ve=1;Ve<=ht;++Ve){var fn=W[J+Ve]|te[we+Ve]<<16,yn=Ie[Oe+Ve]|Ce[Je+Ve]<<16,Zt=ct+fn+xt+yn+524296,Ut=Zt+2*(fn+xt)>>3;dt=Ut+ct>>1,ct=(Zt=Zt+2*(ct+yn)>>3)+fn>>1,v(L[T+2*Ve-1],255&dt,dt>>16,Be,ye+(2*Ve-1)*_),v(L[T+2*Ve-0],255&ct,ct>>16,Be,ye+(2*Ve-0)*_),$!=null&&(dt=Zt+xt>>1,ct=Ut+yn>>1,v($[B+2*Ve-1],255&dt,dt>>16,Se,Ye+(2*Ve-1)*_),v($[B+2*Ve+0],255&ct,ct>>16,Se,Ye+(2*Ve+0)*_)),ct=fn,xt=yn}1&nt||(dt=3*ct+xt+131074>>2,v(L[T+nt-1],255&dt,dt>>16,Be,ye+(nt-1)*_),$!=null&&(dt=3*xt+ct+131074>>2,v($[B+nt-1],255&dt,dt>>16,Se,Ye+(nt-1)*_)))}}function tt(){Pi[iu]=H,Pi[Ya]=lu,Pi[Ka]=Ul,Pi[Io]=Ti,Pi[vd]=Qt,Pi[Jf]=Vp,Pi[zp]=a1,Pi[Il]=lu,Pi[Ol]=Ti,Pi[Rl]=Qt,Pi[Xf]=Vp}function pt(h){return h&~o1?0>h?0:255:h>>Gp}function kt(h,v){return pt((19077*h>>8)+(26149*v>>8)-14234)}function Bt(h,v,_){return pt((19077*h>>8)-(6419*v>>8)-(13320*_>>8)+8708)}function Rt(h,v){return pt((19077*h>>8)+(33050*v>>8)-17685)}function tn(h,v,_,L,T){L[T+0]=kt(h,_),L[T+1]=Bt(h,v,_),L[T+2]=Rt(h,v)}function Bn(h,v,_,L,T){L[T+0]=Rt(h,v),L[T+1]=Bt(h,v,_),L[T+2]=kt(h,_)}function rr(h,v,_,L,T){var $=Bt(h,v,_);v=$<<3&224|Rt(h,v)>>3,L[T+0]=248&kt(h,_)|$>>5,L[T+1]=v}function ir(h,v,_,L,T){var $=240&Rt(h,v)|15;L[T+0]=240&kt(h,_)|Bt(h,v,_)>>4,L[T+1]=$}function Tr(h,v,_,L,T){L[T+0]=255,tn(h,v,_,L,T+1)}function Mr(h,v,_,L,T){Bn(h,v,_,L,T),L[T+3]=255}function Yi(h,v,_,L,T){tn(h,v,_,L,T),L[T+3]=255}function Rn(h,v){return 0>h?0:h>v?v:h}function Ki(h,v,_){M[h]=function(L,T,$,B,W,J,te,we,Ie){for(var Oe=we+(-2&Ie)*_;we!=Oe;)v(L[T+0],$[B+0],W[J+0],te,we),v(L[T+1],$[B+0],W[J+0],te,we+_),T+=2,++B,++J,we+=2*_;1&Ie&&v(L[T+0],$[B+0],W[J+0],te,we)}}function Ha(h,v,_){return _==0?h==0?v==0?6:5:v==0?4:0:_}function El(h,v,_,L,T){switch(h>>>30){case 3:qe(v,_,L,T,0);break;case 2:De(v,_,L,T);break;case 1:St(v,_,L,T)}}function Cl(h,v){var _,L,T=v.M,$=v.Nb,B=h.oc,W=h.pc+40,J=h.oc,te=h.pc+584,we=h.oc,Ie=h.pc+600;for(_=0;16>_;++_)B[W+32*_-1]=129;for(_=0;8>_;++_)J[te+32*_-1]=129,we[Ie+32*_-1]=129;for(0<T?B[W-1-32]=J[te-1-32]=we[Ie-1-32]=129:(i(B,W-32-1,127,21),i(J,te-32-1,127,9),i(we,Ie-32-1,127,9)),L=0;L<h.za;++L){var Oe=v.ya[v.aa+L];if(0<L){for(_=-1;16>_;++_)r(B,W+32*_-4,B,W+32*_+12,4);for(_=-1;8>_;++_)r(J,te+32*_-4,J,te+32*_+4,4),r(we,Ie+32*_-4,we,Ie+32*_+4,4)}var Ce=h.Gd,Je=h.Hd+L,Be=Oe.ad,ye=Oe.Hc;if(0<T&&(r(B,W-32,Ce[Je].y,0,16),r(J,te-32,Ce[Je].f,0,8),r(we,Ie-32,Ce[Je].ea,0,8)),Oe.Za){var Se=B,Ye=W-32+16;for(0<T&&(L>=h.za-1?i(Se,Ye,Ce[Je].y[15],4):r(Se,Ye,Ce[Je+1].y,0,4)),_=0;4>_;_++)Se[Ye+128+_]=Se[Ye+256+_]=Se[Ye+384+_]=Se[Ye+0+_];for(_=0;16>_;++_,ye<<=2)Se=B,Ye=W+Ks[_],ks[Oe.Ob[_]](Se,Ye),El(ye,Be,16*+_,Se,Ye)}else if(Se=Ha(L,T,Oe.Ob[0]),Ja[Se](B,W),ye!=0)for(_=0;16>_;++_,ye<<=2)El(ye,Be,16*+_,B,W+Ks[_]);for(_=Oe.Gc,Se=Ha(L,T,Oe.Dd),va[Se](J,te),va[Se](we,Ie),ye=Be,Se=J,Ye=te,255&(Oe=_>>0)&&(170&Oe?mt(ye,256,Se,Ye):Wt(ye,256,Se,Ye)),Oe=we,ye=Ie,255&(_>>=8)&&(170&_?mt(Be,320,Oe,ye):Wt(Be,320,Oe,ye)),T<h.Ub-1&&(r(Ce[Je].y,0,B,W+480,16),r(Ce[Je].f,0,J,te+224,8),r(Ce[Je].ea,0,we,Ie+224,8)),_=8*$*h.B,Ce=h.sa,Je=h.ta+16*L+16*$*h.R,Be=h.qa,Oe=h.ra+8*L+_,ye=h.Ha,Se=h.Ia+8*L+_,_=0;16>_;++_)r(Ce,Je+_*h.R,B,W+32*_,16);for(_=0;8>_;++_)r(Be,Oe+_*h.B,J,te+32*_,8),r(ye,Se+_*h.B,we,Ie+32*_,8)}}function Al(h,v,_,L,T,$,B,W,J){var te=[0],we=[0],Ie=0,Oe=J!=null?J.kd:0,Ce=J??new Qc;if(h==null||12>_)return 7;Ce.data=h,Ce.w=v,Ce.ha=_,v=[v],_=[_],Ce.gb=[Ce.gb];e:{var Je=v,Be=_,ye=Ce.gb;if(t(h!=null),t(Be!=null),t(ye!=null),ye[0]=0,12<=Be[0]&&!n(h,Je[0],"RIFF")){if(n(h,Je[0]+8,"WEBP")){ye=3;break e}var Se=$e(h,Je[0]+4);if(12>Se||4294967286<Se){ye=3;break e}if(Oe&&Se>Be[0]-8){ye=7;break e}ye[0]=Se,Je[0]+=12,Be[0]-=12}ye=0}if(ye!=0)return ye;for(Se=0<Ce.gb[0],_=_[0];;){e:{var Ye=h;Be=v,ye=_;var nt=te,Ve=we,ht=Je=[0];if((dt=Ie=[Ie])[0]=0,8>ye[0])ye=7;else{if(!n(Ye,Be[0],"VP8X")){if($e(Ye,Be[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var ct=$e(Ye,Be[0]+8),xt=1+Re(Ye,Be[0]+12);if(2147483648<=xt*(Ye=1+Re(Ye,Be[0]+15))){ye=3;break e}ht!=null&&(ht[0]=ct),nt!=null&&(nt[0]=xt),Ve!=null&&(Ve[0]=Ye),Be[0]+=18,ye[0]-=18,dt[0]=1}ye=0}}if(Ie=Ie[0],Je=Je[0],ye!=0)return ye;if(Be=!!(2&Je),!Se&&Ie)return 3;if($!=null&&($[0]=!!(16&Je)),B!=null&&(B[0]=Be),W!=null&&(W[0]=0),B=te[0],Je=we[0],Ie&&Be&&J==null){ye=0;break}if(4>_){ye=7;break}if(Se&&Ie||!Se&&!Ie&&!n(h,v[0],"ALPH")){_=[_],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{ct=h,ye=v,Se=_;var dt=Ce.gb;nt=Ce.na,Ve=Ce.P,ht=Ce.Sa,xt=22,t(ct!=null),t(Se!=null),Ye=ye[0];var fn=Se[0];for(t(nt!=null),t(ht!=null),nt[0]=null,Ve[0]=null,ht[0]=0;;){if(ye[0]=Ye,Se[0]=fn,8>fn){ye=7;break e}var yn=$e(ct,Ye+4);if(4294967286<yn){ye=3;break e}var Zt=8+yn+1&-2;if(xt+=Zt,0<dt&&xt>dt){ye=3;break e}if(!n(ct,Ye,"VP8 ")||!n(ct,Ye,"VP8L")){ye=0;break e}if(fn[0]<Zt){ye=7;break e}n(ct,Ye,"ALPH")||(nt[0]=ct,Ve[0]=Ye+8,ht[0]=yn),Ye+=Zt,fn-=Zt}}if(_=_[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],ye!=0)break}_=[_],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(dt=h,ye=v,Se=_,nt=Ce.gb[0],Ve=Ce.Ja,ht=Ce.xa,ct=ye[0],Ye=!n(dt,ct,"VP8 "),xt=!n(dt,ct,"VP8L"),t(dt!=null),t(Se!=null),t(Ve!=null),t(ht!=null),8>Se[0])ye=7;else{if(Ye||xt){if(dt=$e(dt,ct+4),12<=nt&&dt>nt-12){ye=3;break e}if(Oe&&dt>Se[0]-8){ye=7;break e}Ve[0]=dt,ye[0]+=8,Se[0]-=8,ht[0]=xt}else ht[0]=5<=Se[0]&&dt[ct+0]==47&&!(dt[ct+4]>>5),Ve[0]=Se[0];ye=0}if(_=_[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],v=v[0],ye!=0)break;if(4294967286<Ce.Ja)return 3;if(W==null||Be||(W[0]=Ce.xa?2:1),B=[B],Je=[Je],Ce.xa){if(5>_){ye=7;break}W=B,Oe=Je,Be=$,h==null||5>_?h=0:5<=_&&h[v+0]==47&&!(h[v+4]>>5)?(Se=[0],dt=[0],nt=[0],F(Ve=new P,h,v,_),gt(Ve,Se,dt,nt)?(W!=null&&(W[0]=Se[0]),Oe!=null&&(Oe[0]=dt[0]),Be!=null&&(Be[0]=nt[0]),h=1):h=0):h=0}else{if(10>_){ye=7;break}W=Je,h==null||10>_||!zc(h,v+3,_-3)?h=0:(Oe=h[v+0]|h[v+1]<<8|h[v+2]<<16,Be=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ce.Ja||!Be||!h?h=0:(B&&(B[0]=Be),W&&(W[0]=h),h=1))}if(!h||(B=B[0],Je=Je[0],Ie&&(te[0]!=B||we[0]!=Je)))return 3;J!=null&&(J[0]=Ce,J.offset=v-J.w,t(4294967286>v-J.w),t(J.offset==J.ha-_));break}return ye==0||ye==7&&Ie&&J==null?($!=null&&($[0]|=Ce.na!=null&&0<Ce.na.length),L!=null&&(L[0]=B),T!=null&&(T[0]=Je),0):ye}function eu(h,v,_){var L=v.width,T=v.height,$=0,B=0,W=L,J=T;if(v.Da=h!=null&&0<h.Da,v.Da&&(W=h.cd,J=h.bd,$=h.v,B=h.j,11>_||($&=-2,B&=-2),0>$||0>B||0>=W||0>=J||$+W>L||B+J>T))return 0;if(v.v=$,v.j=B,v.va=$+W,v.o=B+J,v.U=W,v.T=J,v.da=h!=null&&0<h.da,v.da){if(!Xe(W,J,_=[h.ib],$=[h.hb]))return 0;v.ib=_[0],v.hb=$[0]}return v.ob=h!=null&&h.ob,v.Kb=h==null||!h.Sd,v.da&&(v.ob=v.ib<3*L/4&&v.hb<3*T/4,v.Kb=0),1}function tu(h){if(h==null)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else v=h.f.kb,h=h.height,v.O+=(h-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function Ll(h,v,_,L){if(L==null||0>=h||0>=v)return 2;if(_!=null){if(_.Da){var T=_.cd,$=_.bd,B=-2&_.v,W=-2&_.j;if(0>B||0>W||0>=T||0>=$||B+T>h||W+$>v)return 2;h=T,v=$}if(_.da){if(!Xe(h,v,T=[_.ib],$=[_.hb]))return 2;h=T[0],v=$[0]}}L.width=h,L.height=v;e:{var J=L.width,te=L.height;if(h=L.S,0>=J||0>=te||!(h>=iu&&13>h))h=2;else{if(0>=L.Rd&&L.sd==null){B=$=T=v=0;var we=(W=J*Kp[h])*te;if(11>h||($=(te+1)/2*(v=(J+1)/2),h==12&&(B=(T=J)*te)),(te=s(we+2*$+B))==null){h=1;break e}L.sd=te,11>h?((J=L.f.RGBA).eb=te,J.fb=0,J.A=W,J.size=we):((J=L.f.kb).y=te,J.O=0,J.fa=W,J.Fd=we,J.f=te,J.N=0+we,J.Ab=v,J.Cd=$,J.ea=te,J.W=0+we+$,J.Db=v,J.Ed=$,h==12&&(J.F=te,J.J=0+we+2*$),J.Tc=B,J.lb=T)}if(v=1,T=L.S,$=L.width,B=L.height,T>=iu&&13>T)if(11>T)h=L.f.RGBA,v&=(W=Math.abs(h.A))*(B-1)+$<=h.size,v&=W>=$*Kp[T],v&=h.eb!=null;else{h=L.f.kb,W=($+1)/2,we=(B+1)/2,J=Math.abs(h.fa),te=Math.abs(h.Ab);var Ie=Math.abs(h.Db),Oe=Math.abs(h.lb),Ce=Oe*(B-1)+$;v&=J*(B-1)+$<=h.Fd,v&=te*(we-1)+W<=h.Cd,v=(v&=Ie*(we-1)+W<=h.Ed)&J>=$&te>=W&Ie>=W,v&=h.y!=null,v&=h.f!=null,v&=h.ea!=null,T==12&&(v&=Oe>=$,v&=Ce<=h.Tc,v&=h.F!=null)}else v=0;h=v?0:2}}return h!=0||_!=null&&_.fd&&(h=tu(L)),h}var Br=64,_s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pl=24,Tl=32,Lo=8,ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(h){return h},M.Predictor2=function(h,v,_){return v[_+0]},M.Predictor3=function(h,v,_){return v[_+1]},M.Predictor4=function(h,v,_){return v[_-1]},M.Predictor5=function(h,v,_){return ce(ce(h,v[_+1]),v[_+0])},M.Predictor6=function(h,v,_){return ce(h,v[_-1])},M.Predictor7=function(h,v,_){return ce(h,v[_+0])},M.Predictor8=function(h,v,_){return ce(v[_-1],v[_+0])},M.Predictor9=function(h,v,_){return ce(v[_+0],v[_+1])},M.Predictor10=function(h,v,_){return ce(ce(h,v[_-1]),ce(v[_+0],v[_+1]))},M.Predictor11=function(h,v,_){var L=v[_+0];return 0>=ve(L>>24&255,h>>24&255,(v=v[_-1])>>24&255)+ve(L>>16&255,h>>16&255,v>>16&255)+ve(L>>8&255,h>>8&255,v>>8&255)+ve(255&L,255&h,255&v)?L:h},M.Predictor12=function(h,v,_){var L=v[_+0];return(Ne((h>>24&255)+(L>>24&255)-((v=v[_-1])>>24&255))<<24|Ne((h>>16&255)+(L>>16&255)-(v>>16&255))<<16|Ne((h>>8&255)+(L>>8&255)-(v>>8&255))<<8|Ne((255&h)+(255&L)-(255&v)))>>>0},M.Predictor13=function(h,v,_){var L=v[_-1];return(he((h=ce(h,v[_+0]))>>24&255,L>>24&255)<<24|he(h>>16&255,L>>16&255)<<16|he(h>>8&255,L>>8&255)<<8|he(h>>0&255,L>>0&255))>>>0};var Vs=M.PredictorAdd0;M.PredictorAdd1=rt,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var Va=M.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var gd,Ji=M.ColorIndexInverseTransform,Ml=M.MapARGB,fa=M.VP8LColorIndexInverseTransformAlpha,mi=M.MapAlpha,ha=M.VP8LPredictorsAdd=[];ha.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Po,gi,ii,Ga,pa,vi,je,qe,De,mt,St,Wt,Un,vn,To,Mo,Dr,Ss,Do,Ns,Gs,js,on,Xi,Li,_n,Mn,ur,Sr=s(511),Qi=s(2041),Zi=s(225),ma=s(767),nu=0,Dl=Qi,ru=Zi,yi=ma,si=Sr,iu=0,Ya=1,Ka=2,Io=3,vd=4,Jf=5,zp=6,Il=7,Ol=8,Rl=9,Xf=10,qp=[2,3,7],t1=[3,3,11],Wp=[280,256,256,256,40],Nr=[0,1,1,1,0],Hr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],n1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],r1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Hp=8,Qf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],su=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ga=null,Zf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$l=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],au=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],i1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ja=[],ks=[],va=[],s1=1,ou=2,es=[],Pi=[];ze("UpsampleRgbLinePair",tn,3),ze("UpsampleBgrLinePair",Bn,3),ze("UpsampleRgbaLinePair",Yi,4),ze("UpsampleBgraLinePair",Mr,4),ze("UpsampleArgbLinePair",Tr,4),ze("UpsampleRgba4444LinePair",ir,2),ze("UpsampleRgb565LinePair",rr,2);var H=M.UpsampleRgbLinePair,Ul=M.UpsampleBgrLinePair,lu=M.UpsampleRgbaLinePair,Ti=M.UpsampleBgraLinePair,Qt=M.UpsampleArgbLinePair,Vp=M.UpsampleRgba4444LinePair,a1=M.UpsampleRgb565LinePair,xd=16,Ys=1<<xd-1,cu=-227,eh=482,Gp=6,o1=(256<<Gp)-1,Yp=0,ya=s(256),l1=s(256),c1=s(256),u1=s(256),d1=s(eh-cu),f1=s(eh-cu);Ki("YuvToRgbRow",tn,3),Ki("YuvToBgrRow",Bn,3),Ki("YuvToRgbaRow",Yi,4),Ki("YuvToBgraRow",Mr,4),Ki("YuvToArgbRow",Tr,4),Ki("YuvToRgba4444Row",ir,2),Ki("YuvToRgb565Row",rr,2);var Ks=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wd=[0,2,8],h1=[8,7,6,4,4,2,2,2,1,1,1,1],p1=1;this.WebPDecodeRGBA=function(h,v,_,L,T){var $=Ya,B=new $r,W=new or;B.ba=W,W.S=$,W.width=[W.width],W.height=[W.height];var J=W.width,te=W.height,we=new un;if(we==null||h==null)var Ie=2;else t(we!=null),Ie=Al(h,v,_,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ie!=0?J=0:(J!=null&&(J[0]=we.width[0]),te!=null&&(te[0]=we.height[0]),J=1),J){W.width=W.width[0],W.height=W.height[0],L!=null&&(L[0]=W.width),T!=null&&(T[0]=W.height);e:{if(L=new gl,(T=new Qc).data=h,T.w=v,T.ha=_,T.kd=1,v=[0],t(T!=null),((h=Al(T.data,T.w,T.ha,null,null,null,v,null,T))==0||h==7)&&v[0]&&(h=4),(v=h)==0){if(t(B!=null),L.data=T.data,L.w=T.w+T.offset,L.ha=T.ha-T.offset,L.put=lr,L.ac=rn,L.bc=Rr,L.ma=B,T.xa){if((h=Hi())==null){B=1;break e}if(function(Oe,Ce){var Je=[0],Be=[0],ye=[0];t:for(;;){if(Oe==null)return 0;if(Ce==null)return Oe.a=2,0;if(Oe.l=Ce,Oe.a=0,F(Oe.m,Ce.data,Ce.w,Ce.ha),!gt(Oe.m,Je,Be,ye)){Oe.a=3;break t}if(Oe.xb=ou,Ce.width=Je[0],Ce.height=Be[0],!Bs(Je[0],Be[0],1,Oe,null))break t;return 1}return t(Oe.a!=0),0}(h,L)){if(L=(v=Ll(L.width,L.height,B.Oa,B.ba))==0){t:{L=h;n:for(;;){if(L==null){L=0;break t}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((_=L.l)!=null),t((T=_.ma)!=null),L.xb!=0){if(L.ca=T.ba,L.tb=T.tb,t(L.ca!=null),!eu(T.Oa,_,Io)){L.a=2;break n}if(!No(L,_.width)||_.da)break n;if((_.da||Pt(L.ca.S))&&Me(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Me()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!Ge(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!xs(L,L.V,L.Ba,L.c,L.i,_.o,Wi))break n;T.Dc=L.Ma,L=1;break t}t(L.a!=0),L=0}L=!L}L&&(v=h.a)}else v=h.a}else{if((h=new Uf)==null){B=1;break e}if(h.Fa=T.na,h.P=T.P,h.qc=T.Sa,qc(h,L)){if((v=Ll(L.width,L.height,B.Oa,B.ba))==0){if(h.Aa=0,_=B.Oa,t((T=h)!=null),_!=null){if(0<(J=0>(J=_.Md)?0:100<J?255:255*J/100)){for(te=we=0;4>te;++te)12>(Ie=T.pb[te]).lc&&(Ie.ia=J*h1[0>Ie.lc?0:Ie.lc]>>3),we|=Ie.ia;we&&(alert("todo:VP8InitRandom"),T.ia=1)}T.Ga=_.Id,100<T.Ga?T.Ga=100:0>T.Ga&&(T.Ga=0)}rd(h,L)||(v=h.a)}}else v=h.a}v==0&&B.Oa!=null&&B.Oa.fd&&(v=tu(B.ba))}B=v}$=B!=0?null:11>$?W.f.RGBA.eb:W.f.kb.y}else $=null;return $};var Kp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(M,re){for(var ae="",R=0;R<4;R++)ae+=String.fromCharCode(M[re++]);return ae}function p(M,re){return(M[re+0]<<0|M[re+1]<<8|M[re+2]<<16)>>>0}function m(M,re){return(M[re+0]<<0|M[re+1]<<8|M[re+2]<<16|M[re+3]<<24)>>>0}new c;var x=[0],g=[0],N=[],j=new c,E=e,b=function(M,re){var ae={},R=0,U=!1,Y=0,K=0;if(ae.frames=[],!function(V,ne,le,de){for(var Ae=0;Ae<de;Ae++)if(V[ne+Ae]!=le.charCodeAt(Ae))return!0;return!1}(M,re,"RIFF",4)){for(m(M,re+=4),re+=8;re<M.length;){var xe=f(M,re),me=m(M,re+=4);re+=4;var X=me+(1&me);switch(xe){case"VP8 ":case"VP8L":ae.frames[R]===void 0&&(ae.frames[R]={}),(oe=ae.frames[R]).src_off=U?K:re-8,oe.src_size=Y+me+8,R++,U&&(U=!1,Y=0,K=0);break;case"VP8X":(oe=ae.header={}).feature_flags=M[re];var F=re+4;oe.canvas_width=1+p(M,F),F+=3,oe.canvas_height=1+p(M,F),F+=3;break;case"ALPH":U=!0,Y=X+8,K=re-8;break;case"ANIM":(oe=ae.header).bgcolor=m(M,re),F=re+4,oe.loop_count=(Le=M)[(P=F)+0]<<0|Le[P+1]<<8,F+=2;break;case"ANMF":var z,oe;(oe=ae.frames[R]={}).offset_x=2*p(M,re),re+=3,oe.offset_y=2*p(M,re),re+=3,oe.width=1+p(M,re),re+=3,oe.height=1+p(M,re),re+=3,oe.duration=p(M,re),re+=3,z=M[re++],oe.dispose=1&z,oe.blend=z>>1&1}xe!="ANMF"&&(re+=X)}var Le,P;return ae}}(E,0);b.response=E,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,A=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,x=[S.canvas_height],g=[S.canvas_width];for(var O=0;O<A.length&&A[O].blend!=0;O++);}var G=A[0],ie=j.WebPDecodeRGBA(E,G.src_off,G.src_size,g,x);G.rgba=ie,G.imgwidth=g[0],G.imgheight=x[0];for(var q=0;q<g[0]*x[0]*4;q++)N[q]=ie[q];return this.width=g,this.height=x,this.data=N,this}(function(e){var t=function(){return typeof gy=="function"},n=function(x,g,N,j){var E=4,b=a;switch(j){case e.image_compression.FAST:E=1,b=s;break;case e.image_compression.MEDIUM:E=6,b=l;break;case e.image_compression.SLOW:E=9,b=c}x=r(x,g,N,b);var S=gy(x,{level:E});return e.__addimage__.arrayBufferToBinaryString(S)},r=function(x,g,N,j){for(var E,b,S,A=x.length/g,O=new Uint8Array(x.length+A),G=p(),ie=0;ie<A;ie+=1){if(S=ie*g,E=x.subarray(S,S+g),j)O.set(j(E,N,b),S+ie);else{for(var q,M=G.length,re=[];q<M;q+=1)re[q]=G[q](E,N,b);var ae=m(re.concat());O.set(re[ae],S+ie)}b=E}return O},i=function(x){var g=Array.apply([],x);return g.unshift(0),g},s=function(x,g){var N,j=[],E=x.length;j[0]=1;for(var b=0;b<E;b+=1)N=x[b-g]||0,j[b+1]=x[b]-N+256&255;return j},a=function(x,g,N){var j,E=[],b=x.length;E[0]=2;for(var S=0;S<b;S+=1)j=N&&N[S]||0,E[S+1]=x[S]-j+256&255;return E},l=function(x,g,N){var j,E,b=[],S=x.length;b[0]=3;for(var A=0;A<S;A+=1)j=x[A-g]||0,E=N&&N[A]||0,b[A+1]=x[A]+256-(j+E>>>1)&255;return b},c=function(x,g,N){var j,E,b,S,A=[],O=x.length;A[0]=4;for(var G=0;G<O;G+=1)j=x[G-g]||0,E=N&&N[G]||0,b=N&&N[G-g]||0,S=f(j,E,b),A[G+1]=x[G]-S+256&255;return A},f=function(x,g,N){if(x===g&&g===N)return x;var j=Math.abs(g-N),E=Math.abs(x-N),b=Math.abs(x+g-N-N);return j<=E&&j<=b?x:E<=b?g:N},p=function(){return[i,s,a,l,c]},m=function(x){var g=x.map(function(N){return N.reduce(function(j,E){return j+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};e.processPNG=function(x,g,N,j){var E,b,S,A,O,G,ie,q,M,re,ae,R,U,Y,K,xe=this.decode.FLATE_DECODE,me="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(S=new pB(x)).imgData,b=S.bits,E=S.colorSpace,O=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){M=(q=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,ae=new Uint8Array(M*S.colors),re=new Uint8Array(M);var X,F=S.pixelBitlength-S.bits;for(Y=0,K=0;Y<M;Y++){for(U=q[Y],X=0;X<F;)ae[K++]=U>>>X&255,X+=S.bits;re[Y]=U>>>X&255}}if(S.bits===16){M=(q=new Uint32Array(S.decodePixels().buffer)).length,ae=new Uint8Array(M*(32/S.pixelBitlength)*S.colors),re=new Uint8Array(M*(32/S.pixelBitlength)),R=S.colors>1,Y=0,K=0;for(var z=0;Y<M;)U=q[Y++],ae[K++]=U>>>0&255,R&&(ae[K++]=U>>>16&255,U=q[Y++],ae[K++]=U>>>0&255),re[z++]=U>>>16&255;b=8}j!==e.image_compression.NONE&&t()?(x=n(ae,S.width*S.colors,S.colors,j),ie=n(re,S.width,1,j)):(x=ae,ie=re,xe=void 0)}if(S.colorType===3&&(E=this.color_spaces.INDEXED,G=S.palette,S.transparency.indexed)){var oe=S.transparency.indexed,Le=0;for(Y=0,M=oe.length;Y<M;++Y)Le+=oe[Y];if((Le/=255)===M-1&&oe.indexOf(0)!==-1)A=[oe.indexOf(0)];else if(Le!==M){for(q=S.decodePixels(),re=new Uint8Array(q.length),Y=0,M=q.length;Y<M;Y++)re[Y]=oe[q[Y]];ie=n(re,S.width,1)}}var P=function(V){var ne;switch(V){case e.image_compression.FAST:ne=11;break;case e.image_compression.MEDIUM:ne=13;break;case e.image_compression.SLOW:ne=14;break;default:ne=12}return ne}(j);return xe===this.decode.FLATE_DECODE&&(me="/Predictor "+P+" "),me+="/Colors "+O+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(ie&&this.__addimage__.isArrayBuffer(ie)||this.__addimage__.isArrayBufferView(ie))&&(ie=this.__addimage__.arrayBufferToBinaryString(ie)),{alias:N,data:x,index:g,filter:xe,decodeParameters:me,transparency:A,palette:G,sMask:ie,predictor:P,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:E}}}})(Dt.API),function(e){e.processGIF89A=function(t,n,r,i){var s=new mB(t),a=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:a,height:l},p=new qv(100).encode(f,100);return e.processJPEG.call(this,p,n,r,i)},e.processGIF87A=e.processGIF89A}(Dt.API),ka.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ka.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Fn.log("bit decode error:"+n)}},ka.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},ka.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=s>>4,c=15&s,f=this.palette[l];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},ka.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ka.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,f=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=f}this.pos+=e}},ka.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,c=(a>>5&n)/n*255|0,f=(a>>11)/t*255|0,p=i*this.width*4+4*s;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},ka.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},ka.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},ka.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var s=new ka(t,!1),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new qv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Dt.API),Y_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var s=new Y_(t),a=s.width,l=s.height,c={data:s.getData(),width:a,height:l},f=new qv(100).encode(c,100);return e.processJPEG.call(this,f,n,r,i)}}(Dt.API),Dt.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,c=0,f=0;f<i;f+=4){var p=r[f],m=r[f+1],x=r[f+2],g=r[f+3];s[l++]=p,s[l++]=m,s[l++]=x,a[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:N,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Dt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ud=Dt.API,Jm=Ud.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,m=t.doKerning!==!1,x=0,g=e.length,N=0,j=l[0]||c,E=[];for(n=0;n<g;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(x=m&&An(f[r])==="object"&&!isNaN(parseInt(f[r][N],10))?f[r][N]/p:0,E.push((l[r]||j)/c+x)),N=r;return E},W_=Ud.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Ud.processArabic&&(e=Ud.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Jm.apply(this,arguments).reduce(function(s,a){return s+a},0)},H_=function(e,t,n,r){for(var i=[],s=0,a=e.length,l=0;s!==a&&l+t[s]<n;)l+=t[s],s++;i.push(e.slice(0,s));var c=s;for(l=0;s!==a;)l+t[s]>r&&(i.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&i.push(e.slice(c,s)),i},V_=function(e,t,n){n||(n={});var r,i,s,a,l,c,f,p=[],m=[p],x=n.textIndent||0,g=0,N=0,j=e.split(" "),E=Jm.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?j[0].length+2:n.lineIndent||0){var b=Array(c).join(" "),S=[];j.map(function(O){(O=O.split(/\s*\n/)).length>1?S=S.concat(O.map(function(G,ie){return(ie&&G.length?`
`:"")+G})):S.push(O[0])}),j=S,c=W_.apply(this,[b,n])}for(s=0,a=j.length;s<a;s++){var A=0;if(r=j[s],c&&r[0]==`
`&&(r=r.substr(1),A=1),x+g+(N=(i=Jm.apply(this,[r,n])).reduce(function(O,G){return O+G},0))>t||A){if(N>t){for(l=H_.apply(this,[r,i,t-(x+g),t]),p.push(l.shift()),p=[l.pop()];l.length;)m.push([l.shift()]);N=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(O,G){return O+G},0)}else p=[r];m.push(p),x=N+c,g=E}else p.push(r),x+=g+N,g=E}return f=c?function(O,G){return(G?b:"")+O.join(" ")}:function(O){return O.join(" ")},m.map(f)},Ud.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,f=[];for(l=0,c=r.length;l<c;l++)f=f.concat(V_.apply(this,[r[l],a,s]));return f},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=e.__fontmetrics__.compress=function(m){var x,g,N,j,E=["{"];for(var b in m){if(x=m[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof x=="number")x<0?(N=s(x).slice(3),j="-"):(N=s(x).slice(2),j=""),N=j+N.slice(0,-1)+r[N.slice(-1)];else{if(An(x)!=="object")throw new Error("Don't know what to do with value type "+An(x)+".");N=a(x)}E.push(g+N)}return E.push("}"),E.join("")},l=e.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,g,N,j,E={},b=1,S=E,A=[],O="",G="",ie=m.length-1,q=1;q<ie;q+=1)(j=m[q])=="'"?x?(N=x.join(""),x=void 0):x=[]:x?x.push(j):j=="{"?(A.push([S,N]),S={},N=void 0):j=="}"?((g=A.pop())[0][g[1]]=S,N=void 0,S=g[0]):j=="-"?b=-1:N===void 0?n.hasOwnProperty(j)?(O+=n[j],N=parseInt(O,16)*b,b=1,O=""):O+=j:n.hasOwnProperty(j)?(G+=n[j],S[N]=parseInt(G,16)*b,b=1,N=void 0,G=""):G+=j;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(m){var x=m.font,g=p.Unicode[x.postScriptName];g&&(x.metadata.Unicode={},x.metadata.Unicode.widths=g.widths,x.metadata.Unicode.kerning=g.kerning);var N=f.Unicode[x.postScriptName];N&&(x.metadata.Unicode.encoding=N,x.encoding=N.codePages[0])}])}(Dt.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Gh(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Dt),function(e){function t(){return(It.canvg?Promise.resolve(It.canvg):al(()=>import("./index.es-CHkVnPH-.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Dt.API.addSvgAsImage=function(n,r,i,s,a,l,c,f){if(isNaN(r)||isNaN(i))throw Fn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Fn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return t().then(function(N){return N.fromString(m,n,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(x)}).then(function(){g.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,c,f)})}}(),Dt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},Dt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],f=0,p=0,m=0;function x(N,j){var E,b=!1;for(E=0;E<N.length;E+=1)N[E]===j&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(m=0;m<g;m+=1)n[l[m]].value=n[l[m]].defaultValue,n[l[m]].explicitSet=!1}if(An(e)==="object"){for(i in e)if(s=e[i],x(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&x(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,j=[];for(N in n)n[N].explicitSet===!0&&(n[N].type==="name"?j.push("/"+N+" /"+n[N].value):j.push("/"+N+" "+n[N].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Dt.API),function(e){var t=e.API,n=t.pdfEscape16=function(s,a){for(var l,c=a.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],m=0,x=s.length;m<x;++m){if(l=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=s.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(f[4-l.length],l)}return p.join("")},r=function(s){var a,l,c,f,p,m,x;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,x=(l=Object.keys(s).sort(function(g,N){return g-N})).length;m<x;m++)a=l[m],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+f+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",N=0;N<x.length;N++)g+=String.fromCharCode(x[N]);var j=f();p({data:g,addLength1:!0,objectId:j}),c("endobj");var E=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var b=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+qd(l.fontName)),c("/FontFile2 "+j+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+qd(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+qd(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var l=a.font,c=a.out,f=a.newObject,p=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,x="",g=0;g<m.length;g++)x+=String.fromCharCode(m[g]);var N=f();p({data:x,addLength1:!0,objectId:N}),c("endobj");var j=f();p({data:r(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var E=f();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+qd(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=f();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+qd(l.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,l=s.text||"",c=s.x,f=s.y,p=s.options||{},m=s.mutex||{},x=m.pdfEscape,g=m.activeFontKey,N=m.fonts,j=g,E="",b=0,S="",A=N[j].encoding;if(N[j].encoding!=="Identity-H")return{text:l,x:c,y:f,options:p,mutex:m};for(S=l,j=g,Array.isArray(l)&&(S=l[0]),b=0;b<S.length;b+=1)N[j].metadata.hasOwnProperty("cmap")&&(a=N[j].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),a||S[b].charCodeAt(0)<256&&N[j].metadata.hasOwnProperty("Unicode")?E+=S[b]:E+="";var O="";return parseInt(j.slice(1))<14||A==="WinAnsiEncoding"?O=x(E,j).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(O=n(E,N[j])),m.isHex=!0,{text:O,x:c,y:f,options:p,mutex:m}};t.events.push(["postProcessText",function(s){var a=s.text||"",l=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?l.push([i(Object.assign({},c,{text:a[f][0]})).text,a[f][1],a[f][2]]):l.push(i(Object.assign({},c,{text:a[f]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Dt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,a,l,c,f,p,m=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,A=0;this.__bidiEngine__={};var O=function(R){var U=R.charCodeAt(),Y=U>>8,K=j[Y];return K!==void 0?m[256*K+(255&U)]:Y===252||Y===253?"AL":b.test(Y)?"L":Y===8?"R":"N"},G=function(R){for(var U,Y=0;Y<R.length;Y++){if((U=O(R.charAt(Y)))==="L")return!1;if(U==="R")return!0}return!1},ie=function(R,U,Y,K){var xe,me,X,F,z=U[K];switch(z){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(z="AN");break;case"AL":S=!0,z="R";break;case"WS":z="N";break;case"CS":K<1||K+1>=U.length||(xe=Y[K-1])!=="EN"&&xe!=="AN"||(me=U[K+1])!=="EN"&&me!=="AN"?z="N":S&&(me="AN"),z=me===xe?me:"N";break;case"ES":z=(xe=K>0?Y[K-1]:"B")==="EN"&&K+1<U.length&&U[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&Y[K-1]==="EN"){z="EN";break}if(S){z="N";break}for(X=K+1,F=U.length;X<F&&U[X]==="ET";)X++;z=X<F&&U[X]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(F=U.length,X=K+1;X<F&&U[X]==="NSM";)X++;if(X<F){var oe=R[K],Le=oe>=1425&&oe<=2303||oe===64286;if(xe=U[X],Le&&(xe==="R"||xe==="AL")){z="R";break}}}z=K<1||(xe=U[K-1])==="B"?"N":Y[K-1];break;case"B":S=!1,i=!0,z=A;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":z="N"}return z},q=function(R,U,Y){var K=R.split("");return Y&&M(K,Y,{hiLevel:A}),K.reverse(),U&&U.reverse(),K.join("")},M=function(R,U,Y){var K,xe,me,X,F,z=-1,oe=R.length,Le=0,P=[],V=A?g:x,ne=[];for(S=!1,i=!1,s=!1,xe=0;xe<oe;xe++)ne[xe]=O(R[xe]);for(me=0;me<oe;me++){if(F=Le,P[me]=ie(R,ne,P,me),K=240&(Le=V[F][N[P[me]]]),Le&=15,U[me]=X=V[Le][5],K>0)if(K===16){for(xe=z;xe<me;xe++)U[xe]=1;z=-1}else z=-1;if(V[Le][6])z===-1&&(z=me);else if(z>-1){for(xe=z;xe<me;xe++)U[xe]=X;z=-1}ne[me]==="B"&&(U[me]=0),Y.hiLevel|=X}s&&function(le,de,Ae){for(var Ee=0;Ee<Ae;Ee++)if(le[Ee]==="S"){de[Ee]=A;for(var Z=Ee-1;Z>=0&&le[Z]==="WS";Z--)de[Z]=A}}(ne,U,oe)},re=function(R,U,Y,K,xe){if(!(xe.hiLevel<R)){if(R===1&&A===1&&!i)return U.reverse(),void(Y&&Y.reverse());for(var me,X,F,z,oe=U.length,Le=0;Le<oe;){if(K[Le]>=R){for(F=Le+1;F<oe&&K[F]>=R;)F++;for(z=Le,X=F-1;z<X;z++,X--)me=U[z],U[z]=U[X],U[X]=me,Y&&(me=Y[z],Y[z]=Y[X],Y[X]=me);Le=F}Le++}}},ae=function(R,U,Y){var K=R.split(""),xe={hiLevel:A};return Y||(Y=[]),M(K,Y,xe),function(me,X,F){if(F.hiLevel!==0&&p)for(var z,oe=0;oe<me.length;oe++)X[oe]===1&&(z=E.indexOf(me[oe]))>=0&&(me[oe]=E[z+1])}(K,Y,xe),re(2,K,U,Y,xe),re(1,K,U,Y,xe),K.join("")};return this.__bidiEngine__.doBidiReorder=function(R,U,Y){if(function(xe,me){if(me)for(var X=0;X<xe.length;X++)me[X]=X;l===void 0&&(l=G(xe)),f===void 0&&(f=G(xe))}(R,U),a||!c||f)if(a&&c&&l^f)A=l?1:0,R=q(R,U,Y);else if(!a&&c&&f)A=l?1:0,R=ae(R,U,Y),R=q(R,U);else if(!a||l||c||f){if(a&&!c&&l^f)R=q(R,U),l?(A=0,R=ae(R,U,Y)):(A=1,R=ae(R,U,Y),R=q(R,U));else if(a&&l&&!c&&f)A=1,R=ae(R,U,Y),R=q(R,U);else if(!a&&!c&&l^f){var K=p;l?(A=1,R=ae(R,U,Y),A=0,p=!1,R=ae(R,U,Y),p=K):(A=0,R=ae(R,U,Y),R=q(R,U),A=1,p=!1,R=ae(R,U,Y),p=K,R=q(R,U))}}else A=0,R=ae(R,U,Y);else A=l?1:0,R=ae(R,U,Y);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,f=R.isOutputRtl,p=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Ic(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new LB(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new gB(this.contents),this.head=new yB(this),this.name=new SB(this),this.cmap=new O6(this),this.toUnicode={},this.hhea=new xB(this),this.maxp=new NB(this),this.hmtx=new jB(this),this.post=new bB(this),this.os2=new wB(this),this.loca=new AB(this),this.glyf=new kB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,f;for(f=[],a=0,l=(c=this.bbox).length;a<l;a++)t=c[a],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,s,a,l;for(a=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Ua,Ic=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,s,a,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*a+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,s;for(s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(this.writeByte(n));return s},e}(),gB=function(){var e;function t(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,s,a,l,c,f,p,m,x,g,N,j;for(j in g=Object.keys(n).length,c=Math.log(2),m=16*Math.floor(Math.log(g)/c),a=Math.floor(m/c),p=16*g-m,(i=new Ic).writeInt(this.scalarType),i.writeShort(g),i.writeShort(m),i.writeShort(a),i.writeShort(p),s=16*g,f=i.pos+s,l=null,N=[],n)for(x=n[j],i.writeString(j),i.writeInt(e(x)),i.writeInt(f),i.writeInt(x.length),N=N.concat(x),j==="head"&&(l=f),f+=x.length;f%4;)N.push(0),f++;return i.write(N),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,s,a;for(n=R6.call(n);n.length%4;)n.push(0);for(s=new Ic(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},t}(),vB={}.hasOwnProperty,_o=function(e,t){for(var n in t)vB.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ua=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var yB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Ic).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),K_=function(){function e(t,n){var r,i,s,a,l,c,f,p,m,x,g,N,j,E,b,S,A;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),m=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),x=g/2,t.pos+=6,s=function(){var O,G;for(G=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)G.push(t.readUInt16());return G}(),t.pos+=2,j=function(){var O,G;for(G=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)G.push(t.readUInt16());return G}(),f=function(){var O,G;for(G=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)G.push(t.readUInt16());return G}(),p=function(){var O,G;for(G=[],c=O=0;0<=x?O<x:O>x;c=0<=x?++O:--O)G.push(t.readUInt16());return G}(),i=(this.length-t.pos+this.offset)/2,l=function(){var O,G;for(G=[],c=O=0;0<=i?O<i:O>i;c=0<=i?++O:--O)G.push(t.readUInt16());return G}(),c=b=0,A=s.length;b<A;c=++b)for(E=s[c],r=S=N=j[c];N<=E?S<=E:S>=E;r=N<=E?++S:--S)p[c]===0?a=r+f[c]:(a=l[p[c]/2+(r-N)-(x-c)]||0)!==0&&(a+=f[c]),this.codeMap[r]=65535&a}t.pos=m}return e.encode=function(t,n){var r,i,s,a,l,c,f,p,m,x,g,N,j,E,b,S,A,O,G,ie,q,M,re,ae,R,U,Y,K,xe,me,X,F,z,oe,Le,P,V,ne,le,de,Ae,Ee,Z,ke,_e,Re;switch(K=new Ic,a=Object.keys(t).sort(function($e,Ge){return $e-Ge}),n){case"macroman":for(j=0,E=function(){var $e=[];for(N=0;N<256;++N)$e.push(0);return $e}(),S={0:0},s={},xe=0,z=a.length;xe<z;xe++)S[Z=t[i=a[xe]]]==null&&(S[Z]=++j),s[i]={old:t[i],new:S[t[i]]},E[i]=S[t[i]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(E),{charMap:s,subtable:K.data,maxGlyphID:j+1};case"unicode":for(U=[],m=[],A=0,S={},r={},b=f=null,me=0,oe=a.length;me<oe;me++)S[G=t[i=a[me]]]==null&&(S[G]=++A),r[i]={old:G,new:S[G]},l=S[G]-i,b!=null&&l===f||(b&&m.push(b),U.push(i),f=l),b=i;for(b&&m.push(b),m.push(65535),U.push(65535),ae=2*(re=U.length),M=2*Math.pow(Math.log(re)/Math.LN2,2),x=Math.log(M/2)/Math.LN2,q=2*re-M,c=[],ie=[],g=[],N=X=0,Le=U.length;X<Le;N=++X){if(R=U[N],p=m[N],R===65535){c.push(0),ie.push(0);break}if(R-(Y=r[R].new)>=32768)for(c.push(0),ie.push(2*(g.length+re-N)),i=F=R;R<=p?F<=p:F>=p;i=R<=p?++F:--F)g.push(r[i].new);else c.push(Y-R),ie.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*re+2*g.length),K.writeUInt16(0),K.writeUInt16(ae),K.writeUInt16(M),K.writeUInt16(x),K.writeUInt16(q),Ae=0,P=m.length;Ae<P;Ae++)i=m[Ae],K.writeUInt16(i);for(K.writeUInt16(0),Ee=0,V=U.length;Ee<V;Ee++)i=U[Ee],K.writeUInt16(i);for(ke=0,ne=c.length;ke<ne;ke++)l=c[ke],K.writeUInt16(l);for(_e=0,le=ie.length;_e<le;_e++)O=ie[_e],K.writeUInt16(O);for(Re=0,de=g.length;Re<de;Re++)j=g[Re],K.writeUInt16(j);return{charMap:r,subtable:K.data,maxGlyphID:A+1}}},e}(),O6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new K_(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=K_.encode(n,r),(s=new Ic).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},t}(),xB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),wB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),bB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,f;for(f=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)f.push(n.readUInt32());return f}).call(this)}},t}(),_B=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},SB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,s,a,l,c,f,p,m,x,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(f={},a=m=0,x=i.length;m<x;a=++m)s=i[a],n.pos=s.offset,p=n.readString(s.length),l=new _B(p,s),f[g=s.nameID]==null&&(f[g]=[]),f[s.nameID].push(l);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},t}(),NB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),jB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,s,a,l,c,f;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)m.push(n.readInt16());return m}(),this.widths=(function(){var p,m,x,g;for(g=[],p=0,m=(x=this.metrics).length;p<m;p++)a=x[p],g.push(a.advance);return g}).call(this),i=this.widths[this.widths.length-1],f=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)f.push(this.widths.push(i));return f},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),R6=[].slice,kB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,s,a,l,c,f,p,m,x;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(s=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Ic(r.read(s))).readShort(),p=c.readShort(),x=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[n]=l===-1?new CB(c,p,x,f,m):new EB(c,l,p,x,f,m),this.cache[n]))},t.prototype.encode=function(n,r,i){var s,a,l,c,f;for(l=[],a=[],c=0,f=r.length;c<f;c++)s=n[r[c]],a.push(l.length),s&&(l=l.concat(s.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),EB=function(){function e(t,n,r,i,s,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),CB=function(){function e(t,n,r,i,s){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Ic(R6.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),AB=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _o(t,Ua),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,l=0;l<i.length;++l)if(i[l]=s,a<r.length&&r[a]==l){++a,i[l]=s;var c=this.offsets[l],f=this.offsets[l+1]-c;f>0&&(s+=f)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},t}(),LB=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)r=s[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,s,a,l,c;for(i={},a=0,l=t.length;a<l;a++)i[s=t[a]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},e.prototype.encode=function(t,n){var r,i,s,a,l,c,f,p,m,x,g,N,j,E,b;for(i in r=O6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),g={0:0},b=r.charMap)g[(c=b[i]).old]=c.new;for(N in x=r.maxGlyphID,a)N in g||(g[N]=x++);return p=function(S){var A,O;for(A in O={},S)O[S[A]]=A;return O}(g),m=Object.keys(p).sort(function(S,A){return S-A}),j=function(){var S,A,O;for(O=[],S=0,A=m.length;S<A;S++)l=m[S],O.push(p[l]);return O}(),s=this.font.glyf.encode(a,j,g),f=this.font.loca.encode(s.offsets,j),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},e}();Dt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,s,a;if(Array.isArray(n))return"["+function(){var l,c,f;for(f=[],l=0,c=n.length;l<c;l++)r=n[l],f.push(t.convert(r));return f}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)a=n[i],s.push("/"+i+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+n},t}();function PB({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){var be;const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para das seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualizacin de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para das con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los das seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=FS(),[s,a]=k.useState(void 0),[l,c]=k.useState(!0),[f,p]=k.useState(!1),[m,x]=k.useState(null),[g,N]=k.useState(!1),[j,E]=k.useState([]),[b,S]=k.useState([]),[A,O]=k.useState([]),[G,ie]=k.useState([]),{user:q}=Zr(),[M,re]=k.useState(new Date),[ae,R]=k.useState(new Set),[U,Y]=k.useState(new Map),K=ce=>Kt(ce,"yyyy-MM"),xe=k.useDeferredValue(U),me=k.useMemo(()=>{const ce=[],Ne=new Set;return xe.forEach(he=>{he.forEach(ve=>{const rt=ve.memberId;Ne.has(rt)||(Ne.add(rt),ce.push({...ve,dates:[]}))})}),ce.forEach(he=>{const ve=[];xe.forEach(rt=>{const ot=rt.find(it=>it.memberId===he.memberId);ot&&ve.push(...ot.dates)}),he.dates=ve}),ce},[xe]);k.useEffect(()=>{q&&(ne(),Ee(M),de(),le(),Ae())},[q,i]),k.useEffect(()=>{if(!q)return;const ce=K(M);ae.has(ce)||Ee(M);const Ne=new Date(M.getFullYear(),M.getMonth()-1,1),he=new Date(M.getFullYear(),M.getMonth()+1,1),ve=K(Ne),rt=K(he),ot=setTimeout(()=>{ae.has(ve)||Ee(Ne),ae.has(rt)||Ee(he)},500);return()=>clearTimeout(ot)},[M,q,ae.size]);const X=k.useMemo(()=>{const ce=new Map;return me.forEach(Ne=>{const he=new Set;Ne.dates.forEach(ve=>{he.add(Kt(ve,"yyyy-MM-dd"))}),ce.set(Ne.userId,he)}),ce},[me]),F=k.useMemo(()=>{const ce=new Map,Ne=new Map;return b.forEach(he=>{ce.has(he.user_id)||ce.set(he.user_id,new Set),ce.get(he.user_id).add(Kt(new Date(he.date),"yyyy-MM-dd"))}),G.forEach(he=>{Ne.has(he.user_id)||Ne.set(he.user_id,new Set),Ne.get(he.user_id).add(Kt(new Date(he.date),"yyyy-MM-dd"))}),{groupEvents:ce,externalEvents:Ne}},[b,G]),z=k.useMemo(()=>{const ce=new Map,Ne=new Set;return X.forEach(he=>{he.forEach(ve=>Ne.add(ve))}),Ne.forEach(he=>{const ve=e.filter(rt=>{var ot,it,Fe;if(rt.user_id){const st=((ot=X.get(rt.user_id))==null?void 0:ot.has(he))??!1,Ue=((it=F.groupEvents.get(rt.user_id))==null?void 0:it.has(he))??!1,Ct=((Fe=F.externalEvents.get(rt.user_id))==null?void 0:Fe.has(he))??!1;return st&&!Ue&&!Ct}else{const st=me.find(Ct=>Ct.memberId===rt.id);return(st==null?void 0:st.dates.some(Ct=>Kt(Ct,"yyyy-MM-dd")===he))??!1}});ce.set(he,ve)}),ce},[e,X,F,me]),oe=k.useCallback(ce=>{const Ne=Kt(ce,"yyyy-MM-dd");return z.get(Ne)||[]},[z]),Le=k.useMemo(()=>{const ce=new Map,Ne=e.filter(ve=>ve.role_in_group==="principal"),he=new Set;return Ne.forEach(ve=>{ve.instruments.forEach(rt=>{he.add(rt.id)})}),z.forEach((ve,rt)=>{const ot=ve.filter(Fe=>Fe.role_in_group==="sustituto"),it=Array.from(he).every(Fe=>ve.some(Ue=>Ue.role_in_group==="principal"&&Ue.instruments.some(Ct=>Ct.id===Fe))?!0:ot.some(Ct=>Ct.instruments.some(ut=>ut.id===Fe)));ce.set(rt,it)}),ce},[e,z]),P=k.useCallback(ce=>{const Ne=Kt(ce,"yyyy-MM-dd");return Le.get(Ne)??!1},[Le]),V=k.useMemo(()=>{if(!t)return[];if(e.filter(he=>he.role_in_group==="principal").length===0)return[];const Ne=[];return Le.forEach((he,ve)=>{he&&Ne.push(new Date(ve))}),Ne.sort((he,ve)=>he.getTime()-ve.getTime())},[e,Le,t]);k.useEffect(()=>{t&&V.length>=0&&(E(V),t(V))},[V,t]),k.useEffect(()=>{t&&t(j)},[j,t]);const ne=k.useCallback(async()=>{const ce=await Wn(async()=>await et.from("users").select("role").eq("id",q==null?void 0:q.id).single(),"Error checking admin status");ce&&N(ce.role==="admin")},[q==null?void 0:q.id]),le=async()=>{const ce=await Wn(async()=>await et.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(ce){const Ne=[];ce.forEach(he=>{var ve;(ve=he.event_members)==null||ve.forEach(rt=>{Ne.push({event_id:he.id,date:he.date,user_id:rt.user_id,name:he.name,group_id:he.group_id})})}),S(Ne)}},de=async()=>{const ce=await Wn(async()=>await et.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(ce){const Ne=ce.map(he=>({event_id:he.id,date:he.date,user_id:"",name:he.name,group_id:he.group_id}));O(Ne)}},Ae=async()=>{const ce=await et.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(ce.error){console.error("Error al obtener eventos externos:",ce.error);return}const Ne=ce.data||[],he=[];Ne.forEach(ve=>{var rt;(rt=ve.event_members)==null||rt.forEach(ot=>{he.push({user_id:ot.user_id,date:ve.date})})}),ie(he)},Ee=async ce=>{if(!i)return;const Ne=K(ce);if(!ae.has(Ne)){ae.size===0&&c(!0);try{const he=e.filter(Fe=>Fe.user_id!==null).map(Fe=>Fe.user_id),ve=e.filter(Fe=>Fe.user_id===null).map(Fe=>Fe.id),rt=Kt(di(ce),"yyyy-MM-dd"),ot=Kt(Ef(ce),"yyyy-MM-dd"),it=await Wn(async()=>{if(he.length===0&&ve.length===0)return[];let Fe=et.from("member_availability").select("user_id, group_member_id, date").gte("date",rt).lte("date",ot);const st=[];return he.length>0&&st.push(`user_id.in.(${he.join(",")})`),ve.length>0&&st.push(`group_member_id.in.(${ve.join(",")})`),st.length>0&&(Fe=Fe.or(st.join(","))),Fe.order("date")},`Error fetching availabilities for ${Ne}`);if(it){const Fe=e.map(st=>{const Ue=it.filter(ut=>st.user_id&&ut.user_id===st.user_id||!st.user_id&&ut.group_member_id===st.id);return{userId:st.user_id,memberId:st.id,memberName:st.name||"Unknown Member",memberType:st.member_type||"registered",dates:Ue.map(ut=>new Date(ut.date)),instruments:st.instruments||[],roleInBand:st.role_in_group||"principal"}});Y(st=>new Map(st.set(Ne,Fe))),R(st=>new Set(st.add(Ne)))}}catch(he){console.error(`Error fetching availabilities for ${Ne}:`,he),Te.error(`Error al obtener las disponibilidades de ${Ne}`)}finally{c(!1)}}},Z=ce=>A.filter(Ne=>_r(new Date(Ne.date),ce)),ke=()=>{const ce=e.find(Ne=>Ne.user_id===(q==null?void 0:q.id));return g||(ce==null?void 0:ce.role_in_group)==="principal"},[_e,Re]=k.useState(!1),$e=k.useRef(null),Ge=async(ce=!1)=>{try{const Ne=window.scrollY;return ce?Re(!0):p(!0),await new Promise(he=>setTimeout(he,50)),await Promise.all([Ee(M),le(),de(),Ae()]),window.scrollTo(0,Ne),ce||Te.success("Calendario actualizado correctamente"),!0}catch(Ne){return console.error("Error al actualizar datos del calendario:",Ne),ce||Te.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{ce||p(!1),Re(!1)},500)}},fe=async ce=>{var ot,it;if(!q){Te.error("Debes iniciar sesin para gestionar la disponibilidad");return}if(f)return;p(!0);const Ne=m||((ot=e.find(Fe=>Fe.user_id===q.id))==null?void 0:ot.id),he=e.find(Fe=>Fe.id===Ne);if(!he){Te.error("Miembro no encontrado"),p(!1);return}const ve=e.find(Fe=>Fe.user_id===q.id);if(!(g||(ve==null?void 0:ve.role_in_group)==="principal"||he.user_id===q.id)){Te.error("No tienes permisos para gestionar esta disponibilidad"),p(!1);return}if(he.user_id&&b.some(st=>st.user_id===he.user_id&&_r(new Date(st.date),ce))){Te.error("No puedes cambiar la disponibilidad en fechas con eventos programados"),p(!1);return}try{const Fe=(it=me.find(Ue=>Ue.memberId===he.id))==null?void 0:it.dates.some(Ue=>_r(Ue,ce)),st=Kt(ce,"yyyy-MM-dd");if(Fe)try{let Ue;if(he.user_id?Ue=await et.from("member_availability").delete().eq("user_id",he.user_id).eq("date",st):Ue=await et.from("member_availability").delete().eq("group_member_id",he.id).eq("date",st),Ue.error){console.error("Error al eliminar disponibilidad:",Ue.error),Te.error("Hubo un problema al guardar"),p(!1);return}a(ce),Te.success(`Fecha ${Kt(ce,"dd/MM/yyyy")} eliminada de la disponibilidad`);const Ct=K(ce);Y(ut=>{const Gt=new Map(ut);let jt=Gt.get(Ct);if(!jt)return Ee(ce),ut;const At=jt.map(mn=>{if(mn.memberId===he.id){const Pt=mn.dates.filter(Qn=>!_r(Qn,ce));return{...mn,dates:Pt}}return mn});return Gt.set(Ct,At),Gt})}catch(Ue){console.error("Error inesperado al eliminar disponibilidad:",Ue),Te.error("Ha ocurrido un error al procesar tu solicitud")}else try{let Ue;if(he.user_id?Ue=await et.from("member_availability").insert([{user_id:he.user_id,date:st}]):Ue=await et.from("member_availability").insert([{group_member_id:he.id,date:st}]),Ue.error){console.error("Error al insertar disponibilidad:",Ue.error),Te.error("Hubo un problema al guardar"),p(!1);return}a(ce),Te.success(`Fecha ${Kt(ce,"dd/MM/yyyy")} aadida a la disponibilidad`);const Ct=K(ce);Y(ut=>{const Gt=new Map(ut);let jt=Gt.get(Ct);if(!jt)return Ee(ce),ut;const At=jt.map(mn=>{if(mn.memberId===he.id){const Pt=[...mn.dates,ce];return{...mn,dates:Pt}}return mn});return Gt.set(Ct,At),Gt})}catch(Ue){console.error("Error inesperado al aadir disponibilidad:",Ue),Te.error("Ha ocurrido un error al procesar tu solicitud")}}catch(Fe){console.error("Error en handleDayClick:",Fe),Te.error("Ha ocurrido un error al procesar tu solicitud")}finally{p(!1)}},ee=k.useMemo(()=>{const ce=new Map,Ne=new Set;return X.forEach(he=>{he.forEach(ve=>Ne.add(ve))}),F.groupEvents.forEach(he=>{he.forEach(ve=>Ne.add(ve))}),Ne.forEach(he=>{const ve=z.get(he)||[],rt=e.filter(Fe=>{var st;return Fe.user_id&&((st=F.groupEvents.get(Fe.user_id))==null?void 0:st.has(he))}),ot=new Set(ve.map(Fe=>Fe.id)),it=[...ve];rt.forEach(Fe=>{ot.has(Fe.id)||(it.push(Fe),ot.add(Fe.id))}),ce.set(he,it)}),ce},[e,z,F]),Xe=k.useCallback(ce=>{const Ne=Kt(ce,"yyyy-MM-dd");return ee.get(Ne)||[]},[ee]),We=ce=>{var Pt,Qn;const{date:Ne}=ce,he=Kt(Ne,"yyyy-MM-dd"),ve=Xe(Ne),rt=oe(Ne),ot=m||((Pt=e.find(Et=>Et.user_id===(q==null?void 0:q.id)))==null?void 0:Pt.id),it=e.find(Et=>Et.id===ot),Fe=ve.some(Et=>Et.id===ot),st=(it==null?void 0:it.user_id)&&((Qn=F.externalEvents.get(it.user_id))==null?void 0:Qn.has(he))||!1,Ue=ve.filter(Et=>Et.id!==ot),Ct=Ue.length,ut=Ue.filter(Et=>{var or;return Et.user_id&&((or=F.externalEvents.get(Et.user_id))==null?void 0:or.has(he))}).length,Gt=P(Ne),jt=Z(Ne),At=jt.length>0,mn=st||ut>0;return d.jsxs("div",{className:`day-content ${Gt?"group-available":""} ${At?"has-event":""} ${mn?"has-external-events":""} ${s&&_r(Ne,s)?"selected-day":""}`,children:[d.jsx("span",{className:`${s&&_r(Ne,s)?"text-indigo-900 font-bold":""}`,children:Ne.getDate()}),(Fe||Ct>0||At)&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"availability-dots",children:[Fe&&d.jsx("div",{className:`availability-dot you ${st?"border border-orange-500 bg-orange-200":""}`}),Ue.slice(0,3).map((Et,or)=>{const un=G.some(zt=>zt.user_id===Et.user_id&&_r(new Date(zt.date),Ne));return d.jsx("div",{className:`availability-dot others ${un?"border border-orange-500 bg-orange-200":""}`},or)})]}),d.jsxs("div",{className:"day-tooltip",children:[d.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[Kt(Ne,"MMMM d, yyyy"),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[Gt&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),At&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:jt.length>1?`${jt[0].name} y ${jt.length-1} ms`:jt[0].name}),mn&&d.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[ut+(st?1:0)," miembro(s) con eventos externos"]})]})]}),ve.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),ve.map(Et=>{var zt,bt,qt;const or=rt.some(wn=>wn.id===Et.id),un=Et.user_id&&((zt=F.externalEvents.get(Et.user_id))==null?void 0:zt.has(he))||!1;return d.jsx("div",{className:`tooltip-member ${Et.id===(m||((bt=e.find(wn=>wn.user_id===(q==null?void 0:q.id)))==null?void 0:bt.id))?"you":"other"}`,children:d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsx("span",{className:"font-medium",children:Et.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[Et.role_in_group==="sustituto"&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),or&&!un&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),un&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),Et.id===(m||((qt=e.find(wn=>wn.user_id===(q==null?void 0:q.id)))==null?void 0:qt.id))&&d.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"T"})]})]}),Et.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Et.instruments.map((wn,rn)=>d.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),wn.name,rn<Et.instruments.length-1&&", "]},`${Et.id}-${wn.id}-${rn}`))})]})},Et.id)})]})]})]})]})},He=()=>{const Ne=V.filter(it=>Z(it).length===0).sort((it,Fe)=>it.getTime()-Fe.getTime()).reduce((it,Fe)=>{const st=Kt(Fe,"MMMM yyyy",{locale:co});it[st]||(it[st]={withPrincipals:[],withSubstitutes:[]});const Ue=Xe(Fe);return e.filter(ut=>ut.role_in_group==="principal").filter(ut=>!Ue.some(Gt=>Gt.user_id===ut.user_id)).length===0?it[st].withPrincipals.push(Fe):it[st].withSubstitutes.push(Fe),it},{});let he=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(Ne).length===0?he+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(Ne).forEach(([it,Fe])=>{he+=`${it.toUpperCase()}
`,Fe.withPrincipals.length>0&&(he+=`Fechas con miembros principales:
`,he+=Fe.withPrincipals.map(st=>`${Kt(st,"d(EEE)",{locale:co})}`).join(", "),he+=`

`),Fe.withSubstitutes.length>0&&(he+=`Fechas con sustitutos:
`,he+=Fe.withSubstitutes.map(st=>`${Kt(st,"d(EEE)",{locale:co})}`).join(", "),he+=`

`),he+=`
`});const ve=new Blob([he],{type:"text/plain;charset=utf-8"}),rt=window.URL.createObjectURL(ve),ot=document.createElement("a");ot.href=rt,ot.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${Kt(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),window.URL.revokeObjectURL(rt)},Ke=()=>{const ce=new Date;ce.setHours(0,0,0,0);const he=V.filter(ut=>ut>=ce).filter(ut=>Z(ut).length===0).sort((ut,Gt)=>ut.getTime()-Gt.getTime()).reduce((ut,Gt)=>{const jt=Kt(Gt,"MMMM yyyy",{locale:co});ut[jt]||(ut[jt]={withPrincipals:[],withSubstitutes:[]});const At=Xe(Gt);return e.filter(Pt=>Pt.role_in_group==="principal").filter(Pt=>!At.some(Qn=>Qn.user_id===Pt.user_id)).length===0?ut[jt].withPrincipals.push(Gt):ut[jt].withSubstitutes.push(Gt),ut},{}),ve=new Dt("p","mm","a4"),rt=ve.internal.pageSize.getWidth(),ot=ve.internal.pageSize.getHeight(),it=25;let Fe=it;if(ve.setFontSize(24),ve.setFont("helvetica","light"),ve.setTextColor(40,40,40),ve.text(n,it,Fe),Fe+=12,ve.setFontSize(11),ve.setFont("helvetica","normal"),ve.setTextColor(120,120,120),ve.text("FECHAS DISPONIBLES",it,Fe),Fe+=6,ve.setFontSize(9),ve.setTextColor(160,160,160),ve.text(Kt(new Date,"dd MMMM yyyy",{locale:co}),it,Fe),Fe+=8,ve.setDrawColor(230,230,230),ve.setLineWidth(.3),ve.line(it,Fe,rt-it,Fe),Fe+=20,Object.keys(he).length===0)ve.setFontSize(12),ve.setFont("helvetica","normal"),ve.setTextColor(120,120,120),ve.text("No hay fechas disponibles prximas.",it,Fe);else{Object.entries(he).forEach(([jt,At],mn)=>{if(Fe>ot-80&&(ve.addPage(),Fe=it+40),ve.setFontSize(14),ve.setFont("helvetica","normal"),ve.setTextColor(60,60,60),ve.text(jt.charAt(0).toUpperCase()+jt.slice(1),it,Fe),Fe+=12,At.withPrincipals.length>0){const Pt=At.withPrincipals.map(Et=>Kt(Et,"d (EEE)",{locale:co})).join("  ");ve.setFontSize(18),ve.setFont("helvetica","light"),ve.setTextColor(40,40,40);const Qn=ve.splitTextToSize(Pt,rt-2*it);ve.text(Qn,it,Fe),Fe+=Qn.length*8+2,ve.setFontSize(8),ve.setFont("helvetica","normal"),ve.setTextColor(100,180,100),ve.text("FORMACIN COMPLETA",it,Fe),Fe+=8}if(At.withSubstitutes.length>0){At.withPrincipals.length>0&&(Fe+=4);const Pt=At.withSubstitutes.map(Et=>Kt(Et,"d (EEE)",{locale:co})).join("  ");ve.setFontSize(14),ve.setFont("helvetica","light"),ve.setTextColor(120,120,120);const Qn=ve.splitTextToSize(Pt,rt-2*it);ve.text(Qn,it,Fe),Fe+=Qn.length*6+2,ve.setFontSize(8),ve.setFont("helvetica","normal"),ve.setTextColor(180,140,100),ve.text("CON SUSTITUTOS",it,Fe),Fe+=8}mn<Object.keys(he).length-1?(Fe+=8,ve.setDrawColor(245,245,245),ve.setLineWidth(.2),ve.line(it,Fe,rt-it,Fe),Fe+=16):Fe+=12}),Fe+=15,ve.setFontSize(9),ve.setFont("helvetica","normal"),ve.setTextColor(160,160,160);const ut=Object.values(he).reduce((jt,At)=>jt+At.withPrincipals.length,0),Gt=Object.values(he).reduce((jt,At)=>jt+At.withSubstitutes.length,0);(ut>0||Gt>0)&&ve.text(`${ut+Gt} fechas disponibles`,it,ot-25)}const st=ve.internal.pages.length-1;for(let ut=1;ut<=st;ut++)ve.setPage(ut),ve.setFontSize(8),ve.setFont("helvetica","normal"),ve.setTextColor(200,200,200),st>1&&ve.text(`${ut}`,rt-it,ot-15);const Ue=ve.output("blob"),Ct=URL.createObjectURL(Ue);window.open(Ct,"_blank"),setTimeout(()=>{URL.revokeObjectURL(Ct)},1e3)};return l?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx(ol,{className:"w-6 h-6 animate-spin text-indigo-600"})}):d.jsxs("div",{className:"space-y-6",children:[(g||ke())&&e.length>0&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),d.jsxs("div",{className:"relative w-full max-w-xs",children:[d.jsx("select",{id:"member-select",value:m||((be=e.find(ce=>ce.user_id===(q==null?void 0:q.id)))==null?void 0:be.id)||"",onChange:ce=>{const Ne=e.find(he=>he.user_id===(q==null?void 0:q.id));x(ce.target.value===(Ne==null?void 0:Ne.id)?null:ce.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(ce=>d.jsxs("option",{value:ce.id,children:[ce.name," ",ce.user_id===(q==null?void 0:q.id)?"(T)":""," ",ce.user_id?"":"(Local)"]},ce.id))}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:d.jsx(JD,{className:"h-4 w-4"})})]})]}),d.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),d.jsxs("div",{ref:$e,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[d.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${f||_e?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/20"}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[d.jsx(ol,{className:"w-6 h-6 animate-spin text-indigo-600"}),d.jsx("span",{children:"Actualizando calendario..."})]})]}),d.jsx(M$,{mode:"single",selected:s,month:M,onSelect:a,onDayClick:fe,onMonthChange:ce=>{re(ce)},modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:We},weekStartsOn:1,locale:co})]}),d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),d.jsxs("button",{onClick:ce=>{ce.preventDefault(),Ge()},disabled:f,className:`px-3 py-1 text-sm ${f?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[d.jsx("span",{className:"mr-1",children:f?"...":""}),f?"Actualizando...":"Actualizar"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:""}),d.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("button",{onClick:Ke,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(QD,{className:"w-4 h-4 mr-2"}),"Ver PDF"]}),d.jsxs("button",{onClick:He,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(J0,{className:"w-4 h-4 mr-2"}),"Descargar TXT"]})]})})]})}function TB({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r}){const i=t.filter(l=>{const c=e.find(f=>f.id===l.memberId);return(c==null?void 0:c.role_in_group)==="principal"}),s=t.filter(l=>{const c=e.find(f=>f.id===l.memberId);return(c==null?void 0:c.role_in_group)==="sustituto"}),a=(l,c)=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:c}),l.map(f=>{const p=e.find(N=>N.id===f.memberId);if(!p)return null;!f.wasInitiallyAvailable&&f.isBusyInOtherEvent;const m=f.isBusyInOtherEvent&&!f.selected;let x="bg-gray-50 hover:bg-gray-100",g=null;return f.isBusyInOtherEvent?(x="bg-gray-100",g=d.jsxs("span",{className:"inline-flex items-center text-xs text-gray-700 bg-gray-200 px-2 py-0.5 rounded-full",children:[d.jsx(Nv,{className:"w-3 h-3 mr-1"}),"Ocupado en otro evento"]})):f.wasInitiallyAvailable||(x="bg-orange-50 hover:bg-orange-100",g=d.jsxs("span",{className:"inline-flex items-center text-xs text-orange-700 bg-orange-100 px-2 py-0.5 rounded-full",children:[d.jsx(Nv,{className:"w-3 h-3 mr-1"}),"No disponible"]})),d.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${x} ${m?"opacity-60":""}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",checked:f.selected,onChange:N=>n(f.memberId,N.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${m?"opacity-50 cursor-not-allowed":""}`,disabled:m,title:f.isBusyInOtherEvent?"Este miembro est ocupado en otro evento":""}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`font-medium ${m?"text-gray-500":"text-gray-900"}`,children:p.name}),g]}),d.jsxs("div",{className:`flex items-center text-sm ${m?"text-gray-400":"text-gray-500"}`,children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),p.instruments.map(N=>N.name).join(", ")]})]})]})},f.memberId)})]});return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Puedes seleccionar miembros que no estaban disponibles. Al guardar, se aadir automticamente esta fecha a su disponibilidad."})]}),d.jsxs("div",{className:"space-y-6",children:[a(i,"Miembros Principales"),s.length>0&&a(s,"Sustitutos")]}),r&&d.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[d.jsx(Nv,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),d.jsx("p",{children:"Por favor, asegrate de que todos los instrumentos estn cubiertos por los miembros seleccionados. Si un miembro principal no est disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var ig={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ig.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",m=1,x=2,g=4,N=1,j=2,E=1,b=2,S=4,A=8,O=16,G=32,ie=64,q=128,M=256,re=512,ae=30,R="...",U=800,Y=16,K=1,xe=2,me=3,X=1/0,F=9007199254740991,z=17976931348623157e292,oe=NaN,Le=4294967295,P=Le-1,V=Le>>>1,ne=[["ary",q],["bind",E],["bindKey",b],["curry",A],["curryRight",O],["flip",re],["partial",G],["partialRight",ie],["rearg",M]],le="[object Arguments]",de="[object Array]",Ae="[object AsyncFunction]",Ee="[object Boolean]",Z="[object Date]",ke="[object DOMException]",_e="[object Error]",Re="[object Function]",$e="[object GeneratorFunction]",Ge="[object Map]",fe="[object Number]",ee="[object Null]",Xe="[object Object]",We="[object Promise]",He="[object Proxy]",Ke="[object RegExp]",be="[object Set]",ce="[object String]",Ne="[object Symbol]",he="[object Undefined]",ve="[object WeakMap]",rt="[object WeakSet]",ot="[object ArrayBuffer]",it="[object DataView]",Fe="[object Float32Array]",st="[object Float64Array]",Ue="[object Int8Array]",Ct="[object Int16Array]",ut="[object Int32Array]",Gt="[object Uint8Array]",jt="[object Uint8ClampedArray]",At="[object Uint16Array]",mn="[object Uint32Array]",Pt=/\b__p \+= '';/g,Qn=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,or=/&(?:amp|lt|gt|quot|#39);/g,un=/[&<>"']/g,zt=RegExp(or.source),bt=RegExp(un.source),qt=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,rn=/<%=([\s\S]+?)%>/g,lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rr=/^\w*$/,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/[\\^$.*+?()[\]{}|]/g,cr=RegExp(Zn.source),Pn=/^\s+/,On=/\s/,Tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,Wi=/,? & /,Ai=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vs=/[()=,{}\[\]\/\s]/,ys=/\\(\\)?/g,xs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ws=/\w*$/,Hi=/^[-+]0x[0-9a-f]+$/i,Bs=/^0b[01]+$/i,No=/^\[object .+?Constructor\]$/,ul=/^0o[0-7]+$/i,dl=/^(?:0|[1-9]\d*)$/,fl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,da=/($^)/,Qu=/['\n\r\u2028\u2029\\]/g,hl="\\ud800-\\udfff",$f="\\u0300-\\u036f",pl="\\ufe20-\\ufe2f",Zu="\\u20d0-\\u20ff",ed=$f+pl+Zu,ml="\\u2700-\\u27bf",td="a-z\\xdf-\\xf6\\xf8-\\xff",nd="\\xac\\xb1\\xd7\\xf7",Bf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gl="\\u2000-\\u206f",Uf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tr="A-Z\\xc0-\\xd6\\xd8-\\xde",zc="\\ufe0e\\ufe0f",qc=nd+Bf+gl+Uf,vl="[']",Wc="["+hl+"]",rd="["+qc+"]",hi="["+ed+"]",jo="\\d+",pi="["+ml+"]",yl="["+td+"]",Hc="[^"+hl+qc+jo+ml+td+tr+"]",Vc="\\ud83c[\\udffb-\\udfff]",id="(?:"+hi+"|"+Vc+")",sd="[^"+hl+"]",xl="(?:\\ud83c[\\udde6-\\uddff]){2}",Gc="[\\ud800-\\udbff][\\udc00-\\udfff]",Us="["+tr+"]",ad="\\u200d",od="(?:"+yl+"|"+Hc+")",zf="(?:"+Us+"|"+Hc+")",zs="(?:"+vl+"(?:d|ll|m|re|s|t|ve))?",ko="(?:"+vl+"(?:D|LL|M|RE|S|T|VE))?",Eo=id+"?",Yc="["+zc+"]?",Wr="(?:"+ad+"(?:"+[sd,xl,Gc].join("|")+")"+Yc+Eo+")*",qf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ld="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ot=Yc+Eo+Wr,Wf="(?:"+[pi,xl,Gc].join("|")+")"+Ot,Hf="(?:"+[sd+hi+"?",hi,xl,Gc,Wc].join("|")+")",qs=RegExp(vl,"g"),cd=RegExp(hi,"g"),wl=RegExp(Vc+"(?="+Vc+")|"+Hf+Ot,"g"),bl=RegExp([Us+"?"+yl+"+"+zs+"(?="+[rd,Us,"$"].join("|")+")",zf+"+"+ko+"(?="+[rd,Us+od,"$"].join("|")+")",Us+"?"+od+"+"+zs,Us+"+"+ko,ld,qf,jo,Wf].join("|"),"g"),Kc=RegExp("["+ad+hl+ed+zc+"]"),Vf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yf=-1,bn={};bn[Fe]=bn[st]=bn[Ue]=bn[Ct]=bn[ut]=bn[Gt]=bn[jt]=bn[At]=bn[mn]=!0,bn[le]=bn[de]=bn[ot]=bn[Ee]=bn[it]=bn[Z]=bn[_e]=bn[Re]=bn[Ge]=bn[fe]=bn[Xe]=bn[Ke]=bn[be]=bn[ce]=bn[ve]=!1;var dn={};dn[le]=dn[de]=dn[ot]=dn[it]=dn[Ee]=dn[Z]=dn[Fe]=dn[st]=dn[Ue]=dn[Ct]=dn[ut]=dn[Ge]=dn[fe]=dn[Xe]=dn[Ke]=dn[be]=dn[ce]=dn[Ne]=dn[Gt]=dn[jt]=dn[At]=dn[mn]=!0,dn[_e]=dn[Re]=dn[ve]=!1;var za={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Kf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Co={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_l=parseFloat,ud=parseInt,Xc=typeof ci=="object"&&ci&&ci.Object===Object&&ci,dd=typeof self=="object"&&self&&self.Object===Object&&self,vr=Xc||dd||Function("return this")(),Vi=t&&!t.nodeType&&t,ni=Vi&&!0&&e&&!e.nodeType&&e,fd=ni&&ni.exports===Vi,Ws=fd&&Xc.process,nr=function(){try{var je=ni&&ni.require&&ni.require("util").types;return je||Ws&&Ws.binding&&Ws.binding("util")}catch{}}(),Sl=nr&&nr.isArrayBuffer,qa=nr&&nr.isDate,hd=nr&&nr.isMap,Ao=nr&&nr.isRegExp,pd=nr&&nr.isSet,Nl=nr&&nr.isTypedArray;function Fr(je,qe,De){switch(De.length){case 0:return je.call(qe);case 1:return je.call(qe,De[0]);case 2:return je.call(qe,De[0],De[1]);case 3:return je.call(qe,De[0],De[1],De[2])}return je.apply(qe,De)}function md(je,qe,De,mt){for(var St=-1,Wt=je==null?0:je.length;++St<Wt;){var Un=je[St];qe(mt,Un,De(Un),je)}return mt}function $r(je,qe){for(var De=-1,mt=je==null?0:je.length;++De<mt&&qe(je[De],De,je)!==!1;);return je}function Qc(je,qe){for(var De=je==null?0:je.length;De--&&qe(je[De],De,je)!==!1;);return je}function jl(je,qe){for(var De=-1,mt=je==null?0:je.length;++De<mt;)if(!qe(je[De],De,je))return!1;return!0}function bs(je,qe){for(var De=-1,mt=je==null?0:je.length,St=0,Wt=[];++De<mt;){var Un=je[De];qe(Un,De,je)&&(Wt[St++]=Un)}return Wt}function kl(je,qe){var De=je==null?0:je.length;return!!De&&tt(je,qe,0)>-1}function Wa(je,qe,De){for(var mt=-1,St=je==null?0:je.length;++mt<St;)if(De(qe,je[mt]))return!0;return!1}function gn(je,qe){for(var De=-1,mt=je==null?0:je.length,St=Array(mt);++De<mt;)St[De]=qe(je[De],De,je);return St}function Gi(je,qe){for(var De=-1,mt=qe.length,St=je.length;++De<mt;)je[St+De]=qe[De];return je}function Hs(je,qe,De,mt){var St=-1,Wt=je==null?0:je.length;for(mt&&Wt&&(De=je[++St]);++St<Wt;)De=qe(De,je[St],St,je);return De}function Zc(je,qe,De,mt){var St=je==null?0:je.length;for(mt&&St&&(De=je[--St]);St--;)De=qe(De,je[St],St,je);return De}function w(je,qe){for(var De=-1,mt=je==null?0:je.length;++De<mt;)if(qe(je[De],De,je))return!0;return!1}var D=Rt("length");function se(je){return je.split("")}function pe(je){return je.match(Ai)||[]}function Me(je,qe,De){var mt;return De(je,function(St,Wt,Un){if(qe(St,Wt,Un))return mt=Wt,!1}),mt}function ze(je,qe,De,mt){for(var St=je.length,Wt=De+(mt?1:-1);mt?Wt--:++Wt<St;)if(qe(je[Wt],Wt,je))return Wt;return-1}function tt(je,qe,De){return qe===qe?Ji(je,qe,De):ze(je,kt,De)}function pt(je,qe,De,mt){for(var St=De-1,Wt=je.length;++St<Wt;)if(mt(je[St],qe))return St;return-1}function kt(je){return je!==je}function Bt(je,qe){var De=je==null?0:je.length;return De?ir(je,qe)/De:oe}function Rt(je){return function(qe){return qe==null?n:qe[je]}}function tn(je){return function(qe){return je==null?n:je[qe]}}function Bn(je,qe,De,mt,St){return St(je,function(Wt,Un,vn){De=mt?(mt=!1,Wt):qe(De,Wt,Un,vn)}),De}function rr(je,qe){var De=je.length;for(je.sort(qe);De--;)je[De]=je[De].value;return je}function ir(je,qe){for(var De,mt=-1,St=je.length;++mt<St;){var Wt=qe(je[mt]);Wt!==n&&(De=De===n?Wt:De+Wt)}return De}function Tr(je,qe){for(var De=-1,mt=Array(je);++De<je;)mt[De]=qe(De);return mt}function Mr(je,qe){return gn(qe,function(De){return[De,je[De]]})}function Yi(je){return je&&je.slice(0,ha(je)+1).replace(Pn,"")}function Rn(je){return function(qe){return je(qe)}}function Ki(je,qe){return gn(qe,function(De){return je[De]})}function Ha(je,qe){return je.has(qe)}function El(je,qe){for(var De=-1,mt=je.length;++De<mt&&tt(qe,je[De],0)>-1;);return De}function Cl(je,qe){for(var De=je.length;De--&&tt(qe,je[De],0)>-1;);return De}function Al(je,qe){for(var De=je.length,mt=0;De--;)je[De]===qe&&++mt;return mt}var eu=tn(za),tu=tn(Kf);function Ll(je){return"\\"+Jc[je]}function Br(je,qe){return je==null?n:je[qe]}function _s(je){return Kc.test(je)}function Pl(je){return Vf.test(je)}function Tl(je){for(var qe,De=[];!(qe=je.next()).done;)De.push(qe.value);return De}function Lo(je){var qe=-1,De=Array(je.size);return je.forEach(function(mt,St){De[++qe]=[St,mt]}),De}function ri(je,qe){return function(De){return je(qe(De))}}function Vs(je,qe){for(var De=-1,mt=je.length,St=0,Wt=[];++De<mt;){var Un=je[De];(Un===qe||Un===p)&&(je[De]=p,Wt[St++]=De)}return Wt}function Va(je){var qe=-1,De=Array(je.size);return je.forEach(function(mt){De[++qe]=mt}),De}function gd(je){var qe=-1,De=Array(je.size);return je.forEach(function(mt){De[++qe]=[mt,mt]}),De}function Ji(je,qe,De){for(var mt=De-1,St=je.length;++mt<St;)if(je[mt]===qe)return mt;return-1}function Ml(je,qe,De){for(var mt=De+1;mt--;)if(je[mt]===qe)return mt;return mt}function fa(je){return _s(je)?gi(je):D(je)}function mi(je){return _s(je)?ii(je):se(je)}function ha(je){for(var qe=je.length;qe--&&On.test(je.charAt(qe)););return qe}var Po=tn(Co);function gi(je){for(var qe=wl.lastIndex=0;wl.test(je);)++qe;return qe}function ii(je){return je.match(wl)||[]}function Ga(je){return je.match(bl)||[]}var pa=function je(qe){qe=qe==null?vr:vi.defaults(vr.Object(),qe,vi.pick(vr,Gf));var De=qe.Array,mt=qe.Date,St=qe.Error,Wt=qe.Function,Un=qe.Math,vn=qe.Object,To=qe.RegExp,Mo=qe.String,Dr=qe.TypeError,Ss=De.prototype,Do=Wt.prototype,Ns=vn.prototype,Gs=qe["__core-js_shared__"],js=Do.toString,on=Ns.hasOwnProperty,Xi=0,Li=function(){var o=/[^.]+$/.exec(Gs&&Gs.keys&&Gs.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),_n=Ns.toString,Mn=js.call(vn),ur=vr._,Sr=To("^"+js.call(on).replace(Zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=fd?qe.Buffer:n,Zi=qe.Symbol,ma=qe.Uint8Array,nu=Qi?Qi.allocUnsafe:n,Dl=ri(vn.getPrototypeOf,vn),ru=vn.create,yi=Ns.propertyIsEnumerable,si=Ss.splice,iu=Zi?Zi.isConcatSpreadable:n,Ya=Zi?Zi.iterator:n,Ka=Zi?Zi.toStringTag:n,Io=function(){try{var o=hu(vn,"defineProperty");return o({},"",{}),o}catch{}}(),vd=qe.clearTimeout!==vr.clearTimeout&&qe.clearTimeout,Jf=mt&&mt.now!==vr.Date.now&&mt.now,zp=qe.setTimeout!==vr.setTimeout&&qe.setTimeout,Il=Un.ceil,Ol=Un.floor,Rl=vn.getOwnPropertySymbols,Xf=Qi?Qi.isBuffer:n,qp=qe.isFinite,t1=Ss.join,Wp=ri(vn.keys,vn),Nr=Un.max,Hr=Un.min,n1=mt.now,r1=qe.parseInt,Hp=Un.random,Qf=Ss.reverse,su=hu(qe,"DataView"),ga=hu(qe,"Map"),Zf=hu(qe,"Promise"),Fl=hu(qe,"Set"),$l=hu(qe,"WeakMap"),au=hu(vn,"create"),yd=$l&&new $l,Bl={},i1=pu(su),Ja=pu(ga),ks=pu(Zf),va=pu(Fl),s1=pu($l),ou=Zi?Zi.prototype:n,es=ou?ou.valueOf:n,Pi=ou?ou.toString:n;function H(o){if(xr(o)&&!Vt(o)&&!(o instanceof Qt)){if(o instanceof Ti)return o;if(on.call(o,"__wrapped__"))return Fx(o)}return new Ti(o)}var Ul=function(){function o(){}return function(u){if(!fr(u))return{};if(ru)return ru(u);o.prototype=u;var y=new o;return o.prototype=n,y}}();function lu(){}function Ti(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}H.templateSettings={escape:qt,evaluate:wn,interpolate:rn,variable:"",imports:{_:H}},H.prototype=lu.prototype,H.prototype.constructor=H,Ti.prototype=Ul(lu.prototype),Ti.prototype.constructor=Ti;function Qt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function Vp(){var o=new Qt(this.__wrapped__);return o.__actions__=ns(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=ns(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=ns(this.__views__),o}function a1(){if(this.__filtered__){var o=new Qt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function xd(){var o=this.__wrapped__.value(),u=this.__dir__,y=Vt(o),C=u<0,I=y?o.length:0,Q=_j(0,I,this.__views__),ue=Q.start,ge=Q.end,Pe=ge-ue,Qe=C?ge:ue-1,Ze=this.__iteratees__,at=Ze.length,ft=0,Nt=Hr(Pe,this.__takeCount__);if(!y||!C&&I==Pe&&Nt==Pe)return fu(o,this.__actions__);var Tt=[];e:for(;Pe--&&ft<Nt;){Qe+=u;for(var Xt=-1,Mt=o[Qe];++Xt<at;){var sn=Ze[Xt],ln=sn.iteratee,As=sn.type,Ri=ln(Mt);if(As==xe)Mt=Ri;else if(!Ri){if(As==K)continue e;break e}}Tt[ft++]=Mt}return Tt}Qt.prototype=Ul(lu.prototype),Qt.prototype.constructor=Qt;function Ys(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var C=o[u];this.set(C[0],C[1])}}function cu(){this.__data__=au?au(null):{},this.size=0}function eh(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Gp(o){var u=this.__data__;if(au){var y=u[o];return y===c?n:y}return on.call(u,o)?u[o]:n}function o1(o){var u=this.__data__;return au?u[o]!==n:on.call(u,o)}function Yp(o,u){var y=this.__data__;return this.size+=this.has(o)?0:1,y[o]=au&&u===n?c:u,this}Ys.prototype.clear=cu,Ys.prototype.delete=eh,Ys.prototype.get=Gp,Ys.prototype.has=o1,Ys.prototype.set=Yp;function ya(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var C=o[u];this.set(C[0],C[1])}}function l1(){this.__data__=[],this.size=0}function c1(o){var u=this.__data__,y=ye(u,o);if(y<0)return!1;var C=u.length-1;return y==C?u.pop():si.call(u,y,1),--this.size,!0}function u1(o){var u=this.__data__,y=ye(u,o);return y<0?n:u[y][1]}function d1(o){return ye(this.__data__,o)>-1}function f1(o,u){var y=this.__data__,C=ye(y,o);return C<0?(++this.size,y.push([o,u])):y[C][1]=u,this}ya.prototype.clear=l1,ya.prototype.delete=c1,ya.prototype.get=u1,ya.prototype.has=d1,ya.prototype.set=f1;function Ks(o){var u=-1,y=o==null?0:o.length;for(this.clear();++u<y;){var C=o[u];this.set(C[0],C[1])}}function wd(){this.size=0,this.__data__={hash:new Ys,map:new(ga||ya),string:new Ys}}function h1(o){var u=fm(this,o).delete(o);return this.size-=u?1:0,u}function p1(o){return fm(this,o).get(o)}function Kp(o){return fm(this,o).has(o)}function h(o,u){var y=fm(this,o),C=y.size;return y.set(o,u),this.size+=y.size==C?0:1,this}Ks.prototype.clear=wd,Ks.prototype.delete=h1,Ks.prototype.get=p1,Ks.prototype.has=Kp,Ks.prototype.set=h;function v(o){var u=-1,y=o==null?0:o.length;for(this.__data__=new Ks;++u<y;)this.add(o[u])}function _(o){return this.__data__.set(o,c),this}function L(o){return this.__data__.has(o)}v.prototype.add=v.prototype.push=_,v.prototype.has=L;function T(o){var u=this.__data__=new ya(o);this.size=u.size}function $(){this.__data__=new ya,this.size=0}function B(o){var u=this.__data__,y=u.delete(o);return this.size=u.size,y}function W(o){return this.__data__.get(o)}function J(o){return this.__data__.has(o)}function te(o,u){var y=this.__data__;if(y instanceof ya){var C=y.__data__;if(!ga||C.length<i-1)return C.push([o,u]),this.size=++y.size,this;y=this.__data__=new Ks(C)}return y.set(o,u),this.size=y.size,this}T.prototype.clear=$,T.prototype.delete=B,T.prototype.get=W,T.prototype.has=J,T.prototype.set=te;function we(o,u){var y=Vt(o),C=!y&&mu(o),I=!y&&!C&&Ql(o),Q=!y&&!C&&!I&&Md(o),ue=y||C||I||Q,ge=ue?Tr(o.length,Mo):[],Pe=ge.length;for(var Qe in o)(u||on.call(o,Qe))&&!(ue&&(Qe=="length"||I&&(Qe=="offset"||Qe=="parent")||Q&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||Uo(Qe,Pe)))&&ge.push(Qe);return ge}function Ie(o){var u=o.length;return u?o[Gl(0,u-1)]:n}function Oe(o,u){return hm(ns(o),ct(u,0,o.length))}function Ce(o){return hm(ns(o))}function Je(o,u,y){(y!==n&&!_a(o[u],y)||y===n&&!(u in o))&&Ve(o,u,y)}function Be(o,u,y){var C=o[u];(!(on.call(o,u)&&_a(C,y))||y===n&&!(u in o))&&Ve(o,u,y)}function ye(o,u){for(var y=o.length;y--;)if(_a(o[y][0],u))return y;return-1}function Se(o,u,y,C){return Ut(o,function(I,Q,ue){u(C,I,y(I),ue)}),C}function Ye(o,u){return o&&io(u,Yr(u),o)}function nt(o,u){return o&&io(u,is(u),o)}function Ve(o,u,y){u=="__proto__"&&Io?Io(o,u,{configurable:!0,enumerable:!0,value:y,writable:!0}):o[u]=y}function ht(o,u){for(var y=-1,C=u.length,I=De(C),Q=o==null;++y<C;)I[y]=Q?n:O1(o,u[y]);return I}function ct(o,u,y){return o===o&&(y!==n&&(o=o<=y?o:y),u!==n&&(o=o>=u?o:u)),o}function xt(o,u,y,C,I,Q){var ue,ge=u&m,Pe=u&x,Qe=u&g;if(y&&(ue=I?y(o,C,I,Q):y(o)),ue!==n)return ue;if(!fr(o))return o;var Ze=Vt(o);if(Ze){if(ue=Nj(o),!ge)return ns(o,ue)}else{var at=xi(o),ft=at==Re||at==$e;if(Ql(o))return Ad(o,ge);if(at==Xe||at==le||ft&&!I){if(ue=Pe||ft?{}:Ax(o),!ge)return Pe?hj(o,nt(ue,o)):fj(o,Ye(ue,o))}else{if(!dn[at])return I?o:{};ue=jj(o,at,ge)}}Q||(Q=new T);var Nt=Q.get(o);if(Nt)return Nt;Q.set(o,ue),iw(o)?o.forEach(function(Mt){ue.add(xt(Mt,u,y,Mt,o,Q))}):nw(o)&&o.forEach(function(Mt,sn){ue.set(sn,xt(Mt,u,y,sn,o,Q))});var Tt=Qe?Pe?_1:b1:Pe?is:Yr,Xt=Ze?n:Tt(o);return $r(Xt||o,function(Mt,sn){Xt&&(sn=Mt,Mt=o[sn]),Be(ue,sn,xt(Mt,u,y,sn,o,Q))}),ue}function dt(o){var u=Yr(o);return function(y){return fn(y,o,u)}}function fn(o,u,y){var C=y.length;if(o==null)return!C;for(o=vn(o);C--;){var I=y[C],Q=u[I],ue=o[I];if(ue===n&&!(I in o)||!Q(ue))return!1}return!0}function yn(o,u,y){if(typeof o!="function")throw new Dr(a);return uh(function(){o.apply(n,y)},u)}function Zt(o,u,y,C){var I=-1,Q=kl,ue=!0,ge=o.length,Pe=[],Qe=u.length;if(!ge)return Pe;y&&(u=gn(u,Rn(y))),C?(Q=Wa,ue=!1):u.length>=i&&(Q=Ha,ue=!1,u=new v(u));e:for(;++I<ge;){var Ze=o[I],at=y==null?Ze:y(Ze);if(Ze=C||Ze!==0?Ze:0,ue&&at===at){for(var ft=Qe;ft--;)if(u[ft]===at)continue e;Pe.push(Ze)}else Q(u,at,C)||Pe.push(Ze)}return Pe}var Ut=mx(sr),jn=mx(oi,!0);function kn(o,u){var y=!0;return Ut(o,function(C,I,Q){return y=!!u(C,I,Q),y}),y}function $t(o,u,y){for(var C=-1,I=o.length;++C<I;){var Q=o[C],ue=u(Q);if(ue!=null&&(ge===n?ue===ue&&!Cs(ue):y(ue,ge)))var ge=ue,Pe=Q}return Pe}function yr(o,u,y,C){var I=o.length;for(y=Jt(y),y<0&&(y=-y>I?0:I+y),C=C===n||C>I?I:Jt(C),C<0&&(C+=I),C=y>C?0:aw(C);y<C;)o[y++]=u;return o}function ai(o,u){var y=[];return Ut(o,function(C,I,Q){u(C,I,Q)&&y.push(C)}),y}function nn(o,u,y,C,I){var Q=-1,ue=o.length;for(y||(y=Ej),I||(I=[]);++Q<ue;){var ge=o[Q];u>0&&y(ge)?u>1?nn(ge,u-1,y,C,I):Gi(I,ge):C||(I[I.length]=ge)}return I}var Vr=gx(),xn=gx(!0);function sr(o,u){return o&&Vr(o,u,Yr)}function oi(o,u){return o&&xn(o,u,Yr)}function dr(o,u){return bs(u,function(y){return zo(o[y])})}function Gn(o,u){u=Xs(u,o);for(var y=0,C=u.length;o!=null&&y<C;)o=o[so(u[y++])];return y&&y==C?o:n}function Gr(o,u,y){var C=u(o);return Vt(o)?C:Gi(C,y(o))}function Dn(o){return o==null?o===n?he:ee:Ka&&Ka in vn(o)?bj(o):Dj(o)}function ts(o,u){return o>u}function Ir(o,u){return o!=null&&on.call(o,u)}function xa(o,u){return o!=null&&u in vn(o)}function Oo(o,u,y){return o>=Hr(u,y)&&o<Nr(u,y)}function Xa(o,u,y){for(var C=y?Wa:kl,I=o[0].length,Q=o.length,ue=Q,ge=De(Q),Pe=1/0,Qe=[];ue--;){var Ze=o[ue];ue&&u&&(Ze=gn(Ze,Rn(u))),Pe=Hr(Ze.length,Pe),ge[ue]=!y&&(u||I>=120&&Ze.length>=120)?new v(ue&&Ze):n}Ze=o[0];var at=-1,ft=ge[0];e:for(;++at<I&&Qe.length<Pe;){var Nt=Ze[at],Tt=u?u(Nt):Nt;if(Nt=y||Nt!==0?Nt:0,!(ft?Ha(ft,Tt):C(Qe,Tt,y))){for(ue=Q;--ue;){var Xt=ge[ue];if(!(Xt?Ha(Xt,Tt):C(o[ue],Tt,y)))continue e}ft&&ft.push(Tt),Qe.push(Nt)}}return Qe}function Qa(o,u,y,C){return sr(o,function(I,Q,ue){u(C,y(I),Q,ue)}),C}function In(o,u,y){u=Xs(u,o),o=Mx(o,u);var C=o==null?o:o[so(Qs(u))];return C==null?n:Fr(C,o,y)}function bd(o){return xr(o)&&Dn(o)==le}function Jp(o){return xr(o)&&Dn(o)==ot}function Xp(o){return xr(o)&&Dn(o)==Z}function Za(o,u,y,C,I){return o===u?!0:o==null||u==null||!xr(o)&&!xr(u)?o!==o&&u!==u:uu(o,u,y,C,Za,I)}function uu(o,u,y,C,I,Q){var ue=Vt(o),ge=Vt(u),Pe=ue?de:xi(o),Qe=ge?de:xi(u);Pe=Pe==le?Xe:Pe,Qe=Qe==le?Xe:Qe;var Ze=Pe==Xe,at=Qe==Xe,ft=Pe==Qe;if(ft&&Ql(o)){if(!Ql(u))return!1;ue=!0,Ze=!1}if(ft&&!Ze)return Q||(Q=new T),ue||Md(o)?kx(o,u,y,C,I,Q):xj(o,u,Pe,y,C,I,Q);if(!(y&N)){var Nt=Ze&&on.call(o,"__wrapped__"),Tt=at&&on.call(u,"__wrapped__");if(Nt||Tt){var Xt=Nt?o.value():o,Mt=Tt?u.value():u;return Q||(Q=new T),I(Xt,Mt,y,C,Q)}}return ft?(Q||(Q=new T),wj(o,u,y,C,I,Q)):!1}function _d(o){return xr(o)&&xi(o)==Ge}function Mi(o,u,y,C){var I=y.length,Q=I,ue=!C;if(o==null)return!Q;for(o=vn(o);I--;){var ge=y[I];if(ue&&ge[2]?ge[1]!==o[ge[0]]:!(ge[0]in o))return!1}for(;++I<Q;){ge=y[I];var Pe=ge[0],Qe=o[Pe],Ze=ge[1];if(ue&&ge[2]){if(Qe===n&&!(Pe in o))return!1}else{var at=new T;if(C)var ft=C(Qe,Ze,Pe,o,u,at);if(!(ft===n?Za(Ze,Qe,N|j,C,at):ft))return!1}}return!0}function Ro(o){if(!fr(o)||Aj(o))return!1;var u=zo(o)?Sr:No;return u.test(pu(o))}function zl(o){return xr(o)&&Dn(o)==Ke}function Qp(o){return xr(o)&&xi(o)==be}function Sd(o){return xr(o)&&xm(o.length)&&!!bn[Dn(o)]}function th(o){return typeof o=="function"?o:o==null?ss:typeof o=="object"?Vt(o)?em(o[0],o[1]):Zp(o):vw(o)}function ql(o){if(!ch(o))return Wp(o);var u=[];for(var y in vn(o))on.call(o,y)&&y!="constructor"&&u.push(y);return u}function nh(o){if(!fr(o))return Mj(o);var u=ch(o),y=[];for(var C in o)C=="constructor"&&(u||!on.call(o,C))||y.push(C);return y}function Wl(o,u){return o<u}function Hl(o,u){var y=-1,C=rs(o)?De(o.length):[];return Ut(o,function(I,Q,ue){C[++y]=u(I,Q,ue)}),C}function Zp(o){var u=N1(o);return u.length==1&&u[0][2]?Px(u[0][0],u[0][1]):function(y){return y===o||Mi(y,o,u)}}function em(o,u){return k1(o)&&Lx(u)?Px(so(o),u):function(y){var C=O1(y,o);return C===n&&C===u?R1(y,o):Za(u,C,N|j)}}function Vl(o,u,y,C,I){o!==u&&Vr(u,function(Q,ue){if(I||(I=new T),fr(Q))eo(o,u,ue,y,Vl,C,I);else{var ge=C?C(C1(o,ue),Q,ue+"",o,u,I):n;ge===n&&(ge=Q),Je(o,ue,ge)}},is)}function eo(o,u,y,C,I,Q,ue){var ge=C1(o,y),Pe=C1(u,y),Qe=ue.get(Pe);if(Qe){Je(o,y,Qe);return}var Ze=Q?Q(ge,Pe,y+"",o,u,ue):n,at=Ze===n;if(at){var ft=Vt(Pe),Nt=!ft&&Ql(Pe),Tt=!ft&&!Nt&&Md(Pe);Ze=Pe,ft||Nt||Tt?Vt(ge)?Ze=ge:jr(ge)?Ze=ns(ge):Nt?(at=!1,Ze=Ad(Pe,!0)):Tt?(at=!1,Ze=dx(Pe,!0)):Ze=[]:dh(Pe)||mu(Pe)?(Ze=ge,mu(ge)?Ze=ow(ge):(!fr(ge)||zo(ge))&&(Ze=Ax(Pe))):at=!1}at&&(ue.set(Pe,Ze),I(Ze,Pe,C,Q,ue),ue.delete(Pe)),Je(o,y,Ze)}function tm(o,u){var y=o.length;if(y)return u+=u<0?y:0,Uo(u,y)?o[u]:n}function nm(o,u,y){u.length?u=gn(u,function(Q){return Vt(Q)?function(ue){return Gn(ue,Q.length===1?Q[0]:Q)}:Q}):u=[ss];var C=-1;u=gn(u,Rn(Lt()));var I=Hl(o,function(Q,ue,ge){var Pe=gn(u,function(Qe){return Qe(Q)});return{criteria:Pe,index:++C,value:Q}});return rr(I,function(Q,ue){return dj(Q,ue,y)})}function m1(o,u){return rh(o,u,function(y,C){return R1(o,C)})}function rh(o,u,y){for(var C=-1,I=u.length,Q={};++C<I;){var ue=u[C],ge=Gn(o,ue);y(ge,ue)&&Yl(Q,Xs(ue,o),ge)}return Q}function Nd(o){return function(u){return Gn(u,o)}}function jd(o,u,y,C){var I=C?pt:tt,Q=-1,ue=u.length,ge=o;for(o===u&&(u=ns(u)),y&&(ge=gn(o,Rn(y)));++Q<ue;)for(var Pe=0,Qe=u[Q],Ze=y?y(Qe):Qe;(Pe=I(ge,Ze,Pe,C))>-1;)ge!==o&&si.call(ge,Pe,1),si.call(o,Pe,1);return o}function ih(o,u){for(var y=o?u.length:0,C=y-1;y--;){var I=u[y];if(y==C||I!==Q){var Q=I;Uo(I)?si.call(o,I,1):oh(o,I)}}return o}function Gl(o,u){return o+Ol(Hp()*(u-o+1))}function sh(o,u,y,C){for(var I=-1,Q=Nr(Il((u-o)/(y||1)),0),ue=De(Q);Q--;)ue[C?Q:++I]=o,o+=y;return ue}function Fo(o,u){var y="";if(!o||u<1||u>F)return y;do u%2&&(y+=o),u=Ol(u/2),u&&(o+=o);while(u);return y}function Yt(o,u){return A1(Tx(o,u,ss),o+"")}function g1(o){return Ie(Dd(o))}function kd(o,u){var y=Dd(o);return hm(y,ct(u,0,y.length))}function Yl(o,u,y,C){if(!fr(o))return o;u=Xs(u,o);for(var I=-1,Q=u.length,ue=Q-1,ge=o;ge!=null&&++I<Q;){var Pe=so(u[I]),Qe=y;if(Pe==="__proto__"||Pe==="constructor"||Pe==="prototype")return o;if(I!=ue){var Ze=ge[Pe];Qe=C?C(Ze,Pe,ge):n,Qe===n&&(Qe=fr(Ze)?Ze:Uo(u[I+1])?[]:{})}Be(ge,Pe,Qe),ge=ge[Pe]}return o}var Ed=yd?function(o,u){return yd.set(o,u),o}:ss,to=Io?function(o,u){return Io(o,"toString",{configurable:!0,enumerable:!1,value:$1(u),writable:!0})}:ss;function rm(o){return hm(Dd(o))}function Di(o,u,y){var C=-1,I=o.length;u<0&&(u=-u>I?0:I+u),y=y>I?I:y,y<0&&(y+=I),I=u>y?0:y-u>>>0,u>>>=0;for(var Q=De(I);++C<I;)Q[C]=o[C+u];return Q}function v1(o,u){var y;return Ut(o,function(C,I,Q){return y=u(C,I,Q),!y}),!!y}function du(o,u,y){var C=0,I=o==null?C:o.length;if(typeof u=="number"&&u===u&&I<=V){for(;C<I;){var Q=C+I>>>1,ue=o[Q];ue!==null&&!Cs(ue)&&(y?ue<=u:ue<u)?C=Q+1:I=Q}return I}return no(o,u,ss,y)}function no(o,u,y,C){var I=0,Q=o==null?0:o.length;if(Q===0)return 0;u=y(u);for(var ue=u!==u,ge=u===null,Pe=Cs(u),Qe=u===n;I<Q;){var Ze=Ol((I+Q)/2),at=y(o[Ze]),ft=at!==n,Nt=at===null,Tt=at===at,Xt=Cs(at);if(ue)var Mt=C||Tt;else Qe?Mt=Tt&&(C||ft):ge?Mt=Tt&&ft&&(C||!Nt):Pe?Mt=Tt&&ft&&!Nt&&(C||!Xt):Nt||Xt?Mt=!1:Mt=C?at<=u:at<u;Mt?I=Ze+1:Q=Ze}return Hr(Q,P)}function im(o,u){for(var y=-1,C=o.length,I=0,Q=[];++y<C;){var ue=o[y],ge=u?u(ue):ue;if(!y||!_a(ge,Pe)){var Pe=ge;Q[I++]=ue===0?0:ue}}return Q}function ah(o){return typeof o=="number"?o:Cs(o)?oe:+o}function Ii(o){if(typeof o=="string")return o;if(Vt(o))return gn(o,Ii)+"";if(Cs(o))return Pi?Pi.call(o):"";var u=o+"";return u=="0"&&1/o==-X?"-0":u}function wa(o,u,y){var C=-1,I=kl,Q=o.length,ue=!0,ge=[],Pe=ge;if(y)ue=!1,I=Wa;else if(Q>=i){var Qe=u?null:vj(o);if(Qe)return Va(Qe);ue=!1,I=Ha,Pe=new v}else Pe=u?[]:ge;e:for(;++C<Q;){var Ze=o[C],at=u?u(Ze):Ze;if(Ze=y||Ze!==0?Ze:0,ue&&at===at){for(var ft=Pe.length;ft--;)if(Pe[ft]===at)continue e;u&&Pe.push(at),ge.push(Ze)}else I(Pe,at,y)||(Pe!==ge&&Pe.push(at),ge.push(Ze))}return ge}function oh(o,u){return u=Xs(u,o),o=Mx(o,u),o==null||delete o[so(Qs(u))]}function Kl(o,u,y,C){return Yl(o,u,y(Gn(o,u)),C)}function Jl(o,u,y,C){for(var I=o.length,Q=C?I:-1;(C?Q--:++Q<I)&&u(o[Q],Q,o););return y?Di(o,C?0:Q,C?Q+1:I):Di(o,C?Q+1:0,C?I:Q)}function fu(o,u){var y=o;return y instanceof Qt&&(y=y.value()),Hs(u,function(C,I){return I.func.apply(I.thisArg,Gi([C],I.args))},y)}function Es(o,u,y){var C=o.length;if(C<2)return C?wa(o[0]):[];for(var I=-1,Q=De(C);++I<C;)for(var ue=o[I],ge=-1;++ge<C;)ge!=I&&(Q[I]=Zt(Q[I]||ue,o[ge],u,y));return wa(nn(Q,1),u,y)}function ba(o,u,y){for(var C=-1,I=o.length,Q=u.length,ue={};++C<I;){var ge=C<Q?u[C]:n;y(ue,o[C],ge)}return ue}function Js(o){return jr(o)?o:[]}function Xl(o){return typeof o=="function"?o:ss}function Xs(o,u){return Vt(o)?o:k1(o,u)?[o]:Rx(En(o))}var sm=Yt;function ro(o,u,y){var C=o.length;return y=y===n?C:y,!u&&y>=C?o:Di(o,u,y)}var Cd=vd||function(o){return vr.clearTimeout(o)};function Ad(o,u){if(u)return o.slice();var y=o.length,C=nu?nu(y):new o.constructor(y);return o.copy(C),C}function y1(o){var u=new o.constructor(o.byteLength);return new ma(u).set(new ma(o)),u}function lj(o,u){var y=u?y1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.byteLength)}function cj(o){var u=new o.constructor(o.source,ws.exec(o));return u.lastIndex=o.lastIndex,u}function uj(o){return es?vn(es.call(o)):{}}function dx(o,u){var y=u?y1(o.buffer):o.buffer;return new o.constructor(y,o.byteOffset,o.length)}function fx(o,u){if(o!==u){var y=o!==n,C=o===null,I=o===o,Q=Cs(o),ue=u!==n,ge=u===null,Pe=u===u,Qe=Cs(u);if(!ge&&!Qe&&!Q&&o>u||Q&&ue&&Pe&&!ge&&!Qe||C&&ue&&Pe||!y&&Pe||!I)return 1;if(!C&&!Q&&!Qe&&o<u||Qe&&y&&I&&!C&&!Q||ge&&y&&I||!ue&&I||!Pe)return-1}return 0}function dj(o,u,y){for(var C=-1,I=o.criteria,Q=u.criteria,ue=I.length,ge=y.length;++C<ue;){var Pe=fx(I[C],Q[C]);if(Pe){if(C>=ge)return Pe;var Qe=y[C];return Pe*(Qe=="desc"?-1:1)}}return o.index-u.index}function hx(o,u,y,C){for(var I=-1,Q=o.length,ue=y.length,ge=-1,Pe=u.length,Qe=Nr(Q-ue,0),Ze=De(Pe+Qe),at=!C;++ge<Pe;)Ze[ge]=u[ge];for(;++I<ue;)(at||I<Q)&&(Ze[y[I]]=o[I]);for(;Qe--;)Ze[ge++]=o[I++];return Ze}function px(o,u,y,C){for(var I=-1,Q=o.length,ue=-1,ge=y.length,Pe=-1,Qe=u.length,Ze=Nr(Q-ge,0),at=De(Ze+Qe),ft=!C;++I<Ze;)at[I]=o[I];for(var Nt=I;++Pe<Qe;)at[Nt+Pe]=u[Pe];for(;++ue<ge;)(ft||I<Q)&&(at[Nt+y[ue]]=o[I++]);return at}function ns(o,u){var y=-1,C=o.length;for(u||(u=De(C));++y<C;)u[y]=o[y];return u}function io(o,u,y,C){var I=!y;y||(y={});for(var Q=-1,ue=u.length;++Q<ue;){var ge=u[Q],Pe=C?C(y[ge],o[ge],ge,y,o):n;Pe===n&&(Pe=o[ge]),I?Ve(y,ge,Pe):Be(y,ge,Pe)}return y}function fj(o,u){return io(o,j1(o),u)}function hj(o,u){return io(o,Ex(o),u)}function am(o,u){return function(y,C){var I=Vt(y)?md:Se,Q=u?u():{};return I(y,o,Lt(C,2),Q)}}function Ld(o){return Yt(function(u,y){var C=-1,I=y.length,Q=I>1?y[I-1]:n,ue=I>2?y[2]:n;for(Q=o.length>3&&typeof Q=="function"?(I--,Q):n,ue&&Oi(y[0],y[1],ue)&&(Q=I<3?n:Q,I=1),u=vn(u);++C<I;){var ge=y[C];ge&&o(u,ge,C,Q)}return u})}function mx(o,u){return function(y,C){if(y==null)return y;if(!rs(y))return o(y,C);for(var I=y.length,Q=u?I:-1,ue=vn(y);(u?Q--:++Q<I)&&C(ue[Q],Q,ue)!==!1;);return y}}function gx(o){return function(u,y,C){for(var I=-1,Q=vn(u),ue=C(u),ge=ue.length;ge--;){var Pe=ue[o?ge:++I];if(y(Q[Pe],Pe,Q)===!1)break}return u}}function pj(o,u,y){var C=u&E,I=lh(o);function Q(){var ue=this&&this!==vr&&this instanceof Q?I:o;return ue.apply(C?y:this,arguments)}return Q}function vx(o){return function(u){u=En(u);var y=_s(u)?mi(u):n,C=y?y[0]:u.charAt(0),I=y?ro(y,1).join(""):u.slice(1);return C[o]()+I}}function Pd(o){return function(u){return Hs(mw(pw(u).replace(qs,"")),o,"")}}function lh(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var y=Ul(o.prototype),C=o.apply(y,u);return fr(C)?C:y}}function mj(o,u,y){var C=lh(o);function I(){for(var Q=arguments.length,ue=De(Q),ge=Q,Pe=Td(I);ge--;)ue[ge]=arguments[ge];var Qe=Q<3&&ue[0]!==Pe&&ue[Q-1]!==Pe?[]:Vs(ue,Pe);if(Q-=Qe.length,Q<y)return _x(o,u,om,I.placeholder,n,ue,Qe,n,n,y-Q);var Ze=this&&this!==vr&&this instanceof I?C:o;return Fr(Ze,this,ue)}return I}function yx(o){return function(u,y,C){var I=vn(u);if(!rs(u)){var Q=Lt(y,3);u=Yr(u),y=function(ge){return Q(I[ge],ge,I)}}var ue=o(u,y,C);return ue>-1?I[Q?u[ue]:ue]:n}}function xx(o){return Bo(function(u){var y=u.length,C=y,I=Ti.prototype.thru;for(o&&u.reverse();C--;){var Q=u[C];if(typeof Q!="function")throw new Dr(a);if(I&&!ue&&dm(Q)=="wrapper")var ue=new Ti([],!0)}for(C=ue?C:y;++C<y;){Q=u[C];var ge=dm(Q),Pe=ge=="wrapper"?S1(Q):n;Pe&&E1(Pe[0])&&Pe[1]==(q|A|G|M)&&!Pe[4].length&&Pe[9]==1?ue=ue[dm(Pe[0])].apply(ue,Pe[3]):ue=Q.length==1&&E1(Q)?ue[ge]():ue.thru(Q)}return function(){var Qe=arguments,Ze=Qe[0];if(ue&&Qe.length==1&&Vt(Ze))return ue.plant(Ze).value();for(var at=0,ft=y?u[at].apply(this,Qe):Ze;++at<y;)ft=u[at].call(this,ft);return ft}})}function om(o,u,y,C,I,Q,ue,ge,Pe,Qe){var Ze=u&q,at=u&E,ft=u&b,Nt=u&(A|O),Tt=u&re,Xt=ft?n:lh(o);function Mt(){for(var sn=arguments.length,ln=De(sn),As=sn;As--;)ln[As]=arguments[As];if(Nt)var Ri=Td(Mt),Ls=Al(ln,Ri);if(C&&(ln=hx(ln,C,I,Nt)),Q&&(ln=px(ln,Q,ue,Nt)),sn-=Ls,Nt&&sn<Qe){var kr=Vs(ln,Ri);return _x(o,u,om,Mt.placeholder,y,ln,kr,ge,Pe,Qe-sn)}var Sa=at?y:this,Wo=ft?Sa[o]:o;return sn=ln.length,ge?ln=Ij(ln,ge):Tt&&sn>1&&ln.reverse(),Ze&&Pe<sn&&(ln.length=Pe),this&&this!==vr&&this instanceof Mt&&(Wo=Xt||lh(Wo)),Wo.apply(Sa,ln)}return Mt}function wx(o,u){return function(y,C){return Qa(y,o,u(C),{})}}function lm(o,u){return function(y,C){var I;if(y===n&&C===n)return u;if(y!==n&&(I=y),C!==n){if(I===n)return C;typeof y=="string"||typeof C=="string"?(y=Ii(y),C=Ii(C)):(y=ah(y),C=ah(C)),I=o(y,C)}return I}}function x1(o){return Bo(function(u){return u=gn(u,Rn(Lt())),Yt(function(y){var C=this;return o(u,function(I){return Fr(I,C,y)})})})}function cm(o,u){u=u===n?" ":Ii(u);var y=u.length;if(y<2)return y?Fo(u,o):u;var C=Fo(u,Il(o/fa(u)));return _s(u)?ro(mi(C),0,o).join(""):C.slice(0,o)}function gj(o,u,y,C){var I=u&E,Q=lh(o);function ue(){for(var ge=-1,Pe=arguments.length,Qe=-1,Ze=C.length,at=De(Ze+Pe),ft=this&&this!==vr&&this instanceof ue?Q:o;++Qe<Ze;)at[Qe]=C[Qe];for(;Pe--;)at[Qe++]=arguments[++ge];return Fr(ft,I?y:this,at)}return ue}function bx(o){return function(u,y,C){return C&&typeof C!="number"&&Oi(u,y,C)&&(y=C=n),u=qo(u),y===n?(y=u,u=0):y=qo(y),C=C===n?u<y?1:-1:qo(C),sh(u,y,C,o)}}function um(o){return function(u,y){return typeof u=="string"&&typeof y=="string"||(u=Zs(u),y=Zs(y)),o(u,y)}}function _x(o,u,y,C,I,Q,ue,ge,Pe,Qe){var Ze=u&A,at=Ze?ue:n,ft=Ze?n:ue,Nt=Ze?Q:n,Tt=Ze?n:Q;u|=Ze?G:ie,u&=~(Ze?ie:G),u&S||(u&=~(E|b));var Xt=[o,u,I,Nt,at,Tt,ft,ge,Pe,Qe],Mt=y.apply(n,Xt);return E1(o)&&Dx(Mt,Xt),Mt.placeholder=C,Ix(Mt,o,u)}function w1(o){var u=Un[o];return function(y,C){if(y=Zs(y),C=C==null?0:Hr(Jt(C),292),C&&qp(y)){var I=(En(y)+"e").split("e"),Q=u(I[0]+"e"+(+I[1]+C));return I=(En(Q)+"e").split("e"),+(I[0]+"e"+(+I[1]-C))}return u(y)}}var vj=Fl&&1/Va(new Fl([,-0]))[1]==X?function(o){return new Fl(o)}:z1;function Sx(o){return function(u){var y=xi(u);return y==Ge?Lo(u):y==be?gd(u):Mr(u,o(u))}}function $o(o,u,y,C,I,Q,ue,ge){var Pe=u&b;if(!Pe&&typeof o!="function")throw new Dr(a);var Qe=C?C.length:0;if(Qe||(u&=~(G|ie),C=I=n),ue=ue===n?ue:Nr(Jt(ue),0),ge=ge===n?ge:Jt(ge),Qe-=I?I.length:0,u&ie){var Ze=C,at=I;C=I=n}var ft=Pe?n:S1(o),Nt=[o,u,y,C,I,Ze,at,Q,ue,ge];if(ft&&Tj(Nt,ft),o=Nt[0],u=Nt[1],y=Nt[2],C=Nt[3],I=Nt[4],ge=Nt[9]=Nt[9]===n?Pe?0:o.length:Nr(Nt[9]-Qe,0),!ge&&u&(A|O)&&(u&=~(A|O)),!u||u==E)var Tt=pj(o,u,y);else u==A||u==O?Tt=mj(o,u,ge):(u==G||u==(E|G))&&!I.length?Tt=gj(o,u,y,C):Tt=om.apply(n,Nt);var Xt=ft?Ed:Dx;return Ix(Xt(Tt,Nt),o,u)}function Nx(o,u,y,C){return o===n||_a(o,Ns[y])&&!on.call(C,y)?u:o}function jx(o,u,y,C,I,Q){return fr(o)&&fr(u)&&(Q.set(u,o),Vl(o,u,n,jx,Q),Q.delete(u)),o}function yj(o){return dh(o)?n:o}function kx(o,u,y,C,I,Q){var ue=y&N,ge=o.length,Pe=u.length;if(ge!=Pe&&!(ue&&Pe>ge))return!1;var Qe=Q.get(o),Ze=Q.get(u);if(Qe&&Ze)return Qe==u&&Ze==o;var at=-1,ft=!0,Nt=y&j?new v:n;for(Q.set(o,u),Q.set(u,o);++at<ge;){var Tt=o[at],Xt=u[at];if(C)var Mt=ue?C(Xt,Tt,at,u,o,Q):C(Tt,Xt,at,o,u,Q);if(Mt!==n){if(Mt)continue;ft=!1;break}if(Nt){if(!w(u,function(sn,ln){if(!Ha(Nt,ln)&&(Tt===sn||I(Tt,sn,y,C,Q)))return Nt.push(ln)})){ft=!1;break}}else if(!(Tt===Xt||I(Tt,Xt,y,C,Q))){ft=!1;break}}return Q.delete(o),Q.delete(u),ft}function xj(o,u,y,C,I,Q,ue){switch(y){case it:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case ot:return!(o.byteLength!=u.byteLength||!Q(new ma(o),new ma(u)));case Ee:case Z:case fe:return _a(+o,+u);case _e:return o.name==u.name&&o.message==u.message;case Ke:case ce:return o==u+"";case Ge:var ge=Lo;case be:var Pe=C&N;if(ge||(ge=Va),o.size!=u.size&&!Pe)return!1;var Qe=ue.get(o);if(Qe)return Qe==u;C|=j,ue.set(o,u);var Ze=kx(ge(o),ge(u),C,I,Q,ue);return ue.delete(o),Ze;case Ne:if(es)return es.call(o)==es.call(u)}return!1}function wj(o,u,y,C,I,Q){var ue=y&N,ge=b1(o),Pe=ge.length,Qe=b1(u),Ze=Qe.length;if(Pe!=Ze&&!ue)return!1;for(var at=Pe;at--;){var ft=ge[at];if(!(ue?ft in u:on.call(u,ft)))return!1}var Nt=Q.get(o),Tt=Q.get(u);if(Nt&&Tt)return Nt==u&&Tt==o;var Xt=!0;Q.set(o,u),Q.set(u,o);for(var Mt=ue;++at<Pe;){ft=ge[at];var sn=o[ft],ln=u[ft];if(C)var As=ue?C(ln,sn,ft,u,o,Q):C(sn,ln,ft,o,u,Q);if(!(As===n?sn===ln||I(sn,ln,y,C,Q):As)){Xt=!1;break}Mt||(Mt=ft=="constructor")}if(Xt&&!Mt){var Ri=o.constructor,Ls=u.constructor;Ri!=Ls&&"constructor"in o&&"constructor"in u&&!(typeof Ri=="function"&&Ri instanceof Ri&&typeof Ls=="function"&&Ls instanceof Ls)&&(Xt=!1)}return Q.delete(o),Q.delete(u),Xt}function Bo(o){return A1(Tx(o,n,Ux),o+"")}function b1(o){return Gr(o,Yr,j1)}function _1(o){return Gr(o,is,Ex)}var S1=yd?function(o){return yd.get(o)}:z1;function dm(o){for(var u=o.name+"",y=Bl[u],C=on.call(Bl,u)?y.length:0;C--;){var I=y[C],Q=I.func;if(Q==null||Q==o)return I.name}return u}function Td(o){var u=on.call(H,"placeholder")?H:o;return u.placeholder}function Lt(){var o=H.iteratee||B1;return o=o===B1?th:o,arguments.length?o(arguments[0],arguments[1]):o}function fm(o,u){var y=o.__data__;return Cj(u)?y[typeof u=="string"?"string":"hash"]:y.map}function N1(o){for(var u=Yr(o),y=u.length;y--;){var C=u[y],I=o[C];u[y]=[C,I,Lx(I)]}return u}function hu(o,u){var y=Br(o,u);return Ro(y)?y:n}function bj(o){var u=on.call(o,Ka),y=o[Ka];try{o[Ka]=n;var C=!0}catch{}var I=_n.call(o);return C&&(u?o[Ka]=y:delete o[Ka]),I}var j1=Rl?function(o){return o==null?[]:(o=vn(o),bs(Rl(o),function(u){return yi.call(o,u)}))}:q1,Ex=Rl?function(o){for(var u=[];o;)Gi(u,j1(o)),o=Dl(o);return u}:q1,xi=Dn;(su&&xi(new su(new ArrayBuffer(1)))!=it||ga&&xi(new ga)!=Ge||Zf&&xi(Zf.resolve())!=We||Fl&&xi(new Fl)!=be||$l&&xi(new $l)!=ve)&&(xi=function(o){var u=Dn(o),y=u==Xe?o.constructor:n,C=y?pu(y):"";if(C)switch(C){case i1:return it;case Ja:return Ge;case ks:return We;case va:return be;case s1:return ve}return u});function _j(o,u,y){for(var C=-1,I=y.length;++C<I;){var Q=y[C],ue=Q.size;switch(Q.type){case"drop":o+=ue;break;case"dropRight":u-=ue;break;case"take":u=Hr(u,o+ue);break;case"takeRight":o=Nr(o,u-ue);break}}return{start:o,end:u}}function Sj(o){var u=o.match(er);return u?u[1].split(Wi):[]}function Cx(o,u,y){u=Xs(u,o);for(var C=-1,I=u.length,Q=!1;++C<I;){var ue=so(u[C]);if(!(Q=o!=null&&y(o,ue)))break;o=o[ue]}return Q||++C!=I?Q:(I=o==null?0:o.length,!!I&&xm(I)&&Uo(ue,I)&&(Vt(o)||mu(o)))}function Nj(o){var u=o.length,y=new o.constructor(u);return u&&typeof o[0]=="string"&&on.call(o,"index")&&(y.index=o.index,y.input=o.input),y}function Ax(o){return typeof o.constructor=="function"&&!ch(o)?Ul(Dl(o)):{}}function jj(o,u,y){var C=o.constructor;switch(u){case ot:return y1(o);case Ee:case Z:return new C(+o);case it:return lj(o,y);case Fe:case st:case Ue:case Ct:case ut:case Gt:case jt:case At:case mn:return dx(o,y);case Ge:return new C;case fe:case ce:return new C(o);case Ke:return cj(o);case be:return new C;case Ne:return uj(o)}}function kj(o,u){var y=u.length;if(!y)return o;var C=y-1;return u[C]=(y>1?"& ":"")+u[C],u=u.join(y>2?", ":" "),o.replace(Tn,`{
/* [wrapped with `+u+`] */
`)}function Ej(o){return Vt(o)||mu(o)||!!(iu&&o&&o[iu])}function Uo(o,u){var y=typeof o;return u=u??F,!!u&&(y=="number"||y!="symbol"&&dl.test(o))&&o>-1&&o%1==0&&o<u}function Oi(o,u,y){if(!fr(y))return!1;var C=typeof u;return(C=="number"?rs(y)&&Uo(u,y.length):C=="string"&&u in y)?_a(y[u],o):!1}function k1(o,u){if(Vt(o))return!1;var y=typeof o;return y=="number"||y=="symbol"||y=="boolean"||o==null||Cs(o)?!0:Rr.test(o)||!lr.test(o)||u!=null&&o in vn(u)}function Cj(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function E1(o){var u=dm(o),y=H[u];if(typeof y!="function"||!(u in Qt.prototype))return!1;if(o===y)return!0;var C=S1(y);return!!C&&o===C[0]}function Aj(o){return!!Li&&Li in o}var Lj=Gs?zo:W1;function ch(o){var u=o&&o.constructor,y=typeof u=="function"&&u.prototype||Ns;return o===y}function Lx(o){return o===o&&!fr(o)}function Px(o,u){return function(y){return y==null?!1:y[o]===u&&(u!==n||o in vn(y))}}function Pj(o){var u=vm(o,function(C){return y.size===f&&y.clear(),C}),y=u.cache;return u}function Tj(o,u){var y=o[1],C=u[1],I=y|C,Q=I<(E|b|q),ue=C==q&&y==A||C==q&&y==M&&o[7].length<=u[8]||C==(q|M)&&u[7].length<=u[8]&&y==A;if(!(Q||ue))return o;C&E&&(o[2]=u[2],I|=y&E?0:S);var ge=u[3];if(ge){var Pe=o[3];o[3]=Pe?hx(Pe,ge,u[4]):ge,o[4]=Pe?Vs(o[3],p):u[4]}return ge=u[5],ge&&(Pe=o[5],o[5]=Pe?px(Pe,ge,u[6]):ge,o[6]=Pe?Vs(o[5],p):u[6]),ge=u[7],ge&&(o[7]=ge),C&q&&(o[8]=o[8]==null?u[8]:Hr(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=I,o}function Mj(o){var u=[];if(o!=null)for(var y in vn(o))u.push(y);return u}function Dj(o){return _n.call(o)}function Tx(o,u,y){return u=Nr(u===n?o.length-1:u,0),function(){for(var C=arguments,I=-1,Q=Nr(C.length-u,0),ue=De(Q);++I<Q;)ue[I]=C[u+I];I=-1;for(var ge=De(u+1);++I<u;)ge[I]=C[I];return ge[u]=y(ue),Fr(o,this,ge)}}function Mx(o,u){return u.length<2?o:Gn(o,Di(u,0,-1))}function Ij(o,u){for(var y=o.length,C=Hr(u.length,y),I=ns(o);C--;){var Q=u[C];o[C]=Uo(Q,y)?I[Q]:n}return o}function C1(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var Dx=Ox(Ed),uh=zp||function(o,u){return vr.setTimeout(o,u)},A1=Ox(to);function Ix(o,u,y){var C=u+"";return A1(o,kj(C,Oj(Sj(C),y)))}function Ox(o){var u=0,y=0;return function(){var C=n1(),I=Y-(C-y);if(y=C,I>0){if(++u>=U)return arguments[0]}else u=0;return o.apply(n,arguments)}}function hm(o,u){var y=-1,C=o.length,I=C-1;for(u=u===n?C:u;++y<u;){var Q=Gl(y,I),ue=o[Q];o[Q]=o[y],o[y]=ue}return o.length=u,o}var Rx=Pj(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(gt,function(y,C,I,Q){u.push(I?Q.replace(ys,"$1"):C||y)}),u});function so(o){if(typeof o=="string"||Cs(o))return o;var u=o+"";return u=="0"&&1/o==-X?"-0":u}function pu(o){if(o!=null){try{return js.call(o)}catch{}try{return o+""}catch{}}return""}function Oj(o,u){return $r(ne,function(y){var C="_."+y[0];u&y[1]&&!kl(o,C)&&o.push(C)}),o.sort()}function Fx(o){if(o instanceof Qt)return o.clone();var u=new Ti(o.__wrapped__,o.__chain__);return u.__actions__=ns(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function Rj(o,u,y){(y?Oi(o,u,y):u===n)?u=1:u=Nr(Jt(u),0);var C=o==null?0:o.length;if(!C||u<1)return[];for(var I=0,Q=0,ue=De(Il(C/u));I<C;)ue[Q++]=Di(o,I,I+=u);return ue}function Fj(o){for(var u=-1,y=o==null?0:o.length,C=0,I=[];++u<y;){var Q=o[u];Q&&(I[C++]=Q)}return I}function $j(){var o=arguments.length;if(!o)return[];for(var u=De(o-1),y=arguments[0],C=o;C--;)u[C-1]=arguments[C];return Gi(Vt(y)?ns(y):[y],nn(u,1))}var Bj=Yt(function(o,u){return jr(o)?Zt(o,nn(u,1,jr,!0)):[]}),Uj=Yt(function(o,u){var y=Qs(u);return jr(y)&&(y=n),jr(o)?Zt(o,nn(u,1,jr,!0),Lt(y,2)):[]}),zj=Yt(function(o,u){var y=Qs(u);return jr(y)&&(y=n),jr(o)?Zt(o,nn(u,1,jr,!0),n,y):[]});function qj(o,u,y){var C=o==null?0:o.length;return C?(u=y||u===n?1:Jt(u),Di(o,u<0?0:u,C)):[]}function Wj(o,u,y){var C=o==null?0:o.length;return C?(u=y||u===n?1:Jt(u),u=C-u,Di(o,0,u<0?0:u)):[]}function Hj(o,u){return o&&o.length?Jl(o,Lt(u,3),!0,!0):[]}function Vj(o,u){return o&&o.length?Jl(o,Lt(u,3),!0):[]}function Gj(o,u,y,C){var I=o==null?0:o.length;return I?(y&&typeof y!="number"&&Oi(o,u,y)&&(y=0,C=I),yr(o,u,y,C)):[]}function $x(o,u,y){var C=o==null?0:o.length;if(!C)return-1;var I=y==null?0:Jt(y);return I<0&&(I=Nr(C+I,0)),ze(o,Lt(u,3),I)}function Bx(o,u,y){var C=o==null?0:o.length;if(!C)return-1;var I=C-1;return y!==n&&(I=Jt(y),I=y<0?Nr(C+I,0):Hr(I,C-1)),ze(o,Lt(u,3),I,!0)}function Ux(o){var u=o==null?0:o.length;return u?nn(o,1):[]}function Yj(o){var u=o==null?0:o.length;return u?nn(o,X):[]}function Kj(o,u){var y=o==null?0:o.length;return y?(u=u===n?1:Jt(u),nn(o,u)):[]}function Jj(o){for(var u=-1,y=o==null?0:o.length,C={};++u<y;){var I=o[u];C[I[0]]=I[1]}return C}function zx(o){return o&&o.length?o[0]:n}function Xj(o,u,y){var C=o==null?0:o.length;if(!C)return-1;var I=y==null?0:Jt(y);return I<0&&(I=Nr(C+I,0)),tt(o,u,I)}function Qj(o){var u=o==null?0:o.length;return u?Di(o,0,-1):[]}var Zj=Yt(function(o){var u=gn(o,Js);return u.length&&u[0]===o[0]?Xa(u):[]}),ek=Yt(function(o){var u=Qs(o),y=gn(o,Js);return u===Qs(y)?u=n:y.pop(),y.length&&y[0]===o[0]?Xa(y,Lt(u,2)):[]}),tk=Yt(function(o){var u=Qs(o),y=gn(o,Js);return u=typeof u=="function"?u:n,u&&y.pop(),y.length&&y[0]===o[0]?Xa(y,n,u):[]});function nk(o,u){return o==null?"":t1.call(o,u)}function Qs(o){var u=o==null?0:o.length;return u?o[u-1]:n}function rk(o,u,y){var C=o==null?0:o.length;if(!C)return-1;var I=C;return y!==n&&(I=Jt(y),I=I<0?Nr(C+I,0):Hr(I,C-1)),u===u?Ml(o,u,I):ze(o,kt,I,!0)}function ik(o,u){return o&&o.length?tm(o,Jt(u)):n}var sk=Yt(qx);function qx(o,u){return o&&o.length&&u&&u.length?jd(o,u):o}function ak(o,u,y){return o&&o.length&&u&&u.length?jd(o,u,Lt(y,2)):o}function ok(o,u,y){return o&&o.length&&u&&u.length?jd(o,u,n,y):o}var lk=Bo(function(o,u){var y=o==null?0:o.length,C=ht(o,u);return ih(o,gn(u,function(I){return Uo(I,y)?+I:I}).sort(fx)),C});function ck(o,u){var y=[];if(!(o&&o.length))return y;var C=-1,I=[],Q=o.length;for(u=Lt(u,3);++C<Q;){var ue=o[C];u(ue,C,o)&&(y.push(ue),I.push(C))}return ih(o,I),y}function L1(o){return o==null?o:Qf.call(o)}function uk(o,u,y){var C=o==null?0:o.length;return C?(y&&typeof y!="number"&&Oi(o,u,y)?(u=0,y=C):(u=u==null?0:Jt(u),y=y===n?C:Jt(y)),Di(o,u,y)):[]}function dk(o,u){return du(o,u)}function fk(o,u,y){return no(o,u,Lt(y,2))}function hk(o,u){var y=o==null?0:o.length;if(y){var C=du(o,u);if(C<y&&_a(o[C],u))return C}return-1}function pk(o,u){return du(o,u,!0)}function mk(o,u,y){return no(o,u,Lt(y,2),!0)}function gk(o,u){var y=o==null?0:o.length;if(y){var C=du(o,u,!0)-1;if(_a(o[C],u))return C}return-1}function vk(o){return o&&o.length?im(o):[]}function yk(o,u){return o&&o.length?im(o,Lt(u,2)):[]}function xk(o){var u=o==null?0:o.length;return u?Di(o,1,u):[]}function wk(o,u,y){return o&&o.length?(u=y||u===n?1:Jt(u),Di(o,0,u<0?0:u)):[]}function bk(o,u,y){var C=o==null?0:o.length;return C?(u=y||u===n?1:Jt(u),u=C-u,Di(o,u<0?0:u,C)):[]}function _k(o,u){return o&&o.length?Jl(o,Lt(u,3),!1,!0):[]}function Sk(o,u){return o&&o.length?Jl(o,Lt(u,3)):[]}var Nk=Yt(function(o){return wa(nn(o,1,jr,!0))}),jk=Yt(function(o){var u=Qs(o);return jr(u)&&(u=n),wa(nn(o,1,jr,!0),Lt(u,2))}),kk=Yt(function(o){var u=Qs(o);return u=typeof u=="function"?u:n,wa(nn(o,1,jr,!0),n,u)});function Ek(o){return o&&o.length?wa(o):[]}function Ck(o,u){return o&&o.length?wa(o,Lt(u,2)):[]}function Ak(o,u){return u=typeof u=="function"?u:n,o&&o.length?wa(o,n,u):[]}function P1(o){if(!(o&&o.length))return[];var u=0;return o=bs(o,function(y){if(jr(y))return u=Nr(y.length,u),!0}),Tr(u,function(y){return gn(o,Rt(y))})}function Wx(o,u){if(!(o&&o.length))return[];var y=P1(o);return u==null?y:gn(y,function(C){return Fr(u,n,C)})}var Lk=Yt(function(o,u){return jr(o)?Zt(o,u):[]}),Pk=Yt(function(o){return Es(bs(o,jr))}),Tk=Yt(function(o){var u=Qs(o);return jr(u)&&(u=n),Es(bs(o,jr),Lt(u,2))}),Mk=Yt(function(o){var u=Qs(o);return u=typeof u=="function"?u:n,Es(bs(o,jr),n,u)}),Dk=Yt(P1);function Ik(o,u){return ba(o||[],u||[],Be)}function Ok(o,u){return ba(o||[],u||[],Yl)}var Rk=Yt(function(o){var u=o.length,y=u>1?o[u-1]:n;return y=typeof y=="function"?(o.pop(),y):n,Wx(o,y)});function Hx(o){var u=H(o);return u.__chain__=!0,u}function Fk(o,u){return u(o),o}function pm(o,u){return u(o)}var $k=Bo(function(o){var u=o.length,y=u?o[0]:0,C=this.__wrapped__,I=function(Q){return ht(Q,o)};return u>1||this.__actions__.length||!(C instanceof Qt)||!Uo(y)?this.thru(I):(C=C.slice(y,+y+(u?1:0)),C.__actions__.push({func:pm,args:[I],thisArg:n}),new Ti(C,this.__chain__).thru(function(Q){return u&&!Q.length&&Q.push(n),Q}))});function Bk(){return Hx(this)}function Uk(){return new Ti(this.value(),this.__chain__)}function zk(){this.__values__===n&&(this.__values__=sw(this.value()));var o=this.__index__>=this.__values__.length,u=o?n:this.__values__[this.__index__++];return{done:o,value:u}}function qk(){return this}function Wk(o){for(var u,y=this;y instanceof lu;){var C=Fx(y);C.__index__=0,C.__values__=n,u?I.__wrapped__=C:u=C;var I=C;y=y.__wrapped__}return I.__wrapped__=o,u}function Hk(){var o=this.__wrapped__;if(o instanceof Qt){var u=o;return this.__actions__.length&&(u=new Qt(this)),u=u.reverse(),u.__actions__.push({func:pm,args:[L1],thisArg:n}),new Ti(u,this.__chain__)}return this.thru(L1)}function Vk(){return fu(this.__wrapped__,this.__actions__)}var Gk=am(function(o,u,y){on.call(o,y)?++o[y]:Ve(o,y,1)});function Yk(o,u,y){var C=Vt(o)?jl:kn;return y&&Oi(o,u,y)&&(u=n),C(o,Lt(u,3))}function Kk(o,u){var y=Vt(o)?bs:ai;return y(o,Lt(u,3))}var Jk=yx($x),Xk=yx(Bx);function Qk(o,u){return nn(mm(o,u),1)}function Zk(o,u){return nn(mm(o,u),X)}function eE(o,u,y){return y=y===n?1:Jt(y),nn(mm(o,u),y)}function Vx(o,u){var y=Vt(o)?$r:Ut;return y(o,Lt(u,3))}function Gx(o,u){var y=Vt(o)?Qc:jn;return y(o,Lt(u,3))}var tE=am(function(o,u,y){on.call(o,y)?o[y].push(u):Ve(o,y,[u])});function nE(o,u,y,C){o=rs(o)?o:Dd(o),y=y&&!C?Jt(y):0;var I=o.length;return y<0&&(y=Nr(I+y,0)),wm(o)?y<=I&&o.indexOf(u,y)>-1:!!I&&tt(o,u,y)>-1}var rE=Yt(function(o,u,y){var C=-1,I=typeof u=="function",Q=rs(o)?De(o.length):[];return Ut(o,function(ue){Q[++C]=I?Fr(u,ue,y):In(ue,u,y)}),Q}),iE=am(function(o,u,y){Ve(o,y,u)});function mm(o,u){var y=Vt(o)?gn:Hl;return y(o,Lt(u,3))}function sE(o,u,y,C){return o==null?[]:(Vt(u)||(u=u==null?[]:[u]),y=C?n:y,Vt(y)||(y=y==null?[]:[y]),nm(o,u,y))}var aE=am(function(o,u,y){o[y?0:1].push(u)},function(){return[[],[]]});function oE(o,u,y){var C=Vt(o)?Hs:Bn,I=arguments.length<3;return C(o,Lt(u,4),y,I,Ut)}function lE(o,u,y){var C=Vt(o)?Zc:Bn,I=arguments.length<3;return C(o,Lt(u,4),y,I,jn)}function cE(o,u){var y=Vt(o)?bs:ai;return y(o,ym(Lt(u,3)))}function uE(o){var u=Vt(o)?Ie:g1;return u(o)}function dE(o,u,y){(y?Oi(o,u,y):u===n)?u=1:u=Jt(u);var C=Vt(o)?Oe:kd;return C(o,u)}function fE(o){var u=Vt(o)?Ce:rm;return u(o)}function hE(o){if(o==null)return 0;if(rs(o))return wm(o)?fa(o):o.length;var u=xi(o);return u==Ge||u==be?o.size:ql(o).length}function pE(o,u,y){var C=Vt(o)?w:v1;return y&&Oi(o,u,y)&&(u=n),C(o,Lt(u,3))}var mE=Yt(function(o,u){if(o==null)return[];var y=u.length;return y>1&&Oi(o,u[0],u[1])?u=[]:y>2&&Oi(u[0],u[1],u[2])&&(u=[u[0]]),nm(o,nn(u,1),[])}),gm=Jf||function(){return vr.Date.now()};function gE(o,u){if(typeof u!="function")throw new Dr(a);return o=Jt(o),function(){if(--o<1)return u.apply(this,arguments)}}function Yx(o,u,y){return u=y?n:u,u=o&&u==null?o.length:u,$o(o,q,n,n,n,n,u)}function Kx(o,u){var y;if(typeof u!="function")throw new Dr(a);return o=Jt(o),function(){return--o>0&&(y=u.apply(this,arguments)),o<=1&&(u=n),y}}var T1=Yt(function(o,u,y){var C=E;if(y.length){var I=Vs(y,Td(T1));C|=G}return $o(o,C,u,y,I)}),Jx=Yt(function(o,u,y){var C=E|b;if(y.length){var I=Vs(y,Td(Jx));C|=G}return $o(u,C,o,y,I)});function Xx(o,u,y){u=y?n:u;var C=$o(o,A,n,n,n,n,n,u);return C.placeholder=Xx.placeholder,C}function Qx(o,u,y){u=y?n:u;var C=$o(o,O,n,n,n,n,n,u);return C.placeholder=Qx.placeholder,C}function Zx(o,u,y){var C,I,Q,ue,ge,Pe,Qe=0,Ze=!1,at=!1,ft=!0;if(typeof o!="function")throw new Dr(a);u=Zs(u)||0,fr(y)&&(Ze=!!y.leading,at="maxWait"in y,Q=at?Nr(Zs(y.maxWait)||0,u):Q,ft="trailing"in y?!!y.trailing:ft);function Nt(kr){var Sa=C,Wo=I;return C=I=n,Qe=kr,ue=o.apply(Wo,Sa),ue}function Tt(kr){return Qe=kr,ge=uh(sn,u),Ze?Nt(kr):ue}function Xt(kr){var Sa=kr-Pe,Wo=kr-Qe,yw=u-Sa;return at?Hr(yw,Q-Wo):yw}function Mt(kr){var Sa=kr-Pe,Wo=kr-Qe;return Pe===n||Sa>=u||Sa<0||at&&Wo>=Q}function sn(){var kr=gm();if(Mt(kr))return ln(kr);ge=uh(sn,Xt(kr))}function ln(kr){return ge=n,ft&&C?Nt(kr):(C=I=n,ue)}function As(){ge!==n&&Cd(ge),Qe=0,C=Pe=I=ge=n}function Ri(){return ge===n?ue:ln(gm())}function Ls(){var kr=gm(),Sa=Mt(kr);if(C=arguments,I=this,Pe=kr,Sa){if(ge===n)return Tt(Pe);if(at)return Cd(ge),ge=uh(sn,u),Nt(Pe)}return ge===n&&(ge=uh(sn,u)),ue}return Ls.cancel=As,Ls.flush=Ri,Ls}var vE=Yt(function(o,u){return yn(o,1,u)}),yE=Yt(function(o,u,y){return yn(o,Zs(u)||0,y)});function xE(o){return $o(o,re)}function vm(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Dr(a);var y=function(){var C=arguments,I=u?u.apply(this,C):C[0],Q=y.cache;if(Q.has(I))return Q.get(I);var ue=o.apply(this,C);return y.cache=Q.set(I,ue)||Q,ue};return y.cache=new(vm.Cache||Ks),y}vm.Cache=Ks;function ym(o){if(typeof o!="function")throw new Dr(a);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function wE(o){return Kx(2,o)}var bE=sm(function(o,u){u=u.length==1&&Vt(u[0])?gn(u[0],Rn(Lt())):gn(nn(u,1),Rn(Lt()));var y=u.length;return Yt(function(C){for(var I=-1,Q=Hr(C.length,y);++I<Q;)C[I]=u[I].call(this,C[I]);return Fr(o,this,C)})}),M1=Yt(function(o,u){var y=Vs(u,Td(M1));return $o(o,G,n,u,y)}),ew=Yt(function(o,u){var y=Vs(u,Td(ew));return $o(o,ie,n,u,y)}),_E=Bo(function(o,u){return $o(o,M,n,n,n,u)});function SE(o,u){if(typeof o!="function")throw new Dr(a);return u=u===n?u:Jt(u),Yt(o,u)}function NE(o,u){if(typeof o!="function")throw new Dr(a);return u=u==null?0:Nr(Jt(u),0),Yt(function(y){var C=y[u],I=ro(y,0,u);return C&&Gi(I,C),Fr(o,this,I)})}function jE(o,u,y){var C=!0,I=!0;if(typeof o!="function")throw new Dr(a);return fr(y)&&(C="leading"in y?!!y.leading:C,I="trailing"in y?!!y.trailing:I),Zx(o,u,{leading:C,maxWait:u,trailing:I})}function kE(o){return Yx(o,1)}function EE(o,u){return M1(Xl(u),o)}function CE(){if(!arguments.length)return[];var o=arguments[0];return Vt(o)?o:[o]}function AE(o){return xt(o,g)}function LE(o,u){return u=typeof u=="function"?u:n,xt(o,g,u)}function PE(o){return xt(o,m|g)}function TE(o,u){return u=typeof u=="function"?u:n,xt(o,m|g,u)}function ME(o,u){return u==null||fn(o,u,Yr(u))}function _a(o,u){return o===u||o!==o&&u!==u}var DE=um(ts),IE=um(function(o,u){return o>=u}),mu=bd(function(){return arguments}())?bd:function(o){return xr(o)&&on.call(o,"callee")&&!yi.call(o,"callee")},Vt=De.isArray,OE=Sl?Rn(Sl):Jp;function rs(o){return o!=null&&xm(o.length)&&!zo(o)}function jr(o){return xr(o)&&rs(o)}function RE(o){return o===!0||o===!1||xr(o)&&Dn(o)==Ee}var Ql=Xf||W1,FE=qa?Rn(qa):Xp;function $E(o){return xr(o)&&o.nodeType===1&&!dh(o)}function BE(o){if(o==null)return!0;if(rs(o)&&(Vt(o)||typeof o=="string"||typeof o.splice=="function"||Ql(o)||Md(o)||mu(o)))return!o.length;var u=xi(o);if(u==Ge||u==be)return!o.size;if(ch(o))return!ql(o).length;for(var y in o)if(on.call(o,y))return!1;return!0}function UE(o,u){return Za(o,u)}function zE(o,u,y){y=typeof y=="function"?y:n;var C=y?y(o,u):n;return C===n?Za(o,u,n,y):!!C}function D1(o){if(!xr(o))return!1;var u=Dn(o);return u==_e||u==ke||typeof o.message=="string"&&typeof o.name=="string"&&!dh(o)}function qE(o){return typeof o=="number"&&qp(o)}function zo(o){if(!fr(o))return!1;var u=Dn(o);return u==Re||u==$e||u==Ae||u==He}function tw(o){return typeof o=="number"&&o==Jt(o)}function xm(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=F}function fr(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function xr(o){return o!=null&&typeof o=="object"}var nw=hd?Rn(hd):_d;function WE(o,u){return o===u||Mi(o,u,N1(u))}function HE(o,u,y){return y=typeof y=="function"?y:n,Mi(o,u,N1(u),y)}function VE(o){return rw(o)&&o!=+o}function GE(o){if(Lj(o))throw new St(s);return Ro(o)}function YE(o){return o===null}function KE(o){return o==null}function rw(o){return typeof o=="number"||xr(o)&&Dn(o)==fe}function dh(o){if(!xr(o)||Dn(o)!=Xe)return!1;var u=Dl(o);if(u===null)return!0;var y=on.call(u,"constructor")&&u.constructor;return typeof y=="function"&&y instanceof y&&js.call(y)==Mn}var I1=Ao?Rn(Ao):zl;function JE(o){return tw(o)&&o>=-F&&o<=F}var iw=pd?Rn(pd):Qp;function wm(o){return typeof o=="string"||!Vt(o)&&xr(o)&&Dn(o)==ce}function Cs(o){return typeof o=="symbol"||xr(o)&&Dn(o)==Ne}var Md=Nl?Rn(Nl):Sd;function XE(o){return o===n}function QE(o){return xr(o)&&xi(o)==ve}function ZE(o){return xr(o)&&Dn(o)==rt}var e8=um(Wl),t8=um(function(o,u){return o<=u});function sw(o){if(!o)return[];if(rs(o))return wm(o)?mi(o):ns(o);if(Ya&&o[Ya])return Tl(o[Ya]());var u=xi(o),y=u==Ge?Lo:u==be?Va:Dd;return y(o)}function qo(o){if(!o)return o===0?o:0;if(o=Zs(o),o===X||o===-X){var u=o<0?-1:1;return u*z}return o===o?o:0}function Jt(o){var u=qo(o),y=u%1;return u===u?y?u-y:u:0}function aw(o){return o?ct(Jt(o),0,Le):0}function Zs(o){if(typeof o=="number")return o;if(Cs(o))return oe;if(fr(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=fr(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Yi(o);var y=Bs.test(o);return y||ul.test(o)?ud(o.slice(2),y?2:8):Hi.test(o)?oe:+o}function ow(o){return io(o,is(o))}function n8(o){return o?ct(Jt(o),-F,F):o===0?o:0}function En(o){return o==null?"":Ii(o)}var r8=Ld(function(o,u){if(ch(u)||rs(u)){io(u,Yr(u),o);return}for(var y in u)on.call(u,y)&&Be(o,y,u[y])}),lw=Ld(function(o,u){io(u,is(u),o)}),bm=Ld(function(o,u,y,C){io(u,is(u),o,C)}),i8=Ld(function(o,u,y,C){io(u,Yr(u),o,C)}),s8=Bo(ht);function a8(o,u){var y=Ul(o);return u==null?y:Ye(y,u)}var o8=Yt(function(o,u){o=vn(o);var y=-1,C=u.length,I=C>2?u[2]:n;for(I&&Oi(u[0],u[1],I)&&(C=1);++y<C;)for(var Q=u[y],ue=is(Q),ge=-1,Pe=ue.length;++ge<Pe;){var Qe=ue[ge],Ze=o[Qe];(Ze===n||_a(Ze,Ns[Qe])&&!on.call(o,Qe))&&(o[Qe]=Q[Qe])}return o}),l8=Yt(function(o){return o.push(n,jx),Fr(cw,n,o)});function c8(o,u){return Me(o,Lt(u,3),sr)}function u8(o,u){return Me(o,Lt(u,3),oi)}function d8(o,u){return o==null?o:Vr(o,Lt(u,3),is)}function f8(o,u){return o==null?o:xn(o,Lt(u,3),is)}function h8(o,u){return o&&sr(o,Lt(u,3))}function p8(o,u){return o&&oi(o,Lt(u,3))}function m8(o){return o==null?[]:dr(o,Yr(o))}function g8(o){return o==null?[]:dr(o,is(o))}function O1(o,u,y){var C=o==null?n:Gn(o,u);return C===n?y:C}function v8(o,u){return o!=null&&Cx(o,u,Ir)}function R1(o,u){return o!=null&&Cx(o,u,xa)}var y8=wx(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=_n.call(u)),o[u]=y},$1(ss)),x8=wx(function(o,u,y){u!=null&&typeof u.toString!="function"&&(u=_n.call(u)),on.call(o,u)?o[u].push(y):o[u]=[y]},Lt),w8=Yt(In);function Yr(o){return rs(o)?we(o):ql(o)}function is(o){return rs(o)?we(o,!0):nh(o)}function b8(o,u){var y={};return u=Lt(u,3),sr(o,function(C,I,Q){Ve(y,u(C,I,Q),C)}),y}function _8(o,u){var y={};return u=Lt(u,3),sr(o,function(C,I,Q){Ve(y,I,u(C,I,Q))}),y}var S8=Ld(function(o,u,y){Vl(o,u,y)}),cw=Ld(function(o,u,y,C){Vl(o,u,y,C)}),N8=Bo(function(o,u){var y={};if(o==null)return y;var C=!1;u=gn(u,function(Q){return Q=Xs(Q,o),C||(C=Q.length>1),Q}),io(o,_1(o),y),C&&(y=xt(y,m|x|g,yj));for(var I=u.length;I--;)oh(y,u[I]);return y});function j8(o,u){return uw(o,ym(Lt(u)))}var k8=Bo(function(o,u){return o==null?{}:m1(o,u)});function uw(o,u){if(o==null)return{};var y=gn(_1(o),function(C){return[C]});return u=Lt(u),rh(o,y,function(C,I){return u(C,I[0])})}function E8(o,u,y){u=Xs(u,o);var C=-1,I=u.length;for(I||(I=1,o=n);++C<I;){var Q=o==null?n:o[so(u[C])];Q===n&&(C=I,Q=y),o=zo(Q)?Q.call(o):Q}return o}function C8(o,u,y){return o==null?o:Yl(o,u,y)}function A8(o,u,y,C){return C=typeof C=="function"?C:n,o==null?o:Yl(o,u,y,C)}var dw=Sx(Yr),fw=Sx(is);function L8(o,u,y){var C=Vt(o),I=C||Ql(o)||Md(o);if(u=Lt(u,4),y==null){var Q=o&&o.constructor;I?y=C?new Q:[]:fr(o)?y=zo(Q)?Ul(Dl(o)):{}:y={}}return(I?$r:sr)(o,function(ue,ge,Pe){return u(y,ue,ge,Pe)}),y}function P8(o,u){return o==null?!0:oh(o,u)}function T8(o,u,y){return o==null?o:Kl(o,u,Xl(y))}function M8(o,u,y,C){return C=typeof C=="function"?C:n,o==null?o:Kl(o,u,Xl(y),C)}function Dd(o){return o==null?[]:Ki(o,Yr(o))}function D8(o){return o==null?[]:Ki(o,is(o))}function I8(o,u,y){return y===n&&(y=u,u=n),y!==n&&(y=Zs(y),y=y===y?y:0),u!==n&&(u=Zs(u),u=u===u?u:0),ct(Zs(o),u,y)}function O8(o,u,y){return u=qo(u),y===n?(y=u,u=0):y=qo(y),o=Zs(o),Oo(o,u,y)}function R8(o,u,y){if(y&&typeof y!="boolean"&&Oi(o,u,y)&&(u=y=n),y===n&&(typeof u=="boolean"?(y=u,u=n):typeof o=="boolean"&&(y=o,o=n)),o===n&&u===n?(o=0,u=1):(o=qo(o),u===n?(u=o,o=0):u=qo(u)),o>u){var C=o;o=u,u=C}if(y||o%1||u%1){var I=Hp();return Hr(o+I*(u-o+_l("1e-"+((I+"").length-1))),u)}return Gl(o,u)}var F8=Pd(function(o,u,y){return u=u.toLowerCase(),o+(y?hw(u):u)});function hw(o){return F1(En(o).toLowerCase())}function pw(o){return o=En(o),o&&o.replace(fl,eu).replace(cd,"")}function $8(o,u,y){o=En(o),u=Ii(u);var C=o.length;y=y===n?C:ct(Jt(y),0,C);var I=y;return y-=u.length,y>=0&&o.slice(y,I)==u}function B8(o){return o=En(o),o&&bt.test(o)?o.replace(un,tu):o}function U8(o){return o=En(o),o&&cr.test(o)?o.replace(Zn,"\\$&"):o}var z8=Pd(function(o,u,y){return o+(y?"-":"")+u.toLowerCase()}),q8=Pd(function(o,u,y){return o+(y?" ":"")+u.toLowerCase()}),W8=vx("toLowerCase");function H8(o,u,y){o=En(o),u=Jt(u);var C=u?fa(o):0;if(!u||C>=u)return o;var I=(u-C)/2;return cm(Ol(I),y)+o+cm(Il(I),y)}function V8(o,u,y){o=En(o),u=Jt(u);var C=u?fa(o):0;return u&&C<u?o+cm(u-C,y):o}function G8(o,u,y){o=En(o),u=Jt(u);var C=u?fa(o):0;return u&&C<u?cm(u-C,y)+o:o}function Y8(o,u,y){return y||u==null?u=0:u&&(u=+u),r1(En(o).replace(Pn,""),u||0)}function K8(o,u,y){return(y?Oi(o,u,y):u===n)?u=1:u=Jt(u),Fo(En(o),u)}function J8(){var o=arguments,u=En(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var X8=Pd(function(o,u,y){return o+(y?"_":"")+u.toLowerCase()});function Q8(o,u,y){return y&&typeof y!="number"&&Oi(o,u,y)&&(u=y=n),y=y===n?Le:y>>>0,y?(o=En(o),o&&(typeof u=="string"||u!=null&&!I1(u))&&(u=Ii(u),!u&&_s(o))?ro(mi(o),0,y):o.split(u,y)):[]}var Z8=Pd(function(o,u,y){return o+(y?" ":"")+F1(u)});function eC(o,u,y){return o=En(o),y=y==null?0:ct(Jt(y),0,o.length),u=Ii(u),o.slice(y,y+u.length)==u}function tC(o,u,y){var C=H.templateSettings;y&&Oi(o,u,y)&&(u=n),o=En(o),u=bm({},u,C,Nx);var I=bm({},u.imports,C.imports,Nx),Q=Yr(I),ue=Ki(I,Q),ge,Pe,Qe=0,Ze=u.interpolate||da,at="__p += '",ft=To((u.escape||da).source+"|"+Ze.source+"|"+(Ze===rn?xs:da).source+"|"+(u.evaluate||da).source+"|$","g"),Nt="//# sourceURL="+(on.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yf+"]")+`
`;o.replace(ft,function(Mt,sn,ln,As,Ri,Ls){return ln||(ln=As),at+=o.slice(Qe,Ls).replace(Qu,Ll),sn&&(ge=!0,at+=`' +
__e(`+sn+`) +
'`),Ri&&(Pe=!0,at+=`';
`+Ri+`;
__p += '`),ln&&(at+=`' +
((__t = (`+ln+`)) == null ? '' : __t) +
'`),Qe=Ls+Mt.length,Mt}),at+=`';
`;var Tt=on.call(u,"variable")&&u.variable;if(!Tt)at=`with (obj) {
`+at+`
}
`;else if(vs.test(Tt))throw new St(l);at=(Pe?at.replace(Pt,""):at).replace(Qn,"$1").replace(Et,"$1;"),at="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ge?", __e = _.escape":"")+(Pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+at+`return __p
}`;var Xt=gw(function(){return Wt(Q,Nt+"return "+at).apply(n,ue)});if(Xt.source=at,D1(Xt))throw Xt;return Xt}function nC(o){return En(o).toLowerCase()}function rC(o){return En(o).toUpperCase()}function iC(o,u,y){if(o=En(o),o&&(y||u===n))return Yi(o);if(!o||!(u=Ii(u)))return o;var C=mi(o),I=mi(u),Q=El(C,I),ue=Cl(C,I)+1;return ro(C,Q,ue).join("")}function sC(o,u,y){if(o=En(o),o&&(y||u===n))return o.slice(0,ha(o)+1);if(!o||!(u=Ii(u)))return o;var C=mi(o),I=Cl(C,mi(u))+1;return ro(C,0,I).join("")}function aC(o,u,y){if(o=En(o),o&&(y||u===n))return o.replace(Pn,"");if(!o||!(u=Ii(u)))return o;var C=mi(o),I=El(C,mi(u));return ro(C,I).join("")}function oC(o,u){var y=ae,C=R;if(fr(u)){var I="separator"in u?u.separator:I;y="length"in u?Jt(u.length):y,C="omission"in u?Ii(u.omission):C}o=En(o);var Q=o.length;if(_s(o)){var ue=mi(o);Q=ue.length}if(y>=Q)return o;var ge=y-fa(C);if(ge<1)return C;var Pe=ue?ro(ue,0,ge).join(""):o.slice(0,ge);if(I===n)return Pe+C;if(ue&&(ge+=Pe.length-ge),I1(I)){if(o.slice(ge).search(I)){var Qe,Ze=Pe;for(I.global||(I=To(I.source,En(ws.exec(I))+"g")),I.lastIndex=0;Qe=I.exec(Ze);)var at=Qe.index;Pe=Pe.slice(0,at===n?ge:at)}}else if(o.indexOf(Ii(I),ge)!=ge){var ft=Pe.lastIndexOf(I);ft>-1&&(Pe=Pe.slice(0,ft))}return Pe+C}function lC(o){return o=En(o),o&&zt.test(o)?o.replace(or,Po):o}var cC=Pd(function(o,u,y){return o+(y?" ":"")+u.toUpperCase()}),F1=vx("toUpperCase");function mw(o,u,y){return o=En(o),u=y?n:u,u===n?Pl(o)?Ga(o):pe(o):o.match(u)||[]}var gw=Yt(function(o,u){try{return Fr(o,n,u)}catch(y){return D1(y)?y:new St(y)}}),uC=Bo(function(o,u){return $r(u,function(y){y=so(y),Ve(o,y,T1(o[y],o))}),o});function dC(o){var u=o==null?0:o.length,y=Lt();return o=u?gn(o,function(C){if(typeof C[1]!="function")throw new Dr(a);return[y(C[0]),C[1]]}):[],Yt(function(C){for(var I=-1;++I<u;){var Q=o[I];if(Fr(Q[0],this,C))return Fr(Q[1],this,C)}})}function fC(o){return dt(xt(o,m))}function $1(o){return function(){return o}}function hC(o,u){return o==null||o!==o?u:o}var pC=xx(),mC=xx(!0);function ss(o){return o}function B1(o){return th(typeof o=="function"?o:xt(o,m))}function gC(o){return Zp(xt(o,m))}function vC(o,u){return em(o,xt(u,m))}var yC=Yt(function(o,u){return function(y){return In(y,o,u)}}),xC=Yt(function(o,u){return function(y){return In(o,y,u)}});function U1(o,u,y){var C=Yr(u),I=dr(u,C);y==null&&!(fr(u)&&(I.length||!C.length))&&(y=u,u=o,o=this,I=dr(u,Yr(u)));var Q=!(fr(y)&&"chain"in y)||!!y.chain,ue=zo(o);return $r(I,function(ge){var Pe=u[ge];o[ge]=Pe,ue&&(o.prototype[ge]=function(){var Qe=this.__chain__;if(Q||Qe){var Ze=o(this.__wrapped__),at=Ze.__actions__=ns(this.__actions__);return at.push({func:Pe,args:arguments,thisArg:o}),Ze.__chain__=Qe,Ze}return Pe.apply(o,Gi([this.value()],arguments))})}),o}function wC(){return vr._===this&&(vr._=ur),this}function z1(){}function bC(o){return o=Jt(o),Yt(function(u){return tm(u,o)})}var _C=x1(gn),SC=x1(jl),NC=x1(w);function vw(o){return k1(o)?Rt(so(o)):Nd(o)}function jC(o){return function(u){return o==null?n:Gn(o,u)}}var kC=bx(),EC=bx(!0);function q1(){return[]}function W1(){return!1}function CC(){return{}}function AC(){return""}function LC(){return!0}function PC(o,u){if(o=Jt(o),o<1||o>F)return[];var y=Le,C=Hr(o,Le);u=Lt(u),o-=Le;for(var I=Tr(C,u);++y<o;)u(y);return I}function TC(o){return Vt(o)?gn(o,so):Cs(o)?[o]:ns(Rx(En(o)))}function MC(o){var u=++Xi;return En(o)+u}var DC=lm(function(o,u){return o+u},0),IC=w1("ceil"),OC=lm(function(o,u){return o/u},1),RC=w1("floor");function FC(o){return o&&o.length?$t(o,ss,ts):n}function $C(o,u){return o&&o.length?$t(o,Lt(u,2),ts):n}function BC(o){return Bt(o,ss)}function UC(o,u){return Bt(o,Lt(u,2))}function zC(o){return o&&o.length?$t(o,ss,Wl):n}function qC(o,u){return o&&o.length?$t(o,Lt(u,2),Wl):n}var WC=lm(function(o,u){return o*u},1),HC=w1("round"),VC=lm(function(o,u){return o-u},0);function GC(o){return o&&o.length?ir(o,ss):0}function YC(o,u){return o&&o.length?ir(o,Lt(u,2)):0}return H.after=gE,H.ary=Yx,H.assign=r8,H.assignIn=lw,H.assignInWith=bm,H.assignWith=i8,H.at=s8,H.before=Kx,H.bind=T1,H.bindAll=uC,H.bindKey=Jx,H.castArray=CE,H.chain=Hx,H.chunk=Rj,H.compact=Fj,H.concat=$j,H.cond=dC,H.conforms=fC,H.constant=$1,H.countBy=Gk,H.create=a8,H.curry=Xx,H.curryRight=Qx,H.debounce=Zx,H.defaults=o8,H.defaultsDeep=l8,H.defer=vE,H.delay=yE,H.difference=Bj,H.differenceBy=Uj,H.differenceWith=zj,H.drop=qj,H.dropRight=Wj,H.dropRightWhile=Hj,H.dropWhile=Vj,H.fill=Gj,H.filter=Kk,H.flatMap=Qk,H.flatMapDeep=Zk,H.flatMapDepth=eE,H.flatten=Ux,H.flattenDeep=Yj,H.flattenDepth=Kj,H.flip=xE,H.flow=pC,H.flowRight=mC,H.fromPairs=Jj,H.functions=m8,H.functionsIn=g8,H.groupBy=tE,H.initial=Qj,H.intersection=Zj,H.intersectionBy=ek,H.intersectionWith=tk,H.invert=y8,H.invertBy=x8,H.invokeMap=rE,H.iteratee=B1,H.keyBy=iE,H.keys=Yr,H.keysIn=is,H.map=mm,H.mapKeys=b8,H.mapValues=_8,H.matches=gC,H.matchesProperty=vC,H.memoize=vm,H.merge=S8,H.mergeWith=cw,H.method=yC,H.methodOf=xC,H.mixin=U1,H.negate=ym,H.nthArg=bC,H.omit=N8,H.omitBy=j8,H.once=wE,H.orderBy=sE,H.over=_C,H.overArgs=bE,H.overEvery=SC,H.overSome=NC,H.partial=M1,H.partialRight=ew,H.partition=aE,H.pick=k8,H.pickBy=uw,H.property=vw,H.propertyOf=jC,H.pull=sk,H.pullAll=qx,H.pullAllBy=ak,H.pullAllWith=ok,H.pullAt=lk,H.range=kC,H.rangeRight=EC,H.rearg=_E,H.reject=cE,H.remove=ck,H.rest=SE,H.reverse=L1,H.sampleSize=dE,H.set=C8,H.setWith=A8,H.shuffle=fE,H.slice=uk,H.sortBy=mE,H.sortedUniq=vk,H.sortedUniqBy=yk,H.split=Q8,H.spread=NE,H.tail=xk,H.take=wk,H.takeRight=bk,H.takeRightWhile=_k,H.takeWhile=Sk,H.tap=Fk,H.throttle=jE,H.thru=pm,H.toArray=sw,H.toPairs=dw,H.toPairsIn=fw,H.toPath=TC,H.toPlainObject=ow,H.transform=L8,H.unary=kE,H.union=Nk,H.unionBy=jk,H.unionWith=kk,H.uniq=Ek,H.uniqBy=Ck,H.uniqWith=Ak,H.unset=P8,H.unzip=P1,H.unzipWith=Wx,H.update=T8,H.updateWith=M8,H.values=Dd,H.valuesIn=D8,H.without=Lk,H.words=mw,H.wrap=EE,H.xor=Pk,H.xorBy=Tk,H.xorWith=Mk,H.zip=Dk,H.zipObject=Ik,H.zipObjectDeep=Ok,H.zipWith=Rk,H.entries=dw,H.entriesIn=fw,H.extend=lw,H.extendWith=bm,U1(H,H),H.add=DC,H.attempt=gw,H.camelCase=F8,H.capitalize=hw,H.ceil=IC,H.clamp=I8,H.clone=AE,H.cloneDeep=PE,H.cloneDeepWith=TE,H.cloneWith=LE,H.conformsTo=ME,H.deburr=pw,H.defaultTo=hC,H.divide=OC,H.endsWith=$8,H.eq=_a,H.escape=B8,H.escapeRegExp=U8,H.every=Yk,H.find=Jk,H.findIndex=$x,H.findKey=c8,H.findLast=Xk,H.findLastIndex=Bx,H.findLastKey=u8,H.floor=RC,H.forEach=Vx,H.forEachRight=Gx,H.forIn=d8,H.forInRight=f8,H.forOwn=h8,H.forOwnRight=p8,H.get=O1,H.gt=DE,H.gte=IE,H.has=v8,H.hasIn=R1,H.head=zx,H.identity=ss,H.includes=nE,H.indexOf=Xj,H.inRange=O8,H.invoke=w8,H.isArguments=mu,H.isArray=Vt,H.isArrayBuffer=OE,H.isArrayLike=rs,H.isArrayLikeObject=jr,H.isBoolean=RE,H.isBuffer=Ql,H.isDate=FE,H.isElement=$E,H.isEmpty=BE,H.isEqual=UE,H.isEqualWith=zE,H.isError=D1,H.isFinite=qE,H.isFunction=zo,H.isInteger=tw,H.isLength=xm,H.isMap=nw,H.isMatch=WE,H.isMatchWith=HE,H.isNaN=VE,H.isNative=GE,H.isNil=KE,H.isNull=YE,H.isNumber=rw,H.isObject=fr,H.isObjectLike=xr,H.isPlainObject=dh,H.isRegExp=I1,H.isSafeInteger=JE,H.isSet=iw,H.isString=wm,H.isSymbol=Cs,H.isTypedArray=Md,H.isUndefined=XE,H.isWeakMap=QE,H.isWeakSet=ZE,H.join=nk,H.kebabCase=z8,H.last=Qs,H.lastIndexOf=rk,H.lowerCase=q8,H.lowerFirst=W8,H.lt=e8,H.lte=t8,H.max=FC,H.maxBy=$C,H.mean=BC,H.meanBy=UC,H.min=zC,H.minBy=qC,H.stubArray=q1,H.stubFalse=W1,H.stubObject=CC,H.stubString=AC,H.stubTrue=LC,H.multiply=WC,H.nth=ik,H.noConflict=wC,H.noop=z1,H.now=gm,H.pad=H8,H.padEnd=V8,H.padStart=G8,H.parseInt=Y8,H.random=R8,H.reduce=oE,H.reduceRight=lE,H.repeat=K8,H.replace=J8,H.result=E8,H.round=HC,H.runInContext=je,H.sample=uE,H.size=hE,H.snakeCase=X8,H.some=pE,H.sortedIndex=dk,H.sortedIndexBy=fk,H.sortedIndexOf=hk,H.sortedLastIndex=pk,H.sortedLastIndexBy=mk,H.sortedLastIndexOf=gk,H.startCase=Z8,H.startsWith=eC,H.subtract=VC,H.sum=GC,H.sumBy=YC,H.template=tC,H.times=PC,H.toFinite=qo,H.toInteger=Jt,H.toLength=aw,H.toLower=nC,H.toNumber=Zs,H.toSafeInteger=n8,H.toString=En,H.toUpper=rC,H.trim=iC,H.trimEnd=sC,H.trimStart=aC,H.truncate=oC,H.unescape=lC,H.uniqueId=MC,H.upperCase=cC,H.upperFirst=F1,H.each=Vx,H.eachRight=Gx,H.first=zx,U1(H,function(){var o={};return sr(H,function(u,y){on.call(H.prototype,y)||(o[y]=u)}),o}(),{chain:!1}),H.VERSION=r,$r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){H[o].placeholder=H}),$r(["drop","take"],function(o,u){Qt.prototype[o]=function(y){y=y===n?1:Nr(Jt(y),0);var C=this.__filtered__&&!u?new Qt(this):this.clone();return C.__filtered__?C.__takeCount__=Hr(y,C.__takeCount__):C.__views__.push({size:Hr(y,Le),type:o+(C.__dir__<0?"Right":"")}),C},Qt.prototype[o+"Right"]=function(y){return this.reverse()[o](y).reverse()}}),$r(["filter","map","takeWhile"],function(o,u){var y=u+1,C=y==K||y==me;Qt.prototype[o]=function(I){var Q=this.clone();return Q.__iteratees__.push({iteratee:Lt(I,3),type:y}),Q.__filtered__=Q.__filtered__||C,Q}}),$r(["head","last"],function(o,u){var y="take"+(u?"Right":"");Qt.prototype[o]=function(){return this[y](1).value()[0]}}),$r(["initial","tail"],function(o,u){var y="drop"+(u?"":"Right");Qt.prototype[o]=function(){return this.__filtered__?new Qt(this):this[y](1)}}),Qt.prototype.compact=function(){return this.filter(ss)},Qt.prototype.find=function(o){return this.filter(o).head()},Qt.prototype.findLast=function(o){return this.reverse().find(o)},Qt.prototype.invokeMap=Yt(function(o,u){return typeof o=="function"?new Qt(this):this.map(function(y){return In(y,o,u)})}),Qt.prototype.reject=function(o){return this.filter(ym(Lt(o)))},Qt.prototype.slice=function(o,u){o=Jt(o);var y=this;return y.__filtered__&&(o>0||u<0)?new Qt(y):(o<0?y=y.takeRight(-o):o&&(y=y.drop(o)),u!==n&&(u=Jt(u),y=u<0?y.dropRight(-u):y.take(u-o)),y)},Qt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Qt.prototype.toArray=function(){return this.take(Le)},sr(Qt.prototype,function(o,u){var y=/^(?:filter|find|map|reject)|While$/.test(u),C=/^(?:head|last)$/.test(u),I=H[C?"take"+(u=="last"?"Right":""):u],Q=C||/^find/.test(u);I&&(H.prototype[u]=function(){var ue=this.__wrapped__,ge=C?[1]:arguments,Pe=ue instanceof Qt,Qe=ge[0],Ze=Pe||Vt(ue),at=function(sn){var ln=I.apply(H,Gi([sn],ge));return C&&ft?ln[0]:ln};Ze&&y&&typeof Qe=="function"&&Qe.length!=1&&(Pe=Ze=!1);var ft=this.__chain__,Nt=!!this.__actions__.length,Tt=Q&&!ft,Xt=Pe&&!Nt;if(!Q&&Ze){ue=Xt?ue:new Qt(this);var Mt=o.apply(ue,ge);return Mt.__actions__.push({func:pm,args:[at],thisArg:n}),new Ti(Mt,ft)}return Tt&&Xt?o.apply(this,ge):(Mt=this.thru(at),Tt?C?Mt.value()[0]:Mt.value():Mt)})}),$r(["pop","push","shift","sort","splice","unshift"],function(o){var u=Ss[o],y=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",C=/^(?:pop|shift)$/.test(o);H.prototype[o]=function(){var I=arguments;if(C&&!this.__chain__){var Q=this.value();return u.apply(Vt(Q)?Q:[],I)}return this[y](function(ue){return u.apply(Vt(ue)?ue:[],I)})}}),sr(Qt.prototype,function(o,u){var y=H[u];if(y){var C=y.name+"";on.call(Bl,C)||(Bl[C]=[]),Bl[C].push({name:u,func:y})}}),Bl[om(n,b).name]=[{name:"wrapper",func:n}],Qt.prototype.clone=Vp,Qt.prototype.reverse=a1,Qt.prototype.value=xd,H.prototype.at=$k,H.prototype.chain=Bk,H.prototype.commit=Uk,H.prototype.next=zk,H.prototype.plant=Wk,H.prototype.reverse=Hk,H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=Vk,H.prototype.first=H.prototype.head,Ya&&(H.prototype[Ya]=qk),H},vi=pa();ni?((ni.exports=vi)._=vi,Vi._=vi):vr._=vi}).call(ci)})(ig,ig.exports);var MB=ig.exports;async function F6(e,t){try{const{data:n,error:r}=await et.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r){if(console.error("Error en RPC get_group_calendar:",r),r.code==="42501"){console.warn("Error de permisos RLS en calendarios, continuando sin generar calendario");return}throw r}if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,s="calendar.ics",a=new Blob([i],{type:"text/calendar;charset=utf-8"}),l=new File([a],s,{type:"text/calendar;charset=utf-8"}),{error:c}=await et.storage.from("calendars").upload(`${e}/${t}/${s}`,l,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:f}}=et.storage.from("calendars").getPublicUrl(`${e}/${t}/${s}`),p=`${f}?v=${Date.now()}`,{error:m}=await et.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(m)throw m}catch(n){throw console.error("Error updating calendar:",n),n}}async function sg(e){return Wn(async()=>{const{data:t,error:n}=await et.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function w0(e){const t={...e,type:e.type||"song"};return Wn(async()=>{const{data:n,error:r}=await et.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la cancin")}async function DB(e,t,n){const{data:{user:r}}=await et.auth.getUser();if(!r)return Te.error("No se pudo obtener la informacin del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return Wn(async()=>{const{data:s,error:a}=await et.from("songs").insert(i).select().single();return{data:s,error:a}},"Error al crear el medley")}async function J_(e,t){return Wn(async()=>{const{data:n,error:r}=await et.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la cancin")}async function IB(e){try{const{error:t}=await et.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la cancin:",t),Te.error("Error al eliminar la cancin"),!1):!0}catch(t){return console.error("Error al eliminar la cancin:",t),Te.error("Error al eliminar la cancin"),!1}}async function Sy(e){return Wn(async()=>{const{data:t,error:n}=await et.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function X_(e){return Wn(async()=>{const{data:t,error:n}=await et.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function ex(e){return Wn(async()=>{const{data:t,error:n}=await et.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function OB(e,t){return Wn(async()=>{const{data:n,error:r}=await et.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function RB(e){try{const{error:t}=await et.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),Te.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),Te.error("Error al eliminar el setlist"),!1}}async function ag(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await et.auth.getUser();if(!r)return console.error("No se pudo obtener la informacin del usuario"),Te.error("No se pudo obtener la informacin del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:s,error:a}=await et.from("setlist_songs").insert(i).select().single();return a?(console.error("Error de Supabase al aadir la cancin al setlist:",a),console.error("Cdigo de error:",a.code),console.error("Mensaje de error:",a.message),console.error("Detalles:",a.details),Te.error(`Error al aadir la cancin al setlist: ${a.message}`),null):(console.log("Cancin aadida exitosamente:",s),s)}catch(r){return console.error("Error general al aadir la cancin al setlist:",r),Te.error("Error al aadir la cancin al setlist"),null}}async function FB(e,t){try{const{error:n,count:r}=await et.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la cancin del setlist:",n),Te.error("Error al eliminar la cancin del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la cancin del setlist:",n),Te.error("Error al eliminar la cancin del setlist"),!1}}async function $B(e,t){try{const{error:n}=await et.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),Te.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),Te.error("Error al reordenar las canciones del setlist"),!1}}async function Q_(e,t){return await Wn(async()=>{const{data:r,error:i}=await et.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function BB(e,t){return Wn(async()=>{const{data:n,error:r}=await et.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function UB(e,t){try{const{data:n,error:r}=await et.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Te.error("Error al obtener el medley"),null;const s=[...n.medley_song_ids||[],t],{data:a,error:l}=await et.from("songs").update({medley_song_ids:s}).eq("id",e).select().single();return l?(console.error("Error al aadir la cancin al medley:",l),Te.error("Error al aadir la cancin al medley"),null):a}catch(n){return console.error("Error al aadir la cancin al medley:",n),Te.error("Error al aadir la cancin al medley"),null}}async function zB(e,t){try{const{data:n,error:r}=await et.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),Te.error("Error al obtener el medley"),!1;const s=(n.medley_song_ids||[]).filter(l=>l!==t),{error:a}=await et.from("songs").update({medley_song_ids:s}).eq("id",e);return a?(console.error("Error al eliminar la cancin del medley:",a),Te.error("Error al eliminar la cancin del medley"),!1):!0}catch(n){return console.error("Error al eliminar la cancin del medley:",n),Te.error("Error al eliminar la cancin del medley"),!1}}async function qB(e){try{const{error:t}=await et.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),Te.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),Te.error("Error al eliminar el medley"),!1}}async function WB(e,t){try{const n=await X_(e);if(!n)return Te.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await et.auth.getUser();if(!r)return Te.error("No se pudo obtener la informacin del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},s=await ex(i);if(!s)return Te.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const a=n.songs.map(l=>ag(s.id,l.song_id,l.position));await Promise.all(a)}return await X_(s.id)}catch(n){return console.error("Error al duplicar el setlist:",n),Te.error("Error al duplicar el setlist"),null}}let yu=null;function Z_({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:s,availableDates:a,members:l}){var ke;const[c,f]=k.useState(""),[p,m]=k.useState(""),[x,g]=k.useState(""),[N,j]=k.useState(""),[E,b]=k.useState(!1),[S,A]=k.useState([]),[O,G]=k.useState(!1),{user:ie}=Zr(),[q,M]=k.useState(""),[re,ae]=k.useState([]),[R,U]=k.useState(null),[Y,K]=k.useState(!1),[xe,me]=k.useState([]),[X,F]=k.useState([]),[z,oe]=k.useState("");k.useEffect(()=>{var _e,Re;if(i){if(f(i.name),m(i.date),g(i.time),j(i.notes||""),i.location){if(typeof i.location=="string")M(i.location),U({display_name:i.location,lat:"",lon:"",type:"",class:""});else if(typeof i.location=="object"&&i.location!==null){const $e=i.location;$e.display_name?(M($e.display_name),U($e)):$e.name&&(M($e.name),U({display_name:$e.name,lat:((_e=$e.coordinates)==null?void 0:_e.lat)||"",lon:((Re=$e.coordinates)==null?void 0:Re.lon)||"",type:"",class:""}))}}else M(""),U(null);oe(i.setlist_id||""),Le()}else if(r){const $e=Kt(r,"yyyy-MM-dd");m($e),g("20:00"),oe(""),P($e)}},[i,r]),k.useEffect(()=>{e&&(async()=>{const[Re,$e]=await Promise.all([et.from("events").select("*").eq("group_id",n),Sy(n)]);me(Re.data||[]),F($e||[])})()},[e,n]);const Le=async()=>{if(i)try{const _e=await Wn(()=>et.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),Re=await Wn(()=>et.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),$e=await Wn(()=>et.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(_e){const Ge=new Set((Re==null?void 0:Re.map(We=>We.user_id))||[]),fe=new Set;$e==null||$e.forEach(We=>{var He;(He=We.event_members)==null||He.forEach(Ke=>{fe.add(Ke.user_id)})});const ee=new Set(_e.map(We=>We.group_member_id)),Xe=l.map(We=>{const He=We.user_id?Ge.has(We.user_id):!0,Ke=We.user_id?fe.has(We.user_id):!1,be=ee.has(We.id);return{memberId:We.id,userId:We.user_id,selected:be,isAvailable:be||He&&!Ke,isBusyInOtherEvent:Ke,wasInitiallyAvailable:He,sync_calendar:We.sync_calendar||!1}});A(Xe)}}catch(_e){console.error("Error loading event members:",_e)}},P=async(_e,Re)=>{try{const $e=await Wn(()=>et.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",_e),"Error loading external events"),Ge=new Set;$e==null||$e.forEach(We=>{var He;(He=We.event_members)==null||He.forEach(Ke=>{Ge.add(Ke.user_id)})});const fe=await Wn(()=>et.from("member_availability").select("user_id").eq("date",_e),"Error loading member availability"),ee=new Set((fe==null?void 0:fe.map(We=>We.user_id))||[]),Xe=l.map(We=>{const He=We.user_id?ee.has(We.user_id):!0,Ke=We.user_id?Ge.has(We.user_id):!1,be=He&&!Ke;return{memberId:We.id,userId:We.user_id,selected:Re?Re.includes(We.id):We.role_in_group==="principal"&&be,isAvailable:be,isBusyInOtherEvent:Ke,wasInitiallyAvailable:He,sync_calendar:We.sync_calendar||!1}});A(Xe)}catch($e){console.error("Error loading available members:",$e)}};k.useEffect(()=>{V()},[S]);const V=()=>{const _e=l.filter(Ge=>Ge.role_in_group==="principal"),Re=S.filter(Ge=>Ge.selected).map(Ge=>Ge.memberId),$e=new Set;return _e.forEach(Ge=>{Re.includes(Ge.id)||Ge.instruments.forEach(fe=>{S.filter(Xe=>Xe.selected).some(Xe=>{const We=l.find(He=>He.id===Xe.memberId);return We==null?void 0:We.instruments.some(He=>He.id===fe.id)})||$e.add(fe.name)})}),G($e.size>0),$e},ne=(_e,Re)=>{A($e=>$e.map(Ge=>Ge.memberId===_e?{...Ge,selected:Re}:Ge))},le=async _e=>{if(!_e.trim()){ae([]);return}yu&&yu.abort(),yu=new AbortController,K(!0);try{const Ge=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(_e)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:yu.signal})).json()).sort((fe,ee)=>{const Xe=fe.display_name.toLowerCase().includes("madrid")||fe.display_name.toLowerCase().includes("espaa"),We=ee.display_name.toLowerCase().includes("madrid")||ee.display_name.toLowerCase().includes("espaa");return Xe&&!We?-1:!Xe&&We?1:0});ae(Ge)}catch(Re){Re.name!=="AbortError"&&(console.error("Error searching locations:",Re),Te.error("Error al buscar ubicaciones"))}finally{K(!1),yu=null}};k.useEffect(()=>()=>{yu&&yu.abort()},[]);const de=vt.useCallback(MB.debounce(_e=>{le(_e)},300),[]),Ae=_e=>{const Re=_e.target.value;if(M(Re),ae([]),!Re.trim()){ae([]);return}de(Re)},Ee=async()=>{try{if(!c||!p){Te.error("Por favor completa los campos requeridos");return}b(!0);const _e={group_id:n,name:c.trim(),date:p,time:x,datetime:(()=>{const $e=new Date(`${p}T${x}`),Ge=-$e.getTimezoneOffset();return new Date($e.getTime()-Ge*60*1e3).toISOString().replace("Z",HB(Ge))})(),notes:N.trim()||null,created_by:ie.id,location:R?R.display_name:q};let Re;if(i){const{data:$e,error:Ge}=await et.from("events").update(_e).eq("id",i.id).select().single();if(Ge)throw Ge;Re=i.id}else{const{data:$e,error:Ge}=await et.from("events").insert([_e]).select().single();if(Ge)throw Ge;Re=$e.id}if(Re){i&&await et.from("event_members").delete().eq("event_id",Re);const $e=S.filter(fe=>fe.selected).map(fe=>({event_id:Re,group_member_id:fe.memberId,user_id:fe.userId,created_by:ie.id}));if($e.length>0){const{error:fe}=await et.from("event_members").insert($e);if(fe)throw fe}const Ge=S.filter(fe=>fe.selected&&fe.userId&&!fe.wasInitiallyAvailable).map(fe=>({user_id:fe.userId,date:p}));if(Ge.length>0){const{data:fe}=await et.from("member_availability").select("user_id, date").in("user_id",Ge.map(We=>We.user_id)).eq("date",p),ee=new Set((fe||[]).map(We=>`${We.user_id}-${We.date}`)),Xe=Ge.filter(We=>!ee.has(`${We.user_id}-${We.date}`));if(Xe.length>0){const{error:We}=await et.from("member_availability").insert(Xe);We&&console.error("Error adding availability:",We)}}try{await Promise.all(S.filter(fe=>fe.selected&&fe.sync_calendar&&fe.userId).map(async fe=>{try{return await F6(n,fe.memberId)}catch{return null}}))}catch{}z?await Q_(Re,z):i!=null&&i.setlist_id&&await Q_(Re,null)}b(!1),s&&s(),t(),Te.success(i?"Evento actualizado":"Evento creado")}catch(_e){b(!1),console.error("Error saving event:",_e),Te.error("Error al guardar el evento")}},Z=_e=>{const Re=new Date;Re.setHours(0,0,0,0);const $e=new Set(a.map(fe=>Kt(fe,"yyyy-MM-dd"))),Ge=new Set(xe.map(fe=>Kt(new Date(fe.date),"yyyy-MM-dd")));return _e.filter(fe=>{const ee=Kt(fe,"yyyy-MM-dd"),Xe=fe>=Re;return $e.has(ee)&&!Ge.has(ee)&&Xe}).sort((fe,ee)=>fe.getTime()-ee.getTime())};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[d.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Oa,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:Ee,className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(Xn,{label:"Event Name",value:c,onChange:_e=>f(_e.target.value),required:!0,placeholder:"Enter event name"}),d.jsx(Xn,{label:"Time",type:"time",value:x,onChange:_e=>g(_e.target.value),required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),d.jsxs("select",{value:p,onChange:_e=>{m(_e.target.value),P(_e.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",disabled:!0,children:"Select a date"}),Z(a).map((_e,Re)=>{const $e=Kt(_e,"yyyy-MM-dd");return d.jsx("option",{value:$e,children:Kt(_e,"EEEE, d MMMM yyyy",{locale:co})},Re)})]})]}),i&&d.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:d.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",Kt(new Date(i.date),"EEEE, d MMMM yyyy",{locale:co})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),d.jsxs("select",{value:z,onChange:_e=>oe(_e.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",children:"Sin setlist"}),X.map(_e=>{var Re;return d.jsxs("option",{value:_e.id,children:[_e.name," (",((Re=_e.songs)==null?void 0:Re.length)||0," canciones)"]},_e.id)})]}),z&&d.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(ke=X.find(_e=>_e.id===z))==null?void 0:ke.name]})})]}),p&&d.jsx(TB,{members:l,selectedMembers:S,onMemberSelectionChange:ne,validationError:O}),d.jsxs("div",{className:"relative space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicacin"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Wh,{className:"h-5 w-5 text-gray-400"})}),d.jsx(Xn,{value:q,onChange:Ae,className:"pl-10 pr-10",placeholder:"Buscar ubicacin..."}),q&&d.jsx("button",{type:"button",onClick:()=>{M(""),U(null),ae([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d.jsx(Oa,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),Y&&d.jsx("div",{className:"flex items-center justify-center p-4",children:d.jsx(ol,{className:"h-6 w-6 animate-spin text-primary"})}),re.length>0&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:re.map((_e,Re)=>d.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{U(_e),M(_e.display_name),ae([])},children:[d.jsx(Wh,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:_e.display_name.split(",")[0]}),d.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:_e.display_name.split(",").slice(1).join(",").trim()})]})]},Re))}),R&&d.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Wh,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:R!=null&&R.display_name&&typeof R.display_name=="string"&&R.display_name.includes(",")?R.display_name.split(",")[0]:(R==null?void 0:R.display_name)||"Unknown location"}),d.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:R!=null&&R.display_name&&typeof R.display_name=="string"&&R.display_name.includes(",")?R.display_name.split(",").slice(1).join(",").trim():""})]}),d.jsx("button",{type:"button",onClick:()=>{U(null),M("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:d.jsx(Oa,{className:"h-5 w-5"})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:N,onChange:_e=>j(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(_t,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(_t,{onClick:Ee,disabled:E,className:"w-full",children:E?d.jsxs(d.Fragment,{children:[d.jsx(ol,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function HB(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}const VB=(e,t,n,r=!1)=>{var q,M;const i=new Dt("p","mm","a4"),s=i.internal.pageSize.getWidth(),a=i.internal.pageSize.getHeight(),l=r?"#FFFFFF":"#1E2A47",c=r?"#000000":"#F95738",f="helvetica";r||(i.setFillColor(l),i.rect(0,0,s,a,"F"));const p=[...((q=e.songs)==null?void 0:q.map(re=>({...re,type:"song"})))||[],...((M=e.medleys)==null?void 0:M.map(re=>({...re,type:"medley"})))||[]].sort((re,ae)=>re.position-ae.position),m=30,x=10,g=s-60,N=p.length>20,j=N?(g-20)/2:g,E=20,b=E+j+20;let S=18,A=x;p.length>30?(S=14,A=8):p.length>25&&(S=16,A=9),i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c);let O=m;if(N){const re=Math.ceil(p.length/2),ae=p.slice(0,re),R=p.slice(re);let U=O;ae.forEach((K,xe)=>{let me="";if(K.type==="song"){const oe=K;oe.song&&(me=oe.song.title)}else K.type==="medley"&&(me=K.name||"Medley");const F=`${String(xe+1).padStart(2,"0")}. ${me}`,z=i.splitTextToSize(F.toUpperCase(),j);i.text(z,E,U),U+=z.length*A});let Y=O;R.forEach((K,xe)=>{let me="";if(K.type==="song"){const oe=K;oe.song&&(me=oe.song.title)}else K.type==="medley"&&(me=K.name||"Medley");const F=`${String(re+xe+1).padStart(2,"0")}. ${me}`,z=i.splitTextToSize(F.toUpperCase(),j);i.text(z,b,Y),Y+=z.length*A})}else p.forEach((re,ae)=>{O>a-50&&(i.addPage(),r||(i.setFillColor(l),i.rect(0,0,s,a,"F")),O=m,i.setFont(f,"bold"),i.setFontSize(S),i.setTextColor(c));let R="";if(re.type==="song"){const xe=re;xe.song&&(R=xe.song.title)}else re.type==="medley"&&(R=re.name||"Medley");const Y=`${String(ae+1).padStart(2,"0")}. ${R}`,K=i.splitTextToSize(Y.toUpperCase(),j);i.text(K,E,O),O+=K.length*A});const G=i.getNumberOfPages();for(let re=1;re<=G;re++){i.setPage(re),i.setFont(f,"bold"),i.setFontSize(48),i.setTextColor(c);const ae=(n||"YOUR BAND").toUpperCase();i.text(ae,s-20,m,{angle:-90,align:"left"})}const ie=re=>new Date(re).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});if(t){i.setFont(f,"normal"),i.setFontSize(10),i.setTextColor(c);const re=[t.name||"The Arena",t.location||"Town, Country",ie(t.date)];i.text(re,s-20,a-30,{align:"right"})}return i},GB=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:s})=>{const[a,l]=k.useState(!0),c=(f=!1)=>{if(!n)return;const m=VB(n,r&&i?{name:r,date:i}:void 0,s,f),g=`${s||"Setlist"} - ${r||"Event"}${f?" (Print)":" (Digital)"}.pdf`;if(f){const N=m.output("blob"),j=URL.createObjectURL(N);window.open(j,"_blank")}else m.save(g)};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:d.jsx("div",{className:`bg-white rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:f=>f.stopPropagation(),children:n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 border-b border-gray-200 gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg flex-shrink-0",children:d.jsx(ei,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),d.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 truncate",children:n.name})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 print:hidden flex-wrap",children:[d.jsxs("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-2 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-xs",title:"Descargar PDF Digital",children:[d.jsx(J0,{className:"w-3 h-3"}),"Digital"]}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-2 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs",title:"Descargar PDF para Imprimir",children:[d.jsx(J0,{className:"w-3 h-3"}),"Impresin"]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),d.jsx("button",{onClick:()=>l(!a),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-indigo-600":"bg-gray-200"}`,children:d.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(Oa,{className:"w-6 h-6"})})]})]}),d.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&d.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const f=k.useMemo(()=>n!=null&&n.songs?n.songs.map(g=>{var N;return{...g,type:((N=g.song)==null?void 0:N.type)==="medley"?"medley":"song"}}).sort((g,N)=>g.position-N.position):[],[n==null?void 0:n.songs]),p=f.length,m=p>10,x=m?Math.ceil(p/2):p;return p===0?d.jsx("div",{className:"text-center py-10",children:d.jsx("p",{className:"text-gray-500",children:"Este setlist est vaco."})}):d.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${x}, auto)`,gridAutoFlow:"column",gridTemplateColumns:m?"1fr 1fr":"1fr"},children:f.map((g,N)=>{var j,E,b,S,A,O,G;return g.type==="medley"?d.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:d.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[N+1,"."]}),d.jsxs("div",{className:"flex-grow",children:[d.jsx("p",{className:"text-indigo-600 font-bold",children:(j=g.song)==null?void 0:j.title}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((b=(E=g.song)==null?void 0:E.medley_song_ids)==null?void 0:b.length)||0," canciones)"]})]})]})},`medley-${g.id}`):d.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[N+1,"."]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((S=g.song)==null?void 0:S.title)||"N/A"}),d.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${a&&((A=g.song)!=null&&A.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(O=g.song)==null?void 0:O.artist})]})]},`song-${((G=g.song)==null?void 0:G.id)||N}`)})})})()]})]})})})})};function wp({table:e,filter:t,event:n="*",onInsert:r,onUpdate:i,onDelete:s,onChange:a,enabled:l=!0}){const c=k.useRef(null);return k.useEffect(()=>{if(!l)return;const f=`realtime-${e}-${t||"all"}`;return c.current=et.channel(f).on("postgres_changes",{event:n,schema:"public",table:e,...t&&{filter:t}},p=>{p.eventType==="INSERT"&&r?r(p):p.eventType==="UPDATE"&&i?i(p):p.eventType==="DELETE"&&s&&s(p),a&&a(p)}).subscribe(),()=>{c.current&&(c.current.unsubscribe(),c.current=null)}},[e,t,n,r,i,s,a,l]),{unsubscribe:()=>{c.current&&(c.current.unsubscribe(),c.current=null)}}}function YB({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,s]=k.useState([]),[a,l]=k.useState(!0),[c,f]=k.useState(null),[p,m]=k.useState(!1),[x,g]=k.useState(!1),[N,j]=k.useState("upcoming"),[E,b]=k.useState(null),[S,A]=k.useState(null),[O,G]=k.useState("");k.useEffect(()=>{ie()},[e]),wp({table:"events",filter:`group_id=eq.${e}`,onInsert:()=>{ie(),Te.success("Nuevo evento aadido en tiempo real")},onUpdate:()=>{ie()},onDelete:X=>{s(F=>F.filter(z=>z.id!==X.old.id)),Te.success("Evento eliminado en tiempo real")},enabled:!!e});const ie=async()=>{try{l(!0);const{data:X,error:F}=await et.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if(F)throw F;if(X){const z=await Promise.all(X.map(async oe=>{const{data:Le,error:P}=await et.from("event_members").select("group_member_id, user_id").eq("event_id",oe.id);if(P)return console.error("Error loading event members:",P),{...oe,members:[]};const V=(Le==null?void 0:Le.map(ne=>{const le=r.find(de=>de.id===ne.group_member_id);return{group_member_id:ne.group_member_id,user_id:ne.user_id,member_name:(le==null?void 0:le.name)||"Unknown Member",role_in_group:(le==null?void 0:le.role_in_group)||"principal"}}))||[];return{...oe,members:V}}));s(z)}}catch(X){console.error("Error fetching events:",X),Te.error("Error loading events")}finally{l(!1)}},q=async X=>{if(window.confirm("Ests seguro de que quieres eliminar este evento?"))try{const{data:F,error:z}=await et.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",X);if(z)throw z;const{error:oe}=await et.from("events").delete().eq("id",X);if(oe)throw oe;F&&F.length>0&&await Promise.all(F.filter(Le=>Le.group_members.sync_calendar).map(async Le=>{try{await F6(e,Le.group_member_id)}catch{}})),Te.success("Evento eliminado correctamente"),ie()}catch(F){console.error("Error deleting event:",F),Te.error("Error al eliminar el evento")}},M=X=>{f(X),g(!0)},re=async X=>{try{const{data:z,error:oe}=await et.from("groups").select("name").eq("id",X.group_id).single();if(oe)throw oe;G((z==null?void 0:z.name)||"")}catch{G("")}const F=X.setlist;if(F&&(A({name:X.name,date:X.date}),!!F))try{const{data:z,error:oe}=await et.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",F.id).single();if(oe)throw oe;z&&b(z)}catch(z){console.error("Error al cargar el setlist completo:",z),Te.error("Error al cargar el setlist")}};if(a)return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-8 w-32 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-36 bg-gray-200 animate-pulse rounded"})]}),d.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[d.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-24 bg-gray-200 animate-pulse rounded"})]}),d.jsx(XO,{count:4})]});const ae=X=>{const F=X.reduce((z,oe)=>{const Le=Kt(vu(oe.date),"MMMM yyyy");return z[Le]||(z[Le]=[]),z[Le].push(oe),z},{});return Object.entries(F)},R=X=>{if(!X)return"";if(typeof X=="object"&&X!==null)return X.name||String(X);if(typeof X!="string")return String(X);if(X.startsWith("{")||X.startsWith("["))try{const F=JSON.parse(X);return F.name||F.formatted_address||F.description||String(F)}catch{return X}return X},U=X=>{if(!X)return;const F=R(X);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F)}`,"_blank")},Y=X=>{const F=X.members.filter(oe=>oe.role_in_group==="principal"),z=X.members.filter(oe=>oe.role_in_group==="sustituto");return d.jsxs("div",{className:"mt-1.5 space-y-1",children:[d.jsx("div",{className:"flex flex-wrap gap-1",children:F.map(oe=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:oe.member_name},oe.group_member_id))}),z.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),z.map(oe=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:oe.member_name},oe.group_member_id))]}),X.location&&d.jsx("div",{className:"flex items-center gap-1 mt-1",children:d.jsxs("button",{onClick:()=>U(X.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[d.jsx(Wh,{className:"w-3 h-3 mr-1"}),d.jsx("span",{className:"underline",children:K(R(X.location))})]})})]})},K=(X,F=40)=>{if(!X)return"";if(X.includes(",")){const z=X.split(",")[0];return z.length<=F?z:`${z.slice(0,F)}...`}return X.length>F?`${X.slice(0,F)}...`:X},xe=i.filter(X=>{const F=vu(X.date);return S_(Mc(F))||N_(F)}),me=i.filter(X=>{const F=vu(X.date);return!S_(Mc(F))&&!N_(F)});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:d.jsxs("div",{className:"p-3 sm:p-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Eventos"}),t&&d.jsx(_t,{onClick:()=>m(!0),size:"sm",className:"w-full sm:w-auto",children:"Aadir Evento"})]}),i.length===0?d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(vc,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay eventos programados"})]}):d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:d.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[d.jsxs("button",{onClick:()=>j("upcoming"),className:`${N==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{className:"hidden sm:inline",children:"Prximos eventos"}),d.jsx("span",{className:"sm:hidden",children:"Prximos"}),xe.length>0&&d.jsx("span",{className:`${N==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:xe.length})]}),d.jsxs("button",{onClick:()=>j("past"),className:`${N==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-3 sm:pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{className:"hidden sm:inline",children:"Eventos pasados"}),d.jsx("span",{className:"sm:hidden",children:"Pasados"}),me.length>0&&d.jsx("span",{className:`${N==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:me.length})]})]})}),d.jsx("div",{className:"mt-4 space-y-6",children:ae(N==="upcoming"?xe:me).map(([X,F])=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:X}),d.jsx("div",{className:"space-y-1",children:F.map(z=>d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:d.jsx("div",{className:"p-3",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[d.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[d.jsx("div",{className:"text-lg font-bold text-gray-900",children:Kt(vu(z.date),"d")}),d.jsx("div",{className:"text-xs text-gray-500 uppercase",children:Kt(vu(z.date),"EEE")})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:z.name}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs text-gray-500 mt-0.5",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(vp,{className:"w-3 h-3 mr-1"}),Kt(vu(`2000-01-01T${z.time}`),"h:mm a")]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(Iu,{className:"w-3 h-3 mr-1"}),z.members.length]}),z.setlist?d.jsxs("div",{className:"flex items-center",children:[d.jsx(ei,{className:"w-3 h-3 mr-1 text-blue-500"}),d.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>z.setlist&&re(z),children:z.setlist.name}),d.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var P,V;const oe=((P=z.setlist.songs)==null?void 0:P.filter(ne=>{var le,de;return((le=ne.song)==null?void 0:le.type)==="song"||!((de=ne.song)!=null&&de.type)}))||[],Le=((V=z.setlist.songs)==null?void 0:V.filter(ne=>{var le;return((le=ne.song)==null?void 0:le.type)==="medley"}))||[];return`(${oe.length} canciones${Le.length>0?`, ${Le.length} medleys`:""})`})()})]}):d.jsxs("div",{className:"flex items-center",children:[d.jsx(ei,{className:"w-3 h-3 mr-1 text-gray-300"}),d.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),Y(z),z.notes&&d.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:z.notes})]}),t&&d.jsxs("div",{className:"flex items-center gap-1 mt-2 sm:mt-0",children:[d.jsx("button",{onClick:()=>M(z),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:d.jsx(bN,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),d.jsx("button",{onClick:()=>q(z.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:d.jsx(M5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})})},z.id))})]},X))})]})]})}),d.jsx(Z_,{isOpen:p,onClose:()=>m(!1),groupId:e,onEventSaved:()=>{ie(),m(!1)},availableDates:n,members:r}),c&&d.jsx(Z_,{isOpen:x,onClose:()=>{g(!1),f(null)},groupId:e,event:c,onEventSaved:()=>{ie(),g(!1),f(null)},availableDates:[...n,vu(c.date)],members:r}),E&&d.jsx(GB,{isOpen:!!E,onClose:()=>{b(null),A(null),G("")},setlist:E,eventName:S==null?void 0:S.name,eventDate:S==null?void 0:S.date,bandName:O})]})}function KB({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(Oa,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-700 mb-6",children:i}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(_t,{variant:"secondary",onClick:t,children:"Cancelar"}),d.jsx(_t,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function JB({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),Te.success("URL copiada al portapapeles")};return d.jsxs(Ru,{open:e,onClose:t,className:"relative z-50",children:[d.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:d.jsxs(Ru.Panel,{className:"mx-auto max-w-md w-full sm:max-w-lg rounded-lg bg-white p-4 sm:p-6 max-h-[90vh] overflow-y-auto",children:[d.jsxs(Ru.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[d.jsx(vc,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Google Calendar"}),d.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),d.jsx("li",{children:'Selecciona "Desde URL"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Aadir calendario"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre la aplicacin Calendario"}),d.jsx("li",{children:"Ve a Archivo  Nueva suscripcin a calendario"}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Outlook Calendar"}),d.jsx("li",{children:'Ve a "Aadir calendario"  "Desde Internet"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),d.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[d.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2 min-w-0"}),d.jsxs(_t,{onClick:r,variant:"secondary",size:"sm",className:"flex items-center justify-center gap-1 w-full sm:w-auto",children:[d.jsx(XD,{className:"w-4 h-4"}),d.jsx("span",{className:"sm:hidden",children:"Copiar URL"}),d.jsx("span",{className:"hidden sm:inline",children:"Copiar"})]})]})]})]}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx(_t,{onClick:t,children:"Cerrar"})})]})})]})}class XB{constructor(){this.clientId="2f84f95d5e0943afb6e72b6758adedd3",this.redirectUri="http://127.0.0.1:5173/spotify/callback",this.scopes=["user-read-private","user-read-email","playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-modify-playback-state","user-read-playback-state","streaming"].join(" "),this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,this.loadTokensFromStorage(),this.subscribeToAuthChanges()}async getAuthUrl(){this.isProcessingAuth||(localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"));const t=this.generateRandomString(16),n=this.generateRandomString(128);localStorage.setItem("spotify_return_url",window.location.href),localStorage.setItem("spotify_auth_state",t),localStorage.setItem("spotify_code_verifier",n);const r=await this.generateCodeChallenge(n);return`https://accounts.spotify.com/authorize?${new URLSearchParams({response_type:"code",client_id:this.clientId,scope:this.scopes,redirect_uri:this.redirectUri,state:t,code_challenge_method:"S256",code_challenge:r}).toString()}`}async handleAuthCallback(t,n){if(this.isProcessingAuth)return console.log(" Already processing auth, skipping..."),!1;console.log(" SpotifyService: Starting handleAuthCallback..."),this.isProcessingAuth=!0;try{const r=localStorage.getItem("spotify_auth_state"),i=localStorage.getItem("spotify_code_verifier");if(console.log(" SpotifyService: Auth callback data:",{receivedState:n?n.substring(0,10)+"...":"NULL",storedState:r?r.substring(0,10)+"...":"NULL",hasCodeVerifier:!!i,codeLength:t==null?void 0:t.length,receivedStateLength:n==null?void 0:n.length,storedStateLength:r==null?void 0:r.length,statesMatch:n===r}),!r)throw console.error(" No stored state found"),new Error("No stored state found");if(n!==r)throw console.error(" State mismatch:",{received:n,stored:r,receivedLength:n==null?void 0:n.length,storedLength:r==null?void 0:r.length,match:n===r}),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),new Error("State mismatch - auth state was corrupted. Please try connecting to Spotify again.");if(!i)throw console.error(" Code verifier not found"),new Error("Code verifier not found");console.log(" SpotifyService: All validations passed, making token request...");const s=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:this.redirectUri,client_id:this.clientId,code_verifier:i})});if(console.log(" SpotifyService: Token request response status:",s.status),!s.ok){const l=await s.text();throw console.error(" SpotifyService: Token request failed:",s.status,l),new Error(`Failed to exchange code for tokens: ${s.status} ${l}`)}console.log(" SpotifyService: Token request successful, parsing response...");const a=await s.json();return console.log(" SpotifyService: Token data received:",{hasAccessToken:!!a.access_token,hasRefreshToken:!!a.refresh_token,expiresIn:a.expires_in}),this.accessToken=a.access_token,this.refreshToken=a.refresh_token,this.tokenExpiry=Date.now()+a.expires_in*1e3,console.log(" SpotifyService: Tokens stored in memory, saving to storage..."),await this.saveTokensToStorage(),console.log(" SpotifyService: Tokens saved to storage, cleaning up..."),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),console.log(" SpotifyService: Auth callback completed successfully!"),!0}catch(r){return console.error("Error in Spotify auth callback:",r),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),!1}finally{this.isProcessingAuth=!1}}async refreshAccessToken(){if(!this.refreshToken)return!1;try{const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken,client_id:this.clientId})});if(!t.ok)throw new Error("Failed to refresh access token");const n=await t.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,n.refresh_token&&(this.refreshToken=n.refresh_token),this.saveTokensToStorage(),!0}catch(t){return console.error("Error refreshing access token:",t),this.logout(),!1}}async ensureValidToken(){return this.accessToken?this.tokenExpiry&&Date.now()>=this.tokenExpiry-6e4?await this.refreshAccessToken():!0:!1}async apiRequest(t,n={}){if(!await this.ensureValidToken())throw new Error("No valid Spotify token available");const r=await fetch(`https://api.spotify.com/v1${t}`,{...n,headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json",...n.headers}});if(!r.ok){if(r.status===401&&await this.refreshAccessToken())return this.apiRequest(t,n);throw new Error(`Spotify API error: ${r.status} ${r.statusText}`)}return r.headers.get("content-length")==="0"||r.status===204?null:r.json()}async getCurrentUser(){return this.apiRequest("/me")}async searchTracks(t,n=20){const r=new URLSearchParams({q:t,type:"track",limit:n.toString()});return(await this.apiRequest(`/search?${r}`)).tracks.items}async getTrack(t){return this.apiRequest(`/tracks/${t}`)}async getAudioFeatures(t){return this.apiRequest(`/audio-features/${t}`)}async createPlaylist(t,n,r=!1){const i=await this.getCurrentUser();return this.apiRequest(`/users/${i.id}/playlists`,{method:"POST",body:JSON.stringify({name:t,description:n,public:r})})}async addTracksToPlaylist(t,n){await this.apiRequest(`/playlists/${t}/tracks`,{method:"POST",body:JSON.stringify({uris:n})})}async playTrack(t,n){const r={uris:[t]};n&&(r.device_id=n),await this.apiRequest("/me/player/play",{method:"PUT",body:JSON.stringify(r)})}async pausePlayback(){await this.apiRequest("/me/player/pause",{method:"PUT"})}async resumePlayback(){await this.apiRequest("/me/player/play",{method:"PUT"})}async getPlaybackState(){try{return await this.apiRequest("/me/player")}catch{return null}}async getUserPlaylists(t=50){return(await this.apiRequest(`/me/playlists?limit=${t}`)).items}async getPlaylistTracks(t,n=100){return(await this.apiRequest(`/playlists/${t}/tracks?limit=${n}`)).items.map(i=>i.track)}isAuthenticated(){return!!(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)}async logout(){this.accessToken=null,this.refreshToken=null,this.tokenExpiry=null,this.isProcessingAuth=!1,await this.clearTokensFromStorage(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url"),console.log(" Spotify logout completed - tokens cleared from all sources")}clearAuthState(){console.log(" Clearing Spotify auth state manually"),this.isProcessingAuth=!1,localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url")}async generateCodeChallenge(t){const n=new TextEncoder().encode(t),r=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(r)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}generateRandomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((i,s)=>i+n[s%n.length],"")}async saveTokensToStorage(){console.log(" saveTokensToStorage: Starting...");const{user:t}=Zr.getState();if(console.log(" saveTokensToStorage: User check:",{hasUser:!!t,userId:t==null?void 0:t.id}),!t){console.log(" saveTokensToStorage: No user, falling back to localStorage"),this.saveTokensToLocalStorage();return}try{console.log(" saveTokensToStorage: Attempting database save...");const{error:n}=await et.from("spotify_tokens").upsert({user_id:t.id,access_token:this.accessToken,refresh_token:this.refreshToken,expires_at:new Date(this.tokenExpiry).toISOString()},{onConflict:"user_id"});if(n)throw console.error(" saveTokensToStorage: Database error:",n),n;console.log(" Spotify tokens saved to database")}catch(n){console.error("Error saving tokens to database:",n),console.log(" saveTokensToStorage: Falling back to localStorage due to error"),this.saveTokensToLocalStorage()}}async loadTokensFromStorage(){const{user:t}=Zr.getState();if(!t){this.loadTokensFromLocalStorage();return}try{const{data:n,error:r}=await et.from("spotify_tokens").select("*").eq("user_id",t.id).single();if(r||!n){this.loadTokensFromLocalStorage();return}this.accessToken=n.access_token,this.refreshToken=n.refresh_token,this.tokenExpiry=new Date(n.expires_at).getTime(),this.saveTokensToLocalStorage(),console.log(" Spotify tokens loaded from database")}catch(n){console.error("Error loading tokens from database:",n),this.loadTokensFromLocalStorage()}}saveTokensToLocalStorage(){var i;console.log(" SpotifyService: Saving tokens to storage...",{hasAccessToken:!!this.accessToken,hasRefreshToken:!!this.refreshToken,hasTokenExpiry:!!this.tokenExpiry,accessTokenLength:(i=this.accessToken)==null?void 0:i.length,tokenExpiry:this.tokenExpiry}),this.accessToken&&(localStorage.setItem("spotify_access_token",this.accessToken),console.log(" Access token saved to localStorage")),this.refreshToken&&(localStorage.setItem("spotify_refresh_token",this.refreshToken),console.log(" Refresh token saved to localStorage")),this.tokenExpiry&&(localStorage.setItem("spotify_token_expiry",this.tokenExpiry.toString()),console.log(" Token expiry saved to localStorage"));const t=localStorage.getItem("spotify_access_token"),n=localStorage.getItem("spotify_refresh_token"),r=localStorage.getItem("spotify_token_expiry");console.log(" Verification - tokens in localStorage:",{hasAccessToken:!!t,hasRefreshToken:!!n,hasTokenExpiry:!!r,accessTokenMatches:t===this.accessToken,refreshTokenMatches:n===this.refreshToken})}loadTokensFromLocalStorage(){this.accessToken=localStorage.getItem("spotify_access_token"),this.refreshToken=localStorage.getItem("spotify_refresh_token");const t=localStorage.getItem("spotify_token_expiry");this.tokenExpiry=t?parseInt(t):null}async clearTokensFromStorage(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry");const{user:t}=Zr.getState();if(t)try{const{error:n}=await et.from("spotify_tokens").delete().eq("user_id",t.id);n?console.error("Error deleting Spotify tokens from database:",n):console.log(" Spotify tokens deleted from database")}catch(n){console.error("Error clearing Spotify tokens from database:",n)}}subscribeToAuthChanges(){Zr.subscribe(t=>{t.user&&!this.accessToken?this.loadTokensFromStorage():!t.user&&this.accessToken&&this.logout()})}async refreshTokensFromDatabase(){const{user:t}=Zr.getState();if(!t)return!1;if(!this.accessToken&&!localStorage.getItem("spotify_access_token"))return console.log(" User appears to have logged out, skipping database refresh"),!1;try{const{data:n,error:r}=await et.from("spotify_tokens").select("*").eq("user_id",t.id).single();if(r||!n)return!1;const i=new Date(n.expires_at).getTime();if(!this.accessToken||n.access_token!==this.accessToken||i!==this.tokenExpiry){const s=this.isAuthenticated();return this.accessToken=n.access_token,this.refreshToken=n.refresh_token,this.tokenExpiry=i,this.saveTokensToLocalStorage(),console.log(" Spotify tokens refreshed from database"),!s&&this.isAuthenticated()?(console.log(" Authentication state changed, dispatching event"),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"))):console.log(" Tokens updated but auth state unchanged, no event dispatched"),!0}return!1}catch(n){return console.error("Error refreshing tokens from database:",n),!1}}}const qn=new XB,Fp=()=>{const[e,t]=k.useState(!1),[n,r]=k.useState(null),[i,s]=k.useState(!0),[a,l]=k.useState(!1),[c,f]=k.useState(!1);k.useEffect(()=>{if(a)return;(async()=>{if(c){console.log(" Already checking auth, skipping...");return}f(!0);try{if(console.log(" Checking Spotify auth status..."),await qn.refreshTokensFromDatabase(),console.log(" Is authenticated:",qn.isAuthenticated()),qn.isAuthenticated()){console.log(" Getting user data...");const A=await qn.getCurrentUser();console.log(" User data:",A),r(A),t(!0)}else r(null),t(!1)}catch(A){console.error(" Error checking Spotify auth status:",A),await qn.logout(),t(!1),r(null)}finally{s(!1),l(!0),f(!1)}})()},[a]),k.useEffect(()=>{const S=async()=>{if(c){console.log(" Already checking auth, ignoring event...");return}console.log(" useSpotify: Received Spotify auth event, refreshing status..."),f(!0);try{if(console.log(" useSpotify: Checking if authenticated:",qn.isAuthenticated()),qn.isAuthenticated())if(!n||!e){console.log(" useSpotify: Getting current user...");const A=await qn.getCurrentUser();console.log(" useSpotify: User data received:",A==null?void 0:A.display_name),r(A),t(!0)}else console.log(" useSpotify: User already set, skipping fetch");else console.log(" useSpotify: Not authenticated, clearing state"),t(!1),r(null)}catch(A){console.error(" useSpotify: Error refreshing Spotify auth status:",A),await qn.logout(),t(!1),r(null)}finally{f(!1)}};return console.log(" useSpotify: Adding event listener for spotifyAuthCompleted"),window.addEventListener("spotifyAuthCompleted",S),()=>{console.log(" useSpotify: Removing event listener for spotifyAuthCompleted"),window.removeEventListener("spotifyAuthCompleted",S)}},[]);const p=k.useCallback(async()=>{try{console.log(" Starting Spotify login...");const S=await qn.getAuthUrl();console.log(" Got auth URL, redirecting..."),window.location.href=S}catch(S){console.error(" Error getting Spotify auth URL:",S),Te.error(`Error al conectar con Spotify: ${S.message}`)}},[]),m=k.useCallback(async()=>{await qn.logout(),t(!1),r(null),Te.success("Desconectado de Spotify")},[]),x=k.useCallback(async S=>{if(!e)throw new Error("No authenticated with Spotify");try{return await qn.searchTracks(S)}catch(A){throw console.error("Error searching tracks:",A),Te.error("Error al buscar canciones en Spotify"),A}},[e]),g=k.useCallback(async(S,A)=>{if(!e)return Te.error("Debes conectar con Spotify primero"),null;try{const O=await qn.createPlaylist(`Band Plan - ${S}`,"Setlist generado automticamente desde Band Plan",!1),G=A.filter(ie=>ie.id).map(ie=>`spotify:track:${ie.id}`);return G.length>0&&await qn.addTracksToPlaylist(O.id,G),Te.success(`Playlist "${O.name}" creada en Spotify`),O.external_urls.spotify}catch(O){return console.error("Error creating playlist:",O),Te.error("Error al crear playlist en Spotify"),null}},[e]),N=k.useCallback(async S=>{if(!e){Te.error("Debes conectar con Spotify primero");return}try{await qn.playTrack(S)}catch(A){console.error("Error playing track:",A),Te.error("Error al reproducir cancin. Asegrate de tener Spotify abierto.")}},[e]),j=k.useCallback(async()=>{if(e)try{await qn.pausePlayback()}catch(S){console.error("Error pausing playback:",S),Te.error("Error al pausar reproduccin")}},[e]),E=k.useCallback(async()=>{if(e)try{await qn.resumePlayback()}catch(S){console.error("Error resuming playback:",S),Te.error("Error al reanudar reproduccin")}},[e]),b=k.useCallback(async()=>{try{if(qn.isAuthenticated()){const S=await qn.getCurrentUser();r(S),t(!0)}else t(!1),r(null)}catch(S){console.error(" Error refreshing Spotify auth status:",S),qn.logout(),t(!1),r(null)}},[]);return{isAuthenticated:e,user:n,loading:i,login:p,logout:m,searchTracks:x,createPlaylistFromSetlist:g,playTrack:N,pausePlayback:j,resumePlayback:E,refreshAuthStatus:b}},QB=({className:e="",compact:t=!1})=>{var p,m;const{isAuthenticated:n,user:r,loading:i,login:s,logout:a,refreshAuthStatus:l}=Fp(),c=()=>{console.log(" Resetting Spotify authentication state..."),qn.clearAuthState(),localStorage.removeItem("spotify_auth_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_return_url");const x=new URL(window.location.href);(x.searchParams.has("code")||x.searchParams.has("state"))&&(x.searchParams.delete("code"),x.searchParams.delete("state"),x.searchParams.delete("error"),window.history.replaceState({},document.title,x.toString())),Te.success("Estado de Spotify limpiado. Puedes intentar conectar de nuevo.")},f=()=>{console.log(" Manual refresh requested"),l()};return i?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[d.jsx(ol,{className:"w-4 h-4 animate-spin text-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Conectando con Spotify..."})]}):n?t?d.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[((p=r==null?void 0:r.images)==null?void 0:p[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-6 h-6 rounded-full"}),d.jsx("span",{className:"text-sm text-gray-700",children:r==null?void 0:r.display_name}),d.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Desconectar Spotify",children:d.jsx(ry,{className:"w-4 h-4"})})]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-3 sm:p-4 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[d.jsx("div",{className:"bg-green-500 p-2 rounded-full flex-shrink-0",children:d.jsx(ei,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[((m=r==null?void 0:r.images)==null?void 0:m[0])&&d.jsx("img",{src:r.images[0].url,alt:r.display_name,className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full flex-shrink-0"}),d.jsxs("span",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:["Conectado como ",r==null?void 0:r.display_name]})]}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Spotify conectado correctamente"})]})]}),d.jsxs(_t,{onClick:a,variant:"secondary",size:"sm",className:"w-full sm:w-auto",children:[d.jsx(ry,{className:"w-4 h-4 mr-2"}),"Desconectar"]})]})}):t?d.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors text-sm ${e}`,children:[d.jsx(ei,{className:"w-4 h-4"}),"Conectar Spotify"]}):d.jsx("div",{className:`bg-gradient-to-r from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 ${e}`,children:d.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4",children:[d.jsx("div",{className:"bg-green-500 p-2 sm:p-3 rounded-full flex-shrink-0",children:d.jsx(ei,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2",children:"Conecta con Spotify"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Conecta tu cuenta de Spotify para acceder a funciones avanzadas como bsqueda de canciones, creacin automtica de playlists, y reproduccin de previews."}),d.jsxs("ul",{className:"text-xs sm:text-sm text-gray-600 mb-4 space-y-1",children:[d.jsx("li",{children:" Bsqueda automtica de canciones con datos completos"}),d.jsx("li",{children:" Crear playlists automticamente desde tus setlists"}),d.jsx("li",{children:" Reproducir previews de canciones"}),d.jsx("li",{children:" Control de reproduccin desde la app"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[d.jsxs(_t,{onClick:s,variant:"primary",className:"bg-green-500 hover:bg-green-600 text-white w-full sm:w-auto",size:"sm",children:[d.jsx(ei,{className:"w-4 h-4 mr-2"}),"Conectar con Spotify"]}),d.jsxs(_t,{onClick:f,variant:"secondary",className:"text-blue-600 hover:text-blue-800 w-full sm:w-auto",title:"Actualizar estado de autenticacin",size:"sm",children:[d.jsx(l_,{className:"w-4 h-4 mr-2"}),"Refrescar"]}),d.jsxs(_t,{onClick:c,variant:"secondary",className:"text-gray-600 hover:text-gray-800 w-full sm:w-auto",title:"Limpiar estado de Spotify si hay problemas",size:"sm",children:[d.jsx(l_,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})})},ZB=({onSpotifyTrackSelect:e,onDeezerTrackSelect:t,onManualAdd:n,placeholder:r="Buscar canciones o aadir manualmente...",className:i=""})=>{const{isAuthenticated:s,searchTracks:a,loading:l}=Fp(),[c,f]=k.useState(""),[p,m]=k.useState([]),[x,g]=k.useState([]),[N,j]=k.useState(!1),[E,b]=k.useState(!1),[S,A]=k.useState(null),O=k.useRef(null),G=k.useRef(null),ie=k.useRef(),q=c||"";k.useEffect(()=>{const z=oe=>{O.current&&!O.current.contains(oe.target)&&b(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]),k.useEffect(()=>{if(q.length<2){m([]),g([]);return}return ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{M(q)},300),()=>{ie.current&&clearTimeout(ie.current)}},[q,s]);const M=async z=>{if(j(!0),s)try{const oe=await a(z);m(oe),b(!0)}catch(oe){console.error("Error searching tracks:",oe),m([]),b(!0)}else try{const Le=await(await fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(z)}`)).json();g(Le.data||[]),b(!0)}catch(oe){console.error("Error searching Deezer:",oe),g([]),b(!0)}j(!1)},re=z=>{e(z),f(""),m([]),g([]),b(!1),Y()},ae=z=>{t&&t(z),f(""),m([]),g([]),b(!1),Y()},R=()=>{n(q),f(""),m([]),g([]),b(!1),Y()},U=z=>{if(S===z.id){Y();return}if(!z.preview_url){Te.error("Preview no disponible para esta cancin");return}Y(),G.current&&(G.current.src=z.preview_url,G.current.play(),A(z.id),G.current.onended=()=>{A(null)})},Y=()=>{G.current&&(G.current.pause(),G.current.currentTime=0),A(null)},K=z=>{window.open(z.external_urls.spotify,"_blank"),Te.success("Abriendo en Spotify")},xe=z=>{const oe=Math.floor(z/6e4),Le=Math.floor(z%6e4/1e3);return`${oe}:${Le.toString().padStart(2,"0")}`},me=z=>{const oe=Math.floor(z/60),Le=z%60;return`${oe}:${Le.toString().padStart(2,"0")}`},X=z=>{if(S===z.id.toString()){Y();return}if(!z.preview){Te.error("Preview no disponible para esta cancin");return}Y(),G.current&&(G.current.src=z.preview,G.current.play(),A(z.id.toString()),G.current.onended=()=>{A(null)})},F=z=>{window.open(z.link,"_blank"),Te.success("Abriendo en Deezer")};return l?d.jsx("div",{className:`relative ${i}`,children:d.jsxs("div",{className:"relative",children:[d.jsx(iy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",placeholder:"Cargando...",disabled:!0,value:"",readOnly:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed text-lg"})]})}):d.jsxs("div",{ref:O,className:`relative ${i}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx(iy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),d.jsx("input",{type:"text",value:q,onChange:z=>f(z.target.value||""),placeholder:r,className:"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg shadow-sm",onFocus:()=>b(!0)}),N&&d.jsx(ol,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 animate-spin"})]}),E&&d.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[d.jsxs("div",{onClick:R,className:"p-4 hover:bg-blue-50 cursor-pointer border-b border-gray-100 flex items-center gap-3 bg-blue-25",children:[d.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:d.jsx($g,{className:"w-6 h-6 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-blue-900",children:"Aadir manualmente"}),d.jsx("p",{className:"text-sm text-blue-600",children:q?`Crear "${q}" con formulario`:"Usar formulario manual"})]})]}),s&&p.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-green-50 border-b border-green-100",children:d.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-2",children:[d.jsx(ei,{className:"w-4 h-4"}),"Resultados de Spotify"]})}),p.map(z=>{var oe,Le;return d.jsx("div",{className:"p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:((oe=z.album.images[2])==null?void 0:oe.url)||((Le=z.album.images[0])==null?void 0:Le.url),alt:z.album.name,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>re(z),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:z.name}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:z.artists.map(P=>P.name).join(", ")}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:z.album.name})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(vp,{className:"w-3 h-3"}),xe(z.duration_ms)]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(_N,{className:"w-3 h-3"}),z.popularity,"%"]})]})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[z.preview_url&&d.jsx("button",{onClick:P=>{P.stopPropagation(),U(z)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Preview (30s)",children:S===z.id?d.jsx(a_,{className:"w-4 h-4"}):d.jsx(o_,{className:"w-4 h-4"})}),d.jsx("button",{onClick:P=>{P.stopPropagation(),K(z)},className:"p-1.5 text-gray-400 hover:text-green-500 transition-colors",title:"Abrir en Spotify",children:d.jsx(ny,{className:"w-4 h-4"})})]})]})},z.id)})]}),!s&&x.length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"px-4 py-2 bg-orange-50 border-b border-orange-100",children:d.jsxs("p",{className:"text-sm text-orange-700 font-medium flex items-center gap-2",children:[d.jsx(ei,{className:"w-4 h-4"}),"Resultados de Deezer"]})}),x.map(z=>d.jsx("div",{className:"p-3 hover:bg-orange-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("img",{src:z.album.cover_small||z.album.cover,alt:z.album.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",onClick:()=>ae(z),children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 truncate",children:z.title}),d.jsx("p",{className:"text-sm text-gray-600 truncate",children:z.artist.name}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:z.album.title})]}),d.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 ml-2",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(vp,{className:"w-3 h-3"}),me(z.duration)]})})]})}),d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[z.preview&&d.jsx("button",{onClick:oe=>{oe.stopPropagation(),X(z)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Preview (30s)",children:S===z.id.toString()?d.jsx(a_,{className:"w-4 h-4"}):d.jsx(o_,{className:"w-4 h-4"})}),d.jsx("button",{onClick:oe=>{oe.stopPropagation(),F(z)},className:"p-1.5 text-gray-400 hover:text-orange-500 transition-colors",title:"Abrir en Deezer",children:d.jsx(ny,{className:"w-4 h-4"})})]})]})},z.id))]}),s&&p.length===0&&!N&&q.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(ei,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Spotify para "',q,'"']})]}),!s&&x.length===0&&!N&&q.length>=2&&d.jsxs("div",{className:"p-4 text-center text-gray-500 border-b border-gray-100",children:[d.jsx(ei,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),d.jsxs("p",{children:['No se encontraron canciones en Deezer para "',q,'"']})]})]}),d.jsx("audio",{ref:G})]})},e3={title:"",artist:"",duration_minutes:"",key:"",notes:""},t3=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function eU({groupId:e,canManageSongs:t=!0}){const[n,r]=k.useState([]),[i,s]=k.useState(!0),[a,l]=k.useState(!1),[c,f]=k.useState(null),[p,m]=k.useState(e3),[x,g]=k.useState(!1),[N,j]=k.useState(null),[E,b]=k.useState(null),[S,A]=k.useState(""),[O,G]=k.useState(!1),[ie,q]=k.useState(null),[M,re]=k.useState(""),[ae,R]=k.useState(""),[U,Y]=k.useState("");Fp();const K=n.filter(Z=>{var $e;const ke=!M||Z.title.toLowerCase().includes(M.toLowerCase())||(($e=Z.artist)==null?void 0:$e.toLowerCase().includes(M.toLowerCase())),_e=!ae||Z.key===ae,Re=!U||Z.type===U;return ke&&_e&&Re}),xe=[...new Set(n.map(Z=>Z.key).filter(Boolean))].sort();k.useEffect(()=>{me()},[e]),wp({table:"songs",filter:`group_id=eq.${e}`,onInsert:Z=>{r(ke=>[...ke,Z.new]),Te.success("Nueva cancin aadida en tiempo real")},onUpdate:Z=>{r(ke=>ke.map(_e=>_e.id===Z.new.id?Z.new:_e))},onDelete:Z=>{r(ke=>ke.filter(_e=>_e.id!==Z.old.id)),Te.success("Cancin eliminada en tiempo real")},enabled:!!e});const me=async()=>{s(!0);const Z=await sg(e);Z&&r(Z),s(!1)},X=async Z=>{const{data:{user:ke}}=await et.auth.getUser();if(!ke){Te.error("No se pudo obtener la informacin del usuario");return}const _e=Math.round(Z.duration_ms/6e4),Re=`Popularidad: ${Z.popularity}% | lbum: ${Z.album.name} (${Z.album.release_date.split("-")[0]})`,$e={title:Z.name,artist:Z.artists.map(Ge=>Ge.name).join(", "),duration_minutes:_e.toString(),key:"",notes:Re,group_id:e,created_by:ke.id};try{await w0($e),await me(),Te.success(`"${Z.name}" aadida desde Spotify`)}catch(Ge){console.error("Error creating song from Spotify:",Ge),Te.error("Error al aadir la cancin")}},F=async Z=>{const{data:{user:ke}}=await et.auth.getUser();if(!ke){Te.error("No se pudo obtener la informacin del usuario");return}const _e=Math.round(Z.duration/60),Re=`lbum: ${Z.album.title} | Fuente: Deezer`,$e={title:Z.title,artist:Z.artist.name,duration_minutes:_e.toString(),key:"",notes:Re,group_id:e,created_by:ke.id};try{await w0($e),await me(),Te.success(`"${Z.title}" aadida desde Deezer`)}catch(Ge){console.error("Error creating song from Deezer:",Ge),Te.error("Error al aadir la cancin")}},z=async Z=>{if(Z.preventDefault(),!p.title.trim()){Te.error("El ttulo es obligatorio");return}const{data:{user:ke}}=await et.auth.getUser();if(!ke){Te.error("No se pudo obtener la informacin del usuario");return}const _e={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:ke.id};if(c){const Re=await J_(c.id,_e);Re&&(Te.success("Cancin actualizada correctamente"),r($e=>$e.map(Ge=>Ge.id===c.id?Re:Ge)))}else{const Re=await w0(_e);Re&&(Te.success("Cancin creada correctamente"),r($e=>[...$e,Re]))}V()},oe=Z=>{var ke;f(Z),m({title:Z.title,artist:Z.artist||"",duration_minutes:((ke=Z.duration_minutes)==null?void 0:ke.toString())||"",key:Z.key||"",notes:Z.notes||""}),l(!0)},Le=Z=>{j(Z),g(!0)},P=async()=>{if(!N)return;console.log("Eliminando cancin:",N.id);const Z=await IB(N.id);console.log("Resultado de eliminacin:",Z),Z?(Te.success("Cancin eliminada correctamente"),r(ke=>ke.filter(_e=>_e.id!==N.id))):Te.error("No se pudo eliminar la cancin"),g(!1),j(null)},V=()=>{m(e3),f(null),l(!1)},ne=Z=>{if(!Z)return"-";const ke=Math.floor(Z/60),_e=Z%60;return ke>0?`${ke}h ${_e}m`:`${_e}m`},le=Z=>{if(!Z)return"-";const ke=Z.match(/Tempo:\s*(\d+)\s*BPM/i);return ke?`${ke[1]}`:"-"},de=(Z,ke,_e)=>{b({songId:Z,field:ke}),A(String(_e||"")),q(null)},Ae=async(Z,ke)=>{if(S===(Z[ke]||"")){b(null);return}G(!0),q(null);const _e=await J_(Z.id,{[ke]:ke==="duration_minutes"?parseInt(S)||null:S||null});G(!1),_e?(r(Re=>Re.map($e=>$e.id===Z.id?{...$e,..._e}:$e)),b(null)):q("Error al guardar")},Ee=(Z,ke,_e)=>{Z.key==="Enter"?(Z.preventDefault(),Ae(ke,_e)):Z.key==="Escape"&&b(null)};return i?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:d.jsx(JO,{rows:8})})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),d.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:d.jsx(QB,{compact:!0})})]})}),t&&d.jsx("div",{className:"mb-6",children:d.jsx(ZB,{onSpotifyTrackSelect:X,onDeezerTrackSelect:F,onManualAdd:Z=>{Z&&m(ke=>({...ke,title:Z})),l(!0)},className:"w-full"})}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),a&&t&&d.jsxs("form",{onSubmit:z,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Cancin":"Nueva Cancin"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Xn,{label:"Ttulo *",value:p.title,onChange:Z=>m({...p,title:Z.target.value}),required:!0}),d.jsx(Xn,{label:"Artista",value:p.artist,onChange:Z=>m({...p,artist:Z.target.value})}),d.jsx(Xn,{label:"Duracin (minutos)",type:"number",value:p.duration_minutes,onChange:Z=>m({...p,duration_minutes:Z.target.value}),min:"1"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),d.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:Z=>m({...p,key:Z.target.value}),children:t3.map(Z=>d.jsx("option",{value:Z,children:Z||"Sin especificar"},Z))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),d.jsx("textarea",{value:p.notes,onChange:Z=>m({...p,notes:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la cancin..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_t,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),d.jsx(_t,{type:"button",variant:"secondary",onClick:V,children:"Cancelar"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Aade la primera cancin para empezar."}):K.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No se encontraron canciones que coincidan con los filtros aplicados.",d.jsx("button",{onClick:()=>{re(""),R(""),Y("")},className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 underline",children:"Limpiar filtros"})]}):d.jsxs("div",{className:"overflow-x-auto",children:[d.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[d.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando ",K.length," de ",n.length," canciones"]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(iy,{className:"w-3 h-3 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Buscar...",value:M,onChange:Z=>re(Z.target.value),className:"w-20 sm:w-24 px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400 focus:w-28 sm:focus:w-32 transition-all"})]}),d.jsxs("select",{value:ae,onChange:Z=>R(Z.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Clave"}),xe.map(Z=>d.jsx("option",{value:Z,children:Z},Z))]}),d.jsxs("select",{value:U,onChange:Z=>Y(Z.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs focus:outline-none focus:border-blue-400",children:[d.jsx("option",{value:"",children:"Tipo"}),d.jsx("option",{value:"song",children:"Canciones"}),d.jsx("option",{value:"medley",children:"Medleys"})]})]})]})}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ttulo"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duracin"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BPM"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(Z=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(E==null?void 0:E.songId)===Z.id&&E.field==="title"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:ke=>A(ke.target.value),onBlur:()=>Ae(Z,"title"),onKeyDown:ke=>Ee(ke,Z,"title"),disabled:O}):d.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&de(Z.id,"title",Z.title),title:"Haz clic para editar",children:Z.title}),(E==null?void 0:E.songId)===Z.id&&ie&&d.jsx("div",{className:"text-xs text-red-500 mt-1",children:ie})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===Z.id&&E.field==="artist"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:ke=>A(ke.target.value),onBlur:()=>Ae(Z,"artist"),onKeyDown:ke=>Ee(ke,Z,"artist"),disabled:O}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&de(Z.id,"artist",Z.artist||""),title:"Haz clic para editar",children:Z.artist||d.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===Z.id&&E.field==="duration_minutes"?d.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:S,autoFocus:!0,onChange:ke=>A(ke.target.value),onBlur:()=>Ae(Z,"duration_minutes"),onKeyDown:ke=>Ee(ke,Z,"duration_minutes"),disabled:O}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var ke;return t&&de(Z.id,"duration_minutes",((ke=Z.duration_minutes)==null?void 0:ke.toString())||"")},title:"Haz clic para editar",children:ne(Z.duration_minutes)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(E==null?void 0:E.songId)===Z.id&&E.field==="key"?d.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,autoFocus:!0,onChange:ke=>A(ke.target.value),onBlur:()=>Ae(Z,"key"),onKeyDown:ke=>Ee(ke,Z,"key"),disabled:O,children:t3.map(ke=>d.jsx("option",{value:ke,children:ke||"Sin especificar"},ke))}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&de(Z.id,"key",Z.key||""),title:"Haz clic para editar",children:Z.key||d.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:d.jsx("div",{className:"cursor-default",children:le(Z.notes)==="-"?d.jsx("span",{className:"text-gray-400",children:"-"}):d.jsx("span",{className:"font-medium",children:le(Z.notes)})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>oe(Z),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),d.jsx("button",{onClick:()=>Le(Z),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},Z.id))})]})]})}),x&&N&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar la cancin "',N.title,'"? Esta accin no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>{g(!1),j(null)},children:"Cancelar"}),d.jsx(_t,{variant:"danger",onClick:P,children:"Eliminar"})]})]})})]})}var $6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n3=vt.createContext&&vt.createContext($6),tU=["attr","size","title"];function nU(e,t){if(e==null)return{};var n=rU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},og.apply(this,arguments)}function r3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(n),!0).forEach(function(r){iU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iU(e,t,n){return t=sU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sU(e){var t=aU(e,"string");return typeof t=="symbol"?t:t+""}function aU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B6(e){return e&&e.map((t,n)=>vt.createElement(t.tag,lg({key:n},t.attr),B6(t.child)))}function So(e){return t=>vt.createElement(oU,og({attr:lg({},e.attr)},t),B6(e.child))}function oU(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=nU(e,tU),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),vt.createElement("svg",og({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:lg(lg({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&vt.createElement("title",null,s),e.children)};return n3!==void 0?vt.createElement(n3.Consumer,null,n=>t(n)):t($6)}function lU(e){return So({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(e)}function cU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function uU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function dU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function U6(e){return So({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function fU(e){return So({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function hU(e){return So({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function Ny(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function i3(e){return So({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function pU(e){return So({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function mU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Qg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Of(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function tx(e){return"nodeType"in e}function gs(e){var t,n;return e?Of(e)?e:tx(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function nx(e){const{Document:t}=gs(e);return e instanceof t}function $p(e){return Of(e)?!1:e instanceof gs(e).HTMLElement}function z6(e){return e instanceof gs(e).SVGElement}function Rf(e){return e?Of(e)?e.document:tx(e)?nx(e)?e:$p(e)||z6(e)?e.ownerDocument:document:document:document}const wo=Qg?k.useLayoutEffect:k.useEffect;function rx(e){const t=k.useRef(e);return wo(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function gU(){const e=k.useRef(null),t=k.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=k.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function bp(e,t){t===void 0&&(t=[e]);const n=k.useRef(e);return wo(()=>{n.current!==e&&(n.current=e)},t),n}function Bp(e,t){const n=k.useRef();return k.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function cg(e){const t=rx(e),n=k.useRef(null),r=k.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function jy(e){const t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}let Wv={};function Up(e,t){return k.useMemo(()=>{if(t)return t;const n=Wv[e]==null?0:Wv[e]+1;return Wv[e]=n,e+"-"+n},[e,t])}function q6(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[c,f]of l){const p=s[c];p!=null&&(s[c]=p+e*f)}return s},{...t})}}const vf=q6(1),ug=q6(-1);function vU(e){return"clientX"in e&&"clientY"in e}function ix(e){if(!e)return!1;const{KeyboardEvent:t}=gs(e.target);return t&&e instanceof t}function yU(e){if(!e)return!1;const{TouchEvent:t}=gs(e.target);return t&&e instanceof t}function ky(e){if(yU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return vU(e)?{x:e.clientX,y:e.clientY}:null}const _p=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[_p.Translate.toString(e),_p.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),s3="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xU(e){return e.matches(s3)?e:e.querySelector(s3)}const wU={display:"none"};function bU(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:wU},n)}function _U(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function SU(){const[e,t]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const W6=k.createContext(null);function NU(e){const t=k.useContext(W6);k.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function jU(){const[e]=k.useState(()=>new Set),t=k.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[k.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const kU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},EU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function CU(e){let{announcements:t=EU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=kU}=e;const{announce:s,announcement:a}=SU(),l=Up("DndLiveRegion"),[c,f]=k.useState(!1);if(k.useEffect(()=>{f(!0)},[]),NU(k.useMemo(()=>({onDragStart(m){let{active:x}=m;s(t.onDragStart({active:x}))},onDragMove(m){let{active:x,over:g}=m;t.onDragMove&&s(t.onDragMove({active:x,over:g}))},onDragOver(m){let{active:x,over:g}=m;s(t.onDragOver({active:x,over:g}))},onDragEnd(m){let{active:x,over:g}=m;s(t.onDragEnd({active:x,over:g}))},onDragCancel(m){let{active:x,over:g}=m;s(t.onDragCancel({active:x,over:g}))}}),[s,t])),!c)return null;const p=vt.createElement(vt.Fragment,null,vt.createElement(bU,{id:r,value:i.draggable}),vt.createElement(_U,{id:l,announcement:a}));return n?Pu.createPortal(p,n):p}var zr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(zr||(zr={}));function dg(){}function Hv(e,t){return k.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function AU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const $a=Object.freeze({x:0,y:0});function LU(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function PU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function TU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function MU(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function a3(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const DU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=a3(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const f=LU(a3(c),i);s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(PU)};function IU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const c=t.width*t.height,f=e.width*e.height,p=a*l,m=p/(c+f-p);return Number(m.toFixed(4))}return 0}const OU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const c=IU(l,t);c>0&&i.push({id:a,data:{droppableContainer:s,value:c}})}}return i.sort(TU)};function RU(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function H6(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:$a}function FU(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const $U=FU(1);function BU(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function UU(e,t,n){const r=BU(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,c=e.left-a-(1-i)*parseFloat(n),f=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,m=s?e.height/s:e.height;return{width:p,height:m,top:f,right:c+p,bottom:f+m,left:c}}const zU={ignoreTransform:!1};function Ff(e,t){t===void 0&&(t=zU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=gs(e).getComputedStyle(e);f&&(n=UU(n,f,p))}const{top:r,left:i,width:s,height:a,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:c}}function o3(e){return Ff(e,{ignoreTransform:!0})}function qU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function WU(e,t){return t===void 0&&(t=gs(e).getComputedStyle(e)),t.position==="fixed"}function HU(e,t){t===void 0&&(t=gs(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function sx(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(nx(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!$p(i)||z6(i)||n.includes(i))return n;const s=gs(e).getComputedStyle(i);return i!==e&&HU(i,s)&&n.push(i),WU(i,s)?n:r(i.parentNode)}return e?r(e):n}function V6(e){const[t]=sx(e,1);return t??null}function Vv(e){return!Qg||!e?null:Of(e)?e:tx(e)?nx(e)||e===Rf(e).scrollingElement?window:$p(e)?e:null:null}function G6(e){return Of(e)?e.scrollX:e.scrollLeft}function Y6(e){return Of(e)?e.scrollY:e.scrollTop}function Ey(e){return{x:G6(e),y:Y6(e)}}var Qr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Qr||(Qr={}));function K6(e){return!Qg||!e?!1:e===document.scrollingElement}function J6(e){const t={x:0,y:0},n=K6(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const VU={x:.2,y:.2};function GU(e,t,n,r,i){let{top:s,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=VU);const{isTop:f,isBottom:p,isLeft:m,isRight:x}=J6(e),g={x:0,y:0},N={x:0,y:0},j={height:t.height*i.y,width:t.width*i.x};return!f&&s<=t.top+j.height?(g.y=Qr.Backward,N.y=r*Math.abs((t.top+j.height-s)/j.height)):!p&&c>=t.bottom-j.height&&(g.y=Qr.Forward,N.y=r*Math.abs((t.bottom-j.height-c)/j.height)),!x&&l>=t.right-j.width?(g.x=Qr.Forward,N.x=r*Math.abs((t.right-j.width-l)/j.width)):!m&&a<=t.left+j.width&&(g.x=Qr.Backward,N.x=r*Math.abs((t.left+j.width-a)/j.width)),{direction:g,speed:N}}function YU(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function X6(e){return e.reduce((t,n)=>vf(t,Ey(n)),$a)}function KU(e){return e.reduce((t,n)=>t+G6(n),0)}function JU(e){return e.reduce((t,n)=>t+Y6(n),0)}function XU(e,t){if(t===void 0&&(t=Ff),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);V6(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const QU=[["x",["left","right"],KU],["y",["top","bottom"],JU]];class ax{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=sx(n),i=X6(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of QU)for(const c of a)Object.defineProperty(this,c,{get:()=>{const f=l(r),p=i[s]-f;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yh{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ZU(e){const{EventTarget:t}=gs(e);return e instanceof t?e:Rf(e)}function Gv(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ea;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ea||(ea={}));function l3(e){e.preventDefault()}function ez(e){e.stopPropagation()}var Sn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Sn||(Sn={}));const Q6={start:[Sn.Space,Sn.Enter],cancel:[Sn.Esc],end:[Sn.Space,Sn.Enter,Sn.Tab]},tz=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Sn.Right:return{...n,x:n.x+25};case Sn.Left:return{...n,x:n.x-25};case Sn.Down:return{...n,y:n.y+25};case Sn.Up:return{...n,y:n.y-25}}};class ox{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Yh(Rf(n)),this.windowListeners=new Yh(gs(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ea.Resize,this.handleCancel),this.windowListeners.add(ea.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ea.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&XU(r),n($a)}handleKeyDown(t){if(ix(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=Q6,coordinateGetter:a=tz,scrollBehavior:l="smooth"}=i,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:f}=r.current,p=f?{x:f.left,y:f.top}:$a;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(t,{active:n,context:r.current,currentCoordinates:p});if(m){const x=ug(m,p),g={x:0,y:0},{scrollableAncestors:N}=r.current;for(const j of N){const E=t.code,{isTop:b,isRight:S,isLeft:A,isBottom:O,maxScroll:G,minScroll:ie}=J6(j),q=YU(j),M={x:Math.min(E===Sn.Right?q.right-q.width/2:q.right,Math.max(E===Sn.Right?q.left:q.left+q.width/2,m.x)),y:Math.min(E===Sn.Down?q.bottom-q.height/2:q.bottom,Math.max(E===Sn.Down?q.top:q.top+q.height/2,m.y))},re=E===Sn.Right&&!S||E===Sn.Left&&!A,ae=E===Sn.Down&&!O||E===Sn.Up&&!b;if(re&&M.x!==m.x){const R=j.scrollLeft+x.x,U=E===Sn.Right&&R<=G.x||E===Sn.Left&&R>=ie.x;if(U&&!x.y){j.scrollTo({left:R,behavior:l});return}U?g.x=j.scrollLeft-R:g.x=E===Sn.Right?j.scrollLeft-G.x:j.scrollLeft-ie.x,g.x&&j.scrollBy({left:-g.x,behavior:l});break}else if(ae&&M.y!==m.y){const R=j.scrollTop+x.y,U=E===Sn.Down&&R<=G.y||E===Sn.Up&&R>=ie.y;if(U&&!x.x){j.scrollTo({top:R,behavior:l});return}U?g.y=j.scrollTop-R:g.y=E===Sn.Down?j.scrollTop-G.y:j.scrollTop-ie.y,g.y&&j.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,vf(ug(m,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ox.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Q6,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function c3(e){return!!(e&&"distance"in e)}function u3(e){return!!(e&&"delay"in e)}class lx{constructor(t,n,r){var i;r===void 0&&(r=ZU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Rf(a),this.documentListeners=new Yh(this.document),this.listeners=new Yh(r),this.windowListeners=new Yh(gs(a)),this.initialCoordinates=(i=ky(s))!=null?i:$a,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ea.Resize,this.handleCancel),this.windowListeners.add(ea.DragStart,l3),this.windowListeners.add(ea.VisibilityChange,this.handleCancel),this.windowListeners.add(ea.ContextMenu,l3),this.documentListeners.add(ea.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(u3(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(c3(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ea.Click,ez,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ea.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=ky(t))!=null?n:$a,f=ug(i,c);if(!r&&l){if(c3(l)){if(l.tolerance!=null&&Gv(f,l.tolerance))return this.handleCancel();if(Gv(f,l.distance))return this.handleStart()}if(u3(l)&&Gv(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Sn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const nz={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cx extends lx{constructor(t){const{event:n}=t,r=Rf(n.target);super(t,nz,r)}}cx.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const rz={move:{name:"mousemove"},end:{name:"mouseup"}};var Cy;(function(e){e[e.RightClick=2]="RightClick"})(Cy||(Cy={}));class iz extends lx{constructor(t){super(t,rz,Rf(t.event.target))}}iz.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Cy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Yv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Z6 extends lx{constructor(t){super(t,Yv)}static setup(){return window.addEventListener(Yv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Yv.move.name,t)};function t(){}}}Z6.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Kh;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Kh||(Kh={}));var fg;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(fg||(fg={}));function sz(e){let{acceleration:t,activator:n=Kh.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=fg.TreeOrder,pointerCoordinates:c,scrollableAncestors:f,scrollableAncestorRects:p,delta:m,threshold:x}=e;const g=oz({delta:m,disabled:!s}),[N,j]=gU(),E=k.useRef({x:0,y:0}),b=k.useRef({x:0,y:0}),S=k.useMemo(()=>{switch(n){case Kh.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Kh.DraggableRect:return i}},[n,i,c]),A=k.useRef(null),O=k.useCallback(()=>{const ie=A.current;if(!ie)return;const q=E.current.x*b.current.x,M=E.current.y*b.current.y;ie.scrollBy(q,M)},[]),G=k.useMemo(()=>l===fg.TreeOrder?[...f].reverse():f,[l,f]);k.useEffect(()=>{if(!s||!f.length||!S){j();return}for(const ie of G){if((r==null?void 0:r(ie))===!1)continue;const q=f.indexOf(ie),M=p[q];if(!M)continue;const{direction:re,speed:ae}=GU(ie,M,S,t,x);for(const R of["x","y"])g[R][re[R]]||(ae[R]=0,re[R]=0);if(ae.x>0||ae.y>0){j(),A.current=ie,N(O,a),E.current=ae,b.current=re;return}}E.current={x:0,y:0},b.current={x:0,y:0},j()},[t,O,r,j,s,a,JSON.stringify(S),JSON.stringify(g),N,f,G,p,JSON.stringify(x)])}const az={x:{[Qr.Backward]:!1,[Qr.Forward]:!1},y:{[Qr.Backward]:!1,[Qr.Forward]:!1}};function oz(e){let{delta:t,disabled:n}=e;const r=jy(t);return Bp(i=>{if(n||!r||!i)return az;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Qr.Backward]:i.x[Qr.Backward]||s.x===-1,[Qr.Forward]:i.x[Qr.Forward]||s.x===1},y:{[Qr.Backward]:i.y[Qr.Backward]||s.y===-1,[Qr.Forward]:i.y[Qr.Forward]||s.y===1}}},[n,t,r])}function lz(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Bp(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function cz(e,t){return k.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var Sp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Sp||(Sp={}));var Ay;(function(e){e.Optimized="optimized"})(Ay||(Ay={}));const d3=new Map;function uz(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=k.useState(null),{frequency:l,measure:c,strategy:f}=i,p=k.useRef(e),m=E(),x=bp(m),g=k.useCallback(function(b){b===void 0&&(b=[]),!x.current&&a(S=>S===null?b:S.concat(b.filter(A=>!S.includes(A))))},[x]),N=k.useRef(null),j=Bp(b=>{if(m&&!n)return d3;if(!b||b===d3||p.current!==e||s!=null){const S=new Map;for(let A of e){if(!A)continue;if(s&&s.length>0&&!s.includes(A.id)&&A.rect.current){S.set(A.id,A.rect.current);continue}const O=A.node.current,G=O?new ax(c(O),O):null;A.rect.current=G,G&&S.set(A.id,G)}return S}return b},[e,s,n,m,c]);return k.useEffect(()=>{p.current=e},[e]),k.useEffect(()=>{m||g()},[n,m]),k.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),k.useEffect(()=>{m||typeof l!="number"||N.current!==null||(N.current=setTimeout(()=>{g(),N.current=null},l))},[l,m,g,...r]),{droppableRects:j,measureDroppableContainers:g,measuringScheduled:s!=null};function E(){switch(f){case Sp.Always:return!1;case Sp.BeforeDragging:return n;default:return!n}}}function ej(e,t){return Bp(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function dz(e,t){return ej(e,t)}function fz(e){let{callback:t,disabled:n}=e;const r=rx(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Zg(e){let{callback:t,disabled:n}=e;const r=rx(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function hz(e){return new ax(Ff(e),e)}function f3(e,t,n){t===void 0&&(t=hz);const[r,i]=k.useState(null);function s(){i(c=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=c??n)!=null?f:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const a=fz({callback(c){if(e)for(const f of c){const{type:p,target:m}=f;if(p==="childList"&&m instanceof HTMLElement&&m.contains(e)){s();break}}}}),l=Zg({callback:s});return wo(()=>{s(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r}function pz(e){const t=ej(e);return H6(e,t)}const h3=[];function mz(e){const t=k.useRef(e),n=Bp(r=>e?r&&r!==h3&&e&&t.current&&e.parentNode===t.current.parentNode?r:sx(e):h3,[e]);return k.useEffect(()=>{t.current=e},[e]),n}function gz(e){const[t,n]=k.useState(null),r=k.useRef(e),i=k.useCallback(s=>{const a=Vv(s.target);a&&n(l=>l?(l.set(a,Ey(a)),new Map(l)):null)},[]);return k.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(c=>{const f=Vv(c);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Ey(f)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(c=>{const f=Vv(c);f==null||f.removeEventListener("scroll",i)})}},[i,e]),k.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>vf(s,a),$a):X6(e):$a,[e,t])}function p3(e,t){t===void 0&&(t=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},t),k.useEffect(()=>{const r=e!==$a;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?ug(e,n.current):$a}function vz(e){k.useEffect(()=>{if(!Qg)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function yz(e,t){return k.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function tj(e){return k.useMemo(()=>e?qU(e):null,[e])}const m3=[];function xz(e,t){t===void 0&&(t=Ff);const[n]=e,r=tj(n?gs(n):null),[i,s]=k.useState(m3);function a(){s(()=>e.length?e.map(c=>K6(c)?r:new ax(t(c),c)):m3)}const l=Zg({callback:a});return wo(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),i}function wz(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return $p(t)?t:e}function bz(e){let{measure:t}=e;const[n,r]=k.useState(null),i=k.useCallback(f=>{for(const{target:p}of f)if($p(p)){r(m=>{const x=t(p);return m?{...m,width:x.width,height:x.height}:x});break}},[t]),s=Zg({callback:i}),a=k.useCallback(f=>{const p=wz(f);s==null||s.disconnect(),p&&(s==null||s.observe(p)),r(p?t(p):null)},[t,s]),[l,c]=cg(a);return k.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const _z=[{sensor:cx,options:{}},{sensor:ox,options:{}}],Sz={current:{}},b0={draggable:{measure:o3},droppable:{measure:o3,strategy:Sp.WhileDragging,frequency:Ay.Optimized},dragOverlay:{measure:Ff}};class Jh extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Nz={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Jh,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:dg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:b0,measureDroppableContainers:dg,windowRect:null,measuringScheduled:!1},jz={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:dg,draggableNodes:new Map,over:null,measureDroppableContainers:dg},e1=k.createContext(jz),nj=k.createContext(Nz);function kz(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Jh}}}function Ez(e,t){switch(t.type){case zr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case zr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case zr.DragEnd:case zr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case zr.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Jh(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case zr.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Jh(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case zr.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Jh(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Cz(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=k.useContext(e1),s=jy(r),a=jy(n==null?void 0:n.id);return k.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!ix(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:c,node:f}=l;if(!c.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[c.current,f.current]){if(!p)continue;const m=xU(p);if(m){m.focus();break}}})}},[r,t,i,a,s]),null}function Az(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function Lz(e){return k.useMemo(()=>({draggable:{...b0.draggable,...e==null?void 0:e.draggable},droppable:{...b0.droppable,...e==null?void 0:e.droppable},dragOverlay:{...b0.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Pz(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=k.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;wo(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const p=n(f),m=H6(p,r);if(a||(m.x=0),l||(m.y=0),s.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=V6(f);x&&x.scrollBy({top:m.y,left:m.x})}},[t,a,l,r,n])}const rj=k.createContext({...$a,scaleX:1,scaleY:1});var lc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(lc||(lc={}));const Tz=k.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:c=!0,children:f,sensors:p=_z,collisionDetection:m=OU,measuring:x,modifiers:g,...N}=t;const j=k.useReducer(Ez,void 0,kz),[E,b]=j,[S,A]=jU(),[O,G]=k.useState(lc.Uninitialized),ie=O===lc.Initialized,{draggable:{active:q,nodes:M,translate:re},droppable:{containers:ae}}=E,R=q!=null?M.get(q):null,U=k.useRef({initial:null,translated:null}),Y=k.useMemo(()=>{var un;return q!=null?{id:q,data:(un=R==null?void 0:R.data)!=null?un:Sz,rect:U}:null},[q,R]),K=k.useRef(null),[xe,me]=k.useState(null),[X,F]=k.useState(null),z=bp(N,Object.values(N)),oe=Up("DndDescribedBy",a),Le=k.useMemo(()=>ae.getEnabled(),[ae]),P=Lz(x),{droppableRects:V,measureDroppableContainers:ne,measuringScheduled:le}=uz(Le,{dragging:ie,dependencies:[re.x,re.y],config:P.droppable}),de=lz(M,q),Ae=k.useMemo(()=>X?ky(X):null,[X]),Ee=or(),Z=dz(de,P.draggable.measure);Pz({activeNode:q!=null?M.get(q):null,config:Ee.layoutShiftCompensation,initialRect:Z,measure:P.draggable.measure});const ke=f3(de,P.draggable.measure,Z),_e=f3(de?de.parentElement:null),Re=k.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:ae,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),$e=ae.getNodeFor((n=Re.current.over)==null?void 0:n.id),Ge=bz({measure:P.dragOverlay.measure}),fe=(r=Ge.nodeRef.current)!=null?r:de,ee=ie?(i=Ge.rect)!=null?i:ke:null,Xe=!!(Ge.nodeRef.current&&Ge.rect),We=pz(Xe?null:ke),He=tj(fe?gs(fe):null),Ke=mz(ie?$e??de:null),be=xz(Ke),ce=Az(g,{transform:{x:re.x-We.x,y:re.y-We.y,scaleX:1,scaleY:1},activatorEvent:X,active:Y,activeNodeRect:ke,containerNodeRect:_e,draggingNodeRect:ee,over:Re.current.over,overlayNodeRect:Ge.rect,scrollableAncestors:Ke,scrollableAncestorRects:be,windowRect:He}),Ne=Ae?vf(Ae,re):null,he=gz(Ke),ve=p3(he),rt=p3(he,[ke]),ot=vf(ce,ve),it=ee?$U(ee,ce):null,Fe=Y&&it?m({active:Y,collisionRect:it,droppableRects:V,droppableContainers:Le,pointerCoordinates:Ne}):null,st=MU(Fe,"id"),[Ue,Ct]=k.useState(null),ut=Xe?ce:vf(ce,rt),Gt=RU(ut,(s=Ue==null?void 0:Ue.rect)!=null?s:null,ke),jt=k.useRef(null),At=k.useCallback((un,zt)=>{let{sensor:bt,options:qt}=zt;if(K.current==null)return;const wn=M.get(K.current);if(!wn)return;const rn=un.nativeEvent,lr=new bt({active:K.current,activeNode:wn,event:rn,options:qt,context:Re,onAbort(gt){if(!M.get(gt))return;const{onDragAbort:cr}=z.current,Pn={id:gt};cr==null||cr(Pn),S({type:"onDragAbort",event:Pn})},onPending(gt,Zn,cr,Pn){if(!M.get(gt))return;const{onDragPending:Tn}=z.current,er={id:gt,constraint:Zn,initialCoordinates:cr,offset:Pn};Tn==null||Tn(er),S({type:"onDragPending",event:er})},onStart(gt){const Zn=K.current;if(Zn==null)return;const cr=M.get(Zn);if(!cr)return;const{onDragStart:Pn}=z.current,On={activatorEvent:rn,active:{id:Zn,data:cr.data,rect:U}};Pu.unstable_batchedUpdates(()=>{Pn==null||Pn(On),G(lc.Initializing),b({type:zr.DragStart,initialCoordinates:gt,active:Zn}),S({type:"onDragStart",event:On}),me(jt.current),F(rn)})},onMove(gt){b({type:zr.DragMove,coordinates:gt})},onEnd:Rr(zr.DragEnd),onCancel:Rr(zr.DragCancel)});jt.current=lr;function Rr(gt){return async function(){const{active:cr,collisions:Pn,over:On,scrollAdjustedTranslate:Tn}=Re.current;let er=null;if(cr&&Tn){const{cancelDrop:Wi}=z.current;er={activatorEvent:rn,active:cr,collisions:Pn,delta:Tn,over:On},gt===zr.DragEnd&&typeof Wi=="function"&&await Promise.resolve(Wi(er))&&(gt=zr.DragCancel)}K.current=null,Pu.unstable_batchedUpdates(()=>{b({type:gt}),G(lc.Uninitialized),Ct(null),me(null),F(null),jt.current=null;const Wi=gt===zr.DragEnd?"onDragEnd":"onDragCancel";if(er){const Ai=z.current[Wi];Ai==null||Ai(er),S({type:Wi,event:er})}})}}},[M]),mn=k.useCallback((un,zt)=>(bt,qt)=>{const wn=bt.nativeEvent,rn=M.get(qt);if(K.current!==null||!rn||wn.dndKit||wn.defaultPrevented)return;const lr={active:rn};un(bt,zt.options,lr)===!0&&(wn.dndKit={capturedBy:zt.sensor},K.current=qt,At(bt,zt))},[M,At]),Pt=cz(p,mn);vz(p),wo(()=>{ke&&O===lc.Initializing&&G(lc.Initialized)},[ke,O]),k.useEffect(()=>{const{onDragMove:un}=z.current,{active:zt,activatorEvent:bt,collisions:qt,over:wn}=Re.current;if(!zt||!bt)return;const rn={active:zt,activatorEvent:bt,collisions:qt,delta:{x:ot.x,y:ot.y},over:wn};Pu.unstable_batchedUpdates(()=>{un==null||un(rn),S({type:"onDragMove",event:rn})})},[ot.x,ot.y]),k.useEffect(()=>{const{active:un,activatorEvent:zt,collisions:bt,droppableContainers:qt,scrollAdjustedTranslate:wn}=Re.current;if(!un||K.current==null||!zt||!wn)return;const{onDragOver:rn}=z.current,lr=qt.get(st),Rr=lr&&lr.rect.current?{id:lr.id,rect:lr.rect.current,data:lr.data,disabled:lr.disabled}:null,gt={active:un,activatorEvent:zt,collisions:bt,delta:{x:wn.x,y:wn.y},over:Rr};Pu.unstable_batchedUpdates(()=>{Ct(Rr),rn==null||rn(gt),S({type:"onDragOver",event:gt})})},[st]),wo(()=>{Re.current={activatorEvent:X,active:Y,activeNode:de,collisionRect:it,collisions:Fe,droppableRects:V,draggableNodes:M,draggingNode:fe,draggingNodeRect:ee,droppableContainers:ae,over:Ue,scrollableAncestors:Ke,scrollAdjustedTranslate:ot},U.current={initial:ee,translated:it}},[Y,de,Fe,it,M,fe,ee,V,ae,Ue,Ke,ot]),sz({...Ee,delta:re,draggingRect:it,pointerCoordinates:Ne,scrollableAncestors:Ke,scrollableAncestorRects:be});const Qn=k.useMemo(()=>({active:Y,activeNode:de,activeNodeRect:ke,activatorEvent:X,collisions:Fe,containerNodeRect:_e,dragOverlay:Ge,draggableNodes:M,droppableContainers:ae,droppableRects:V,over:Ue,measureDroppableContainers:ne,scrollableAncestors:Ke,scrollableAncestorRects:be,measuringConfiguration:P,measuringScheduled:le,windowRect:He}),[Y,de,ke,X,Fe,_e,Ge,M,ae,V,Ue,ne,Ke,be,P,le,He]),Et=k.useMemo(()=>({activatorEvent:X,activators:Pt,active:Y,activeNodeRect:ke,ariaDescribedById:{draggable:oe},dispatch:b,draggableNodes:M,over:Ue,measureDroppableContainers:ne}),[X,Pt,Y,ke,b,oe,M,Ue,ne]);return vt.createElement(W6.Provider,{value:A},vt.createElement(e1.Provider,{value:Et},vt.createElement(nj.Provider,{value:Qn},vt.createElement(rj.Provider,{value:Gt},f)),vt.createElement(Cz,{disabled:(l==null?void 0:l.restoreFocus)===!1})),vt.createElement(CU,{...l,hiddenTextDescribedById:oe}));function or(){const un=(xe==null?void 0:xe.autoScrollEnabled)===!1,zt=typeof c=="object"?c.enabled===!1:c===!1,bt=ie&&!un&&!zt;return typeof c=="object"?{...c,enabled:bt}:{enabled:bt}}}),Mz=k.createContext(null),g3="button",Dz="Draggable";function Iz(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Up(Dz),{activators:a,activatorEvent:l,active:c,activeNodeRect:f,ariaDescribedById:p,draggableNodes:m,over:x}=k.useContext(e1),{role:g=g3,roleDescription:N="draggable",tabIndex:j=0}=i??{},E=(c==null?void 0:c.id)===t,b=k.useContext(E?rj:Mz),[S,A]=cg(),[O,G]=cg(),ie=yz(a,t),q=bp(n);wo(()=>(m.set(t,{id:t,key:s,node:S,activatorNode:O,data:q}),()=>{const re=m.get(t);re&&re.key===s&&m.delete(t)}),[m,t]);const M=k.useMemo(()=>({role:g,tabIndex:j,"aria-disabled":r,"aria-pressed":E&&g===g3?!0:void 0,"aria-roledescription":N,"aria-describedby":p.draggable}),[r,g,j,E,N,p.draggable]);return{active:c,activatorEvent:l,activeNodeRect:f,attributes:M,isDragging:E,listeners:r?void 0:ie,node:S,over:x,setNodeRef:A,setActivatorNodeRef:G,transform:b}}function Oz(){return k.useContext(nj)}const Rz="Droppable",Fz={timeout:25};function $z(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Up(Rz),{active:a,dispatch:l,over:c,measureDroppableContainers:f}=k.useContext(e1),p=k.useRef({disabled:n}),m=k.useRef(!1),x=k.useRef(null),g=k.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:E}={...Fz,...i},b=bp(j??r),S=k.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(b.current)?b.current:[b.current]),g.current=null},E)},[E]),A=Zg({callback:S,disabled:N||!a}),O=k.useCallback((M,re)=>{A&&(re&&(A.unobserve(re),m.current=!1),M&&A.observe(M))},[A]),[G,ie]=cg(O),q=bp(t);return k.useEffect(()=>{!A||!G.current||(A.disconnect(),m.current=!1,A.observe(G.current))},[G,A]),k.useEffect(()=>(l({type:zr.RegisterDroppable,element:{id:r,key:s,disabled:n,node:G,rect:x,data:q}}),()=>l({type:zr.UnregisterDroppable,key:s,id:r})),[r]),k.useEffect(()=>{n!==p.current.disabled&&(l({type:zr.SetDroppableDisabled,id:r,key:s,disabled:n}),p.current.disabled=n)},[r,s,n,l]),{active:a,rect:x,isOver:(c==null?void 0:c.id)===r,node:G,over:c,setNodeRef:ie}}function ux(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Bz(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function Xm(e){return e!==null&&e>=0}function Uz(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function zz(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const ij=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=ux(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Qm={scaleX:1,scaleY:1},qz=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const f=s[a];return f?{x:0,y:n<a?f.top+f.height-(l.top+l.height):f.top-l.top,...Qm}:null}const c=Wz(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-c,...Qm}:i<n&&i>=a?{x:0,y:l.height+c,...Qm}:{x:0,y:0,...Qm}};function Wz(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const sj="Sortable",aj=vt.createContext({activeIndex:-1,containerId:sj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ij,disabled:{draggable:!1,droppable:!1}});function Hz(e){let{children:t,id:n,items:r,strategy:i=ij,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:f,measureDroppableContainers:p}=Oz(),m=Up(sj,n),x=l.rect!==null,g=k.useMemo(()=>r.map(ie=>typeof ie=="object"&&"id"in ie?ie.id:ie),[r]),N=a!=null,j=a?g.indexOf(a.id):-1,E=f?g.indexOf(f.id):-1,b=k.useRef(g),S=!Uz(g,b.current),A=E!==-1&&j===-1||S,O=zz(s);wo(()=>{S&&N&&p(g)},[S,g,N,p]),k.useEffect(()=>{b.current=g},[g]);const G=k.useMemo(()=>({activeIndex:j,containerId:m,disabled:O,disableTransforms:A,items:g,overIndex:E,useDragOverlay:x,sortedRects:Bz(g,c),strategy:i}),[j,m,O.draggable,O.droppable,A,g,E,c,x,i]);return vt.createElement(aj.Provider,{value:G},t)}const Vz=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return ux(n,r,i).indexOf(t)},Gz=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:c,transition:f}=e;return!f||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===c},Yz={duration:200,easing:"ease"},oj="transform",Kz=_p.Transition.toString({property:oj,duration:0,easing:"linear"}),Jz={roleDescription:"sortable"};function Xz(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=k.useState(null),l=k.useRef(n);return wo(()=>{if(!t&&n!==l.current&&r.current){const c=i.current;if(c){const f=Ff(r.current,{ignoreTransform:!0}),p={x:c.left-f.left,y:c.top-f.top,scaleX:c.width/f.width,scaleY:c.height/f.height};(p.x||p.y)&&a(p)}}n!==l.current&&(l.current=n)},[t,n,r,i]),k.useEffect(()=>{s&&a(null)},[s]),s}function Qz(e){let{animateLayoutChanges:t=Gz,attributes:n,disabled:r,data:i,getNewIndex:s=Vz,id:a,strategy:l,resizeObserverConfig:c,transition:f=Yz}=e;const{items:p,containerId:m,activeIndex:x,disabled:g,disableTransforms:N,sortedRects:j,overIndex:E,useDragOverlay:b,strategy:S}=k.useContext(aj),A=Zz(r,g),O=p.indexOf(a),G=k.useMemo(()=>({sortable:{containerId:m,index:O,items:p},...i}),[m,i,O,p]),ie=k.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:q,node:M,isOver:re,setNodeRef:ae}=$z({id:a,data:G,disabled:A.droppable,resizeObserverConfig:{updateMeasurementsFor:ie,...c}}),{active:R,activatorEvent:U,activeNodeRect:Y,attributes:K,setNodeRef:xe,listeners:me,isDragging:X,over:F,setActivatorNodeRef:z,transform:oe}=Iz({id:a,data:G,attributes:{...Jz,...n},disabled:A.draggable}),Le=mU(ae,xe),P=!!R,V=P&&!N&&Xm(x)&&Xm(E),ne=!b&&X,le=ne&&V?oe:null,Ae=V?le??(l??S)({rects:j,activeNodeRect:Y,activeIndex:x,overIndex:E,index:O}):null,Ee=Xm(x)&&Xm(E)?s({id:a,items:p,activeIndex:x,overIndex:E}):O,Z=R==null?void 0:R.id,ke=k.useRef({activeId:Z,items:p,newIndex:Ee,containerId:m}),_e=p!==ke.current.items,Re=t({active:R,containerId:m,isDragging:X,isSorting:P,id:a,index:O,items:p,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:f,wasDragging:ke.current.activeId!=null}),$e=Xz({disabled:!Re,index:O,node:M,rect:q});return k.useEffect(()=>{P&&ke.current.newIndex!==Ee&&(ke.current.newIndex=Ee),m!==ke.current.containerId&&(ke.current.containerId=m),p!==ke.current.items&&(ke.current.items=p)},[P,Ee,m,p]),k.useEffect(()=>{if(Z===ke.current.activeId)return;if(Z!=null&&ke.current.activeId==null){ke.current.activeId=Z;return}const fe=setTimeout(()=>{ke.current.activeId=Z},50);return()=>clearTimeout(fe)},[Z]),{active:R,activeIndex:x,attributes:K,data:G,rect:q,index:O,newIndex:Ee,items:p,isOver:re,isSorting:P,isDragging:X,listeners:me,node:M,overIndex:E,over:F,setNodeRef:Le,setActivatorNodeRef:z,setDroppableNodeRef:ae,setDraggableNodeRef:xe,transform:$e??Ae,transition:Ge()};function Ge(){if($e||_e&&ke.current.newIndex===O)return Kz;if(!(ne&&!ix(U)||!f)&&(P||Re))return _p.Transition.toString({...f,property:oj})}}function Zz(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}Sn.Down,Sn.Right,Sn.Up,Sn.Left;function eq({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[s,a]=k.useState(""),[l,c]=k.useState([]),[f,p]=k.useState(!1),[m,x]=k.useState(""),g=E=>{c(b=>b.includes(E)?b.filter(S=>S!==E):[...b,E])},N=async()=>{if(l.length<2){Te.error("Selecciona al menos dos canciones para el medley");return}let E=s.trim();if(E||(E=l.map(S=>r.find(A=>A.id===S)).filter(S=>!!S).map(S=>S.title).join(" | ")),!E){Te.error("No se pudo generar el nombre del medley.");return}p(!0);try{const b=await DB(n,E,l);b&&(Te.success("Medley creado con xito"),i(b),j())}catch(b){console.error("Error creating medley:",b),Te.error("Error al crear el medley")}finally{p(!1)}},j=()=>{a(""),c([]),x(""),t()};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(Xn,{label:"Nombre del Medley",value:s,onChange:E=>a(E.target.value),placeholder:"Ej: Medley de Rock Clsico",autoFocus:!0}),d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),d.jsxs("div",{className:"border rounded-md p-2",children:[d.jsx(Xn,{placeholder:"Buscar cancin para aadir...",value:m,onChange:E=>x(E.target.value),className:"mb-2"}),d.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(E=>E.type==="song").filter(E=>{var b;return E.title.toLowerCase().includes(m.toLowerCase())||((b=E.artist)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))}).map(E=>d.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:d.jsx("div",{children:d.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[d.jsx("input",{type:"checkbox",checked:l.includes(E.id),onChange:()=>g(E.id),className:"rounded"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm truncate",children:E.title}),E.artist&&d.jsx("div",{className:"text-xs text-gray-500 truncate",children:E.artist})]})]})})},E.id))})]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:j,disabled:f,children:"Cancelar"}),d.jsx(_t,{variant:"primary",onClick:N,loading:f,disabled:l.length<2,children:"Crear Medley"})]})]})}):null}function tq({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:s,onMedleyDeleted:a}){const[l,c]=k.useState(!1),[f,p]=k.useState(!1),[m,x]=k.useState(e.title),[g,N]=k.useState(!1),[j,E]=k.useState(!1),[b,S]=k.useState(!1),[A,O]=k.useState(""),[G,ie]=k.useState([]);k.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const K=await sg(e.group_id);if(K){const xe=K.filter(me=>{var X;return((X=e.medley_song_ids)==null?void 0:X.includes(me.id))&&me.type==="song"});ie(xe)}}})()},[e.medley_song_ids,e.group_id]);const q=async()=>{if(!m.trim()){Te.error("El nombre del medley es obligatorio");return}E(!0);try{await BB(e.id,{title:m})&&(Te.success("Medley actualizado"),s(e.id,m),p(!1))}catch(Y){console.error("Error al actualizar el medley:",Y),Te.error("Error al actualizar el medley")}finally{E(!1)}},M=async()=>{E(!0);try{await qB(e.id)&&(Te.success("Medley eliminado"),a(e.id))}catch(Y){console.error("Error al eliminar el medley:",Y),Te.error("Error al eliminar el medley")}finally{E(!1),S(!1)}},re=async Y=>{E(!0);try{await zB(e.id,Y)&&(Te.success("Cancin eliminada del medley"),i(e.id,Y),ie(xe=>xe.filter(me=>me.id!==Y)))}catch(K){console.error("Error al eliminar la cancin del medley:",K),Te.error("Error al eliminar la cancin del medley")}finally{E(!1)}},ae=async Y=>{if(!t.find(xe=>xe.id===Y)){Te.error("No se pudo encontrar la cancin seleccionada");return}E(!0);try{const xe=await UB(e.id,Y);if(xe){Te.success("Cancin aadida al medley"),r(e.id,Y),N(!1),O("");const me=await sg(e.group_id);if(me&&xe.medley_song_ids){const X=me.filter(F=>{var z;return((z=xe.medley_song_ids)==null?void 0:z.includes(F.id))&&F.type==="song"});ie(X)}}}catch(xe){console.error("Error al aadir la cancin al medley:",xe),Te.error("Error al aadir la cancin al medley")}finally{E(!1)}},R=e.medley_song_ids?e.medley_song_ids.map(Y=>G.find(K=>K.id===Y)).filter(Boolean):[],U=Array.from(new Map(R.map(Y=>[Y.id,Y])).values());return d.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!l),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(hU,{className:"text-blue-600"}),d.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[d.jsxs("span",{children:[U.length," canciones"]}),l?d.jsx(uU,{}):d.jsx(cU,{})]})]}),l&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:Y=>Y.stopPropagation(),children:[n&&d.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[d.jsxs(_t,{variant:"secondary",onClick:()=>{p(!f),f&&x(e.title)},children:[d.jsx(U6,{className:"mr-1"}),f?"Cancelar":"Renombrar"]}),!f&&d.jsxs(_t,{variant:"danger",onClick:()=>S(!0),loading:j,children:[d.jsx(pU,{className:"mr-1"}),"Eliminar"]})]}),f&&d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[d.jsx(Xn,{value:m,onChange:Y=>x(Y.target.value),placeholder:"Nuevo nombre del medley"}),d.jsx(_t,{onClick:q,loading:j,children:"Guardar"})]}),!f&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),U.length===0?d.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):d.jsx("ul",{className:"space-y-1",children:U.map(Y=>d.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-sm",children:Y.title}),Y.artist&&d.jsx("span",{className:"text-xs text-gray-500 ml-2",children:Y.artist})]}),n&&d.jsx(_t,{variant:"danger",onClick:()=>re(Y.id),loading:j,children:d.jsx(i3,{})})]},Y.id))})]}),n&&d.jsx("div",{className:"mt-3",children:g?d.jsxs("div",{className:"border rounded p-2 bg-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"Aadir cancin:"}),d.jsx(_t,{variant:"secondary",onClick:()=>{N(!1),O("")},children:d.jsx(i3,{})})]}),d.jsx(Xn,{placeholder:"Buscar cancin...",value:A,onChange:Y=>O(Y.target.value),className:"mb-2"}),d.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(Y=>Y.type==="song").filter(Y=>!U.some(K=>K.id===Y.id)).filter(Y=>{var K;return Y.title.toLowerCase().includes(A.toLowerCase())||((K=Y.artist)==null?void 0:K.toLowerCase().includes(A.toLowerCase()))}).map(Y=>d.jsxs("button",{onClick:()=>ae(Y.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:j,children:[d.jsx("div",{className:"font-medium",children:Y.title}),Y.artist&&d.jsx("div",{className:"text-xs text-gray-500",children:Y.artist})]},Y.id)),t.filter(Y=>Y.type==="song"&&!U.some(K=>K.id===Y.id)).length===0&&d.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay ms canciones para aadir."})]})]}):d.jsxs(_t,{variant:"primary",onClick:()=>N(!0),children:[d.jsx(Ny,{className:"mr-1"}),"Aadir Cancin"]})})]})]}),b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>S(!1),children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:Y=>Y.stopPropagation(),children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar el medley "',e.title,'"? Esta accin no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>S(!1),disabled:j,children:"Cancelar"}),d.jsx(_t,{variant:"danger",onClick:M,loading:j,children:j?"Eliminando...":"Eliminar"})]})]})})]})}function nq({isOpen:e,onClose:t,groupId:n,onSetlistCreated:r}){const{isAuthenticated:i}=Fp(),[s,a]=k.useState([]),[l,c]=k.useState(null),[f,p]=k.useState([]),[m,x]=k.useState(!1),[g,N]=k.useState(!1),[j,E]=k.useState(0),[b,S]=k.useState("");k.useEffect(()=>{e&&i&&A()},[e,i]),k.useEffect(()=>{l&&(S(l.name),O(l.id))},[l]);const A=async()=>{x(!0);try{const M=await qn.getUserPlaylists(50);a(M)}catch(M){console.error("Error loading playlists:",M),Te.error("Error al cargar las playlists")}finally{x(!1)}},O=async M=>{x(!0);try{const re=await qn.getPlaylistTracks(M,100);p(re.filter(ae=>ae&&ae.id))}catch(re){console.error("Error loading playlist tracks:",re),Te.error("Error al cargar las canciones de la playlist")}finally{x(!1)}},G=async()=>{if(!(!l||!f.length)){N(!0),E(0);try{const{data:{user:M}}=await et.auth.getUser();if(!M){Te.error("No se pudo obtener la informacin del usuario");return}const re={name:b||l.name,description:`Importado desde Spotify: ${l.name}`,group_id:n,created_by:M.id},ae=await ex(re);if(!ae){Te.error("Error al crear el setlist");return}const R=f.length;let U=0;for(let Y=0;Y<R;Y++){const K=f[Y];E(Math.round((Y+1)/R*100));try{const xe=Math.round(K.duration_ms/6e4),me={title:K.name,artist:K.artists.map(F=>F.name).join(", "),duration_minutes:xe,key:"",notes:`Popularidad: ${K.popularity}% | lbum: ${K.album.name}`,group_id:n,created_by:M.id},X=await w0(me);X&&(await ag(ae.id,X.id,Y+1),U++)}catch(xe){console.error(`Error importing track ${K.name}:`,xe)}}E(100),Te.success(`Setlist "${b}" creado con ${U}/${R} canciones`),r(),t()}catch(M){console.error("Error importing playlist:",M),Te.error("Error al importar la playlist")}finally{N(!1),E(0)}}},ie=M=>{const re=Math.floor(M/6e4),ae=Math.floor(M%6e4/1e3);return`${re}:${ae.toString().padStart(2,"0")}`},q=()=>{const M=f.reduce((U,Y)=>U+Y.duration_ms,0),re=Math.floor(M/6e4),ae=Math.floor(re/60),R=re%60;return ae>0?`${ae}h ${R}m`:`${R}m`};return e?i?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",disabled:g,children:d.jsx(Oa,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-3 sm:p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:l?d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 mb-4 sm:mb-6",children:[d.jsx("button",{onClick:()=>{c(null),p([]),S("")},className:"text-blue-600 hover:text-blue-800 text-sm sm:text-base self-start",disabled:g,children:" Volver a playlists"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold truncate",children:l.name}),l.description&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2",children:l.description})]}),d.jsx("a",{href:l.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 p-1",title:"Abrir en Spotify",children:d.jsx(ny,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),d.jsxs("div",{className:"mb-4 sm:mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del setlist"}),d.jsx("input",{type:"text",value:b,onChange:M=>S(M.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nombre para el nuevo setlist",disabled:g})]}),m?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(ol,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),d.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando canciones..."})]}):d.jsxs("div",{children:[d.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4",children:d.jsx("div",{className:"bg-gray-50 rounded-lg px-3 py-2",children:d.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 font-medium",children:[f.length," canciones  ",q()]})})}),d.jsx("div",{className:"max-h-64 sm:max-h-96 overflow-y-auto border border-gray-200 rounded-lg bg-gray-50",children:f.map((M,re)=>{var ae,R;return d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-white border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",children:[d.jsx("span",{className:"text-xs sm:text-sm text-gray-500 w-6 sm:w-8 text-center",children:re+1}),d.jsx("img",{src:((ae=M.album.images[2])==null?void 0:ae.url)||((R=M.album.images[0])==null?void 0:R.url),alt:M.album.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-xs sm:text-sm text-gray-900 truncate",children:M.name}),d.jsx("p",{className:"text-xs text-gray-600 truncate",children:M.artists.map(U=>U.name).join(", ")})]}),d.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-500 flex-shrink-0",children:[d.jsx(vp,{className:"w-3 h-3 mr-1"}),ie(M.duration_ms)]})]},M.id)})})]})]}):d.jsxs("div",{children:[d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Selecciona una playlist de Spotify para importar como setlist:"}),m?d.jsxs("div",{className:"flex items-center justify-center py-8",children:[d.jsx(ol,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-green-500"}),d.jsx("span",{className:"ml-2 text-sm sm:text-base text-gray-600",children:"Cargando playlists..."})]}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(M=>d.jsx("div",{onClick:()=>c(M),className:"border border-gray-200 rounded-lg p-3 sm:p-4 cursor-pointer hover:border-green-400 hover:bg-green-50 hover:shadow-md transition-all duration-200",children:d.jsxs("div",{className:"flex items-start gap-3",children:[M.images&&M.images.length>0?d.jsx("img",{src:M.images[0].url,alt:M.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded object-cover flex-shrink-0"}):d.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:d.jsx(ei,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-sm sm:text-base text-gray-900 truncate",children:M.name}),M.description&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2",children:M.description}),d.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[M.tracks.total," canciones"]})]})]})},M.id))})]})}),d.jsx("div",{className:"border-t p-3 sm:p-6",children:g?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:["Importando canciones... ",j,"%"]}),d.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:[Math.round(j/100*f.length),"/",f.length]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]}):d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[d.jsx(_t,{variant:"secondary",onClick:t,size:"sm",className:"w-full sm:w-auto",children:"Cancelar"}),l&&f.length>0&&d.jsxs(_t,{variant:"primary",onClick:G,disabled:!b.trim(),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(J0,{className:"w-4 h-4 mr-2"}),d.jsxs("span",{className:"hidden sm:inline",children:["Importar ",f.length," canciones"]}),d.jsxs("span",{className:"sm:hidden",children:["Importar (",f.length,")"]})]})]})})]})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Importar Playlist de Spotify"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-1",children:d.jsx(Oa,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"text-center py-6 sm:py-8",children:[d.jsx(ei,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Necesitas conectar con Spotify para importar playlists"}),d.jsx(_t,{onClick:t,variant:"primary",size:"sm",className:"w-full sm:w-auto",children:"Entendido"})]})]})}):null}const v3={name:"",description:"",estimated_duration_minutes:""};function rq({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:s,onMedleyRenamed:a,onMedleyDeleted:l}){var N,j,E,b;const{attributes:c,listeners:f,setNodeRef:p,transform:m,transition:x}=Qz({id:e.id}),g={transform:_p.Transform.toString(m),transition:x};return d.jsxs("div",{ref:p,style:g,...c,className:"flex items-center gap-2 mb-2",children:[t&&d.jsx("div",{...f,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 py-2 px-2 sm:py-3 sm:px-3 touch-none select-none min-w-[40px] min-h-[40px] sm:min-w-[48px] sm:min-h-[48px] flex items-center justify-center rounded-md hover:bg-gray-100 active:bg-gray-200 transition-colors",role:"button","aria-label":"Arrastrar para reordenar",tabIndex:0,children:d.jsx(fU,{className:"text-lg"})}),d.jsx("div",{className:"flex-grow",children:e.type==="song"?d.jsxs("div",{className:"bg-white p-2 sm:p-3 rounded-md shadow-sm border border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:(N=e.data.song)==null?void 0:N.title}),d.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:[(j=e.data.song)==null?void 0:j.artist," - ",(E=e.data.song)==null?void 0:E.duration_minutes,"m - Tono: ",(b=e.data.song)==null?void 0:b.key]})]}),t&&d.jsx(_t,{variant:"danger",size:"sm",onClick:()=>r(e.data.setlist_id,e.data.song_id),className:"w-full sm:w-auto",children:"Eliminar"})]}):d.jsx(tq,{medley:e.data,availableSongs:n.filter(S=>S.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:s,onMedleyRenamed:a,onMedleyDeleted:l})})]})}function iq({groupId:e,canManageSetlists:t=!0}){const[n,r]=k.useState([]),[i,s]=k.useState([]),[a,l]=k.useState(!0),[c,f]=k.useState(!1),[p,m]=k.useState(null),[x,g]=k.useState(null),[N,j]=k.useState(v3),[E,b]=k.useState(!1),[S,A]=k.useState(null),[O,G]=k.useState(!1),[ie,q]=k.useState(null),[M,re]=k.useState(""),[ae,R]=k.useState(""),[U,Y]=k.useState(!1),[K,xe]=k.useState(!1),{isAuthenticated:me,createPlaylistFromSetlist:X,searchTracks:F}=Fp();k.useState(null),k.useState("");const[z,oe]=k.useState([]),Le=AU(Hv(cx,{activationConstraint:{distance:8}}),Hv(Z6,{activationConstraint:{delay:200,tolerance:5}}),Hv(ox,{coordinateGetter:(be,{context:{active:ce,droppableRects:Ne,droppableContainers:he,collisionRect:ve}})=>null}));k.useEffect(()=>{P()},[e]),wp({table:"setlists",filter:`group_id=eq.${e}`,onInsert:be=>{r(ce=>[...ce,{...be.new,songs:[]}]),Te.success("Nuevo setlist aadido en tiempo real")},onUpdate:be=>{const ce=be.new;r(Ne=>Ne.map(he=>he.id===ce.id?{...he,...ce}:he)),(x==null?void 0:x.id)===ce.id&&g(Ne=>Ne?{...Ne,...ce}:null)},onDelete:be=>{r(ce=>ce.filter(Ne=>Ne.id!==be.old.id)),(x==null?void 0:x.id)===be.old.id&&g(null),Te.success("Setlist eliminado en tiempo real")},enabled:!!e}),wp({table:"setlist_songs",onInsert:be=>{const ce=be.new;(x==null?void 0:x.id)===ce.setlist_id&&V()},onUpdate:be=>{const ce=be.new;(x==null?void 0:x.id)===ce.setlist_id&&V()},onDelete:be=>{const ce=be.old;(x==null?void 0:x.id)===ce.setlist_id&&V()},enabled:!!x}),k.useEffect(()=>{if(x){const be=[];x.songs&&x.songs.forEach(he=>{var rt,ot,it,Fe;const ve=((rt=he.song)==null?void 0:rt.type)==="medley";ve&&console.log("Processing medley item:",{songId:he.id,songSongId:(ot=he.song)==null?void 0:ot.id,songTitle:(it=he.song)==null?void 0:it.title,songType:(Fe=he.song)==null?void 0:Fe.type,position:he.position}),he.id?be.push({id:he.id,type:ve?"medley":"song",position:he.position,data:ve?he.song:he}):console.error("Song with undefined ID found:",he)}),x.medleys&&x.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",x.medleys),console.warn('All medleys should be in the songs table with type="medley"')),be.sort((he,ve)=>he.position-ve.position);const ce=be.map(he=>he.id),Ne=ce.filter((he,ve)=>ce.indexOf(he)!==ve);Ne.length>0&&(console.error("Duplicate IDs found in setlistItems:",Ne),console.error("All items:",be),console.error("selectedSetlist.songs:",x.songs),console.error("selectedSetlist.medleys:",x.medleys)),console.log("All setlistItems:",be.map(he=>({id:he.id,type:he.type,position:he.position}))),oe(be)}else oe([])},[x]);const P=async()=>{l(!0);const[be,ce]=await Promise.all([Sy(e),sg(e)]);return be&&r(be),ce&&s(ce),l(!1),be},V=async()=>{const be=await P();if(be&&x){const ce=be.find(Ne=>Ne.id===x.id);if(ce){const Ne={...ce,songs:(ce.songs||[]).sort((he,ve)=>he.position-ve.position),medleys:(ce.medleys||[]).sort((he,ve)=>he.position-ve.position)};g(Ne)}else g(null)}},ne=async be=>{if(be.preventDefault(),!N.name.trim()){Te.error("El nombre es obligatorio");return}const{data:{user:ce}}=await et.auth.getUser();if(!ce){Te.error("No se pudo obtener la informacin del usuario");return}const Ne={group_id:e,name:N.name.trim(),description:N.description.trim()||void 0,estimated_duration_minutes:N.estimated_duration_minutes?parseInt(N.estimated_duration_minutes):void 0,created_by:ce.id};if(p){const he=await OB(p.id,Ne);he&&(Te.success("Setlist actualizado correctamente"),r(ve=>ve.map(rt=>rt.id===p.id?{...rt,...he}:rt)),(x==null?void 0:x.id)===p.id&&g(ve=>ve?{...ve,...he}:null))}else{const he=await ex({...Ne,name:Ne.name});he&&(Te.success("Setlist creado correctamente"),r(ve=>[...ve,{...he,songs:[]}]))}_e()},le=be=>{var ce;m(be),j({name:be.name,description:be.description||"",estimated_duration_minutes:((ce=be.estimated_duration_minutes)==null?void 0:ce.toString())||""}),f(!0)},de=be=>{A(be),b(!0)},Ae=async()=>{if(!S)return;await RB(S.id)?(Te.success("Setlist eliminado correctamente"),r(ce=>ce.filter(Ne=>Ne.id!==S.id)),(x==null?void 0:x.id)===S.id&&g(null)):Te.error("No se pudo eliminar el setlist"),b(!1),A(null)},Ee=async(be,ce)=>{if(!x)return;const he=(x.songs&&x.songs.length>0?Math.max(...x.songs.map(rt=>rt.position)):0)+1,ve=await ag(be,ce,he);if(ve){Te.success("Cancin aadida al setlist");const rt=i.find(ot=>ot.id===ce);if(rt){const ot={...ve,position:he,song:rt},it={...x,songs:[...x.songs||[],ot]};g(it),r(Fe=>Fe.map(st=>st.id===be?it:st))}}else console.error("No se pudo aadir la cancin al setlist")},Z=async(be,ce)=>{var he;if(await FB(be,ce)){Te.success("Cancin eliminada del setlist");const ve=x?{...x,songs:(he=x.songs)==null?void 0:he.filter(rt=>rt.song_id!==ce)}:null;ve&&(g(ve),r(rt=>rt.map(ot=>ot.id===ve.id?ve:ot)))}else Te.error("No se pudo eliminar la cancin del setlist")},ke=be=>{const{active:ce,over:Ne}=be;if(!Ne||ce.id===Ne.id||!x)return;const he=z.findIndex(Ue=>Ue.id===ce.id),ve=z.findIndex(Ue=>Ue.id===Ne.id),ot=ux(z,he,ve).map((Ue,Ct)=>({id:Ue.id,type:Ue.type,position:Ct+1})),it=ot.map(Ue=>{var ut;return{...(ut=x.songs)==null?void 0:ut.find(Gt=>Gt.id===Ue.id),position:Ue.position}}),Fe={...x,songs:it};g(Fe),r(Ue=>Ue.map(Ct=>Ct.id===Fe.id?Fe:Ct)),console.log("Reordering items:",ot);const st=ot.map(Ue=>({songId:Ue.id,position:Ue.position}));$B(x.id,st).then(Ue=>{Ue?console.log("Reorder successful"):(Te.error("No se pudo guardar el orden. Se revertirn los cambios."),P())})},_e=()=>{j(v3),m(null),f(!1)},Re=be=>{if(!i)return[];const ce=new Set((be.songs||[]).map(Ne=>Ne.song_id));return i.filter(Ne=>!ce.has(Ne.id))},$e=be=>{const ce=n.find(Ne=>Ne.id===be.id);g(ce||null)},Ge=(be,ce,Ne)=>{if(!x)return;const he={...Ne,song:ce},ve={...x,medleys:(x.medleys||[]).map(rt=>rt.id===be?{...rt,songs:[...rt.songs||[],he].sort((ot,it)=>ot.position-it.position)}:rt)};g(ve),r(rt=>rt.map(ot=>ot.id===ve.id?ve:ot))},fe=(be,ce)=>{if(!x)return;const Ne={...x,medleys:(x.medleys||[]).map(he=>he.id===be?{...he,songs:(he.songs||[]).filter(ve=>ve.song_id!==ce)}:he)};g(Ne),r(he=>he.map(ve=>ve.id===Ne.id?Ne:ve))},ee=(be,ce)=>{if(!x)return;const Ne={...x,medleys:(x.medleys||[]).map(he=>he.id===be?{...he,name:ce}:he)};g(Ne),r(he=>he.map(ve=>ve.id===Ne.id?Ne:ve))},Xe=be=>{if(!x)return;const ce={...x,medleys:(x.medleys||[]).filter(Ne=>Ne.id!==be)};g(ce),r(Ne=>Ne.map(he=>he.id===ce.id?ce:he))},We=async be=>{if(!x)return;const Ne=(x.songs&&x.songs.length>0?Math.max(...x.songs.map(ve=>ve.position)):0)+1;if(await ag(x.id,be.id,Ne)){Te.success("Medley creado y aadido al setlist"),await P();const ve=await Sy(e);if(ve){const rt=ve.find(ot=>ot.id===x.id);rt&&g(rt)}}else Te.error("Medley creado pero no se pudo aadir al setlist")},He=be=>{q(be),re(`${be.name} (copia)`),G(!0)},Ke=async()=>{if(!ie||!M.trim())return;l(!0),G(!1),await WB(ie.id,M.trim())?(Te.success("Setlist duplicado correctamente"),await P()):Te.error("No se pudo duplicar el setlist"),q(null),re(""),l(!1)};return a?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"h-8 w-40 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx(GN,{count:4})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_t,{onClick:()=>f(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"}),d.jsxs(_t,{onClick:()=>xe(!0),variant:"secondary",className:`${me?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,title:me?"Importar playlist desde Spotify":"Conecta con Spotify para importar playlists",children:[d.jsx(lU,{className:"mr-2"}),"Importar de Spotify",!me&&d.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Conectar)"})]})]})]}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&d.jsxs("form",{onSubmit:ne,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(Xn,{label:"Nombre *",value:N.name,onChange:be=>j({...N,name:be.target.value}),required:!0}),d.jsx(Xn,{label:"Duracin estimada (minutos)",type:"number",value:N.estimated_duration_minutes,onChange:be=>j({...N,estimated_duration_minutes:be.target.value}),min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),d.jsx("textarea",{value:N.description,onChange:be=>j({...N,description:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripcin breve del setlist..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(_t,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),d.jsx(_t,{type:"button",variant:"secondary",onClick:_e,children:"Cancelar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3 lg:hidden",children:"Setlists"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-3",children:n.map(be=>{var ce,Ne;return d.jsxs("div",{className:`p-3 sm:p-4 rounded-lg cursor-pointer transition-all ${(x==null?void 0:x.id)===be.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>$e(be),children:[d.jsx("h4",{className:`font-bold text-sm sm:text-base truncate ${(x==null?void 0:x.id)===be.id?"text-white":"text-gray-800"}`,children:be.name}),d.jsxs("p",{className:`text-xs sm:text-sm ${(x==null?void 0:x.id)===be.id?"text-blue-100":"text-gray-500"}`,children:[(((ce=be.songs)==null?void 0:ce.length)||0)+(((Ne=be.medleys)==null?void 0:Ne.length)||0)," items"]})]},be.id)})}),n.length===0&&!a&&d.jsx("p",{className:"text-center text-gray-500 py-4 text-sm",children:"No hay setlists. Crea el primero!"})]}),d.jsx("div",{className:"lg:col-span-2",children:x?d.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4 gap-3 sm:gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 truncate",children:x.name}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:x.description})]}),t&&d.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 w-full sm:w-auto lg:flex-nowrap",children:[d.jsxs(_t,{variant:"primary",onClick:()=>Y(!0),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(Ny,{className:"mr-1"}),d.jsx("span",{className:"hidden sm:inline",children:"Crear Medley"}),d.jsx("span",{className:"sm:hidden",children:"Medley"})]}),d.jsxs(_t,{variant:"secondary",onClick:()=>le(x),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(U6,{className:"mr-2"})," Editar"]}),d.jsxs(_t,{variant:"secondary",onClick:()=>He(x),size:"sm",className:"w-full sm:w-auto",children:[d.jsx(dU,{className:"mr-2"})," Duplicar"]}),d.jsx(_t,{variant:"danger",onClick:()=>de(x),size:"sm",className:"w-full sm:w-auto",children:"Eliminar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6 xl:gap-8",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Canciones en el Setlist"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Tz,{sensors:Le,collisionDetection:DU,onDragEnd:ke,children:d.jsx(Hz,{items:z.map(be=>be.id),strategy:qz,children:z.map((be,ce)=>d.jsx(rq,{item:be,canManageSetlists:t,songs:i,onRemoveSong:Z,onSongAddedToMedley:Ge,onSongRemovedFromMedley:fe,onMedleyRenamed:ee,onMedleyDeleted:Xe},`${be.type}-${be.id}-${ce}`))})}),z.length===0&&d.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist est vaco."})]})]}),t&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-sm sm:text-base",children:"Aadir Cancin al Setlist"}),d.jsx(Xn,{placeholder:"Buscar cancin...",value:ae,onChange:be=>R(be.target.value),className:"mb-2"}),d.jsxs("div",{className:"space-y-2 max-h-48 sm:max-h-60 lg:max-h-80 overflow-y-auto pr-1 sm:pr-2",children:[Re(x).filter(be=>{var ce;return be.title.toLowerCase().includes(ae.toLowerCase())||((ce=be.artist)==null?void 0:ce.toLowerCase().includes(ae.toLowerCase()))}).map(be=>d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded-md gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("p",{className:"font-medium text-xs sm:text-sm truncate",children:[be.type==="medley"&&d.jsx("span",{className:"text-blue-600 mr-1",children:""}),be.title]}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:be.type==="medley"?"Medley":be.artist})]}),d.jsx(_t,{onClick:()=>Ee(x.id,be.id),size:"sm",className:"w-full sm:w-auto",children:d.jsx(Ny,{})})]},be.id)),Re(x).length===0&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya estn en este setlist."})]})]})]})]}):d.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 bg-white rounded-lg",children:d.jsx("p",{className:"text-sm sm:text-base",children:"Selecciona un setlist para ver los detalles"})})})]}),E&&S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),d.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar el setlist "',S.name,'"? Esta accin no se puede deshacer.']}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>{b(!1),A(null)},fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Cancelar"}),d.jsx(_t,{variant:"danger",onClick:Ae,fullWidth:!0,className:"sm:w-auto",size:"sm",children:"Eliminar"})]})]})}),O&&ie&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),d.jsx(Xn,{value:M,onChange:be=>re(be.target.value),className:"mb-6",autoFocus:!0}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(_t,{variant:"secondary",onClick:()=>{G(!1),q(null),re("")},children:"Cancelar"}),d.jsx(_t,{variant:"primary",onClick:Ke,disabled:!M.trim(),children:"Duplicar"})]})]})}),U&&x&&d.jsx(eq,{isOpen:U,onClose:()=>Y(!1),groupId:e,availableSongs:Re(x),onMedleyCreated:be=>{We(be),Y(!1)}}),K&&d.jsx(nq,{isOpen:K,onClose:()=>xe(!1),groupId:e,onSetlistCreated:()=>{P(),xe(!1)}})]})}function sq({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0,defaultTab:r="songs"}){const[i,s]=k.useState(r);return k.useEffect(()=>{s(r)},[r]),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[d.jsx("button",{onClick:()=>s("songs"),className:`${i==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),d.jsx("button",{onClick:()=>s("setlists"),className:`${i==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),d.jsxs("div",{className:"p-6",children:[i==="songs"&&d.jsx(eU,{groupId:e,canManageSongs:t}),i==="setlists"&&d.jsx(iq,{groupId:e,canManageSetlists:n})]})]})})}function aq({groupId:e,members:t}){const[n,r]=k.useState([]),[i,s]=k.useState([]),[a,l]=k.useState(!0);k.useEffect(()=>{c()},[e]);const c=async()=>{l(!0);try{const N=t.map(O=>O.user_id).filter(Boolean),{data:j,error:E}=await et.from("member_availability").select("*").in("user_id",N).gte("date",Kt(Vm(new Date,6),"yyyy-MM-dd"));if(E)throw E;const b=(j==null?void 0:j.map(O=>{const G=t.find(ie=>ie.user_id===O.user_id);return{...O,member_name:(G==null?void 0:G.name)||"Unknown"}}))||[];r(b);const{data:S,error:A}=await et.from("events").select(`
          *,
          event_members (
            group_member_id,
            user_id
          )
        `).eq("group_id",e).order("date",{ascending:!1});if(A)throw A;s(S||[])}catch(N){console.error("Error fetching statistics data:",N)}finally{l(!1)}},f=k.useMemo(()=>{const N=new Date,j=new Map;n.forEach(q=>{const M=q.member_name||"Unknown";j.set(M,(j.get(M)||0)+1)});const E=n.length,b=t.length>0?E/t.length:0;let S="N/A",A="N/A",O=0,G=1/0;if(j.size>0)for(const[q,M]of j.entries())M>O&&(O=M,S=q),M<G&&(G=M,A=q);const ie=n.filter(q=>ff(new Date(q.date),N)).length;return{totalAvailableDays:E,averageAvailabilityPerMember:b,mostAvailableMember:S,leastAvailableMember:A,upcomingAvailableDays:ie}},[n,t]),p=k.useMemo(()=>{const N=new Date,j=di(N),E=Ef(N),b=di(Vm(N,1)),S=Ef(Vm(N,1)),A=i.length,O=i.filter(Y=>ff(new Date(Y.date),N)).length,G=i.filter(Y=>{const K=new Date(Y.date);return K>=j&&K<=E}).length,ie=i.filter(Y=>{const K=new Date(Y.date);return K>=b&&K<=S}).length,q=Vm(N,6),re=`${(i.filter(Y=>ff(new Date(Y.date),q)).length/6).toFixed(1)} eventos/mes`,ae=new Map;i.forEach(Y=>{const K=Y.location||"Sin ubicacin";ae.set(K,(ae.get(K)||0)+1)});let R="N/A",U=0;for(const[Y,K]of ae.entries())K>U&&(U=K,R=Y);return{totalEvents:A,upcomingEvents:O,averageEventFrequency:re,mostCommonLocation:R,eventsThisMonth:G,eventsLastMonth:ie}},[i]),m=k.useMemo(()=>{const N=new Map;return t.forEach(j=>{const E=n.filter(b=>b.member_name===j.name).length;N.set(j.name,E)}),Array.from(N.entries()).sort((j,E)=>E[1]-j[1]).slice(0,10)},[t,n]),x=k.useMemo(()=>{const N=new Map;return t.forEach(j=>{N.set(j.name,0)}),i.forEach(j=>{j.event_members&&j.event_members.length>0&&j.event_members.forEach(E=>{const b=t.find(S=>S.id===E.group_member_id);if(b){const S=N.get(b.name)||0;N.set(b.name,S+1)}})}),Array.from(N.entries()).sort((j,E)=>E[1]-j[1]).slice(0,10)},[t,i]);if(a)return d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((N,j)=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("div",{className:"h-6 w-24 bg-gray-200 animate-pulse rounded mb-2"}),d.jsx("div",{className:"h-8 w-16 bg-gray-200 animate-pulse rounded"})]},j))}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded mb-4"}),d.jsx("div",{className:"space-y-3",children:[...Array(5)].map((N,j)=>d.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"},j))})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded mb-4"}),d.jsx("div",{className:"space-y-3",children:[...Array(5)].map((N,j)=>d.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"},j))})]})]})]});const g=({icon:N,title:j,value:E,subtitle:b,color:S="indigo"})=>d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`p-2 rounded-lg bg-${S}-100`,children:d.jsx(N,{className:`w-6 h-6 text-${S}-600`})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:j}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E}),b&&d.jsx("p",{className:"text-sm text-gray-500",children:b})]})]})});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(g,{icon:Iu,title:"Miembros Activos",value:t.length,color:"blue"}),d.jsx(g,{icon:vc,title:"Das Disponibles",value:f.upcomingAvailableDays,subtitle:"prximos",color:"green"}),d.jsx(g,{icon:_N,title:"Eventos Prximos",value:p.upcomingEvents,color:"purple"}),d.jsx(g,{icon:vp,title:"Eventos Este Mes",value:p.eventsThisMonth,subtitle:`vs ${p.eventsLastMonth} el mes pasado`,color:"orange"})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(vc,{className:"w-5 h-5 text-indigo-600 mr-2"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estadsticas de Disponibilidad"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Total das marcados:"}),d.jsx("span",{className:"font-medium",children:f.totalAvailableDays})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Promedio por miembro:"}),d.jsxs("span",{className:"font-medium",children:[f.averageAvailabilityPerMember.toFixed(1)," das"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Ms disponible:"}),d.jsx("span",{className:"font-medium text-green-600",children:f.mostAvailableMember})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Menos disponible:"}),d.jsx("span",{className:"font-medium text-orange-600",children:f.leastAvailableMember})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(wN,{className:"w-5 h-5 text-indigo-600 mr-2"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estadsticas de Eventos"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Total eventos:"}),d.jsx("span",{className:"font-medium",children:p.totalEvents})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Frecuencia promedio:"}),d.jsx("span",{className:"font-medium",children:p.averageEventFrequency})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Ubicacin ms comn:"}),d.jsxs("span",{className:"font-medium flex items-center",children:[d.jsx(Wh,{className:"w-4 h-4 mr-1"}),p.mostCommonLocation]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Tendencia mensual:"}),d.jsxs("span",{className:`font-medium ${p.eventsThisMonth>=p.eventsLastMonth?"text-green-600":"text-red-600"}`,children:[p.eventsThisMonth>=p.eventsLastMonth?"":"",p.eventsThisMonth>=p.eventsLastMonth?" Creciente":" Decreciente"]})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(vc,{className:"w-5 h-5 text-indigo-600 mr-2"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Disponibilidad por Miembro"}),d.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"(ltimos 6 meses)"})]}),m.length>0?d.jsx("div",{className:"space-y-3",children:m.map(([N,j],E)=>{const b=Math.max(...m.map(([,A])=>A)),S=b>0?j/b*100:0;return d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-24 text-sm text-gray-600 truncate",title:N,children:N}),d.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:`h-2 rounded-full ${E===0?"bg-green-500":E===1?"bg-blue-500":E===2?"bg-purple-500":"bg-gray-400"}`,style:{width:`${S}%`}})}),d.jsxs("div",{className:"text-sm font-medium text-gray-700 w-12 text-right",children:[j," das"]})]},N)})}):d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(vc,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay datos de disponibilidad"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(Iu,{className:"w-5 h-5 text-purple-600 mr-2"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Participacin en Eventos"}),d.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"(todos los eventos)"})]}),x.length>0?d.jsx("div",{className:"space-y-3",children:x.map(([N,j],E)=>{const b=Math.max(...x.map(([,A])=>A)),S=b>0?j/b*100:0;return d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-24 text-sm text-gray-600 truncate",title:N,children:N}),d.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:`h-2 rounded-full ${E===0?"bg-purple-500":E===1?"bg-pink-500":E===2?"bg-orange-500":"bg-gray-400"}`,style:{width:`${S}%`}})}),d.jsxs("div",{className:"text-sm font-medium text-gray-700 w-16 text-right",children:[j," evento",j!==1?"s":""]})]},N)})}):d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Iu,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay datos de eventos disponibles"})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen de Actividad Reciente"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[d.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[d.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.upcomingAvailableDays}),d.jsx("div",{className:"text-sm text-green-700",children:"Das disponibles prximos"})]}),d.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.upcomingEvents}),d.jsx("div",{className:"text-sm text-blue-700",children:"Eventos programados"})]}),d.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[d.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.length}),d.jsx("div",{className:"text-sm text-purple-700",children:"Miembros en el grupo"})]})]})]})]})}function Zm({defaultTab:e}){const{id:t}=FS(),n=ca(),r=la(),[i,s]=k.useState(null),[a,l]=k.useState([]),[c,f]=k.useState([]),[p,m]=k.useState(!1),[x,g]=k.useState(!1),[N,j]=k.useState(!1),[E,b]=k.useState(null),[S,A]=k.useState(null),[O,G]=k.useState(!0),[ie,q]=k.useState(!1),[M,re]=k.useState(null),[ae,R]=k.useState(!1),[U,Y]=k.useState([]),{user:K}=Zr(),[xe,me]=k.useState(!1),[X,F]=k.useState(!1),[z,oe]=k.useState(""),Le=()=>e||(r.pathname.endsWith("/songs")?"songs":r.pathname.endsWith("/setlists")?"setlists":r.pathname.endsWith("/statistics")?"statistics":"overview"),[P,V]=k.useState(Le()),ne=fe=>{switch(V(fe),fe){case"songs":n(`/group/${t}/songs`);break;case"setlists":n(`/group/${t}/setlists`);break;case"statistics":n(`/group/${t}/statistics`);break;case"overview":default:n(`/group/${t}`);break}};k.useEffect(()=>{V(Le())},[r.pathname,r.search,e]),k.useEffect(()=>{t&&de()},[t,K]),k.useEffect(()=>{t&&K&&le()},[t,K,a]),wp({table:"group_members",filter:`group_id=eq.${t}`,onInsert:()=>{de(),Te.success("Nuevo miembro aadido en tiempo real")},onUpdate:()=>{de()},onDelete:()=>{de(),Te.success("Miembro eliminado en tiempo real")},enabled:!!t});const le=async()=>{if(K)try{const fe=await Wn(()=>et.from("users").select("role").eq("id",K.id).single(),"Error checking permissions");fe&&(re(fe.role),q(fe.role==="admin"));const ee=a.find(Xe=>Xe.user_id===K.id);me(!!ee),R((ee==null?void 0:ee.role_in_group)==="principal"||!1),(ee==null?void 0:ee.role_in_group)==="principal"&&q(!0)}catch(fe){console.error("Error checking permissions:",fe)}},de=async()=>{try{const fe=await Wn(()=>et.from("groups").select("*").eq("id",t).single(),"Error loading group");fe&&s(fe);const ee=await Wn(()=>et.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",t).order("member_type",{ascending:!0}).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(ee){const We=ee.map(He=>({...He,instruments:(He.group_member_roles||[]).filter(Ke=>Ke==null?void 0:Ke.role).map(Ke=>({id:Ke.role.id,name:Ke.role.name}))}));l(We)}const Xe=await Wn(()=>et.from("roles").select("*").eq("group_id",t).order("name"),"Error loading roles");Xe&&f(Xe)}catch(fe){console.error("Error fetching group data:",fe)}finally{G(!1)}},Ae=async fe=>{if(!(!K||!t))try{await Wn(()=>et.rpc("link_group_member",{p_member_id:fe,p_user_id:K.id,p_group_id:t}),"Error linking member"),Te.success("Te has vinculado correctamente!"),await de(),await le()}catch(ee){console.error("Error linking member:",ee)}},Ee=fe=>{b(fe),g(!0)},Z=fe=>{A(fe),j(!0)},ke=async()=>{if(S)try{await Wn(()=>et.from("group_members").delete().eq("id",S.id),"Error deleting member"),Te.success("Miembro eliminado correctamente"),j(!1),A(null),de()}catch(fe){console.error("Error deleting member:",fe)}},_e=a.filter(fe=>fe.role_in_group==="principal"),Re=a.filter(fe=>fe.role_in_group==="sustituto"),$e=(fe,ee)=>d.jsxs("div",{children:[d.jsx("div",{className:"bg-gray-50 px-3 py-2",children:d.jsx("h3",{className:"text-sm font-medium text-gray-700",children:ee})}),d.jsx("div",{className:"divide-y",children:fe.map(Xe=>d.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base",children:Xe.name}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Xe.member_type==="local"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:Xe.member_type==="local"?" Local":Xe.member_type==="registered"?" Registrado":" Miembro"}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Xe.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:Xe.role_in_group==="principal"?"Principal":"Sustituto"}),(!Xe.member_type||Xe.member_type==="registered")&&!Xe.user_id&&d.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),(!Xe.member_type||Xe.member_type==="registered")&&Xe.email&&d.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[" ",Xe.email]}),Xe.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Xe.instruments.map((We,He)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[d.jsx(ei,{className:"w-3 h-3 mr-1"}),We.name]},`${Xe.id}-${We.id}-${He}`))}),Xe.user_id===(K==null?void 0:K.id)&&d.jsx("div",{className:"mt-2 flex items-center",children:d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:Xe.sync_calendar,onChange:async()=>{try{await Wn(()=>et.from("group_members").update({sync_calendar:!Xe.sync_calendar}).eq("id",Xe.id),"Error actualizando preferencias de calendario"),Te.success("Preferencias de calendario actualizadas"),de()}catch(We){console.error("Error updating calendar preferences:",We)}},className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),Xe.user_id===(K==null?void 0:K.id)&&Xe.sync_calendar&&d.jsxs("button",{onClick:()=>Ge(Xe.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[d.jsx(vc,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripcin al calendario"]})]}),d.jsxs("div",{className:"flex items-center gap-2 ml-2 sm:ml-4",children:[(M==="admin"||Xe.user_id===(K==null?void 0:K.id))&&d.jsx("button",{onClick:()=>Ee(Xe),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:d.jsx(bN,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),(M==="admin"||ae)&&d.jsx("button",{onClick:()=>Z(Xe),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:d.jsx(M5,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),!Xe.user_id&&!xe&&d.jsxs(_t,{onClick:()=>Ae(Xe.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[d.jsx(c_,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},Xe.id))})]}),Ge=async fe=>{try{const{data:ee,error:Xe}=await et.rpc("get_group_calendar",{p_group_id:i==null?void 0:i.id,p_member_id:fe});if(Xe)throw Xe;if(!ee)throw new Error("No se pudo generar el calendario");const We=new Blob([ee],{type:"text/calendar"}),He=new File([We],"calendar.ics",{type:"text/calendar"}),{error:Ke}=await et.storage.from("calendars").upload(`${i==null?void 0:i.id}/${fe}/calendar.ics`,He,{cacheControl:"0",upsert:!0});if(Ke)throw Ke;const{data:{publicUrl:be}}=await et.storage.from("calendars").getPublicUrl(`${i==null?void 0:i.id}/${fe}/calendar.ics`);if(be)oe(be),F(!0);else throw new Error("No se pudo generar el enlace pblico")}catch(ee){console.error("Error generating calendar subscription URL:",ee),ee.message==="new row violates row-level security policy"?Te.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):Te.error("Error al generar el enlace del calendario")}};return O?d.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded mb-2"}),d.jsx("div",{className:"h-4 w-64 bg-gray-200 animate-pulse rounded"})]}),d.jsx("div",{className:"h-10 w-32 bg-gray-200 animate-pulse rounded"})]}),d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-16 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-20 bg-gray-200 animate-pulse rounded"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded"})}),d.jsx(QO,{count:6})]})}),d.jsxs("div",{className:"bg-white shadow rounded-lg",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsx("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded"})}),d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded"}),d.jsx("div",{className:"h-10 w-full bg-gray-200 animate-pulse rounded"})]})})]})]})]}):i?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:i.name}),d.jsx("p",{className:"text-gray-500 mt-1 text-sm sm:text-base",children:"Gestiona miembros y disponibilidad"})]}),(ie||ae)&&(!xe||M==="admin"||ae)&&d.jsxs(_t,{onClick:()=>m(!0),className:"flex items-center justify-center space-x-2 w-full sm:w-auto",size:"sm",children:[d.jsx($g,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{className:"hidden sm:inline",children:M==="admin"||ae?"Aadir Miembro":"Unirse al Grupo"}),d.jsx("span",{className:"sm:hidden",children:"Aadir"})]})]}),d.jsx("div",{className:"border-b border-gray-200 mb-6 overflow-x-auto",children:d.jsxs("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 min-w-max",children:[d.jsxs("button",{onClick:()=>ne("overview"),className:`${P==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(vc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Vista General"}),d.jsx("span",{className:"sm:hidden",children:"Vista"})]}),d.jsxs("button",{onClick:()=>ne("songs"),className:`${P==="songs"||P==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(ZD,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Canciones y Setlists"}),d.jsx("span",{className:"sm:hidden",children:"Msica"})]}),d.jsxs("button",{onClick:()=>ne("statistics"),className:`${P==="statistics"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-3 sm:py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-1 sm:space-x-2`,children:[d.jsx(wN,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Estadsticas"}),d.jsx("span",{className:"sm:hidden",children:"Stats"})]})]})}),P==="overview"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-3 sm:p-4 border-b",children:d.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Miembros del Grupo"})}),a.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(c_,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsxs("p",{className:"text-gray-500",children:["No hay miembros an. ",ie?'Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):d.jsxs("div",{className:"divide-y divide-gray-200",children:[_e.length>0&&$e(_e,"Miembros Principales"),Re.length>0&&$e(Re,"Miembros Sustitutos")]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-3 sm:p-4 border-b",children:d.jsx("h2",{className:"text-base sm:text-lg font-semibold",children:"Disponibilidad"})}),d.jsx("div",{className:"p-2 sm:p-4",children:d.jsx(PB,{members:a,onAvailableDatesChange:Y,groupName:i.name})})]})]}),i&&t&&d.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:d.jsx(YB,{groupId:t,canManageEvents:M==="admin"||ae,availableDates:U,members:a})})]}),(P==="songs"||P==="setlists")&&i&&t&&d.jsx(sq,{groupId:t,canManageSongs:M==="admin"||ae,canManageSetlists:M==="admin"||ae,defaultTab:P==="setlists"?"setlists":"songs"}),P==="statistics"&&i&&t&&d.jsx(aq,{groupId:t,members:a}),i&&(ie||ae)&&(!xe||M==="admin"||ae)&&d.jsx(eR,{isOpen:p,onClose:()=>m(!1),groupId:i.id,instruments:c,onMemberAdded:de,isEmptyGroup:a.length===0,userRole:M}),E&&d.jsx(tR,{isOpen:x,onClose:()=>{g(!1),b(null)},member:E,instruments:c,onMemberUpdated:de,userRole:M}),d.jsx(KB,{isOpen:N,onClose:()=>{j(!1),A(null)},onConfirm:ke,title:"Eliminar Miembro",message:`Ests seguro de que quieres eliminar a ${S==null?void 0:S.name}? Esta accin no se puede deshacer.`}),d.jsx(JB,{isOpen:X,onClose:()=>F(!1),calendarUrl:z})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a l."})]})}function kh({children:e}){const{user:t}=Zr(),n=la();return t?d.jsx(d.Fragment,{children:e}):d.jsx(u7,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0})}function oq(){return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Poltica de Privacidad"}),d.jsxs("div",{className:"prose prose-indigo",children:[d.jsxs("p",{className:"mb-4",children:["ltima actualizacin: ",new Date().toLocaleDateString()]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Informacin que Recopilamos"}),d.jsx("p",{children:"Band Manager recopila la siguiente informacin personal:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Direccin de correo electrnico"}),d.jsx("li",{children:"Nombre"}),d.jsx("li",{children:"Informacin de perfil de usuario"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),d.jsx("p",{children:"Nuestra aplicacin requiere ciertos permisos para funcionar correctamente:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la informacin de tu banda y permitir la colaboracin entre miembros."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicacin) mejorando as el rendimiento y permitiendo el uso sin conexin."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Cmara (opcional):"})," Solo si decides subir fotos directamente desde la aplicacin para tu perfil o contenido de la banda."]})]}),d.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicacin. No compartimos ninguna informacin recopilada a travs de estos permisos con terceros."}),d.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a travs de la configuracin de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicacin."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cmo Utilizamos su Informacin"}),d.jsx("p",{children:"Utilizamos la informacin recopilada para:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),d.jsx("li",{children:"Gestionar su cuenta y membresa"}),d.jsx("li",{children:"Permitir la participacin en funciones interactivas"}),d.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),d.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticacin, que implementa estndares de seguridad de la industria para proteger su informacin personal."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),d.jsx("p",{children:"Usted tiene derecho a:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Acceder a sus datos personales"}),d.jsx("li",{children:"Corregir datos inexactos"}),d.jsx("li",{children:"Solicitar la eliminacin de sus datos"}),d.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),d.jsxs("p",{children:["Si tiene preguntas sobre esta Poltica de Privacidad, puede contactarnos en:",d.jsx("br",{}),d.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function lq(){console.log("AcceptInvitation component mounted");const[e]=zS(),t=e.get("token"),n=ca(),{user:r}=Zr(),[i,s]=k.useState(!0),[a,l]=k.useState(null);k.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),Te.error("Token de invitacin no vlido"),n("/");return}(async()=>{try{if(!r){const g=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",g),n("/login",{state:{returnTo:g}});return}const{data:p,error:m}=await et.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:m}),m)throw m;if(!p||p.length===0){Te.error("Invitacin no encontrada o ya procesada"),n("/");return}const x=p[0];if(console.log("Invitation data:",x),r.email!==x.email){Te.error("Esta invitacin es para otro correo electrnico"),n("/");return}if(!e.get("group_member_id")){const g=new URLSearchParams(e);g.set("group_member_id",x.group_member_id),n(`${location.pathname}?${g.toString()}`,{replace:!0})}l({groupName:x.group_name,role:x.role_in_group}),s(!1)}catch(p){console.error("Error checking invitation:",p),Te.error(p.message||"Error al verificar la invitacin"),n("/")}})()},[t,r,n,e]);const c=async f=>{try{s(!0);const{data:p,error:m}=await et.rpc("get_invitation_details",{p_token:t});if(m)throw m;if(!p||p.length===0)throw new Error("Invitacin no encontrada");const{group_member_id:x}=p[0],{error:g}=await et.rpc("handle_group_invitation",{p_group_member_id:x,p_accept:f});if(g)throw g;Te.success(f?"Invitacin aceptada":"Invitacin rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),Te.error(p.message)}finally{s(!1)}};return i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),d.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitacin..."})]})}):a?d.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitacin a Grupo"}),d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",d.jsx("strong",{children:a.groupName})]}),d.jsxs("p",{className:"text-gray-600",children:["Rol: ",d.jsx("span",{className:"capitalize",children:a.role})]})]}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsx(_t,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),d.jsx(_t,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function cq(){const[e,t]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(!1),a=async l=>{l.preventDefault(),s(!0),r("");const{error:c}=await et.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});s(!1),r(c?"Error: "+c.message:"Revisa tu correo para continuar el proceso!")};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Olvidaste tu contrasea?"}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsx(Xn,{label:"Email",type:"email",value:e,onChange:l=>t(l.target.value),required:!0,placeholder:"tu@email.com"}),d.jsx(_t,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(Ac,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function uq(){const[e,t]=k.useState(""),[n,r]=k.useState(""),[i,s]=k.useState(!1),[a,l]=k.useState(!1),[c,f]=k.useState(!1),p=ca(),m=la();k.useEffect(()=>{(async()=>{var N;try{const{data:j}=await et.auth.getSession(),E=new URLSearchParams(m.search),b=E.get("token"),S=E.get("type"),A=(N=m.state)==null?void 0:N.resetCode,O=localStorage.getItem("recovery_token");if(b&&S==="recovery")f(!0);else if(A){f(!0);try{await et.auth.verifyOtp({token_hash:A,type:"recovery"})}catch{}}else if(O){f(!0),localStorage.removeItem("recovery_token");try{await et.auth.verifyOtp({token_hash:O,type:"recovery"})}catch{}}else j.session?f(!0):a||p("/login")}catch(j){console.error("Error al verificar autenticacin:",j),p("/login")}})()},[m,p,a]);const x=async g=>{g.preventDefault(),s(!0),r("");try{const{error:N}=await et.auth.updateUser({password:e});if(N)throw N;l(!0),r("Contrasea actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(N){r("Error: "+N.message)}finally{s(!1)}};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contrasea"}),c?d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:x,className:"space-y-6",children:[d.jsx(Xn,{label:"Nueva contrasea",type:"password",value:e,onChange:g=>t(g.target.value),required:!0,placeholder:""}),d.jsx(_t,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contrasea"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):d.jsxs("div",{className:"py-6 text-center",children:[d.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:d.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperacin..."}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automticamente, solicita un",d.jsx(Ac,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}const dq=()=>{const e=la(),t=ca(),[n,r]=k.useState(!0);return k.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(e.search),a=s.get("code"),l=s.get("state"),c=s.get("error");if(console.log(" SpotifyCallback: Processing callback...",{hasCode:!!a,hasState:!!l,error:c}),c){console.error(" Spotify auth error:",c),Te.error(`Error de autenticacin de Spotify: ${c}`),t("/");return}if(!a||!l){console.error(" Missing code or state parameters"),Te.error("Parmetros de autenticacin faltantes"),t("/");return}if(await qn.handleAuthCallback(a,l)){console.log(" Spotify authentication successful");const p=await qn.getCurrentUser();Te.success(`Conectado a Spotify como ${p.display_name}!`),window.dispatchEvent(new CustomEvent("spotifyAuthCompleted"));const m=localStorage.getItem("spotify_return_url");m?(localStorage.removeItem("spotify_return_url"),window.location.href=m):t("/")}else console.error(" Spotify authentication failed"),Te.error("Error al conectar con Spotify. Intntalo de nuevo."),t("/")}catch(s){console.error(" Error in Spotify callback:",s),s.message.includes("State mismatch")?(qn.clearAuthState(),Te.error("Error de autenticacin de Spotify. Los parmetros han sido limpiados. Puedes intentar conectar de nuevo.")):Te.error(`Error al autenticar con Spotify: ${s.message}`),t("/")}finally{r(!1)}})()},[e.search,t]),n?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Conectando con Spotify..."}),d.jsx("p",{className:"text-gray-600",children:"Por favor espera mientras procesamos tu autenticacin"})]})}):null};function fq(){const{setUser:e,setSession:t}=Zr(),n=la();return k.useEffect(()=>{const r=new URLSearchParams(n.search),i=r.get("token"),s=r.get("type"),a=n.hash;i&&s==="recovery"&&n.pathname!=="/reset-password"?window.location.replace(`/reset-password?token=${i}&type=${s}`):a.includes("access_token=")&&a.includes("type=recovery")&&n.pathname!=="/reset-password"&&window.location.replace("/reset-password"+a)},[n.search,n.pathname]),k.useEffect(()=>{et.auth.getSession().then(({data:{session:i}})=>{t(i),e((i==null?void 0:i.user)??null)});const{data:{subscription:r}}=et.auth.onAuthStateChange((i,s)=>{t(s),e((s==null?void 0:s.user)??null)});return()=>r.unsubscribe()},[e,t]),d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(nI,{}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsxs(f7,{children:[d.jsx(Ps,{path:"/login",element:d.jsx(rI,{})}),d.jsx(Ps,{path:"/register",element:d.jsx(iI,{})}),d.jsx(Ps,{path:"/forgot-password",element:d.jsx(cq,{})}),d.jsx(Ps,{path:"/reset-password",element:d.jsx(uq,{})}),d.jsx(Ps,{path:"/accept-invitation",element:d.jsx(lq,{})}),d.jsx(Ps,{path:"/",element:d.jsx(kh,{children:d.jsx(ZO,{})})}),d.jsx(Ps,{path:"/group/:id",element:d.jsx(kh,{children:d.jsx(Zm,{})})}),d.jsx(Ps,{path:"/group/:id/songs",element:d.jsx(kh,{children:d.jsx(Zm,{defaultTab:"songs"})})}),d.jsx(Ps,{path:"/group/:id/setlists",element:d.jsx(kh,{children:d.jsx(Zm,{defaultTab:"setlists"})})}),d.jsx(Ps,{path:"/group/:id/statistics",element:d.jsx(kh,{children:d.jsx(Zm,{defaultTab:"statistics"})})}),d.jsx(Ps,{path:"/privacy-policy",element:d.jsx(oq,{})}),d.jsx(Ps,{path:"/spotify/callback",element:d.jsx(dq,{})})]})}),d.jsx(hT,{position:"top-right"})]})}function hq(){return d.jsx(w7,{children:d.jsx(fq,{})})}PS(document.getElementById("root")).render(d.jsx(k.StrictMode,{children:d.jsx(hq,{})}));export{An as _,ci as c,y3 as g};
