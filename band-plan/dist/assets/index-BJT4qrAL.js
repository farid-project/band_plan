function l4(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u4(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var N1={exports:{}},Dd={},k1={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),c4=Symbol.for("react.portal"),d4=Symbol.for("react.fragment"),f4=Symbol.for("react.strict_mode"),h4=Symbol.for("react.profiler"),p4=Symbol.for("react.provider"),m4=Symbol.for("react.context"),g4=Symbol.for("react.forward_ref"),v4=Symbol.for("react.suspense"),y4=Symbol.for("react.memo"),x4=Symbol.for("react.lazy"),Vy=Symbol.iterator;function w4(e){return e===null||typeof e!="object"?null:(e=Vy&&e[Vy]||e["@@iterator"],typeof e=="function"?e:null)}var C1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j1=Object.assign,P1={};function ca(e,t,n){this.props=e,this.context=t,this.refs=P1,this.updater=n||C1}ca.prototype.isReactComponent={};ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D1(){}D1.prototype=ca.prototype;function Bm(e,t,n){this.props=e,this.context=t,this.refs=P1,this.updater=n||C1}var Hm=Bm.prototype=new D1;Hm.constructor=Bm;j1(Hm,ca.prototype);Hm.isPureReactComponent=!0;var Yy=Array.isArray,T1=Object.prototype.hasOwnProperty,qm={current:null},O1={key:!0,ref:!0,__self:!0,__source:!0};function M1(e,t,n){var r,i={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)T1.call(t,r)&&!O1.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Hl,type:e,key:o,ref:l,props:i,_owner:qm.current}}function _4(e,t){return{$$typeof:Hl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hl}function b4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ky=/\/+/g;function Ch(e,t){return typeof e=="object"&&e!==null&&e.key!=null?b4(""+e.key):t.toString(36)}function Sc(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Hl:case c4:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+Ch(l,0):r,Yy(i)?(n="",e!=null&&(n=e.replace(Ky,"$&/")+"/"),Sc(i,t,n,"",function(h){return h})):i!=null&&(Gm(i)&&(i=_4(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Ky,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Yy(e))for(var u=0;u<e.length;u++){o=e[u];var c=r+Ch(o,u);l+=Sc(o,t,n,c,i)}else if(c=w4(e),typeof c=="function")for(e=c.call(e),u=0;!(o=e.next()).done;)o=o.value,c=r+Ch(o,u++),l+=Sc(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Xu(e,t,n){if(e==null)return e;var r=[],i=0;return Sc(e,r,"","",function(o){return t.call(n,o,i++)}),r}function S4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mn={current:null},Ec={transition:null},E4={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Ec,ReactCurrentOwner:qm};function R1(){throw Error("act(...) is not supported in production builds of React.")}Be.Children={map:Xu,forEach:function(e,t,n){Xu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xu(e,function(){t++}),t},toArray:function(e){return Xu(e,function(t){return t})||[]},only:function(e){if(!Gm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Be.Component=ca;Be.Fragment=d4;Be.Profiler=h4;Be.PureComponent=Bm;Be.StrictMode=f4;Be.Suspense=v4;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E4;Be.act=R1;Be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=j1({},e.props),i=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=qm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)T1.call(t,c)&&!O1.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Hl,type:e.type,key:i,ref:o,props:r,_owner:l}};Be.createContext=function(e){return e={$$typeof:m4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p4,_context:e},e.Consumer=e};Be.createElement=M1;Be.createFactory=function(e){var t=M1.bind(null,e);return t.type=e,t};Be.createRef=function(){return{current:null}};Be.forwardRef=function(e){return{$$typeof:g4,render:e}};Be.isValidElement=Gm;Be.lazy=function(e){return{$$typeof:x4,_payload:{_status:-1,_result:e},_init:S4}};Be.memo=function(e,t){return{$$typeof:y4,type:e,compare:t===void 0?null:t}};Be.startTransition=function(e){var t=Ec.transition;Ec.transition={};try{e()}finally{Ec.transition=t}};Be.unstable_act=R1;Be.useCallback=function(e,t){return mn.current.useCallback(e,t)};Be.useContext=function(e){return mn.current.useContext(e)};Be.useDebugValue=function(){};Be.useDeferredValue=function(e){return mn.current.useDeferredValue(e)};Be.useEffect=function(e,t){return mn.current.useEffect(e,t)};Be.useId=function(){return mn.current.useId()};Be.useImperativeHandle=function(e,t,n){return mn.current.useImperativeHandle(e,t,n)};Be.useInsertionEffect=function(e,t){return mn.current.useInsertionEffect(e,t)};Be.useLayoutEffect=function(e,t){return mn.current.useLayoutEffect(e,t)};Be.useMemo=function(e,t){return mn.current.useMemo(e,t)};Be.useReducer=function(e,t,n){return mn.current.useReducer(e,t,n)};Be.useRef=function(e){return mn.current.useRef(e)};Be.useState=function(e){return mn.current.useState(e)};Be.useSyncExternalStore=function(e,t,n){return mn.current.useSyncExternalStore(e,t,n)};Be.useTransition=function(){return mn.current.useTransition()};Be.version="18.3.1";k1.exports=Be;var v=k1.exports;const xe=E1(v),wp=l4({__proto__:null,default:xe},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4=v,k4=Symbol.for("react.element"),C4=Symbol.for("react.fragment"),j4=Object.prototype.hasOwnProperty,P4=N4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D4={key:!0,ref:!0,__self:!0,__source:!0};function $1(e,t,n){var r,i={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)j4.call(t,r)&&!D4.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:k4,type:e,key:o,ref:l,props:i,_owner:P4.current}}Dd.Fragment=C4;Dd.jsx=$1;Dd.jsxs=$1;N1.exports=Dd;var d=N1.exports,A1={exports:{}},qn={},L1={exports:{}},I1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,F){var ne=T.length;T.push(F);e:for(;0<ne;){var se=ne-1>>>1,_e=T[se];if(0<i(_e,F))T[se]=F,T[ne]=_e,ne=se;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var F=T[0],ne=T.pop();if(ne!==F){T[0]=ne;e:for(var se=0,_e=T.length,ge=_e>>>1;se<ge;){var $e=2*(se+1)-1,je=T[$e],Oe=$e+1,Q=T[Oe];if(0>i(je,ne))Oe<_e&&0>i(Q,je)?(T[se]=Q,T[Oe]=ne,se=Oe):(T[se]=je,T[$e]=ne,se=$e);else if(Oe<_e&&0>i(Q,ne))T[se]=Q,T[Oe]=ne,se=Oe;else break e}}return F}function i(T,F){var ne=T.sortIndex-F.sortIndex;return ne!==0?ne:T.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],h=[],p=1,m=null,y=3,x=!1,S=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(T){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=T)r(h),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(h)}}function P(T){if(C=!1,N(T),!S)if(n(c)!==null)S=!0,Me(M);else{var F=n(h);F!==null&&$(P,F.startTime-T)}}function M(T,F){S=!1,C&&(C=!1,b(z),z=-1),x=!0;var ne=y;try{for(N(F),m=n(c);m!==null&&(!(m.expirationTime>F)||T&&!H());){var se=m.callback;if(typeof se=="function"){m.callback=null,y=m.priorityLevel;var _e=se(m.expirationTime<=F);F=e.unstable_now(),typeof _e=="function"?m.callback=_e:m===n(c)&&r(c),N(F)}else r(c);m=n(c)}if(m!==null)var ge=!0;else{var $e=n(h);$e!==null&&$(P,$e.startTime-F),ge=!1}return ge}finally{m=null,y=ne,x=!1}}var U=!1,L=null,z=-1,le=5,te=-1;function H(){return!(e.unstable_now()-te<le)}function Ee(){if(L!==null){var T=e.unstable_now();te=T;var F=!0;try{F=L(!0,T)}finally{F?re():(U=!1,L=null)}}else U=!1}var re;if(typeof _=="function")re=function(){_(Ee)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,be=me.port2;me.port1.onmessage=Ee,re=function(){be.postMessage(null)}}else re=function(){j(Ee,0)};function Me(T){L=T,U||(U=!0,re())}function $(T,F){z=j(function(){T(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){S||x||(S=!0,Me(M))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var ne=y;y=F;try{return T()}finally{y=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,F){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var ne=y;y=T;try{return F()}finally{y=ne}},e.unstable_scheduleCallback=function(T,F,ne){var se=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?se+ne:se):ne=se,T){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,T={id:p++,callback:F,priorityLevel:T,startTime:ne,expirationTime:_e,sortIndex:-1},ne>se?(T.sortIndex=ne,t(h,T),n(c)===null&&T===n(h)&&(C?(b(z),z=-1):C=!0,$(P,ne-se))):(T.sortIndex=_e,t(c,T),S||x||(S=!0,Me(M))),T},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(T){var F=y;return function(){var ne=y;y=F;try{return T.apply(this,arguments)}finally{y=ne}}}})(I1);L1.exports=I1;var T4=L1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4=v,Bn=T4;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F1=new Set,wl={};function no(e,t){Zo(e,t),Zo(e+"Capture",t)}function Zo(e,t){for(wl[e]=t,e=0;e<t.length;e++)F1.add(t[e])}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=Object.prototype.hasOwnProperty,M4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qy={},Xy={};function R4(e){return _p.call(Xy,e)?!0:_p.call(Qy,e)?!1:M4.test(e)?Xy[e]=!0:(Qy[e]=!0,!1)}function $4(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A4(e,t,n,r){if(t===null||typeof t>"u"||$4(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gn(e,t,n,r,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qt[e]=new gn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qt[t]=new gn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qt[e]=new gn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qt[e]=new gn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qt[e]=new gn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qt[e]=new gn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qt[e]=new gn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qt[e]=new gn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qt[e]=new gn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vm=/[\-:]([a-z])/g;function Ym(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vm,Ym);Qt[t]=new gn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vm,Ym);Qt[t]=new gn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vm,Ym);Qt[t]=new gn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qt[e]=new gn(e,1,!1,e.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qt[e]=new gn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Km(e,t,n,r){var i=Qt.hasOwnProperty(t)?Qt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A4(t,n,i,r)&&(n=null),r||i===null?R4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wi=O4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),To=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),Qm=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),z1=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),Sp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),Jm=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),W1=Symbol.for("react.offscreen"),Jy=Symbol.iterator;function Ua(e){return e===null||typeof e!="object"?null:(e=Jy&&e[Jy]||e["@@iterator"],typeof e=="function"?e:null)}var St=Object.assign,jh;function Ja(e){if(jh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jh=t&&t[1]||""}return`
`+jh+e}var Ph=!1;function Dh(e,t){if(!e||Ph)return"";Ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=r.stack.split(`
`),l=i.length-1,u=o.length-1;1<=l&&0<=u&&i[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==o[u]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=u);break}}}finally{Ph=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ja(e):""}function L4(e){switch(e.tag){case 5:return Ja(e.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 2:case 15:return e=Dh(e.type,!1),e;case 11:return e=Dh(e.type.render,!1),e;case 1:return e=Dh(e.type,!0),e;default:return""}}function Np(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oo:return"Fragment";case To:return"Portal";case bp:return"Profiler";case Qm:return"StrictMode";case Sp:return"Suspense";case Ep:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z1:return(e.displayName||"Context")+".Consumer";case U1:return(e._context.displayName||"Context")+".Provider";case Xm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jm:return t=e.displayName||null,t!==null?t:Np(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return Np(e(t))}catch{}}return null}function I4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Np(t);case 8:return t===Qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function as(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function F4(e){var t=B1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zu(e){e._valueTracker||(e._valueTracker=F4(e))}function H1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kp(e,t){var n=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=as(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function q1(e,t){t=t.checked,t!=null&&Km(e,"checked",t,!1)}function Cp(e,t){q1(e,t);var n=as(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jp(e,t.type,n):t.hasOwnProperty("defaultValue")&&jp(e,t.type,as(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ex(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jp(e,t,n){(t!=="number"||zc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Za=Array.isArray;function Ho(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+as(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Pp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ue(92));if(Za(n)){if(1<n.length)throw Error(ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:as(n)}}function G1(e,t){var n=as(t.value),r=as(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ec,Y1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ec.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _l(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U4=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(e){U4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),il[t]=il[e]})});function K1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||il.hasOwnProperty(e)&&il[e]?(""+t).trim():t+"px"}function Q1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var z4=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tp(e,t){if(t){if(z4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function Op(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mp=null;function Zm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rp=null,qo=null,Go=null;function rx(e){if(e=Vl(e)){if(typeof Rp!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=$d(t),Rp(e.stateNode,e.type,t))}}function X1(e){qo?Go?Go.push(e):Go=[e]:qo=e}function J1(){if(qo){var e=qo,t=Go;if(Go=qo=null,rx(e),t)for(e=0;e<t.length;e++)rx(t[e])}}function Z1(e,t){return e(t)}function e_(){}var Th=!1;function t_(e,t,n){if(Th)return e(t,n);Th=!0;try{return Z1(e,t,n)}finally{Th=!1,(qo!==null||Go!==null)&&(e_(),J1())}}function bl(e,t){var n=e.stateNode;if(n===null)return null;var r=$d(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ue(231,t,typeof n));return n}var $p=!1;if(mi)try{var za={};Object.defineProperty(za,"passive",{get:function(){$p=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{$p=!1}function W4(e,t,n,r,i,o,l,u,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(p){this.onError(p)}}var sl=!1,Wc=null,Bc=!1,Ap=null,B4={onError:function(e){sl=!0,Wc=e}};function H4(e,t,n,r,i,o,l,u,c){sl=!1,Wc=null,W4.apply(B4,arguments)}function q4(e,t,n,r,i,o,l,u,c){if(H4.apply(this,arguments),sl){if(sl){var h=Wc;sl=!1,Wc=null}else throw Error(ue(198));Bc||(Bc=!0,Ap=h)}}function ro(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function n_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ix(e){if(ro(e)!==e)throw Error(ue(188))}function G4(e){var t=e.alternate;if(!t){if(t=ro(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ix(i),e;if(o===r)return ix(i),t;o=o.sibling}throw Error(ue(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=o;break}if(u===r){l=!0,r=i,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=i;break}if(u===r){l=!0,r=o,n=i;break}u=u.sibling}if(!l)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?e:t}function r_(e){return e=G4(e),e!==null?i_(e):null}function i_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=i_(e);if(t!==null)return t;e=e.sibling}return null}var s_=Bn.unstable_scheduleCallback,sx=Bn.unstable_cancelCallback,V4=Bn.unstable_shouldYield,Y4=Bn.unstable_requestPaint,jt=Bn.unstable_now,K4=Bn.unstable_getCurrentPriorityLevel,eg=Bn.unstable_ImmediatePriority,o_=Bn.unstable_UserBlockingPriority,Hc=Bn.unstable_NormalPriority,Q4=Bn.unstable_LowPriority,a_=Bn.unstable_IdlePriority,Td=null,Wr=null;function X4(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Td,e,void 0,(e.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:eD,J4=Math.log,Z4=Math.LN2;function eD(e){return e>>>=0,e===0?32:31-(J4(e)/Z4|0)|0}var tc=64,nc=4194304;function el(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=el(u):(o&=l,o!==0&&(r=el(o)))}else l=n&~i,l!==0?r=el(l):o!==0&&(r=el(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nr(t),i=1<<n,r|=e[n],t&=~i;return r}function tD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nD(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Nr(o),u=1<<l,c=i[l];c===-1?(!(u&n)||u&r)&&(i[l]=tD(u,t)):c<=t&&(e.expiredLanes|=u),o&=~u}}function Lp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function l_(){var e=tc;return tc<<=1,!(tc&4194240)&&(tc=64),e}function Oh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ql(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nr(t),e[t]=n}function rD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Nr(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function tg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var st=0;function u_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var c_,ng,d_,f_,h_,Ip=!1,rc=[],Xi=null,Ji=null,Zi=null,Sl=new Map,El=new Map,Wi=[],iD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ox(e,t){switch(e){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(t.pointerId)}}function Wa(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Vl(t),t!==null&&ng(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function sD(e,t,n,r,i){switch(t){case"focusin":return Xi=Wa(Xi,e,t,n,r,i),!0;case"dragenter":return Ji=Wa(Ji,e,t,n,r,i),!0;case"mouseover":return Zi=Wa(Zi,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Sl.set(o,Wa(Sl.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,El.set(o,Wa(El.get(o)||null,e,t,n,r,i)),!0}return!1}function p_(e){var t=zs(e.target);if(t!==null){var n=ro(t);if(n!==null){if(t=n.tag,t===13){if(t=n_(n),t!==null){e.blockedOn=t,h_(e.priority,function(){d_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mp=r,n.target.dispatchEvent(r),Mp=null}else return t=Vl(n),t!==null&&ng(t),e.blockedOn=n,!1;t.shift()}return!0}function ax(e,t,n){Nc(e)&&n.delete(t)}function oD(){Ip=!1,Xi!==null&&Nc(Xi)&&(Xi=null),Ji!==null&&Nc(Ji)&&(Ji=null),Zi!==null&&Nc(Zi)&&(Zi=null),Sl.forEach(ax),El.forEach(ax)}function Ba(e,t){e.blockedOn===t&&(e.blockedOn=null,Ip||(Ip=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,oD)))}function Nl(e){function t(i){return Ba(i,e)}if(0<rc.length){Ba(rc[0],e);for(var n=1;n<rc.length;n++){var r=rc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Xi!==null&&Ba(Xi,e),Ji!==null&&Ba(Ji,e),Zi!==null&&Ba(Zi,e),Sl.forEach(t),El.forEach(t),n=0;n<Wi.length;n++)r=Wi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wi.length&&(n=Wi[0],n.blockedOn===null);)p_(n),n.blockedOn===null&&Wi.shift()}var Vo=wi.ReactCurrentBatchConfig,Gc=!0;function aD(e,t,n,r){var i=st,o=Vo.transition;Vo.transition=null;try{st=1,rg(e,t,n,r)}finally{st=i,Vo.transition=o}}function lD(e,t,n,r){var i=st,o=Vo.transition;Vo.transition=null;try{st=4,rg(e,t,n,r)}finally{st=i,Vo.transition=o}}function rg(e,t,n,r){if(Gc){var i=Fp(e,t,n,r);if(i===null)Wh(e,t,r,Vc,n),ox(e,r);else if(sD(i,e,t,n,r))r.stopPropagation();else if(ox(e,r),t&4&&-1<iD.indexOf(e)){for(;i!==null;){var o=Vl(i);if(o!==null&&c_(o),o=Fp(e,t,n,r),o===null&&Wh(e,t,r,Vc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Wh(e,t,r,null,n)}}var Vc=null;function Fp(e,t,n,r){if(Vc=null,e=Zm(r),e=zs(e),e!==null)if(t=ro(e),t===null)e=null;else if(n=t.tag,n===13){if(e=n_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vc=e,null}function m_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K4()){case eg:return 1;case o_:return 4;case Hc:case Q4:return 16;case a_:return 536870912;default:return 16}default:return 16}}var Vi=null,ig=null,kc=null;function g_(){if(kc)return kc;var e,t=ig,n=t.length,r,i="value"in Vi?Vi.value:Vi.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[o-r];r++);return kc=i.slice(e,1<r?1-r:void 0)}function Cc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ic(){return!0}function lx(){return!1}function Gn(e){function t(n,r,i,o,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ic:lx,this.isPropagationStopped=lx,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),t}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=Gn(da),Gl=St({},da,{view:0,detail:0}),uD=Gn(Gl),Mh,Rh,Ha,Od=St({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:og,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ha&&(Ha&&e.type==="mousemove"?(Mh=e.screenX-Ha.screenX,Rh=e.screenY-Ha.screenY):Rh=Mh=0,Ha=e),Mh)},movementY:function(e){return"movementY"in e?e.movementY:Rh}}),ux=Gn(Od),cD=St({},Od,{dataTransfer:0}),dD=Gn(cD),fD=St({},Gl,{relatedTarget:0}),$h=Gn(fD),hD=St({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),pD=Gn(hD),mD=St({},da,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gD=Gn(mD),vD=St({},da,{data:0}),cx=Gn(vD),yD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _D(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wD[e])?!!t[e]:!1}function og(){return _D}var bD=St({},Gl,{key:function(e){if(e.key){var t=yD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:og,charCode:function(e){return e.type==="keypress"?Cc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SD=Gn(bD),ED=St({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dx=Gn(ED),ND=St({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:og}),kD=Gn(ND),CD=St({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),jD=Gn(CD),PD=St({},Od,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),DD=Gn(PD),TD=[9,13,27,32],ag=mi&&"CompositionEvent"in window,ol=null;mi&&"documentMode"in document&&(ol=document.documentMode);var OD=mi&&"TextEvent"in window&&!ol,v_=mi&&(!ag||ol&&8<ol&&11>=ol),fx=" ",hx=!1;function y_(e,t){switch(e){case"keyup":return TD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mo=!1;function MD(e,t){switch(e){case"compositionend":return x_(t);case"keypress":return t.which!==32?null:(hx=!0,fx);case"textInput":return e=t.data,e===fx&&hx?null:e;default:return null}}function RD(e,t){if(Mo)return e==="compositionend"||!ag&&y_(e,t)?(e=g_(),kc=ig=Vi=null,Mo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return v_&&t.locale!=="ko"?null:t.data;default:return null}}var $D={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function px(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$D[e.type]:t==="textarea"}function w_(e,t,n,r){X1(r),t=Yc(t,"onChange"),0<t.length&&(n=new sg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var al=null,kl=null;function AD(e){T_(e,0)}function Md(e){var t=Ao(e);if(H1(t))return e}function LD(e,t){if(e==="change")return t}var __=!1;if(mi){var Ah;if(mi){var Lh="oninput"in document;if(!Lh){var mx=document.createElement("div");mx.setAttribute("oninput","return;"),Lh=typeof mx.oninput=="function"}Ah=Lh}else Ah=!1;__=Ah&&(!document.documentMode||9<document.documentMode)}function gx(){al&&(al.detachEvent("onpropertychange",b_),kl=al=null)}function b_(e){if(e.propertyName==="value"&&Md(kl)){var t=[];w_(t,kl,e,Zm(e)),t_(AD,t)}}function ID(e,t,n){e==="focusin"?(gx(),al=t,kl=n,al.attachEvent("onpropertychange",b_)):e==="focusout"&&gx()}function FD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Md(kl)}function UD(e,t){if(e==="click")return Md(t)}function zD(e,t){if(e==="input"||e==="change")return Md(t)}function WD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cr=typeof Object.is=="function"?Object.is:WD;function Cl(e,t){if(Cr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_p.call(t,i)||!Cr(e[i],t[i]))return!1}return!0}function vx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yx(e,t){var n=vx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vx(n)}}function S_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E_(){for(var e=window,t=zc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zc(e.document)}return t}function lg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BD(e){var t=E_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&S_(n.ownerDocument.documentElement,n)){if(r!==null&&lg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=yx(n,o);var l=yx(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HD=mi&&"documentMode"in document&&11>=document.documentMode,Ro=null,Up=null,ll=null,zp=!1;function xx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zp||Ro==null||Ro!==zc(r)||(r=Ro,"selectionStart"in r&&lg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ll&&Cl(ll,r)||(ll=r,r=Yc(Up,"onSelect"),0<r.length&&(t=new sg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ro)))}function sc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $o={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Ih={},N_={};mi&&(N_=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Rd(e){if(Ih[e])return Ih[e];if(!$o[e])return e;var t=$o[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in N_)return Ih[e]=t[n];return e}var k_=Rd("animationend"),C_=Rd("animationiteration"),j_=Rd("animationstart"),P_=Rd("transitionend"),D_=new Map,wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){D_.set(e,t),no(t,[e])}for(var Fh=0;Fh<wx.length;Fh++){var Uh=wx[Fh],qD=Uh.toLowerCase(),GD=Uh[0].toUpperCase()+Uh.slice(1);fs(qD,"on"+GD)}fs(k_,"onAnimationEnd");fs(C_,"onAnimationIteration");fs(j_,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(P_,"onTransitionEnd");Zo("onMouseEnter",["mouseout","mouseover"]);Zo("onMouseLeave",["mouseout","mouseover"]);Zo("onPointerEnter",["pointerout","pointerover"]);Zo("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VD=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function _x(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,q4(r,t,void 0,e),e.currentTarget=null}function T_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;_x(i,u,h),o=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,h=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;_x(i,u,h),o=c}}}if(Bc)throw e=Ap,Bc=!1,Ap=null,e}function ht(e,t){var n=t[Gp];n===void 0&&(n=t[Gp]=new Set);var r=e+"__bubble";n.has(r)||(O_(t,e,2,!1),n.add(r))}function zh(e,t,n){var r=0;t&&(r|=4),O_(n,e,r,t)}var oc="_reactListening"+Math.random().toString(36).slice(2);function jl(e){if(!e[oc]){e[oc]=!0,F1.forEach(function(n){n!=="selectionchange"&&(VD.has(n)||zh(n,!1,e),zh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oc]||(t[oc]=!0,zh("selectionchange",!1,t))}}function O_(e,t,n,r){switch(m_(t)){case 1:var i=aD;break;case 4:i=lD;break;default:i=rg}n=i.bind(null,t,n,e),i=void 0,!$p||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wh(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;u!==null;){if(l=zs(u),l===null)return;if(c=l.tag,c===5||c===6){r=o=l;continue e}u=u.parentNode}}r=r.return}t_(function(){var h=o,p=Zm(n),m=[];e:{var y=D_.get(e);if(y!==void 0){var x=sg,S=e;switch(e){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":x=SD;break;case"focusin":S="focus",x=$h;break;case"focusout":S="blur",x=$h;break;case"beforeblur":case"afterblur":x=$h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ux;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=dD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=kD;break;case k_:case C_:case j_:x=pD;break;case P_:x=jD;break;case"scroll":x=uD;break;case"wheel":x=DD;break;case"copy":case"cut":case"paste":x=gD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=dx}var C=(t&4)!==0,j=!C&&e==="scroll",b=C?y!==null?y+"Capture":null:y;C=[];for(var _=h,N;_!==null;){N=_;var P=N.stateNode;if(N.tag===5&&P!==null&&(N=P,b!==null&&(P=bl(_,b),P!=null&&C.push(Pl(_,P,N)))),j)break;_=_.return}0<C.length&&(y=new x(y,S,null,n,p),m.push({event:y,listeners:C}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",y&&n!==Mp&&(S=n.relatedTarget||n.fromElement)&&(zs(S)||S[gi]))break e;if((x||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,x?(S=n.relatedTarget||n.toElement,x=h,S=S?zs(S):null,S!==null&&(j=ro(S),S!==j||S.tag!==5&&S.tag!==6)&&(S=null)):(x=null,S=h),x!==S)){if(C=ux,P="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(C=dx,P="onPointerLeave",b="onPointerEnter",_="pointer"),j=x==null?y:Ao(x),N=S==null?y:Ao(S),y=new C(P,_+"leave",x,n,p),y.target=j,y.relatedTarget=N,P=null,zs(p)===h&&(C=new C(b,_+"enter",S,n,p),C.target=N,C.relatedTarget=j,P=C),j=P,x&&S)t:{for(C=x,b=S,_=0,N=C;N;N=ko(N))_++;for(N=0,P=b;P;P=ko(P))N++;for(;0<_-N;)C=ko(C),_--;for(;0<N-_;)b=ko(b),N--;for(;_--;){if(C===b||b!==null&&C===b.alternate)break t;C=ko(C),b=ko(b)}C=null}else C=null;x!==null&&bx(m,y,x,C,!1),S!==null&&j!==null&&bx(m,j,S,C,!0)}}e:{if(y=h?Ao(h):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var M=LD;else if(px(y))if(__)M=zD;else{M=FD;var U=ID}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(M=UD);if(M&&(M=M(e,h))){w_(m,M,n,p);break e}U&&U(e,y,h),e==="focusout"&&(U=y._wrapperState)&&U.controlled&&y.type==="number"&&jp(y,"number",y.value)}switch(U=h?Ao(h):window,e){case"focusin":(px(U)||U.contentEditable==="true")&&(Ro=U,Up=h,ll=null);break;case"focusout":ll=Up=Ro=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,xx(m,n,p);break;case"selectionchange":if(HD)break;case"keydown":case"keyup":xx(m,n,p)}var L;if(ag)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Mo?y_(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(v_&&n.locale!=="ko"&&(Mo||z!=="onCompositionStart"?z==="onCompositionEnd"&&Mo&&(L=g_()):(Vi=p,ig="value"in Vi?Vi.value:Vi.textContent,Mo=!0)),U=Yc(h,z),0<U.length&&(z=new cx(z,e,null,n,p),m.push({event:z,listeners:U}),L?z.data=L:(L=x_(n),L!==null&&(z.data=L)))),(L=OD?MD(e,n):RD(e,n))&&(h=Yc(h,"onBeforeInput"),0<h.length&&(p=new cx("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=L))}T_(m,t)})}function Pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yc(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=bl(e,n),o!=null&&r.unshift(Pl(e,o,i)),o=bl(e,t),o!=null&&r.push(Pl(e,o,i))),e=e.return}return r}function ko(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bx(e,t,n,r,i){for(var o=t._reactName,l=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,i?(c=bl(n,o),c!=null&&l.unshift(Pl(n,c,u))):i||(c=bl(n,o),c!=null&&l.push(Pl(n,c,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var YD=/\r\n?/g,KD=/\u0000|\uFFFD/g;function Sx(e){return(typeof e=="string"?e:""+e).replace(YD,`
`).replace(KD,"")}function ac(e,t,n){if(t=Sx(t),Sx(e)!==t&&n)throw Error(ue(425))}function Kc(){}var Wp=null,Bp=null;function Hp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qp=typeof setTimeout=="function"?setTimeout:void 0,QD=typeof clearTimeout=="function"?clearTimeout:void 0,Ex=typeof Promise=="function"?Promise:void 0,XD=typeof queueMicrotask=="function"?queueMicrotask:typeof Ex<"u"?function(e){return Ex.resolve(null).then(e).catch(JD)}:qp;function JD(e){setTimeout(function(){throw e})}function Bh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Nl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nl(t)}function es(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),Ir="__reactFiber$"+fa,Dl="__reactProps$"+fa,gi="__reactContainer$"+fa,Gp="__reactEvents$"+fa,ZD="__reactListeners$"+fa,eT="__reactHandles$"+fa;function zs(e){var t=e[Ir];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[Ir]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nx(e);e!==null;){if(n=e[Ir])return n;e=Nx(e)}return t}e=n,n=e.parentNode}return null}function Vl(e){return e=e[Ir]||e[gi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ao(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function $d(e){return e[Dl]||null}var Vp=[],Lo=-1;function hs(e){return{current:e}}function pt(e){0>Lo||(e.current=Vp[Lo],Vp[Lo]=null,Lo--)}function ct(e,t){Lo++,Vp[Lo]=e.current,e.current=t}var ls={},rn=hs(ls),kn=hs(!1),Qs=ls;function ea(e,t){var n=e.type.contextTypes;if(!n)return ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Cn(e){return e=e.childContextTypes,e!=null}function Qc(){pt(kn),pt(rn)}function kx(e,t,n){if(rn.current!==ls)throw Error(ue(168));ct(rn,t),ct(kn,n)}function M_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ue(108,I4(e)||"Unknown",i));return St({},n,r)}function Xc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ls,Qs=rn.current,ct(rn,e),ct(kn,kn.current),!0}function Cx(e,t,n){var r=e.stateNode;if(!r)throw Error(ue(169));n?(e=M_(e,t,Qs),r.__reactInternalMemoizedMergedChildContext=e,pt(kn),pt(rn),ct(rn,e)):pt(kn),ct(kn,n)}var li=null,Ad=!1,Hh=!1;function R_(e){li===null?li=[e]:li.push(e)}function tT(e){Ad=!0,R_(e)}function ps(){if(!Hh&&li!==null){Hh=!0;var e=0,t=st;try{var n=li;for(st=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}li=null,Ad=!1}catch(i){throw li!==null&&(li=li.slice(e+1)),s_(eg,ps),i}finally{st=t,Hh=!1}}return null}var Io=[],Fo=0,Jc=null,Zc=0,ar=[],lr=0,Xs=null,ci=1,di="";function Rs(e,t){Io[Fo++]=Zc,Io[Fo++]=Jc,Jc=e,Zc=t}function $_(e,t,n){ar[lr++]=ci,ar[lr++]=di,ar[lr++]=Xs,Xs=e;var r=ci;e=di;var i=32-Nr(r)-1;r&=~(1<<i),n+=1;var o=32-Nr(t)+i;if(30<o){var l=i-i%5;o=(r&(1<<l)-1).toString(32),r>>=l,i-=l,ci=1<<32-Nr(t)+i|n<<i|r,di=o+e}else ci=1<<o|n<<i|r,di=e}function ug(e){e.return!==null&&(Rs(e,1),$_(e,1,0))}function cg(e){for(;e===Jc;)Jc=Io[--Fo],Io[Fo]=null,Zc=Io[--Fo],Io[Fo]=null;for(;e===Xs;)Xs=ar[--lr],ar[lr]=null,di=ar[--lr],ar[lr]=null,ci=ar[--lr],ar[lr]=null}var Wn=null,zn=null,vt=!1,Sr=null;function A_(e,t){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wn=e,zn=es(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wn=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xs!==null?{id:ci,overflow:di}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wn=e,zn=null,!0):!1;default:return!1}}function Yp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Kp(e){if(vt){var t=zn;if(t){var n=t;if(!jx(e,t)){if(Yp(e))throw Error(ue(418));t=es(n.nextSibling);var r=Wn;t&&jx(e,t)?A_(r,n):(e.flags=e.flags&-4097|2,vt=!1,Wn=e)}}else{if(Yp(e))throw Error(ue(418));e.flags=e.flags&-4097|2,vt=!1,Wn=e}}}function Px(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wn=e}function lc(e){if(e!==Wn)return!1;if(!vt)return Px(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hp(e.type,e.memoizedProps)),t&&(t=zn)){if(Yp(e))throw L_(),Error(ue(418));for(;t;)A_(e,t),t=es(t.nextSibling)}if(Px(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=es(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=Wn?es(e.stateNode.nextSibling):null;return!0}function L_(){for(var e=zn;e;)e=es(e.nextSibling)}function ta(){zn=Wn=null,vt=!1}function dg(e){Sr===null?Sr=[e]:Sr.push(e)}var nT=wi.ReactCurrentBatchConfig;function qa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var u=i.refs;l===null?delete u[o]:u[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,e))}return e}function uc(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dx(e){var t=e._init;return t(e._payload)}function I_(e){function t(b,_){if(e){var N=b.deletions;N===null?(b.deletions=[_],b.flags|=16):N.push(_)}}function n(b,_){if(!e)return null;for(;_!==null;)t(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function i(b,_){return b=is(b,_),b.index=0,b.sibling=null,b}function o(b,_,N){return b.index=N,e?(N=b.alternate,N!==null?(N=N.index,N<_?(b.flags|=2,_):N):(b.flags|=2,_)):(b.flags|=1048576,_)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,_,N,P){return _===null||_.tag!==6?(_=Xh(N,b.mode,P),_.return=b,_):(_=i(_,N),_.return=b,_)}function c(b,_,N,P){var M=N.type;return M===Oo?p(b,_,N.props.children,P,N.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ii&&Dx(M)===_.type)?(P=i(_,N.props),P.ref=qa(b,_,N),P.return=b,P):(P=Rc(N.type,N.key,N.props,null,b.mode,P),P.ref=qa(b,_,N),P.return=b,P)}function h(b,_,N,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==N.containerInfo||_.stateNode.implementation!==N.implementation?(_=Jh(N,b.mode,P),_.return=b,_):(_=i(_,N.children||[]),_.return=b,_)}function p(b,_,N,P,M){return _===null||_.tag!==7?(_=Vs(N,b.mode,P,M),_.return=b,_):(_=i(_,N),_.return=b,_)}function m(b,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Xh(""+_,b.mode,N),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ju:return N=Rc(_.type,_.key,_.props,null,b.mode,N),N.ref=qa(b,null,_),N.return=b,N;case To:return _=Jh(_,b.mode,N),_.return=b,_;case Ii:var P=_._init;return m(b,P(_._payload),N)}if(Za(_)||Ua(_))return _=Vs(_,b.mode,N,null),_.return=b,_;uc(b,_)}return null}function y(b,_,N,P){var M=_!==null?_.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:u(b,_,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ju:return N.key===M?c(b,_,N,P):null;case To:return N.key===M?h(b,_,N,P):null;case Ii:return M=N._init,y(b,_,M(N._payload),P)}if(Za(N)||Ua(N))return M!==null?null:p(b,_,N,P,null);uc(b,N)}return null}function x(b,_,N,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(N)||null,u(_,b,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ju:return b=b.get(P.key===null?N:P.key)||null,c(_,b,P,M);case To:return b=b.get(P.key===null?N:P.key)||null,h(_,b,P,M);case Ii:var U=P._init;return x(b,_,N,U(P._payload),M)}if(Za(P)||Ua(P))return b=b.get(N)||null,p(_,b,P,M,null);uc(_,P)}return null}function S(b,_,N,P){for(var M=null,U=null,L=_,z=_=0,le=null;L!==null&&z<N.length;z++){L.index>z?(le=L,L=null):le=L.sibling;var te=y(b,L,N[z],P);if(te===null){L===null&&(L=le);break}e&&L&&te.alternate===null&&t(b,L),_=o(te,_,z),U===null?M=te:U.sibling=te,U=te,L=le}if(z===N.length)return n(b,L),vt&&Rs(b,z),M;if(L===null){for(;z<N.length;z++)L=m(b,N[z],P),L!==null&&(_=o(L,_,z),U===null?M=L:U.sibling=L,U=L);return vt&&Rs(b,z),M}for(L=r(b,L);z<N.length;z++)le=x(L,b,z,N[z],P),le!==null&&(e&&le.alternate!==null&&L.delete(le.key===null?z:le.key),_=o(le,_,z),U===null?M=le:U.sibling=le,U=le);return e&&L.forEach(function(H){return t(b,H)}),vt&&Rs(b,z),M}function C(b,_,N,P){var M=Ua(N);if(typeof M!="function")throw Error(ue(150));if(N=M.call(N),N==null)throw Error(ue(151));for(var U=M=null,L=_,z=_=0,le=null,te=N.next();L!==null&&!te.done;z++,te=N.next()){L.index>z?(le=L,L=null):le=L.sibling;var H=y(b,L,te.value,P);if(H===null){L===null&&(L=le);break}e&&L&&H.alternate===null&&t(b,L),_=o(H,_,z),U===null?M=H:U.sibling=H,U=H,L=le}if(te.done)return n(b,L),vt&&Rs(b,z),M;if(L===null){for(;!te.done;z++,te=N.next())te=m(b,te.value,P),te!==null&&(_=o(te,_,z),U===null?M=te:U.sibling=te,U=te);return vt&&Rs(b,z),M}for(L=r(b,L);!te.done;z++,te=N.next())te=x(L,b,z,te.value,P),te!==null&&(e&&te.alternate!==null&&L.delete(te.key===null?z:te.key),_=o(te,_,z),U===null?M=te:U.sibling=te,U=te);return e&&L.forEach(function(Ee){return t(b,Ee)}),vt&&Rs(b,z),M}function j(b,_,N,P){if(typeof N=="object"&&N!==null&&N.type===Oo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ju:e:{for(var M=N.key,U=_;U!==null;){if(U.key===M){if(M=N.type,M===Oo){if(U.tag===7){n(b,U.sibling),_=i(U,N.props.children),_.return=b,b=_;break e}}else if(U.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ii&&Dx(M)===U.type){n(b,U.sibling),_=i(U,N.props),_.ref=qa(b,U,N),_.return=b,b=_;break e}n(b,U);break}else t(b,U);U=U.sibling}N.type===Oo?(_=Vs(N.props.children,b.mode,P,N.key),_.return=b,b=_):(P=Rc(N.type,N.key,N.props,null,b.mode,P),P.ref=qa(b,_,N),P.return=b,b=P)}return l(b);case To:e:{for(U=N.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===N.containerInfo&&_.stateNode.implementation===N.implementation){n(b,_.sibling),_=i(_,N.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else t(b,_);_=_.sibling}_=Jh(N,b.mode,P),_.return=b,b=_}return l(b);case Ii:return U=N._init,j(b,_,U(N._payload),P)}if(Za(N))return S(b,_,N,P);if(Ua(N))return C(b,_,N,P);uc(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,_!==null&&_.tag===6?(n(b,_.sibling),_=i(_,N),_.return=b,b=_):(n(b,_),_=Xh(N,b.mode,P),_.return=b,b=_),l(b)):n(b,_)}return j}var na=I_(!0),F_=I_(!1),ed=hs(null),td=null,Uo=null,fg=null;function hg(){fg=Uo=td=null}function pg(e){var t=ed.current;pt(ed),e._currentValue=t}function Qp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yo(e,t){td=e,fg=Uo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nn=!0),e.firstContext=null)}function dr(e){var t=e._currentValue;if(fg!==e)if(e={context:e,memoizedValue:t,next:null},Uo===null){if(td===null)throw Error(ue(308));Uo=e,td.dependencies={lanes:0,firstContext:e}}else Uo=Uo.next=e;return t}var Ws=null;function mg(e){Ws===null?Ws=[e]:Ws.push(e)}function U_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,mg(t)):(n.next=i.next,i.next=n),t.interleaved=n,vi(e,r)}function vi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fi=!1;function gg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ts(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,vi(e,n)}return i=r.interleaved,i===null?(t.next=t,mg(r)):(t.next=i.next,i.next=t),r.interleaved=t,vi(e,n)}function jc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tg(e,n)}}function Tx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function nd(e,t,n,r){var i=e.updateQueue;Fi=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,h=c.next;c.next=null,l===null?o=h:l.next=h,l=c;var p=e.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==l&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(o!==null){var m=i.baseState;l=0,p=h=c=null,u=o;do{var y=u.lane,x=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=e,C=u;switch(y=t,x=n,C.tag){case 1:if(S=C.payload,typeof S=="function"){m=S.call(x,m,y);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=C.payload,y=typeof S=="function"?S.call(x,m,y):S,y==null)break e;m=St({},m,y);break e;case 2:Fi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[u]:y.push(u))}else x={eventTime:x,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=x,c=m):p=p.next=x,l|=y;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;y=u,u=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Zs|=l,e.lanes=l,e.memoizedState=m}}function Ox(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ue(191,i));i.call(r)}}}var Yl={},Br=hs(Yl),Tl=hs(Yl),Ol=hs(Yl);function Bs(e){if(e===Yl)throw Error(ue(174));return e}function vg(e,t){switch(ct(Ol,t),ct(Tl,e),ct(Br,Yl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Dp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Dp(t,e)}pt(Br),ct(Br,t)}function ra(){pt(Br),pt(Tl),pt(Ol)}function W_(e){Bs(Ol.current);var t=Bs(Br.current),n=Dp(t,e.type);t!==n&&(ct(Tl,e),ct(Br,n))}function yg(e){Tl.current===e&&(pt(Br),pt(Tl))}var wt=hs(0);function rd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function xg(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var Pc=wi.ReactCurrentDispatcher,Gh=wi.ReactCurrentBatchConfig,Js=0,bt=null,At=null,Wt=null,id=!1,ul=!1,Ml=0,rT=0;function en(){throw Error(ue(321))}function wg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cr(e[n],t[n]))return!1;return!0}function _g(e,t,n,r,i,o){if(Js=o,bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pc.current=e===null||e.memoizedState===null?aT:lT,e=n(r,i),ul){o=0;do{if(ul=!1,Ml=0,25<=o)throw Error(ue(301));o+=1,Wt=At=null,t.updateQueue=null,Pc.current=uT,e=n(r,i)}while(ul)}if(Pc.current=sd,t=At!==null&&At.next!==null,Js=0,Wt=At=bt=null,id=!1,t)throw Error(ue(300));return e}function bg(){var e=Ml!==0;return Ml=0,e}function Lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?bt.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function fr(){if(At===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Wt===null?bt.memoizedState:Wt.next;if(t!==null)Wt=t,At=e;else{if(e===null)throw Error(ue(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Wt===null?bt.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Rl(e,t){return typeof t=="function"?t(e):t}function Vh(e){var t=fr(),n=t.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=e;var r=At,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=l=null,c=null,h=o;do{var p=h.lane;if((Js&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,l=r):c=c.next=m,bt.lanes|=p,Zs|=p}h=h.next}while(h!==null&&h!==o);c===null?l=r:c.next=u,Cr(r,t.memoizedState)||(Nn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,bt.lanes|=o,Zs|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yh(e){var t=fr(),n=t.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do o=e(o,l.action),l=l.next;while(l!==i);Cr(o,t.memoizedState)||(Nn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function B_(){}function H_(e,t){var n=bt,r=fr(),i=t(),o=!Cr(r.memoizedState,i);if(o&&(r.memoizedState=i,Nn=!0),r=r.queue,Sg(V_.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,$l(9,G_.bind(null,n,r,i,t),void 0,null),Ht===null)throw Error(ue(349));Js&30||q_(n,t,i)}return i}function q_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=bt.updateQueue,t===null?(t={lastEffect:null,stores:null},bt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function G_(e,t,n,r){t.value=n,t.getSnapshot=r,Y_(t)&&K_(e)}function V_(e,t,n){return n(function(){Y_(t)&&K_(e)})}function Y_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cr(e,n)}catch{return!0}}function K_(e){var t=vi(e,1);t!==null&&kr(t,e,1,-1)}function Mx(e){var t=Lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:e},t.queue=e,e=e.dispatch=oT.bind(null,bt,e),[t.memoizedState,e]}function $l(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=bt.updateQueue,t===null?(t={lastEffect:null,stores:null},bt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Q_(){return fr().memoizedState}function Dc(e,t,n,r){var i=Lr();bt.flags|=e,i.memoizedState=$l(1|t,n,void 0,r===void 0?null:r)}function Ld(e,t,n,r){var i=fr();r=r===void 0?null:r;var o=void 0;if(At!==null){var l=At.memoizedState;if(o=l.destroy,r!==null&&wg(r,l.deps)){i.memoizedState=$l(t,n,o,r);return}}bt.flags|=e,i.memoizedState=$l(1|t,n,o,r)}function Rx(e,t){return Dc(8390656,8,e,t)}function Sg(e,t){return Ld(2048,8,e,t)}function X_(e,t){return Ld(4,2,e,t)}function J_(e,t){return Ld(4,4,e,t)}function Z_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eb(e,t,n){return n=n!=null?n.concat([e]):null,Ld(4,4,Z_.bind(null,t,e),n)}function Eg(){}function tb(e,t){var n=fr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function nb(e,t){var n=fr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rb(e,t,n){return Js&21?(Cr(n,t)||(n=l_(),bt.lanes|=n,Zs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nn=!0),e.memoizedState=n)}function iT(e,t){var n=st;st=n!==0&&4>n?n:4,e(!0);var r=Gh.transition;Gh.transition={};try{e(!1),t()}finally{st=n,Gh.transition=r}}function ib(){return fr().memoizedState}function sT(e,t,n){var r=rs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sb(e))ob(t,n);else if(n=U_(e,t,n,r),n!==null){var i=hn();kr(n,e,r,i),ab(n,t,r)}}function oT(e,t,n){var r=rs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sb(e))ob(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,u=o(l,n);if(i.hasEagerState=!0,i.eagerState=u,Cr(u,l)){var c=t.interleaved;c===null?(i.next=i,mg(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=U_(e,t,i,r),n!==null&&(i=hn(),kr(n,e,r,i),ab(n,t,r))}}function sb(e){var t=e.alternate;return e===bt||t!==null&&t===bt}function ob(e,t){ul=id=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ab(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tg(e,n)}}var sd={readContext:dr,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},aT={readContext:dr,useCallback:function(e,t){return Lr().memoizedState=[e,t===void 0?null:t],e},useContext:dr,useEffect:Rx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Dc(4194308,4,Z_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Dc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dc(4,2,e,t)},useMemo:function(e,t){var n=Lr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sT.bind(null,bt,e),[r.memoizedState,e]},useRef:function(e){var t=Lr();return e={current:e},t.memoizedState=e},useState:Mx,useDebugValue:Eg,useDeferredValue:function(e){return Lr().memoizedState=e},useTransition:function(){var e=Mx(!1),t=e[0];return e=iT.bind(null,e[1]),Lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=bt,i=Lr();if(vt){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=t(),Ht===null)throw Error(ue(349));Js&30||q_(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Rx(V_.bind(null,r,o,e),[e]),r.flags|=2048,$l(9,G_.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Lr(),t=Ht.identifierPrefix;if(vt){var n=di,r=ci;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ml++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lT={readContext:dr,useCallback:tb,useContext:dr,useEffect:Sg,useImperativeHandle:eb,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:nb,useReducer:Vh,useRef:Q_,useState:function(){return Vh(Rl)},useDebugValue:Eg,useDeferredValue:function(e){var t=fr();return rb(t,At.memoizedState,e)},useTransition:function(){var e=Vh(Rl)[0],t=fr().memoizedState;return[e,t]},useMutableSource:B_,useSyncExternalStore:H_,useId:ib,unstable_isNewReconciler:!1},uT={readContext:dr,useCallback:tb,useContext:dr,useEffect:Sg,useImperativeHandle:eb,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:nb,useReducer:Yh,useRef:Q_,useState:function(){return Yh(Rl)},useDebugValue:Eg,useDeferredValue:function(e){var t=fr();return At===null?t.memoizedState=e:rb(t,At.memoizedState,e)},useTransition:function(){var e=Yh(Rl)[0],t=fr().memoizedState;return[e,t]},useMutableSource:B_,useSyncExternalStore:H_,useId:ib,unstable_isNewReconciler:!1};function wr(e,t){if(e&&e.defaultProps){t=St({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:St({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Id={isMounted:function(e){return(e=e._reactInternals)?ro(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hn(),i=rs(e),o=fi(r,i);o.payload=t,n!=null&&(o.callback=n),t=ts(e,o,i),t!==null&&(kr(t,e,i,r),jc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hn(),i=rs(e),o=fi(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ts(e,o,i),t!==null&&(kr(t,e,i,r),jc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hn(),r=rs(e),i=fi(n,r);i.tag=2,t!=null&&(i.callback=t),t=ts(e,i,r),t!==null&&(kr(t,e,r,n),jc(t,e,r))}};function $x(e,t,n,r,i,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!Cl(n,r)||!Cl(i,o):!0}function lb(e,t,n){var r=!1,i=ls,o=t.contextType;return typeof o=="object"&&o!==null?o=dr(o):(i=Cn(t)?Qs:rn.current,r=t.contextTypes,o=(r=r!=null)?ea(e,i):ls),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Id,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ax(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Id.enqueueReplaceState(t,t.state,null)}function Jp(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},gg(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=dr(o):(o=Cn(t)?Qs:rn.current,i.context=ea(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Xp(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Id.enqueueReplaceState(i,i.state,null),nd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ia(e,t){try{var n="",r=t;do n+=L4(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Kh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Zp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cT=typeof WeakMap=="function"?WeakMap:Map;function ub(e,t,n){n=fi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ad||(ad=!0,um=r),Zp(e,t)},n}function cb(e,t,n){n=fi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Zp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Zp(e,t),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Lx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ET.bind(null,e,t,n),t.then(e,e))}function Ix(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fx(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fi(-1,1),t.tag=2,ts(n,t,1))),n.lanes|=1),e)}var dT=wi.ReactCurrentOwner,Nn=!1;function dn(e,t,n,r){t.child=e===null?F_(t,null,n,r):na(t,e.child,n,r)}function Ux(e,t,n,r,i){n=n.render;var o=t.ref;return Yo(t,i),r=_g(e,t,n,r,o,i),n=bg(),e!==null&&!Nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,yi(e,t,i)):(vt&&n&&ug(t),t.flags|=1,dn(e,t,r,i),t.child)}function zx(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Og(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,db(e,t,o,r,i)):(e=Rc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cl,n(l,r)&&e.ref===t.ref)return yi(e,t,i)}return t.flags|=1,e=is(o,r),e.ref=t.ref,e.return=t,t.child=e}function db(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Cl(o,r)&&e.ref===t.ref)if(Nn=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Nn=!0);else return t.lanes=e.lanes,yi(e,t,i)}return em(e,t,n,r,i)}function fb(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Wo,Un),Un|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ct(Wo,Un),Un|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ct(Wo,Un),Un|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ct(Wo,Un),Un|=r;return dn(e,t,i,n),t.child}function hb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function em(e,t,n,r,i){var o=Cn(n)?Qs:rn.current;return o=ea(t,o),Yo(t,i),n=_g(e,t,n,r,o,i),r=bg(),e!==null&&!Nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,yi(e,t,i)):(vt&&r&&ug(t),t.flags|=1,dn(e,t,n,i),t.child)}function Wx(e,t,n,r,i){if(Cn(n)){var o=!0;Xc(t)}else o=!1;if(Yo(t,i),t.stateNode===null)Tc(e,t),lb(t,n,r),Jp(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=dr(h):(h=Cn(n)?Qs:rn.current,h=ea(t,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Ax(t,l,r,h),Fi=!1;var y=t.memoizedState;l.state=y,nd(t,r,l,i),c=t.memoizedState,u!==r||y!==c||kn.current||Fi?(typeof p=="function"&&(Xp(t,n,p,r),c=t.memoizedState),(u=Fi||$x(t,n,u,r,y,c,h))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=h,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,z_(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:wr(t.type,u),l.props=h,m=t.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=dr(c):(c=Cn(n)?Qs:rn.current,c=ea(t,c));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==m||y!==c)&&Ax(t,l,r,c),Fi=!1,y=t.memoizedState,l.state=y,nd(t,r,l,i);var S=t.memoizedState;u!==m||y!==S||kn.current||Fi?(typeof x=="function"&&(Xp(t,n,x,r),S=t.memoizedState),(h=Fi||$x(t,n,h,r,y,S,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,S,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,S,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),l.props=r,l.state=S,l.context=c,r=h):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return tm(e,t,n,r,o,i)}function tm(e,t,n,r,i,o){hb(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&Cx(t,n,!1),yi(e,t,o);r=t.stateNode,dT.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=na(t,e.child,null,o),t.child=na(t,null,u,o)):dn(e,t,u,o),t.memoizedState=r.state,i&&Cx(t,n,!0),t.child}function pb(e){var t=e.stateNode;t.pendingContext?kx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kx(e,t.context,!1),vg(e,t.containerInfo)}function Bx(e,t,n,r,i){return ta(),dg(i),t.flags|=256,dn(e,t,n,r),t.child}var nm={dehydrated:null,treeContext:null,retryLane:0};function rm(e){return{baseLanes:e,cachePool:null,transitions:null}}function mb(e,t,n){var r=t.pendingProps,i=wt.current,o=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ct(wt,i&1),e===null)return Kp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=zd(l,r,0,null),e=Vs(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=rm(n),t.memoizedState=nm,e):Ng(t,l));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return fT(e,t,l,r,u,i,n);if(o){o=r.fallback,l=t.mode,i=e.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=is(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=is(u,o):(o=Vs(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?rm(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=nm,r}return o=e.child,e=o.sibling,r=is(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ng(e,t){return t=zd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cc(e,t,n,r){return r!==null&&dg(r),na(t,e.child,null,n),e=Ng(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fT(e,t,n,r,i,o,l){if(n)return t.flags&256?(t.flags&=-257,r=Kh(Error(ue(422))),cc(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=zd({mode:"visible",children:r.children},i,0,null),o=Vs(o,i,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&na(t,e.child,null,l),t.child.memoizedState=rm(l),t.memoizedState=nm,o);if(!(t.mode&1))return cc(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(ue(419)),r=Kh(o,r,void 0),cc(e,t,l,r)}if(u=(l&e.childLanes)!==0,Nn||u){if(r=Ht,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,vi(e,i),kr(r,e,i,-1))}return Tg(),r=Kh(Error(ue(421))),cc(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=NT.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,zn=es(i.nextSibling),Wn=t,vt=!0,Sr=null,e!==null&&(ar[lr++]=ci,ar[lr++]=di,ar[lr++]=Xs,ci=e.id,di=e.overflow,Xs=t),t=Ng(t,r.children),t.flags|=4096,t)}function Hx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qp(e.return,t,n)}function Qh(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function gb(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(dn(e,t,r.children,n),r=wt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hx(e,n,t);else if(e.tag===19)Hx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ct(wt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&rd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qh(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&rd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qh(t,!0,n,null,o);break;case"together":Qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Tc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,n=is(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=is(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hT(e,t,n){switch(t.tag){case 3:pb(t),ta();break;case 5:W_(t);break;case 1:Cn(t.type)&&Xc(t);break;case 4:vg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ct(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ct(wt,wt.current&1),t.flags|=128,null):n&t.child.childLanes?mb(e,t,n):(ct(wt,wt.current&1),e=yi(e,t,n),e!==null?e.sibling:null);ct(wt,wt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return gb(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ct(wt,wt.current),r)break;return null;case 22:case 23:return t.lanes=0,fb(e,t,n)}return yi(e,t,n)}var vb,im,yb,xb;vb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};im=function(){};yb=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Bs(Br.current);var o=null;switch(n){case"input":i=kp(e,i),r=kp(e,r),o=[];break;case"select":i=St({},i,{value:void 0}),r=St({},r,{value:void 0}),o=[];break;case"textarea":i=Pp(e,i),r=Pp(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kc)}Tp(n,r);var l;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(wl.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in r){var c=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(o||(o=[]),o.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(wl.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ht("scroll",e),o||u===c||(o=[])):(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(t.updateQueue=h)&&(t.flags|=4)}};xb=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ga(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pT(e,t,n){var r=t.pendingProps;switch(cg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return Cn(t.type)&&Qc(),tn(t),null;case 3:return r=t.stateNode,ra(),pt(kn),pt(rn),xg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(lc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sr!==null&&(fm(Sr),Sr=null))),im(e,t),tn(t),null;case 5:yg(t);var i=Bs(Ol.current);if(n=t.type,e!==null&&t.stateNode!=null)yb(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ue(166));return tn(t),null}if(e=Bs(Br.current),lc(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ir]=t,r[Dl]=o,e=(t.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(i=0;i<tl.length;i++)ht(tl[i],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":Zy(r,o),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ht("invalid",r);break;case"textarea":tx(r,o),ht("invalid",r)}Tp(n,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&ac(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ac(r.textContent,u,e),i=["children",""+u]):wl.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&ht("scroll",r)}switch(n){case"input":Zu(r),ex(r,o,!0);break;case"textarea":Zu(r),nx(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kc)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Ir]=t,e[Dl]=r,vb(e,t,!1,!1),t.stateNode=e;e:{switch(l=Op(n,r),n){case"dialog":ht("cancel",e),ht("close",e),i=r;break;case"iframe":case"object":case"embed":ht("load",e),i=r;break;case"video":case"audio":for(i=0;i<tl.length;i++)ht(tl[i],e);i=r;break;case"source":ht("error",e),i=r;break;case"img":case"image":case"link":ht("error",e),ht("load",e),i=r;break;case"details":ht("toggle",e),i=r;break;case"input":Zy(e,r),i=kp(e,r),ht("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=St({},r,{value:void 0}),ht("invalid",e);break;case"textarea":tx(e,r),i=Pp(e,r),ht("invalid",e);break;default:i=r}Tp(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?Q1(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Y1(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_l(e,c):typeof c=="number"&&_l(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ht("scroll",e):c!=null&&Km(e,o,c,l))}switch(n){case"input":Zu(e),ex(e,r,!1);break;case"textarea":Zu(e),nx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+as(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Ho(e,!!r.multiple,o,!1):r.defaultValue!=null&&Ho(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Kc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tn(t),null;case 6:if(e&&t.stateNode!=null)xb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ue(166));if(n=Bs(Ol.current),Bs(Br.current),lc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ir]=t,(o=r.nodeValue!==n)&&(e=Wn,e!==null))switch(e.tag){case 3:ac(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ac(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ir]=t,t.stateNode=r}return tn(t),null;case 13:if(pt(wt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&zn!==null&&t.mode&1&&!(t.flags&128))L_(),ta(),t.flags|=98560,o=!1;else if(o=lc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ue(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ue(317));o[Ir]=t}else ta(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),o=!1}else Sr!==null&&(fm(Sr),Sr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||wt.current&1?It===0&&(It=3):Tg())),t.updateQueue!==null&&(t.flags|=4),tn(t),null);case 4:return ra(),im(e,t),e===null&&jl(t.stateNode.containerInfo),tn(t),null;case 10:return pg(t.type._context),tn(t),null;case 17:return Cn(t.type)&&Qc(),tn(t),null;case 19:if(pt(wt),o=t.memoizedState,o===null)return tn(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)Ga(o,!1);else{if(It!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=rd(e),l!==null){for(t.flags|=128,Ga(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ct(wt,wt.current&1|2),t.child}e=e.sibling}o.tail!==null&&jt()>sa&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(e=rd(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!vt)return tn(t),null}else 2*jt()-o.renderingStartTime>sa&&n!==1073741824&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=jt(),t.sibling=null,n=wt.current,ct(wt,r?n&1|2:n&1),t):(tn(t),null);case 22:case 23:return Dg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Un&1073741824&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function mT(e,t){switch(cg(t),t.tag){case 1:return Cn(t.type)&&Qc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(),pt(kn),pt(rn),xg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yg(t),null;case 13:if(pt(wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pt(wt),null;case 4:return ra(),null;case 10:return pg(t.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var dc=!1,nn=!1,gT=typeof WeakSet=="function"?WeakSet:Set,we=null;function zo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(e,t,r)}else n.current=null}function sm(e,t,n){try{n()}catch(r){Nt(e,t,r)}}var qx=!1;function vT(e,t){if(Wp=Gc,e=E_(),lg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,h=0,p=0,m=e,y=null;t:for(;;){for(var x;m!==n||i!==0&&m.nodeType!==3||(u=l+i),m!==o||r!==0&&m.nodeType!==3||(c=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)y=m,m=x;for(;;){if(m===e)break t;if(y===n&&++h===i&&(u=l),y===o&&++p===r&&(c=l),(x=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=x}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bp={focusedElem:e,selectionRange:n},Gc=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,j=S.memoizedState,b=t.stateNode,_=b.getSnapshotBeforeUpdate(t.elementType===t.type?C:wr(t.type,C),j);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(P){Nt(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return S=qx,qx=!1,S}function cl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&sm(t,n,o)}i=i.next}while(i!==r)}}function Fd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function om(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wb(e){var t=e.alternate;t!==null&&(e.alternate=null,wb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ir],delete t[Dl],delete t[Gp],delete t[ZD],delete t[eT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _b(e){return e.tag===5||e.tag===3||e.tag===4}function Gx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_b(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function am(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kc));else if(r!==4&&(e=e.child,e!==null))for(am(e,t,n),e=e.sibling;e!==null;)am(e,t,n),e=e.sibling}function lm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(lm(e,t,n),e=e.sibling;e!==null;)lm(e,t,n),e=e.sibling}var Vt=null,_r=!1;function Ri(e,t,n){for(n=n.child;n!==null;)bb(e,t,n),n=n.sibling}function bb(e,t,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Td,n)}catch{}switch(n.tag){case 5:nn||zo(n,t);case 6:var r=Vt,i=_r;Vt=null,Ri(e,t,n),Vt=r,_r=i,Vt!==null&&(_r?(e=Vt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(_r?(e=Vt,n=n.stateNode,e.nodeType===8?Bh(e.parentNode,n):e.nodeType===1&&Bh(e,n),Nl(e)):Bh(Vt,n.stateNode));break;case 4:r=Vt,i=_r,Vt=n.stateNode.containerInfo,_r=!0,Ri(e,t,n),Vt=r,_r=i;break;case 0:case 11:case 14:case 15:if(!nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&sm(n,t,l),i=i.next}while(i!==r)}Ri(e,t,n);break;case 1:if(!nn&&(zo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Nt(n,t,u)}Ri(e,t,n);break;case 21:Ri(e,t,n);break;case 22:n.mode&1?(nn=(r=nn)||n.memoizedState!==null,Ri(e,t,n),nn=r):Ri(e,t,n);break;default:Ri(e,t,n)}}function Vx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gT),t.forEach(function(r){var i=kT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:Vt=u.stateNode,_r=!1;break e;case 3:Vt=u.stateNode.containerInfo,_r=!0;break e;case 4:Vt=u.stateNode.containerInfo,_r=!0;break e}u=u.return}if(Vt===null)throw Error(ue(160));bb(o,l,i),Vt=null,_r=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Nt(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sb(t,e),t=t.sibling}function Sb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yr(t,e),Ar(e),r&4){try{cl(3,e,e.return),Fd(3,e)}catch(C){Nt(e,e.return,C)}try{cl(5,e,e.return)}catch(C){Nt(e,e.return,C)}}break;case 1:yr(t,e),Ar(e),r&512&&n!==null&&zo(n,n.return);break;case 5:if(yr(t,e),Ar(e),r&512&&n!==null&&zo(n,n.return),e.flags&32){var i=e.stateNode;try{_l(i,"")}catch(C){Nt(e,e.return,C)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&q1(i,o),Op(u,l);var h=Op(u,o);for(l=0;l<c.length;l+=2){var p=c[l],m=c[l+1];p==="style"?Q1(i,m):p==="dangerouslySetInnerHTML"?Y1(i,m):p==="children"?_l(i,m):Km(i,p,m,h)}switch(u){case"input":Cp(i,o);break;case"textarea":G1(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Ho(i,!!o.multiple,x,!1):y!==!!o.multiple&&(o.defaultValue!=null?Ho(i,!!o.multiple,o.defaultValue,!0):Ho(i,!!o.multiple,o.multiple?[]:"",!1))}i[Dl]=o}catch(C){Nt(e,e.return,C)}}break;case 6:if(yr(t,e),Ar(e),r&4){if(e.stateNode===null)throw Error(ue(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(C){Nt(e,e.return,C)}}break;case 3:if(yr(t,e),Ar(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(t.containerInfo)}catch(C){Nt(e,e.return,C)}break;case 4:yr(t,e),Ar(e);break;case 13:yr(t,e),Ar(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(jg=jt())),r&4&&Vx(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(nn=(h=nn)||p,yr(t,e),nn=h):yr(t,e),Ar(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(we=e,p=e.child;p!==null;){for(m=we=p;we!==null;){switch(y=we,x=y.child,y.tag){case 0:case 11:case 14:case 15:cl(4,y,y.return);break;case 1:zo(y,y.return);var S=y.stateNode;if(typeof S.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(C){Nt(r,n,C)}}break;case 5:zo(y,y.return);break;case 22:if(y.memoizedState!==null){Kx(m);continue}}x!==null?(x.return=y,we=x):Kx(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=K1("display",l))}catch(C){Nt(e,e.return,C)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(C){Nt(e,e.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:yr(t,e),Ar(e),r&4&&Vx(e);break;case 21:break;default:yr(t,e),Ar(e)}}function Ar(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_b(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_l(i,""),r.flags&=-33);var o=Gx(e);lm(e,o,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=Gx(e);am(e,u,l);break;default:throw Error(ue(161))}}catch(c){Nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yT(e,t,n){we=e,Eb(e)}function Eb(e,t,n){for(var r=(e.mode&1)!==0;we!==null;){var i=we,o=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||dc;if(!l){var u=i.alternate,c=u!==null&&u.memoizedState!==null||nn;u=dc;var h=nn;if(dc=l,(nn=c)&&!h)for(we=i;we!==null;)l=we,c=l.child,l.tag===22&&l.memoizedState!==null?Qx(i):c!==null?(c.return=l,we=c):Qx(i);for(;o!==null;)we=o,Eb(o),o=o.sibling;we=i,dc=u,nn=h}Yx(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,we=o):Yx(e)}}function Yx(e){for(;we!==null;){var t=we;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nn||Fd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:wr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ox(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ox(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Nl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}nn||t.flags&512&&om(t)}catch(y){Nt(t,t.return,y)}}if(t===e){we=null;break}if(n=t.sibling,n!==null){n.return=t.return,we=n;break}we=t.return}}function Kx(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var n=t.sibling;if(n!==null){n.return=t.return,we=n;break}we=t.return}}function Qx(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fd(4,t)}catch(c){Nt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Nt(t,i,c)}}var o=t.return;try{om(t)}catch(c){Nt(t,o,c)}break;case 5:var l=t.return;try{om(t)}catch(c){Nt(t,l,c)}}}catch(c){Nt(t,t.return,c)}if(t===e){we=null;break}var u=t.sibling;if(u!==null){u.return=t.return,we=u;break}we=t.return}}var xT=Math.ceil,od=wi.ReactCurrentDispatcher,kg=wi.ReactCurrentOwner,cr=wi.ReactCurrentBatchConfig,Je=0,Ht=null,Dt=null,Kt=0,Un=0,Wo=hs(0),It=0,Al=null,Zs=0,Ud=0,Cg=0,dl=null,Sn=null,jg=0,sa=1/0,ai=null,ad=!1,um=null,ns=null,fc=!1,Yi=null,ld=0,fl=0,cm=null,Oc=-1,Mc=0;function hn(){return Je&6?jt():Oc!==-1?Oc:Oc=jt()}function rs(e){return e.mode&1?Je&2&&Kt!==0?Kt&-Kt:nT.transition!==null?(Mc===0&&(Mc=l_()),Mc):(e=st,e!==0||(e=window.event,e=e===void 0?16:m_(e.type)),e):1}function kr(e,t,n,r){if(50<fl)throw fl=0,cm=null,Error(ue(185));ql(e,n,r),(!(Je&2)||e!==Ht)&&(e===Ht&&(!(Je&2)&&(Ud|=n),It===4&&Bi(e,Kt)),jn(e,r),n===1&&Je===0&&!(t.mode&1)&&(sa=jt()+500,Ad&&ps()))}function jn(e,t){var n=e.callbackNode;nD(e,t);var r=qc(e,e===Ht?Kt:0);if(r===0)n!==null&&sx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sx(n),t===1)e.tag===0?tT(Xx.bind(null,e)):R_(Xx.bind(null,e)),XD(function(){!(Je&6)&&ps()}),n=null;else{switch(u_(r)){case 1:n=eg;break;case 4:n=o_;break;case 16:n=Hc;break;case 536870912:n=a_;break;default:n=Hc}n=Ob(n,Nb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Nb(e,t){if(Oc=-1,Mc=0,Je&6)throw Error(ue(327));var n=e.callbackNode;if(Ko()&&e.callbackNode!==n)return null;var r=qc(e,e===Ht?Kt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ud(e,r);else{t=r;var i=Je;Je|=2;var o=Cb();(Ht!==e||Kt!==t)&&(ai=null,sa=jt()+500,Gs(e,t));do try{bT();break}catch(u){kb(e,u)}while(!0);hg(),od.current=o,Je=i,Dt!==null?t=0:(Ht=null,Kt=0,t=It)}if(t!==0){if(t===2&&(i=Lp(e),i!==0&&(r=i,t=dm(e,i))),t===1)throw n=Al,Gs(e,0),Bi(e,r),jn(e,jt()),n;if(t===6)Bi(e,r);else{if(i=e.current.alternate,!(r&30)&&!wT(i)&&(t=ud(e,r),t===2&&(o=Lp(e),o!==0&&(r=o,t=dm(e,o))),t===1))throw n=Al,Gs(e,0),Bi(e,r),jn(e,jt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ue(345));case 2:$s(e,Sn,ai);break;case 3:if(Bi(e,r),(r&130023424)===r&&(t=jg+500-jt(),10<t)){if(qc(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){hn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qp($s.bind(null,e,Sn,ai),t);break}$s(e,Sn,ai);break;case 4:if(Bi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-Nr(r);o=1<<l,l=t[l],l>i&&(i=l),r&=~o}if(r=i,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xT(r/1960))-r,10<r){e.timeoutHandle=qp($s.bind(null,e,Sn,ai),r);break}$s(e,Sn,ai);break;case 5:$s(e,Sn,ai);break;default:throw Error(ue(329))}}}return jn(e,jt()),e.callbackNode===n?Nb.bind(null,e):null}function dm(e,t){var n=dl;return e.current.memoizedState.isDehydrated&&(Gs(e,t).flags|=256),e=ud(e,t),e!==2&&(t=Sn,Sn=n,t!==null&&fm(t)),e}function fm(e){Sn===null?Sn=e:Sn.push.apply(Sn,e)}function wT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Cr(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bi(e,t){for(t&=~Cg,t&=~Ud,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nr(t),r=1<<n;e[n]=-1,t&=~r}}function Xx(e){if(Je&6)throw Error(ue(327));Ko();var t=qc(e,0);if(!(t&1))return jn(e,jt()),null;var n=ud(e,t);if(e.tag!==0&&n===2){var r=Lp(e);r!==0&&(t=r,n=dm(e,r))}if(n===1)throw n=Al,Gs(e,0),Bi(e,t),jn(e,jt()),n;if(n===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$s(e,Sn,ai),jn(e,jt()),null}function Pg(e,t){var n=Je;Je|=1;try{return e(t)}finally{Je=n,Je===0&&(sa=jt()+500,Ad&&ps())}}function eo(e){Yi!==null&&Yi.tag===0&&!(Je&6)&&Ko();var t=Je;Je|=1;var n=cr.transition,r=st;try{if(cr.transition=null,st=1,e)return e()}finally{st=r,cr.transition=n,Je=t,!(Je&6)&&ps()}}function Dg(){Un=Wo.current,pt(Wo)}function Gs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,QD(n)),Dt!==null)for(n=Dt.return;n!==null;){var r=n;switch(cg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qc();break;case 3:ra(),pt(kn),pt(rn),xg();break;case 5:yg(r);break;case 4:ra();break;case 13:pt(wt);break;case 19:pt(wt);break;case 10:pg(r.type._context);break;case 22:case 23:Dg()}n=n.return}if(Ht=e,Dt=e=is(e.current,null),Kt=Un=t,It=0,Al=null,Cg=Ud=Zs=0,Sn=dl=null,Ws!==null){for(t=0;t<Ws.length;t++)if(n=Ws[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=i,r.next=l}n.pending=r}Ws=null}return e}function kb(e,t){do{var n=Dt;try{if(hg(),Pc.current=sd,id){for(var r=bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(Js=0,Wt=At=bt=null,ul=!1,Ml=0,kg.current=null,n===null||n.return===null){It=1,Al=t,Dt=null;break}e:{var o=e,l=n.return,u=n,c=t;if(t=Kt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Ix(l);if(x!==null){x.flags&=-257,Fx(x,l,u,o,t),x.mode&1&&Lx(o,h,t),t=x,c=h;var S=t.updateQueue;if(S===null){var C=new Set;C.add(c),t.updateQueue=C}else S.add(c);break e}else{if(!(t&1)){Lx(o,h,t),Tg();break e}c=Error(ue(426))}}else if(vt&&u.mode&1){var j=Ix(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Fx(j,l,u,o,t),dg(ia(c,u));break e}}o=c=ia(c,u),It!==4&&(It=2),dl===null?dl=[o]:dl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=ub(o,c,t);Tx(o,b);break e;case 1:u=c;var _=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ns===null||!ns.has(N)))){o.flags|=65536,t&=-t,o.lanes|=t;var P=cb(o,u,t);Tx(o,P);break e}}o=o.return}while(o!==null)}Pb(n)}catch(M){t=M,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(!0)}function Cb(){var e=od.current;return od.current=sd,e===null?sd:e}function Tg(){(It===0||It===3||It===2)&&(It=4),Ht===null||!(Zs&268435455)&&!(Ud&268435455)||Bi(Ht,Kt)}function ud(e,t){var n=Je;Je|=2;var r=Cb();(Ht!==e||Kt!==t)&&(ai=null,Gs(e,t));do try{_T();break}catch(i){kb(e,i)}while(!0);if(hg(),Je=n,od.current=r,Dt!==null)throw Error(ue(261));return Ht=null,Kt=0,It}function _T(){for(;Dt!==null;)jb(Dt)}function bT(){for(;Dt!==null&&!V4();)jb(Dt)}function jb(e){var t=Tb(e.alternate,e,Un);e.memoizedProps=e.pendingProps,t===null?Pb(e):Dt=t,kg.current=null}function Pb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=mT(n,t),n!==null){n.flags&=32767,Dt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{It=6,Dt=null;return}}else if(n=pT(n,t,Un),n!==null){Dt=n;return}if(t=t.sibling,t!==null){Dt=t;return}Dt=t=e}while(t!==null);It===0&&(It=5)}function $s(e,t,n){var r=st,i=cr.transition;try{cr.transition=null,st=1,ST(e,t,n,r)}finally{cr.transition=i,st=r}return null}function ST(e,t,n,r){do Ko();while(Yi!==null);if(Je&6)throw Error(ue(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(rD(e,o),e===Ht&&(Dt=Ht=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,Ob(Hc,function(){return Ko(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=cr.transition,cr.transition=null;var l=st;st=1;var u=Je;Je|=4,kg.current=null,vT(e,n),Sb(n,e),BD(Bp),Gc=!!Wp,Bp=Wp=null,e.current=n,yT(n),Y4(),Je=u,st=l,cr.transition=o}else e.current=n;if(fc&&(fc=!1,Yi=e,ld=i),o=e.pendingLanes,o===0&&(ns=null),X4(n.stateNode),jn(e,jt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ad)throw ad=!1,e=um,um=null,e;return ld&1&&e.tag!==0&&Ko(),o=e.pendingLanes,o&1?e===cm?fl++:(fl=0,cm=e):fl=0,ps(),null}function Ko(){if(Yi!==null){var e=u_(ld),t=cr.transition,n=st;try{if(cr.transition=null,st=16>e?16:e,Yi===null)var r=!1;else{if(e=Yi,Yi=null,ld=0,Je&6)throw Error(ue(331));var i=Je;for(Je|=4,we=e.current;we!==null;){var o=we,l=o.child;if(we.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(we=h;we!==null;){var p=we;switch(p.tag){case 0:case 11:case 15:cl(8,p,o)}var m=p.child;if(m!==null)m.return=p,we=m;else for(;we!==null;){p=we;var y=p.sibling,x=p.return;if(wb(p),p===h){we=null;break}if(y!==null){y.return=x,we=y;break}we=x}}}var S=o.alternate;if(S!==null){var C=S.child;if(C!==null){S.child=null;do{var j=C.sibling;C.sibling=null,C=j}while(C!==null)}}we=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,we=l;else e:for(;we!==null;){if(o=we,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,we=b;break e}we=o.return}}var _=e.current;for(we=_;we!==null;){l=we;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,we=N;else e:for(l=_;we!==null;){if(u=we,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Fd(9,u)}}catch(M){Nt(u,u.return,M)}if(u===l){we=null;break e}var P=u.sibling;if(P!==null){P.return=u.return,we=P;break e}we=u.return}}if(Je=i,ps(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Td,e)}catch{}r=!0}return r}finally{st=n,cr.transition=t}}return!1}function Jx(e,t,n){t=ia(n,t),t=ub(e,t,1),e=ts(e,t,1),t=hn(),e!==null&&(ql(e,1,t),jn(e,t))}function Nt(e,t,n){if(e.tag===3)Jx(e,e,n);else for(;t!==null;){if(t.tag===3){Jx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){e=ia(n,e),e=cb(t,e,1),t=ts(t,e,1),e=hn(),t!==null&&(ql(t,1,e),jn(t,e));break}}t=t.return}}function ET(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=hn(),e.pingedLanes|=e.suspendedLanes&n,Ht===e&&(Kt&n)===n&&(It===4||It===3&&(Kt&130023424)===Kt&&500>jt()-jg?Gs(e,0):Cg|=n),jn(e,t)}function Db(e,t){t===0&&(e.mode&1?(t=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):t=1);var n=hn();e=vi(e,t),e!==null&&(ql(e,t,n),jn(e,n))}function NT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Db(e,n)}function kT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ue(314))}r!==null&&r.delete(t),Db(e,n)}var Tb;Tb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kn.current)Nn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nn=!1,hT(e,t,n);Nn=!!(e.flags&131072)}else Nn=!1,vt&&t.flags&1048576&&$_(t,Zc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Tc(e,t),e=t.pendingProps;var i=ea(t,rn.current);Yo(t,n),i=_g(null,t,r,e,i,n);var o=bg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Cn(r)?(o=!0,Xc(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gg(t),i.updater=Id,t.stateNode=i,i._reactInternals=t,Jp(t,r,e,n),t=tm(null,t,r,!0,o,n)):(t.tag=0,vt&&o&&ug(t),dn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Tc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=jT(r),e=wr(r,e),i){case 0:t=em(null,t,r,e,n);break e;case 1:t=Wx(null,t,r,e,n);break e;case 11:t=Ux(null,t,r,e,n);break e;case 14:t=zx(null,t,r,wr(r.type,e),n);break e}throw Error(ue(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wr(r,i),em(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wr(r,i),Wx(e,t,r,i,n);case 3:e:{if(pb(t),e===null)throw Error(ue(387));r=t.pendingProps,o=t.memoizedState,i=o.element,z_(e,t),nd(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ia(Error(ue(423)),t),t=Bx(e,t,r,n,i);break e}else if(r!==i){i=ia(Error(ue(424)),t),t=Bx(e,t,r,n,i);break e}else for(zn=es(t.stateNode.containerInfo.firstChild),Wn=t,vt=!0,Sr=null,n=F_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),r===i){t=yi(e,t,n);break e}dn(e,t,r,n)}t=t.child}return t;case 5:return W_(t),e===null&&Kp(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,l=i.children,Hp(r,i)?l=null:o!==null&&Hp(r,o)&&(t.flags|=32),hb(e,t),dn(e,t,l,n),t.child;case 6:return e===null&&Kp(t),null;case 13:return mb(e,t,n);case 4:return vg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=na(t,null,r,n):dn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wr(r,i),Ux(e,t,r,i,n);case 7:return dn(e,t,t.pendingProps,n),t.child;case 8:return dn(e,t,t.pendingProps.children,n),t.child;case 12:return dn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,ct(ed,r._currentValue),r._currentValue=l,o!==null)if(Cr(o.value,l)){if(o.children===i.children&&!kn.current){t=yi(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=fi(-1,n&-n),c.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Qp(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(ue(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Qp(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}dn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yo(t,n),i=dr(i),r=r(i),t.flags|=1,dn(e,t,r,n),t.child;case 14:return r=t.type,i=wr(r,t.pendingProps),i=wr(r.type,i),zx(e,t,r,i,n);case 15:return db(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wr(r,i),Tc(e,t),t.tag=1,Cn(r)?(e=!0,Xc(t)):e=!1,Yo(t,n),lb(t,r,i),Jp(t,r,i,n),tm(null,t,r,!0,e,n);case 19:return gb(e,t,n);case 22:return fb(e,t,n)}throw Error(ue(156,t.tag))};function Ob(e,t){return s_(e,t)}function CT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,n,r){return new CT(e,t,n,r)}function Og(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jT(e){if(typeof e=="function")return Og(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xm)return 11;if(e===Jm)return 14}return 2}function is(e,t){var n=e.alternate;return n===null?(n=ur(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var l=2;if(r=e,typeof e=="function")Og(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Oo:return Vs(n.children,i,o,t);case Qm:l=8,i|=8;break;case bp:return e=ur(12,n,t,i|2),e.elementType=bp,e.lanes=o,e;case Sp:return e=ur(13,n,t,i),e.elementType=Sp,e.lanes=o,e;case Ep:return e=ur(19,n,t,i),e.elementType=Ep,e.lanes=o,e;case W1:return zd(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U1:l=10;break e;case z1:l=9;break e;case Xm:l=11;break e;case Jm:l=14;break e;case Ii:l=16,r=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=ur(l,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Vs(e,t,n,r){return e=ur(7,e,r,t),e.lanes=n,e}function zd(e,t,n,r){return e=ur(22,e,r,t),e.elementType=W1,e.lanes=n,e.stateNode={isHidden:!1},e}function Xh(e,t,n){return e=ur(6,e,null,t),e.lanes=n,e}function Jh(e,t,n){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function PT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mg(e,t,n,r,i,o,l,u,c){return e=new PT(e,t,n,u,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ur(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gg(o),e}function DT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:To,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mb(e){if(!e)return ls;e=e._reactInternals;e:{if(ro(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var n=e.type;if(Cn(n))return M_(e,n,t)}return t}function Rb(e,t,n,r,i,o,l,u,c){return e=Mg(n,r,!0,e,i,o,l,u,c),e.context=Mb(null),n=e.current,r=hn(),i=rs(n),o=fi(r,i),o.callback=t??null,ts(n,o,i),e.current.lanes=i,ql(e,i,r),jn(e,r),e}function Wd(e,t,n,r){var i=t.current,o=hn(),l=rs(i);return n=Mb(n),t.context===null?t.context=n:t.pendingContext=n,t=fi(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ts(i,t,l),e!==null&&(kr(e,i,l,o),jc(e,i,l)),l}function cd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rg(e,t){Zx(e,t),(e=e.alternate)&&Zx(e,t)}function TT(){return null}var $b=typeof reportError=="function"?reportError:function(e){console.error(e)};function $g(e){this._internalRoot=e}Bd.prototype.render=$g.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Wd(e,t,null,null)};Bd.prototype.unmount=$g.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;eo(function(){Wd(null,e,null,null)}),t[gi]=null}};function Bd(e){this._internalRoot=e}Bd.prototype.unstable_scheduleHydration=function(e){if(e){var t=f_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wi.length&&t!==0&&t<Wi[n].priority;n++);Wi.splice(n,0,e),n===0&&p_(e)}};function Ag(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ew(){}function OT(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var h=cd(l);o.call(h)}}var l=Rb(t,r,e,0,null,!1,!1,"",ew);return e._reactRootContainer=l,e[gi]=l.current,jl(e.nodeType===8?e.parentNode:e),eo(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=cd(c);u.call(h)}}var c=Mg(e,0,!1,null,null,!1,!1,"",ew);return e._reactRootContainer=c,e[gi]=c.current,jl(e.nodeType===8?e.parentNode:e),eo(function(){Wd(t,c,n,r)}),c}function qd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var u=i;i=function(){var c=cd(l);u.call(c)}}Wd(t,l,e,i)}else l=OT(n,t,e,i,r);return cd(l)}c_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=el(t.pendingLanes);n!==0&&(tg(t,n|1),jn(t,jt()),!(Je&6)&&(sa=jt()+500,ps()))}break;case 13:eo(function(){var r=vi(e,1);if(r!==null){var i=hn();kr(r,e,1,i)}}),Rg(e,1)}};ng=function(e){if(e.tag===13){var t=vi(e,134217728);if(t!==null){var n=hn();kr(t,e,134217728,n)}Rg(e,134217728)}};d_=function(e){if(e.tag===13){var t=rs(e),n=vi(e,t);if(n!==null){var r=hn();kr(n,e,t,r)}Rg(e,t)}};f_=function(){return st};h_=function(e,t){var n=st;try{return st=e,t()}finally{st=n}};Rp=function(e,t,n){switch(t){case"input":if(Cp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$d(r);if(!i)throw Error(ue(90));H1(r),Cp(r,i)}}}break;case"textarea":G1(e,n);break;case"select":t=n.value,t!=null&&Ho(e,!!n.multiple,t,!1)}};Z1=Pg;e_=eo;var MT={usingClientEntryPoint:!1,Events:[Vl,Ao,$d,X1,J1,Pg]},Va={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RT={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=r_(e),e===null?null:e.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||TT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Td=hc.inject(RT),Wr=hc}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MT;qn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ag(t))throw Error(ue(200));return DT(e,t,null,n)};qn.createRoot=function(e,t){if(!Ag(e))throw Error(ue(299));var n=!1,r="",i=$b;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Mg(e,1,!1,null,null,n,!1,r,i),e[gi]=t.current,jl(e.nodeType===8?e.parentNode:e),new $g(t)};qn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=r_(t),e=e===null?null:e.stateNode,e};qn.flushSync=function(e){return eo(e)};qn.hydrate=function(e,t,n){if(!Hd(t))throw Error(ue(200));return qd(null,e,t,!0,n)};qn.hydrateRoot=function(e,t,n){if(!Ag(e))throw Error(ue(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",l=$b;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Rb(t,null,e,1,n??null,i,!1,o,l),e[gi]=t.current,jl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Bd(t)};qn.render=function(e,t,n){if(!Hd(t))throw Error(ue(200));return qd(null,e,t,!1,n)};qn.unmountComponentAtNode=function(e){if(!Hd(e))throw Error(ue(40));return e._reactRootContainer?(eo(function(){qd(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0):!1};qn.unstable_batchedUpdates=Pg;qn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Hd(n))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return qd(e,t,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(e){console.error(e)}}Ab(),A1.exports=qn;var Hs=A1.exports,Lb,tw=Hs;Lb=tw.createRoot,tw.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ll.apply(this,arguments)}var Ki;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ki||(Ki={}));const nw="popstate";function $T(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:l,hash:u}=r.location;return hm("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:dd(i)}return LT(t,n,null,e)}function Pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ib(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AT(){return Math.random().toString(36).substr(2,8)}function rw(e,t){return{usr:e.state,key:e.key,idx:t}}function hm(e,t,n,r){return n===void 0&&(n=null),Ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ha(t):t,{state:n,key:t&&t.key||r||AT()})}function dd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ha(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function LT(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u=Ki.Pop,c=null,h=p();h==null&&(h=0,l.replaceState(Ll({},l.state,{idx:h}),""));function p(){return(l.state||{idx:null}).idx}function m(){u=Ki.Pop;let j=p(),b=j==null?null:j-h;h=j,c&&c({action:u,location:C.location,delta:b})}function y(j,b){u=Ki.Push;let _=hm(C.location,j,b);h=p()+1;let N=rw(_,h),P=C.createHref(_);try{l.pushState(N,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(P)}o&&c&&c({action:u,location:C.location,delta:1})}function x(j,b){u=Ki.Replace;let _=hm(C.location,j,b);h=p();let N=rw(_,h),P=C.createHref(_);l.replaceState(N,"",P),o&&c&&c({action:u,location:C.location,delta:0})}function S(j){let b=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof j=="string"?j:dd(j);return _=_.replace(/ $/,"%20"),Pt(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let C={get action(){return u},get location(){return e(i,l)},listen(j){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(nw,m),c=j,()=>{i.removeEventListener(nw,m),c=null}},createHref(j){return t(i,j)},createURL:S,encodeLocation(j){let b=S(j);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:y,replace:x,go(j){return l.go(j)}};return C}var iw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(iw||(iw={}));function IT(e,t,n){return n===void 0&&(n="/"),FT(e,t,n,!1)}function FT(e,t,n,r){let i=typeof t=="string"?ha(t):t,o=Lg(i.pathname||"/",n);if(o==null)return null;let l=Fb(e);UT(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=XT(o);u=KT(l[c],h,r)}return u}function Fb(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Pt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=ss([r,c.relativePath]),p=n.concat(c);o.children&&o.children.length>0&&(Pt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Fb(o.children,t,p,h)),!(o.path==null&&!o.index)&&t.push({path:h,score:VT(h,o.index),routesMeta:p})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let c of Ub(o.path))i(o,l,c)}),t}function Ub(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=Ub(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...l),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function UT(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:YT(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zT=/^:[\w-]+$/,WT=3,BT=2,HT=1,qT=10,GT=-2,sw=e=>e==="*";function VT(e,t){let n=e.split("/"),r=n.length;return n.some(sw)&&(r+=GT),t&&(r+=BT),n.filter(i=>!sw(i)).reduce((i,o)=>i+(zT.test(o)?WT:o===""?HT:qT),r)}function YT(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function KT(e,t,n){let{routesMeta:r}=e,i={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=ow({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),y=c.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=ow({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:ss([o,m.pathname]),pathnameBase:tO(ss([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=ss([o,m.pathnameBase]))}return l}function ow(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=QT(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:y,isOptional:x}=p;if(y==="*"){let C=u[m]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const S=u[m];return x&&!S?h[y]=void 0:h[y]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:e}}function QT(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ib(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function XT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ib(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Lg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function JT(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ha(e):e;return{pathname:n?n.startsWith("/")?n:ZT(n,t):t,search:nO(r),hash:rO(i)}}function ZT(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ig(e,t){let n=eO(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Fg(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ha(e):(i=Ll({},e),Pt(!i.pathname||!i.pathname.includes("?"),Zh("?","pathname","search",i)),Pt(!i.pathname||!i.pathname.includes("#"),Zh("#","pathname","hash",i)),Pt(!i.search||!i.search.includes("#"),Zh("#","search","hash",i)));let o=e===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let m=t.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?t[m]:"/"}let c=JT(i,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const ss=e=>e.join("/").replace(/\/\/+/g,"/"),tO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const zb=["post","put","patch","delete"];new Set(zb);const sO=["get",...zb];new Set(sO);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Il.apply(this,arguments)}const Ug=v.createContext(null),oO=v.createContext(null),ms=v.createContext(null),Gd=v.createContext(null),_i=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Wb=v.createContext(null);function aO(e,t){let{relative:n}=t===void 0?{}:t;pa()||Pt(!1);let{basename:r,navigator:i}=v.useContext(ms),{hash:o,pathname:l,search:u}=qb(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:ss([r,l])),i.createHref({pathname:c,search:u,hash:o})}function pa(){return v.useContext(Gd)!=null}function bi(){return pa()||Pt(!1),v.useContext(Gd).location}function Bb(e){v.useContext(ms).static||v.useLayoutEffect(e)}function Gr(){let{isDataRoute:e}=v.useContext(_i);return e?wO():lO()}function lO(){pa()||Pt(!1);let e=v.useContext(Ug),{basename:t,future:n,navigator:r}=v.useContext(ms),{matches:i}=v.useContext(_i),{pathname:o}=bi(),l=JSON.stringify(Ig(i,n.v7_relativeSplatPath)),u=v.useRef(!1);return Bb(()=>{u.current=!0}),v.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let m=Fg(h,JSON.parse(l),o,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ss([t,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[t,r,l,o,e])}function Hb(){let{matches:e}=v.useContext(_i),t=e[e.length-1];return t?t.params:{}}function qb(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=v.useContext(ms),{matches:i}=v.useContext(_i),{pathname:o}=bi(),l=JSON.stringify(Ig(i,r.v7_relativeSplatPath));return v.useMemo(()=>Fg(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function uO(e,t){return cO(e,t)}function cO(e,t,n,r){pa()||Pt(!1);let{navigator:i}=v.useContext(ms),{matches:o}=v.useContext(_i),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let h=bi(),p;if(t){var m;let j=typeof t=="string"?ha(t):t;c==="/"||(m=j.pathname)!=null&&m.startsWith(c)||Pt(!1),p=j}else p=h;let y=p.pathname||"/",x=y;if(c!=="/"){let j=c.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(j.length).join("/")}let S=IT(e,{pathname:x}),C=mO(S&&S.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:ss([c,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:ss([c,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,r);return t&&C?v.createElement(Gd.Provider,{value:{location:Il({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ki.Pop}},C):C}function dO(){let e=xO(),t=iO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:i},n):null,null)}const fO=v.createElement(dO,null);class hO extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(_i.Provider,{value:this.props.routeContext},v.createElement(Wb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pO(e){let{routeContext:t,match:n,children:r}=e,i=v.useContext(Ug);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(_i.Provider,{value:t},r)}function mO(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=l.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);p>=0||Pt(!1),l=l.slice(0,Math.min(l.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<l.length;p++){let m=l[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:y,errors:x}=n,S=m.route.loader&&y[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||S){c=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((p,m,y)=>{let x,S=!1,C=null,j=null;n&&(x=u&&m.route.id?u[m.route.id]:void 0,C=m.route.errorElement||fO,c&&(h<0&&y===0?(S=!0,j=null):h===y&&(S=!0,j=m.route.hydrateFallbackElement||null)));let b=t.concat(l.slice(0,y+1)),_=()=>{let N;return x?N=C:S?N=j:m.route.Component?N=v.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=p,v.createElement(pO,{match:m,routeContext:{outlet:p,matches:b,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?v.createElement(hO,{location:n.location,revalidation:n.revalidation,component:C,error:x,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var Gb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Gb||{}),fd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fd||{});function gO(e){let t=v.useContext(Ug);return t||Pt(!1),t}function vO(e){let t=v.useContext(oO);return t||Pt(!1),t}function yO(e){let t=v.useContext(_i);return t||Pt(!1),t}function Vb(e){let t=yO(),n=t.matches[t.matches.length-1];return n.route.id||Pt(!1),n.route.id}function xO(){var e;let t=v.useContext(Wb),n=vO(fd.UseRouteError),r=Vb(fd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function wO(){let{router:e}=gO(Gb.UseNavigateStable),t=Vb(fd.UseNavigateStable),n=v.useRef(!1);return Bb(()=>{n.current=!0}),v.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Il({fromRouteId:t},o)))},[e,t])}const aw={};function _O(e,t){aw[t]||(aw[t]=!0,console.warn(t))}const lw=(e,t,n)=>_O(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function bO(e,t){e!=null&&e.v7_startTransition||lw("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&lw("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function SO(e){let{to:t,replace:n,state:r,relative:i}=e;pa()||Pt(!1);let{future:o,static:l}=v.useContext(ms),{matches:u}=v.useContext(_i),{pathname:c}=bi(),h=Gr(),p=Fg(t,Ig(u,o.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(p);return v.useEffect(()=>h(JSON.parse(m),{replace:n,state:r,relative:i}),[h,m,i,n,r]),null}function oi(e){Pt(!1)}function EO(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ki.Pop,navigator:o,static:l=!1,future:u}=e;pa()&&Pt(!1);let c=t.replace(/^\/*/,"/"),h=v.useMemo(()=>({basename:c,navigator:o,static:l,future:Il({v7_relativeSplatPath:!1},u)}),[c,u,o,l]);typeof r=="string"&&(r=ha(r));let{pathname:p="/",search:m="",hash:y="",state:x=null,key:S="default"}=r,C=v.useMemo(()=>{let j=Lg(p,c);return j==null?null:{location:{pathname:j,search:m,hash:y,state:x,key:S},navigationType:i}},[c,p,m,y,x,S,i]);return C==null?null:v.createElement(ms.Provider,{value:h},v.createElement(Gd.Provider,{children:n,value:C}))}function NO(e){let{children:t,location:n}=e;return uO(pm(t),n)}new Promise(()=>{});function pm(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(r,i)=>{if(!v.isValidElement(r))return;let o=[...t,i];if(r.type===v.Fragment){n.push.apply(n,pm(r.props.children,o));return}r.type!==oi&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=pm(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mm.apply(this,arguments)}function kO(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function CO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jO(e,t){return e.button===0&&(!t||t==="_self")&&!CO(e)}function gm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function PO(e,t){let n=gm(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const DO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TO="6";try{window.__reactRouterVersion=TO}catch{}const OO="startTransition",uw=wp[OO];function MO(e){let{basename:t,children:n,future:r,window:i}=e,o=v.useRef();o.current==null&&(o.current=$T({window:i,v5Compat:!0}));let l=o.current,[u,c]=v.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},p=v.useCallback(m=>{h&&uw?uw(()=>c(m)):c(m)},[c,h]);return v.useLayoutEffect(()=>l.listen(p),[l,p]),v.useEffect(()=>bO(r),[r]),v.createElement(EO,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const RO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,os=v.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:p,viewTransition:m}=t,y=kO(t,DO),{basename:x}=v.useContext(ms),S,C=!1;if(typeof h=="string"&&$O.test(h)&&(S=h,RO))try{let N=new URL(window.location.href),P=h.startsWith("//")?new URL(N.protocol+h):new URL(h),M=Lg(P.pathname,x);P.origin===N.origin&&M!=null?h=M+P.search+P.hash:C=!0}catch{}let j=aO(h,{relative:i}),b=AO(h,{replace:l,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:m});function _(N){r&&r(N),N.defaultPrevented||b(N)}return v.createElement("a",mm({},y,{href:S||j,onClick:C||o?r:_,ref:n,target:c}))});var cw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(cw||(cw={}));var dw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dw||(dw={}));function AO(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:u}=t===void 0?{}:t,c=Gr(),h=bi(),p=qb(e,{relative:l});return v.useCallback(m=>{if(jO(m,n)){m.preventDefault();let y=r!==void 0?r:dd(h)===dd(p);c(e,{replace:y,state:i,preventScrollReset:o,relative:l,viewTransition:u})}},[h,c,p,r,i,n,e,o,l,u])}function Yb(e){let t=v.useRef(gm(e)),n=v.useRef(!1),r=bi(),i=v.useMemo(()=>PO(r.search,n.current?null:t.current),[r.search]),o=Gr(),l=v.useCallback((u,c)=>{const h=gm(typeof u=="function"?u(i):u);n.current=!0,o("?"+h,c)},[o,i]);return[i,l]}let LO={data:""},IO=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||LO,FO=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,UO=/\/\*[^]*?\*\/|  +/g,fw=/\n+/g,Hi=(e,t)=>{let n="",r="",i="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":r+=o[1]=="f"?Hi(l,o):o+"{"+Hi(l,o[1]=="k"?"":t)+"}":typeof l=="object"?r+=Hi(l,t?t.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,u):u?u+" "+c:c)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Hi.p?Hi.p(o,l):o+":"+l+";")}return n+(t&&i?t+"{"+i+"}":i)+r},ii={},Kb=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Kb(e[n]);return t}return e},zO=(e,t,n,r,i)=>{let o=Kb(e),l=ii[o]||(ii[o]=(c=>{let h=0,p=11;for(;h<c.length;)p=101*p+c.charCodeAt(h++)>>>0;return"go"+p})(o));if(!ii[l]){let c=o!==e?e:(h=>{let p,m,y=[{}];for(;p=FO.exec(h.replace(UO,""));)p[4]?y.shift():p[3]?(m=p[3].replace(fw," ").trim(),y.unshift(y[0][m]=y[0][m]||{})):y[0][p[1]]=p[2].replace(fw," ").trim();return y[0]})(e);ii[l]=Hi(i?{["@keyframes "+l]:c}:c,n?"":"."+l)}let u=n&&ii.g?ii.g:null;return n&&(ii.g=ii[l]),((c,h,p,m)=>{m?h.data=h.data.replace(m,c):h.data.indexOf(c)===-1&&(h.data=p?c+h.data:h.data+c)})(ii[l],t,r,u),l},WO=(e,t,n)=>e.reduce((r,i,o)=>{let l=t[o];if(l&&l.call){let u=l(n),c=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=c?"."+c:u&&typeof u=="object"?u.props?"":Hi(u,""):u===!1?"":u}return r+i+(l??"")},"");function Vd(e){let t=this||{},n=e.call?e(t.p):e;return zO(n.unshift?n.raw?WO(n,[].slice.call(arguments,1),t.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):n,IO(t.target),t.g,t.o,t.k)}let Qb,vm,ym;Vd.bind({g:1});let xi=Vd.bind({k:1});function BO(e,t,n,r){Hi.p=t,Qb=e,vm=n,ym=r}function gs(e,t){let n=this||{};return function(){let r=arguments;function i(o,l){let u=Object.assign({},o),c=u.className||i.className;n.p=Object.assign({theme:vm&&vm()},u),n.o=/ *go\d+/.test(c),u.className=Vd.apply(n,r)+(c?" "+c:"");let h=e;return e[0]&&(h=u.as||e,delete u.as),ym&&h[0]&&ym(u),Qb(h,u)}return i}}var HO=e=>typeof e=="function",hd=(e,t)=>HO(e)?e(t):e,qO=(()=>{let e=0;return()=>(++e).toString()})(),Xb=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),GO=20,$c=new Map,VO=1e3,hw=e=>{if($c.has(e))return;let t=setTimeout(()=>{$c.delete(e),io({type:4,toastId:e})},VO);$c.set(e,t)},YO=e=>{let t=$c.get(e);t&&clearTimeout(t)},xm=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,GO)};case 1:return t.toast.id&&YO(t.toast.id),{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return e.toasts.find(o=>o.id===n.id)?xm(e,{type:1,toast:n}):xm(e,{type:0,toast:n});case 3:let{toastId:r}=t;return r?hw(r):e.toasts.forEach(o=>{hw(o.id)}),{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ac=[],Lc={toasts:[],pausedAt:void 0},io=e=>{Lc=xm(Lc,e),Ac.forEach(t=>{t(Lc)})},KO={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},QO=(e={})=>{let[t,n]=v.useState(Lc);v.useEffect(()=>(Ac.push(n),()=>{let i=Ac.indexOf(n);i>-1&&Ac.splice(i,1)}),[t]);let r=t.toasts.map(i=>{var o,l;return{...e,...e[i.type],...i,duration:i.duration||((o=e[i.type])==null?void 0:o.duration)||(e==null?void 0:e.duration)||KO[i.type],style:{...e.style,...(l=e[i.type])==null?void 0:l.style,...i.style}}});return{...t,toasts:r}},XO=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||qO()}),Kl=e=>(t,n)=>{let r=XO(t,e,n);return io({type:2,toast:r}),r.id},q=(e,t)=>Kl("blank")(e,t);q.error=Kl("error");q.success=Kl("success");q.loading=Kl("loading");q.custom=Kl("custom");q.dismiss=e=>{io({type:3,toastId:e})};q.remove=e=>io({type:4,toastId:e});q.promise=(e,t,n)=>{let r=q.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(i=>(q.success(hd(t.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{q.error(hd(t.error,i),{id:r,...n,...n==null?void 0:n.error})}),e};var JO=(e,t)=>{io({type:1,toast:{id:e,height:t}})},ZO=()=>{io({type:5,time:Date.now()})},eM=e=>{let{toasts:t,pausedAt:n}=QO(e);v.useEffect(()=>{if(n)return;let o=Date.now(),l=t.map(u=>{if(u.duration===1/0)return;let c=(u.duration||0)+u.pauseDuration-(o-u.createdAt);if(c<0){u.visible&&q.dismiss(u.id);return}return setTimeout(()=>q.dismiss(u.id),c)});return()=>{l.forEach(u=>u&&clearTimeout(u))}},[t,n]);let r=v.useCallback(()=>{n&&io({type:6,time:Date.now()})},[n]),i=v.useCallback((o,l)=>{let{reverseOrder:u=!1,gutter:c=8,defaultPosition:h}=l||{},p=t.filter(x=>(x.position||h)===(o.position||h)&&x.height),m=p.findIndex(x=>x.id===o.id),y=p.filter((x,S)=>S<m&&x.visible).length;return p.filter(x=>x.visible).slice(...u?[y+1]:[0,y]).reduce((x,S)=>x+(S.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:JO,startPause:ZO,endPause:r,calculateOffset:i}}},tM=xi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,nM=xi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rM=xi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,iM=gs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${nM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${rM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,sM=xi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,oM=gs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${sM} 1s linear infinite;
`,aM=xi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,lM=xi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,uM=gs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${lM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,cM=gs("div")`
  position: absolute;
`,dM=gs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,fM=xi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hM=gs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${fM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pM=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?v.createElement(hM,null,t):t:n==="blank"?null:v.createElement(dM,null,v.createElement(oM,{...r}),n!=="loading"&&v.createElement(cM,null,n==="error"?v.createElement(iM,{...r}):v.createElement(uM,{...r})))},mM=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,gM=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,vM="0%{opacity:0;} 100%{opacity:1;}",yM="0%{opacity:1;} 100%{opacity:0;}",xM=gs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,wM=gs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,_M=(e,t)=>{let n=e.includes("top")?1:-1,[r,i]=Xb()?[vM,yM]:[mM(n),gM(n)];return{animation:t?`${xi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},bM=v.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?_M(e.position||t||"top-center",e.visible):{opacity:0},o=v.createElement(pM,{toast:e}),l=v.createElement(wM,{...e.ariaProps},hd(e.message,e));return v.createElement(xM,{className:e.className,style:{...i,...n,...e.style}},typeof r=="function"?r({icon:o,message:l}):v.createElement(v.Fragment,null,o,l))});BO(v.createElement);var SM=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let o=v.useCallback(l=>{if(l){let u=()=>{let c=l.getBoundingClientRect().height;r(e,c)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return v.createElement("div",{ref:o,className:t,style:n},i)},EM=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}},NM=Vd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,pc=16,kM=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,containerStyle:o,containerClassName:l})=>{let{toasts:u,handlers:c}=eM(n);return v.createElement("div",{style:{position:"fixed",zIndex:9999,top:pc,left:pc,right:pc,bottom:pc,pointerEvents:"none",...o},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(h=>{let p=h.position||t,m=c.calculateOffset(h,{reverseOrder:e,gutter:r,defaultPosition:t}),y=EM(p,m);return v.createElement(SM,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?NM:"",style:y},h.type==="custom"?hd(h.message,h):i?i(h):v.createElement(bM,{toast:h,position:p}))}))};const CM="modulepreload",jM=function(e){return"/"+e},pw={},oa=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=jM(c),c in pw)return;pw[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":CM,h||(m.as="script"),m.crossOrigin="",m.href=c,u&&m.setAttribute("nonce",u),document.head.appendChild(m),h)return new Promise((y,x)=>{m.addEventListener("load",y),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},PM=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>oa(async()=>{const{default:r}=await Promise.resolve().then(()=>ma);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class zg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class DM extends zg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class TM extends zg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class OM extends zg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wm||(wm={}));var MM=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};class RM{constructor(t,{headers:n={},customFetch:r,region:i=wm.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=PM(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return MM(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:l}=n;let u={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(u["x-region"]=c);let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const p=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h}).catch(S=>{throw new DM(S)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new TM(p);if(!p.ok)throw new OM(p);let y=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield p.json():y==="application/octet-stream"?x=yield p.blob():y==="text/event-stream"?x=p:y==="multipart/form-data"?x=yield p.formData():x=yield p.text(),{data:x,error:null}}catch(i){return{data:null,error:i}}})}}var En={},Wg={},Yd={},Ql={},Kd={},Qd={},$M=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},aa=$M();const AM=aa.fetch,Jb=aa.fetch.bind(aa),Zb=aa.Headers,LM=aa.Request,IM=aa.Response,ma=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zb,Request:LM,Response:IM,default:Jb,fetch:AM},Symbol.toStringTag,{value:"Module"})),FM=u4(ma);var Xd={};Object.defineProperty(Xd,"__esModule",{value:!0});class UM extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Xd.default=UM;var eS=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qd,"__esModule",{value:!0});const zM=eS(FM),WM=eS(Xd);let BM=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zM.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var l,u,c;let h=null,p=null,m=null,y=o.status,x=o.statusText;if(o.ok){if(this.method!=="HEAD"){const b=await o.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=b:p=JSON.parse(b))}const C=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),j=(u=o.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");C&&j&&j.length>1&&(m=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,y=406,x="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const C=await o.text();try{h=JSON.parse(C),Array.isArray(h)&&o.status===404&&(p=[],h=null,y=200,x="OK")}catch{o.status===404&&C===""?(y=204,x="No Content"):h={message:C}}if(h&&this.isMaybeSingle&&(!((c=h==null?void 0:h.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,y=200,x="OK"),h&&this.shouldThrowOnError)throw new WM.default(h)}return{error:h,data:p,count:m,status:y,statusText:x}});return this.shouldThrowOnError||(i=i.catch(o=>{var l,u,c;return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(u=o==null?void 0:o.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}};Qd.default=BM;var HM=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kd,"__esModule",{value:!0});const qM=HM(Qd);let GM=class extends qM.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(l,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:l="text"}={}){var u;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${h}"; options=${c};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Kd.default=GM;var VM=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ql,"__esModule",{value:!0});const YM=VM(Kd);let KM=class extends YM.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${l}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Ql.default=KM;var QM=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yd,"__esModule",{value:!0});const Ya=QM(Ql);let XM=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),r&&(this.headers.Prefer=`count=${r}`),new Ya.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ya.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){const l="POST",u=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),o||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(t)){const c=t.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new Ya.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Ya.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ya.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yd.default=XM;var Jd={},Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.version=void 0;Zd.version="0.0.0-automated";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.DEFAULT_HEADERS=void 0;const JM=Zd;Jd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${JM.version}`};var tS=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wg,"__esModule",{value:!0});const ZM=tS(Yd),eR=tS(Ql),tR=Jd;let nR=class nS{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},tR.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new ZM.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new nS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){let l;const u=new URL(`${this.url}/rpc/${t}`);let c;r||i?(l=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{u.searchParams.append(p,m)})):(l="POST",c=n);const h=Object.assign({},this.headers);return o&&(h.Prefer=`count=${o}`),new eR.default({method:l,url:u,headers:h,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Wg.default=nR;var ga=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(En,"__esModule",{value:!0});En.PostgrestError=En.PostgrestBuilder=En.PostgrestTransformBuilder=En.PostgrestFilterBuilder=En.PostgrestQueryBuilder=En.PostgrestClient=void 0;const rS=ga(Wg);En.PostgrestClient=rS.default;const iS=ga(Yd);En.PostgrestQueryBuilder=iS.default;const sS=ga(Ql);En.PostgrestFilterBuilder=sS.default;const oS=ga(Kd);En.PostgrestTransformBuilder=oS.default;const aS=ga(Qd);En.PostgrestBuilder=aS.default;const lS=ga(Xd);En.PostgrestError=lS.default;var rR=En.default={PostgrestClient:rS.default,PostgrestQueryBuilder:iS.default,PostgrestFilterBuilder:sS.default,PostgrestTransformBuilder:oS.default,PostgrestBuilder:aS.default,PostgrestError:lS.default};const{PostgrestClient:iR,PostgrestQueryBuilder:Pz,PostgrestFilterBuilder:Dz,PostgrestTransformBuilder:Tz,PostgrestBuilder:Oz}=rR,sR="2.10.7",oR={"X-Client-Info":`realtime-js/${sR}`},aR="1.0.0",uS=1e4,lR=1e3;var Qo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qo||(Qo={}));var Fn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Fn||(Fn={}));var br;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(br||(br={}));var _m;(function(e){e.websocket="websocket"})(_m||(_m={}));var Fs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Fs||(Fs={}));class uR{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(t.slice(l,l+i));l=l+i;const c=r.decode(t.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:c,payload:h}}}class cS{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(lt||(lt={}));const mw=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,l)=>(o[l]=cR(l,e,t,i),o),{})},cR=(e,t,n,r)=>{const i=t.find(u=>u.name===e),o=i==null?void 0:i.type,l=n[e];return o&&!r.includes(o)?dS(o,l):bm(l)},dS=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return pR(t,n)}switch(e){case lt.bool:return dR(t);case lt.float4:case lt.float8:case lt.int2:case lt.int4:case lt.int8:case lt.numeric:case lt.oid:return fR(t);case lt.json:case lt.jsonb:return hR(t);case lt.timestamp:return mR(t);case lt.abstime:case lt.date:case lt.daterange:case lt.int4range:case lt.int8range:case lt.money:case lt.reltime:case lt.text:case lt.time:case lt.timestamptz:case lt.timetz:case lt.tsrange:case lt.tstzrange:return bm(t);default:return bm(t)}},bm=e=>e,dR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},hR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},pR=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>dS(t,u))}return e},mR=e=>typeof e=="string"?e.replace(" ","T"):e,fS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ep{constructor(t,n,r={},i=uS){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gw||(gw={}));class hl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hl.syncState(this.state,i,o,l),this.pendingDiffs.forEach(c=>{this.state=hl.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=hl.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const o=this.cloneDeep(t),l=this.transformState(n),u={},c={};return this.map(o,(h,p)=>{l[h]||(c[h]=p)}),this.map(l,(h,p)=>{const m=o[h];if(m){const y=p.map(j=>j.presence_ref),x=m.map(j=>j.presence_ref),S=p.filter(j=>x.indexOf(j.presence_ref)<0),C=m.filter(j=>y.indexOf(j.presence_ref)<0);S.length>0&&(u[h]=S),C.length>0&&(c[h]=C)}else u[h]=p}),this.syncDiff(o,{joins:u,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,c)=>{var h;const p=(h=t[u])!==null&&h!==void 0?h:[];if(t[u]=this.cloneDeep(c),p.length>0){const m=t[u].map(x=>x.presence_ref),y=p.filter(x=>m.indexOf(x.presence_ref)<0);t[u].unshift(...y)}r(u,p,c)}),this.map(l,(u,c)=>{let h=t[u];if(!h)return;const p=c.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),t[u]=h,i(u,h,c),h.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(vw||(vw={}));var yw;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(yw||(yw={}));var xw;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xw||(xw={}));class Bg{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Fn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ep(this,br.join,this.params,this.timeout),this.rejoinTimer=new cS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(br.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new hl(this),this.broadcastEndpointURL=fS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(p=>t&&t("CHANNEL_ERROR",p)),this._onClose(()=>t&&t("CLOSED"));const c={},h={broadcast:o,presence:l,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:u};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:p})=>{var m;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),p===void 0){t&&t("SUBSCRIBED");return}else{const y=this.bindings.postgres_changes,x=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,S=[];for(let C=0;C<x;C++){const j=y[C],{filter:{event:b,schema:_,table:N,filter:P}}=j,M=p&&p[C];if(M&&M.event===b&&M.schema===_&&M.table===N&&M.filter===P)S.push(Object.assign(Object.assign({},j),{id:M.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t("SUBSCRIBED");return}}).receive("error",p=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:l}=t,u={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(br.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new ep(this,br.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ep(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;const l=t.toLocaleLowerCase(),{close:u,error:c,leave:h,join:p}=br;if(r&&[u,c,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var S,C,j;return((S=x.filter)===null||S===void 0?void 0:S.event)==="*"||((j=(C=x.filter)===null||C===void 0?void 0:C.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===l}).map(x=>x.callback(y,r)):(o=this.bindings[l])===null||o===void 0||o.filter(x=>{var S,C,j,b,_,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const P=x.id,M=(S=x.filter)===null||S===void 0?void 0:S.event;return P&&((C=n.ids)===null||C===void 0?void 0:C.includes(P))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const P=(_=(b=x==null?void 0:x.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return P==="*"||P===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:C,table:j,commit_timestamp:b,type:_,errors:N}=S;y=Object.assign(Object.assign({},{schema:C,table:j,commit_timestamp:b,eventType:_,new:{},old:{},errors:N}),this._getPayloadRecords(S))}x.callback(y,r)})}_isClosed(){return this.state===Fn.closed}_isJoined(){return this.state===Fn.joined}_isJoining(){return this.state===Fn.joining}_isLeaving(){return this.state===Fn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Bg.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(br.close,{},t)}_onError(t){this._on(br.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=mw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=mw(t.columns,t.old_record)),n}}const gR=()=>{},vR=typeof WebSocket<"u",yR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xR{constructor(t,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=oR,this.params={},this.timeout=uS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=gR,this.conn=null,this.sendBuffer=[],this.serializer=new uR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>oa(async()=>{const{default:c}=await Promise.resolve().then(()=>ma);return{default:c}},void 0).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${t}/${_m.websocket}`,this.httpEndpoint=fS(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,l)=>l(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new cS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(vR){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new wR(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),oa(async()=>{const{default:t}=await import("./browser-DztoBsX7.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qo.connecting:return Fs.Connecting;case Qo.open:return Fs.Open;case Qo.closing:return Fs.Closing;default:return Fs.Closed}}isConnected(){return this.connectionState()===Fs.Open}channel(t,n={config:{}}){const r=new Bg(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:o}=t,l=()=>{this.encode(t,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(br.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aR}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:o,ref:l}=n;(l&&l===this.pendingHeartbeatRef||i===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(br.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(lR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([yR],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class wR{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qo.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class Hg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class _R extends Hg{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Sm extends Hg{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var bR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};const hS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>oa(async()=>{const{default:r}=await Promise.resolve().then(()=>ma);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},SR=()=>bR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield oa(()=>Promise.resolve().then(()=>ma),void 0)).Response:Response}),Em=e=>{if(Array.isArray(e))return e.map(n=>Em(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Em(r)}),t};var so=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};const tp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ER=(e,t,n)=>so(void 0,void 0,void 0,function*(){const r=yield SR();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new _R(tp(i),e.status||500))}).catch(i=>{t(new Sm(tp(i),i))}):t(new Sm(tp(e),e))}),NR=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Xl(e,t,n,r,i,o){return so(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(n,NR(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>ER(c,u,r))})})}function pd(e,t,n,r){return so(this,void 0,void 0,function*(){return Xl(e,"GET",t,n,r)})}function Ui(e,t,n,r,i){return so(this,void 0,void 0,function*(){return Xl(e,"POST",t,r,i,n)})}function kR(e,t,n,r,i){return so(this,void 0,void 0,function*(){return Xl(e,"PUT",t,r,i,n)})}function CR(e,t,n,r){return so(this,void 0,void 0,function*(){return Xl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function pS(e,t,n,r,i){return so(this,void 0,void 0,function*(){return Xl(e,"DELETE",t,r,i,n)})}var bn=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};const jR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ww={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class PR{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=hS(i)}uploadOrUpdate(t,n,r,i){return bn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},ww),i);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const h=this._removeEmptyFolders(n),p=this._getFinalPath(h),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),y=yield m.json();return m.ok?{data:{path:h,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(o){if(zt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return bn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:ww.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const m=yield this.fetch(u.toString(),{method:"PUT",body:c,headers:p}),y=yield m.json();return m.ok?{data:{path:o,fullPath:y.Key},error:null}:{data:null,error:y}}catch(c){if(zt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return bn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Ui(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new Hg("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}})}update(t,n,r){return bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return bn(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(zt(i))return{data:null,error:i};throw i}})}copy(t,n,r){return bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ui(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(zt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return bn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Ui(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(i){if(zt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return bn(this,void 0,void 0,function*(){try{const i=yield Ui(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(i){if(zt(i))return{data:null,error:i};throw i}})}download(t,n){return bn(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(t);return{data:yield(yield pd(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(zt(u))return{data:null,error:u};throw u}})}info(t){return bn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield pd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Em(r),error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}})}exists(t){return bn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield CR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(zt(r)&&r instanceof Sm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(t){return bn(this,void 0,void 0,function*(){try{return{data:yield pS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}})}list(t,n,r){return bn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},jR),n),{prefix:t||""});return{data:yield Ui(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(zt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const DR="2.7.1",TR={"X-Client-Info":`storage-js/${DR}`};var Co=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};class OR{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},TR),n),this.fetch=hS(r)}listBuckets(){return Co(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}})}getBucket(t){return Co(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Co(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Co(this,void 0,void 0,function*(){try{return{data:yield kR(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Co(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Co(this,void 0,void 0,function*(){try{return{data:yield pS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}})}}class MR extends OR{constructor(t,n={},r){super(t,n,r)}from(t){return new PR(this.url,this.headers,t,this.fetch)}}const RR="2.46.1";let nl="";typeof Deno<"u"?nl="deno":typeof document<"u"?nl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nl="react-native":nl="node";const $R={"X-Client-Info":`supabase-js-${nl}/${RR}`},AR={headers:$R},LR={schema:"public"},IR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},FR={};var UR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};const zR=e=>{let t;return e?t=e:typeof fetch>"u"?t=Jb:t=fetch,(...n)=>t(...n)},WR=()=>typeof Headers>"u"?Zb:Headers,BR=(e,t,n)=>{const r=zR(n),i=WR();return(o,l)=>UR(void 0,void 0,void 0,function*(){var u;const c=(u=yield t())!==null&&u!==void 0?u:e;let h=new i(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var HR=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};function qR(e){return e.replace(/\/$/,"")}function GR(e,t){const{db:n,auth:r,realtime:i,global:o}=e,{db:l,auth:u,realtime:c,global:h}=t,p={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},h),o),accessToken:()=>HR(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const mS="2.65.1",VR="http://localhost:9999",YR="supabase.auth.token",KR={"X-Client-Info":`gotrue-js/${mS}`},_w=10,Nm="X-Supabase-Api-Version",gS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function QR(e){return Math.round(Date.now()/1e3)+e}function XR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const xr=()=>typeof document<"u",Ts={tested:!1,writable:!1},pl=()=>{if(!xr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ts.tested)return Ts.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ts.tested=!0,Ts.writable=!0}catch{Ts.tested=!0,Ts.writable=!1}return Ts.writable};function np(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const vS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>oa(async()=>{const{default:r}=await Promise.resolve().then(()=>ma);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},JR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yS=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},mc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gc=async(e,t)=>{await e.removeItem(t)};function ZR(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,o,l,u,c,h,p=0;for(e=e.replace("-","+").replace("_","/");p<e.length;)l=t.indexOf(e.charAt(p++)),u=t.indexOf(e.charAt(p++)),c=t.indexOf(e.charAt(p++)),h=t.indexOf(e.charAt(p++)),r=l<<2|u>>4,i=(u&15)<<4|c>>2,o=(c&3)<<6|h,n=n+String.fromCharCode(r),c!=64&&i!=0&&(n=n+String.fromCharCode(i)),h!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class ef{constructor(){this.promise=new ef.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}ef.promiseConstructor=Promise;function bw(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(ZR(r))}async function e$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function t$(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){i(l);return}}})()})}function n$(e){return("0"+e.toString(16)).substr(-2)}function r$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,n$).join("")}async function i$(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function s$(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function o$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await i$(e);return s$(n)}async function jo(e,t,n=!1){const r=r$();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await yS(e,`${t}-code-verifier`,i);const o=await o$(r);return[o,r===o?"plain":"s256"]}const a$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function l$(e){const t=e.headers.get(Nm);if(!t||!t.match(a$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class qg extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ze(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class u$ extends qg{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function c$(e){return ze(e)&&e.name==="AuthApiError"}class xS extends qg{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class oo extends qg{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Ai extends oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d$(e){return ze(e)&&e.name==="AuthSessionMissingError"}class rp extends oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vc extends oo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yc extends oo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sw extends oo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class km extends oo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ip(e){return ze(e)&&e.name==="AuthRetryableFetchError"}class Ew extends oo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var f$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const As=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),h$=[502,503,504];async function Nw(e){var t;if(!JR(e))throw new km(As(e),0);if(h$.includes(e.status))throw new km(As(e),e.status);let n;try{n=await e.json()}catch(o){throw new xS(As(o),o)}let r;const i=l$(e);if(i&&i.getTime()>=gS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ew(As(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ai}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Ew(As(n),e.status,n.weak_password.reasons);throw new u$(As(n),e.status||500,r)}const p$=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ge(e,t,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Nm]||(o[Nm]=gS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await m$(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function m$(e,t,n,r,i,o){const l=p$(t,r,i,o);let u;try{u=await e(n,Object.assign({},l))}catch(c){throw console.error(c),new km(As(c),0)}if(u.ok||await Nw(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Nw(c)}}function Li(e){var t;let n=null;x$(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=QR(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function kw(e){const t=Li(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function g$(e){return{data:e,error:null}}function v$(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,l=f$(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function y$(e){return e}function x$(e){return e.access_token&&e.refresh_token&&e.expires_in}var w$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class _${constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=vS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qi})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=w$(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:v$,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ze(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qi})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},p=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:y$});if(p.error)throw p.error;const m=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(S.split(";")[1].split("=")[1]);h[`${j}Page`]=C}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(ze(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qi})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qi})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qi})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}const b$={getItem:e=>pl()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{pl()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{pl()&&globalThis.localStorage.removeItem(e)}};function Cw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function S$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Po={debug:!!(globalThis&&pl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class E$ extends wS{}async function N$(e,t,n){Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Po.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new E$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Po.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}S$();const k$={url:VR,storageKey:YR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:KR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ka=30*1e3,jw=3;async function Pw(e,t,n){return await n()}class Fl{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fl.nextInstanceID,Fl.nextInstanceID+=1,this.instanceID>0&&xr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},k$),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _$({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vS(i.fetch),this.lock=i.lock||Pw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:xr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=N$:this.lock=Pw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:pl()?this.storage=b$:(this.memoryStorage={},this.storage=Cw(this.memoryStorage)):(this.memoryStorage={},this.storage=Cw(this.memoryStorage)),xr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=xr()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ze(t)?{error:t}:{error:new xS("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const o=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Li}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(ze(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,i;try{let o;if("email"in t){const{email:p,password:m,options:y}=t;let x=null,S=null;this.flowType==="pkce"&&([x,S]=await jo(this.storage,this.storageKey)),o=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:m,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:S},xform:Li})}else if("phone"in t){const{phone:p,password:m,options:y}=t;o=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Li})}else throw new vc("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(ze(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:kw})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:kw})}else throw new vc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new rp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await mc(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:l}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Li});if(await gc(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new rp}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(ze(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=t,u=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Li}),{data:c,error:h}=u;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new rp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,o,l;try{if("email"in t){const{email:u,options:c}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await jo(this.storage,this.storageKey));const{error:m}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:u,options:c}=t,{data:h,error:p}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new vc("You must provide either an email or phone number.")}catch(u){if(ze(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var n,r;try{let i,o;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Li});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,h=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await jo(this.storage,this.storageKey)),await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:g$})}catch(o){if(ze(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ai;const{error:i}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:o}=t,{error:l}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:i,options:o}=t,{data:l,error:u}=await Ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new vc("You must provide either an email or phone number and a type")}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await mc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,p)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,p))})}return{data:{session:t},error:null}}const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qi}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ai}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:qi})})}catch(n){if(ze(n))return d$(n)&&(await this._removeSession(),await gc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Ai;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&t.email!=null&&([u,c]=await jo(this.storage,this.storageKey));const{data:h,error:p}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:qi});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return bw(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ai;const n=Date.now()/1e3;let r=n,i=!0,o=null;const l=bw(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{session:u,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(ze(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ai;const{session:i,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ze(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!xr())throw new yc("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new yc("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Sw("Not a valid PKCE flow url.");const n=np(window.location.href);if(t){if(!n.code)throw new Sw("No code detected.");const{data:_,error:N}=await this._exchangeCodeForSession(n.code);if(N)throw N;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:_.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new yc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:h}=n;if(!o||!u||!l||!h)throw new yc("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let y=p+m;c&&(y=parseInt(c));const x=y-p;x*1e3<=Ka&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const S=y-m;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,p);const{data:C,error:j}=await this._getUser(o);if(j)throw j;const b={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:m,expires_at:y,refresh_token:l,token_type:h,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:n.type},error:null}}catch(n){if(ze(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=np(window.location.href);return!!(xr()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=np(window.location.href),n=await mc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{error:o};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(c$(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await gc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=XR(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await jo(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(ze(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,c,h,p;const{data:m,error:y}=o;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",x,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return xr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ze(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await t$(async i=>(i>0&&await e$(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Li})),(i,o)=>{const l=200*Math.pow(2,i);return o&&ip(o)&&Date.now()+l-r<Ka})}catch(r){if(this._debug(n,"error",r),ze(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),xr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await mc(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),o=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<i+_w;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${_w}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:l}=await this._callRefreshToken(r.refresh_token);l&&(console.error(l),ip(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ef;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new Ai;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),ze(o)){const l={session:null,error:o};return ip(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await yS(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await gc(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&xr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ka);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Ka);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ka}ms, refresh threshold is ${jw} ticks`),i<=jw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof wS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await jo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:h}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?{data:null,error:o}:await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ze(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:o}=t;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}Fl.nextInstanceID=0;const C$=Fl;class j$ extends C${constructor(t){super(t)}}var P$=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function c(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((r=r.apply(e,t||[])).next())})};class D${constructor(t,n,r){var i,o,l;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=qR(t);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:LR,realtime:FR,auth:Object.assign(Object.assign({},IR),{storageKey:c}),global:AR},p=GR(r??{},h);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=BR(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new iR(`${u}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new RM(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new MR(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return P$(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:o,flowType:l,lock:u,debug:c},h,p){var m;const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new j$({url:this.authUrl,headers:Object.assign(Object.assign({},y),h),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:l,lock:u,debug:c,fetch:p,hasCustomAuthorizationHeader:(m="Authorization"in this.headers)!==null&&m!==void 0?m:!1})}_initRealtimeClient(t){return new xR(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const T$=(e,t,n)=>new D$(e,t,n),O$="https://vrzgwnchqdxwgennshmu.supabase.co",M$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZyemd3bmNocWR4d2dlbm5zaG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NTEzMzYsImV4cCI6MjA0NzEyNzMzNn0.U8KLDcO9sabudduU9xTFgmbwDBmgULvH0jKY9QN0eeE",oe=T$(O$,M$,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://nimble-alfajores-99f196.netlify.app"}}),R$={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Dw=e=>{let t;const n=new Set,r=(p,m)=>{const y=typeof p=="function"?p(t):p;if(!Object.is(y,t)){const x=t;t=m??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(S=>S(t,x))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(R$?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=t=e(r,i,c);return c},$$=e=>e?Dw(e):Dw;var _S={exports:{}},bS={},SS={exports:{}},ES={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=v;function A$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var L$=typeof Object.is=="function"?Object.is:A$,I$=la.useState,F$=la.useEffect,U$=la.useLayoutEffect,z$=la.useDebugValue;function W$(e,t){var n=t(),r=I$({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return U$(function(){i.value=n,i.getSnapshot=t,sp(i)&&o({inst:i})},[e,n,t]),F$(function(){return sp(i)&&o({inst:i}),e(function(){sp(i)&&o({inst:i})})},[e]),z$(n),n}function sp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!L$(e,n)}catch{return!0}}function B$(e,t){return t()}var H$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?B$:W$;ES.useSyncExternalStore=la.useSyncExternalStore!==void 0?la.useSyncExternalStore:H$;SS.exports=ES;var q$=SS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=v,G$=q$;function V$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Y$=typeof Object.is=="function"?Object.is:V$,K$=G$.useSyncExternalStore,Q$=tf.useRef,X$=tf.useEffect,J$=tf.useMemo,Z$=tf.useDebugValue;bS.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=Q$(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=J$(function(){function c(x){if(!h){if(h=!0,p=x,x=r(x),i!==void 0&&l.hasValue){var S=l.value;if(i(S,x))return m=S}return m=x}if(S=m,Y$(p,x))return S;var C=r(x);return i!==void 0&&i(S,C)?S:(p=x,m=C)}var h=!1,p,m,y=n===void 0?null:n;return[function(){return c(t())},y===null?void 0:function(){return c(y())}]},[t,n,r,i]);var u=K$(e,o[0],o[1]);return X$(function(){l.hasValue=!0,l.value=u},[u]),Z$(u),u};_S.exports=bS;var eA=_S.exports;const tA=E1(eA),NS={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:nA}=xe,{useSyncExternalStoreWithSelector:rA}=tA;let Tw=!1;const iA=e=>e;function sA(e,t=iA,n){(NS?"production":void 0)!=="production"&&n&&!Tw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Tw=!0);const r=rA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return nA(r),r}const Ow=e=>{(NS?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?$$(e):e,n=(r,i)=>sA(t,r,i);return Object.assign(n,t),n},oA=e=>e?Ow(e):Ow,Vn=oA(e=>({user:null,session:null,loading:!0,setUser:t=>{console.log("Setting user in store:",t),e({user:t})},setSession:t=>{console.log("Setting session in store:",t),e({session:t})},signOut:async()=>{try{await oe.auth.signOut(),e({user:null,session:null})}catch(t){console.error("Error signing out:",t)}}}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Tt=(e,t)=>{const n=v.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:c,...h},p)=>v.createElement("svg",{ref:p,...aA,width:i,height:i,stroke:r,strokeWidth:l?Number(o)*24/Number(i):o,className:["lucide",`lucide-${lA(e)}`,u].join(" "),...h},[...t.map(([m,y])=>v.createElement(m,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Tt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Tt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Tt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=Tt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=Tt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Tt("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Tt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Tt("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Tt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=Tt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Tt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=Tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=Tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=Tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function vA(){const[e,t]=v.useState([]),[n,r]=v.useState(!1),i=Gr(),{user:o}=Vn(),[l,u]=v.useState(null);v.useEffect(()=>{if(o)return console.log("Inicializando NotificationBell para usuario:",o.id),c(),h(),()=>{l&&(console.log("Limpiando suscripcin de notificaciones"),l.unsubscribe())}},[o]);const c=async()=>{const{data:m,error:y}=await oe.from("notifications").select("*").eq("user_id",o==null?void 0:o.id).eq("read",!1).order("created_at",{ascending:!1});if(y){console.error("Error fetching notifications:",y);return}t(m||[])},h=async()=>{try{l&&await l.unsubscribe(),console.log("Configurando suscripcin en tiempo real para:",o==null?void 0:o.id);const m=oe.channel(`notifications:${o==null?void 0:o.id}`,{config:{broadcast:{self:!0}}});m.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${o==null?void 0:o.id}`},y=>{console.log("Nueva notificacin recibida:",y);const x=y.new;t(S=>[x,...S]),q.custom(S=>d.jsxs("div",{className:`${S.visible?"animate-enter":"animate-leave"} bg-white shadow-lg rounded-lg p-4 flex items-center space-x-3`,children:[d.jsx(Rw,{className:"h-6 w-6 text-indigo-500"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:x.title}),d.jsx("p",{className:"text-sm text-gray-500",children:x.message})]})]}),{duration:5e3,position:"top-right"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${o==null?void 0:o.id}`},y=>{console.log("Notificacin actualizada:",y),t(x=>x.map(S=>S.id===y.new.id?y.new:S))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:`user_id=eq.${o==null?void 0:o.id}`},y=>{console.log("Notificacin eliminada:",y),t(x=>x.filter(S=>S.id!==y.old.id))}),console.log("Iniciando suscripcin..."),await m.subscribe(y=>{console.log("Estado de suscripcin:",y)}),u(m)}catch(m){console.error("Error al configurar suscripcin en tiempo real:",m)}},p=async(m,y)=>{try{const{error:x}=await oe.rpc("handle_group_invitation",{p_group_member_id:m.data.group_member_id,p_accept:y});if(x)throw x;await oe.from("notifications").update({read:!0}).eq("id",m.id),t(S=>S.filter(C=>C.id!==m.id)),q.success(y?"Invitacin aceptada":"Invitacin rechazada"),y&&i(`/group/${m.data.group_id}`)}catch(x){q.error(x.message)}};return d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 text-white hover:text-indigo-200",children:[d.jsx(Rw,{className:"w-6 h-6"}),e.length>0&&d.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:e.length})]}),n&&d.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg z-50",children:d.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:e.length===0?d.jsx("p",{className:"text-gray-500 text-center",children:"No hay notificaciones"}):e.map(m=>d.jsxs("div",{className:"mb-4 p-4 border rounded-lg",children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:m.title}),d.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.message}),m.type==="group_invitation"&&d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>p(m,!0),className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Aceptar"}),d.jsx("button",{onClick:()=>p(m,!1),className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600",children:"Rechazar"})]})]},m.id))})})]})}function yA(){const{user:e,signOut:t}=Vn(),n=Gr(),r=async()=>{try{await t(),n("/login")}catch(i){console.error("Error signing out:",i)}};return d.jsx("nav",{className:"bg-indigo-600 text-white shadow-lg",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs(os,{to:"/",className:"flex items-center space-x-2",children:[d.jsx(mA,{className:"h-8 w-8"}),d.jsx("span",{className:"font-bold text-xl",children:"Band Manager"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[e&&d.jsx(vA,{}),e?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-sm",children:e.email}),d.jsxs("button",{onClick:r,className:"flex items-center space-x-1 hover:text-indigo-200 transition-colors",children:[d.jsx(pA,{className:"h-5 w-5"}),d.jsx("span",{children:"Sign Out"})]})]}):d.jsxs("div",{className:"space-x-4",children:[d.jsx(os,{to:"/login",className:"hover:text-indigo-200 transition-colors",children:"Login"}),d.jsx(os,{to:"/register",className:"hover:text-indigo-200 transition-colors",children:"Register"}),!1]})]})]})})})}function mt({label:e,error:t,className:n="",...r}){return d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),d.jsx("input",{className:`
          w-full px-3 py-2 border rounded-lg shadow-sm
          focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500
          ${t?"border-red-500":"border-gray-300"}
          ${n}
        `,...r}),t&&d.jsx("p",{className:"text-sm text-red-600",children:t})]})}function Ne({children:e,loading:t,variant:n="primary",fullWidth:r,className:i="",...o}){const l="flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",u={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"};return d.jsxs("button",{className:`${l} ${u[n]} ${r?"w-full":""} ${i}`,disabled:t,...o,children:[t&&d.jsx(ua,{className:"w-4 h-4 mr-2 animate-spin"}),e]})}function xA(){var y;const[e,t]=v.useState(""),[n,r]=v.useState(""),[i,o]=v.useState(!1),l=Gr(),u=bi(),c=(y=u.state)==null?void 0:y.returnTo,{user:h,setUser:p}=Vn();console.log("Login component state:",{returnTo:c,location:u}),v.useEffect(()=>{if(h){const x=c||"/";console.log("User authenticated, redirecting to:",x),l(x,{replace:!0})}},[h,c,l]);const m=async x=>{x.preventDefault(),o(!0);try{const{data:S,error:C}=await oe.auth.signInWithPassword({email:e,password:n});if(C)throw C;p(S.user),q.success("Successfully logged in!");const j=c||"/";console.log("Login successful, redirecting to:",j),l(j,{replace:!0})}catch(S){q.error(S.message||"Failed to login")}finally{o(!1)}};return h?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Welcome Back"}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsx(mt,{label:"Email",type:"email",value:e,onChange:x=>t(x.target.value),required:!0,placeholder:"your@email.com"}),d.jsx(mt,{label:"Password",type:"password",value:n,onChange:x=>r(x.target.value),required:!0,placeholder:""}),d.jsx(Ne,{type:"submit",loading:i,fullWidth:!0,children:"Sign In"})]}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(os,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:"Olvidaste tu contrasea?"})}),d.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",d.jsx(os,{to:"/register",className:"text-indigo-600 hover:text-indigo-500",children:"Register here"})]})]})})}function wA(){const[e]=Yb(),t=e.get("email");e.get("token");const[n,r]=v.useState(t||""),[i,o]=v.useState(""),[l,u]=v.useState(""),[c,h]=v.useState(!1),p=Gr(),{user:m}=Vn();v.useEffect(()=>{m&&p("/")},[m,p]);const y=async x=>{x.preventDefault(),h(!0);try{const{data:S,error:C}=await oe.auth.signUp({email:n,password:i,options:{data:{name:l,role:"user"}}});if(C)throw C;if(S.user){const{data:j,error:b}=await oe.rpc("create_new_user",{user_id:S.user.id,user_email:n,user_name:l,user_role:"user"});if(b)throw b;q.success("Registration successful! Please check your email to confirm your account."),p("/login")}}catch(S){console.error("Registration error:",S),S.message.includes("User already registered")?q.error("This email is already registered. Please try logging in instead."):S.message.includes("rate limit")?q.error("Too many registration attempts. Please try again in a few minutes."):q.error("Registration failed. Please try again.")}finally{h(!1)}};return m?null:d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Create an Account"}),d.jsxs("form",{onSubmit:y,className:"space-y-6",children:[d.jsx(mt,{label:"Name",type:"text",value:l,onChange:x=>u(x.target.value),required:!0,placeholder:"John Doe"}),d.jsx(mt,{label:"Email",type:"email",value:n,onChange:x=>r(x.target.value),required:!0,disabled:!!t,placeholder:"tu@email.com"}),d.jsx(mt,{label:"Password",type:"password",value:i,onChange:x=>o(x.target.value),required:!0,placeholder:"",minLength:6}),d.jsx(Ne,{type:"submit",loading:c,fullWidth:!0,children:"Register"})]}),d.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:["Already have an account?"," ",d.jsx(os,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Sign in here"})]})]})})}var _A=Object.defineProperty,bA=(e,t,n)=>t in e?_A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,op=(e,t,n)=>(bA(e,typeof t!="symbol"?t+"":t,n),n);let SA=class{constructor(){op(this,"current",this.detect()),op(this,"handoffState","pending"),op(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ys=new SA;function nf(e){return Ys.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function rf(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function vs(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return rf(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=vs();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function Yg(){let[e]=v.useState(vs);return v.useEffect(()=>()=>e.dispose(),[e]),e}let pn=(e,t)=>{Ys.isServer?v.useEffect(e,t):v.useLayoutEffect(e,t)};function ao(e){let t=v.useRef(e);return pn(()=>{t.current=e},[e]),t}let _t=function(e){let t=ao(e);return xe.useCallback((...n)=>t.current(...n),[t])},EA=v.createContext(void 0);function NA(){return v.useContext(EA)}function Cm(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function cs(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,cs),r}var vd=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(vd||{}),Qi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Qi||{});function hr(){let e=CA();return v.useCallback(t=>kA({mergeRefs:e,...t}),[e])}function kA({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:l,mergeRefs:u}){u=u??jA;let c=CS(t,e);if(o)return xc(c,n,r,l,u);let h=i??0;if(h&2){let{static:p=!1,...m}=c;if(p)return xc(m,n,r,l,u)}if(h&1){let{unmount:p=!0,...m}=c;return cs(p?0:1,{0(){return null},1(){return xc({...m,hidden:!0,style:{display:"none"}},n,r,l,u)}})}return xc(c,n,r,l,u)}function xc(e,t={},n,r,i){let{as:o=n,children:l,refName:u="ref",...c}=ap(e,["unmount","static"]),h=e.ref!==void 0?{[u]:e.ref}:{},p=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(t){let y=!1,x=[];for(let[S,C]of Object.entries(t))typeof C=="boolean"&&(y=!0),C===!0&&x.push(S.replace(/([A-Z])/g,j=>`-${j.toLowerCase()}`));if(y){m["data-headlessui-state"]=x.join(" ");for(let S of x)m[`data-${S}`]=""}}if(o===v.Fragment&&(Object.keys(Ls(c)).length>0||Object.keys(Ls(m)).length>0))if(!v.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(Ls(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ls(c)).concat(Object.keys(Ls(m))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=p.props,x=y==null?void 0:y.className,S=typeof x=="function"?(...b)=>Cm(x(...b),c.className):Cm(x,c.className),C=S?{className:S}:{},j=CS(p.props,Ls(ap(c,["ref"])));for(let b in m)b in j&&delete m[b];return v.cloneElement(p,Object.assign({},j,m,h,{ref:i(PA(p),h.ref)},C))}return v.createElement(o,Object.assign({},ap(c,["ref"]),o!==v.Fragment&&h,o!==v.Fragment&&m),p)}function CA(){let e=v.useRef([]),t=v.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function jA(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function CS(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let r in n)Object.assign(t,{[r](i,...o){let l=n[r];for(let u of l){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;u(i,...o)}}});return t}function Dn(e){var t;return Object.assign(v.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Ls(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function ap(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function PA(e){return xe.version.split(".")[0]>="19"?e.props.ref:e.ref}let DA="span";var yd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(yd||{});function TA(e,t){var n;let{features:r=1,...i}=e,o={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return hr()({ourProps:o,theirProps:i,slot:{},defaultTag:DA,name:"Hidden"})}let jm=Dn(TA),jS=Symbol();function OA(e,t=!0){return Object.assign(e,{[jS]:t})}function Vr(...e){let t=v.useRef(e);v.useEffect(()=>{t.current=e},[e]);let n=_t(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[jS]))?void 0:n}let Kg=v.createContext(null);Kg.displayName="DescriptionContext";function PS(){let e=v.useContext(Kg);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,PS),t}return e}function MA(){let[e,t]=v.useState([]);return[e.length>0?e.join(" "):void 0,v.useMemo(()=>function(n){let r=_t(o=>(t(l=>[...l,o]),()=>t(l=>{let u=l.slice(),c=u.indexOf(o);return c!==-1&&u.splice(c,1),u}))),i=v.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return xe.createElement(Kg.Provider,{value:i},n.children)},[t])]}let RA="p";function $A(e,t){let n=v.useId(),r=NA(),{id:i=`headlessui-description-${n}`,...o}=e,l=PS(),u=Vr(t);pn(()=>l.register(i),[i,l.register]);let c=r||!1,h=v.useMemo(()=>({...l.slot,disabled:c}),[l.slot,c]),p={ref:u,...l.props,id:i};return hr()({ourProps:p,theirProps:o,slot:h,defaultTag:RA,name:l.name||"Description"})}let AA=Dn($A),LA=Object.assign(AA,{});var DS=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(DS||{});let IA=v.createContext(()=>{});function FA({value:e,children:t}){return xe.createElement(IA.Provider,{value:e},t)}let UA=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function TS(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...o){let l=t[i].call(n,...o);l&&(n=l,r.forEach(u=>u()))}}}function OS(e){return v.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let zA=new UA(()=>TS(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function va(e,t){let n=zA.get(t),r=v.useId(),i=OS(n);if(pn(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let o=i.indexOf(r),l=i.length;return o===-1&&(o=l,l+=1),o===l-1}let Pm=new Map,ml=new Map;function Aw(e){var t;let n=(t=ml.get(e))!=null?t:0;return ml.set(e,n+1),n!==0?()=>Lw(e):(Pm.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Lw(e))}function Lw(e){var t;let n=(t=ml.get(e))!=null?t:1;if(n===1?ml.delete(e):ml.set(e,n-1),n!==1)return;let r=Pm.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Pm.delete(e))}function WA(e,{allowed:t,disallowed:n}={}){let r=va(e,"inert-others");pn(()=>{var i,o;if(!r)return;let l=vs();for(let c of(i=n==null?void 0:n())!=null?i:[])c&&l.add(Aw(c));let u=(o=t==null?void 0:t())!=null?o:[];for(let c of u){if(!c)continue;let h=nf(c);if(!h)continue;let p=c.parentElement;for(;p&&p!==h.body;){for(let m of p.children)u.some(y=>m.contains(y))||l.add(Aw(m));p=p.parentElement}}return l.dispose},[r,t,n])}function BA(e,t,n){let r=ao(i=>{let o=i.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});v.useEffect(()=>{if(!e)return;let i=t===null?null:t instanceof HTMLElement?t:t.current;if(!i)return;let o=vs();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>r.current(i));l.observe(i),o.add(()=>l.disconnect())}return()=>o.dispose()},[t,r,e])}let xd=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),HA=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ui=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ui||{}),Dm=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Dm||{}),qA=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qA||{});function GA(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(xd)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function VA(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(HA)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var MS=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(MS||{});function YA(e,t=0){var n;return e===((n=nf(e))==null?void 0:n.body)?!1:cs(t,{0(){return e.matches(xd)},1(){let r=e;for(;r!==null;){if(r.matches(xd))return!0;r=r.parentElement}return!1}})}var KA=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(KA||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function pi(e){e==null||e.focus({preventScroll:!0})}let QA=["textarea","input"].join(",");function XA(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,QA))!=null?n:!1}function JA(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let l=i.compareDocumentPosition(o);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function gl(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,l=Array.isArray(e)?n?JA(e):e:t&64?VA(e):GA(e);i.length>0&&l.length>1&&(l=l.filter(x=>!i.some(S=>S!=null&&"current"in S?(S==null?void 0:S.current)===x:S===x))),r=r??o.activeElement;let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=t&32?{preventScroll:!0}:{},p=0,m=l.length,y;do{if(p>=m||p+m<=0)return 0;let x=c+p;if(t&16)x=(x+m)%m;else{if(x<0)return 3;if(x>=m)return 1}y=l[x],y==null||y.focus(h),p+=u}while(y!==o.activeElement);return t&6&&XA(y)&&y.select(),2}function RS(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ZA(){return/Android/gi.test(window.navigator.userAgent)}function eL(){return RS()||ZA()}function Qa(e,t,n,r){let i=ao(n);v.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return document.addEventListener(t,o,r),()=>document.removeEventListener(t,o,r)},[e,t,r])}function $S(e,t,n,r){let i=ao(n);v.useEffect(()=>{if(!e)return;function o(l){i.current(l)}return window.addEventListener(t,o,r),()=>window.removeEventListener(t,o,r)},[e,t,r])}const Iw=30;function tL(e,t,n){let r=va(e,"outside-click"),i=ao(n),o=v.useCallback(function(c,h){if(c.defaultPrevented)return;let p=h(c);if(p===null||!p.getRootNode().contains(p)||!p.isConnected)return;let m=function y(x){return typeof x=="function"?y(x()):Array.isArray(x)||x instanceof Set?x:[x]}(t);for(let y of m)if(y!==null&&(y.contains(p)||c.composed&&c.composedPath().includes(y)))return;return!YA(p,MS.Loose)&&p.tabIndex!==-1&&c.preventDefault(),i.current(c,p)},[i,t]),l=v.useRef(null);Qa(r,"pointerdown",c=>{var h,p;l.current=((p=(h=c.composedPath)==null?void 0:h.call(c))==null?void 0:p[0])||c.target},!0),Qa(r,"mousedown",c=>{var h,p;l.current=((p=(h=c.composedPath)==null?void 0:h.call(c))==null?void 0:p[0])||c.target},!0),Qa(r,"click",c=>{eL()||l.current&&(o(c,()=>l.current),l.current=null)},!0);let u=v.useRef({x:0,y:0});Qa(r,"touchstart",c=>{u.current.x=c.touches[0].clientX,u.current.y=c.touches[0].clientY},!0),Qa(r,"touchend",c=>{let h={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(h.x-u.current.x)>=Iw||Math.abs(h.y-u.current.y)>=Iw))return o(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),$S(r,"blur",c=>o(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Jl(...e){return v.useMemo(()=>nf(...e),[...e])}function AS(e,t,n,r){let i=ao(n);v.useEffect(()=>{e=e??window;function o(l){i.current(l)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}function nL(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=(n=t.defaultView)!=null?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,e-i);n.style(r,"paddingRight",`${o}px`)}}}function rL(){return RS()?{before({doc:e,d:t,meta:n}){function r(i){return n.containers.flatMap(o=>o()).some(o=>o.contains(i))}t.microTask(()=>{var i;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=vs();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let o=(i=window.scrollY)!=null?i:window.pageYOffset,l=null;t.addEventListener(e,"click",u=>{if(u.target instanceof HTMLElement)try{let c=u.target.closest("a");if(!c)return;let{hash:h}=new URL(c.href),p=e.querySelector(h);p&&!r(p)&&(l=p)}catch{}},!0),t.addEventListener(e,"touchstart",u=>{if(u.target instanceof HTMLElement)if(r(u.target)){let c=u.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(u.target,"touchAction","none")}),t.addEventListener(e,"touchmove",u=>{if(u.target instanceof HTMLElement){if(u.target.tagName==="INPUT")return;if(r(u.target)){let c=u.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let c=(u=window.scrollY)!=null?u:window.pageYOffset;o!==c&&window.scrollTo(0,o),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function iL(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function sL(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let qs=TS(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:vs(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:sL(n)},i=[rL(),nL(),iL()];i.forEach(({before:o})=>o==null?void 0:o(r)),i.forEach(({after:o})=>o==null?void 0:o(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});qs.subscribe(()=>{let e=qs.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&qs.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&qs.dispatch("TEARDOWN",n)}});function oL(e,t,n=()=>({containers:[]})){let r=OS(qs),i=t?r.get(t):void 0,o=i?i.count>0:!1;return pn(()=>{if(!(!t||!e))return qs.dispatch("PUSH",t,n),()=>qs.dispatch("POP",t,n)},[e,t]),o}function aL(e,t,n=()=>[document.body]){let r=va(e,"scroll-lock");oL(r,t,i=>{var o;return{containers:[...(o=i.containers)!=null?o:[],n]}})}function lL(e=0){let[t,n]=v.useState(e),r=v.useCallback(c=>n(c),[t]),i=v.useCallback(c=>n(h=>h|c),[t]),o=v.useCallback(c=>(t&c)===c,[t]),l=v.useCallback(c=>n(h=>h&~c),[n]),u=v.useCallback(c=>n(h=>h^c),[n]);return{flags:t,setFlag:r,addFlag:i,hasFlag:o,removeFlag:l,toggleFlag:u}}var uL={},Fw,Uw;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Fw=process==null?void 0:uL)==null?void 0:Fw.NODE_ENV)==="test"&&typeof((Uw=Element==null?void 0:Element.prototype)==null?void 0:Uw.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var cL=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(cL||{});function dL(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function fL(e,t,n,r){let[i,o]=v.useState(n),{hasFlag:l,addFlag:u,removeFlag:c}=lL(e&&i?3:0),h=v.useRef(!1),p=v.useRef(!1),m=Yg();return pn(()=>{var y;if(e){if(n&&o(!0),!t){n&&u(3);return}return(y=r==null?void 0:r.start)==null||y.call(r,n),hL(t,{inFlight:h,prepare(){p.current?p.current=!1:p.current=h.current,h.current=!0,!p.current&&(n?(u(3),c(4)):(u(4),c(2)))},run(){p.current?n?(c(3),u(4)):(c(4),u(3)):n?c(1):u(1)},done(){var x;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(h.current=!1,c(7),n||o(!1),(x=r==null?void 0:r.end)==null||x.call(r,n))}})}},[e,n,t,m]),e?[i,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function hL(e,{prepare:t,run:n,done:r,inFlight:i}){let o=vs();return mL(e,{prepare:t,inFlight:i}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(pL(e,r))})}),o.dispose}function pL(e,t){var n,r;let i=vs();if(!e)return i.dispose;let o=!1;i.add(()=>{o=!0});let l=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(u=>u instanceof CSSTransition))!=null?r:[];return l.length===0?(t(),i.dispose):(Promise.allSettled(l.map(u=>u.finished)).then(()=>{o||t()}),i.dispose)}function mL(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function Qg(e,t){let n=v.useRef([]),r=_t(e);v.useEffect(()=>{let i=[...n.current];for(let[o,l]of t.entries())if(n.current[o]!==l){let u=r(t,i);return n.current=t,u}},[r,...t])}let sf=v.createContext(null);sf.displayName="OpenClosedContext";var Er=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Er||{});function of(){return v.useContext(sf)}function gL({value:e,children:t}){return xe.createElement(sf.Provider,{value:e},t)}function vL({children:e}){return xe.createElement(sf.Provider,{value:null},e)}function yL(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Gi=[];yL(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Gi[0]===t.target)return;let n=t.target;n=n.closest(xd),Gi.unshift(n??t.target),Gi=Gi.filter(r=>r!=null&&r.isConnected),Gi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function LS(e){let t=_t(e),n=v.useRef(!1);v.useEffect(()=>(n.current=!1,()=>{n.current=!0,rf(()=>{n.current&&t()})}),[t])}function xL(){let e=typeof document>"u";return"useSyncExternalStore"in wp?(t=>t.useSyncExternalStore)(wp)(()=>()=>{},()=>!1,()=>!e):!1}function Zl(){let e=xL(),[t,n]=v.useState(Ys.isHandoffComplete);return t&&Ys.isHandoffComplete===!1&&n(!1),v.useEffect(()=>{t!==!0&&n(!0)},[t]),v.useEffect(()=>Ys.handoff(),[]),e?!1:t}let IS=v.createContext(!1);function wL(){return v.useContext(IS)}function zw(e){return xe.createElement(IS.Provider,{value:e.force},e.children)}function _L(e){let t=wL(),n=v.useContext(US),r=Jl(e),[i,o]=v.useState(()=>{var l;if(!t&&n!==null)return(l=n.current)!=null?l:null;if(Ys.isServer)return null;let u=r==null?void 0:r.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return v.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),v.useEffect(()=>{t||n!==null&&o(n.current)},[n,o,t]),i}let FS=v.Fragment,bL=Dn(function(e,t){let n=e,r=v.useRef(null),i=Vr(OA(m=>{r.current=m}),t),o=Jl(r),l=_L(r),[u]=v.useState(()=>{var m;return Ys.isServer?null:(m=o==null?void 0:o.createElement("div"))!=null?m:null}),c=v.useContext(Tm),h=Zl();pn(()=>{!l||!u||l.contains(u)||(u.setAttribute("data-headlessui-portal",""),l.appendChild(u))},[l,u]),pn(()=>{if(u&&c)return c.register(u)},[c,u]),LS(()=>{var m;!l||!u||(u instanceof Node&&l.contains(u)&&l.removeChild(u),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))});let p=hr();return h?!l||!u?null:Hs.createPortal(p({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:FS,name:"Portal"}),u):null});function SL(e,t){let n=Vr(t),{enabled:r=!0,...i}=e,o=hr();return r?xe.createElement(bL,{...i,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:FS,name:"Portal"})}let EL=v.Fragment,US=v.createContext(null);function NL(e,t){let{target:n,...r}=e,i={ref:Vr(t)},o=hr();return xe.createElement(US.Provider,{value:n},o({ourProps:i,theirProps:r,defaultTag:EL,name:"Popover.Group"}))}let Tm=v.createContext(null);function kL(){let e=v.useContext(Tm),t=v.useRef([]),n=_t(o=>(t.current.push(o),e&&e.register(o),()=>r(o))),r=_t(o=>{let l=t.current.indexOf(o);l!==-1&&t.current.splice(l,1),e&&e.unregister(o)}),i=v.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,v.useMemo(()=>function({children:o}){return xe.createElement(Tm.Provider,{value:i},o)},[i])]}let CL=Dn(SL),zS=Dn(NL),jL=Object.assign(CL,{Group:zS});function PL(e,t=typeof document<"u"?document.defaultView:null,n){let r=va(e,"escape");AS(t,"keydown",i=>{r&&(i.defaultPrevented||i.key===DS.Escape&&n(i))})}function DL(){var e;let[t]=v.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=v.useState((e=t==null?void 0:t.matches)!=null?e:!1);return pn(()=>{if(!t)return;function i(o){r(o.matches)}return t.addEventListener("change",i),()=>t.removeEventListener("change",i)},[t]),n}function TL({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Jl(n),i=_t(()=>{var o,l;let u=[];for(let c of e)c!==null&&(c instanceof HTMLElement?u.push(c):"current"in c&&c.current instanceof HTMLElement&&u.push(c.current));if(t!=null&&t.current)for(let c of t.current)u.push(c);for(let c of(o=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?o:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((l=n==null?void 0:n.getRootNode())==null?void 0:l.host))||u.some(h=>c.contains(h))||u.push(c));return u});return{resolveContainers:i,contains:_t(o=>i().some(l=>l.contains(o)))}}let WS=v.createContext(null);function Ww({children:e,node:t}){let[n,r]=v.useState(null),i=BS(t??n);return xe.createElement(WS.Provider,{value:i},e,i===null&&xe.createElement(jm,{features:yd.Hidden,ref:o=>{var l,u;if(o){for(let c of(u=(l=nf(o))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?u:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(o)){r(c);break}}}}))}function BS(e=null){var t;return(t=v.useContext(WS))!=null?t:e}function Xg(){let e=v.useRef(!1);return pn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var rl=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(rl||{});function OL(){let e=v.useRef(0);return $S(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function HS(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let ML="div";var Us=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Us||{});function RL(e,t){let n=v.useRef(null),r=Vr(n,t),{initialFocus:i,initialFocusFallback:o,containers:l,features:u=15,...c}=e;Zl()||(u=0);let h=Jl(n);IL(u,{ownerDocument:h});let p=FL(u,{ownerDocument:h,container:n,initialFocus:i,initialFocusFallback:o});UL(u,{ownerDocument:h,container:n,containers:l,previousActiveElement:p});let m=OL(),y=_t(_=>{let N=n.current;N&&(P=>P())(()=>{cs(m.current,{[rl.Forwards]:()=>{gl(N,ui.First,{skipElements:[_.relatedTarget,o]})},[rl.Backwards]:()=>{gl(N,ui.Last,{skipElements:[_.relatedTarget,o]})}})})}),x=va(!!(u&2),"focus-trap#tab-lock"),S=Yg(),C=v.useRef(!1),j={ref:r,onKeyDown(_){_.key=="Tab"&&(C.current=!0,S.requestAnimationFrame(()=>{C.current=!1}))},onBlur(_){if(!(u&4))return;let N=HS(l);n.current instanceof HTMLElement&&N.add(n.current);let P=_.relatedTarget;P instanceof HTMLElement&&P.dataset.headlessuiFocusGuard!=="true"&&(qS(N,P)||(C.current?gl(n.current,cs(m.current,{[rl.Forwards]:()=>ui.Next,[rl.Backwards]:()=>ui.Previous})|ui.WrapAround,{relativeTo:_.target}):_.target instanceof HTMLElement&&pi(_.target)))}},b=hr();return xe.createElement(xe.Fragment,null,x&&xe.createElement(jm,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:yd.Focusable}),b({ourProps:j,theirProps:c,defaultTag:ML,name:"FocusTrap"}),x&&xe.createElement(jm,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:yd.Focusable}))}let $L=Dn(RL),AL=Object.assign($L,{features:Us});function LL(e=!0){let t=v.useRef(Gi.slice());return Qg(([n],[r])=>{r===!0&&n===!1&&rf(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Gi.slice())},[e,Gi,t]),_t(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function IL(e,{ownerDocument:t}){let n=!!(e&8),r=LL(n);Qg(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&pi(r())},[n]),LS(()=>{n&&pi(r())})}function FL(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let o=v.useRef(null),l=va(!!(e&1),"focus-trap#initial-focus"),u=Xg();return Qg(()=>{if(e===0)return;if(!l){i!=null&&i.current&&pi(i.current);return}let c=n.current;c&&rf(()=>{if(!u.current)return;let h=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===h){o.current=h;return}}else if(c.contains(h)){o.current=h;return}if(r!=null&&r.current)pi(r.current);else{if(e&16){if(gl(c,ui.First|ui.AutoFocus)!==Dm.Error)return}else if(gl(c,ui.First)!==Dm.Error)return;if(i!=null&&i.current&&(pi(i.current),(t==null?void 0:t.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t==null?void 0:t.activeElement})},[i,l,e]),o}function UL(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let o=Xg(),l=!!(e&4);AS(t==null?void 0:t.defaultView,"focus",u=>{if(!l||!o.current)return;let c=HS(r);n.current instanceof HTMLElement&&c.add(n.current);let h=i.current;if(!h)return;let p=u.target;p&&p instanceof HTMLElement?qS(c,p)?(i.current=p,pi(p)):(u.preventDefault(),u.stopPropagation(),pi(h)):pi(i.current)},!0)}function qS(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function GS(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:YS)!==v.Fragment||xe.Children.count(e.children)===1}let af=v.createContext(null);af.displayName="TransitionContext";var zL=(e=>(e.Visible="visible",e.Hidden="hidden",e))(zL||{});function WL(){let e=v.useContext(af);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function BL(){let e=v.useContext(lf);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let lf=v.createContext(null);lf.displayName="NestingContext";function uf(e){return"children"in e?uf(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function VS(e,t){let n=ao(e),r=v.useRef([]),i=Xg(),o=Yg(),l=_t((x,S=Qi.Hidden)=>{let C=r.current.findIndex(({el:j})=>j===x);C!==-1&&(cs(S,{[Qi.Unmount](){r.current.splice(C,1)},[Qi.Hidden](){r.current[C].state="hidden"}}),o.microTask(()=>{var j;!uf(r)&&i.current&&((j=n.current)==null||j.call(n))}))}),u=_t(x=>{let S=r.current.find(({el:C})=>C===x);return S?S.state!=="visible"&&(S.state="visible"):r.current.push({el:x,state:"visible"}),()=>l(x,Qi.Unmount)}),c=v.useRef([]),h=v.useRef(Promise.resolve()),p=v.useRef({enter:[],leave:[]}),m=_t((x,S,C)=>{c.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([j])=>j!==x)),t==null||t.chains.current[S].push([x,new Promise(j=>{c.current.push(j)})]),t==null||t.chains.current[S].push([x,new Promise(j=>{Promise.all(p.current[S].map(([b,_])=>_)).then(()=>j())})]),S==="enter"?h.current=h.current.then(()=>t==null?void 0:t.wait.current).then(()=>C(S)):C(S)}),y=_t((x,S,C)=>{Promise.all(p.current[S].splice(0).map(([j,b])=>b)).then(()=>{var j;(j=c.current.shift())==null||j()}).then(()=>C(S))});return v.useMemo(()=>({children:r,register:u,unregister:l,onStart:m,onStop:y,wait:h,chains:p}),[u,l,r,m,y,p,h])}let YS=v.Fragment,KS=vd.RenderStrategy;function HL(e,t){var n,r;let{transition:i=!0,beforeEnter:o,afterEnter:l,beforeLeave:u,afterLeave:c,enter:h,enterFrom:p,enterTo:m,entered:y,leave:x,leaveFrom:S,leaveTo:C,...j}=e,[b,_]=v.useState(null),N=v.useRef(null),P=GS(e),M=Vr(...P?[N,t,_]:t===null?[]:[t]),U=(n=j.unmount)==null||n?Qi.Unmount:Qi.Hidden,{show:L,appear:z,initial:le}=WL(),[te,H]=v.useState(L?"visible":"hidden"),Ee=BL(),{register:re,unregister:me}=Ee;pn(()=>re(N),[re,N]),pn(()=>{if(U===Qi.Hidden&&N.current){if(L&&te!=="visible"){H("visible");return}return cs(te,{hidden:()=>me(N),visible:()=>re(N)})}},[te,N,re,me,L,U]);let be=Zl();pn(()=>{if(P&&be&&te==="visible"&&N.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[N,te,be,P]);let Me=le&&!z,$=z&&L&&le,T=v.useRef(!1),F=VS(()=>{T.current||(H("hidden"),me(N))},Ee),ne=_t(Q=>{T.current=!0;let pe=Q?"enter":"leave";F.onStart(N,pe,Z=>{Z==="enter"?o==null||o():Z==="leave"&&(u==null||u())})}),se=_t(Q=>{let pe=Q?"enter":"leave";T.current=!1,F.onStop(N,pe,Z=>{Z==="enter"?l==null||l():Z==="leave"&&(c==null||c())}),pe==="leave"&&!uf(F)&&(H("hidden"),me(N))});v.useEffect(()=>{P&&i||(ne(L),se(L))},[L,P,i]);let _e=!(!i||!P||!be||Me),[,ge]=fL(_e,b,L,{start:ne,end:se}),$e=Ls({ref:M,className:((r=Cm(j.className,$&&h,$&&p,ge.enter&&h,ge.enter&&ge.closed&&p,ge.enter&&!ge.closed&&m,ge.leave&&x,ge.leave&&!ge.closed&&S,ge.leave&&ge.closed&&C,!ge.transition&&L&&y))==null?void 0:r.trim())||void 0,...dL(ge)}),je=0;te==="visible"&&(je|=Er.Open),te==="hidden"&&(je|=Er.Closed),ge.enter&&(je|=Er.Opening),ge.leave&&(je|=Er.Closing);let Oe=hr();return xe.createElement(lf.Provider,{value:F},xe.createElement(gL,{value:je},Oe({ourProps:$e,theirProps:j,defaultTag:YS,features:KS,visible:te==="visible",name:"Transition.Child"})))}function qL(e,t){let{show:n,appear:r=!1,unmount:i=!0,...o}=e,l=v.useRef(null),u=GS(e),c=Vr(...u?[l,t]:t===null?[]:[t]);Zl();let h=of();if(n===void 0&&h!==null&&(n=(h&Er.Open)===Er.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,m]=v.useState(n?"visible":"hidden"),y=VS(()=>{n||m("hidden")}),[x,S]=v.useState(!0),C=v.useRef([n]);pn(()=>{x!==!1&&C.current[C.current.length-1]!==n&&(C.current.push(n),S(!1))},[C,n]);let j=v.useMemo(()=>({show:n,appear:r,initial:x}),[n,r,x]);pn(()=>{n?m("visible"):!uf(y)&&l.current!==null&&m("hidden")},[n,y]);let b={unmount:i},_=_t(()=>{var M;x&&S(!1),(M=e.beforeEnter)==null||M.call(e)}),N=_t(()=>{var M;x&&S(!1),(M=e.beforeLeave)==null||M.call(e)}),P=hr();return xe.createElement(lf.Provider,{value:y},xe.createElement(af.Provider,{value:j},P({ourProps:{...b,as:v.Fragment,children:xe.createElement(QS,{ref:c,...b,...o,beforeEnter:_,beforeLeave:N})},theirProps:{},defaultTag:v.Fragment,features:KS,visible:p==="visible",name:"Transition"})))}function GL(e,t){let n=v.useContext(af)!==null,r=of()!==null;return xe.createElement(xe.Fragment,null,!n&&r?xe.createElement(Om,{ref:t,...e}):xe.createElement(QS,{ref:t,...e}))}let Om=Dn(qL),QS=Dn(HL),Jg=Dn(GL),VL=Object.assign(Om,{Child:Jg,Root:Om});var YL=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(YL||{}),KL=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(KL||{});let QL={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Zg=v.createContext(null);Zg.displayName="DialogContext";function cf(e){let t=v.useContext(Zg);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,cf),n}return t}function XL(e,t){return cs(t.type,QL,e,t)}let Bw=Dn(function(e,t){let n=v.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:o,initialFocus:l,role:u="dialog",autoFocus:c=!0,__demoMode:h=!1,unmount:p=!1,...m}=e,y=v.useRef(!1);u=function(){return u==="dialog"||u==="alertdialog"?u:(y.current||(y.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let x=of();i===void 0&&x!==null&&(i=(x&Er.Open)===Er.Open);let S=v.useRef(null),C=Vr(S,t),j=Jl(S),b=i?0:1,[_,N]=v.useReducer(XL,{titleId:null,descriptionId:null,panelRef:v.createRef()}),P=_t(()=>o(!1)),M=_t(se=>N({type:0,id:se})),U=Zl()?b===0:!1,[L,z]=kL(),le={get current(){var se;return(se=_.panelRef.current)!=null?se:S.current}},te=BS(),{resolveContainers:H}=TL({mainTreeNode:te,portals:L,defaultContainers:[le]}),Ee=x!==null?(x&Er.Closing)===Er.Closing:!1;WA(h||Ee?!1:U,{allowed:_t(()=>{var se,_e;return[(_e=(se=S.current)==null?void 0:se.closest("[data-headlessui-portal]"))!=null?_e:null]}),disallowed:_t(()=>{var se;return[(se=te==null?void 0:te.closest("body > *:not(#headlessui-portal-root)"))!=null?se:null]})}),tL(U,H,se=>{se.preventDefault(),P()}),PL(U,j==null?void 0:j.defaultView,se=>{se.preventDefault(),se.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),P()}),aL(h||Ee?!1:U,j,H),BA(U,S,P);let[re,me]=MA(),be=v.useMemo(()=>[{dialogState:b,close:P,setTitleId:M,unmount:p},_],[b,_,P,M,p]),Me=v.useMemo(()=>({open:b===0}),[b]),$={ref:C,id:r,role:u,tabIndex:-1,"aria-modal":h?void 0:b===0?!0:void 0,"aria-labelledby":_.titleId,"aria-describedby":re,unmount:p},T=!DL(),F=Us.None;U&&!h&&(F|=Us.RestoreFocus,F|=Us.TabLock,c&&(F|=Us.AutoFocus),T&&(F|=Us.InitialFocus));let ne=hr();return xe.createElement(vL,null,xe.createElement(zw,{force:!0},xe.createElement(jL,null,xe.createElement(Zg.Provider,{value:be},xe.createElement(zS,{target:S},xe.createElement(zw,{force:!1},xe.createElement(me,{slot:Me},xe.createElement(z,null,xe.createElement(AL,{initialFocus:l,initialFocusFallback:S,containers:H,features:F},xe.createElement(FA,{value:P},ne({ourProps:$,theirProps:m,slot:Me,defaultTag:JL,features:ZL,visible:b===0,name:"Dialog"})))))))))))}),JL="div",ZL=vd.RenderStrategy|vd.Static;function eI(e,t){let{transition:n=!1,open:r,...i}=e,o=of(),l=e.hasOwnProperty("open")||o!==null,u=e.hasOwnProperty("onClose");if(!l&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!i.static?xe.createElement(Ww,null,xe.createElement(VL,{show:r,transition:n,unmount:i.unmount},xe.createElement(Bw,{ref:t,...i}))):xe.createElement(Ww,null,xe.createElement(Bw,{ref:t,open:r,...i}))}let tI="div";function nI(e,t){let n=v.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...o}=e,[{dialogState:l,unmount:u},c]=cf("Dialog.Panel"),h=Vr(t,c.panelRef),p=v.useMemo(()=>({open:l===0}),[l]),m=_t(j=>{j.stopPropagation()}),y={ref:h,id:r,onClick:m},x=i?Jg:v.Fragment,S=i?{unmount:u}:{},C=hr();return xe.createElement(x,{...S},C({ourProps:y,theirProps:o,slot:p,defaultTag:tI,name:"Dialog.Panel"}))}let rI="div";function iI(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:o}]=cf("Dialog.Backdrop"),l=v.useMemo(()=>({open:i===0}),[i]),u={ref:t,"aria-hidden":!0},c=n?Jg:v.Fragment,h=n?{unmount:o}:{},p=hr();return xe.createElement(c,{...h},p({ourProps:u,theirProps:r,slot:l,defaultTag:rI,name:"Dialog.Backdrop"}))}let sI="h2";function oI(e,t){let n=v.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:o,setTitleId:l}]=cf("Dialog.Title"),u=Vr(t);v.useEffect(()=>(l(r),()=>l(null)),[r,l]);let c=v.useMemo(()=>({open:o===0}),[o]),h={ref:u,id:r};return hr()({ourProps:h,theirProps:i,slot:c,defaultTag:sI,name:"Dialog.Title"})}let aI=Dn(eI),lI=Dn(nI);Dn(iI);let uI=Dn(oI),Ks=Object.assign(aI,{Panel:lI,Title:uI,Description:LA});const cI=({isOpen:e,onClose:t,onGroupCreated:n,isAdmin:r=!1})=>{const[i,o]=v.useState(""),[l,u]=v.useState(!1);v.useState([]);const c=async h=>{if(h.preventDefault(),!!i.trim())try{u(!0);const{error:p}=await oe.from("groups").insert([{name:i.trim()}]);if(p)throw p;q.success("Grupo creado exitosamente"),n(),t(),o("")}catch(p){console.error("Error:",p),q.error("Error al crear el grupo")}finally{u(!1)}};return d.jsx(Ks,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(hi,{className:"w-6 h-6"})})}),d.jsx(Ks.Title,{className:"text-xl font-semibold mb-4",children:"Crear Nuevo Grupo"}),d.jsxs("form",{onSubmit:c,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del grupo"}),d.jsx("input",{type:"text",id:"name",value:i,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ingresa el nombre del grupo",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:t,disabled:l,children:"Cancelar"}),d.jsx(Ne,{type:"submit",loading:l,children:"Crear Grupo"})]})]})]})]})})},dI=({isOpen:e,onClose:t,onGroupDeleted:n,group:r})=>{const[i,o]=v.useState(""),[l,u]=v.useState(!1),c=async h=>{if(h.preventDefault(),i!==r.name){q.error("El nombre del grupo no coincide");return}try{u(!0);const{error:p}=await oe.from("groups").delete().eq("id",r.id);if(p)throw p;q.success("Grupo eliminado exitosamente"),n(),t()}catch(p){console.error("Error:",p),q.error("Error al eliminar el grupo")}finally{u(!1),o("")}};return d.jsx(Ks,{open:e,onClose:t,className:"fixed inset-0 z-10 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),d.jsxs("div",{className:"relative bg-white rounded-lg w-full max-w-md p-6 mx-4",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(hi,{className:"w-6 h-6"})})}),d.jsx(Ks.Title,{className:"text-xl font-semibold text-red-600 mb-4",children:"Eliminar Grupo"}),d.jsx("div",{className:"mb-4",children:d.jsxs("p",{className:"text-gray-700 mb-4",children:["Esta accin no se puede deshacer. Para confirmar, escribe el nombre del grupo:",d.jsxs("span",{className:"font-semibold",children:[" ",r.name]})]})}),d.jsxs("form",{onSubmit:c,children:[d.jsx("div",{className:"mb-4",children:d.jsx("input",{type:"text",value:i,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"Escribe el nombre del grupo",required:!0})}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:t,disabled:l,children:"Cancelar"}),d.jsx(Ne,{type:"submit",loading:l,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",disabled:i!==r.name,children:"Eliminar Grupo"})]})]})]})]})})};function fI(){const[e,t]=v.useState([]),[n,r]=v.useState(!0),[i,o]=v.useState(!1),{user:l}=Vn(),u=Gr(),[c,h]=v.useState(!1),[p,m]=v.useState(null),[y,x]=v.useState(!1),[S,C]=v.useState("");v.useEffect(()=>{(async()=>{l&&await j()})()},[l]);const j=async()=>{if(l)try{r(!0);const{data:P,error:M}=await oe.from("users").select("role").eq("id",l.id).single();if(M)throw M;const U=(P==null?void 0:P.role)==="admin";if(h(U),U){const{data:re,error:me}=await oe.from("groups").select("*").order("created_at",{ascending:!1});if(me)throw me;const{data:be,error:Me}=await oe.from("group_members").select("group_id").eq("user_id",l.id);if(Me)throw Me;const $=new Set((be==null?void 0:be.map(F=>F.group_id))||[]),T=await Promise.all((re||[]).map(async F=>{const{data:ne}=await oe.from("group_members").select("id").eq("group_id",F.id).eq("role_in_group","principal"),{data:se}=await oe.from("group_members").select("id").eq("group_id",F.id).eq("role_in_group","sustituto");return{...F,userRole:$.has(F.id)?"member":"none",principal_count:(ne==null?void 0:ne.length)||0,sustituto_count:(se==null?void 0:se.length)||0}}));t(T);return}const{data:L,error:z}=await oe.from("group_members").select("group_id").eq("user_id",l.id);if(z)throw z;const le=new Set((L==null?void 0:L.map(re=>re.group_id))||[]),{data:te,error:H}=await oe.from("groups").select("*").or(`created_by.eq.${l.id},id.in.(${Array.from(le).join(",")})`).order("created_at",{ascending:!1});if(H)throw H;const Ee=await Promise.all((te||[]).map(async re=>{const{data:me}=await oe.from("group_members").select("id").eq("group_id",re.id).eq("role_in_group","principal"),{data:be}=await oe.from("group_members").select("id").eq("group_id",re.id).eq("role_in_group","sustituto");return{...re,userRole:le.has(re.id)?"member":"none",principal_count:(me==null?void 0:me.length)||0,sustituto_count:(be==null?void 0:be.length)||0}}));t(Ee)}catch(P){console.error("Error fetching groups:",P),q.error("Error al cargar los grupos"),t([])}finally{r(!1)}},b=P=>{u(`/group/${P}`)},_=(P,M)=>{P.stopPropagation(),m(M),x(!0)},N=()=>{const P=e.filter(z=>z.name.toLowerCase().includes(S.toLowerCase())),M=P.filter(z=>z.created_by===(l==null?void 0:l.id)),U=P.filter(z=>z.userRole==="member"&&z.created_by!==(l==null?void 0:l.id)),L=c?P.filter(z=>z.userRole==="none"&&z.created_by!==(l==null?void 0:l.id)&&!U.some(le=>le.id===z.id)):[];return{created:M,member:U,other:L}};return d.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Grupos"}),d.jsxs(Ne,{onClick:()=>o(!0),className:"flex items-center space-x-2",children:[d.jsx(Gg,{className:"w-5 h-5"}),d.jsx("span",{children:"Crear Grupo"})]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("input",{type:"text",placeholder:"Buscar grupos...",value:S,onChange:P=>C(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),n?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cargando grupos..."}):e.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(gd,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsx("p",{className:"text-gray-500",children:"No tienes grupos disponibles. Crea uno para empezar!"})]}):d.jsxs("div",{className:"space-y-8",children:[N().created.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos que administras"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N().created.map(P=>d.jsx(lp,{group:P,user:l,isAdmin:c,onDelete:_,onClick:()=>b(P.id)},P.id))})]}),N().member.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grupos donde participas"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N().member.map(P=>d.jsx(lp,{group:P,user:l,isAdmin:c,onDelete:_,onClick:()=>b(P.id)},P.id))})]}),c&&N().other.length>0&&d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Otros grupos"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N().other.map(P=>d.jsx(lp,{group:P,user:l,isAdmin:c,onDelete:_,onClick:()=>b(P.id)},P.id))})]})]}),d.jsx(cI,{isOpen:i,onClose:()=>o(!1),onGroupCreated:j,isAdmin:c}),p&&d.jsx(dI,{isOpen:y,onClose:()=>{x(!1),m(null)},onGroupDeleted:j,group:p})]})}const lp=({group:e,user:t,isAdmin:n,onDelete:r,onClick:i})=>d.jsxs("div",{onClick:i,className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros principales",children:[d.jsx(gd,{className:"w-5 h-5 text-indigo-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.principal_count}),d.jsx("span",{className:"text-xs ml-1",children:"prin"})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-600",title:"Miembros sustitutos",children:[d.jsx(gd,{className:"w-5 h-5 text-orange-600 mr-1"}),d.jsx("span",{className:"font-medium",children:e.sustituto_count}),d.jsx("span",{className:"text-xs ml-1",children:"sust"})]})]}),(n||e.created_by===(t==null?void 0:t.id))&&d.jsx("button",{onClick:o=>r(o,e),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:d.jsx(Vg,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.created_by===(t==null?void 0:t.id)&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-indigo-100 text-indigo-700",children:"Creador"}),e.userRole==="member"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Miembro"}),e.userRole==="none"&&d.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:"Grupo"})]})]});function hI({isOpen:e,onClose:t,groupId:n,instruments:r,onMemberAdded:i,isEmptyGroup:o,userRole:l}){const[u,c]=v.useState(""),[h,p]=v.useState(""),[m,y]=v.useState("principal"),[x,S]=v.useState([]),[C,j]=v.useState(""),[b,_]=v.useState(!1),[N,P]=v.useState(!1),[M,U]=v.useState([]),[L,z]=v.useState(!1),{user:le}=Vn(),te=()=>{c(""),p(""),y("principal"),S([]),j(""),_(!1),U([])},H=async()=>{if(le)try{const{data:$,error:T}=await oe.from("users").select("name, email").eq("id",le.id).single();if(T)throw T;$&&(c($.name||""),p($.email||""))}catch($){console.error("Error fetching user info:",$)}},Ee=async()=>{var $;if(le)try{const{data:T,error:F}=await oe.from("group_members").select("role_in_group").eq("group_id",n).eq("user_id",le.id);if(F)throw F;z((($=T==null?void 0:T[0])==null?void 0:$.role_in_group)==="principal")}catch(T){console.error("Error checking principal status:",T),z(!1)}},re=async()=>{try{const{data:$,error:T}=await oe.from("roles").select("*").eq("group_id",n).order("name");if(T)throw T;U($||[])}catch($){console.error("Error loading roles:",$),q.error("Error al cargar los roles")}};if(v.useEffect(()=>{e&&re()},[e]),v.useEffect(()=>{e||te()},[e]),v.useEffect(()=>{le&&(Ee(),l==="user"&&!L?H():(c(""),p("")))},[le,l,L]),!e||!le)return null;const me=()=>{if(!C.trim()){q.error("Por favor ingresa un nombre para el rol");return}if(M.some(ne=>ne.name.toLowerCase()===C.trim().toLowerCase())){q.error("Este rol ya existe en el grupo");return}const T=`new-${Date.now()}`,F={id:T,name:C.trim(),isNew:!0,group_id:n};U([...M,F]),S([...x,T]),j(""),_(!1),q.success("Rol aadido y seleccionado")},be=async $=>{if($.preventDefault(),!u.trim()){q.error("Por favor ingresa un nombre");return}if(!h.trim()){q.error("Por favor ingresa un email");return}if(x.length===0){q.error("Por favor selecciona al menos un rol");return}P(!0);try{const T=x.filter(ge=>!ge.startsWith("new-")),F=M.filter(ge=>"isNew"in ge&&ge.isNew&&x.includes(ge.id)).map(ge=>({name:ge.name,group_id:n})),ne=F.map(ge=>`(${ge.name}, ${n})`),{data:se,error:_e}=await oe.rpc("add_group_member_with_instruments",{p_group_id:n,p_name:u,p_email:h.toLowerCase().trim(),p_role:o?"principal":m,p_user_id:l==="user"&&!L?le.id:null,p_instruments:T,p_new_instruments:F.map(ge=>ge.name)});if(_e)throw _e;try{const{invitation:ge}=se;if(console.log("Datos de invitacin:",ge),!ge||!ge.token)throw new Error("No se recibieron los datos de invitacin correctamente");const{error:$e}=await oe.functions.invoke("send-invitation-email",{body:{email:ge.email,token:ge.token,userExists:ge.userExists,groupName:ge.groupName,groupMemberId:ge.groupMemberId}});if($e)throw console.error("Error sending invitation email:",$e),new Error(`Error al enviar la invitacin: ${$e.message}`);q.success("Miembro aadido e invitacin enviada")}catch(ge){console.error("Error sending invitation:",ge),q.error(`Error al enviar la invitacin: ${ge.message||"Error desconocido"}`,{icon:"",duration:5e3})}i(),t(),te()}catch(T){console.error("Error adding member:",T),q.error(T.message||"Error al aadir miembro")}finally{P(!1)}},Me=l==="user"&&!L;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:Me?"Join Group":"Add New Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(hi,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:be,className:"p-6 space-y-4",children:[d.jsx(mt,{label:"Name",value:u,onChange:$=>c($.target.value),required:!0,placeholder:"Enter member name",disabled:Me}),d.jsx(mt,{label:"Email",type:"email",value:h,onChange:$=>p($.target.value),required:!0,placeholder:"Enter member email",disabled:Me}),!o&&l==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:m,onChange:$=>y($.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Instruments"}),!b&&(l==="admin"||o||L)&&d.jsxs(Ne,{type:"button",variant:"secondary",onClick:()=>_(!0),className:"text-sm py-1",children:[d.jsx(Gg,{className:"w-4 h-4 mr-1"}),"Add New"]})]}),b&&d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsx(mt,{label:"",value:C,onChange:$=>j($.target.value),placeholder:"Enter instrument name",className:"flex-1"}),d.jsxs("div",{className:"flex gap-2 mt-1",children:[d.jsx(Ne,{type:"button",onClick:me,className:"whitespace-nowrap",children:"Add"}),d.jsx(Ne,{type:"button",variant:"secondary",onClick:()=>{_(!1),j("")},className:"whitespace-nowrap",children:"Cancel"})]})]}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:M.length===0?d.jsx("p",{className:"text-sm text-gray-500",children:"No hay roles disponibles. Aade uno arriba."}):M.map($=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:x.includes($.id),onChange:T=>{T.target.checked?S([...x,$.id]):S(x.filter(F=>F!==$.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),d.jsxs("span",{className:"flex items-center capitalize",children:[d.jsx(us,{className:"w-3 h-3 mr-1"}),$.name,"isNew"in $&&d.jsx("span",{className:"ml-2 text-xs text-indigo-600",children:"(Nuevo)"})]})]},$.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(Ne,{type:"submit",loading:N,children:Me?"Join Group":"Add Member"})]})]})]})})}function pI({isOpen:e,onClose:t,member:n,instruments:r,onMemberUpdated:i,userRole:o}){const[l,u]=v.useState(n.name),[c,h]=v.useState(n.role_in_group),[p,m]=v.useState([]),[y,x]=v.useState(!1),{user:S}=Vn();if(v.useEffect(()=>{n&&(u(n.name),h(n.role_in_group),m(n.instruments.map(b=>b.id)))},[n]),!e||!S)return null;const C=o==="admin"||n.user_id===S.id,j=async b=>{if(b.preventDefault(),!C){q.error("You do not have permission to edit this member");return}if(!l.trim()){q.error("Please enter a member name");return}if(p.length===0){q.error("Please select at least one role");return}x(!0);try{const{error:_}=await oe.from("group_members").update({name:l.trim(),role_in_group:c}).eq("id",n.id);if(_)throw _;const{error:N}=await oe.from("group_member_roles").delete().eq("group_member_id",n.id);if(N)throw N;const{error:P}=await oe.from("group_member_roles").insert(p.map(M=>({group_member_id:n.id,role_id:M,created_by:S.id})));if(P)throw P;q.success("Member updated successfully!"),i(),t()}catch(_){console.error("Error updating member:",_),q.error(_.message||"Failed to update member")}finally{x(!1)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Edit Member"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",disabled:y,children:d.jsx(hi,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[d.jsx(mt,{label:"Name",value:l,onChange:b=>u(b.target.value),required:!0,placeholder:"Enter member name",disabled:!C}),o==="admin"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),d.jsxs("select",{value:c,onChange:b=>h(b.target.value),className:"w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500",disabled:!C,children:[d.jsx("option",{value:"principal",children:"Principal"}),d.jsx("option",{value:"sustituto",children:"Sustituto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:r.map(b=>d.jsxs("label",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded",children:[d.jsx("input",{type:"checkbox",checked:p.includes(b.id),onChange:_=>{_.target.checked?m([...p,b.id]):m(p.filter(N=>N!==b.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:y||!C}),d.jsxs("span",{className:"flex items-center",children:[d.jsx(us,{className:"w-3 h-3 mr-1"}),b.name]})]},b.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),C&&d.jsx(Ne,{type:"submit",loading:y,children:"Save Changes"})]})]})]})})}const Hw=3,mI=1e3;async function ut(e,t="An error occurred"){let n=0;for(;n<Hw;)try{const{data:r,error:i}=await e();if(i)throw i;return r}catch(r){if(n++,n===Hw)return console.error(t,r),q.error(t),null;await new Promise(i=>setTimeout(i,mI*n))}return null}function Qe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Hn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function fn(e,t){const n=Qe(e);return isNaN(t)?Hn(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function jr(e,t){const n=Qe(e);if(isNaN(t))return Hn(e,NaN);if(!t)return n;const r=n.getDate(),i=Hn(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return r>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const ev=6048e5,gI=864e5,XS=6e4,JS=36e5;let vI={};function eu(){return vI}function Hr(e,t){var u,c,h,p;const n=eu(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,i=Qe(e),o=i.getDay(),l=(o<r?7:0)+o-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function to(e){return Hr(e,{weekStartsOn:1})}function ZS(e){const t=Qe(e),n=t.getFullYear(),r=Hn(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=to(r),o=Hn(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=to(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function ds(e){const t=Qe(e);return t.setHours(0,0,0,0),t}function wd(e){const t=Qe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function zr(e,t){const n=ds(e),r=ds(t),i=+n-wd(n),o=+r-wd(r);return Math.round((i-o)/gI)}function yI(e){const t=ZS(e),n=Hn(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),to(n)}function Mm(e,t){const n=t*7;return fn(e,n)}function xI(e,t){return jr(e,t*12)}function wI(e){let t;return e.forEach(function(n){const r=Qe(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function _I(e){let t;return e.forEach(n=>{const r=Qe(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Ve(e,t){const n=ds(e),r=ds(t);return+n==+r}function tv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function bI(e){if(!tv(e)&&typeof e!="number")return!1;const t=Qe(e);return!isNaN(Number(t))}function Ul(e,t){const n=Qe(e),r=Qe(t),i=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return i*12+o}function SI(e,t,n){const r=Hr(e,n),i=Hr(t,n),o=+r-wd(r),l=+i-wd(i);return Math.round((o-l)/ev)}function nv(e){const t=Qe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Pn(e){const t=Qe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function eE(e){const t=Qe(e),n=Hn(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function rv(e,t){var u,c,h,p;const n=eu(),r=(t==null?void 0:t.weekStartsOn)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,i=Qe(e),o=i.getDay(),l=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}function tE(e){return rv(e,{weekStartsOn:1})}const EI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},NI=(e,t,n)=>{let r;const i=EI[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Xo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const kI={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},CI={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jI={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PI={date:Xo({formats:kI,defaultWidth:"full"}),time:Xo({formats:CI,defaultWidth:"full"}),dateTime:Xo({formats:jI,defaultWidth:"full"})},DI={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TI=(e,t,n,r)=>DI[e];function Fr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,u=n!=null&&n.width?String(n.width):l;i=e.formattingValues[u]||e.formattingValues[l]}else{const l=e.defaultWidth,u=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[u]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(t):t;return i[o]}}const OI={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},RI={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$I={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},II=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},FI={ordinalNumber:II,era:Fr({values:OI,defaultWidth:"wide"}),quarter:Fr({values:MI,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Fr({values:RI,defaultWidth:"wide"}),day:Fr({values:$I,defaultWidth:"wide"}),dayPeriod:Fr({values:AI,defaultWidth:"wide",formattingValues:LI,defaultFormattingWidth:"wide"})};function Ur(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const l=o[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?zI(u,m=>m.test(l)):UI(u,m=>m.test(l));let h;h=e.valueCallback?e.valueCallback(c):c,h=n.valueCallback?n.valueCallback(h):h;const p=t.slice(l.length);return{value:h,rest:p}}}function UI(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function zI(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function nE(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],o=t.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const u=t.slice(i.length);return{value:l,rest:u}}}const WI=/^(\d+)(th|st|nd|rd)?/i,BI=/\d+/i,HI={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qI={any:[/^b/i,/^(a|c)/i]},GI={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VI={any:[/1/i,/2/i,/3/i,/4/i]},YI={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KI={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QI={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},XI={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JI={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZI={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},e5={ordinalNumber:nE({matchPattern:WI,parsePattern:BI,valueCallback:e=>parseInt(e,10)}),era:Ur({matchPatterns:HI,defaultMatchWidth:"wide",parsePatterns:qI,defaultParseWidth:"any"}),quarter:Ur({matchPatterns:GI,defaultMatchWidth:"wide",parsePatterns:VI,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ur({matchPatterns:YI,defaultMatchWidth:"wide",parsePatterns:KI,defaultParseWidth:"any"}),day:Ur({matchPatterns:QI,defaultMatchWidth:"wide",parsePatterns:XI,defaultParseWidth:"any"}),dayPeriod:Ur({matchPatterns:JI,defaultMatchWidth:"any",parsePatterns:ZI,defaultParseWidth:"any"})},rE={code:"en-US",formatDistance:NI,formatLong:PI,formatRelative:TI,localize:FI,match:e5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function t5(e){const t=Qe(e);return zr(t,eE(t))+1}function iE(e){const t=Qe(e),n=+to(t)-+yI(t);return Math.round(n/ev)+1}function sE(e,t){var p,m,y,x;const n=Qe(e),r=n.getFullYear(),i=eu(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(y=i.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,l=Hn(e,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const u=Hr(l,t),c=Hn(e,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const h=Hr(c,t);return n.getTime()>=u.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function n5(e,t){var u,c,h,p;const n=eu(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=sE(e,t),o=Hn(e,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Hr(o,t)}function oE(e,t){const n=Qe(e),r=+Hr(n,t)-+n5(n,t);return Math.round(r/ev)+1}function it(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const $i={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return it(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):it(n+1,2)},d(e,t){return it(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return it(e.getHours()%12||12,t.length)},H(e,t){return it(e.getHours(),t.length)},m(e,t){return it(e.getMinutes(),t.length)},s(e,t){return it(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return it(i,t.length)}},Do={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qw={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return $i.y(e,t)},Y:function(e,t,n,r){const i=sE(e,r),o=i>0?i:1-i;if(t==="YY"){const l=o%100;return it(l,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):it(o,t.length)},R:function(e,t){const n=ZS(e);return it(n,t.length)},u:function(e,t){const n=e.getFullYear();return it(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return it(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return it(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return $i.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return it(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=oE(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):it(i,t.length)},I:function(e,t,n){const r=iE(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):it(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):$i.d(e,t)},D:function(e,t,n){const r=t5(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):it(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return it(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return it(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return it(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Do.noon:r===0?i=Do.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Do.evening:r>=12?i=Do.afternoon:r>=4?i=Do.morning:i=Do.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return $i.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):$i.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):it(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):it(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):$i.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):$i.s(e,t)},S:function(e,t){return $i.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Vw(r);case"XXXX":case"XX":return Is(r);case"XXXXX":case"XXX":default:return Is(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Vw(r);case"xxxx":case"xx":return Is(r);case"xxxxx":case"xxx":default:return Is(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Gw(r,":");case"OOOO":default:return"GMT"+Is(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Gw(r,":");case"zzzz":default:return"GMT"+Is(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return it(r,t.length)},T:function(e,t,n){const r=e.getTime();return it(r,t.length)}};function Gw(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+t+it(o,2)}function Vw(e,t){return e%60===0?(e>0?"-":"+")+it(Math.abs(e)/60,2):Is(e,t)}function Is(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=it(Math.trunc(r/60),2),o=it(r%60,2);return n+i+t+o}const Yw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},aE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},r5=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Yw(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Yw(r,t)).replace("{{time}}",aE(i,t))},i5={p:aE,P:r5},s5=/^D+$/,o5=/^Y+$/,a5=["D","DD","YY","YYYY"];function l5(e){return s5.test(e)}function u5(e){return o5.test(e)}function c5(e,t,n){const r=d5(e,t,n);if(console.warn(r),a5.includes(e))throw new RangeError(r)}function d5(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const f5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p5=/^'([^]*?)'?$/,m5=/''/g,g5=/[a-zA-Z]/;function Ye(e,t,n){var p,m,y,x,S,C,j,b;const r=eu(),i=(n==null?void 0:n.locale)??r.locale??rE,o=(n==null?void 0:n.firstWeekContainsDate)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((C=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:C.weekStartsOn)??r.weekStartsOn??((b=(j=r.locale)==null?void 0:j.options)==null?void 0:b.weekStartsOn)??0,u=Qe(e);if(!bI(u))throw new RangeError("Invalid time value");let c=t.match(h5).map(_=>{const N=_[0];if(N==="p"||N==="P"){const P=i5[N];return P(_,i.formatLong)}return _}).join("").match(f5).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const N=_[0];if(N==="'")return{isToken:!1,value:v5(_)};if(qw[N])return{isToken:!0,value:_};if(N.match(g5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(c=i.localize.preprocessor(u,c));const h={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return c.map(_=>{if(!_.isToken)return _.value;const N=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&u5(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&l5(N))&&c5(N,t,String(e));const P=qw[N[0]];return P(u,N,i.localize,h)}).join("")}function v5(e){const t=e.match(p5);return t?t[1].replace(m5,"'"):e}function y5(e){const t=Qe(e),n=t.getFullYear(),r=t.getMonth(),i=Hn(e,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function x5(e){return Math.trunc(+Qe(e)/1e3)}function w5(e){const t=Qe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function _5(e,t){return SI(w5(e),Pn(e),t)+1}function Rm(e,t){const n=Qe(e),r=Qe(t);return n.getTime()>r.getTime()}function lE(e,t){const n=Qe(e),r=Qe(t);return+n<+r}function Kw(e){return+Qe(e)>Date.now()}function iv(e,t){const n=Qe(e),r=Qe(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function b5(e,t){const n=Qe(e),r=Qe(t);return n.getFullYear()===r.getFullYear()}function up(e,t){return fn(e,-t)}function Os(e,t){const r=k5(e);let i;if(r.date){const c=C5(r.date,2);i=j5(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const o=i.getTime();let l=0,u;if(r.time&&(l=P5(r.time),isNaN(l)))return new Date(NaN);if(r.timezone){if(u=D5(r.timezone),isNaN(u))return new Date(NaN)}else{const c=new Date(o+l),h=new Date(0);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return new Date(o+l+u)}const wc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},S5=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,E5=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,N5=/^([+-])(\d{2})(?::?(\d{2}))?$/;function k5(e){const t={},n=e.split(wc.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],wc.timeZoneDelimiter.test(t.date)&&(t.date=e.split(wc.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=wc.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function C5(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function j5(e,t){if(t===null)return new Date(NaN);const n=e.match(S5);if(!n)return new Date(NaN);const r=!!n[4],i=Xa(n[1]),o=Xa(n[2])-1,l=Xa(n[3]),u=Xa(n[4]),c=Xa(n[5])-1;if(r)return $5(t,u,c)?T5(t,u,c):new Date(NaN);{const h=new Date(0);return!M5(t,o,l)||!R5(t,i)?new Date(NaN):(h.setUTCFullYear(t,o,Math.max(i,l)),h)}}function Xa(e){return e?parseInt(e):1}function P5(e){const t=e.match(E5);if(!t)return NaN;const n=cp(t[1]),r=cp(t[2]),i=cp(t[3]);return A5(n,r,i)?n*JS+r*XS+i*1e3:NaN}function cp(e){return e&&parseFloat(e.replace(",","."))||0}function D5(e){if(e==="Z")return 0;const t=e.match(N5);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return L5(r,i)?n*(r*JS+i*XS):NaN}function T5(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,o=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const O5=[31,null,31,30,31,30,31,31,30,31,30,31];function uE(e){return e%400===0||e%4===0&&e%100!==0}function M5(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(O5[t]||(uE(e)?29:28))}function R5(e,t){return t>=1&&t<=(uE(e)?366:365)}function $5(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function A5(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function L5(e,t){return t>=0&&t<=59}function dp(e,t){const n=Qe(e),r=n.getFullYear(),i=n.getDate(),o=Hn(e,0);o.setFullYear(r,t,15),o.setHours(0,0,0,0);const l=y5(o);return n.setMonth(t,Math.min(i,l)),n}function Qw(e,t){const n=Qe(e);return isNaN(+n)?Hn(e,NaN):(n.setFullYear(t),n)}const I5={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},F5=(e,t,n)=>{let r;const i=I5[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},U5={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},z5={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},W5={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B5={date:Xo({formats:U5,defaultWidth:"full"}),time:Xo({formats:z5,defaultWidth:"full"}),dateTime:Xo({formats:W5,defaultWidth:"full"})},H5={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},q5={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},G5=(e,t,n,r)=>t.getHours()!==1?q5[e]:H5[e],V5={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},Y5={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},K5={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Q5={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},X5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},J5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Z5=(e,t)=>Number(e)+"",e6={ordinalNumber:Z5,era:Fr({values:V5,defaultWidth:"wide"}),quarter:Fr({values:Y5,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Fr({values:K5,defaultWidth:"wide"}),day:Fr({values:Q5,defaultWidth:"wide"}),dayPeriod:Fr({values:X5,defaultWidth:"wide",formattingValues:J5,defaultFormattingWidth:"wide"})},t6=/^(\d+)()?/i,n6=/\d+/i,r6={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},i6={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},s6={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},o6={any:[/1/i,/2/i,/3/i,/4/i]},a6={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},l6={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},u6={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},c6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},d6={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},f6={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},h6={ordinalNumber:nE({matchPattern:t6,parsePattern:n6,valueCallback:function(e){return parseInt(e,10)}}),era:Ur({matchPatterns:r6,defaultMatchWidth:"wide",parsePatterns:i6,defaultParseWidth:"any"}),quarter:Ur({matchPatterns:s6,defaultMatchWidth:"wide",parsePatterns:o6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ur({matchPatterns:a6,defaultMatchWidth:"wide",parsePatterns:l6,defaultParseWidth:"any"}),day:Ur({matchPatterns:u6,defaultMatchWidth:"wide",parsePatterns:c6,defaultParseWidth:"any"}),dayPeriod:Ur({matchPatterns:d6,defaultMatchWidth:"any",parsePatterns:f6,defaultParseWidth:"any"})},Bo={code:"es",formatDistance:F5,formatLong:B5,formatRelative:G5,localize:e6,match:h6,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Re=function(){return Re=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Re.apply(this,arguments)};function p6(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function cE(e,t,n){for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function tu(e){return e.mode==="multiple"}function nu(e){return e.mode==="range"}function df(e){return e.mode==="single"}var m6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function g6(e,t){return Ye(e,"LLLL y",t)}function v6(e,t){return Ye(e,"d",t)}function y6(e,t){return Ye(e,"LLLL",t)}function x6(e){return"".concat(e)}function w6(e,t){return Ye(e,"cccccc",t)}function _6(e,t){return Ye(e,"yyyy",t)}var b6=Object.freeze({__proto__:null,formatCaption:g6,formatDay:v6,formatMonthCaption:y6,formatWeekNumber:x6,formatWeekdayName:w6,formatYearCaption:_6}),S6=function(e,t,n){return Ye(e,"do MMMM (EEEE)",n)},E6=function(){return"Month: "},N6=function(){return"Go to next month"},k6=function(){return"Go to previous month"},C6=function(e,t){return Ye(e,"cccc",t)},j6=function(e){return"Week n. ".concat(e)},P6=function(){return"Year: "},D6=Object.freeze({__proto__:null,labelDay:S6,labelMonthDropdown:E6,labelNext:N6,labelPrevious:k6,labelWeekNumber:j6,labelWeekday:C6,labelYearDropdown:P6});function T6(){var e="buttons",t=m6,n=rE,r={},i={},o=1,l={},u=new Date;return{captionLayout:e,classNames:t,formatters:b6,labels:D6,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:o,styles:l,today:u,mode:"default"}}function O6(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,i=e.toMonth,o=e.fromDate,l=e.toDate;return r?o=Pn(r):t&&(o=new Date(t,0,1)),i?l=nv(i):n&&(l=new Date(n,11,31)),{fromDate:o?ds(o):void 0,toDate:l?ds(l):void 0}}var dE=v.createContext(void 0);function M6(e){var t,n=e.initialProps,r=T6(),i=O6(n),o=i.fromDate,l=i.toDate,u=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;u!=="buttons"&&(!o||!l)&&(u="buttons");var c;(df(n)||tu(n)||nu(n))&&(c=n.onSelect);var h=Re(Re(Re({},r),n),{captionLayout:u,classNames:Re(Re({},r.classNames),n.classNames),components:Re({},n.components),formatters:Re(Re({},r.formatters),n.formatters),fromDate:o,labels:Re(Re({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Re(Re({},r.modifiers),n.modifiers),modifiersClassNames:Re(Re({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Re(Re({},r.styles),n.styles),toDate:l});return d.jsx(dE.Provider,{value:h,children:e.children})}function dt(){var e=v.useContext(dE);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function fE(e){var t=dt(),n=t.locale,r=t.classNames,i=t.styles,o=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:n})})}function R6(e){return d.jsx("svg",Re({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hE(e){var t,n,r=e.onChange,i=e.value,o=e.children,l=e.caption,u=e.className,c=e.style,h=dt(),p=(n=(t=h.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:R6;return d.jsxs("div",{className:u,style:c,children:[d.jsx("span",{className:h.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:i,onChange:r,children:o}),d.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[l,d.jsx(p,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function $6(e){var t,n=dt(),r=n.fromDate,i=n.toDate,o=n.styles,l=n.locale,u=n.formatters.formatMonthCaption,c=n.classNames,h=n.components,p=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});var m=[];if(b5(r,i))for(var y=Pn(r),x=r.getMonth();x<=i.getMonth();x++)m.push(dp(y,x));else for(var y=Pn(new Date),x=0;x<=11;x++)m.push(dp(y,x));var S=function(j){var b=Number(j.target.value),_=dp(Pn(e.displayMonth),b);e.onChange(_)},C=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:hE;return d.jsx(C,{name:"months","aria-label":p(),className:c.dropdown_month,style:o.dropdown_month,onChange:S,value:e.displayMonth.getMonth(),caption:u(e.displayMonth,{locale:l}),children:m.map(function(j){return d.jsx("option",{value:j.getMonth(),children:u(j,{locale:l})},j.getMonth())})})}function A6(e){var t,n=e.displayMonth,r=dt(),i=r.fromDate,o=r.toDate,l=r.locale,u=r.styles,c=r.classNames,h=r.components,p=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,y=[];if(!i)return d.jsx(d.Fragment,{});if(!o)return d.jsx(d.Fragment,{});for(var x=i.getFullYear(),S=o.getFullYear(),C=x;C<=S;C++)y.push(Qw(eE(new Date),C));var j=function(_){var N=Qw(Pn(n),Number(_.target.value));e.onChange(N)},b=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:hE;return d.jsx(b,{name:"years","aria-label":m(),className:c.dropdown_year,style:u.dropdown_year,onChange:j,value:n.getFullYear(),caption:p(n,{locale:l}),children:y.map(function(_){return d.jsx("option",{value:_.getFullYear(),children:p(_,{locale:l})},_.getFullYear())})})}function L6(e,t){var n=v.useState(e),r=n[0],i=n[1],o=t===void 0?r:t;return[o,i]}function I6(e){var t=e.month,n=e.defaultMonth,r=e.today,i=t||n||r||new Date,o=e.toDate,l=e.fromDate,u=e.numberOfMonths,c=u===void 0?1:u;if(o&&Ul(o,i)<0){var h=-1*(c-1);i=jr(o,h)}return l&&Ul(i,l)<0&&(i=l),Pn(i)}function F6(){var e=dt(),t=I6(e),n=L6(t,e.month),r=n[0],i=n[1],o=function(l){var u;if(!e.disableNavigation){var c=Pn(l);i(c),(u=e.onMonthChange)===null||u===void 0||u.call(e,c)}};return[r,o]}function U6(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,i=Pn(e),o=Pn(jr(i,r)),l=Ul(o,i),u=[],c=0;c<l;c++){var h=jr(i,c);u.push(h)}return n&&(u=u.reverse()),u}function z6(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,o=i===void 0?1:i,l=r?o:1,u=Pn(e);if(!n)return jr(u,l);var c=Ul(n,e);if(!(c<o))return jr(u,l)}}function W6(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,o=i===void 0?1:i,l=r?o:1,u=Pn(e);if(!n)return jr(u,-l);var c=Ul(u,n);if(!(c<=0))return jr(u,-l)}}var pE=v.createContext(void 0);function B6(e){var t=dt(),n=F6(),r=n[0],i=n[1],o=U6(r,t),l=z6(r,t),u=W6(r,t),c=function(m){return o.some(function(y){return iv(m,y)})},h=function(m,y){c(m)||(y&&lE(m,y)?i(jr(m,1+t.numberOfMonths*-1)):i(m))},p={currentMonth:r,displayMonths:o,goToMonth:i,goToDate:h,previousMonth:u,nextMonth:l,isDateDisplayed:c};return d.jsx(pE.Provider,{value:p,children:e.children})}function ru(){var e=v.useContext(pE);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Xw(e){var t,n=dt(),r=n.classNames,i=n.styles,o=n.components,l=ru().goToMonth,u=function(p){l(jr(p,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:fE,h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:h}),d.jsx($6,{onChange:u,displayMonth:e.displayMonth}),d.jsx(A6,{onChange:u,displayMonth:e.displayMonth})]})}function H6(e){return d.jsx("svg",Re({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function q6(e){return d.jsx("svg",Re({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var _d=v.forwardRef(function(e,t){var n=dt(),r=n.classNames,i=n.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var l=o.join(" "),u=Re(Re({},i.button_reset),i.button);return e.style&&Object.assign(u,e.style),d.jsx("button",Re({},e,{ref:t,type:"button",className:l,style:u}))});function G6(e){var t,n,r=dt(),i=r.dir,o=r.locale,l=r.classNames,u=r.styles,c=r.labels,h=c.labelPrevious,p=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var y=h(e.previousMonth,{locale:o}),x=[l.nav_button,l.nav_button_previous].join(" "),S=p(e.nextMonth,{locale:o}),C=[l.nav_button,l.nav_button_next].join(" "),j=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:q6,b=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:H6;return d.jsxs("div",{className:l.nav,style:u.nav,children:[!e.hidePrevious&&d.jsx(_d,{name:"previous-month","aria-label":y,className:x,style:u.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?d.jsx(j,{className:l.nav_icon,style:u.nav_icon}):d.jsx(b,{className:l.nav_icon,style:u.nav_icon})}),!e.hideNext&&d.jsx(_d,{name:"next-month","aria-label":S,className:C,style:u.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?d.jsx(b,{className:l.nav_icon,style:u.nav_icon}):d.jsx(j,{className:l.nav_icon,style:u.nav_icon})})]})}function Jw(e){var t=dt().numberOfMonths,n=ru(),r=n.previousMonth,i=n.nextMonth,o=n.goToMonth,l=n.displayMonths,u=l.findIndex(function(S){return iv(e.displayMonth,S)}),c=u===0,h=u===l.length-1,p=t>1&&(c||!h),m=t>1&&(h||!c),y=function(){r&&o(r)},x=function(){i&&o(i)};return d.jsx(G6,{displayMonth:e.displayMonth,hideNext:p,hidePrevious:m,nextMonth:i,previousMonth:r,onPreviousClick:y,onNextClick:x})}function V6(e){var t,n=dt(),r=n.classNames,i=n.disableNavigation,o=n.styles,l=n.captionLayout,u=n.components,c=(t=u==null?void 0:u.CaptionLabel)!==null&&t!==void 0?t:fE,h;return i?h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):l==="dropdown"?h=d.jsx(Xw,{displayMonth:e.displayMonth,id:e.id}):l==="dropdown-buttons"?h=d.jsxs(d.Fragment,{children:[d.jsx(Xw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(Jw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):h=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(Jw,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:o.caption,children:h})}function Y6(e){var t=dt(),n=t.footer,r=t.styles,i=t.classNames.tfoot;return n?d.jsx("tfoot",{className:i,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function K6(e,t,n){for(var r=n?to(new Date):Hr(new Date,{locale:e,weekStartsOn:t}),i=[],o=0;o<7;o++){var l=fn(r,o);i.push(l)}return i}function Q6(){var e=dt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,i=e.locale,o=e.weekStartsOn,l=e.ISOWeek,u=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,h=K6(i,o,l);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),h.map(function(p,m){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(p,{locale:i}),children:u(p,{locale:i})},m)})]})}function X6(){var e,t=dt(),n=t.classNames,r=t.styles,i=t.components,o=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:Q6;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(o,{})})}function J6(e){var t=dt(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var sv=v.createContext(void 0);function Z6(e){if(!tu(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx(sv.Provider,{value:t,children:e.children})}return d.jsx(eF,{initialProps:e.initialProps,children:e.children})}function eF(e){var t=e.initialProps,n=e.children,r=t.selected,i=t.min,o=t.max,l=function(h,p,m){var y,x;(y=t.onDayClick)===null||y===void 0||y.call(t,h,p,m);var S=!!(p.selected&&i&&(r==null?void 0:r.length)===i);if(!S){var C=!!(!p.selected&&o&&(r==null?void 0:r.length)===o);if(!C){var j=r?cE([],r):[];if(p.selected){var b=j.findIndex(function(_){return Ve(h,_)});j.splice(b,1)}else j.push(h);(x=t.onSelect)===null||x===void 0||x.call(t,j,h,p,m)}}},u={disabled:[]};r&&u.disabled.push(function(h){var p=o&&r.length>o-1,m=r.some(function(y){return Ve(y,h)});return!!(p&&!m)});var c={selected:r,onDayClick:l,modifiers:u};return d.jsx(sv.Provider,{value:c,children:n})}function ov(){var e=v.useContext(sv);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function tF(e,t){var n=t||{},r=n.from,i=n.to;return r&&i?Ve(i,e)&&Ve(r,e)?void 0:Ve(i,e)?{from:i,to:void 0}:Ve(r,e)?void 0:Rm(r,e)?{from:e,to:i}:{from:r,to:e}:i?Rm(e,i)?{from:i,to:e}:{from:e,to:i}:r?lE(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var av=v.createContext(void 0);function nF(e){if(!nu(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(av.Provider,{value:t,children:e.children})}return d.jsx(rF,{initialProps:e.initialProps,children:e.children})}function rF(e){var t=e.initialProps,n=e.children,r=t.selected,i=r||{},o=i.from,l=i.to,u=t.min,c=t.max,h=function(x,S,C){var j,b;(j=t.onDayClick)===null||j===void 0||j.call(t,x,S,C);var _=tF(x,r);(b=t.onSelect)===null||b===void 0||b.call(t,_,x,S,C)},p={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(p.range_start=[o],l?(p.range_end=[l],Ve(o,l)||(p.range_middle=[{after:o,before:l}])):p.range_end=[o]):l&&(p.range_start=[l],p.range_end=[l]),u&&(o&&!l&&p.disabled.push({after:up(o,u-1),before:fn(o,u-1)}),o&&l&&p.disabled.push({after:o,before:fn(o,u-1)}),!o&&l&&p.disabled.push({after:up(l,u-1),before:fn(l,u-1)})),c){if(o&&!l&&(p.disabled.push({before:fn(o,-c+1)}),p.disabled.push({after:fn(o,c-1)})),o&&l){var m=zr(l,o)+1,y=c-m;p.disabled.push({before:up(o,y)}),p.disabled.push({after:fn(l,y)})}!o&&l&&(p.disabled.push({before:fn(l,-c+1)}),p.disabled.push({after:fn(l,c-1)}))}return d.jsx(av.Provider,{value:{selected:r,onDayClick:h,modifiers:p},children:n})}function lv(){var e=v.useContext(av);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Fc(e){return Array.isArray(e)?cE([],e):e!==void 0?[e]:[]}function iF(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];t[r]=Fc(i)}),t}var Pr;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Pr||(Pr={}));var sF=Pr.Selected,si=Pr.Disabled,oF=Pr.Hidden,aF=Pr.Today,fp=Pr.RangeEnd,hp=Pr.RangeMiddle,pp=Pr.RangeStart,lF=Pr.Outside;function uF(e,t,n){var r,i=(r={},r[sF]=Fc(e.selected),r[si]=Fc(e.disabled),r[oF]=Fc(e.hidden),r[aF]=[e.today],r[fp]=[],r[hp]=[],r[pp]=[],r[lF]=[],r);return e.fromDate&&i[si].push({before:e.fromDate}),e.toDate&&i[si].push({after:e.toDate}),tu(e)?i[si]=i[si].concat(t.modifiers[si]):nu(e)&&(i[si]=i[si].concat(n.modifiers[si]),i[pp]=n.modifiers[pp],i[hp]=n.modifiers[hp],i[fp]=n.modifiers[fp]),i}var mE=v.createContext(void 0);function cF(e){var t=dt(),n=ov(),r=lv(),i=uF(t,n,r),o=iF(t.modifiers),l=Re(Re({},i),o);return d.jsx(mE.Provider,{value:l,children:e.children})}function gE(){var e=v.useContext(mE);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function dF(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function fF(e){return!!(e&&typeof e=="object"&&"from"in e)}function hF(e){return!!(e&&typeof e=="object"&&"after"in e)}function pF(e){return!!(e&&typeof e=="object"&&"before"in e)}function mF(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function gF(e,t){var n,r=t.from,i=t.to;if(r&&i){var o=zr(i,r)<0;o&&(n=[i,r],r=n[0],i=n[1]);var l=zr(e,r)>=0&&zr(i,e)>=0;return l}return i?Ve(i,e):r?Ve(r,e):!1}function vF(e){return tv(e)}function yF(e){return Array.isArray(e)&&e.every(tv)}function xF(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(vF(n))return Ve(e,n);if(yF(n))return n.includes(e);if(fF(n))return gF(e,n);if(mF(n))return n.dayOfWeek.includes(e.getDay());if(dF(n)){var r=zr(n.before,e),i=zr(n.after,e),o=r>0,l=i<0,u=Rm(n.before,n.after);return u?l&&o:o||l}return hF(n)?zr(e,n.after)>0:pF(n)?zr(n.before,e)>0:typeof n=="function"?n(e):!1})}function uv(e,t,n){var r=Object.keys(t).reduce(function(o,l){var u=t[l];return xF(e,u)&&o.push(l),o},[]),i={};return r.forEach(function(o){return i[o]=!0}),n&&!iv(e,n)&&(i.outside=!0),i}function wF(e,t){for(var n=Pn(e[0]),r=nv(e[e.length-1]),i,o,l=n;l<=r;){var u=uv(l,t),c=!u.disabled&&!u.hidden;if(!c){l=fn(l,1);continue}if(u.selected)return l;u.today&&!o&&(o=l),i||(i=l),l=fn(l,1)}return o||i}var _F=365;function vE(e,t){var n=t.moveBy,r=t.direction,i=t.context,o=t.modifiers,l=t.retry,u=l===void 0?{count:0,lastFocused:e}:l,c=i.weekStartsOn,h=i.fromDate,p=i.toDate,m=i.locale,y={day:fn,week:Mm,month:jr,year:xI,startOfWeek:function(j){return i.ISOWeek?to(j):Hr(j,{locale:m,weekStartsOn:c})},endOfWeek:function(j){return i.ISOWeek?tE(j):rv(j,{locale:m,weekStartsOn:c})}},x=y[n](e,r==="after"?1:-1);r==="before"&&h?x=wI([h,x]):r==="after"&&p&&(x=_I([p,x]));var S=!0;if(o){var C=uv(x,o);S=!C.disabled&&!C.hidden}return S?x:u.count>_F?u.lastFocused:vE(x,{moveBy:n,direction:r,context:i,modifiers:o,retry:Re(Re({},u),{count:u.count+1})})}var yE=v.createContext(void 0);function bF(e){var t=ru(),n=gE(),r=v.useState(),i=r[0],o=r[1],l=v.useState(),u=l[0],c=l[1],h=wF(t.displayMonths,n),p=i??(u&&t.isDateDisplayed(u))?u:h,m=function(){c(i),o(void 0)},y=function(j){o(j)},x=dt(),S=function(j,b){if(i){var _=vE(i,{moveBy:j,direction:b,context:x,modifiers:n});Ve(i,_)||(t.goToDate(_,i),y(_))}},C={focusedDay:i,focusTarget:p,blur:m,focus:y,focusDayAfter:function(){return S("day","after")},focusDayBefore:function(){return S("day","before")},focusWeekAfter:function(){return S("week","after")},focusWeekBefore:function(){return S("week","before")},focusMonthBefore:function(){return S("month","before")},focusMonthAfter:function(){return S("month","after")},focusYearBefore:function(){return S("year","before")},focusYearAfter:function(){return S("year","after")},focusStartOfWeek:function(){return S("startOfWeek","before")},focusEndOfWeek:function(){return S("endOfWeek","after")}};return d.jsx(yE.Provider,{value:C,children:e.children})}function cv(){var e=v.useContext(yE);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function SF(e,t){var n=gE(),r=uv(e,n,t);return r}var dv=v.createContext(void 0);function EF(e){if(!df(e.initialProps)){var t={selected:void 0};return d.jsx(dv.Provider,{value:t,children:e.children})}return d.jsx(NF,{initialProps:e.initialProps,children:e.children})}function NF(e){var t=e.initialProps,n=e.children,r=function(o,l,u){var c,h,p;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,l,u),l.selected&&!t.required){(h=t.onSelect)===null||h===void 0||h.call(t,void 0,o,l,u);return}(p=t.onSelect)===null||p===void 0||p.call(t,o,o,l,u)},i={selected:t.selected,onDayClick:r};return d.jsx(dv.Provider,{value:i,children:n})}function xE(){var e=v.useContext(dv);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function kF(e,t){var n=dt(),r=xE(),i=ov(),o=lv(),l=cv(),u=l.focusDayAfter,c=l.focusDayBefore,h=l.focusWeekAfter,p=l.focusWeekBefore,m=l.blur,y=l.focus,x=l.focusMonthBefore,S=l.focusMonthAfter,C=l.focusYearBefore,j=l.focusYearAfter,b=l.focusStartOfWeek,_=l.focusEndOfWeek,N=function($){var T,F,ne,se;df(n)?(T=r.onDayClick)===null||T===void 0||T.call(r,e,t,$):tu(n)?(F=i.onDayClick)===null||F===void 0||F.call(i,e,t,$):nu(n)?(ne=o.onDayClick)===null||ne===void 0||ne.call(o,e,t,$):(se=n.onDayClick)===null||se===void 0||se.call(n,e,t,$)},P=function($){var T;y(e),(T=n.onDayFocus)===null||T===void 0||T.call(n,e,t,$)},M=function($){var T;m(),(T=n.onDayBlur)===null||T===void 0||T.call(n,e,t,$)},U=function($){var T;(T=n.onDayMouseEnter)===null||T===void 0||T.call(n,e,t,$)},L=function($){var T;(T=n.onDayMouseLeave)===null||T===void 0||T.call(n,e,t,$)},z=function($){var T;(T=n.onDayPointerEnter)===null||T===void 0||T.call(n,e,t,$)},le=function($){var T;(T=n.onDayPointerLeave)===null||T===void 0||T.call(n,e,t,$)},te=function($){var T;(T=n.onDayTouchCancel)===null||T===void 0||T.call(n,e,t,$)},H=function($){var T;(T=n.onDayTouchEnd)===null||T===void 0||T.call(n,e,t,$)},Ee=function($){var T;(T=n.onDayTouchMove)===null||T===void 0||T.call(n,e,t,$)},re=function($){var T;(T=n.onDayTouchStart)===null||T===void 0||T.call(n,e,t,$)},me=function($){var T;(T=n.onDayKeyUp)===null||T===void 0||T.call(n,e,t,$)},be=function($){var T;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),n.dir==="rtl"?u():c();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),n.dir==="rtl"?c():u();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),h();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),p();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?C():x();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?j():S();break;case"Home":$.preventDefault(),$.stopPropagation(),b();break;case"End":$.preventDefault(),$.stopPropagation(),_();break}(T=n.onDayKeyDown)===null||T===void 0||T.call(n,e,t,$)},Me={onClick:N,onFocus:P,onBlur:M,onKeyDown:be,onKeyUp:me,onMouseEnter:U,onMouseLeave:L,onPointerEnter:z,onPointerLeave:le,onTouchCancel:te,onTouchEnd:H,onTouchMove:Ee,onTouchStart:re};return Me}function CF(){var e=dt(),t=xE(),n=ov(),r=lv(),i=df(e)?t.selected:tu(e)?n.selected:nu(e)?r.selected:void 0;return i}function jF(e){return Object.values(Pr).includes(e)}function PF(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var i=e.modifiersClassNames[r];if(i)n.push(i);else if(jF(r)){var o=e.classNames["day_".concat(r)];o&&n.push(o)}}),n}function DF(e,t){var n=Re({},e.styles.day);return Object.keys(t).forEach(function(r){var i;n=Re(Re({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function TF(e,t,n){var r,i,o,l=dt(),u=cv(),c=SF(e,t),h=kF(e,c),p=CF(),m=!!(l.onDayClick||l.mode!=="default");v.useEffect(function(){var U;c.outside||u.focusedDay&&m&&Ve(u.focusedDay,e)&&((U=n.current)===null||U===void 0||U.focus())},[u.focusedDay,e,n,m,c.outside]);var y=PF(l,c).join(" "),x=DF(l,c),S=!!(c.outside&&!l.showOutsideDays||c.hidden),C=(o=(i=l.components)===null||i===void 0?void 0:i.DayContent)!==null&&o!==void 0?o:J6,j=d.jsx(C,{date:e,displayMonth:t,activeModifiers:c}),b={style:x,className:y,children:j,role:"gridcell"},_=u.focusTarget&&Ve(u.focusTarget,e)&&!c.outside,N=u.focusedDay&&Ve(u.focusedDay,e),P=Re(Re(Re({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=N||_?0:-1,r)),h),M={isButton:m,isHidden:S,activeModifiers:c,selectedDays:p,buttonProps:P,divProps:b};return M}function OF(e){var t=v.useRef(null),n=TF(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(_d,Re({name:"day",ref:t},n.buttonProps)):d.jsx("div",Re({},n.divProps))}function MF(e){var t=e.number,n=e.dates,r=dt(),i=r.onWeekNumberClick,o=r.styles,l=r.classNames,u=r.locale,c=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,p=h(Number(t),{locale:u});if(!i)return d.jsx("span",{className:l.weeknumber,style:o.weeknumber,children:p});var m=c(Number(t),{locale:u}),y=function(x){i(t,n,x)};return d.jsx(_d,{name:"week-number","aria-label":m,className:l.weeknumber,style:o.weeknumber,onClick:y,children:p})}function RF(e){var t,n,r=dt(),i=r.styles,o=r.classNames,l=r.showWeekNumber,u=r.components,c=(t=u==null?void 0:u.Day)!==null&&t!==void 0?t:OF,h=(n=u==null?void 0:u.WeekNumber)!==null&&n!==void 0?n:MF,p;return l&&(p=d.jsx("td",{className:o.cell,style:i.cell,children:d.jsx(h,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:o.row,style:i.row,children:[p,e.dates.map(function(m){return d.jsx("td",{className:o.cell,style:i.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:m})},x5(m))})]})}function Zw(e,t,n){for(var r=n!=null&&n.ISOWeek?tE(t):rv(t,n),i=n!=null&&n.ISOWeek?to(e):Hr(e,n),o=zr(r,i),l=[],u=0;u<=o;u++)l.push(fn(i,u));var c=l.reduce(function(h,p){var m=n!=null&&n.ISOWeek?iE(p):oE(p,n),y=h.find(function(x){return x.weekNumber===m});return y?(y.dates.push(p),h):(h.push({weekNumber:m,dates:[p]}),h)},[]);return c}function $F(e,t){var n=Zw(Pn(e),nv(e),t);if(t!=null&&t.useFixedWeeks){var r=_5(e,t);if(r<6){var i=n[n.length-1],o=i.dates[i.dates.length-1],l=Mm(o,6-r),u=Zw(Mm(o,1),l,t);n.push.apply(n,u)}}return n}function AF(e){var t,n,r,i=dt(),o=i.locale,l=i.classNames,u=i.styles,c=i.hideHead,h=i.fixedWeeks,p=i.components,m=i.weekStartsOn,y=i.firstWeekContainsDate,x=i.ISOWeek,S=$F(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:x,locale:o,weekStartsOn:m,firstWeekContainsDate:y}),C=(t=p==null?void 0:p.Head)!==null&&t!==void 0?t:X6,j=(n=p==null?void 0:p.Row)!==null&&n!==void 0?n:RF,b=(r=p==null?void 0:p.Footer)!==null&&r!==void 0?r:Y6;return d.jsxs("table",{id:e.id,className:l.table,style:u.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(C,{}),d.jsx("tbody",{className:l.tbody,style:u.tbody,children:S.map(function(_){return d.jsx(j,{displayMonth:e.displayMonth,dates:_.dates,weekNumber:_.weekNumber},_.weekNumber)})}),d.jsx(b,{displayMonth:e.displayMonth})]})}function LF(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var IF=LF()?v.useLayoutEffect:v.useEffect,mp=!1,FF=0;function e1(){return"react-day-picker-".concat(++FF)}function UF(e){var t,n=e??(mp?e1():null),r=v.useState(n),i=r[0],o=r[1];return IF(function(){i===null&&o(e1())},[]),v.useEffect(function(){mp===!1&&(mp=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function zF(e){var t,n,r=dt(),i=r.dir,o=r.classNames,l=r.styles,u=r.components,c=ru().displayMonths,h=UF(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),p=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[o.month],y=l.month,x=e.displayIndex===0,S=e.displayIndex===c.length-1,C=!x&&!S;i==="rtl"&&(t=[x,S],S=t[0],x=t[1]),x&&(m.push(o.caption_start),y=Re(Re({},y),l.caption_start)),S&&(m.push(o.caption_end),y=Re(Re({},y),l.caption_end)),C&&(m.push(o.caption_between),y=Re(Re({},y),l.caption_between));var j=(n=u==null?void 0:u.Caption)!==null&&n!==void 0?n:V6;return d.jsxs("div",{className:m.join(" "),style:y,children:[d.jsx(j,{id:h,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(AF,{id:p,"aria-labelledby":h,displayMonth:e.displayMonth})]},e.displayIndex)}function WF(e){var t=dt(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function BF(e){var t,n,r=e.initialProps,i=dt(),o=cv(),l=ru(),u=v.useState(!1),c=u[0],h=u[1];v.useEffect(function(){i.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),h(!0)))},[i.initialFocus,c,o.focus,o.focusTarget,o]);var p=[i.classNames.root,i.className];i.numberOfMonths>1&&p.push(i.classNames.multiple_months),i.showWeekNumber&&p.push(i.classNames.with_weeknumber);var m=Re(Re({},i.styles.root),i.style),y=Object.keys(r).filter(function(S){return S.startsWith("data-")}).reduce(function(S,C){var j;return Re(Re({},S),(j={},j[C]=r[C],j))},{}),x=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:WF;return d.jsx("div",Re({className:p.join(" "),style:m,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},y,{children:d.jsx(x,{children:l.displayMonths.map(function(S,C){return d.jsx(zF,{displayIndex:C,displayMonth:S},C)})})}))}function HF(e){var t=e.children,n=p6(e,["children"]);return d.jsx(M6,{initialProps:n,children:d.jsx(B6,{children:d.jsx(EF,{initialProps:n,children:d.jsx(Z6,{initialProps:n,children:d.jsx(nF,{initialProps:n,children:d.jsx(cF,{children:d.jsx(bF,{children:t})})})})})})})}function qF(e){return d.jsx(HF,Re({},e,{children:d.jsx(BF,{initialProps:e})}))}function GF({members:e,onAvailableDatesChange:t,groupName:n="Sin nombre"}){const r=`
    /* Estilos para el calendario */
    .rdp {
      transition: none !important;
    }
    
    /* Contenedor del calendario con altura fija para evitar saltos */
    .calendar-container {
      min-height: 380px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Capa de carga */
    .calendar-loading-overlay {
      position: absolute;
      inset: 0;
      background-color: rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      border-radius: 0.5rem;
    }
    
    /* Estilos para das seleccionados - con mayor especificidad para garantizar que se apliquen */
    .rdp-day_selected:not([disabled]), 
    .rdp-day_selected:hover:not([disabled]),
    .rdp-day_selected:focus:not([disabled]) { 
      font-weight: bold !important;
      box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5) !important;
    }
    
    /* Separamos los estilos para que el fondo no afecte a la visualizacin de los puntos */
    .rdp-day_selected .day-content:not(.selected-day),
    .rdp-day_selected:hover .day-content:not(.selected-day),
    .rdp-day_selected:focus .day-content:not(.selected-day) {
      background-color: #4f46e5 !important;
    }
    
    /* Estilos para das con eventos externos */
    .has-external-events {
      position: relative;
    }
    
    .has-external-events::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 2px dashed #f97316;
      border-radius: 4px;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Aseguramos que los das seleccionados siempre tengan prioridad visual */
    .rdp-day_selected .has-external-events::after,
    .selected-day .has-external-events::after {
      border-color: white;
    }
    
    /* Mejoramos la visibilidad de los puntos de disponibilidad */
    .availability-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      margin: 1px;
    }
    
    .availability-dot.you {
      background-color: #4f46e5;
    }
    
    .availability-dot.others {
      background-color: #c7d2fe;
    }
  `,{id:i}=Hb(),[o,l]=v.useState([]),[u,c]=v.useState(void 0),[h,p]=v.useState(!0),[m,y]=v.useState(!1),[x,S]=v.useState(null),[C,j]=v.useState(!1),[b,_]=v.useState([]),[N,P]=v.useState([]),[M,U]=v.useState([]),[L,z]=v.useState([]),[le,te]=v.useState([]),{user:H}=Vn();v.useEffect(()=>{H&&(Ee(),Me(),me(),re(),be())},[H,i]),v.useEffect(()=>{F()},[o,N,M,L]),v.useEffect(()=>{t&&t(b)},[b,t]);const Ee=async()=>{const Z=await ut(async()=>await oe.from("users").select("role").eq("id",H==null?void 0:H.id).single(),"Error checking admin status");Z&&j(Z.role==="admin")},re=async()=>{const Z=await ut(async()=>await oe.from("events").select(`
            id,
            date,
            name,
            group_id,
            event_members (
              user_id
            )
          `),"Error al obtener los eventos");if(Z){const V=[];Z.forEach(W=>{var K;(K=W.event_members)==null||K.forEach(fe=>{V.push({event_id:W.id,date:W.date,user_id:fe.user_id,name:W.name,group_id:W.group_id})})}),P(V)}},me=async()=>{const Z=await ut(async()=>await oe.from("events").select(`
            id,
            date,
            name,
            group_id
          `).eq("group_id",i),"Error fetching group events");if(Z){const V=Z.map(W=>({event_id:W.id,date:W.date,user_id:"",name:W.name,group_id:W.group_id}));U(V)}},be=async()=>{console.log("=== INICIO fetchMemberExternalEvents ==="),console.log("GroupId actual:",i);const Z=await oe.from("events").select(`
        id,
        date,
        group_id,
        name,
        event_members (
          user_id
        )
      `).neq("group_id",i);if(console.log("4. Query completa:",Z.data),Z.error){console.error("Error al obtener eventos externos:",Z.error);return}const V=Z.data||[],W=[];V.forEach(K=>{var fe;(fe=K.event_members)==null||fe.forEach(ee=>{W.push({user_id:ee.user_id,date:K.date})})}),z(W),console.log("Eventos externos formateados:",W),console.log("=== FIN fetchMemberExternalEvents ===")},Me=async()=>{if(i){p(!0);try{const Z=e.filter(W=>W.user_id!==null).map(W=>W.user_id),V=await ut(async()=>await oe.from("member_availability").select("user_id, date").in("user_id",Z).order("date"),"Error fetching availabilities");if(V){const W=e.filter(K=>K.user_id!==null).map(K=>({userId:K.user_id,memberName:K.name||"Unknown Member",dates:V.filter(fe=>fe.user_id===K.user_id).map(fe=>new Date(fe.date)),instruments:K.instruments||[],roleInBand:K.role_in_group||"principal"}));l(W)}}catch(Z){console.error("Error fetching availabilities:",Z),q.error("Error al obtener las disponibilidades")}finally{p(!1)}}},$=(Z,V)=>{if(console.log(`
Verificando disponibilidad para el miembro: ${Z.name} (ID: ${Z.user_id}) en la fecha: ${Ye(V,"yyyy-MM-dd")}`),N.some(R=>{const ae=new Date(R.date),ce=R.user_id===Z.user_id&&Ve(ae,V);return ce&&console.log(`- Tiene un evento en el grupo actual el da: ${Ye(ae,"yyyy-MM-dd")}`),ce}))return console.log(`=> El miembro ${Z.name} no est disponible debido a un evento en el grupo actual.`),!1;if(L.some(R=>{const ae=new Date(R.date),ce=R.user_id===Z.user_id&&Ve(ae,V);return ce&&console.log(`- Tiene un evento en otra banda el da: ${Ye(ae,"yyyy-MM-dd")}`),ce}))return console.log(`=> El miembro ${Z.name} no est disponible debido a un evento en otra banda.`),!1;const fe=o.find(R=>R.userId===Z.user_id),ee=(fe==null?void 0:fe.dates.some(R=>Ve(R,V)))??!1;return console.log(`- Disponibilidad marcada: ${ee?"S":"No"}`),ee},T=Z=>M.filter(V=>Ve(new Date(V.date),Z)),F=()=>{try{if(console.log(`
=== INICIO calculateGroupAvailability ===`),console.log("Members recibidos:",e),e.length===0){console.log("No hay miembros en el grupo"),_([]),te([]);return}const Z=new Set;console.log("1. Creando conjunto de fechas...");const V=[],W=[],K=e.filter(R=>R.role_in_group==="principal");if(console.log("4. Miembros principales encontrados:",K.length),console.log("5. Nombres de principales:",K.map(R=>R.name)),K.length===0){console.log("No hay miembros principales en el grupo"),_([]),te([]);return}o.forEach(R=>{R.dates.forEach(ae=>{Z.add(Ye(ae,"yyyy-MM-dd"))})}),L.forEach(R=>{Z.add(Ye(new Date(R.date),"yyyy-MM-dd"))}),console.log("3. Fechas incluyendo eventos externos:",Array.from(Z));const fe=Array.from(Z).map(R=>new Date(R));console.log("4. Miembros principales encontrados:",K.length),console.log("5. Nombres de principales:",K.map(R=>R.name));const ee=e.filter(R=>R.role_in_group==="sustituto");console.log("6. Sustitutos encontrados:",ee.length),fe.forEach(R=>{const ae=Ye(R,"yyyy-MM-dd");console.log(`
=== Analizando fecha: ${ae} ===`),console.log("Miembros principales a verificar:",K.map(G=>G.name)),K.forEach(G=>{console.log(`
Verificando principal: ${G.name}`);const de=o.find(nt=>nt.userId===G.user_id),ve=(de==null?void 0:de.dates.some(nt=>Ve(nt,R)))??!1;console.log(`- Disponibilidad marcada: ${ve}`);const Pe=N.some(nt=>nt.user_id===G.user_id&&Ve(new Date(nt.date),R));console.log(`- Tiene evento en este grupo: ${Pe}`);const ke=L.some(nt=>nt.user_id===G.user_id&&Ve(new Date(nt.date),R));console.log(`- Tiene evento externo: ${ke}`),console.log(`=> Disponibilidad final: ${ve&&!Pe&&!ke}`)});const ce=K.filter(G=>{const de=$(G,R);return console.log(`${G.name} disponible: ${de}`),!de});console.log(`
Principales NO disponibles (${ce.length}):`,ce.map(G=>G.name)),ce.length===0?(console.log(`=> La fecha ${ae} est disponible para el grupo (todos los principales disponibles).`),V.push(R)):(console.log(`
Verificando sustitutos para ${ae}...`),ce.every(de=>{console.log(`
Buscando sustitutos para ${de.name}:`);const ve=de.instruments.map(Ke=>Ke.id);console.log("- Instrumentos requeridos:",ve);const Pe=ee.filter(Ke=>{const nt=$(Ke,R);return console.log(`- Sustituto ${Ke.name}: Disponible=${nt}`),nt});console.log("- Sustitutos disponibles:",Pe.map(Ke=>Ke.name));const ke=Pe.some(Ke=>{const nt=Ke.instruments.map(yt=>yt.id),Xe=ve.every(yt=>nt.includes(yt));return console.log(`  * ${Ke.name} puede cubrir instrumentos: ${Xe}`),Xe});return console.log(`=> ${de.name} puede ser sustituido: ${ke}`),ke})?(console.log(`=> La fecha ${ae} est disponible mediante sustituciones.`),V.push(R)):(console.log(`=> La fecha ${ae} NO est disponible para el grupo.`),W.push(R)))}),console.log(`
=== RESUMEN FINAL ===`),console.log("Fechas disponibles:",V.map(R=>Ye(R,"yyyy-MM-dd"))),console.log("Fechas NO disponibles:",W.map(R=>Ye(R,"yyyy-MM-dd"))),_(V),te(W)}catch(Z){console.error("ERROR en calculateGroupAvailability:",Z)}},ne=()=>{const Z=e.find(V=>V.user_id===(H==null?void 0:H.id));return C||(Z==null?void 0:Z.role_in_group)==="principal"},[se,_e]=v.useState(!1),ge=v.useRef(null),$e=async(Z=!1)=>{try{const V=window.scrollY;return Z?_e(!0):y(!0),await new Promise(W=>setTimeout(W,50)),await Promise.all([Me(),re(),me(),be()]),F(),window.scrollTo(0,V),Z||q.success("Calendario actualizado correctamente"),!0}catch(V){return console.error("Error al actualizar datos del calendario:",V),Z||q.error("Error al actualizar el calendario"),!1}finally{setTimeout(()=>{Z||y(!1),_e(!1)},500)}},je=async Z=>{var ee;if(console.log(`Fecha seleccionada: ${Ye(Z,"dd/MM/yyyy")}`),!H){q.error("Debes iniciar sesin para gestionar la disponibilidad");return}if(m)return;y(!0);const V=e.find(R=>R.user_id===H.id);if(!(C||(V==null?void 0:V.role_in_group)==="principal"||H.id===(x??H.id))){q.error("No tienes permisos para gestionar esta disponibilidad"),y(!1);return}const K=x??H.id;if(N.some(R=>R.user_id===K&&Ve(new Date(R.date),Z))){q.error("No puedes cambiar tu disponibilidad en fechas con eventos programados"),y(!1);return}try{const R=e.find(G=>G.user_id===K);if(!R){q.error("Miembro no encontrado"),y(!1);return}const ae=(ee=o.find(G=>G.userId===R.user_id))==null?void 0:ee.dates.some(G=>Ve(G,Z)),ce=Ye(Z,"yyyy-MM-dd");if(ae)try{const G=await oe.from("member_availability").delete().eq("user_id",R.user_id).eq("date",ce);if(G.error){console.error("Error al eliminar disponibilidad:",G.error),q.error("Hubo un problema al guardar"),y(!1);return}c(Z),q.success(`Fecha ${Ye(Z,"dd/MM/yyyy")} eliminada de tu disponibilidad`),l(de=>de.map(ve=>ve.userId===R.user_id?{...ve,dates:ve.dates.filter(Pe=>!Ve(Pe,Z))}:ve)),F()}catch(G){console.error("Error inesperado al eliminar disponibilidad:",G),q.error("Ha ocurrido un error al procesar tu solicitud")}else try{const G=await oe.from("member_availability").insert([{user_id:R.user_id,date:ce}]);if(G.error){console.error("Error al insertar disponibilidad:",G.error),q.error("Hubo un problema al guardar"),y(!1);return}c(Z),q.success(`Fecha ${Ye(Z,"dd/MM/yyyy")} aadida a tu disponibilidad`),l(de=>de.map(ve=>ve.userId===R.user_id?{...ve,dates:[...ve.dates,Z]}:ve)),F()}catch(G){console.error("Error inesperado al aadir disponibilidad:",G),q.error("Ha ocurrido un error al procesar tu solicitud")}}catch(R){console.error("Error en handleDayClick:",R),q.error("Ha ocurrido un error al procesar tu solicitud")}finally{y(!1)}};function Oe(Z){return e.filter(V=>{var fe;const W=((fe=o.find(ee=>ee.userId===V.user_id))==null?void 0:fe.dates.some(ee=>Ve(ee,Z)))??!1,K=M.some(ee=>ee.user_id===V.user_id&&Ve(new Date(ee.date),Z));return W||K})}const Q=Z=>{const{date:V}=Z,W=Oe(V),K=W.some(ke=>ke.user_id===(x||(H==null?void 0:H.id))),fe=K&&L.some(ke=>ke.user_id===(x||(H==null?void 0:H.id))&&Ve(new Date(ke.date),V)),ee=W.filter(ke=>ke.user_id!==(x||(H==null?void 0:H.id))),R=ee.length,ae=ee.filter(ke=>L.some(Ke=>Ke.user_id===ke.user_id&&Ve(new Date(Ke.date),V))).length,ce=b.some(ke=>Ve(ke,V)),G=le.some(ke=>Ve(ke,V)),de=T(V),ve=de.length>0,Pe=fe||ae>0;return d.jsxs("div",{className:`day-content ${ce?"group-available":""} ${G?"group-not-available":""} ${ve?"has-event":""} ${Pe?"has-external-events":""} ${u&&Ve(V,u)?"selected-day":""}`,children:[d.jsx("span",{className:`${u&&Ve(V,u)?"text-indigo-900 font-bold":""}`,children:V.getDate()}),(K||R>0||ve)&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"availability-dots",children:[K&&d.jsx("div",{className:`availability-dot you ${fe?"border border-orange-500 bg-orange-200":""}`}),ee.slice(0,3).map((ke,Ke)=>{const nt=L.some(Xe=>Xe.user_id===ke.user_id&&Ve(new Date(Xe.date),V));return d.jsx("div",{className:`availability-dot others ${nt?"border border-orange-500 bg-orange-200":""}`},Ke)})]}),d.jsxs("div",{className:"day-tooltip",children:[d.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-2",children:[Ye(V,"MMMM d, yyyy"),d.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[ce&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",children:"Grupo disponible"}),ve&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",children:de.length>1?`${de[0].name} y ${de.length-1} ms`:de[0].name}),Pe&&d.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:[ae+(fe?1:0)," miembro(s) con eventos externos"]})]})]}),W.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Miembros:"}),W.map(ke=>{var Xe;const Ke=((Xe=o.find(yt=>yt.userId===ke.user_id))==null?void 0:Xe.dates.some(yt=>Ve(yt,V)))??!1,nt=L.some(yt=>yt.user_id===ke.user_id&&Ve(new Date(yt.date),V));return d.jsx("div",{className:`tooltip-member ${ke.user_id===(x||(H==null?void 0:H.id))?"you":"other"}`,children:d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsx("span",{className:"font-medium",children:ke.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[ke.role_in_group==="sustituto"&&d.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded-full",children:"Sustituto"}),Ke&&!nt&&d.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1.5 py-0.5 rounded-full",children:"Disponible"}),nt&&d.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-1.5 py-0.5 rounded-full",children:"Con Evento"}),ke.user_id===(x||(H==null?void 0:H.id))&&d.jsx("span",{className:"text-xs bg-indigo-200 px-1.5 py-0.5 rounded-full",children:"T"})]})]}),ke.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ke.instruments.map((yt,Ft)=>d.jsxs("span",{className:"inline-flex items-center text-xs text-gray-600",children:[d.jsx(us,{className:"w-3 h-3 mr-1"}),yt.name,Ft<ke.instruments.length-1&&", "]},`${ke.id}-${yt.id}-${Ft}`))})]})},ke.id)})]})]})]})]})},pe=()=>{const V=b.filter(R=>T(R).length===0).sort((R,ae)=>R.getTime()-ae.getTime()).reduce((R,ae)=>{const ce=Ye(ae,"MMMM yyyy",{locale:Bo});R[ce]||(R[ce]={withPrincipals:[],withSubstitutes:[]});const G=Oe(ae);return e.filter(ve=>ve.role_in_group==="principal").filter(ve=>!G.some(Pe=>Pe.user_id===ve.user_id)).length===0?R[ce].withPrincipals.push(ae):R[ce].withSubstitutes.push(ae),R},{});let W=`FECHAS DISPONIBLES DEL GRUPO ${n.toUpperCase()}

`;Object.keys(V).length===0?W+=`No hay fechas disponibles sin eventos programados.
`:Object.entries(V).forEach(([R,ae])=>{W+=`${R.toUpperCase()}
`,ae.withPrincipals.length>0&&(W+=`Fechas con miembros principales:
`,W+=ae.withPrincipals.map(ce=>`${Ye(ce,"d(EEE)",{locale:Bo})}`).join(", "),W+=`

`),ae.withSubstitutes.length>0&&(W+=`Fechas con sustitutos:
`,W+=ae.withSubstitutes.map(ce=>`${Ye(ce,"d(EEE)",{locale:Bo})}`).join(", "),W+=`

`),W+=`
`});const K=new Blob([W],{type:"text/plain;charset=utf-8"}),fe=window.URL.createObjectURL(K),ee=document.createElement("a");ee.href=fe,ee.download=`disponibilidad_${n.toLowerCase().replace(/\s+/g,"_")}_${Ye(new Date,"dd-MM-yyyy")}.txt`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),window.URL.revokeObjectURL(fe)};return h?d.jsx("div",{className:"flex justify-center items-center py-8",children:d.jsx(ua,{className:"w-6 h-6 animate-spin text-indigo-600"})}):d.jsxs("div",{className:"space-y-6",children:[(C||ne())&&e.length>0&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"member-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Gestionando disponibilidad para:"}),d.jsxs("div",{className:"relative w-full max-w-xs",children:[d.jsx("select",{id:"member-select",value:x||(H==null?void 0:H.id)||"",onChange:Z=>S(Z.target.value===(H==null?void 0:H.id)?null:Z.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm",children:e.map(Z=>d.jsxs("option",{value:Z.user_id||"",children:[Z.name," ",Z.user_id===(H==null?void 0:H.id)?"(T)":""]},Z.id))}),d.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:d.jsx(uA,{className:"h-4 w-4"})})]})]}),d.jsx("style",{dangerouslySetInnerHTML:{__html:r}}),d.jsxs("div",{ref:ge,className:"flex justify-center relative bg-white rounded-lg shadow-sm p-4 calendar-container",children:[d.jsxs("div",{className:`fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-50 ${m||se?"opacity-100":"opacity-0 pointer-events-none"}`,style:{transition:"opacity 0.2s ease-in-out"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/20"}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg z-10 flex items-center space-x-2",children:[d.jsx(ua,{className:"w-6 h-6 animate-spin text-indigo-600"}),d.jsx("span",{children:"Actualizando calendario..."})]})]}),d.jsx(qF,{mode:"single",selected:u,onSelect:c,onDayClick:je,modifiersClassNames:{selected:"rdp-day_selected"},classNames:{day_selected:"font-bold hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500"},fromDate:new Date,components:{DayContent:Q},weekStartsOn:1,locale:Bo})]}),d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium",children:"Calendario de Disponibilidad"}),d.jsxs("button",{onClick:Z=>{Z.preventDefault(),$e()},disabled:m,className:`px-3 py-1 text-sm ${m?"bg-gray-100 cursor-not-allowed":"bg-blue-100 hover:bg-blue-200"} rounded-md flex items-center`,children:[d.jsx("span",{className:"mr-1",children:m?"...":""}),m?"Actualizando...":"Actualizar"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Legend:"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-600 shadow-sm"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Tu disponibilidad"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Other members"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Grupo disponible"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Event scheduled"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 bg-orange-200"}),d.jsx("span",{className:"text-sm text-gray-600",children:"Con evento externo"})]}),d.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-indigo-400 text-white flex items-center justify-center text-xs font-bold",children:""}),d.jsx("span",{className:"text-sm text-gray-600",children:"Fecha seleccionada"})]})]})]}),d.jsx("div",{className:"flex justify-between items-center",children:d.jsxs("button",{onClick:pe,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[d.jsx(fA,{className:"w-4 h-4 mr-2"}),"Descargar Fechas Disponibles del Grupo"]})})]})}async function wE(e,t){try{const{data:n,error:r}=await oe.rpc("get_group_calendar",{p_group_id:e,p_member_id:t});if(r)throw r;if(!n)throw new Error("No se pudo generar el calendario");const i=n.endsWith(`\r
`)?n:n+`\r
`,o="calendar.ics",l=new Blob([i],{type:"text/calendar;charset=utf-8"}),u=new File([l],o,{type:"text/calendar;charset=utf-8"}),{error:c}=await oe.storage.from("calendars").upload(`${e}/${t}/${o}`,u,{cacheControl:"0",upsert:!0,contentType:"text/calendar;charset=utf-8"});if(c)throw c;const{data:{publicUrl:h}}=oe.storage.from("calendars").getPublicUrl(`${e}/${t}/${o}`),p=`${h}?v=${Date.now()}`,{error:m}=await oe.from("group_members").update({calendar_url:p,calendar_updated_at:new Date().toISOString()}).eq("id",t);if(m)throw m}catch(n){throw console.error("Error updating calendar:",n),n}}function VF({members:e,selectedMembers:t,onMemberSelectionChange:n,validationError:r,groupId:i}){const o=t.filter(c=>{const h=e.find(p=>p.id===c.memberId);return(h==null?void 0:h.role_in_group)==="principal"}),l=t.filter(c=>{const h=e.find(p=>p.id===c.memberId);return(h==null?void 0:h.role_in_group)==="sustituto"}),u=(c,h)=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:h}),c.map(p=>{const m=e.find(y=>y.id===p.memberId);return m?d.jsx("div",{className:`flex items-center justify-between p-2 rounded-lg transition-colors ${p.isAvailable?"bg-gray-50 hover:bg-gray-100":"bg-red-50"}`,children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"checkbox",checked:p.selected,onChange:y=>n(p.memberId,y.target.checked),className:`rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 ${!p.isAvailable&&!p.selected?"opacity-50":""}`,disabled:!p.isAvailable&&!p.selected}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"font-medium text-gray-900",children:m.name}),!p.isAvailable&&d.jsxs("span",{className:"inline-flex items-center text-xs text-red-700 bg-red-100 px-2 py-0.5 rounded-full",children:[d.jsx(Mw,{className:"w-3 h-3 mr-1"}),"No disponible"]})]}),d.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[d.jsx(us,{className:"w-3 h-3 mr-1"}),m.instruments.map(y=>y.name).join(", ")]})]})]})},p.memberId):null})]});return d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Miembros"}),d.jsxs("div",{className:"space-y-6",children:[u(o,"Miembros Principales"),l.length>0&&u(l,"Sustitutos")]}),r&&d.jsxs("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg flex items-start",children:[d.jsx(Mw,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),d.jsx("p",{children:"Por favor, asegrate de que todos los instrumentos estn cubiertos por los miembros seleccionados. Si un miembro principal no est disponible, debes seleccionar un sustituto que cubra sus instrumentos."})]})]})}var bd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */bd.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",m=1,y=2,x=4,S=1,C=2,j=1,b=2,_=4,N=8,P=16,M=32,U=64,L=128,z=256,le=512,te=30,H="...",Ee=800,re=16,me=1,be=2,Me=3,$=1/0,T=9007199254740991,F=17976931348623157e292,ne=NaN,se=4294967295,_e=se-1,ge=se>>>1,$e=[["ary",L],["bind",j],["bindKey",b],["curry",N],["curryRight",P],["flip",le],["partial",M],["partialRight",U],["rearg",z]],je="[object Arguments]",Oe="[object Array]",Q="[object AsyncFunction]",pe="[object Boolean]",Z="[object Date]",V="[object DOMException]",W="[object Error]",K="[object Function]",fe="[object GeneratorFunction]",ee="[object Map]",R="[object Number]",ae="[object Null]",ce="[object Object]",G="[object Promise]",de="[object Proxy]",ve="[object RegExp]",Pe="[object Set]",ke="[object String]",Ke="[object Symbol]",nt="[object Undefined]",Xe="[object WeakMap]",yt="[object WeakSet]",Ft="[object ArrayBuffer]",sn="[object DataView]",Yr="[object Float32Array]",lo="[object Float64Array]",Yn="[object Int8Array]",uo="[object Int16Array]",_a="[object Int32Array]",ba="[object Uint8Array]",ys="[object Uint8ClampedArray]",co="[object Uint16Array]",Sa="[object Uint32Array]",au=/\b__p \+= '';/g,mf=/\b(__p \+=) '' \+/g,gf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lu=/&(?:amp|lt|gt|quot|#39);/g,Ot=/[&<>"']/g,on=RegExp(lu.source),an=RegExp(Ot.source),Tr=/<%-([\s\S]+?)%>/g,vn=/<%([\s\S]+?)%>/g,Xt=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ei=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/[\\^$.*+?()[\]{}|]/g,Xn=RegExp(Qn.source),On=/^\s+/,xs=/\s/,ws=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Or=/\{\n\/\* \[wrapped with (.+)\] \*/,_s=/,? & /,Ea=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qE=/[()=,{}\[\]\/\s]/,GE=/\\(\\)?/g,VE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_v=/\w*$/,YE=/^[-+]0x[0-9a-f]+$/i,KE=/^0b[01]+$/i,QE=/^\[object .+?Constructor\]$/,XE=/^0o[0-7]+$/i,JE=/^(?:0|[1-9]\d*)$/,ZE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,uu=/($^)/,e2=/['\n\r\u2028\u2029\\]/g,cu="\\ud800-\\udfff",t2="\\u0300-\\u036f",n2="\\ufe20-\\ufe2f",r2="\\u20d0-\\u20ff",bv=t2+n2+r2,Sv="\\u2700-\\u27bf",Ev="a-z\\xdf-\\xf6\\xf8-\\xff",i2="\\xac\\xb1\\xd7\\xf7",s2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",o2="\\u2000-\\u206f",a2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nv="A-Z\\xc0-\\xd6\\xd8-\\xde",kv="\\ufe0e\\ufe0f",Cv=i2+s2+o2+a2,vf="[']",l2="["+cu+"]",jv="["+Cv+"]",du="["+bv+"]",Pv="\\d+",u2="["+Sv+"]",Dv="["+Ev+"]",Tv="[^"+cu+Cv+Pv+Sv+Ev+Nv+"]",yf="\\ud83c[\\udffb-\\udfff]",c2="(?:"+du+"|"+yf+")",Ov="[^"+cu+"]",xf="(?:\\ud83c[\\udde6-\\uddff]){2}",wf="[\\ud800-\\udbff][\\udc00-\\udfff]",fo="["+Nv+"]",Mv="\\u200d",Rv="(?:"+Dv+"|"+Tv+")",d2="(?:"+fo+"|"+Tv+")",$v="(?:"+vf+"(?:d|ll|m|re|s|t|ve))?",Av="(?:"+vf+"(?:D|LL|M|RE|S|T|VE))?",Lv=c2+"?",Iv="["+kv+"]?",f2="(?:"+Mv+"(?:"+[Ov,xf,wf].join("|")+")"+Iv+Lv+")*",h2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",p2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fv=Iv+Lv+f2,m2="(?:"+[u2,xf,wf].join("|")+")"+Fv,g2="(?:"+[Ov+du+"?",du,xf,wf,l2].join("|")+")",v2=RegExp(vf,"g"),y2=RegExp(du,"g"),_f=RegExp(yf+"(?="+yf+")|"+g2+Fv,"g"),x2=RegExp([fo+"?"+Dv+"+"+$v+"(?="+[jv,fo,"$"].join("|")+")",d2+"+"+Av+"(?="+[jv,fo+Rv,"$"].join("|")+")",fo+"?"+Rv+"+"+$v,fo+"+"+Av,p2,h2,Pv,m2].join("|"),"g"),w2=RegExp("["+Mv+cu+bv+kv+"]"),_2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,b2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],S2=-1,ft={};ft[Yr]=ft[lo]=ft[Yn]=ft[uo]=ft[_a]=ft[ba]=ft[ys]=ft[co]=ft[Sa]=!0,ft[je]=ft[Oe]=ft[Ft]=ft[pe]=ft[sn]=ft[Z]=ft[W]=ft[K]=ft[ee]=ft[R]=ft[ce]=ft[ve]=ft[Pe]=ft[ke]=ft[Xe]=!1;var at={};at[je]=at[Oe]=at[Ft]=at[sn]=at[pe]=at[Z]=at[Yr]=at[lo]=at[Yn]=at[uo]=at[_a]=at[ee]=at[R]=at[ce]=at[ve]=at[Pe]=at[ke]=at[Ke]=at[ba]=at[ys]=at[co]=at[Sa]=!0,at[W]=at[K]=at[Xe]=!1;var E2={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},N2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},C2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},j2=parseFloat,P2=parseInt,Uv=typeof Yt=="object"&&Yt&&Yt.Object===Object&&Yt,D2=typeof self=="object"&&self&&self.Object===Object&&self,qt=Uv||D2||Function("return this")(),bf=t&&!t.nodeType&&t,bs=bf&&!0&&e&&!e.nodeType&&e,zv=bs&&bs.exports===bf,Sf=zv&&Uv.process,Jn=function(){try{var A=bs&&bs.require&&bs.require("util").types;return A||Sf&&Sf.binding&&Sf.binding("util")}catch{}}(),Wv=Jn&&Jn.isArrayBuffer,Bv=Jn&&Jn.isDate,Hv=Jn&&Jn.isMap,qv=Jn&&Jn.isRegExp,Gv=Jn&&Jn.isSet,Vv=Jn&&Jn.isTypedArray;function Mn(A,Y,B){switch(B.length){case 0:return A.call(Y);case 1:return A.call(Y,B[0]);case 2:return A.call(Y,B[0],B[1]);case 3:return A.call(Y,B[0],B[1],B[2])}return A.apply(Y,B)}function T2(A,Y,B,ye){for(var Ae=-1,Ze=A==null?0:A.length;++Ae<Ze;){var Rt=A[Ae];Y(ye,Rt,B(Rt),A)}return ye}function Zn(A,Y){for(var B=-1,ye=A==null?0:A.length;++B<ye&&Y(A[B],B,A)!==!1;);return A}function O2(A,Y){for(var B=A==null?0:A.length;B--&&Y(A[B],B,A)!==!1;);return A}function Yv(A,Y){for(var B=-1,ye=A==null?0:A.length;++B<ye;)if(!Y(A[B],B,A))return!1;return!0}function Ni(A,Y){for(var B=-1,ye=A==null?0:A.length,Ae=0,Ze=[];++B<ye;){var Rt=A[B];Y(Rt,B,A)&&(Ze[Ae++]=Rt)}return Ze}function fu(A,Y){var B=A==null?0:A.length;return!!B&&ho(A,Y,0)>-1}function Ef(A,Y,B){for(var ye=-1,Ae=A==null?0:A.length;++ye<Ae;)if(B(Y,A[ye]))return!0;return!1}function gt(A,Y){for(var B=-1,ye=A==null?0:A.length,Ae=Array(ye);++B<ye;)Ae[B]=Y(A[B],B,A);return Ae}function ki(A,Y){for(var B=-1,ye=Y.length,Ae=A.length;++B<ye;)A[Ae+B]=Y[B];return A}function Nf(A,Y,B,ye){var Ae=-1,Ze=A==null?0:A.length;for(ye&&Ze&&(B=A[++Ae]);++Ae<Ze;)B=Y(B,A[Ae],Ae,A);return B}function M2(A,Y,B,ye){var Ae=A==null?0:A.length;for(ye&&Ae&&(B=A[--Ae]);Ae--;)B=Y(B,A[Ae],Ae,A);return B}function kf(A,Y){for(var B=-1,ye=A==null?0:A.length;++B<ye;)if(Y(A[B],B,A))return!0;return!1}var R2=Cf("length");function $2(A){return A.split("")}function A2(A){return A.match(Ea)||[]}function Kv(A,Y,B){var ye;return B(A,function(Ae,Ze,Rt){if(Y(Ae,Ze,Rt))return ye=Ze,!1}),ye}function hu(A,Y,B,ye){for(var Ae=A.length,Ze=B+(ye?1:-1);ye?Ze--:++Ze<Ae;)if(Y(A[Ze],Ze,A))return Ze;return-1}function ho(A,Y,B){return Y===Y?Y2(A,Y,B):hu(A,Qv,B)}function L2(A,Y,B,ye){for(var Ae=B-1,Ze=A.length;++Ae<Ze;)if(ye(A[Ae],Y))return Ae;return-1}function Qv(A){return A!==A}function Xv(A,Y){var B=A==null?0:A.length;return B?Pf(A,Y)/B:ne}function Cf(A){return function(Y){return Y==null?n:Y[A]}}function jf(A){return function(Y){return A==null?n:A[Y]}}function Jv(A,Y,B,ye,Ae){return Ae(A,function(Ze,Rt,ot){B=ye?(ye=!1,Ze):Y(B,Ze,Rt,ot)}),B}function I2(A,Y){var B=A.length;for(A.sort(Y);B--;)A[B]=A[B].value;return A}function Pf(A,Y){for(var B,ye=-1,Ae=A.length;++ye<Ae;){var Ze=Y(A[ye]);Ze!==n&&(B=B===n?Ze:B+Ze)}return B}function Df(A,Y){for(var B=-1,ye=Array(A);++B<A;)ye[B]=Y(B);return ye}function F2(A,Y){return gt(Y,function(B){return[B,A[B]]})}function Zv(A){return A&&A.slice(0,r0(A)+1).replace(On,"")}function Rn(A){return function(Y){return A(Y)}}function Tf(A,Y){return gt(Y,function(B){return A[B]})}function Na(A,Y){return A.has(Y)}function e0(A,Y){for(var B=-1,ye=A.length;++B<ye&&ho(Y,A[B],0)>-1;);return B}function t0(A,Y){for(var B=A.length;B--&&ho(Y,A[B],0)>-1;);return B}function U2(A,Y){for(var B=A.length,ye=0;B--;)A[B]===Y&&++ye;return ye}var z2=jf(E2),W2=jf(N2);function B2(A){return"\\"+C2[A]}function H2(A,Y){return A==null?n:A[Y]}function po(A){return w2.test(A)}function q2(A){return _2.test(A)}function G2(A){for(var Y,B=[];!(Y=A.next()).done;)B.push(Y.value);return B}function Of(A){var Y=-1,B=Array(A.size);return A.forEach(function(ye,Ae){B[++Y]=[Ae,ye]}),B}function n0(A,Y){return function(B){return A(Y(B))}}function Ci(A,Y){for(var B=-1,ye=A.length,Ae=0,Ze=[];++B<ye;){var Rt=A[B];(Rt===Y||Rt===p)&&(A[B]=p,Ze[Ae++]=B)}return Ze}function pu(A){var Y=-1,B=Array(A.size);return A.forEach(function(ye){B[++Y]=ye}),B}function V2(A){var Y=-1,B=Array(A.size);return A.forEach(function(ye){B[++Y]=[ye,ye]}),B}function Y2(A,Y,B){for(var ye=B-1,Ae=A.length;++ye<Ae;)if(A[ye]===Y)return ye;return-1}function K2(A,Y,B){for(var ye=B+1;ye--;)if(A[ye]===Y)return ye;return ye}function mo(A){return po(A)?X2(A):R2(A)}function pr(A){return po(A)?J2(A):$2(A)}function r0(A){for(var Y=A.length;Y--&&xs.test(A.charAt(Y)););return Y}var Q2=jf(k2);function X2(A){for(var Y=_f.lastIndex=0;_f.test(A);)++Y;return Y}function J2(A){return A.match(_f)||[]}function Z2(A){return A.match(x2)||[]}var eN=function A(Y){Y=Y==null?qt:go.defaults(qt.Object(),Y,go.pick(qt,b2));var B=Y.Array,ye=Y.Date,Ae=Y.Error,Ze=Y.Function,Rt=Y.Math,ot=Y.Object,Mf=Y.RegExp,tN=Y.String,er=Y.TypeError,mu=B.prototype,nN=Ze.prototype,vo=ot.prototype,gu=Y["__core-js_shared__"],vu=nN.toString,rt=vo.hasOwnProperty,rN=0,i0=function(){var s=/[^.]+$/.exec(gu&&gu.keys&&gu.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),yu=vo.toString,iN=vu.call(ot),sN=qt._,oN=Mf("^"+vu.call(rt).replace(Qn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xu=zv?Y.Buffer:n,ji=Y.Symbol,wu=Y.Uint8Array,s0=xu?xu.allocUnsafe:n,_u=n0(ot.getPrototypeOf,ot),o0=ot.create,a0=vo.propertyIsEnumerable,bu=mu.splice,l0=ji?ji.isConcatSpreadable:n,ka=ji?ji.iterator:n,Ss=ji?ji.toStringTag:n,Su=function(){try{var s=js(ot,"defineProperty");return s({},"",{}),s}catch{}}(),aN=Y.clearTimeout!==qt.clearTimeout&&Y.clearTimeout,lN=ye&&ye.now!==qt.Date.now&&ye.now,uN=Y.setTimeout!==qt.setTimeout&&Y.setTimeout,Eu=Rt.ceil,Nu=Rt.floor,Rf=ot.getOwnPropertySymbols,cN=xu?xu.isBuffer:n,u0=Y.isFinite,dN=mu.join,fN=n0(ot.keys,ot),$t=Rt.max,Jt=Rt.min,hN=ye.now,pN=Y.parseInt,c0=Rt.random,mN=mu.reverse,$f=js(Y,"DataView"),Ca=js(Y,"Map"),Af=js(Y,"Promise"),yo=js(Y,"Set"),ja=js(Y,"WeakMap"),Pa=js(ot,"create"),ku=ja&&new ja,xo={},gN=Ps($f),vN=Ps(Ca),yN=Ps(Af),xN=Ps(yo),wN=Ps(ja),Cu=ji?ji.prototype:n,Da=Cu?Cu.valueOf:n,d0=Cu?Cu.toString:n;function E(s){if(Et(s)&&!Le(s)&&!(s instanceof He)){if(s instanceof tr)return s;if(rt.call(s,"__wrapped__"))return fy(s)}return new tr(s)}var wo=function(){function s(){}return function(a){if(!xt(a))return{};if(o0)return o0(a);s.prototype=a;var f=new s;return s.prototype=n,f}}();function ju(){}function tr(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}E.templateSettings={escape:Tr,evaluate:vn,interpolate:Xt,variable:"",imports:{_:E}},E.prototype=ju.prototype,E.prototype.constructor=E,tr.prototype=wo(ju.prototype),tr.prototype.constructor=tr;function He(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function _N(){var s=new He(this.__wrapped__);return s.__actions__=yn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=yn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=yn(this.__views__),s}function bN(){if(this.__filtered__){var s=new He(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function SN(){var s=this.__wrapped__.value(),a=this.__dir__,f=Le(s),g=a<0,w=f?s.length:0,k=$k(0,w,this.__views__),D=k.start,O=k.end,I=O-D,X=g?O:D-1,J=this.__iteratees__,ie=J.length,he=0,Se=Jt(I,this.__takeCount__);if(!f||!g&&w==I&&Se==I)return $0(s,this.__actions__);var De=[];e:for(;I--&&he<Se;){X+=a;for(var Fe=-1,Te=s[X];++Fe<ie;){var We=J[Fe],qe=We.iteratee,Ln=We.type,cn=qe(Te);if(Ln==be)Te=cn;else if(!cn){if(Ln==me)continue e;break e}}De[he++]=Te}return De}He.prototype=wo(ju.prototype),He.prototype.constructor=He;function Es(s){var a=-1,f=s==null?0:s.length;for(this.clear();++a<f;){var g=s[a];this.set(g[0],g[1])}}function EN(){this.__data__=Pa?Pa(null):{},this.size=0}function NN(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function kN(s){var a=this.__data__;if(Pa){var f=a[s];return f===c?n:f}return rt.call(a,s)?a[s]:n}function CN(s){var a=this.__data__;return Pa?a[s]!==n:rt.call(a,s)}function jN(s,a){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Pa&&a===n?c:a,this}Es.prototype.clear=EN,Es.prototype.delete=NN,Es.prototype.get=kN,Es.prototype.has=CN,Es.prototype.set=jN;function Kr(s){var a=-1,f=s==null?0:s.length;for(this.clear();++a<f;){var g=s[a];this.set(g[0],g[1])}}function PN(){this.__data__=[],this.size=0}function DN(s){var a=this.__data__,f=Pu(a,s);if(f<0)return!1;var g=a.length-1;return f==g?a.pop():bu.call(a,f,1),--this.size,!0}function TN(s){var a=this.__data__,f=Pu(a,s);return f<0?n:a[f][1]}function ON(s){return Pu(this.__data__,s)>-1}function MN(s,a){var f=this.__data__,g=Pu(f,s);return g<0?(++this.size,f.push([s,a])):f[g][1]=a,this}Kr.prototype.clear=PN,Kr.prototype.delete=DN,Kr.prototype.get=TN,Kr.prototype.has=ON,Kr.prototype.set=MN;function Qr(s){var a=-1,f=s==null?0:s.length;for(this.clear();++a<f;){var g=s[a];this.set(g[0],g[1])}}function RN(){this.size=0,this.__data__={hash:new Es,map:new(Ca||Kr),string:new Es}}function $N(s){var a=zu(this,s).delete(s);return this.size-=a?1:0,a}function AN(s){return zu(this,s).get(s)}function LN(s){return zu(this,s).has(s)}function IN(s,a){var f=zu(this,s),g=f.size;return f.set(s,a),this.size+=f.size==g?0:1,this}Qr.prototype.clear=RN,Qr.prototype.delete=$N,Qr.prototype.get=AN,Qr.prototype.has=LN,Qr.prototype.set=IN;function Ns(s){var a=-1,f=s==null?0:s.length;for(this.__data__=new Qr;++a<f;)this.add(s[a])}function FN(s){return this.__data__.set(s,c),this}function UN(s){return this.__data__.has(s)}Ns.prototype.add=Ns.prototype.push=FN,Ns.prototype.has=UN;function mr(s){var a=this.__data__=new Kr(s);this.size=a.size}function zN(){this.__data__=new Kr,this.size=0}function WN(s){var a=this.__data__,f=a.delete(s);return this.size=a.size,f}function BN(s){return this.__data__.get(s)}function HN(s){return this.__data__.has(s)}function qN(s,a){var f=this.__data__;if(f instanceof Kr){var g=f.__data__;if(!Ca||g.length<i-1)return g.push([s,a]),this.size=++f.size,this;f=this.__data__=new Qr(g)}return f.set(s,a),this.size=f.size,this}mr.prototype.clear=zN,mr.prototype.delete=WN,mr.prototype.get=BN,mr.prototype.has=HN,mr.prototype.set=qN;function f0(s,a){var f=Le(s),g=!f&&Ds(s),w=!f&&!g&&Mi(s),k=!f&&!g&&!w&&Eo(s),D=f||g||w||k,O=D?Df(s.length,tN):[],I=O.length;for(var X in s)(a||rt.call(s,X))&&!(D&&(X=="length"||w&&(X=="offset"||X=="parent")||k&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||ei(X,I)))&&O.push(X);return O}function h0(s){var a=s.length;return a?s[Vf(0,a-1)]:n}function GN(s,a){return Wu(yn(s),ks(a,0,s.length))}function VN(s){return Wu(yn(s))}function Lf(s,a,f){(f!==n&&!gr(s[a],f)||f===n&&!(a in s))&&Xr(s,a,f)}function Ta(s,a,f){var g=s[a];(!(rt.call(s,a)&&gr(g,f))||f===n&&!(a in s))&&Xr(s,a,f)}function Pu(s,a){for(var f=s.length;f--;)if(gr(s[f][0],a))return f;return-1}function YN(s,a,f,g){return Pi(s,function(w,k,D){a(g,w,f(w),D)}),g}function p0(s,a){return s&&Rr(a,Ut(a),s)}function KN(s,a){return s&&Rr(a,wn(a),s)}function Xr(s,a,f){a=="__proto__"&&Su?Su(s,a,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[a]=f}function If(s,a){for(var f=-1,g=a.length,w=B(g),k=s==null;++f<g;)w[f]=k?n:yh(s,a[f]);return w}function ks(s,a,f){return s===s&&(f!==n&&(s=s<=f?s:f),a!==n&&(s=s>=a?s:a)),s}function nr(s,a,f,g,w,k){var D,O=a&m,I=a&y,X=a&x;if(f&&(D=w?f(s,g,w,k):f(s)),D!==n)return D;if(!xt(s))return s;var J=Le(s);if(J){if(D=Lk(s),!O)return yn(s,D)}else{var ie=Zt(s),he=ie==K||ie==fe;if(Mi(s))return I0(s,O);if(ie==ce||ie==je||he&&!w){if(D=I||he?{}:ry(s),!O)return I?kk(s,KN(D,s)):Nk(s,p0(D,s))}else{if(!at[ie])return w?s:{};D=Ik(s,ie,O)}}k||(k=new mr);var Se=k.get(s);if(Se)return Se;k.set(s,D),Oy(s)?s.forEach(function(Te){D.add(nr(Te,a,f,Te,s,k))}):Dy(s)&&s.forEach(function(Te,We){D.set(We,nr(Te,a,f,We,s,k))});var De=X?I?ih:rh:I?wn:Ut,Fe=J?n:De(s);return Zn(Fe||s,function(Te,We){Fe&&(We=Te,Te=s[We]),Ta(D,We,nr(Te,a,f,We,s,k))}),D}function QN(s){var a=Ut(s);return function(f){return m0(f,s,a)}}function m0(s,a,f){var g=f.length;if(s==null)return!g;for(s=ot(s);g--;){var w=f[g],k=a[w],D=s[w];if(D===n&&!(w in s)||!k(D))return!1}return!0}function g0(s,a,f){if(typeof s!="function")throw new er(l);return Ia(function(){s.apply(n,f)},a)}function Oa(s,a,f,g){var w=-1,k=fu,D=!0,O=s.length,I=[],X=a.length;if(!O)return I;f&&(a=gt(a,Rn(f))),g?(k=Ef,D=!1):a.length>=i&&(k=Na,D=!1,a=new Ns(a));e:for(;++w<O;){var J=s[w],ie=f==null?J:f(J);if(J=g||J!==0?J:0,D&&ie===ie){for(var he=X;he--;)if(a[he]===ie)continue e;I.push(J)}else k(a,ie,g)||I.push(J)}return I}var Pi=B0(Mr),v0=B0(Uf,!0);function XN(s,a){var f=!0;return Pi(s,function(g,w,k){return f=!!a(g,w,k),f}),f}function Du(s,a,f){for(var g=-1,w=s.length;++g<w;){var k=s[g],D=a(k);if(D!=null&&(O===n?D===D&&!An(D):f(D,O)))var O=D,I=k}return I}function JN(s,a,f,g){var w=s.length;for(f=Ie(f),f<0&&(f=-f>w?0:w+f),g=g===n||g>w?w:Ie(g),g<0&&(g+=w),g=f>g?0:Ry(g);f<g;)s[f++]=a;return s}function y0(s,a){var f=[];return Pi(s,function(g,w,k){a(g,w,k)&&f.push(g)}),f}function Gt(s,a,f,g,w){var k=-1,D=s.length;for(f||(f=Uk),w||(w=[]);++k<D;){var O=s[k];a>0&&f(O)?a>1?Gt(O,a-1,f,g,w):ki(w,O):g||(w[w.length]=O)}return w}var Ff=H0(),x0=H0(!0);function Mr(s,a){return s&&Ff(s,a,Ut)}function Uf(s,a){return s&&x0(s,a,Ut)}function Tu(s,a){return Ni(a,function(f){return ti(s[f])})}function Cs(s,a){a=Ti(a,s);for(var f=0,g=a.length;s!=null&&f<g;)s=s[$r(a[f++])];return f&&f==g?s:n}function w0(s,a,f){var g=a(s);return Le(s)?g:ki(g,f(s))}function ln(s){return s==null?s===n?nt:ae:Ss&&Ss in ot(s)?Rk(s):Vk(s)}function zf(s,a){return s>a}function ZN(s,a){return s!=null&&rt.call(s,a)}function ek(s,a){return s!=null&&a in ot(s)}function tk(s,a,f){return s>=Jt(a,f)&&s<$t(a,f)}function Wf(s,a,f){for(var g=f?Ef:fu,w=s[0].length,k=s.length,D=k,O=B(k),I=1/0,X=[];D--;){var J=s[D];D&&a&&(J=gt(J,Rn(a))),I=Jt(J.length,I),O[D]=!f&&(a||w>=120&&J.length>=120)?new Ns(D&&J):n}J=s[0];var ie=-1,he=O[0];e:for(;++ie<w&&X.length<I;){var Se=J[ie],De=a?a(Se):Se;if(Se=f||Se!==0?Se:0,!(he?Na(he,De):g(X,De,f))){for(D=k;--D;){var Fe=O[D];if(!(Fe?Na(Fe,De):g(s[D],De,f)))continue e}he&&he.push(De),X.push(Se)}}return X}function nk(s,a,f,g){return Mr(s,function(w,k,D){a(g,f(w),k,D)}),g}function Ma(s,a,f){a=Ti(a,s),s=ay(s,a);var g=s==null?s:s[$r(ir(a))];return g==null?n:Mn(g,s,f)}function _0(s){return Et(s)&&ln(s)==je}function rk(s){return Et(s)&&ln(s)==Ft}function ik(s){return Et(s)&&ln(s)==Z}function Ra(s,a,f,g,w){return s===a?!0:s==null||a==null||!Et(s)&&!Et(a)?s!==s&&a!==a:sk(s,a,f,g,Ra,w)}function sk(s,a,f,g,w,k){var D=Le(s),O=Le(a),I=D?Oe:Zt(s),X=O?Oe:Zt(a);I=I==je?ce:I,X=X==je?ce:X;var J=I==ce,ie=X==ce,he=I==X;if(he&&Mi(s)){if(!Mi(a))return!1;D=!0,J=!1}if(he&&!J)return k||(k=new mr),D||Eo(s)?ey(s,a,f,g,w,k):Ok(s,a,I,f,g,w,k);if(!(f&S)){var Se=J&&rt.call(s,"__wrapped__"),De=ie&&rt.call(a,"__wrapped__");if(Se||De){var Fe=Se?s.value():s,Te=De?a.value():a;return k||(k=new mr),w(Fe,Te,f,g,k)}}return he?(k||(k=new mr),Mk(s,a,f,g,w,k)):!1}function ok(s){return Et(s)&&Zt(s)==ee}function Bf(s,a,f,g){var w=f.length,k=w,D=!g;if(s==null)return!k;for(s=ot(s);w--;){var O=f[w];if(D&&O[2]?O[1]!==s[O[0]]:!(O[0]in s))return!1}for(;++w<k;){O=f[w];var I=O[0],X=s[I],J=O[1];if(D&&O[2]){if(X===n&&!(I in s))return!1}else{var ie=new mr;if(g)var he=g(X,J,I,s,a,ie);if(!(he===n?Ra(J,X,S|C,g,ie):he))return!1}}return!0}function b0(s){if(!xt(s)||Wk(s))return!1;var a=ti(s)?oN:QE;return a.test(Ps(s))}function ak(s){return Et(s)&&ln(s)==ve}function lk(s){return Et(s)&&Zt(s)==Pe}function uk(s){return Et(s)&&Yu(s.length)&&!!ft[ln(s)]}function S0(s){return typeof s=="function"?s:s==null?_n:typeof s=="object"?Le(s)?k0(s[0],s[1]):N0(s):qy(s)}function Hf(s){if(!La(s))return fN(s);var a=[];for(var f in ot(s))rt.call(s,f)&&f!="constructor"&&a.push(f);return a}function ck(s){if(!xt(s))return Gk(s);var a=La(s),f=[];for(var g in s)g=="constructor"&&(a||!rt.call(s,g))||f.push(g);return f}function qf(s,a){return s<a}function E0(s,a){var f=-1,g=xn(s)?B(s.length):[];return Pi(s,function(w,k,D){g[++f]=a(w,k,D)}),g}function N0(s){var a=oh(s);return a.length==1&&a[0][2]?sy(a[0][0],a[0][1]):function(f){return f===s||Bf(f,s,a)}}function k0(s,a){return lh(s)&&iy(a)?sy($r(s),a):function(f){var g=yh(f,s);return g===n&&g===a?xh(f,s):Ra(a,g,S|C)}}function Ou(s,a,f,g,w){s!==a&&Ff(a,function(k,D){if(w||(w=new mr),xt(k))dk(s,a,D,f,Ou,g,w);else{var O=g?g(ch(s,D),k,D+"",s,a,w):n;O===n&&(O=k),Lf(s,D,O)}},wn)}function dk(s,a,f,g,w,k,D){var O=ch(s,f),I=ch(a,f),X=D.get(I);if(X){Lf(s,f,X);return}var J=k?k(O,I,f+"",s,a,D):n,ie=J===n;if(ie){var he=Le(I),Se=!he&&Mi(I),De=!he&&!Se&&Eo(I);J=I,he||Se||De?Le(O)?J=O:kt(O)?J=yn(O):Se?(ie=!1,J=I0(I,!0)):De?(ie=!1,J=F0(I,!0)):J=[]:Fa(I)||Ds(I)?(J=O,Ds(O)?J=$y(O):(!xt(O)||ti(O))&&(J=ry(I))):ie=!1}ie&&(D.set(I,J),w(J,I,g,k,D),D.delete(I)),Lf(s,f,J)}function C0(s,a){var f=s.length;if(f)return a+=a<0?f:0,ei(a,f)?s[a]:n}function j0(s,a,f){a.length?a=gt(a,function(k){return Le(k)?function(D){return Cs(D,k.length===1?k[0]:k)}:k}):a=[_n];var g=-1;a=gt(a,Rn(Ce()));var w=E0(s,function(k,D,O){var I=gt(a,function(X){return X(k)});return{criteria:I,index:++g,value:k}});return I2(w,function(k,D){return Ek(k,D,f)})}function fk(s,a){return P0(s,a,function(f,g){return xh(s,g)})}function P0(s,a,f){for(var g=-1,w=a.length,k={};++g<w;){var D=a[g],O=Cs(s,D);f(O,D)&&$a(k,Ti(D,s),O)}return k}function hk(s){return function(a){return Cs(a,s)}}function Gf(s,a,f,g){var w=g?L2:ho,k=-1,D=a.length,O=s;for(s===a&&(a=yn(a)),f&&(O=gt(s,Rn(f)));++k<D;)for(var I=0,X=a[k],J=f?f(X):X;(I=w(O,J,I,g))>-1;)O!==s&&bu.call(O,I,1),bu.call(s,I,1);return s}function D0(s,a){for(var f=s?a.length:0,g=f-1;f--;){var w=a[f];if(f==g||w!==k){var k=w;ei(w)?bu.call(s,w,1):Qf(s,w)}}return s}function Vf(s,a){return s+Nu(c0()*(a-s+1))}function pk(s,a,f,g){for(var w=-1,k=$t(Eu((a-s)/(f||1)),0),D=B(k);k--;)D[g?k:++w]=s,s+=f;return D}function Yf(s,a){var f="";if(!s||a<1||a>T)return f;do a%2&&(f+=s),a=Nu(a/2),a&&(s+=s);while(a);return f}function Ue(s,a){return dh(oy(s,a,_n),s+"")}function mk(s){return h0(No(s))}function gk(s,a){var f=No(s);return Wu(f,ks(a,0,f.length))}function $a(s,a,f,g){if(!xt(s))return s;a=Ti(a,s);for(var w=-1,k=a.length,D=k-1,O=s;O!=null&&++w<k;){var I=$r(a[w]),X=f;if(I==="__proto__"||I==="constructor"||I==="prototype")return s;if(w!=D){var J=O[I];X=g?g(J,I,O):n,X===n&&(X=xt(J)?J:ei(a[w+1])?[]:{})}Ta(O,I,X),O=O[I]}return s}var T0=ku?function(s,a){return ku.set(s,a),s}:_n,vk=Su?function(s,a){return Su(s,"toString",{configurable:!0,enumerable:!1,value:_h(a),writable:!0})}:_n;function yk(s){return Wu(No(s))}function rr(s,a,f){var g=-1,w=s.length;a<0&&(a=-a>w?0:w+a),f=f>w?w:f,f<0&&(f+=w),w=a>f?0:f-a>>>0,a>>>=0;for(var k=B(w);++g<w;)k[g]=s[g+a];return k}function xk(s,a){var f;return Pi(s,function(g,w,k){return f=a(g,w,k),!f}),!!f}function Mu(s,a,f){var g=0,w=s==null?g:s.length;if(typeof a=="number"&&a===a&&w<=ge){for(;g<w;){var k=g+w>>>1,D=s[k];D!==null&&!An(D)&&(f?D<=a:D<a)?g=k+1:w=k}return w}return Kf(s,a,_n,f)}function Kf(s,a,f,g){var w=0,k=s==null?0:s.length;if(k===0)return 0;a=f(a);for(var D=a!==a,O=a===null,I=An(a),X=a===n;w<k;){var J=Nu((w+k)/2),ie=f(s[J]),he=ie!==n,Se=ie===null,De=ie===ie,Fe=An(ie);if(D)var Te=g||De;else X?Te=De&&(g||he):O?Te=De&&he&&(g||!Se):I?Te=De&&he&&!Se&&(g||!Fe):Se||Fe?Te=!1:Te=g?ie<=a:ie<a;Te?w=J+1:k=J}return Jt(k,_e)}function O0(s,a){for(var f=-1,g=s.length,w=0,k=[];++f<g;){var D=s[f],O=a?a(D):D;if(!f||!gr(O,I)){var I=O;k[w++]=D===0?0:D}}return k}function M0(s){return typeof s=="number"?s:An(s)?ne:+s}function $n(s){if(typeof s=="string")return s;if(Le(s))return gt(s,$n)+"";if(An(s))return d0?d0.call(s):"";var a=s+"";return a=="0"&&1/s==-$?"-0":a}function Di(s,a,f){var g=-1,w=fu,k=s.length,D=!0,O=[],I=O;if(f)D=!1,w=Ef;else if(k>=i){var X=a?null:Dk(s);if(X)return pu(X);D=!1,w=Na,I=new Ns}else I=a?[]:O;e:for(;++g<k;){var J=s[g],ie=a?a(J):J;if(J=f||J!==0?J:0,D&&ie===ie){for(var he=I.length;he--;)if(I[he]===ie)continue e;a&&I.push(ie),O.push(J)}else w(I,ie,f)||(I!==O&&I.push(ie),O.push(J))}return O}function Qf(s,a){return a=Ti(a,s),s=ay(s,a),s==null||delete s[$r(ir(a))]}function R0(s,a,f,g){return $a(s,a,f(Cs(s,a)),g)}function Ru(s,a,f,g){for(var w=s.length,k=g?w:-1;(g?k--:++k<w)&&a(s[k],k,s););return f?rr(s,g?0:k,g?k+1:w):rr(s,g?k+1:0,g?w:k)}function $0(s,a){var f=s;return f instanceof He&&(f=f.value()),Nf(a,function(g,w){return w.func.apply(w.thisArg,ki([g],w.args))},f)}function Xf(s,a,f){var g=s.length;if(g<2)return g?Di(s[0]):[];for(var w=-1,k=B(g);++w<g;)for(var D=s[w],O=-1;++O<g;)O!=w&&(k[w]=Oa(k[w]||D,s[O],a,f));return Di(Gt(k,1),a,f)}function A0(s,a,f){for(var g=-1,w=s.length,k=a.length,D={};++g<w;){var O=g<k?a[g]:n;f(D,s[g],O)}return D}function Jf(s){return kt(s)?s:[]}function Zf(s){return typeof s=="function"?s:_n}function Ti(s,a){return Le(s)?s:lh(s,a)?[s]:dy(tt(s))}var wk=Ue;function Oi(s,a,f){var g=s.length;return f=f===n?g:f,!a&&f>=g?s:rr(s,a,f)}var L0=aN||function(s){return qt.clearTimeout(s)};function I0(s,a){if(a)return s.slice();var f=s.length,g=s0?s0(f):new s.constructor(f);return s.copy(g),g}function eh(s){var a=new s.constructor(s.byteLength);return new wu(a).set(new wu(s)),a}function _k(s,a){var f=a?eh(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function bk(s){var a=new s.constructor(s.source,_v.exec(s));return a.lastIndex=s.lastIndex,a}function Sk(s){return Da?ot(Da.call(s)):{}}function F0(s,a){var f=a?eh(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function U0(s,a){if(s!==a){var f=s!==n,g=s===null,w=s===s,k=An(s),D=a!==n,O=a===null,I=a===a,X=An(a);if(!O&&!X&&!k&&s>a||k&&D&&I&&!O&&!X||g&&D&&I||!f&&I||!w)return 1;if(!g&&!k&&!X&&s<a||X&&f&&w&&!g&&!k||O&&f&&w||!D&&w||!I)return-1}return 0}function Ek(s,a,f){for(var g=-1,w=s.criteria,k=a.criteria,D=w.length,O=f.length;++g<D;){var I=U0(w[g],k[g]);if(I){if(g>=O)return I;var X=f[g];return I*(X=="desc"?-1:1)}}return s.index-a.index}function z0(s,a,f,g){for(var w=-1,k=s.length,D=f.length,O=-1,I=a.length,X=$t(k-D,0),J=B(I+X),ie=!g;++O<I;)J[O]=a[O];for(;++w<D;)(ie||w<k)&&(J[f[w]]=s[w]);for(;X--;)J[O++]=s[w++];return J}function W0(s,a,f,g){for(var w=-1,k=s.length,D=-1,O=f.length,I=-1,X=a.length,J=$t(k-O,0),ie=B(J+X),he=!g;++w<J;)ie[w]=s[w];for(var Se=w;++I<X;)ie[Se+I]=a[I];for(;++D<O;)(he||w<k)&&(ie[Se+f[D]]=s[w++]);return ie}function yn(s,a){var f=-1,g=s.length;for(a||(a=B(g));++f<g;)a[f]=s[f];return a}function Rr(s,a,f,g){var w=!f;f||(f={});for(var k=-1,D=a.length;++k<D;){var O=a[k],I=g?g(f[O],s[O],O,f,s):n;I===n&&(I=s[O]),w?Xr(f,O,I):Ta(f,O,I)}return f}function Nk(s,a){return Rr(s,ah(s),a)}function kk(s,a){return Rr(s,ty(s),a)}function $u(s,a){return function(f,g){var w=Le(f)?T2:YN,k=a?a():{};return w(f,s,Ce(g,2),k)}}function _o(s){return Ue(function(a,f){var g=-1,w=f.length,k=w>1?f[w-1]:n,D=w>2?f[2]:n;for(k=s.length>3&&typeof k=="function"?(w--,k):n,D&&un(f[0],f[1],D)&&(k=w<3?n:k,w=1),a=ot(a);++g<w;){var O=f[g];O&&s(a,O,g,k)}return a})}function B0(s,a){return function(f,g){if(f==null)return f;if(!xn(f))return s(f,g);for(var w=f.length,k=a?w:-1,D=ot(f);(a?k--:++k<w)&&g(D[k],k,D)!==!1;);return f}}function H0(s){return function(a,f,g){for(var w=-1,k=ot(a),D=g(a),O=D.length;O--;){var I=D[s?O:++w];if(f(k[I],I,k)===!1)break}return a}}function Ck(s,a,f){var g=a&j,w=Aa(s);function k(){var D=this&&this!==qt&&this instanceof k?w:s;return D.apply(g?f:this,arguments)}return k}function q0(s){return function(a){a=tt(a);var f=po(a)?pr(a):n,g=f?f[0]:a.charAt(0),w=f?Oi(f,1).join(""):a.slice(1);return g[s]()+w}}function bo(s){return function(a){return Nf(By(Wy(a).replace(v2,"")),s,"")}}function Aa(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var f=wo(s.prototype),g=s.apply(f,a);return xt(g)?g:f}}function jk(s,a,f){var g=Aa(s);function w(){for(var k=arguments.length,D=B(k),O=k,I=So(w);O--;)D[O]=arguments[O];var X=k<3&&D[0]!==I&&D[k-1]!==I?[]:Ci(D,I);if(k-=X.length,k<f)return Q0(s,a,Au,w.placeholder,n,D,X,n,n,f-k);var J=this&&this!==qt&&this instanceof w?g:s;return Mn(J,this,D)}return w}function G0(s){return function(a,f,g){var w=ot(a);if(!xn(a)){var k=Ce(f,3);a=Ut(a),f=function(O){return k(w[O],O,w)}}var D=s(a,f,g);return D>-1?w[k?a[D]:D]:n}}function V0(s){return Zr(function(a){var f=a.length,g=f,w=tr.prototype.thru;for(s&&a.reverse();g--;){var k=a[g];if(typeof k!="function")throw new er(l);if(w&&!D&&Uu(k)=="wrapper")var D=new tr([],!0)}for(g=D?g:f;++g<f;){k=a[g];var O=Uu(k),I=O=="wrapper"?sh(k):n;I&&uh(I[0])&&I[1]==(L|N|M|z)&&!I[4].length&&I[9]==1?D=D[Uu(I[0])].apply(D,I[3]):D=k.length==1&&uh(k)?D[O]():D.thru(k)}return function(){var X=arguments,J=X[0];if(D&&X.length==1&&Le(J))return D.plant(J).value();for(var ie=0,he=f?a[ie].apply(this,X):J;++ie<f;)he=a[ie].call(this,he);return he}})}function Au(s,a,f,g,w,k,D,O,I,X){var J=a&L,ie=a&j,he=a&b,Se=a&(N|P),De=a&le,Fe=he?n:Aa(s);function Te(){for(var We=arguments.length,qe=B(We),Ln=We;Ln--;)qe[Ln]=arguments[Ln];if(Se)var cn=So(Te),In=U2(qe,cn);if(g&&(qe=z0(qe,g,w,Se)),k&&(qe=W0(qe,k,D,Se)),We-=In,Se&&We<X){var Ct=Ci(qe,cn);return Q0(s,a,Au,Te.placeholder,f,qe,Ct,O,I,X-We)}var vr=ie?f:this,ri=he?vr[s]:s;return We=qe.length,O?qe=Yk(qe,O):De&&We>1&&qe.reverse(),J&&I<We&&(qe.length=I),this&&this!==qt&&this instanceof Te&&(ri=Fe||Aa(ri)),ri.apply(vr,qe)}return Te}function Y0(s,a){return function(f,g){return nk(f,s,a(g),{})}}function Lu(s,a){return function(f,g){var w;if(f===n&&g===n)return a;if(f!==n&&(w=f),g!==n){if(w===n)return g;typeof f=="string"||typeof g=="string"?(f=$n(f),g=$n(g)):(f=M0(f),g=M0(g)),w=s(f,g)}return w}}function th(s){return Zr(function(a){return a=gt(a,Rn(Ce())),Ue(function(f){var g=this;return s(a,function(w){return Mn(w,g,f)})})})}function Iu(s,a){a=a===n?" ":$n(a);var f=a.length;if(f<2)return f?Yf(a,s):a;var g=Yf(a,Eu(s/mo(a)));return po(a)?Oi(pr(g),0,s).join(""):g.slice(0,s)}function Pk(s,a,f,g){var w=a&j,k=Aa(s);function D(){for(var O=-1,I=arguments.length,X=-1,J=g.length,ie=B(J+I),he=this&&this!==qt&&this instanceof D?k:s;++X<J;)ie[X]=g[X];for(;I--;)ie[X++]=arguments[++O];return Mn(he,w?f:this,ie)}return D}function K0(s){return function(a,f,g){return g&&typeof g!="number"&&un(a,f,g)&&(f=g=n),a=ni(a),f===n?(f=a,a=0):f=ni(f),g=g===n?a<f?1:-1:ni(g),pk(a,f,g,s)}}function Fu(s){return function(a,f){return typeof a=="string"&&typeof f=="string"||(a=sr(a),f=sr(f)),s(a,f)}}function Q0(s,a,f,g,w,k,D,O,I,X){var J=a&N,ie=J?D:n,he=J?n:D,Se=J?k:n,De=J?n:k;a|=J?M:U,a&=~(J?U:M),a&_||(a&=~(j|b));var Fe=[s,a,w,Se,ie,De,he,O,I,X],Te=f.apply(n,Fe);return uh(s)&&ly(Te,Fe),Te.placeholder=g,uy(Te,s,a)}function nh(s){var a=Rt[s];return function(f,g){if(f=sr(f),g=g==null?0:Jt(Ie(g),292),g&&u0(f)){var w=(tt(f)+"e").split("e"),k=a(w[0]+"e"+(+w[1]+g));return w=(tt(k)+"e").split("e"),+(w[0]+"e"+(+w[1]-g))}return a(f)}}var Dk=yo&&1/pu(new yo([,-0]))[1]==$?function(s){return new yo(s)}:Eh;function X0(s){return function(a){var f=Zt(a);return f==ee?Of(a):f==Pe?V2(a):F2(a,s(a))}}function Jr(s,a,f,g,w,k,D,O){var I=a&b;if(!I&&typeof s!="function")throw new er(l);var X=g?g.length:0;if(X||(a&=~(M|U),g=w=n),D=D===n?D:$t(Ie(D),0),O=O===n?O:Ie(O),X-=w?w.length:0,a&U){var J=g,ie=w;g=w=n}var he=I?n:sh(s),Se=[s,a,f,g,w,J,ie,k,D,O];if(he&&qk(Se,he),s=Se[0],a=Se[1],f=Se[2],g=Se[3],w=Se[4],O=Se[9]=Se[9]===n?I?0:s.length:$t(Se[9]-X,0),!O&&a&(N|P)&&(a&=~(N|P)),!a||a==j)var De=Ck(s,a,f);else a==N||a==P?De=jk(s,a,O):(a==M||a==(j|M))&&!w.length?De=Pk(s,a,f,g):De=Au.apply(n,Se);var Fe=he?T0:ly;return uy(Fe(De,Se),s,a)}function J0(s,a,f,g){return s===n||gr(s,vo[f])&&!rt.call(g,f)?a:s}function Z0(s,a,f,g,w,k){return xt(s)&&xt(a)&&(k.set(a,s),Ou(s,a,n,Z0,k),k.delete(a)),s}function Tk(s){return Fa(s)?n:s}function ey(s,a,f,g,w,k){var D=f&S,O=s.length,I=a.length;if(O!=I&&!(D&&I>O))return!1;var X=k.get(s),J=k.get(a);if(X&&J)return X==a&&J==s;var ie=-1,he=!0,Se=f&C?new Ns:n;for(k.set(s,a),k.set(a,s);++ie<O;){var De=s[ie],Fe=a[ie];if(g)var Te=D?g(Fe,De,ie,a,s,k):g(De,Fe,ie,s,a,k);if(Te!==n){if(Te)continue;he=!1;break}if(Se){if(!kf(a,function(We,qe){if(!Na(Se,qe)&&(De===We||w(De,We,f,g,k)))return Se.push(qe)})){he=!1;break}}else if(!(De===Fe||w(De,Fe,f,g,k))){he=!1;break}}return k.delete(s),k.delete(a),he}function Ok(s,a,f,g,w,k,D){switch(f){case sn:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Ft:return!(s.byteLength!=a.byteLength||!k(new wu(s),new wu(a)));case pe:case Z:case R:return gr(+s,+a);case W:return s.name==a.name&&s.message==a.message;case ve:case ke:return s==a+"";case ee:var O=Of;case Pe:var I=g&S;if(O||(O=pu),s.size!=a.size&&!I)return!1;var X=D.get(s);if(X)return X==a;g|=C,D.set(s,a);var J=ey(O(s),O(a),g,w,k,D);return D.delete(s),J;case Ke:if(Da)return Da.call(s)==Da.call(a)}return!1}function Mk(s,a,f,g,w,k){var D=f&S,O=rh(s),I=O.length,X=rh(a),J=X.length;if(I!=J&&!D)return!1;for(var ie=I;ie--;){var he=O[ie];if(!(D?he in a:rt.call(a,he)))return!1}var Se=k.get(s),De=k.get(a);if(Se&&De)return Se==a&&De==s;var Fe=!0;k.set(s,a),k.set(a,s);for(var Te=D;++ie<I;){he=O[ie];var We=s[he],qe=a[he];if(g)var Ln=D?g(qe,We,he,a,s,k):g(We,qe,he,s,a,k);if(!(Ln===n?We===qe||w(We,qe,f,g,k):Ln)){Fe=!1;break}Te||(Te=he=="constructor")}if(Fe&&!Te){var cn=s.constructor,In=a.constructor;cn!=In&&"constructor"in s&&"constructor"in a&&!(typeof cn=="function"&&cn instanceof cn&&typeof In=="function"&&In instanceof In)&&(Fe=!1)}return k.delete(s),k.delete(a),Fe}function Zr(s){return dh(oy(s,n,my),s+"")}function rh(s){return w0(s,Ut,ah)}function ih(s){return w0(s,wn,ty)}var sh=ku?function(s){return ku.get(s)}:Eh;function Uu(s){for(var a=s.name+"",f=xo[a],g=rt.call(xo,a)?f.length:0;g--;){var w=f[g],k=w.func;if(k==null||k==s)return w.name}return a}function So(s){var a=rt.call(E,"placeholder")?E:s;return a.placeholder}function Ce(){var s=E.iteratee||bh;return s=s===bh?S0:s,arguments.length?s(arguments[0],arguments[1]):s}function zu(s,a){var f=s.__data__;return zk(a)?f[typeof a=="string"?"string":"hash"]:f.map}function oh(s){for(var a=Ut(s),f=a.length;f--;){var g=a[f],w=s[g];a[f]=[g,w,iy(w)]}return a}function js(s,a){var f=H2(s,a);return b0(f)?f:n}function Rk(s){var a=rt.call(s,Ss),f=s[Ss];try{s[Ss]=n;var g=!0}catch{}var w=yu.call(s);return g&&(a?s[Ss]=f:delete s[Ss]),w}var ah=Rf?function(s){return s==null?[]:(s=ot(s),Ni(Rf(s),function(a){return a0.call(s,a)}))}:Nh,ty=Rf?function(s){for(var a=[];s;)ki(a,ah(s)),s=_u(s);return a}:Nh,Zt=ln;($f&&Zt(new $f(new ArrayBuffer(1)))!=sn||Ca&&Zt(new Ca)!=ee||Af&&Zt(Af.resolve())!=G||yo&&Zt(new yo)!=Pe||ja&&Zt(new ja)!=Xe)&&(Zt=function(s){var a=ln(s),f=a==ce?s.constructor:n,g=f?Ps(f):"";if(g)switch(g){case gN:return sn;case vN:return ee;case yN:return G;case xN:return Pe;case wN:return Xe}return a});function $k(s,a,f){for(var g=-1,w=f.length;++g<w;){var k=f[g],D=k.size;switch(k.type){case"drop":s+=D;break;case"dropRight":a-=D;break;case"take":a=Jt(a,s+D);break;case"takeRight":s=$t(s,a-D);break}}return{start:s,end:a}}function Ak(s){var a=s.match(Or);return a?a[1].split(_s):[]}function ny(s,a,f){a=Ti(a,s);for(var g=-1,w=a.length,k=!1;++g<w;){var D=$r(a[g]);if(!(k=s!=null&&f(s,D)))break;s=s[D]}return k||++g!=w?k:(w=s==null?0:s.length,!!w&&Yu(w)&&ei(D,w)&&(Le(s)||Ds(s)))}function Lk(s){var a=s.length,f=new s.constructor(a);return a&&typeof s[0]=="string"&&rt.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function ry(s){return typeof s.constructor=="function"&&!La(s)?wo(_u(s)):{}}function Ik(s,a,f){var g=s.constructor;switch(a){case Ft:return eh(s);case pe:case Z:return new g(+s);case sn:return _k(s,f);case Yr:case lo:case Yn:case uo:case _a:case ba:case ys:case co:case Sa:return F0(s,f);case ee:return new g;case R:case ke:return new g(s);case ve:return bk(s);case Pe:return new g;case Ke:return Sk(s)}}function Fk(s,a){var f=a.length;if(!f)return s;var g=f-1;return a[g]=(f>1?"& ":"")+a[g],a=a.join(f>2?", ":" "),s.replace(ws,`{
/* [wrapped with `+a+`] */
`)}function Uk(s){return Le(s)||Ds(s)||!!(l0&&s&&s[l0])}function ei(s,a){var f=typeof s;return a=a??T,!!a&&(f=="number"||f!="symbol"&&JE.test(s))&&s>-1&&s%1==0&&s<a}function un(s,a,f){if(!xt(f))return!1;var g=typeof a;return(g=="number"?xn(f)&&ei(a,f.length):g=="string"&&a in f)?gr(f[a],s):!1}function lh(s,a){if(Le(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||An(s)?!0:Ei.test(s)||!Kn.test(s)||a!=null&&s in ot(a)}function zk(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function uh(s){var a=Uu(s),f=E[a];if(typeof f!="function"||!(a in He.prototype))return!1;if(s===f)return!0;var g=sh(f);return!!g&&s===g[0]}function Wk(s){return!!i0&&i0 in s}var Bk=gu?ti:kh;function La(s){var a=s&&s.constructor,f=typeof a=="function"&&a.prototype||vo;return s===f}function iy(s){return s===s&&!xt(s)}function sy(s,a){return function(f){return f==null?!1:f[s]===a&&(a!==n||s in ot(f))}}function Hk(s){var a=Gu(s,function(g){return f.size===h&&f.clear(),g}),f=a.cache;return a}function qk(s,a){var f=s[1],g=a[1],w=f|g,k=w<(j|b|L),D=g==L&&f==N||g==L&&f==z&&s[7].length<=a[8]||g==(L|z)&&a[7].length<=a[8]&&f==N;if(!(k||D))return s;g&j&&(s[2]=a[2],w|=f&j?0:_);var O=a[3];if(O){var I=s[3];s[3]=I?z0(I,O,a[4]):O,s[4]=I?Ci(s[3],p):a[4]}return O=a[5],O&&(I=s[5],s[5]=I?W0(I,O,a[6]):O,s[6]=I?Ci(s[5],p):a[6]),O=a[7],O&&(s[7]=O),g&L&&(s[8]=s[8]==null?a[8]:Jt(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=w,s}function Gk(s){var a=[];if(s!=null)for(var f in ot(s))a.push(f);return a}function Vk(s){return yu.call(s)}function oy(s,a,f){return a=$t(a===n?s.length-1:a,0),function(){for(var g=arguments,w=-1,k=$t(g.length-a,0),D=B(k);++w<k;)D[w]=g[a+w];w=-1;for(var O=B(a+1);++w<a;)O[w]=g[w];return O[a]=f(D),Mn(s,this,O)}}function ay(s,a){return a.length<2?s:Cs(s,rr(a,0,-1))}function Yk(s,a){for(var f=s.length,g=Jt(a.length,f),w=yn(s);g--;){var k=a[g];s[g]=ei(k,f)?w[k]:n}return s}function ch(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var ly=cy(T0),Ia=uN||function(s,a){return qt.setTimeout(s,a)},dh=cy(vk);function uy(s,a,f){var g=a+"";return dh(s,Fk(g,Kk(Ak(g),f)))}function cy(s){var a=0,f=0;return function(){var g=hN(),w=re-(g-f);if(f=g,w>0){if(++a>=Ee)return arguments[0]}else a=0;return s.apply(n,arguments)}}function Wu(s,a){var f=-1,g=s.length,w=g-1;for(a=a===n?g:a;++f<a;){var k=Vf(f,w),D=s[k];s[k]=s[f],s[f]=D}return s.length=a,s}var dy=Hk(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Mt,function(f,g,w,k){a.push(w?k.replace(GE,"$1"):g||f)}),a});function $r(s){if(typeof s=="string"||An(s))return s;var a=s+"";return a=="0"&&1/s==-$?"-0":a}function Ps(s){if(s!=null){try{return vu.call(s)}catch{}try{return s+""}catch{}}return""}function Kk(s,a){return Zn($e,function(f){var g="_."+f[0];a&f[1]&&!fu(s,g)&&s.push(g)}),s.sort()}function fy(s){if(s instanceof He)return s.clone();var a=new tr(s.__wrapped__,s.__chain__);return a.__actions__=yn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function Qk(s,a,f){(f?un(s,a,f):a===n)?a=1:a=$t(Ie(a),0);var g=s==null?0:s.length;if(!g||a<1)return[];for(var w=0,k=0,D=B(Eu(g/a));w<g;)D[k++]=rr(s,w,w+=a);return D}function Xk(s){for(var a=-1,f=s==null?0:s.length,g=0,w=[];++a<f;){var k=s[a];k&&(w[g++]=k)}return w}function Jk(){var s=arguments.length;if(!s)return[];for(var a=B(s-1),f=arguments[0],g=s;g--;)a[g-1]=arguments[g];return ki(Le(f)?yn(f):[f],Gt(a,1))}var Zk=Ue(function(s,a){return kt(s)?Oa(s,Gt(a,1,kt,!0)):[]}),eC=Ue(function(s,a){var f=ir(a);return kt(f)&&(f=n),kt(s)?Oa(s,Gt(a,1,kt,!0),Ce(f,2)):[]}),tC=Ue(function(s,a){var f=ir(a);return kt(f)&&(f=n),kt(s)?Oa(s,Gt(a,1,kt,!0),n,f):[]});function nC(s,a,f){var g=s==null?0:s.length;return g?(a=f||a===n?1:Ie(a),rr(s,a<0?0:a,g)):[]}function rC(s,a,f){var g=s==null?0:s.length;return g?(a=f||a===n?1:Ie(a),a=g-a,rr(s,0,a<0?0:a)):[]}function iC(s,a){return s&&s.length?Ru(s,Ce(a,3),!0,!0):[]}function sC(s,a){return s&&s.length?Ru(s,Ce(a,3),!0):[]}function oC(s,a,f,g){var w=s==null?0:s.length;return w?(f&&typeof f!="number"&&un(s,a,f)&&(f=0,g=w),JN(s,a,f,g)):[]}function hy(s,a,f){var g=s==null?0:s.length;if(!g)return-1;var w=f==null?0:Ie(f);return w<0&&(w=$t(g+w,0)),hu(s,Ce(a,3),w)}function py(s,a,f){var g=s==null?0:s.length;if(!g)return-1;var w=g-1;return f!==n&&(w=Ie(f),w=f<0?$t(g+w,0):Jt(w,g-1)),hu(s,Ce(a,3),w,!0)}function my(s){var a=s==null?0:s.length;return a?Gt(s,1):[]}function aC(s){var a=s==null?0:s.length;return a?Gt(s,$):[]}function lC(s,a){var f=s==null?0:s.length;return f?(a=a===n?1:Ie(a),Gt(s,a)):[]}function uC(s){for(var a=-1,f=s==null?0:s.length,g={};++a<f;){var w=s[a];g[w[0]]=w[1]}return g}function gy(s){return s&&s.length?s[0]:n}function cC(s,a,f){var g=s==null?0:s.length;if(!g)return-1;var w=f==null?0:Ie(f);return w<0&&(w=$t(g+w,0)),ho(s,a,w)}function dC(s){var a=s==null?0:s.length;return a?rr(s,0,-1):[]}var fC=Ue(function(s){var a=gt(s,Jf);return a.length&&a[0]===s[0]?Wf(a):[]}),hC=Ue(function(s){var a=ir(s),f=gt(s,Jf);return a===ir(f)?a=n:f.pop(),f.length&&f[0]===s[0]?Wf(f,Ce(a,2)):[]}),pC=Ue(function(s){var a=ir(s),f=gt(s,Jf);return a=typeof a=="function"?a:n,a&&f.pop(),f.length&&f[0]===s[0]?Wf(f,n,a):[]});function mC(s,a){return s==null?"":dN.call(s,a)}function ir(s){var a=s==null?0:s.length;return a?s[a-1]:n}function gC(s,a,f){var g=s==null?0:s.length;if(!g)return-1;var w=g;return f!==n&&(w=Ie(f),w=w<0?$t(g+w,0):Jt(w,g-1)),a===a?K2(s,a,w):hu(s,Qv,w,!0)}function vC(s,a){return s&&s.length?C0(s,Ie(a)):n}var yC=Ue(vy);function vy(s,a){return s&&s.length&&a&&a.length?Gf(s,a):s}function xC(s,a,f){return s&&s.length&&a&&a.length?Gf(s,a,Ce(f,2)):s}function wC(s,a,f){return s&&s.length&&a&&a.length?Gf(s,a,n,f):s}var _C=Zr(function(s,a){var f=s==null?0:s.length,g=If(s,a);return D0(s,gt(a,function(w){return ei(w,f)?+w:w}).sort(U0)),g});function bC(s,a){var f=[];if(!(s&&s.length))return f;var g=-1,w=[],k=s.length;for(a=Ce(a,3);++g<k;){var D=s[g];a(D,g,s)&&(f.push(D),w.push(g))}return D0(s,w),f}function fh(s){return s==null?s:mN.call(s)}function SC(s,a,f){var g=s==null?0:s.length;return g?(f&&typeof f!="number"&&un(s,a,f)?(a=0,f=g):(a=a==null?0:Ie(a),f=f===n?g:Ie(f)),rr(s,a,f)):[]}function EC(s,a){return Mu(s,a)}function NC(s,a,f){return Kf(s,a,Ce(f,2))}function kC(s,a){var f=s==null?0:s.length;if(f){var g=Mu(s,a);if(g<f&&gr(s[g],a))return g}return-1}function CC(s,a){return Mu(s,a,!0)}function jC(s,a,f){return Kf(s,a,Ce(f,2),!0)}function PC(s,a){var f=s==null?0:s.length;if(f){var g=Mu(s,a,!0)-1;if(gr(s[g],a))return g}return-1}function DC(s){return s&&s.length?O0(s):[]}function TC(s,a){return s&&s.length?O0(s,Ce(a,2)):[]}function OC(s){var a=s==null?0:s.length;return a?rr(s,1,a):[]}function MC(s,a,f){return s&&s.length?(a=f||a===n?1:Ie(a),rr(s,0,a<0?0:a)):[]}function RC(s,a,f){var g=s==null?0:s.length;return g?(a=f||a===n?1:Ie(a),a=g-a,rr(s,a<0?0:a,g)):[]}function $C(s,a){return s&&s.length?Ru(s,Ce(a,3),!1,!0):[]}function AC(s,a){return s&&s.length?Ru(s,Ce(a,3)):[]}var LC=Ue(function(s){return Di(Gt(s,1,kt,!0))}),IC=Ue(function(s){var a=ir(s);return kt(a)&&(a=n),Di(Gt(s,1,kt,!0),Ce(a,2))}),FC=Ue(function(s){var a=ir(s);return a=typeof a=="function"?a:n,Di(Gt(s,1,kt,!0),n,a)});function UC(s){return s&&s.length?Di(s):[]}function zC(s,a){return s&&s.length?Di(s,Ce(a,2)):[]}function WC(s,a){return a=typeof a=="function"?a:n,s&&s.length?Di(s,n,a):[]}function hh(s){if(!(s&&s.length))return[];var a=0;return s=Ni(s,function(f){if(kt(f))return a=$t(f.length,a),!0}),Df(a,function(f){return gt(s,Cf(f))})}function yy(s,a){if(!(s&&s.length))return[];var f=hh(s);return a==null?f:gt(f,function(g){return Mn(a,n,g)})}var BC=Ue(function(s,a){return kt(s)?Oa(s,a):[]}),HC=Ue(function(s){return Xf(Ni(s,kt))}),qC=Ue(function(s){var a=ir(s);return kt(a)&&(a=n),Xf(Ni(s,kt),Ce(a,2))}),GC=Ue(function(s){var a=ir(s);return a=typeof a=="function"?a:n,Xf(Ni(s,kt),n,a)}),VC=Ue(hh);function YC(s,a){return A0(s||[],a||[],Ta)}function KC(s,a){return A0(s||[],a||[],$a)}var QC=Ue(function(s){var a=s.length,f=a>1?s[a-1]:n;return f=typeof f=="function"?(s.pop(),f):n,yy(s,f)});function xy(s){var a=E(s);return a.__chain__=!0,a}function XC(s,a){return a(s),s}function Bu(s,a){return a(s)}var JC=Zr(function(s){var a=s.length,f=a?s[0]:0,g=this.__wrapped__,w=function(k){return If(k,s)};return a>1||this.__actions__.length||!(g instanceof He)||!ei(f)?this.thru(w):(g=g.slice(f,+f+(a?1:0)),g.__actions__.push({func:Bu,args:[w],thisArg:n}),new tr(g,this.__chain__).thru(function(k){return a&&!k.length&&k.push(n),k}))});function ZC(){return xy(this)}function ej(){return new tr(this.value(),this.__chain__)}function tj(){this.__values__===n&&(this.__values__=My(this.value()));var s=this.__index__>=this.__values__.length,a=s?n:this.__values__[this.__index__++];return{done:s,value:a}}function nj(){return this}function rj(s){for(var a,f=this;f instanceof ju;){var g=fy(f);g.__index__=0,g.__values__=n,a?w.__wrapped__=g:a=g;var w=g;f=f.__wrapped__}return w.__wrapped__=s,a}function ij(){var s=this.__wrapped__;if(s instanceof He){var a=s;return this.__actions__.length&&(a=new He(this)),a=a.reverse(),a.__actions__.push({func:Bu,args:[fh],thisArg:n}),new tr(a,this.__chain__)}return this.thru(fh)}function sj(){return $0(this.__wrapped__,this.__actions__)}var oj=$u(function(s,a,f){rt.call(s,f)?++s[f]:Xr(s,f,1)});function aj(s,a,f){var g=Le(s)?Yv:XN;return f&&un(s,a,f)&&(a=n),g(s,Ce(a,3))}function lj(s,a){var f=Le(s)?Ni:y0;return f(s,Ce(a,3))}var uj=G0(hy),cj=G0(py);function dj(s,a){return Gt(Hu(s,a),1)}function fj(s,a){return Gt(Hu(s,a),$)}function hj(s,a,f){return f=f===n?1:Ie(f),Gt(Hu(s,a),f)}function wy(s,a){var f=Le(s)?Zn:Pi;return f(s,Ce(a,3))}function _y(s,a){var f=Le(s)?O2:v0;return f(s,Ce(a,3))}var pj=$u(function(s,a,f){rt.call(s,f)?s[f].push(a):Xr(s,f,[a])});function mj(s,a,f,g){s=xn(s)?s:No(s),f=f&&!g?Ie(f):0;var w=s.length;return f<0&&(f=$t(w+f,0)),Ku(s)?f<=w&&s.indexOf(a,f)>-1:!!w&&ho(s,a,f)>-1}var gj=Ue(function(s,a,f){var g=-1,w=typeof a=="function",k=xn(s)?B(s.length):[];return Pi(s,function(D){k[++g]=w?Mn(a,D,f):Ma(D,a,f)}),k}),vj=$u(function(s,a,f){Xr(s,f,a)});function Hu(s,a){var f=Le(s)?gt:E0;return f(s,Ce(a,3))}function yj(s,a,f,g){return s==null?[]:(Le(a)||(a=a==null?[]:[a]),f=g?n:f,Le(f)||(f=f==null?[]:[f]),j0(s,a,f))}var xj=$u(function(s,a,f){s[f?0:1].push(a)},function(){return[[],[]]});function wj(s,a,f){var g=Le(s)?Nf:Jv,w=arguments.length<3;return g(s,Ce(a,4),f,w,Pi)}function _j(s,a,f){var g=Le(s)?M2:Jv,w=arguments.length<3;return g(s,Ce(a,4),f,w,v0)}function bj(s,a){var f=Le(s)?Ni:y0;return f(s,Vu(Ce(a,3)))}function Sj(s){var a=Le(s)?h0:mk;return a(s)}function Ej(s,a,f){(f?un(s,a,f):a===n)?a=1:a=Ie(a);var g=Le(s)?GN:gk;return g(s,a)}function Nj(s){var a=Le(s)?VN:yk;return a(s)}function kj(s){if(s==null)return 0;if(xn(s))return Ku(s)?mo(s):s.length;var a=Zt(s);return a==ee||a==Pe?s.size:Hf(s).length}function Cj(s,a,f){var g=Le(s)?kf:xk;return f&&un(s,a,f)&&(a=n),g(s,Ce(a,3))}var jj=Ue(function(s,a){if(s==null)return[];var f=a.length;return f>1&&un(s,a[0],a[1])?a=[]:f>2&&un(a[0],a[1],a[2])&&(a=[a[0]]),j0(s,Gt(a,1),[])}),qu=lN||function(){return qt.Date.now()};function Pj(s,a){if(typeof a!="function")throw new er(l);return s=Ie(s),function(){if(--s<1)return a.apply(this,arguments)}}function by(s,a,f){return a=f?n:a,a=s&&a==null?s.length:a,Jr(s,L,n,n,n,n,a)}function Sy(s,a){var f;if(typeof a!="function")throw new er(l);return s=Ie(s),function(){return--s>0&&(f=a.apply(this,arguments)),s<=1&&(a=n),f}}var ph=Ue(function(s,a,f){var g=j;if(f.length){var w=Ci(f,So(ph));g|=M}return Jr(s,g,a,f,w)}),Ey=Ue(function(s,a,f){var g=j|b;if(f.length){var w=Ci(f,So(Ey));g|=M}return Jr(a,g,s,f,w)});function Ny(s,a,f){a=f?n:a;var g=Jr(s,N,n,n,n,n,n,a);return g.placeholder=Ny.placeholder,g}function ky(s,a,f){a=f?n:a;var g=Jr(s,P,n,n,n,n,n,a);return g.placeholder=ky.placeholder,g}function Cy(s,a,f){var g,w,k,D,O,I,X=0,J=!1,ie=!1,he=!0;if(typeof s!="function")throw new er(l);a=sr(a)||0,xt(f)&&(J=!!f.leading,ie="maxWait"in f,k=ie?$t(sr(f.maxWait)||0,a):k,he="trailing"in f?!!f.trailing:he);function Se(Ct){var vr=g,ri=w;return g=w=n,X=Ct,D=s.apply(ri,vr),D}function De(Ct){return X=Ct,O=Ia(We,a),J?Se(Ct):D}function Fe(Ct){var vr=Ct-I,ri=Ct-X,Gy=a-vr;return ie?Jt(Gy,k-ri):Gy}function Te(Ct){var vr=Ct-I,ri=Ct-X;return I===n||vr>=a||vr<0||ie&&ri>=k}function We(){var Ct=qu();if(Te(Ct))return qe(Ct);O=Ia(We,Fe(Ct))}function qe(Ct){return O=n,he&&g?Se(Ct):(g=w=n,D)}function Ln(){O!==n&&L0(O),X=0,g=I=w=O=n}function cn(){return O===n?D:qe(qu())}function In(){var Ct=qu(),vr=Te(Ct);if(g=arguments,w=this,I=Ct,vr){if(O===n)return De(I);if(ie)return L0(O),O=Ia(We,a),Se(I)}return O===n&&(O=Ia(We,a)),D}return In.cancel=Ln,In.flush=cn,In}var Dj=Ue(function(s,a){return g0(s,1,a)}),Tj=Ue(function(s,a,f){return g0(s,sr(a)||0,f)});function Oj(s){return Jr(s,le)}function Gu(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new er(l);var f=function(){var g=arguments,w=a?a.apply(this,g):g[0],k=f.cache;if(k.has(w))return k.get(w);var D=s.apply(this,g);return f.cache=k.set(w,D)||k,D};return f.cache=new(Gu.Cache||Qr),f}Gu.Cache=Qr;function Vu(s){if(typeof s!="function")throw new er(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function Mj(s){return Sy(2,s)}var Rj=wk(function(s,a){a=a.length==1&&Le(a[0])?gt(a[0],Rn(Ce())):gt(Gt(a,1),Rn(Ce()));var f=a.length;return Ue(function(g){for(var w=-1,k=Jt(g.length,f);++w<k;)g[w]=a[w].call(this,g[w]);return Mn(s,this,g)})}),mh=Ue(function(s,a){var f=Ci(a,So(mh));return Jr(s,M,n,a,f)}),jy=Ue(function(s,a){var f=Ci(a,So(jy));return Jr(s,U,n,a,f)}),$j=Zr(function(s,a){return Jr(s,z,n,n,n,a)});function Aj(s,a){if(typeof s!="function")throw new er(l);return a=a===n?a:Ie(a),Ue(s,a)}function Lj(s,a){if(typeof s!="function")throw new er(l);return a=a==null?0:$t(Ie(a),0),Ue(function(f){var g=f[a],w=Oi(f,0,a);return g&&ki(w,g),Mn(s,this,w)})}function Ij(s,a,f){var g=!0,w=!0;if(typeof s!="function")throw new er(l);return xt(f)&&(g="leading"in f?!!f.leading:g,w="trailing"in f?!!f.trailing:w),Cy(s,a,{leading:g,maxWait:a,trailing:w})}function Fj(s){return by(s,1)}function Uj(s,a){return mh(Zf(a),s)}function zj(){if(!arguments.length)return[];var s=arguments[0];return Le(s)?s:[s]}function Wj(s){return nr(s,x)}function Bj(s,a){return a=typeof a=="function"?a:n,nr(s,x,a)}function Hj(s){return nr(s,m|x)}function qj(s,a){return a=typeof a=="function"?a:n,nr(s,m|x,a)}function Gj(s,a){return a==null||m0(s,a,Ut(a))}function gr(s,a){return s===a||s!==s&&a!==a}var Vj=Fu(zf),Yj=Fu(function(s,a){return s>=a}),Ds=_0(function(){return arguments}())?_0:function(s){return Et(s)&&rt.call(s,"callee")&&!a0.call(s,"callee")},Le=B.isArray,Kj=Wv?Rn(Wv):rk;function xn(s){return s!=null&&Yu(s.length)&&!ti(s)}function kt(s){return Et(s)&&xn(s)}function Qj(s){return s===!0||s===!1||Et(s)&&ln(s)==pe}var Mi=cN||kh,Xj=Bv?Rn(Bv):ik;function Jj(s){return Et(s)&&s.nodeType===1&&!Fa(s)}function Zj(s){if(s==null)return!0;if(xn(s)&&(Le(s)||typeof s=="string"||typeof s.splice=="function"||Mi(s)||Eo(s)||Ds(s)))return!s.length;var a=Zt(s);if(a==ee||a==Pe)return!s.size;if(La(s))return!Hf(s).length;for(var f in s)if(rt.call(s,f))return!1;return!0}function e3(s,a){return Ra(s,a)}function t3(s,a,f){f=typeof f=="function"?f:n;var g=f?f(s,a):n;return g===n?Ra(s,a,n,f):!!g}function gh(s){if(!Et(s))return!1;var a=ln(s);return a==W||a==V||typeof s.message=="string"&&typeof s.name=="string"&&!Fa(s)}function n3(s){return typeof s=="number"&&u0(s)}function ti(s){if(!xt(s))return!1;var a=ln(s);return a==K||a==fe||a==Q||a==de}function Py(s){return typeof s=="number"&&s==Ie(s)}function Yu(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=T}function xt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Et(s){return s!=null&&typeof s=="object"}var Dy=Hv?Rn(Hv):ok;function r3(s,a){return s===a||Bf(s,a,oh(a))}function i3(s,a,f){return f=typeof f=="function"?f:n,Bf(s,a,oh(a),f)}function s3(s){return Ty(s)&&s!=+s}function o3(s){if(Bk(s))throw new Ae(o);return b0(s)}function a3(s){return s===null}function l3(s){return s==null}function Ty(s){return typeof s=="number"||Et(s)&&ln(s)==R}function Fa(s){if(!Et(s)||ln(s)!=ce)return!1;var a=_u(s);if(a===null)return!0;var f=rt.call(a,"constructor")&&a.constructor;return typeof f=="function"&&f instanceof f&&vu.call(f)==iN}var vh=qv?Rn(qv):ak;function u3(s){return Py(s)&&s>=-T&&s<=T}var Oy=Gv?Rn(Gv):lk;function Ku(s){return typeof s=="string"||!Le(s)&&Et(s)&&ln(s)==ke}function An(s){return typeof s=="symbol"||Et(s)&&ln(s)==Ke}var Eo=Vv?Rn(Vv):uk;function c3(s){return s===n}function d3(s){return Et(s)&&Zt(s)==Xe}function f3(s){return Et(s)&&ln(s)==yt}var h3=Fu(qf),p3=Fu(function(s,a){return s<=a});function My(s){if(!s)return[];if(xn(s))return Ku(s)?pr(s):yn(s);if(ka&&s[ka])return G2(s[ka]());var a=Zt(s),f=a==ee?Of:a==Pe?pu:No;return f(s)}function ni(s){if(!s)return s===0?s:0;if(s=sr(s),s===$||s===-$){var a=s<0?-1:1;return a*F}return s===s?s:0}function Ie(s){var a=ni(s),f=a%1;return a===a?f?a-f:a:0}function Ry(s){return s?ks(Ie(s),0,se):0}function sr(s){if(typeof s=="number")return s;if(An(s))return ne;if(xt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=xt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Zv(s);var f=KE.test(s);return f||XE.test(s)?P2(s.slice(2),f?2:8):YE.test(s)?ne:+s}function $y(s){return Rr(s,wn(s))}function m3(s){return s?ks(Ie(s),-T,T):s===0?s:0}function tt(s){return s==null?"":$n(s)}var g3=_o(function(s,a){if(La(a)||xn(a)){Rr(a,Ut(a),s);return}for(var f in a)rt.call(a,f)&&Ta(s,f,a[f])}),Ay=_o(function(s,a){Rr(a,wn(a),s)}),Qu=_o(function(s,a,f,g){Rr(a,wn(a),s,g)}),v3=_o(function(s,a,f,g){Rr(a,Ut(a),s,g)}),y3=Zr(If);function x3(s,a){var f=wo(s);return a==null?f:p0(f,a)}var w3=Ue(function(s,a){s=ot(s);var f=-1,g=a.length,w=g>2?a[2]:n;for(w&&un(a[0],a[1],w)&&(g=1);++f<g;)for(var k=a[f],D=wn(k),O=-1,I=D.length;++O<I;){var X=D[O],J=s[X];(J===n||gr(J,vo[X])&&!rt.call(s,X))&&(s[X]=k[X])}return s}),_3=Ue(function(s){return s.push(n,Z0),Mn(Ly,n,s)});function b3(s,a){return Kv(s,Ce(a,3),Mr)}function S3(s,a){return Kv(s,Ce(a,3),Uf)}function E3(s,a){return s==null?s:Ff(s,Ce(a,3),wn)}function N3(s,a){return s==null?s:x0(s,Ce(a,3),wn)}function k3(s,a){return s&&Mr(s,Ce(a,3))}function C3(s,a){return s&&Uf(s,Ce(a,3))}function j3(s){return s==null?[]:Tu(s,Ut(s))}function P3(s){return s==null?[]:Tu(s,wn(s))}function yh(s,a,f){var g=s==null?n:Cs(s,a);return g===n?f:g}function D3(s,a){return s!=null&&ny(s,a,ZN)}function xh(s,a){return s!=null&&ny(s,a,ek)}var T3=Y0(function(s,a,f){a!=null&&typeof a.toString!="function"&&(a=yu.call(a)),s[a]=f},_h(_n)),O3=Y0(function(s,a,f){a!=null&&typeof a.toString!="function"&&(a=yu.call(a)),rt.call(s,a)?s[a].push(f):s[a]=[f]},Ce),M3=Ue(Ma);function Ut(s){return xn(s)?f0(s):Hf(s)}function wn(s){return xn(s)?f0(s,!0):ck(s)}function R3(s,a){var f={};return a=Ce(a,3),Mr(s,function(g,w,k){Xr(f,a(g,w,k),g)}),f}function $3(s,a){var f={};return a=Ce(a,3),Mr(s,function(g,w,k){Xr(f,w,a(g,w,k))}),f}var A3=_o(function(s,a,f){Ou(s,a,f)}),Ly=_o(function(s,a,f,g){Ou(s,a,f,g)}),L3=Zr(function(s,a){var f={};if(s==null)return f;var g=!1;a=gt(a,function(k){return k=Ti(k,s),g||(g=k.length>1),k}),Rr(s,ih(s),f),g&&(f=nr(f,m|y|x,Tk));for(var w=a.length;w--;)Qf(f,a[w]);return f});function I3(s,a){return Iy(s,Vu(Ce(a)))}var F3=Zr(function(s,a){return s==null?{}:fk(s,a)});function Iy(s,a){if(s==null)return{};var f=gt(ih(s),function(g){return[g]});return a=Ce(a),P0(s,f,function(g,w){return a(g,w[0])})}function U3(s,a,f){a=Ti(a,s);var g=-1,w=a.length;for(w||(w=1,s=n);++g<w;){var k=s==null?n:s[$r(a[g])];k===n&&(g=w,k=f),s=ti(k)?k.call(s):k}return s}function z3(s,a,f){return s==null?s:$a(s,a,f)}function W3(s,a,f,g){return g=typeof g=="function"?g:n,s==null?s:$a(s,a,f,g)}var Fy=X0(Ut),Uy=X0(wn);function B3(s,a,f){var g=Le(s),w=g||Mi(s)||Eo(s);if(a=Ce(a,4),f==null){var k=s&&s.constructor;w?f=g?new k:[]:xt(s)?f=ti(k)?wo(_u(s)):{}:f={}}return(w?Zn:Mr)(s,function(D,O,I){return a(f,D,O,I)}),f}function H3(s,a){return s==null?!0:Qf(s,a)}function q3(s,a,f){return s==null?s:R0(s,a,Zf(f))}function G3(s,a,f,g){return g=typeof g=="function"?g:n,s==null?s:R0(s,a,Zf(f),g)}function No(s){return s==null?[]:Tf(s,Ut(s))}function V3(s){return s==null?[]:Tf(s,wn(s))}function Y3(s,a,f){return f===n&&(f=a,a=n),f!==n&&(f=sr(f),f=f===f?f:0),a!==n&&(a=sr(a),a=a===a?a:0),ks(sr(s),a,f)}function K3(s,a,f){return a=ni(a),f===n?(f=a,a=0):f=ni(f),s=sr(s),tk(s,a,f)}function Q3(s,a,f){if(f&&typeof f!="boolean"&&un(s,a,f)&&(a=f=n),f===n&&(typeof a=="boolean"?(f=a,a=n):typeof s=="boolean"&&(f=s,s=n)),s===n&&a===n?(s=0,a=1):(s=ni(s),a===n?(a=s,s=0):a=ni(a)),s>a){var g=s;s=a,a=g}if(f||s%1||a%1){var w=c0();return Jt(s+w*(a-s+j2("1e-"+((w+"").length-1))),a)}return Vf(s,a)}var X3=bo(function(s,a,f){return a=a.toLowerCase(),s+(f?zy(a):a)});function zy(s){return wh(tt(s).toLowerCase())}function Wy(s){return s=tt(s),s&&s.replace(ZE,z2).replace(y2,"")}function J3(s,a,f){s=tt(s),a=$n(a);var g=s.length;f=f===n?g:ks(Ie(f),0,g);var w=f;return f-=a.length,f>=0&&s.slice(f,w)==a}function Z3(s){return s=tt(s),s&&an.test(s)?s.replace(Ot,W2):s}function eP(s){return s=tt(s),s&&Xn.test(s)?s.replace(Qn,"\\$&"):s}var tP=bo(function(s,a,f){return s+(f?"-":"")+a.toLowerCase()}),nP=bo(function(s,a,f){return s+(f?" ":"")+a.toLowerCase()}),rP=q0("toLowerCase");function iP(s,a,f){s=tt(s),a=Ie(a);var g=a?mo(s):0;if(!a||g>=a)return s;var w=(a-g)/2;return Iu(Nu(w),f)+s+Iu(Eu(w),f)}function sP(s,a,f){s=tt(s),a=Ie(a);var g=a?mo(s):0;return a&&g<a?s+Iu(a-g,f):s}function oP(s,a,f){s=tt(s),a=Ie(a);var g=a?mo(s):0;return a&&g<a?Iu(a-g,f)+s:s}function aP(s,a,f){return f||a==null?a=0:a&&(a=+a),pN(tt(s).replace(On,""),a||0)}function lP(s,a,f){return(f?un(s,a,f):a===n)?a=1:a=Ie(a),Yf(tt(s),a)}function uP(){var s=arguments,a=tt(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var cP=bo(function(s,a,f){return s+(f?"_":"")+a.toLowerCase()});function dP(s,a,f){return f&&typeof f!="number"&&un(s,a,f)&&(a=f=n),f=f===n?se:f>>>0,f?(s=tt(s),s&&(typeof a=="string"||a!=null&&!vh(a))&&(a=$n(a),!a&&po(s))?Oi(pr(s),0,f):s.split(a,f)):[]}var fP=bo(function(s,a,f){return s+(f?" ":"")+wh(a)});function hP(s,a,f){return s=tt(s),f=f==null?0:ks(Ie(f),0,s.length),a=$n(a),s.slice(f,f+a.length)==a}function pP(s,a,f){var g=E.templateSettings;f&&un(s,a,f)&&(a=n),s=tt(s),a=Qu({},a,g,J0);var w=Qu({},a.imports,g.imports,J0),k=Ut(w),D=Tf(w,k),O,I,X=0,J=a.interpolate||uu,ie="__p += '",he=Mf((a.escape||uu).source+"|"+J.source+"|"+(J===Xt?VE:uu).source+"|"+(a.evaluate||uu).source+"|$","g"),Se="//# sourceURL="+(rt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++S2+"]")+`
`;s.replace(he,function(Te,We,qe,Ln,cn,In){return qe||(qe=Ln),ie+=s.slice(X,In).replace(e2,B2),We&&(O=!0,ie+=`' +
__e(`+We+`) +
'`),cn&&(I=!0,ie+=`';
`+cn+`;
__p += '`),qe&&(ie+=`' +
((__t = (`+qe+`)) == null ? '' : __t) +
'`),X=In+Te.length,Te}),ie+=`';
`;var De=rt.call(a,"variable")&&a.variable;if(!De)ie=`with (obj) {
`+ie+`
}
`;else if(qE.test(De))throw new Ae(u);ie=(I?ie.replace(au,""):ie).replace(mf,"$1").replace(gf,"$1;"),ie="function("+(De||"obj")+`) {
`+(De?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var Fe=Hy(function(){return Ze(k,Se+"return "+ie).apply(n,D)});if(Fe.source=ie,gh(Fe))throw Fe;return Fe}function mP(s){return tt(s).toLowerCase()}function gP(s){return tt(s).toUpperCase()}function vP(s,a,f){if(s=tt(s),s&&(f||a===n))return Zv(s);if(!s||!(a=$n(a)))return s;var g=pr(s),w=pr(a),k=e0(g,w),D=t0(g,w)+1;return Oi(g,k,D).join("")}function yP(s,a,f){if(s=tt(s),s&&(f||a===n))return s.slice(0,r0(s)+1);if(!s||!(a=$n(a)))return s;var g=pr(s),w=t0(g,pr(a))+1;return Oi(g,0,w).join("")}function xP(s,a,f){if(s=tt(s),s&&(f||a===n))return s.replace(On,"");if(!s||!(a=$n(a)))return s;var g=pr(s),w=e0(g,pr(a));return Oi(g,w).join("")}function wP(s,a){var f=te,g=H;if(xt(a)){var w="separator"in a?a.separator:w;f="length"in a?Ie(a.length):f,g="omission"in a?$n(a.omission):g}s=tt(s);var k=s.length;if(po(s)){var D=pr(s);k=D.length}if(f>=k)return s;var O=f-mo(g);if(O<1)return g;var I=D?Oi(D,0,O).join(""):s.slice(0,O);if(w===n)return I+g;if(D&&(O+=I.length-O),vh(w)){if(s.slice(O).search(w)){var X,J=I;for(w.global||(w=Mf(w.source,tt(_v.exec(w))+"g")),w.lastIndex=0;X=w.exec(J);)var ie=X.index;I=I.slice(0,ie===n?O:ie)}}else if(s.indexOf($n(w),O)!=O){var he=I.lastIndexOf(w);he>-1&&(I=I.slice(0,he))}return I+g}function _P(s){return s=tt(s),s&&on.test(s)?s.replace(lu,Q2):s}var bP=bo(function(s,a,f){return s+(f?" ":"")+a.toUpperCase()}),wh=q0("toUpperCase");function By(s,a,f){return s=tt(s),a=f?n:a,a===n?q2(s)?Z2(s):A2(s):s.match(a)||[]}var Hy=Ue(function(s,a){try{return Mn(s,n,a)}catch(f){return gh(f)?f:new Ae(f)}}),SP=Zr(function(s,a){return Zn(a,function(f){f=$r(f),Xr(s,f,ph(s[f],s))}),s});function EP(s){var a=s==null?0:s.length,f=Ce();return s=a?gt(s,function(g){if(typeof g[1]!="function")throw new er(l);return[f(g[0]),g[1]]}):[],Ue(function(g){for(var w=-1;++w<a;){var k=s[w];if(Mn(k[0],this,g))return Mn(k[1],this,g)}})}function NP(s){return QN(nr(s,m))}function _h(s){return function(){return s}}function kP(s,a){return s==null||s!==s?a:s}var CP=V0(),jP=V0(!0);function _n(s){return s}function bh(s){return S0(typeof s=="function"?s:nr(s,m))}function PP(s){return N0(nr(s,m))}function DP(s,a){return k0(s,nr(a,m))}var TP=Ue(function(s,a){return function(f){return Ma(f,s,a)}}),OP=Ue(function(s,a){return function(f){return Ma(s,f,a)}});function Sh(s,a,f){var g=Ut(a),w=Tu(a,g);f==null&&!(xt(a)&&(w.length||!g.length))&&(f=a,a=s,s=this,w=Tu(a,Ut(a)));var k=!(xt(f)&&"chain"in f)||!!f.chain,D=ti(s);return Zn(w,function(O){var I=a[O];s[O]=I,D&&(s.prototype[O]=function(){var X=this.__chain__;if(k||X){var J=s(this.__wrapped__),ie=J.__actions__=yn(this.__actions__);return ie.push({func:I,args:arguments,thisArg:s}),J.__chain__=X,J}return I.apply(s,ki([this.value()],arguments))})}),s}function MP(){return qt._===this&&(qt._=sN),this}function Eh(){}function RP(s){return s=Ie(s),Ue(function(a){return C0(a,s)})}var $P=th(gt),AP=th(Yv),LP=th(kf);function qy(s){return lh(s)?Cf($r(s)):hk(s)}function IP(s){return function(a){return s==null?n:Cs(s,a)}}var FP=K0(),UP=K0(!0);function Nh(){return[]}function kh(){return!1}function zP(){return{}}function WP(){return""}function BP(){return!0}function HP(s,a){if(s=Ie(s),s<1||s>T)return[];var f=se,g=Jt(s,se);a=Ce(a),s-=se;for(var w=Df(g,a);++f<s;)a(f);return w}function qP(s){return Le(s)?gt(s,$r):An(s)?[s]:yn(dy(tt(s)))}function GP(s){var a=++rN;return tt(s)+a}var VP=Lu(function(s,a){return s+a},0),YP=nh("ceil"),KP=Lu(function(s,a){return s/a},1),QP=nh("floor");function XP(s){return s&&s.length?Du(s,_n,zf):n}function JP(s,a){return s&&s.length?Du(s,Ce(a,2),zf):n}function ZP(s){return Xv(s,_n)}function e4(s,a){return Xv(s,Ce(a,2))}function t4(s){return s&&s.length?Du(s,_n,qf):n}function n4(s,a){return s&&s.length?Du(s,Ce(a,2),qf):n}var r4=Lu(function(s,a){return s*a},1),i4=nh("round"),s4=Lu(function(s,a){return s-a},0);function o4(s){return s&&s.length?Pf(s,_n):0}function a4(s,a){return s&&s.length?Pf(s,Ce(a,2)):0}return E.after=Pj,E.ary=by,E.assign=g3,E.assignIn=Ay,E.assignInWith=Qu,E.assignWith=v3,E.at=y3,E.before=Sy,E.bind=ph,E.bindAll=SP,E.bindKey=Ey,E.castArray=zj,E.chain=xy,E.chunk=Qk,E.compact=Xk,E.concat=Jk,E.cond=EP,E.conforms=NP,E.constant=_h,E.countBy=oj,E.create=x3,E.curry=Ny,E.curryRight=ky,E.debounce=Cy,E.defaults=w3,E.defaultsDeep=_3,E.defer=Dj,E.delay=Tj,E.difference=Zk,E.differenceBy=eC,E.differenceWith=tC,E.drop=nC,E.dropRight=rC,E.dropRightWhile=iC,E.dropWhile=sC,E.fill=oC,E.filter=lj,E.flatMap=dj,E.flatMapDeep=fj,E.flatMapDepth=hj,E.flatten=my,E.flattenDeep=aC,E.flattenDepth=lC,E.flip=Oj,E.flow=CP,E.flowRight=jP,E.fromPairs=uC,E.functions=j3,E.functionsIn=P3,E.groupBy=pj,E.initial=dC,E.intersection=fC,E.intersectionBy=hC,E.intersectionWith=pC,E.invert=T3,E.invertBy=O3,E.invokeMap=gj,E.iteratee=bh,E.keyBy=vj,E.keys=Ut,E.keysIn=wn,E.map=Hu,E.mapKeys=R3,E.mapValues=$3,E.matches=PP,E.matchesProperty=DP,E.memoize=Gu,E.merge=A3,E.mergeWith=Ly,E.method=TP,E.methodOf=OP,E.mixin=Sh,E.negate=Vu,E.nthArg=RP,E.omit=L3,E.omitBy=I3,E.once=Mj,E.orderBy=yj,E.over=$P,E.overArgs=Rj,E.overEvery=AP,E.overSome=LP,E.partial=mh,E.partialRight=jy,E.partition=xj,E.pick=F3,E.pickBy=Iy,E.property=qy,E.propertyOf=IP,E.pull=yC,E.pullAll=vy,E.pullAllBy=xC,E.pullAllWith=wC,E.pullAt=_C,E.range=FP,E.rangeRight=UP,E.rearg=$j,E.reject=bj,E.remove=bC,E.rest=Aj,E.reverse=fh,E.sampleSize=Ej,E.set=z3,E.setWith=W3,E.shuffle=Nj,E.slice=SC,E.sortBy=jj,E.sortedUniq=DC,E.sortedUniqBy=TC,E.split=dP,E.spread=Lj,E.tail=OC,E.take=MC,E.takeRight=RC,E.takeRightWhile=$C,E.takeWhile=AC,E.tap=XC,E.throttle=Ij,E.thru=Bu,E.toArray=My,E.toPairs=Fy,E.toPairsIn=Uy,E.toPath=qP,E.toPlainObject=$y,E.transform=B3,E.unary=Fj,E.union=LC,E.unionBy=IC,E.unionWith=FC,E.uniq=UC,E.uniqBy=zC,E.uniqWith=WC,E.unset=H3,E.unzip=hh,E.unzipWith=yy,E.update=q3,E.updateWith=G3,E.values=No,E.valuesIn=V3,E.without=BC,E.words=By,E.wrap=Uj,E.xor=HC,E.xorBy=qC,E.xorWith=GC,E.zip=VC,E.zipObject=YC,E.zipObjectDeep=KC,E.zipWith=QC,E.entries=Fy,E.entriesIn=Uy,E.extend=Ay,E.extendWith=Qu,Sh(E,E),E.add=VP,E.attempt=Hy,E.camelCase=X3,E.capitalize=zy,E.ceil=YP,E.clamp=Y3,E.clone=Wj,E.cloneDeep=Hj,E.cloneDeepWith=qj,E.cloneWith=Bj,E.conformsTo=Gj,E.deburr=Wy,E.defaultTo=kP,E.divide=KP,E.endsWith=J3,E.eq=gr,E.escape=Z3,E.escapeRegExp=eP,E.every=aj,E.find=uj,E.findIndex=hy,E.findKey=b3,E.findLast=cj,E.findLastIndex=py,E.findLastKey=S3,E.floor=QP,E.forEach=wy,E.forEachRight=_y,E.forIn=E3,E.forInRight=N3,E.forOwn=k3,E.forOwnRight=C3,E.get=yh,E.gt=Vj,E.gte=Yj,E.has=D3,E.hasIn=xh,E.head=gy,E.identity=_n,E.includes=mj,E.indexOf=cC,E.inRange=K3,E.invoke=M3,E.isArguments=Ds,E.isArray=Le,E.isArrayBuffer=Kj,E.isArrayLike=xn,E.isArrayLikeObject=kt,E.isBoolean=Qj,E.isBuffer=Mi,E.isDate=Xj,E.isElement=Jj,E.isEmpty=Zj,E.isEqual=e3,E.isEqualWith=t3,E.isError=gh,E.isFinite=n3,E.isFunction=ti,E.isInteger=Py,E.isLength=Yu,E.isMap=Dy,E.isMatch=r3,E.isMatchWith=i3,E.isNaN=s3,E.isNative=o3,E.isNil=l3,E.isNull=a3,E.isNumber=Ty,E.isObject=xt,E.isObjectLike=Et,E.isPlainObject=Fa,E.isRegExp=vh,E.isSafeInteger=u3,E.isSet=Oy,E.isString=Ku,E.isSymbol=An,E.isTypedArray=Eo,E.isUndefined=c3,E.isWeakMap=d3,E.isWeakSet=f3,E.join=mC,E.kebabCase=tP,E.last=ir,E.lastIndexOf=gC,E.lowerCase=nP,E.lowerFirst=rP,E.lt=h3,E.lte=p3,E.max=XP,E.maxBy=JP,E.mean=ZP,E.meanBy=e4,E.min=t4,E.minBy=n4,E.stubArray=Nh,E.stubFalse=kh,E.stubObject=zP,E.stubString=WP,E.stubTrue=BP,E.multiply=r4,E.nth=vC,E.noConflict=MP,E.noop=Eh,E.now=qu,E.pad=iP,E.padEnd=sP,E.padStart=oP,E.parseInt=aP,E.random=Q3,E.reduce=wj,E.reduceRight=_j,E.repeat=lP,E.replace=uP,E.result=U3,E.round=i4,E.runInContext=A,E.sample=Sj,E.size=kj,E.snakeCase=cP,E.some=Cj,E.sortedIndex=EC,E.sortedIndexBy=NC,E.sortedIndexOf=kC,E.sortedLastIndex=CC,E.sortedLastIndexBy=jC,E.sortedLastIndexOf=PC,E.startCase=fP,E.startsWith=hP,E.subtract=s4,E.sum=o4,E.sumBy=a4,E.template=pP,E.times=HP,E.toFinite=ni,E.toInteger=Ie,E.toLength=Ry,E.toLower=mP,E.toNumber=sr,E.toSafeInteger=m3,E.toString=tt,E.toUpper=gP,E.trim=vP,E.trimEnd=yP,E.trimStart=xP,E.truncate=wP,E.unescape=_P,E.uniqueId=GP,E.upperCase=bP,E.upperFirst=wh,E.each=wy,E.eachRight=_y,E.first=gy,Sh(E,function(){var s={};return Mr(E,function(a,f){rt.call(E.prototype,f)||(s[f]=a)}),s}(),{chain:!1}),E.VERSION=r,Zn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){E[s].placeholder=E}),Zn(["drop","take"],function(s,a){He.prototype[s]=function(f){f=f===n?1:$t(Ie(f),0);var g=this.__filtered__&&!a?new He(this):this.clone();return g.__filtered__?g.__takeCount__=Jt(f,g.__takeCount__):g.__views__.push({size:Jt(f,se),type:s+(g.__dir__<0?"Right":"")}),g},He.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Zn(["filter","map","takeWhile"],function(s,a){var f=a+1,g=f==me||f==Me;He.prototype[s]=function(w){var k=this.clone();return k.__iteratees__.push({iteratee:Ce(w,3),type:f}),k.__filtered__=k.__filtered__||g,k}}),Zn(["head","last"],function(s,a){var f="take"+(a?"Right":"");He.prototype[s]=function(){return this[f](1).value()[0]}}),Zn(["initial","tail"],function(s,a){var f="drop"+(a?"":"Right");He.prototype[s]=function(){return this.__filtered__?new He(this):this[f](1)}}),He.prototype.compact=function(){return this.filter(_n)},He.prototype.find=function(s){return this.filter(s).head()},He.prototype.findLast=function(s){return this.reverse().find(s)},He.prototype.invokeMap=Ue(function(s,a){return typeof s=="function"?new He(this):this.map(function(f){return Ma(f,s,a)})}),He.prototype.reject=function(s){return this.filter(Vu(Ce(s)))},He.prototype.slice=function(s,a){s=Ie(s);var f=this;return f.__filtered__&&(s>0||a<0)?new He(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),a!==n&&(a=Ie(a),f=a<0?f.dropRight(-a):f.take(a-s)),f)},He.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},He.prototype.toArray=function(){return this.take(se)},Mr(He.prototype,function(s,a){var f=/^(?:filter|find|map|reject)|While$/.test(a),g=/^(?:head|last)$/.test(a),w=E[g?"take"+(a=="last"?"Right":""):a],k=g||/^find/.test(a);w&&(E.prototype[a]=function(){var D=this.__wrapped__,O=g?[1]:arguments,I=D instanceof He,X=O[0],J=I||Le(D),ie=function(We){var qe=w.apply(E,ki([We],O));return g&&he?qe[0]:qe};J&&f&&typeof X=="function"&&X.length!=1&&(I=J=!1);var he=this.__chain__,Se=!!this.__actions__.length,De=k&&!he,Fe=I&&!Se;if(!k&&J){D=Fe?D:new He(this);var Te=s.apply(D,O);return Te.__actions__.push({func:Bu,args:[ie],thisArg:n}),new tr(Te,he)}return De&&Fe?s.apply(this,O):(Te=this.thru(ie),De?g?Te.value()[0]:Te.value():Te)})}),Zn(["pop","push","shift","sort","splice","unshift"],function(s){var a=mu[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);E.prototype[s]=function(){var w=arguments;if(g&&!this.__chain__){var k=this.value();return a.apply(Le(k)?k:[],w)}return this[f](function(D){return a.apply(Le(D)?D:[],w)})}}),Mr(He.prototype,function(s,a){var f=E[a];if(f){var g=f.name+"";rt.call(xo,g)||(xo[g]=[]),xo[g].push({name:a,func:f})}}),xo[Au(n,b).name]=[{name:"wrapper",func:n}],He.prototype.clone=_N,He.prototype.reverse=bN,He.prototype.value=SN,E.prototype.at=JC,E.prototype.chain=ZC,E.prototype.commit=ej,E.prototype.next=tj,E.prototype.plant=rj,E.prototype.reverse=ij,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=sj,E.prototype.first=E.prototype.head,ka&&(E.prototype[ka]=nj),E},go=eN();bs?((bs.exports=go)._=go,bf._=go):qt._=go}).call(Yt)})(bd,bd.exports);var YF=bd.exports;async function Sd(e){return ut(async()=>{const{data:t,error:n}=await oe.from("songs").select("*").eq("group_id",e).order("title");return{data:t,error:n}},"Error al cargar las canciones")}async function KF(e){const t={...e,type:e.type||"song"};return ut(async()=>{const{data:n,error:r}=await oe.from("songs").insert(t).select().single();return{data:n,error:r}},"Error al crear la cancin")}async function QF(e,t,n){const{data:{user:r}}=await oe.auth.getUser();if(!r)return q.error("No se pudo obtener la informacin del usuario"),null;const i={group_id:e,title:t,type:"medley",medley_song_ids:n,created_by:r.id};return ut(async()=>{const{data:o,error:l}=await oe.from("songs").insert(i).select().single();return{data:o,error:l}},"Error al crear el medley")}async function t1(e,t){return ut(async()=>{const{data:n,error:r}=await oe.from("songs").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar la cancin")}async function XF(e){try{const{error:t}=await oe.from("songs").delete().eq("id",e);return t?(console.error("Error al eliminar la cancin:",t),q.error("Error al eliminar la cancin"),!1):!0}catch(t){return console.error("Error al eliminar la cancin:",t),q.error("Error al eliminar la cancin"),!1}}async function $m(e){return ut(async()=>{const{data:t,error:n}=await oe.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("group_id",e).order("name");return{data:t,error:n}},"Error al cargar los setlists")}async function n1(e){return ut(async()=>{const{data:t,error:n}=await oe.from("setlists").select(`
          *,
          songs:setlist_songs(
            *,
            song:songs(*)
          )
        `).eq("id",e).single();return{data:t,error:n}},"Error al cargar el setlist")}async function _E(e){return ut(async()=>{const{data:t,error:n}=await oe.from("setlists").insert(e).select().single();return{data:t,error:n}},"Error al crear el setlist")}async function JF(e,t){return ut(async()=>{const{data:n,error:r}=await oe.from("setlists").update(t).eq("id",e).select().single();return{data:n,error:r}},"Error al actualizar el setlist")}async function ZF(e){try{const{error:t}=await oe.from("setlists").delete().eq("id",e);return t?(console.error("Error al eliminar el setlist:",t),q.error("Error al eliminar el setlist"),!1):!0}catch(t){return console.error("Error al eliminar el setlist:",t),q.error("Error al eliminar el setlist"),!1}}async function Am(e,t,n){try{console.log("Iniciando addSongToSetlist con:",{setlistId:e,songId:t,position:n});const{data:{user:r}}=await oe.auth.getUser();if(!r)return console.error("No se pudo obtener la informacin del usuario"),q.error("No se pudo obtener la informacin del usuario"),null;console.log("Usuario autenticado:",r.id);const i={setlist_id:e,song_id:t,position:n,created_by:r.id};console.log("Datos a insertar:",i);const{data:o,error:l}=await oe.from("setlist_songs").insert(i).select().single();return l?(console.error("Error de Supabase al aadir la cancin al setlist:",l),console.error("Cdigo de error:",l.code),console.error("Mensaje de error:",l.message),console.error("Detalles:",l.details),q.error(`Error al aadir la cancin al setlist: ${l.message}`),null):(console.log("Cancin aadida exitosamente:",o),o)}catch(r){return console.error("Error general al aadir la cancin al setlist:",r),q.error("Error al aadir la cancin al setlist"),null}}async function e8(e,t){try{const{error:n,count:r}=await oe.from("setlist_songs").delete().eq("setlist_id",e).eq("song_id",t);return console.log("Resultado de Supabase al eliminar:",{error:n,count:r}),n?(console.error("Error al eliminar la cancin del setlist:",n),q.error("Error al eliminar la cancin del setlist"),!1):!0}catch(n){return console.error("Error al eliminar la cancin del setlist:",n),q.error("Error al eliminar la cancin del setlist"),!1}}async function t8(e,t){try{const{error:n}=await oe.rpc("reorder_setlist_songs",{p_setlist_id:e,p_song_positions:t});return n?(console.error("Error al reordenar las canciones del setlist:",n),q.error("Error al reordenar las canciones del setlist"),!1):!0}catch(n){return console.error("Error al reordenar las canciones del setlist:",n),q.error("Error al reordenar las canciones del setlist"),!1}}async function r1(e,t){return await ut(async()=>{const{data:r,error:i}=await oe.from("events").update({setlist_id:t}).eq("id",e);return{data:r,error:i}},"Error al asignar el setlist al evento")!==null}async function n8(e,t){return ut(async()=>{const{data:n,error:r}=await oe.from("songs").update(t).eq("id",e).eq("type","medley").select().single();return{data:n,error:r}},"Error al actualizar el medley")}async function r8(e,t){try{const{data:n,error:r}=await oe.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),q.error("Error al obtener el medley"),null;const o=[...n.medley_song_ids||[],t],{data:l,error:u}=await oe.from("songs").update({medley_song_ids:o}).eq("id",e).select().single();return u?(console.error("Error al aadir la cancin al medley:",u),q.error("Error al aadir la cancin al medley"),null):l}catch(n){return console.error("Error al aadir la cancin al medley:",n),q.error("Error al aadir la cancin al medley"),null}}async function i8(e,t){try{const{data:n,error:r}=await oe.from("songs").select("medley_song_ids").eq("id",e).eq("type","medley").single();if(r)return console.error("Error al obtener el medley:",r),q.error("Error al obtener el medley"),!1;const o=(n.medley_song_ids||[]).filter(u=>u!==t),{error:l}=await oe.from("songs").update({medley_song_ids:o}).eq("id",e);return l?(console.error("Error al eliminar la cancin del medley:",l),q.error("Error al eliminar la cancin del medley"),!1):!0}catch(n){return console.error("Error al eliminar la cancin del medley:",n),q.error("Error al eliminar la cancin del medley"),!1}}async function s8(e){try{const{error:t}=await oe.from("songs").delete().eq("id",e).eq("type","medley");return t?(console.error("Error al eliminar el medley:",t),q.error("Error al eliminar el medley"),!1):!0}catch(t){return console.error("Error al eliminar el medley:",t),q.error("Error al eliminar el medley"),!1}}async function o8(e,t){try{const n=await n1(e);if(!n)return q.error("No se pudo encontrar el setlist original"),null;const{data:{user:r}}=await oe.auth.getUser();if(!r)return q.error("No se pudo obtener la informacin del usuario"),null;const i={name:t||`${n.name} (copia)`,description:n.description,group_id:n.group_id,estimated_duration_minutes:n.estimated_duration_minutes,created_by:r.id},o=await _E(i);if(!o)return q.error("Error al crear el nuevo setlist"),null;if(n.songs&&n.songs.length>0){const l=n.songs.map(u=>Am(o.id,u.song_id,u.position));await Promise.all(l)}return await n1(o.id)}catch(n){return console.error("Error al duplicar el setlist:",n),q.error("Error al duplicar el setlist"),null}}let Ms=null;function i1({isOpen:e,onClose:t,groupId:n,selectedDate:r,event:i,onEventSaved:o,availableDates:l,members:u}){var V;const[c,h]=v.useState(""),[p,m]=v.useState(""),[y,x]=v.useState(""),[S,C]=v.useState(""),[j,b]=v.useState(!1),[_,N]=v.useState([]),[P,M]=v.useState(!1),{user:U}=Vn(),[L,z]=v.useState(""),[le,te]=v.useState([]),[H,Ee]=v.useState(null),[re,me]=v.useState(!1),[be,Me]=v.useState([]),[$,T]=v.useState([]),[F,ne]=v.useState("");v.useEffect(()=>{if(i)h(i.name),m(i.date),x(i.time),C(i.notes||""),z(i.location||""),ne(i.setlist_id||""),i.location&&Ee({display_name:i.location,lat:"",lon:"",type:"",class:""}),se();else if(r){const W=Ye(r,"yyyy-MM-dd");m(W),x("20:00"),ne(""),_e(W)}},[i,r]),v.useEffect(()=>{e&&(async()=>{const[K,fe]=await Promise.all([oe.from("events").select("*").eq("group_id",n),$m(n)]);Me(K.data||[]),T(fe||[])})()},[e,n]);const se=async()=>{if(i)try{const W=await ut(()=>oe.from("event_members").select("group_member_id, user_id").eq("event_id",i.id),"Error loading event members"),K=await ut(()=>oe.from("member_availability").select("user_id").eq("date",i.date),"Error loading member availability"),fe=await ut(()=>oe.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",i.date),"Error loading external events");if(W){const ee=new Set((K==null?void 0:K.map(G=>G.user_id))||[]),R=new Set;fe==null||fe.forEach(G=>{var de;(de=G.event_members)==null||de.forEach(ve=>{R.add(ve.user_id)})});const ae=new Set(W.map(G=>G.group_member_id)),ce=u.map(G=>({memberId:G.id,userId:G.user_id,selected:ae.has(G.id),isAvailable:ae.has(G.id)||(G.user_id?ee.has(G.user_id)&&!R.has(G.user_id):!0),sync_calendar:G.sync_calendar}));N(ce)}}catch(W){console.error("Error loading event members:",W)}},_e=async(W,K)=>{try{const fe=await ut(()=>oe.from("events").select(`
            date,
            event_members (
              user_id
            )
          `).neq("group_id",n).eq("date",W),"Error loading external events"),ee=new Set;fe==null||fe.forEach(G=>{var de;(de=G.event_members)==null||de.forEach(ve=>{ee.add(ve.user_id)})});const R=await ut(()=>oe.from("member_availability").select("user_id").eq("date",W),"Error loading member availability"),ae=new Set((R==null?void 0:R.map(G=>G.user_id))||[]),ce=u.map(G=>{const de=G.user_id?ae.has(G.user_id)&&!ee.has(G.user_id):!0;return{memberId:G.id,userId:G.user_id,selected:K?K.includes(G.id):G.role_in_group==="principal"&&de,isAvailable:de,sync_calendar:G.sync_calendar}});N(ce)}catch(fe){console.error("Error loading available members:",fe)}};v.useEffect(()=>{ge()},[_]);const ge=()=>{const W=u.filter(ee=>ee.role_in_group==="principal"),K=_.filter(ee=>ee.selected).map(ee=>ee.memberId),fe=new Set;return W.forEach(ee=>{K.includes(ee.id)||ee.instruments.forEach(R=>{_.filter(ce=>ce.selected).some(ce=>{const G=u.find(de=>de.id===ce.memberId);return G==null?void 0:G.instruments.some(de=>de.id===R.id)})||fe.add(R.name)})}),M(fe.size>0),fe},$e=(W,K)=>{N(fe=>fe.map(ee=>ee.memberId===W?{...ee,selected:K}:ee))},je=async W=>{if(!W.trim()){te([]);return}Ms&&Ms.abort(),Ms=new AbortController,me(!0);try{const ee=(await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(W)}&countrycodes=es&bounded=1&viewbox=-9.38,43.45,3.35,36.00&limit=5`,{signal:Ms.signal})).json()).sort((R,ae)=>{const ce=R.display_name.toLowerCase().includes("madrid")||R.display_name.toLowerCase().includes("espaa"),G=ae.display_name.toLowerCase().includes("madrid")||ae.display_name.toLowerCase().includes("espaa");return ce&&!G?-1:!ce&&G?1:0});te(ee)}catch(K){K.name!=="AbortError"&&(console.error("Error searching locations:",K),q.error("Error al buscar ubicaciones"))}finally{me(!1),Ms=null}};v.useEffect(()=>()=>{Ms&&Ms.abort()},[]);const Oe=xe.useCallback(YF.debounce(W=>{je(W)},300),[]),Q=W=>{const K=W.target.value;if(z(K),te([]),!K.trim()){te([]);return}Oe(K)},pe=async()=>{try{if(!c||!p){q.error("Por favor completa los campos requeridos");return}b(!0);const W={group_id:n,name:c.trim(),date:p,time:y,datetime:(()=>{const fe=new Date(`${p}T${y}`),ee=-fe.getTimezoneOffset(),R=new Date(fe.getTime()-ee*60*1e3).toISOString().replace("Z",a8(ee));return console.log("Zona horaria local:",Intl.DateTimeFormat().resolvedOptions().timeZone),console.log("Fecha local:",fe.toString()),console.log("Fecha con offset local:",R),R})(),notes:S.trim()||null,created_by:U.id,location:H?H.display_name:L};let K;if(i){const{data:fe,error:ee}=await oe.from("events").update(W).eq("id",i.id).select().single();if(ee)throw ee;K=i.id}else{const{data:fe,error:ee}=await oe.from("events").insert([W]).select().single();if(ee)throw ee;K=fe.id}if(K){i&&await oe.from("event_members").delete().eq("event_id",K);const fe=_.filter(ee=>ee.selected).map(ee=>({event_id:K,group_member_id:ee.memberId,user_id:ee.userId,created_by:U.id}));if(fe.length>0){const{error:ee}=await oe.from("event_members").insert(fe);if(ee)throw ee}console.log("Actualizando calendarios para miembros:",_),await Promise.all(_.filter(ee=>ee.selected&&ee.sync_calendar).map(ee=>(console.log("Actualizando calendario para miembro:",ee),wE(n,ee.memberId)))),F?await r1(K,F):i!=null&&i.setlist_id&&await r1(K,null)}b(!1),o&&o(),t(),q.success(i?"Evento actualizado":"Evento creado")}catch(W){b(!1),console.error("Error saving event:",W),q.error("Error al guardar el evento")}},Z=W=>{const K=new Set(l.map(ee=>Ye(ee,"yyyy-MM-dd"))),fe=new Set(be.map(ee=>Ye(new Date(ee.date),"yyyy-MM-dd")));return W.filter(ee=>{const R=Ye(ee,"yyyy-MM-dd");return K.has(R)&&!fe.has(R)}).sort((ee,R)=>ee.getTime()-R.getTime())};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white flex justify-between items-center p-4 border-b z-10",children:[d.jsx("h2",{className:"text-xl font-semibold",children:i?"Edit Event":"Create Event"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(hi,{className:"w-5 h-5"})})]}),d.jsxs("form",{onSubmit:pe,className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx(mt,{label:"Event Name",value:c,onChange:W=>h(W.target.value),required:!0,placeholder:"Enter event name"}),d.jsx(mt,{label:"Time",type:"time",value:y,onChange:W=>x(W.target.value),required:!0})]}),!i&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),d.jsxs("select",{value:p,onChange:W=>{m(W.target.value),_e(W.target.value)},className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",disabled:!0,children:"Select a date"}),Z(l).map((W,K)=>{const fe=Ye(W,"yyyy-MM-dd");return d.jsx("option",{value:fe,children:Ye(W,"EEEE, d MMMM yyyy",{locale:Bo})},K)})]})]}),i&&d.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:d.jsxs("span",{className:"text-sm text-gray-600",children:["Event date: ",Ye(new Date(i.date),"EEEE, d MMMM yyyy",{locale:Bo})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setlist (opcional)"}),d.jsxs("select",{value:F,onChange:W=>ne(W.target.value),className:"w-full border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 p-2",children:[d.jsx("option",{value:"",children:"Sin setlist"}),$.map(W=>{var K;return d.jsxs("option",{value:W.id,children:[W.name," (",((K=W.songs)==null?void 0:K.length)||0," canciones)"]},W.id)})]}),F&&d.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800",children:["Setlist seleccionado: ",(V=$.find(W=>W.id===F))==null?void 0:V.name]})})]}),p&&d.jsx(VF,{members:u,selectedMembers:_,onMemberSelectionChange:$e,validationError:P}),d.jsxs("div",{className:"relative space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ubicacin"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Ic,{className:"h-5 w-5 text-gray-400"})}),d.jsx(mt,{value:L,onChange:Q,className:"pl-10 pr-10",placeholder:"Buscar ubicacin..."}),L&&d.jsx("button",{type:"button",onClick:()=>{z(""),Ee(null),te([])},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:d.jsx(hi,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),re&&d.jsx("div",{className:"flex items-center justify-center p-4",children:d.jsx(ua,{className:"h-6 w-6 animate-spin text-primary"})}),le.length>0&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:le.map((W,K)=>d.jsxs("button",{type:"button",className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none transition-colors duration-150 flex items-start gap-3 border-b border-gray-100 last:border-0",onClick:()=>{Ee(W),z(W.display_name),te([])},children:[d.jsx(Ic,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:W.display_name.split(",")[0]}),d.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:W.display_name.split(",").slice(1).join(",").trim()})]})]},K))}),H&&d.jsx("div",{className:"mt-3 p-4 bg-primary/5 rounded-lg border border-primary/10",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ic,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"block text-sm font-medium text-gray-900",children:typeof H.display_name=="string"&&H.display_name.includes(",")?H.display_name.split(",")[0]:H.display_name}),d.jsx("span",{className:"block text-sm text-gray-500 mt-1",children:typeof H.display_name=="string"&&H.display_name.includes(",")?H.display_name.split(",").slice(1).join(",").trim():""})]}),d.jsx("button",{type:"button",onClick:()=>{Ee(null),z("")},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:d.jsx(hi,{className:"h-5 w-5"})})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:S,onChange:W=>C(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",rows:2,placeholder:"Add additional notes..."})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx(Ne,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),d.jsx(Ne,{onClick:pe,disabled:j,className:"w-full",children:j?d.jsxs(d.Fragment,{children:[d.jsx(ua,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})]})}):null}function a8(e){const t=e>0?"+":"-",n=Math.floor(Math.abs(e)/60);return`${t}${n.toString().padStart(2,"0")}`}const l8=({isOpen:e,onClose:t,setlist:n,eventName:r,eventDate:i,bandName:o})=>{const[l,u]=v.useState(!0),c=()=>{const h=window.open("","_blank","width=800,height=600");if(!h){alert("Por favor permite las ventanas emergentes para imprimir");return}const p=n!=null&&n.songs?n.songs.map(b=>{var _;return{...b,type:((_=b.song)==null?void 0:_.type)==="medley"?"medley":"song"}}).sort((b,_)=>b.position-_.position):[],m=p.length,y=Math.ceil(m/2),x=p.slice(0,y),S=p.slice(y),C=(b,_=0)=>b.map((N,P)=>{var te,H,Ee;const M=N.type==="medley",U=(te=N.song)==null?void 0:te.title,L=(H=N.song)==null?void 0:H.artist,z=(Ee=N.song)==null?void 0:Ee.key,le=_+P+1;return`
          <div class="song-item ${M?"medley":""}">
            <div class="song-number">${le}</div>
            <div class="song-content">
              <div class="song-title">${U||"N/A"}</div>
              ${L?`<div class="song-artist">${L}</div>`:""}
              ${M?'<div class="medley-indicator">Medley</div>':""}
            </div>
            ${z?`<div class="song-key">${z}</div>`:""}
          </div>
        `}).join(""),j=`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="UTF-8">
          <title>Setlist - ${(n==null?void 0:n.name)||"Sin nombre"}</title>
          <style>
            @page {
              size: A4;
              margin: 0.4in;
            }
            
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            
            body {
              font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
              font-size: 13px;
              line-height: 1.4;
              color: #2c3e50;
              background: white;
              width: 100%;
              height: 100%;
            }
            
            .container {
              width: 100%;
              height: 100%;
              display: flex;
              flex-direction: column;
            }
            
            .header {
              text-align: center;
              margin-bottom: 35px;
              padding-bottom: 25px;
              border-bottom: 2px solid #34495e;
              position: relative;
            }
            
            .header::after {
              content: '';
              position: absolute;
              bottom: -2px;
              left: 50%;
              transform: translateX(-50%);
              width: 60px;
              height: 2px;
              background: #3498db;
            }
            
            .band-name {
              font-size: 32px;
              font-weight: 600;
              color: #2c3e50;
              margin-bottom: 8px;
              letter-spacing: 0.5px;
            }
            
            .event-details {
              font-size: 14px;
              color: #7f8c8d;
              font-weight: 400;
            }
            
            .content {
              flex: 1;
              display: flex;
              gap: 50px;
              width: 100%;
            }
            
            .column {
              flex: 1;
              width: 50%;
            }
            
            .song-item {
              display: flex;
              align-items: center;
              padding: 10px 15px;
              margin-bottom: 2px;
              border-radius: 4px;
              break-inside: avoid;
              page-break-inside: avoid;
              transition: background-color 0.2s;
            }
            
            .song-item:hover {
              background-color: #f8f9fa;
            }
            
            .song-item.medley {
              background-color: #e8f5e8;
              border-left: 3px solid #27ae60;
            }
            
            .song-number {
              font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono", monospace;
              font-size: 14px;
              font-weight: 600;
              color: #fff;
              background: #34495e;
              width: 28px;
              height: 28px;
              border-radius: 14px;
              display: flex;
              align-items: center;
              justify-content: center;
              margin-right: 15px;
              flex-shrink: 0;
            }
            
            .song-content {
              flex: 1;
              display: flex;
              flex-direction: column;
            }
            
            .song-title {
              font-size: 15px;
              color: #2c3e50;
              font-weight: 500;
              line-height: 1.3;
              margin-bottom: 2px;
            }
            
            .song-artist {
              font-size: 12px;
              color: #7f8c8d;
              font-style: italic;
            }
            
            .medley-indicator {
              font-size: 10px;
              color: #27ae60;
              font-weight: 600;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }
            
            .song-key {
              font-size: 11px;
              color: #3498db;
              font-weight: 600;
              background: #ecf0f1;
              padding: 4px 8px;
              border-radius: 12px;
              margin-left: 10px;
              flex-shrink: 0;
            }
            
            .footer {
              margin-top: 30px;
              padding-top: 20px;
              border-top: 1px solid #bdc3c7;
              text-align: center;
              font-size: 12px;
              color: #7f8c8d;
              display: flex;
              justify-content: center;
              align-items: center;
              gap: 20px;
            }
            
            .stat {
              display: flex;
              align-items: center;
              gap: 5px;
            }
            
            .stat-icon {
              width: 4px;
              height: 4px;
              background: #3498db;
              border-radius: 50%;
            }
            
            @media print {
              body {
                font-size: 13px;
              }
              
              .song-item {
                padding: 10px 0;
              }
              
              .number {
                font-size: 12px;
              }
              
              .title {
                font-size: 13px;
              }
            }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h1 class="band-name">${o||"Banda"}</h1>
              <p class="event-details">
                ${r&&i?`${r}  ${new Date(i).toLocaleDateString()}`:(n==null?void 0:n.description)||""}
              </p>
            </div>
            
            <div class="content">
              <div class="column">
                ${C(x,0)}
              </div>
              <div class="column">
                ${C(S,x.length)}
              </div>
            </div>
            
            <div class="footer">
              <div class="stat">
                <div class="stat-icon"></div>
                <span>${m} ${m===1?"cancin":"canciones"}</span>
              </div>
              ${p.filter(b=>b.type==="medley").length>0?`
              <div class="stat">
                <div class="stat-icon" style="background: #27ae60;"></div>
                <span>${p.filter(b=>b.type==="medley").length} medleys</span>
              </div>`:""}
            </div>
          </div>
          
          <script>
            window.onload = function() {
              // Wait a bit longer for CSS to fully load and render
              setTimeout(function() {
                window.print();
              }, 1000);
            };
            
            // Close window after printing or if user cancels
            window.onafterprint = function() {
              window.close();
            };
            
            // Fallback close after 30 seconds
            setTimeout(function() {
              window.close();
            }, 30000);
          <\/script>
        </body>
      </html>
    `;h.document.write(j),h.document.close()};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"} print:hidden`,onClick:t,children:d.jsx("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col font-sans relative transform transition-all duration-300 ${e?"scale-100 opacity-100":"scale-95 opacity-0"}`,onClick:h=>h.stopPropagation(),children:n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg",children:d.jsx(us,{className:"w-6 h-6 text-indigo-600"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 truncate",children:n.name})]}),d.jsxs("div",{className:"flex items-center gap-4 print:hidden",children:[d.jsx("button",{onClick:c,className:"p-2 text-gray-500 hover:text-indigo-600 transition-colors",title:"Imprimir Setlist",children:d.jsx(gA,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("label",{htmlFor:"showArtists",className:"text-sm font-medium text-gray-600",children:"Artistas"}),d.jsx("button",{onClick:()=>u(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l?"bg-indigo-600":"bg-gray-200"}`,children:d.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(hi,{className:"w-6 h-6"})})]})]}),d.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[n.description&&d.jsx("p",{className:"text-sm text-gray-600 italic mb-6 bg-gray-50 p-3 rounded-md border border-gray-200",children:n.description}),(()=>{const h=v.useMemo(()=>n!=null&&n.songs?n.songs.map(x=>{var S;return{...x,type:((S=x.song)==null?void 0:S.type)==="medley"?"medley":"song"}}).sort((x,S)=>x.position-S.position):[],[n==null?void 0:n.songs]),p=h.length,m=p>10,y=m?Math.ceil(p/2):p;return p===0?d.jsx("div",{className:"text-center py-10",children:d.jsx("p",{className:"text-gray-500",children:"Este setlist est vaco."})}):d.jsx("div",{className:"grid gap-x-8",style:{gridTemplateRows:`repeat(${y}, auto)`,gridAutoFlow:"column",gridTemplateColumns:m?"1fr 1fr":"1fr"},children:h.map((x,S)=>{var C,j,b,_,N,P,M;return x.type==="medley"?d.jsx("div",{className:"bg-slate-50 rounded-lg p-2 my-1 transition-all duration-300",children:d.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right pt-1 self-start",children:[S+1,"."]}),d.jsxs("div",{className:"flex-grow",children:[d.jsx("p",{className:"text-indigo-600 font-bold",children:(C=x.song)==null?void 0:C.title}),d.jsxs("p",{className:"text-xs text-gray-400",children:["Medley (",((b=(j=x.song)==null?void 0:j.medley_song_ids)==null?void 0:b.length)||0," canciones)"]})]})]})},`medley-${x.id}`):d.jsxs("div",{className:"flex items-baseline space-x-3 text-sm group py-1 min-h-[3.25rem]",children:[d.jsxs("span",{className:"text-gray-400 font-mono w-5 text-right",children:[S+1,"."]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-800 font-medium group-hover:text-indigo-600 transition-colors",children:((_=x.song)==null?void 0:_.title)||"N/A"}),d.jsx("p",{className:`text-gray-500 text-xs transition-all duration-300 ease-in-out ${l&&((N=x.song)!=null&&N.artist)?"opacity-100 h-4":"opacity-0 h-0"}`,children:(P=x.song)==null?void 0:P.artist})]})]},`song-${((M=x.song)==null?void 0:M.id)||S}`)})})})()]})]})})})})};function u8({groupId:e,canManageEvents:t,availableDates:n,members:r}){const[i,o]=v.useState([]),[l,u]=v.useState(!0),[c,h]=v.useState(null),[p,m]=v.useState(!1),[y,x]=v.useState(!1),[S,C]=v.useState("upcoming"),[j,b]=v.useState(null),[_,N]=v.useState(null),[P,M]=v.useState("");v.useEffect(()=>{U()},[e]);const U=async()=>{try{u(!0);const{data:$,error:T}=await oe.from("events").select(`
          *,
          setlist:setlists (
            id,
            name,
            songs:setlist_songs(
              id,
              song:songs(type)
            )
          )
        `).eq("group_id",e).order("date").order("time");if(T)throw T;if($){const F=await Promise.all($.map(async ne=>{const{data:se,error:_e}=await oe.from("event_members").select("group_member_id, user_id").eq("event_id",ne.id);if(_e)return console.error("Error loading event members:",_e),{...ne,members:[]};const ge=(se==null?void 0:se.map($e=>{const je=r.find(Oe=>Oe.id===$e.group_member_id);return{group_member_id:$e.group_member_id,user_id:$e.user_id,member_name:(je==null?void 0:je.name)||"Unknown Member",role_in_group:(je==null?void 0:je.role_in_group)||"principal"}}))||[];return{...ne,members:ge}}));o(F)}}catch($){console.error("Error fetching events:",$),q.error("Error loading events")}finally{u(!1)}},L=async $=>{if(window.confirm("Ests seguro de que quieres eliminar este evento?"))try{const{data:T,error:F}=await oe.from("event_members").select(`
          group_member_id,
          user_id,
          group_members!event_members_group_member_id_fkey(sync_calendar)
        `).eq("event_id",$);if(F)throw F;const{error:ne}=await oe.from("events").delete().eq("id",$);if(ne)throw ne;T&&T.length>0&&(console.log("Actualizando calendarios despus de eliminar evento"),await Promise.all(T.filter(se=>se.group_members.sync_calendar).map(async se=>{try{await wE(e,se.group_member_id),console.log("Calendario actualizado para miembro:",se.group_member_id)}catch(_e){console.error("Error actualizando calendario para miembro:",se.group_member_id,_e)}}))),q.success("Evento eliminado correctamente"),U()}catch(T){console.error("Error deleting event:",T),q.error("Error al eliminar el evento")}},z=$=>{h($),x(!0)},le=async $=>{try{const{data:F,error:ne}=await oe.from("groups").select("name").eq("id",$.group_id).single();if(ne)throw ne;M((F==null?void 0:F.name)||"")}catch{M("")}const T=$.setlist;if(!T){console.warn("Se intent abrir un preview con un setlist undefined");return}if(N({name:$.name,date:$.date}),!T){console.warn("Se intent abrir un preview con un setlist undefined");return}try{const{data:F,error:ne}=await oe.from("setlists").select(`
          *,
          songs: setlist_songs(*, song: songs(*))
        `).eq("id",T.id).single();if(ne)throw ne;F&&b(F)}catch(F){console.error("Error al cargar el setlist completo:",F),q.error("Error al cargar el setlist")}};if(l)return d.jsx("div",{className:"text-center py-4",children:"Cargando eventos..."});const te=$=>{const T=$.reduce((F,ne)=>{const se=Ye(Os(ne.date),"MMMM yyyy");return F[se]||(F[se]=[]),F[se].push(ne),F},{});return Object.entries(T)},H=$=>{if(!$)return"";if(console.log("Location raw:",$),typeof $=="object"&&$!==null)return $.name||String($);if(typeof $!="string")return String($);if($.startsWith("{")||$.startsWith("["))try{const T=JSON.parse($);return T.name||T.formatted_address||T.description||String(T)}catch(T){return console.log("Location parse error:",T),$}return $},Ee=$=>{if(!$)return;const T=H($);window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(T)}`,"_blank")},re=$=>{const T=$.members.filter(ne=>ne.role_in_group==="principal"),F=$.members.filter(ne=>ne.role_in_group==="sustituto");return d.jsxs("div",{className:"mt-1.5 space-y-1",children:[d.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(ne=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700",children:ne.member_name},ne.group_member_id))}),F.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Sustitutos:"}),F.map(ne=>d.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-yellow-50 text-yellow-700",children:ne.member_name},ne.group_member_id))]}),$.location&&d.jsx("div",{className:"flex items-center gap-1 mt-1",children:d.jsxs("button",{onClick:()=>Ee($.location),className:"inline-flex items-center text-xs text-gray-600 hover:text-indigo-600",children:[d.jsx(Ic,{className:"w-3 h-3 mr-1"}),d.jsx("span",{className:"underline",children:me(H($.location))})]})})]})},me=($,T=40)=>{if(!$)return"";if($.includes(",")){const F=$.split(",")[0];return F.length<=T?F:`${F.slice(0,T)}...`}return $.length>T?`${$.slice(0,T)}...`:$},be=i.filter($=>Kw(ds(Os($.date)))),Me=i.filter($=>!Kw(ds(Os($.date))));return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Eventos"}),t&&d.jsx(Ne,{onClick:()=>m(!0),children:"Aadir Evento"})]}),i.length===0?d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(md,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),d.jsx("p",{children:"No hay eventos programados"})]}):d.jsxs("div",{className:"mt-4",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsxs("button",{onClick:()=>C("upcoming"),className:`${S==="upcoming"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{children:"Prximos eventos"}),be.length>0&&d.jsx("span",{className:`${S==="upcoming"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:be.length})]}),d.jsxs("button",{onClick:()=>C("past"),className:`${S==="past"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx("span",{children:"Eventos pasados"}),Me.length>0&&d.jsx("span",{className:`${S==="past"?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900"} py-0.5 px-2.5 rounded-full text-xs font-medium`,children:Me.length})]})]})}),d.jsx("div",{className:"mt-4 space-y-6",children:te(S==="upcoming"?be:Me).map(([$,T])=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:$}),d.jsx("div",{className:"space-y-1",children:T.map(F=>d.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:border-gray-200 transition-colors",children:d.jsx("div",{className:"p-3",children:d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[d.jsx("div",{className:"text-lg font-bold text-gray-900",children:Ye(Os(F.date),"d")}),d.jsx("div",{className:"text-xs text-gray-500 uppercase",children:Ye(Os(F.date),"EEE")})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:F.name}),d.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-0.5",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(cA,{className:"w-3 h-3 mr-1"}),Ye(Os(`2000-01-01T${F.time}`),"h:mm a")]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(gd,{className:"w-3 h-3 mr-1"}),F.members.length]}),F.setlist?d.jsxs("div",{className:"flex items-center",children:[d.jsx(us,{className:"w-3 h-3 mr-1 text-blue-500"}),d.jsx("span",{className:"text-indigo-600 font-medium cursor-pointer hover:underline",onClick:()=>F.setlist&&le(F),children:F.setlist.name}),d.jsx("span",{className:"text-gray-400 ml-1",children:(()=>{var _e,ge;const ne=((_e=F.setlist.songs)==null?void 0:_e.filter($e=>{var je,Oe;return((je=$e.song)==null?void 0:je.type)==="song"||!((Oe=$e.song)!=null&&Oe.type)}))||[],se=((ge=F.setlist.songs)==null?void 0:ge.filter($e=>{var je;return((je=$e.song)==null?void 0:je.type)==="medley"}))||[];return`(${ne.length} canciones${se.length>0?`, ${se.length} medleys`:""})`})()})]}):d.jsxs("div",{className:"flex items-center",children:[d.jsx(us,{className:"w-3 h-3 mr-1 text-gray-300"}),d.jsx("span",{className:"text-gray-400 italic",children:"Sin setlist"})]})]})]})]}),re(F),F.notes&&d.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-1",children:F.notes})]}),t&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>z(F),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar evento",children:d.jsx(kS,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>L(F.id),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar evento",children:d.jsx(Vg,{className:"w-4 h-4"})})]})]})})},F.id))})]},$))})]})]})}),d.jsx(i1,{isOpen:p,onClose:()=>m(!1),groupId:e,onEventSaved:()=>{U(),m(!1)},availableDates:n,members:r}),c&&d.jsx(i1,{isOpen:y,onClose:()=>{x(!1),h(null)},groupId:e,event:c,onEventSaved:()=>{U(),x(!1),h(null)},availableDates:[...n,Os(c.date)],members:r}),j&&d.jsx(l8,{isOpen:!!j,onClose:()=>{b(null),N(null),M("")},setlist:j,eventName:_==null?void 0:_.name,eventDate:_==null?void 0:_.date,bandName:P})]})}function c8({isOpen:e,onClose:t,onConfirm:n,title:r,message:i}){return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsx("h2",{className:"text-xl font-semibold text-red-600",children:r}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:d.jsx(hi,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("p",{className:"text-gray-700 mb-6",children:i}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx(Ne,{variant:"secondary",onClick:t,children:"Cancelar"}),d.jsx(Ne,{onClick:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:"Eliminar"})]})]})]})}):null}function d8({isOpen:e,onClose:t,calendarUrl:n}){const r=async()=>{await navigator.clipboard.writeText(n),q.success("URL copiada al portapapeles")};return d.jsxs(Ks,{open:e,onClose:t,className:"relative z-50",children:[d.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:d.jsxs(Ks.Panel,{className:"mx-auto max-w-md rounded-lg bg-white p-6",children:[d.jsxs(Ks.Title,{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[d.jsx(md,{className:"w-5 h-5"}),"Suscribirse al Calendario"]}),d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Google Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Google Calendar"}),d.jsx("li",{children:'En el panel izquierdo, junto a "Otros calendarios", haz clic en el "+"'}),d.jsx("li",{children:'Selecciona "Desde URL"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Aadir calendario"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Apple Calendar"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre la aplicacin Calendario"}),d.jsx("li",{children:"Ve a Archivo  Nueva suscripcin a calendario"}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Suscribirse"'})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:"Outlook"}),d.jsxs("ol",{className:"mt-2 list-decimal list-inside text-sm text-gray-600",children:[d.jsx("li",{children:"Abre Outlook Calendar"}),d.jsx("li",{children:'Ve a "Aadir calendario"  "Desde Internet"'}),d.jsx("li",{children:'Pega la URL del calendario y haz clic en "Importar"'})]})]}),d.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:[d.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"URL del calendario:"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:n,readOnly:!0,className:"flex-1 text-sm bg-white border border-gray-300 rounded-md px-3 py-2"}),d.jsxs(Ne,{onClick:r,variant:"secondary",className:"flex items-center gap-1",children:[d.jsx(dA,{className:"w-4 h-4"}),"Copiar"]})]})]})]}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx(Ne,{onClick:t,children:"Cerrar"})})]})})]})}const s1={title:"",artist:"",duration_minutes:"",key:"",notes:""},o1=["","C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"];function f8(e,t){const[n,r]=v.useState(e);return v.useEffect(()=>{const i=setTimeout(()=>r(e),t);return()=>clearTimeout(i)},[e,t]),n}function h8({groupId:e,canManageSongs:t=!0}){const[n,r]=v.useState([]),[i,o]=v.useState(!0),[l,u]=v.useState(!1),[c,h]=v.useState(null),[p,m]=v.useState(s1),[y,x]=v.useState(!1),[S,C]=v.useState(null),[j,b]=v.useState([]),[_,N]=v.useState(!1),[P,M]=v.useState(!1),U=v.useRef(null),[L,z]=v.useState(null),[le,te]=v.useState(""),[H,Ee]=v.useState(!1),[re,me]=v.useState(null),be=f8(p.title,400);v.useEffect(()=>{Me()},[e]),v.useEffect(()=>{if(console.log("Debounced title changed:",be),be.length<2){console.log("Title too short, clearing suggestions"),b([]),N(!1);return}console.log("Fetching suggestions for:",be),M(!0),fetch(`https://corsproxy.io/?https://api.deezer.com/search?q=${encodeURIComponent(be)}`).then(Q=>Q.json()).then(Q=>{console.log("Deezer API response:",Q),b(Q.data||[]),N(!0)}).catch(Q=>{console.error("Error fetching suggestions:",Q),b([])}).finally(()=>M(!1))},[be]),v.useEffect(()=>{function Q(pe){U.current&&!U.current.contains(pe.target)&&N(!1)}return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const Me=async()=>{o(!0);const Q=await Sd(e);Q&&r(Q),o(!1)},$=async Q=>{if(Q.preventDefault(),!p.title.trim()){q.error("El ttulo es obligatorio");return}const{data:{user:pe}}=await oe.auth.getUser();if(!pe){q.error("No se pudo obtener la informacin del usuario");return}const Z={group_id:e,title:p.title.trim(),artist:p.artist.trim()||void 0,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):void 0,key:p.key.trim()||void 0,notes:p.notes.trim()||void 0,created_by:pe.id};if(c){const V=await t1(c.id,Z);V&&(q.success("Cancin actualizada correctamente"),r(W=>W.map(K=>K.id===c.id?V:K)))}else{const V=await KF(Z);V&&(q.success("Cancin creada correctamente"),r(W=>[...W,V]))}se()},T=Q=>{var pe;h(Q),m({title:Q.title,artist:Q.artist||"",duration_minutes:((pe=Q.duration_minutes)==null?void 0:pe.toString())||"",key:Q.key||"",notes:Q.notes||""}),u(!0)},F=Q=>{C(Q),x(!0)},ne=async()=>{if(!S)return;console.log("Eliminando cancin:",S.id);const Q=await XF(S.id);console.log("Resultado de eliminacin:",Q),Q?(q.success("Cancin eliminada correctamente"),r(pe=>pe.filter(Z=>Z.id!==S.id))):q.error("No se pudo eliminar la cancin"),x(!1),C(null)},se=()=>{m(s1),h(null),u(!1)},_e=Q=>{if(!Q)return"-";const pe=Math.floor(Q/60),Z=Q%60;return pe>0?`${pe}h ${Z}m`:`${Z}m`},ge=Q=>{m({...p,title:Q.title,artist:Q.artist.name,duration_minutes:Math.round(Q.duration/60).toString()}),N(!1)},$e=(Q,pe,Z)=>{z({songId:Q,field:pe}),te(Z||""),me(null)},je=async(Q,pe)=>{if(le===(Q[pe]||"")){z(null);return}Ee(!0),me(null);const Z=await t1(Q.id,{[pe]:pe==="duration_minutes"?parseInt(le)||null:le||null});Ee(!1),Z?(r(V=>V.map(W=>W.id===Q.id?{...W,...Z}:W)),z(null)):me("Error al guardar")},Oe=(Q,pe,Z)=>{Q.key==="Enter"?(Q.preventDefault(),je(pe,Z)):Q.key==="Escape"&&z(null)};return i?d.jsx("div",{className:"text-center py-8",children:"Cargando canciones..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Pool de Canciones"}),t&&d.jsx(Ne,{onClick:()=>u(!l),variant:l?"secondary":"primary",children:l?"Cancelar":"Aadir Cancin"})]}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),l&&t&&d.jsxs("form",{onSubmit:$,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:c?"Editar Cancin":"Nueva Cancin"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(mt,{label:"Ttulo *",value:p.title,onChange:Q=>{m({...p,title:Q.target.value}),N(!0)},required:!0,autoComplete:"off"}),_&&j.length>0&&d.jsxs("div",{ref:U,className:"absolute z-10 left-0 right-0 bg-white border border-gray-200 rounded shadow-lg max-h-60 overflow-y-auto mt-1",children:[P&&d.jsx("div",{className:"p-2 text-gray-500 text-sm",children:"Buscando..."}),j.map(Q=>d.jsxs("div",{className:"p-2 hover:bg-blue-100 cursor-pointer flex flex-col",onClick:()=>ge(Q),children:[d.jsx("span",{className:"font-medium",children:Q.title}),d.jsxs("span",{className:"text-xs text-gray-500",children:[Q.artist.name,"  ",Math.round(Q.duration/60)," min"]})]},Q.id))]})]}),d.jsx(mt,{label:"Artista",value:p.artist,onChange:Q=>m({...p,artist:Q.target.value})}),d.jsx(mt,{label:"Duracin (minutos)",type:"number",value:p.duration_minutes,onChange:Q=>m({...p,duration_minutes:Q.target.value}),min:"1"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tonalidad"}),d.jsx("select",{className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p.key,onChange:Q=>m({...p,key:Q.target.value}),children:o1.map(Q=>d.jsx("option",{value:Q,children:Q||"Sin especificar"},Q))})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),d.jsx("textarea",{value:p.notes,onChange:Q=>m({...p,notes:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Notas adicionales sobre la cancin..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Ne,{type:"submit",variant:"primary",children:c?"Actualizar":"Crear"}),d.jsx(Ne,{type:"button",variant:"secondary",onClick:se,children:"Cancelar"})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay canciones en el pool. Aade la primera cancin para empezar."}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ttulo"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Artista"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duracin"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tonalidad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(Q=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:[(L==null?void 0:L.songId)===Q.id&&L.field==="title"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:le,autoFocus:!0,onChange:pe=>te(pe.target.value),onBlur:()=>je(Q,"title"),onKeyDown:pe=>Oe(pe,Q,"title"),disabled:H}):d.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:underline",onClick:()=>t&&$e(Q.id,"title",Q.title),title:"Haz clic para editar",children:Q.title}),(L==null?void 0:L.songId)===Q.id&&re&&d.jsx("div",{className:"text-xs text-red-500 mt-1",children:re})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(L==null?void 0:L.songId)===Q.id&&L.field==="artist"?d.jsx("input",{className:"w-full border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:le,autoFocus:!0,onChange:pe=>te(pe.target.value),onBlur:()=>je(Q,"artist"),onKeyDown:pe=>Oe(pe,Q,"artist"),disabled:H}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&$e(Q.id,"artist",Q.artist||""),title:"Haz clic para editar",children:Q.artist||d.jsx("span",{className:"text-gray-400",children:"Sin artista"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(L==null?void 0:L.songId)===Q.id&&L.field==="duration_minutes"?d.jsx("input",{className:"w-20 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"number",min:"1",value:le,autoFocus:!0,onChange:pe=>te(pe.target.value),onBlur:()=>je(Q,"duration_minutes"),onKeyDown:pe=>Oe(pe,Q,"duration_minutes"),disabled:H}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>{var pe;return t&&$e(Q.id,"duration_minutes",((pe=Q.duration_minutes)==null?void 0:pe.toString())||"")},title:"Haz clic para editar",children:_e(Q.duration_minutes)})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top text-sm text-gray-900",children:(L==null?void 0:L.songId)===Q.id&&L.field==="key"?d.jsx("select",{className:"w-28 border border-blue-400 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",value:le,autoFocus:!0,onChange:pe=>te(pe.target.value),onBlur:()=>je(Q,"key"),onKeyDown:pe=>Oe(pe,Q,"key"),disabled:H,children:o1.map(pe=>d.jsx("option",{value:pe,children:pe||"Sin especificar"},pe))}):d.jsx("div",{className:"cursor-pointer hover:underline",onClick:()=>t&&$e(Q.id,"key",Q.key||""),title:"Haz clic para editar",children:Q.key||d.jsx("span",{className:"text-gray-400",children:"Sin especificar"})})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>T(Q),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),d.jsx("button",{onClick:()=>F(Q),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},Q.id))})]})})}),y&&S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar la cancin "',S.title,'"? Esta accin no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(Ne,{variant:"secondary",onClick:()=>{x(!1),C(null)},children:"Cancelar"}),d.jsx(Ne,{variant:"danger",onClick:ne,children:"Eliminar"})]})]})})]})}var bE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a1=xe.createContext&&xe.createContext(bE),p8=["attr","size","title"];function m8(e,t){if(e==null)return{};var n=g8(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function g8(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ed(){return Ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ed.apply(this,arguments)}function l1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(n),!0).forEach(function(r){v8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v8(e,t,n){return t=y8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y8(e){var t=x8(e,"string");return typeof t=="symbol"?t:t+""}function x8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SE(e){return e&&e.map((t,n)=>xe.createElement(t.tag,Nd({key:n},t.attr),SE(t.child)))}function Si(e){return t=>xe.createElement(w8,Ed({attr:Nd({},e.attr)},t),SE(e.child))}function w8(e){var t=n=>{var{attr:r,size:i,title:o}=e,l=m8(e,p8),u=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),xe.createElement("svg",Ed({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:c,style:Nd(Nd({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&xe.createElement("title",null,o),e.children)};return a1!==void 0?xe.createElement(a1.Consumer,null,n=>t(n)):t(bE)}function _8(e){return Si({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function b8(e){return Si({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function S8(e){return Si({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function EE(e){return Si({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function E8(e){return Si({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function N8(e){return Si({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},child:[]}]})(e)}function Lm(e){return Si({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function u1(e){return Si({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function k8(e){return Si({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function C8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const ff=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ya(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function fv(e){return"nodeType"in e}function Tn(e){var t,n;return e?ya(e)?e:fv(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function hv(e){const{Document:t}=Tn(e);return e instanceof t}function iu(e){return ya(e)?!1:e instanceof Tn(e).HTMLElement}function NE(e){return e instanceof Tn(e).SVGElement}function xa(e){return e?ya(e)?e.document:fv(e)?hv(e)?e:iu(e)||NE(e)?e.ownerDocument:document:document:document}const qr=ff?v.useLayoutEffect:v.useEffect;function pv(e){const t=v.useRef(e);return qr(()=>{t.current=e}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function j8(){const e=v.useRef(null),t=v.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=v.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function zl(e,t){t===void 0&&(t=[e]);const n=v.useRef(e);return qr(()=>{n.current!==e&&(n.current=e)},t),n}function su(e,t){const n=v.useRef();return v.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function kd(e){const t=pv(e),n=v.useRef(null),r=v.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Im(e){const t=v.useRef();return v.useEffect(()=>{t.current=e},[e]),t.current}let gp={};function ou(e,t){return v.useMemo(()=>{if(t)return t;const n=gp[e]==null?0:gp[e]+1;return gp[e]=n,e+"-"+n},[e,t])}function kE(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[c,h]of u){const p=o[c];p!=null&&(o[c]=p+e*h)}return o},{...t})}}const Jo=kE(1),Cd=kE(-1);function P8(e){return"clientX"in e&&"clientY"in e}function mv(e){if(!e)return!1;const{KeyboardEvent:t}=Tn(e.target);return t&&e instanceof t}function D8(e){if(!e)return!1;const{TouchEvent:t}=Tn(e.target);return t&&e instanceof t}function Fm(e){if(D8(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return P8(e)?{x:e.clientX,y:e.clientY}:null}const Wl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Wl.Translate.toString(e),Wl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),c1="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function T8(e){return e.matches(c1)?e:e.querySelector(c1)}const O8={display:"none"};function M8(e){let{id:t,value:n}=e;return xe.createElement("div",{id:t,style:O8},n)}function R8(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return xe.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function $8(){const[e,t]=v.useState("");return{announce:v.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const CE=v.createContext(null);function A8(e){const t=v.useContext(CE);v.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function L8(){const[e]=v.useState(()=>new Set),t=v.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[v.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var u;return(u=l[i])==null?void 0:u.call(l,o)})},[e]),t]}const I8={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},F8={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function U8(e){let{announcements:t=F8,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=I8}=e;const{announce:o,announcement:l}=$8(),u=ou("DndLiveRegion"),[c,h]=v.useState(!1);if(v.useEffect(()=>{h(!0)},[]),A8(v.useMemo(()=>({onDragStart(m){let{active:y}=m;o(t.onDragStart({active:y}))},onDragMove(m){let{active:y,over:x}=m;t.onDragMove&&o(t.onDragMove({active:y,over:x}))},onDragOver(m){let{active:y,over:x}=m;o(t.onDragOver({active:y,over:x}))},onDragEnd(m){let{active:y,over:x}=m;o(t.onDragEnd({active:y,over:x}))},onDragCancel(m){let{active:y,over:x}=m;o(t.onDragCancel({active:y,over:x}))}}),[o,t])),!c)return null;const p=xe.createElement(xe.Fragment,null,xe.createElement(M8,{id:r,value:i.draggable}),xe.createElement(R8,{id:u,announcement:l}));return n?Hs.createPortal(p,n):p}var Lt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Lt||(Lt={}));function jd(){}function z8(e,t){return v.useMemo(()=>({sensor:e,options:{}}),[e,t])}function W8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Dr=Object.freeze({x:0,y:0});function B8(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function H8(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function q8(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function G8(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function d1(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const V8=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=d1(t,t.left,t.top),o=[];for(const l of r){const{id:u}=l,c=n.get(u);if(c){const h=B8(d1(c),i);o.push({id:u,data:{droppableContainer:l,value:h}})}}return o.sort(H8)};function Y8(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,u=o-n;if(r<i&&n<o){const c=t.width*t.height,h=e.width*e.height,p=l*u,m=p/(c+h-p);return Number(m.toFixed(4))}return 0}const K8=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const c=Y8(u,t);c>0&&i.push({id:l,data:{droppableContainer:o,value:c}})}}return i.sort(q8)};function Q8(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function jE(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Dr}function X8(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,u)=>({...l,top:l.top+e*u.y,bottom:l.bottom+e*u.y,left:l.left+e*u.x,right:l.right+e*u.x}),{...n})}}const J8=X8(1);function Z8(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function eU(e,t,n){const r=Z8(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:u}=r,c=e.left-l-(1-i)*parseFloat(n),h=e.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=i?e.width/i:e.width,m=o?e.height/o:e.height;return{width:p,height:m,top:h,right:c+p,bottom:h+m,left:c}}const tU={ignoreTransform:!1};function wa(e,t){t===void 0&&(t=tU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:p}=Tn(e).getComputedStyle(e);h&&(n=eU(n,h,p))}const{top:r,left:i,width:o,height:l,bottom:u,right:c}=n;return{top:r,left:i,width:o,height:l,bottom:u,right:c}}function f1(e){return wa(e,{ignoreTransform:!0})}function nU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function rU(e,t){return t===void 0&&(t=Tn(e).getComputedStyle(e)),t.position==="fixed"}function iU(e,t){t===void 0&&(t=Tn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function gv(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(hv(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!iu(i)||NE(i)||n.includes(i))return n;const o=Tn(e).getComputedStyle(i);return i!==e&&iU(i,o)&&n.push(i),rU(i,o)?n:r(i.parentNode)}return e?r(e):n}function PE(e){const[t]=gv(e,1);return t??null}function vp(e){return!ff||!e?null:ya(e)?e:fv(e)?hv(e)||e===xa(e).scrollingElement?window:iu(e)?e:null:null}function DE(e){return ya(e)?e.scrollX:e.scrollLeft}function TE(e){return ya(e)?e.scrollY:e.scrollTop}function Um(e){return{x:DE(e),y:TE(e)}}var Bt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Bt||(Bt={}));function OE(e){return!ff||!e?!1:e===document.scrollingElement}function ME(e){const t={x:0,y:0},n=OE(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,u=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:t}}const sU={x:.2,y:.2};function oU(e,t,n,r,i){let{top:o,left:l,right:u,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=sU);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=ME(e),x={x:0,y:0},S={x:0,y:0},C={height:t.height*i.y,width:t.width*i.x};return!h&&o<=t.top+C.height?(x.y=Bt.Backward,S.y=r*Math.abs((t.top+C.height-o)/C.height)):!p&&c>=t.bottom-C.height&&(x.y=Bt.Forward,S.y=r*Math.abs((t.bottom-C.height-c)/C.height)),!y&&u>=t.right-C.width?(x.x=Bt.Forward,S.x=r*Math.abs((t.right-C.width-u)/C.width)):!m&&l<=t.left+C.width&&(x.x=Bt.Backward,S.x=r*Math.abs((t.left+C.width-l)/C.width)),{direction:x,speed:S}}function aU(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function RE(e){return e.reduce((t,n)=>Jo(t,Um(n)),Dr)}function lU(e){return e.reduce((t,n)=>t+DE(n),0)}function uU(e){return e.reduce((t,n)=>t+TE(n),0)}function cU(e,t){if(t===void 0&&(t=wa),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);PE(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const dU=[["x",["left","right"],lU],["y",["top","bottom"],uU]];class vv{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=gv(n),i=RE(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,u]of dU)for(const c of l)Object.defineProperty(this,c,{get:()=>{const h=u(r),p=i[o]-h;return this.rect[c]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function fU(e){const{EventTarget:t}=Tn(e);return e instanceof t?e:xa(e)}function yp(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var or;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(or||(or={}));function h1(e){e.preventDefault()}function hU(e){e.stopPropagation()}var et;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(et||(et={}));const $E={start:[et.Space,et.Enter],cancel:[et.Esc],end:[et.Space,et.Enter,et.Tab]},pU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case et.Right:return{...n,x:n.x+25};case et.Left:return{...n,x:n.x-25};case et.Down:return{...n,y:n.y+25};case et.Up:return{...n,y:n.y-25}}};class AE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new vl(xa(n)),this.windowListeners=new vl(Tn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(or.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&cU(r),n(Dr)}handleKeyDown(t){if(mv(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=$E,coordinateGetter:l=pU,scrollBehavior:u="smooth"}=i,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:h}=r.current,p=h?{x:h.left,y:h.top}:Dr;this.referenceCoordinates||(this.referenceCoordinates=p);const m=l(t,{active:n,context:r.current,currentCoordinates:p});if(m){const y=Cd(m,p),x={x:0,y:0},{scrollableAncestors:S}=r.current;for(const C of S){const j=t.code,{isTop:b,isRight:_,isLeft:N,isBottom:P,maxScroll:M,minScroll:U}=ME(C),L=aU(C),z={x:Math.min(j===et.Right?L.right-L.width/2:L.right,Math.max(j===et.Right?L.left:L.left+L.width/2,m.x)),y:Math.min(j===et.Down?L.bottom-L.height/2:L.bottom,Math.max(j===et.Down?L.top:L.top+L.height/2,m.y))},le=j===et.Right&&!_||j===et.Left&&!N,te=j===et.Down&&!P||j===et.Up&&!b;if(le&&z.x!==m.x){const H=C.scrollLeft+y.x,Ee=j===et.Right&&H<=M.x||j===et.Left&&H>=U.x;if(Ee&&!y.y){C.scrollTo({left:H,behavior:u});return}Ee?x.x=C.scrollLeft-H:x.x=j===et.Right?C.scrollLeft-M.x:C.scrollLeft-U.x,x.x&&C.scrollBy({left:-x.x,behavior:u});break}else if(te&&z.y!==m.y){const H=C.scrollTop+y.y,Ee=j===et.Down&&H<=M.y||j===et.Up&&H>=U.y;if(Ee&&!y.x){C.scrollTo({top:H,behavior:u});return}Ee?x.y=C.scrollTop-H:x.y=j===et.Down?C.scrollTop-M.y:C.scrollTop-U.y,x.y&&C.scrollBy({top:-x.y,behavior:u});break}}this.handleMove(t,Jo(Cd(m,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}AE.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=$E,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&e.target!==u?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function p1(e){return!!(e&&"distance"in e)}function m1(e){return!!(e&&"delay"in e)}class yv{constructor(t,n,r){var i;r===void 0&&(r=fU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=xa(l),this.documentListeners=new vl(this.document),this.listeners=new vl(r),this.windowListeners=new vl(Tn(l)),this.initialCoordinates=(i=Fm(o))!=null?i:Dr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(or.Resize,this.handleCancel),this.windowListeners.add(or.DragStart,h1),this.windowListeners.add(or.VisibilityChange,this.handleCancel),this.windowListeners.add(or.ContextMenu,h1),this.documentListeners.add(or.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(m1(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(p1(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(or.Click,hU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(or.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!i)return;const c=(n=Fm(t))!=null?n:Dr,h=Cd(i,c);if(!r&&u){if(p1(u)){if(u.tolerance!=null&&yp(h,u.tolerance))return this.handleCancel();if(yp(h,u.distance))return this.handleStart()}if(m1(u)&&yp(h,u.tolerance))return this.handleCancel();this.handlePending(u,h);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===et.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const mU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xv extends yv{constructor(t){const{event:n}=t,r=xa(n.target);super(t,mU,r)}}xv.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const gU={move:{name:"mousemove"},end:{name:"mouseup"}};var zm;(function(e){e[e.RightClick=2]="RightClick"})(zm||(zm={}));class vU extends yv{constructor(t){super(t,gU,xa(t.event.target))}}vU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zm.RightClick?!1:(r==null||r({event:n}),!0)}}];const xp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yU extends yv{constructor(t){super(t,xp)}static setup(){return window.addEventListener(xp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(xp.move.name,t)};function t(){}}}yU.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var yl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(yl||(yl={}));var Pd;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Pd||(Pd={}));function xU(e){let{acceleration:t,activator:n=yl.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:u=Pd.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=e;const x=_U({delta:m,disabled:!o}),[S,C]=j8(),j=v.useRef({x:0,y:0}),b=v.useRef({x:0,y:0}),_=v.useMemo(()=>{switch(n){case yl.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case yl.DraggableRect:return i}},[n,i,c]),N=v.useRef(null),P=v.useCallback(()=>{const U=N.current;if(!U)return;const L=j.current.x*b.current.x,z=j.current.y*b.current.y;U.scrollBy(L,z)},[]),M=v.useMemo(()=>u===Pd.TreeOrder?[...h].reverse():h,[u,h]);v.useEffect(()=>{if(!o||!h.length||!_){C();return}for(const U of M){if((r==null?void 0:r(U))===!1)continue;const L=h.indexOf(U),z=p[L];if(!z)continue;const{direction:le,speed:te}=oU(U,z,_,t,y);for(const H of["x","y"])x[H][le[H]]||(te[H]=0,le[H]=0);if(te.x>0||te.y>0){C(),N.current=U,S(P,l),j.current=te,b.current=le;return}}j.current={x:0,y:0},b.current={x:0,y:0},C()},[t,P,r,C,o,l,JSON.stringify(_),JSON.stringify(x),S,h,M,p,JSON.stringify(y)])}const wU={x:{[Bt.Backward]:!1,[Bt.Forward]:!1},y:{[Bt.Backward]:!1,[Bt.Forward]:!1}};function _U(e){let{delta:t,disabled:n}=e;const r=Im(t);return su(i=>{if(n||!r||!i)return wU;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Bt.Backward]:i.x[Bt.Backward]||o.x===-1,[Bt.Forward]:i.x[Bt.Forward]||o.x===1},y:{[Bt.Backward]:i.y[Bt.Backward]||o.y===-1,[Bt.Forward]:i.y[Bt.Forward]||o.y===1}}},[n,t,r])}function bU(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return su(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function SU(e,t){return v.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var Bl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Bl||(Bl={}));var Wm;(function(e){e.Optimized="optimized"})(Wm||(Wm={}));const g1=new Map;function EU(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=v.useState(null),{frequency:u,measure:c,strategy:h}=i,p=v.useRef(e),m=j(),y=zl(m),x=v.useCallback(function(b){b===void 0&&(b=[]),!y.current&&l(_=>_===null?b:_.concat(b.filter(N=>!_.includes(N))))},[y]),S=v.useRef(null),C=su(b=>{if(m&&!n)return g1;if(!b||b===g1||p.current!==e||o!=null){const _=new Map;for(let N of e){if(!N)continue;if(o&&o.length>0&&!o.includes(N.id)&&N.rect.current){_.set(N.id,N.rect.current);continue}const P=N.node.current,M=P?new vv(c(P),P):null;N.rect.current=M,M&&_.set(N.id,M)}return _}return b},[e,o,n,m,c]);return v.useEffect(()=>{p.current=e},[e]),v.useEffect(()=>{m||x()},[n,m]),v.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),v.useEffect(()=>{m||typeof u!="number"||S.current!==null||(S.current=setTimeout(()=>{x(),S.current=null},u))},[u,m,x,...r]),{droppableRects:C,measureDroppableContainers:x,measuringScheduled:o!=null};function j(){switch(h){case Bl.Always:return!1;case Bl.BeforeDragging:return n;default:return!n}}}function LE(e,t){return su(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function NU(e,t){return LE(e,t)}function kU(e){let{callback:t,disabled:n}=e;const r=pv(t),i=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return v.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function hf(e){let{callback:t,disabled:n}=e;const r=pv(t),i=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return v.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function CU(e){return new vv(wa(e),e)}function v1(e,t,n){t===void 0&&(t=CU);const[r,i]=v.useState(null);function o(){i(c=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=c??n)!=null?h:null}const p=t(e);return JSON.stringify(c)===JSON.stringify(p)?c:p})}const l=kU({callback(c){if(e)for(const h of c){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(e)){o();break}}}}),u=hf({callback:o});return qr(()=>{o(),e?(u==null||u.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),l==null||l.disconnect())},[e]),r}function jU(e){const t=LE(e);return jE(e,t)}const y1=[];function PU(e){const t=v.useRef(e),n=su(r=>e?r&&r!==y1&&e&&t.current&&e.parentNode===t.current.parentNode?r:gv(e):y1,[e]);return v.useEffect(()=>{t.current=e},[e]),n}function DU(e){const[t,n]=v.useState(null),r=v.useRef(e),i=v.useCallback(o=>{const l=vp(o.target);l&&n(u=>u?(u.set(l,Um(l)),new Map(u)):null)},[]);return v.useEffect(()=>{const o=r.current;if(e!==o){l(o);const u=e.map(c=>{const h=vp(c);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,Um(h)]):null}).filter(c=>c!=null);n(u.length?new Map(u):null),r.current=e}return()=>{l(e),l(o)};function l(u){u.forEach(c=>{const h=vp(c);h==null||h.removeEventListener("scroll",i)})}},[i,e]),v.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>Jo(o,l),Dr):RE(e):Dr,[e,t])}function x1(e,t){t===void 0&&(t=[]);const n=v.useRef(null);return v.useEffect(()=>{n.current=null},t),v.useEffect(()=>{const r=e!==Dr;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Cd(e,n.current):Dr}function TU(e){v.useEffect(()=>{if(!ff)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function OU(e,t){return v.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function IE(e){return v.useMemo(()=>e?nU(e):null,[e])}const w1=[];function MU(e,t){t===void 0&&(t=wa);const[n]=e,r=IE(n?Tn(n):null),[i,o]=v.useState(w1);function l(){o(()=>e.length?e.map(c=>OE(c)?r:new vv(t(c),c)):w1)}const u=hf({callback:l});return qr(()=>{u==null||u.disconnect(),l(),e.forEach(c=>u==null?void 0:u.observe(c))},[e]),i}function RU(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return iu(t)?t:e}function $U(e){let{measure:t}=e;const[n,r]=v.useState(null),i=v.useCallback(h=>{for(const{target:p}of h)if(iu(p)){r(m=>{const y=t(p);return m?{...m,width:y.width,height:y.height}:y});break}},[t]),o=hf({callback:i}),l=v.useCallback(h=>{const p=RU(h);o==null||o.disconnect(),p&&(o==null||o.observe(p)),r(p?t(p):null)},[t,o]),[u,c]=kd(l);return v.useMemo(()=>({nodeRef:u,rect:n,setRef:c}),[n,u,c])}const AU=[{sensor:xv,options:{}},{sensor:AE,options:{}}],LU={current:{}},Uc={draggable:{measure:f1},droppable:{measure:f1,strategy:Bl.WhileDragging,frequency:Wm.Optimized},dragOverlay:{measure:wa}};class xl extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const IU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new xl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:jd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Uc,measureDroppableContainers:jd,windowRect:null,measuringScheduled:!1},FU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:jd,draggableNodes:new Map,over:null,measureDroppableContainers:jd},pf=v.createContext(FU),FE=v.createContext(IU);function UU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new xl}}}function zU(e,t){switch(t.type){case Lt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Lt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Lt.DragEnd:case Lt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Lt.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new xl(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Lt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new xl(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case Lt.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new xl(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function WU(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=v.useContext(pf),o=Im(r),l=Im(n==null?void 0:n.id);return v.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!mv(o)||document.activeElement===o.target)return;const u=i.get(l);if(!u)return;const{activatorNode:c,node:h}=u;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[c.current,h.current]){if(!p)continue;const m=T8(p);if(m){m.focus();break}}})}},[r,t,i,l,o]),null}function BU(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function HU(e){return v.useMemo(()=>({draggable:{...Uc.draggable,...e==null?void 0:e.draggable},droppable:{...Uc.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Uc.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function qU(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=v.useRef(!1),{x:l,y:u}=typeof i=="boolean"?{x:i,y:i}:i;qr(()=>{if(!l&&!u||!t){o.current=!1;return}if(o.current||!r)return;const h=t==null?void 0:t.node.current;if(!h||h.isConnected===!1)return;const p=n(h),m=jE(p,r);if(l||(m.x=0),u||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=PE(h);y&&y.scrollBy({top:m.y,left:m.x})}},[t,l,u,r,n])}const UE=v.createContext({...Dr,scaleX:1,scaleY:1});var zi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zi||(zi={}));const GU=v.memo(function(t){var n,r,i,o;let{id:l,accessibility:u,autoScroll:c=!0,children:h,sensors:p=AU,collisionDetection:m=K8,measuring:y,modifiers:x,...S}=t;const C=v.useReducer(zU,void 0,UU),[j,b]=C,[_,N]=L8(),[P,M]=v.useState(zi.Uninitialized),U=P===zi.Initialized,{draggable:{active:L,nodes:z,translate:le},droppable:{containers:te}}=j,H=L!=null?z.get(L):null,Ee=v.useRef({initial:null,translated:null}),re=v.useMemo(()=>{var Ot;return L!=null?{id:L,data:(Ot=H==null?void 0:H.data)!=null?Ot:LU,rect:Ee}:null},[L,H]),me=v.useRef(null),[be,Me]=v.useState(null),[$,T]=v.useState(null),F=zl(S,Object.values(S)),ne=ou("DndDescribedBy",l),se=v.useMemo(()=>te.getEnabled(),[te]),_e=HU(y),{droppableRects:ge,measureDroppableContainers:$e,measuringScheduled:je}=EU(se,{dragging:U,dependencies:[le.x,le.y],config:_e.droppable}),Oe=bU(z,L),Q=v.useMemo(()=>$?Fm($):null,[$]),pe=lu(),Z=NU(Oe,_e.draggable.measure);qU({activeNode:L!=null?z.get(L):null,config:pe.layoutShiftCompensation,initialRect:Z,measure:_e.draggable.measure});const V=v1(Oe,_e.draggable.measure,Z),W=v1(Oe?Oe.parentElement:null),K=v.useRef({activatorEvent:null,active:null,activeNode:Oe,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:te,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),fe=te.getNodeFor((n=K.current.over)==null?void 0:n.id),ee=$U({measure:_e.dragOverlay.measure}),R=(r=ee.nodeRef.current)!=null?r:Oe,ae=U?(i=ee.rect)!=null?i:V:null,ce=!!(ee.nodeRef.current&&ee.rect),G=jU(ce?null:V),de=IE(R?Tn(R):null),ve=PU(U?fe??Oe:null),Pe=MU(ve),ke=BU(x,{transform:{x:le.x-G.x,y:le.y-G.y,scaleX:1,scaleY:1},activatorEvent:$,active:re,activeNodeRect:V,containerNodeRect:W,draggingNodeRect:ae,over:K.current.over,overlayNodeRect:ee.rect,scrollableAncestors:ve,scrollableAncestorRects:Pe,windowRect:de}),Ke=Q?Jo(Q,le):null,nt=DU(ve),Xe=x1(nt),yt=x1(nt,[V]),Ft=Jo(ke,Xe),sn=ae?J8(ae,ke):null,Yr=re&&sn?m({active:re,collisionRect:sn,droppableRects:ge,droppableContainers:se,pointerCoordinates:Ke}):null,lo=G8(Yr,"id"),[Yn,uo]=v.useState(null),_a=ce?ke:Jo(ke,yt),ba=Q8(_a,(o=Yn==null?void 0:Yn.rect)!=null?o:null,V),ys=v.useRef(null),co=v.useCallback((Ot,on)=>{let{sensor:an,options:Tr}=on;if(me.current==null)return;const vn=z.get(me.current);if(!vn)return;const Xt=Ot.nativeEvent,Kn=new an({active:me.current,activeNode:vn,event:Xt,options:Tr,context:K,onAbort(Mt){if(!z.get(Mt))return;const{onDragAbort:Xn}=F.current,On={id:Mt};Xn==null||Xn(On),_({type:"onDragAbort",event:On})},onPending(Mt,Qn,Xn,On){if(!z.get(Mt))return;const{onDragPending:ws}=F.current,Or={id:Mt,constraint:Qn,initialCoordinates:Xn,offset:On};ws==null||ws(Or),_({type:"onDragPending",event:Or})},onStart(Mt){const Qn=me.current;if(Qn==null)return;const Xn=z.get(Qn);if(!Xn)return;const{onDragStart:On}=F.current,xs={activatorEvent:Xt,active:{id:Qn,data:Xn.data,rect:Ee}};Hs.unstable_batchedUpdates(()=>{On==null||On(xs),M(zi.Initializing),b({type:Lt.DragStart,initialCoordinates:Mt,active:Qn}),_({type:"onDragStart",event:xs}),Me(ys.current),T(Xt)})},onMove(Mt){b({type:Lt.DragMove,coordinates:Mt})},onEnd:Ei(Lt.DragEnd),onCancel:Ei(Lt.DragCancel)});ys.current=Kn;function Ei(Mt){return async function(){const{active:Xn,collisions:On,over:xs,scrollAdjustedTranslate:ws}=K.current;let Or=null;if(Xn&&ws){const{cancelDrop:_s}=F.current;Or={activatorEvent:Xt,active:Xn,collisions:On,delta:ws,over:xs},Mt===Lt.DragEnd&&typeof _s=="function"&&await Promise.resolve(_s(Or))&&(Mt=Lt.DragCancel)}me.current=null,Hs.unstable_batchedUpdates(()=>{b({type:Mt}),M(zi.Uninitialized),uo(null),Me(null),T(null),ys.current=null;const _s=Mt===Lt.DragEnd?"onDragEnd":"onDragCancel";if(Or){const Ea=F.current[_s];Ea==null||Ea(Or),_({type:_s,event:Or})}})}}},[z]),Sa=v.useCallback((Ot,on)=>(an,Tr)=>{const vn=an.nativeEvent,Xt=z.get(Tr);if(me.current!==null||!Xt||vn.dndKit||vn.defaultPrevented)return;const Kn={active:Xt};Ot(an,on.options,Kn)===!0&&(vn.dndKit={capturedBy:on.sensor},me.current=Tr,co(an,on))},[z,co]),au=SU(p,Sa);TU(p),qr(()=>{V&&P===zi.Initializing&&M(zi.Initialized)},[V,P]),v.useEffect(()=>{const{onDragMove:Ot}=F.current,{active:on,activatorEvent:an,collisions:Tr,over:vn}=K.current;if(!on||!an)return;const Xt={active:on,activatorEvent:an,collisions:Tr,delta:{x:Ft.x,y:Ft.y},over:vn};Hs.unstable_batchedUpdates(()=>{Ot==null||Ot(Xt),_({type:"onDragMove",event:Xt})})},[Ft.x,Ft.y]),v.useEffect(()=>{const{active:Ot,activatorEvent:on,collisions:an,droppableContainers:Tr,scrollAdjustedTranslate:vn}=K.current;if(!Ot||me.current==null||!on||!vn)return;const{onDragOver:Xt}=F.current,Kn=Tr.get(lo),Ei=Kn&&Kn.rect.current?{id:Kn.id,rect:Kn.rect.current,data:Kn.data,disabled:Kn.disabled}:null,Mt={active:Ot,activatorEvent:on,collisions:an,delta:{x:vn.x,y:vn.y},over:Ei};Hs.unstable_batchedUpdates(()=>{uo(Ei),Xt==null||Xt(Mt),_({type:"onDragOver",event:Mt})})},[lo]),qr(()=>{K.current={activatorEvent:$,active:re,activeNode:Oe,collisionRect:sn,collisions:Yr,droppableRects:ge,draggableNodes:z,draggingNode:R,draggingNodeRect:ae,droppableContainers:te,over:Yn,scrollableAncestors:ve,scrollAdjustedTranslate:Ft},Ee.current={initial:ae,translated:sn}},[re,Oe,Yr,sn,z,R,ae,ge,te,Yn,ve,Ft]),xU({...pe,delta:le,draggingRect:sn,pointerCoordinates:Ke,scrollableAncestors:ve,scrollableAncestorRects:Pe});const mf=v.useMemo(()=>({active:re,activeNode:Oe,activeNodeRect:V,activatorEvent:$,collisions:Yr,containerNodeRect:W,dragOverlay:ee,draggableNodes:z,droppableContainers:te,droppableRects:ge,over:Yn,measureDroppableContainers:$e,scrollableAncestors:ve,scrollableAncestorRects:Pe,measuringConfiguration:_e,measuringScheduled:je,windowRect:de}),[re,Oe,V,$,Yr,W,ee,z,te,ge,Yn,$e,ve,Pe,_e,je,de]),gf=v.useMemo(()=>({activatorEvent:$,activators:au,active:re,activeNodeRect:V,ariaDescribedById:{draggable:ne},dispatch:b,draggableNodes:z,over:Yn,measureDroppableContainers:$e}),[$,au,re,V,b,ne,z,Yn,$e]);return xe.createElement(CE.Provider,{value:N},xe.createElement(pf.Provider,{value:gf},xe.createElement(FE.Provider,{value:mf},xe.createElement(UE.Provider,{value:ba},h)),xe.createElement(WU,{disabled:(u==null?void 0:u.restoreFocus)===!1})),xe.createElement(U8,{...u,hiddenTextDescribedById:ne}));function lu(){const Ot=(be==null?void 0:be.autoScrollEnabled)===!1,on=typeof c=="object"?c.enabled===!1:c===!1,an=U&&!Ot&&!on;return typeof c=="object"?{...c,enabled:an}:{enabled:an}}}),VU=v.createContext(null),_1="button",YU="Draggable";function KU(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=ou(YU),{activators:l,activatorEvent:u,active:c,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=v.useContext(pf),{role:x=_1,roleDescription:S="draggable",tabIndex:C=0}=i??{},j=(c==null?void 0:c.id)===t,b=v.useContext(j?UE:VU),[_,N]=kd(),[P,M]=kd(),U=OU(l,t),L=zl(n);qr(()=>(m.set(t,{id:t,key:o,node:_,activatorNode:P,data:L}),()=>{const le=m.get(t);le&&le.key===o&&m.delete(t)}),[m,t]);const z=v.useMemo(()=>({role:x,tabIndex:C,"aria-disabled":r,"aria-pressed":j&&x===_1?!0:void 0,"aria-roledescription":S,"aria-describedby":p.draggable}),[r,x,C,j,S,p.draggable]);return{active:c,activatorEvent:u,activeNodeRect:h,attributes:z,isDragging:j,listeners:r?void 0:U,node:_,over:y,setNodeRef:N,setActivatorNodeRef:M,transform:b}}function QU(){return v.useContext(FE)}const XU="Droppable",JU={timeout:25};function ZU(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=ou(XU),{active:l,dispatch:u,over:c,measureDroppableContainers:h}=v.useContext(pf),p=v.useRef({disabled:n}),m=v.useRef(!1),y=v.useRef(null),x=v.useRef(null),{disabled:S,updateMeasurementsFor:C,timeout:j}={...JU,...i},b=zl(C??r),_=v.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(b.current)?b.current:[b.current]),x.current=null},j)},[j]),N=hf({callback:_,disabled:S||!l}),P=v.useCallback((z,le)=>{N&&(le&&(N.unobserve(le),m.current=!1),z&&N.observe(z))},[N]),[M,U]=kd(P),L=zl(t);return v.useEffect(()=>{!N||!M.current||(N.disconnect(),m.current=!1,N.observe(M.current))},[M,N]),v.useEffect(()=>(u({type:Lt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:M,rect:y,data:L}}),()=>u({type:Lt.UnregisterDroppable,key:o,id:r})),[r]),v.useEffect(()=>{n!==p.current.disabled&&(u({type:Lt.SetDroppableDisabled,id:r,key:o,disabled:n}),p.current.disabled=n)},[r,o,n,u]),{active:l,rect:y,isOver:(c==null?void 0:c.id)===r,node:M,over:c,setNodeRef:U}}function wv(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ez(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function _c(e){return e!==null&&e>=0}function tz(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function nz(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const zE=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=wv(t,r,n),l=t[i],u=o[i];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},bc={scaleX:1,scaleY:1},rz=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const u=(t=o[n])!=null?t:r;if(!u)return null;if(i===n){const h=o[l];return h?{x:0,y:n<l?h.top+h.height-(u.top+u.height):h.top-u.top,...bc}:null}const c=iz(o,i,n);return i>n&&i<=l?{x:0,y:-u.height-c,...bc}:i<n&&i>=l?{x:0,y:u.height+c,...bc}:{x:0,y:0,...bc}};function iz(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const WE="Sortable",BE=xe.createContext({activeIndex:-1,containerId:WE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:zE,disabled:{draggable:!1,droppable:!1}});function sz(e){let{children:t,id:n,items:r,strategy:i=zE,disabled:o=!1}=e;const{active:l,dragOverlay:u,droppableRects:c,over:h,measureDroppableContainers:p}=QU(),m=ou(WE,n),y=u.rect!==null,x=v.useMemo(()=>r.map(U=>typeof U=="object"&&"id"in U?U.id:U),[r]),S=l!=null,C=l?x.indexOf(l.id):-1,j=h?x.indexOf(h.id):-1,b=v.useRef(x),_=!tz(x,b.current),N=j!==-1&&C===-1||_,P=nz(o);qr(()=>{_&&S&&p(x)},[_,x,S,p]),v.useEffect(()=>{b.current=x},[x]);const M=v.useMemo(()=>({activeIndex:C,containerId:m,disabled:P,disableTransforms:N,items:x,overIndex:j,useDragOverlay:y,sortedRects:ez(x,c),strategy:i}),[C,m,P.draggable,P.droppable,N,x,j,c,y,i]);return xe.createElement(BE.Provider,{value:M},t)}const oz=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return wv(n,r,i).indexOf(t)},az=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:u,previousContainerId:c,transition:h}=e;return!h||!r||u!==o&&i===l?!1:n?!0:l!==i&&t===c},lz={duration:200,easing:"ease"},HE="transform",uz=Wl.Transition.toString({property:HE,duration:0,easing:"linear"}),cz={roleDescription:"sortable"};function dz(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=v.useState(null),u=v.useRef(n);return qr(()=>{if(!t&&n!==u.current&&r.current){const c=i.current;if(c){const h=wa(r.current,{ignoreTransform:!0}),p={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(p.x||p.y)&&l(p)}}n!==u.current&&(u.current=n)},[t,n,r,i]),v.useEffect(()=>{o&&l(null)},[o]),o}function fz(e){let{animateLayoutChanges:t=az,attributes:n,disabled:r,data:i,getNewIndex:o=oz,id:l,strategy:u,resizeObserverConfig:c,transition:h=lz}=e;const{items:p,containerId:m,activeIndex:y,disabled:x,disableTransforms:S,sortedRects:C,overIndex:j,useDragOverlay:b,strategy:_}=v.useContext(BE),N=hz(r,x),P=p.indexOf(l),M=v.useMemo(()=>({sortable:{containerId:m,index:P,items:p},...i}),[m,i,P,p]),U=v.useMemo(()=>p.slice(p.indexOf(l)),[p,l]),{rect:L,node:z,isOver:le,setNodeRef:te}=ZU({id:l,data:M,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:U,...c}}),{active:H,activatorEvent:Ee,activeNodeRect:re,attributes:me,setNodeRef:be,listeners:Me,isDragging:$,over:T,setActivatorNodeRef:F,transform:ne}=KU({id:l,data:M,attributes:{...cz,...n},disabled:N.draggable}),se=C8(te,be),_e=!!H,ge=_e&&!S&&_c(y)&&_c(j),$e=!b&&$,je=$e&&ge?ne:null,Q=ge?je??(u??_)({rects:C,activeNodeRect:re,activeIndex:y,overIndex:j,index:P}):null,pe=_c(y)&&_c(j)?o({id:l,items:p,activeIndex:y,overIndex:j}):P,Z=H==null?void 0:H.id,V=v.useRef({activeId:Z,items:p,newIndex:pe,containerId:m}),W=p!==V.current.items,K=t({active:H,containerId:m,isDragging:$,isSorting:_e,id:l,index:P,items:p,newIndex:V.current.newIndex,previousItems:V.current.items,previousContainerId:V.current.containerId,transition:h,wasDragging:V.current.activeId!=null}),fe=dz({disabled:!K,index:P,node:z,rect:L});return v.useEffect(()=>{_e&&V.current.newIndex!==pe&&(V.current.newIndex=pe),m!==V.current.containerId&&(V.current.containerId=m),p!==V.current.items&&(V.current.items=p)},[_e,pe,m,p]),v.useEffect(()=>{if(Z===V.current.activeId)return;if(Z!=null&&V.current.activeId==null){V.current.activeId=Z;return}const R=setTimeout(()=>{V.current.activeId=Z},50);return()=>clearTimeout(R)},[Z]),{active:H,activeIndex:y,attributes:me,data:M,rect:L,index:P,newIndex:pe,items:p,isOver:le,isSorting:_e,isDragging:$,listeners:Me,node:z,overIndex:j,over:T,setNodeRef:se,setActivatorNodeRef:F,setDroppableNodeRef:te,setDraggableNodeRef:be,transform:fe??Q,transition:ee()};function ee(){if(fe||W&&V.current.newIndex===P)return uz;if(!($e&&!mv(Ee)||!h)&&(_e||K))return Wl.Transition.toString({...h,property:HE})}}function hz(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}et.Down,et.Right,et.Up,et.Left;function pz({isOpen:e,onClose:t,groupId:n,availableSongs:r,onMedleyCreated:i}){const[o,l]=v.useState(""),[u,c]=v.useState([]),[h,p]=v.useState(!1),[m,y]=v.useState(""),x=j=>{c(b=>b.includes(j)?b.filter(_=>_!==j):[...b,j])},S=async()=>{if(u.length<2){q.error("Selecciona al menos dos canciones para el medley");return}let j=o.trim();if(j||(j=u.map(_=>r.find(N=>N.id===_)).filter(_=>!!_).map(_=>_.title).join(" | ")),!j){q.error("No se pudo generar el nombre del medley.");return}p(!0);try{const b=await QF(n,j,u);b&&(q.success("Medley creado con xito"),i(b),C())}catch(b){console.error("Error creating medley:",b),q.error("Error al crear el medley")}finally{p(!1)}},C=()=>{l(""),c([]),y(""),t()};return e?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg max-h-[80vh] overflow-y-auto",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Medley"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(mt,{label:"Nombre del Medley",value:o,onChange:j=>l(j.target.value),placeholder:"Ej: Medley de Rock Clsico",autoFocus:!0}),d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Canciones (opcional)"}),d.jsxs("div",{className:"border rounded-md p-2",children:[d.jsx(mt,{placeholder:"Buscar cancin para aadir...",value:m,onChange:j=>y(j.target.value),className:"mb-2"}),d.jsx("div",{className:"max-h-40 overflow-y-auto",children:r.filter(j=>j.type==="song").filter(j=>{var b;return j.title.toLowerCase().includes(m.toLowerCase())||((b=j.artist)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))}).map(j=>d.jsx("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50",children:d.jsx("div",{children:d.jsxs("label",{className:"flex items-center gap-2 py-1 hover:bg-gray-50 rounded px-1",children:[d.jsx("input",{type:"checkbox",checked:u.includes(j.id),onChange:()=>x(j.id),className:"rounded"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-sm truncate",children:j.title}),j.artist&&d.jsx("div",{className:"text-xs text-gray-500 truncate",children:j.artist})]})]})})},j.id))})]})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx(Ne,{variant:"secondary",onClick:C,disabled:h,children:"Cancelar"}),d.jsx(Ne,{variant:"primary",onClick:S,loading:h,disabled:u.length<2,children:"Crear Medley"})]})]})}):null}function mz({medley:e,availableSongs:t,canEdit:n=!0,onSongAdded:r,onSongRemoved:i,onMedleyRenamed:o,onMedleyDeleted:l}){const[u,c]=v.useState(!1),[h,p]=v.useState(!1),[m,y]=v.useState(e.title),[x,S]=v.useState(!1),[C,j]=v.useState(!1),[b,_]=v.useState(!1),[N,P]=v.useState(""),[M,U]=v.useState([]);v.useEffect(()=>{(async()=>{if(e.medley_song_ids&&e.medley_song_ids.length>0){const me=await Sd(e.group_id);if(me){const be=me.filter(Me=>{var $;return(($=e.medley_song_ids)==null?void 0:$.includes(Me.id))&&Me.type==="song"});U(be)}}})()},[e.medley_song_ids,e.group_id]);const L=async()=>{if(!m.trim()){q.error("El nombre del medley es obligatorio");return}j(!0);try{await n8(e.id,{title:m})&&(q.success("Medley actualizado"),o(e.id,m),p(!1))}catch(re){console.error("Error al actualizar el medley:",re),q.error("Error al actualizar el medley")}finally{j(!1)}},z=async()=>{j(!0);try{await s8(e.id)&&(q.success("Medley eliminado"),l(e.id))}catch(re){console.error("Error al eliminar el medley:",re),q.error("Error al eliminar el medley")}finally{j(!1),_(!1)}},le=async re=>{j(!0);try{await i8(e.id,re)&&(q.success("Cancin eliminada del medley"),i(e.id,re),U(be=>be.filter(Me=>Me.id!==re)))}catch(me){console.error("Error al eliminar la cancin del medley:",me),q.error("Error al eliminar la cancin del medley")}finally{j(!1)}},te=async re=>{if(!t.find(be=>be.id===re)){q.error("No se pudo encontrar la cancin seleccionada");return}j(!0);try{const be=await r8(e.id,re);if(be){q.success("Cancin aadida al medley"),r(e.id,re),S(!1),P("");const Me=await Sd(e.group_id);if(Me&&be.medley_song_ids){const $=Me.filter(T=>{var F;return((F=be.medley_song_ids)==null?void 0:F.includes(T.id))&&T.type==="song"});U($)}}}catch(be){console.error("Error al aadir la cancin al medley:",be),q.error("Error al aadir la cancin al medley")}finally{j(!1)}},H=e.medley_song_ids?e.medley_song_ids.map(re=>M.find(me=>me.id===re)).filter(Boolean):[],Ee=Array.from(new Map(H.map(re=>[re.id,re])).values());return d.jsxs("div",{className:"border-l-4 border-blue-400 bg-blue-50 rounded p-3 mb-2",children:[d.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>c(!u),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(N8,{className:"text-blue-600"}),d.jsx("span",{className:"font-semibold text-blue-800",children:e.title})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[d.jsxs("span",{children:[Ee.length," canciones"]}),u?d.jsx(b8,{}):d.jsx(_8,{})]})]}),u&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",onClick:re=>re.stopPropagation(),children:[n&&d.jsxs("div",{className:"flex items-center justify-end gap-2 mb-3",children:[d.jsxs(Ne,{variant:"secondary",onClick:()=>{p(!h),h&&y(e.title)},children:[d.jsx(EE,{className:"mr-1"}),h?"Cancelar":"Renombrar"]}),!h&&d.jsxs(Ne,{variant:"danger",onClick:()=>_(!0),loading:C,children:[d.jsx(k8,{className:"mr-1"}),"Eliminar"]})]}),h&&d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white rounded-md",children:[d.jsx(mt,{value:m,onChange:re=>y(re.target.value),placeholder:"Nuevo nombre del medley"}),d.jsx(Ne,{onClick:L,loading:C,children:"Guardar"})]}),!h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Canciones:"}),Ee.length===0?d.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay canciones en este medley"}):d.jsx("ul",{className:"space-y-1",children:Ee.map(re=>d.jsxs("li",{className:"flex items-center justify-between py-1 pl-2 hover:bg-blue-100 rounded",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-sm",children:re.title}),re.artist&&d.jsx("span",{className:"text-xs text-gray-500 ml-2",children:re.artist})]}),n&&d.jsx(Ne,{variant:"danger",onClick:()=>le(re.id),loading:C,children:d.jsx(u1,{})})]},re.id))})]}),n&&d.jsx("div",{className:"mt-3",children:x?d.jsxs("div",{className:"border rounded p-2 bg-white",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm font-medium",children:"Aadir cancin:"}),d.jsx(Ne,{variant:"secondary",onClick:()=>{S(!1),P("")},children:d.jsx(u1,{})})]}),d.jsx(mt,{placeholder:"Buscar cancin...",value:N,onChange:re=>P(re.target.value),className:"mb-2"}),d.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[t.filter(re=>re.type==="song").filter(re=>!Ee.some(me=>me.id===re.id)).filter(re=>{var me;return re.title.toLowerCase().includes(N.toLowerCase())||((me=re.artist)==null?void 0:me.toLowerCase().includes(N.toLowerCase()))}).map(re=>d.jsxs("button",{onClick:()=>te(re.id),className:"w-full text-left p-1 hover:bg-gray-100 rounded text-sm",disabled:C,children:[d.jsx("div",{className:"font-medium",children:re.title}),re.artist&&d.jsx("div",{className:"text-xs text-gray-500",children:re.artist})]},re.id)),t.filter(re=>re.type==="song"&&!Ee.some(me=>me.id===re.id)).length===0&&d.jsx("p",{className:"text-xs text-gray-500 p-1",children:"No hay ms canciones para aadir."})]})]}):d.jsxs(Ne,{variant:"primary",onClick:()=>S(!0),children:[d.jsx(Lm,{className:"mr-1"}),"Aadir Cancin"]})})]})]}),b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>_(!1),children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl",onClick:re=>re.stopPropagation(),children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar el medley "',e.title,'"? Esta accin no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(Ne,{variant:"secondary",onClick:()=>_(!1),disabled:C,children:"Cancelar"}),d.jsx(Ne,{variant:"danger",onClick:z,loading:C,children:C?"Eliminando...":"Eliminar"})]})]})})]})}const b1={name:"",description:"",estimated_duration_minutes:""};function gz({item:e,canManageSetlists:t,songs:n,onRemoveSong:r,onSongAddedToMedley:i,onSongRemovedFromMedley:o,onMedleyRenamed:l,onMedleyDeleted:u}){var S,C,j,b;const{attributes:c,listeners:h,setNodeRef:p,transform:m,transition:y}=fz({id:e.id}),x={transform:Wl.Transform.toString(m),transition:y};return d.jsxs("div",{ref:p,style:x,...c,className:"flex items-center gap-2 mb-2",children:[t&&d.jsx("div",{...h,className:"cursor-grab text-gray-400 py-3 px-2 touch-none",children:d.jsx(E8,{})}),d.jsx("div",{className:"flex-grow",children:e.type==="song"?d.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm border border-gray-200 flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:(S=e.data.song)==null?void 0:S.title}),d.jsxs("p",{className:"text-sm text-gray-500",children:[(C=e.data.song)==null?void 0:C.artist," - ",(j=e.data.song)==null?void 0:j.duration_minutes,"m - Tono: ",(b=e.data.song)==null?void 0:b.key]})]}),t&&d.jsx(Ne,{variant:"danger",onClick:()=>r(e.data.setlist_id,e.data.song_id),children:"Eliminar"})]}):d.jsx(mz,{medley:e.data,availableSongs:n.filter(_=>_.type==="song"),canEdit:t,onSongAdded:i,onSongRemoved:o,onMedleyRenamed:l,onMedleyDeleted:u})})]})}function vz({groupId:e,canManageSetlists:t=!0}){const[n,r]=v.useState([]),[i,o]=v.useState([]),[l,u]=v.useState(!0),[c,h]=v.useState(!1),[p,m]=v.useState(null),[y,x]=v.useState(null),[S,C]=v.useState(b1),[j,b]=v.useState(!1),[_,N]=v.useState(null),[P,M]=v.useState(!1),[U,L]=v.useState(null),[z,le]=v.useState(""),[te,H]=v.useState(""),[Ee,re]=v.useState(!1);v.useState(null),v.useState("");const[me,be]=v.useState([]),Me=W8(z8(xv));v.useEffect(()=>{$()},[e]),v.useEffect(()=>{if(y){const R=[];y.songs&&y.songs.forEach(G=>{var ve,Pe,ke,Ke;const de=((ve=G.song)==null?void 0:ve.type)==="medley";de&&console.log("Processing medley item:",{songId:G.id,songSongId:(Pe=G.song)==null?void 0:Pe.id,songTitle:(ke=G.song)==null?void 0:ke.title,songType:(Ke=G.song)==null?void 0:Ke.type,position:G.position}),G.id?R.push({id:G.id,type:de?"medley":"song",position:G.position,data:de?G.song:G}):console.error("Song with undefined ID found:",G)}),y.medleys&&y.medleys.length>0&&(console.warn("Legacy medleys found in setlist - these will be ignored in the new system:",y.medleys),console.warn('All medleys should be in the songs table with type="medley"')),R.sort((G,de)=>G.position-de.position);const ae=R.map(G=>G.id),ce=ae.filter((G,de)=>ae.indexOf(G)!==de);ce.length>0&&(console.error("Duplicate IDs found in setlistItems:",ce),console.error("All items:",R),console.error("selectedSetlist.songs:",y.songs),console.error("selectedSetlist.medleys:",y.medleys)),console.log("All setlistItems:",R.map(G=>({id:G.id,type:G.type,position:G.position}))),be(R)}else be([])},[y]);const $=async()=>{u(!0);const[R,ae]=await Promise.all([$m(e),Sd(e)]);return R&&r(R),ae&&o(ae),u(!1),R},T=async R=>{if(R.preventDefault(),!S.name.trim()){q.error("El nombre es obligatorio");return}const{data:{user:ae}}=await oe.auth.getUser();if(!ae){q.error("No se pudo obtener la informacin del usuario");return}const ce={group_id:e,name:S.name.trim(),description:S.description.trim()||void 0,estimated_duration_minutes:S.estimated_duration_minutes?parseInt(S.estimated_duration_minutes):void 0,created_by:ae.id};if(p){const G=await JF(p.id,ce);G&&(q.success("Setlist actualizado correctamente"),r(de=>de.map(ve=>ve.id===p.id?{...ve,...G}:ve)),(y==null?void 0:y.id)===p.id&&x(de=>de?{...de,...G}:null))}else{const G=await _E({...ce,name:ce.name});G&&(q.success("Setlist creado correctamente"),r(de=>[...de,{...G,songs:[]}]))}je()},F=R=>{var ae;m(R),C({name:R.name,description:R.description||"",estimated_duration_minutes:((ae=R.estimated_duration_minutes)==null?void 0:ae.toString())||""}),h(!0)},ne=R=>{N(R),b(!0)},se=async()=>{if(!_)return;await ZF(_.id)?(q.success("Setlist eliminado correctamente"),r(ae=>ae.filter(ce=>ce.id!==_.id)),(y==null?void 0:y.id)===_.id&&x(null)):q.error("No se pudo eliminar el setlist"),b(!1),N(null)},_e=async(R,ae)=>{if(!y)return;const G=(y.songs&&y.songs.length>0?Math.max(...y.songs.map(ve=>ve.position)):0)+1,de=await Am(R,ae,G);if(de){q.success("Cancin aadida al setlist");const ve=i.find(Pe=>Pe.id===ae);if(ve){const Pe={...de,position:G,song:ve},ke={...y,songs:[...y.songs||[],Pe]};x(ke),r(Ke=>Ke.map(nt=>nt.id===R?ke:nt))}}else console.error("No se pudo aadir la cancin al setlist")},ge=async(R,ae)=>{var G;if(await e8(R,ae)){q.success("Cancin eliminada del setlist");const de=y?{...y,songs:(G=y.songs)==null?void 0:G.filter(ve=>ve.song_id!==ae)}:null;de&&(x(de),r(ve=>ve.map(Pe=>Pe.id===de.id?de:Pe)))}else q.error("No se pudo eliminar la cancin del setlist")},$e=R=>{const{active:ae,over:ce}=R;if(!ce||ae.id===ce.id||!y)return;const G=me.findIndex(Xe=>Xe.id===ae.id),de=me.findIndex(Xe=>Xe.id===ce.id),Pe=wv(me,G,de).map((Xe,yt)=>({id:Xe.id,type:Xe.type,position:yt+1})),ke=Pe.map(Xe=>{var Ft;return{...(Ft=y.songs)==null?void 0:Ft.find(sn=>sn.id===Xe.id),position:Xe.position}}),Ke={...y,songs:ke};x(Ke),r(Xe=>Xe.map(yt=>yt.id===Ke.id?Ke:yt)),console.log("Reordering items:",Pe);const nt=Pe.map(Xe=>({songId:Xe.id,position:Xe.position}));t8(y.id,nt).then(Xe=>{Xe?console.log("Reorder successful"):(q.error("No se pudo guardar el orden. Se revertirn los cambios."),$())})},je=()=>{C(b1),m(null),h(!1)},Oe=R=>{if(!i)return[];const ae=new Set((R.songs||[]).map(ce=>ce.song_id));return i.filter(ce=>!ae.has(ce.id))},Q=R=>{const ae=n.find(ce=>ce.id===R.id);x(ae||null)},pe=(R,ae,ce)=>{if(!y)return;const G={...ce,song:ae},de={...y,medleys:(y.medleys||[]).map(ve=>ve.id===R?{...ve,songs:[...ve.songs||[],G].sort((Pe,ke)=>Pe.position-ke.position)}:ve)};x(de),r(ve=>ve.map(Pe=>Pe.id===de.id?de:Pe))},Z=(R,ae)=>{if(!y)return;const ce={...y,medleys:(y.medleys||[]).map(G=>G.id===R?{...G,songs:(G.songs||[]).filter(de=>de.song_id!==ae)}:G)};x(ce),r(G=>G.map(de=>de.id===ce.id?ce:de))},V=(R,ae)=>{if(!y)return;const ce={...y,medleys:(y.medleys||[]).map(G=>G.id===R?{...G,name:ae}:G)};x(ce),r(G=>G.map(de=>de.id===ce.id?ce:de))},W=R=>{if(!y)return;const ae={...y,medleys:(y.medleys||[]).filter(ce=>ce.id!==R)};x(ae),r(ce=>ce.map(G=>G.id===ae.id?ae:G))},K=async R=>{if(!y)return;const ce=(y.songs&&y.songs.length>0?Math.max(...y.songs.map(de=>de.position)):0)+1;if(await Am(y.id,R.id,ce)){q.success("Medley creado y aadido al setlist"),await $();const de=await $m(e);if(de){const ve=de.find(Pe=>Pe.id===y.id);ve&&x(ve)}}else q.error("Medley creado pero no se pudo aadir al setlist")},fe=R=>{L(R),le(`${R.name} (copia)`),M(!0)},ee=async()=>{if(!U||!z.trim())return;u(!0),M(!1),await o8(U.id,z.trim())?(q.success("Setlist duplicado correctamente"),await $()):q.error("No se pudo duplicar el setlist"),L(null),le(""),u(!1)};return l?d.jsx("div",{className:"text-center py-8",children:"Cargando setlists..."}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Setlists"}),t&&d.jsx(Ne,{onClick:()=>h(!c),variant:c?"secondary":"primary",children:c?"Cancelar":"Crear Setlist"})]}),!t&&d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-yellow-800 text-sm",children:"Solo los miembros principales pueden gestionar canciones y setlists."})}),c&&t&&d.jsxs("form",{onSubmit:T,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:p?"Editar Setlist":"Nuevo Setlist"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(mt,{label:"Nombre *",value:S.name,onChange:R=>C({...S,name:R.target.value}),required:!0}),d.jsx(mt,{label:"Duracin estimada (minutos)",type:"number",value:S.estimated_duration_minutes,onChange:R=>C({...S,estimated_duration_minutes:R.target.value}),min:"1"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),d.jsx("textarea",{value:S.description,onChange:R=>C({...S,description:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Descripcin breve del setlist..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Ne,{type:"submit",variant:"primary",children:p?"Actualizar":"Crear"}),d.jsx(Ne,{type:"button",variant:"secondary",onClick:je,children:"Cancelar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-1 space-y-3",children:[n.map(R=>{var ae,ce;return d.jsxs("div",{className:`p-4 rounded-lg cursor-pointer transition-all ${(y==null?void 0:y.id)===R.id?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-100"}`,onClick:()=>Q(R),children:[d.jsx("h4",{className:`font-bold ${(y==null?void 0:y.id)===R.id?"text-white":"text-gray-800"}`,children:R.name}),d.jsxs("p",{className:`text-sm ${(y==null?void 0:y.id)===R.id?"text-blue-100":"text-gray-500"}`,children:[(((ae=R.songs)==null?void 0:ae.length)||0)+(((ce=R.medleys)==null?void 0:ce.length)||0)," items"]})]},R.id)}),n.length===0&&!l&&d.jsx("p",{className:"text-center text-gray-500 py-4",children:"No hay setlists. Crea el primero!"})]}),d.jsx("div",{className:"md:col-span-2",children:y?d.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800",children:y.name}),d.jsx("p",{className:"text-sm text-gray-500",children:y.description})]}),t&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Ne,{variant:"primary",onClick:()=>re(!0),children:[d.jsx(Lm,{className:"mr-1"})," Crear Medley"]}),d.jsxs(Ne,{variant:"secondary",onClick:()=>F(y),children:[d.jsx(EE,{className:"mr-2"})," Editar"]}),d.jsxs(Ne,{variant:"secondary",onClick:()=>fe(y),children:[d.jsx(S8,{className:"mr-2"})," Duplicar"]}),d.jsx(Ne,{variant:"danger",onClick:()=>ne(y),children:"Eliminar"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Canciones en el Setlist"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(GU,{sensors:Me,collisionDetection:V8,onDragEnd:$e,children:d.jsx(sz,{items:me.map(R=>R.id),strategy:rz,children:me.map((R,ae)=>d.jsx(gz,{item:R,canManageSetlists:t,songs:i,onRemoveSong:ge,onSongAddedToMedley:pe,onSongRemovedFromMedley:Z,onMedleyRenamed:V,onMedleyDeleted:W},`${R.type}-${R.id}-${ae}`))})}),me.length===0&&d.jsx("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Este setlist est vaco."})]})]}),t&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Aadir Cancin al Setlist"}),d.jsx(mt,{placeholder:"Buscar cancin...",value:te,onChange:R=>H(R.target.value),className:"mb-2"}),d.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:[Oe(y).filter(R=>{var ae;return R.title.toLowerCase().includes(te.toLowerCase())||((ae=R.artist)==null?void 0:ae.toLowerCase().includes(te.toLowerCase()))}).map(R=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-medium text-sm",children:[R.type==="medley"&&d.jsx("span",{className:"text-blue-600 mr-1",children:""}),R.title]}),d.jsx("p",{className:"text-xs text-gray-500",children:R.type==="medley"?"Medley":R.artist})]}),d.jsx(Ne,{onClick:()=>_e(y.id,R.id),children:d.jsx(Lm,{})})]},R.id)),Oe(y).length===0&&d.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Todas las canciones ya estn en este setlist."})]})]})]})]}):d.jsx("div",{className:"text-center py-12 text-gray-500",children:d.jsx("p",{children:"Selecciona un setlist para ver los detalles"})})})]}),j&&_&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirmar Eliminacin"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:['Ests seguro de que quieres eliminar el setlist "',_.name,'"? Esta accin no se puede deshacer.']}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(Ne,{variant:"secondary",onClick:()=>{b(!1),N(null)},children:"Cancelar"}),d.jsx(Ne,{variant:"danger",onClick:se,children:"Eliminar"})]})]})}),P&&U&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Duplicar Setlist"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Introduce un nombre para el nuevo setlist:"}),d.jsx(mt,{value:z,onChange:R=>le(R.target.value),className:"mb-6",autoFocus:!0}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx(Ne,{variant:"secondary",onClick:()=>{M(!1),L(null),le("")},children:"Cancelar"}),d.jsx(Ne,{variant:"primary",onClick:ee,disabled:!z.trim(),children:"Duplicar"})]})]})}),Ee&&y&&d.jsx(pz,{isOpen:Ee,onClose:()=>re(!1),groupId:e,availableSongs:Oe(y),onMedleyCreated:R=>{K(R),re(!1)}})]})}function yz({groupId:e,canManageSongs:t=!0,canManageSetlists:n=!0}){const[r,i]=v.useState("songs");return d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[d.jsx("button",{onClick:()=>i("songs"),className:`${r==="songs"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Pool de Canciones"}),d.jsx("button",{onClick:()=>i("setlists"),className:`${r==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Setlists"})]})}),d.jsxs("div",{className:"p-6",children:[r==="songs"&&d.jsx(h8,{groupId:e,canManageSongs:t}),r==="setlists"&&d.jsx(vz,{groupId:e,canManageSetlists:n})]})]})})}function xz(){const{id:e}=Hb(),[t,n]=v.useState(null),[r,i]=v.useState([]),[o,l]=v.useState([]),[u,c]=v.useState(!1),[h,p]=v.useState(!1),[m,y]=v.useState(!1),[x,S]=v.useState(null),[C,j]=v.useState(null),[b,_]=v.useState(!0),[N,P]=v.useState(!1),[M,U]=v.useState(null),[L,z]=v.useState(!1),[le,te]=v.useState([]),{user:H}=Vn(),[Ee,re]=v.useState(!1),[me,be]=v.useState(!1),[Me,$]=v.useState(""),[T,F]=v.useState("overview");v.useEffect(()=>{e&&se()},[e,H]),v.useEffect(()=>{e&&H&&ne()},[e,H,r]);const ne=async()=>{if(H)try{const V=await ut(()=>oe.from("users").select("role").eq("id",H.id).single(),"Error checking permissions");V&&(U(V.role),P(V.role==="admin"));const W=r.find(K=>K.user_id===H.id);re(!!W),z((W==null?void 0:W.role_in_group)==="principal"||!1),(W==null?void 0:W.role_in_group)==="principal"&&P(!0)}catch(V){console.error("Error checking permissions:",V)}},se=async()=>{try{const V=await ut(()=>oe.from("groups").select("*").eq("id",e).single(),"Error loading group");V&&n(V);const W=await ut(()=>oe.from("group_members").select(`
            *,
            group_member_roles!group_member_roles_group_member_id_fkey (
              role:roles (
                id,
                name
              )
            )
          `).eq("group_id",e).order("role_in_group",{ascending:!1}).order("name"),"Error loading members");if(W){const fe=W.map(ee=>({...ee,instruments:(ee.group_member_roles||[]).filter(R=>R==null?void 0:R.role).map(R=>({id:R.role.id,name:R.role.name}))}));i(fe)}const K=await ut(()=>oe.from("roles").select("*").eq("group_id",e).order("name"),"Error loading roles");K&&l(K)}catch(V){console.error("Error fetching group data:",V)}finally{_(!1)}},_e=async V=>{if(!(!H||!e))try{await ut(()=>oe.rpc("link_group_member",{p_member_id:V,p_user_id:H.id,p_group_id:e}),"Error linking member"),q.success("Te has vinculado correctamente!"),await se(),await ne()}catch(W){console.error("Error linking member:",W)}},ge=V=>{S(V),p(!0)},$e=V=>{j(V),y(!0)},je=async()=>{if(C)try{await ut(()=>oe.from("group_members").delete().eq("id",C.id),"Error deleting member"),q.success("Miembro eliminado correctamente"),y(!1),j(null),se()}catch(V){console.error("Error deleting member:",V)}},Oe=r.filter(V=>V.role_in_group==="principal"),Q=r.filter(V=>V.role_in_group==="sustituto"),pe=(V,W)=>d.jsxs("div",{children:[d.jsx("div",{className:"bg-gray-50 px-3 py-2",children:d.jsx("h3",{className:"text-sm font-medium text-gray-700",children:W})}),d.jsx("div",{className:"divide-y",children:V.map(K=>d.jsxs("div",{className:"p-3 hover:bg-gray-50",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-medium text-gray-900",children:K.name}),d.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${K.role_in_group==="principal"?"bg-indigo-100 text-indigo-700":"bg-yellow-100 text-yellow-700"}`,children:K.role_in_group==="principal"?"Principal":"Sustituto"}),!K.user_id&&d.jsx("span",{className:"text-xs text-gray-500",children:"(Sin vincular)"})]}),K.instruments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:K.instruments.map((fe,ee)=>d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[d.jsx(us,{className:"w-3 h-3 mr-1"}),fe.name]},`${K.id}-${fe.id}-${ee}`))}),K.user_id===(H==null?void 0:H.id)&&d.jsx("div",{className:"mt-2 flex items-center",children:d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:K.sync_calendar,onChange:async()=>{try{await ut(()=>oe.from("group_members").update({sync_calendar:!K.sync_calendar}).eq("id",K.id),"Error actualizando preferencias de calendario"),q.success("Preferencias de calendario actualizadas"),se()}catch(fe){console.error("Error:",fe)}},className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Sincronizar eventos al calendario"})]})}),K.user_id===(H==null?void 0:H.id)&&K.sync_calendar&&d.jsxs("button",{onClick:()=>Z(K.id),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 flex items-center",children:[d.jsx(md,{className:"w-4 h-4 mr-1"}),"Obtener enlace de suscripcin al calendario"]})]}),d.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[(M==="admin"||K.user_id===(H==null?void 0:H.id))&&d.jsx("button",{onClick:()=>ge(K),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Editar miembro",children:d.jsx(kS,{className:"w-4 h-4"})}),(M==="admin"||L)&&d.jsx("button",{onClick:()=>$e(K),className:"p-1 text-red-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar miembro",children:d.jsx(Vg,{className:"w-4 h-4"})})]})]}),!K.user_id&&!Ee&&d.jsxs(Ne,{onClick:()=>_e(K.id),variant:"secondary",className:"w-full mt-2 text-sm py-1",children:[d.jsx($w,{className:"w-3 h-3 mr-1"}),"Soy este miembro"]})]},K.id))})]}),Z=async V=>{try{const{data:W,error:K}=await oe.rpc("get_group_calendar",{p_group_id:t==null?void 0:t.id,p_member_id:V});if(K)throw K;if(!W)throw new Error("No se pudo generar el calendario");const fe=new Blob([W],{type:"text/calendar"}),ee=new File([fe],"calendar.ics",{type:"text/calendar"}),{error:R}=await oe.storage.from("calendars").upload(`${t==null?void 0:t.id}/${V}/calendar.ics`,ee,{cacheControl:"0",upsert:!0});if(R)throw console.error("Upload error:",R),R;const{data:{publicUrl:ae}}=await oe.storage.from("calendars").getPublicUrl(`${t==null?void 0:t.id}/${V}/calendar.ics`);if(ae)$(ae),be(!0);else throw new Error("No se pudo generar el enlace pblico")}catch(W){console.error("Error:",W),W.message==="new row violates row-level security policy"?q.error("Error de permisos al generar el calendario. Por favor, contacta con el administrador."):q.error("Error al generar el enlace del calendario")}};return b?d.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:d.jsx(ua,{className:"w-8 h-8 animate-spin text-indigo-600"})}):t?d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),d.jsx("p",{className:"text-gray-500 mt-1",children:"Gestiona miembros y disponibilidad"})]}),(N||L)&&(!Ee||M==="admin"||L)&&d.jsxs(Ne,{onClick:()=>c(!0),className:"flex items-center space-x-2",children:[d.jsx(Gg,{className:"w-5 h-5"}),d.jsx("span",{children:M==="admin"||L?"Aadir Miembro":"Unirse al Grupo"})]})]}),d.jsx("div",{className:"border-b border-gray-200 mb-6",children:d.jsxs("nav",{className:"-mb-px flex space-x-8",children:[d.jsxs("button",{onClick:()=>F("overview"),className:`${T==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx(md,{className:"w-4 h-4"}),d.jsx("span",{children:"Vista General"})]}),d.jsxs("button",{onClick:()=>F("setlists"),className:`${T==="setlists"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[d.jsx(hA,{className:"w-4 h-4"}),d.jsx("span",{children:"Canciones y Setlists"})]})]})}),T==="overview"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-4 border-b",children:d.jsx("h2",{className:"text-lg font-semibold",children:"Miembros del Grupo"})}),r.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx($w,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),d.jsxs("p",{className:"text-gray-500",children:["No hay miembros an. ",N?'Haz clic en "Unirse al Grupo" para ser el primer miembro!':"Espera a que alguien se una al grupo."]})]}):d.jsxs("div",{className:"divide-y divide-gray-200",children:[Oe.length>0&&pe(Oe,"Miembros Principales"),Q.length>0&&pe(Q,"Miembros Sustitutos")]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"p-4 border-b",children:d.jsx("h2",{className:"text-lg font-semibold",children:"Disponibilidad"})}),d.jsx("div",{className:"p-4",children:d.jsx(GF,{members:r,onAvailableDatesChange:te,groupName:t.name})})]})]}),t&&e&&d.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-md",children:d.jsx(u8,{groupId:e,canManageEvents:M==="admin"||L,availableDates:le,members:r})})]}),T==="setlists"&&t&&e&&d.jsx(yz,{groupId:e,canManageSongs:M==="admin"||L,canManageSetlists:M==="admin"||L}),t&&(N||L)&&(!Ee||M==="admin"||L)&&d.jsx(hI,{isOpen:u,onClose:()=>c(!1),groupId:t.id,instruments:o,onMemberAdded:se,isEmptyGroup:r.length===0,userRole:M}),x&&d.jsx(pI,{isOpen:h,onClose:()=>{p(!1),S(null)},member:x,instruments:o,onMemberUpdated:se,userRole:M}),d.jsx(c8,{isOpen:m,onClose:()=>{y(!1),j(null)},onConfirm:je,title:"Eliminar Miembro",message:`Ests seguro de que quieres eliminar a ${C==null?void 0:C.name}? Esta accin no se puede deshacer.`}),d.jsx(d8,{isOpen:me,onClose:()=>be(!1),calendarUrl:Me})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grupo no encontrado"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"El grupo que buscas no existe o no tienes acceso a l."})]})}function S1({children:e}){console.log("ProtectedRoute mounted");const{user:t}=Vn(),n=bi();return console.log("ProtectedRoute check:",{user:t,currentPath:n.pathname}),t?d.jsx(d.Fragment,{children:e}):(console.log("No user in ProtectedRoute, redirecting to login"),d.jsx(SO,{to:"/login",state:{returnTo:n.pathname+n.search},replace:!0}))}function wz(){return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Poltica de Privacidad"}),d.jsxs("div",{className:"prose prose-indigo",children:[d.jsxs("p",{className:"mb-4",children:["ltima actualizacin: ",new Date().toLocaleDateString()]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"1. Informacin que Recopilamos"}),d.jsx("p",{children:"Band Manager recopila la siguiente informacin personal:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Direccin de correo electrnico"}),d.jsx("li",{children:"Nombre"}),d.jsx("li",{children:"Informacin de perfil de usuario"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Uso de Permisos"}),d.jsx("p",{children:"Nuestra aplicacin requiere ciertos permisos para funcionar correctamente:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Acceso a Internet:"})," Necesario para sincronizar datos con nuestros servidores, guardar la informacin de tu banda y permitir la colaboracin entre miembros."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Almacenamiento:"})," Utilizado para guardar archivos localmente (como partituras, letras de canciones y configuraciones de la aplicacin) mejorando as el rendimiento y permitiendo el uso sin conexin."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Notificaciones:"})," Para mantenerte informado sobre actualizaciones importantes, mensajes de otros miembros de la banda y recordatorios de eventos."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Cmara (opcional):"})," Solo si decides subir fotos directamente desde la aplicacin para tu perfil o contenido de la banda."]})]}),d.jsx("p",{className:"mb-4",children:"Todos estos permisos son utilizados exclusivamente para proporcionar y mejorar las funcionalidades de la aplicacin. No compartimos ninguna informacin recopilada a travs de estos permisos con terceros."}),d.jsx("p",{children:"Puedes gestionar estos permisos en cualquier momento a travs de la configuracin de tu dispositivo. Ten en cuenta que desactivar ciertos permisos puede limitar algunas funcionalidades de la aplicacin."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"2. Cmo Utilizamos su Informacin"}),d.jsx("p",{children:"Utilizamos la informacin recopilada para:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Proporcionar y mantener nuestro servicio"}),d.jsx("li",{children:"Gestionar su cuenta y membresa"}),d.jsx("li",{children:"Permitir la participacin en funciones interactivas"}),d.jsx("li",{children:"Enviar notificaciones relacionadas con el servicio"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"3. Seguridad de los Datos"}),d.jsx("p",{children:"La seguridad de sus datos es importante para nosotros. Utilizamos Supabase como nuestra plataforma de base de datos y autenticacin, que implementa estndares de seguridad de la industria para proteger su informacin personal."})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Sus Derechos"}),d.jsx("p",{children:"Usted tiene derecho a:"}),d.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[d.jsx("li",{children:"Acceder a sus datos personales"}),d.jsx("li",{children:"Corregir datos inexactos"}),d.jsx("li",{children:"Solicitar la eliminacin de sus datos"}),d.jsx("li",{children:"Oponerse al procesamiento de sus datos"})]})]}),d.jsxs("section",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Contacto"}),d.jsxs("p",{children:["Si tiene preguntas sobre esta Poltica de Privacidad, puede contactarnos en:",d.jsx("br",{}),d.jsx("a",{href:"mailto:privacy@bandmanager.com",className:"text-indigo-600 hover:text-indigo-800",children:"privacy@bandmanager.com"})]})]})]})]})}function _z(){console.log("AcceptInvitation component mounted");const[e]=Yb(),t=e.get("token"),n=Gr(),{user:r}=Vn(),[i,o]=v.useState(!0),[l,u]=v.useState(null);v.useEffect(()=>{if(console.log("AcceptInvitation useEffect triggered",{token:t,user:r,groupMemberId:e.get("group_member_id"),currentPath:window.location.pathname+window.location.search}),!t){console.log("No token found"),q.error("Token de invitacin no vlido"),n("/");return}(async()=>{try{if(!r){const x=`/accept-invitation?token=${t}&group_member_id=${e.get("group_member_id")}`;console.log("No user found, redirecting to login with return URL:",x),n("/login",{state:{returnTo:x}});return}const{data:p,error:m}=await oe.rpc("get_invitation_details",{p_token:t});if(console.log("Invitation check result:",{invitationData:p,invitationError:m}),m)throw m;if(!p||p.length===0){q.error("Invitacin no encontrada o ya procesada"),n("/");return}const y=p[0];if(console.log("Invitation data:",y),r.email!==y.email){q.error("Esta invitacin es para otro correo electrnico"),n("/");return}if(!e.get("group_member_id")){const x=new URLSearchParams(e);x.set("group_member_id",y.group_member_id),n(`${location.pathname}?${x.toString()}`,{replace:!0})}u({groupName:y.group_name,role:y.role_in_group}),o(!1)}catch(p){console.error("Error checking invitation:",p),q.error(p.message||"Error al verificar la invitacin"),n("/")}})()},[t,r,n,e]);const c=async h=>{try{o(!0);const{data:p,error:m}=await oe.rpc("get_invitation_details",{p_token:t});if(m)throw m;if(!p||p.length===0)throw new Error("Invitacin no encontrada");const{group_member_id:y}=p[0],{error:x}=await oe.rpc("handle_group_invitation",{p_group_member_id:y,p_accept:h});if(x)throw x;q.success(h?"Invitacin aceptada":"Invitacin rechazada"),n("/")}catch(p){console.error("Error handling invitation:",p),q.error(p.message)}finally{o(!1)}};return i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"}),d.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando invitacin..."})]})}):l?d.jsx("div",{className:"max-w-lg mx-auto mt-16 p-6",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Invitacin a Grupo"}),d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("p",{className:"text-lg mb-2",children:["Has sido invitado a unirte a ",d.jsx("strong",{children:l.groupName})]}),d.jsxs("p",{className:"text-gray-600",children:["Rol: ",d.jsx("span",{className:"capitalize",children:l.role})]})]}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsx(Ne,{onClick:()=>c(!0),loading:i,className:"bg-green-500 hover:bg-green-600",children:"Aceptar"}),d.jsx(Ne,{onClick:()=>c(!1),variant:"secondary",loading:i,className:"bg-red-500 hover:bg-red-600 text-white",children:"Rechazar"})]})]})}):null}function bz(){const[e,t]=v.useState(""),[n,r]=v.useState(""),[i,o]=v.useState(!1),l=async u=>{u.preventDefault(),o(!0),r("");const{error:c}=await oe.auth.resetPasswordForEmail(e,{redirectTo:"https://bandplan.netlify.app/reset-password"});o(!1),r(c?"Error: "+c.message:"Revisa tu correo para continuar el proceso!")};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Olvidaste tu contrasea?"}),d.jsxs("form",{onSubmit:l,className:"space-y-6",children:[d.jsx(mt,{label:"Email",type:"email",value:e,onChange:u=>t(u.target.value),required:!0,placeholder:"tu@email.com"}),d.jsx(Ne,{type:"submit",loading:i,fullWidth:!0,children:"Enviar enlace"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n}),d.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:d.jsx(os,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Volver al login"})})]})})}function Sz(){const[e,t]=v.useState(""),[n,r]=v.useState(""),[i,o]=v.useState(!1),[l,u]=v.useState(!1),[c,h]=v.useState(!1),p=Gr(),m=bi();v.useEffect(()=>{(async()=>{var S;console.log("Verificando autenticacin para reset de contrasea");try{const{data:C}=await oe.auth.getSession(),j=new URLSearchParams(m.search),b=j.get("token"),_=j.get("type"),N=(S=m.state)==null?void 0:S.resetCode,P=localStorage.getItem("recovery_token");if(console.log("Verificando tokens de recuperacin:",{urlToken:(b==null?void 0:b.substring(0,10))+"..."||"No presente",stateResetCode:N?"Presente":"No presente",storedToken:P?"Presente":"No presente",type:_}),console.log("Sesin activa:",!!C.session),b&&_==="recovery")console.log("Token de recuperacin vlido detectado en URL"),h(!0);else if(N){console.log("Cdigo de recuperacin detectado en state"),h(!0);try{await oe.auth.verifyOtp({token_hash:N,type:"recovery"})}catch(M){console.warn("Error al verificar OTP con resetCode:",M)}}else if(P){console.log("Token de recuperacin encontrado en localStorage"),h(!0),localStorage.removeItem("recovery_token");try{await oe.auth.verifyOtp({token_hash:P,type:"recovery"})}catch(M){console.warn("Error al verificar OTP con storedToken:",M)}}else C.session?(console.log("Sesin activa detectada, permitiendo reset de contrasea"),h(!0)):l||(console.log("No hay token de recuperacin vlido ni sesin activa"),p("/login"))}catch(C){console.error("Error al verificar autenticacin:",C),p("/login")}})()},[m,p,l]);const y=async x=>{x.preventDefault(),o(!0),r("");try{const{error:S}=await oe.auth.updateUser({password:e});if(S)throw S;u(!0),r("Contrasea actualizada correctamente! Redirigiendo al inicio..."),setTimeout(()=>{p("/",{replace:!0})},2e3)}catch(S){r("Error: "+S.message)}finally{o(!1)}};return d.jsx("div",{className:"max-w-md mx-auto mt-16",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[d.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Restablecer contrasea"}),c?d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:y,className:"space-y-6",children:[d.jsx(mt,{label:"Nueva contrasea",type:"password",value:e,onChange:x=>t(x.target.value),required:!0,placeholder:""}),d.jsx(Ne,{type:"submit",loading:i,fullWidth:!0,children:"Actualizar contrasea"})]}),n&&d.jsx("div",{className:`mt-4 p-3 rounded-lg ${n.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:n})]}):d.jsxs("div",{className:"py-6 text-center",children:[d.jsx("div",{className:"animate-pulse inline-block p-3 mb-4 rounded-full bg-indigo-100",children:d.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Verificando token de recuperacin..."}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Si no eres redirigido automticamente, solicita un",d.jsx(os,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-500",children:" nuevo enlace"}),"."]})]})]})})}function Ez(){const{setUser:e,setSession:t}=Vn();return v.useEffect(()=>{const n=new URLSearchParams(window.location.search),r=n.get("token"),i=n.get("type"),o=window.location.hash;console.log("App: Verificando token en URL:",{token:r?r.substring(0,10)+"...":null,type:i,hash:o.length>0?o.substring(0,20)+"...":null}),r&&i==="recovery"&&window.location.pathname!=="/reset-password"?(console.log("App: Token PKCE de recuperacin detectado, redirigiendo a /reset-password"),window.location.replace(`/reset-password?token=${r}&type=${i}`)):o.includes("access_token=")&&o.includes("type=recovery")&&window.location.pathname!=="/reset-password"&&(console.log("App: Token hash de recuperacin detectado, redirigiendo a /reset-password"),window.location.replace("/reset-password"+o))},[]),v.useEffect(()=>{console.log("App mounted"),oe.auth.getSession().then(({data:{session:r}})=>{console.log("Initial session:",r),t(r),e((r==null?void 0:r.user)??null)});const{data:{subscription:n}}=oe.auth.onAuthStateChange((r,i)=>{console.log("Auth state changed:",i),t(i),e((i==null?void 0:i.user)??null)});return()=>n.unsubscribe()},[e,t]),d.jsx(MO,{children:d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(yA,{}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsxs(NO,{children:[d.jsx(oi,{path:"/login",element:d.jsx(xA,{})}),d.jsx(oi,{path:"/register",element:d.jsx(wA,{})}),d.jsx(oi,{path:"/forgot-password",element:d.jsx(bz,{})}),d.jsx(oi,{path:"/reset-password",element:d.jsx(Sz,{})}),d.jsx(oi,{path:"/accept-invitation",element:d.jsx(_z,{})}),d.jsx(oi,{path:"/",element:d.jsx(S1,{children:d.jsx(fI,{})})}),d.jsx(oi,{path:"/group/:id",element:d.jsx(S1,{children:d.jsx(xz,{})})}),d.jsx(oi,{path:"/privacy-policy",element:d.jsx(wz,{})})]})}),d.jsx(kM,{position:"top-right"})]})})}Lb(document.getElementById("root")).render(d.jsx(v.StrictMode,{children:d.jsx(Ez,{})}));export{E1 as g};
